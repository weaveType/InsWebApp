<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper      
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"      
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
	@subject     : 회사정보 관련 처리를 담당하는 Sql Mapper
	@description : 회사정보 관련 처리를 담당하는 Sql Mapper
	@author      : Inswave
	@since       : 2025/06/30
	@modification
	===========================================================
	DATE              AUTHOR             DESC
	===========================================================
	2025/06/30              Inswave             최초 생성
 -->
<mapper namespace="com.demo.proworks.domain.corporate">
    <insert id="insertCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo">
<!-- 회사정보를 등록한다. -->	

INSERT INTO COMPANYS   /* QueryID : com.demo.proworks.domain.corporate.insertCorporate */
( 
    ID
    <if test="businessNumber        != null"> , BUSINESS_NUMBER        </if>
    <if test="industry              != null"> , INDUSTRY               </if>
    <if test="empCount             != null"> , EMP_COUNT              </if>
    <if test="description           != null"> , DESCRIPTION            </if>
    <if test="companyName          != null"> , COMPANY_NAME           </if>
    <if test="companyLogo          != null"> , COMPANY_LOGO           </if>
    <if test="companyImage         != null"> , COMPANY_IMAGE          </if>
    <if test="email                != null"> , EMAIL                  </if>
    <if test="password             != null"> , PASSWORD               </if>
    <if test="businessCertificate  != null"> , BUSINESS_CERTIFICATE   </if>
    <if test="logoFileName         != null"> , LOGO_FILE_NAME         </if>
)
VALUES  
( 
    #{id}
    <if test="businessNumber        != null"> , #{businessNumber}        </if>
    <if test="industry              != null"> , #{industry}              </if>
    <if test="empCount             != null"> , #{empCount}               </if>
    <if test="description           != null"> , #{description}           </if>
    <if test="companyName          != null"> , #{companyName}           </if>
    <if test="companyLogo          != null"> , #{companyLogo}           </if>
    <if test="companyImage         != null"> , #{companyImage}          </if>
    <if test="email                != null"> , #{email}                 </if>
    <if test="password             != null"> , #{password}              </if>
    <if test="businessCertificate  != null"> , #{businessCertificate}   </if>
    <if test="logoFileName         != null"> , #{logoFileName}          </if>
)

</insert>	
	
    <update id="updateCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo">
    	<!-- 회사정보를 갱신한다. -->
    	
        UPDATE COMPANYS    /* QueryID : com.demo.proworks.domain.corporate.updateCorporate */      
      	  SET  
                ID              = #{id}                     	                       
            <if test="businessNumber!= null"> , BUSINESS_NUMBER = #{businessNumber} </if>
            <if test="industry       != null"> , INDUSTRY        = #{industry}        </if>
            <if test="empCount      != null"> , EMP_COUNT       = #{empCount}       </if>
            <if test="description    != null"> , DESCRIPTION     = #{description}     </if>
            <if test="companyName   != null"> , COMPANY_NAME    = #{companyName}    </if>
            <if test="companyLogo   != null"> , COMPANY_LOGO    = #{companyLogo}    </if>
            <if test="companyImage  != null"> , COMPANY_IMAGE   = #{companyImage}   </if>                 
        WHERE   
                ID              = #{id}             
    </update>
	
    <delete id="deleteCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo">
    	<!-- 회사정보를 삭제한다. -->
    	
        DELETE FROM COMPANYS   /* QueryID : com.demo.proworks.domain.corporate.deleteCorporate */ 
        WHERE   
                ID              = #{id}                     
    </delete>
	
    <select id="selectCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo" resultType="com.demo.proworks.domain.corporate.vo.CorporateVo">
    	<!-- 회사정보를 상세 조회한다. -->	
        SELECT     /* QueryID : com.demo.proworks.domain.corporate.selectCorporate */
            ID as id, BUSINESS_NUMBER as businessNumber, INDUSTRY as industry, EMP_COUNT as empCount, DESCRIPTION as description, COMPANY_NAME as companyName, COMPANY_LOGO as companyLogo, COMPANY_IMAGE as companyImage
        FROM COMPANYS 
        WHERE 
                ID              = #{id}             			
    </select>
	
    <select id="selectListCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo" resultType="com.demo.proworks.domain.corporate.vo.CorporateVo">
    	<!-- 회사정보 목록을 조회한다. -->
           SELECT    /* QueryID : com.demo.proworks.domain.corporate.selectListCorporate */
               ID as id, BUSINESS_NUMBER as businessNumber, INDUSTRY as industry, EMP_COUNT as empCount, DESCRIPTION as description, COMPANY_NAME as companyName, COMPANY_LOGO as companyLogo, COMPANY_IMAGE as companyImage		       
           FROM (
               SELECT  S.*, CEIL( (@ROWNUM:=@ROWNUM+1) / #{pageSize} ) AS PAGE
               FROM (				
                   SELECT 
                       *  		                  
                   FROM COMPANYS
                   WHERE  1=1    		
                        <if test="scBusinessNumber != null and scBusinessNumber != ''">
                             AND BUSINESS_NUMBER like '%${scBusinessNumber}%'
                        </if>
                        <if test="scIndustry != null and scIndustry != ''">
                             AND INDUSTRY like '%${scIndustry}%'
                        </if>
                        <if test="scEmpCount != null and scEmpCount != ''">
                             AND EMP_COUNT like '%${scEmpCount}%'
                        </if>
                        <if test="scDescription != null and scDescription != ''">
                             AND DESCRIPTION like '%${scDescription}%'
                        </if>
                        <if test="scCompanyName != null and scCompanyName != ''">
                             AND COMPANY_NAME like '%${scCompanyName}%'
                        </if>
                        <if test="scCompanyLogo != null and scCompanyLogo != ''">
                             AND COMPANY_LOGO like '%${scCompanyLogo}%'
                        </if>
                        <if test="scCompanyImage != null and scCompanyImage != ''">
                             AND COMPANY_IMAGE like '%${scCompanyImage}%'
                        </if>	     																														
               ) S, (SELECT @ROWNUM := 0) TMP
           ) A
            WHERE PAGE = #{pageIndex}
    </select>
	
    <select id="selectListCountCorporate" parameterType="com.demo.proworks.domain.corporate.vo.CorporateVo" resultType="long">
    <!-- 회사정보 목록의 카운트를 조회한다. -->
    
         SELECT    /* QueryID : com.demo.proworks.domain.corporate.selectListCountCorporate */
             COUNT(*) totcnt  		                  
         FROM COMPANYS
         WHERE  1=1    		
            <if test="scBusinessNumber != null and scBusinessNumber != ''">
                 AND BUSINESS_NUMBER like '%${scBusinessNumber}%'
            </if>
            <if test="scIndustry != null and scIndustry != ''">
                 AND INDUSTRY like '%${scIndustry}%'
            </if>
            <if test="scEmpCount != null and scEmpCount != ''">
                 AND EMP_COUNT like '%${scEmpCount}%'
            </if>
            <if test="scDescription != null and scDescription != ''">
                 AND DESCRIPTION like '%${scDescription}%'
            </if>
            <if test="scCompanyName != null and scCompanyName != ''">
                 AND COMPANY_NAME like '%${scCompanyName}%'
            </if>
            <if test="scCompanyLogo != null and scCompanyLogo != ''">
                 AND COMPANY_LOGO like '%${scCompanyLogo}%'
            </if>
            <if test="scCompanyImage != null and scCompanyImage != ''">
                 AND COMPANY_IMAGE like '%${scCompanyImage}%'
            </if>
    </select>

</mapper>
