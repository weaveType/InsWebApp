<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
    <head meta_screenName="ì±„ìš©ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ">
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<!-- ê³µê³  ëª©ë¡ ì¡°íšŒìš© -->
        		<w2:dataMap baseNode="map" id="dmp_postVo" style="">
        			<w2:keyInfo>
        				<w2:key dataType="text" id="pageIndex" name="í˜ì´ì§€_ë²ˆí˜¸" defaultValue="1"></w2:key>
        				<w2:key dataType="text" id="pageSize" name="í˜ì´ì§€_ê±´ìˆ˜" defaultValue="10"></w2:key>
        				<w2:key dataType="text" id="companyId" name="íšŒì‚¬_ID" defaultValue=""></w2:key>
        			</w2:keyInfo>
        			<w2:data use="false"></w2:data>
        		</w2:dataMap>



        		<!-- ê³µê³  ëª©ë¡ ë°ì´í„° -->
        		<w2:dataList baseNode="list" id="dlt_postVoList" repeatNode="map" saveRemovedData="true" style="">
        			<w2:columnInfo>
        				<w2:column dataType="text" id="jobPostingId" name="job_posting_id"></w2:column>
        				<w2:column dataType="text" id="companyId" name="company_id"></w2:column>
        				<w2:column dataType="text" id="title" name="title"></w2:column>
        				<w2:column dataType="text" id="description" name="description"></w2:column>
        				<w2:column dataType="text" id="requiredSkills" name="required_skills"></w2:column>
        				<w2:column dataType="text" id="experienceLevel" name="experience_level"></w2:column>
        				<w2:column dataType="text" id="salaryRange" name="salary_range"></w2:column>
        				<w2:column dataType="text" id="location" name="location"></w2:column>
        				<w2:column dataType="text" id="workType" name="work_type"></w2:column>
        				<w2:column dataType="text" id="preferredDeveloperTypes" name="preferred_developer_types"></w2:column>
        				<w2:column dataType="text" id="expiresAt" name="expires_at"></w2:column>
        				<w2:column dataType="text" id="postedAt" name="posted_at"></w2:column>
        				<w2:column dataType="text" id="status" name="status"></w2:column>
        			</w2:columnInfo>
        		</w2:dataList>

        		<!-- ê³µê³  ìƒì„¸ ë°ì´í„° -->
        		<w2:dataMap baseNode="map" id="dmp_postVoDetail" style="">
        			<w2:keyInfo>
        				<w2:key dataType="text" id="jobPostingId" name="job_posting_id"></w2:key>
        				<w2:key dataType="text" id="companyId" name="company_id"></w2:key>
        				<w2:key dataType="text" id="title" name="title"></w2:key>
        				<w2:key dataType="text" id="description" name="description"></w2:key>
        				<w2:key dataType="text" id="requiredSkills" name="required_skills"></w2:key>
        				<w2:key dataType="text" id="experienceLevel" name="experience_level"></w2:key>
        				<w2:key dataType="text" id="salaryRange" name="salary_range"></w2:key>
        				<w2:key dataType="text" id="location" name="location"></w2:key>
        				<w2:key dataType="text" id="workType" name="work_type"></w2:key>
        				<w2:key dataType="text" id="preferredDeveloperTypes" name="preferred_developer_types"></w2:key>
        				<w2:key dataType="text" id="expiresAt" name="expires_at"></w2:key>
        				<w2:key dataType="text" id="postedAt" name="posted_at"></w2:key>
        				<w2:key dataType="text" id="status" name="status"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        	</w2:dataCollection>
        	<w2:workflowCollection />
        	


        	<!-- ê¸°ì—…ìš© ê³µê³  ëª©ë¡ ì¡°íšŒ (ìì‹ ì˜ ê³µê³ ë§Œ) -->
    	<xf:submission id="sbm_selectPostVoList" ref='data:json,{"id":"dmp_postVo","key":"postVo"}'
    		target='data:json,{"id":"dlt_postVoList","key":"elData.postVoList"}' action="/InsWebApp/POS0005List.pwkjson" method="post"
    		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
    		processMsg="ìš°ë¦¬ íšŒì‚¬ì˜ ê³µê³ ì •ë³´ë¥¼ ì¡°íšŒ ì¤‘ì…ë‹ˆë‹¤." ev:submit="" ev:submitdone="scwin.sbm_postList_submitdone" ev:submiterror="" abortTrigger="">
    	</xf:submission>

        	<!-- ê³µê³  ìˆ˜ì • -->
        	<xf:submission id="sbm_updatePostVo" ref='data:json,{"id":"dmp_postVoDetail","key":"postVo"}'
        		target="" action="/InsWebApp/POS0001Upd.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="ê³µê³ ì •ë³´ë¥¼ ìˆ˜ì • ì¤‘ì…ë‹ˆë‹¤." ev:submit="" ev:submitdone="scwin.sbm_updatePost_submitdone" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<!-- ê³µê³  ì‚­ì œ -->
        	<xf:submission id="sbm_deletePostVo" ref='data:json,{"id":"dmp_postVoDetail","key":"postVo"}'
        		target="" action="/InsWebApp/POS0001Del.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="ê³µê³ ì •ë³´ë¥¼ ì‚­ì œ ì¤‘ì…ë‹ˆë‹¤." ev:submit="" ev:submitdone="scwin.sbm_deletePost_submitdone" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	
        	<xf:submission id="sbm_deleteCorporateVo" action="/InsWebApp/CP0001Del.pwkjson" method="post" mediatype="application/json"
        		ref='data:json,{"id":"dmp_corporateVoDetail","key":"corporateVo"}' target="" encoding="UTF-8" instance="" replace=""
        		errorHandler="" customHandler="" mode="asynchronous" processMsg="" ev:submit=""
        		ev:submitdone="scwin.sbm_deleteCorporateVo_submitdone" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>
        <style type="text/css"><![CDATA[
            /* ==========================================================================
               ì „ì—­ ì„¤ì •
               ========================================================================== */
            * {
                box-sizing: border-box;
            }

            /* ==========================================================================
               ë©”ì¸ ì»¨í…Œì´ë„ˆ
               ========================================================================== */
            .dashboard_container {
                min-height: 100vh;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 0;
                margin: 0;
            }

            .dashboard_content {
                padding: 40px;
                max-width: 1400px;
                margin: 0 auto;
            }

            /* ==========================================================================
               í—¤ë” ì„¹ì…˜
               ========================================================================== */
            .dashboard_header {
                text-align: center;
                margin-bottom: 50px;
                color: white;
            }
            
            .dashboard_title {
                font-size: 48px;
                font-weight: 800;
                margin-bottom: 12px;
                text-shadow: 0 4px 20px rgba(0,0,0,0.3);
                background: linear-gradient(45deg, #ffffff, #f0f8ff);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .dashboard_subtitle {
                font-size: 20px;
                font-weight: 400;
                opacity: 0.9;
                text-shadow: 0 2px 10px rgba(0,0,0,0.2);
            }

            /* ==========================================================================
               í†µê³„ ì¹´ë“œ ì„¹ì…˜
               ========================================================================== */
            .stats_grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
                margin-bottom: 50px;
            }
            
            .stat_card {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                border-radius: 24px;
                padding: 40px 35px;
                text-align: center;
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
                transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
                position: relative;
                overflow: hidden;
                cursor: pointer;
            }

            .stat_card:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
                background: rgba(255, 255, 255, 1);
            }

            .stat_card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 6px;
                background: var(--card-gradient);
                border-radius: 24px 24px 0 0;
            }

            .stat_card.blue::before { --card-gradient: linear-gradient(90deg, #4285f4, #34a853); }
            .stat_card.green::before { --card-gradient: linear-gradient(90deg, #34a853, #0f9d58); }
            .stat_card.orange::before { --card-gradient: linear-gradient(90deg, #ff9800, #f57c00); }
            .stat_card.purple::before { --card-gradient: linear-gradient(90deg, #9c27b0, #673ab7); }

            .stat_icon {
                width: 80px;
                height: 80px;
                border-radius: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 36px;
                margin: 0 auto 24px;
                background: var(--icon-bg);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            .stat_card.blue .stat_icon { --icon-bg: linear-gradient(135deg, #e3f2fd, #bbdefb); }
            .stat_card.green .stat_icon { --icon-bg: linear-gradient(135deg, #e8f5e9, #c8e6c9); }
            .stat_card.orange .stat_icon { --icon-bg: linear-gradient(135deg, #fff3e0, #ffe0b2); }
            .stat_card.purple .stat_icon { --icon-bg: linear-gradient(135deg, #f3e5f5, #e1bee7); }

            .stat_value {
                font-size: 48px;
                font-weight: 800;
                color: #1a2332;
                margin-bottom: 12px;
                background: linear-gradient(135deg, #1a2332, #2c3e50);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .stat_label {
                font-size: 18px;
                color: #64748b;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 1px;
            }

            /* ==========================================================================
               ì•¡ì…˜ ì¹´ë“œ ì„¹ì…˜
               ========================================================================== */
            .action_grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
                margin-bottom: 50px;
            }

            .action_card {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                border-radius: 24px;
                padding: 35px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
                transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
            }

            .action_card:hover {
                transform: translateY(-5px);
                box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
            }

            .action_header {
                display: flex;
                align-items: center;
                margin-bottom: 25px;
            }
            
            .action_icon {
                width: 50px;
                height: 50px;
                border-radius: 12px;
                background: linear-gradient(135deg, #667eea, #764ba2);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                color: white;
                margin-right: 16px;
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            }
            
            .action_title {
                font-size: 22px;
                font-weight: 700;
                color: #1a2332;
                margin: 0;
            }
            
            .action_description {
                color: #64748b;
                font-size: 16px;
                line-height: 1.6;
                margin-bottom: 25px;
            }

            /* ==========================================================================
               ë²„íŠ¼ ìŠ¤íƒ€ì¼
               ========================================================================== */
            .btn_primary {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 14px 32px;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
                text-decoration: none;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }
            
            .btn_primary:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
                background: linear-gradient(135deg, #5a72e7, #6a44a0);
            }
            
            .btn_secondary {
                background: rgba(255, 255, 255, 0.9);
                color: #667eea;
                border: 2px solid rgba(102, 126, 234, 0.2);
                padding: 12px 28px;
                border-radius: 12px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .btn_secondary:hover {
                background: rgba(255, 255, 255, 1);
                border-color: #667eea;
                color: #5a72e7;
                transform: translateY(-1px);
            }

            /* ==========================================================================
               ê³µê³  ê´€ë¦¬ ì„¹ì…˜
               ========================================================================== */
            .posts_section {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                border-radius: 24px;
                padding: 40px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
                margin-bottom: 30px;
            }

            .section_header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
                flex-wrap: wrap;
                gap: 20px;
            }

            .section_title {
                font-size: 28px;
                font-weight: 700;
                color: #1a2332;
                background: linear-gradient(135deg, #1a2332, #667eea);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            /* ==========================================================================
               ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ ê°œì„ 
               ========================================================================== */
            .grid_container {
                background: #f8fafc;
                border-radius: 16px;
                padding: 20px;
                border: 1px solid #e2e8f0;
            }
            
            .grid_header_controls {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
                gap: 15px;
            }

            .record_count {
                color: #64748b;
                font-size: 16px;
                font-weight: 500;
            }

            .record_number {
                color: #1a2332;
                font-weight: 700;
                font-size: 18px;
                margin: 0 5px;
            }

            .grid_actions {
                display: flex;
                gap: 12px;
                align-items: center;
            }

            .btn_grid {
                padding: 10px 20px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 1px solid #e2e8f0;
                background: white;
            }
            
            .btn_grid.refresh {
                color: #0ea5e9;
                border-color: #0ea5e9;
            }
            
            .btn_grid.refresh:hover {
                background: #0ea5e9;
                color: white;
            }
            
            .btn_grid.delete {
                color: #ef4444;
                border-color: #ef4444;
            }
            
            .btn_grid.delete:hover {
                background: #ef4444;
                color: white;
            }

            /* ==========================================================================
               ë°˜ì‘í˜• ë””ìì¸
               ========================================================================== */
            @media (max-width: 1200px) {
                .dashboard_content {
                    padding: 30px 20px;
                }

                .stats_grid {
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                    gap: 20px;
                }
                
                .action_grid {
                    grid-template-columns: 1fr;
                }
            }
            
            @media (max-width: 768px) {
                .dashboard_content {
                    padding: 20px 15px;
                }

                .dashboard_title {
                    font-size: 36px;
                }

                .dashboard_subtitle {
                    font-size: 18px;
                }

                .stats_grid {
                    grid-template-columns: 1fr;
                }

                .stat_card {
                    padding: 30px 25px;
                }
                
                .section_header {
                    flex-direction: column;
                    align-items: flex-start;
                }

                .grid_header_controls {
                    flex-direction: column;
                    align-items: flex-start;
                }
            }

            /* ==========================================================================
               ì• ë‹ˆë©”ì´ì…˜
               ========================================================================== */
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .fade-in-up {
                animation: fadeInUp 0.6s ease-out forwards;
            }

            .delay-100 { animation-delay: 0.1s; }
            .delay-200 { animation-delay: 0.2s; }
            .delay-300 { animation-delay: 0.3s; }
            .delay-400 { animation-delay: 0.4s; }
        ]]></style>
        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function () {
    console.log("=== ì±„ìš©ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ ë¡œë“œ ===");

    var userInfoStr = WebSquare.cookie.getCookie("userInfo");
    if (!userInfoStr) {
        console.warn("ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
        $p.url("/InsWebApp/ui/common/MainPage.xml");
        return;
    }

    try {
        var userInfo = JSON.parse(userInfoStr);
        if (userInfo.role !== "COMPANY") {
            console.warn("ê¸°ì—… íšŒì›ì´ ì•„ë‹™ë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
            $p.url("/InsWebApp/ui/common/MainPage.xml");
            return;
        }

        console.log("ê¸°ì—… ì •ë³´:", userInfo);

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        scwin.initializeDashboard();

        // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì ìš©
        scwin.applyAnimations();

    } catch (e) {
        console.error("ì‚¬ìš©ì ì •ë³´ íŒŒì‹± ì˜¤ë¥˜:", e);
        $p.url("/InsWebApp/ui/common/MainPage.xml");
    }
};

// ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™”
scwin.initializeDashboard = function () {
    console.log("ëŒ€ì‹œë³´ë“œ ì´ˆê¸°í™” ì‹œì‘");

    // íšŒì‚¬ ID ì„¤ì •
    var userInfoStr = WebSquare.cookie.getCookie("userInfo");
    var userInfo = JSON.parse(userInfoStr);
    var companyId = userInfo.companyId;

    if (companyId) {
        dmp_postVo.set("companyId", companyId);

        // ê³µê³  ëª©ë¡ ì¡°íšŒ (í†µê³„ëŠ” ì´ ê²°ê³¼ì—ì„œ ê³„ì‚°)
        scwin.loadPostList();
    } else {
        console.error("íšŒì‚¬ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        alert("íšŒì‚¬ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.");
    }
};

// ê³µê³  ë°ì´í„°ë¡œë¶€í„° í†µê³„ ê³„ì‚°
scwin.calculateStatistics = function (postList) {
    console.log("í†µê³„ ê³„ì‚° ì‹œì‘");

    var totalJobs = postList.length;
    var activeJobs = 0;
    var closedJobs = 0;
    var currentDate = new Date();

    console.log("í˜„ì¬ ì‹œê°„:", currentDate);

    // ê° ê³µê³ ì˜ ë§Œë£Œì¼ì„ í™•ì¸í•´ì„œ ìƒíƒœ ê³„ì‚°
    for (var i = 0; i < postList.length; i++) {
        var post = postList[i];
        var expiresAt = post.expiresAt;

        // ë§Œë£Œì¼ íŒŒì‹±
        var expirationDate = null;
        if (expiresAt) {
            // ISO 8601 í˜•ì‹ì˜ ë‚ ì§œ ì²˜ë¦¬ (ì˜ˆ: 2025-07-21T00:21:37.000Z)
            expirationDate = new Date(expiresAt);
        }

        // ë§Œë£Œ ì—¬ë¶€ í™•ì¸
        var isExpired = expirationDate && expirationDate < currentDate;

        console.log("ê³µê³  ID:", post.jobPostingId,
                   "ì œëª©:", post.title,
                   "ë§Œë£Œì¼:", expiresAt,
                   "íŒŒì‹±ëœ ë‚ ì§œ:", expirationDate,
                   "ë§Œë£Œë¨:", isExpired);

        if (isExpired) {
            closedJobs++;
        } else {
            activeJobs++;
        }
    }

    // ì¹´ìš´í„° ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ê°’ ì„¤ì •
    scwin.animateCounter(tbx_totalJobs, totalJobs);
    scwin.animateCounter(tbx_activeJobs, activeJobs);
    scwin.animateCounter(tbx_closedJobs, closedJobs);

    console.log("í†µê³„ ì—…ë°ì´íŠ¸ ì™„ë£Œ:", {
        totalJobs: totalJobs,
        activeJobs: activeJobs,
        closedJobs: closedJobs,
        currentDate: currentDate
    });
};

// ì¹´ìš´í„° ì• ë‹ˆë©”ì´ì…˜
scwin.animateCounter = function (element, targetValue) {
    var currentValue = 0;
    var increment = targetValue / 20; // 20ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì• ë‹ˆë©”ì´ì…˜
    var timer = setInterval(function() {
        currentValue += increment;
        if (currentValue >= targetValue) {
            currentValue = targetValue;
            clearInterval(timer);
        }
        element.setValue(Math.floor(currentValue).toString());
    }, 50); // 50ms ê°„ê²©
};

// ê³µê³  ëª©ë¡ ì¡°íšŒ
scwin.loadPostList = function () {
    console.log("ê³µê³  ëª©ë¡ ì¡°íšŒ ì‹œì‘");

    // í˜ì´ì§€ ë²ˆí˜¸ ì´ˆê¸°í™”
    dmp_postVo.set("pageIndex", "1");
    if (pgl_postList) {
        pgl_postList.setSelectedIndex(1);
    }

    // ì„œë²„í†µì‹  - ê³µê³ ì •ë³´ ì¡°íšŒ
    $c.sbm.execute($p, sbm_selectPostVoList);
};

// ê³µê³  ëª©ë¡ ì¡°íšŒ ì™„ë£Œ
scwin.sbm_postList_submitdone = function (e) {
    console.log("ê³µê³  ëª©ë¡ ì¡°íšŒ ì™„ë£Œ:", e.responseJSON);

    var elHeader = e.responseJSON.elHeader;
    if (elHeader && elHeader.resSuc === false) {
        console.error("ê³µê³  ëª©ë¡ ì¡°íšŒ ì—ëŸ¬:", elHeader);
        alert(`ì—ëŸ¬: ${elHeader.resMsg}`);
        return false;
    }

    var elData = e.responseJSON.elData;
    var originalPostList = elData.postVoList || [];

    // í™œì„± ê³µê³ ë§Œ í•„í„°ë§ (ë§Œë£Œë˜ì§€ ì•Šì€ ê³µê³ ë§Œ)
    var currentDate = new Date();
    var activePostList = [];

    for (var i = 0; i < originalPostList.length; i++) {
        var post = originalPostList[i];
        var expirationDate = post.expiresAt ? new Date(post.expiresAt) : null;
        var isExpired = expirationDate && expirationDate < currentDate;

        if (!isExpired) {
            activePostList.push(post);
        }
    }

    console.log("ì „ì²´ ê³µê³ :", originalPostList.length, "í™œì„± ê³µê³ :", activePostList.length);

    // ì„ íƒëœ ê³µê³  ì •ë³´ ì´ˆê¸°í™”
    dmp_postVoDetail.setEmptyValue();

    // ì´ ë ˆì½”ë“œ ìˆ˜ ì—…ë°ì´íŠ¸ (í™œì„± ê³µê³ ë§Œ)
    if (spn_listCnt) {
        spn_listCnt.setLabel(activePostList.length);
    }

    // í™œì„± ê³µê³ ë§Œ ê·¸ë¦¬ë“œì— ë°”ì¸ë”©
    dlt_postVoList.setJSON(activePostList);

    // í˜ì´ì§€ ë„¤ë¹„ê²Œì´í„° ì—…ë°ì´íŠ¸ (í™œì„± ê³µê³  ê¸°ì¤€)
    if (pgl_postList && activePostList.length > 0) {
        var pageSize = dmp_postVo.get("pageSize") || 10;
        var totalPageCount = Math.ceil(activePostList.length / pageSize);
        pgl_postList.setCount(totalPageCount);
    }

    // í†µê³„ ê³„ì‚° (ì „ì²´ ê³µê³  ë¦¬ìŠ¤íŠ¸ë¡œ, ë‚´ë¶€ì—ì„œ ë§Œë£Œ ì—¬ë¶€ í™•ì¸)
    if (originalPostList && originalPostList.length > 0) {
        scwin.calculateStatistics(originalPostList);
    } else {
        // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ 0ìœ¼ë¡œ ì„¤ì •
        scwin.animateCounter(tbx_totalJobs, 0);
        scwin.animateCounter(tbx_activeJobs, 0);
        scwin.animateCounter(tbx_closedJobs, 0);
    }

    console.log("ê³µê³  ëª©ë¡ ë°”ì¸ë”© ì™„ë£Œ - í™œì„± ê³µê³ ë§Œ í‘œì‹œ");
};

// ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì ìš©
scwin.applyAnimations = function () {
    // ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ ì¶”ê°€ (ì‹¤ì œ DOM ì¡°ì‘ì€ WebSquare í™˜ê²½ì—ì„œ ì œí•œì )
    console.log("ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ ì ìš©");
};

// =========================
// ë¹ ë¥¸ ì•¡ì…˜ ê¸°ëŠ¥ë“¤
// =========================

// ìƒˆ ê³µê³  ì‘ì„±
scwin.btn_newJob_onclick = function (e) {
    console.log("ìƒˆ ê³µê³  ì‘ì„± ë²„íŠ¼ í´ë¦­");
    try {
        if ($p.parent() && $p.parent().pf_main) {
            $p.parent().pf_main.setSrc("../post/PostCreate.xml");
        } else {
            $p.url("../post/PostCreate.xml");
        }
    } catch (error) {
        console.error("í˜ì´ì§€ ì´ë™ ì˜¤ë¥˜:", error);
        $p.url("../post/PostCreate.xml");
    }
};



// ê¸°ì—…ì •ë³´ ìˆ˜ì •
scwin.btn_companyUpdate_onclick = function (e) {
    console.log("ê¸°ì—…ì •ë³´ ìˆ˜ì • ë²„íŠ¼ í´ë¦­");
    try {
        if ($p.parent() && $p.parent().pf_main) {
            $p.parent().pf_main.setSrc("../corporate/CorporateUpdate.xml");
        } else {
            $p.url("../corporate/CorporateUpdate.xml");
        }
    } catch (error) {
        console.error("í˜ì´ì§€ ì´ë™ ì˜¤ë¥˜:", error);
        $p.url("../corporate/CorporateUpdate.xml");
    }
};



// ì „ì²´ ê³µê³  ë³´ê¸°
scwin.btn_allPosts_onclick = function (e) {
    console.log("ì „ì²´ ê³µê³  ë³´ê¸° ë²„íŠ¼ í´ë¦­");
    try {
        if ($p.parent() && $p.parent().pf_main) {
            $p.parent().pf_main.setSrc("../post/PostList.xml");
        } else {
            $p.url("../post/PostList.xml");
        }
    } catch (error) {
        console.error("í˜ì´ì§€ ì´ë™ ì˜¤ë¥˜:", error);
        $p.url("../post/PostList.xml");
    }
};

// =========================
// ê³µê³  ê´€ë¦¬ ê¸°ëŠ¥ë“¤
// =========================

// GridView í–‰ í´ë¦­ ì´ë²¤íŠ¸
scwin.grd_postList_oncellclick = function (row, col) {
    console.log("ê³µê³  í–‰ í´ë¦­:", row);

    if (row < 0) return;

    // ì„ íƒëœ ê³µê³  ë°ì´í„° ì„¤ì •
    dmp_postVoDetail.setJSON(dlt_postVoList.getRowJSON(row));

    var postData = dmp_postVoDetail.getJSON();
    console.log("ì„ íƒëœ ê³µê³ :", postData.title);

    // ê³µê³  ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
    scwin.openPostDetail(postData.jobPostingId);
};

// ê³µê³  ìƒì„¸ë³´ê¸° í˜ì´ì§€ë¡œ ì´ë™
scwin.openPostDetail = function (jobPostingId) {
    console.log("ê³µê³  ìƒì„¸ë³´ê¸°:", jobPostingId);

    if (!jobPostingId) {
        alert("ê³µê³  ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
    }

    try {
        if ($p.parent() && $p.parent().pf_main) {
            $p.parent().pf_main.setSrc("../post/PostDetail.xml", {
                dataObject: { jobPostingId: jobPostingId }
            });
        } else {
            $p.url("../post/PostDetail.xml?jobPostingId=" + encodeURIComponent(jobPostingId));
        }
    } catch (error) {
        console.error("í˜ì´ì§€ ì´ë™ ì˜¤ë¥˜:", error);
        alert("í˜ì´ì§€ ì´ë™ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
};

// ìƒˆë¡œê³ ì¹¨
scwin.btn_refresh_onclick = function () {
    console.log("ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ í´ë¦­");
    scwin.loadPostList();
};

// ê³µê³  ì‚­ì œ
scwin.btn_delete_onclick = function () {
    console.log("ì‚­ì œ ë²„íŠ¼ í´ë¦­");

    var postData = dmp_postVoDetail.getJSON();
    if (!postData || !postData.jobPostingId) {
        alert("ì‚­ì œí•  ê³µê³ ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.\n(ëª©ë¡ì—ì„œ í–‰ì„ í´ë¦­í•˜ì—¬ ì„ íƒ)");
        return;
    }

    var confirmMsg = `'${postData.title || "ì„ íƒëœ ê³µê³ "}'ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œëœ ê³µê³ ëŠ” ëª©ë¡ì—ì„œ ë³´ì´ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.`;

    if (confirm(confirmMsg)) {
        $c.sbm.execute($p, sbm_deletePostVo);
    }
};

// ê³µê³  ì‚­ì œ ì™„ë£Œ
scwin.sbm_deletePost_submitdone = function (e) {
    console.log("ê³µê³  ì‚­ì œ ì™„ë£Œ:", e.responseJSON);

    var elHeader = e.responseJSON.elHeader;
    if (elHeader && elHeader.resSuc === false) {
        console.error("ê³µê³  ì‚­ì œ ì—ëŸ¬:", elHeader);
        alert(`ì‚­ì œ ì‹¤íŒ¨: ${elHeader.resMsg}`);
        return false;
    }

    alert("ê³µê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!");

    // ì„ íƒëœ ê³µê³  ì •ë³´ ì´ˆê¸°í™”
    dmp_postVoDetail.setEmptyValue();

    // ëª©ë¡ ìƒˆë¡œê³ ì¹¨ (í†µê³„ë„ í•¨ê»˜ ì—…ë°ì´íŠ¸ë¨)
    scwin.loadPostList();
};

// í˜ì´ì§€ ë³€ê²½
scwin.pgl_postList_onclick = function (idx) {
    console.log("í˜ì´ì§€ ë³€ê²½:", idx);
    dmp_postVo.set("pageIndex", idx);
    $c.sbm.execute($p, sbm_selectPostVoList);
};

// í†µê³„ ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ë“¤
scwin.statCard_totalJobs_onclick = function () {
    console.log("ì´ ê³µê³  ìˆ˜ ì¹´ë“œ í´ë¦­");
    // ìŠ¤í¬ë¡¤ì„ ê³µê³  ëª©ë¡ìœ¼ë¡œ ì´ë™
    document.querySelector('.posts_section').scrollIntoView({ behavior: 'smooth' });
};

scwin.statCard_activeJobs_onclick = function () {
    console.log("í™œì„± ê³µê³  ì¹´ë“œ í´ë¦­");
    // ìŠ¤í¬ë¡¤ì„ ê³µê³  ëª©ë¡ìœ¼ë¡œ ì´ë™
    document.querySelector('.posts_section').scrollIntoView({ behavior: 'smooth' });
};

scwin.statCard_closedJobs_onclick = function () {
    console.log("ë§ˆê°ëœ ê³µê³  ì¹´ë“œ í´ë¦­");
    // ìŠ¤í¬ë¡¤ì„ ê³µê³  ëª©ë¡ìœ¼ë¡œ ì´ë™
    document.querySelector('.posts_section').scrollIntoView({ behavior: 'smooth' });
};


]]></script>
    </head>
    <body ev:onpageload="scwin.onpageload">
        <w2:wframe src="../common/Header.xml" id="headerFrame" />
        <xf:group class="dashboard_container" id="">
        	<xf:group class="dashboard_content" id="">
        		<!-- í—¤ë” ì„¹ì…˜ -->
        		<xf:group class="dashboard_header fade-in-up" id="">
        			<w2:textbox id="" label="ğŸ¯ ì±„ìš©ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ" class="dashboard_title"></w2:textbox>
        			<w2:textbox id="" label="ìš°ë¦¬ íšŒì‚¬ì˜ ê³µê³ ë¥¼ ê´€ë¦¬í•˜ê³  ìš°ìˆ˜í•œ ì¸ì¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”" class="dashboard_subtitle"></w2:textbox>
        		</xf:group>

        		<!-- í†µê³„ ì¹´ë“œ ì„¹ì…˜ -->
        		<xf:group class="stats_grid" id="">
        			<!-- ì´ ê³µê³  ìˆ˜ -->
        			<xf:group class="stat_card blue fade-in-up delay-100" id="" ev:onclick="scwin.statCard_totalJobs_onclick">
        				<xf:group class="stat_icon" id="">
        					<w2:span label="ğŸ“„"></w2:span>
        				</xf:group>
        				<w2:textbox id="tbx_totalJobs" label="0" class="stat_value"></w2:textbox>
        				<w2:textbox id="" label="ì´ ê³µê³  ìˆ˜" class="stat_label"></w2:textbox>
        			</xf:group>

        			<!-- í™œì„± ê³µê³  -->
        			<xf:group class="stat_card green fade-in-up delay-200" id="" ev:onclick="scwin.statCard_activeJobs_onclick">
        				<xf:group class="stat_icon" id="">
        					<w2:span label="ğŸ“‹"></w2:span>
        				</xf:group>
        				<w2:textbox id="tbx_activeJobs" label="0" class="stat_value"></w2:textbox>
        				<w2:textbox id="" label="í™œì„± ê³µê³ " class="stat_label"></w2:textbox>
        			</xf:group>

        			<!-- ë§ˆê°ëœ ê³µê³  -->
        			<xf:group class="stat_card orange fade-in-up delay-300" id="" ev:onclick="scwin.statCard_closedJobs_onclick">
        				<xf:group class="stat_icon" id="">
        					<w2:span label="ğŸ“ª"></w2:span>
        				</xf:group>
        				<w2:textbox id="tbx_closedJobs" label="0" class="stat_value"></w2:textbox>
        				<w2:textbox id="" label="ë§ˆê°ëœ ê³µê³ " class="stat_label"></w2:textbox>
        			</xf:group>
        		</xf:group>

        		<!-- ë¹ ë¥¸ ì•¡ì…˜ ì¹´ë“œ -->
        		<xf:group class="action_grid" id="">
        			<!-- ê³µê³  ì‘ì„± ì¹´ë“œ -->
        			<xf:group class="action_card fade-in-up delay-100" id="">
        				<xf:group class="action_header" id="">
        					<xf:group class="action_icon" id="">
        						<w2:span label="âœï¸"></w2:span>
        					</xf:group>
        					<w2:textbox id="" label="ìƒˆë¡œìš´ ê³µê³  ì‘ì„±" class="action_title"></w2:textbox>
        				</xf:group>
        				<w2:textbox id="" label="ìƒˆë¡œìš´ ì±„ìš©ê³µê³ ë¥¼ ì‘ì„±í•˜ì—¬ ìš°ìˆ˜í•œ ì¸ì¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”." class="action_description"></w2:textbox>
        				<xf:trigger id="btn_newJob" type="button" class="btn_primary" ev:onclick="scwin.btn_newJob_onclick">
        					<xf:label><![CDATA[â• ê³µê³  ì‘ì„±í•˜ê¸°]]></xf:label>
        				</xf:trigger>
        			</xf:group>

        			<!-- ì „ì²´ ê³µê³  ë³´ê¸° ì¹´ë“œ -->
        			<xf:group class="action_card fade-in-up delay-200" id="">
        				<xf:group class="action_header" id="">
        					<xf:group class="action_icon" id="">
        						<w2:span label="ğŸ“‹"></w2:span>
        					</xf:group>
        					<w2:textbox id="" label="ì „ì²´ ê³µê³  ë³´ê¸°" class="action_title"></w2:textbox>
        				</xf:group>
        				<w2:textbox id="" label="ì‹œì¥ì˜ ë‹¤ë¥¸ ê³µê³ ë“¤ì„ í™•ì¸í•˜ê³  ê²½ìŸë ¥ì„ ë¶„ì„í•´ë³´ì„¸ìš”." class="action_description"></w2:textbox>
        				<xf:trigger id="btn_allPosts" type="button" class="btn_secondary" ev:onclick="scwin.btn_allPosts_onclick">
        					<xf:label><![CDATA[ğŸŒ ì „ì²´ ê³µê³  ë³´ê¸°]]></xf:label>
        				</xf:trigger>
        			</xf:group>

        			<!-- ê¸°ì—…ì •ë³´ ê´€ë¦¬ ì¹´ë“œ -->
        			<xf:group class="action_card fade-in-up delay-300" id="">
        				<xf:group class="action_header" id="">
        					<xf:group class="action_icon" id="">
        						<w2:span label="ğŸ¢"></w2:span>
        					</xf:group>
        					<w2:textbox id="" label="ê¸°ì—…ì •ë³´ ê´€ë¦¬" class="action_title"></w2:textbox>
        				</xf:group>
        				<w2:textbox id="" label="íšŒì‚¬ ì •ë³´ì™€ í”„ë¡œí•„ì„ ìµœì‹  ìƒíƒœë¡œ ìœ ì§€í•˜ì„¸ìš”." class="action_description"></w2:textbox>
        				<xf:trigger id="btn_companyUpdate" type="button" class="btn_secondary" ev:onclick="scwin.btn_companyUpdate_onclick">
        					<xf:label><![CDATA[âš™ï¸ ì •ë³´ ìˆ˜ì •]]></xf:label>
        				</xf:trigger>
        			</xf:group>
        		</xf:group>

        		<!-- ì±„ìš©ê³µê³  ëª©ë¡ ì„¹ì…˜ -->
        		<xf:group class="posts_section fade-in-up" id="">
        			<xf:group class="section_header" id="">
        				<w2:textbox id="" label="ğŸ“‹ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì±„ìš©ê³µê³ " class="section_title"></w2:textbox>
        			</xf:group>

        			<!-- ê·¸ë¦¬ë“œ ì»¨íŠ¸ë¡¤ -->
        			<xf:group class="grid_container" id="">
        				<xf:group class="grid_header_controls" id="">
        					<xf:group class="record_count" id="">
        						<w2:span id="" label="í™œì„± ê³µê³ "></w2:span>
        						<w2:span class="record_number" id="spn_listCnt" label="0"></w2:span>
        						<w2:span id="" label="ê°œ (ë§ˆê°ëœ ê³µê³  ì œì™¸)"></w2:span>
        					</xf:group>
        					<xf:group class="grid_actions" id="">
        						<xf:trigger class="btn_grid refresh" id="btn_refresh" type="button" ev:onclick="scwin.btn_refresh_onclick">
        							<xf:label><![CDATA[ğŸ”„ ìƒˆë¡œê³ ì¹¨]]></xf:label>
        						</xf:trigger>
        						<xf:trigger class="btn_grid delete" id="btn_delete" type="button" ev:onclick="scwin.btn_delete_onclick">
        							<xf:label><![CDATA[ğŸ—‘ï¸ ì„ íƒ ì‚­ì œ]]></xf:label>
        						</xf:trigger>
        					</xf:group>
        				</xf:group>

        				<!-- ê³µê³  ëª©ë¡ GridView -->
        				<w2:gridView autoFit="allColumn" checkReadOnlyOnPasteEnable="true" class="gvw" dataList="data:dlt_postVoList"
        					defaultCellHeight="35" focusMode="row" id="grd_postList" scrollByColumn="false"
        					style="height: 400px; border-radius: 12px; border: 1px solid #e2e8f0;"
        					visibleRowNum="10" ev:oncellclick="scwin.grd_postList_oncellclick" readOnly="true">
        					<w2:caption style="" id="caption1" value="ğŸ“Œ í™œì„± ê³µê³ ë§Œ í‘œì‹œë©ë‹ˆë‹¤ (ë§ˆê°ëœ ê³µê³ ëŠ” ìë™ìœ¼ë¡œ ìˆ¨ê¹€ì²˜ë¦¬)"></w2:caption>
        					<w2:header style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; font-weight: 600;" id="header1">
        						<w2:row style="" id="row1">
        							<w2:column width="100" inputType="text" style="" id="column1" value="ê³µê³ ID" displayMode="label"></w2:column>
        							<w2:column width="300" inputType="text" style="" id="column2" value="ğŸ“ ì œëª©" displayMode="label"></w2:column>
        							<w2:column width="250" inputType="text" style="" id="column3" value="ğŸ’¼ ì„¤ëª…" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="" id="column4" value="ğŸ“ ì§€ì—­" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="" id="column5" value="ğŸ  ê·¼ë¬´í˜•íƒœ" displayMode="label"></w2:column>
        							<w2:column width="100" inputType="text" style="" id="column6" value="ğŸ“Š ìƒíƒœ" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="" id="column7" value="ğŸ“… ë“±ë¡ì¼" displayMode="label"></w2:column>
        						</w2:row>
        					</w2:header>
        					<w2:gBody style="" id="gBody1">
        						<w2:row style="cursor: pointer;" id="row2">
        							<w2:column width="100" inputType="text" style="" id="jobPostingId" value="" displayMode="label"></w2:column>
        							<w2:column width="300" inputType="text" style="font-weight: 600; color: #1a2332;" id="title" value="" displayMode="label"></w2:column>
        							<w2:column width="250" inputType="text" style="color: #64748b;" id="description" value="" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="" id="location" value="" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="" id="workType" value="" displayMode="label"></w2:column>
        							<w2:column width="100" inputType="text" style="font-weight: 500;" id="status" value="" displayMode="label"></w2:column>
        							<w2:column width="120" inputType="text" style="color: #64748b;" id="postedAt" value="" displayMode="label"></w2:column>
        						</w2:row>
        					</w2:gBody>
        				</w2:gridView>

        				<!-- í˜ì´ì§• -->
        				<xf:group style="text-align: center; padding: 25px 0;" id="">
        					<w2:pageList displayButtonType="display" displayFormat="#" id="pgl_postList" pageSize="5" pagingType="0"
        						style="display: inline-block;" ev:onclick="scwin.pgl_postList_onclick">
        					</w2:pageList>
        				</xf:group>
        			</xf:group>
        		</xf:group>
        	</xf:group>
        </xf:group>
    </body>
</html>