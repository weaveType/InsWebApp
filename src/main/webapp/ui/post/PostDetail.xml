<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:w2="http://www.inswave.com/websquare" 
    xmlns:xf="http://www.w3.org/2002/xforms">
    
    <head meta_screenName="ì±„ìš©ê³µê³  ìƒì„¸">
        <w2:type>COMPONENT</w2:type>
        <w2:buildDate/>
        <w2:MSA/>
        <xf:model>
        	<w2:dataCollection baseNode="map">
        		<!-- ê³µê³  ìƒì„¸ ì¡°íšŒìš© íŒŒë¼ë¯¸í„° -->
        		<w2:dataMap baseNode="map" id="dmp_postParam" style="">
        			<w2:keyInfo>
        				<w2:key dataType="text" id="jobPostingId" name="ê³µê³ _ID"></w2:key>
        			</w2:keyInfo>
        			<w2:data use="false"></w2:data>
        		</w2:dataMap>

        		<!-- ê³µê³  ìƒì„¸ ì •ë³´ -->
        		<w2:dataMap baseNode="map" id="dmp_postDetail" style="">
        			<w2:keyInfo>
        				<w2:key dataType="text" id="jobPostingId" name="job_posting_id"></w2:key>
        				<w2:key dataType="text" id="companyId" name="company_id"></w2:key>
        				<w2:key dataType="text" id="title" name="title"></w2:key>
        				<w2:key dataType="text" id="description" name="description"></w2:key>
        				<w2:key dataType="text" id="requirements" name="requirements"></w2:key>
        				<w2:key dataType="text" id="preferred" name="preferred"></w2:key>
        				<w2:key dataType="text" id="benefits" name="benefits"></w2:key>
        				<w2:key dataType="text" id="experienceLevel" name="experience_level"></w2:key>
        				<w2:key dataType="text" id="salaryRange" name="salary_range"></w2:key>
        				<w2:key dataType="text" id="location" name="location"></w2:key>
        				<w2:key dataType="text" id="workType" name="work_type"></w2:key>
        				<w2:key dataType="text" id="expiresAt" name="expires_at"></w2:key>
        				<w2:key dataType="text" id="postedAt" name="posted_at"></w2:key>
        				<w2:key dataType="text" id="status" name="status"></w2:key>
        				<w2:key dataType="text" id="companyName" name="company_name"></w2:key>
        				<w2:key dataType="text" id="industry" name="industry"></w2:key>
        				<w2:key dataType="text" id="empCount" name="emp_count"></w2:key>
        				<w2:key dataType="text" id="selectedTechStackNames" name="selected_tech_stack_names"></w2:key>
        				<w2:key dataType="text" id="preferredDeveloperTypes" name="preferred_developer_types"></w2:key>
        			</w2:keyInfo>
        			<w2:data use="false"></w2:data>
        		</w2:dataMap>
        		<w2:dataMap baseNode="map" id="dmp_jobApplicationVo">
        			<w2:keyInfo>
        				<w2:key dataType="number" name="ê³µê³  ID" id="jobPostingId"></w2:key>
        				<w2:key dataType="number" name="ì§€ì›ì ID" id="accountId"></w2:key>
        			</w2:keyInfo>
        		</w2:dataMap>
        	</w2:dataCollection>
        	<w2:workflowCollection />

        	<!-- ê³µê³  ìƒì„¸ ì¡°íšŒ Submission -->
        	<xf:submission id="sbm_selectPostDetail" ref='data:json,{"id":"dmp_postParam","key":"postVo"}'
        		target='data:json,{"id":"dmp_postDetail","key":"elData"}' action="/InsWebApp/POS0001Detail.pwkjson" method="post"
        		mediatype="application/json" encoding="UTF-8" instance="" replace="" errorHandler="" customHandler="" mode="asynchronous"
        		processMsg="ê³µê³  ìƒì„¸ì •ë³´ë¥¼ ì¡°íšŒì¤‘ì…ë‹ˆë‹¤." ev:submit="" ev:submitdone="scwin.sbm_selectPostDetail_submitdone" ev:submiterror=""
        		abortTrigger="">
        	</xf:submission>

        	<!-- ê³µê³  ì‚­ì œ Submission -->
        	<xf:submission id="sbm_deletePost" ref='data:json,{"id":"dmp_postParam","key":"postVo"}' target=""
        		action="/InsWebApp/POS0001Del.pwkjson" method="post" mediatype="application/json" encoding="UTF-8" instance="" replace=""
        		errorHandler="" customHandler="" mode="asynchronous" processMsg="ê³µê³ ë¥¼ ì‚­ì œì¤‘ì…ë‹ˆë‹¤." ev:submit=""
        		ev:submitdone="scwin.sbm_deletePost_submitdone" ev:submiterror="" abortTrigger="">
        	</xf:submission>
        	<xf:submission id="sbm_insertJobApplication" action="/InsWebApp/POS0001JAPL.pwkjson" method="post" mediatype="application/json"
        		ref='data:json,{"id":"dmp_jobApplicationVo","key":"jobApplicationVo"}' target="" encoding="UTF-8" instance="" replace=""
        		errorHandler="" customHandler="" mode="asynchronous" processMsg="ì´ë ¥ì„œ ì§€ì›ì¤‘.." ev:submit="" ev:submitdone="scwin.sbm_insertJobApplication_submitdone" ev:submiterror=""
        		abortTrigger="">
        	</xf:submission>
        </xf:model>
        <w2:layoutInfo/>
        <w2:publicInfo method=""/>

        <style type="text/css"><![CDATA[
            /* ê¸°ë³¸ ì„¤ì • */
            * {
                box-sizing: border-box;
            }

            /* ë©”ì¸í˜ì´ì§€ì™€ ë™ì¼í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
            .main-wrap {
                width: 100%;
                background-color: #ffffff;
                font-family: "Malgun Gothic", "ë§‘ì€ ê³ ë”•", sans-serif;
            }

            /* ê³µê³  ìƒì„¸ í˜ì´ì§€ - ì™„ì „ ë°˜ì‘í˜• ì»¨í…Œì´ë„ˆ */
            .container {
                max-width: 1060px;
                width: 100%;
                margin: 0 auto;
                background-color: white;
                min-height: 100vh;
                padding: 0 min(30px, 4vw);
            }

            .main-content {
                padding: 0;
                width: 100%;
            }

            /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
            .back-section {
                padding: 20px 0 10px 0;
            }

            .btn-back {
                background: none;
                border: 1px solid #e1e5e9;
                color: #767676;
                padding: 8px 16px;
                border-radius: 6px;
                font-size: 14px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.2s ease;
            }

            .btn-back:hover {
                background-color: #f8f9fa;
                border-color: #c8d0d7;
            }

            /* íšŒì‚¬ ì´ë¯¸ì§€ ì„¹ì…˜ - ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
            .company-images {
                margin: min(30px, 4vw) 0;
            }

            .image-gallery {
                display: grid;
                grid-template-columns: 2fr 1fr 1fr;
                gap: 8px;
                height: clamp(250px, 40vw, 300px);
                width: 100%;
            }

            .main-image {
                background: linear-gradient(135deg, #2d3748, #4a5568);
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: clamp(18px, 3vw, 24px);
                font-weight: bold;
                position: relative;
                overflow: hidden;
            }

            .main-image::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.3);
                z-index: 1;
            }

            .main-image w2\\:textbox {
                position: relative;
                z-index: 2;
                text-align: center;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .sub-image {
                border-radius: 6px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: clamp(14px, 2.5vw, 16px);
                text-align: center;
                padding: 10px;
                position: relative;
                overflow: hidden;
            }

            .sub-image::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.2);
                z-index: 1;
            }

            .sub-image w2\\:textbox {
                position: relative;
                z-index: 2;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .sub-image:nth-child(2) {
                background: linear-gradient(135deg, #6b46c1, #9333ea);
            }

            .sub-image:nth-child(3) {
                background: linear-gradient(135deg, #f97316, #ea580c);
            }

            /* ê³µê³  ì •ë³´ ì„¹ì…˜ */
            .job-header {
                padding: min(40px, 5vw) 0;
                border-bottom: 1px solid #e1e5e9;
            }

            .job-meta {
                font-size: clamp(12px, 2vw, 14px);
                color: #767676;
                margin-bottom: 8px;
                line-height: 1.4;
            }

            .job-title {
                font-size: clamp(20px, 4vw, 28px);
                font-weight: 600;
                color: #333;
                margin-bottom: 20px;
                line-height: 1.3;
                word-break: keep-all;
            }

            .job-actions {
                display: flex;
                gap: 12px;
                align-items: center;
                flex-wrap: wrap;
            }

            .btn-apply {
                background-color: #36f;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 25px;
                font-size: clamp(14px, 2vw, 16px);
                font-weight: 600;
                cursor: pointer;
                min-width: 80px;
                white-space: nowrap;
                transition: background-color 0.2s ease;
            }

            .btn-apply:hover {
                background-color: #2a5bd6;
            }

            .btn-bookmark {
                background-color: white;
                color: #767676;
                border: 1px solid #e1e5e9;
                padding: 12px 16px;
                border-radius: 25px;
                font-size: clamp(12px, 1.8vw, 14px);
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                white-space: nowrap;
                transition: all 0.2s ease;
            }

            .btn-bookmark:hover {
                background-color: #f8f9fa;
                border-color: #c8d0d7;
            }

            /* ê¸°ì—… ì‚¬ìš©ììš© ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
            .btn-edit {
                background-color: #28a745;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 25px;
                font-size: clamp(14px, 2vw, 16px);
                font-weight: 600;
                cursor: pointer;
                min-width: 80px;
                white-space: nowrap;
                transition: background-color 0.2s ease;
            }

            .btn-edit:hover {
                background-color: #218838;
            }

            .btn-delete {
                background-color: #dc3545;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 25px;
                font-size: clamp(14px, 2vw, 16px);
                font-weight: 600;
                cursor: pointer;
                min-width: 80px;
                white-space: nowrap;
                transition: background-color 0.2s ease;
            }

            .btn-delete:hover {
                background-color: #c82333;
            }

            /* ê³µê³  ë‚´ìš© ì„¹ì…˜ */
            .job-content {
                padding: min(40px, 5vw) 0;
            }

            .content-section {
                margin-bottom: min(40px, 5vw);
            }

            .section-title {
                font-size: clamp(18px, 3vw, 20px);
                font-weight: 600;
                color: #333;
                margin-bottom: 16px;
                border-bottom: 2px solid #36f;
                padding-bottom: 8px;
                display: inline-block;
            }

            .section-content {
                color: #333;
                line-height: 1.8;
                white-space: pre-wrap;
                font-size: clamp(14px, 2vw, 16px);
                word-break: keep-all;
                background-color: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
                border-left: 4px solid #36f;
            }

            .empty-content {
                color: #999;
                font-style: italic;
                text-align: center;
                padding: 40px 20px;
                background-color: #f8f9fa;
                border-radius: 8px;
                border: 2px dashed #ddd;
            }

            /* íƒœê·¸ - ë°˜ì‘í˜• */
            .tags {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin: 16px 0;
            }

            .tag {
                background-color: #f2f4f6;
                color: #333;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: clamp(12px, 1.8vw, 14px);
                font-weight: 500;
                white-space: nowrap;
                border: 1px solid transparent;
                transition: all 0.2s ease;
            }

            .tag:hover {
                background-color: #e8ecef;
                border-color: #36f;
            }

            .tag.tech-tag {
                background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
                color: #1976d2;
                border: 1px solid #bbdefb;
            }

            .tag.dev-type-tag {
                background: linear-gradient(135deg, #e8f5e8, #f1f8e9);
                color: #2e7d32;
                border: 1px solid #c8e6c9;
            }

            /* ê¸°íƒ€ ì •ë³´ íƒœê·¸ë“¤ */
            .info-tags {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 12px;
                margin: 20px 0;
            }

            .info-tag-item {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 12px 16px;
                background: white;
                border: 1px solid #e1e5e9;
                border-radius: 8px;
                transition: all 0.2s ease;
            }

            .info-tag-item:hover {
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                border-color: #36f;
            }

            .info-tag-label {
                font-weight: 600;
                color: #36f;
                min-width: 60px;
            }

            .info-tag-value {
                color: #333;
                font-weight: 500;
            }

            /* ë¡œë”© ìƒíƒœ */
            .loading-content {
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 40px;
                color: #999;
                font-style: italic;
            }

            .loading-spinner {
                display: inline-block;
                width: 20px;
                height: 20px;
                border: 3px solid #f3f3f3;
                border-top: 3px solid #36f;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 10px;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* ì—ëŸ¬ ìƒíƒœ */
            .error-content {
                text-align: center;
                padding: 40px 20px;
                color: #d32f2f;
                background-color: #ffebee;
                border: 1px solid #ffcdd2;
                border-radius: 8px;
            }

            /* íƒœë¸”ë¦¿ ë°˜ì‘í˜• */
            @media (max-width: 1024px) {
                .header {
                    padding: 0 20px;
                }

                .nav-link {
                    margin-right: 15px;
                    font-size: 13px;
                }

                .search-input {
                    width: 120px;
                }

                .container {
                    padding: 0 20px;
                }

                .image-gallery {
                    grid-template-columns: 1fr 1fr;
                    height: auto;
                    gap: 12px;
                }

                .main-image {
                    grid-column: 1 / -1;
                    height: 200px;
                }

                .sub-image {
                    height: 150px;
                }

                .info-tags {
                    grid-template-columns: 1fr 1fr;
                }
            }

            /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
            @media (max-width: 768px) {
                .header {
                    height: 60px;
                    padding: 0 15px;
                }

                .header-left, .header-right {
                    padding-top: 13px;
                }

                .nav-menu xf:image {
                    width: 100px !important;
                    height: 28px !important;
                }

                .nav-link {
                    display: none;
                }

                .search-input {
                    width: 100px;
                    font-size: 12px;
                    height: 20px;
                }

                .btn-login, .btn-enterprise {
                    padding: 5px 8px;
                    font-size: 11px;
                    height: 28px;
                }

                .container {
                    padding: 0 15px;
                }

                .image-gallery {
                    grid-template-columns: 1fr;
                    height: auto;
                    gap: 10px;
                }

                .main-image, .sub-image {
                    height: clamp(150px, 25vw, 180px);
                }

                .job-actions {
                    flex-direction: column;
                    align-items: stretch;
                    gap: 10px;
                }

                .btn-apply, .btn-bookmark {
                    width: 100%;
                    justify-content: center;
                    padding: 15px;
                }

                .info-tags {
                    grid-template-columns: 1fr;
                }

                .tags {
                    gap: 6px;
                }

                .tag {
                    padding: 6px 12px;
                }
            }

            /* ì‘ì€ ëª¨ë°”ì¼ */
            @media (max-width: 480px) {
                .container {
                    padding: 0 10px;
                }

                .image-gallery {
                    gap: 8px;
                }

                .main-image, .sub-image {
                    height: 140px;
                }

                .job-content {
                    padding: 30px 0;
                }

                .content-section {
                    margin-bottom: 30px;
                }

                .info-tag-item {
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 4px;
                }

                .info-tag-label {
                    min-width: auto;
                }
            }
        ]]></style>

        <script lazy="false" type="text/javascript"><![CDATA[
scwin.onpageload = function () {
    console.log("=== PostDetail í˜ì´ì§€ ë¡œë“œ ===");

    var jobPostingId = null;

    // 1. dataObjectì—ì„œ íŒŒë¼ë¯¸í„° ì¶”ì¶œ ì‹œë„ (pageFrame.setSrcë¡œ ì „ë‹¬ëœ ê²½ìš°)
    try {
        if ($p.getParameter && $p.getParameter("dataObject")) {
            var dataObject = $p.getParameter("dataObject");
            if (dataObject && dataObject.jobPostingId) {
                jobPostingId = dataObject.jobPostingId;
                console.log("dataObjectì—ì„œ jobPostingId ì¶”ì¶œ:", jobPostingId);
            }
        }
    } catch (e) {
        console.log("dataObject ì¶”ì¶œ ì‹¤íŒ¨:", e);
    }

    // 2. URL ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì—ì„œ íŒŒë¼ë¯¸í„° ì¶”ì¶œ ì‹œë„ (URL ë°©ì‹ìœ¼ë¡œ ì „ë‹¬ëœ ê²½ìš°)
    // if (!jobPostingId) {
    //     jobPostingId = $c.util.getParameter("jobPostingId");
    //     console.log("URLì—ì„œ jobPostingId ì¶”ì¶œ:", jobPostingId);
    // }

    // 3. ì§ì ‘ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ íŒŒì‹± ì‹œë„
    if (!jobPostingId) {
        try {
            var urlParams = new URLSearchParams(window.location.search);
            jobPostingId = urlParams.get('jobPostingId');
            console.log("URLSearchParamsì—ì„œ jobPostingId ì¶”ì¶œ:", jobPostingId);
        } catch (e) {
            console.log("URLSearchParams íŒŒì‹± ì‹¤íŒ¨:", e);
        }
    }

    // 4. window.location.hrefì—ì„œ ì§ì ‘ íŒŒì‹± ì‹œë„
    if (!jobPostingId) {
        try {
            var href = window.location.href;
            var match = href.match(/[?&]jobPostingId=([^&]*)/);
            if (match && match[1]) {
                jobPostingId = decodeURIComponent(match[1]);
                console.log("location.hrefì—ì„œ jobPostingId ì¶”ì¶œ:", jobPostingId);
            }
        } catch (e) {
            console.log("location.href íŒŒì‹± ì‹¤íŒ¨:", e);
        }
    }

    console.log("ìµœì¢… ì¶”ì¶œëœ jobPostingId:", jobPostingId);

    if (jobPostingId && jobPostingId.trim() !== "") {
        // íŒŒë¼ë¯¸í„° ì„¤ì •í•˜ê³  ì„œë²„ì—ì„œ ì‹¤ì œ ë°ì´í„° ì¡°íšŒ
        dmp_postParam.set("jobPostingId", jobPostingId);
        console.log("ì„œë²„ ì¡°íšŒ ì‹œì‘...");
        $c.sbm.execute($p, sbm_selectPostDetail);
    } else {
        console.warn("jobPostingId íŒŒë¼ë¯¸í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        alert("ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤. ê³µê³  ëª©ë¡ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
        scwin.goBackToList();
    }
};

/**
 * ê³µê³  ìƒì„¸ ì¡°íšŒ ì™„ë£Œ ì½œë°±
 */
scwin.sbm_selectPostDetail_submitdone = function (e) {
    console.log("=== ê³µê³  ìƒì„¸ ì¡°íšŒ ì™„ë£Œ ===");
    console.log("ì‘ë‹µ ë°ì´í„°:", e.responseJSON);

    var elData = e.responseJSON.elData;
    var elHeader = e.responseJSON.elHeader;

    // ì—ëŸ¬ ì²´í¬
    if (elHeader == null || elHeader == "" || elHeader == "undefined" || elHeader.resSuc == false) {
        console.error("ê³µê³  ìƒì„¸ ì¡°íšŒ ì—ëŸ¬:", elHeader);
        var errorMsg = "ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        if (elHeader && elHeader.resMsg) {
            errorMsg += "\n" + elHeader.resMsg;
        }
        alert(errorMsg);

        // ì—ëŸ¬ ì‹œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        setTimeout(function () {
            scwin.goBackToList();
        }, 1000);
        return false;
    }

    // ë°ì´í„° ì¡´ì¬ ì—¬ë¶€ ì²´í¬
    if (!elData) {
        console.error("ì¡°íšŒëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        alert("í•´ë‹¹ ê³µê³  ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\nê³µê³ ê°€ ì‚­ì œë˜ì—ˆê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");

        setTimeout(function () {
            scwin.goBackToList();
        }, 1000);
        return false;
    }

    console.log("ì¡°íšŒëœ ê³µê³  ì •ë³´:");
    console.log("- ê³µê³  ID:", elData.jobPostingId);
    console.log("- ì œëª©:", elData.title);
    console.log("- íšŒì‚¬ëª…:", elData.companyName);
    console.log("- ìƒíƒœ:", elData.status);

    // ë¹„í™œì„±í™”ëœ ê³µê³  ì²´í¬
    if (elData.status === 'inactive' || elData.status === 'deleted') {
        console.warn("ë¹„í™œì„±í™”ëœ ê³µê³ ì…ë‹ˆë‹¤.");
        alert("ì´ ê³µê³ ëŠ” í˜„ì¬ ëª¨ì§‘ì´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.");

        setTimeout(function () {
            scwin.goBackToList();
        }, 1000);
        return false;
    }

    try {
        // ë°ì´í„°ë¥¼ DataMapì— ì„¤ì •
        dmp_postDetail.setJSON(elData);

        // í™”ë©´ ì—…ë°ì´íŠ¸
        scwin.updateUI();

        console.log("âœ… ê³µê³  ìƒì„¸ ì •ë³´ ë°”ì¸ë”© ì™„ë£Œ");

        // ê¶Œí•œ í™•ì¸ ë° UI ì—…ë°ì´íŠ¸
        scwin.checkUserPermissionAndUpdateUI();

    } catch (error) {
        console.error("ë°ì´í„° ë°”ì¸ë”© ì¤‘ ì˜¤ë¥˜:", error);
        alert("ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    }
};

/**
 * UI ì—…ë°ì´íŠ¸ (ì‹¤ì œ ë°ì´í„°ë¡œ)
 */
scwin.updateUI = function () {
    console.log("=== UI ì—…ë°ì´íŠ¸ ì‹œì‘ ===");

    // ë©”íƒ€ ì •ë³´ ì—…ë°ì´íŠ¸
    scwin.updateJobMeta();

    // ê¸°ìˆ ìŠ¤íƒ íƒœê·¸ ë™ì  ìƒì„±
    scwin.updateTechStackTags();

    // ê°œë°œì ì„ í˜¸ ìœ í˜• íƒœê·¸ ë™ì  ìƒì„±
    scwin.updateDeveloperTypeTags();

    // ê¸°íƒ€ ì •ë³´ íƒœê·¸ ì—…ë°ì´íŠ¸
    scwin.updateInfoTags();

    console.log("âœ… UI ì—…ë°ì´íŠ¸ ì™„ë£Œ");
};

/**
 * ë©”íƒ€ ì •ë³´ ì—…ë°ì´íŠ¸
 */
scwin.updateJobMeta = function () {
    var companyName = dmp_postDetail.get("companyName") || "ì •ë³´ì—†ìŒ";
    var experienceLevel = scwin.getExperienceLevelText(dmp_postDetail.get("experienceLevel"));
    var location = dmp_postDetail.get("location") || "ì •ë³´ì—†ìŒ";
    var workType = scwin.getWorkTypeText(dmp_postDetail.get("workType"));

    var metaText = companyName + " â€¢ " + experienceLevel + " â€¢ " + location + " â€¢ " + workType;

    // ë©”íƒ€ ì •ë³´ ì—…ë°ì´íŠ¸
    var metaElement = document.querySelector('.job-meta');
    if (metaElement) {
        metaElement.textContent = metaText;
    }

    console.log("ë©”íƒ€ ì •ë³´ ì—…ë°ì´íŠ¸:", metaText);
};

/**
 * ê¸°ìˆ ìŠ¤íƒ íƒœê·¸ ë™ì  ìƒì„±
 */
scwin.updateTechStackTags = function () {
    var techStackJson = dmp_postDetail.get("selectedTechStackNames");
    var tagsContainer = document.querySelector('.tech-tags');

    if (tagsContainer && techStackJson) {
        try {
            var techStacks = JSON.parse(techStackJson);
            var tagsHtml = '';

            for (var i = 0; i < techStacks.length; i++) {
                tagsHtml += '<span class="tag tech-tag">' + techStacks[i] + '</span>';
            }

            tagsContainer.innerHTML = tagsHtml;
            console.log("ê¸°ìˆ ìŠ¤íƒ íƒœê·¸ ìƒì„± ì™„ë£Œ:", techStacks.length + "ê°œ");
        } catch (e) {
            console.error("ê¸°ìˆ ìŠ¤íƒ JSON íŒŒì‹± ì˜¤ë¥˜:", e);
            tagsContainer.innerHTML = '<span class="tag">ê¸°ìˆ ìŠ¤íƒ ì •ë³´ ì—†ìŒ</span>';
        }
    } else if (tagsContainer) {
        tagsContainer.innerHTML = '<span class="tag">ê¸°ìˆ ìŠ¤íƒ ì •ë³´ ì—†ìŒ</span>';
    }
};

/**
 * ê°œë°œì ì„ í˜¸ ìœ í˜• íƒœê·¸ ë™ì  ìƒì„±
 */
scwin.updateDeveloperTypeTags = function () {
    var developerTypesJson = dmp_postDetail.get("preferredDeveloperTypes");

    if (developerTypesJson) {
        try {
            var developerTypes = JSON.parse(developerTypesJson);
            var techTagsContainer = document.querySelector('.tech-tags');

            if (techTagsContainer && developerTypes && developerTypes.length > 0) {
                var existingHtml = techTagsContainer.innerHTML;
                var additionalTags = '';

                for (var i = 0; i < developerTypes.length; i++) {
                    additionalTags += '<span class="tag dev-type-tag">' + developerTypes[i] + '</span>';
                }

                techTagsContainer.innerHTML = existingHtml + additionalTags;
                console.log("ê°œë°œì ìœ í˜• íƒœê·¸ ì¶”ê°€ ì™„ë£Œ:", developerTypes.length + "ê°œ");
            }
        } catch (e) {
            console.error("ê°œë°œì ìœ í˜• JSON íŒŒì‹± ì˜¤ë¥˜:", e);
        }
    }
};

/**
 * ê¸°íƒ€ ì •ë³´ íƒœê·¸ ì—…ë°ì´íŠ¸
 */
scwin.updateInfoTags = function () {
    var experienceLevel = scwin.getExperienceLevelText(dmp_postDetail.get("experienceLevel"));
    var location = dmp_postDetail.get("location") || "ë¯¸ì •";
    var workType = scwin.getWorkTypeText(dmp_postDetail.get("workType"));
    var salaryRange = scwin.getSalaryRangeText(dmp_postDetail.get("salaryRange"));

    // ê¸°íƒ€ ì •ë³´ ì»¨í…Œì´ë„ˆ ì°¾ê¸°
    var infoContainer = document.querySelector('.info-tags');
    if (infoContainer) {
        var infoHtml = '';
        infoHtml += '<div class="info-tag-item"><span class="info-tag-label">ê²½ë ¥</span><span class="info-tag-value">' + experienceLevel + '</span></div>';
        infoHtml += '<div class="info-tag-item"><span class="info-tag-label">ì§€ì—­</span><span class="info-tag-value">' + location + '</span></div>';
        infoHtml += '<div class="info-tag-item"><span class="info-tag-label">ê·¼ë¬´í˜•íƒœ</span><span class="info-tag-value">' + workType + '</span></div>';
        infoHtml += '<div class="info-tag-item"><span class="info-tag-label">ê¸‰ì—¬</span><span class="info-tag-value">' + salaryRange + '</span></div>';

        infoContainer.innerHTML = infoHtml;
    }
};

/**
 * ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
 */
scwin.goBackToList = function () {
    try {
        if ($p.parent() && $p.parent().pf_main) {
            $p.parent().pf_main.setSrc("PostList.xml");
        } else {
            $p.url("PostList.xml");
        }
    } catch (e) {
        console.error("í˜ì´ì§€ ì´ë™ ì¤‘ ì˜¤ë¥˜:", e);
        $p.url("PostList.xml");
    }
};

// ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­
scwin.btnBack_onclick = function (e) {
    scwin.goBackToList();
};

// ì§€ì›í•˜ê¸° ë²„íŠ¼ í´ë¦­
scwin.btnApply_onclick = function (e) {
    var title = dmp_postDetail.get("title");

    if (confirm(title + " ê³µê³ ì— ì§€ì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        var userInfoCookie = WebSquare.cookie.getCookie("userInfo");
        if (userInfoCookie) {
            var jobPostingId = dmp_postDetail.get("jobPostingId");
            var userInfo = JSON.parse(userInfoCookie);
            var accountId = userInfo.accountId;
            console.log(accountId);
            dmp_jobApplicationVo.set("jobPostingId", jobPostingId);
            dmp_jobApplicationVo.set("accountId", accountId);
            $c.sbm.execute($p, sbm_insertJobApplication);
        }
        else{
            alert("ì¼ë°˜ íšŒì›ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ ì´ìš©í•´ì£¼ì„¸ìš”.");
        }
    }
};

// ë¶ë§ˆí¬ ë²„íŠ¼ í´ë¦­
scwin.btnBookmark_onclick = function (e) {
    var jobPostingId = dmp_postDetail.get("jobPostingId");

    // TODO: ì‹¤ì œ ë¶ë§ˆí¬ ì„œë²„ ìš”ì²­
    alert("ë¶ë§ˆí¬ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\nê³µê³  ID: " + jobPostingId);

    // ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
    var btnElement = e.target;
    if (btnElement.textContent.includes('ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½')) {
        btnElement.textContent = 'â¤ï¸ ë¶ë§ˆí¬ë¨';
    } else {
        btnElement.textContent = 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ ë¶ë§ˆí¬';
    }
};

// ê³µìœ í•˜ê¸°
scwin.btnShare_onclick = function (e) {
    var title = dmp_postDetail.get("title") || "ì±„ìš©ê³µê³ ";
    var jobPostingId = dmp_postDetail.get("jobPostingId");

    if (navigator.share) {
        navigator.share({
            title: title,
            text: title + " - ì±„ìš©ê³µê³ ",
            url: window.location.href
        });
    } else {
        // ê³µìœ  API ë¯¸ì§€ì› ì‹œ í´ë¦½ë³´ë“œ ë³µì‚¬
        navigator.clipboard.writeText(window.location.href).then(function () {
            alert("ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }).catch(function () {
            // í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ ì‹œ ì§ì ‘ í‘œì‹œ
            prompt("ì•„ë˜ ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:", window.location.href);
        });
    }
};

/**
 * ê³µê³  ì‚­ì œ ì™„ë£Œ ì½œë°±
 */
scwin.sbm_deletePost_submitdone = function (e) {
    console.log("=== ê³µê³  ì‚­ì œ ì‘ë‹µ ìˆ˜ì‹  ===");
    console.log("ì‘ë‹µ ë°ì´í„°:", e.responseJSON);

    var elData = e.responseJSON.elData;
    var elHeader = e.responseJSON.elHeader;

    // ì—ëŸ¬ ì²´í¬
    if (elHeader == null || elHeader == "" || elHeader == "undefined" || elHeader.resSuc == false) {
        console.error("ê³µê³  ì‚­ì œ ì—ëŸ¬:", elHeader);
        var errorMsg = "ê³µê³ ë¥¼ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        if (elHeader && elHeader.resMsg) {
            errorMsg += "\n" + elHeader.resMsg;
        }
        alert(errorMsg);
        return false;
    }

    console.log("âœ… ê³µê³  ì‚­ì œ ì„±ê³µ");
    alert("ê³µê³ ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");

    // ì‚­ì œ í›„ ëª©ë¡ìœ¼ë¡œ ì´ë™
    setTimeout(function () {
        scwin.goBackToList();
    }, 500);
};

// =========================
// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
// =========================

/**
 * ê²½ë ¥ìˆ˜ì¤€ í•œê¸€ ë³€í™˜
 */
scwin.getExperienceLevelText = function (experienceLevel) {
    switch (experienceLevel) {
        case 'any': return 'ê²½ë ¥ë¬´ê´€';
        case 'junior': return 'ì‹ ì…Â·1-3ë…„';
        case 'senior': return 'ì‹œë‹ˆì–´Â·3ë…„+';
        default: return experienceLevel || 'ì •ë³´ì—†ìŒ';
    }
};

/**
 * ê·¼ë¬´í˜•íƒœ í•œê¸€ ë³€í™˜
 */
scwin.getWorkTypeText = function (workType) {
    switch (workType) {
        case 'remote': return 'ì›ê²©ê·¼ë¬´';
        case 'onsite': return 'ì¶œê·¼ê·¼ë¬´';
        case 'hybrid': return 'í•˜ì´ë¸Œë¦¬ë“œ';
        default: return workType || 'ì •ë³´ì—†ìŒ';
    }
};

/**
 * ê¸‰ì—¬ë²”ìœ„ í•œê¸€ ë³€í™˜
 */
scwin.getSalaryRangeText = function (salaryRange) {
    switch (salaryRange) {
        case 'under25': return '~2,500ë§Œì›';
        case '25to35': return '2,500~3,500ë§Œì›';
        case '35to50': return '3,500~5,000ë§Œì›';
        case 'over50': return '5,000ë§Œì›+';
        default: return salaryRange || 'í˜‘ì˜';
    }
};

/**
 * ì¿ í‚¤ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
 */
scwin.getUserInfoFromCookie = function () {
    try {
        var userInfoCookieStr = WebSquare.cookie.getCookie("userInfo");
        if (userInfoCookieStr && userInfoCookieStr.trim() !== "") {
            var userInfo = JSON.parse(userInfoCookieStr);
            console.log("ì¿ í‚¤ì—ì„œ ì¶”ì¶œí•œ ì‚¬ìš©ì ì •ë³´:", userInfo);
            return userInfo;
        }
    } catch (error) {
        console.error("ì‚¬ìš©ì ì •ë³´ ì¿ í‚¤ íŒŒì‹± ì˜¤ë¥˜:", error);
    }
    return null;
};

/**
 * í˜„ì¬ ì‚¬ìš©ìê°€ ê³µê³  ì‘ì„±ìì¸ì§€ í™•ì¸
 */
scwin.checkUserPermissionAndUpdateUI = function () {
    console.log("=== ì‚¬ìš©ì ê¶Œí•œ í™•ì¸ ì‹œì‘ ===");

    var userInfo = scwin.getUserInfoFromCookie();
    if (!userInfo) {
        console.log("ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì - ì¼ë°˜ UI í‘œì‹œ");
        scwin.showGeneralUserUI();
        return;
    }

    console.log("ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´:", userInfo);
    console.log("ì‚¬ìš©ì ì—­í• :", userInfo.role);
    console.log("ì‚¬ìš©ì íšŒì‚¬ ID:", userInfo.companyId);

    // COMPANY ì—­í• ì´ ì•„ë‹Œ ê²½ìš° ì¼ë°˜ ì‚¬ìš©ì UI
    if (userInfo.role !== "COMPANY") {
        console.log("ì¼ë°˜ ì‚¬ìš©ì(USER) - ì¼ë°˜ UI í‘œì‹œ");
        scwin.showGeneralUserUI();
        return;
    }

    // ê³µê³ ì˜ íšŒì‚¬ ID ê°€ì ¸ì˜¤ê¸°
    var postCompanyId = dmp_postDetail.get("companyId");
    console.log("ê³µê³  íšŒì‚¬ ID:", postCompanyId);

    // íšŒì‚¬ ID íƒ€ì… ë³€í™˜ í›„ ë¹„êµ
    var userCompanyId = userInfo.companyId;

    // ë¬¸ìì—´/ìˆ«ì íƒ€ì…ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ
    if (String(userCompanyId) === String(postCompanyId)) {
        console.log("âœ… ë³¸ì¸ ê³µê³  í™•ì¸ë¨ - ê¸°ì—… ê´€ë¦¬ UI í‘œì‹œ");
        scwin.showCompanyOwnerUI();
    } else {
        console.log("âŒ íƒ€ íšŒì‚¬ ê³µê³  - ì¼ë°˜ UI í‘œì‹œ");
        console.log("ì‚¬ìš©ì íšŒì‚¬ ID:", userCompanyId, "(íƒ€ì…:", typeof userCompanyId, ")");
        console.log("ê³µê³  íšŒì‚¬ ID:", postCompanyId, "(íƒ€ì…:", typeof postCompanyId, ")");
        scwin.showGeneralUserUI();
    }

    console.log("=== ì‚¬ìš©ì ê¶Œí•œ í™•ì¸ ì™„ë£Œ ===");
};

/**
 * ì¼ë°˜ ì‚¬ìš©ì UI í‘œì‹œ (ì§€ì›í•˜ê¸°, ë¶ë§ˆí¬)
 */
scwin.showGeneralUserUI = function () {
    console.log("ì¼ë°˜ ì‚¬ìš©ì UI ì ìš©");

    // ì¼ë°˜ ì‚¬ìš©ì ë²„íŠ¼ í‘œì‹œ
    btnApply.show();
    btnBookmark.show();

    // ê¸°ì—… ê´€ë¦¬ ë²„íŠ¼ ìˆ¨ê¹€
    btnEdit.hide();
    btnDelete.hide();
};

/**
 * ê¸°ì—… ì†Œìœ ì UI í‘œì‹œ (ìˆ˜ì •í•˜ê¸°, ì‚­ì œí•˜ê¸°)
 */
scwin.showCompanyOwnerUI = function () {
    console.log("ê¸°ì—… ì†Œìœ ì UI ì ìš©");

    // ì¼ë°˜ ì‚¬ìš©ì ë²„íŠ¼ ìˆ¨ê¹€
    btnApply.hide();
    btnBookmark.hide();

    // ê¸°ì—… ê´€ë¦¬ ë²„íŠ¼ í‘œì‹œ
    btnEdit.show();
    btnDelete.show();
};

// ìˆ˜ì •í•˜ê¸° ë²„íŠ¼ í´ë¦­
scwin.btnEdit_onclick = function (e) {
    var jobPostingId = dmp_postDetail.get("jobPostingId");
    var title = dmp_postDetail.get("title");

    if (confirm(title + " ê³µê³ ë¥¼ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        // TODO: ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™
        console.log("ê³µê³  ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™:", jobPostingId);

        try {
            // ìˆ˜ì • í˜ì´ì§€ë¡œ íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ ì´ë™
            if ($p.parent() && $p.parent().pf_main) {
                $p.parent().pf_main.setSrc("../post/EditPosting.xml", {
                    dataObject: {
                        jobPostingId: jobPostingId
                    }
                });
            } else {
                // EditPosting.xmlì´ ì—†ìœ¼ë©´ ì¼ë‹¨ ì•Œë¦¼ë§Œ
                alert("ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.\nê³µê³  ID: " + jobPostingId);
            }
        } catch (error) {
            console.error("ìˆ˜ì • í˜ì´ì§€ ì´ë™ ì˜¤ë¥˜:", error);
            alert("ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
    }
};

// ì‚­ì œí•˜ê¸° ë²„íŠ¼ í´ë¦­
scwin.btnDelete_onclick = function (e) {
    var jobPostingId = dmp_postDetail.get("jobPostingId");
    var title = dmp_postDetail.get("title");

    if (confirm(title + " ê³µê³ ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ê³µê³ ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")) {
        console.log("ê³µê³  ì‚­ì œ ìš”ì²­:", jobPostingId);

        // TODO: ì‚­ì œ Submission ì‹¤í–‰
        try {
            // ì‚­ì œ íŒŒë¼ë¯¸í„° ì„¤ì •
            // dmp_postParamì— jobPostingId ì„¤ì • (ì´ë¯¸ ìˆìŒ)

            // ì‚­ì œ submission ì‹¤í–‰ (submissionì„ ì¶”ê°€í•´ì•¼ í•¨)
            $c.sbm.execute($p, sbm_deletePost);

        } catch (error) {
            console.error("ê³µê³  ì‚­ì œ ì˜¤ë¥˜:", error);
            alert("ê³µê³  ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
    }
};

scwin.sbm_insertJobApplication_submitdone = function (e) {
    // ê³µê³ ì§€ì› í›„ ì¶”ê°€ê¸°ëŠ¥

};

scwin.btnApplicantDetails_onclick = function (e) {
    $p.url("ApplicantManagement.xml");
};
]]></script>
    </head>

    <body ev:onpageload="scwin.onpageload">
        <w2:wframe src="../common/Header.xml" id="headerFrame" />
        <xf:group class="main-wrap">

            <!-- ë©”ì¸ ì»¨í…ì¸  -->
            <main class="container">
                <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->

                <xf:group class="main-content">
                    <!-- íšŒì‚¬ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ -->
                    <section class="company-images">
                        <xf:group class="image-gallery">
                            <xf:group class="main-image">
                                <w2:textbox ref="data:dmp_postDetail.companyName"></w2:textbox>
                            </xf:group>
                            <xf:group class="sub-image">
                                <w2:textbox label="ì±„ìš© ì§„í–‰ì¤‘"></w2:textbox>
                            </xf:group>
                            <xf:group class="sub-image">
                                <w2:textbox ref="data:dmp_postDetail.industry"></w2:textbox>
                            </xf:group>
                        </xf:group>
                    </section>

                    <!-- ê³µê³  í—¤ë” -->
                    <section class="job-header">
                        <div class="job-meta">ê³µê³  ì •ë³´ ë¡œë”©ì¤‘...</div>
                        <w2:textbox class="job-title" ref="data:dmp_postDetail.title"></w2:textbox>

                        <xf:group class="job-actions">
                        	<!-- ì¼ë°˜ ì‚¬ìš©ììš© ë²„íŠ¼ë“¤ -->
                        	<xf:trigger class="btn-apply" id="btnApply" type="button" ev:onclick="scwin.btnApply_onclick">
                        		<xf:label>ì§€ì›í•˜ê¸°</xf:label>
                        	</xf:trigger>
                        	<xf:trigger class="btn-bookmark" id="btnBookmark" type="button" ev:onclick="scwin.btnBookmark_onclick">
                        		<xf:label>ğŸ¤ ë¶ë§ˆí¬</xf:label>
                        	</xf:trigger>

                        	<!-- ê¸°ì—… ì‚¬ìš©ììš© ë²„íŠ¼ë“¤ (ì‘ì„±ì ë³¸ì¸ë§Œ) -->
                        	<xf:trigger class="btn-edit" id="btnEdit" type="button" ev:onclick="scwin.btnEdit_onclick"
                        		style="display:none;">
                        		<xf:label>ìˆ˜ì •í•˜ê¸°</xf:label>
                        	</xf:trigger>
                        	<xf:trigger class="btn-delete" id="btnDelete" type="button" ev:onclick="scwin.btnDelete_onclick"
                        		style="display:none;">
                        		<xf:label>ì‚­ì œí•˜ê¸°</xf:label>
                        	</xf:trigger>
                        	<xf:trigger class="btn-applicant_details" id="btnApplicantDetails" type="button" style="" ev:onclick="scwin.btnApplicantDetails_onclick">
                        		<xf:label>ì§€ì›ì ë³´ê¸°</xf:label>
                        	</xf:trigger>
                        </xf:group>
                    </section>

                    <!-- ê³µê³  ë‚´ìš© -->
                    <section class="job-content">
                        <!-- ì£¼ìš”ì—…ë¬´ -->
                        <xf:group class="content-section">
                            <w2:textbox class="section-title" label="ì£¼ìš”ì—…ë¬´"></w2:textbox>
                            <w2:textbox class="section-content" ref="data:dmp_postDetail.description"></w2:textbox>
                        </xf:group>

                        <!-- ìê²©ìš”ê±´ -->
                        <xf:group class="content-section" style="display: none;" id="requirements-section">
                            <w2:textbox class="section-title" label="ìê²©ìš”ê±´"></w2:textbox>
                            <w2:textbox class="section-content" ref="data:dmp_postDetail.requirements"></w2:textbox>
                        </xf:group>

                        <!-- ìš°ëŒ€ì‚¬í•­ -->
                        <xf:group class="content-section" style="display: none;" id="preferred-section">
                            <w2:textbox class="section-title" label="ìš°ëŒ€ì‚¬í•­"></w2:textbox>
                            <w2:textbox class="section-content" ref="data:dmp_postDetail.preferred"></w2:textbox>
                        </xf:group>

                        <!-- í˜œíƒ ë° ë³µë¦¬í›„ìƒ -->
                        <xf:group class="content-section" style="display: none;" id="benefits-section">
                            <w2:textbox class="section-title" label="í˜œíƒ ë° ë³µë¦¬í›„ìƒ"></w2:textbox>
                            <w2:textbox class="section-content" ref="data:dmp_postDetail.benefits"></w2:textbox>
                        </xf:group>

                        <!-- ê¸°ìˆ  ìŠ¤íƒ -->
                        <xf:group class="content-section">
                            <w2:textbox class="section-title" label="ê¸°ìˆ ìŠ¤íƒ Â· íˆ´ Â· ê°œë°œ ë¶„ì•¼"></w2:textbox>
                            <xf:group class="tags tech-tags">
                                <!-- ê¸°ìˆ ìŠ¤íƒ íƒœê·¸ë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                                <div class="loading-content">
                                    <div class="loading-spinner"></div>
                                    ê¸°ìˆ ìŠ¤íƒ ì •ë³´ ë¡œë”©ì¤‘...
                                </div>
                            </xf:group>
                        </xf:group>

                        <!-- ê¸°íƒ€ ì •ë³´ -->
                        <xf:group class="content-section">
                            <w2:textbox class="section-title" label="ê¸°íƒ€ ì •ë³´"></w2:textbox>
                            <xf:group class="info-tags">
                                <!-- ê¸°íƒ€ ì •ë³´ê°€ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                                <div class="loading-content">
                                    <div class="loading-spinner"></div>
                                    ì •ë³´ ë¡œë”©ì¤‘...
                                </div>
                            </xf:group>
                        </xf:group>
                    </section>
                </xf:group>
            </main>
        </xf:group>

        <script type="text/javascript"><![CDATA[
        // í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰ë˜ëŠ” ì¶”ê°€ ì´ˆê¸°í™”
        setTimeout(function() {
            // ì„ íƒì  ì„¹ì…˜ë“¤ì˜ í‘œì‹œ ì—¬ë¶€ ê²°ì •
            scwin.toggleOptionalSections();
        }, 1000);

        /**
         * ì„ íƒì  ì„¹ì…˜ë“¤ì˜ í‘œì‹œ ì—¬ë¶€ ê²°ì •
         */
        scwin.toggleOptionalSections = function() {
            // ìê²©ìš”ê±´ ì„¹ì…˜
            var requirements = dmp_postDetail.get("requirements");
            if (requirements && requirements.trim() !== "") {
                document.getElementById("requirements-section").style.display = "block";
            }

            // ìš°ëŒ€ì‚¬í•­ ì„¹ì…˜
            var preferred = dmp_postDetail.get("preferred");
            if (preferred && preferred.trim() !== "") {
                document.getElementById("preferred-section").style.display = "block";
            }

            // í˜œíƒ ì„¹ì…˜
            var benefits = dmp_postDetail.get("benefits");
            if (benefits && benefits.trim() !== "") {
                document.getElementById("benefits-section").style.display = "block";
            }
        };
        ]]></script>
    </body>
</html>