<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare"
	xmlns:xf="http://www.w3.org/2002/xforms">

	<head meta_screenName="weaveType 설문 분석">
		<w2:type>COMPONENT</w2:type>
		<w2:buildDate />
		<w2:MSA />
		<xf:model>
			<w2:dataCollection baseNode="map">
				<!-- 설문 질문 조회 결과 -->
				<w2:dataMap baseNode="map" id="dma_questionsResult">
					<w2:keyInfo>
						<w2:key id="questions" name="질문그룹" dataType="text" value=""></w2:key>
						<w2:key id="totalCount" name="총질문수" dataType="number" value="0"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>

				<!-- 설문 응답 제출 데이터 -->
				<w2:dataMap baseNode="map" id="dma_surveySubmit">
					<w2:keyInfo>
						<w2:key id="userId" name="사용자ID" dataType="text" value="TEST_USER"></w2:key>
						<w2:key id="typeId" name="타입ID" dataType="number" value="1"></w2:key>
						<w2:key id="answers" name="응답목록" dataType="text" value=""></w2:key>
					</w2:keyInfo>
				</w2:dataMap>

				<!-- 분석 결과 데이터 -->
				<w2:dataMap baseNode="map" id="dma_analysisResult">
					<w2:keyInfo>
						<w2:key id="typeId" name="타입ID" dataType="number" value="0"></w2:key>
						<w2:key id="typeCode" name="유형코드" dataType="text" value=""></w2:key>
						<w2:key id="typeName" name="유형명" dataType="text" value=""></w2:key>
						<w2:key id="typeDescription" name="유형설명" dataType="text" value=""></w2:key>
						<w2:key id="scores" name="점수정보" dataType="text" value=""></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
			</w2:dataCollection>

			<w2:workflowCollection></w2:workflowCollection>

			<!-- 설문 질문 조회 -->
			<xf:submission id="sbm_getQuestions" ref="" target='data:json,{"id":"dma_questionsResult"}'
				action="/InsWebApp/SV0001Questions.pwkjson" method="post" mediatype="application/json" encoding="UTF-8" mode="asynchronous"
				processMsg="설문 질문을 불러오는 중입니다..." ev:submitdone="scwin.sbm_getQuestions_submitdone" ev:submiterror="scwin.sbm_getQuestions_submiterror">
			</xf:submission>

			<!-- 설문 응답 제출 -->
			<xf:submission id="sbm_submitSurvey" ref='data:json,{"id":"dma_surveySubmit"}'
				target='data:json,{"id":"dma_analysisResult"}' action="/InsWebApp/SV0001Submit.pwkjson" method="post" mediatype="application/json"
				encoding="UTF-8" mode="asynchronous" processMsg="설문을 분석하는 중입니다..." ev:submitdone="scwin.sbm_submitSurvey_submitdone"
				ev:submiterror="scwin.sbm_submitSurvey_submiterror">
			</xf:submission>
		</xf:model>

		<w2:layoutInfo />
		<w2:publicInfo method="" />

		<script type="text/javascript"><![CDATA[
            // 설문 질문 데이터 저장소 (JavaScript 객체로 관리)
            scwin.surveyQuestions = {};
            scwin.userAnswers = {};
            
            scwin.onpageload = function() {
                console.log("설문 분석 메인 페이지 로드됨");
                
                // 사용자 권한 체크 (기업 사용자 접근 차단)
                if (!scwin.checkUserPermission()) {
                    return; // 권한이 없으면 더 이상 진행하지 않음
                }
                
                // 설문 질문 조회
                scwin.loadSurveyQuestions();
            };
            
            // 사용자 권한 체크 함수
            scwin.checkUserPermission = function() {
                try {
                    // 쿠키에서 userInfo 가져오기
                    var userInfo = scwin.getUserInfoFromCookie();
                    console.log("권한 체크용 userInfo:", userInfo);
                    
                    if (userInfo === null) {
                        console.warn("사용자 정보를 가져올 수 없음");
                        alert("사용자 정보를 확인할 수 없습니다. 다시 로그인해 주세요.");
                        $p.url("../common/MainPage.xml");
                        return false;
                    }
                    
                    if (userInfo && userInfo.role === "COMPANY") {
                        // 기업 사용자인 경우 접근 차단
                        console.log("기업 사용자 접근 차단");
                        alert("죄송합니다. 개발자 유형 검사는 개인 사용자만 이용 가능합니다.\n기업 회원은 채용 공고 등록 및 관리 기능을 이용하실 수 있습니다.");
                        
                        // 메인 페이지로 리다이렉트
                        $p.url("../common/MainPage.xml");
                        return false;
                    }
                    
                    console.log("개인 사용자 접근 허용 - role:", userInfo.role);
                    return true; // 개인 사용자는 접근 허용
                } catch (error) {
                    console.error("사용자 권한 체크 중 오류:", error);
                    // 오류 발생 시 안전하게 메인 페이지로 리다이렉트
                    alert("사용자 정보를 확인할 수 없습니다. 다시 로그인해 주세요.");
                    $p.url("../common/MainPage.xml");
                    return false;
                }
            };
            
            // 쿠키에서 사용자 정보 파싱 함수 (PostDetail.xml과 동일한 방식)
            scwin.getUserInfoFromCookie = function() {
                try {
                    var userInfoCookieStr = WebSquare.cookie.getCookie("userInfo");
                    console.log("WebSquare.cookie로 가져온 userInfo:", userInfoCookieStr);
                    
                    if (userInfoCookieStr && userInfoCookieStr.trim() !== "") {
                        var userInfo = JSON.parse(userInfoCookieStr);
                        console.log("쿠키에서 추출한 사용자 정보:", userInfo);
                        return userInfo;
                    }
                    return null;
                } catch (error) {
                    console.error("사용자 정보 쿠키 파싱 오류:", error);
                    return null;
                }
            };
            
            // 설문 질문 로드
            scwin.loadSurveyQuestions = function() {
                console.log("설문 질문 조회 시작");
                $c.sbm.execute(sbm_getQuestions);
            };
            
            // 설문 질문 조회 성공 콜백
            scwin.sbm_getQuestions_submitdone = function(e) {
                console.log("설문 질문 조회 성공:", e.responseJSON);
                
                var response = e.responseJSON;
                if (response && response.questions) {
                    // 질문 데이터 저장
                    scwin.surveyQuestions = response.questions;
                    
                    // UI 렌더링
                    scwin.renderSurveyQuestions();
                    
                    // 진행률 초기화
                    scwin.updateProgress();
                    
                    console.log("설문 질문 렌더링 완료");
                } else {
                    console.error("설문 질문 데이터가 없습니다:", response);
                    $c.win.alert("설문 질문을 불러오는데 실패했습니다.");
                }
            };
            
            // 설문 질문 조회 실패 콜백
            scwin.sbm_getQuestions_submiterror = function(e) {
                console.error("설문 질문 조회 실패:", e);
                $c.win.alert("설문 질문을 불러오는데 실패했습니다.");
            };
            
            // 설문 문항 UI 렌더링
            scwin.renderSurveyQuestions = function() {
                var questionContainer = document.querySelector('.question-container');
                if (!questionContainer) return;
                
                var html = '';
                var axisNames = {
                    'B_A': { name: 'Builder vs Architect', desc: '개발 스타일' },
                    'R_I': { name: 'Refactor vs Innovate', desc: '기술 성향' },
                    'S_T': { name: 'Solo vs Team', desc: '협업 방식' },
                    'D_F': { name: 'Debug vs Feature', desc: '작업 선호' }
                };
                
                // 축별로 질문 렌더링
                for (var axis in scwin.surveyQuestions) {
                    var questions = scwin.surveyQuestions[axis];
                    var axisInfo = axisNames[axis] || { name: axis, desc: '' };
                    
                    html += '<div class="axis-section">';
                    html += '<div class="axis-header">';
                    html += '<h3 class="axis-title">' + axisInfo.name + '</h3>';
                    html += '<p class="axis-desc">' + axisInfo.desc + '</p>';
                    html += '</div>';
                    
                    // 해당 축의 질문들
                    for (var i = 0; i < questions.length; i++) {
                        var question = questions[i];
                        
                        html += '<div class="question-card" data-question-id="' + question.questionId + '">';
                        html += '<div class="question-number">Q' + question.questionId + '</div>';
                        html += '<div class="question-text">' + question.questionText + '</div>';
                        html += '<div class="answer-options">';
                        
                        // 7점 척도 라디오 버튼
                        for (var j = 1; j <= 7; j++) {
                            var label = '';
                            if (j === 1) label = '전혀 그렇지 않다';
                            else if (j === 4) label = '보통이다';
                            else if (j === 7) label = '매우 그렇다';
                            
                            html += '<label class="option-label">';
                            html += '<input type="radio" name="question_' + question.questionId + '" value="' + j + '" data-question-id="' + question.questionId + '" data-value="' + j + '">';
                            html += '<span class="option-number">' + j + '</span>';
                            html += '<span class="option-text">' + label + '</span>';
                            html += '</label>';
                        }
                        
                        html += '</div>';
                        html += '</div>';
                    }
                    
                    html += '</div>'; // axis-section 닫기
                }
                
                questionContainer.innerHTML = html;
                
                // 이벤트 리스너 바인딩
                scwin.bindAnswerEvents();
                
                // 스크롤 이벤트 추가
                scwin.addScrollEvent();
            };
            
            // 답변 이벤트 바인딩
            scwin.bindAnswerEvents = function() {
                console.log("이벤트 바인딩 시작");
                var radioButtons = document.querySelectorAll('input[type="radio"][data-question-id]');
                console.log("라디오 버튼 개수:", radioButtons.length);
                
                for (var i = 0; i < radioButtons.length; i++) {
                    radioButtons[i].addEventListener('change', function(event) {
                        console.log("라디오 버튼 클릭됨");
                        var questionId = parseInt(event.target.getAttribute('data-question-id'));
                        var value = parseInt(event.target.getAttribute('data-value'));
                        console.log("questionId:", questionId, "value:", value);
                        scwin.handleAnswerChange(questionId, value);
                    });
                }
                console.log("이벤트 바인딩 완료");
            };
            
            // 답변 변경 핸들러
            scwin.handleAnswerChange = function(questionId, value) {
                // 사용자 답변 저장
                scwin.userAnswers[questionId] = value;
                
                // 진행률 업데이트
                scwin.updateProgress();
                
                console.log("답변 변경됨 - 질문 " + questionId + ": " + value);
            };
            
            // 진행률 업데이트
            scwin.updateProgress = function() {
                var totalQuestions = scwin.getTotalQuestionCount();
                var answeredQuestions = Object.keys(scwin.userAnswers).length;
                
                var progress = totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;
                
                // 진행률 바 업데이트
                var progressBar = document.querySelector('.progress-fill');
                var progressText = document.querySelector('.progress-text');
                
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }
                if (progressText) {
                    progressText.textContent = answeredQuestions + ' / ' + totalQuestions + ' 완료 (' + progress + '%)';
                }
                
                // 완료 버튼 활성화/비활성화
                var submitBtn = document.querySelector('.btn-submit');
                if (submitBtn) {
                    if (progress === 100) {
                        submitBtn.disabled = false;
                        submitBtn.classList.remove('disabled');
                    } else {
                        submitBtn.disabled = true;
                        submitBtn.classList.add('disabled');
                    }
                }
            };
            
            // 전체 질문 수 계산
            scwin.getTotalQuestionCount = function() {
                var total = 0;
                for (var axis in scwin.surveyQuestions) {
                    total += scwin.surveyQuestions[axis].length;
                }
                return total;
            };
            
            // 스크롤 이벤트 추가 (현재 보고있는 섹션 하이라이트)
            scwin.addScrollEvent = function() {
                var sections = document.querySelectorAll('.axis-section');
                var navItems = document.querySelectorAll('.progress-axis');
                
                window.addEventListener('scroll', function() {
                    var current = '';
                    sections.forEach(function(section) {
                        var sectionTop = section.offsetTop;
                        if (window.pageYOffset >= (sectionTop - 200)) {
                            var axisHeader = section.querySelector('.axis-title');
                            if (axisHeader) {
                                current = axisHeader.textContent;
                            }
                        }
                    });
                    
                    navItems.forEach(function(item) {
                        item.classList.remove('active');
                        if (item.textContent.includes(current.split(' ')[0])) {
                            item.classList.add('active');
                        }
                    });
                });
            };
            
            // 설문 제출
            scwin.btn_submit_onclick = function() {
                // 모든 문항에 답변했는지 확인
                var totalQuestions = scwin.getTotalQuestionCount();
                var answeredQuestions = Object.keys(scwin.userAnswers).length;
                
                if (answeredQuestions < totalQuestions) {
                    $c.win.alert("아직 답변하지 않은 문항이 있습니다.");
                    return;
                }
                
                // 응답 데이터 준비
                var answers = [];
                for (var questionId in scwin.userAnswers) {
                    answers.push({
                        questionId: parseInt(questionId),
                        answerValue: scwin.userAnswers[questionId]
                    });
                }
                
                // DataMap에 설정
                dma_surveySubmit.set("answers", JSON.stringify(answers));
                
                console.log("설문 제출 데이터:", answers);
                
                // Submission 실행
                $c.sbm.execute(sbm_submitSurvey);
            };
            
            // 설문 제출 성공 콜백
            scwin.sbm_submitSurvey_submitdone = function(e) {
                console.log("설문 제출 성공:", e.responseJSON);
                
                var response = e.responseJSON;
                if (response && response.typeCode) {
                    // 결과 표시
                    scwin.displaySurveyResult(response);
                } else {
                    console.error("분석 결과 데이터가 없습니다:", response);
                    $c.win.alert("설문 분석에 실패했습니다.");
                }
            };
            
            // 설문 제출 실패 콜백
            scwin.sbm_submitSurvey_submiterror = function(e) {
                console.error("설문 제출 실패:", e);
                $c.win.alert("설문 분석 중 오류가 발생했습니다.");
            };
            
            // 설문 결과 표시
            scwin.displaySurveyResult = function(result) {
                console.log("설문 결과 표시:", result);
                
                // 유형 정의
                var typeDefinitions = {
                    'AITF': { name: '혁신적 팀 아키텍트', desc: '새로운 기술로 팀과 함께 혁신적인 기능을 설계하는 개발자' },
                    'AITD': { name: '미래지향 팀 디버거', desc: '새로운 기술로 팀과 함께 안정적인 시스템을 구축하는 개발자' },
                    'AISF': { name: '창의적 솔로 아키텍트', desc: '혁신적 설계를 통해 독창적인 기능을 개발하는 개발자' },
                    'AISD': { name: '혁신적 설계 전문가', desc: '새로운 기술로 안정적이고 혁신적인 설계를 하는 개발자' },
                    'ARTF': { name: '구조적 팀 빌더', desc: '검증된 기술로 팀과 함께 견고한 기능을 구축하는 개발자' },
                    'ARTD': { name: '완벽주의 팀 디버거', desc: '체계적 접근으로 팀과 함께 완벽한 시스템을 만드는 개발자' },
                    'ARSF': { name: '균형잡힌 솔로 아키텍트', desc: '체계적 설계로 개인의 강점을 발휘하는 개발자' },
                    'ARSD': { name: '체계적 리팩터 마스터', desc: '기존 시스템을 체계적으로 개선하는 개발자' },
                    'BITF': { name: '혁신적 팀 크리에이터', desc: '새로운 기술로 팀과 함께 빠르게 기능을 구현하는 개발자' },
                    'BITD': { name: '실험적 팀 문제 해결사', desc: '새로운 방법으로 팀과 함께 문제를 해결하는 개발자' },
                    'BISF': { name: '창의적 스피드 러너', desc: '혁신적 방법으로 빠르게 기능을 구현하는 개발자' },
                    'BISD': { name: '혁신적 솔로 디버거', desc: '새로운 접근법으로 독립적으로 문제를 해결하는 개발자' },
                    'BRTF': { name: '빠른 팀 기능 개발자', desc: '검증된 방법으로 팀과 함께 실용적인 기능을 개발하는 개발자' },
                    'BRTD': { name: '신뢰성 있는 팀 디버거', desc: '안정적 방법으로 팀과 함께 문제를 해결하는 개발자' },
                    'BRSF': { name: '민첩한 기능 빌더', desc: '실용적 접근으로 빠르게 기능을 구현하는 개발자' },
                    'BRSD': { name: '실용적 안정성 추구자', desc: '검증된 방법으로 안정적인 솔루션을 만드는 개발자' }
                };
                
                var typeCode = result.typeCode || 'ARTF';
                var typeInfo = typeDefinitions[typeCode] || typeDefinitions['ARTF'];
                
                // 이미지 경로 설정
                var imagePath = '/InsWebApp/images/ws5/mbti/png/' + typeCode + '.png';
                var mbtiImageEl = document.querySelector('#mbtiResultImage');
                if (mbtiImageEl) {
                    mbtiImageEl.src = imagePath;
                }
                
                // 설문 섹션 숨기기
                var surveySection = document.querySelector('.survey-section');
                if (surveySection) surveySection.style.display = 'none';
                
                // 결과 섹션 보이기
                var resultSection = document.querySelector('.result-section');
                if (resultSection) resultSection.style.display = 'block';
                
                // 결과 데이터 설정
                var typeCodeEl = document.querySelector('.result-type-code');
                if (typeCodeEl) typeCodeEl.textContent = typeCode;
                
                var typeNameEl = document.querySelector('.result-type-name');
                if (typeNameEl) typeNameEl.textContent = typeInfo.name;
                
                var typeDescEl = document.querySelector('.result-type-desc');
                if (typeDescEl) typeDescEl.textContent = typeInfo.desc;
                
                // 점수 표시 (0점 기준 -50~+50, 부호 포함)
                if (result.scores) {
                    var scores = result.scores;
                    
                    // B/A 축 (+: Architect, -: Builder)
                    var scoreAbEl = document.querySelector('.score-ab');
                    var abScore = scores['A_B'] || 0;
                    if (scoreAbEl) scoreAbEl.textContent = (abScore >= 0 ? '+' : '') + Math.round(abScore) + '점';
                    
                    var abTypeEl = document.querySelector('.ab-type');
                    if (abTypeEl) {
                        if (abScore >= 0) {
                            abTypeEl.textContent = 'Architect 성향 (' + Math.round(abScore) + ')';
                            abTypeEl.style.color = '#2563eb';
                        } else {
                            abTypeEl.textContent = 'Builder 성향 (' + Math.round(abScore) + ')';
                            abTypeEl.style.color = '#dc2626';
                        }
                    }
                    
                    // R/I 축 (+: Innovate, -: Refactor)
                    var scoreRiEl = document.querySelector('.score-ri');
                    var riScore = scores['R_I'] || 0;
                    if (scoreRiEl) scoreRiEl.textContent = (riScore >= 0 ? '+' : '') + Math.round(riScore) + '점';
                    
                    var riTypeEl = document.querySelector('.ri-type');
                    if (riTypeEl) {
                        if (riScore >= 0) {
                            riTypeEl.textContent = 'Innovate 성향 (' + Math.round(riScore) + ')';
                            riTypeEl.style.color = '#2563eb';
                        } else {
                            riTypeEl.textContent = 'Refactor 성향 (' + Math.round(riScore) + ')';
                            riTypeEl.style.color = '#dc2626';
                        }
                    }
                    
                    // S/T 축 (+: Team, -: Solo)
                    var scoreStEl = document.querySelector('.score-st');
                    var stScore = scores['S_T'] || 0;
                    if (scoreStEl) scoreStEl.textContent = (stScore >= 0 ? '+' : '') + Math.round(stScore) + '점';
                    
                    var stTypeEl = document.querySelector('.st-type');
                    if (stTypeEl) {
                        if (stScore >= 0) {
                            stTypeEl.textContent = 'Team 성향 (' + Math.round(stScore) + ')';
                            stTypeEl.style.color = '#2563eb';
                        } else {
                            stTypeEl.textContent = 'Solo 성향 (' + Math.round(stScore) + ')';
                            stTypeEl.style.color = '#dc2626';
                        }
                    }
                    
                    // D/F 축 (+: Feature, -: Debug)
                    var scoreDfEl = document.querySelector('.score-df');
                    var dfScore = scores['D_F'] || 0;
                    if (scoreDfEl) scoreDfEl.textContent = (dfScore >= 0 ? '+' : '') + Math.round(dfScore) + '점';
                    
                    var dfTypeEl = document.querySelector('.df-type');
                    if (dfTypeEl) {
                        if (dfScore >= 0) {
                            dfTypeEl.textContent = 'Feature 성향 (' + Math.round(dfScore) + ')';
                            dfTypeEl.style.color = '#2563eb';
                        } else {
                            dfTypeEl.textContent = 'Debug 성향 (' + Math.round(dfScore) + ')';
                            dfTypeEl.style.color = '#dc2626';
                        }
                    }
                }
                
                console.log('설문 결과 표시 완료:', typeCode, typeInfo.name);
            };
            
            // 다시하기
            scwin.btn_restart_onclick = function() {
                // 모든 응답 초기화
                scwin.userAnswers = {};
                
                // 라디오 버튼 초기화
                var radioButtons = document.querySelectorAll('input[type="radio"]');
                radioButtons.forEach(function(radio) {
                    radio.checked = false;
                });
                
                // 결과 섹션 숨기기
                var resultSection = document.querySelector('.result-section');
                if (resultSection) resultSection.style.display = 'none';
                
                // 설문 섹션 보이기
                var surveySection = document.querySelector('.survey-section');
                if (surveySection) surveySection.style.display = 'block';
                
                // 진행률 초기화
                scwin.updateProgress();
                
                // 맨 위로 스크롤
                window.scrollTo(0, 0);
            };
            
            // 개인정보 수정으로 이동
            scwin.goToUserDetail = function() {
                $p.url("../user/UserDetail.xml");
            };
            

        ]]></script>

		<style type="text/css"><![CDATA[
            .main-container {
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                min-height: 100vh;
                font-family: "Malgun Gothic", "맑은 고딕", sans-serif;
            }
            
            .content-area {
                max-width: 800px;
                margin: 0 auto;
                padding: 40px 20px;
            }
            
            /* ===== 설문 섹션 ===== */
            .survey-section {
                animation: fadeInUp 0.8s ease-out;
            }
            
            .page-header {
                text-align: center;
                margin-bottom: 50px;
            }
            
            .main-title {
                font-size: 36px;
                font-weight: bold;
                color: #333;
                margin-bottom: 16px;
            }
            
            .sub-title {
                font-size: 20px;
                color: #666;
                line-height: 1.5;
            }
            
            .progress-section {
                background: white;
                border-radius: 15px;
                padding: 25px;
                margin-bottom: 40px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
                position: sticky;
                top: 20px;
                z-index: 100;
            }
            
            .progress-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
            }
            
            .progress-title {
                font-size: 18px;
                font-weight: bold;
                color: #333;
            }
            
            .progress-text {
                font-size: 14px;
                color: #666;
            }
            
            .progress-bar {
                width: 100%;
                height: 8px;
                background: #f0f0f0;
                border-radius: 4px;
                overflow: hidden;
                margin-bottom: 15px;
            }
            
            .progress-fill {
                height: 100%;
                background: linear-gradient(45deg, #007bff, #00c9ff);
                width: 0%;
                transition: width 0.3s ease;
            }
            
            .progress-nav {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
            
            .progress-axis {
                text-align: center;
                padding: 8px;
                background: #f8f9fa;
                border-radius: 8px;
                font-size: 12px;
                color: #666;
                transition: all 0.3s ease;
            }
            
            .progress-axis.active {
                background: #007bff;
                color: white;
            }
            
            .axis-section {
                margin-bottom: 50px;
            }
            
            .axis-header {
                text-align: center;
                margin-bottom: 30px;
                padding: 30px 20px;
                background: white;
                border-radius: 15px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            }
            
            .axis-title {
                font-size: 24px;
                font-weight: bold;
                color: #333;
                margin-bottom: 8px;
            }
            
            .axis-desc {
                font-size: 16px;
                color: #666;
            }
            
            .question-card {
                background: white;
                border-radius: 15px;
                padding: 30px;
                margin-bottom: 25px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
                transition: all 0.3s ease;
            }
            
            .question-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            }
            
            .question-number {
                display: inline-block;
                background: #007bff;
                color: white;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 14px;
                font-weight: bold;
                margin-bottom: 16px;
            }
            
            .question-text {
                font-size: 18px;
                color: #333;
                line-height: 1.6;
                margin-bottom: 25px;
                font-weight: 500;
            }
            
            .answer-options {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 10px;
            }
            
            .option-label {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 15px 8px;
                border: 2px solid #e9ecef;
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
            }
            
            .option-label:hover {
                border-color: #007bff;
                background: #f8f9ff;
            }
            
            .option-label input[type="radio"] {
                display: none;
            }
            
            .option-label input[type="radio"]:checked + .option-number {
                background: #007bff;
                color: white;
            }
            
            .option-label input[type="radio"]:checked ~ .option-text {
                color: #007bff;
                font-weight: bold;
            }
            
            .option-number {
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background: #f8f9fa;
                color: #666;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                margin-bottom: 8px;
                transition: all 0.3s ease;
            }
            
            .option-text {
                font-size: 11px;
                color: #666;
                line-height: 1.2;
                transition: all 0.3s ease;
            }
            
            .submit-section {
                text-align: center;
                margin-top: 50px;
            }
            
            .btn-submit {
                background: linear-gradient(45deg, #007bff, #0056b3);
                color: white;
                border: none;
                padding: 18px 60px;
                border-radius: 50px;
                font-size: 18px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 16px rgba(0, 123, 255, 0.3);
            }
            
            .btn-submit:hover:not(.disabled) {
                background: linear-gradient(45deg, #0056b3, #004494);
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
            }
            
            .btn-submit.disabled {
                background: #ccc;
                cursor: not-allowed;
                box-shadow: none;
            }
            
            /* ===== 결과 섹션 ===== */
            .result-section {
                text-align: center;
                animation: fadeInUp 0.8s ease-out;
                display: none;
            }
            
            .result-header {
                margin-bottom: 40px;
            }
            
            .result-title {
                font-size: 36px;
                font-weight: bold;
                color: #333;
                margin-bottom: 16px;
            }
            
            .result-subtitle {
                font-size: 18px;
                color: #666;
            }
            
            .result-card {
                background: white;
                border-radius: 20px;
                padding: 40px;
                margin: 0 auto 40px auto;
                max-width: 500px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            
            .result-type-code {
                font-size: 64px;
                font-weight: bold;
                color: #007bff;
                margin-bottom: 20px;
                font-family: 'Courier New', monospace;
            }
            
            .result-type-name {
                font-size: 28px;
                font-weight: bold;
                color: #333;
                margin-bottom: 16px;
            }
            
            .result-type-desc {
                font-size: 16px;
                color: #666;
                line-height: 1.6;
            }
            
            .mbti-result-image {
                display: block;
                margin: 10px auto;
                max-width: 300px;
            }
            
            .score-section {
                background: white;
                border-radius: 15px;
                padding: 30px;
                margin: 0 auto 40px auto;
                max-width: 600px;
                box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            }
            
            .score-title {
                font-size: 24px;
                font-weight: bold;
                color: #333;
                margin-bottom: 30px;
            }
            
            .score-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .score-item {
                background: #f8f9fa;
                border-radius: 12px;
                padding: 20px;
                text-align: center;
            }
            
            .score-label {
                font-size: 14px;
                color: #666;
                margin-bottom: 8px;
            }
            
            .score-ab, .score-ri, .score-st, .score-df {
                font-size: 24px;
                font-weight: bold;
                color: #007bff;
            }
            
            .ab-type, .ri-type, .st-type, .df-type {
                font-size: 12px;
                color: #666;
                margin-top: 4px;
            }
            
            .confidence-section {
                background: #e7f3ff;
                border-radius: 12px;
                padding: 20px;
                text-align: center;
            }
            
            .confidence-label {
                font-size: 16px;
                color: #666;
                margin-bottom: 8px;
            }
            
            .score-confidence {
                font-size: 32px;
                font-weight: bold;
                color: #28a745;
            }
            
            .result-buttons {
                margin-top: 40px;
                display: flex;
                gap: 20px;
                justify-content: center;
            }
            
            .btn-restart, .btn-profile {
                padding: 16px 32px;
                border-radius: 50px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.3s ease;
                border: none;
            }
            
            .btn-restart {
                background: linear-gradient(45deg, #6c757d, #5a6268);
                color: white;
                box-shadow: 0 4px 16px rgba(108, 117, 125, 0.3);
            }
            
            .btn-restart:hover {
                background: linear-gradient(45deg, #5a6268, #495057);
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(108, 117, 125, 0.4);
            }
            
            .btn-profile {
                background: linear-gradient(45deg, #28a745, #20c997);
                color: white;
                box-shadow: 0 4px 16px rgba(40, 167, 69, 0.3);
            }
            
            .btn-profile:hover {
                background: linear-gradient(45deg, #20c997, #17a2b8);
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
            }
            
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            /* 반응형 디자인 */
            @media (max-width: 768px) {
                .content-area {
                    padding: 20px 10px;
                }
                
                .main-title {
                    font-size: 28px;
                }
                
                .sub-title {
                    font-size: 16px;
                }
                
                .answer-options {
                    grid-template-columns: repeat(7, 1fr);
                    gap: 5px;
                }
                
                .option-label {
                    padding: 10px 4px;
                }
                
                .option-text {
                    font-size: 10px;
                }
                
                .progress-nav {
                    grid-template-columns: repeat(2, 1fr);
                }
                
                .score-grid {
                    grid-template-columns: 1fr;
                }
                
                .result-buttons {
                    flex-direction: column;
                }
                
                .result-type-code {
                    font-size: 48px;
                }
                
                .result-type-name {
                    font-size: 24px;
                }
            }
        ]]></style>
	</head>

	<body ev:onpageload="scwin.onpageload">
		<w2:wframe src="../common/Header.xml" id="headerFrame" />

		<xf:group class="main-container">
			<xf:group class="content-area">

				<!-- 설문 섹션 -->
				<xf:group class="survey-section">
					<xf:group class="page-header">
						<w2:textbox class="main-title" label="개발자 성향 설문조사" tagname="h1"></w2:textbox>
						<w2:textbox class="sub-title" label="당신의 개발 스타일과 선호도를 알아보세요" tagname="p"></w2:textbox>
					</xf:group>

					<!-- 진행률 섹션 -->
					<xf:group class="progress-section">
						<xf:group class="progress-header">
							<w2:textbox class="progress-title" label="진행률" tagname="div"></w2:textbox>
							<w2:textbox class="progress-text" label="0 / 20 완료 (0%)" tagname="div"></w2:textbox>
						</xf:group>

						<xf:group class="progress-bar">
							<w2:textbox class="progress-fill" label="" tagname="div" style="width: 0%;"></w2:textbox>
						</xf:group>

						<xf:group class="progress-nav">
							<w2:textbox class="progress-axis" label="Builder vs Architect" tagname="div"></w2:textbox>
							<w2:textbox class="progress-axis" label="Refactor vs Innovate" tagname="div"></w2:textbox>
							<w2:textbox class="progress-axis" label="Solo vs Team" tagname="div"></w2:textbox>
							<w2:textbox class="progress-axis" label="Debug vs Feature" tagname="div"></w2:textbox>
						</xf:group>
					</xf:group>

					<!-- 설문 문항 컨테이너 -->
					<xf:group class="question-container"></xf:group>

					<!-- 제출 버튼 -->
					<xf:group class="submit-section">
						<xf:trigger class="btn-submit  disabled" ev:onclick="scwin.btn_submit_onclick" style="disabled: true;">
							<xf:label>분석 시작</xf:label>
						</xf:trigger>
					</xf:group>
				</xf:group>

				<!-- 결과 섹션 -->
				<xf:group class="result-section">
					<xf:group class="result-header">
						<w2:textbox class="result-title" label="설문 분석 결과" tagname="h1"></w2:textbox>
						<w2:textbox class="result-subtitle" label="당신의 codeFIT은..." tagname="p"></w2:textbox>
					</xf:group>
					<xf:group class="result-card">
						<img id="mbtiResultImage" src="" alt="MBTI Result Image" class="mbti-result-image" />
						<w2:textbox class="result-type-code" label="ARTF" tagname="div"></w2:textbox>
						<w2:textbox class="result-type-name" label="구조적 팀 빌더" tagname="div"></w2:textbox>
						<w2:textbox class="result-type-desc" label="검증된 기술로 팀과 함께 견고한 기능을 구축하는 개발자" tagname="div"></w2:textbox>
					</xf:group>

					<xf:group class="score-section">
						<w2:textbox class="score-title" label="상세 점수" tagname="div"></w2:textbox>

						<xf:group class="score-grid">
							<xf:group class="score-item">
								<w2:textbox class="score-label" label="Builder ↔ Architect" tagname="div"></w2:textbox>
								<w2:textbox class="score-ab" label="0점" tagname="div"></w2:textbox>
								<w2:textbox class="ab-type" label="분석 중..." tagname="div"></w2:textbox>
							</xf:group>

							<xf:group class="score-item">
								<w2:textbox class="score-label" label="Refactor ↔ Innovate" tagname="div"></w2:textbox>
								<w2:textbox class="score-ri" label="0점" tagname="div"></w2:textbox>
								<w2:textbox class="ri-type" label="분석 중..." tagname="div"></w2:textbox>
							</xf:group>

							<xf:group class="score-item">
								<w2:textbox class="score-label" label="Solo ↔ Team" tagname="div"></w2:textbox>
								<w2:textbox class="score-st" label="0점" tagname="div"></w2:textbox>
								<w2:textbox class="st-type" label="분석 중..." tagname="div"></w2:textbox>
							</xf:group>

							<xf:group class="score-item">
								<w2:textbox class="score-label" label="Debug ↔ Feature" tagname="div"></w2:textbox>
								<w2:textbox class="score-df" label="0점" tagname="div"></w2:textbox>
								<w2:textbox class="df-type" label="분석 중..." tagname="div"></w2:textbox>
							</xf:group>
						</xf:group>

						<xf:group class="confidence-section">
							<w2:textbox class="confidence-label" label="분석 신뢰도" tagname="div"></w2:textbox>
							<w2:textbox class="score-confidence" label="0%" tagname="div"></w2:textbox>
						</xf:group>
					</xf:group>

					<xf:group class="result-buttons">
						<xf:trigger class="btn-restart" ev:onclick="scwin.btn_restart_onclick">
							<xf:label>다시하기</xf:label>
						</xf:trigger>
						<xf:trigger class="btn-profile" ev:onclick="scwin.goToUserDetail">
							<xf:label>프로필로 이동</xf:label>
						</xf:trigger>
					</xf:group>
				</xf:group>

			</xf:group>
		</xf:group>
	</body>
</html>
