"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[3955],{3955:(t,e,i)=>{i.r(e),i.d(e,{windowContainer:()=>h});var n=i(1570),o=i(8548),s=i(866),a=i(2847),r=i(6323),d=i(4171),l=i(3885),h=function(t,e,i){l.q.call(this,t,e,i)};n.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.windowContainer",pluginName:"windowContainer",userEvents:["onCloseWindow","onwindowkeyup","onwindowchange","onwindowtabclick","onbeforecloseall","onbeforenamelayermove","onafternamelayermove","onwindowsplit","onmenuclick","onwindowload","onwindowunload","oncustomcontrolclick","onminimizebtnclick","onrestorebtnclick","ondragstart","ondragend","onresize"],useConfirmMessage:!0,confirmTrueAction:"existWindow",confirmFalseAction:"newWindow",windowMaxNum:5,confirmMessage:"",lineBreakNum:4,useNameScroll:!1,useCloseButton:!1,useFixButton:!1,useNameContainer:!1,controlIconPosition:"left",fixArrangeFullScreen:!1,verticalArrangeNum:2,horizontalArrangeNum:2,sequentialArrangeRowNum:2,sequentialArrangeColNum:2,windowAutoResize:!1,toolbarWidth:0,toolbarPosition:"bottom",positionX:"none",positionY:"none",windowMaximizeAll:!1,minVisibleWindowPixel:20,stopMinimizeOnNameLayer:!1,stopToggleOnLast:!1,defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",hideTitleOnMaximize:!1,usePopup:!1,closeWindowOnPopup:!1,tooltipDisplay:!0,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,windowTooltipDisplay:!0,useLocale:!1,confirmMessageLocaleRef:"",wmode:!1,selectedIndex:-1,useStatusMsg:!0,useCustomMsg:!1,statusMsg:"",customMsg:"",nameScrollMode:"",useControlIconTitle:!1,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,spaReplaceHistory:!1,nameLayerMenu:!1,windowHeaderHTML:"",enableHeaderSelect:!1,useDrag:!1,skipZIndex:!1,noAttatchedEvent:!1,closeType:"all",nameLayerMove:!1,nameLayerMoveGap:110,useWindowSplit:!1,keepSelectedWindow:!1,swapZIndex:!1,controlIcons:[{id:"vertical",className:"w2windowContainer_controlIcon_vertical",useTitle:!1,isCustom:!1},{id:"horizontal",className:"w2windowContainer_controlIcon_horizontal",useTitle:!1,isCustom:!1},{id:"cascade",className:"w2windowContainer_controlIcon_cascade",useTitle:!1,isCustom:!1},{id:"sequential",className:"w2windowContainer_controlIcon_sequential",useTitle:!1,isCustom:!1},{id:"closeAll",className:"w2windowContainer_controlIcon_closeAll",useTitle:!1,isCustom:!1}],buttonFormatter:"",controlIconFormatter:null,restoreWinSize:!1,spaAuto:!1,spaAutoDelay:3e3,windowDragMove:!1,windowMoveType:"restrict",frameModal:!1,useWindowId:!1,processMsgFrame:!1,useWindowScrollButton:!1,windowScrollVisibleRowNum:5,autoArrange:!1,includeMinimizeWindow:!1,escape:!0,changeActiveWindow:!1,nameLayerRearrange:!1,msaName:"",accessibility:!1,foldOnMinimized:!1,scopeInherit:"",resizeEvent:!1},h.prototype.initialize=function(t){try{this.windows=[],this.fixedWindowArr=[],this.beforeWindow=null,this.nowWindow=null,this.focusWindowId=null,this.selectedWindowHistory=[],this.selectedIndex=-1,this.visibleWindows=[],this.windowIdx=0,this.maxZIndex=0,this.currentWindowNum=0,this.tooltip=null,this.timeShowTooltip=null,this.useControlIconFormatter=!1,this.options.confirmMessage=WebSquare.language.getMessage("WindowContainer_confirm_warning")||"#title screen exists. Select 'OK' to use the existing window, or 'Cancel' to use a new window.",this.options.useLocale&&null!=this.options.confirmMessageLocaleRef&&""!=this.options.confirmMessageLocaleRef&&(this.options.confirmMessage=this.getLocaleValue(this.options.confirmMessageLocaleRef)),!0===this.options.accessibility&&(this.options.tabIndex="0",this.options.tableRender="ul",this.options.useFixButton=!0,this.options.useNameContainer="true",this.options.controlIconPosition="allright",this.options.useAccessibilityMenu=!0,
this.options.nameLayerMenu=!1,this.options.foldOnMinimized=!0);var e="w2windowContainer_window";"top"==this.options.toolbarPosition&&(e+="_top");var i=new WebSquare.uiplugin.group(this.id+"_window",{className:e,style:"background-color : transparent"});this.addControl(i),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),t&&"$blank"==t.getAttribute("statusMsg")?this.defaultStatusMsg="":this.defaultStatusMsg=this.options.statusMsg||WebSquare.language.getMessage("Window_statusMsg"),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==o.I.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),this.storedFrame=[],this.options.nameLayerMenu&&(this.options.useNameContainer=!0),this.windowHeaderHTML="",this.nameLayerHTML="",this.multiViewIdArr=[],this.options.useDrag,"wframe"!==this.options.frameMode&&"pageFrame"!==this.options.frameMode||(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!1),this.options.includeMinimizeWindow&&!this.options.windowMaximizeAll&&(this.options.includeMinimizeWindow=!1),this.zIndexFlagInfo={},this.options.useNameContainer||(this.options.controlIconPosition="left"),this._displayOnlyTopWindow=r.Z.getBoolean(o.I.getConfiguration("/WebSquare/windowContainer/displayOnlyTopWindow/@value")),this._splitInfo={}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e={vertical:"",horizontal:"",cascade:"",sequential:"",closeAll:"",maximize:"",windowList:"",previousWindow:"",nextWindow:"",closeOthers:""},i=""==this.options.style?"":"style='"+this.options.style+"'",n=""==this.options.tabIndex?"":"tabindex='"+this.options.tabIndex+"'";function W(t){return t?" title='"+t+"'":""}this.options.useControlIconTitle&&(e.maximize=W(WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")),e.vertical=W(WebSquare.language.getMessage("WindowContainer_controlIcon_vertical")),e.horizontal=W(WebSquare.language.getMessage("WindowContainer_controlIcon_horizontal")),e.cascade=W(WebSquare.language.getMessage("WindowContainer_controlIcon_cascade")),e.sequential=W(WebSquare.language.getMessage("WindowContainer_controlIcon_sequential")),e.closeAll=W(WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")),e.windowList=W(WebSquare.language.getMessage("WindowContainer_controlIcon_windowList")),e.previousWindow=W(WebSquare.language.getMessage("WindowContainer_previous")),e.nextWindow=W(WebSquare.language.getMessage("WindowContainer_next")));var o="w2windowContainer_windowToolbar";"top"==this.options.toolbarPosition&&(o+="_top");var a="",r="";!this.options.useNameContainer||"right"!=this.options.controlIconPosition&&"allright"!=this.options.controlIconPosition||(a=" w2windowContainer_controlIconLayer_right",r=this.options.hideTitleOnMaximize?" w2windowContainer_nameContainer_right_maximizeBtn":" w2windowContainer_nameContainer_right");var d="w2windowContainer_controlIconLayer",l="w2windowContainer_scrollLeftBtn";if(this.options.hideTitleOnMaximize&&(d+=" w2windowContainer_controlIconLayer_extend",l+=" w2windowContainer_scrollLeftBtn_extend"),t.push("<div id='"+this.id+"' "+i+" class='w2windowContainer "+this.options.className+"' "+n+">"),!0!==this.options.accessibility&&t.push(this.getChild(this.id+"_window").toHTML()),!0===this.options.accessibility){if(!this.options.nameLayerMenu){if(t.push("<div id='"+this.id+"_toolbar' class='"+o+"'>"),t.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer w2windowContainer_nameContainer_right"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+r+"'>"),
t.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),t.push("</div>"),t.push("<div id='"+this.id+"_controlIcon' class='w2windowContainer_controlIconLayer_accessibility "+d+a+"'>"),"allright"==this.options.controlIconPosition){var h=WebSquare.language.getMessage("WindowContainer_previous")||"Previous window",w=WebSquare.language.getMessage("WindowContainer_next")||"Next window";t.push("<div id='"+this.id+"_controlBtnDiv'>"),t.push("<button type='button' id='"+this.id+"_left' style='display:none;' class='w2windowContainer_accessibility_button "+l+"' aria-label='"+h+"'></button>"),t.push("<button type='button' id='"+this.id+"_right' style='display:none;' class='w2windowContainer_accessibility_button w2windowContainer_scrollRightBtn' aria-label='"+w+"'></button>"),t.push("</div>"),t.push("<div id='"+this.id+"_controlIconDiv'>")}var c=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Horizontal alignment,Current default view",u=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Vertical alignment,Current default view",p=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Cascade alignment,Current default view",m=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Tiled alignment,Current default view",g=WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")||"Close All",f=WebSquare.language.getMessage("WindowContainer_windowList")||"Window list",y=WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")||"Maximize/Restore";t.push("<button type='button' id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical w2windowContainer_accessibility_button' aria-label='"+u+"'></button>"),t.push("<button type='button' id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal w2windowContainer_accessibility_button' aria-label='"+c+"'></button>"),t.push("<button type='button' id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade w2windowContainer_accessibility_button' aria-label='"+p+"'></button>"),t.push("<button type='button' id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential w2windowContainer_accessibility_button' aria-label='"+m+"'></button>"),t.push("<button type='button' id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll w2windowContainer_accessibility_button' aria-label='"+g+"'></button>"),this.options.useWindowScrollButton&&t.push("<button type='button' id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList w2windowContainer_accessibility_button' aria-expanded='false' aria-label='"+f+"'></button>"),this.options.hideTitleOnMaximize&&t.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize' aria-label='"+y+"'></span>"),"allright"==this.options.controlIconPosition&&t.push("</div>"),t.push("</div>"),t.push("</div>")}t.push(this.getChild(this.id+"_window").toHTML())}else this.options.nameLayerMenu||(t.push("<div id='"+this.id+"_toolbar' class='"+o+"'>"),t.push("<div id='"+this.id+"_controlIcon' class='"+d+a+"'>"),"allright"==this.options.controlIconPosition&&(t.push("<div id='"+this.id+"_controlBtnDiv'>"),t.push("<div id='"+this.id+"_left' style='display:none;' class='"+l+"'"+e.previousWindow+"></div>"),t.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'"+e.nextWindow+"></div>"),t.push("</div>"),t.push("<div id='"+this.id+"_controlIconDiv'>")),t.push("<span id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical'"+e.vertical+"></span>"),
t.push("<span id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal'"+e.horizontal+"></span>"),t.push("<span id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade'"+e.cascade+"></span>"),t.push("<span id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential'"+e.sequential+"></span>"),t.push("<span id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll'"+e.closeAll+"></span>"),this.options.useWindowScrollButton&&t.push("<span id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList'"+e.windowList+"></span>"),this.options.hideTitleOnMaximize&&t.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize'"+e.maximize+"></span>"),"allright"==this.options.controlIconPosition&&t.push("</div>"),t.push("</div>")),this.options.useNameContainer&&t.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+r+"'>"),"allright"!==this.options.controlIconPosition&&t.push("<div id='"+this.id+"_left' style='display:none;' class='"+l+"'></div>"),t.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),"allright"!==this.options.controlIconPosition&&t.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),this.options.useNameContainer&&t.push("</div>"),this.options.nameLayerMenu||t.push("</div>");return t.push("</div>"),t.join("")}catch(_){s.Y.printStackTrace(_,null,this)}},h.prototype.setPreAction=function(){try{this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.nameBar=this.getElementById(this.id+"_name"),this.dom.window=this.getElementById(this.id+"_window"),this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.nameContainer=this.getElementById(this.id+"_nameContainer"),this.dom.leftScrollBtn=this.getElementById(this.id+"_left"),this.dom.rightScrollBtn=this.getElementById(this.id+"_right"),this.options.nameLayerMenu?this.createMenu():(this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.iconVertical=this.getElementById(this.id+"_vertical"),this.dom.iconHorizontal=this.getElementById(this.id+"_horizontal"),this.dom.iconCascade=this.getElementById(this.id+"_cascade"),this.dom.iconSequential=this.getElementById(this.id+"_sequential"),this.dom.iconCloseAll=this.getElementById(this.id+"_closeAll"),this.dom.iconWindowList=this.getElementById(this.id+"_windowList")),this.options.hideTitleOnMaximize&&(this.dom.iconMaximize=this.getElementById(this.id+"_maximize")),this.dom.nameScrollLeft=this.getElementById(this.id+"_left"),this.dom.nameScrollRight=this.getElementById(this.id+"_right")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),r.Z.isTouchDevice()&&(this.event.addListener(this.dom.nameBar,"ontouchstart",this.event.bindAsEventListener(this,this.handleNameLayerMove)),this.options.nameLayerMove&&this.event.addListener(this.dom.nameBar,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))),this.event.addListener(this.dom.nameBar,"onmousedown",this.event.bindAsEventListener(this,this.handleNameLayerMove)),!0===this.options.accessibility&&(this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.window,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusInEvent)),
this.event.addListener(this.dom.nameContainer,"onkeydown",this.event.bindAsEventListener(this,this.handleNameContainerKeydownEvent)),this.event.addListener(this.dom.control,"onkeydown",this.event.bindAsEventListener(this,this.handleControlKeydownEvent))),l.q.addCheckResize(this.uuid,"checkResize"),!this.options.nameLayerMenu&&this.options.useWindowScrollButton){var t=this.dom.toolBar.offsetWidth,e=this.dom.control.offsetWidth;WebSquare.style.setStyle(this.dom.iconWindowList,"left",e+"px"),e+=this.dom.iconWindowList.offsetWidth,WebSquare.style.setStyle(this.dom.control,"width",e+"px"),this.options.useNameContainer?("right"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"right",e+"px"):WebSquare.style.setStyle(this.dom.nameContainer,"width",t-e+"px"),"left"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"left",e+"px"):"allright"===this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","-50px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"right",this.dom.control.offsetWidth+"px"))):WebSquare.style.setStyle(this.dom.leftScrollBtn,"left",e+"px")}else"allright"==this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.control,"width","180px"),WebSquare.style.setStyle(this.dom.nameContainer,"right","180px"),WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","0px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right","130px"),WebSquare.style.setStyle(this.dom.iconVertical,"left","50px"),WebSquare.style.setStyle(this.dom.iconHorizontal,"left","75px"),WebSquare.style.setStyle(this.dom.iconCascade,"left","100px"),WebSquare.style.setStyle(this.dom.iconSequential,"left","125px"),WebSquare.style.setStyle(this.dom.iconCloseAll,"left","150px"));"overflow"==this.options.windowMoveType&&WebSquare.style.setStyle(this.dom.window,"overflow","auto")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.onComplete=function(){try{this.setControlIconFormatter(),o.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&o.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),l.q.prototype.onComplete.call(this)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.makeIframe=function(){if("iframe"===this.options.frameMode){var t=this.storedFrame.length;if(this.options.spaIframeMinSize>t+this.windows.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id),o.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50})}}},h.prototype.createFrame=function(t){try{if("iframe"!==this.options.frameMode)return;if(-1!=this.options.windowMaxNum&&this.options.windowMaxNum<=this.windows.length+this.storedFrame.length)return void d.v.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");if(void 0!==t&&null!=t||(t={}),isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.createWindow=function(t,e,i,n,o,a,r,d,l,h,w,c,u,p,m,g){try{return"object"==typeof t&&null!=t?this.__createWindowByObj(t):this.__createWindow(t,e,i,n,o,a,r,d,l,h,w,c,u,p,m,g)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.__createWindow=function(t,e,i,n,o,a,d,l,h,w,c,u,p,m,g,f){try{if(""===this.windowHeaderHTML&&""!==this.options.windowHeaderHTML){var y="";try{y=r.Z.getGlobalFunction(this.options.windowHeaderHTML,this.scope_id);this.windowHeaderHTML="function"==typeof y?y():y}catch(t){this.windowHeaderHTML=this.options.windowHeaderHTML}}t=t&&this.options.escape?WebSquare.xml._encode(t):t,n=(n=n&&this.options.escape?WebSquare.xml._encode(n):n)||t,o=o||t
;for(var W=null,_=w||{},b=0;b<this.windows.length;b++){var v=this.windows[b];o==v.windowId&&(W=v)}if(null!=W)if(null!=a&&""!=a)this.performAction(a,W,t,e,i,n,o,l,h,d,_,c,u,p,m,g,f);else{for(var I=this.options.confirmMessage;-1!=I.indexOf("#title");)I=I.replace("#title",t);var S=!0;1==this.options.useConfirmMessage&&(S=confirm(I)),S?this.performAction(this.options.confirmTrueAction,W,t,e,i,n,o,l,h,d,_,c,u,p,m,g,f):this.performAction(this.options.confirmFalseAction,W,t,e,i,n,o,l,h,d,_,c,u,p,m,g,f)}else this._createWindow(t,e,i,n,o,d,l,h,_,c,u,p,m,g,f)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.__createWindowByObj=function(t){try{if(!(t&&t.title&&t.src))return void $l("["+this.id+" : createWindow ] check the parameters.");var e=t.title||"",i=t.iconUrl||null,n=t.src||"",o=t.windowTitle||null,a=t.windowId||null,r=t.openAction||null,d=t.closeAction||null,l=t.windowTooltip||null,h=t.windowHeaderHTML||null,w=t.useNameLayer||!0,c=t.nameLayerHTML||null,u=t.userIconClass||null,p=t.userIconPosition||null,m={fixed:t.fixed||!1,useNameLayer:w,defaultWidth:t.defaultWidth||"",defaultHeight:t.defaultHeight||"",defaultTop:t.defaultTop||"",defaultLeft:t.defaultLeft||"",useRestoreDefaultSize:t.useRestoreDefaultSize||!1,useInitialSizePosition:t.useInitialSizePosition||!1,buttonInfo:t.buttonInfo,scopeInherit:t.scopeInherit,resizeEvent:t.resizeEvent,adaptiveFrame:t.adaptiveFrame},g=t.frameMode||this.options.frameMode,f=t.msaName||"";return this.__createWindow(e,i,n,o,a,r,d,l,h,m,g,t.dataObject,c,u,p,f)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.performAction=function(t,e,i,n,o,a,r,d,l,h,w,c,u,p,m,g,f){try{if("selectWindow"==t)this.selectNameLayer(e.id),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id);else if("existWindow"==t){if(e.isFix){e.isFix=!1;for(var y=0;y<this.fixedWindowArr.length;y++)if(this.fixedWindowArr[y].id==e.id){this.fixedWindowArr.splice(y,1);break}}var W;this.selectNameLayer(e.id),e.window.setStatusMsg(this.defaultStatusMsg),u&&(W={dataObject:u}),e.window.setSrc(o,W),e.window.options.closeAction=h,e.window.options.title=i;d=d||a;this.setWindowLabel(r,"toolbar",i),this.setWindowLabel(r,"window",a),this.setWindowLabel(r,"tooltip",d),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id)}else"newWindow"==t&&this._createWindow(i,n,o,a,r,h,d,l,w,c,u,p,m,g,f)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowTabOrder=function(t){try{if(null==t||t.length!==this.windows.length||!(t instanceof Array))return void d.v.printLog("The number of elements in arr and the number of elements in windows do not match, or arr is not in array");for(var e=[],i=0;i<t.length;i++)e[i]=this.windows[t[i]];for(i=1;i<t.length+1;i++)this.removeNameLayer(this.windows[t.length-i].id);for(i=0;i<t.length;i++)this.windows.push(e[i]);this.createNameLayer(),this.selectWindow()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._createWindow=function(t,e,i,n,d,l,h,w,c,u,p,m,g,f,y){try{var W=n.wq_replaceAll("&nbsp;","");c=c||{};if(y&&(c.msaName=y),-1!=this.options.windowMaxNum&&this.currentWindowNum>this.options.windowMaxNum-1)return void alert(WebSquare.language.getMessage("WindowContainer_maxNum_warning",this.options.windowMaxNum));var _,b=null,v=this.storedFrame.length>0&&(!u||"iframe"===u);if(v)(b=r.Z.getComponentById(this.storedFrame.shift()))._closed=!1,b.options.closeAction=l,b.options.title=t,w?b.setWindowHeaderHTML(w):b.setWindowTitle(n),p&&(_={dataObject:p}),b.frame.setSrc(i,_),b.render&&(b.render.style.display="");else b=this._createSubWindow(t,e,i,W,d,l,h,w,u,p,!0,m,g,f,c);var I=b.id;this.currentWindowNum++;var S={};if(S.id=I,S.window=b,S.title=t,S.iconUrl=e,S.src=i,S.windowTitle=n,S.windowId=d,S.closeAction=l,S.tooltip=h||n,S.windowHeaderHTML=w,S.buttonFormatter=this.options.buttonFormatter,S.isFix=c.fixed||!1,S.nameLayerHTML=m,S.userIconClass=g,S.userIconPosition=f,!0===this.options.accessibility&&(S.label=t),S.useNameLayer=!c.useNameLayer||r.Z.getBoolean(c.useNameLayer),
0==S.useNameLayer?this.windows.splice(0,0,S):this.windows.push(S),this.createNameLayer(),this.options.accessibility&&b.render&&b.render.setAttribute("tabindex",0),this.beforeWindow=this.nowWindow,this.nowWindow=I,this.selectWindow(),v||(b.activate(),b.onComplete()),this.options.restoreWinSize&&this.restoreWindowSize(d),this.beforeWindow!=this.nowWindow){var x=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,L=this.getWinInfoObj(this.nowWindow).windowId;a.f.fireEvent(this,"onwindowchange",x,L)}this.options.spaAuto&&o.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._createSubWindow=function(t,e,i,n,d,l,h,w,c,u,p,m,g,f,y){y=y||{};var W=this.org_id||this.id,_=W+"_subWindow"+this.windowIdx++;this.options.useWindowId&&(_=W+"_subWindow_"+d+"_"+this.windowIdx++);c=c||this.options.frameMode;var b=y.scopeInherit||this.options.scopeInherit,v=y.resizeEvent||this.options.resizeEvent,I=y.defaultWidth||this.options.defaultWidth,S=y.defaultHeight||this.options.defaultHeight,x=y.defaultTop||this.options.defaultTop,L=y.defaultLeft||this.options.defaultLeft,C=y.useRestoreDefaultSize||this.options.useRestoreDefaultSize,z=y.useInitialSizePosition||this.options.useInitialSizePosition,M=y.adaptiveFrame||!1,A=WebSquare.controlFactory.create(_,{pluginName:"window",parseChild:!1,windowTitle:n,windowHeaderHTML:w||this.windowHeaderHTML,nameLayerHTML:m||this.nameLayerHTML,enableHeaderSelect:this.options.enableHeaderSelect,src:i,userIconClass:g,userIconPosition:f,useStatusMsg:this.options.useStatusMsg,useCustomMsg:this.options.useCustomMsg,statusMsg:""==this.defaultStatusMsg?"":this.defaultStatusMsg,customMsg:this.options.customMsg,defaultTop:x,defaultLeft:L,defaultWidth:I,defaultHeight:S,useRestoreDefaultSize:C,useInitialSizePosition:z,minimumWidth:this.options.minimumWidth,minimumHeight:this.options.minimumHeight,frameMode:c,wmode:this.options.wmode,width:this.render.offsetWidth,height:this.render.offsetHeight-25,closeAction:l,title:t,parent:this,windowTooltipDisplay:this.options.windowTooltipDisplay,noAttatchedEvent:this.options.noAttatchedEvent,spa:this.options.spa,spaReplaceHistory:this.options.spaReplaceHistory,buttonFormatter:this.options.buttonFormatter,windowDragMove:this.options.windowDragMove,frameModal:this.options.frameModal,windowMoveType:this.options.windowMoveType,windowMaximizeAll:this.options.windowMaximizeAll,minVisibleWindowPixel:this.options.minVisibleWindowPixel,processMsgFrame:this.options.processMsgFrame,dragResizableHeader:this.options.dragResizableHeader,msaName:y.msaName||this.options.msaName,foldOnMinimized:this.options.foldOnMinimized,accessibility:this.options.accessibility||!1,scopeInherit:b,resizeEvent:v,adaptiveFrame:M},null,this.scope_obj,this.parentFrame,!0);y.buttonInfo&&y.buttonInfo.buttons&&(A.hasButtons=!0,A.buttonInfo=y.buttonInfo),u&&A.setDataObject(u),A._windowId=d;var T=this,B=!0===o.I.scriptPrecedence?"onwindowload":"ondrawcomplete";return A.options.xmlEvents=[{name:"onclose",action:"script",param:{handler:function(t){try{a.f.fireEvent(T,"onCloseWindow",t);var e=T.getWinInfoObj(this.id);T.options.accessibility&&"maximized"===e.window.windowInfo.status&&T.arrangeHistory&&(T._unsetAllAriaLabel(),T._setAriaLabel()),T.removeNameLayer(this.id);for(var i=0;i<T.fixedWindowArr.length;i++)if(T.fixedWindowArr[i].id==this.id){T.fixedWindowArr.splice(i,1);break}if(T.createNameLayer(),T.selectWindow(),T.options.accessibility&&T.visibleWindows.length>0){var n=T.visibleWindows.indexOf(this.id),o=T._findBehindWindow(this.id)[0];-1!==n&&(o&&o.value?T.visibleWindows.splice(n,1,o.value):T.visibleWindows.splice(n,1))}var d=T.nowWindow?T.getWinInfoObj(T.nowWindow).windowId:null;if(a.f.fireEvent(T,"onwindowchange",T.closedWindowId,d),T.setFocus(T.getSelectedIndex()),T.options.autoArrange)if(T.options.useFixButton){var l=T.options.verticalArrangeNum,h=T.options.horizontalArrangeNum
;"vertical"==T.arrangeHistory&&T.windows.length<l?T.options.verticalArrangeNum=T.windows.length:"horizontal"==T.arrangeHistory&&T.windows.length<h&&(T.options.horizontalArrangeNum=T.windows.length),"sequential"==T.arrangeHistory&&T.windows.length<=T.options.sequentialArrangeColNum?(T.options.verticalArrangeNum=T.windows.length,T.setArrangeWindows("vertical"),T.arrangeHistory="sequential"):T.setArrangeWindows(T.arrangeHistory),T.options.verticalArrangeNum=l,T.options.horizontalArrangeNum=h}else T.setArrangeWindows(T.arrangeHistory);if(0==T.windows.length&&(T.options.spaAuto?"wframe"!==T.options.frameMode&&"pageFrame"!==T.options.frameMode||(T.windowIdx=0):T.windowIdx=T.options.spaInitCount),!0===T.options.accessibility&&e&&"maximized"===e.window.windowInfo.status)for(i=0;i<T.windows.length;i++){r.Z.getComponentById(T.windows[i].id).render.style.display="block"}}catch(t){s.Y.printStackTrace(t,null,T)}}}},{name:"onrestorebtnclick",action:"script",param:{handler:function(t){try{if(T.options.accessibility){var e,i,n="";"restored"===(i=T.getWinInfoObj(T.nowWindow).window.windowInfo.status)?(n=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_minimize").setAttribute("aria-label",n),n=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_restore").setAttribute("aria-label",n),e="block",T._setAriaLabel()):"maximized"===i&&(T._unsetAllAriaLabel(),n=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_maximizeSize_status")||"Maximize",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_restore").setAttribute("aria-label",n),n=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_maximizeSize_status")||"Maximize",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_minimize").setAttribute("aria-label",n),e="none");for(var o=0;o<T.windows.length;o++){if(T.windows[o].id!==T.nowWindow)r.Z.getComponentById(T.windows[o].id).render.style.display=e}}if(T.options.windowMaximizeAll&&T._displayOnlyTopWindow){var a=T.nowWindow;"maximized"===this.windowInfo.status&&T.doMaximizeAll();for(o=T.selectedWindowHistory.length;o>0;o--){var d=T.selectedWindowHistory[o-1],l=T.getWinInfoObj(d);if(d!=a&&"maximized"==l.window.windowInfo.status){l.window.setStyle("display","block");break}l.window.setStyle("display","block")}}}catch(t){s.Y.printStackTrace(t,null,T)}}}},{name:"onminimizebtnclick",action:"script",param:{handler:function(t){try{if(T.options.accessibility){var e="";if(0==T.getWinInfoObj(T.nowWindow).window.windowInfo.minimized?(e=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_minimize").setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_restore").setAttribute("aria-label",e)):(e=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_minimizeSize_status")||"Minimize",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_minimize").setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_maximize")+","+WebSquare.language.getMessage("WindowContainer_minimizeSize_status")||"Minimize",T.getElementById(T.getWinInfoObj(T.nowWindow).id+"_restore").setAttribute("aria-label",e)),T._unsetAllAriaLabel(),T._setAriaLabel(),T.arrangeHistory)for(var i=0;i<T.windows.length;i++){if(T.windows[i].id!==T.nowWindow)r.Z.getComponentById(T.windows[i].id).render.style.display="block"}}if(T.options.windowMaximizeAll&&T._displayOnlyTopWindow){
var n=T.nowWindow;for(i=T.selectedWindowHistory.length;i>0;i--){var o=T.selectedWindowHistory[i-1],a=T.getWinInfoObj(o);if(o!=n&&"maximized"==a.window.windowInfo.status){a.window.setStyle("display","block");break}a.window.setStyle("display","block")}}}catch(t){s.Y.printStackTrace(t,null,T)}}}},{name:"onwindowkeyup",action:"script",param:{handler:function(t){try{a.f.fireEvent(T,"onwindowkeyup",t)}catch(t){s.Y.printStackTrace(t,null,T)}}}},{name:"onwindowmousedown",action:"script",param:{handler:function(t){try{T.selectNameLayer(this.id)}catch(t){s.Y.printStackTrace(t,null,T)}}}},{name:"onminimize",action:"script",param:{handler:function(t){!0!==T.options.accessibility&&T._onminimize(this.id)}}},{name:"onmaximize",action:"script",param:{handler:function(t){T._onmaximize(this.id)}}},{name:"ondragstart",action:"script",param:{handler:function(t){T.selectNameLayer(this.id),WebSquare.event.fireEvent(T,"ondragstart",this.id),T.handleDragStartEvent()}}},{name:"ondragend",action:"script",param:{handler:function(t){WebSquare.event.fireEvent(T,"ondragend",this.id),T.handleDragEndEvent()}}},{name:"onpopup",action:"script",param:{handler:function(t){T._onpopup(this.id)}}},{name:B,action:"script",param:{handler:function(t){a.f.fireEvent(T,"onwindowload",this._windowId)}}},{name:"onwindowunload",action:"script",param:{handler:function(){a.f.fireEvent(T,"onwindowunload",this._windowId)}}}],this.options.nameLayerMenu&&A.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{T.hideContextMenu()}catch(t){s.Y.printStackTrace(t,null,T)}}}}),A.writeTo(this.getChild(this.id+"_window")),!0!==p&&(A.activate(),A.onComplete()),A},h.prototype.setWindowLabel=function(t,e,i){try{if(!t||!e||!i)return;for(var n,o=this.windows.length-1;o>=0;o--)if(this.windows[o].windowId===t){n=this.windows[o];break}if(!n)return;var a="all"===(e=e.toLowerCase());if("window"===e||a){if(n.windowTitle=i,n.window.options.windowTitle=i,this.options.windowTooltipDisplay){var r=document.getElementById(n.id);r&&r.setAttribute("title",i)}var d=document.getElementById(n.id+"_header_title");d&&(d.innerHTML=i)}if(("tooltip"===e||a)&&(n.tooltip=i),"toolbar"===e||a)document.getElementById(this.id+"_nameLayer_"+n.id).setAttribute("windowTitle",i),n.title=i,this.createNameLayer(),this.selectWindow()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getWindowLabel=function(t,e){try{if(!t||!e)return;for(var i,n=this.windows.length-1;n>=0;n--)if(this.windows[n].windowId===t){i=this.windows[n];break}if(!i)return;if("toolbar"===(e=e.toLowerCase()))return i.title;if("window"===e)return i.windowTitle;if("tooltip"===e)return i.tooltip}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.createNameLayer=function(){try{var t=[];this.dom.nameBar.innerHTML="";for(var e=r.Z.getDataPrefix("refId"),i=r.Z.getDataPrefix("windowtitle"),n=r.Z.getDataPrefix("elementInfo"),o="",a="",d="",l=0;l<this.windows.length;l++){if((m=this.windows[l]).useNameLayer)if(m.nameLayerHTML)this._setNameLayerHTML(m.id,t);else{null!=m.userIconClass&&null==m.userIconPosition&&m.userIconPosition,!0===this.options.useFixButton&&null!=m.userIconClass?("left"==m.userIconPosition?(d="w2windowContainer_nameLayer_firstButtonFromLeft",a="w2windowContainer_nameLayer_secondButtonFromLeft"):(a="w2windowContainer_nameLayer_firstButtonFromLeft",d="w2windowContainer_nameLayer_secondButtonFromLeft"),o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix_withUserIcon"):!0===this.options.useFixButton&&null==m.userIconClass?(a="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):!1===this.options.useFixButton&&null!=m.userIconClass?(d="w2windowContainer_nameLayer_firstButtonFromLeft",o="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):o="w2windowContainer_nameLayer"
;var h=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected",w=WebSquare.language.getMessage("WindowContainer_close_dialog")||"Close dialog",c=WebSquare.language.getMessage("WindowContainer_custom")||"Custom";!0===this.options.accessibility?(t.push("<div>"),t.push("<a href='#"+m.id+"' tabindex='-1' id='"+this.id+"_nameLayer_"+m.id+"' class='w2windowContainer_nameLayer_accessibility "+o+"' "+e+"='"+m.id+"' "+i+"='"+m.title+"' "+n+"='nameLayer'>"),t.push(m.title),t.push("</a>"),this.options.useFixButton&&(a+=" w2windowContainer_nameLayer_fixOff_accessibility w2windowContainer_nameLayer_fixOff",m.isFix&&(a+=" w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOn"),t.push("<button type='button' tabindex='-1' class='w2windowContainer_accessibility_button "+a+"' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+h+"'>"),t.push("</button>")),null!=m.userIconClass&&(d+=" "+m.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+d+"' "+e+"='"+m.id+"'>"),t.push("</div>")),this.options.useCloseButton&&(t.push("<button type='button' tabindex='-1' class='w2windowContainer_accessibility_button w2windowContainer_nameLayer_close' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+w+"'>"),t.push("</button>")),t.push("</div>")):(t.push("<div id='"+this.id+"_nameLayer_"+m.id+"' class='"+o+"' "+e+"='"+m.id+"' "+i+"='"+m.title+"'>"),this.options.useFixButton&&(a+=" w2windowContainer_nameLayer_fixOff",m.isFix&&(a+=" w2windowContainer_nameLayer_fixOn"),t.push("<div class='"+a+"' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+h+"'>"),t.push("</div>")),null!=m.userIconClass&&(d+=" "+m.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+d+"' "+e+"='"+m.id+"' aria-label = '"+c+"'>"),t.push("</div>")),t.push(m.title),this.options.useCloseButton&&(t.push("<div class='w2windowContainer_nameLayer_close' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+w+"'>"),t.push("</div>")),this.options.nameLayerMenu&&(t.push("<div class='w2windowContainer_nameLayer_menu' "+e+"='"+m.id+"'>"),t.push("</div>")),t.push("</div>"))}}if(this.dom.nameBar.innerHTML=t.join(""),this.dom.nameBar.style.width="auto",this.windows.length>0){for(var u=0,p=(l=0,0);l<this.windows.length;l++){var m;if((m=this.windows[l]).useNameLayer){var g=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[p],"margin-left"))||0,f=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[p],"margin-right"))||0;u+=this.dom.nameBar.childNodes[p].offsetWidth+g+f,p++}}this.dom.nameBar.style.width=u+2+"px"}else this.dom.nameBar.style.width="0px";var y=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2,W=this.render.offsetWidth,_=0;if(!this.options.nameLayerMenu&&this.options.toolbarWidth)this.dom.toolBar.style.width=this.options.toolbarWidth+"px",W=this.options.toolbarWidth;else if(!this.options.nameLayerMenu){_=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left"));var b=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(_)||(W-=_),isNaN(b)||(W-=b)}W<this.dom.nameBar.scrollWidth+y?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.display="",this.dom.leftScrollBtn.style.display=""):(this.options.useNameScroll=!1,this.options.useNameContainer||this.options.nameLayerMenu?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=y+"px",this.useControlIconFormatter&&(this.options.useNameContainer&&"right"==this.options.controlIconPosition&&!this.options.nameLayerMenu?document.getElementById(this.id+"_nameContainer").style.right=y+"px":this.options.useNameContainer&&"left"==this.options.controlIconPosition&&!this.options.namelayerMenu&&(document.getElementById(this.id+"_nameContainer").style.left=y+"px")),this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none"),
1==this.options.useNameScroll&&(this.options.useWindowScrollButton&&"allright"===this.options.controlIconPosition||(this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px"),this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._setNameLayerHTML=function(t,e){try{if(!t||!e)return;for(var i,n=this.windows.length-1;n>=0;n--)if(this.windows[n].id===t){i=this.windows[n];break}if(!i)return;var o=r.Z.getDataPrefix("windowtitle"),a=r.Z.getDataPrefix("refId"),d=i.title,l="",h="",w="",c=e;if(this.options.useFixButton){var u="w2windowContainer_nameLayer_fixOff_custom";i.isFix&&(!0===this.options.accessibility&&(u+=" w2windowContainer_nameLayer_fixOn_accessibility"),u+=" w2windowContainer_nameLayer_fixOn"),l="<div class='"+u+"' "+a+"='"+i.id+"'></div>"}this.options.useCloseButton&&(h="<div class='w2windowContainer_nameLayer_close_custom' "+a+"='"+i.id+"'></div>"),this.options.nameLayerMenu&&(w="<div class='w2windowContainer_nameLayer_menu' "+a+"='"+i.id+"'></div>"),e.push("<div id='"+this.id+"_nameLayer_"+i.id+"' class='w2windowContainer_nameLayer' "+a+"='"+i.id+"' "+o+"='"+i.title+"'>");try{var p=r.Z.getGlobalFunction(i.nameLayerHTML,this.scope_id);c="function"==typeof p?p(d,l,h,w):p}catch(t){c=i.nameLayerHTML}e.push(c),e.push("</div>")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.removeNameLayer=function(t){try{var e=this.getWinInfoObj(t);if(null==e)return;this.closedWindowId=e.windowId;for(var i=0;i<this.windows.length;i++){var n=this.windows[i];n.id==t&&(!0===this.options.accessibility&&(this.closedWindow=n.id,this.windows[i+1]?this.nowWindow=this.windows[i+1].id:this.windows[i-1]?this.nowWindow=this.windows[i-1].id:this.nowWindow=null),this.windows.splice(i,1))}this.addHistory(t),!0!==this.options.accessibility&&(this.closedWindow=this.selectedWindowHistory.pop(),this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-2]||null,this.nowWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]||null,this.currentWindowNum--)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.clickNameLayer=function(t,e,i){try{!0===this.options.accessibility&&(this.focusWindowId=t);var n=t,o=(e=r.Z.getBoolean(e),r.Z.getBoolean(i.stopToggleOnLast));if(this.nowWindow==n){var d=this.getWinInfoObj(this.nowWindow).windowId;if(a.f.fireEvent(this,"onwindowtabclick",d,d),1==o&&1==this.windows.length)return;if(1==e||this.options.nameLayerMenu)return;this.minimizeWindow(n)}else{this.beforeWindow=this.nowWindow,this.nowWindow=n;var l=this.visibleWindows;if(this.selectWindow(),void 0!==this.arrangeHistory&&!0===this.options.accessibility){for(var h=this._findBehindWindow(this.nowWindow),w=!1,c=0;c<l.length;c++)l[c]===this.nowWindow&&(w=!0);if(!w)for(c=0;c<l.length;c++)for(var u=0;u<h.length;u++)if(l[c]===h[u].value){l[c]=this.nowWindow;break}}var p=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,m=this.getWinInfoObj(this.nowWindow).windowId;a.f.fireEvent(this,"onwindowchange",p,m),a.f.fireEvent(this,"onwindowtabclick",p,m)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getWinInfoObj=function(t,e){try{null==e&&(e="id");for(var i=0;i<this.windows.length;i++)if(this.windows[i][e]==t)return this.windows[i]}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.fixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!0,this.fixedWindowArr.push(e);var i=r.Z.getDataPrefix("refId");if(this.options.useFixButton){var n="",o="";!0===this.options.accessibility?(n=document.getElementById(this.id+"_nameLayer_"+e.id).parentNode,o="w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOff_accessibility "):n=document.getElementById(this.id+"_nameLayer_"+e.id);var a=e.title;a+=WebSquare.language.getMessage("WindowContainer_fix_dialog_set")||"Fix dialog box selected";for(var d=0;d<n.childNodes.length;d++){
var l=n.childNodes[d];if(1===l.nodeType&&l.getAttribute(i)===e.id)for(var h=0;h<l.classList.length;h++)if("w2windowContainer_nameLayer_fixOff"===l.classList[h])return l.className=o+"w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_firstButtonFromLeft",l.setAttribute("aria-label",a),!0}}return!0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.unfixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!1;for(var i=0;i<this.fixedWindowArr.length;i++)this.fixedWindowArr[i].id==e.id&&this.fixedWindowArr.splice(i,1);var n=r.Z.getDataPrefix("refId");if(this.options.useFixButton){var o="",a="";!0===this.options.accessibility?(o=document.getElementById(this.id+"_nameLayer_"+e.id).parentNode,a="w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOff_accessibility "):o=document.getElementById(this.id+"_nameLayer_"+e.id);var d=e.title;d+=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected";for(i=0;i<o.childNodes.length;i++){var l=o.childNodes[i];if(1===l.nodeType&&l.getAttribute(n)===e.id)for(var h=0;h<l.classList.length;h++)if("w2windowContainer_nameLayer_fixOn"===l.classList[h])return l.className=a+"w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_firstButtonFromLeft",l.setAttribute("aria-label",d),!0}}return!0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.minimizeWindow=function(t){try{this.getWinInfoObj(t).window.minimize()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._onminimize=function(t){try{var e=t,i=!1;if(this.prevWindow=this.nowWindow,this.nowWindow==e)!0===this.options.foldOnMinimized?i=!0:(this.minimizedWindow=this.selectedWindowHistory.pop(),this.nowWindow=this.selectedWindowHistory.pop()||null,this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]);else{for(var n=0;n<this.selectedWindowHistory.length;n++)if(e==this.selectedWindowHistory[n]){this.selectedWindowHistory.splice(n,1);break}!0===this.options.foldOnMinimized&&(this.nowWindow=e)}if(i||this.selectWindow(),!0===this.options.foldOnMinimized){if(this.nowWindow!==e){var o=this.getWinInfoObj(e).windowId,r=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;a.f.fireEvent(this,"onwindowchange",o,r)}}else if(this.prevWindow==e){o=this.getWinInfoObj(this.minimizedWindow).windowId,r=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;a.f.fireEvent(this,"onwindowchange",o,r)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.maximizeWindow=function(t){try{this.getWinInfoObj(t).window.maximize()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._onmaximize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e&&(this.nowWindow=e,this.selectWindow(),this.prevWindow)){var i=this.getWinInfoObj(this.prevWindow).windowId,n=this.getWinInfoObj(e).windowId;a.f.fireEvent(this,"onwindowchange",i,n)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._onpopup=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e){this.nowWindow=e,this.selectWindow();var i=this.getWinInfoObj(this.prevWindow).windowId,n=this.getWinInfoObj(e).windowId;a.f.fireEvent(this,"onwindowchange",i,n)}var o=this.getSelectedIndex();if(o>-1&&o<this.windows.length){var d=this.windows[o],l=(window.screen.availHeight-this.getSize("height"))/2,h=(window.screen.availWidth-this.getSize("width"))/2,w={id:d.id,type:"window",width:this.getSize("width")+"px",height:this.getSize("height")+"px",top:l+"px",left:h+"px",popupName:d.title,modal:!1,useIFrame:!1,style:"",resizable:!0,status:!1,menubar:!1,scrollbars:!0,title:!1,srcData:"",destData:""};r.Z.openPopup(d.window.options.src,w),this.options.closeWindowOnPopup&&d.window.forceClose()}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.selectWindow=function(){try{if(0==this.dom.window.offsetWidth||0==this.dom.window.offsetHeight)return;for(var t=0;t<this.windows.length;t++){
var e=this.windows[t].id,i=document.getElementById(this.id+"_nameLayer_"+e),n=document.getElementById(e+"_header"),o=document.getElementById(e);this.removeClass(i,"w2windowContainer_selectedNameLayer"),this.removeClass(n,"w2window_selected_header"),this.removeClass(o,"w2window_selected")}if(null!=this.nowWindow){var a=this.getWinInfoObj(this.nowWindow);!0!==this.options.foldOnMinimized&&(a.window.windowInfo.minimized=!1),this.options.skipZIndex?this.zIndexFlagInfo[a.id]?(a.window.setStyle("display","block"),this.increaseZIndex(a.window),"maximized"===a.window.windowInfo.status&&void 0===this.arrangeHistory&&a.window.render.setAttribute("aria-modal","true")):(a.window.setStyle("display","none"),a.window.setStyle("zIndex",0)):(a.window.setStyle("display","block"),this.increaseZIndex(a.window),this._displayOnlyTopWindow&&(this.options.windowMaximizeAll?"maximized"===a.window.windowInfo.status&&this.displayOnlyTopWindow():this.displayOnlyTopWindow()));i=document.getElementById(this.id+"_nameLayer_"+this.nowWindow),n=document.getElementById(this.nowWindow+"_header"),o=document.getElementById(this.nowWindow);if(this.addClass(i,"w2windowContainer_selectedNameLayer"),this.addClass(n,"w2window_selected_header"),this.addClass(o,"w2window_selected"),"hide"==this.options.nameScrollMode){var r=0,d=this.dom.nameBar.offsetWidth,l=this.selectedIndex;if(this.addHistory(this.nowWindow),this.refreshSelectedIndex(),l>this.selectedIndex)for(t=l;t>=0;t--){var h=this.windows[t].id;"block"!=(w=document.getElementById(this.id+"_nameLayer_"+h)).style.display&&(w.style.display="block")}for(t=this.selectedIndex;t>=0;t--){var w;h=this.windows[t].id;if("none"!=(w=document.getElementById(this.id+"_nameLayer_"+h)).style.display){var c=WebSquare.style.getStyle(w,"margin-left");c="auto"===c?"0":c;var u=WebSquare.style.getStyle(w,"margin-right");u="auto"===u?"0":u;var p=w.offsetWidth+parseInt(c,10)+parseInt(u,10);r+p>=d?w.style.display="none":r+=p}}}else if(this.options.useNameScroll){if("allright"==this.options.controlIconPosition)var m=this.dom.nameContainer.offsetLeft,g=this.dom.control.offsetLeft,f=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,y=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;else m=this.dom.leftScrollBtn.offsetLeft+this.dom.leftScrollBtn.offsetWidth,g=this.dom.rightScrollBtn.offsetLeft,f=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,y=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;if(f>g||y>g)this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-(y-g)+"px";else if(f<m||y<m){var W=this.options.nameLayerMenu||this.options.useNameContainer&&"right"==this.options.controlIconPosition?0:this.dom.control.offsetWidth;"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft-i.offsetLeft+"px":this.dom.nameBar.style.left=W+this.dom.leftScrollBtn.offsetWidth-i.offsetLeft+"px"}this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.selectedIndex=-1}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.addHistory=function(t){try{for(var e=null,i=0;i<this.selectedWindowHistory.length;i++)this.selectedWindowHistory[i]==t&&(e=i);null!=e&&this.selectedWindowHistory.splice(e,1),this.selectedWindowHistory.push(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._insertSelectedWindowHistory=function(t){try{if(this.options.includeMinimizeWindow){for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t)return;this.selectedWindowHistory.splice(1,0,t)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.increaseZIndex=function(t){try{if(!this.options.skipZIndex&&this.options.swapZIndex&&t.zIndex>0){var e=t.zIndex;if(e<this.maxZIndex){for(var i=0;i<this.windows.length;i++)if(this.windows[i].id!=t.id){var n=this.windows[i].window.zIndex,o=n-2;e<n&&o>1&&(this.windows[i].window.setStyle("zIndex",o),this.windows[i].window.zIndex=o)}
t.setStyle("zIndex",this.maxZIndex),t.zIndex=this.maxZIndex}}else this.maxZIndex+=2,t.setStyle("zIndex",this.maxZIndex),this.options.swapZIndex&&(t.zIndex=this.maxZIndex),this.windowList&&(this.windowList.render.style.zIndex=this.maxZIndex+2),this.options.nameLayerMenu?this.getElementById(this.id+"_nameContainer").style.zIndex=this.maxZIndex:this.dom.toolBar.style.zIndex=this.maxZIndex}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.displayOnlyTopWindow=function(){try{for(var t=this.windows.length,e=this.nowWindow,i=0;i<t;i++){var n=this.windows[i].id,o=this.getWinInfoObj(n);n!=e&&"maximized"==o.window.windowInfo.status&&o.window.setStyle("display","none")}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setZIndex=function(t){try{var e=this.windows[t];e&&(e.window.setStyle("display","block"),this.increaseZIndex(e.window),this.zIndexFlagInfo[e.id]=!0)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.selectNameLayer=function(t){try{for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t){this.prevWindow=this.nowWindow;var i=t;if(i!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=i),this.selectWindow(),this.prevWindow!=i){var n=null;this.prevWindow&&(n=this.getWinInfoObj(this.prevWindow).windowId);var o=this.getWinInfoObj(i).windowId;a.f.fireEvent(this,"onwindowchange",n,o)}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doVerticalArrange=function(t){try{var e=0,i=2,n=[],o=[];if(t){for(var a=0;a<t.length;a++)for(var r=0;r<this.windows.length;r++){if((d=this.windows[r]).windowId==t[a]){n.push(d);break}}for(a=0;a<this.windows.length;a++){var d=this.windows[a],l=!0;for(r=0;r<t.length;r++)if(d.windowId==t[r]){l=!1;break}l&&o.push(d)}}else n=this._getOpenedWindows();var h=n.length;h<this.options.lineBreakNum?(i=1,e=h):(i=2,e=Math.ceil(h/i));var w,c,u="",p=0,m=0;for(a=0;a<o.length;a++)o[a].window.minimize(!0);for(a=0;a<h;a++){var g=n[a],f=g.window,y=f.resizeParentGroup();w=parseInt(y.width/e,10),c=parseInt(y.height/i,10),f.restore(),f.setSize(w-(f.getSize("outerMarginWidth")-f.getSize("width")),c-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(p*w,m*c),++p==e&&(p=0,m++),u=g.id,this.addHistory(u)}!0===this.options.accessibility&&this._setVisibleWindows("vertical"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(u),this.arrangeHistory="vertical",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doVerticalFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(a=this.windows[e]).isFix||(a.window.windowInfo.minimized?this._selectWindowOnly(a.id):t[a.id]=a)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var n=i[e];void 0!==t[n]&&this._selectWindowOnly(t[n].id)}var o=r.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var a=this.fixedWindowArr[e];if(this._selectWindowOnly(a.id),this.options.nameLayerRearrange)for(var d=0;d<this.dom.nameBar.childNodes.length;d++)if(this.dom.nameBar.childNodes[d].getAttribute(o)===this.fixedWindowArr[e].id){0!=d&&this.moveNameLayer(d,0);break}}var l=this.windows.length,h=!0===this.options.accessibility?l:this.options.verticalArrangeNum;this.options.fixArrangeFullScreen&&(h=h>l?l:h);var w=0,c=0,u=0;if(!0===this.options.accessibility){this._setVisibleWindows("vertical");for(e=0;e<this.windows.length;e++){var p=(m=(a=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();c=parseInt(p.width/h,10),u=parseInt(p.height/1,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(w*c,0*u),++w==h&&(w=0)}}else if("none"==this.options.positionX)for(e=this.selectedWindowHistory.length;e>0;e--){p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/h,10),u=parseInt(p.height/1,10),m.restore(),
m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(w*c,0*u),++w==h&&(w=0)}else if("left"==this.options.positionX)for(e=this.selectedWindowHistory.length;e>0;e--){p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/h,10),u=parseInt(p.height/1,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(w*c,0*u),++w==h&&(w=1)}else if("right"==this.options.positionX){w=h-1;for(e=this.selectedWindowHistory.length;e>0;e--){var m;p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/h,10),u=parseInt(p.height/1,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(w*c,0*u),++w==h&&(w=0),w==h-1&&(w=0)}}!0===this.options.accessibility?this.focusWindowId=this.nowWindow:this.selectNameLayer(this.selectedWindowHistory[l-1]),this.arrangeHistory="vertical",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doHorizontalArrange=function(t){try{var e=2,i=0,n=[],o=[];if(t){for(var a=0;a<t.length;a++)for(var r=0;r<this.windows.length;r++){if((l=this.windows[r]).windowId==t[a]){n.push(l);break}}for(a=0;a<this.windows.length;a++){var d=!0,l=this.windows[a];for(r=0;r<t.length;r++)if(l.windowId==t[r]){d=!1;break}d&&o.push(l)}}else n=this._getOpenedWindows();var h=n.length;h<this.options.lineBreakNum?(i=h,e=1):(i=Math.ceil(h/e),e=2);var w,c,u="",p=0,m=0;for(a=0;a<o.length;a++)o[a].window.minimize(!0);for(a=0;a<h;a++){var g=n[a],f=g.window,y=f.resizeParentGroup();w=parseInt(y.width/e,10),c=parseInt(y.height/i,10),f.restore(),f.setSize(w-(f.getSize("outerMarginWidth")-f.getSize("width")),c-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(p*w,m*c),++p==e&&(p=0,m++),u=g.id,this.addHistory(u)}!0===this.options.accessibility&&this._setVisibleWindows("horizontal"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(u),this.arrangeHistory="horizontal",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doHorizontalFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(a=this.windows[e]).isFix||(a.window.windowInfo.minimized?this._selectWindowOnly(a.id):t[a.id]=a)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var n=i[e];void 0!==t[n]&&this._selectWindowOnly(t[n].id)}var o=r.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var a=this.fixedWindowArr[e];if(this._selectWindowOnly(a.id),this.options.nameLayerRearrange)for(var d=0;d<this.dom.nameBar.childNodes.length;d++)if(this.dom.nameBar.childNodes[d].getAttribute(o)===this.fixedWindowArr[e].id){0!=d&&this.moveNameLayer(d,0);break}}var l=this.windows.length,h=!0===this.options.accessibility?l:this.options.horizontalArrangeNum;this.options.fixArrangeFullScreen&&(h=h>l?l:h);var w=0,c=0,u=0;if(!0===this.options.accessibility)for(e=0;e<this.windows.length;e++){var p=(m=(a=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();c=parseInt(p.width/1,10),u=parseInt(p.height/h,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*c,w*u),++w==h&&(w=0)}else if("none"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/1,10),u=parseInt(p.height/h,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*c,w*u),++w==h&&(w=0)
}else if("top"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/1,10),u=parseInt(p.height/h,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*c,w*u),++w==h&&(w=1)}else if("bottom"==this.options.positionY){w=h-1;for(e=this.selectedWindowHistory.length;e>0;e--){var m;p=(m=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();c=parseInt(p.width/1,10),u=parseInt(p.height/h,10),m.restore(),m.setSize(c-(m.getSize("outerMarginWidth")-m.getSize("width")),u-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*c,w*u),++w==h&&(w=0),w==h-1&&(w=0)}}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("horizontal")):this.selectNameLayer(this.selectedWindowHistory[l-1]),this.arrangeHistory="horizontal",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doCascadeArrange=function(){try{var t,e,i="",n=this._getOpenedWindows(),o=n.length;if(!0===this.options.accessibility){for(var a=0;a<this.selectedWindowHistory.length;a++){var r=this.getWinInfoObj(this.selectedWindowHistory[a]).window;if(0==a){var d=r.resizeParentGroup();t=parseInt(d.width-200,10),e=parseInt(d.height-200,10)}r.restore(),r.setSize(t-(r.getSize("outerMarginWidth")-r.getSize("width")),e-(r.getSize("outerMarginHeight")-r.getSize("height"))),r.setPosition(a%10*20,a%10*20),i=r.id}this._setVisibleWindows("cascade")}else for(a=0;a<o;a++){var l=n[a];r=l.window;if(0==a){d=r.resizeParentGroup();t=parseInt(d.width-200,10),e=parseInt(d.height-200,10)}r.restore(),r.setSize(t-(r.getSize("outerMarginWidth")-r.getSize("width")),e-(r.getSize("outerMarginHeight")-r.getSize("height"))),r.setPosition(a%10*20,a%10*20),i=l.id,this._insertSelectedWindowHistory(i)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(i),this.arrangeHistory="cascade",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doCascadeFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(a=this.windows[e]).isFix||(a.window.windowInfo.minimized?this._selectWindowOnly(a.id):t[a.id]=a)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var n=i[e];void 0!==t[n]&&this._selectWindowOnly(t[n].id)}var o=r.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var a=this.fixedWindowArr[e];if(this._selectWindowOnly(a.id),this.options.nameLayerRearrange)for(var d=0;d<this.dom.nameBar.childNodes.length;d++)if(this.dom.nameBar.childNodes[d].getAttribute(o)===this.fixedWindowArr[e].id){0!=d&&this.moveNameLayer(d,0);break}}var l=this.windows.length,h=0,w=0;if(!0===this.options.accessibility)for(e=l-1;e>=0;e--){var c=(a=this.getWinInfoObj(this.windows[e].id)).window;if(e==l-1){var u=c.resizeParentGroup();h=parseInt(u.width-200,10),w=parseInt(u.height-200,10)}c.restore(),c.setSize(h-(c.getSize("outerMarginWidth")-c.getSize("width")),w-(c.getSize("outerMarginHeight")-c.getSize("height"))),c.setPosition(e%10*20,e%10*20),this.setZIndex(e)}else for(e=this.selectedWindowHistory.length;e>0;e--){c=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window;if(e==this.selectedWindowHistory.length){u=c.resizeParentGroup();h=parseInt(u.width-200,10),w=parseInt(u.height-200,10)}c.restore(),c.setSize(h-(c.getSize("outerMarginWidth")-c.getSize("width")),w-(c.getSize("outerMarginHeight")-c.getSize("height"))),c.setPosition((e-1)%10*20,(e-1)%10*20)}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("cascade")):this.selectNameLayer(this.selectedWindowHistory[l-1]),this.arrangeHistory="cascade",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),
this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doSequentialArrange=function(){try{for(var t,e,i=1,n=1,o=!0,a=this._getOpenedWindows(),r=a.length;o;)i*n<r?i==n?i++:n++:o=!1;for(var d="",l=0,h=0,w=0;w<r;w++){var c=a[w],u=c.window;if(0==w){var p=u.resizeParentGroup();t=parseInt(p.width/i,10),e=parseInt(p.height/n,10)}u.restore(),u.setSize(t-(u.getSize("outerMarginWidth")-u.getSize("width")),e-(u.getSize("outerMarginHeight")-u.getSize("height"))),u.setPosition(l*t,h*e),++l==i&&(l=0,h++),d=c.id,this._insertSelectedWindowHistory(d)}!0===this.options.accessibility&&this._setVisibleWindows("sequential"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(d),this.arrangeHistory="sequential",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doSequentialFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(a=this.windows[e]).isFix||(a.window.windowInfo.minimized?this._selectWindowOnly(a.id):t[a.id]=a)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var n=i[e];void 0!==t[n]&&this._selectWindowOnly(t[n].id)}var o=r.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var a=this.fixedWindowArr[e];if(this._selectWindowOnly(a.id),this.options.nameLayerRearrange)for(var d=0;d<this.dom.nameBar.childNodes.length;d++)if(this.dom.nameBar.childNodes[d].getAttribute(o)===this.fixedWindowArr[e].id){0!=d&&this.moveNameLayer(d,0);break}}var l=this.options.sequentialArrangeRowNum,h=this.options.sequentialArrangeColNum,w=this.windows.length;this.options.fixArrangeFullScreen&&(l=(h=h>w?w:h)>w?1:l);var c=0,u=0,p=0,m=0;if(!0===this.options.accessibility)for(e=0;e<this.windows.length;e++){var g=(f=(a=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),++c==h&&(c=0,++u==l&&(u=0))}else if("none"==this.options.positionX&&"none"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){g=(f=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),++c==h&&(c=0,++u==l&&(u=0))}else if("left"==this.options.positionX&&"top"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){g=(f=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),++c==h&&(c=0,++u==l&&(c=1,u=0))}else if("right"==this.options.positionX&&"top"==this.options.positionY){c=h-1;for(e=this.selectedWindowHistory.length;e>0;e--){g=(f=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),c++,0==u&&c==h-1&&(u++,c=0),c==h&&(c=0,0!=u&&++u==l&&(u=0))}}else if("left"==this.options.positionX&&"bottom"==this.options.positionY){u=l-1;for(e=this.selectedWindowHistory.length;e>0;e--){g=(f=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),u==l-1&&0==c?(c=0,u=0):++c==h&&(c=0,++u==l-1?c=1:u==l&&(u=0))}
}else if("right"==this.options.positionX&&"bottom"==this.options.positionY){c=h-1,u=l-1;for(e=this.selectedWindowHistory.length;e>0;e--){var f;g=(f=(a=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();p=parseInt(g.width/h,10),m=parseInt(g.height/l,10),f.restore(),f.setSize(p-(f.getSize("outerMarginWidth")-f.getSize("width")),m-(f.getSize("outerMarginHeight")-f.getSize("height"))),f.setPosition(c*p,u*m),c++,u!=l-1||c!=h-1&&c!=h||(c=0,u=0),c==h&&(c=0,u++)}}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("sequential")):this.selectNameLayer(this.selectedWindowHistory[w-1]),this.arrangeHistory="sequential",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doCloseAll=function(){try{if(!1!==a.f.fireEvent(this,"onbeforecloseall")){for(var t=this.windows.length-1;t>=0;t--)this.options.useFixButton?("fixedWindow"==this.options.closeType&&!0===this.windows[t].isFix||"noneFixedWindow"==this.options.closeType&&!1===this.windows[t].isFix||"all"==this.options.closeType)&&(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close()):(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close());this.selectedIndex=-1}if(this.options.accessibility){this._unsetAllAriaLabel("closeAll")}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.doMaximizeAll=function(){var t,e=[],i=[];if(this.options.includeMinimizeWindow){t=this.nowWindow;for(var n=0;n<this.windows.length;n++){for(var o=!0,s=0;s<this.selectedWindowHistory.length;s++)if(this.selectedWindowHistory[s]==this.windows[n].id){o=!1;break}o&&(e.push(this.windows[n]),i.push(this.windows[n].id))}}for(n=0;n<this.selectedWindowHistory.length;n++)for(s=0;s<this.windows.length;s++)if(this.selectedWindowHistory[n]==this.windows[s].id){e.push(this.windows[s]);break}for(n=0;n<e.length;n++)("maximized"!==e[n].window.windowInfo.status||this.options.includeMinimizeWindow&&!0===e[n].window.windowInfo.minimized)&&e[n].window.maximize();this.options.includeMinimizeWindow&&t&&this.addHistory(t),this.arrangeHistory=""},h.prototype.isExistWindow=function(t){try{for(var e=0;e<this.windows.length;e++){if(t==this.windows[e].title)return!0}return!1}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSize=function(t,e){try{parseInt(t)<450&&(t=450),parseInt(e)<150&&(e=150);var i=this.getSize("width"),n=this.getSize("height"),o=t/i,a=e/n;this.setStyle("width",t+"px"),this.setStyle("height",e+"px");for(var r=0;r<this.windows.length;r++){var d=this.windows[r];if(d.window.resizeParentGroup(),this.options.windowAutoResize&&"maximized"!=d.window.windowInfo.status){var l=d.window,h=l.getSize("width"),w=l.getSize("height"),c=parseInt(l.getStyle("left"),10),u=parseInt(l.getStyle("top"),10),p=Math.ceil(h*o),m=Math.ceil(w*a),g=Math.ceil(c*o),f=Math.ceil(u*a);d.window.setSize(p,m),d.window.setStyle("left",g+"px"),d.window.setStyle("top",f+"px")}this.options.useNameScroll&&(this.dom.rightScrollBtn.style.left=parseInt(this.render.offsetWidth)-20+"px")}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.checkResize=function(){try{var t=this.render?this.render.offsetWidth:null;null!=this.bWidth&&t!=this.bWidth&&this.nameLayerResize(),this.bWidth=t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.nameLayerResize=function(t){try{var e=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2;if(!this.options.toolbarWidth){var i=this.render.offsetWidth,n=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left")),o=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(n)||(i-=n),isNaN(o)||(i-=o),i<this.dom.nameBar.scrollWidth+e?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px",this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block",
"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.control.offsetLeft-this.dom.nameBar.offsetWidth+"px":this.dom.nameBar.style.left=this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth+"px"):(this.options.useNameScroll=!1,this.options.useNameContainer?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=e+"px",this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none")}if("hide"==this.options.nameScrollMode)for(var a=0;a<this.windows.length;a++){var r=this.windows[a].id,d=document.getElementById(this.id+"_nameLayer_"+r);"none"==d.style.display&&(d.style.display="block")}this.selectWindow()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.createWindowList=function(t){if(!this.windowList){var e="";e+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' class='w2windowContainer_window_list' labelCheck='true' visibleRowNum='"+this.options.windowScrollVisibleRowNum+"' useCloseButton='"+this.options.useWindowScrollButton+"'>",e+="    <w2:listRow tagName='div' style='' class='w2windowContainer_window_list_listRow' >",e+="        <w2:listColumn id='title' inputType='text' style='' class='w2windowContainer_window_list_listColumn_text'/>",e+="    </w2:listRow>",e+="</w2:list>";var i=WebSquare.xml.parse(e,!0).documentElement;this.windowList=new WebSquare.uiplugin.list(this.id+"_windows_list","",i);var n=this,o=r.Z.getDataPrefix("unique_id");this.windowList.options.xmlEvents=[{name:"onrowclick",action:"script",param:{handler:function(t,e){!function(t,e){if(e&&e.target){var i,s=e.target;if(s.className.match("w2list_listColumn_close")){i=s.parentElement.getAttribute(o);for(var a="",r=0;r<n.windows.length;r++)if(n.windows[r][o]===i){a=n.windows[r].windowId,n.windowList.removeRow(r);break}a&&(n.windows.length<2?n.hideWindowList():n.showWindowList(!0),n.closeWindow(a))}else{if(s.className.match("w2windowContainer_window_list_listColumn_text"));else if(!s.className.match("w2windowContainer_window_list_listRow"))return void(n.dom.iconWindowList!==s&&this.render!==s&&n.hideWindowList());for(i=s.parentElement.getAttribute(o),a="",r=0;r<n.windows.length;r++)if(n.windows[r][o]===i){a=n.windows[r].id;break}if(!a)return void n.hideWindowList();n.listToggle=!1,(e={}).stopToggleOnLast=n.options.stopToggleOnLast,n.clickNameLayer(a,n.options.stopMinimizeOnNameLayer,e),n.hideWindowList()}}}(0,e)}}},{name:"onmousedown",action:"script",param:{handler:function(t){a.f.stopPropagation(t)}}},{name:"onmousewheel",action:"script",param:{handler:function(t){a.f.stopPropagation(t)}}}],this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showWindowList,fnHide:this._hideWindowList,paramHide:{documentClick:!0},event:{}}),this.windowList.setJSON(this.windows)}},h.prototype.showWindowList=function(t){try{this.windowList||t||(!0===this.options.accessibility?this.setSubLayer():this.createWindowList()),t||(!0===this.options.accessibility?this.windowList.setItemArr(this.windows):this.windowList.setJSON(this.windows),WebSquare.getBody().getLayerListener().show(this.id))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._showWindowList=function(t){try{this.windowList.show(),this.windowList.render.style.zIndex=this.maxZIndex+2,!0===this.options.accessibility?this.windowList.options.rowHeight=this.windowList.render.firstChild.firstChild.offsetHeight:(this.windowList.options.rowHeight=this.windowList.render.firstChild.offsetHeight,this.windowList.adjustRender())
;var e=this.dom.iconWindowList,i=WebSquare.style.getRelativeTop(this.dom.toolBar,this.render.offsetParent),n=WebSquare.style.getAbsoluteLeft(e,this.render),o="top"===this.options.toolbarPosition?i+this.dom.iconWindowList.clientHeight+4:i-this.windowList.render.clientHeight,a=e.clientWidth+WebSquare.style.getAbsoluteLeft(e)-this.windowList.render.offsetWidth,r=!this.options.useNameContainer||"right"!==this.options.controlIconPosition&&"allright"!==this.options.controlIconPosition?n:this.windows.length>this.windowList.options.visibleRowNum?a-18:a;this.windowList.setPosition(r,o),this.windowList.focus(),this.listToggle=!0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.hideWindowList=function(){try{this.windowList&&this.windowList.id&&(WebSquare.getBody().getLayerListener().hide(this.id),this.listToggle=!1)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._hideWindowList=function(t){try{(t=t||{}).documentClick;this.windowList&&this.windowList.id&&(this.windowList.hide(),this.listToggle=!1)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.toggle=function(){try{this.listToggle?(!0===this.options.accessibility&&this.dom.iconWindowList.setAttribute("aria-expanded","false"),this.hideWindowList()):(!0===this.options.accessibility&&this.dom.iconWindowList.setAttribute("aria-expanded","true"),this.showWindowList())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._selectedNameLayerAddTabIndex=function(t,e){try{var i=r.Z.getDataPrefix("refId"),n=document.getElementById(this.id+"_nameLayer_"+t);if(t){!0===e?n.setAttribute("tabindex","0"):n.setAttribute("tabindex","-1");for(var o=0;o<n.parentElement.childNodes.length;o++){var a=n.parentElement.childNodes[o];1===a.nodeType&&"BUTTON"===a.nodeName&&a.getAttribute(i)===t&&(!0===e?a.setAttribute("tabindex","0"):a.setAttribute("tabindex","-1"))}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._setVisibleWindowsAfterClose=function(t,e,i){try{var n=i;if(n.length<=1)return;for(var o=this._findBehindWindow(e),a=0;a<n.length;a++)if(e===n[a]){if(o.length>0&&"cascade"!==t){n[a]=o[0].value,this.visibleWindows=n;break}n.splice(a,1);break}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._setVisibleWindows=function(t){try{var e=this.selectedWindowHistory.slice();if(e.length<=0)return;var i=[],n=0;if("vertical"===t)if(this.options.useFixButton&&this.options.verticalArrangeNum>0){n=this.options.verticalArrangeNum;for(var o=e.length-1;o>=0;o--)n>0&&(i.push(e[o]),n--)}else{n=e.length;for(o=0;o<e.length;o++)n>0&&(i.push(e[o]),n--)}else if("horizontal"===t)if(this.options.useFixButton&&this.options.horizontalArrangeNum>0){n=this.options.horizontalArrangeNum;for(o=e.length-1;o>=0;o--)n>0&&(i.push(e[o]),n--)}else{n=e.length;for(o=0;o<e.length;o++)n>0&&(i.push(e[o]),n--)}else if("sequential"===t)if(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0){n=this.options.sequentialArrangeRowNum*this.options.sequentialArrangeColNum;for(o=e.length-1;o>=0;o--)n>0&&(i.push(e[o]),n--)}else{n=e.length;for(o=0;o<e.length;o++)n>0&&(i.push(e[o]),n--)}else if("cascade"===t)if(this.options.useFixButton){n=e.length;for(o=0;o<e.length;o++)n>0&&(i.push(e[o]),n--)}else{n=e.length;for(o=0;o<e.length;o++)n>0&&(i.push(e[o]),n--)}else i.push(e[e.length-1]);this.visibleWindows=i}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSubLayer=function(){try{if(null==this.windowList){this.windowList=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.windowScrollVisibleRowNum,col:1,submenuSize:"auto",style:"position:absolute;",defaultStyle:"",className:"w2table ",w2table:"w2table_accessibility",w2table_main:"w2table_accessibility_main",w2table_row:"w2table_accessibility_row",w2table_col:"w2table_accessibility_col",tableRender:this.options.tableRender,parentPluginName:"windowContainer",useCloseButton:this.options.useCloseButton,useAccessibilityMenu:this.options.useAccessibilityMenu,parent_uuid:this.uuid});var t=this
;this.windowList.handleKeydownEvent=function(e){return t.itemTableHandleKeydownEvent(e)},this.windowList.handleClickEvent=function(e){return t.itemTableHandleClickEvent(e)},this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showWindowList,fnHide:this._hideWindowList,paramHide:{documentClick:!0},event:{}}),this.windowList.setItemArr(this.windows),!0===this.options.accessibility&&this.windowList&&(this.windowList.render.setAttribute("aria-modal","true"),this.windowList.render.setAttribute("role","dialog"))}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._findNameLayerLastIcon=function(t){try{for(var e,i=r.Z.getDataPrefix("refId"),n=document.getElementById(this.id+"_nameLayer_"+t),o=n.parentElement.childNodes.length-1;o>=0;o--){if(1===n.parentElement.childNodes[o].nodeType&&"BUTTON"===n.parentElement.childNodes[o].nodeName&&n.parentElement.childNodes[o].getAttribute(i)===t){e=n.parentElement.childNodes[o];break}e=n;break}return e}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._KeydownNameLayerMove=function(t,e){try{var i=this.nowWindow,n=this.windows[t].id,o=document.getElementById(this.id+"_nameLayer_"+n);if(this._selectedNameLayerAddTabIndex(i,!1),this._selectedNameLayerAddTabIndex(n,!0),!0===e)this._findNameLayerLastIcon(n).focus();else o.focus()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._findBehindWindow=function(t){try{for(var e=document.getElementById(t),i=parseInt(WebSquare.style.getStyle(e,"top").wq_replaceAll("px",""),10),n=parseInt(WebSquare.style.getStyle(e,"left").wq_replaceAll("px",""),10),o=[],a=0;a<this.windows.length;a++){var r=document.getElementById(this.windows[a].id),d=parseInt(WebSquare.style.getStyle(r,"top").wq_replaceAll("px",""),10),l=parseInt(WebSquare.style.getStyle(r,"left").wq_replaceAll("px",""),10),h=parseInt(WebSquare.style.getStyle(r,"z-index").wq_replaceAll("px",""),10);e!==r&&i===d&&n===l&&o.push({zIndex:h,value:this.windows[a].id})}return o.sort((function(t,e){return e.zIndex-t.zIndex})),o}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.showTooltip=function(t,e){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null);var i=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var n=o.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(n){var a=r.Z.getGlobalFunction(n,i.scope_id),d=!0;if("function"==typeof a&&(d=a(i)),!d)return}}catch(t){s.Y.printStackTrace(t)}if(this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2windowContainer_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),"block"!=this.tooltip.render.style.display){this.tooltip.setStyle("display","block"),this.tooltip.render.innerHTML=e;var l,h=WebSquare.style.getAbsoluteLeft(t)+t.offsetWidth/2;l="bottom"===this.options.toolbarPosition?WebSquare.style.getAbsoluteTop(t)-this.tooltip.render.offsetHeight:WebSquare.style.getAbsoluteTop(t)+this.tooltip.render.offsetHeight,this.tooltip.setStyle("zIndex",this.maxZIndex),this.tooltip.setStyle("left",h+"px"),this.tooltip.setStyle("top",l+"px")}})),1e3*this.options.tooltipTime)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.hideTooltip=function(){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowSize=function(t,e){try{for(var i=parseInt(t,10)+"px",n=parseInt(e,10)+"px",o=0;o<this.windows.length;o++){var a=this.windows[o],r=a.window;a.id==this.nowWindow&&(r.windowInfo.width=i,r.windowInfo.height=n,r.restore())}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.restoreWindowSize=function(t){try{
for(var e=0;e<this.windows.length;e++){var i=this.windows[e],n=i.window;if(i.windowId==t){n.restore();break}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowPosition=function(t,e){try{for(var i=parseInt(t,10)+"px",n=parseInt(e,10)+"px",o=0;o<this.windows.length;o++){var a=this.windows[o],r=a.window;if(a.id==this.nowWindow){r.windowInfo.left=i,r.windowInfo.top=n,r.windowInfo.status="restored",r.windowInfo.minimized=!1,r.windowInfo.getInfo(r.render);break}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.closeWindow=function(t){try{var e=this.getWinInfoObj(t,"windowId"),i="";i=null==e?this.nowWindow:e.id;for(var n=0;n<this.windows.length;n++){var o=this.windows[n],a=o.window;if(o.id==i){this.multiViewIdArr.length>0&&this.setSingleView(),a.close();break}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.closeOthers=function(t){try{var e,i=this.getWinInfoObj(t)||this.getWinInfoObj(t,"windowId");e=null==i?this.nowWindow:i.id;for(var n=0;n<this.windows.length;n++){var o=this.windows[n],a=o.window;o.id!=e&&a.close()}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowStatusMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var n=this.windows[i],o=n.window;if(e){if(n.title==e){o.setStatusMsg(t);break}}else if(n.id==this.nowWindow){o.setStatusMsg(t);break}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setWindowCustomMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var n=this.windows[i],o=n.window;if(e){if(n.title==e){o.setCustomMsg(t);break}}else if(n.id==this.nowWindow){o.setCustomMsg(t);break}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setAllWindowStatusMsg=function(t){try{for(var e=0;e<this.windows.length;e++){this.windows[e].window.setStatusMsg(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getWindow=function(t){try{var e=o.I.getConfiguration("/WebSquare/windowContainer/getWindow/@searchTarget")||"title",i="title"===e;return this.getWindowByTarget(t,e,{focus:i})}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getFrame=function(t){try{return this.getWindowByTarget(t,"windowId",{focus:!1,frame:!0})}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._getCurrentFrame=function(){return this.getWindowByTarget(this.getSelectedWindowId(),"windowId",{focus:!1,frame:!0})},h.prototype.getWindowByWindowId=function(t,e){try{return this.getWindowByTarget(t,"windowId",{focus:e})}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getWindowByTarget=function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var n=r.Z.getBoolean(i.focus),o=0;o<this.windows.length;o++){var d=this.windows[o];if(t==d[e]){if(1==n&&(this.beforeWindow=this.nowWindow,this.nowWindow=d.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var l=this.getWinInfoObj(this.beforeWindow).windowId,h=this.getWinInfoObj(this.nowWindow).windowId;a.f.fireEvent(this,"onwindowchange",l,h)}return!0===i.frame?d.window.frame:d.window.frame.getWindow()}}return null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getWindowByUniqueId=function(t,e){try{e=r.Z.getBoolean(e);for(var i=0;i<this.windows.length;i++){var n=this.windows[i];if(t==n.id){if(1==e&&(this.beforeWindow=this.nowWindow,this.nowWindow=n.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var o=this.getWinInfoObj(this.beforeWindow).windowId,d=this.getWinInfoObj(this.nowWindow).windowId;a.f.fireEvent(this,"onwindowchange",o,d)}return n.window.frame.getWindow()}}return null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getUniqueIdByTitle=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var n=this.windows[i];t==n.title&&e.push(n.id)}return e}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getUniqueIdByWindowId=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var n=this.windows[i];t==n.windowId&&e.push(n.id)}return e}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.showModal=function(){try{
this.modal||(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",this.render.appendChild(this.modal)),this.modal&&(this.modal.style.display="block",this.modal.style.zIndex=this.maxZIndex-1)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.hideModal=function(){try{this.modal&&(this.modal.style.display="none")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.moveNameLayerScroll=function(t){try{if(this.options.changeActiveWindow){var e=this.selectedIndex;if("right"==t&&e>=0&&e<this.windows.length-1?e++:"left"==t&&e>0&&e<=this.windows.length-1&&e--,e!=this.selectedIndex){var i=this.windows[e].id,n={};n.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(i,this.options.stopMinimizeOnNameLayer,n)}}else if("hide"==this.options.nameScrollMode){for(var o=0,a=0;a<this.windows.length;a++){var r=this.windows[a].id,d=document.getElementById(this.id+"_nameLayer_"+r),l=WebSquare.style.getStyle(d,"margin-left");l="auto"===l?"0":l;var h=WebSquare.style.getStyle(d,"margin-right");h="auto"===h?"0":h;var w=d.offsetWidth+parseInt(l,10)+parseInt(h,10);"none"!=d.style.display&&(o+=w)}if("right"==t){if(this.dom.nameBar.offsetWidth>o)return;for(a=0;a<this.windows.length;a++){r=this.windows[a].id;if("none"!=(d=document.getElementById(this.id+"_nameLayer_"+r)).style.display&&a!=this.windows.length-1){d.style.display="none";break}}}else for(a=this.windows.length-1;a>=0;a--){r=this.windows[a].id;if("none"==(d=document.getElementById(this.id+"_nameLayer_"+r)).style.display){d.style.display="block";break}}}else{var c=parseInt(this.options.nameLayerMoveGap,10)||110;if("right"==t){var u="";u="allright"===this.options.controlIconPosition?this.dom.nameContainer.offsetWidth-this.dom.nameBar.offsetWidth:this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth,parseInt(this.dom.nameBar.style.left)-c<u?this.dom.nameBar.style.left=u+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-c+"px"}else if(this.options.useNameContainer)parseInt(this.dom.nameBar.style.left)+c>this.dom.leftScrollBtn.offsetWidth?"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft+"px":this.dom.nameBar.style.left=this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+c+"px";else{var p=this.options.nameLayerMenu?0:this.dom.control.offsetWidth;parseInt(this.dom.nameBar.style.left)+c>p+this.dom.leftScrollBtn.offsetWidth?this.dom.nameBar.style.left=p+this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+c+"px"}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setFocus=function(t){try{var e=t;if("string"==typeof t){for(var i=0;i<this.windows.length;i++)this.windows[i].windowId===t&&this.selectNameLayer(this.windows[i].id);return}if(!this.windows[e])return;this.windows[e].id!==this.nowWindow&&this.selectNameLayer(this.windows[e].id)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getSelectedIndex=function(){return this.selectedIndex},h.prototype.getSelectedWindowId=function(){return this.windows[this.selectedIndex].windowId},h.prototype.refreshSelectedIndex=function(t){try{for(var e=t||this.nowWindow,i=0;i<this.windows.length;i++){this.windows[i].id==e&&(this.selectedIndex=i)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._keydownMoveWindow=function(t,e){try{
var i=this.windows[this.getSelectedIndex()],n=document.getElementById(i.id),o=document.getElementById(n.id+"_restore"),a=parseInt(WebSquare.style.getStyle(n,"top").wq_replaceAll("px",""),10),r=parseInt(WebSquare.style.getStyle(n,"left").wq_replaceAll("px",""),10),d=parseInt(i.window.windowInfo.width,10),l=parseInt(i.window.windowInfo.height,10),h=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"height").wq_replaceAll("px",""),10),w=parseInt(WebSquare.style.getStyle(this.render,"width").wq_replaceAll("px",""),10),c=parseInt(WebSquare.style.getStyle(this.render,"height").wq_replaceAll("px",""),10);if(c-=h,"restored"===i.window.windowInfo.status&&t&&(t===n||t===o)&&(t===o&&n.focus(),t===n||t===o))switch(e){case 37:--r>=0&&this.setWindowPosition(r,a);break;case 38:--a>=0&&this.setWindowPosition(r,a);break;case 39:d+ ++r<=w&&this.setWindowPosition(r,a);break;case 40:l+ ++a<=c&&this.setWindowPosition(r,a)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._selectWindowOnly=function(t){try{this.prevWindow=this.nowWindow;var e=t;e!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=e),this.selectWindow()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._getOpenedWindows=function(){try{for(var t=[],e={},i=0;i<this.windows.length;i++){var n=this.windows[i];this.options.includeMinimizeWindow?n.window.windowInfo.minimized?this._selectWindowOnly(n.id):e[n.id]=n:0==n.window.windowInfo.minimized&&t.push(n)}if(this.options.includeMinimizeWindow){var o=this.selectedWindowHistory.slice();for(i=0;i<this.selectedWindowHistory.length;i++){var a=o[i];void 0!==e[a]&&this._selectWindowOnly(e[a].id)}return this.windows}return t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._setAriaLabel=function(){try{var t=this.arrangeHistory?this.arrangeHistory:"",e="";switch(t){case"vertical":e=WebSquare.language.getMessage("WindowContainer_vertical_align_status")||"Vertical alignment selected";break;case"horizontal":e=WebSquare.language.getMessage("WindowContainer_horizontal_align_status")||"Horizontal alignment selected";break;case"cascade":e=WebSquare.language.getMessage("WindowContainer_cascade_align_status")||"Cascade alignment selected";break;case"sequential":e=WebSquare.language.getMessage("WindowContainer_tiled_align_status")||"Tiled alignment selected"}var i=function(t){if(t){var i=t.getAttribute("aria-label"),n=i.split(","),o=n[0]?n[0]:i;i=e?o+","+e:o,t.setAttribute("aria-label",i)}};i(this.dom.iconVertical),i(this.dom.iconHorizontal),i(this.dom.iconCascade),i(this.dom.iconSequential)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._unsetAllAriaLabel=function(t){try{var e="";t&&"closeAll"==t?(e=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Vertical alignment,Empty state",this.dom.iconVertical.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Horizontal alignment,Empty state",this.dom.iconHorizontal.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Cascade alignment,Empty state",this.dom.iconCascade.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Tiled alignment,Empty state",this.dom.iconSequential.setAttribute("aria-label",e)):(e=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Vertical alignment,Current default view",this.dom.iconVertical.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Horizontal alignment,Current default view",this.dom.iconHorizontal.setAttribute("aria-label",e),
e=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Cascade alignment,Current default view",this.dom.iconCascade.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Tiled alignment,Current default view",this.dom.iconSequential.setAttribute("aria-label",e))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{var e=r.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);for(this._hideWindowList();i.next();){if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.f.fireEvent(this,"oncustomcontrolclick",i.getElement().id);if(i.match("w2windowContainer_controlIcon_vertical")&&(this.options.useFixButton&&this.options.verticalArrangeNum>0?this.doVerticalFixArrange():this.doVerticalArrange(),a.f.fireEvent(this,"onverticalarrange")),i.match("w2windowContainer_controlIcon_horizontal")&&(this.options.useFixButton&&this.options.horizontalArrangeNum>0?this.doHorizontalFixArrange():this.doHorizontalArrange(),a.f.fireEvent(this,"onhorizontalarrange")),i.match("w2windowContainer_controlIcon_cascade")&&(this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.f.fireEvent(this,"oncascadearrange")),i.match("w2windowContainer_controlIcon_sequential")&&(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.f.fireEvent(this,"onsequentialarrange")),i.match("w2windowContainer_controlIcon_closeAll")&&this.doCloseAll(),i.match("w2windowContainer_controlIcon_maximize")){var n=this.getSelectedIndex();if(n>-1&&n<this.windows.length){var o=this.windows[n];"maximized"==o.window.windowInfo.status?(o.window.toggleResize(),a.f.fireEvent(this,"onselectedrestore")):(a.f.fireEvent(this,"onselectedmaximize"),1==this.options.windowMaximizeAll?this.doMaximizeAll():o.window.toggleResize())}}if(i.match("w2windowContainer_controlIcon_closeOthers")&&this.closeOthers(),i.match("w2windowContainer_controlIcon_windowList")&&this.windows.length>0&&this.toggle(),i.match("w2windowContainer_nameLayer")){var d=i.getElement().getAttribute(e),l={};l.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(d,this.options.stopMinimizeOnNameLayer,l),!0===this.options.accessibility&&a.f.preventDefault(t)}if(i.match("w2windowContainer_nameLayer_close")){d=i.getElement().getAttribute(e);return void(p=this.getWinInfoObj(d)).window.close()}if(i.match("w2windowContainer_nameLayer_close_custom")){d=i.getElement().getAttribute(e);return void(p=this.getWinInfoObj(d)).window.close()}if(i.match("w2windowContainer_nameLayer_fixOff")){d=i.getElement().getAttribute(e);(p=this.getWinInfoObj(d)).isFix=!p.isFix,null!==p.userIconClass&&null==p.userIconPosition&&(p.userIconPosition="right");var h=p.title+" ",w=!0===this.options.accessibility?"w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOff_accessibility ":"";if(p.isFix){var c=!0===this.options.accessibility?"w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOn ":"w2windowContainer_nameLayer_fixOn ";null==p.userIconClass||null!=p.userIconClass&&"right"==p.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff "+w+c+"w2windowContainer_nameLayer_firstButtonFromLeft":null!=p.userIconClass&&"left"==p.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff "+w+c+"w2windowContainer_nameLayer_secondButtonFromLeft"),h+=WebSquare.language.getMessage("WindowContainer_fix_dialog_set")||"Fix dialog box selected",this.fixedWindowArr.push(p)}else{
null==p.userIconClass||null!=p.userIconClass&&"right"==p.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff "+w+"w2windowContainer_nameLayer_firstButtonFromLeft":null!=p.userIconClass&&"left"==p.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff "+w+"w2windowContainer_nameLayer_secondButtonFromLeft"),h+=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected";for(var u=0;u<this.fixedWindowArr.length;u++)if(this.fixedWindowArr[u].id==p.id){this.fixedWindowArr.splice(u,1);break}}return void i.getElement().setAttribute("aria-label",h)}if(i.match("w2windowContainer_nameLayer_fixOff_custom")){var p;d=i.getElement().getAttribute(e);if((p=this.getWinInfoObj(d)).isFix=!p.isFix,p.isFix)i.getElement().className="w2windowContainer_nameLayer_fixOff_custom w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(p);else{i.getElement().className="w2windowContainer_nameLayer_fixOff_custom";for(u=0;u<this.fixedWindowArr.length;u++)if(this.fixedWindowArr[u].id==p.id){this.fixedWindowArr.splice(u,1);break}}return}if(i.match("w2windowContainer_nameLayer_menu"))return;if(i.match("w2windowContainer_nameLayer_menu_custom"))return;i.match("w2window")&&this.selectNameLayer(i.getElement().id),i.match("w2window_restore"),i.match("w2windowContainer_scrollLeftBtn")&&this.moveNameLayerScroll("left"),i.match("w2windowContainer_scrollRightBtn")&&this.moveNameLayerScroll("right")}i=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var n=this.windows[i];if(n.windowTitle==e.element.getAttribute("data-title"))if(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),"maximized"==n.window.windowInfo.status){if(n.window.toggleResize(),a.f.fireEvent(this,"onselectedrestore"),this.options.windowMaximizeAll)for(var o=this.nowWindow,r=this.selectedWindowHistory.length;r>0;r--){var d=this.selectedWindowHistory[r-1],l=this.getWinInfoObj(d);if(d!=o&&"maximized"==l.window.windowInfo.status){l.window.setStyle("display","block");break}l.window.setStyle("display","block")}}else a.f.fireEvent(this,"onselectedmaximize"),n.window.toggleResize(),this.options.windowMaximizeAll&&this.doMaximizeAll()}}e.match("w2window")&&this.selectNameLayer(e.getElement().id)}e=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{a.f.stopEvent(t);for(var e=r.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2windowContainer_nameLayer")){for(var n=i.getElement(),o=i.getElement().getAttribute(e),d="",l=0;l<this.windows.length;l++){var h=this.windows[l];if(o==h.id){d=h.tooltip;break}}-1==i.getElement().id.indexOf(this.nowWindow)&&this.addClass(n,"w2windowContainer_selectedNameLayer"),this.options.tooltipDisplay&&this.showTooltip(n,d)}else{if(i.match("w2windowContainer_controlIcon_customIcon"))return void a.f.fireEvent(this,"oncustomcontrolover",i.getElement().id)
;i.match("w2windowContainer_controlIcon_vertical")?this.addClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):i.match("w2windowContainer_controlIcon_horizontal")?this.addClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):i.match("w2windowContainer_controlIcon_cascade")?this.addClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):i.match("w2windowContainer_controlIcon_sequential")?this.addClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):i.match("w2windowContainer_controlIcon_closeAll")?this.addClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):i.match("w2windowContainer_controlIcon_maximize")?this.addClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):i.match("w2windowContainer_controlIcon_closeOthers")?this.addClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):i.match("w2windowContainer_controlIcon_windowList")?this.addClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):i.match("w2windowContainer_scrollLeftBtn")?this.addClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):i.match("w2windowContainer_scrollRightBtn")&&this.addClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}i=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{a.f.stopEvent(t),this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer"))-1==e.getElement().id.indexOf(this.nowWindow)&&this.removeClass(e.getElement(),"w2windowContainer_selectedNameLayer");else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void a.f.fireEvent(this,"oncustomcontrolout",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.removeClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.removeClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.removeClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.removeClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.removeClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_showWindows")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_showWindows_over"):e.match("w2windowContainer_controlIcon_windowList")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_controlIcon_maximize")?this.removeClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.removeClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_scrollLeftBtn")?this.removeClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.removeClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleDragStartEvent=function(){try{this.showModal()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleDragEndEvent=function(){try{this.hideModal()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.finalize=function(){try{l.q.removeCheckResize(this.uuid);for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=r.Z.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.createMenu=function(){try{
"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>","        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>","    </w2:listRow>","</w2:list>";var t=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",t),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.contextMenu,fnShow:this.contextMenu.show,fnHide:this.contextMenu.hide});var e=WebSquare.language.getMessage("Window_close")||"Close",i=WebSquare.language.getMessage("WindowContainer_dualMonitors")||"Dual Monitors",n=WebSquare.language.getMessage("WindowContainer_multiView")||"Multi View",o=WebSquare.language.getMessage("WindowContainer_share")||"Share",d=[];d.push({col1:e}),d.push({col1:i}),d.push({col1:n}),d.push({col1:o}),this.contextMenu.setJSON(d),WebSquare.getBody().getLayerListener().hide(this.contextMenu.id);var l=this.id;this.contextMenu.bind("onmousedown",(function(t){a.f.stopPropagation(t)})),this.contextMenu.bind("onrowclick",(function(t){var e=r.Z.getComponentById(l),i=this.getRowData(t);a.f.fireEvent(e,"onmenuclick",this._refId,i.col1,i),WebSquare.getBody().getLayerListener().hide(this.id),this._refId=""}))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.toggleContextMenu=function(t,e,i){try{var n=this.getWinInfoObj(t);t="";n&&(t=n.windowId,this.contextMenu._refId=t),a.f.fireEvent(this,"onmenuopen",t),this.contextMenu||this.createMenu(),WebSquare.getBody().getLayerListener().isShow(this.contextMenu.id)?WebSquare.getBody().getLayerListener().hide(this.contextMenu.id):WebSquare.getBody().getLayerListener().show(this.contextMenu.id),this.contextMenu.setPosition(e,i-this.contextMenu.getSize("height"))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.hideContextMenu=function(){try{WebSquare.getBody().getLayerListener().hide(this.contextMenu.id)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setMenu=function(t,e){try{this.contextMenu||this.createMenu();for(var i=[],n=0;n<t.length;n++)i.push({col1:t[n]});this.contextMenu.setJSON(i),null!=e&&this.contextMenu.setSize("height",e)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setMultiView=function(t,e){try{var i=this.getWinInfoObj(this.nowWindow),n=this.getWinInfoObj(t,"windowId");if(!i||!n||n.windowId===i.windowId)return;var o=Number(e);isNaN(o)&&(e=0);for(var a=0;a<this.windows.length;a++)this.windows[a].windowId!==t&&this.windows[a].id!==this.nowWindow&&(this.windows[a].window.minimize(!0),WebSquare.style.hide(document.getElementById(this.id+"_nameLayer_"+this.windows[a].id)));this.multiViewIdArr=[n.id,this.nowWindow];var r=n.window,d=i.window;if(r._multiViewUUID=d.uuid,d._multiViewUUID=r.uuid,r._direction=e,d._direction=e,1===e){var l=r.resizeParentGroup(),h=parseInt(l.width,10),w=parseInt(l.height/2,10);r.restore(),r.setSize(h-(r.getSize("outerMarginWidth")-r.getSize("width")),w-(r.getSize("outerMarginHeight")-r.getSize("height"))),r.setPosition(0,w);l=d.resizeParentGroup();var c=parseInt(l.width,10),u=parseInt(l.height/2,10);d.restore(),d.setSize(c-(d.getSize("outerMarginWidth")-d.getSize("width")),u-(d.getSize("outerMarginHeight")-d.getSize("height"))),d.setPosition(0,0)}else{l=r.resizeParentGroup(),h=parseInt(l.width/2,10),
w=parseInt(l.height,10);r.restore(),r.setSize(h-(r.getSize("outerMarginWidth")-r.getSize("width")),w-(r.getSize("outerMarginHeight")-r.getSize("height"))),r.setPosition(h,0);l=d.resizeParentGroup(),c=parseInt(l.width/2,10),u=parseInt(l.height,10);d.restore(),d.setSize(c-(d.getSize("outerMarginWidth")-d.getSize("width")),u-(d.getSize("outerMarginHeight")-d.getSize("height"))),d.setPosition(0,0)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSingleView=function(t){try{for(var e=0;e<this.windows.length;e++)WebSquare.style.show(document.getElementById(this.id+"_nameLayer_"+this.windows[e].id));this.multiViewIdArr=[];for(e=0;e<this.windows.length;e++)this.windows[e].window.restore(),this.windows[e].window.maximize(),this.windows[e].window.setPosition(0,0),this.windows[e].window._multiViewUUID="",this.windows[e].window._direction=0;var i=this.getWinInfoObj(t,"windowId");i&&this.selectNameLayer(i.id)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.isMultiView=function(){return this.multiViewIdArr.length>0},h.prototype.handleNameLayerMove=function(t){try{if(!this.options.nameLayerMove&&!this.options.nameLayerMenu&&!this.options.useWindowSplit)return;for(var e=r.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();){if(this.options.nameLayerMenu&&i.match("w2windowContainer_nameLayer_menu")){a.f.stopEvent(t);var n=i.getElement(),o=n.getAttribute(e);this.toggleContextMenu(o,WebSquare.style.getAbsoluteLeft(n.parentNode),WebSquare.style.getAbsoluteTop(n.parentNode)),i.stop()}if((this.options.nameLayerMove||this.options.useWindowSplit)&&i.match("w2windowContainer_nameLayer")){var d=-1,l=i.getElement();if(!l)return;for(var h=0;h<this.windows.length;h++)if(this.windows[h].id===l.getAttribute(e)){d=h;break}if(isNaN(d)||d<0)return;a.f.preventDefault(t);var w=this.uuid,c=this;this.options.nameLayerMove&&!this.options.useWindowSplit&&(this._splitInfo.moveMode=!0),this.options.useWindowSplit&&!this.options.nameLayerMove&&(this._splitInfo.splitMode=!0),this.event.addListener(document,"onkeydown",(function(t){"Escape"===t.key&&!0===c._splitInfo.ghostVisible&&(c._splitInfo={},WebSquare.dragdrop.gDragManager.remove(c.id+"_ghostLayer_nameLayerMove"))})),this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,WebSquare.dragdrop.gDragManager.activate(t,l,{id:this.id+"_ghostLayer_nameLayerMove",className:"w2windowContainer_drag_nameLayerMove",delay:15,mode:"",passive:!WebSquare.util.isTouchDevice(),makeGhostLayer:function(t){t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t.render.style.position="absolute";var e=d,i=WebSquare.idCache[w].dom.nameBar.childNodes[e];return t.render.innerHTML=i.outerHTML,c.ghostObj=t,t},handleStart:function(t){var i=d,n=WebSquare.idCache[w],o=$(n.dom.nameBar.childNodes[i]);this.nameLayerMove_left=o.css("left"),this.dragOverNameLayer={},this.dropIndex=-1,this.nameLayerMove_zIndex=o.css("zIndex");var s=Number(this.nameLayerMove_zIndex);if(this.nameLayerMove_zIndex_Array=[],isNaN(s)||s<=0)for(var a=0;a<n.dom.nameBar.childNodes.length;a++){var r=$(n.dom.nameBar.childNodes[a]);this.nameLayerMove_zIndex_Array.push(r.css("zIndex")),a===i?r.css("zIndex",4):r.css("zIndex",5)}else o.css("zIndex",s-1);this.startLeft=o.offset().left,this.startTop=o.offset().top,n.selectedWindowId=o[0].getAttribute(e)},onDrop:function(t,e,i,n,o,s,l){var h=WebSquare.idCache[w];if(1==h._splitInfo.moveMode){var c=d,u=$(h.dom.nameBar.childNodes[c]);if(u.css("left",this.nameLayerMove_left),this.nameLayerMove_zIndex_Array.length>0)for(var p=0;p<h.dom.nameBar.childNodes.length;p++)$(h.dom.nameBar.childNodes[p]).css("zIndex",this.nameLayerMove_zIndex_Array[p]);else u.css("zIndex",this.nameLayerMove_zIndex);for(var m in this.dragOverNameLayer)$(h.dom.nameBar.childNodes[m]).css("left",this.dragOverNameLayer[m][0]);h.moveNameLayer(c,this.dropIndex),this.nameLayerMove_left="",this.nameLayerMove_zIndex="",
this.dragOverNameLayer={},this.nameLayerMove_zIndex_Array=[]}if(!0===h._splitInfo.ghostVisible){var g=h.getWinInfoObj(h.selectedWindowId),f={src:g.src,title:g.title,windowTitle:g.windowTitle,id:g.id,windowId:g.windowId,screenX:a.f.getScreenX(l),screenY:a.f.getScreenY(l)};a.f.fireEvent(h,"onwindowsplit",f,a.f.getMouseX(l),a.f.getMouseY(l))&&r.Z.requestAnimationFrame((function(){h.closeWindow(g.windowId)}))}h._splitInfo={}},onDragover:function(t,e,i,n,o,s,a){var r=d,l=-1,h=WebSquare.idCache[w],c=!1,u=null;for(u=a&&"touchmove"===a.type?new WebSquare.targetIterator(document.elementFromPoint(a.changedTouches[0].clientX,a.changedTouches[0].clientY)):h.event.getTargetIterator(a);u.next();)if(u.match("w2windowContainer_nameLayer")||u.match("w2windowContainer_name")){c=!0,u.stop();break}if(u=null,!0!==h._splitInfo.splitMode&&!0===c){h._splitInfo.moveMode=!0;h=WebSquare.idCache[w];for(var p=0;p<h.dom.nameBar.childNodes.length;p++)if(h.dom.nameBar.childNodes[p]===e){l=p;break}var m=$(h.dom.nameBar.childNodes[r]);if(m.css("left",o/h._zoomLevel),null!=h.dom.nameBar.childNodes[l]&&l!==r){var g=$(h.dom.nameBar.childNodes[l]);null==this.dragOverNameLayer[l]?(this.dragOverNameLayer[l]=[g.css("left"),o],r>l?g.css("left",m.width()):g.css("left",-1*m.width()),this.dropIndex=l):(this.dragOverNameLayer[l][1]>=0&&this.dragOverNameLayer[l][1]>o+10||this.dragOverNameLayer[l][1]<0&&this.dragOverNameLayer[l][1]<o-10)&&(g.css("left",this.dragOverNameLayer[l][0]),this.dragOverNameLayer[l]=null,delete this.dragOverNameLayer[l],this.dropIndex=r>l?l+1:l-1)}}else if(!0!==h._splitInfo.moveMode){h._splitInfo.splitMode=!0;var f=h.dom.nameBar.childNodes[r];Math.abs(s)>2*f.offsetHeight?(h._splitInfo.ghostVisible=!0,h.ghostObj.render.style.visibility="visible",h.ghostObj.render.style.zIndex=1e3,h.ghostObj.render.style.opacity=""):(h._splitInfo.ghostVisible=!1,h.ghostObj.render.style.zIndex=1e3,h.ghostObj.render.style.opacity="0.2"),h.ghostObj.render.style.left=this.startLeft+o/h._zoomLevel+"px",h.ghostObj.render.style.top=this.startTop+s/h._zoomLevel+"px"}}}),i.stop()}}i=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.moveNameLayer=function(t,e){try{if(t===e||t<0||e<0)return;var i,n;i=this.getRealWindowPosition(t),n=this.getRealWindowPosition(e);var o=this.windows[i].windowId,r=this.windows[n].windowId;if(!1===a.f.fireEvent(this,"onbeforenamelayermove",{startWindowID:o,startIndex:t,endWindowID:r,endIndex:e}))return;var d=t>e?0:1;e<this.windows.length-1?this.dom.nameBar.insertBefore(this.dom.nameBar.childNodes[t],this.dom.nameBar.childNodes[e+d]):this.dom.nameBar.appendChild(this.dom.nameBar.childNodes[t]);!function(t,e,i){var n=t.splice(e,1);t.splice(i,0,n[0])}(this.windows,i,n);for(var l=0;l<this.windows.length;l++)if(this.nowWindow===this.windows[l].id){this.selectedIndex=l;break}a.f.fireEvent(this,"onafternamelayermove",{startWindowID:o,startIndex:t,endWindowID:r,endIndex:e})}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setControlIconFormatter=function(){var t=[],e=r.Z.getGlobalFunction(this.options.controlIconFormatter,this.scope_id);if(!this.options.nameLayerMenu&&"function"==typeof e){if(this.controlIconFormatter=e,this.useControlIconFormatter=!0,this.controlIcons=this.controlIconFormatter?this.controlIconFormatter.call(this):this.options.controlIcons,this.options.useControlIconTitle)for(var i=0,n=this.controlIcons.length;i<n;i++){this.controlIcons[i].useTitle=!0}for(i=0,n=this.controlIcons.length;i<n;i++){var o=this.controlIcons[i],s=o.isCustom?o.className+" w2windowContainer_controlIcon_customIcon":o.className,a=o.useTitle?"title='"+WebSquare.language.getMessage("WindowContainer_controlIcon_"+o.id)+"'":"";t.push("<span id='"+this.id+"_"+o.id+"' class='"+s+"'"+a+"></span>")}var d,l=this.dom.control;"allright"===this.options.controlIconPosition?(l=this.getElementById(this.id+"_controlIconDiv")).innerHTML=t.join(""):this.dom.control.innerHTML=t.join("");for(i=0,n=this.controlIcons.length;i<n;i++){
var h=this.controlIcons[i],w=document.getElementById(this.id+"_"+h.id),c=h.id.substring(0,1).toUpperCase()+h.id.substring(1,h.id.length);!1===h.isCustom&&(this.dom["icon"+c]=w)}if("allright"===this.options.controlIconPosition){d=l.childNodes[l.childNodes.length-1],l.style.width=WebSquare.style.getRelativeLeft(d,l)+d.offsetWidth+"px";for(var u=50,p=0;p<l.childNodes.length;p++)WebSquare.style.setStyle(l.childNodes[p],"left",u+"px"),u+=25;var m=25*l.childNodes.length+55,g=25*l.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right",g+"px")}else if("right"===this.options.controlIconPosition){d=l.childNodes[l.childNodes.length-1],l.style.width=WebSquare.style.getRelativeLeft(d,l)+d.offsetWidth+"px";m=25*l.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px");for(u=0,p=0;p<l.childNodes.length;p++)WebSquare.style.setStyle(l.childNodes[p],"left",u+"px"),u+=25}else{d=l.childNodes[this.dom.control.childNodes.length-1],this.dom.control.style.width=WebSquare.style.getRelativeLeft(d,this.dom.control)+d.offsetWidth+"px";m=25*l.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"left",m+"px");for(u=0,p=0;p<l.childNodes.length;p++)WebSquare.style.setStyle(l.childNodes[p],"left",u+"px"),u+=25}this.createNameLayer(),this.selectWindow()}},h.prototype.setArrangeWindows=function(t,e){try{switch(t){case"vertical":this.options.useFixButton&&this.options.verticalArrangeNum>0&&!e?this.doVerticalFixArrange():this.doVerticalArrange(e),a.f.fireEvent(this,"onverticalarrange");break;case"horizontal":this.options.useFixButton&&this.options.horizontalArrangeNum>0&&!e?this.doHorizontalFixArrange():this.doHorizontalArrange(e),a.f.fireEvent(this,"onhorizontalarrange");break;case"cascade":this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),a.f.fireEvent(this,"oncascadearrange");break;case"sequential":this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),a.f.fireEvent(this,"onsequentialarrange")}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getRealWindowPosition=function(t){try{t>=this.dom.nameBar.childNodes.length&&(t=this.dom.nameBar.childNodes.length-1);for(var e=r.Z.getDataPrefix("windowtitle"),i=r.Z.getDataPrefix("refId"),n=(this.dom.nameBar.childNodes[t].getAttribute(e),this.dom.nameBar.childNodes[t].getAttribute(i)),o=0;o<this.windows.length;o++)if(n==this.windows[o].id)return o;return}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.itemTableHandleKeydownEvent=function(t){try{var e,i,n=t.keyCode,o=this.event.getTargetIterator(t,this.render),d=r.Z.getDataPrefix("unique_id"),l=this;for(27===n&&(l.dom.iconWindowList.focus(),l.hideWindowList(),l.dom.iconWindowList.setAttribute("aria-expanded","false"));o.next();){if(o.match("w2table_accessibility")&&9===n&&t.shiftKey&&(a.f.preventDefault(t),l.dom.iconWindowList.focus(),l.hideWindowList(),l.dom.iconWindowList.setAttribute("aria-expanded","false")),o.match("w2table_accessibility_col")){if(32===n||13===n){e=o.getElement().getAttribute(d);for(var h=0;h<l.windows.length;h++)if(l.windows[h].id===e){i=l.windows[h].id;break}if(!i)return void l.hideWindowList();l.listToggle=!1;var w={};w.stopToggleOnLast=l.options.stopToggleOnLast,l.clickNameLayer(i,l.options.stopMinimizeOnNameLayer,w),l.hideWindowList(),l.dom.iconWindowList.setAttribute("aria-expanded","false"),document.getElementById(i).focus()}o.stop()}o.match("w2list_listColumn_accessibility_close")&&(32===n||13===n?(o.getElement().click(),l.iconWindowListClose=!0,l.hideWindowList(),
l.dom.iconWindowList.setAttribute("aria-expanded","false")):9!==n||t.shiftKey||(e=o.getElement().parentElement.getAttribute(d),l.windows[l.windows.length-1].id===e&&(a.f.preventDefault(t),l.dom.iconWindowList.focus(),l.hideWindowList(),l.dom.iconWindowList.setAttribute("aria-expanded","false"))),o.stop())}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.itemTableHandleClickEvent=function(t){try{for(var e,i=this.event.getTargetIterator(t,this.render),n=r.Z.getDataPrefix("unique_id"),o=this;i.next();)if(i.match("w2list_listColumn_accessibility_close")){e=i.getElement().parentElement.getAttribute(n);for(var a=0;a<o.windows.length;a++)if(o.windows[a].id===e){d=o.windows[a].windowId||o.windows[a].id;break}d&&(o.closeWindow(d),o.windowList.setItemArr(this.windows),o.hideWindowList()),i.stop()}else if(i.match("w2table_accessibility_col")){e=i.getElement().getAttribute(n);var d="";for(a=0;a<o.windows.length;a++)if(o.windows[a].id===e){d=o.windows[a].id;break}if(!d)return void o.hideWindowList();o.listToggle=!1;var l={};l.stopToggleOnLast=o.options.stopToggleOnLast,o.clickNameLayer(d,o.options.stopMinimizeOnNameLayer,l),o.hideWindowList(),i.stop()}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.tabMoveFromArrangeButton=function(t,e,i){try{if(e===this.focusWindowId){if(9===i.keyCode&&i.shiftKey){document.getElementById(this.focusWindowId);for(var n=this.windows.length-1;n>-1;n--)if(this.windows[n].id===this.focusWindowId&&this.windows[n-1]){var o=this.getWinInfoObj(this.windows[n-1].id);this.increaseZIndex(o.window),this.focusWindowId=this.windows[n-1].id;break}}}else if(e===this.focusWindowId+"_close"&&9===i.keyCode&&!i.shiftKey)for(n=0;n<this.windows.length;n++)if(this.windows[n].id===this.focusWindowId&&this.windows[n+1]){o=this.getWinInfoObj(this.windows[n+1].id);this.increaseZIndex(o.window),this.focusWindowId=this.windows[n+1].id;break}}catch(i){s.Y.printStackTrace(i,null,this)}},h.prototype.handleKeydownEvent=function(t){try{var e=t.keyCode,i=this.event.getTargetIterator(t,this.render);if(t.target===this.render&&9===e&&!t.shiftKey)if(a.f.preventDefault(t),this.windows.length>0){var n=document.getElementById(this.id+"_nameLayer_"+this.windows[0].id);n.setAttribute("tabindex","0"),n.focus(),this.focusWindowId=this.windows[0].id}else this.dom.iconVertical.focus();if(this.getSelectedIndex()>=0&&!0===t.shiftKey&&(37===e||38===e||39===e||40===e))return void this._keydownMoveWindow(i.getElement(),e)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleFocusInEvent=function(t){try{if("cascade"===this.arrangeHistory)for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2window")){var i=e.getElement(),n=i&&this.getWinInfoObj(i.id);if(n){var o=n.window;(parseInt(o.getStyle("z-index"),10)||0)<this.maxZIndex&&this.increaseZIndex(o)}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleNameContainerKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode,n=this.event.getTargetIterator(t);this.getSelectedIndex();for(this.focusWindowId&&(e=this._findNameLayerLastIcon(this.focusWindowId));n.next();){var o=r.Z.getDataPrefix("elementInfo"),d=r.Z.getDataPrefix("refId");if("nameLayer"===n.getElement().getAttribute(o)&&n.match("w2windowContainer_nameLayer")){var l=n.getElement().getAttribute(d);switch(i){case 9:if(t.shiftKey){if(this.windows.length>0){for(var h=0;h<this.windows.length;h++)if(this.windows[h].id===l&&this.windows[h-1]){g=this.windows[h-1].id;break}this._selectedNameLayerAddTabIndex(l,!1),void 0!==g?(this._selectedNameLayerAddTabIndex(g,!0),this.focusWindowId=g):(a.f.preventDefault(t),this.render.focus())}}else if(!0===this.options.useCloseButton||!0===this.options.useFixButton)this._selectedNameLayerAddTabIndex(l,!0);else{var w;for(h=0;h<this.windows.length;h++)if(this.windows[h].id===l&&this.windows[h+1]){w=this.windows[h+1].id;break}if(void 0!==typeof w&&(this._selectedNameLayerAddTabIndex(l,!1),this._selectedNameLayerAddTabIndex(w,!0)),
l===this.windows[this.windows.length-1].id)if(null!==this.nowWindow)WebSquare.event.preventDefault(t),(c=document.getElementById(this.nowWindow)).focus()}break;case 32:case 13:a.f.preventDefault(t);var c,u={};u.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(l,this.options.stopMinimizeOnNameLayer,u);for(h=0;h<this.windows.length;h++)this.windows[h].id===l&&this.setFocus(h);if((c=document.getElementById(l)).setAttribute("tabindex","0"),c.focus(),this.focusWindowId=l,void 0===this.arrangeHistory)this.visibleWindows.length>0&&this.visibleWindows.splice(0),this.visibleWindows.push(l);else{var p=this._findBehindWindow(l);for(h=0;h<p.length;h++){var m=this.visibleWindows.indexOf(p[h].value);if(-1!=m){this.visibleWindows.splice(m,1,l);break}}}this._selectedNameLayerAddTabIndex(l,!1)}}if(e&&n.match(e.className)&&9===i&&!t.shiftKey&&this.windows.length>0){var g;for(d=r.Z.getDataPrefix("refId"),l=n.getElement().getAttribute(d),h=0;h<this.windows.length;h++)if(this.windows[h].id===l&&this.windows[h+1]){g=this.windows[h+1].id;break}this._selectedNameLayerAddTabIndex(l,!1),void 0!==g&&(this._selectedNameLayerAddTabIndex(g,!0),this.focusWindowId=g)}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleControlKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.event.getTargetIterator(t);function o(i,n){13!==e&&32!==e||(a.f.preventDefault(t),i.click())}for(;i.next();){if(i.match("w2windowContainer_controlIcon_vertical")){if(9===e&&t.shiftKey)if(a.f.preventDefault(t),this.windows.length>0){var n=this.windows[this.windows.length-1].id;this._selectedNameLayerAddTabIndex(n,!0),this._findNameLayerLastIcon(n).focus(),this.focusWindowId=n}else this.render.focus();13!==e&&32!==e||this.nowWindow&&o(this.dom.iconVertical,this.nowWindow),i.stop()}i.match("w2windowContainer_controlIcon_horizontal")&&(13!==e&&32!==e||this.nowWindow&&o(this.dom.iconHorizontal,this.nowWindow),i.stop()),i.match("w2windowContainer_controlIcon_cascade")&&(13!==e&&32!==e||this.nowWindow&&o(this.dom.iconCascade,this.nowWindow),i.stop()),i.match("w2windowContainer_controlIcon_sequential")&&(13!==e&&32!==e||this.nowWindow&&o(this.dom.iconSequential,this.nowWindow),i.stop()),i.match("w2windowContainer_controlIcon_windowList")&&(9!==e||t.shiftKey||this.windows.length>0&&(this.focusWindowId=this.windows[0].id))}i=null}catch(t){s.Y.printStackTrace(t,null,this)}}}}]);