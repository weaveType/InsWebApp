"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[4019],{4019:(t,e,i)=>{i.r(e),i.d(e,{inputCalendar:()=>p});var a=i(1570),s=i(8548),o=i(866),n=i(2847),r=i(6323),l=i(2725),h=i(3885),d=i(5217),p=function(t,e,i){this.defaultOptions.yearSuffix=l.B.getMessage("Calendar_yearsuffix"),h.q.call(this,t,e,i)};a.q.extend(p.prototype,h.q.prototype),a.q.extend(p.prototype,d.G.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.inputCalendar",pluginName:"inputCalendar",userEvents:["onfocus","onblur","onchange","oniconclick","ondateselect","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","onkeydown","onkeyup","onkeypress"],serializable:!0,useConfig:!0,delimiter:"-",ioFormat:"",calendarDisplayFormat:"",calendarDisplayFormatFunc:"",displayFormat:"",displayFormatter:"",displayFormatFunc:"",applyFormat:"display",monthNames:"",monthNamesForYearMonthType:"",yearSuffix:"",calendarValueType:"yearMonthDate",calendarImage:"",calendarImageOver:"",calendarClass:"class1",chooseOption:!1,direction:"auto",holiday:"",holidayRef:"",validCheck:!1,dateValidCheck:"",dateValidSet:!1,dateValidSetCustom:!1,disableDateValidSet:!1,wmode:!1,readOnlyClass:"w2inputCalendar_readOnly",imageReadOnlyClass:"w2inputCalendar_img_readOnly",handleIconClick:null,pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",pickerStatusRefresh:!1,setCurrentDate:!1,enabledDate:"*",disabledDate:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessageFunc:"",displaymessage:!1,keepFocusSelect:!1,innerHeight:"17px",inputReadOnly:!1,useUnlimitedYear:!0,defaultDate:"",initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,cancelButtonHide:!1,resetButtonShow:!1,footerDiv:!1,renderDiv:!0,focusOnDateSelect:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,focusOnLastYear:!1,alt:"",renderType:"component",useYearSelect:!0,useMonthSelect:!0,useAnchor:!1,useCalendarTabIndex:!0,maxYear:2030,serverSync:!1,serverSyncType:"once",minYear:1978,weekStartsOn:0,displayDayType:"image",fixedDate:"",rightAlign:!1,outsideClickEvent:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",senseReader:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeDate:"",disableAfterDate:"",disableBeforeAfterDate:!1,enabledMonth:"*",disabledMonth:"",disableAfterMonth:"",disableBeforeMonth:"",buttonTitle:"",useMonthYearFormat:!1,keepFixedDate:!1,keepInvalidDate:!1,useButton:!1,placeholder:"",original_placeholder:"",autocomplete:"",showPlaceHolderOnReadOnly:!1,nextTabID:"",autoFocus:!1,validateRef:!1,unformatOnPaste:!1,type:"text",showToday:!0,showCalendarOnFocus:!1,visibleWeekNum:6,nextLastMonthDateSelect:!1,getValueHandler:"",setValueHandler:"",todaySelect:!1,useEditFormat:!1,dayMoveFixed:!1,dateMoveFixed:!1,validateOnInput:!1,validateOnInputMobile:!1,accessibility:!1,useLocale:!1,placeholderLocaleRef:"",placeholderAuto:!1,dateValidCheckType:"",nextTabFocusPosition:0,fixedMonth:!1,preventDeleteByESC:!1},p.prototype.initialize=function(t){try{if(this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,""==this.options.alt&&(this.options.alt=l.B.getMessage("Calendar_open")),this.calendar=null,this.evented=!1,this.formatter=null,this.validator=null,this.sub_validator=null,this._setFocused=!1,this.supportPlaceholder=!1,this.supportAutocomplete=!1,this.realValue="",this._setSetting=!1,this.resizeObj={width:0,height:0},!0===this.options.accessibility&&(this.options.senseReader=!0,this.options.renderType="component",this.options.displayDayType="textNative",this.options.placeholderAuto=!0,this.options.renderDiv=!0,this.options.focusOnOuterDiv=!0,this.options.focusOnStart=!1,this.options.cancelButtonShow=!0,this.options.cancleButtonShow=!0),this.options.senseReader&&(this.options.renderDiv=!0,this.options.useAnchor=!1,this.options.focusOnOuterDiv=!0),
!this.options.renderDiv){var e=this.options.style,i=s.I.makeStyle(e),a=[],n=[];for(var r in i)"position width height left top right bottom display visibility".indexOf(r.toLowerCase())>-1?a.push(r+":"+i[r]):n.push(r+":"+i[r]);WebSquare.cssManager.addConvertedCSS("#"+this.id+" input",n.join(";")),this.options.style=a.join(";")}this.options.autocomplete&&WebSquare.uiplugin.inputCalendar.autocomplete&&(this.supportAutocomplete=!0)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype._initialize=function(){try{var t=this.options.calendarValueType;if(this.options.displayFormatFunc&&!this.options.displayFormat){var e=r.Z.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof e&&(this.options.displayFormat=e.call(this,this.options.calendarValueType))}if(this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var i=r.Z.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof i&&(this.options.calendarDisplayFormat=i.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.displayFormat=s.I.getConfiguration('/WebSquare/inputCalendar/displayFormat[@valueType="'+t+'"]/@defaultValue')),this.options.calendarDisplayFormat||(this.options.calendarDisplayFormat=s.I.getConfiguration('/WebSquare/inputCalendar/calendarDisplayFormat[@valueType="'+t+'"]/@defaultValue')),this.options.ioFormat||(this.options.ioFormat=s.I.getConfiguration('/WebSquare/inputCalendar/ioFormat[@valueType="'+t+'"]/@defaultValue')),this.options.placeholder||(this.options.placeholder=s.I.getConfiguration('/WebSquare/inputCalendar/placeholder[@valueType="'+t+'"]/@defaultValue')),this.options.ioFormat&&(this.options.ioFormat=this.options.ioFormat.match(/([yMdHmS]+)/g).join("")),""==this.options.delimiter){var a=this.options.displayFormat.replace(/[a-zA-Z]/g,"");a.length>0?this.options.delimiter=a.charAt(0):this.options.delimiter="-"}var n="";if("yearMonthDate"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat||(this.options.ioFormat="yyyyMMdd"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat||(this.options.ioFormat="yyyyMM"),n="yyyy"+this.options.delimiter+"MM"):"yearMonthDateHour"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHH"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmm"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmmSS"),n="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"):"year"==this.options.calendarValueType&&(this.options.displayFormat=this.options.displayFormat||"yyyy",this.options.ioFormat||(this.options.ioFormat="yyyy"),n="yyyy"),1==this.options.useEditFormat){var h=n.replace(/[a-zA-Z]/g,"#");this._editFormat=h.split("||")}this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.N.validateInvoker(this.id,this.options),this.sub_validator=new d.N.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,
invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.N.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.N.allowCharCommand("0-9"));var p=0;"yearMonthDate"==this.options.calendarValueType?p=8:"yearMonth"==this.options.calendarValueType?p=6:"yearMonthDateHour"==this.options.calendarValueType?p=10:"yearMonthDateTime"==this.options.calendarValueType?p=12:"yearMonthDateTimeSec"==this.options.calendarValueType?p=14:"year"==this.options.calendarValueType&&(p=4),this.invalidMessage=l.B.getMessage("IC_invalidCalendarSelect")||"Invalid date format","all"==this.options.applyFormat&&this.options.displayFormat&&(p=this.options.ioFormat.length),this.options.maxlength=p,this.options.minlength=p,this.options.autoFocus&&(this.options.maxByteLength=p),this.sub_validator.addCommand(new d.N.maxLengthCommand(p)),this.sub_validator.addCommand(new d.N.minLengthCommand(p)),this.options.validCheck&&""===this.options.dateValidCheck?this.options.dateValidCheck="true":""===this.options.dateValidCheck&&(this.options.dateValidCheck="false"),!this.options.placeholder&&this.options.placeholderAuto&&(this.options.placeholder=n),this.options.placeholder&&(WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.original_placeholder=this.options.placeholder,this.setPlaceholder(this.options.placeholder)),this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!0),this._skipDateValidSet=!1,this._editTokens={"#":{pattern:/\d/}}}catch(t){o.Y.printStackTrace(t,null,this)}},p.placeholder="string"==typeof document.createElement("input").placeholder,p.autocomplete="string"==typeof document.createElement("input").autocomplete,p.prototype.toHTML=function(){try{var t="";(this.options.inputReadOnly||this.options.showCalendarOnFocus)&&(t=" readOnly ");var e,i=[],s=""==this.options.style?"":"style='"+this.options.style+"'",n=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",l=""==this.options.title?"":"title='"+this.options.title+"'",h=""==this.options.innerHeight?"":"style='height:"+this.options.innerHeight+"'",d=""==this.options.alt?"":"alt='"+this.options.alt+"'",p=this.options.buttonTitle?" title='"+this.options.buttonTitle+"'":"";this.options.useLocale&&this.options.placeholderLocaleRef&&(e=this.getLocaleValue(this.options.placeholderLocaleRef));var u=e||this.options.placeholder,c=""==u?"":" placeholder='"+u+"'",y=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",m="text"==this.options.type?"":" type ='"+this.options.type+"'",f=this.options.className?" "+this.options.className:"",v=""==this.options.calendarImage?a.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;if(0==this.options.renderDiv)i.push("<div id='"+this.id+"' "+s+" class='w2inputCalendar w2inputCalendar_type_"+this.options.calendarValueType+"'>"),i.push("<table class='w2inputCalendar_table'><tr>"),i.push("<td class='w2inputCalendar_col_input'><input "+h+" id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_input"+f+"' "+t+" "+m+" "+l+" "+n+" "+c+" "+y+" /></td>"),i.push("<td class='w2inputCalendar_col_img'>"),1==this.options.useAnchor&&i.push("<a id='"+this.id+"_a' href='#' class='w2inputCalendar_a' role='button' aria-haspopup='true' aria-owns='"+this.id+"_calendar' >"),i.push("<img id='"+this.id+"_img' class='w2inputCalendar_img'"+p+" src='"+v+"' "+d+" "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?n:"")+" />"),1==this.options.useAnchor&&i.push("</a>"),i.push("</td></tr></table>"),i.push("</div>");else if(1==this.options.renderDiv){if(v=""==this.options.calendarImage?"":" style='background-image:url("+v+")'",i.push("<div id='"+this.id+"' "+s+" class='w2inputCalendar_div"+f+" w2inputCalendar_type_"+this.options.calendarValueType+"'>"),i.push("<div id='"+this.id+"_div_input' class='w2inputCalendar_div_input' >"),
i.push("<input id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_divInput ' "+t+" "+m+" "+l+" "+n+" "+c+" "+y+" />"),i.push("</div>"),i.push("<div id='"+this.id+"_div_img' class='w2inputCalendar_div_img' >"),this.options.senseReader){var g=r.Z.isMobile()?this.id+"_calendar_start":this.id+"_calendar";i.push("<a id='"+this.id+"_img'"+p+"role='button'"+v+"class='w2inputCalendar_button w2inputCalendar_button_native' href='#"+g+"' >"+this.options.alt+"</a>")}else i.push("<button type='button' id='"+this.id+"_img'"+p+v+" class='w2inputCalendar_button' "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?n:"tabIndex='-1'")+" >"+this.options.alt+"</button>");i.push("</div>"),i.push("</div>")}return i.join("")}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){o.Y.printStackTrace(t)}},p.prototype.setSetting=function(){try{if(this.render&&1==this.options.renderDiv){var t,e,i=WebSquare.style.getStyle(this.render,"width"),a=WebSquare.style.getStyle(this.dom.divImg,"width");if(a=a.lastIndexOf("px")>-1?Math.ceil(1*a.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-a-s;else if(i.lastIndexOf("%")>-1){if(T=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,n=WebSquare.style.getStyle(T,"padding-left"),l=WebSquare.style.getStyle(T,"padding-right"),h=WebSquare.style.getStyle(T,"border-left-width"),d=WebSquare.style.getStyle(T,"border-right-width");n=n.lastIndexOf("px")>-1?parseInt(n,10):0,l=l.lastIndexOf("px")>-1?parseInt(l,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,d=d.lastIndexOf("px")>-1?parseInt(d,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(T.offsetWidth-(n+l+h+d))*parseInt(i.wq_replaceAll("%",""),10)/100-a-s}}var p=WebSquare.style.getStyle(this.dom.input,"border-right-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var u=WebSquare.style.getStyle(this.dom.input,"border-left-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var c=WebSquare.style.getStyle(this.dom.input,"border-top-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var y=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");y=(y=1*y.wq_replaceAll("px",""))>1?parseInt(y,10):Math.ceil(y);var m=WebSquare.style.getStyle(this.dom.input,"padding-right");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-left");f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var v=WebSquare.style.getStyle(this.dom.input,"padding-top");v=(v=1*v.wq_replaceAll("px",""))>1?parseInt(v,10):Math.ceil(v);var g=WebSquare.style.getStyle(this.dom.input,"padding-bottom");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g),t=i-(p+u+m+f),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px");var b=WebSquare.style.getStyle(this.render,"height");if((b="auto"==b?this.render.offsetHeight+"px":b).lastIndexOf("px")>-1){var S=b.wq_replaceAll("px",""),_=parseInt(S,10),C=parseFloat(S);b=_,C-_>.9&&(b=Math.ceil(S))}else if(b.lastIndexOf("%")>-1){var T;if(T=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))b=T.offsetHeight*parseInt(b.wq_replaceAll("%",""),10)/100}e=b-(c+y+v+g),(r.Z.isIE(6)||r.Z.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(b,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px")}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setPreAction=function(){try{if(1==this.options.renderDiv){
if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divImg=this.getElementById(this.id+"_div_img"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}h.q.addCheckResize(this.uuid,"checkResize")}this.dom.input=this.getElementById(this.id+"_input"),this.dom.img=this.getElementById(this.id+"_img"),this._initialize()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.setSetting(),this.setInputSize(),this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.useMonthYearFormat&&(t=WebSquare.date.getIOFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.options.validCheck&&(t=this.validator.validateString(t),t=this.sub_validator.validateString(t)),this.setValueNM(t)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass(this.dom.input,"w2inputCalendar_placeholder")),r.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0;break}e=null;var i=WebSquare.getBody().getLayerListener().layers[this.id].component,a={};i.id&&(a[i.id]=!0),WebSquare.getBody().getLayerListener().hideAll(a),n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showCalendar,fnHide:this._hideCalendar,event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.options.inputReadOnly||(s.I.browserCheck.ieAllVersion?(this.event.addListener(this.dom.input,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusEvent)),"select"===this.options.editType&&this.event.addListener(this.dom.input,"onfocus",(function(t){this.select()}))):this.event.addListener(this.dom.input,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent))),this.options.unformatOnPaste&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),(this.options.validateOnInput||1==this.options.useEditFormat)&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),
this.options.setCurrentDate&&(this.options.useMonthYearFormat?"yearMonthDate"!=this.options.calendarValueType&&"yearMonth"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this._setValue(WebSquare.date.getFormattedDate(new Date,this.options.ioFormat)):"yearMonthDate"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMdd")):"yearMonth"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMM")):"yearMonthDateHour"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHH")):"yearMonthDateTime"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmm")):"yearMonthDateTimeSec"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmmSS")):"year"==this.options.calendarValueType&&this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyy"))),this.options.mandatory&&this.onPropertyChange("mandatory",r.Z.getBoolean(this.options.mandatory)),this.options.renderDiv&&this.options.senseReader&&this.options.focusOnOuterDiv)null!=document.getElementById(this.id+"_img")&&n.f.addListener(document.getElementById(this.id+"_img"),"onclick",(function(t){n.f.preventDefault(t)}))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.onComplete=function(){try{if(this.options.handleIconClick){var t=null;try{t=r.Z.getGlobalFunction(this.options.handleIconClick,this.scope_id)}catch(t){$l("no function for handleIconClick : "+this.options.handleIconClick+"["+this.id+"]")}"function"==typeof t&&this.addEvent("oniconclick",t)}h.q.prototype.onComplete.call(this)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this._getValue(),e=this.modelControl.getData();if(this.options.validateRef&&""!=e&&this.options.validCheck&&!r.Z.getBoolean(this.options.dateValidSet)){var i=this.validator.validate(e);if(i&&r.Z.getBoolean(this.options.dateValidCheck)){var a={dateValidCheckType:this.options.dateValidCheckType};i=this.sub_validator.validate(e,a)}if(!i)return alert(this.invalidMessage),this._setValue("",{skipValidate:!0}),void this.focus()}this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&n.f.fireEvent(this,"onchange")}this.broadcast({linkedDataList:["refresh"]})}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setInputSize=function(){try{var t=this.getStyle("height"),e={paddingTop:parseInt(r.Z.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(r.Z.getStyleProperty(this.dom.input,"padding-bottom"))||0,borderTopWidth:parseInt(r.Z.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(r.Z.getStyleProperty(this.dom.input,"border-bottom-width"))||0};if(t.indexOf("px")>-1&&1!=this.options.renderDiv){var i=(t=parseInt(t))-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth);this.dom.input.style.height=i+"px"}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setSkin=function(t){try{this.options.calendarClass=t,this.calendar&&this.calendar.changeClass(this.calendar.render,"w2calendar_"+this.calendar.options.calendarClass,"w2calendar_"+t)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setVerticalAlign=function(){try{if(s.I.browserCheck.ie){var t=parseInt(r.Z.getStyleProperty(this.dom.input,"height"))||0;this.dom.input.style.lineHeight=t+"px"}else s.I.browserCheck.moz}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setMinYear=function(t){try{if(t&&t>0&&(this.options.minYear=t,this.calendar)){var e=this.options.maxYear;this.calendar.updateYearSelect(t,e)}}catch(t){
o.Y.printStackTrace(t,null,this)}},p.prototype.setMaxYear=function(t){try{if(t&&t<1e4&&(this.options.maxYear=t,this.calendar)){var e=this.options.minYear;this.calendar.updateYearSelect(e,t)}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setValue=function(t){try{var e=this.options.setValueHandler;if(!e)return this._setValue(t);var i=r.Z.getGlobalFunction(e,this.scope_id);if("function"==typeof i)return i.call(this,t)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setValueNM=function(t,e){try{if(r.Z.isNull(t))return;t=t.toString(),e&&!0===e.noFormat?this.dom.input.value=t:(t=document.activeElement==this.dom.input?t:this.formatter.format(t),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass(this.dom.input,"w2inputCalendar_placeholder")||this.addClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=this.options.placeholder):(this.removeClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=t):this.dom.input.value=t),this.realValue=t}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype._setValue=function(t,e){try{t=t.toString(),e&&!0===e.skipValidate||(t=this.validator.validateString(t),t=this.sub_validator.validateString(t));var i=this._getValue();if(""!=t&&this.options.validCheck&&!r.Z.getBoolean(this.options.dateValidSet)){var a=this.validator.validate(t);if(a&&r.Z.getBoolean(this.options.dateValidCheck)){e={dateValidCheckType:this.options.dateValidCheckType};a=this.sub_validator.validate(t,e)}if(!a){if(alert(this.invalidMessage),!1===this.options.keepInvalidDate&&this._setValue("",{skipValidate:!0}),!0===this.options.keepInvalidDate&&(r.Z.isChrome()||r.Z.isFF())){var s=this;setTimeout((function(){s._setFocused=!1,s.dom.input.focus()}),1)}else this.focus();return}}if(this.setValueNM(t,e),this.options.useMonthYearFormat&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.modelControl.setData(t),i==this._getValue()||this.options.setCurrentDate||n.f.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),i!==t){var l=this.uuid;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:t},{onRestore:function(t){WebSquare.idCache[l]._setValue(t.value,{skipValidate:!0})}})}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getValue=function(){try{var t=this.options.getValueHandler;if(!t)return this._getValue();var e=r.Z.getGlobalFunction(t,this.scope_id);if("function"==typeof e)return e.call(this)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype._getValue=function(){try{var t="";return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass(this.dom.input,"w2inputCalendar_placeholder")?"":this.dom.input.value,this.formatter.unformat(t)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getTitle=function(){return this.dom.input.getAttribute("title")},p.prototype.makeCalendar=function(){try{var t,e=this,i=this.uuid,a=this.options.ioFormat.match(/([yMdHmS]+)/g).join(""),s=this.org_id||this.id;t="yearMonth"==this.options.calendarValueType&&this.options.monthNamesForYearMonthType?this.options.monthNamesForYearMonthType:this.options.monthNames;var r={pluginName:"calendar",className:"w2inputCalendar_calendar",calendarClass:this.options.calendarClass,monthNames:t,yearSuffix:""===this.options.yearSuffix?"$blank":this.options.yearSuffix,calendarValueType:this.options.calendarValueType,chooseOption:this.options.chooseOption,holiday:this.options.holiday,holidayRef:this.options.holidayRef,wmode:this.options.wmode,delimiter:this.options.delimiter,dateFormat:a,displayFormat:this.options.calendarDisplayFormat,useUnlimitedYear:this.options.useUnlimitedYear,selectUnlimitedYear:this.options.selectUnlimitedYear,cancleButtonShow:this.options.cancleButtonShow,cancelButtonHide:this.options.cancelButtonHide,
resetButtonShow:this.options.resetButtonShow,footerDiv:this.options.footerDiv,focusOnOuterDiv:this.options.focusOnOuterDiv,renderType:this.options.renderType,mobileRenderType:this.options.mobileRenderType,summary:this.options.summary,caption:this.options.caption,title:this.options.title+" "+l.B.getMessage("Calendar_name"),backlink:1==this.options.useAnchor?this.id+"_input":"",useYearSelect:this.options.useYearSelect,useMonthSelect:this.options.useMonthSelect,maxYear:this.options.maxYear,minYear:this.options.minYear,weekStartsOn:this.options.weekStartsOn,displayDayType:this.options.displayDayType,keepFocusSelect:this.options.keepFocusSelect,outsideClickEvent:this.options.outsideClickEvent,skipConfirm:this.options.skipConfirm,skipConfirmOnly:this.options.skipConfirmOnly,serverSync:this.options.serverSync,serverSyncType:this.options.serverSyncType,topLayout:this.options.topLayout,showToday:this.options.showToday,visibleHourList:this.options.visibleHourList,visibleMinList:this.options.visibleMinList,visibleSecList:this.options.visibleSecList,disableBeforeToday:this.options.disableBeforeToday,disableAfterToday:this.options.disableAfterToday,disableBeforeDate:this.options.disableBeforeDate,disableAfterDate:this.options.disableAfterDate,disableBeforeAfterDate:this.options.disableBeforeAfterDate,disabledMonth:this.options.disabledMonth,disableBeforeMonth:6==this.options.disableBeforeMonth.length?this.options.disableBeforeMonth:"",disableAfterMonth:6==this.options.disableAfterMonth.length?this.options.disableAfterMonth:"",pickerType:this.options.pickerType,dynamicHeaderOrder:this.options.dynamicHeaderOrder,fixPickerStatus:this.options.fixPickerStatus,keepFixedDate:this.options.keepFixedDate,useMonthYearFormat:this.options.useMonthYearFormat,useButton:this.options.useButton,enabledDate:this.options.enabledDate,disabledDate:this.options.disabledDate,senseReader:!0===this.options.senseReader,visibleWeekNum:this.options.visibleWeekNum,nextLastMonthDateSelect:this.options.nextLastMonthDateSelect,ioFormat:this.options.ioFormat,todaySelect:this.options.todaySelect,dayMoveFixed:this.options.dayMoveFixed,dateMoveFixed:this.options.dateMoveFixed,accessibility:this.options.accessibility,fixedMonth:this.options.fixedMonth},h=WebSquare.controlFactory.createControl(s+"_calendar",r,null,this.scope_obj,!0,this.parentFrame);return h.options.xmlEvents=[{name:"ondateselect",action:"script",param:{handler:function(t){var i=e.options.skipConfirm||e.options.skipConfirmOnly,a="yearMonthDateHour"!=e.options.calendarValueType&&"yearMonthDateTime"!=e.options.calendarValueType&&"yearMonthDateTimeSec"!=e.options.calendarValueType;if(i||a){var s=e._getValue();e.endEdit();var o=e._getValue(),r=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(e,"ondateselect",this.getFormattedValue(),r),s!=o&&n.f.fireEvent(e,"onafterviewchange",{oldValue:s,newValue:o})}else{r=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(e,"ondateselect",this.getFormattedValue(),r)}}}},{name:"onyearselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"year"==e.options.calendarValueType&&e.endEdit();var a=WebSquare.idCache[i];n.f.fireEvent(a,"onyearselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onmonthselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"yearMonth"==e.options.calendarValueType&&e.endEdit();var a=WebSquare.idCache[i];n.f.fireEvent(a,"onmonthselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onconfirm",action:"script",param:{handler:function(t){var i=this.getFormattedValue(),a=e._getValue(),s=this.options.disableBeforeDate,o=this.options.disableAfterDate;i&&(s&&parseInt(i.substr(0,8),10)<parseInt(s.substr(0,8),10)&&(i=s+i.substring(8)),o&&parseInt(i.substr(0,8),10)>parseInt(o.substr(0,8),10)&&(i=o+i.substring(8))),e._setValue(i,{
skipValidate:!0});var r=e._getValue();a!=r&&(n.f.fireEvent(e,"onconfirm"),n.f.fireEvent(e,"onviewchange",{oldValue:a,newValue:r}),n.f.fireEvent(e,"onafterviewchange",{oldValue:a,newValue:r})),e.hideCalendar(),e.dom.input.focus(),"select"==e.options.editType&&e.dom.input.select()}}},{name:"onoutsideclick",action:"script",param:{handler:function(t){var i=this.getFormattedValue();e._setValue(i,{skipValidate:!0})}}},{name:"oncancel",action:"script",param:{handler:function(t){e.hideCalendar(),(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus(),n.f.fireEvent(e,"oncancel")}}},{name:"onreset",action:"script",param:{handler:function(t){e.setValue(""),e.hideCalendar(),(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus()}}}],h.writeTo(WebSquare.getBody(),null,this.parentFrame),h.activate(),h.render&&(h.render.setAttribute("role","dialog"),this.event.addListener(h.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent))),this.addControl(h),h}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.showCalendar=function(){try{WebSquare.getBody().getLayerListener().show(this.id),"today"!=this.options.fixedDate||this.options.keepFixedDate||this.calendar.setInitValue(this._getValue()),n.f.fireEvent(this,"onafteropen")}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype._showCalendar=function(){try{if(this.calendar||(this.calendar=this.makeCalendar()),this.calendar){var t,e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight+5,a=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,n=parseInt(this.calendar.getStyle("width"))+parseInt(this.calendar.getStyle("border-right-width"))+parseInt(this.calendar.getStyle("border-left-width"));t="number"==typeof WebSquare.BootLoader.fullViewRatio&&1!==WebSquare.BootLoader.fullViewRatio?document.body.clientWidth||document.documentElement.clientWidth/WebSquare.BootLoader.fullViewRatio:document.documentElement.clientWidth||document.body.clientWidth,this.options.rightAlign||e+n>a+t&&(e=a+t-n-10),this.calendar.show("block",this.uuid);var r=(document.documentElement.scrollHeight||document.body.scrollHeight)-this.calendar.render.offsetHeight;i>r&&(i=r),this.options.rightAlign&&((e=e-(n-this.render.offsetWidth)-23)<0&&(e=WebSquare.style.getAbsoluteLeft(this.render)),e+n>a+t&&(e=a+t-n-23)),this.calendar.setPosition(e,i);var l=this.options.direction;if("auto"==l){var h=WebSquare.style.getAbsoluteTop(this.render)-s,d=document.documentElement.clientHeight-(h+this.render.offsetHeight),p=this.calendar.render.offsetHeight;d<p&&h>p&&(l="up")}"up"==l&&(i=WebSquare.style.getAbsoluteTop(this.render)-this.calendar.render.offsetHeight-5,this.calendar.setPosition(e,i)),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.calendar.render);var u=this._getValue(),c="";if(""!=u){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDate"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u);else if("yearMonth"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("year"==this.options.calendarValueType)c=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("yearMonthDateHour"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,u);var y=(v=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);this.calendar.gotoTime(y)}else if("yearMonthDateTime"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,u);y=(v=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);var m=v.substr(2);this.calendar.gotoTime(y,m)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){
c=WebSquare.text.unformatDate(this.options.ioFormat,u);y=(v=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2),m=v.substr(2,2);var f=v.substr(4);this.calendar.gotoTime(y,m,f)}this.calendar.gotoCalendar(c)}else if(""!==this.options.defaultDate){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDateTimeSec"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);y=(v=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=v.substr(2,2),f=v.substr(4);this.calendar.gotoTime(y,m,f)}else if("yearMonthDateTime"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);y=(v=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=v.substr(2);this.calendar.gotoTime(y,m)}else if("yearMonthDateHour"==this.options.calendarValueType){c=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);var v;y=(v=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2);this.calendar.gotoTime(y)}this.calendar.gotoCalendar(this.options.defaultDate)}else this.calendar.gotoToday();this.options.focusOnOuterDiv&&(this.options.focusOnLastYear?this.calendar.getElementById(this.calendar.id+"_last_year").focus():this.calendar.render.focus()),this.calendar.render.setAttribute("aria-modal","true")}if(this.options.resetButtonShow){var g=this.calendar.render,b=g.getElementsByClassName("w2calendar_footer")[0],S=b.children,_=g.getElementsByClassName("w2calendar_wrap")[0].offsetWidth,C="yearMonthDate"==this.options.calendarValueType?"w2calendar_date_reset":"w2calendar_time_reset",T=g.getElementsByClassName(C)[0],F=b.offsetWidth;if(this.options.accessibility){F=0;for(var M=0;M<S.length;M++)F+=S[M].offsetWidth}F>_&&(T.style.display="none")}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.hideCalendar=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype._hideCalendar=function(){try{this.calendar&&(!0===this.options.pickerStatusRefresh&&this.calendar._pickerStatusRefresh(),this.calendar.hide(),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.calendar.id),this.calendar.render.setAttribute("aria-modal","false"))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.toggle=function(){try{this.calendar&&"none"!=this.calendar.getStyle("display")?this.hideCalendar():this.showCalendar()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.focus=function(t){try{this._setFocused=!0,this.dom.input.focus();var e=Number(this.options.nextTabFocusPosition);e>=1&&t&&/^(on)*keydown$|^(on)*keyup$/.test(t.type)&&WebSquare.text.setCaretPos(this.dom.input,e-1)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.blur=function(){try{this.dom.input.blur()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.select=function(){try{this.dom.input.select()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.dom.input.setAttribute("disabled","disabled"):this.dom.input.removeAttribute("disabled");break;case"readOnly":1==e?(this.addClass(this.dom.input,this.options.readOnlyClass),this.addClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.setAttribute("readonly","readonly")):(this.removeClass(this.dom.input,this.options.readOnlyClass),this.removeClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.removeAttribute("readonly"));break;case"mandatory":1==e?this.addClass(this.render,"w2inputCalendar_mandatory"):this.removeClass(this.render,"w2inputCalendar_mandatory")}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.disableValidate=function(t){try{if(!t||8!==t.length)return
;var e=this.options.disableBeforeDate,i=this.options.disableAfterDate,a=!1;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var s=this.options.ioFormat;i&&(i=WebSquare.text.unformatDate(s.substr(0,8),i)),e&&(e=WebSquare.text.unformatDate(s.substr(0,8),e)),t=WebSquare.text.unformatDate(s.substr(0,8),t)}return t=parseInt(t),e=parseInt(e),i=parseInt(i),(""!==this.options.disableBeforeDate&&t<e||""!==this.options.disableAfterDate&&t>i)&&(a=!0),this.options.disabledDate.match(t)&&(a=a||!0),a}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.validate=function(){try{var t="";t=1==this.options.useEditFormat?this._editValue:this._getValue();var e=this.validator.validate(t);if(e&&""!=t&&(r.Z.getBoolean(this.options.dateValidCheck)||r.Z.getBoolean(this.options.dateValidSet))){var i={dateValidCheckType:this.options.dateValidCheckType};e=this.sub_validator.validate(t,i)}if(0==e&&!r.Z.getBoolean(this.options.dateValidSet))if(r.Z.isChrome()||r.Z.isFF()){var a=this;setTimeout((function(){a.focus()}),1)}else this.focus();return e}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this._getValue()&&n.f.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]})}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setInputReadOnly=function(t){try{return r.Z.getBoolean(t)?(this.dom.input.readOnly=!0,!0):(this.dom.input.readOnly=!1,!1)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setDisabled=function(t){try{if((t=r.Z.getBoolean(t))&&(this.options.placeholder||this.options.original_placeholder)){var e=this.options.placeholder||this.options.original_placeholder;this.setPlaceholder(""),this.options.original_placeholder=e}!0!==a.q.dataPrefix&&WebSquare.xfControl.prototype.setDisabled.call(this,t);var i=this.options.useAnchor&&!this.options.renderDiv?document.getElementById(this.id+"_a"):document.getElementById(this.id+"_img");t?(this.options.disabled=t,this.dom.input.setAttribute("disabled","disabled"),!0!==a.q.dataPrefix&&i.setAttribute("disabled","disabled"),this.addClass(this.dom.input,"w2input_disabled"),this.addClass(this.dom.img,"w2button_disabled"),this.dom.img.setAttribute("tabindex",-1)):(this.options.disabled=t,this.dom.input.removeAttribute("disabled"),!0!==a.q.dataPrefix&&i.removeAttribute("disabled"),this.removeClass(this.dom.input,"w2input_disabled"),this.removeClass(this.dom.img,"w2button_disabled"),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.dom.img.removeAttribute("tabindex"))}catch(t){o.Y.printStackTrace(t)}return t},p.prototype.setReadOnly=function(t){try{if(t=r.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,!0===a.q.dataPrefix?this.onPropertyChange("readOnly",r.Z.getBoolean(t)):this.setProperty("readOnly",t),(r.Z.isIE(6)||r.Z.isIE(7))&&this.setInputReadOnly(!0)}else this.options.readOnly=t,!0===a.q.dataPrefix?this.onPropertyChange("readOnly",r.Z.getBoolean(t)):this.setProperty("readOnly",t),!0===this.options.inputReadOnly?this.setInputReadOnly(!0):(r.Z.isIE(6)||r.Z.isIE(7))&&this.setInputReadOnly(!1),
(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){o.Y.printStackTrace(t,null,this)}return t},p.prototype.handleClickEventDocument=function(t){try{this.event&&!this.event.isMine(t,this.render)&&this.hideCalendar()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0,"select"!==this.options.editType||s.I.browserCheck.ieAllVersion||e.getElement().select();break}if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_a")||e.match("w2inputCalendar_button")){if(0==n.f.fireEvent(this,"oniconclick"))continue;"native"==this.options.renderType?this.showCalendar():this.toggle(),1==this.options.useAnchor&&n.f.stopEvent(t);break}}e=null}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{n.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button")){this.addClass(e.getElement(),"w2inputCalendar_img_over");var i=""==this.options.calendarImageOver?a.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar_over.gif":this.options.calendarImageOver;e.match("w2inputCalendar_button")?this.options.calendarImage&&(e.getElement().style.backgroundImage="url("+i+")"):e.getElement().src=i}e=null}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{n.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button"))if(this.removeClass(e.getElement(),"w2inputCalendar_img_over"),e.match("w2inputCalendar_button"))""===this.options.calendarImage?e.getElement().style.backgroundImage="":e.getElement().style.backgroundImage="url("+this.options.calendarImage+")";else{var i=""==this.options.calendarImage?a.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;e.getElement().src=i}e=null}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleFocusEvent=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),1==this.dom.input.readOnly)return this.options.showCalendarOnFocus&&(this._showCalendarOnFocus&&this.toggle(),this._showCalendarOnFocus=!0),void n.f.stopEvent(t);this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value="",this.removeClass(this.dom.input,"w2inputCalendar_placeholder")),0==this.evented&&(this.evented=!0,this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),0==this.options.useEditFormat&&this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),r.Z.isMobile()&&this.options.validateOnInputMobile?this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.validateOnInputMobile)):this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent))),this.addClass(this.dom.input,"w2inputCalendar_focus");var e=this._getValue();if("all"==this.options.applyFormat)this.dom.input.value=this.formatter.format(e,!0);else if(1==this.options.useEditFormat){var i=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=i.value}else this.dom.input.value=e,0==this._setFocused&&this.select(),this._setFocused=!1;var a=this,s=WebSquare.historyManager.get(this.options.pluginName,this.id);if(r.Z.getBoolean(this.options.dateValidSet)&&this.dom.input.value&&!this.validate()&&(e=s.value),this.options.disableDateValidSet){var l=this._getValue();this.disableValidate(l)||(e=l)}WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{onRestore:function(t){a._setValue(t.value,{skipValidate:!0})}}),n.f.fireEvent(this,"onfocus"),
"select"===this.options.editType&&this.select()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleBlurEvent=function(t){try{this.removeClass(this.dom.input,"w2inputCalendar_focus");var e,i=WebSquare.historyManager.get(this.options.pluginName,this.id),a=this._getValue();if(e=this.parentControl&&this.parentControl.options&&("grid"===this.parentControl.options.pluginName||"gridView"===this.parentControl.options.pluginName)?a:this.validator.validateString(a),a!=(e=this.sub_validator.validateString(e))&&(1==this.options.useEditFormat?this.setValueNM(a,{noFormat:!0}):this.setValueNM(e)),this._setValue(e,{skipValidate:!0}),this.formatter.unformat(i.value)!=this._getValue()){n.f.fireEvent(this,"onchange");var s=this._getValue();n.f.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:s})}if(r.Z.getBoolean(this.options.dateValidSet)&&!0!==this._skipDateValidSet&&(this.validate()?this._setValue(e,{skipValidate:!0}):!0!==this.options.dateValidSetCustom&&null!=i.value&&this._setValue(i.value,{skipValidate:!0})),this.options.disableDateValidSet){var l=this._getValue();this.disableValidate(l)?null!=i.value&&this._setValue(i.value,{skipValidate:!0}):this._setValue(l,{skipValidate:!0})}this.hideCalendar(),n.f.fireEvent(this,"onblur"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value;if(1==this.options.useEditFormat){for(var i=this.dom.input.selectionStart,a=0,s=0,r=i-1;r>=0;r--)0==/^[0-9a-zA-Z]/.test(e.charAt(r))&&a++;var l=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=l.value,this._editValue=l.orgValue;for(r=i;r>=0;r--)0==/^[0-9a-zA-Z]/.test(l.value.charAt(r))&&s++;var h=i+(s-a);this.dom.input===document.activeElement&&this.dom.input.setSelectionRange(h,h)}if(1==this.options.validateOnInput){var d=this.validator.validateKeyInput(this.dom.input,e,t);if(d.valid){var p=this.sub_validator.validateKeyInput(this.dom.input,d.str,t);if(p.valid){var u=p.str,c=this.dom.input.id;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(c).value=u})):this.dom.input.value=u}else n.f.stopEvent(t)}else n.f.stopEvent(t)}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;var i=0;if("all"==this.options.applyFormat&&this.options.displayFormat?i=this.options.displayFormat.length:1==this.options.useEditFormat&&(i=this._editFormat[0].length),e==t.which||null==t.which){var a=this._getValue();this.validator.validateKeyPress(this.dom.input,a,t)&&this.sub_validator.validateKeyPress(this.dom.input,a,t,i)||n.f.stopEvent(t)}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.validateOnInputMobile=function(t){try{var e=this.dom.input.value.length-1,i=this.dom.input.value.charCodeAt(e),a={charCode:i,keyCode:i},s=this._getValue(),n=0;"all"==this.options.applyFormat&&this.options.displayFormat?n=this.options.displayFormat.length:1==this.options.useEditFormat&&(n=this._editFormat[0].length),this.validator.validateKeyPress(this.dom.input,s,a)&&this.sub_validator.validateKeyPress(this.dom.input,s,a,n)||(this.dom.input.value=this.dom.input.value.slice(0,e))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handleKeyupEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;if(!0===this._bCtrlKeyup&&(86===e&&(this._keyDownStart=!0),this._bCtrlKeyup=!1),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e||9==e);else if(27==e)!1===this.options.preventDeleteByESC&&(this.dom.input.value="");else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else{var i=this.dom.input.value;if("all"==this.options.applyFormat){i=this._getValue()
;var a,s,n=WebSquare.text.getCaretPos(this.dom.input);a=i.length,i=this.formatter.unformat(i),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),i=this.formatter.format(i,!0),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),s=(i=this.formatter.format(i,!0)).length,this.dom.input.value=i,this.realValue=i,WebSquare.text.setCaretPos(this.dom.input,n+s-a)}t.ctrlKey&&86!==e||17===e||this.autoFocus(t)}this.options.autoFocus&&(this._keyDownStart=!1,17===e&&(this._bCtrlKeyup=!0))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.autoFocus=function(t){try{if(!this.options.autoFocus)return;var e=this.getValue();r.Z.getByteLength(e)===this.options.maxByteLength&&this._autoFocus(t)}catch(t){o.Y.printStackTrace(t)}},p.prototype._autoFocus=function(t){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var e=r.Z.getNextTabbableComp(this.id);e&&this._keyDownStart&&e.focus(t)}else{var i=r.Z.getGlobalFunction(s.I.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof i&&i.call(this,this.id)}}catch(t){o.Y.printStackTrace(t)}},p.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.calendar&&"none"!=this.calendar.getStyle("display")){var i="dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType||"yearMonth"===this.options.calendarValueType);if(37==e||38==e||39==e||40==e)n.f.preventDefault(t);else if(27==e)this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();else if(9==e&&1!=t.shiftKey){for(var a=this.event.getTargetIterator(t,this.calendar.render);a.next();){if(i&&a.match("w2calendar_picker_cell")){!0===this.options.accessibility?this.calendar.render.focus():this.hideCalendar();break}if("yearMonthDate"===this.options.calendarValueType&&0==this.options.cancleButtonShow&&a.match("w2calendar_go_today")||"yearMonthDate"===this.options.calendarValueType&&1==this.options.cancleButtonShow&&a.match("w2calendar_date_cancel")||"yearMonthDateTime"==this.options.calendarValueType&&a.match("w2calendar_time_cancel")||"yearMonthDateHour"==this.options.calendarValueType&&a.match("w2calendar_time_cancel")||"yearMonthDateTimeSec"==this.options.calendarValueType&&a.match("w2calendar_time_cancel")||"yearMonth"==this.options.calendarValueType&&a.match("w2calendar_header_btn_close")||"year"==this.options.calendarValueType&&a.match("w2calendar_header_btn_close_yearType")){n.f.preventDefault(t),!0===this.options.accessibility?this.calendar.render.focus():(this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus());break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}else if(9==e&&1==t.shiftKey){for(a=this.event.getTargetIterator(t,this.calendar.render);a.next();){if(i&&a.match("w2calendar_picker_header_last_entity")){this.hideCalendar();break}if(a.match("w2calendar_header_last_year")){n.f.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}}else if(13==e){for(a=this.event.getTargetIterator(t,this.render);a.next();)if(a.match("w2inputCalendar_img")){n.f.stopEvent(t),this.showCalendar();break}}else if(9==e)for(a=this.event.getTargetIterator(t,this.render);a.next();){if(a.match("w2inputCalendar_input")||a.match("w2inputCalendar_divInput")){if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(n.f.preventDefault(t),s=r.Z.getPreTabbableComp(this.id))return void s.focus(t)}else if(!1===this.options.useCalendarTabIndex)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.f.preventDefault(t),s=r.Z.getNextTabbableComp(this.id))return void s.focus(t)}else if(a.match("w2inputCalendar_img")||a.match("w2inputCalendar_a")||a.match("w2inputCalendar_button")){var s
;if(!t.shiftKey)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.f.preventDefault(t),s=r.Z.getNextTabbableComp(this.id))return void s.focus(t)}}this.options.autoFocus&&(this._keyDownStart=!0),this.dom.input===document.activeElement&&this.options.useEditFormat&&WebSquare.text.deleteMaskChar(t,this,this.dom.input)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.handlePasteEvent=function(t){var e="";if("paste"==t.type){var i;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}var a=i.getData("Text");e=a;r.Z.getBoolean(this.options.unformatOnPaste)&&(e=(e=e.wq_trim()).replace(/[a-zA-Z]+/g,""),e=WebSquare.text.unformatDate2(this.options.displayFormat,e,this.options.ioFormat));var s=n.f.fireEvent(this,"onbeforepaste",a);if(!1!==s){var o;null!=s&&(e=s);var l=WebSquare.text.getSelection(this.dom.input);e=(o="all"==this.options.applyFormat?this._getValue():this.dom.input.value).substring(0,l.start)+e+o.substring(l.end),e=this.validator.validateString(e),e=this.sub_validator.validateString(e),"all"==this.options.applyFormat?this.setValueNM(e):this.setValueNM(e,{noFormat:!0}),n.f.preventDefault(t)}}},p.prototype.setDisplayFormat=function(t){try{if(1==this.options.useEditFormat){var e=t.replace(/[a-zA-Z]/g,"#");this._editFormat=e.split("||")}this.options.displayFormat=t,this.formatter.setMasking(t),this.setValueNM(this._getValue())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getDefaultDate=function(){try{return this.options.defaultDate}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setDefaultDate=function(t){try{if("string"!=typeof t)return;var e=8;if("yearMonthDateTimeSec"==this.options.calendarValueType?e=14:"yearMonthDateTime"==this.options.calendarValueType?e=12:"yearMonthDateHour"==this.options.calendarValueType&&(e=10),t.length!==e)return;this.hideCalendar(),this.options.defaultDate=t}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getAccessibiltyId=function(){try{return this.id+"_input"}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setFormat=function(){try{if("object"==typeof arguments[0]){var t=arguments[0].ioFormat||this.options.ioFormat,e=arguments[0].displayFormat||this.options.displayFormat,i=arguments[0].displayFormatter||this.options.displayFormatter;this.options.useMonthYearFormat=arguments[0].useMonthYearFormat||this.options.useMonthYearFormat,this.options.calendarDisplayFormat=arguments[0].calendarDisplayFormat||this.options.calendarDisplayFormat}else t=arguments[0]||this.options.ioFormat,e=arguments[1]||this.options.displayFormat,i=this.options.displayFormatter;if(this.options.displayFormat=e,this.options.displayFormatter=i,1==this.options.useEditFormat){var a=e.replace(/[a-zA-Z]/g,"#");this._editFormat=a.split("||")}if(t!=this.options.ioFormat){t=t.match(/([yMdHmS]+)/g).join("");var s=this.getFormattedValue(t);if(this.options.ioFormat=t,this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),r.Z.getBoolean(this.options.dateValidCheck)||r.Z.getBoolean(this.options.dateValidSet)){var n=new d.N.dateCommand(this.options.ioFormat);this.sub_validator.removeCommand(n),this.sub_validator.addCommand(n)}this._setValue(s,{skipValidate:!0}),this.calendar&&(this.calendar.remove(),delete this.calendar)}else{s=this._getValue();this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),this.setValueNM(s)}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setIoFormat=function(t,e){try{"object"==typeof t?this.setFormat(t):this.setFormat({ioFormat:t,displayFormat:e})}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setCalendarValueType=function(t,e){try{if(t==this.options.calendarValueType)return!1;this.removeClass("w2inputCalendar_type_"+this.options.calendarValueType),
this.addClass("w2inputCalendar_type_"+t),this.options.calendarValueType=t,(e=e||{}).ioFormat&&(e.ioFormat=e.ioFormat.match(/([yMdHmS]+)/g).join(""));var i="";if("yearMonthDate"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat=e.ioFormat||"yyyyMMdd",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat=e.ioFormat||"yyyyMM",i="yyyy"+this.options.delimiter+"MM"):"year"==t?(this.options.displayFormat=e.displayFormat||"yyyy",this.options.ioFormat=e.ioFormat||"yyyy",i="yyyy"):"yearMonthDateHour"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat=e.ioFormat||"yyyyMMddHH",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmm",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==t&&(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmmSS",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"),1==this.options.useEditFormat){var a=i.replace(/[a-zA-Z]/g,"#");this._editFormat=a.split("||")}this.calendar&&(this.calendar.remove(),delete this.calendar),this.formatter=null,this.validator=null,this.sub_validator=null,this.options.maxlength=this.options.minlength=-1,this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new d.N.validateInvoker(this.id,this.options),this.sub_validator=new d.N.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new d.N.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new d.N.allowCharCommand("0-9"));var s=0;return"yearMonthDate"==this.options.calendarValueType?s=8:"yearMonth"==this.options.calendarValueType?s=6:"year"==this.options.calendarValueType?s=4:"yearMonthDateHour"==this.options.calendarValueType?s=10:"yearMonthDateTime"==this.options.calendarValueType?s=12:"yearMonthDateTimeSec"==this.options.calendarValueType&&(s=14),"all"==this.options.applyFormat&&this.options.displayFormat&&(s=this.options.ioFormat.length),this.options.maxlength=s,this.options.minlength=s,this.sub_validator.addCommand(new d.N.maxLengthCommand(s)),this.sub_validator.addCommand(new d.N.minLengthCommand(s)),!0}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getIoFormat=function(){try{return this.options.ioFormat}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getFormattedValue=function(t){try{t=t||this.options.displayFormat;var e=this._getValue();return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2inputCalendar_placeholder")&&(e=""),WebSquare.format.createFormatter("date",t,"",this.options.ioFormat,null,null,this.scope_id,this.id).format(e)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){o.Y.printStackTrace(t)}},p.prototype.setPlaceholder=function(t){try{if(r.Z.isNull(t))return;WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.dom.input.placeholder!=t&&(this.options.placeholder=t,this.options.original_placeholder=t,
this.supportPlaceholder?this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.dom.input.placeholder=this.options.placeholder:this.options.placeholder="":this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?0==this.realValue.length&&(this.hasClass("w2inputCalendar_placeholder")?this.dom.input.value=this.options.placeholder:(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))):this.options.placeholder="")}catch(t){o.Y.printStackTrace(t)}},p.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){o.Y.printStackTrace(t)}},p.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.calendar&&(this.calendar.options.holidayRef=t,this.calendar.refresh()))}catch(t){o.Y.printStackTrace(t)}},p.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.calendar&&(this.calendar.options.holiday=this.options.holiday,this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.removeHoliday=function(){try{this.options.holiday="",this.calendar&&(this.calendar.options.holiday="",this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setEnabledDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var a="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(a,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.enableDate=function(t){this.setEnabledDate(t)},p.prototype.setDisabledDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t);for(var e=(t||"").split(" "),i=0;i<e.length;i++){var a="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(a,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.disableDate=function(t){this.setDisabledDate(t)},p.prototype.setDisableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t,this.calendar&&(this.calendar.options.disableBeforeDate=t,this.calendar.updateCalendar()))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.disableBeforeDate=function(t){this.setDisableBeforeDate(t)},p.prototype.setDisableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t,this.calendar&&(this.calendar.options.disableAfterDate=t,this.calendar.updateCalendar()))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.disableAfterDate=function(t){this.setDisableAfterDate(t)},p.prototype.enableAllDate=function(t){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",t&&(this.options.disabledDate=""),this.calendar&&(this.calendar.options.disableBeforeDate="",this.calendar.options.disableAfterDate="",t&&(this.calendar.options.disabledDate=""),this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setEnabledMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;this.options.enabledMonth=this.options.enabledMonth+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var a="*"===e[i]?"\\*":e[i];this.options.disabledMonth=this.options.disabledMonth.replace(new RegExp(a,"g"),"")}this.calendar&&(this.hideCalendar(),this.calendar.options.enabledMonth=this.options.enabledMonth,this.calendar.options.disabledMonth=this.options.disabledMonth,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setDisabledMonth=function(t,e){try{
if("dynamic"!==this.options.pickerType)return;t&&(this.options.disabledMonth=!0===e?t:this.options.disabledMonth+" "+t);for(var i=(t||"").split(" "),a=0;a<i.length;a++){var s="*"===i[a]?"\\*":i[a];this.options.enabledMonth=this.options.enabledMonth.replace(new RegExp(s,"g"),"")}this.calendar&&(this.hideCalendar(),this.calendar.options.enabledMonth=this.options.enabledMonth,this.calendar.options.disabledMonth=this.options.disabledMonth,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setDisableBeforeMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;"string"==typeof t&&6===t.length&&(this.options.disableBeforeMonth=t,this.calendar&&(this.hideCalendar(),this.calendar.options.disableBeforeMonth=t,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar()))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setDisableAfterMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;"string"==typeof t&&6===t.length&&(this.options.disableAfterMonth=t,this.calendar&&(this.hideCalendar(),this.calendar.options.disableAfterMonth=t,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar()))}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.enableAllMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;this.options.disableBeforeMonth="",this.options.disableAfterMonth="",t&&(this.options.disabledMonth=""),this.calendar&&(this.hideCalendar(),this.calendar.options.disableBeforeMonth="",this.calendar.options.disableAfterMonth="",t&&(this.calendar.options.disabledMonth=""),this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.holidayRef=this.options.holidayRef,t.ref=this.options.ref,t):null}catch(t){o.Y.printStackTrace(t)}},p.prototype.setButtonTitle=function(t){try{var e=document.getElementById(this.id+"_img");null!=e&&e.setAttribute("title",t)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.getButtonTitle=function(){try{var t="",e=document.getElementById(this.id+"_img");return null!=e&&(t=e.getAttribute("title")),t}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.serialize=function(){return{value:this._getValue()}},p.prototype.restore=function(t){try{return this._setValue(t.value,{skipValidate:!0}),!0}catch(t){return o.Y.printStackTrace(t,null,this),!1}},p.prototype.setInputStyle=function(t,e){try{var i=document.getElementById(this.id+"_input");null!=i&&WebSquare.style.setStyle(i,t,e)}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.endEdit=function(){try{if(!this.calendar)return;var t=this.calendar.getFormattedValue(),e=this._getValue();this.toggle(),this._setValue(t,{skipValidate:!0});var i=this._getValue();e!=i&&n.f.fireEvent(this,"onviewchange",{oldValue:e,newValue:i}),this.hideCalendar(),r.Z.isMobile()&&!this.options.focusOnDateSelect||(this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!1),this.dom.input.focus(),"select"==this.options.editType&&this.dom.input.select())}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setValueCancel=function(){try{var t=WebSquare.historyManager.get(this.options.pluginName,this.id);null!=t.value&&this._setValue(t.value,{skipValidate:!0}),this.focus()}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.checkResize=function(){try{if(!this.render)return;var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height);else{var i=t-this.resizeObj.width,a=e-this.resizeObj.height;0==i&&0==a||this.setSetting()}this.resizeObj={width:t,height:e}}catch(t){o.Y.printStackTrace(t,null,this)}},p.prototype.setFixedMonth=function(t){try{this.options.fixedMonth=t,this.calendar&&this.calendar.setFixedMonth.call(this.calendar,t)}catch(t){
o.Y.printStackTrace(t)}}}}]);