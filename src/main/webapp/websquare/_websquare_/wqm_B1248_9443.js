"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[9443],{9443:(t,i,e)=>{e.r(i),e.d(i,{widget:()=>l,widgetContainer:()=>a});var s=e(1570),n=e(866),o=e(2847),r=e(6323),h=e(2725),d=e(3885),a=function(t,i,e){WebSquare.uiplugin.widgetContainer.isImported||(WebSquare.uiplugin.widgetContainer.isImported=!0),d.q.call(this,t,i,e)};s.q.extend(a.prototype,d.q.prototype),a.prototype.defaultOptions={pluginType:"uiplugin.widgetContainer",pluginName:"widgetContainer",useConfig:!0,userEvents:["onload","onwidgetload","onwidgetmove","onwidgetresize","onwidgetopen","onwidgetfix","onwidgetmaximize","onwidgetminimize","onbeforewidgetclose","onafterwidgetclose","onwidgetrestore","onclickcustombtn"],mode:"pushpull",threshold:null,cols:1,unitHeightPixel:25,verticalMargin:0,horizontalMargin:0,minUnitWidth:1,minUnitHeight:1,maxUnitWidth:null,maxUnitHeight:null,widgetMove:!0,widgetResize:!0,forceMinMax:!1,popupEvent:"",async:!1,processMsgFrame:!1,preventMaximizeByTitle:!1,accessibility:!1,useLocale:!1,msaName:""},a.prototype.initialize=function(t){this.widgetIdCount=0,this.widgetLoadedCount=0,this.widgets=[],this.dirtyArr=[],this.changingWidget=null,this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize,this.preventMaximizeByTitle=this.options.preventMaximizeByTitle,!0===this.options.accessibility&&(this.focusWidget={})},a.prototype.toHTML=function(){var t=[],i=""===this.options.style?"":"style='"+this.options.style+"'",e=!0===this.options.accessibility?" tabindex='0'":"";return t.push("<div id='"+this.id+"' "+i+e+" class='w2widgetContainer "+this.options.className+"'>"),t.push("<div id='"+this.id+"_content'  class='w2widgetContainer_content'>"),t.push("</div>"),!0===this.options.accessibility&&(t.push("<div id='"+this.id+"_bridge'  aria-hidden='true' tabindex='0' class='w2widgetContainer_bridge'>"),t.push("</div>")),t.push("</div>"),t.join("")},a.prototype.setAction=function(){this.unitWidth=100/this.options.cols,this.unitHeightPixel=this.options.unitHeightPixel,this.contentRender=this.getElementById(this.id+"_content"),this.redraw(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),!0===this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydown))},a.prototype.checkResize=function(t){this.handleResizeEvent()},a.prototype.handleResizeEvent=function(){this.redraw()},a.prototype._changeWidget=function(t,i,e,s,n,o){return o||(o={}),!(t.isFixed()&&!o.force)&&(!0===t.dirty?(r="number"==typeof i?i:t.x,h="number"==typeof e?e:t.y,d="number"==typeof s?s:t.unitWidth,a="number"==typeof n?n:t.unitHeight):(r="number"==typeof i?i:t.oriX,h="number"==typeof e?e:t.oriY,d="number"==typeof s?s:t.oriUnitWidth,a="number"==typeof n?n:t.oriUnitHeight,t.dirty=!0,this.dirtyArr.push(t)),!!this.isValidPos(r,h,d,a)&&(t.x=r,t.y=h,t.unitWidth=d,t.unitHeight=a,!0));var r,h,d,a},a.prototype._commit=function(){for(var t,i=0;i<this.dirtyArr.length;i++)(t=this.dirtyArr[i])&&(t.oriX=t.x,t.oriY=t.y,t.oriUnitWidth=t.unitWidth,t.oriUnitHeight=t.unitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},a.prototype._rollback=function(){for(var t,i=0;i<this.dirtyArr.length;i++)(t=this.dirtyArr[i])&&(t.x=t.oriX,t.y=t.oriY,t.unitWidth=t.oriUnitWidth,t.unitHeight=t.oriUnitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},a.prototype._getMaxRect=function(t){var i=t.getMaximizeConfig(),e=t.getRect(),s=i.left<0?0:e.x-i.left,n=i.right<0?this.options.cols-e.x:e.unitWidth+i.right;s<=0?(n=n+e.x-s,s=0):n+=i.left,
s+n>this.options.cols&&(s<n-this.options.cols?(s=0,n=this.options.cols):s=this.options.cols-n);var o=i.top<0?0:e.y-i.top,r=e.unitHeight+i.bottom;return o<=0?(r=r+e.y-o,o=0):r+=i.top,i.bottom<0&&(r=1/0),{x:s,y:o,unitWidth:n,unitHeight:r}},a.prototype._getMarginedWidth=function(t){return"number"==typeof t?t-this.verticalMargin:parseInt(t,10)-this.verticalMargin},a.prototype._getMarginedHeight=function(t){return"number"==typeof t?t-this.horizontalMargin:parseInt(t,10)-this.horizontalMargin},a.prototype._getMarginedLeft=function(t){return"number"==typeof t?t+this.verticalMargin/2:parseInt(t,10)+this.verticalMargin/2},a.prototype._getMarginedTop=function(t){return"number"==typeof t?t+this.horizontalMargin/2:parseInt(t,10)+this.horizontalMargin/2},a.prototype._recalcSize=function(){if(this.render){this.fullWidth=Math.max(this.render.scrollWidth,this.render.clientWidth),this.fullWidth<=0&&(this.fullWidth=parseInt(this.render.style.width,10)),this.verticalMargin=this.options.verticalMargin/this.fullWidth*100,this.horizontalMargin=this.options.horizontalMargin;for(var t=0,i=0;i<this.widgets.length;i++){var e=this.widgets[i],s=e.isMaximized()?this._getMaxRect(e):e.getRect();s&&s.unitHeight!==1/0&&t<s.y+s.unitHeight&&(t=s.y+s.unitHeight)}var n=t*this.unitHeightPixel;this.fullHeight=Math.max(this.render.scrollHeight,this.render.clientHeight,n),WebSquare.BootLoader.fullViewRatio&&(this.zoomLevel=WebSquare.BootLoader.fullViewRatio),this.options.threshold&&this.options.threshold>this.fullWidth?(this.oneColumn=!0,this.widgetMove=!1,this.widgetResize=!1):(this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize)}},a.prototype._renderWithRect=function(t,i,e){if(null!=e){if(t||"object"!=typeof e||e.appendTo(this),!e.parentControl)return void(e.render=void 0);t=e.render}"number"==typeof i.unitWidth?t.style.width=this._getMarginedWidth(i.unitWidth*this.unitWidth)+"%":t.style.width=this._getMarginedWidth(i.unitWidth)+"%","number"==typeof i.unitHeight?t.style.height=this._getMarginedHeight(i.unitHeight*this.unitHeightPixel)+"px":t.style.height=this._getMarginedHeight(i.unitHeight)+"px","number"==typeof i.x?t.style.left=this._getMarginedLeft(i.x*this.unitWidth)+"%":t.style.left=this._getMarginedLeft(i.x)+"%","number"==typeof i.y?t.style.top=this._getMarginedTop(i.y*this.unitHeightPixel)+"px":t.style.top=this._getMarginedTop(i.y)+"px"},a.prototype.redraw=function(){if(this._recalcSize(),this.oneColumn){var t=0;this.widgets.sort((function(t,i){return t.y===i.y?t.x-i.x:t.y-i.y}))}for(var i=0;i<this.widgets.length;i++){var e=this.widgets[i],s=e.getRect();if(this.oneColumn){if(s.x=0,s.unitWidth=this.options.cols,s.y=t,t+=s.unitHeight,this.options.forceMinMax){if(e.isMaximized()){(n=this._getMaxRect(e)).x=s.x,n.unitWidth=s.unitWidth,n.unitHeight=n.unitHeight===1/0?this.fullHeight+"px":n.unitHeight,this._renderWithRect(e.render,n,e);continue}if(e.isMinimized()){o=this.getElementById(e.id+"_title"),r=parseInt(o.offsetHeight||WebSquare.style.getStyle(o,"height"),10);s.unitHeight=r+this.horizontalMargin+"px",this._renderWithRect(e.render,s,e)}}}else{if(e.isMaximized()){var n;(n=this._getMaxRect(e)).unitHeight=n.unitHeight===1/0?this.fullHeight+"px":n.unitHeight,this._renderWithRect(e.render,n,e);continue}if(e.isMinimized()){var o=this.getElementById(e.id+"_title"),r=parseInt(o.offsetHeight||WebSquare.style.getStyle(o,"height"),10);s.unitHeight=r+this.horizontalMargin+"px",this._renderWithRect(e.render,s,e)}}this.ghost&&e.id===this.dragDropElem.id?this._renderWithRect(this.ghost,s,null):(this._renderWithRect(e.render,s,e),e._setTitleEllipsis())}},a.prototype.setCols=function(t){var i=this.unitWidth,e=this.options.cols,s=!0;this.unitWidth=100/t,this.options.cols=t;for(var n=0;n<this.widgets.length;n++)if(!this.isValidPos(this.widgets[n].x,this.widgets[n].y,this.widgets[n].unitWidth,this.widgets[n].unitHeight)){s=!1;break}s?this.redraw():(this.unitWidth=i,this.options.cols=e,
$l(h.B.getMessage("WidgetContainer_setCols_warning")))},a.prototype.isValidPos=function(t,i,e,s){if(t!==parseInt(t,10)||i!==parseInt(i,10)||e!==parseInt(e,10)||s!==parseInt(s,10))return!1;var n=t>=0&&t+e<=this.options.cols,o=i>=0,r=e>=(this.options.minUnitWidth||1),h=s>=(this.options.minUnitHeight||1);return n&&o&&r&&h},a.prototype._checkInclusion=function(t,i){return t.x<=i.x&&t.y<=i.y&&t.x+t.unitWidth>=i.x+i.unitWidth&&t.y+t.unitHeight>=i.y+i.unitHeight},a.prototype._checkCollision=function(t,i){return t.x+t.unitWidth>i.x&&t.x<i.x+i.unitWidth&&t.y+t.unitHeight>i.y&&t.y<i.y+i.unitHeight},a.prototype._checkSwitchable=function(t,i){var e=t._getOriRect();if(!this._checkInclusion(e,i)||this._checkCollision(t,i))return!1;for(var s=0;s<this.widgets.length;s++){var n=this.widgets[s],o=n._getOriRect();if(n.id!==t.id&&n.id!==i.id&&this._checkCollision(i,o))return!1}return!0},a.prototype._getColArr=function(t){for(var i=[],e=0;e<this.widgets.length;e++){var s=this.widgets[e];if(s&&s.id!==t.id){var n=this._getMaxRect(s);if(s.isMaximized()&&(!n||this._checkCollision(t,n)))return!1;if(this._checkCollision(t,s)){if(s.isFixed()&&this.changingWidget===t)return!1;i.push(s)}}}return i},a.prototype._pushWidgets=function(t){var i=[],e=this._getColArr(t);if(!1===e)return!1;e.sort((function(t,i){return i.y-t.y}));for(var s=0;s<e.length;s++){var n=e[s];if(n&&n.id!==t.id)if(n.isFixed())i.push(n);else if(this._changeWidget(n,null,t.y+t.unitHeight,null,null),!this._pushWidgets(n))return!1}for(var o=0;o<i.length;o++)this._pushWidgets(i[o]);return!0},a.prototype._pullWidgets=function(){if("pushpull"===this.options.mode){this.widgets.sort((function(t,i){return t.y-i.y}));for(var t=0;t<this.widgets.length;t++){var i=0,e=this.widgets[t];if(!e.isFixed()){for(var s=0;s<t;s++){var n=this.widgets[s];if(e.x+e.unitWidth>n.x&&e.x<n.x+n.unitWidth){if(n.isFixed()&&i+e.unitHeight<=n.y){var o=this.widgets.splice(t,1)[0];this.widgets.splice(s,0,o);break}n.y+n.unitHeight>i&&(i=n.y+n.unitHeight)}}e.y!==i&&this._changeWidget(e,null,i,null,null)}}}},a.prototype._calcSwitchPos=function(t,i,e,s,n){var o,r,h=t._getOriRect();if(this._checkCollision(t,h)){var d=0,a=0;t.oriX>t.x&&t.x+t.unitWidth>t.oriX&&(d=t.x+t.unitWidth-t.oriX),t.oriY>t.y&&t.y+t.unitHeight>t.oriY&&(a=t.y+t.unitHeight-t.oriY);for(var l=e[0],g=e[0],u=1;u<e.length;u++)l=s(l,e[u]),g=n(g,e[u]);l=l.oriX,g=g.oriY,o=t.oriX+d+(i.oriX-l),r=t.oriY+a+(i.oriY-g)}else o=t.oriX+(i.oriX-t.x),r=t.oriY+(i.oriY-t.y);return{newX:o,newY:r}},a.prototype._resolveCollision=function(t){try{if("pushpull"===this.options.mode){if(!1===this._pushWidgets(t))return!1;this._pullWidgets()}else{if("switch"!==this.options.mode)return!1;var i=this._getColArr(t);if(!1===i)return!1;for(var e=function(t,i){return t.oriX<=i.oriX?t:i},s=function(t,i){return t.oriY<=i.oriY?t:i},o=0;o<i.length;o++){var r=i[o];if(!r||r.isFixed())return!1;var h=this._calcSwitchPos(t,r,i,e,s),d=h.newX,a=h.newY;if(!this.isValidPos(d,a,r.unitWidth,r.unitHeight))return!1;if(this._changeWidget(r,d,a,null,null),!this._checkSwitchable(t,r))return!1}}return!0}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.getWidgetById=function(t){for(var i=0;i<this.widgets.length;i++){var e=this.widgets[i];if(e.id===t||e.id===this.id+"_"+t)return e}return null},a.prototype.getWidgetByTitle=function(t){for(var i=0;i<this.widgets.length;i++){var e=this.widgets[i];if(e.title===t)return e}return null},a.prototype.importWidgets=function(t,i){try{return i&&this._removeWidgets(this.widgets),this.addWidgets(t||[])}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.importWidget=function(t,i){try{for(var e=0;e<this.widgets.length;e++){var s=this.widgets[e];if((s.id===t||s.id===this.id+"_"+t)&&(i.id=t,this.removeWidgets([s.id])&&this.addWidgets(i)))return!0}return!1}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.exportWidgets=function(){try{for(var t=[],i=0;i<this.widgets.length;i++){var e=this.widgets[i];t.push(e.getWidgetInfo())}return t}catch(t){n.Y.printStackTrace(t,null,this)}
},a.prototype.setTitleClass=function(t,i){try{for(var e=0;e<this.widgets.length;e++){var s=this.widgets[e];if(s.id===t||s.id===this.id+"_"+t){var o=this.getElementById(s.id+"_title");s.titleClass=i,this.addClass(o,i)}}}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.removeTitleClass=function(t,i){try{for(var e=0;e<this.widgets.length;e++){var s=this.widgets[e];if(s.id===t||s.id===this.id+"_"+t){var o=this.getElementById(s.id+"_title");this.removeClass(o,i)}}}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.exportWidget=function(t){try{for(var i=null,e=0;e<this.widgets.length;e++){var s=this.widgets[e];if(s.id===t||s.id===this.id+"_"+t){i=s.getWidgetInfo();break}}return i}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.addWidgets=function(t){try{r.Z.isArray(t)||(t=[t]);for(var i=null,e=[],s=!0,h=0;h<t.length;h++){if((i=t[h]).x=parseInt(i.x,10)||0,i.y=parseInt(i.y,10)||0,i.unitWidth=parseInt(i.unitWidth,10),i.unitHeight=parseInt(i.unitHeight,10),i.accessibility=this.options.accessibility,i.useLocale=this.options.useLocale,i.userIconClass=i.userIconClass||"",i.msaName=i.msaName||this.options.msaName||"",!this.isValidPos(i.x,i.y,i.unitWidth,i.unitHeight)){s=!1;break}if(i.id){if(null!==this.getWidgetById(i.id))return void $l("["+this.id+"] A duplicate widget id was used.");i.org_id=i.id,i.id=this.id+"_"+i.id}else{for(var d="widget"+this.widgetIdCount++;null!==this.getWidgetById(d);)d="widget"+this.widgetIdCount++;i.id=this.id+"_"+d,i.org_id=d}void 0===i.processMsgFrame&&!0===this.options.processMsgFrame&&(i.processMsgFrame=!0);var a=new WebSquare.uiplugin.widget(i.id,i);if(a.appendTo(this,this.parentFrame),this.widgets.push(a),e.push(a),!0===a.useCustomLeft)this.useCustomLeft,this.getElementById(a.id+"_title_text").classList.add("w2widget_titleText_unFixed");if(!this._resolveCollision(a)){s=!1;break}}if(s){for(var l=0;l<e.length;l++){(g=e[l]).activate()}this._commit()}else $l("["+this.id+"] A widget cannot be added to that location."),this.widgetIdCount--,this._rollback(),this._removeWidgets(e),e=null;if(s&&!0===this.options.accessibility)for(l=0;l<e.length;l++){var g=e[l],u=document.getElementById(g.id+"_title_buttons");u&&g.render.appendChild(u);var c=r.Z.getDataPrefix("refId"),p=document.getElementById(g.id+"_content");p.setAttribute("tabindex","0"),p.setAttribute(c,this.id)}return this.redraw(),o.f.fireEvent(this,"onload"),e}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.removeWidgets=function(t){try{r.Z.isArray(t)||(t=[t]);for(var i=[],e=0;e<t.length;e++){var s=t[e];"object"==typeof s&&null!==s&&(s=s.id);var o=this.getWidgetById(s);if(!o)return null;i.push(o)}return this._removeWidgets(i)}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype._removeWidgets=function(t){try{r.Z.isArray(t)||(t=[t]);for(var i=[],e=0;e<t.length;e++)i.push(t[e].id);for(e=0;e<i.length;e++)for(var s=0;s<this.widgets.length;s++)if(this.widgets[s].id===i[e]){this.widgets.splice(s,1)[0].remove();break}return this._commit(),this._pullWidgets(),this.redraw(),i}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.removeWidgetsAll=function(){try{for(var t=this.widgets.length,i=0;i<t;i++)this.widgets[i].remove();return void(this.widgets=[])}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.moveWidget=function(t,i,e){try{if(!this.widgetMove)return!1;var s=this.getWidgetById(t);if(s.isFixed())return!1;if(this.changingWidget=s,this._rollback(),!this._changeWidget(s,i,e,null,null))return!1;var r=this._resolveCollision(s);if(r){var h=s._getOriRect();this._commit(),o.f.fireEvent(this,"onwidgetmove",t,s.getRect(),h)}else this._rollback();return this.redraw(),this.changingWidget=null,r}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype._moveWidget=function(t,i,e){try{if(!this.widgetMove)return!1;var s=this.getWidgetById(t);if(s.isFixed())return!1;if(this.changingWidget=s,this._rollback(),!this._changeWidget(s,i,e,null,null))return!1;var o=this._resolveCollision(s);return o||this._rollback(),this.redraw(),
this.changingWidget=null,o}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype.resizeWidget=function(t,i,e,s){try{if(s||(s={}),!this.widgetResize&&!s.force)return!1;var r=this.getWidgetById(t);if(r.isFixed()&&!r.options.minimizeonfixed)return!1;if(this.changingWidget=r,this._rollback(),!this._changeWidget(r,null,null,i,e,s))return!1;var h=this._resolveCollision(r);if(h){var d=r._getOriRect();this._commit(),o.f.fireEvent(this,"onwidgetresize",t,r.getRect(),d)}else this._rollback();return this.redraw(),this.changingWidget=null,h}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype._resizeWidget=function(t,i,e){try{if(!this.widgetResize)return!1;var s=this.getWidgetById(t);if(s.isFixed()||s.isMinimized())return!1;if(this.changingWidget=s,this._rollback(),!this._changeWidget(s,null,null,i,e))return!1;var o=this._resolveCollision(s);return o||this._rollback(),this.redraw(),this.changingWidget=null,o}catch(t){n.Y.printStackTrace(t,null,this)}},a.prototype._getClickPos=function(t){var i,e;return t.touches&&1==t.touches.length?(i=t.touches[0].pageX,e=t.touches[0].pageY):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(i=t.pageX,e=t.pageY):(i=o.f.getMouseX(t),e=o.f.getMouseY(t)),this.zoomLevel&&(i/=this.zoomLevel,e/=this.zoomLevel),{posX:i,posY:e}},a.prototype._makeGhost=function(t){this.ghost=document.createElement("div"),this.contentRender.appendChild(this.ghost),this.ghost.style.left=this.dragDropElem.style.left,this.ghost.style.top=this.dragDropElem.style.top,this.ghost.style.width=this.dragDropElem.style.width,this.ghost.style.height=this.dragDropElem.style.height,this.ghost.className="w2widget_ghost";var i=this._getClickPos(t);this.ghost.oriX=i.posX-this.dragDropElem.offsetLeft,this.ghost.oriY=i.posY-this.dragDropElem.offsetTop},a.prototype.enableWidgetTitle=function(t){if("boolean"==typeof t)for(var i=0,e=this.widgets.length;i<e;i++)this.widgets[i].showTitle(t)},a.prototype.enableWidgetMove=function(t){"boolean"==typeof t&&(this.options.widgetMove=t,this.widgetMove=t)},a.prototype.enableWidgetResize=function(t){if("boolean"==typeof t){this.options.widgetResize=t,this.widgetResize=t;for(var i=0,e=this.widgets.length;i<e;i++)this.widgets[i].setResizable(t)}},a.prototype._focusWidget=function(){try{var t,i=document.activeElement.id,e=r.Z.getDataPrefix("refId"),s=document.getElementById(i);s.getAttribute(e)&&(i=s.getAttribute(e));for(var o=0;o<this.widgets.length;o++){var h=this.widgets[o];if(i===h.id){t={id:h.id,x:h.x,y:h.y,idx:o};break}}return t}catch(t){n.Y.printStackTrace(t)}},a.prototype._ascendingWidgets=function(t){try{t.sort((function(t,i){return t.y===i.y?t.x-i.x:t.y-i.y}))}catch(t){n.Y.printStackTrace(t)}},a.prototype._getFixed=function(t,i){try{for(var e=0;e<this.widgets.length;e++)if(this.widgets[e].x===t&&this.widgets[e].y===i&&!0===this.widgets[e].fixed)return!0;return!1}catch(t){n.Y.printStackTrace(t)}},a.prototype._validVerticalLocationMove=function(t,i){try{var e,s=-1,r=-1,h=-1,d=this.getWidgetById(t.id),a=!1;if(d.isFixed())return!1;if("up"===i)for(h=t.y-1;!1===a;){if(e=!1,!0===this._getFixed(t.x,h)&&(h--,e=!0),!1===e&&!1===a&&(s=t.x,r=h,a=!0),h<0){a=!1;break}}else if("down"===i)for(h=t.y+1;!1===a;){e=!1,!0===this._getFixed(t.x,h)&&(h++,e=!0),!1===e&&!1===a&&(s=t.x,"switch"===this.options.mode?r=h:"pushpull"===this.options.mode&&(r=h+1),a=!0)}if(!0!==a||s<0&&r<0||!this._changeWidget(d,s,r,null,null))return!1;if(this._resolveCollision(d)){var l=d._getOriRect();this._commit(),o.f.fireEvent(this,"onwidgetmove",d.id,d.getRect(),l)}else this._rollback();this.redraw(),this.changingWidget=null}catch(t){n.Y.printStackTrace(t)}},a.prototype._validHorizontalLocationMove=function(t,i){try{var e=-1,s=-1,r=!1,h=!1,d=!1,a=this.getWidgetById(t.id);if(a.isFixed())return;for(var l=-1,g=0;g<this.widgets.length;g++)this.widgets[g].x>l&&(l=this.widgets[g].x);var u=-1,c=-1;if(this.options.cols>0&&(l=this.options.cols-1),l=l<this.options.cols-1?this.options.cols-1:l,this.changingWidget=a,this._rollback(),"left"===i){
u=t.x-1;for(var p=t.y;p>=0;p--){for(var f=l;f>=0;f--)if(h=!1,!(u<f)){if(u>=0&&u===f)for(g=0;g<this.widgets.length;g++)if(this.widgets[g].x===u&&this.widgets[g].y===p&&!0===this.widgets[g].fixed){h=!0,u--;break}if(u<0){e=f,s=p;for(g=0;g<this.widgets.length;g++)if(this.widgets[g].x===f&&this.widgets[g].y===p&&!0===this.widgets[g].fixed){h=!0;break}}if(!1===h&&!1===r){e=f,s=p,r=!0,d=!0;break}}if(!0===d)break;f<0&&(u=l)}}else if("right"===i)for(u=t.x+1,c=t.y;!1===r;){u>l&&(u=0,c=t.y+1);for(f=0;f<=l;f++)if(h=!1,!(f<u)){if(u<=l&&u===f)for(g=0;g<this.widgets.length;g++)if(this.widgets[g].x===u&&this.widgets[g].y===c&&!0===this.widgets[g].fixed){h=!0,u++;break}if(!1===h&&!1===r){e=f,s=c,r=!0,d=!0;break}}if(!0===d)break}if(!0===r&&!this._changeWidget(a,e,s,null,null)||!1===r||e<0&&s<0)return;if(this._resolveCollision(a)){var m=a._getOriRect();this._commit(),o.f.fireEvent(this,"onwidgetmove",a.id,a.getRect(),m)}else this._rollback();this.redraw(),this.changingWidget=null}catch(t){n.Y.printStackTrace(t)}},a.prototype.handleMousedownEvent=function(t){for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2widget_title_buttons")&&(this.dragDropElem=null,i.stop()),i.match("w2widget_btnResize"))this.options.widgetResize?(this.dragDropElem=i.getElement().parentNode,this.isResizing=!0):(this.dragDropElem=null,this.isResizing=!1),i.stop();else if(i.match("w2widget_title"))this.options.widgetMove?(this.dragDropElem=i.getElement().parentNode,this.isMoving=!0):(this.dragDropElem=null,this.isMoving=!1),i.stop();else if(i.match("w2widget_btnMinimize")){i.element.className.indexOf("w2widget_btnMinimizeOn")>-1?WebSquare.style.removeClass(i.element,"w2widget_btnMinimizeOn"):WebSquare.style.addClass(i.element,"w2widget_btnMinimizeOn")}else if(i.match("w2widget_btnMaximize")){i.element.className.indexOf("w2widget_btnMaximizeOn")>-1?WebSquare.style.removeClass(i.element,"w2widget_btnMaximizeOn"):WebSquare.style.addClass(i.element,"w2widget_btnMaximizeOn")}i=null;var e=function(){var t=this;t.dragDropElem=null,t.isResizing=!1,t.isMoving=!1};if(this.dragDropElem){o.f.stopEvent(t);var s=this.getWidgetById(this.dragDropElem.id);(this.isResizing||this.isMoving)&&(!this.isResizing||this.widgetResize&&s.isResizable())&&(!this.isMoving||this.widgetMove&&s.isMovable())?(s.addClass("w2widget_changing"),t.touches&&1==t.touches.length?(this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.PointerEvent?(this.event.addListener(this.render,"onpointermove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onpointerleave",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleMouseupEvent))):(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseupEvent)))):e.call(this)}else e.call(this)},a.prototype.handleMousemoveEvent=function(t){if(this.dragDropElem){this.ghost||this._makeGhost(t);var i=this._getClickPos(t),e=i.posX,s=i.posY;if(!0===this.isResizing){this.getWidgetById(this.dragDropElem.id)._setTitleEllipsis(),e-=WebSquare.style.getAbsoluteLeft(this.contentRender),s-=WebSquare.style.getAbsoluteTop(this.contentRender)
;var n=parseFloat(this.ghost.style.left),r=100*(e/this.fullWidth-n/100)+this.verticalMargin,h=s-parseInt(this.ghost.style.top,10)+this.horizontalMargin;r=(r=r<this.unitWidth?this.unitWidth:r)+n>100?100-n:r,h=h<this.unitHeightPixel?this.unitHeightPixel:h,this.dragDropElem.style.width=r-this.verticalMargin+"%",this.dragDropElem.style.height=h-this.horizontalMargin+"px",r=Math.round(r/this.unitWidth),h=Math.round(h/this.unitHeightPixel),this.ghost.oldWidth===r&&this.ghost.oldHeight===h||(this.ghost.oldWidth=r,this.ghost.oldHeight=h,this.relocResult=this._resizeWidget(this.dragDropElem.id,r,h))}else if(!0===this.isMoving){e-=this.ghost.oriX,s-=this.ghost.oriY,this.dragDropElem.style.left=e+"px",this.dragDropElem.style.top=s+"px";var d=Math.round((e/this.fullWidth*100-this.verticalMargin/2)/this.unitWidth),a=Math.round((s-this.horizontalMargin/2)/this.unitHeightPixel),l=Math.round(parseFloat(this.ghost.style.width)/this.unitWidth);d=(d=d<0?0:d)+l>this.options.cols?this.options.cols-l:d,a=a<0?0:a,this.ghost.oldX===d&&this.ghost.oldY===a||(this.ghost.oldX=d,this.ghost.oldY=a,this.relocResult=this._moveWidget(this.dragDropElem.id,d,a))}o.f.preventDefault(t)}},a.prototype.handleMouseupEvent=function(){if(this.dragDropElem){this.ghost&&(this.dragDropElem.parentNode.removeChild(this.ghost),this.ghost=null);var t=this.getWidgetById(this.dragDropElem.id);if(t.removeClass("w2widget_changing"),this.dragDropElem=null,this.relocResult){var i=t._getOriRect();this._commit(),this.isMoving?o.f.fireEvent(this,"onwidgetmove",t.id,t.getRect(),i):this.isResizing&&o.f.fireEvent(this,"onwidgetresize",t.id,t.getRect(),i)}this.isResizing=!1,this.isMoving=!1,this.redraw()}},a.prototype.handleKeydown=function(t){try{var i,e,s,h,d,a=this.event.getTargetIterator(t,this.render);if(t.target.id===this.render.id)if(9===t.keyCode&&!t.shiftKey)o.f.preventDefault(t),this.widgets.length>0&&(s=this.widgets.slice(),this._ascendingWidgets(s),d=s[0]),d&&d.render.focus(),a.stop();if(this.focusWidget=this._focusWidget(),this.focusWidget&&t.target.id===this.focusWidget.id)switch(void 0!==this.focusWidget&&document.getElementById(this.focusWidget.id),t.keyCode){case 37:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validHorizontalLocationMove(this.focusWidget,"left")}catch(t){n.Y.printStackTrace(t)}break;case 39:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validHorizontalLocationMove(this.focusWidget,"right")}catch(t){n.Y.printStackTrace(t)}break;case 38:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validVerticalLocationMove(this.focusWidget,"up")}catch(t){n.Y.printStackTrace(t)}break;case 40:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validVerticalLocationMove(this.focusWidget,"down")}catch(t){n.Y.printStackTrace(t)}break;case 9:if(t.shiftKey)if(void 0!==this.focusWidget&&t.target.id===this.focusWidget.id){o.f.preventDefault(t),s=this.widgets.slice(),this._ascendingWidgets(s);for(var l=0;l<s.length;l++)if(s[l].id===this.focusWidget.id){if(s[l-1]){this.getElementById(s[l-1].id).focus(),h=this.getElementById(s[l].id);break}this.render.focus(),h=this.getElementById(s[l].id);break}}else o.f.preventDefault(t),document.getElementById(this.focusWidget.id+"_content").focus();break;case 32:case 13:o.f.preventDefault(t)}if(this.focusWidget&&t.target.id===this.focusWidget.id+"_content"&&9==t.keyCode&&t.shiftKey&&(o.f.preventDefault(t),document.getElementById(this.focusWidget.id).focus()),this.focusWidget&&t.target.id===this.focusWidget.id+"_title_btnClose"){if(i=this.focusWidget,9==t.keyCode&&!t.shiftKey&&(o.f.preventDefault(t),s=this.widgets.slice(),this._ascendingWidgets(s),void 0!==this.focusWidget.id)){for(l=0;l<s.length;l++)if(s[l].id===this.focusWidget.id&&s[l+1]){this.getElementById(s[l].id),(h=this.getElementById(s[l+1].id)).focus();break}if(void 0===h)document.getElementById(this.id+"_bridge").focus()}if(32==t.keyCode&&void 0!==i.id){var g;e=this.getElementById(i.id+"_title_btnClose");var u={},c={};u.x=this.focusWidget.x,
u.y=this.focusWidget.y,e.click();for(l=0;l<this.widgets.length;l++){if(this.widgets[l].x===u.x&&this.widgets[l].y===u.y){g=this.widgets[l].id;break}this.widgets[l].x===u.x+1&&this.widgets[l].y===u.y?c.right=this.widgets[l].id:this.widgets[l].x===u.x-1&&this.widgets[l].y===u.y?c.left=this.widgets[l].id:this.widgets[l].x===u.x&&this.widgets[l].y===u.y-1?c.up=this.widgets[l].id:this.widgets[l].x===u.x&&this.widgets[l].y===u.y+1&&(c.down=this.widgets[l].id)}if(void 0!==g&&"pushpull"===this.options.mode)(h=this.getElementById(g)).setAttribute("tabindex","0"),h.focus();else if(this.widgets.length>0)if(!0!==r.Z.isEmptyObject(c)){var p=["right","left","down","up"];for(l=0;l<p.length;l++)if(p[l]&&c[p[l]]){g=c[p[l]],(h=this.getElementById(g)).focus();break}}else g=this.widgets[0].id,(h=this.getElementById(g)).focus()}}t.target.id===this.id+"_bridge"&&9===t.keyCode&&t.shiftKey&&(o.f.preventDefault(t),this.render.focus())}catch(t){n.Y.printStackTrace(t)}},a.prototype.refreshAdaptive=function(){try{this.redraw();for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].refreshAdaptive&&this.childControlList[t].refreshAdaptive()}catch(t){n.Y.printStackTrace(t)}};var l=function(t,i,e){d.q.call(this,t,i,e)};s.q.extend(l.prototype,d.q.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.widget",pluginName:"widget",title:"",titleClass:"",hasTitleBar:!0,src:"",x:0,y:0,unitWidth:1,unitHeight:1,scope:!1,params:void 0,fixed:!1,minimizeonfixed:!1,maximizeonfixed:!1,oriFixed:!1,minimized:!1,maximized:!1,resized:!1,maxConfig:{left:-1,right:-1,top:-1,bottom:-1},maximizeFormatter:null,buttonFormatter:null,msaName:""},l.prototype.initialize=function(t){this.src=this.options.src,this.scope=this.options.scope,this.params=this.options.params,this.minimized=this.options.minimized,this.maximized=this.options.maximized,this.x=this.options.x,this.y=this.options.y,this.unitWidth=this.options.unitWidth,this.unitHeight=this.options.unitHeight,this.fixed=this.options.fixed,this.oriFixed=this.options.oriFixed,this.oriX=this.x,this.oriY=this.y,this.oriUnitWidth=this.unitWidth,this.oriUnitHeight=this.unitHeight,this.dirty=!1,this.title=this.options.title,this.resized=this.options.resized,this.userIconClass=this.options.userIconClass,this.savedUnitHeight=null;var i=!0===this.options.accessibility?" w2widget_btnFix_accessibility":"",e=h.B.getMessage("WidgetContainer_fix")||"fix",s=h.B.getMessage("WidgetContainer_minimize")||"minimize",n=h.B.getMessage("WidgetContainer_maximize")||"maximize",o=h.B.getMessage("WidgetContainer_close")||"close";this.buttons=[{useAPI:"toggleFixed",id:"btnFix",className:"w2widget_btnFix"+i,ariaLabel:e,title:e,isCustom:!1},{useAPI:"toggleMinimized",id:"btnMinimize",className:"w2widget_btnMinimize",ariaLabel:s,title:s,isCustom:!1},{useAPI:"toggleMaximized",id:"btnMaximize",className:"w2widget_btnMaximize",ariaLabel:n,title:n,isCustom:!1},{useAPI:"closeWidget",id:"btnClose",className:"w2widget_btnClose",ariaLabel:o,title:o,isCustom:!1}],this.maxConfig=this.options.maxConfig,this.maximizeFormatter=this.options.maximizeFormatter,this.buttonFormatter=this.options.buttonFormatter,this.titleClass=this.options.titleClass,this.msaName=this.options.msaName,this.maximizeFormatter&&this.setMaximizeFormatter(this.maximizeFormatter),this.buttonFormatter&&this.setButtonFormatter(this.buttonFormatter),!0===this.options.accessibility&&(this.options.minimizeonfixed=!0)},l.prototype._renderButton=function(t,i){try{!0===this.options.accessibility&&("btnMinimize"==t.id||"btnMaximize"==t.id?t.ariaLabel=t.ariaLabel+","+h.B.getMessage("WidgetContainer_defaultSize_status"):"btnFix"==t.id&&(t.ariaLabel=t.ariaLabel+h.B.getMessage("WidgetContainer_fix_unset")));var e="",s="";this.options.useLocale&&t.isCustom&&(e=this.getLocaleValue(t.ariaLabelLocaleRef),s=this.getLocaleValue(t.titleLocaleRef));var o=e||t.ariaLabel,r=s||t.title,d=""==o?"":" aria-label='"+this.options.title+o+"'",a=""==r?"":" title='"+r+"'";if(!0===this.options.accessibility){
var l=WebSquare.util.getDataPrefix("refId");return"<button id='"+this.id+"_title_"+t.id+"' class='w2widget_accessibility_button "+t.className+"'"+l+"='"+this.id+"'"+d+a+"></button>"}var g=i?"w2widget_btnCustom_left "+t.className:t.className;return"<div id='"+this.id+"_title_"+t.id+"' class='"+g+"'"+a+"></div>"}catch(t){n.Y.printStackTrace(t,null,this)}},l.prototype._drawTitleHTML=function(){try{var t=[];t.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),t.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>");var i=this.userIconClass?" w2widget_titleText_unFixed ":"";if(!0===this.options.accessibility?t.push("<strong id='"+this.id+"_title_text' class='w2widget_title_text"+i+"'>"+this.options.title+"</strong>"):t.push("<span id='"+this.id+"_title_text' class='w2widget_title_text"+i+"'>"+this.options.title+"</span>"),this.userIconClass&&(t.push("<div id='"+this.id+"_title_usericon' class='widget_title_usericon "+this.userIconClass+"'>"),t.push("</div>")),!0===this.useCustomLeft)for(var e=0;e<this.buttons.length;e++){!0===(s=this.buttons[e]).isCustom&&"left"===s.isCustomDirection&&t.push(this._renderButton(s,!0))}t.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons w2widget_title_buttons_accessibility'>");for(e=0;e<this.buttons.length;e++){var s;!0===(s=this.buttons[e]).isCustom&&"left"===s.isCustomDirection||t.push(this._renderButton(s,!1))}return t.push("</div>"),t.push("</div>"),t.join("")}catch(t){n.Y.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=[],i=""===this.options.style?"":"style='"+this.options.style+"'";if(this.isFixed())var e="w2widget w2widget_fixed";else e="w2widget";this.options.className&&(e+=" "+this.options.className);var s=!0===this.options.accessibility?" tabindex='0'":"";return t.push("<div id='"+this.id+"' "+i+s+" class='"+e+"' aria-label='"+this.options.title+"' role='dialog'>"),this.options.hasTitleBar&&t.push(this._drawTitleHTML()),t.push("<div id='"+this.id+"_btnResize' class='w2widget_btnResize'></div>"),t.push("</div>"),t.join("")}catch(t){n.Y.printStackTrace(t,null,this)}},l.prototype.setAction=function(){var t=this.parentControl.options&&this.parentControl.options.async,i=new WebSquare.uiplugin.wframe(this.id+"_content",{className:this.options.hasTitleBar?"w2widget_content":"w2widget_content_notitlebar",src:this.options.src,scope:this.options.scope,mode:t?"async":"sync",processMsgFrame:this.options.processMsgFrame,isWidget:!0,msaName:this.options.msaName});try{var e=this.options.org_id,s=this.parentControl.id,h=this.parentControl.uuid;if(i.options.scope&&i.options.scopeFunction)for(var d=i.options.scopeVariable.split(","),a=0;a<d.length;a++){var l=d[a];i.scopeVariable[l]&&i.scopeVariable[l][i.options.scopeFunction]&&(i.scopeVariable[l][i.options.scopeFunction].widget={},i.scopeVariable[l][i.options.scopeFunction].widget.getWidgetId=function(){return e},i.scopeVariable[l][i.options.scopeFunction].widget.getWidgetContainerId=function(){return s},i.scopeVariable[l][i.options.scopeFunction].widget.getWidgetContainer=function(){return WebSquare.idCache[h]})}}catch(t){n.Y.printStackTrace(t,null,this)}i.appendTo(this,this.parentFrame),i.makeFrame(!0),i.activeStatus="active",o.f.fireEvent(this.parentControl,"onwidgetload",this.options.id,this.options.org_id),this.resized=this.parentControl.widgetResize,this.isResizable()&&!1!==this.parentControl.widgetResize||this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),!1===t&&r.Z.isIEAllVersion("6 7")&&this.parentControl.redraw()},l.prototype.handleTitleClick=function(t){
if(this.parentControl&&void 0!==WebSquare.idCache[this.parentControl.uuid]){for(var i=this.event.getTargetIterator(t,this.render);i.next();)for(var e=0;e<this.buttons.length;e++){var s=this.buttons[e];if(i.match(null,this.id+"_title_"+s.id)||i.match(null,s.id)){s.isCustom&&o.f.fireEvent(this.parentControl,"onclickcustombtn",this.id,s.id),s.useAPI&&"function"==typeof this[s.useAPI]&&this[s.useAPI](),i.stop();break}}i=null}},l.prototype.handleDblClickEvent=function(t){for(var i=this.parentControl.options.preventMaximizeByTitle,e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2widget_title")&&!i&&this.toggleMaximized();e=null},l.prototype.isFixed=function(){return this.fixed},l.prototype.toggleFixed=function(){this.isFixed()?this.unsetFixed():this.setFixed()},l.prototype.setFixed=function(){if(this.isFixed())return!1;if(this.fixed=!0,this.addClass("w2widget_fixed"),this.options.accessibility){var t=document.getElementById(this.id+"_title_btnFix"),i=(this.options.title+h.B.getMessage("WidgetContainer_fix")||"fix")+h.B.getMessage("WidgetContainer_fix_set");t.setAttribute("aria-label",i)}return this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),o.f.fireEvent(this.parentControl,"onwidgetfix",this.id),!0},l.prototype.unsetFixed=function(){if(this.isFixed()&&!this.isMaximized()){if(this.fixed=!1,this.removeClass("w2widget_fixed"),this.options.accessibility){var t=document.getElementById(this.id+"_title_btnFix"),i=(this.options.title+h.B.getMessage("WidgetContainer_fix")||"fix")+h.B.getMessage("WidgetContainer_fix_unset");t.setAttribute("aria-label",i)}return this.isResizable()&&this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),!0}return!1},l.prototype.isMaximized=function(){return this.maximized},l.prototype._setStatusAriaLabel=function(){if(this.options.accessibility){var t=this.options.title,i=document.getElementById(this.options.id+"_title_btnMaximize"),e=document.getElementById(this.options.id+"_title_btnMinimize"),s=h.B.getMessage("WidgetContainer_defaultSize_status");this.minimized?s=h.B.getMessage("WidgetContainer_minimizeSize_status"):this.maximized&&(s=h.B.getMessage("WidgetContainer_maximizeSize_status"));var n=t+h.B.getMessage("WidgetContainer_maximize")+","+s;i.setAttribute("aria-label",n);var o=t+h.B.getMessage("WidgetContainer_minimize")+","+s;e.setAttribute("aria-label",o)}},l.prototype.setMaximized=function(){return!(this.isMaximized()||this.isFixed()&&!this.options.maximizeonfixed)&&(this.maximized=!0,this.unsetMinimized(),this.addClass("w2widget_maximized"),this.isFixed()?this.oriFixed=!0:this.setFixed(),o.f.fireEvent(this.parentControl,"onwidgetmaximize",this.id),this._setStatusAriaLabel(),this.parentControl.redraw(),!0)},l.prototype.unsetMaximized=function(){return!!this.isMaximized()&&(this.maximized=!1,this.removeClass("w2widget_maximized"),this.oriFixed?this.oriFixed=!1:this.unsetFixed(),o.f.fireEvent(this.parentControl,"onwidgetrestore",this.id),this._setStatusAriaLabel(),this.parentControl.redraw(),!0)},l.prototype.toggleMaximized=function(){return this.isMaximized()?this.unsetMaximized():this.setMaximized()},l.prototype.isMinimized=function(){return this.minimized},l.prototype._calcMinimizedUnitHeight=function(){for(var t=this.getElementById(this.id+"_title"),i=parseInt(WebSquare.style.getStyle(t,"height"),10),e=0,s=this.parentControl.unitHeightPixel,n=this.parentControl._getMarginedHeight;n.call(this.parentControl,e*s)<i;)e+=1;return e},l.prototype.setMinimized=function(){if(this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;this.savedUnitHeight=this.unitHeight;var t=this.parentControl.resizeWidget(this.id,this.width,this._calcMinimizedUnitHeight(),{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t?(this.minimized=!0,this.unsetMaximized(),this.addClass("w2widget_minimized"),
this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),o.f.fireEvent(this.parentControl,"onwidgetminimize",this.id),this._setStatusAriaLabel()):this.savedUnitHeight=null,t},l.prototype.unsetMinimized=function(){if(!this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;var t=this.parentControl.resizeWidget(this.id,this.width,this.savedUnitHeight,{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t&&(this.savedUnitHeight=null,this.minimized=!1,this.removeClass("w2widget_minimized"),this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),o.f.fireEvent(this.parentControl,"onwidgetrestore",this.id),this._setStatusAriaLabel()),t},l.prototype.toggleMinimized=function(){var t=!1;return(t=this.isMinimized()?this.unsetMinimized():this.setMinimized())&&this.parentControl.redraw(),t},l.prototype.isMovable=function(){return!this.isFixed()},l.prototype.isResizable=function(){return!this.isFixed()&&!this.isMinimized()&&(!this.parentControl||!1!==this.parentControl.widgetResize)&&this.resized},l.prototype.setTitle=function(t){var i=this.getElementById(this.id+"_title_text");return!!i&&(i["textContent"in i?"textContent":"innerText"]=t+"",this.title=t+"",!0)},l.prototype.getTitle=function(){var t=this.getElementById(this.id+"_title_text");return!!t&&t["textContent"in t?"textContent":"innerText"]},l.prototype.setParams=function(t){var i=this.getChild(this.id+"_content");return this.params=t,"object"!=typeof i.paramObj&&(i.paramObj={}),i.paramObj.params=this.params,!0},l.prototype.getParams=function(){return this.params},l.prototype.closeWidget=function(){var t=this.parentControl,i=this.id;if(!1===o.f.fireEvent(t,"onbeforewidgetclose",i))return!1;var e=this.parentControl._removeWidgets(this);return o.f.fireEvent(t,"onafterwidgetclose",i),e},l.prototype.getWidgetInfo=function(){var t=this.parentControl.id,i={};return i.id=this.id.slice(t.length+1),i.src=this.src,i.scope=this.options.scope,i.minimized=this.minimized,i.maximized=this.maximized,i.x=this.x,i.y=this.y,i.unitWidth=this.unitWidth,i.unitHeight=this.unitHeight,i.fixed=this.fixed,i.oriFixed=this.oriFixed,i.title=this.title,i.className=this.render.className.replace("w2widget ",""),i.maximizeFormatter=this.maximizeFormatter,i.buttonFormatter=this.buttonFormatter,i.params=this.params,i.titleClass=this.titleClass,i.onWidgetLoad=this.onWidgetLoad,i.msaName=this.msaName,i},l.prototype.setSrc=function(t){return!!this.getChild(this.id+"_content").setSrc(t)&&(this.src=t,!0)},l.prototype.getSrc=function(){return this.getChild(this.id+"_content").getSrc()},l.prototype.getObj=function(t){return this.getChild(this.id+"_content").getObj(t)},l.prototype.getObjList=function(){return this.getChild(this.id+"_content").getObjList()},l.prototype.refresh=function(){if(!this.getChild(this.id+"_content").setSrc(this.src))return!1},l.prototype.getRect=function(){return{x:this.x,y:this.y,unitWidth:this.unitWidth,unitHeight:this.unitHeight}},l.prototype._getOriRect=function(){return{x:this.oriX,y:this.oriY,unitWidth:this.oriUnitWidth,unitHeight:this.oriUnitHeight}},l.prototype.getRectByPx=function(){return{x:this.render.offsetLeft,y:this.render.offsetTop,width:this.render.clientWidth,height:this.render.clientHeight}},l.prototype.setButtonFormatter=function(t){var i=r.Z.getGlobalFunction(t,this.scope_id);if("function"!=typeof i)return!1;for(var e=this.buttons,s=i(this.id),n=0;n<s.length;n++){var o=s[n];if(o.useDefault)switch(o.useDefault){case"fix":s[n]=e[0];break;case"minimize":s[n]=e[1];break;case"maximize":s[n]=e[2];break;case"close":s[n]=e[3];break;default:return!1}else!0===o.isCustom&&"left"===o.isCustomDirection&&(this.useCustomLeft=!0)}return this.buttons=s,!0},l.prototype.setMaximizeFormatter=function(t){var i=r.Z.getGlobalFunction(t,this.scope_id);if("function"!=typeof i)return!1;var e=i(this.id);if(!e)return!1
;for(var s=["left","right","top","bottom"],n=0;n<s.length;n++){var o=s[n];e[o]!==parseInt(e[o],10)&&(e[o]=0)}return this.maxConfig=e,!0},l.prototype.getMaximizeConfig=function(){return this.maxConfig},l.prototype.showTitle=function(t){try{var i=document.getElementById(this.id+"_title"),e=document.getElementById(this.id+"_content");if(!i){if(!t)return;var s=document.getElementById(this.id+"_btnResize"),o=document.createElement("div"),r=this._drawTitleHTML();o.innerHTML=r;var h=o.firstChild;this.render.insertBefore(h,s),this._setTitleEllipsis(),i=document.getElementById(this.id+"_title")}if(t?(i.style.display="block",e.style.top=i.clientHeight+"px",this.addClass(e,"w2widget_content"),this.removeClass(e,"w2widget_content_notitlebar"),this.options.hasTitleBar=!0):(i.style.display="none",e.style.top="0px",this.addClass(e,"w2widget_content_notitlebar"),this.removeClass(e,"w2widget_content"),this.options.hasTitleBar=!1),!0===this.options.accessibility){var d=document.getElementById(this.id+"_title_buttons");d&&this.render.appendChild(d)}}catch(t){n.Y.printStackTrace(t,null,this)}},l.prototype.setResizable=function(t){if("boolean"==typeof t){var i=document.getElementById(this.id+"_btnResize"),e=t&&0!=this.parentControl.widgetResize;e?this.removeClass(i,"w2widget_btnResize_halt"):this.addClass(i,"w2widget_btnResize_halt"),this.resized=e}},l.prototype._setTitleEllipsis=function(){try{var t=document.getElementById(this.id+"_title");if(!t)return;var i=document.getElementById(this.id+"_title_icon"),e=document.getElementById(this.id+"_title_text"),s=document.getElementById(this.id+"_title_buttons"),o=document.getElementById(this.id+"_title_usericon"),r=o?o.offsetWidth:0;if(this.userIconClass||!0===this.useCustomLeft){var h=parseInt(WebSquare.style.getComputedStyle(t,"paddingLeft"),10),d=parseInt(WebSquare.style.getComputedStyle(t,"paddingRight"),10),a=parseInt(WebSquare.style.getComputedStyle(s,"marginLeft"),10),l=t.offsetWidth-s.offsetWidth-h-d-i.offsetWidth-a-r;l<e.offsetWidth?e.style.width=l+"px":(e.style.width="",l<e.offsetWidth&&(e.style.width=l+"px"))}else e.style.width=t.clientWidth-15-i.clientWidth-s.clientWidth+"px"}catch(t){n.Y.printStackTrace(t,null,this)}},l.prototype.getWindow=function(){try{var t,i=this.getChild(this.id+"_content");return i&&(t=i.getWindow()),t}catch(t){n.Y.printStackTrace(t,null,this)}}}}]);