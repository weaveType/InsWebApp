(function(){var __webpack_modules__={2660:function(t,e,i){"use strict";i.d(e,{Q:function(){return l}});var o,s=i(467),r=i(2284),a=i(4756),n=i.n(a),l={};l._binitImport=!1,l.useWebSquareLicense=!0,l.excludeSet=null,l.$integrity=function(t,e,i){if(void 0===t)return WebSquare.util&&WebSquare.util.watermark&&!WebSquare.$integiry.flag&&WebSquare.util.watermark("integrity check failed!!!"),WebSquare.$integiry.flag;!0===t?WebSquare.$integiry.passed.push(e):!1===t&&(WebSquare.$integiry.flag=!1,WebSquare.$integiry.failed.push({original:e,runtime:i}))},l.setFullViewInHtml=function(t,e,i){try{var o=function(){if(!l.onResizing){var e=null,i=window.innerWidth||document.body.clientWidth,o=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var s=t();if(null!==s&&"object"===(0,r.A)(s)&&s.baseHeight&&s.baseWidth){var a=i/s.baseWidth,n=o/s.baseHeight;e=a>n?n:a}}null!=e&&(l.onResizing=!0,l.zoomed(document.body,e),document.body.style.width=s.baseWidth+"px",document.body.style.height=s.baseHeight+"px",l.onResizing=!1,l.fullViewed=!0,l.fullViewRatio=e)}},s=!0===(i=i||{}).resizeOnce,a=null,n={width:window.innerWidth||document.body.clientWidth,height:window.innerHeight||document.body.clientHeight};if(null!==t&&"function"==typeof t){var h=t();if(null!==h&&"object"===(0,r.A)(h)&&h.baseHeight&&h.baseWidth){var d=n.width/h.baseWidth,c=n.height/h.baseHeight;a=d>c?c:d}}l.fullViewed=!0;var u=window.WebSquareExternal&&WebSquareExternal.w2xPath||WebSquare.net.getParameter("w2xPath")||WebSquare.w2xPath||l.configurationJSON[0].WebSquare["welcome-file"]["@value"];if("string"==typeof u&&u.indexOf(e)>=0){l.fullViewRatio=a,function(t){var e,i="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+h.baseWidth+"px;height : "+h.baseHeight+"px;}",o=WebSquare.document.getElementsByTagName("head")[0];l.fullViewClass=!0,l.fullViewClassCssText=i,l.fullViewRatio=t,WebSquare.core.browserCheck.ie?((e=document.createElement("style")).setAttribute("type","text/css"),e.styleSheet.cssText=i,o.appendChild(e)):((e=WebSquare.document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(i)),o.appendChild(e))}(a);var p=function(){WebSquare&&WebSquare.scriptSectionExcuteFlag&&"executed"===WebSquare.scriptSectionExcuteFlag&&(clearInterval(g),o(),s||WebSquare.getBody().event.addListener(window,"onresize",o))};p();var g=setInterval(p,70)}}catch(t){WebSquare.exception.printStackTrace(t)}},l.zoomed=function(t,e){if(WebSquare.core.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top",l.fullViewRatio=e;else if(t&&t.style&&(t.style["-webkit-transform"]="scale("+e+")",t.style["-moz-transform"]="scale("+e+")",t.style["-ms-transform"]="scale("+e+")",t.style["-o-transform"]="scale("+e+")",t.style.transform="scale("+e+")",t.style["transform-origin"]="top left",l.fullViewRatio=e,l.fullViewClass)){l.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].textContent==l.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},l.globalEval=function(t,e){var i;return e||(i=l.configurationJSON[0].WebSquare.eval||l.configurationJSON[0].WebSquare.executeScript)&&(i=i["@value"]),l._globalEval(t,{type:i||e})},l._globalEval=function(t,e){if(t&&"string"==typeof t)try{if(null==e&&(e={}),l.fixErrorLineNumber&&"internal"==e.type||"script"===e.type){l.fixErrorLineNumber&&l.globalEvalArr.push(t);var i=document.createElement("script");i.type="text/javascript",i.text=t,i.setAttribute("data-wqinternal","true"),(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(i)}else window.execScript&&""!==t?window.execScript(t):new Function(t)()}catch(i){var o=[],s="\n<<Internal JavaScript Source Block"
;if(t)for(var r=t.split(WebSquare.scriptIdentifier),a=r.length>1?1:0,n=1,h=0;h<r.length;h++)if(""!=r[h]){var d=r[h].split("\n"),c=d[0]+"",u=c.indexOf('";');u>0&&(c=d[0].substring(0,u),d[0]=d[0].substring(u+2)),1===a?o.push("\n"+s+" ["+c+"] Start>>"):o.push("\n"+s+" Start>>");for(var p=0,g=d.length;p<g;p++)o.push("\n"),o.push("["),o.push(l.fillZero(n,4)),o.push("]"),o.push(d[p]),n++;1===a?o.push(s+" ["+c+"] End>>"):o.push(s+" End>>")}e.path&&o.push("\n","xml page url:",e.path),this.printStackTrace(i,"bootloader.globalEval:","* message     : "+i.message+o.join(""))}},l._isCache=function(t){var e=!1;if(null==l.importCache[t]?l.importCache[t]=t:e=t,!0===l.useWebSquareLicense){var i=t;if(i.indexOf("uiplugin.")>=0&&(i=(i=i.replace(".","/"))+i.substring(i.indexOf("/"))+".js",l.importCache[i]))return i;if(!l.incrementalChunkImport)for(var o=0;o<WebSquare.allPluginArr.length&&0==e;o++)if(WebSquare.allPluginArr[o]==i){e=i;break}}return e},l._getloadPath=function(t,e){var i;!0===l.useWebSquareLicense?t.indexOf("/")>-1?"engine"==t.split("/")[0]||"uiplugin"==t.split("/")[0]?(void 0===e&&l.printLog("bootloader.imports [engine/uiplugin]["+t+"]"),i=l.loadPath2(t)):(void 0===e&&l.printLog("bootloader.imports [ext]["+t+"]"),i=t):"function"!=typeof l.parseObjPath(t)&&(void 0===e&&l.printLog("bootloader.imports [object]["+t+"]"),i=l.loadPath2(t)):t.indexOf("/")>-1?i=t:"function"!=typeof l.parseObjPath(t)&&(i=l.loadPath(t));return i},l.importAsync=function(t,e){if(t){var i=l._isCache(t);if(i)return l.importCache[i];var o,s=Promise.resolve(),r=e&&!0===e.import;if(!0===l.useWebSquareLicense)try{var a=t;if(!0===l.useWebSquareLicense&&a.indexOf("uiplugin.")>=0&&(a=(a=a.replace(".","/"))+a.substring(a.indexOf("/"))+".js"),l.incrementalChunkImport&&WebSquare.allPluginArr.indexOf(a)>-1)for(;l.currentChunkNum<l.engineChunkNum&&!l.importCache[a];)l.importChunkPlugin(l.currentChunkNum++,l.engineChunkNum);else o=l._getloadPath(a),o=l.getEngineUri(o),s=r?WebSquare._dynamicImport(o):l.writeAsync(o)}catch(e){l.printStackTrace(e,"bootloader.imports ["+t+"]")}else try{o=l._getloadPath(t),o=l.getEngineUri(o),s=r?WebSquare._dynamicImport(o):l.writeAsync(o)}catch(e){l.printStackTrace(e,"bootloader.importAsync ["+t+"]")}return l.importCache[t]=s,s}},l.write=function(t,e,i){try{var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.type="text/javascript",s.src=t,i&&(s.onload=function(){i()}),o.appendChild(s),o=null}catch(t){this.printStackTrace(t,"bootloader.write")}},l.writeAsync=function(t,e){try{return new Promise((function(e,i){var o=document.head||document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script");s.type="text/javascript",s.src=WebSquare._getModuleSrc(t),s.onload=function(){e()},s.onerror=function(t){var e=t&&t.target?t.target.src:"";i(e)},o.appendChild(s),o=null}))}catch(t){this.printStackTrace(t,"bootloader.write")}},l.importChunkPlugin=function(t,e){if(!0===l.useWebSquareLicense)try{if(t>=e)return!1;var i=WebSquare.baseServletURI+"javascriptPluginAll.wq?";e=e||1;WebSquare.engineType&&(i+=WebSquare.engineType),(i=i+"idx="+t+"&chunkNum="+e).length>3&&(i=i.indexOf(".wq")>=0?l.getEngineVersionPostfix(i):1==WebSquare.WebSquareEngineCache?l.getEngineCachePostfix(i):l.getRandomPostfix(i));var o=l.getXMLHTTPObject();return o.open("GET",i,!1),o.send(null),l.globalEval(o.responseText),!0}catch(e){"",this.printStackTrace(e,"bootloader.importChunkPlugin ["+t+"]")}},l.importPluginAll=(0,s.A)(n().mark((function t(){var e,i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0,null!=l.importCache.ALL_PLUGIN){t.next=6;break}l.importCache.ALL_PLUGIN="ALL_PLUGIN",t.next=7;break;case 6:return t.abrupt("return",e);case 7:if(!0!==l.useWebSquareLicense){t.next=27;break}if(t.prev=8,i=WebSquare.baseServletURI+"javascriptPluginAll.wq",WebSquare.engineType&&(i=i+"?"+WebSquare.engineType.substring(0,WebSquare.engineType.length-1)),
"/"!=i.charAt(0)&&0!=i.search(/http(s)?:\/\//)&&(i=WebSquare.baseServletURI+i),i.length>3&&(i=i.indexOf(".wq")>=0?l.getEngineVersionPostfix(i):1==WebSquare.WebSquareEngineCache?l.getEngineCachePostfix(i):l.getRandomPostfix(i)),"all"!==WebSquare.pluginCache){t.next=18;break}null==(o=l.loadUri(i))||""==o?e=1:l.globalEval(o),t.next=21;break;case 18:return WebSquare.startApplication=function(){},t.next=21,l.writeAsync(i,void 0,(function(){l._afterEngineLoad(),window.WebSquareExternal&&!0===window.WebSquareExternal._onload&&WebSquare.startApplication()}));case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(8),e=2,l.printLog("bootloader.importPluginAll module imports failure.");case 27:return t.abrupt("return",e);case 28:case"end":return t.stop()}}),t,null,[[8,23]])}))),l.requires=function(t){try{"function"!=typeof l.parseObjPath(t)&&(1==WebSquare.hybridApp&&WebSquare.WebSquaredoc&&!0===l.useWebSquareLicense&&("string"!=typeof t||"uiplugin"!==t.slice(0,8)&&"engine"!==t.slice(0,6)||(t=l.getEngineUri("HybridPluginAll_ui_4.js"))),imports(t))}catch(t){l.printStackTrace(t,"bootloader.requires")}},l.requireAsync=function(){var t=(0,s.A)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,"string"==typeof e){t.next=4;break}return t.abrupt("return");case 4:if("uiplugin."!==(e=e.wq_trim()).slice(0,9)&&"engine."!==e.slice(0,7)){t.next=7;break}return t.abrupt("return",WebSquare._loadModuleDynamic(e));case 7:if((i=l.parseObjPath(e))&&"{}"!==JSON.stringify(i)){t.next=11;break}return t.next=11,l.importAsync(e);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),l.printStackTrace(t.t0,"bootloader.requires");case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),l.inquires=function(){var t=(0,s.A)(n().mark((function t(e){var i,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=l.parseObjPath(e),o=l.inquiresPath(e),"function"==typeof i){t.next=7;break}return t.next=7,l.importAsync(o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),l.printStackTrace(t.t0,"bootloader.inquires");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),l.inquiresPath=function(t){return WebSquare.sp5ResourcePath+"/"+t},l.parseObjPath=function(t,e){try{var i=function(t){if("object"!==(0,r.A)(t))return!1;if(t===WebSquare||t===WebSquare.uiplugin)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},o=t.replace(/\//g,"."),s=null!=e?e:WebSquare,a="";a=o.startsWith("engine")?o.replace("engine.","").split("."):o.startsWith("control")?o.replace("control.","").split("."):o.startsWith("uiplugin.pivot.")?o.replace("uiplugin.pivot.","uiplugin.").split("."):o.split(".");for(var n=0,h=a.length;n<h&&i(s);n++)s=l.evalProp(a[n],s);return s}catch(t){this.printStackTrace(t,"bootloader.parseObjPath")}},l.loadPath=(o={},function(t){try{if(!o[t])if("js"===t.slice(-2))o[t]=t;else{var e=t.split(".");e[e.length]=e[e.length-1]+".js",o[t]=e.join("/")}return o[t]}catch(t){l.printStackTrace(t,"bootloader.loadPath")}}),l.loadPath2=function(t){try{return t}catch(t){this.printStackTrace(t,"bootloader.loadPath")}},l.evalProp=function(t,e){try{var i={};return e&&l.isDef(t,e)&&(i=e[t]),i}catch(t){this.printStackTrace(t,"bootloader.evalProp")}},l.loadUri=function(t){var e=null;try{if("false"===WebSquare.pluginCache)e=this.getText(t)||"";else if("all"===WebSquare.pluginCache)try{for(var i=self,o=0;null!=i.opener;)if(o++,i=i.opener,o>100)throw{message:"opener limit exceeded"};null==i.top[WebSquare.pluginCacheVariable]&&(i.top[WebSquare.pluginCacheVariable]={}),null==i.top[WebSquare.pluginCacheVariable][t]?(e=this.getText(t),i.top[WebSquare.pluginCacheVariable][t]=e.toString().slice(0)):e=i.top[WebSquare.pluginCacheVariable][t]}catch(i){e=this.getText(t)||""}else if(void 0===(e=l.PluginCache[t])){try{
window.opener&&window.opener.WebSquare?null!=(e=window.opener.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t)):window.parent!==window.self&&window.parent.WebSquare&&null!=(e=window.parent.WebSquare.BootLoader.loadUri(t))&&""!=e||(e=this.getText(t))}catch(i){e=this.getText(t)}null!=e&&""!=e&&l.setPluginCache(t,e)}}catch(t){this.printStackTrace(t,"bootloader.loadUri")}return e},l.getText=function(t){try{var e=t,i=this.getXMLHTTPObject();try{l.openEngineUri(t,i);var o=window.WebSquareExternal.charset;if(o&&i.overrideMimeType("text/javascript;charset="+o),i.send(null),i.status>="400")return e.indexOf("uiplugin")>-1?l.printError("Plugin ["+e+"] Does not exist."):l.printError("Module ["+e+"] Does not exist."),i=null,null}catch(t){e.indexOf("uiplugin")>-1?l.printError("Plugin ["+e+"] Does not exist."):l.printError("Module ["+e+"] Does not exist.")}var s=i.responseText;return i=null,s}catch(e){this.printStackTrace(e,"bootloader.getText("+t+")")}},l.getXMLHTTPObject=function(t){try{var e=null;try{l.useActiveXObject&&!0!==t?e=new ActiveXObject(l._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}return void 0===e||null==e?(l.printError("This Browser does not support Ajax."),null):e}catch(t){this.printStackTrace(t,"bootloader.getXMLHTTPObject")}},l.isDef=function(t,e){try{return null==e&&(e=window),null!=e[t]&&void 0!==e[t]}catch(t){this.printStackTrace(t,"bootloader.isDef")}},l.printError=function(t){try{if(!0===WebSquare.skipLog)return;void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?WebSquare.logger.printLog("[WebSquare BootLoader Error]\n\n"+t):l.printLog("[WebSquare BootLoader Error]\n\n"+t)}catch(e){l.printLog("[WebSquare BootLoader Error]\n\n"+t)}},l.printStackTrace=function(t,e,i){if(!0!==WebSquare.skipLog){var o="";for(var s in t){var r=s+"               ";r=r.substring(0,15),o+="number"==s?r+":"+(65535&t[s])+"\n":r+":"+t[s]+"\n"}o=void 0===i?e+" Error occurs during the execution. \n\n"+o:e+" Error occurs during the execution.  \n"+i+"\n\n"+o;try{void 0!==WebSquare.logger&&void 0!==WebSquare.logger.printLog?(WebSquare.logger.printLog(o),t&&void 0===t.aleradyThrow&&(t.aleradyThrow="djshin")):l.printLog(o),!0===WebSquare.errorConsole&&console.error(o);var a=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),n=WebSquare.util.getGlobalFunction(a);n&&n(t,t.message)}catch(t){l.printLog(o)}}},l.setPluginCache=function(t,e){l.PluginCache[t]=e},l.browserCheck=function(){return navigator.appName},l.engineLoadingMode={ie:1,moz:1,opera:1,android:1,iphone:1,blackberry:1,chrome:1,safari:1,mode:1},l.browserCheck.ie=null!=navigator.appName.match(/Explorer/i),l.browserCheck.ieAllVersion=null!=navigator.appName.match(/Explorer/i)||null!=navigator.userAgent.match(/Trident/i)||null!=navigator.userAgent.match(/MSIE/i),l.browserCheck.moz=null!=navigator.userAgent.match(/Firefox/i)||null!=navigator.userAgent.match(/Gecko/i)&&null==navigator.userAgent.match(/AppleWebKit/i)&&null==navigator.userAgent.match(/Trident/i),l.browserCheck.opera=null!=navigator.userAgent.match(/Opera/i),l.browserCheck.android=/Android/.test(navigator.userAgent),l.browserCheck.iphone=/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform),l.browserCheck.ipad=/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,l.browserCheck.ipod=/iPod/.test(navigator.userAgent),l.browserCheck.blackberry=/BlackBerry/.test(navigator.userAgent),l.browserCheck.chrome=!l.browserCheck.ie&&/Chrome/.test(navigator.userAgent),l.browserCheck.chromeEdge=!l.browserCheck.ie&&/Chrome/.test(navigator.userAgent)&&/Edg/.test(navigator.userAgent),void 0!==navigator.vendor?l.browserCheck.safari=navigator.vendor.indexOf("Apple")>-1:l.browserCheck.safari=!1,l.browserCheck.ffox=/Firefox/.test(navigator.userAgent),l.browserCheck.spartan=/Edge/.test(navigator.userAgent),l.browserVersion=function(){try{
if(l.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3";if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else{if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}return""}catch(t){this.printStackTrace(t,"bootloader.browserVersion")}},l.printLog=function(t){try{if(!0===WebSquare.skipLog||!WebSquare.logEnableFlag)return;if(!window.console){var e=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<e.length;++i)window.console[e[i]]=function(){}}WebSquare.logMsgArray.length>500&&(delete WebSquare.logMsgArray,WebSquare.logMsgArray=[],WebSquare.logMsgArray.push(l.getLogTime()+" BootLoader] Delete logs for reducing memory usage."));var o=l.getLogTime(),s=" BootLoader] "+t;WebSquare.logMsgArray.push(o+s),WebSquare.printConsole&&console.log(o+s),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(o+WebSquare.logFileName+s)}catch(t){console.error(t)}},l.getLogTime=function(t){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),o=i-WebSquare.logTime,s=l.fillZero(e.getHours(),2)+":"+l.fillZero(e.getMinutes(),2)+":"+l.fillZero(e.getSeconds(),2)+"."+l.fillZero(e.getMilliseconds(),3);return o<1e5?(WebSquare.logTotalTime+=o,s+=" "+l.fillZero(o,5)+" "+l.fillZero(WebSquare.logTotalTime,6)):s+=" 00000 000000",WebSquare.logTime=i,s},l.fillZero=function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},l.getParameter=function(t,e,i){try{var o=t.indexOf("?");if(o>=0)for(var s=t.substring(o+1).split("&"),r=0;r<s.length;r++){var a=s[r].split("=");if(2==a.length&&a[0]==e)return""==a[1]&&void 0!==i?i:a[1]}}catch(t){l.printStackTrace(t,"bootloader.getParameter")}return void 0!==i?i:""},l.getSignature=function(t,e){if(void 0===e&&(e=0),e>5)return"...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&t.toString()!=t.caller.toString()&&(i=l.getSignature(t.caller,++e));var o,s=t.toString(),r=s.indexOf('["');return-1==r?-1==(o=s.indexOf(")"))?"    at "+s+"\n"+i:"    at "+s.substring(0,o+1)+"\n"+i:-1==(o=s.indexOf('"',r+2))?"    at "+s+"\n"+i:"    at "+s.substring(r+2,o)+"\n"+i}catch(e){return t}},l.getImagePostfix=function(t){try{!0===l.useWebSquareLicense&&(t=l.getImageVersionPostfix(t))}catch(t){l.printStackTrace(t,"bootloader.getImagePostfix")}return t},l.openEngineUri=function(t,e){try{t=l.getEngineUri(t),e.open("GET",t,!1)}catch(t){l.printStackTrace(t,"openEngineUri")}},l.getEngineUri=function(t){return"/"!=t.charAt(0)&&0!=t.search(/http(s)?:\/\//)&&0!=t.search(/file:\/\//)&&(t=t.indexOf(".wq")>=0?WebSquare.baseServletURI+t:WebSquare.baseURI+t),1==WebSquare.hybridApp?("/"==t.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(t=WebSquare.w2xDocumentRoot+t),
t):(t.length>3&&(t.indexOf(".wq")>=0?t=l.getEngineVersionPostfix(t):1==WebSquare.WebSquareEngineCache&&(t=l.getEngineCachePostfix(t))),t)},l._getEncodeURL=function(t){try{if(!WebSquare.BootLoader.browserCheck.ieAllVersion||"string"!=typeof t)return t;for(var e=t,i=0;i<t.length;i++)if(t.charCodeAt(i)>127){e=encodeURIComponent(t).replace(/%2F/g,"/");break}return e}catch(e){return t}},l.openResourceUri=function(t,e){try{if(WebSquare.isHoneyComb)e.open("GET",t,!1);else{var i=l.getResourcePostfix(t);e.open("GET",i,!1)}}catch(e){return t}return t},l.getResourcePostfix=function(t){try{var e=l.generateSuffixPostfix(t);e&&"object"==(0,r.A)(WebSquare.suffix)?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:t=0==WebSquare.WebSquareCache?l.getRandomPostfix(t):l.getResourceCachePostfix(t)}catch(e){return t}return t},l.getImageVersionPostfix=function(t){try{var e=l.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:null!=l.imageVersion&&(t.indexOf("?")>-1?t+="&postfix="+l.imageVersion:t+="?postfix="+l.imageVersion)}catch(e){return t}return t},l.getEngineVersionPostfix=function(t){try{t.indexOf("?")>-1?t+="&postfix="+WebSquare.ver:t+="?postfix="+WebSquare.ver,t.indexOf("?")>-1?t+="&compression="+l.compression:t+="?compression="+l.compression,WebSquare.buildID&&(t.indexOf("?")>-1?t+="&build="+WebSquare.buildID:t+="?build="+WebSquare.buildID),window.WebSquarePluginOrderHash&&(t.indexOf("?")>-1?t+="&poh="+window.WebSquarePluginOrderHash:t+="?poh="+window.WebSquarePluginOrderHash)}catch(e){return t}return t},l.getRandomPostfix=function(t){try{if("string"!=typeof t)return t;var e=t.toLowerCase();for(var i in{png:!0,jpg:!0,jpeg:!0,gif:!0,bmp:!0,tiff:!0,tif:!0,svg:!0,raw:!0,psd:!0,ai:!0,eps:!0,pdf:!0,ico:!0,xcf:!0,webp:!0,heic:!0,heif:!0}){var o="."+i;if(e.slice(-o.length)===o)return t}t.indexOf("?")>-1?t+="&postfix="+(new Date).getTime()+WebSquare.safeRandom():t+="?postfix="+(new Date).getTime()+WebSquare.safeRandom()}catch(e){return t}return t},l.getResourceCachePostfix=function(t){try{var e=l.generateSuffixPostfix(t);if(e)t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e;else if(l.resourcePostfix){for(var i=0;i<l.resourcePostfixKey.length;i++)if(t.indexOf(l.resourcePostfixKey[i])>-1)return t.indexOf("?")>-1?t+="&postfix="+l.resourcePostfixValue[i]:t+="?postfix="+l.resourcePostfixValue[i],t;t.indexOf("?")>-1?t+="&postfix="+l.resourcePostfix:t+="?postfix="+l.resourcePostfix}}catch(e){return t}return t},l.getEngineCachePostfix=function(t){try{var e=l.generateSuffixPostfix(t);e?t.indexOf("?")>-1?t+="&postfix="+e:t+="?postfix="+e:l.enginePostfix&&(t.indexOf("?")>-1?t+="&postfix="+l.enginePostfix:t+="?postfix="+l.enginePostfix)}catch(e){return t}return t},l.rebuildInnerHTML=function(t,e){WebSquare.core._safeInnerHTML(t,e)},l.addObjStr=function(t,e){t.insertAdjacentHTML("beforeEnd",e)},l.generateSuffixPostfix=function(t){var e="";if(WebSquare.suffix){if("string"==typeof WebSquare.suffix)return WebSquare.suffix;try{var i=["day","week","month","year","random","hour"],o=[],s=new Date,r=new Date;o.push(s.getDate()<=9?"0"+s.getDate():""+s.getDate());var a=new Date(r.setDate(1)).getDay(),n=Math.ceil((s.getDate()+a)/7);o.push(n),o.push(s.getMonth()<9?"0"+(s.getMonth()+1):""+(s.getMonth()+1)),o.push(s.getFullYear()),o.push(s.getTime()+WebSquare.safeRandom()),o.push(s.getHours());for(var h=function(t){if(t.indexOf("$")<0)return t;for(var e=0;e<i.length;e++)for(var s=t.indexOf("${"+i[e]+"}");s>=0;)s=(t=t.substring(0,s)+o[e]+t.substring(s+i[e].length+3)).indexOf("${"+i[e]+"}",s);return t},d=WebSquare.suffix.suffix,c=0;c<d.length;c++){var u=d[c];if(u.postfixMap&&"true"===u.postfixMap.enable&&WebSquare.suffix._postfixMap){var p=WebSquare.suffix._postfixMap[t];if(p){e=p;break}if(u.postfixMap.defaults){e=h(u.postfixMap.defaults);break}}var g=!0;if(u.path&&(g=!1,t.indexOf(u.path)>=0&&(g=!0)),g){var m="defaults",f={extension:""};if(f[m]="",u){for(var b in u){var y=b;if("default"===b&&(y=m),y==m&&(f[y]=h(u[y])),"extension"==y){
var v=t.substring(t.lastIndexOf(".")+1);v.indexOf("?")>0&&(v=v.substring(0,v.indexOf("?"))),u.extension[v]&&(f[y]=h(u.extension[v]))}}""==f.extension&&""!=f[m]?str=f[m]:e=f.extension}if(e)break}}}catch(t){l.printStackTrace(t,"generateSuffixPostfix")}}return e},l.generatePostfix=function(t){try{if("day"==t){var e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();t=o.getFullYear()+"_"+e+"_"+i}else if("week"==t){var o=new Date,s=new Date,r=new Date(s.setDate(1)).getDay(),a=Math.ceil((o.getDate()+r)/7);e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e+"_W"+a}else if("month"==t){e=(o=new Date).getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1);t=o.getFullYear()+"_"+e}else if(t.indexOf("hour")>-1){o=new Date;var n=t.wq_replaceAll("hour","").wq_trim();""==n&&(n=1);var h=parseInt(n,10);o.setHours(o.getHours()+h);e=o.getMonth()<9?"0"+(o.getMonth()+1):""+(o.getMonth()+1),i=o.getDate()<=9?"0"+o.getDate():""+o.getDate();var d=o.getHours()<=9?"0"+o.getHours():""+o.getHours();t=o.getFullYear()+"_"+e+"_"+i+"_"+d}}catch(t){l.printStackTrace(t,"bootloader.generatePostfix")}return t},l.loadLanguagePack=function(){var t=(0,s.A)(n().mark((function t(e){var i,o,s,r,a,h;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=l.getBrowserLanguage(),r=WebSquare.core.getConfiguration("/WebSquare/language/@defaultValue")||"en",a=WebSquare.core.getConfiguration("/WebSquare/language/@path")||"","string"==typeof(i=e||WebSquare.cookie.getCookie("system_language")||i||WebSquare.core.getConfiguration("language")||r)&&(i=i.toLowerCase()),a?s=a+"/"+i+".js":("ko"==i?s="message/ko.js":"cn"==i||"zh"==i?s="message/cn.js":"ja"==i||"jp"==i?s="message/ja.js":(h=WebSquare.clientLang,s=""==h?"message/en.js":"message/"+h+".js"),s=l.inquiresPath(s)),!l._isCache(s)){t.next=9;break}return t.abrupt("return");case 9:return o=l._getloadPath(s),o=l.getEngineUri(o),t.prev=11,t.next=14,l.writeAsync(o,"UTF-8");case 14:t.next=21;break;case 16:if(t.prev=16,t.t0=t.catch(11),null!=e){t.next=21;break}return t.next=21,l.loadLanguagePack(r);case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(0),l.printStackTrace(t.t1,"bootloader.generatePostfix");case 26:case"end":return t.stop()}}),t,null,[[0,23],[11,16]])})));return function(e){return t.apply(this,arguments)}}(),l.getBrowserLanguage=function(){try{var t=navigator.language||navigator.browserLanguage;return t.indexOf("-")>-1&&(t=t.substring(0,t.indexOf("-"))),t}catch(t){l.printLog("bootloader.getLanguage failure.")}},l.loadEngineModuleAsync=function(){var t=(0,s.A)(n().mark((function t(e){var i,o,s,r,a,h,d,c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=WebSquare.core.getChildConfiguration("/WebSquare/engine",{singleMode:!0}),o=[],s=0,r=i.length;case 3:if(!(s<r)){t.next=29;break}if(a=i[s],h=a["@src"],d=a["@cache"],c=!0===a["@async"]||"string"==typeof a["@async"]&&"true"===a["@async"].toLowerCase(),h){t.next=10;break}return t.abrupt("continue",26);case 10:if(void 0!==WebSquare.moduleList[h]&&null!==WebSquare.moduleList[h]||(WebSquare.moduleList[h]=1),!(e&&WebSquare.moduleList[h]>1&&"false"!=d)){t.next=13;break}return t.abrupt("continue",26);case 13:if("false"==WebSquare.core.getConfiguration("/WebSquare/spa/scriptCache/@value").toLowerCase()&&"true"!=d||WebSquare.moduleList[h]++,"false"==d&&(WebSquare.moduleList[h]=0),1==WebSquare.hybridApp&&"/"==h.charAt(0)&&""!=WebSquare.w2xDocumentRoot&&(h=WebSquare.w2xDocumentRoot+h),h=WebSquare.core._getWpackUrl(h,a["@wpack"]),h=WebSquare.core._getContextRootUri(h),h=0==WebSquare.WebSquareCache?l.getRandomPostfix(h):l.getResourceCachePostfix(h),u=l.writeAsync(h,a.charset),!0!==c){t.next=24;break}o.push(u),t.next=26;break;case 24:return t.next=26,u.catch((function(t){l.printLog("[ERROR] Module load fail :"+t)}));case 26:s++,t.next=3;break;case 29:if(!(o.length>0)){t.next=32;break}return t.next=32,Promise.allSettled(o).catch((function(t){
l.printLog("[ERROR] Module load fail :"+t)}));case 32:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l.loadUdcRequires=(0,s.A)(n().mark((function t(){var e,i,o,s,r,a,h,d,c,u;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=WebSquare.core.getChildConfiguration("/WebSquare/udc/requires",{singleMode:!0}),i=[],o=0,s=e.length;case 3:if(!(o<s)){t.next=22;break}if(r=e[o],a=WebSquare.core.getPageURL(r["@src"]),h=r["@type"],d=r["@as"],"page"!==h||!d){t.next=18;break}if(null!=WebSquare.core.udcObj[d]){t.next=16;break}return c={msaName:r["@msaName"]},u=WebSquare.core.getPageURL(a,c),t.next=14,WebSquare.jsLoader._loadObj(u,c);case 14:WebSquare.core.udcObj[d]=t.sent,WebSquare.core.udcMsa[d]=c.msaName;case 16:t.next=19;break;case 18:i.push(WebSquare.util.loadUserComponent(a));case 19:o++,t.next=3;break;case 22:if(!(i.length>0)){t.next=25;break}return t.next=25,Promise.allSettled(i).catch((function(t){l.printLog("[ERROR] UDC load fail :"+t)}));case 25:case"end":return t.stop()}}),t)}))),l.loadInheritRequires=(0,s.A)(n().mark((function t(){var e,i,o,s,r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=WebSquare.core.getChildConfiguration("/WebSquare/inherit/requires",{singleMode:!0}),i=WebSquare.core.getChildConfiguration("/WebSquare/exc/requires",{singleMode:!0}),e=e.concat(i),o=[],s=0,r=e.length;s<r;s++)a=e[s],o.push(WebSquare.util.loadInheritComponent(a["@src"]));if(!(o.length>0)){t.next=8;break}return t.next=8,Promise.allSettled(o).catch((function(t){l.printLog("[ERROR] Inherit load fail :"+t)}));case 8:case"end":return t.stop()}}),t)}))),l.initJSONConfig=function(){for(var t=!1,e=l.configurationJSON.length-1;e>=0;e--){var i=l.configurationJSON[e];for(var o in i.WebSquare){var s=i.WebSquare[o];if("[object Array]"===Object.prototype.toString.call(s)&&(s=s[0]),"engineCache"==o)"true"==s["@enable"]&&(WebSquare.WebSquareEngineCache=!0,l.enginePostfix=l.generatePostfix(s["@postfix"])),"false"==s["@compression"]?l.compression=!1:"always"==s["@compression"]?l.compression="always":l.compression=!0,"false"===s["@pluginCache"]?WebSquare.pluginCache="false":"all"===s["@pluginCache"]&&(WebSquare.pluginCache="all");else if("imageCache"==o&&"true"==s["@enable"])l.imageVersion=l.generatePostfix(s["@version"]),l.imageServlet=s["@serverUrl"],l.imageHostUrl=s["@hostUrl"],""==l.imageServlet&&(l.imageServlet=WebSquare.baseServletURI+"resource.wq?url="),l.imageHostUrl&&("http"==l.imageHostUrl.substring(0,4)&&(l.imageHostUrl=l.imageHostUrl.substring(7)),"/"==!l.imageHostUrl.substring(l.imageHostUrl.length-1,l.imageHostUrl.length)&&(l.imageHostUrl=l.imageHostUrl+"/"));else if("license"==o)s["@value"],l.useWebSquareLicense=!0;else if("xhr"==o)t=!0,l.browserCheck.ieAllVersion&&("false"==s["@useActiveXObject"]?l.useActiveXObject=!1:l.useActiveXObject=!0),"true"==s["@useResponseXML"]&&(l.useResponseXML=!0);else if("debug"==o)"true"==s["@console"]&&window.console&&(WebSquare.printConsole=!0),"true"==s["@remoteConsole"]&&(WebSquare.remoteConsole=!0),"true"==s["@errorConsole"]&&(WebSquare.errorConsole=!0),"true"==s["@fixErrorLineNumber"]&&(l.fixErrorLineNumber=!0),"true"==s["@weinre"]&&(WebSquare.useWeinre=!0,null!=s["@weinreUrl"]&&""!=s["@weinreUrl"]&&(WebSquare.weinreUrl=s["@weinreUrl"])),"true"==s["@skipLog"]&&(WebSquare.skipLog=!0,WebSquare.logger&&"function"==typeof WebSquare.logger._skipLog&&WebSquare.logger._skipLog(WebSquare.logger)),"true"==s["@printError"]&&(WebSquare.printError=!0);else if("environment"==o){if("nocache"==s["@cache"])WebSquare.WebSquareCache=!1;else for(var r in l.resourcePostfix=l.generatePostfix(s["@postfix"]),WebSquare.WebSquareCache=!0,l.resourcePostfixKey=[],l.resourcePostfixValue=[],s){var a=s[r];"[object Array]"===Object.prototype.toString.call(a)&&(a=a[0]),"postfix"==r&&(l.resourcePostfixKey.push(a["@key"]),l.resourcePostfixValue.push(l.generatePostfix(a["@value"])))}"development"==s["@mode"]&&(window._alert=function(t){alert(t)}),
s["@buildID"]&&""==WebSquare.buildID&&(WebSquare.buildID=s["@buildID"])}else if("engineLoadingMode"==o){var n={ie:parseInt(s["@ie"],10),moz:parseInt(s["@moz"],10),opera:parseInt(s["@opera"],10),android:parseInt(s["@android"],10),iphone:parseInt(s["@iphone"],10),blackberry:parseInt(s["@blackberry"],10),chrome:parseInt(s["@chrome"],10),safari:parseInt(s["@safari"],10)};for(var r in n){var h=n[r];h>=0&&h<=3&&(l.engineLoadingMode[r]=h)}}else if("engineChunkNum"==o){var d=parseInt(s["@value"],10),c=s.incremental&&"true"===s.incremental["@value"];l.engineChunkNum=d||1,l.currentChunkNum=0,l.incrementalChunkImport=c}else if("userAgentPattern"==o)for(var r in s)r.length>1&&"@"==r.charAt(0)&&s[r]&&(WebSquare.userAgentPattern[r.substring(1)]=s[r]);else if("noConflict"==o)s["@value"]&&(WebSquare.noConflict=s["@value"]),s["@function"]&&(WebSquare.noConflictFunction=s["@function"]);else if("stylesheet"==o){if("link"==s["@import"]&&(WebSquare.styleSheetEarlyImport=1,"false"!=s["@enable"]&&(WebSquare.styleSheetEarlyImport=2,WebSquare.styleSheetEarlyImportName=s["@value"]||"stylesheet_ext.css")),s["@earlyImportList"])for(var r in WebSquare.styleSheetEarlyImportList=s["@earlyImportList"].split(","),WebSquare.styleSheetEarlyImportList)WebSquare.styleSheetEarlyImportList[r]=WebSquare.styleSheetEarlyImportList[r].wq_trim()}else"scriptLoading"==o?"false"==s["@merge"]&&(l.traceWframe=!0):"strictMode"==o?"false"==s["@value"]&&(WebSquare.strictMode=!1):"pageURLPrefix"===o?(WebSquare.pageURLPrefix=s["@value"]||"",WebSquare.pageURLPrefixType=s["@type"]||""):"performance"===o&&window.performance&&window.performance.constructor===window.Performance?WebSquare._performance.use=s["@value"]||!1:"requirejs"===o?s["@timeout"]>0&&(WebSquare.amdTimeout=parseInt(s["@timeout"],10)):"allowedOrigin"===o?WebSquare._allowedOrigin=s["@value"]||"*":"contextRoot"===o?WebSquare._contextRoot=s["@value"]||"":"idAuto"===o&&(WebSquare._idAuto=s["@value"]||WebSquare._idAuto,WebSquare._idAutoPrefix=s["@prefix"]||WebSquare._idAutoPrefix)}}t||l.browserCheck.ieAllVersion},l.setBaseThemeURI=function(){WebSquare.w2xTheme=window.WebSquareExternal.w2xTheme||l.getParameter(location.search,"w2xTheme",""),WebSquare.w2xTheme?l.setCookie("w2xTheme",WebSquare.w2xTheme):WebSquare.w2xTheme=l.getCookie("w2xTheme");var t=WebSquare.baseURI;if(l.configurationJSON[0].WebSquare.theme){WebSquare.w2xTheme=WebSquare.w2xTheme||l.configurationJSON[0].WebSquare.theme["@default"];var e=l.configurationJSON[0].WebSquare.theme.name||[];if("[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<e.length;i++)if(e[i]["@value"]===WebSquare.w2xTheme){t=e[i]["@path"];break}}else t=e["@path"]}0===t.indexOf("/")||t.match(/^http:\/\//)?WebSquare.baseThemeURI=t:WebSquare.baseThemeURI+=t},l.mergeJSON=function(t,e){try{for(var i in e){var o=e[i];if("object"!==(0,r.A)(t[i]))t[i]=o;else if(t[i].constructor==Array)if((WebSquare.core.getConfiguration("/WebSquare/useAppConfig/@value")||!1)&&"column"==i)for(var s=t[i],a=0;a<s.length;a++)s[a]["@inputType"]==e[i]["@inputType"]&&WebSquare.extendKeepingType(s[a],e[i]);else t[i].push(e[i]);else l.mergeJSON(t[i],o)}return t}catch(t){this.printStackTrace(t)}},l.getCookie=function(t){try{for(var e=WebSquare.document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){this.printStackTrace(t)}return null},l.setCookie=function(t,e){WebSquare.document.cookie=t+"="+escape(e)+";path=/"},l._afterEngineLoad=function(){var t=(0,s.A)(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.prev=1,t.next=4,l.loadEngineModuleAsync();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),l.printStackTrace(t.t0,"bootloader._afterEngineLoad"+e);case 9:return t.next=11,l.loadUdcRequires();case 11:return t.next=13,l.loadInheritRequires();case 13:WebSquare._loadCSS(),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(0),this.printStackTrace(t.t1);case 19:
return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t,this,[[0,16],[1,6]])})));return function(e){return t.apply(this,arguments)}}(),l.loadAsync=function(){var t=(0,s.A)(n().mark((function t(e){var i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e){t.next=2;break}return t.abrupt("return");case 2:return i=e.wq_trim(),t.abrupt("return",new Promise((function(t,e){var o=l.getXMLHTTPObject();i.indexOf("://")>-1&&0!==i.indexOf(location.origin)&&(o.withCredentials=!0),o.open("GET",i,!0);var s=function(i){4===o.readyState&&(o.status>="400"||0===o.status?e(o.status):t(o.responseText),o=null)};l.useActiveXObject?o.onreadystatechange=s:(o.onload=s,o.onerror=function(t){e(o.status),o=null}),o.send(null)})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l._initSuffix=(0,s.A)(n().mark((function t(){var e,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="suffix.txt",i="true",window.WebSquareExternal&&window.WebSquareExternal.suffixName&&(e=window.WebSquareExternal.suffixName),window.WebSquareExternal&&void 0!==window.WebSquareExternal.suffixEnable&&"false"!=(i=window.WebSquareExternal.suffixEnable+"")&&(i="true"),"true"!=i){t.next=6;break}return t.abrupt("return",new Promise((function(t,i){var o;try{o=WebSquare.BootLoader.getXMLHTTPObject();var s=WebSquare.baseURI+e+"?postfix="+(new Date).getTime()+WebSquare.safeRandom();o.open("GET",s,!0),o.setRequestHeader("Cache-Control","no-cache"),o.onreadystatechange=function(){if(4==o.readyState){if(200===o.status&&o.responseText){var i=o.responseText.wq_trim();if(i)if("{"===i.charAt(0)&&"}"===i.charAt(i.length-1))try{var s=JSON.parse(i);"object"==(0,r.A)(s)&&Array.isArray(s.suffix)?WebSquare.suffix=s:l.printError("Invalid suffix.txt structure: 'suffix' key is missing or not an array.")}catch(t){l.printError("Failed to parse "+e+": "+t.message)}else WebSquare.suffix=i}t()}},o.send()}catch(t){i()}})));case 6:case"end":return t.stop()}}),t)}))),l._initPostfixMap=(0,s.A)(n().mark((function t(){var e,i,o,s,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!1,i="postfixMap.json",o="","object"==(0,r.A)(WebSquare.suffix)&&WebSquare.suffix.suffix.length>0&&WebSquare.suffix.suffix[0].postfixMap&&("true"===(s=WebSquare.suffix.suffix[0].postfixMap).enable&&(e=!0,s.url&&s.url.length>0&&"/"===(i=(i=s.url).wq_replaceAll("\\","/")).charAt(0)&&(i=i.slice(1))),a="true"===s.cache,o=a?"":"?postfix="+Date.now()+WebSquare.safeRandom()),!e){t.next=6;break}return t.abrupt("return",new Promise((function(t,e){var s;try{s=WebSquare.BootLoader.getXMLHTTPObject();var r=WebSquare.baseURI+i+o;s.open("GET",r,!0),s.onreadystatechange=function(){if(4===s.readyState){if(s.status>=200&&s.status<400&&s.responseText){var e=s.responseText.wq_trim();if(e)try{var o=JSON.parse(e);WebSquare.suffix._postfixMap=o}catch(t){l.printError("Failed to parse "+i+": "+t.message)}}t()}},s.send()}catch(t){e()}})));case 6:case"end":return t.stop()}}),t)}))),l._initImport=(0,s.A)(n().mark((function t(){var e,i,o,s,a,h,d,c,u,p,g,m,f,b;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==l._binitImport){t.next=3;break}return t.abrupt("return");case 3:l._binitImport=!0,l.PluginCache={},l.stopCheckOpener=!1,l.stopCheckParentFrame=!1,l._XMLHTTP_PROGIDS=["Microsoft.XMLHTTP"],l._MSMXL_PROGIDS=["Microsoft.XMLDOM"],l.useActiveXObject=!1,l.useResponseXML=!1,l.useWebSquareXMLParser=!1,l.useWebSquareXPathParser=!1,l.configurationJSON=[],l.fixErrorLineNumber=!1,l.traceWframe=!1,l.globalEvalArr=[],l.performanceCheck={},void 0!==WebSquare.externalOption.startDate?l.performanceCheck.start=WebSquare.externalOption.startDate:l.performanceCheck.start=new Date,l.performanceCheck.mid1=l.performanceCheck.start,l.performanceCheck.mid2=l.performanceCheck.start,l.performanceCheck.mid3=l.performanceCheck.start,l.performanceCheck.mid4=l.performanceCheck.start,
l.performanceCheck.mid5=l.performanceCheck.start,l.performanceCheck.mid6=l.performanceCheck.start,l.performanceCheck.mid7=l.performanceCheck.start,l.performanceCheck.mid8=l.performanceCheck.start,l.performanceCheck.mid9=l.performanceCheck.start,l.performanceCheck.end=l.performanceCheck.start,WebSquare.renderStartTime=l.performanceCheck.mid1,l.ifModifiedSince="Tue, 24 Jan 2006 01:13:57 GMT",function(){},window.WebSquareExternal.skipLog&&(WebSquare.skipLog=window.WebSquareExternal.skipLog),WebSquare.logEnableFlag=!0,window.WebSquareExternal.disableLog&&(WebSquare.logEnableFlag=!window.WebSquareExternal.disableLog),"file"===location.protocol&&(l.useWebSquareLicense=!1),t.next=41;break;case 38:t.prev=38,t.t0=t.catch(0),l.printStackTrace(t.t0,"Initialize baseURI");case 41:if(e=window.WebSquareExternal.useNativeParser&&l.browserCheck.ieAllVersion&&l.browserVersion()>=9,l.browserCheck.ieAllVersion&&!e){try{"object"==(0,r.A)(window.external)&&void 0!==window.external.msActiveXFilteringEnabled&&"unknown"!=typeof window.external.msActiveXFilteringEnabled&&1==window.external.msActiveXFilteringEnabled()&&(WebSquare.msActiveXFilteringEnabled=!0)}catch(t){l.printStackTrace(t,"bootloader._initImport")}try{WebSquare.msActiveXFilteringEnabled,l.useActiveXObject=!1}catch(t){l.useActiveXObject=!1}}if(WebSquare._initImportFunction(),l.importCache={},l.imageServlet=null,l.imageHostUrl=null,l.compression=!0,l.browserCheck.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){l.printStackTrace(t,"bootloader._initImport")}t.prev=49,i="./",o=!1;try{new Function("u","return import(u)"),o=!0}catch(t){o=!1}return i=!o||window.WebSquareExternal&&"dev"===window.WebSquareExternal._mode?WebSquare.baseURI:"../",i+="config.js",s=WebSquare.baseURI+"config.js","string"==typeof WebSquare.configPath&&WebSquare.configPath.length>0&&(i=WebSquare.configPath,s=i),t.next=60,l._initSuffix();case 60:return t.next=62,l._initPostfixMap();case 62:return window.WebSquareExternal&&!0===window.WebSquareExternal.useConfigPostfix&&((a=l.generateSuffixPostfix("config.xml"))||(a=String((new Date).getTime())),h=i.indexOf("?")>-1?"&":"?",i+=h+"postfix="+a),t.next=65,WebSquare._dynamicImport(i,{altModulePath:s});case 65:if(d=t.sent,null==(c=d.default).WebSquare){for(p in(u={}).WebSquare={},c)u.WebSquare[p]=c[p];c=u}for(g in window.WebSquareExternal.configOverride)c.WebSquare[g]=window.WebSquareExternal.configOverride[g];l.configurationJSON.unshift(c),l.initJSONConfig();try{l.setBaseThemeURI()}catch(t){l.printStackTrace(t,"Cannot read config.xml in theme")}1==WebSquare.hybridApp&&"file:"==location.protocol&&""==WebSquare.baseServletURI&&("string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.baseServletURI=WebSquare.hybridSubmissionURL:WebSquare.baseServletURI=l.configurationJSON[0].WebSquare.hybrid.submissionURL["#text"]||"",WebSquare.baseServletURI.lastIndexOf("/")!=WebSquare.baseServletURI.length-1&&(WebSquare.baseServletURI=WebSquare.baseServletURI+"/")),t.next=78;break;case 75:t.prev=75,t.t1=t.catch(49),l.printStackTrace(t.t1,"Cannot read config.xml");case 78:if(l.useActiveXObject=!1,m=location.host.replace(/\./g,"|"),WebSquare.isLocal=m.indexOf("127|0|0|1")>-1||location.host.indexOf("localhost")>-1,WebSquare.useWeinre&&(l.browserCheck.android||l.browserCheck.iphone||l.browserCheck.ipad||l.browserCheck.ipod||l.browserCheck.blackberry)&&function(){window.document;var t=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src=WebSquare.weinreUrl,t.appendChild(e)}(),WebSquare.remoteLogMsgArray.push(""),WebSquare.remoteLogMsgArray.push(location.href),l.printLog("WebSquare AI v6.0"),l.printLog("WebSquare AI Engine v6.0.0"),l.printLog(WebSquare.ver),l.printLog("    Copyright 2009  INSWAVE Systems Co., Ltd. All Rights Reserved."),l.printLog("Browser Information : "+navigator.userAgent),l.printLog("[STEP1][START] Loading Runtime Engine."),WebSquare._performance.mark("step1"),
f="Time elapsed from initiating a browser URL call until the 'BootLoader' finishes loading. 'BootLoader' is essential for the initial startup of the WebSquare engine.",WebSquare._performance.measure("step1",0,{log:f}),l.useWebSquareXMLParser=new RegExp(WebSquare.userAgentPattern.XMLParser).test(navigator.userAgent),l.useWebSquareXPathParser=WebSquare.userAgentPattern.XPathParser&&new RegExp(WebSquare.userAgentPattern.XPathParser).test(navigator.userAgent),!l.useWebSquareXMLParser){t.next=106;break}return l.printLog("Install JavaScript Implementation for XML & XPath. User Agent Pattern : "+WebSquare.userAgentPattern.XMLParser),t.next=99,l.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlsax.js");case 99:return t.next=101,l.writeAsync(WebSquare._resourceURI+"externalJS/xmlparser/xmlw3cdom.js");case 101:return t.next=103,l.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js");case 103:installXPath(new XPathParser),t.next=137;break;case 106:if(!l.useWebSquareXPathParser){t.next=119;break}return t.prev=107,l.printLog("Install XPath Implementation for not support xPath Parser."),t.next=111,l.writeAsync(WebSquare._resourceURI+"externalJS/xpath/xpath.js");case 111:installXPath(new XPathParser),t.next=117;break;case 114:t.prev=114,t.t2=t.catch(107),l.printStackTrace(t.t2,"xpath");case 117:t.next=137;break;case 119:if(!l.browserCheck.ieAllVersion||l.useActiveXObject){t.next=122;break}t.next=137;break;case 122:if(!l.browserCheck.android){t.next=137;break}if(t.prev=123,"undefined"!=typeof XMLDocument&&void 0!==XMLDocument.prototype.createNSResolver&&void 0!==XMLDocument.prototype.evaluate){t.next=131;break}return l.printLog("Install XPath Implementation for Google Android."),t.next=128,l.importAsync("externalJS/xpath/xpath.js");case 128:installXPath(new XPathParser),t.next=132;break;case 131:l.printLog("Already have a XPath Implementation.");case 132:t.next=137;break;case 134:t.prev=134,t.t3=t.catch(123),l.printStackTrace(t.t3,"xpath");case 137:return"undefined"!=typeof importAllList&&null!=importAllList?WebSquare.pluginList=importAllList:(WebSquare.pluginList=[],l.useWebSquareLicense),WebSquare.core._createGlobalVariable(),"true"!=WebSquare.core.getConfiguration("/WebSquare/localStorage/@defer")&&WebSquare.createLocalStorage(window),l.loadLanguagePack(),t.next=143,WebSquare._initModule();case 143:WebSquare.core._loadMsaServer(),WebSquare.core._loadMsaStylesheet();try{document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?WebSquare.graphicPlatformType="svg":WebSquare.graphicPlatformType="vml","vml"===WebSquare.graphicPlatformType&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),WebSquare.defaultStyle=document.createStyleSheet(),WebSquare.defaultStyle.addRule("v\\:group","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:line","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:stroke","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:oval","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:rect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:image","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:roundrect","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:shape","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:path","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:fill","behavior: url(#default#VML);"),WebSquare.defaultStyle.addRule("v\\:extrusion","behavior: url(#default#VML);"))}catch(t){l.printStackTrace(t,"VML Namespace")}return"true"==WebSquare.core.getConfiguration("debug")&&(WebSquare.logger.debug=!0),WebSquare.logger.debugKey=WebSquare.core.getConfiguration("debugKey"),"system"!=WebSquare.core.getConfiguration("exceptionHandler")&&!0!==WebSquare.skipLog&&WebSquare.core.browserCheck.ie,
"true"==WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@enable")&&(WebSquare.util.checkInterval=WebSquare.util.parseInt(WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@interval"),3e4),WebSquare.util.checkMode=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@mode"),WebSquare.util.checkURL=WebSquare.core.getConfiguration("/WebSquare/checkUpdate/@serverUrl"),""!=WebSquare.util.checkMode&&""!=WebSquare.util.checkURL||(WebSquare.util.checkMode="client"),window.setTimeout("WebSquare.util.checkUpdate()",WebSquare.util.checkInterval)),WebSquare.requestID="",""!=(b=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@value"))&&(WebSquare.requestID=b+"="),WebSquare.core.useSubmissionGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/makeGlobalObject/@value")),WebSquare.core.useWorkflowGlobal=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/workflow/makeGlobalObject/@value")),WebSquare.core.scriptPrecedence=!0,window.useWebSquareLicense=l.useWebSquareLicense,t.next=159,l._afterEngineLoad();case 159:0==l.engineLoadingMode.mode&&"undefined"==typeof WebSquareAllInOne||("WebSquare"!=document.title&&"NEW RENDERING"!=document.title||(document.title="WebSquare"),l.performanceCheck.mid1=new Date,l.printLog("[STEP2][ENGINE] Runtime Engine Load complete. Time:"+(l.performanceCheck.mid1.getTime()-l.performanceCheck.start.getTime())+"ms"),WebSquare._performance.mark("step2"),f=WebSquare.language.getMessage("Performance_step2"),WebSquare._performance.measure("step2","step1",WebSquare.core._makeDetail(f))),"default"===WebSquare.pluginCache&&window.applicationCache&&window.applicationCache.addEventListener("updateready",(function(){l.printLog("[ApplicationCache] ApplicationCache updateready"),window.applicationCache.swapCache()}),!1);case 161:case"end":return t.stop()}}),t,null,[[0,38],[49,75],[107,114],[123,134]])})))},5700:function(t,e,i){"use strict";i.d(e,{A:function(){return n}});var o=i(5461),s=i(8971),r=i(5375),a=i(2256),n=function(t,e,i){try{this.parentControl=null,this.childControlList=[]}catch(t){s.Y.printStackTrace(t)}};n.prototype.initialize=function(){},n.prototype.addControl=function(t,e,i,r){try{if(!t)return;var a=this.uuid;if(!0===t._wqAsync){this.childControlListAsync||(this.childControlListAsync=[]);i=this.childControlList.length+this.childControlListAsync.length;return this.childControlListAsync.push(i),t.then((function(t,o){WebSquare.idCache[a].addControl(t,e,i)}))}var n=this;do{if(t==n)return void $l("cannot execute : "+this.id+".addControl("+t.id+");");n=n.parentControl}while(n);if(t.parentControl&&t.parentControl.removeControl(t),"number"==typeof i){if(this.childControlListAsync&&this.childControlListAsync.length>0){var l=[];this.childControlListAsync.sort((function(t,e){return t-e}));for(var h=0;h<this.childControlListAsync.length;h++){for(var d=this.childControlListAsync[h],c=l.length;c<d;c++)l.push(this.childControlList.shift());l.push(d)}this.childControlList=l.concat(this.childControlList),this.childControlListAsync=[]}this.childControlList[i]=t}else r&&"number"==typeof r.index?this.childControlList.splice(r.index,0,t):this.childControlList.push(t);this.render&&(t.domStatus="new"),t.parentControl=this,e&&this.refreshDom();try{if(!o.q.strictModeFrame&&null!=this.parentFrame&&o.q.idCache[this.parentFrame])t.parentFrame=this.parentFrame,WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid);else if(null!=t.parentFrame&&WebSquare.idCache[t.parentFrame]){WebSquare.idCache[t.parentFrame].childAllControlList.push(t.uuid)}}catch(t){s.Y.printStackTrace(t,null,this),s.Y.printError("parentFrame is not wframe")}}catch(t){s.Y.printStackTrace(t)}},n.prototype.removeControl=function(t){try{for(var e in this.childControlList)this.childControlList[e]==t&&this.childControlList.splice(e,1);t.parentControl=null}catch(t){s.Y.printStackTrace(t)}},n.prototype.getParent=function(){try{return this.parentControl}catch(t){s.Y.printStackTrace(t)}
},n.prototype.getChild=function(t){try{for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i&&i.id==t)return i}return null}catch(t){s.Y.printStackTrace(t)}},n.prototype.getChildren=function(){try{return this.childControlList}catch(t){s.Y.printStackTrace(t)}},n.prototype.getAllChildren=function(t){try{for(var e=t||{},i=this.getChildren().slice(0),r=[],a=(e.excludePlugin||"").split(" "),n=(e.excludeId||"").split(" "),l=(0!==a.length||0!==n.length)&&e.excludeContainerInnerComp,h=["wframe","tabControl","widgetContainer","windowContainer","pageFrame"],d=a.filter((function(t){return-1!==h.indexOf(t)})),c=i.pop();null!=c;c=i.pop())if(!(l&&d.length>0&&d.indexOf(c.options.pluginName)>-1||l&&n.length>0&&n.indexOf(c.id)>-1&&h.indexOf(c.options.pluginName)>-1)){null!=o.q.idCache[c.uuid]&&c.options&&(c.options.pluginName||c.options.inheritedCompName)&&r.unshift(c);var u=[];if(!0===e.excludeInnerComp)for(var p=c.getChildren().slice(0),g=p.pop();null!=g;g=p.pop()){var m="",f="";if(g._wTagName&&"column"!==g._wTagName&&!g.headerId&&(m=g._wTagName,f=g.uuid),o.q.componentsCache[m]&&!0===o.q.componentsCache[m][f])g.options&&("searchbox"===g.options.pluginName||"spinner"===g.options.pluginName)&&!0===g._childFlag||u.unshift(g)}else u=c.getChildren();i=i.concat(u)}return r}catch(t){s.Y.printStackTrace(t)}},n.prototype.getChildrenCount=function(){try{return this.childControlList.length}catch(t){s.Y.printStackTrace(t)}},n.prototype.clearChildren=function(){try{this.childControlList=[]}catch(t){s.Y.printStackTrace(t)}},n.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},n.prototype.activate=function(){alert("you should override 'activate' for "+this.id)},n.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},n.prototype.serialize=function(){return alert("you should override 'serialize for "+this.id),{}},n.prototype.restore=function(t){return alert("you should override 'restore for "+this.id),!1},n.prototype.destroy=function(t){try{if("function"==typeof this.finalize&&"finalize"!==this.activeStatus)try{this.finalize()}catch(t){a.v.printLog("[ERROR] finalize : "+this.id)}if("function"==typeof this.unbind&&this.unbind(),this.render&&"IFRAME"==this.render.nodeName){var e=this.getWindow();try{this.render.getAttribute("src")&&this.render.setAttribute("src",""),e.WebSquare&&e.WebSquare.getBody&&e.WebSquare.getBody().remove()}catch(t){a.v.printLog("WebSquare.control.destroy : skip remove iframe : "+this.id)}}if(this.modelControl&&(this.modelControl.unbindRef(),this.modelControl.unbindItemset()),this.childControlList)for(var i=this.childControlList.length-1;i>=0;i--){for(var n in window[o.q.noConflict].comp[this.childControlList[i].id]=null,delete window[o.q.noConflict].comp[this.childControlList[i].id],o.q.idCache[this.childControlList[i].uuid]=null,delete o.q.idCache[this.childControlList[i].uuid],this.childControlList[i].destroy(t),this.childControlList[i])this.childControlList[i][n]=null,delete this.childControlList[i][n];delete this.childControlList[i]}if(this.childControlList=[],this.scope_obj&&this.scope_obj.scope&&this.scope_obj.scope[this.org_id]&&delete this.scope_obj.scope[this.org_id],this.parentControl=null,window[o.q.noConflict].comp[this.id]=null,delete window[o.q.noConflict].comp[this.id],o.q.idToUUID[this.id]=null,delete o.q.idToUUID[this.id],o.q.idCache[this.uuid]=null,delete o.q.idCache[this.uuid],window[this.id])try{delete window[this.id]}catch(t){window[this.id]=null}if(this.options){var l={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[this.options.pluginName]||this.options.pluginName;delete(o.q.componentsCache[l]||o.q.componentsCache[this._wTagName]||{})[this.uuid],r.I.memoryLeakComponent[l]&&(r.I.memoryLeakComponentCount+=r.I.memoryLeakComponent[l])}this.event&&(this.render&&this.event.clearElement(this.render),this.event.clearCache());var h=o.q.getBody()
;h&&"function"==typeof h.getLayerListener&&h.getLayerListener().remove(this.id),null==this.render||t||(o.q.removeNode(this.render),this.render=null),o.q.xfControl.removeCheckResize(this.uuid),r.I._removeObject(this)}catch(t){s.Y.printStackTrace(t,null,this)}}},1304:function(t,e,i){"use strict";i.d(e,{o:function(){return p}});var o=i(467),s=i(4756),r=i.n(s),a=i(5461),n=i(8971),l=i(5375),h=i(1204),d=i(7991),c=i(8926),u=i(3655),p=function(){this.createControlHash={script:"pass",label:"pass",value:"pass",choices:"pass",item:"pass",itemset:"pass",tab:"pass",tabs:"pass",mainMenu:"pass",childMenu:"pass",node:"pass",attributes:"pass",switch:"Switch",case:"group",contents:"group",content:"group",autoFinder:"autoComplete",panelContent:"group"},this._asyncList=[],this._awaitObj={key:[],promiseObj:{}}};p.prototype._initImport=function(){"true"==(l.I.getConfiguration("/WebSquare/parseHtml/@script")||"false")&&(this.createControlHash.script="script")},a.q._initImportList.push("controlFactory"),p.prototype.create=function(t,e,i,o,s,r){try{return"xml"===(i?i instanceof u.S?i._elementType:l.I.isXML(i)?"xml":"json":"xml")?this.createByXML(t,e,i,o,s,r):this.createByJSON(t,e,i,o,s,r)}catch(t){n.Y.printStackTrace(t)}},p.prototype.createByXML=function(t,e,i,o,s,r){try{if("self"==o)o=a=this.createControl(t,e,i,null,r,s);else var a=this.createControl(t,e,i,o,r,s);if(a){if(a.parentFrame=s,a.options&&a.options.parseChild)for(var l=i.firstChild;null!=l;l=l.nextSibling)if(!a.options.inheritedCompName&&!a.options.udcName||"w2:inheritOverride"!=l.nodeName&&"link"!=l.nodeName&&"style"!=l.nodeName){var h=this.createByXML(null,null,l,o,s,r);h&&a.addControl(h)}a.options&&null!=a.options.parseChild_bak&&(a.options.parseChild=a.options.parseChild_bak)}return a}catch(t){n.Y.printStackTrace(t)}},p.prototype.createByJSON=function(t,e,i,o,s,r){try{i instanceof u.S&&i._element&&(i=i._element);var l,d=[i],p=[];e||(e={_idCollisionCheck:!0,_skipExtend:!0});for(var g={},m=h.Z.getBoolean(a.q._idAuto);d.length>0;){var f,b=d.pop();if(!e.pluginName)(f=b.N?c.r.dropNS(b.N):b.T)&&(e.pluginName=f);var y="w2"==(c.r.getNS(b.N)||"")||r;if("self"==o){var v=this.createControl(t,e,b,null,y,s);(WebSquare.strictModeFrame||s)&&(o=v),e.inheritedCompName&&WebSquare.strictModeFrame&&s&&(o=WebSquare.idCache[s])}else{var w=t||e.id;if(m&&!w&&(!b.A||!b.A.id)){var S=f||"global";g[S]||(g[S]=1),b.A||(b.A={}),b.A.id=S+a.q._idAutoPrefix+g[S]++}v=this.createControl(w,e,b,o,y,s)}t=null,e={_idCollisionCheck:!0,_skipExtend:!0},r=!1;var _=p.pop();if(v){if(l||(l=v),v.parentFrame=s,_&&_.addControl(v),v.options&&v.options.parseChild)for(var C=c.r.getChildNodes(b),x=C.length-1;x>=0;x--){var I=C[x];(!v.options.inheritedCompName&&!v.options.udcName||"w2:inheritOverride"!=I.N&&"link"!=I.N&&"style"!=I.N)&&(I.T!=u.S.type.element&&I.T!=u.S.type.text||"pass"===this.createControlHash[I.N]||(d.push(I),p.push(v)))}v.options&&null!=v.options.parseChild_bak&&(v.options.parseChild=v.options.parseChild_bak)}}return l}catch(t){n.Y.printStackTrace(t)}},p.prototype.createControl=function(t,e,i,o,s,r){try{if(!i||i instanceof u.S||(i=new u.S(i)),!s&&!i)return null;var d=null;null!=e?e._idCollisionCheck=!0:e={_idCollisionCheck:!0,_skipExtend:!0};var c=null!=o&&null!=a.q.idCache[o.uuid];if(c&&(e._scope_obj_uuid=o.uuid),null==i&&s||1==i.nodeType){var p,g;if(p=!0!==e.strictFrame||t?t||(i?i.getAttribute("id"):""):"",isNaN(p)||(p=""),!p&&c&&(p=a.q.UUIDPrefix+"_"+a.q.UUID),p){var m=o?o.id:"";t=(m?m+"_":"")+p}else t=p;if(c&&(e._scope_obj_org_id=p,e._scope_obj_runtime_id=t),g=e&&e.pluginName&&!e.udcName?e.pluginName:u.S.api.getLocalName(i),null!=l.I.udcObj[g]){d=new WebSquare.uiplugin.udc({id:t,org_id:p,tagName:g,data:null!=i?WebSquare.Parser.parseAttribute(i):{},scope_uuid:e._scope_obj_uuid,parentFrame:r,msaName:l.I.udcMsa[g]});return this._asyncList.push(d.uuid),d}
if(!s&&"w2"!==i.getNamespace()&&"xf"!==i.getNamespace()||"tag"==g||"style"==g)"body"==g?d=new WebSquare.uiplugin.body(t,null,i):"pass"!=this.createControlHash[g]&&(d=new WebSquare.tag(t,null,i));else{var f=this.createControlHash[g]||g;switch(f){case"pass":return null;case"secret":f="uiplugin.input",null==i&&s?(e.type="password",e.pluginName="secret"):(i.setAttribute("type","password"),i.setAttribute("pluginName","secret"));break;case"select1":"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.radio",e.pluginName="radio"):(f="uiplugin.selectbox",e.pluginName="selectbox");break;case"select":var b;"full"==(b=i.getAttribute("appearance"))?(f="uiplugin.checkbox",e.pluginName="checkbox"):"checkcombobox"==b?(f="uiplugin.checkcombobox",e.pluginName="checkcombobox"):(f="uiplugin.multiselect",e.pluginName="multiselect");break;case"Switch":f="uiplugin."+f,e.pluginName="Switch";break;default:f="uiplugin."+f}try{var y=h.Z.loadedUserComponentPluginName[f.slice(9)],v=h.Z.loadedInheritComponentPluginName[f.slice(9)],w=y||v;if(w){var S=y?"User":"Inherit",_=h.Z["loaded"+S+"Component"][w],C=u.S.api.getAttribute(_,"class"),x=[];if(null!=i&&(null==e&&(e={}),a.q.extendKeepingType(e,WebSquare.WebSquareparser.parseAttribute(i)),e._skipExtend=!1,x=i.getChildNodes()),C&&e.className?e.className=C+" "+e.className:C&&!e.className&&(e.className=C),x.length>0){_=new u.S(_).cloneNode(!0);for(var I=0;I<x.length;I++)_.appendChild(x[I]._element);_=_._element}e.pluginName=null,"User"===S?e.udcName=f.slice(9):"Inherit"===S&&(e.inheritedCompName=f.slice(9)),e.firstTabID=u.S.api.getAttribute(_,"firstTabID")||null,t||(t=a.q.UUIDPrefix+"_"+a.q.UUID++),(d=this.create(t,e,_,"self",r,s)).options.parseChild_bak=d.options.parseChild,d.options.parseChild=!1,e.style||(d.options.style=""),o=d,d.makeScope(d),r&&null!=WebSquare.idCache[r]&&WebSquare.idCache[r]._addScopeVariable(d.uuid),d.getUdcHome=function(){return y.slice(0,y.lastIndexOf("#"))},d.getPluginName=function(){return e.udcName}}else{var T=f.split("."),k=h.Z.isMobile(),L=T[0],A=T[1];if(i){if("selectbox"==A){var D=i.getAttribute("renderType"),W=i.getAttribute("tableRender"),q=i.getAttribute("mobileRenderType");k&&q?D=q:D||(D=l.I.getConfiguration("/WebSquare/selectbox/renderType/@"+(k?"mobile":"value"))||"auto"),("ul"!==W||"auto"==D&&k)&&("native"==D||"select"==D||"auto"==D&&k)&&(e.renderType=D,A+="_native")}else if("treeview"==A){(D=i.getAttribute("renderType"))||(D=l.I.getConfiguration("/WebSquare/treeview/renderType/@"+(k?"mobile":"value"))||"auto"),"virtual"==D&&(e.renderType=D,A+="_virtual")}}else s&&("selectbox"!=A||"native"!==e.renderType&&"select"!=e.renderType||(A+="_native"));if(null==WebSquare[L][A]){var M=this._awaitObj.promiseObj[f];M||(M=a.q._loadModuleDynamic(f));var E=function(t,e,i,o,s,r,a,n,l){return function(h,d){var c=l._createComponent({id:t,element:e,engineType:i,componentName:o,options:s});if(l._createComponentAfter(c,{org_id:r,scopeObj:a,parentFrame:n}),c.options&&c.options.parseChild)for(var u=c.element.getChildNodes(),p=0;p<u.length;p++){var g=l.create(null,null,u[p],a,n);c.addControl(g)}var m=l.initAsync(!0),f=c.uuid;return m.then((function(t,e){return WebSquare.idCache[f]}))}}(t,i,L,A,e,p,o,r,this);(d=M.then(E).then((function(t,e){return t})))._wqAsync=!0,this._awaitObj.promiseObj[f]=d,this._awaitObj.key.push(f),a.q.UUID++}else d=this._createComponent({id:t,element:i,engineType:L,componentName:A,options:e})}}catch(t){return n.Y.printStackTrace(t),null}}}else 3==i.nodeType?(i.T||i.getNodeValue()&&""!=i.getNodeValue().wq_trim())&&(d=new WebSquare.tag(t,null,i)):d=null;return d&&!0!==d._wqAsync&&this._createComponentAfter(d,{org_id:p,scopeObj:o,parentFrame:r}),d}catch(e){n.Y.printStackTrace(e,"id ["+t+"] compName["+f+"]")}},p.prototype._createComponent=function(t){try{var e,i=t.id,o=t.element,s=t.engineType,r=t.componentName,l=t.options;if(l&&l.inheritedCompName){if(!WebSquare[s][l.inheritedCompName]){var h;if(WebSquare[s][l.inheritedCompName]=function(t,e,i){
WebSquare[s][r].call(this,t,e,i)},a.q.extend(WebSquare[s][l.inheritedCompName].prototype,WebSquare[s][r].prototype),o)for(var u=o.firstChild;null!=u;u=u.nextSibling)if("w2:inheritOverride"==u.nodeName){h=u;break}if(h){var p=d._.getCDataNodeValue(h).wq_trim();if(""!=p){var g=p.split("="),m=WebSquare[s][l.inheritedCompName],f=new Function("var superComponent = WebSquare[engineType][compName].prototype; return "+g[1]);c.r.setJSONByPath(m,g[0],f())}}for(var b in WebSquare[s][l.inheritedCompName].prototype.overrideFunc)WebSquare[s][l.inheritedCompName].prototype[b]=WebSquare[s][l.inheritedCompName].prototype.overrideFunc[b]}(e=new WebSquare[s][l.inheritedCompName](i,l,o)).options.inheritFrom=r}else e=new WebSquare[s][r](i,l,o);return e}catch(t){n.Y.printStackTrace(t,"id ["+i+"] compName["+r+"]")}},p.prototype._createComponentAfter=function(t,e){try{if(!t||!e)return;var i=e.scopeObj,o=e.parentFrame,s=e.org_id;i&&(t.org_id=s,t.scope_obj=i,t.scope_id=i.id),"function"==typeof t.initAsync&&this._asyncList.push(t.uuid),o&&(t.parentFrame=o)}catch(t){n.Y.printStackTrace(t)}},p.prototype.createUDC2=function(t){try{return new WebSquare.uiplugin.udc(t)}catch(t){n.Y.printStackTrace(t)}},p.prototype.initAsync=function(){var t=(0,o.A)(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=this.doAsync(),!0!==e&&(i=i.then((function(){return p.awaitAsync()}))),t.abrupt("return",i);case 6:t.prev=6,t.t0=t.catch(0),n.Y.printStackTrace(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),p.prototype.doAsync=(0,o.A)(r().mark((function t(){var e,i,o,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=[];this._asyncList.length>0;)i=this._asyncList.shift(),(o=a.q.idCache[i])&&"function"==typeof o.initAsync&&e.push(o.initAsync());if(0!==e.length){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return s=Promise.all(e).then((function(){return p.doAsync()})),t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(0),n.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),p.prototype.awaitAsync=(0,o.A)(r().mark((function t(){var e,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=[],i=0;i<p._awaitObj.key.length;i++)e.push(p._awaitObj.promiseObj[p._awaitObj.key[i]]);if(0!==e.length){t.next=5;break}return t.abrupt("return",Promise.resolve());case 5:return this._awaitObj={key:[],promiseObj:{}},t.abrupt("return",Promise.all(e).then((function(){return p.awaitAsync()})));case 9:t.prev=9,t.t0=t.catch(0),n.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])}))),p=new p},1498:function(t,e,i){"use strict";i.d(e,{A:function(){return l}});var o=i(5461),s=i(8971),r=i(5375),a=i(1204),n=i(2338),l=function(){};l.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setStyleAsync=function(t,e){try{if(!this.render)return;this.__setStyleAsyncPeriod||(this.__setStyleAsyncPeriod=1),r.I.setTimer((function(){r.I.measureTime((function(t){this.__setStyleAsyncPeriod=parseInt(t.aver,10)}),{key:this.id+"_setStyleAsync",caller:this}),WebSquare.style.setStyle(this.render,t,e)}),{key:this.id+"_setStyleAsync",caller:this,delay:this.__setStyleAsyncPeriod,max:this.__setStyleAsyncPeriod})}catch(t){s.Y.printStackTrace(t)}},l.prototype.getStyle=function(t){try{return this.render?WebSquare.style.getStyle(this.render,t):null}catch(t){s.Y.printStackTrace(t)}},l.prototype.setPosition=function(t,e,i){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),"absolute"==(i=i||"absolute")?(null==t||isNaN(t)||(this.render.style.left=t+"px"),null==e||isNaN(e)||(this.render.style.top=e+"px")):"delta"==i&&(null==t||isNaN(t)||(this.render.style.left=this.render.offsetLeft+t+"px"),null==e||isNaN(e)||(this.render.style.top=this.render.offsetTop+e+"px"))}catch(t){
s.Y.printStackTrace(t)}},l.prototype.getPosition=function(t){try{if(!this.render)return;return"top"==(t=t.toLowerCase())?this.render.offsetTop:"left"==t?this.render.offsetLeft:void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getAbsolutePosition=function(t,e){try{var i=null==e?this.render:e;return"top"==t?WebSquare.style.getAbsoluteTop(i):"left"==t?WebSquare.style.getAbsoluteLeft(i):void $l("getPosition : wrong positionName["+t+"]")}catch(t){s.Y.printStackTrace(t)}},l.prototype.setSize=function(t,e){try{WebSquare.style.setSize(this.render,t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getSize=function(t){try{return WebSquare.style.getSize(this.render,t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.show=function(t){try{WebSquare.style.show(this.render,t),a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10||this.refreshAdaptive(),this.checkResize_recursive(this)}catch(t){s.Y.printStackTrace(t)}},l.prototype.hide=function(){try{WebSquare.style.hide(this.render)}catch(t){s.Y.printStackTrace(t)}},l.prototype.refreshAdaptive=function(){try{if("group"==this.options.pluginName&&"table"==this.options.tagname&&("crosstab"==this.options.adaptive||"layout"==this.options.adaptive)){var t=parseInt(this.options.adaptiveThreshold)||480;a.Z._getBrowserWidth()<=t&&(this.removeAdaptive(),this.addAdaptive())}if(this.constructor===WebSquare.tag&&3!==this.element.nodeType){var e=this.element.getAttribute("adaptive");if("crosstab"==e||"layout"==e){t=parseInt(this.element.getAttribute("adaptiveThreshold"))||480;a.Z._getBrowserWidth()<=t&&(this.removeAdaptive(),this.addAdaptive())}}for(var i=0;i<this.childControlList.length;i++)this.childControlList[i].refreshAdaptive&&this.childControlList[i].refreshAdaptive()}catch(t){s.Y.printStackTrace(t)}},l.prototype.setOpacity=function(t){try{this.setStyle("opacity",t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOpacity=function(){try{return this.getStyle("opacity")}catch(t){s.Y.printStackTrace(t)}},l.addClassRe=new RegExp("\\s\\s"),l.prototype.addClass=function(t){try{1===arguments.length?this.__addClass(this.render,arguments[0]):2===arguments.length&&this.__addClass(arguments[0],arguments[1])}catch(t){s.Y.printStackTrace(t)}},l.prototype.__addClass=function(t,e){try{if(!t||!e)return;var i=t.className;0==this.__hasClass(t,e)&&(i=(i+=" "+e).replace(l.addClassRe," ").wq_trim(),t.className=i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeClass=function(t){try{1===arguments.length?this.__removeClass(this.render,arguments[0]):2===arguments.length&&this.__removeClass(arguments[0],arguments[1])}catch(t){s.Y.printStackTrace(t)}},l.prototype.__removeClass=function(t,e){try{if(!t||!e)return;if(0==this.__hasClass(t,e))return;var i=r.I.getConfiguration("/WebSquare/style/removeDefaultClass/@value");if((""==i||"false"==i)&&1==this.__hasClass(this.options.className,e))return;var o=" "+t.className+" ";o=(o=o.replace(" "+e+" "," ")).replace(l.addClassRe," ").wq_trim(),t.className=o}catch(t){s.Y.printStackTrace(t)}},l.prototype.changeClass=function(t,e){try{2===arguments.length?this.__changeClass(this.render,arguments[0],arguments[1]):3===arguments.length&&this.__changeClass(arguments[0],arguments[1],arguments[2])}catch(t){s.Y.printStackTrace(t)}},l.prototype.__changeClass=function(t,e,i){try{this.removeClass(t,e),this.addClass(t,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.hasClass=function(t){try{return 1===arguments.length?this.__hasClass(this.render,arguments[0]):2===arguments.length&&this.__hasClass(arguments[0],arguments[1])}catch(t){s.Y.printStackTrace(t)}},l.prototype.__hasClass=function(t,e){try{return!!t&&(" "+("string"==typeof t?t||"":t.className)+" ").indexOf(" "+e+" ")>=0}catch(t){s.Y.printStackTrace(t)}},l.prototype.toggleClass=function(t){try{return 1===arguments.length?this.__toggleClass(this.render,arguments[0]):2===arguments.length&&this.__toggleClass(arguments[0],arguments[1])}catch(t){s.Y.printStackTrace(t)}},
l.prototype.__toggleClass=function(t,e){try{this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.movable=function(t,e){try{if(!this.render)return;var i=this;if(!this.handleFinishMove){"w2drag_move","w2drag_move",e=o.q.extend({id:"w2drag_move",className:"w2drag_move",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("left")),a=parseInt(i.getStyle("top"));i.setPosition(r+o,a+s)}},e||{}),this.handleFinishMove=function(t){n.f.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,e)}}t?(this.event.addListener(this.render,"onmousedown",this.handleFinishMove),this.event.addListener(this.render,"ontouchstart",this.handleFinishMove)):(this.event.removeListener(this.render,"onmousedown",this.handleFinishMove),this.event.removeListener(this.render,"ontouchstart",this.handleFinishMove))}catch(t){s.Y.printStackTrace(t)}},l.prototype.resizable=function(t,e){try{if(!this.render)return;var i=this;this.handleFinishResize||(this.handleFinishResize=function(t){n.f.stopEvent(t),WebSquare.dragdrop.gDragManager.activate(t,i.render,{id:"w2drag_resize",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){return t.setSize(i.render.offsetWidth,i.render.offsetHeight),t},handleFinish:function(t,e,o,s){var r=parseInt(i.getStyle("width")),a=parseInt(i.getStyle("height"));i.setSize(r+o,a+s)}})}),t?this.event.addListener(this.render,"onmousedown",this.handleFinishResize):this.event.removeListener(this.render,"onmousedown",this.handleFinishResize)}catch(t){s.Y.printStackTrace(t)}},l.prototype.visible=function(t){try{if(!this.render)return;t=a.Z.getBoolean(t);this.render.style.visibility=t?"visible":"hidden"}catch(t){s.Y.printStackTrace(t)}},l.prototype.showBySize=function(){try{if(!this.render)return;this.setStyle("visibility","visible"),this.render.style.overflow="",this.render.style.width="",this.render.style.height=""}catch(t){s.Y.printStackTrace(t)}},l.prototype.hideBySize=function(){try{if(!this.render)return;this.setStyle("visibility","hidden"),this.render.style.overflow="hidden",this.render.style.width="0px",this.render.style.height="0px"}catch(t){s.Y.printStackTrace(t)}},l.prototype.getStyleValue=function(t){return this.getStyle(t)},l.prototype.getStyleIntValue=function(t){return parseInt(this.getStyle(t))},l.prototype.getStyleProperty=function(t){try{return this.getStyle(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getClass=function(){try{return this.options.className}catch(t){s.Y.printStackTrace(t)}},l.prototype.highlight=function(t){try{if(!this.render)return;this.render.style.border=t?"solid 1px blue":""}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e=/([\w-]*)\s*:\s*([^;]*)/g,i=[],o={};i=e.exec(WebSquare.initStyle[this.id].style);)o[i[1]]=i[2].wq_trim();return o.className=WebSquare.initStyle[this.id].className,o[t]?o[t]:o}},l.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style;document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},l.prototype.enable=function(){},l.prototype.disable=function(){},l.prototype.hover=function(t,e){},l.prototype.checkResize_recursive=function(t){try{if("function"==typeof t.checkResize&&t.checkResize(),t.options&&"inputCalendar"==t.options.pluginName&&"function"==typeof t.setSetting&&t.setSetting(),t.childControlList)for(var e=0;e<t.childControlList.length;e++)this.checkResize_recursive(t.childControlList[e])}catch(t){s.Y.printStackTrace(t)}}},541:function(t,e,i){"use strict"
;i.d(e,{v:function(){return s}});var o=i(8971),s=function(){};s.prototype.setClassName=function(t){try{if(!t)return;var e="w2"+this.getPluginName()+" "+t;this.setClassByElement(e)}catch(t){o.Y.printStackTrace(t)}},s.prototype.addClassName=function(t){try{this.addClass(this.render,t)}catch(t){o.Y.printStackTrace(t)}},s.prototype.removeClassName=function(t){try{this.removeClass(this.render,t)}catch(t){o.Y.printStackTrace(t)}},s.prototype.getChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.addClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]&&this.getChildEl(t,e.children[s],i);else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.Y.printStackTrace(t)}},s.prototype.removeChildEl=function(t,e,i){try{if(this.getClassByElement(e)==t)return this.removeClass(e,i),e;for(var s=0;s<e.children.length;s++)if(e.children[s].children.length>0)null!=e.children[s]&&this.removeChildEl(t,e.children[s],i);else if(null!=e&&this.getClassByElement(e)==t)return e}catch(t){o.Y.printStackTrace(t)}},s.prototype.getClassByElement=function(t){try{return this.ssplit(t.className)||this.ssplit(t.getAttribute("class"))||""}catch(t){o.Y.printStackTrace(t)}},s.prototype.setClassByElement=function(t){try{if(!t)return;this.render.className=t}catch(t){o.Y.printStackTrace(t)}},s.prototype.ssplit=function(t){try{if(void 0===t||null==t)return t;var e=t.split(" ");return e.length>0?e[0]:t}catch(t){o.Y.printStackTrace(t)}}},3768:function(t,e,i){"use strict";i.d(e,{i:function(){return c}});var o=i(2284),s=i(5461),r=i(2660),a=i(8971),n=i(5375),l=i(1204),h=i(2256),d=i(2338),c=function(){try{this.cache=null}catch(t){a.Y.printStackTrace(t)}};c.prototype.addListener=function(t,e,i,o){try{var l=document.addEventListener&&!r.Q.browserCheck.ie,h=!l&&document.attachEvent;if(!l&&!h)return;if(o=o||null,"onchange"==e.toLowerCase().wq_trim())return;var d=function(e){this.getAttribute&&"disabled"===this.getAttribute("disabled")||void 0!==this.disabled&&(this.disabled||"true"==this.getAttribute("disabled"))||i.call(t,e)},c=e;if(l&&"on"===e.slice(0,2)&&(c=e.slice(2)),l&&"onmousewheel"==e.toLowerCase()&&n.I.browserCheck.moz&&(c="DOMMouseScroll"),t===document.documentElement||t===document.body){s.q.eventCacheObj[t.tagName]||(s.q.eventCacheObj[t.tagName]={}),s.q.eventCacheObj[t.tagName][c]||(s.q.eventCacheObj[t.tagName][c]={evFunc:function(){},evFuncArr:[]});var u=s.q.eventCacheObj[t.tagName][c],p=u.evFuncArr;if(0===p.length){var g=function(e){for(var i=s.q.eventCacheObj[e.currentTarget.tagName][e.type].evFuncArr,o=0;o<i.length;o++)this.getAttribute&&"disabled"===this.getAttribute("disabled")||void 0!==this.disabled&&(this.disabled||"true"==this.getAttribute("disabled"))||i[o].call(t,e)};u.evFunc=g,l?t.addEventListener(c,g,o):h&&t.attachEvent(c,g,o)}p.push(i),this.setCache(t,e,i,o)}else l?t.addEventListener(c,d,o):h&&t.attachEvent(c,d,o),this.setCache(t,e,d,o)}catch(t){a.Y.printStackTrace(t)}},c.prototype.addListener2=function(t,e,i,o){try{var s=function(t,e){return function(i){e.call(t,i||window.event)}}(o||t,i);t.attachEvent?t.attachEvent(e,s):t.addEventListener&&("mousewheel"==(e=e.slice(2)).wq_trim().toLowerCase()&&l.Z.isFF()&&(e="DOMMouseScroll"),t.addEventListener(e,s,!1)),this.setCache(t,e,s,null)}catch(t){a.Y.printStackTrace(t)}},c.prototype.removeListener=function(t,e,i,o){try{if(!t)return;o=o||null;try{var r=e;if("on"===e.slice(0,2)&&(r=e.slice(2)),(t===document.documentElement||t===document.body)&&s.q.eventCacheObj[t.tagName]&&s.q.eventCacheObj[t.tagName][r]){for(var n=s.q.eventCacheObj[t.tagName][r],h=n.evFuncArr,d=0;d<h.length;d++)if(h[d]===i){h.splice(d,1);break}if(0!==h.length)return;i=n.evFunc,delete s.q.eventCacheObj[t.tagName][r]}!l.Z.isIE()&&t.removeEventListener?t.removeEventListener(r,i,o):t.detachEvent&&t.detachEvent(e,i)}catch(t){a.Y.printStackTrace(t)}}catch(t){a.Y.printStackTrace(t)}},c.prototype.setCache=function(t,e,i,o){try{this.cache||(this.cache=[]),
this.cache.push([t,e,i,o])}catch(t){a.Y.printStackTrace(t)}},c.prototype.clearCache=function(){try{if(!this.cache)return;for(var t=0;t<this.cache.length;t++)this.removeListener.apply(this,this.cache[t]),this.cache[t]=null;this.cache=null}catch(t){a.Y.printStackTrace(t)}},c.prototype.bindAsEventListener=function(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];try{var n=!("object"!==(0,o.A)(s[0])||null==s[0]||!0!==s[0].eventonreadonly);return function(i){if(!0!==t._removed){if(i&&"click"===i.type&&t.options&&!0===t.options.preventMultipleClick)if(l.Z.isIEAllVersion()&&t.options.clickInterval){var o=(new Date).getTime();if(o-t.lastClickTime<t.options.clickInterval)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&d.f.preventDefault(i));t.lastClickTime=o}else if("number"==typeof i.detail&&i.detail>1)return void("anchor"==t.options.pluginName&&t.options.enableReadOnly&&d.f.preventDefault(i));if(!(t.__removed_object__||t.getDisabled&&1==t.getDisabled())){if(t.options&&t.options.overrideKey&&i&&(i.charCode||i.keyCode)){var r=i.charCode?i.charCode:i.keyCode,a=t.options.overrideKey.split(",");if("all"===a[0])return;for(var h=0;h<a.length;h++)if(parseInt(a[h],10)===r)return}if(i&&"resize"!=i.type&&t.options&&"gridView"!=t.options.pluginName&&"grid"!=t.options.pluginName){var c=t.getReadOnly&&1==t.getReadOnly(),u=!1;if(c&&t.options&&("input"==t.options.pluginName&&"noFormat"==t.options.copyOnReadOnly?u=l.Z.isIEAllVersion()?67==i.keyCode&&(i.ctrlKey||i.metaKey):"copy"==i.type:"anchor"==t.options.pluginName&&t.options.enableReadOnly&&d.f.preventDefault(i)),c&&!u&&!n)return}return i&&"mousedown"===i.type&&WebSquare.getBody().getLayerListener().otherClick(i),e.apply(t,[i||window.event].concat(s))}}}}catch(t){a.Y.printStackTrace(t)}},c.prototype.clearElement=function(t){try{var e,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)e[i]&&"function"==typeof t[s=e[i].name]&&(t[s]=null)}}catch(t){a.Y.printStackTrace(t)}},c.prototype.getTarget=function(t,e){try{e=e||"main";for(var i=d.f.getTarget(t);i;){var o=i.getAttribute("catch");if(o&&o.indexOf(e)>-1)break;i=i.parentNode}return i}catch(t){a.Y.printStackTrace(t)}},c.prototype.getTargetIterator=function(t,e,i){try{var o=d.f.getTarget(t);return new WebSquare.targetIterator(o,e,i)}catch(t){a.Y.printStackTrace(t)}},c.prototype.getChildIterator=function(t){try{return new WebSquare.childIterator(t)}catch(t){a.Y.printStackTrace(t)}},c.prototype.isMe=function(t,e){try{for(var i=d.f.getTarget(t);null!=i;){if(i==e)return!0;i=i.parentNode}return!1}catch(t){a.Y.printStackTrace(t)}},c.prototype.isMine=function(t,e){try{for(var i=d.f.getTarget(t);null!=i;){if(i.id&&i.id.indexOf(e.id)>=0)return!0;i=i.parentNode}return!1}catch(t){a.Y.printStackTrace(t)}},c.prototype.addEvents=function(t,e){try{if(null!=t&&null!=e){for(var i=0;i<e.length;i++)if(d.f.isEventSupported(t.render,e[i].name))switch(e[i].action){case"script":if("function"!=typeof e[i].param.handler&&"string"!=typeof e[i].param.handler){h.v.printLog("Event error ["+t.id+",ev:"+e[i].name+"] : "+e[i].param.handler+" is not a function");break}if(null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0)t.systemEventList[e[i].name].count++;else{t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1;var o=function(e){return function(i){"click"===i.type&&"number"==typeof i.detail&&i.detail>1&&t&&t.options&&!0===t.options.preventMultipleClick||d.f.fireEvent(t,e,i)}}(e[i].name);this.addListener(t.render,e[i].name,o,!1),t.event.cache&&(t.systemEventList[e[i].name].handler=t.event.cache[t.event.cache.length-1][2])}break;default:null!=t.systemEventList[e[i].name]&&t.systemEventList[e[i].name].count>0?t.systemEventList[e[i].name].count++:(t.systemEventList[e[i].name]={},t.systemEventList[e[i].name].count=1,t.systemEventList[e[i].name].handler=function(t,e){return function(i){d.f.fireEvent(t,e,i)}}(t,e[i].name),
this.addListener(t.render,e[i].name,t.systemEventList[e[i].name].handler,!1))}t.userEventList=t.userEventList.concat(e)}}catch(t){a.Y.printStackTrace(t)}},c.prototype.addUserEvents=function(t,e,i){var o=[];try{if(e){if(void 0!==i){for(var s={},r=0;r<i.length;r++)s[i[r]]="";var n=[];for(r=0;r<e.length;r++)void 0===s[e[r].name]?o.push(e[r]):n.push(e[r]);e=n}t.userEventList=t.userEventList.concat(e)}}catch(t){a.Y.printStackTrace(t)}return o},c.prototype.hasEvent=function(t,e){try{if(!this.cache)return!1;for(var i=!1,o=0;o<this.cache.length;o++)if(this.cache[o][0].id===t&&this.cache[o][1]===e){i=!0;break}return i}catch(t){a.Y.printStackTrace(t)}},c.prototype.removeEvent=function(t,e){try{if(!this.cache)return 0;var i=0,s=!1;"object"===(0,o.A)(t)&&t&&1===t.nodeType&&(s=!0);for(var r=this.cache.length-1;r>=0;r--){(s?this.cache[r][0]===t:this.cache[r][0].id===t)&&this.cache[r][1]===e&&(this.removeListener.apply(this,this.cache[r]),this.cache[r]=null,this.cache.splice(r,1),i++)}return i}catch(t){a.Y.printStackTrace(t)}}},7455:function(t,e,i){"use strict";i.d(e,{t:function(){return l}});var o=i(8971),s=i(5375),r=i(1204),a=i(7991),n=i(4787),l=function(){};l.prototype._setDataCollectionItemArr=function(t){try{this.itemArr=this.modelControl.getDataCollectionItemsetData(t,{visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue,depthColumn:this.options.depthColumn})||[],this.allItemArr=this.modelControl.getDataCollectionItemsetData(t,{allData:!0,visibleColumn:this.options.visibleColumn,visibleColumnFalseValue:this.options.visibleColumnFalseValue,enableColumn:this.options.enableColumn,enableColumnFalseValue:this.options.enableColumnFalseValue,depthColumn:this.options.depthColumn})||[]}catch(t){o.Y.printStackTrace(t)}},l.prototype.initializeItemArr=function(t,e){var i=this.internal&&!this.modelControl.isDataCollectionItemsetBinded?this.itemsetObj:WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(i.nodeset,i.label,i.value),this.itemsetObj=i,this.itemArr=[],this.allItemArr=[];var o=WebSquare.WebSquareparser.parseChoices(t,e);if(o.length>0)this.itemArr=o;else if(i.nodeset.match("data:")){var s=this.id;if("w2:column"==this.element.getTagName()||"td"==this.element.getTagName().toLowerCase()&&this.internal){if(!this.comp)return;s=this.comp.id}this.modelControl.dataCollectionBindItemset(this.itemsetObj.nodeset),this._setDataCollectionItemArr(s)}else this.itemArr=this.modelControl.getItemsetData();this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.initializeFilter(t),null==this.filterFunc&&"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.refreshItemArr=function(){this.itemArr,this.modelControl.isDataCollectionItemsetBinded?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc?this.filterItemArr():"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.setNodeSet=function(t,e,i){try{this.modelControl.unbindItemset(),t=r.Z.isNull(t)?this.itemsetObj.nodeset:t,e=r.Z.isNull(e)?this.itemsetObj.label:e,i=r.Z.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemsetObj=this.modelControl.itemsetObj,this.itemArr,this.itemsetObj.nodeset.match("data:")?this._setDataCollectionItemArr(this.id):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr)),this.originalItemArr=this.itemArr,
null!=this.filterFunc&&this.filterItemArr(),"stop"!==this.activeStatus&&(this.itemsetObj.nodeset.match("data:")?this.modelControl.dataCollectionBindItemset():this.modelControl.bindItemset(),this.refreshItemset("replace"))}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.setVisibleColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.visibleColumn=t||this.options.visibleColumn,this.options.visibleColumnFalseValue=e||this.options.visibleColumnFalseValue,"gridView"==this.itemTableMode?(this.refreshGridViewItemArr(),this.refreshGridVisible()):"grid"==this.itemTableMode?this.refreshGridItemArr():(this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshVisible()))}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.setEnableColumn=function(t,e){try{this.modelControl.isDataCollectionItemsetBinded&&(this.options.enableColumn=t||this.options.enableColumn,this.options.enableColumnFalseValue=e||this.options.enableColumnFalseValue,this._setDataCollectionItemArr(this.id),"function"==typeof this.setSelectItemArr&&this.setSelectItemArr(),this.refreshEnable())}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.refreshVisible=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.refreshGridVisible=function(){try{if("gridView"==this.itemTableMode&&this.itemTable)for(var t=0;t<this.itemArr.length;t++)this.itemArr[t]._hidden?this.itemTable.gridView.setRowVisible(t,!1):this.itemTable.gridView.setRowVisible(t,!0);else this.itemTableMode}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.refreshEnable=function(){try{"function"==typeof this.setSelectOptions&&this.setSelectOptions()}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.setGridItemset=function(t){try{if(this.modelControl.unbindItemset(),this.itemsetObj={nodeset:"",value:"",label:"",items:[]},null!=this.itemTable&&(this.itemTable.remove(),this.itemTable=null),s.I.isXML(t)){a._.isDocument(t)&&(t=t.documentElement);var e=t.nodeName;if("w2:"===e.slice(0,3)&&(e=e.slice(3)),"gridviewitemset"!==(e=e.toLowerCase())&&"griditemset"!==e)throw{message:"Invalid XML : ["+this.id+".setGridItemset]"};var i="gridviewitemset"===e?"gridView":"grid";this.itemTableMode=i,this.initializeGridItemsetObj(t,i),this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),"gridView"===i?this.refreshGridViewItemArr():this.refreshGridItemArr()}else{var r=JSON.parse(JSON.stringify(t));"number"==typeof r.width&&(r.width=String(r.width)),"number"==typeof r.height&&(r.height=String(r.height));var n=r.item;delete r.item,this.gridViewOptions=r,this.itemsetObj.nodeset=r.nodeset,this.itemsetObj.label=r.label,this.itemsetObj.value=r.value,this.itemsetObj.items=n,this.modelControl.setItemset(r.nodeset,r.label,r.value),this.refreshGridViewItemArr()}this.itemsetObj.nodeset.match("data:")?(this.modelControl.dataCollectionBindItemset(),this.modelControl.isDataCollectionItemsetBinded=!0):this.modelControl.bindItemset(),"stop"!==this.activeStatus&&this.refreshItemset("replace")}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.getDataListInfo=function(){try{var t=null;return this.itemsetObj&&(t={},this.itemsetObj.nodeset.match("data:")?(t.nodeset=this.itemsetObj.nodeset.slice(0),t.id=t.nodeset.wq_replaceAll("data:",""),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label):(t.nodeset=this.itemsetObj.nodeset.slice(0),t.value=this.itemsetObj.value,t.label=this.itemsetObj.label)),t}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.setGridNodeSet=function(t,e,i,s){try{if("grid"!=this.itemTableMode)return;var a=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(a=!0),this.itemsetObj.nodeset=t,a&&(this.itemsetObj.label=e,this.itemsetObj.value=i),!(s instanceof Array))return void $l("setGridNodeSet error : The parameter 'colArr' must be of type Array."+this.id+"]")
;for(var n=0;n<this.itemsetObj.items.length;n++)this.itemsetObj.items[n]=s[n];this.modelControl.unbindItemset(),t=r.Z.isNull(t)?this.itemsetObj.nodeset:t,e=r.Z.isNull(e)?this.itemsetObj.label:e,i=r.Z.isNull(i)?this.itemsetObj.value:i,this.modelControl.setItemset(t,e,i),this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr)),this.originalItemArr=this.itemArr,null!=this.filterFunc&&this.filterItemArr(),this.modelControl.bindItemset(),this.refreshItemset()}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.getItemArray=function(){return this.itemArr},l.prototype.getLocaleItemArr=function(t,e){void 0!==e&&null!=e||(e="label");for(var i=0;i<t.length;i++){var o=t[i],s=this.getLocaleValue(o[e]);s&&(o[e]=s)}return t},l.prototype.initializeFilter=function(t){var e=this.options.filter;this.originalItemArr=this.itemArr,this.setFilterFunc(e),this.filterItemArr()},l.prototype.setFilter=function(t){var e=this.getValue();this.setFilterFunc(t),this.filterItemArr(),this.componentRedraw(e)},l.prototype.setFilterFunc=function(t){try{if(void 0===t||null==t||""==t)this.filterFunc=null;else{var e=r.Z.getGlobalFunction(t,this.scope_id);"function"==typeof e&&(this.filterFunc=e)}}catch(t){this.filterFunc=null,o.Y.printStackTrace(t)}},l.prototype.filterItemArr=function(){if(null==this.filterFunc)this.itemArr=this.originalItemArr;else{this.itemArr=[];for(var t=0;t<this.originalItemArr.length;t++){var e=this.originalItemArr[t];this.match(e)&&this.itemArr.push(e)}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()}},l.prototype.match=function(t){try{return this.filterFunc.call(this.filterFunc,t.label,t.value,t.xml)}catch(t){return o.Y.printStackTrace(t),!1}},l.prototype.initializeGridItemArr=function(t,e){var i,r=requires("uiplugin.grid");this.initAsync=(i=r,function(){return i}),this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]}),this.itemArr||(this.itemArr=[]);var a=this.itemsetObj;e=e||"xf";try{var n=t.getTagName();n.indexOf(":")>=0&&(e=n.split(":")[0])}catch(t){o.Y.printStackTrace(t)}if(t){var l="xf"==e?s.I._XML_NAMESPACE.XFORMS:s.I._XML_NAMESPACE.W2,h=WebSquare.Elem.api.getElementsByTagName(t,"choices",l)[0];if(h){var d=WebSquare.Elem.api.getElementsByTagName(h,"gridItemset",s.I._XML_NAMESPACE.W2)[0];d&&this.initializeGridItemsetObj(d,"grid")}}this.modelControl.setItemset(a.nodeset,a.label,a.value),this.refreshGridItemArr()},l.prototype.initializeGridItemsetObj=function(t,e){try{var i=this.itemsetObj,r=WebSquare.Elem.api.getValue(t,"@nodeset");i.nodeset=null==r?"":r,"/"==i.nodeset.wq_trim().substr(-1)&&(i.nodeset=i.nodeset.wq_trim().slice(0,-1)),this[e+"Options"]=WebSquare.WebSquareparser.parseAttribute(t),i.labelId=this[e+"Options"].labelId,i.valueId=this[e+"Options"].valueId,i.label=this[e+"Options"].label,i.value=this[e+"Options"].value;for(var a=WebSquare.Elem.api.getElementsByTagName(t,"item",s.I._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++)n.push(WebSquare.WebSquareparser.parseAttribute(a[l]));if(i.labelId||i.valueId)for(l=0;l<n.length;l++)delete n[l]["@tagName"],i.labelId&&n[l].id===i.labelId&&(i.label=n[l].ref),i.valueId&&n[l].id===i.valueId&&(i.value=n[l].ref);i.items=n}catch(t){o.Y.printStackTrace(t)}},l.prototype.refreshGridItemArr=function(){this.itemArr=[],this.gridItemArr=[],this.gridRowItemArr=[];var t=this.itemsetObj;if(t.nodeset)if(t.nodeset.match("data:")){var e=this.modelControl.getDataComp();null!=e&&(this._setDataCollectionItemArr(this.modelControl.id),this.gridItemArr=e.getAllData(),this.gridOptions.dataComp=e)}else{var i=n.K.findInstanceNodes(t.nodeset,null,this.scope_id);if(i)for(var o=0;o<i.length;++o){this.itemArr.push({label:a._.getValue(i[o],t.label),value:a._.getValue(i[o],t.value),xml:i[o]});for(var s={},r=0;r<t.items.length;r++){t.items[r].id||(t.items[r].id=this.id+"_items"+r);var l="",h=t.items[r].ref
;h&&(t.label&&h===t.label?t.labelId=t.items[r].id:t.value&&h===t.value&&(t.valueId=t.items[r].id),l=a._.getValue(i[o],h)),this.gridItemArr.push(l),s[t.items[r].id]=l}this.gridRowItemArr.push(s)}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype.initializeGridViewItemArr=function(t,e){this.itemsetObj||(this.itemsetObj={nodeset:"",value:"",label:"",items:[]}),this.itemArr||(this.itemArr=[]);var i=this.itemsetObj;e=e||"xf";try{var r=t.getTagName();r.indexOf(":")>=0&&(e=r.split(":")[0])}catch(t){o.Y.printStackTrace(t)}if(t){var a="xf"==e?s.I._XML_NAMESPACE.XFORMS:s.I._XML_NAMESPACE.W2,n=WebSquare.Elem.api.getElementsByTagName(t,"choices",a)[0];if(n){var l=WebSquare.Elem.api.getElementsByTagName(n,"gridViewItemset",s.I._XML_NAMESPACE.W2)[0];l&&this.initializeGridItemsetObj(l,"gridView")}}if("gridViewItemset"===this.options.itemTableType){var h={};for(var d in this.options.itemSet)h[d]=this.options.itemSet[d];for(var d in this.options.gridViewOptions)h[d]=this.options.gridViewOptions[d];h.item=this.options.item,this.setGridItemset(h)}else this.modelControl.setItemset(i.nodeset,i.label,i.value),this.refreshGridViewItemArr()},l.prototype.refreshGridViewItemArr=function(){this.gridViewItemArr=[],this.gridViewRowItemArr=[];var t=this.itemsetObj;if(t.nodeset&&t.nodeset.match("data:")){var e=this.modelControl.getDataComp();if(null!=e){var i="";this.constructor!==WebSquare.uiplugin.cellInfo&&(i=this.modelControl.id),this._setDataCollectionItemArr(i),this.gridViewItemArr=this.modelControl.getDataCollectionItemsetData(i,{allColumn:!0}),this.gridViewOptions.dataComp=e}}"function"==typeof this.setSelectItemArr&&this.setSelectItemArr()},l.prototype._initDisplayMode=function(){try{switch(this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}}catch(t){o.Y.printStackTrace(t)}},l.prototype.getItemText=function(t){try{this._initDisplayMode();var e="";if(t>-1&&t<this.getItemCount()){e=this.itemArr[t].orgLabel||this.itemArr[t].label;var i=this.options.delimiter;switch(!0!==r.Z.getBoolean(this.options.hideDelimiter)||this.itemArr[t].value&&e||(i=""),this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+i+e;break;case"2":e=e+i+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}}return e}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.getItemCount=function(t){try{try{return this.itemArr.length}catch(t){o.Y.printStackTrace(t,null,this)}}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.getVisibleItemCount=function(){try{var t=0;if(this.options.visibleColumn&&this.options.visibleColumnFalseValue)for(var e=0;e<this.itemArr.length;e++)!0!==this.itemArr[e]._hidden&&t++;else t=this.getItemCount();return t}catch(t){o.Y.printStackTrace(t,null,this)}},l.prototype.setDisplayMode=function(t){try{this.options.displayMode=t,this._initDisplayMode()}catch(t){o.Y.printStackTrace(t)}}},2406:function(t,e,i){"use strict";i.d(e,{q:function(){return b}});var o,s,r,a=i(2284),n=i(5461),l=i(8971),h=i(5375),d=i(1204),c=i(7991),u=i(2256),p=i(2338),g=i(5700),m=i(1498),f=i(3768),b=function(t,e,i){try{var o=e&&!0===e.__copyOptions;if(this.parentControl=null,this.childControlList=[],this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.render=null,this.scope_obj=null,this.scope_id=null,this.defaultOptions&&null!=this.defaultOptions.escape&&(this.defaultOptions.escape="false"!==h.I.getConfiguration("/WebSquare/escape/@value")),this._eventBubbling=h.I.getConfiguration("/WebSquare/eventBubbling/@value"),o?this.options=e:i?(this.options=this.getConfiguredOptions(),"treeview"==this.options.pluginName&&e&&e.renderType&&"virtual"==e.renderType&&(this.options=n.q.extendKeepingType(this.options,WebSquare.uiplugin.treeview_virtual.prototype.defaultOptions)),
this.options=n.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i)):this.options=this.getConfiguredOptions(),this.id||(this.id=this.options.id),this.options.id=this.id,e&&(!0===e._skipExtend||o||(this.options=n.q.extendKeepingType(this.options,e)),null==e._idCollisionCheck||o||(this.options._idCollisionCheck=e._idCollisionCheck),e._scope_obj_uuid&&(this.options._scope_obj_uuid=e._scope_obj_uuid,e._scope_obj_org_id&&(this.options._scope_obj_org_id=e._scope_obj_org_id),e._scope_obj_runtime_id&&(this.options._scope_obj_runtime_id=e._scope_obj_runtime_id),this.scope_obj=WebSquare.idCache[this.options._scope_obj_uuid],null!=this.scope_obj&&(this.scope_id=this.scope_obj.id,e._scope_obj_org_id&&e._scope_obj_runtime_id&&(this.id=this.options.id=this.options._scope_obj_runtime_id,this.org_id=this.options._scope_obj_org_id,this.scope_obj.scope||(this.scope_obj.scope={}),this.scope_obj.scope[this.org_id]=this)))),this.options.tooltip=this.options.tooltip||this.options.toolTip,this.options.tooltipSec=this.options.tooltipSec||this.options.toolTipSec,i){var s=WebSquare.Elem.api.getLocalName(i),r=n.q.componentsCache,a=r[s];a||(a=r[s]={}),a[this.uuid]=!0,this._wTagName=s}if(this.id){if(null!=window[WebSquare.noConflict].comp[this.id]||null!=window[WebSquare.noConflict].data[this.id])if(this.options._idCollisionCheck)if(null!=window[WebSquare.noConflict].comp[this.id]&&window[WebSquare.noConflict].comp[this.id]._orgUUID==window[WebSquare.noConflict].comp[this.id].uuid)window[WebSquare.noConflict].comp[this.id]._orgId=null,delete window[WebSquare.noConflict].comp[this.id]._orgId;else{if(null==WebSquare.WebSquaredoc.idCollisionList[this.id]){var c=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id];WebSquare.WebSquaredoc.idCollisionList[this.id]=[c.uuid]}WebSquare.WebSquaredoc.idCollisionList[this.id].push(this.uuid);var p=WebSquare.language.getMessage("E_comp_duplicated_Msg",t)||"id["+t+"] is duplicated. Check the source code.";u.v.printLog(p),!0!==d.Z.getBoolean(h.I.getConfiguration("/WebSquare/disableDuplicateIdAlert/@value"))&&alert(p)}else try{null!=(c=window[WebSquare.noConflict].comp[this.id]||window[WebSquare.noConflict].data[this.id])&&"function"==typeof c.remove&&c.remove(),u.v.printLog("["+t+"] removed")}catch(t){l.Y.printStackTrace(t,null,this)}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=h.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&"body"!=this.options.pluginName&&(window[this.id]=this),"body"!=this.options.pluginName&&(window[WebSquare.noConflict].comp[this.id]=this),"selectbox"==this.options.pluginName&&e&&e.renderType&&(this.options.renderType=e.renderType),this.dom={},this.attributes=[],!o&&i&&this.options.parseAttributes&&(this.getAttributeNode=this.getAttributeNode||WebSquare.xfControl.attributes.getAttributeNode,this.setAttributeNode=this.setAttributeNode||WebSquare.xfControl.attributes.setAttributeNode,this.removeAttributeNode=this.removeAttributeNode||WebSquare.xfControl.attributes.removeAttributeNode),this.activeStatus="stop",this.completed=!1,this.domStatus="",this.modelControl=new WebSquare.modelControl(this.id,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.event=new f.i,this.initialize(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.dataObjInfo={}}catch(t){l.Y.printStackTrace(t,null,this)}};n.q.extend(b.prototype,g.A.prototype),n.q.extend(b.prototype,m.A.prototype),b.prototype.defaultOptions={},b.prototype.configuredOptions={},b.prototype.getConfiguredOptions=function(){var t,e,i=this.defaultOptions.pluginName,o={};if("selectbox"===i&&"native"===this.defaultOptions.renderType&&(i="selectbox_native"),this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{
var s=n.q.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],systemEvents:[],xmlEvents:null,value:"",ref:"",model:"",bind:"",style:"",className:"",tabIndex:"",readOnly:!1,disabled:!1,useLocale:!1,useDefaultLabel:!1,localeRef:"",useConfig:!1,toolTip:"",tooltip:"",parentEvent:"",_idCollisionCheck:!1,_scope_obj_uuid:null,_scope_obj_org_id:"",_scope_obj_runtime_id:"",preventMultipleClick:!1},this.defaultOptions);void 0!==s.useLocale&&"true"===h.I.getConfiguration("/WebSquare/useLocale/@value")&&(s.useLocale=!0,s.useDefaultLabel="true"===h.I.getConfiguration("/WebSquare/useLocale/@useDefaultLabel"));var r=h.I.getConfiguration("/WebSquare/useItemLocale/@value");""!==r&&void 0!==r&&(s.useItemLocale=d.Z.getBoolean(r));var a=!0;if(s.useConfig||d.Z.getBoolean(h.I.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var l=h.I.getConfig(i);s=n.q.extendKeepingType(s,l),a=d.Z.isEmptyObject(l)}if("selectbox_native"===i&&!0===a){var c="selectbox";if(s.useConfig||d.Z.getBoolean(h.I.getConfiguration("/WebSquare/"+c+"/useConfig/@value"))){l=h.I.getConfig(c);s=n.q.extendKeepingType(s,l)}}for(var u in t=[],e=[],s)t.push(u),e.push(s[u]);this.configuredOptions[i]={keys:t,values:e}}for(var p=0;p<t.length;p++)o[t[p]]=e[p];return o},b.prototype.initialize=function(t){},b.prototype.finalize=function(){try{var t=WebSquare.getBody()||{};t._tooltipTriggerComponentId===this.uuid&&t.toolTip&&t.toolTip.hide(),p.f.fireEvent(this,"ondestroyed")}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.applyConfigOption=function(t){try{var e=h.I.getConfig(this.options.pluginName);return t=n.q.extendKeepingType(t,e)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setProperty=function(t,e){try{if(this.render[t]!=e){this.render[t]=e;var i="string"==typeof t?t.toLowerCase():t;"disabled"!==i&&"readonly"!==i||(e?this.render.setAttribute(i,i):this.render.removeAttribute(i)),this.onPropertyChange(t,e)}}catch(t){l.Y.printStackTrace(t)}return this},b.prototype.getProperty=function(t){try{return this.render[t]}catch(t){l.Y.printStackTrace(t)}},b.prototype.setAttribute=function(t,e){try{this.options[t]!=e&&(this.options[t]=e,p.f.fireEvent(this,"onattributechanged",t,e))}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getAttribute=function(t){try{return this.options[t]}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.redraw=function(){try{if(!this.render)return;var t=this.toHTML(),e=t.match(/(\<[^<>]*\>)(.*)(\<\/.*\>)/);if(e&&4==e.length){var i=e[2];h.I._safeInnerHTML(this.render,i)}else alert("cannot redraw : "+this.id)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.writeTo=function(t,e,i,o){try{if(this.render)return;var s=this.toHTML().wq_trim(),r=s.indexOf(">")+1,a=s.lastIndexOf("<"),n=a<r,d=s.substring(0,r).wq_trim(),u=n?"":s.substring(r,a),p=n?"":s.substring(a).wq_trim();if(""!=d&&""!=p||""!=d&&n){var g=d.match(/\<([^ \>]*)/)[1].toLowerCase();if({iframe:!0,img:!0,a:!0,source:!0,embed:!0,form:!0,frame:!0,frameset:!0,line:!0,script:!0,object:!0}[g]){d=d.replace(/&/g,"&amp;")}var m=c._.parse(d+p),f=WebSquare.WebSquareparser.parseAttribute(m.documentElement);if("table"===g){var b=document.createElement("div");h.I._safeInnerHTML(b,s),this.render=b.firstChild;try{for(var y in f)"style"==y?this.render.style.cssText=f[y]:"className"==y?this.render.className=f[y]:this.render[y]=f[y]}catch(t){l.Y.printStackTrace(t,null,this)}}else{this.render=document.createElement(g);try{for(var y in f)"style"==y?this.render.style.cssText=f[y]:"className"==y?this.render.className=f[y]:this.render[y]=f[y]
;u&&"iframe"!=g&&"input"!=g&&"img"!=g&&h.I._safeInnerHTML(this.render,u)}catch(t){l.Y.printStackTrace(t,null,this)}}o&&"number"==typeof o.index?t.render?(t.render.insertBefore(this.render,t.render.childNodes[o.index]),this.parentControl!=t&&t.addControl(this)):t.insertBefore&&t.insertBefore(this.render,t.childNodes[o.index]):"number"==typeof e&&t.targetNode?t.render?(t.render.insertBefore(this.render,t.targetNode),this.parentControl!=t&&t.addControl(this)):t.insertBefore?t.insertBefore(this.render,t.targetNode):alert("cannot writeTo : "+this.id):t.render?(t.render.appendChild(this.render),this.parentControl!=t&&t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot writeTo : "+this.id)}try{null!=i&&WebSquare.idCache[i]&&(this.parentFrame=i,WebSquare.idCache[i].childAllControlList.push(this.uuid))}catch(t){l.Y.printStackTrace(t,null,this),l.Y.printError("parentFrame is not wframe")}}catch(t){l.Y.printStackTrace(t,null,this)}},b.appendToRe1=new RegExp("[\\n\\t\\r]*","g"),b.appendToRe2=new RegExp("(^\\<[^<>]*\\>)(.*)(\\<\\/.*\\>$)"),b.appendToRe3=new RegExp("\\<([^ \\>]*)"),b.prototype.appendTo=function(t,e){try{if(this.render)return;var i="",o="",s="",r=this.toHTML().wq_trim(),a=(r=r.replace(WebSquare.xfControl.appendToRe1,"")).match(WebSquare.xfControl.appendToRe2);if(a&&4==a.length?(i=a[1],o=a[2],s=a[3]):a||"<"!=r.charAt(0)||">"!=r.charAt(r.length-1)||(i=r),""!=i){var n=c._.parse(i+s),u=WebSquare.WebSquareparser.parseAttribute(n.documentElement),p=i.match(WebSquare.xfControl.appendToRe3)[1];this.render=document.createElement(p);try{for(var g in u)"style"!=g?"className"!=g?this.render.setAttribute(g,u[g]):this.render.className=u[g]:this.render.style.cssText=u[g]}catch(t){l.Y.printStackTrace(t,null,this)}if("div"==p.toLowerCase())h.I._safeInnerHTML(this.render,o);else{var m=c._.parse(r).documentElement.childNodes;if(m.length>0)for(var f=0;f<m.length;f++){var b=m[f];this.render.appendChild(d.Z.XMLToHTML(b))}}t.contentRender?(t.contentRender.appendChild(this.render),t.addControl(this)):t.render?(t.render.appendChild(this.render),t.addControl(this)):t.appendChild?t.appendChild(this.render):alert("cannot appendTo : "+this.id)}try{null!=e&&WebSquare.idCache[e]&&(this.parentFrame=e,WebSquare.idCache[e].childAllControlList.push(this.uuid))}catch(t){l.Y.printStackTrace(t,null,this),l.Y.printError("parentFrame is not wframe")}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.appendChild=function(t){try{if(!this.render||!t)return;t.render?this.render.appendChild(t.render):this.render.appendChild(t)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.refreshDom=function(){try{if(!this.render)return;for(var t=0;t<this.childControlList.length;t++){var e=this.childControlList[t];e.refreshDom(),"new"==e.domStatus&&(e.render?this.render.appendChild(e.render):e.writeTo(this),e.domStatus="")}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.refresh=function(){},b.prototype.refreshItemset=function(){},b.prototype.preActivate=function(){try{if("stop"!=this.activeStatus)return void u.v.printLog("duplicated call for preActivate");this.setRender();var t=this.childControlList;"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName&&"pageFrame"!==this.options.pluginName||null==t[0]||(t="sync"===this.options.mode?[]:t[0].childControlList);for(var e=0;e<t.length;e++)"stop"==t[e].activeStatus&&t[e].preActivate();this.render&&(this.activeStatus="preActive",this.setPreAction&&this.setPreAction(),this.modelControl.binding())}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.activate=function(){try{if("active"==this.activeStatus)return void $l("!!!WARNING!!! duplicate call 'activate' for : "+this.id);"stop"==this.activeStatus&&this.preActivate();var t=this.childControlList,e=[];"wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName&&"pageFrame"!==this.options.pluginName||null==t[0]||(t=[])
;for(var i=0;i<t.length;i++)if("active"!=t[i].activeStatus){var o=t[i].activate();if(o&&o instanceof window.Array)for(var s=0;s<o.length;s++)e.push(o[s])}if(this.render){this.activeStatus="active",this.setUserAction();var r=this.setAction();if(r&&r instanceof window.Promise&&e.push(r),"wframe"===this.options.pluginName||this.options.udcName||"udc2"===this.options.pluginName||"pageFrame"===this.options.pluginName){var a=null;if(this.options.nextTabID){a=$("#"+this.id+" *:wq:tabbable"),null==WebSquare.tabOrder[this.id]&&(WebSquare.tabOrder[this.id]={});var n=null;this.options.udcName?this.parentFrame&&void 0!==WebSquare.idCache[this.parentFrame]&&(n=WebSquare.idCache[this.parentFrame].id):n=this.scope_id;var c,u=null!=n?d.Z.getComponentById(this.options.nextTabID,n).id:this.options.nextTabID;WebSquare.tabOrder[this.id].nextTabID=u;for(var g=a.length-1;g>0&&(!0===(c=$(a[g]).wq()[0]).getReadOnly()||!0===c.getDisabled());g--);null!=c&&(null==WebSquare.tabOrder[u]&&(WebSquare.tabOrder[u]={}),WebSquare.tabOrder[u].preTabID=c.id,null==WebSquare.tabOrder[c.id]&&(WebSquare.tabOrder[c.id]={}),WebSquare.tabOrder[c.id].nextTabID=u)}if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var m=null;if(null!=this.options.firstTabID)m=d.Z.getComponentById(this.options.firstTabID,this.id);else{null==a&&(a=$("#"+this.id+" *:wq:tabbable"));for(g=0;g<a.length&&(!0===(m=$(a[g]).wq()[0]).getReadOnly()||!0===m.getDisabled());g++);}if(null!=m){var f=WebSquare.tabOrder[this.id].preTabID;WebSquare.tabOrder[f].nextTabID=m.id,null==WebSquare.tabOrder[m.id]&&(WebSquare.tabOrder[m.id]={}),WebSquare.tabOrder[m.id].preTabID=f}}}if(this.options.tabIndex)if("uiplugin.inputCalendar"==this.options.pluginType)this.getElementById(this.id+"_input").tabIndex=this.options.tabIndex;else if("uiplugin.selectbox"==this.options.pluginType&&"native"==this.options.renderType){this.getElementById(this.id+"_input_0").tabIndex=this.options.tabIndex}else this.render.tabIndex=this.options.tabIndex;1==this.options.readOnly&&this.setReadOnly(this.options.readOnly),1==this.options.disabled&&this.setDisabled(this.options.disabled);var b=d.Z.getBoolean(h.I.getConfiguration("/WebSquare/hideTooltipDisabledComp/@value"));if(1==this.options.disabled&&""!=this.options.tooltip&&b||""!=this.options.tooltip&&this.setToolTip(this.render,this.options.tooltip),""!=this.options.tooltipId&&this.setToolTipComp(this.render,this.options.tooltipId),p.f.fireEvent(this,"oncreated",this.options),this.modelControl.isDataCollectionRefBinded&&"string"!=typeof this._eventTarget){var y=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);y&&"dataList"===y.initializeType&&this.bind("onclick",this.setRefPosition)}this.modelControl.isDataCollectionRefBinded}if(e.length>0)return e}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.deactivate=function(){try{this.activeStatus="stop";for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].deactivate();this.modelControl.unbinding(),this.event.clearElement(this.render),this.event.clearCache()}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.remove=function(t){try{var e=null;null!=this.render&&(e=this.render.getAttribute("id"));var i=this.getParent();this.destroy(t);var o=null;e&&(o=document.getElementById(e)),null==o||t||(WebSquare.removeNode(o),o=null),i&&i.removeControl(this);var s=WebSquare.getBody()||{};for(var r in s.childControlList)s.childControlList[r]==this&&s.childControlList.splice(r,1)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.empty=function(){try{return this.destroy(),void(this.render.textContent="")}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.adaptDocType=function(){try{if("trigger".indexOf(this.options.pluginName)>-1)return;if(this.render!=document.body){this.render.offsetWidth;var t=this.getStyle("height"),e=this.getStyle("width"),i={paddingTop:parseInt(this.getStyle("padding-top"))||0,
paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0};if(t.indexOf("px")>-1){var o=(t=parseInt(t))-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth);this.setStyle("height",o+"px")}else t.indexOf("%");if(e.indexOf("px")>-1){var s=(e=parseInt(e))-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth);this.setStyle("width",s+"px")}else e.indexOf("%")}}catch(t){$l("error in adaptDocType : "+this.id),l.Y.printStackTrace(t,null,this)}},b.prototype.setRender=function(t){try{t?(this.render&&(this.render.parentNode.insertBefore(t,this.render),this.render.parentNode.removeChild(this.render)),this.render=t):this.render&&null!=this.render.parentElement||(this.render=document.getElementById(this.id)),this.render}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getID=function(){try{return this.id}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getOriginalID=function(){try{return this.org_id?this.org_id:this.id}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.build=function(){try{this.setLayout()}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setUserAction=function(){try{for(var t in this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setLayout=function(){},b.prototype.onComplete=function(){if("active"==this.activeStatus&&!this.completed){var t=this.childControlList;if("wframe"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName&&"pageFrame"!==this.options.pluginName||null==t[0]||(t=[]),t&&t.length>0)for(var e=0;e<t.length;e++)!t[e].completed&&"function"==typeof t[e].onComplete&&t[e].getPluginName&&"multiupload"!=t[e].getPluginName()&&t[e].onComplete();this.completed=!0}},b.prototype.setToolTip=function(t,e){try{"string"==typeof e&&(this.options.tooltip=e);var i=this.options.tooltip||this.options.toolTip;WebSquare.getBody().setToolTip(this.render,i),this.render.tooltipShow=0!=t}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setToolTipComp=function(){WebSquare.getBody().setToolTipComp(this.render,this.options.tooltipId)},b.prototype._showTooltip=function(t,e,i){if(!this.tooltip){try{var o=h.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var s=d.Z.getGlobalFunction(o,this.scope_id),r=!0;if("function"==typeof s&&(r=s(this)),!r)return}}catch(t){l.Y.printStackTrace(t)}this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2"+this.getPluginName()+"_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")}this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?c._._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),h.I._safeInnerHTML(this.tooltip.render,i)},b.prototype.blur=function(){try{this.render.blur()}catch(t){l.Y.printStackTrace(t)}},b.prototype.click=function(){try{this.render.click()}catch(t){l.Y.printStackTrace(t)}},b.prototype.focus=function(){try{this.render.focus()}catch(t){l.Y.printStackTrace(t)}},b.prototype.select=function(){
try{this.render.select()}catch(t){l.Y.printStackTrace(t)}},b.prototype.getTabIndex=function(){try{return this.options.tabIndex}catch(t){l.Y.printStackTrace(t)}},b.prototype.onPropertyChange=function(t,e){},b.prototype.setDisabled=function(t){try{t=d.Z.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t)}catch(t){l.Y.printStackTrace(t)}return t},b.prototype.getDisabled=function(){try{return this.options&&this.options.disabled}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setReadOnly=function(t){try{t=d.Z.getBoolean(t),this.options.readOnly=t,this.setProperty("readOnly",t)}catch(t){l.Y.printStackTrace(t,null,this)}return t},b.prototype.getReadOnly=function(){try{return this.options.readOnly}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getRef=function(){try{return this.options.ref}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype._getVisible=function(){try{return!!(this.render.offsetWidth||this.render.offsetHeight||this.render.getClientRects().length)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.displayLocaleValue=function(){if(this.options.useLocale&&this.options.localeRef){var t=this.getLocaleValue(this.options.localeRef);t&&this.setValue(t)}},b.prototype.getLocaleValue=function(t){if(void 0!==t&&null!=t||(t=this.options.localeRef),void 0!==t){t=t.wq_trim();var e=WebSquare.WebSquareLang[t];null==e&&(e=this.options.useDefaultLabel?"":"global_undefined")}return e},b.prototype.getDomList=function(t,e,i){return i=i||this.render,null==this.dom[t]&&(this.dom[t]=i.getElementsByTagName(e)),this.dom[t]},b.prototype.getElementById=function(t){return null==this.dom[t]&&(this.dom[t]=document.getElementById(t)),this.dom[t]},b.prototype.getPluginName=function(){return this.options.pluginName},b.prototype.toHTML=function(){alert("you should override 'toHTML' for "+this.id)},b.prototype.setAction=function(){alert("you should override 'setAction' for "+this.id)},b.prototype.childFiredEvent=function(t,e){arguments[0]=this,p.f.fireEvent.apply(null,arguments)},b.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};if(this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),"active"==this.activeStatus){var s=this.event.addUserEvents(this,[o],this.options.userEvents);s.length>0&&this.event.addEvents(this,s)}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.bind=function(t,e){try{var i=h.I.getConfiguration("/WebSquare/eventUsePrefix/@value");if("string"==typeof t&&"on"!=t.slice(0,2)&&"false"!=i&&(t="on"+t),"string"==typeof t){var o=(t=t.toLowerCase()).indexOf("(");o>=0&&(t=t.slice(0,o))}this.addEvent(t,e)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.trigger=function(t,e){try{var i=h.I.getConfiguration("/WebSquare/eventUsePrefix/@value");if("string"==typeof t&&"on"!=t.slice(0,2)&&"false"!=i&&(t="on"+t),"string"==typeof t){var o=(t=t.toLowerCase()).indexOf("(");o>=0&&(t=t.slice(0,o))}var s=!1;if(null!=this.options.userEvents)for(var r=0;r<this.options.userEvents.length;r++)if(this.options.userEvents[r]===t){s=!0;break}if(!s&&p.f.isEventSupported(this.render,t))e&&e.constructor==Array?p.f.fireSystemEvent(this,t,e[0]):p.f.fireSystemEvent(this,t);else{var a=[this,t];a=a.concat(e),p.f.fireEvent.apply(p.f.fireEvent,a),a[0]=null}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t){var i=(t=t.toLowerCase()).indexOf("(");i>=0&&(t=t.slice(0,i))}if("string"==typeof t&&"function"==typeof e)for(var o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&e===this.userEventList[o].param.handler&&(this.userEventList.splice(o,1),"object"===(0,a.A)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){
for(o=this.userEventList.length-1;o>=0;o--)t===this.userEventList[o].name&&this.userEventList.splice(o,1);"object"===(0,a.A)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var s in this.systemEventList)this.event.removeListener(this.render,s,this.systemEventList[s].handler);this.userEventList=[],this.systemEventList={}}this.options&&this.options.xmlEvents&&this.userEventList&&(this.options.xmlEvents=this.userEventList.slice())}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},b.prototype.getGenerator=function(){for(var t=this;t.parentControl&&(!(t=t.parentControl).options||"generator"!=t.options.pluginName););return t},b.prototype.getGeneratedIndex=function(){if(!this.options)return null;for(var t=this.getGenerator(),e=0;e<t.generatedIndexSet.length;e++)if(this.options.g_index==t.generatedIndexSet[e])return e},b.prototype.getGeneratedComponent=function(t){var e=this.getGeneratedIndex();return this.getGenerator().getChild(e,t)},b.prototype.getAttributesString=function(t){try{var e,i=" ";if(t){var o={id:"Y",style:"Y",class:"Y",tabIndex:"Y",colSpan:"Y",colspan:"Y",rowSpan:"Y",title:"Y",rowspan:"Y"},s={row_out_style:"Y",rowIndex:"Y",rowindex:"Y",NaNFormat:"Y",footer_id:"Y",width:"Y",inputtype:"Y",header_id:"Y",colindex:"Y",colIndex:"Y",expression:"Y",displayFormat:"Y",displayFormatter:"Y",changeFuncName:"Y",directItemChoice:"Y",tdIndex:"Y",sort:"Y",useFilter:"Y",autoScope:"Y",trIndex:"Y",customFilterItemCnt:"Y",dateValidCheck:"Y",valueNode:"Y",openStatus:"Y",col_id:"Y",rowStyleClassName:"Y",readOnly:"Y",cellStyleClassName:"Y",targetcolumnid:"Y",targetColumnID:"Y",depthColumn:"Y",colId:"Y",showDepth:"Y",style_bak:"Y",tdindex:"Y",onChangeFunction:"Y",sortable:"Y",trindex:"Y",calendarValueType:"Y",colMerge:"Y",colMerged:"Y",inputType:"Y",value:"Y",idx:"Y",summary:"Y",toolTip:"Y",or_bgColor:"Y",localeRef:"Y",editModeEvent:"Y",dataType:"Y",useLocale:"Y",viewType:"Y",displayType:"Y",index:"Y",orderByColumn:"Y",checkboxLabel:"Y",checkboxLabelPosition:"Y",unique_id:"Y",or_wd:"Y"};for(var r in t)if("@"!=r.charAt(0))if(n.q.dataPrefix)if(void 0!==o[r])i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' ";else if(void 0!==s[r])e=t[r]+"",i+=d.Z.getDataPrefix(r)+"='"+e.wq_replaceAll("'","&#39;")+"' ";else{r.indexOf("data-")>-1&&(i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' ");var a=r.toLowerCase();!t[r]||"disabled"!==a&&"readonly"!==a||(i+=a+"='"+t[r]+"' ")}else i+=r+"='"+(e=t[r]+"").wq_replaceAll("'","&#39;")+"' "}else if(this.options.parseAttributes){0==this.attributes.length&&this.element&&(this.attributes=WebSquare.Parser.parseAttributesNode(this.element));for(r=0;r<this.attributes.length;r++)e=this.attributes[r].value?this.attributes[r].value.wq_replaceAll("'","&#39;"):"",i+=this.attributes[r].name+"='"+e+"' "}return i}catch(t){return l.Y.printStackTrace(t,null,this),""}},b.prototype.invoke=function(t,e,i,o){try{i=n.q.extend({excludePlugin:"",excludeId:"",includePlugin:"",includeId:""},i||{}),o=o||[];if(!this.getPluginName){if(this.childControlList)for(var s=0;s<this.childControlList.length;s++)WebSquare.xfControl.prototype.invoke.call(this.childControlList[s],t,e,i,o);return}var r={group:!0,tabContainer:!0,Switch:!0,repeat:!0};if(!r[this.getPluginName()])return void $l("The components 'invoke' is not capable of running the component["+this.id+"].");var a=this.getChildren();for(s=0;s<a.length;s++){var h=a[s];if(h.getPluginName)if(r[h.getPluginName()])h.invoke(t,e,i,o);else{if(i.includePlugin.wq_trim().length>0||i.includeId.wq_trim().length>0){if(-1===(" "+i.includePlugin+" ").indexOf(" "+h.options.pluginName+" ")&&-1===(" "+i.includeId+" ").indexOf(" "+h.id+" "))continue
}else if((" "+i.excludePlugin+" ").indexOf(" "+h.options.pluginName+" ")>-1||(" "+i.excludeId+" ").indexOf(" "+h.id+" ")>-1)continue;if("assert"===t){if(h.getValue){var d,c="";if(c="function"==typeof e?e(h):e,h.getValue()==c)(d={}).id=h.id,d.org_id=h.getOriginalID(),d.result=!0,o.push(d);else(d={}).id=h.id,d.org_id=h.getOriginalID(),d.result=!1,o.push(d)}}else h[t]&&"function"==typeof h[t]&&("function"==typeof e?((d={}).id=h.id,d.org_id=h.getOriginalID(),d.result=h[t](e(h)),o.push(d)):((d={}).id=h.id,d.org_id=h.getOriginalID(),d.result=h[t](e),o.push(d)))}else WebSquare.xfControl.prototype.invoke.call(h,t,e,i,o)}return o}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getTitle=function(){return this.render.getAttribute("title")},b.prototype.setTitle=function(t){this.render.setAttribute("title",t)},b.prototype.makeScope=function(t){if(this.scope||(this.scope={}),t.childControlList)for(var e=0;e<t.childControlList.length;e++){var i=t.childControlList[e];i.org_id&&(this.scope[i.org_id]=i),i.options&&("wframe"===i.options.pluginName||"pageFrame"===i.options.pluginName||i.options.udcName)||this.makeScope(i)}},b.attributes=(o={a:["href","target","name","title"]},s={},r=function(t){var e=s[t];if(!e){var i=o[t];if(e={},i)for(var r=0;r<i.length;r++)e[i[r]]=!0;var a=h.I.getConfig("attributes/whiteList");if(a&&a[t]){var n=a[t].split(",");for(r=0;r<n.length;r++)e[n[r]]=!0}s[t]=e}return e},{getAttributeNode:function(t){try{return this.render.getAttribute(t)}catch(t){l.Y.printStackTrace(t)}},setAttributeNode:function(t,e){try{r(this.options.tagname)[t]?this.render.setAttribute(t,e):u.v.printLog("Cannot set '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){l.Y.printStackTrace(t)}},removeAttributeNode:function(t){try{r(this.options.tagname)[t]?this.render.removeAttribute(t):u.v.printLog("Cannot remove '"+t+"' attribute node on ["+this.id+"]. See attributes configurations.")}catch(t){l.Y.printStackTrace(t)}}}),b.prototype.broadcast=function(t){try{for(var e in this.dataObjInfo){var i=this.dataObjInfo[e];if("linkedDataList"===i.initializeType)t.linkedDataList&&i[t.linkedDataList[0]].apply(i,t.linkedDataList[1]||[])}this.element&&("w2:grid"!=this.element.tagName&&"w2:gridView"!=this.element.tagName||t.gridView&&this[t.gridView[0]].apply(this,t.gridView[1]))}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.rollback=function(){try{var t=this.modelControl.getData(),e=this.getValue(),i=this.options.keepValue?e:t;i!=e&&this.setValue(i)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.setRefPosition=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t&&"dataList"===t.initializeType)if("number"==typeof t.rowPosition){var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID;e!=i&&t.setColumnPosition(i)}}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.fireRefEvent=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t=WebSquare.DataCollection.api.getObj(this.modelControl.dataCollectionRefInfo.dataComp);if(t&&"dataList"===t.initializeType)if("number"==typeof t.rowPosition){var e=t.getColumnPosition(),i=this.modelControl.dataCollectionRefInfo.colID,o=this.getValue();if(e==i)!1===t.fireOnBeforeColumnChangeEvent({newValue:o})&&this.rollback()}}}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.clone=function(t,e){try{var i=this.element.cloneNode(!0);i.setAttribute("id",t);var o=d.Z.dynamicCreate(t,this.options.pluginName,i,e);return o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,o}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype._clone=function(t){try{var e=d.Z._copyOptions(this.options);e.id=t.getAttribute("id")||null;var i=t.getAttribute("g_index");isNaN(i)||null===i||(e.g_index=i);var o=t.getAttribute("for");o&&(e.for=o)
;var s=WebSquare.controlFactory.createControl(null,e,t,this.scope_obj,!0,this.parentFrame);if(s.attributes=this.attributes,s.getAttributeNode=this.getAttributeNode,s.setAttributeNode=this.setAttributeNode,s.removeAttributeNode=this.removeAttributeNode,"searchbox"===this.options.pluginName){var r=s.input.options.parentEvent;s.input.options=d.Z._copyOptions(this.input.options),s.input.options.parentEvent=r||null}return s}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t),i=this.childControlList;if(i.length>0){for(var o=[],s=t.getChildNodes(),r=0;r<s.length;r++){var a=s[r];1===a.nodeType&&null==WebSquare.controlFactory.createControlHash[a.getLocalName()]&&o.push(a)}var n=0;for(r=0;r<i.length;r++){if("function"==typeof i[r]._cloneRecursive)e.addControl(i[r]._cloneRecursive(o[n]));else if(i[r].constructor===WebSquare.tag){var h=new WebSquare.tag(null,null,i[r].element);h.scope_id=i[r].scope_id,h.scope_obj=i[r].scope_obj,e.addControl(h),n--}n++}}return e}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getURL=function(t,e){try{var i={frameObj:this.scope_obj,tempHome:this.getUdcRoot(),msaName:this.options.msaName};for(var o in e)i[o]=e[o];return h.I._getMsaSrc(t,i)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getImageURL=function(t,e,i){try{var o={frameObj:this.scope_obj,tempHome:this.getUdcRoot(),msaName:this.options.msaName,cssStyle:e};for(var s in i)o[s]=i[s];return o.type="image",h.I._getMsaSrc(t,o)}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getUdcHome=function(){},b.prototype.getUdcRoot=function(){try{if(null!=this.scope_obj&&this.scope_obj.options)return this.scope_obj.options.udcHome}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){l.Y.printStackTrace(t,null,this)}},b._resizeInfo={},b.addCheckResize=function(t,e){try{WebSquare.xfControl._resizeInfo[t]=e,d.Z.setInterval(WebSquare.xfControl.checkResize,{key:"WebSquare_xfControl_checkResize",delay:70})}catch(t){l.Y.printStackTrace(t,null,this)}},b.removeCheckResize=function(t){try{void 0!==WebSquare.xfControl._resizeInfo[t]&&delete WebSquare.xfControl._resizeInfo[t]}catch(t){l.Y.printStackTrace(t,null,this)}},b.checkResize=function(){try{var t=0;for(var e in WebSquare.xfControl._resizeInfo){var i=WebSquare.idCache[e];i&&(i[b._resizeInfo[e]](),t++)}0===t&&d.Z.clearInterval("WebSquare_xfControl_checkResize")}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype._getMsaName=function(){try{return this.scope_obj?this.scope_obj._getMsaName():""}catch(t){l.Y.printStackTrace(t,null,this)}},b.prototype._isSupportNextTabID=function(){try{return this.options&&!0==={anchor:!0,autoComplete:!0,checkbox:!0,checkcombobox:!0,grid:!0,gridView:!0,input:!0,inputCalendar:!0,multiselect:!0,radio:!0,searchbox:!0,selectbox:!0,spinner:!0,textarea:!0,trigger:!0}[this.options.pluginName]}catch(t){l.Y.printStackTrace(t)}},b.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=d.Z.getNextTabbableComp(this.id);t&&t.focus({shiftKey:!1})}}catch(t){l.Y.printStackTrace(t)}},b.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=d.Z.getPreTabbableComp(this.id);t&&t.focus({shiftKey:!0})}}catch(t){l.Y.printStackTrace(t)}},b.prototype.getNextTabID=function(t){try{if(!this._isSupportNextTabID())return null;var e=null;return null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(e=WebSquare.tabOrder[this.id].nextTabID),e}catch(t){l.Y.printStackTrace(t)}},b.prototype.setNextTabID=function(t,e){try{if(!this._isSupportNextTabID())return
;null!=t&&d.Z.setNextTabID(this.id,t,e)}catch(t){l.Y.printStackTrace(t)}}},3655:function(t,e,i){"use strict";i.d(e,{S:function(){return o}});var o=function(t){t.constructor===Object?this._elementType="json":this._elementType="xml",this._element=t,this.nodeType=this.getNodeType()};o.prototype.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.prototype.getNodeType=function(){return"xml"===this._elementType?this._element.nodeType:this._element.T},o.prototype.getNodeValue=function(){var t=null;if("xml"===this._elementType)t=this._element.nodeValue;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;t=null!==i?this._element[i]:null}return t},o.prototype.setNodeValue=function(t){if("xml"===this._elementType)this._element.nodeValue=t;else if("json"===this._elementType){var e=this._element.T,i=3===e?"text":4===e?"cdata":7===e?"instruction":8===e?"commnet":null;null!==i&&(this._element[i]=t)}},o.prototype.getElementsByTagName=function(t){var e=[];return"xml"===this._elementType?e=this._element.getElementsByTagName(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.getNodesByTagName(this._element,t)),this.create(e)},o.prototype.getAttribute=function(t){return"xml"===this._elementType?this._element.getAttribute(t):WebSquare.jsonUtil.getAttribute(this._element,t)},o.prototype.getAttributes=function(){return"xml"===this._elementType?this._element.attributes:WebSquare.jsonUtil.getAttributes(this._element)},o.prototype.setAttribute=function(t,e){var i=void 0;return"xml"===this._elementType?i=this._element.setAttribute(t,e):"json"===this._elementType&&(i=WebSquare.jsonUtil.setAttribute(this._element,t,e)),i},o.prototype.removeAttribute=function(t){var e=void 0;return"xml"===this._elementType?e=this._element.removeAttribute(t):"json"===this._elementType&&(e=WebSquare.jsonUtil.removeAttribute(this._element,t)),e},o.prototype.getTagName=function(){var t="";return"xml"===this._elementType?t=this._element.nodeName:"json"===this._elementType&&(t=this._element.N),t},o.prototype.getLocalName=function(){var t=void 0;if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[1]:e[0]}else"json"===this._elementType&&(t=WebSquare.jsonUtil.dropNS(this._element.N));return t},o.prototype.getNamespace=function(){var t="";if("xml"===this._elementType){var e=this._element.nodeName.split(":");t=2===e.length?e[0]:""}else"json"===this._elementType&&(t=WebSquare.jsonUtil.getNS(this._element.N));return t},o.prototype.getParentNode=function(){var t=void 0;return"xml"===this._elementType?t=this._element.parentNode:"json"===this._elementType&&(WebSquare.WebSquaredoc&&"function"==typeof WebSquare.WebSquaredoc.initParent&&WebSquare.WebSquaredoc.initParent(),t=this._element.parent),new WebSquare.Elem(t)},o.prototype.getChildNodes=function(){var t=[];return"xml"===this._elementType?t=this._element.childNodes:"json"===this._elementType&&(t=WebSquare.jsonUtil.getChildNodes(this._element)),this.create(t)},o.prototype.getValue=function(t,e){var i="";return t.startsWith("@")?i=this.getAttribute(t.substring(1)):(i=this.getElementsByTagName(t)[0],void 0!==e&&(i=i.getAttribute(e))),i},o.prototype.appendChild=function(t){return"xml"===this._elementType?this._element.appendChild(t):WebSquare.jsonUtil.appendChild(this._element,t)},o.prototype.removeChild=function(t){return"xml"===this._elementType?this._element.removeChild(t):WebSquare.jsonUtil.removeChild(this._element,t)},o.prototype.cloneNode=function(t){var e=null;return e="xml"===this._elementType?this._element.cloneNode(t):WebSquare.jsonUtil.cloneNode(this._element,t),new WebSquare.Elem(e)},o.prototype.serialize=function(){return"xml"===this._elementType?WebSquare.xml.serialize(this._elemen):WebSquare.jsonUtil.serialize(this._element)},o.api={},o.api.create=function(t){for(var e=[],i=0;i<t.length;i++)e.push(new WebSquare.Elem(t[i]));return e},o.api.getLocalName=function(t){
var e=t;return t instanceof WebSquare.Elem||(e=new WebSquare.Elem(t)),e.getLocalName()},o.api.getElementsByTagName=function(t,e,i){var o=[],s=t;return t instanceof WebSquare.Elem||(s=new WebSquare.Elem(t)),"xml"===s._elementType?o=WebSquare.xml.getElementsByTagName(s._element,e,i):"json"===s._elementType&&(o=WebSquare.jsonUtil.getNodesByTagName(s._element,e,i)),this.create(o)},o.api.getAttribute=function(t,e){var i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),i.getAttribute(e)},o.api.getValue=function(t,e,i){var o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),o.getValue(e,i)},o.api.getCDataNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getCDataNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getCDataNodeValue(i._element)),e},o.api.getTextNodeValue=function(t){var e="",i=t;return t instanceof WebSquare.Elem||(i=new WebSquare.Elem(t)),"xml"===i._elementType?e=WebSquare.xml.getTextNodeValue(i._element):"json"===i._elementType&&(e=WebSquare.jsonUtil.getTextNodeValue(i._element)),e},o.api.findNodes=function(t,e){var i=[],o=t;return t instanceof WebSquare.Elem||(o=new WebSquare.Elem(t)),"xml"===o._elementType?i=WebSquare.xml.findNodes(o._element,e):"json"===o._elementType&&(i=WebSquare.jsonUtil.findNodes(o._element,e)),i},o.type={element:1,attribute:2,text:3,cdata:4,instruction:7,comment:8,document:9}},4787:function(t,e,i){"use strict";i.d(e,{K:function(){return a}});var o=i(2284),s=i(8971),r=i(2256),a={setBindElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},setItemsetElement:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(i).instances[0].id;t.startsWith("instance(")||null==o?t.indexOf('"')>-1&&(t=t.replace('"',"'")):t=WebSquare.ModelUtil.concatInstanceFunction(t,o),void 0!==WebSquare.WebSquaredoc.boundElementCache[t]&&null!=WebSquare.WebSquaredoc.boundElementCache[t]||(WebSquare.WebSquaredoc.boundElementCache[t]={}),WebSquare.WebSquaredoc.boundElementCache[t][e]=e},createItemsetElement:function(t,e,i,o){try{this.nodeset=t,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset),this.id=o,this.label=e,this.value=i,this.nodeset.indexOf("/")==t.length-1&&(this.nodeset=this.nodeset.substring(0,t.length-1)),0==this.label.indexOf("/")?this.labelXPath=this.nodeset+this.label:this.labelXPath=this.nodeset+"/"+this.label,0==this.value.indexOf("/")?this.valueXPath=this.nodeset+this.value:this.valueXPath=this.nodeset+"/"+this.value}catch(t){s.Y.printStackTrace(t)}},createRefElement:function(t,e){try{this.nodeset=t,this.id=e,this.instance=WebSquare.ModelUtil.getInstanceByXPath(this.nodeset),this.filteredNodeset=WebSquare.ModelUtil.filterInstanceFunction(this.nodeset)}catch(t){s.Y.printStackTrace(t)}},createInstanceRefElement:function(t,e,i,o,r,a){try{this.xpath=t,this.id=e,this.baseNode=i,this.repeatNodeTagName=o,this.cellIdList=r,this.repeatxpath=t+"/"+o[0],this.scopeId=a}catch(t){s.Y.printStackTrace(t)}},getBind:function(t,e){try{var i=WebSquare.ModelUtil.getModelByID(e);for(var o in i.binds){var r=WebSquare.WebSquaredoc.models[0].binds[o];if(r.id==t)return r}return null}catch(t){s.Y.printStackTrace(t)}},filterInstanceFunction:function(t){return t.startsWith("instance(")&&(t=t.substring(t.indexOf(")")+2,t.length)),t},concatInstanceFunction:function(t,e){var i=t;return t.startsWith("instance(")||(i="instance('"+e+"')/"+t),i},findInstanceNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,
o.A)(arguments[0])?this._findInstanceNode(arguments[0]):this._findInstanceNode({xpath:t,modelId:e,scopeId:i})}catch(t){s.Y.printStackTrace(t)}},_findInstanceNode:function(t){var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",s=t.instanceId||"",r=s?this.getInstanceByID(s,i,o):this.getInstanceByXPath(e,i,o);return e=WebSquare.ModelUtil.filterInstanceFunction(e),WebSquare.xml.findNode(r.document,e)},findSerializedNode:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._findSerializedNode(arguments[0]):this._findSerializedNode({xpath:t,modelId:e,scopeId:i})}catch(t){s.Y.printStackTrace(t)}},_findSerializedNode:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"";return WebSquare.xml.serialize(WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:i,scopeId:o,instanceId:r}))}catch(t){s.Y.printStackTrace(t)}},findInstanceNodes:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._findInstanceNodes(arguments[0]):this._findInstanceNodes({xpath:t,modelId:e,scopeId:i})}catch(t){s.Y.printStackTrace(t)}},_findInstanceNodes:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"",a=r?this.getInstanceByID(r,i,o):this.getInstanceByXPath(e,i,o);return WebSquare.xml.findNodes(a.document,e)}catch(t){s.Y.printStackTrace(t)}},getInstanceValue:function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._getInstanceValue(arguments[0]):this._getInstanceValue({xpath:t,modelId:e,scopeId:i})}catch(t){s.Y.printStackTrace(t)}},_getInstanceValue:function(t){try{var e=t.xpath||"",i=t.modelId||"",o=t.scopeId||"",r=t.instanceId||"",a="",n=this.findInstanceNode({xpath:e,modelId:i,scopeId:o,instanceId:r});if(null==n)return"";if(1!=n.nodeType)return n.nodeValue;for(var l=n.firstChild;null!=l;l=l.nextSibling)3!=l.nodeType&&4!=l.nodeType||(a+=l.nodeValue);return a}catch(t){s.Y.printStackTrace(t)}},setInstanceValue:function(t,e,i,r){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._setInstanceValue(arguments[0]):this._setInstanceValue({xpath:t,value:e,modelId:i,scopeId:r})}catch(t){s.Y.printStackTrace(t)}},_setInstanceValue:function(t){try{var e=t.xpath||"",i=t.value,o=t.modelId||"",a=t.scopeId||"",n=t.instanceId||"",l=!!t.noRefresh,h=t.gridNoRefresh,d=this.getInstanceByID(n,o,a);if(i=void 0===i||null==i?"":i+"",-1!=e.lastIndexOf("/@")&&e.lastIndexOf("/")==e.lastIndexOf("/@")){var c=e.lastIndexOf("/@"),u=e.substring(c+2),p=e.substring(0,c),g=WebSquare.ModelUtil.findInstanceNode({xpath:p,modelId:o,scopeId:a,instanceId:n});if(null==g){if(null==(m=WebSquare.xml.createNode(d.document,p)))return!1;m.setAttribute(u,i)}else g.setAttribute(u,i);l||WebSquare.WebSquaredoc.detectChange(e,void 0,o,{op:"setInstanceValue",value:i,xpath:p,scope_id:a})}else{var m;if(null==(m=WebSquare.ModelUtil.findInstanceNode({xpath:e,modelId:o,scopeId:a,instanceId:n})))if(null==(m=WebSquare.xml.createNode(d.document,e)))return!1;if(null==m.firstChild){var f=m.ownerDocument.createTextNode(i);WebSquare.xml.appendChild(m,f)}else m.firstChild.nodeValue=i;l||WebSquare.WebSquaredoc.detectChange(e,void 0,o,{op:"setInstanceValue",value:i,xpath:e,gridNoRefresh:h,scope_id:a})}}catch(t){return r.v.printLog("ERROR["+e+"] ["+i+"] at WebSquare.ModelUtil.setInstanceValue "),s.Y.printStackTrace(t),!1}return!0},setInstanceNode:function(t,e,i,s,r,a){return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._setInstanceNode(arguments[0]):this._setInstanceNode({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceNode:function(t){var e=null;try{var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{
var c=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(o,a,h),u=WebSquare.ModelUtil.filterInstanceFunction(o);e=WebSquare.xml.createNode(c.document,u)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode does not exist.",p}var g,m,f=i.cloneNode(!0);if("replace"==n){if((g=this.getInstanceRefElementIndex(o,void 0,h))<0){m=o+"/"+i.tagName;for(var b=i;b&&!((g=this.getInstanceRefElementIndex(m,void 0,h))>=0);)m=m+"/"+b.tagName,b=b.childNodes[0]?b.childNodes[0]:null}}else g=this.getInstanceRefElementIndex(o,void 0,h);switch(n){case"append":WebSquare.xml.appendChild(e,f);break;case"insertBeforeSibling":e.parentNode.insertBefore(f,e);break;case"appendSibling":WebSquare.xml.appendChild(e.parentNode,f);break;default:n="replace";for(var y=e.childNodes,v=y.length-1;v>=0;v--)e.removeChild(y.item(v));WebSquare.xml.appendChild(e,f)}var w=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(o);var S=WebSquare.ModelUtil._getNodePath(f);"replace"!==n&&S?w.refresh(n,o+"/"+S):w.refresh(n),0!=l&&g>=0&&WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceNode",node:f,replaceNode:b,type:n,xpath:o,replacexpath:m,scope_id:h})}catch(t){r.v.printLog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.Y.printStackTrace(t)}},setInstanceLastNodeChildNodes:function(t,e,i,s,r,a){return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._setInstanceLastNodeChildNodes(arguments[0]):this._setInstanceLastNodeChildNodes({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceLastNodeChildNodes:function(t){var e=null;try{var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.refresh,h=t.scopeId||"",d=t.instanceId||"";9==i.nodeType&&(i=i.documentElement);try{var c=d?this.getInstanceByID(d,a,h):this.getInstanceByXPath(o,a,h),u=WebSquare.ModelUtil.filterInstanceFunction(o);e=WebSquare.xml.createNode(c.document,u)}catch(t){throw t}if(null==e){var p=new Error;throw p.number=0,p.description="[WebSquare.ModelUtil.setInstanceNode] destNode does not exist.",p}var g,m,f=i.cloneNode(!0),b=o.split("/"),y=o.split("[")[0],v=b[b.length-1].match(/[^[\]]+(?=])/)[0],w=this.getInstanceRefElementIndex(o,void 0,h);if(("replace"==n||"append"==n)&&w>=0&&f.childNodes.length>0&&(m=f.tagName),"append"!=n||WebSquare.xml.hasChildElement(e)||(n="replace"),"append"===n)for(var S=f.childNodes,_=0;_<=S.length-1;_++){if(1==(I=S.item(_)).nodeType){var C=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,C)}}else{n="replace";var x=e.childNodes;for(S=f.childNodes,_=x.length-1;_>=0;_--)e.removeChild(x.item(_));w>=0&&(g=f);for(_=0;_<=S.length-1;_++){var I;if(1==(I=S.item(_)).nodeType){C=WebSquare.xml.parse(WebSquare.xml.serialize(I)).documentElement;WebSquare.xml.appendChild(e,C)}}}var T=WebSquare.ModelUtil.getModelByID();WebSquare.WebSquaredoc.unrender(o),T.refresh(n),0!=l&&w>=0&&g&&g.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceLastNodeChildNodes",repeatNode:m,node:g,type:n,xpath:y,changeIndex:v,scope_id:h})}catch(t){r.v.printLog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.Y.printStackTrace(t)}},setInstanceChildNodes:function(t,e,i,s,r,a){return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._setInstanceChildNodes(arguments[0]):this._setInstanceChildNodes({doc:t,xpath:e,modelID:i,mode:s,refresh:r,scopeId:a})},_setInstanceChildNodes:function(t){var e=null;try{var i=t.doc,o=t.xpath||"",a=t.modelID||"",n=t.mode,l=t.scopeId||"",h=t.instanceId||"";if(-1!=(I=o.split("/"))[I.length-1].indexOf("["))return this._setInstanceLastNodeChildNodes({doc:t.doc,xpath:t.xpath,modelID:t.modelID,mode:t.mode,refresh:t.refresh,instanceId:t.instanceId,scopeId:t.scopeId});9==i.nodeType&&(i=i.documentElement);try{var d=h?this.getInstanceByID(h,a,l):this.getInstanceByXPath(o,a,l),c=WebSquare.ModelUtil.filterInstanceFunction(o)
;e=WebSquare.xml.createNode(d.document,c)}catch(t){throw t}if(null==e){var u=new Error;throw u.number=0,u.description="[WebSquare.ModelUtil.setInstanceNode] destNode does not exist.",u}var p=i.cloneNode(!0),g=[],m=[],f=this.getInstanceRefElementIndex(o,void 0,l),b=[];if("append"==n){for(var y=0,v=0;v<e.childNodes.length;v++)1==e.childNodes[v].nodeType&&y++;0==y&&(n="replace")}if("replace"==n&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,_=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode,C=WebSquare.WebSquaredoc.instanceRefElement[w].repeatNodeTagName.join("/");if(WebSquare.ModelUtil.isPartialMatchedXPath(S,o)){var x=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId;if(!x||l===x){var I=o.split("/"),T=o;if(S.split("/").length>I.length)if(f>=0&&_==p.tagName)g.push(p),b.push(T);else{var k=WebSquare.ModelUtil.getMatchedData(p,S,_,p.tagName,o);null!=k&&(m.push(k.baseNode),g.push(k.dataNode),b.push(S))}else for(var L=0;L<p.childNodes.length;L++)1==i.nodeType&&p.childNodes[L].tagName==C&&(_!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S))}}}if("append"===n){var A=p.childNodes;if(f>=0){S=WebSquare.WebSquaredoc.instanceRefElement[f].xpath,_=WebSquare.WebSquaredoc.instanceRefElement[f].baseNode,C=WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName.join("/");if(m.length>0){if(!g)for(w=0;w<A.length;w++)if(A[w].tagName==m){g.push(A[w]),b.push(S);break}}else _!=p.tagName?m.push(p.tagName):m.push(null),g.push(p),b.push(S)}for(L=0;L<=A.length-1;L++){if(1==(q=A.item(L)).nodeType){var D=WebSquare.xml.parse(WebSquare.xml.serialize(q)).documentElement;WebSquare.xml.appendChild(e,D)}}}else{n="replace";var W=e.childNodes;for(A=p.childNodes,L=W.length-1;L>=0;L--)e.removeChild(W.item(L));for(L=0;L<=A.length-1;L++){var q;if(1==(q=A.item(L)).nodeType){D=WebSquare.xml.parse(WebSquare.xml.serialize(q)).documentElement;WebSquare.xml.appendChild(e,D)}}}var M=WebSquare.ModelUtil.getModelByID();if(WebSquare.WebSquaredoc.unrender(o),M.refresh(n),g.length)for(w=0;w<b.length;w++)WebSquare.WebSquaredoc.detectChange(o,void 0,a,{op:"setInstanceChildNodes",node:g[w],baseNode:m[w],type:n,xpath:b[w],scope_id:l});else if("replace"==n)for(L=0;L<WebSquare.WebSquaredoc.instanceRefElement.length;L++){var E=WebSquare.WebSquaredoc.instanceRefElement[L];if((!E.scopeId||l===E.scopeId)&&-1!=E.xpath.indexOf(o)){var R=WebSquare.ModelUtil.findInstanceNode(E.xpath,void 0,l);(!R||R&&0==R.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(o,void 0,null,{op:"removeInstanceNodeAll",node:p,xpath:o,scope_id:l})}}}catch(t){r.v.printLog("ERROR [xpath:"+o+"] at WebSquare.ModelUtil.setInstanceNode "),s.Y.printStackTrace(t)}},getModelByID:function(t){if(void 0===t||null==t||""==t)return WebSquare.WebSquaredoc.models[0];for(var e=0;e<WebSquare.WebSquaredoc.models.length;e++)if(WebSquare.WebSquaredoc.models[e].id==t)return WebSquare.WebSquaredoc.models[e];return null},getInstanceByXPath:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(e);t=t.wq_trim();if(a._createEmptyInstance(e,i),t.startsWith("instance(")){var s=t.indexOf("("),r=t.indexOf(")"),n=new Function("return "+t.substring(s+1,r))();for(var l in o.instances){var h=o.instances[l];if(i&&(!h.id||h.id===n)&&i===h.scope_id||h.id==n)return h}return o.instances[0]}var d=o.instances[0];if(i)for(var c=0,u=o.instances.length;c<u;c++){if((h=o.instances[c]).scope_id===i){d=h;break}}return d},getInstanceByID:function(t,e,i){var o=WebSquare.ModelUtil.getModelByID(e);try{for(var r in a._createEmptyInstance(e,i),o.instances){var n=o.instances[r];if(i&&n.scope_id===i&&(!n.id||n.id===t)||n.id===t)return n}}catch(t){s.Y.printStackTrace(t)}return o.instances[0]},_createEmptyInstance:function(t,e){var i=WebSquare.ModelUtil.getModelByID(t);try{if(0===i.instances.length){
var o=WebSquare.Parser.WebSquareParser.prototype.parseInstance('<xf:instance xmlns:xf="http://www.w3.org/2002/xforms"><data xmlns=""/></xf:instance>',e);i.instances.push(o)}}catch(t){s.Y.printStackTrace(t)}},copyNode:function(t,e,i,r,a){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._copyNode(arguments[0]):this._copyNode({srcXPath:t,destXPath:e,srcModelId:i,destModelId:r,scopeId:a})}catch(t){s.Y.printStackTrace(t)}},_copyNode:function(t){var e,i=t.srcXPath||"",o=t.destXPath||"",s=t.srcModelId||"",r=t.destModelId||"",a=t.scopeId||"",n=t.srcInstanceId||"",l=t.destInstanceId||"";try{var h=WebSquare.ModelUtil.findInstanceNode({xpath:i,modelId:s,scopeId:a,instanceId:n})}catch(t){throw t}if(null==h)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode does not exist.",e;try{var d=WebSquare.ModelUtil.getInstanceByID(l,r,a),c=WebSquare.ModelUtil.filterInstanceFunction(o),u=WebSquare.xml.createNode(d.document,c)}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode does not exist.",e;for(var p=u.childNodes,g=p.length-1;g>=0;g--)u.removeChild(p.item(g));var m=WebSquare.xml.parse(WebSquare.xml.serialize(h)).documentElement;if(WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry){var f=u.ownerDocument.importNode(m,!0);u.appendChild(f)}else u.appendChild(m);WebSquare.WebSquaredoc.detectChange(o,void 0,r,{scope_id:a})},copyChildrenNodes:function(t,e,i,r,a,n){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._copyChildrenNodes(arguments[0]):this._copyChildrenNodes({srcXPath:t,destXPath:e,mode:i,srcModelId:r,destModelId:a,scopeId:n})}catch(t){s.Y.printStackTrace(t)}},_copyLastNodeChildrenNodes:function(t){var e,i,o,s=t.srcXPath||"",r=t.destXPath||"",a=t.mode,n=t.srcModelId||"",l=t.destModelId||"",h=t.srcInstanceId||"",d=t.destInstanceId||"",c=t.scopeId||"";try{var u=WebSquare.ModelUtil.findInstanceNode({xpath:s,modelId:n,instanceId:h,scopeId:c})}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode does not exist.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(d,l,c),g=WebSquare.ModelUtil.filterInstanceFunction(r),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode does not exist.",e;if(m==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode and destNode cannot be the same in this operation.",e;var f=r.split("/"),b=r.split("[")[0],y=f[f.length-1].match(/[^[\]]+(?=])/)[0],v=this.getInstanceRefElementIndex(r,void 0,c);switch("replaceAll"==a&&v>=0&&u.childNodes.length>0&&(i=u.tagName),a){case"replaceAll":var w=m.cloneNode(!1),S=u.childNodes;v>=0&&(o=u);for(var _=0;_<=S.length-1;_++)1==S[_].nodeType&&WebSquare.xml.appendChild(w,S[_].cloneNode(!0));m.parentNode.insertBefore(w,m),m.parentNode.removeChild(m),m=null;break;case"append":for(S=u.childNodes,_=0;_<=S.length-1;_++){var C=S.item(_);if(1==C.nodeType){var x=WebSquare.xml.parse(WebSquare.xml.serialize(C)).documentElement;WebSquare.xml.appendChild(m,x)}}}"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(r,l),v>=0&&o&&o.childNodes.length>0&&WebSquare.WebSquaredoc.detectChange(r,void 0,l,{op:"copyLastNodeChildrenNodes",node:o,type:a,repeatNode:i,changeIndex:y,xpath:b,scope_id:c})},_copyChildrenNodes:function(t){var e,i,o=t.srcXPath||"",s=t.destXPath||"",r=t.mode,a=t.srcModelId||"",n=t.destModelId||"",l=t.srcInstanceId||"",h=t.destInstanceId||"",d=t.scopeId||"",c=s.split("/");if(-1!=c[c.length-1].indexOf("["))return this._copyLastNodeChildrenNodes({srcXPath:o,destXPath:s,mode:r,srcModelId:a,destModelId:n,srcInstanceId:l,destInstanceId:h,scopeId:d});try{
var u=WebSquare.ModelUtil.findInstanceNode({xpath:o,modelId:a,instanceId:l,scopeId:d})}catch(t){throw t}if(null==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode does not exist.",e;try{var p=WebSquare.ModelUtil.getInstanceByID(h,n,d),g=WebSquare.ModelUtil.filterInstanceFunction(s),m=WebSquare.xml.createNode(p.document,g)}catch(t){throw t}if(null==m)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] destNode does not exist.",e;if(m==u)throw(e=new Error).number=0,e.description="[WebSquare.ModelUtil.copyNode] srcNode and destNode cannot be the same in this operation.",e;var f=this.getInstanceRefElementIndex(s,void 0,d),b=[],y=[],v=[];if("replaceAll"==r&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){if(!(V=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)||d===V){var S=WebSquare.WebSquaredoc.instanceRefElement[w].xpath,_=WebSquare.WebSquaredoc.instanceRefElement[w].baseNode;if(s==S){var C=WebSquare.ModelUtil.findInstanceNode({xpath:o,instanceId:l,scopeId:d});i=C.tagName,v.push(C),b.push(o),y.push(S)}else if(WebSquare.ModelUtil.isPartialMatchedXPath(S,s)){var x=WebSquare.ModelUtil.getMatchedData(u,S,_,o,s);null!=x&&(v.push(x.dataNode),b.push(x.refXPath),y.push(S))}}}switch(r){case"replaceAll":var I=m.cloneNode(!1),T=u.childNodes;for(w=0;w<=T.length-1;w++)1==T[w].nodeType&&WebSquare.xml.appendChild(I,T[w].cloneNode(!0));m.parentNode.insertBefore(I,m),m.parentNode.removeChild(m),m=null;break;case"overwrite":T=u.childNodes;var k={},L={};for(w=0;w<=T.length-1;w++){if(1==(P=T[w]).nodeType){var A=P.nodeName,D=m.selectNodes(A);D.length>0?(void 0===L[A]?L[A]=0:L[A]=L[A]+1,void 0!==D[L[A]]?k[w]=D[L[A]]:k[w]=null):k[w]=null}}for(w=0;w<=T.length-1;w++){if(1==(P=T[w]).nodeType){var W,q=WebSquare.xml.parse(WebSquare.xml.serialize(P));W=WebSquare.core.browserCheck.chrome||WebSquare.core.browserCheck.safari||WebSquare.core.browserCheck.android||WebSquare.core.browserCheck.blackberry?q.documentElement.cloneNode(!0):q.documentElement,null!=k[w]?m.replaceChild(W,k[w]):WebSquare.xml.appendChild(m,W)}}break;case"replaceOnly":var M=m.childNodes;for(w=0;w<M.length;w++){var E=M.item(w);if(1==E.nodeType){var R=E.nodeName;if(null!=(P=u.selectSingleNode(R))){var N=(q=WebSquare.xml.parse(WebSquare.xml.serialize(P))).documentElement,F=m.ownerDocument.importNode(N,!0);m.replaceChild(F,E)}}}break;case"append":T=u.childNodes;if(f>=0)if(i){if(!v)for(var O=0;O<T.length;O++)if(T[O].tagName==i){v.push(T[O]),b.push(o);break}}else for(O=0;O<u.childNodes.length;O++)if(1==u.childNodes[O].nodeType&&WebSquare.WebSquaredoc.instanceRefElement[f].repeatNodeTagName[0]==u.childNodes[O].tagName){var B=o.split("/");i=B[B.length-1],v.push(u),y.push(s),b.push(o);break}for(w=0;w<=T.length-1;w++){var P;if(1==(P=T.item(w)).nodeType){N=(q=WebSquare.xml.parse(WebSquare.xml.serialize(P))).documentElement;WebSquare.xml.appendChild(m,N)}}}if("true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/copyChildrenNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(s,n),v.length)for(O=0;O<y.length;O++)WebSquare.WebSquaredoc.detectChange(y[O],void 0,n,{op:"copyChildrenNodes",node:v[O],baseNode:i,type:r,xpath:y[O],copiedXPath:b[O],scope_id:d});else if("replaceAll"==r)for(w=0;w<WebSquare.WebSquaredoc.instanceRefElement.length;w++){var Y=WebSquare.WebSquaredoc.instanceRefElement[w];if(-1!=Y.xpath.indexOf(s)){var V;if((V=WebSquare.WebSquaredoc.instanceRefElement[w].scopeId)&&d!==V)continue;var H=WebSquare.ModelUtil.findInstanceNode(Y.xpath,void 0,d);(!H||H&&0==H.childNodes.length)&&WebSquare.WebSquaredoc.detectChange(s,void 0,null,{op:"removeInstanceNodeAll",xpath:s,scope_id:d})}}},refreshModel:function(t,e,i){try{t||(t="");var o=WebSquare.ModelUtil.getModelByID(e);WebSquare.WebSquaredoc.unrender(t),i?o.refresh(void 0,i):o.refresh()}catch(t){s.Y.printStackTrace(t)}},removeInstanceNode:function(t,e,i){try{
return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._removeInstanceNode(arguments[0]):this._removeInstanceNode({xpath:t,refresh:e,scopeId:i})}catch(t){s.Y.printStackTrace(t)}},_removeInstanceNode:function(t){try{var e,i=t.xpath||"",o=t.refresh,r=t.scopeId||"",a=t.instanceId||"",n=WebSquare.ModelUtil.findInstanceNode({xpath:i,scopeId:r,instanceId:a}),l=!1,h=[];if(n&&0!=o&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var d=0;d<WebSquare.WebSquaredoc.instanceRefElement.length;d++){var c=WebSquare.WebSquaredoc.instanceRefElement[d].scopeId;if(!c||r===c){var u=i.split("/"),p=WebSquare.WebSquaredoc.instanceRefElement[d].xpath,g=p.split("/");if(g.length>u.length&&WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){for(var m=i,f=u.length;f<g.length-1;f++)m+="/"+g[f];i!=m&&(n=WebSquare.ModelUtil.findInstanceNode({xpath:m,scopeId:r,instanceId:a})),n&&n.selectSingleNode(g[g.length-1])&&(l=!0,h.push(p))}else if(i==p)l=!0,h.push(p);else if(WebSquare.ModelUtil.isPartialMatchedXPath(p,i)){var b=i.lastIndexOf("/");if(b>0){var y=i.substring(b+1);if(y.match(/\[@/i));else{if(-1!=y.indexOf("[")){var v=y.match(/[^[\]]+(?=])/)[0];isNaN(v)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n):(!0,e=parseInt(v)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[d].repeatxpath,scopeId:r,instanceId:a}),n);if(i=p,e>=0)break}}}}}if(n){var w=WebSquare.ModelUtil._getNodePath(n,!0);if(n.parentNode.removeChild(n),"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNode/@refresh")){var S=i;w&&(S=i+"/"+w),WebSquare.ModelUtil.refreshModel(i,null,S)}}if(e>=0&&(null==o||1==o)&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{op:"removeInstanceNode",node:n,deleteIndex:e,xpath:i,scope_id:r});else if(1==l)for(var _=0;_<h.length;_++)WebSquare.WebSquaredoc.detectChange(h[_],void 0,null,{op:"removeInstanceNodeAll",node:n,xpath:h[_],scope_id:r})}catch(t){s.Y.printStackTrace(t)}},removeInstanceNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._removeInstanceNodes(arguments[0]):this._removeInstanceNodes({xpath:t,scopeId:e})}catch(t){s.Y.printStackTrace(t)}},_removeInstanceNodes:function(t){try{for(var e,i=t.xpath||"",o=t.scopeId||"",r=t.instanceId||"",a=WebSquare.ModelUtil.findInstanceNodes({xpath:i,scopeId:o,instanceId:r}),n=t.gridNoRefresh,l=i,h=a.length-1;h>=0;h--){if(WebSquare.WebSquaredoc.instanceRefElement.length){var d=a[h];if(d&&WebSquare.WebSquaredoc.instanceRefElement.length)for(var c=0;c<WebSquare.WebSquaredoc.instanceRefElement.length;c++){var u=WebSquare.WebSquaredoc.instanceRefElement[c].scopeId;if(!u||o===u){var p=!1,g=[],m=i.split("/"),f=WebSquare.WebSquaredoc.instanceRefElement[c].xpath,b=f.split("/");if(b.length>m.length&&WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){for(var y=i,v=m.length;v<b.length-1;v++)y+="/"+b[v];i!=y&&(d=WebSquare.ModelUtil.findInstanceNode({xpath:y,scopeId:o,instanceId:r})),d&&d.selectSingleNode(b[b.length-1])&&(p=!0,g.push(f))}else if(i==f)p=!0,g.push(f);else if(WebSquare.ModelUtil.isPartialMatchedXPath(f,i)){var w=i.lastIndexOf("/");if(w>0){var S=i.substring(w+1);if(S.match(/\[@/i));else{if(-1!=S.indexOf("[")){var _=S.match(/[^[\]]+(?=])/)[0];isNaN(_)?e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[c].repeatxpath,scopeId:o,instanceId:r}),d):(!0,e=parseInt(_)-1)}else e=WebSquare.ModelUtil.getInstanceIndex(WebSquare.ModelUtil.findInstanceNodes({xpath:WebSquare.WebSquaredoc.instanceRefElement[c].repeatxpath,scopeId:o,instanceId:r}),a[h]);l=f}}}if(e>=0&&WebSquare.WebSquaredoc.instanceRefElement.length)WebSquare.WebSquaredoc.detectChange(i,void 0,null,{
op:"removeInstanceNode",node:d,deleteIndex:e,xpath:l,gridNoRefresh:n,scope_id:o});else if(1==p)for(var C=0;C<g.length;C++)WebSquare.WebSquaredoc.detectChange(g[C],void 0,null,{op:"removeInstanceNodeAll",node:d,xpath:g[C],gridNoRefresh:n,scope_id:o})}}}a[h].parentNode.removeChild(a[h])}"true"==WebSquare.core.getConfiguration("/WebSquare/ModelUtil/removeInstanceNodes/@refresh")&&WebSquare.ModelUtil.refreshModel(i)}catch(t){s.Y.printStackTrace(t)}},removeChildNodes:function(t,e){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._removeChildNodes(arguments[0]):this._removeChildNodes({xpath:t,scopeId:e})}catch(t){s.Y.printStackTrace(t)}},_removeChildNodes:function(t){try{var e=t.xpath||"",i=t.scopeId||"",o=t.instanceId||"",r=WebSquare.ModelUtil.findInstanceNode({xpath:e,scopeId:i,instanceId:o});if(r)for(var a=r.childNodes,n=a.length-1;n>=0;n--)r.removeChild(a[n])}catch(t){s.Y.printStackTrace(t)}},createInstance:function(t){try{if(!t||!t.doc)return!1;for(var e="string"==typeof t.doc?WebSquare.xml.parse(t.doc):t.doc,i=t.modelId||"",o=t.instanceId||"",r=t.scopeId||"",a=t.mode||"append",n=this.getModelByID(i),l=t.targetInstanceId||"",h={idx:-1,obj:null},d=0,c=n.instances.length;d<c;d++){var u=n.instances[d].scopeId;if(!u||r===u){if("replace"!=a&&n.instances[d].id===o)return!1;if("replace"==a&&n.instances[d].id===o){h.obj=n.instances[d],h.idx=d;break}}}var p=WebSquare.WebSquaredoc.models[0].instances[0].xmlNode.cloneNode(!0);p.setAttribute("id",o),r&&p.setAttribute("scopeId",r);var g=WebSquare.xml.getFirstChildElement(p),m=g.childNodes;for(d=m.length-1;d>=0;d--)g.removeChild(m[d]);e=WebSquare.util.isArray(e)?e:[e];for(d=0,c=e.length;d<c;d++){var f=e[d];switch(f.nodeType){case 1:g.appendChild(f);break;case 9:g.appendChild(WebSquare.xml.getFirstChildElement(f));break;default:return!1}}var b=new WebSquare.Model.Instance(p,g);switch(a){case"insertBefore":var y=this.getInstanceByID(l),v=0;for(d=0,c=n.instances.length;d<c;d++)if(n.instances[d]===y){v=d;break}n.instances.splice(v-1<0?0:v-1,0,b),y.xmlNode.parentNode.insertBefore(p,y.xmlNode);break;case"replace":if(!h.obj)return!1;y=h.obj,v=h.idx;var w=WebSquare.xml.getNextSiblingElement(y.xmlNode);n.instances[v]=b,w.parentNode.insertBefore(p,w),n.xmlNode.removeChild(y.xmlNode);break;default:for(y=l?this.getInstanceByID(l):n.instances[n.instances.length-1],v=n.instances.length-1,d=0,c=n.instances.length;d<c;d++)if(n.instances[d]===y){v=d;break}y.xmlNode.parentNode.insertBefore(p,WebSquare.xml.getNextSiblingElement(n.instances[v].xmlNode)),n.instances.splice(v+1,0,b)}return!0}catch(t){s.Y.printStackTrace(t)}return!1},removeInstance:function(t){try{if(!t||!t.instanceId)return!1;for(var e=t.modelId||"",i=t.instanceId||"",o=t.scopeId||"",r=this.getModelByID(e),a=0,n=r.instances.length;a<n;a++){var l=r.instances[a].scopeId;if((!l||o===l)&&(r.instances[a].id&&r.instances[a].id===i))return r.xmlNode.removeChild(r.instances[a].xmlNode),r.instances.splice(a,1),!0}}catch(t){s.Y.printStackTrace(t)}return!1},copyInstance:function(t){try{if(!t||!t.srcInstanceId||!t.destInstanceId)return!1;var e=t.srcModelId||"",i=t.destModelId||"",o=t.srcInstanceId||"",r=t.destInstanceId||"",a=t.targetInstanceId||"",n=t.srcScopeId||"",l=t.destScopeId||"",h=t.mode||"append",d=this.getInstanceByID(o,e,n).xmlNode.cloneNode(!0);return this.createInstance({doc:WebSquare.xml.getFirstChildElements(WebSquare.xml.getFirstChildElement(d)),modelId:i,instanceId:r,mode:h,targetInstanceId:a,scopeId:l})}catch(t){s.Y.printStackTrace(t)}return!1},getInstanceIndex:function(t,e){try{if(!Array.prototype.indexOf||WebSquare.util.isIEAllVersion()&&parseInt(WebSquare.core.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){s.Y.printStackTrace(t,null,this)}},getInstanceRefElementIndex:function(t,e,i){try{
for(var o=0;o<WebSquare.WebSquaredoc.instanceRefElement.length;o++)if((!WebSquare.WebSquaredoc.instanceRefElement[o].scopeId||WebSquare.WebSquaredoc.instanceRefElement[o].scopeId===i)&&-1!=t.indexOf(WebSquare.WebSquaredoc.instanceRefElement[o].xpath))return o;if(e)for(var r=t+"/"+e,a=0;a<WebSquare.WebSquaredoc.instanceRefElement.length;a++)if((!WebSquare.WebSquaredoc.instanceRefElement[a].scopeId||WebSquare.WebSquaredoc.instanceRefElement[a].scopeId===i)&&-1!=WebSquare.WebSquaredoc.instanceRefElement[a].xpath.indexOf(r))return a;return}catch(t){s.Y.printStackTrace(t,null,this)}},getMatchedData:function(t,e,i,o,r){try{t=t,i=i,e=e;var a=0;if(o&&r){var n=o.split("/"),l=r.split("/");a=Math.max(n.length,l.length)}var h=t.childNodes;if(null!=h)for(var d=h.length,c=0;c<d;c++){var u=o;if(1==h[c].nodeType){var p=h[c].tagName;if(i==p){u+="/"+p;var g=e.split("/").length,m=u.split("/").length;if(g>m)for(var f=0;f<g-m;f++)u="temp/"+u;else if(m>g)for(f=0;f<m-g;f++)e="temp/"+e;if(WebSquare.ModelUtil.isPartialMatchedXPath(e,u+"/"+p,a)){var b=h[c].tagName;return{dataNode:h[c],refXPath:o+"/"+b,baseNode:b}}return}if(u+="/"+p,WebSquare.ModelUtil.isPartialMatchedXPath(e,u,a)){var y=WebSquare.ModelUtil.getMatchedData(h[c],e,i,u,r);if(y)return y}}}return}catch(t){s.Y.printStackTrace(t,null,this)}},isPartialMatchedXPath:function(t,e,i){try{for(var o=t.split("/"),r=e.split("/"),a=Math.min(o.length,r.length),n=!1,l=i||0;l<a;l++){var h=o[l].split("["),d=r[l].split("[");if(h.toString()!=d.toString())return!1;n=!0}return n}catch(t){s.Y.printStackTrace(t,null,this)}},_getNodePath:function(t,e){for(var i=new Array,o=e?t.firstChild:t;null!=o;o=o.firstChild)if(1==o.nodeType){var s=o.nodeName.split(":");i.push(s)}return i.join("/")},getSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.submissions.length;n++){var l=r.submissions[n];if(!WebSquare.strictMode||!o||o===l.scope_id){if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id==t&&(a=l,null==o))break}}return a}catch(t){s.Y.printStackTrace(t)}},getSubmissionList:function(t){try{void 0!==t&&null!=t||(t={});for(var e=WebSquare.ModelUtil.getModelByID(t.modelID),i=[],o={},r=[],a=0;a<e.submissions.length;a++){var n,l=e.submissions[a].scope_id;if(null==t.scopeId||t.scopeId===l)n=null==t.orgId&&"json"!==t.returnType?e.submissions[a].id:e.submissions[a].org_id,i.push(n),r.push(e.submissions[a]),o[l]||(o[l]=[]),o[l].push(n)}return"json"===t.returnType?o:"id"===t.returnType?i:r}catch(t){s.Y.printStackTrace(t)}},executeSubmission:function(t,e,i,o,a){if(r.v.printLog("WebSquare.ModelUtil.executeSubmission : "+t),null!=t&&""!=t)try{var n=null;if("string"==typeof t){if(null==(n=WebSquare.ModelUtil.getSubmission(t)))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObjectWithID",t)),null}else if(null==(n=t))return alert(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null!=a&&a(WebSquare.language.getMessage("E_ModelUtil_NoSubmissionObject",t)),null;var l=n&&n.id?n.id:"";WebSquare._performance.mark("submission.start."+l),WebSquare.ModelUtil.setSubmissionStart(n,i),void 0!==e&&n.setRequestData(e);var h=WebSquare.core.getConfiguration("/WebSquare/submission/customHandler/@value")||"";if(""!=n.customHandler&&(h=n.customHandler),""==h||"default"==h)WebSquare.ModelUtil.defaultSubmissionHandler(n,o,a);else if("proworks_soap"==h.toLowerCase());else if(h){if("function"==typeof h)h(n,o,a);else{var d=WebSquare.util.getGlobalFunction(h,n.scope_id);"function"==typeof d&&d(n,o,a)}WebSquare._performance.mark("submission.end."+l);var c=WebSquare.language.getMessage("Performance_submission_start");WebSquare._performance.measure("submission."+l,"submission.start."+l,this._makeSubmissionDetail(n,c))}else WebSquare.ModelUtil.defaultSubmissionHandler(n,o,a)}catch(t){s.Y.printStackTrace(t)}},createSubmission:function(t,e){
try{var i={_pluginName:"submission"};i.id=t.id,i.bind=t.bind||null,i.action=t.action||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),i.mode=t.mode||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",i.method=t.method||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",i.mediatype=t.mediatype||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),i.ref=t.ref||"",i.encoding=t.encoding||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",i.accept=t.accept||WebSquare.core.getConfiguration("/WebSquare/submission/accept/@value"),i.target=t.target,i.replace=t.replace,i.instance=t.instance,i.customHandler=t.customHandler||"",i.errorHandler=t.errorHandler||WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"),i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"),i.useLocale=!(!t.useLocale&&"true"!==WebSquare.core.getConfiguration("/WebSquare/useLocale/@value")),i.localeRef=t.localeRef,i.soapaction=t.soapaction||"",i.startTime=null,i.endTime=null,i.processStatus=0,i.singleMode=t.singleMode||!1,i.hideProcessMsg=!1!==t.hideProcessMsg&&(!0===t.hideProcessMsg||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),i.abortTrigger=!0===WebSquare.util.getBoolean(t.abortTrigger)||!1!==t.abortTrigger&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),i.scope_id=t.scope_id||null,i.withCredentials=t.withCredentials||!1,i.useModal=t.useModal||WebSquare.core.getConfiguration("/WebSquare/submission/useModal/@value")||!1,i.preSubmitFunction=t.preSubmitFunction||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",i.linkedObj=[],i.requestHeader={},i.webtopRef=t.webtopRef||"",i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.timeout=t.timeout||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),i.msaName=t.msaName,i.setRequestData=function(t){this.requestData=t},i.setRequestHeader=function(t){this.requestHeader=t},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return s.Y.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return s.Y.printStackTrace(t,null,this),window}},i._getMsaOption=function(){return{frameObj:this.getScope(),msaName:this.msaName}},i.userEventList=[],t.submitHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:t.submitHandler})),i.submitHandler=t.submitHandler),t.submitDoneHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:t.submitDoneHandler})),i.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:t.submitErrorHandler})),i.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(i.userEventList.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:t.submitTimeoutHandler})),i.submitTimeoutHandler=t.submitTimeoutHandler),""==i.mediatype&&("post"!=i.method&&"POST"!=i.method||(i.mediatype="application/xml"));var o=WebSquare.ModelUtil.getModelByID(e);i.parentElement=o.xmlNode;for(var r=o.submissions.length-1;r>=0;r--)o.submissions[r].id===i.id&&(o.submissions[r].parentElement=null,o.submissions.splice(r,1));o.submissions.unshift(i),WebSquare.core.useSubmissionGlobal&&(window[i.id]=i),WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===i.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",i.id)),i.scope_obj=i.getScope()}catch(t){s.Y.printStackTrace(t)}},deleteSubmission:function(t,e,i){try{void 0!==i&&null!=i||(i={})
;var r=i.scope_id||WebSquare.scope_obj;"object"===(0,o.A)(t)&&null!=t&&(t=t.id);for(var a=WebSquare.ModelUtil.getModelByID(e).submissions,n=null,l=0;l<a.length;l++)if(!(WebSquare.strictMode&&r&&r!==a[l].scope_id||a[l].id!==t)){n=a[l],WebSquare.core.useSubmissionGlobal&&(window[t]=null),a[l].parentElement=null,a.splice(l,1);break}return n}catch(t){s.Y.printStackTrace(t)}},defaultcallback:function(t,e,i,o,r,a){try{if(e&&!0===e.dead)return void t.abort();if(4==t.readyState)if(i&&(window.clearTimeout(i),window.clearInterval(i),i=null),null==r){var n=WebSquare.ModelUtil.commonResponseHandler(e,t,"async mode",o,r,a),l=n&&n.hidden;!1===e.hideProcessMsg||l||WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage_pre(e.id)}else r([e,t,o])}catch(t){s.Y.printStackTrace(t),e&&e.scope_id?WebSquare.layer.hideProcessMessage({scope:e.scope_id}):WebSquare.layer.hideProcessMessage()}},abort:function(t,e){var i=null;try{if(""!=t){var o={};if(WebSquare.strictModeFrame&&e&&(o.scope_id=e),null!=(i=WebSquare.ModelUtil.getSubmission(t,null,o)).obfuscator_http){i.obfuscator_http.abort();var a={id:i.id,errorType:"resource-error",resourceUri:WebSquare.util.getSubmissionURL(i.action,i._getMsaOption()),responseHeaders:"",responseStatusCode:"",responseReasonPhrase:"",requestBody:"",responseBody:"",abort:"true"};r.v.printLog("submission force abort. "+i.id),WebSquare.ModelUtil.setSubmissionEnd(i,"submission error",a),WebSquare.layer.deleteSubmissionMessage(i.id);var n=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),l=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(n){"after"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a);var h=WebSquare.util.getGlobalFunction(n);"function"==typeof h&&h(a),"before"==l&&WebSquare.event.fireEvent(i,"xforms-submit-error",a)}else WebSquare.event.fireEvent(i,"xforms-submit-error",a);i.obfuscator_http&&(i.obfuscator_http.onreadystatechange=function(){},i.obfuscator_http=null)}return}}catch(t){s.Y.printStackTrace(t),i&&i.scope_id?WebSquare.layer.hideProcessMessage({scope:i.scope_id}):WebSquare.layer.hideProcessMessage()}},setSubmissionEnd:function(t,e,i){t.endTime=new Date,t.processStatus=0;for(var o=0;o<t.linkedObj.length;o++)t.linkedObj[o].setDisabled&&t.linkedObj[o].setDisabled(!1);if(t.linkedObj=[],"true"==WebSquare.core.getConfiguration("/WebSquare/submission/showSubmissionTime/@value")){var s=t.startTime.getHours()+":"+t.startTime.getMinutes()+":"+t.startTime.getSeconds()+":"+t.startTime.getMilliseconds(),a=t.endTime.getHours()+":"+t.endTime.getMinutes()+":"+t.endTime.getSeconds()+":"+t.endTime.getMilliseconds(),n="submission id["+t.id+"] start["+s+"] end["+a+"] duration["+(t.endTime-t.startTime)+"ms]";r.v.printLog(n),WebSquare.ax_logger(n)}if(null!=i){var l=WebSquare.core.getConfiguration("/WebSquare/submission/callbackSubmitFunction/@value");try{var h=WebSquare.util.getGlobalFunction(l);"function"==typeof h&&h.call(this,i,t)}catch(t){}}WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/submission/clearRequestDataAfterSubmit/@value"))&&t.setRequestData("")},setSubmissionStart:function(t,e){if(t.startTime=new Date,t.processStatus=1,e&&!WebSquare.util.isArray(e)&&(e=[e]),e)for(var i=0,o=e.length;i<o;i++){var s=e[i];null!=s&&s.setDisabled&&(t.linkedObj.push(s),s.setDisabled(!0))}},doSubmitPreFunc:function(t){var e=t.preSubmitFunction||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value");if(null!=e&&""!=e)try{var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}catch(t){}},getRefToReqData:function(t){return t.requestData=null,this.getReqData(t)},defaultSubmissionHandler:function(t,e,i){var a;try{var n={id:R=t.id};""!=t.processMsg&&WebSquare.layer.addSubmissionMessage(t,t.processMsg);var l=WebSquare.event.fireEvent(t,"xforms-submit",n);if(void 0!==l&&0==l)return r.v.printLog("Processing halted due to the 'xforms-submit event handler' returning false. :"+R),
WebSquare.ModelUtil.setSubmissionEnd(t,"submission done",null),WebSquare.layer.deleteSubmissionMessage(R),void(null!=i&&i("Processing halted due to the 'xforms-submit event handler' returning false. :"+R));WebSquare.ModelUtil.doSubmitPreFunc(t);var h=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),d="synchronous"!=t.mode,c=t.target,u=t.replace,p=t.encoding||"utf-8",g=t.mediatype||"application/xml",m=t.accept||g,f=t.method,b=t.soapaction,y=t.timeout,v=this.getReqData(t),w=!1;if(void 0!==v&&v.indexOf("http://schemas.xmlsoap.org/soap/envelope")>-1&&(w=!0),"all"==u){""==WebSquare.requestID&&(WebSquare.requestID="instanceValue");try{var S=document.createElement("form");WebSquare.util.isMobile()||(S.encoding="text/plain"),S.action=h,S.method=f,S.style.display="inline",S.acceptCharset="UTF-8";var _=document.createElement("input");_.type="hidden",_.name="targetInstance",WebSquare.core.uriEncoder?_.value=c:_.value=encodeURIComponent(c),S.appendChild(_);var C=document.createElement("input");C.type="hidden",C.name="instanceValue",WebSquare.core.uriEncoder?C.value=v:C.value=encodeURIComponent(v),S.appendChild(C),document.body.appendChild(S),S.submit(),WebSquare._performance.mark("submission.end."+R);var x=WebSquare.language.getMessage("Performance_submission_end_replaceAll");return void WebSquare._performance.measure("submission."+R,"submission.start."+R,this._makeSubmissionDetail(t,x))}catch(t){s.Y.printStackTrace(t)}}r.v.printLog(h),a=WebSquare.core.getXMLHTTPObject(t.withCredentials),t.obfuscator_http=a,a.open(f,h,d),w&&a.setRequestHeader("soapaction",'"'+b+'"');var I=WebSquare.core.getConfiguration("/WebSquare/submission/requestHeaderCharset/@value");if(""!=WebSquare.requestID){var T=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@mediatype"),k=WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@accept");""!=T&&("none"===I?a.setRequestHeader("Content-Type",T):a.setRequestHeader("Content-Type",T+";charset=UTF-8"),"none"!==k&&a.setRequestHeader("Accept",k))}else"none"===I?a.setRequestHeader("Content-Type",g):a.setRequestHeader("Content-Type",g+";charset="+p),"none"!==m&&a.setRequestHeader("Accept",m);"false"!=WebSquare.core.getConfiguration("/WebSquare/submission/customHeader/@value")&&a.setRequestHeader("submissionid",encodeURIComponent(R));var L=t.requestHeader;try{if("object"===(0,o.A)(L))for(var A in L)L.hasOwnProperty(A)&&a.setRequestHeader(A,L[A])}catch(t){s.Y.printStackTrace(t)}var D,W=WebSquare.core.getConfiguration("/WebSquare/submission/requestHeaderFunction/@value");if(""!=W){var q=WebSquare.util.getGlobalFunction(W,t.scope_id);"function"==typeof q&&q(a,t)}if(d){try{t.withCredentials&&(a.withCredentials=t.withCredentials)}catch(t){s.Y.printStackTrace(t)}y&&(D=window.setTimeout((function(){a.onreadystatechange=function(){},a.abort();var e={id:R,errorType:"timeout-error",resourceUri:h,time:y};WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",e),WebSquare.layer.deleteSubmissionMessage(R),WebSquare.event.fireEvent(t,"xforms-submit-timeout",e),window.clearTimeout(D),null!=i&&i(e.errorType+" :: "+R)}),y)),a.onreadystatechange=function(){WebSquare.ModelUtil.defaultcallback(a,t,D,v,e,i)}}var M=WebSquare.core.getConfiguration("/WebSquare/submission/externalHandler/@value")||"";if(""==M||"default"==M);else if(M)if("function"==typeof M)v=M(v);else{var E=WebSquare.util.getGlobalFunction(M);"function"==typeof E&&(v=E(v,R))}""!=WebSquare.requestID?"true"==WebSquare.core.getConfiguration("/WebSquare/submission/requestID/@encodeURI")?a.send(WebSquare.requestID+encodeURIComponent(v)):a.send(WebSquare.requestID+v):a.send(v),WebSquare._performance.mark("submission.step1."+R);x=WebSquare.language.getMessage("Performance_submission_step1");WebSquare._performance.measure("submission.step1."+R,"submission.start."+R,this._makeSubmissionDetail(t,x)),d||(WebSquare.ModelUtil.commonResponseHandler(t,a,"sync mode",v),null!=e&&e([t,a,v]))}catch(e){try{
var R=t.id,N=(h=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),{id:R,resourceUri:h,errorType:e.name,message:e.message});null!=e.code&&(N.code=e.code),r.v.printLog("submission error("+e.name+")."+R),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",N),WebSquare.layer.deleteSubmissionMessage(R);var F=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),O=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(F){"after"==O&&WebSquare.event.fireEvent(t,"xforms-submit-error",N);var B=WebSquare.util.getGlobalFunction(F);"function"==typeof B&&B(N),"before"==O&&WebSquare.event.fireEvent(t,"xforms-submit-error",N)}else WebSquare.event.fireEvent(t,"xforms-submit-error",N);t&&t.scope_id?WebSquare.layer.hideProcessMessage({scope:t.scope_id}):WebSquare.layer.hideProcessMessage(),null!=i&&i(N.errorType+" :: "+R),WebSquare._performance.mark("submission.end."+R);x=WebSquare.language.getMessage("Performance_submission_end_error_script");WebSquare._performance.measure("submission.end."+R,"submission.start."+R,this._makeSubmissionDetail(t,x)),a.onreadystatechange=function(){},a=null}catch(t){s.Y.printStackTrace(t)}}},getReqData:function(t){var e=t.ref,i=t.instance,o=t.mediatype,s=t.requestData,r=null;null!=t.scope_id&&(r=t.scope_id);var a=null;if(""!=i&&t.parentElement.T!==WebSquare.Elem.type.element){var n=WebSquare.Elem.api.getAttribute(t.parentElement,"id");a=null==n||""==n?WebSquare.ModelUtil.getInstanceByID(i).document:WebSquare.ModelUtil.getInstanceByID(i,n).document}else if(t.parentElement.T===WebSquare.Elem.type.element){var l=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"instance",WebSquare.core._XML_NAMESPACE.XFORMS)[0];try{l&&(a=WebSquare.xml.parse(l._element._xml).getElementsByTagName("data")[0])}catch(d){}}else a=WebSquare.Elem.api.getElementsByTagName(t.parentElement,"data")[0];var h,d=null,c="";if(void 0!==s&&null!=s)c="application/json"==o?"string"==typeof s?s:JSON.stringify(s):"text/plain"==o?s:WebSquare.xml.serialize(s);else{var u=this.getCollectionCondition(e);if(u.singleMode=WebSquare.util.getBoolean(t.singleMode),""==e&&"application/json"!=o)d=a,c=WebSquare.xml.serialize(d);else if("application/json"==o)if(""!=u.type)if(""!=u.condition){var p=WebSquare.api.data.get(u.type,u.condition,{singleMode:u.singleMode,scope_obj:r});c=JSON.stringify(p)}else{p=WebSquare.api.data.get(u.type,null,{scope_obj:r});c=JSON.stringify(p)}else""==e?c="":WebSquare.ModelUtil.getInstanceValue(e).wq_trim().length>0?c=WebSquare.ModelUtil.getInstanceValue(e):(d=WebSquare.xml.createNode(a,e),h=WebSquare.xml.parse(WebSquare.xml.serialize(d)),c=WebSquare.json.XML2JSONString(h));else if(""!=u.type)if(""!=u.condition){p=WebSquare.api.data.get(u.type,u.condition,{singleMode:u.singleMode,scope_obj:r});c=WebSquare.xml.serialize(p)}else{p=WebSquare.api.data.get(u.type,null,{scope_obj:r});c=WebSquare.xml.serialize(p)}else d=WebSquare.xml.createNode(a,e),c=WebSquare.xml.serialize(d)}return c},getCollectionCondition:function(t){var e={type:"",condition:""},i="";if("string"==typeof t&&0==t.indexOf("data:"))if((i=t.substr(5,t.length).wq_trim()).indexOf(",")>0){var o=i.indexOf(",");e.type=i.substring(0,o).wq_trim();var s=i.substring(o+1,i.length).wq_trim();s.indexOf("'")>-1&&(s=s.wq_replaceAll("'",'"')),0==s.indexOf("[")||(s="["+s+"]"),s=s.replace(/([\[\,])([^\'\"\{\}\s])/g,'$1"$2').replace(/([^\'\"\{\}\s])([\]\,])/g,'$1"$2'),e.condition=s}else e.type=i;return e},setResponseObj:function(t,e,i,o,s,r){e.indexOf("json")>-1?("instance"==i&&(t.responseBody=o),t.responseJSON=s):(e.indexOf("xml")>-1||r)&&(t.responseBody=o)},commonResponseHandler:function(t,e,i,o){var s,a=t.id,n=null;null!=t.scope_id&&(n=t.scope_id),WebSquare._performance.mark("submission.step2."+a);var l=WebSquare.language.getMessage("Performance_submission_step2");WebSquare._performance.measure("submission.step2."+a,"submission.step1."+a,this._makeSubmissionDetail(t,l))
;var h=WebSquare.util.getSubmissionURL(t.action,t._getMsaOption()),d="synchronous"!=t.mode,c=t.ref,u=t.bind,p=t.target,g=t.replace,m=t.instance,f=t.encoding,b=t.mediatype,y=t.hideProcessMsg,v=t.method,w=t.action,S=t.errorHandler,_=t.soapaction;if(e.status&&(200>e.status||300<=e.status)||0===e.status){var C={id:a,errorType:"resource-error",resourceUri:h,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseBody:e.responseText,abort:""};r.v.printLog("submission error(E03). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a);var x=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@value"),I=WebSquare.core.getConfiguration("/WebSquare/submission/submitErrorHandler/@mode");if(x)"after"==I&&WebSquare.event.fireEvent(t,"xforms-submit-error",C),"function"==typeof(P=WebSquare.util.getGlobalFunction(x))&&P(C),"before"==I&&WebSquare.event.fireEvent(t,"xforms-submit-error",C);else WebSquare.event.fireEvent(t,"xforms-submit-error",C);if(r.v.globalDebug1||"function"==typeof r.v.getGlobalDebug&&r.v.getGlobalDebug()){var T=/>[\s]*</g;(V=new Object).information="url          : "+h+"\nasync        : "+d+"\nref          : "+c+"\nbind         : "+u+"\ntarget       : "+p+"\nreplace      : "+g+"\ninstance     : "+m+"\nencoding     : "+f+"\nmediatype    : "+b+"\nmethod       : "+v+"\naction       : "+w+"\nerrorHandler : "+S+"\nsoapaction   : "+_+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),V.result=e.responseText.replace(T,">\n<"),V.input=o.replace(T,">\n<"),r.v.showDebugMsg(V,"xml","Default Submission ("+i+")")}var k=e.status;e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,WebSquare._performance.mark("submission.end."+a);l=WebSquare.language.getMessage("Performance_submission_start",k);return WebSquare._performance.measure("submission.end"+a,"submission.step2."+a,this._makeSubmissionDetail(t,l)),C}var L=WebSquare.core.getConfiguration("/WebSquare/submission/externalResponseHandler/@value")||"",A=e.responseText,D=!1;if(""==L||"default"==L);else if(L)if("function"==typeof L)A=L(A);else{var W=WebSquare.util.getGlobalFunction(L,n);"function"==typeof W&&(A=W(A,a),D=!0)}var q,M,E,R=WebSquare.core.getConfiguration("/WebSquare/submission/responseJSONHandler/@value"),N=e.getResponseHeader("Content-Type")||"",F=!1,O=this.getCollectionCondition(p);O.singleMode=WebSquare.util.getBoolean(t.singleMode),""==N&&r.v.printLog("Response Content-Type is not defined");try{if(N.indexOf("json")>-1){try{if(R)if("function"==typeof R)A=R(A);else"function"==typeof(P=WebSquare.util.getGlobalFunction(R))&&(A=P(A))}catch(t){}if(""!=A)if(M=JSON.parse(A),""!=O.type)q=M,""!=O.condition?WebSquare.api.data.set(O.type,M,O.condition,{singleMode:O.singleMode,scope_obj:n}):WebSquare.api.data.set(O.type,M,null,{scope_obj:n});else if("instance"==g){var B=WebSquare.json.JSON2XMLString(M);q=WebSquare.xml.parse(B),E=WebSquare.xml.parse(B)}else q="text"==g?A:M}else if(N.indexOf("xml")>-1)q=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(A):WebSquare.BootLoader.useResponseXML?D?WebSquare.xml.parse(A):e.responseXML:WebSquare.xml.parse(A),""!=O.type?""!=O.condition?WebSquare.api.data.set(O.type,q,O.condition,{singleMode:O.singleMode,scope_obj:n}):WebSquare.api.data.set(O.type,q,null,{scope_obj:n}):"instance"==g&&(E=WebSquare.xml.parse(A));else try{A&&A.wq_trim().startsWith("<")?(q=WebSquare.xml.parse(A),""!=O.type?""!=O.condition?WebSquare.api.data.set(O.type,q,O.condition,{singleMode:O.singleMode,scope_obj:n}):WebSquare.api.data.set(O.type,q,null,{scope_obj:n}):q?("instance"==g&&(E=WebSquare.xml.parse(A)),F=!0):q=A):q=A}catch(t){}}catch(t){}try{
WebSquare._performance.mark("submission.step3."+a);l=WebSquare.language.getMessage("Performance_submission_step3");WebSquare._performance.measure("submission.step3."+a,"submission.step2."+a,this._makeSubmissionDetail(t,l));var P=WebSquare.util.getGlobalFunction(S,n),Y="";if(""!=S&&"function"==typeof P&&P(q,a)){C={id:a,errorType:"target-error",resourceUri:h,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:A};if(WebSquare.ModelUtil.setResponseObj(C,N,g,q,M,F),r.v.printLog("submission error(E04). Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission error",C),WebSquare.layer.deleteSubmissionMessage(a),WebSquare.event.fireEvent(t,"xforms-submit-error",C),r.v.globalDebug1||"function"==typeof r.v.getGlobalDebug&&r.v.getGlobalDebug()){var V=new Object;T=/>[\s]*</g;V.information="url          : "+h+"\nasync        : "+d+"\nref          : "+c+"\nbind         : "+u+"\ntarget       : "+p+"\nreplace      : "+g+"\ninstance     : "+m+"\nencoding     : "+f+"\nmediatype    : "+b+"\nmethod       : "+v+"\naction       : "+w+"\nerrorHandler : "+S+"\nsoapaction   : "+_+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),V.result=A.replace(T,">\n<"),V.input=o.replace(T,">\n<"),r.v.showDebugMsg(V,"xml","Default Submission ("+i+")")}s=C,Y="Submission error is triggered by the errorHandler."}else{""==O.type&&("instance"==g&&null!=E?(WebSquare.WebSquaredoc.models[0].rebuild(E,p),WebSquare.WebSquaredoc.models[0].refresh()):"text"==g&&(WebSquare.WebSquaredoc.models[0].rebuild(A,p),WebSquare.WebSquaredoc.models[0].refresh()));var H={id:a,resourceUri:h,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(e),responseHeadersJSON:WebSquare.ModelUtil.parseResponseHeaderJSON(e),responseStatusCode:e.status,responseReasonPhrase:e.statusText,requestBody:o,responseText:A};if(WebSquare.ModelUtil.setResponseObj(H,N,g,q,M,F),r.v.printLog("submission complete. Status["+e.status+"] "+a),WebSquare.ModelUtil.setSubmissionEnd(t,"submission complete",H),WebSquare.event.fireEvent(t,"xforms-submit-done",H),!1!==y&&(WebSquare.ModelUtil.deleteMessage_pre(a),H.hidden=!0),r.v.globalDebug1||"function"==typeof r.v.getGlobalDebug&&r.v.getGlobalDebug()){V=new Object,T=/>[\s]*</g;V.information="url          : "+h+"\nasync        : "+d+"\nref          : "+c+"\nbind         : "+u+"\ntarget       : "+p+"\nreplace      : "+g+"\ninstance     : "+m+"\nencoding     : "+f+"\nmediatype    : "+b+"\nmethod       : "+v+"\naction       : "+w+"\nerrorHandler : "+S+"\nsoapaction   : "+_+"\nstatus       : "+e.status+"\nstatus text  : "+e.statusText+"\nresponseHeaders : "+WebSquare.ModelUtil.parseResponseHeader(e),WebSquare.ModelUtil.parseResponseHeaderJSON(e),V.result=A.replace(T,">\n<"),V.input=o.replace(T,">\n<"),r.v.showDebugMsg(V,"xml","Default Submission ("+i+")")}s=H}WebSquare._performance.mark("submission.end."+a);l=WebSquare.language.getMessage("Performance_submission_end_ok",Y);return WebSquare._performance.measure("submission.end"+a,"submission.step3."+a,this._makeSubmissionDetail(t,l)),e.onreadystatechange=function(){},e=null,t.obfuscator_http=null,s}catch(i){e.onreadystatechange=function(){},e=null,t.obfuscator_http=null}},deleteMessage_pre:function(t){try{var e=WebSquare.ModelUtil.getSubmission(t);if(e&&e.scope_id){var i=WebSquare.layer._getMessageFrame(e.scope_id);if(null!=i)return i.deleteSubmissionMessage(t)}else e=null}catch(t){}setTimeout((function(){WebSquare&&WebSquare.ModelUtil&&WebSquare.ModelUtil.deleteMessage&&WebSquare.ModelUtil.deleteMessage(t)}),50)},deleteMessage:function(t){setTimeout((function(){if(WebSquare.layer)try{var e=WebSquare.ModelUtil.getSubmission(t);(!e||e&&!1!==e.hideProcessMsg)&&WebSquare.layer.deleteSubmissionMessage(t)}catch(e){
WebSquare.layer.deleteSubmissionMessage(t)}}),50)},parseResponseHeader:function(t){var e="<header>";try{for(var i=t.getAllResponseHeaders().wq_trim().split("\n"),o=0;o<i.length;o++){var s=i[o].split(":");e+="<name>"+s[0].wq_trim()+"</name><value>"+s[1].wq_trim()+"</value>"}}catch(t){}return e+="</header>"},parseResponseHeaderJSON:function(t){var e="{",i=",";try{for(var o=t.getAllResponseHeaders().wq_trim().split("\n"),s=0;s<o.length;s++){s==o.length-1&&(i="");var r=o[s].split(":");e+='"'+r[0].wq_trim()+'":"'+r[1].wq_trim()+'"'+i}}catch(t){}return e+="}"},createWorkflow:function(t,e){try{var i={};i.id=t.id,i.processMsg=t.processMsg||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),i.resolveCallback=t.resolveCallback,i.rejectCallback=t.rejectCallback,i.step=t.step,i.promiseStatus=null,i.promiseValue=null,i.preStatus=!0,i.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},i.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return s.Y.printStackTrace(t,null,this),null}},i.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return s.Y.printStackTrace(t,null,this),window}},i.userData1=t.userData1||"",i.userData2=t.userData2||"",i.scope_id=t.scope_id||null;for(var o=WebSquare.ModelUtil.getModelByID(e),r=o.workflows.length-1;r>=0;r--)o.workflows[r].id===i.id&&(o.workflows[r].parentElement=null,o.workflows.splice(r,1));return i.parentElement=o.xmlNode,o.workflows.unshift(i),WebSquare.core.useWorkflowGlobal&&(window[i.id]=i),i}catch(t){s.Y.printStackTrace(t)}},deleteWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});var r=i.scope_id||WebSquare.scope_obj;"object"===(0,o.A)(t)&&null!=t&&(t=t.id);for(var a=WebSquare.ModelUtil.getModelByID(e).workflows,n=null,l=0;l<a.length;l++)if(!(WebSquare.strictMode&&r&&r!==a[l].scope_id||a[l].id!==t)){n=a[l],WebSquare.core.useWorkflowGlobal&&(window[t]=null),a[l].parentElement=null,a.splice(l,1);break}return n}catch(t){s.Y.printStackTrace(t)}},getWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if(!WebSquare.strictMode||!o||o===l.scope_id){if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id==t&&(a=l,null==o))break}}return a}catch(t){s.Y.printStackTrace(t)}},getRunningWorkflow:function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=i.scope_id||WebSquare.scope_obj,r=WebSquare.ModelUtil.getModelByID(e),a=null,n=0;n<r.workflows.length;n++){var l=r.workflows[n];if((!WebSquare.strictMode||!o||o===l.scope_id)&&(l.promiseStatus&&""!=l.promiseStatus)){if(!t){if(o&&o!=l.scope_id)continue;a=l;break}if(o&&o===l.scope_id&&l.id==o+"_"+t){a=l;break}if(l.id!=t){a=null;break}if(a=l,null==o)break}}return a}catch(t){s.Y.printStackTrace(t)}},isRunningWorkflow:function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){s.Y.printStackTrace(t)}},getRunningWorkflowID:function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){s.Y.printStackTrace(t)}},rejectWorkflow:function(t,e,i){try{var o=this.getRunningWorkflow(e,i),r=null;return null!=o&&(o.promiseStatus="REJECT",o.promiseValue=t||"REJECT",r=o),r}catch(t){s.Y.printStackTrace(t)}},executeWorkflow:function(t,e){var i,s;void 0!==e&&null!=e||(e={});var a=!1,n=e.scope_function||WebSquare.ModelUtil;if("object"===(0,o.A)(t)){if(s=n.createWorkflow(t),void 0===t.id||""===t.id)return r.v.printLog("workflow ID is not defined"),Promise.resolve(!1);i=t.id,a=!0}else"string"==typeof t&&(i=t,s=n.getWorkflow(t));if(!s)return r.v.printLog("workflow is not defined."),Promise.resolve(!1);if(n.isRunningWorkflow(i))return r.v.printLog("workflow already exists and is currently running. workflowID : "+i),Promise.resolve(!1);if(!WebSquare.ModelUtil.validCheck(s.step))return Promise.resolve(!1)
;s.promiseStatus="PENDING";var l=s.resolveCallback,h=s.rejectCallback;s.result={},s.logTime={},s.submissionList=[],s.logTime.START=new Date;try{var d=WebSquare.ModelUtil.setAddInfo(s.step);""!==s.processMsg||(s.processMsg=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var c={},u={},p=Promise.resolve(),g=0;g<d.length;g++){var m=d[g],f=m.action,b=m.pre,y=m.callOption,v=m.idx;if("submit"===m.type){var w=m.requestData;if("error"==(b=WebSquare.ModelUtil.checkFunction(b,"pre",i,a,s)))return Promise.resolve(!1);var S=n.getSubmission(f);for(var v in f=S.id,s.submissionList.push(f),p=WebSquare.ModelUtil.connectPre(p,u,f,y,s,b,w),c[f]=WebSquare.ModelUtil.connectPromise(p,f,y,s,b,w),u)delete c[v];u={}}else if("submitDone"===m.type){var _=m.post;if("error"===(_=WebSquare.ModelUtil.checkFunction(_,"post",i,a,s)))return Promise.resolve(!1);f=(S=n.getSubmission(f)).id;var C=WebSquare.ModelUtil.executeCallback(p,c[f],u,_,s);for(var v in u)delete c[v];(u={})[f]=C}else if("function"===m.type){var x=m.action;if("error"===(x=WebSquare.ModelUtil.checkFunction(x,"function",i,a,s)))return Promise.resolve(!1);for(var v in p=WebSquare.ModelUtil.connectFunction(p,u,x,s),u)delete c[v];u={}}}}catch(t){}var I=[p];for(var v in u)I.push(u[v]);return Promise.all(I).then((function(){s.promiseStatus="RESOLVE",WebSquare.ModelUtil.deleteworkflowMsg(s.submissionList,i),s.logTime.END=new Date,WebSquare.ModelUtil.printTableLog(s),"error"!==(l=WebSquare.ModelUtil.checkFunction(l,"resolveCallback",i,a,s))&&("function"==typeof l&&l(s),WebSquare.ModelUtil.workflowObjClear(i,a,s))})).catch((function(t){WebSquare.ModelUtil.deleteworkflowMsg(s.submissionList,i),"error"!==(h=WebSquare.ModelUtil.checkFunction(h,"rejectCallback",i,a,s))&&(s.promiseStatus="REJECT",s.errorMsg=t,"function"==typeof h&&h(s),r.v.printLog("Workflow reject : "+i+", errorMsg : "+s.errorMsg),WebSquare.ModelUtil.workflowObjClear(i,a,s))}))},checkFunction:function(t,e,i,o,s){var a=t;if("string"==typeof t&&t.length>0){try{t=WebSquare.util.getGlobalFunction(t,s.scope_id)}catch(t){return r.v.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,s),"error"}if("function"!=typeof t)return r.v.printLog("==== "+e+" function error ["+a+"] is not a function \n"),WebSquare.ModelUtil.workflowObjClear(i,o,s),"error"}return t},deleteworkflowMsg:function(t,e){try{if(WebSquare.layer.deleteSubmissionMessage(e),WebSquare.layer.submissionMessageQueue.length>0)for(var i=0;i<t.length;i++)WebSquare.layer.deleteSubmissionMessage(t[i])}catch(t){s.Y.printStackTrace(t)}},workflowObjClear:function(t,e,i){e?WebSquare.ModelUtil.deleteWorkflow(t):(delete i.result,delete i.logTime,i.promiseStatus=null,i.promiseValue=null,i.errorMsg="",i.preStatus=!0)},validCheck:function(t){for(var e,i=[],o=[],s=[],a=0;a<t.length;a++){var n=t[a];"submit"===n.type?(i.push(n.action),o.push(0)):"submitDone"===n.type&&s.push(n.action)}for(a=0;a<s.length;a++){e=s[a];for(var l=!1,h=0,d=0;d<i.length;d++){if(i[d]==e){h=o[d],h++,o[d]=h,l=!0;break}}if(!l)return r.v.printLog("submitDone must contain submit. [ "+e+" ]"),!1;if(h>1)return r.v.printLog("Multiple submitDone detected. Please ensure there's only one [ "+e+" ]"),!1}return!0},setAddInfo:function(t){for(var e=-1,i=[],o=0;o<t.length;o++){"submit"===(a=t[o]).type?(e++,a.idx=e,a.pos=o,a.callOption="0",i.push(a)):a.idx=-1}for(o=0;o<i.length;o++)for(var s=i[o],r=0;r<t.length;r++){var a;"submitDone"===(a=t[r]).type&&a.action===s.action&&-1===a.idx&&(a.idx=s.idx,t[s.pos].callOption="1")}return t},connectFunction:function(t,e,i,o){var s=[t];for(var r in e)s.push(e[r]);return Promise.all(s).then((function(t){return null===o.promiseStatus||"REJECT"===o.promiseStatus?Promise.reject(o.promiseValue):t instanceof Array?Promise.resolve(i(t[t.length-1],o)):Promise.resolve(i(t,o))}))},connectPre:function(t,e,i,o,s,r,a){var n=[t];for(var l in e)n.push(e[l]);return Promise.all(n).then((function(t){
if(null===s.promiseStatus||"REJECT"===s.promiseStatus)return Promise.reject(s.promiseValue);var e=Promise.resolve(!0);return!("function"==typeof r&&!(e=r(i,s,t,a)))&&Promise.resolve(e)}))},connectPromise:function(t,e,i,o,s,a){return t.then((function(t){return t?WebSquare.ModelUtil.callSubmit(e,i,o,a):(r.v.printLog("Due to the return value of submission pre function[ "+t+" ], submission[ "+e+" ] will not be excuted."),null)}))},executeCallback:function(t,e,i,o,s){var a=[t];for(var n in i)a.push(i[n]);return Promise.all(a).then((function(){return e})).then((function(t){var e=Promise.resolve();if(null==t)return null;var i=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return null===s.promiseStatus||"REJECT"===s.promiseStatus?Promise.reject(s.promiseValue):(s.logTime[i.id]=new Date,"function"==typeof o&&(e=Promise.resolve(o(i,s,t)),r.v.printLog("Workflow callback "+i.id)),s.result[i.id]=i,null===s.promiseStatus||"REJECT"===s.promiseStatus?Promise.reject(s.promiseValue):e)}))},callSubmit:function(t,e,i){return null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):WebSquare.ModelUtil.executeWorkFlowSubmission(t).then((function(t){if("0"==e){if(null===i.promiseStatus||"REJECT"===i.promiseStatus)return Promise.reject(i.promiseValue);var o=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);return i.logTime[o.id]=new Date,null===i.promiseStatus||"REJECT"===i.promiseStatus?Promise.reject(i.promiseValue):(i.result[o.id]=o,o)}return t}))},executeWorkFlowSubmission:function(t,e,i){return new Promise((function(o,s){WebSquare.ModelUtil.executeSubmission(t,e,i,o,s)}))},callCommonResponseHandler:function(t,e,i,o){i&&(window.clearTimeout(i),window.clearInterval(i),i=null);var s=WebSquare.ModelUtil.commonResponseHandler(t,e,"async mode",o);if(!1!==s.hideProcessMsg&&WebSquare.ModelUtil.deleteMessage_pre(s.id),null!=s&&null!=s.errorType)throw new Error(s.errorType);return s},executeSerial:function(t,e,i,o,s,r,a){var n=WebSquare.ModelUtil.makeWorkflowJson("serial",t,e,i,o,s,r);return WebSquare.ModelUtil.executeWorkflow(n,a)},executeParallel:function(t,e,i,o,s,r,a){var n=WebSquare.ModelUtil.makeWorkflowJson("parallel",t,e,i,o,s,r);return WebSquare.ModelUtil.executeWorkflow(n,a)},executeWhilst:function(t,e,i,o,s,a,n,l){var h=this.getSubmission(t,null,l);if(h){t=h.id;var d={};d.id=n||"whilstTemp",d.promiseStatus="PENDING",d.result=[],""!=o||(o=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value")),WebSquare.layer.addSubmissionMessage(t,o);for(var c=Promise.resolve(),u=0;"function"==typeof e&&e(t,u)&&"number"==typeof i&&u<i;)u++,c=c.then((function(){return c=WebSquare.ModelUtil.callSubmit(t,"1",d)})).then((function(t){var e=WebSquare.ModelUtil.callCommonResponseHandler(t[0],t[1],"async mode",t[2]);d.result.push(e)}));return c.then((function(){d.promiseStatus="RESOLVE","function"==typeof s&&s(d),r.v.printLog("executeWhilst complete "),WebSquare.ModelUtil.workflowObjClear(n,!0,d)})).catch((function(t){d.promiseStatus="REJECT","function"==typeof a&&a(d),r.v.printLog("executeWhilst rejected "+d.errorMsg),WebSquare.ModelUtil.workflowObjClear(n,!0,d)})),c}},makeWorkflowJson:function(t,e,i,o,s,r,a){var n={};n.id=r||t+"Temp",n.processMsg=i||WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"),n.resolveCallback=o,n.rejectCallback=s;for(var l=[],h=0;h<e.length;h++){var d=e[h],c={};if(c.type="submit",c.action=d,a&&a[h]&&(c.requestData=a[h]),l.push(c),"serial"===t)(u={type:"submitDone"}).action=d,l.push(u)}if("parallel"===t)for(h=0;h<e.length;h++){var u;d=e[h];(u={type:"submitDone"}).action=d,l.push(u)}return n.step=l,n},printTableLog:function(t){var e=t.step,i={},o=0,s=-1,a="S",n="",l="",h=0,d=0,c=0;for(h=0;h<e.length;h++)l=e[h].action,"function"===(n=e[h].type)&&(n="submit"),"submit"===a&&"submit"===n||s++,"function"===n||"submit"===n?(i[l+"S"]={},i[l+"S"].row=o,i[l+"S"].col=s,o++):(i[l+"C"]={},i[l+"C"].row=i[l+"S"].row,i[l+"C"].col=s),a=n;s++
;var u=t.logTime.START,p=0,g=[],m=o,f=s,b=null,y=[];for(d=0;d<m;d++){g[d]=[];for(c=0;c<=f;c++)g[d][c]=""}for(h=0;h<e.length;h++)l=e[h].action,"submitDone"!==(n=e[h].type)&&(o=i[l+"S"].row,s=i[l+"S"].col,y[o]=[],y[o][0]=s+1,g[o][s]=l,"function"!==n&&(o=i[l+"C"].row,s=i[l+"C"].col,void 0!==(b=t.logTime[l])&&(p=b.getTime()-u.getTime(),y[o][1]=s-1,g[o][s]="["+p+"ms]")));var v=[],w=0;for(d=0;d<f;d++){v[d]=0;for(c=0;c<m;c++)(w=g[c][d].length)>v[d]&&(v[d]=w)}var S=0,_=0,C="",x="";for(d=0;d<m;d++){S=y[d][0],_=y[d][1];for(c=0;c<=f;c++){for(h=(C=g[d][c]).length;h<v[c];h++)C+=c>=S&&c<=_?"-":" ";x+="|"+C}x+="\n"}var I=t.logTime.END;p=I.getTime()-u.getTime(),x="\n[ WORKFLOW :: "+t.id+" Start : "+WebSquare.ModelUtil.logFormatTime(u)+"]\n"+x+"[ WORKFLOW :: "+t.id+" End : "+WebSquare.ModelUtil.logFormatTime(I)+"    duration : "+p+"ms ]\n",r.v.printLog(x)},logFormatTime:function(t){return WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)+":"+WebSquare.text.fillZero(t.getMilliseconds(),3)},_makeSubmissionDetail:function(t,e){try{if(!t||"function"!=typeof t.getScope)return;var i=t.getScope(),o=WebSquare.w2xPath;return i&&(o=i.getURL(i.getSrc()||WebSquare.w2xPath)),{src:o,id:t.id,orgId:t.org_id||t.id,scopeId:t.scope_id,log:e||""}}catch(t){s.Y.printStackTrace(t)}}}},4640:function(t,e,i){"use strict";i.d(e,{r:function(){return s}});var o=i(2284),s={Vector:function(){this.type="vector",this.length=0,this.data=[],this.dataType=[],this.attributeName=[],this.attributeValue=[]}};s.Vector.prototype.setDocument=function(t){try{if("vector"==t.documentElement.nodeName){this.length=0,this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);WebSquare.nodeValueDeprecated?(this.attributeName.push(o.name),this.attributeValue.push(o.value)):(this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue))}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}this.length++}}}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.addAll=function(t){try{"vector"==t.type&&(this.data=this.data.concat(t.data),this.dataType=this.dataType.concat(t.dataType),this.length=this.data.length)}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.setDebug=function(t){this.setAttribute("debug",t)},s.Vector.prototype.setAction=function(t){this.setAttribute("action",t)},s.Vector.prototype.setTask=function(t){this.setAttribute("task",t)},s.Vector.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},s.Vector.prototype.getAction=function(){return this.getAttribute("action")},s.Vector.prototype.getTask=function(){return this.getAttribute("task")},s.Vector.prototype.getProcessName=function(){return this.getAttribute("processName")},s.Vector.prototype.addElement=function(t){try{WebSquare.xml.isDocument(t)?(this.data.push(WebSquare.xml.serialize(t)),this.dataType.push("Document")):"object"!=(0,
o.A)(t)||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data.push(t),this.dataType.push("Document")):(this.data.push(t+""),this.dataType.push("String")):(this.data.push(t.toString()),this.dataType.push("Document")),this.length++}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.elementAt=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length)if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t]}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.insertElementAt=function(t,e){try{if((e=parseInt(e,10))==this.length)return void this.addElement(t);if(e>=0&&e<this.length){for(var i=this.length;i>e;i--)this.data[i]=this.data[i-1],this.dataType[i]=this.dataType[i-1];WebSquare.xml.isDocument(t)?(this.data[e]=WebSquare.xml.serialize(t),this.dataType[e]="Document"):"object"!=(0,o.A)(t)||void 0===t.type||"vector"!=t.type&&"hashtable"!=t.type?"string"==typeof t&&WebSquare.xml.isDocumentString(t)?(this.data[e]=t,this.dataType[e]="Document"):(this.data[e]=t+"",this.dataType[e]="String"):(this.data[e]=t.toString(),this.dataType[e]="Document"),this.length++}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.remove=function(t){var e=null;try{if((t=parseInt(t,10))>=0&&t<this.length){if("Document"==this.dataType[t]){var i=WebSquare.xml.parse(this.data[t]);e="vector"==i.documentElement.nodeName?WebSquare.collection.toVector(i):"hashtable"==i.documentElement.nodeName?WebSquare.collection.toHashtable(i):i}else e=this.data[t];if(t<this.length-1)for(var o=t;o<this.length-1;o++)this.data[o]=this.data[o+1],this.dataType[o]=this.dataType[o+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Vector.prototype.fastRemove=function(t){try{if((t=parseInt(t,10))>=0&&t<this.length){if(t<this.length-1)for(var e=t;e<this.length-1;e++)this.data[e]=this.data[e+1],this.dataType[e]=this.dataType[e+1];this.data.pop(),this.dataType.pop(),this.length--}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.set=function(t,e){try{(t=parseInt(t,10))>=0&&t<this.length&&(WebSquare.xml.isDocument(e)?(this.data[t]=WebSquare.xml.serialize(e),this.dataType[t]="Document"):"object"!=(0,o.A)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[t]=e,this.dataType[t]="Document"):(this.data[t]=e+"",this.dataType[t]="String"):(this.data[t]=e.toString(),this.dataType[t]="Document"))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Vector.prototype.size=function(){return this.length},s.Vector.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},s.Vector.prototype.toString=function(){var t=[];try{t.push("<vector"),t.push(" result='"+this.length+"'");for(var e=0;e<this.attributeName.length;e++)"result"!=this.attributeName[e]&&t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.length;e++)if("Document"==this.dataType[e]){t.push("<data vectorkey='"+e+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data vectorkey='"+e+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>");t.push("</vector>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.join("")},s.Hashtable=function(){this.type="hashtable",this.key=[],this.data=[],this.dataType=[],this.attributeName=[],this.attributeValue=[]},s.Hashtable.prototype.containsKey=function(t){var e=!1;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){e=!0;break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},
s.Hashtable.prototype.setDocument=function(t){try{if("hashtable"==t.documentElement.nodeName){this.key=[],this.data=[],this.dataType=[];for(var e=t.documentElement.attributes,i=0;i<e.length;i++){var o=e.item(i);this.attributeName.push(o.nodeName),this.attributeValue.push(o.nodeValue)}var s=t.documentElement.childNodes;for(i=0;i<s.length;i++){var r=s.item(i);if(1==r.nodeType&&"data"==r.nodeName){this.key.push(r.getAttribute("hashkey"));var a=r.getAttribute("value");if(null!=a)this.data.push(a),this.dataType.push("String");else for(var n=r.childNodes,l=0;l<n.length;l++){var h=n.item(l);if(1==h.nodeType){this.data.push(WebSquare.xml.serialize(h)),this.dataType.push("Document");break}}}}}}catch(t){WebSquare.exception.printStackTrace(t)}},s.Hashtable.prototype.getAttribute=function(t){var e="";try{for(var i=0;i<this.attributeName.length;i++)if(this.attributeName[i]==t){e=this.attributeValue[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.setAttribute=function(t,e){try{for(var i=!1,o=0;o<this.attributeName.length;o++)if(this.attributeName[o]==t){i=!0,this.attributeValue[o]=e;break}i||(this.attributeName.push(t),this.attributeValue.push(e))}catch(t){WebSquare.exception.printStackTrace(t)}},s.Hashtable.prototype.setDebug=function(t){this.setAttribute("debug",t)},s.Hashtable.prototype.setAction=function(t){this.setAttribute("action",t)},s.Hashtable.prototype.setTask=function(t){this.setAttribute("task",t)},s.Hashtable.prototype.setProcessName=function(t){void 0===t||null==t||""==t?this.setAttribute("processName",WebSquare.proworks.getControllerServer()):this.setAttribute("processName",WebSquare.proworks.getControllerServer()+"."+t)},s.Hashtable.prototype.getAction=function(){return this.getAttribute("action")},s.Hashtable.prototype.getTask=function(){return this.getAttribute("task")},s.Hashtable.prototype.getProcessName=function(){return this.getAttribute("processName")},s.Hashtable.prototype.get=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i]);e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.put=function(t,e){var i=null;try{for(var s=!1,r=0;r<this.key.length;r++)if(this.key[r]==t){if(s=!0,"Document"==this.dataType[r]){var a=WebSquare.xml.parse(this.data[r]);i="vector"==a.documentElement.nodeName?WebSquare.collection.toVector(a):"hashtable"==a.documentElement.nodeName?WebSquare.collection.toHashtable(a):a}else i=this.data[r];WebSquare.xml.isDocument(e)?(this.data[r]=WebSquare.xml.serialize(e),this.dataType[r]="Document"):"object"!=(0,o.A)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data[r]=e,this.dataType[r]="Document"):(this.data[r]=e+"",this.dataType[r]="String"):(this.data[r]=e.toString(),this.dataType[r]="Document");break}s||(this.key.push(t),WebSquare.xml.isDocument(e)?(this.data.push(WebSquare.xml.serialize(e)),this.dataType.push("Document")):"object"!=(0,o.A)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type?"string"==typeof e&&WebSquare.xml.isDocumentString(e)?(this.data.push(e),this.dataType.push("Document")):(this.data.push(e+""),this.dataType.push("String")):(this.data.push(e.toString()),this.dataType.push("Document")))}catch(t){WebSquare.exception.printStackTrace(t)}return i},s.Hashtable.prototype.remove=function(t){var e=null;try{for(var i=0;i<this.key.length;i++)if(this.key[i]==t){if("Document"==this.dataType[i]){var o=WebSquare.xml.parse(this.data[i]);e="vector"==o.documentElement.nodeName?WebSquare.collection.toVector(o):"hashtable"==o.documentElement.nodeName?WebSquare.collection.toHashtable(o):o}else e=this.data[i];this.key[i]=this.key[this.key.length-1],
this.data[i]=this.data[this.data.length-1],this.dataType[i]=this.dataType[this.dataType.length-1],this.key.pop(),this.data.pop(),this.dataType.pop();break}}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.Hashtable.prototype.keys=function(){return WebSquare.text.arraySort(this.key)},s.Hashtable.prototype.elements=function(){var t=[];try{for(var e=WebSquare.text.arraySort(this.key),i=0;i<e.length;i++)t.push(this.get(e[i]))}catch(t){WebSquare.exception.printStackTrace(t)}return t},s.Hashtable.prototype.toDocument=function(){return WebSquare.xml.parse(this.toString())},s.Hashtable.prototype.toString=function(){var t=[];t.push("<hashtable");try{for(var e=0;e<this.attributeName.length;e++)t.push(" "+this.attributeName[e]+"='"+this.attributeValue[e]+"'");t.push(">");for(e=0;e<this.key.length;e++)if("Document"==this.dataType[e]){t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"'>");var i=this.data[e].indexOf("?>");if(-1==i)t.push(this.data[e]);else new RegExp("<?xml[\\s]+(version|VERSION)[\\w\\W]+?>").test(this.data[e])?t.push(this.data[e].substring(i+2)):t.push(this.data[e]);t.push("</data>")}else t.push("<data hashkey='"+WebSquare.xml.encode(this.key[e])+"' value='"+WebSquare.xml.encode(this.data[e])+"'/>")}catch(t){WebSquare.exception.printStackTrace(t)}return t.push("</hashtable>"),t.join("")},s.toVector=function(t){var e=new WebSquare.collection.Vector;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e},s.toHashtable=function(t){var e=new WebSquare.collection.Hashtable;try{var i=null;"string"==typeof t?i=WebSquare.xml.parse(t):WebSquare.xml.isDocument(t)&&(i=t),e.setDocument(i)}catch(t){WebSquare.exception.printStackTrace(t)}return e}},5375:function(t,e,i){"use strict";i.d(e,{I:function(){return d}});var o=i(2284),s=i(467),r=i(4756),a=i.n(r),n=i(5461),l=i(2660),h=i(8971),d={supportActiveX:"undefined"!=typeof ActiveXObject&&l.Q.browserCheck.ieAllVersion&&!n.q.msActiveXFilteringEnabled,supportDOM:!!document.implementation&&!!document.implementation.createDocument,websquareSerializer:new RegExp(n.q.userAgentPattern.serializer).test(navigator.userAgent),supportXMLHttp:"undefined"!=typeof XMLHttpRequest,uriEncoder:new RegExp(n.q.userAgentPattern.URIEncoder).test(navigator.userAgent)};d._XMLHTTP_PROGIDS=l.Q._XMLHTTP_PROGIDS,d._XML_NAMESPACE={SCHEMA:"http://www.w3.org/1999/XMLSchema",XFORMS:"http://www.w3.org/2002/xforms",XHTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XSL:"http://www.w3.org/1999/XSL/Transform",EVENTS:"http://www.w3.org/2001/xml-events",W2:"http://www.inswave.com/websquare"},d.EXT_PLUGIN={},d.EMPTY_TAG,d.maxZindex=10,d.FLzIndex=10,d.forcedValueSetting=null,d.firePageunload=!1,d.onurlchange=!1,d.urlchangebyapi=!1,d.onclearpage=!1,d.userClearMemoryStack=[],d.memoryLeakComponent={editor:1,fusionchart:1},d.memoryLeakComponentCount=0,d.useSubmissionGlobal=!1,d.useWorkflowGlobal=!1,d.projectCommonVariable="$c",d._projectCommonHash={},d._msaHash={},d._msaServerHash={},d.errorMessageData=new Object,d.userMessageData=new Object,d.commonCache={},d.udcObj={},d.udcMsa={},d._onpageloadArr=[],d.browserCheck=function(){return navigator.appName},d.browserCheck.ie=l.Q.browserCheck.ie,d.browserCheck.moz=l.Q.browserCheck.moz,d.browserCheck.opera=l.Q.browserCheck.opera,d.browserCheck.chrome=l.Q.browserCheck.chrome,d.browserCheck.android=l.Q.browserCheck.android,d.browserCheck.iphone=l.Q.browserCheck.iphone,d.browserCheck.ipad=l.Q.browserCheck.ipad,d.browserCheck.ipod=l.Q.browserCheck.ipod,d.browserCheck.blackberry=l.Q.browserCheck.blackberry,d.browserCheck.safari=l.Q.browserCheck.safari,d.browserCheck.ieAllVersion=l.Q.browserCheck.ieAllVersion,d.browserCheck.spartan=l.Q.browserCheck.spartan,d.browserCheck.chromeEdge=l.Q.browserCheck.chromeEdge,d.browserCheck.ieVersion={},d.browserCheck.mozVersion={},d.browserCheck.chromeVersion={},d.browserCheck.safariVersion={},
d.browserCheck.operaVersion={},d.browserCheck.spartanVersion={},d.browserCheck.chromeEdgeVersion={},d._commonPath=null,d.domMaxHeight=33554428,d.getXMLHTTPObject=function(t){var e=null;try{l.Q.useActiveXObject&&!0!==t?e=new ActiveXObject(d._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest)}catch(t){h.Y.printStackTrace(t)}return void 0===e||null==e?(WebSquare.logger.printLog(WebSquare.language.getMessage("E_core_AjaxUnsupportedBrowser")),null):e},d._getHybridUri=function(t){try{if("string"!=typeof t)return;var e,i,o=t;return 1==n.q.hybridApp&&t.indexOf("://")<0&&t.startsWith("/")?o=WebSquare.util.appendingPathComponent(n.q.w2xDocumentRoot,t):"app:"==location.protocol&&(i=(e=location.href).lastIndexOf("/"),o=e.substr(0,i)+t),o}catch(t){h.Y.printStackTrace(t,null,this)}},d._loadBefore=function(t){try{var e=d.getConfiguration("/WebSquare/environment/requestHeaderFunction/@value");if(""!=e){var i=WebSquare.util.getGlobalFunction(e);"function"==typeof i&&i(t)}}catch(t){h.Y.printStackTrace(t,null,this)}},d._loadAfter=function(t,e,i,o,s,r){try{var a=null,l=d.getConfiguration("/WebSquare/redirectUrl/@value");if(""!=l&&i.indexOf(l)>=0)return void(location.href=i);if(t>="400"||0===t){if(s)return;if("true"===d.getConfiguration("/WebSquare/errorPage/@value")){var c=d.getConfiguration("/WebSquare/errorPage/E"+t);if(c)a=WebSquare.xml._decode(WebSquare.xml._encode(c));else{var u=d.getConfiguration("/WebSquare/errorPage/Else");if(u)a=WebSquare.xml._decode(WebSquare.xml._encode(u));else{var p=d.getConfiguration("/WebSquare/errorPage");a=p?WebSquare.xml._decode(WebSquare.xml._encode(p)):e}}}else a=e;throw{message:"core._loadAfter : "+t}}if(o&&null!=(a=o.xml)&&""!==a||(a=e),a.startsWith("/*ENCRYPTED*/")){var g=(new Date).getTime();a=new Function("return "+a)();var m=(new Date).getTime();WebSquare.logger.printLog("decryption+eval time: "+(m-g)+"ms")}return r&&!0===r.useInfo&&(a={data:a},n.q.extend(a,r.infoObj)),a}catch(t){h.Y.printStackTrace(t,null,this)}},d.load=function(t,e){try{if("string"!=typeof t)return;void 0!==e&&null!=e||(e={});var i=t,o=d._getHybridUri(t),s=d.getXMLHTTPObject(),r=null;try{l.Q.openResourceUri(o,s),d._loadBefore(s),s.send(null);var a=!0===e.useXML&&d.browserCheck.ieAllVersion?s.responseXML:null;r=d._loadAfter(s.status,s.responseText,s.responseURL,a,!0===e.skipError,e)}catch(t){var n="";n=i.indexOf("uiplugin")>-1?WebSquare.language.getMessage("E_core_NoPluginError",i)||"Plugin ["+i+"] does not exist.":WebSquare.language.getMessage("E_core_NoModuleError",i)||"Resource ["+i+"] does not exist.",WebSquare.logger.printLog(n)}return s=null,r}catch(t){h.Y.printStackTrace(t,null,this)}},d.loadAsync=function(){var t=(0,s.A)(a().mark((function t(e,i){var o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,"string"==typeof e){t.next=4;break}return t.abrupt("return",Promise.reject("core.loadAsync error : uri invalid. ["+e+"]"));case 4:return void 0!==i&&null!=i||(i={}),o=!0===i.skipError,s=!0===i.useXML&&d.browserCheck.ieAllVersion,t.abrupt("return",new Promise((function(t,r){var a=l.Q.getXMLHTTPObject(),n=d._getHybridUri(e);!0!==i.noPostfix&&(n=l.Q.getResourcePostfix(n)),a.open("GET",n,!0);var h=function(e){if(4===a.readyState){var n=s?a.responseXML:null,l=d._loadAfter(a.status,a.responseText,a.responseURL,n,o,i);a.status>=200&&a.status<400&&"string"==typeof a.responseText&&a.responseText?t(l):r(l),a=null}};l.Q.useActiveXObject?a.onreadystatechange=h:(a.onload=h,a.onerror=function(t){r(a.statusText),a=null}),d._loadBefore(a),a.send(null)})));case 10:t.prev=10,t.t0=t.catch(1),h.Y.printStackTrace(t.t0,null,this);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(e,i){return t.apply(this,arguments)}}(),d.download=function(t,e,i,o){if(void 0!==i&&null!=i&&""!=i||(i="post"),null!=o&&void 0!==o||(o=!1),o)try{var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var t="",e=this.getResponseHeader("Content-Disposition")
;if(WebSquare.util.isIEAllVersion(11)){var i=(e=e.wq_replaceAll(";","")).indexOf("=")+1;t=e.substring(i,e.length),navigator.msSaveOrOpenBlob(s.response,t)}else{var o=window.URL.createObjectURL(this.response);if(e){var r=document.createElement("a");t=navigator.userAgent.indexOf("Safari")>-1&&-1==navigator.userAgent.indexOf("Chrome")?e.replaceAll("attachment;filename*=UTF-8''",""):e.match(/filename="([^"]+)"/)[1],t=decodeURIComponent(t),r.download=t,r.href=o,r.click(),o&&window.URL.revokeObjectURL(o)}WebSquare.layer.hideProcessMessage()}}};try{s.ontimeout=function(t){}}catch(t){h.Y.printStackTrace(t)}s.open(i,t,!0),s.setRequestHeader("Content-Type","text/plain"),s.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),s.responseType="blob";var r=d.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=r){var a=WebSquare.util.getGlobalFunction(r);a&&a(s,"download")}s.send(e)}catch(t){h.Y.printStackTrace(t)}else{var c=!1;null!=document.getElementById("__iframe__")&&(c=!0);var u=null,p="";if(c)u=document.getElementById("___iframe__div");else{if((u=document.createElement("div")).id="___iframe__div",u.style.width="0px",u.style.height="0px",u.style.visibility="hidden",document.body.appendChild(u),p=WebSquare.net.getSSLBlankPage(),n.q.domain){var g=d.getConfiguration("domainFrameURL");g||(g=n.q.baseURI+l.Q.inquiresPath("message/domainFrame.html")),p="src='"+(g+="?domain="+WebSquare.text.URLEncoder(n.q.domain))+"'"}var m="";WebSquare.util.isIEAllVersion()&&(m="frameborder='0'"),d._safeInnerHTML(u,"<iframe "+m+" id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0; border:0px;' "+p+"></iframe>")}try{var f=document.getElementById("__iframe__");if(d.browserCheck.ie){try{f.contentWindow.document}catch(t){return d.clearTimer("__iframe__"),void d.setTimer(d.download,{key:"__iframe__",caller:this,delay:500,args:arguments})}f.contentWindow.document.onreadystatechange=function(){try{"interactive"==f.contentWindow.document.readyState&&WebSquare.layer.hideProcessMessage()}catch(t){h.Y.printStackTrace(t)}}}else WebSquare.layer.hideProcessMessage()}catch(t){h.Y.printStackTrace(t)}try{var b=document.createElement("form");if(b.target="__iframe__",b.action=t,b.method=i,b.style.display="inline",void 0!==e){var y=document.createElement("input");y.type="hidden",y.name="xmlValue",WebSquare.xml.isDocument(e)?y.value=WebSquare.xml.serialize(e):y.value=e,b.appendChild(y)}u.appendChild(b),b.submit()}catch(t){}finally{try{b&&y&&(y.value=""),u.removeChild(b)}catch(t){h.Y.printStackTrace(t)}}}},d.excelDownload=function(t,e,i,s){if(!s||"object"!==(0,o.A)(s))s={};var r="WS5_downloadComplete",a=null,c=null,u=s.timeout||null,p=s.checkInterval||1e3,g=s.onSuccessCallback||null,m=s.onFailureCallback||null,f=s.scopeId||"";if(WebSquare.hybridApp){var b=document.getElementById("__iframe__"),y=function(){document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:f}),clearInterval(a)},v=function(t){y(),g&&g(t)},w=function(t){y(),m&&m(t)};try{var S={};S.url=t,S.data=e,window.$h.websquare.excelDownload((function(e){v(t)}),(function(e){w(t)}),S)}catch(t){h.Y.printStackTrace(t)}}else{if(s.nativeApp)return window.__WebSquareExcel.downloadExcel(t,e),void WebSquare.layer.hideProcessMessage({scope:f});void 0!==i&&null!=i&&""!=i||(i="post"),WebSquare.util._isMobileDevice()&&window.open("blank.html","__ipad_excel__");var _=!1;null!=document.getElementById("__iframe__")&&(_=!0);var C=null;if(_)C=document.getElementById("___iframe__div");else{(C=document.createElement("div")).id="___iframe__div",C.style.width="0px",C.style.height="0px",C.style.visibility="hidden",document.body.appendChild(C);var x=WebSquare.net.getSSLBlankPage();if(n.q.domain){var I=n.q.baseURI+l.Q.inquiresPath("message/domainFrame.html");x="src='"+(I+="?domain="+WebSquare.text.URLEncoder(n.q.domain))+"'"}var T="";WebSquare.util.isIEAllVersion()&&(T="frameborder='0'"),
d._safeInnerHTML(C,"<iframe "+T+" id='__iframe__' name='__iframe__' scrolling='no' style='width:0; height:0; border:0px;' "+x+"></iframe>")}try{(b=document.getElementById("__iframe__")).contentWindow.title="Download";y=function(){document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",WebSquare.layer.hideProcessMessage({scope:f}),clearInterval(a)},v=function(t,e,i){y(),e||(e={}),i&&window.URL.revokeObjectURL(i),g&&g(t,e)},w=function(t,e,i){y(),e||(e={}),i&&window.URL.revokeObjectURL(i),m&&m(t,e)};document.cookie=r+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";if(WebSquare.util.isIEAllVersion()){try{b.contentWindow.document}catch(t){return d.clearTimer("__iframe__"),void d.setTimer(d.excelDownload,{key:"__iframe__",caller:this,delay:500,args:arguments})}b.contentWindow.document.onreadystatechange=function(){try{"interactive"==b.contentWindow.document.readyState&&v(t)}catch(t){h.Y.printStackTrace(t)}}}else s.useXHR||(c=new Date,a=setInterval((function(){try{var e=r+"=true";document.cookie.indexOf(r+"=")>-1?document.cookie.indexOf(e)>-1?v(t):w(t):u&&new Date-c>u?w(t):s.httpReadOnly&&y()}catch(t){h.Y.printStackTrace(t)}}),p))}catch(t){h.Y.printStackTrace(t)}try{if(s.useXHR){var k="",L="",A=new XMLHttpRequest,D=s.withCredentials+""||"";""!=D&&(A.withCredentials=WebSquare.util.getBoolean(D));var W=!0,q=s.userExcel||"false";q+="";var M=s.userExcel||"false";M+="",t.indexOf("xmlToExcel2.wq")>-1||"true"==q?(k="blob",L="exceldownload"):t.indexOf("xmlToCSV.wq")>-1||"true"==M?(k="blob",L="csvdownload"):t.indexOf("dataListToExcel.wq")>-1?(k="blob",L="dataListdownload"):t.indexOf("pivotToExcel.wq")>-1?(k="blob",L="pivotdownload"):t.indexOf("pivotToCSV.wq")>-1?(k="blob",L="pivotcsvdownload"):W=!1,A.onreadystatechange=function(){var e;if(4==this.readyState)if(200==this.status){var i="",o={},s=this.getResponseHeader("Content-Disposition");if(W)if(s){if(WebSquare.util.isIEAllVersion(11)){var r=(s=s.wq_replaceAll(";","")).indexOf("=")+1;i=s.substring(r,s.length),navigator.msSaveOrOpenBlob(A.response,i)}else{e=window.URL.createObjectURL(this.response);var a=document.createElement("a");i=s.match(/filename="([^"]+)"/)[1],i=decodeURIComponent(i),a.download=i,a.href=e,a.click()}v(t,o,e)}else{var n=new FileReader;n.readAsText(this.response),n.onloadend=function(){var e=WebSquare.xml.parse(n.result),i=WebSquare.xml.findNode(e,"Exception/errorCode"),s=WebSquare.xml.getTextNodeValue(i);o.errorCode=s,w(t,o)}}else{try{this.responseText&&(o=JSON.parse(this.responseText))}catch(t){h.Y.printStackTrace(t)}v(t,o)}}else w(t,{},e)};try{A.timeout=u,A.ontimeout=function(e){w(t)}}catch(t){h.Y.printStackTrace(t)}A.open("POST",t,!0),A.setRequestHeader("Content-Type","text/plain"),A.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),A.responseType=k;var E=d.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=E){var R=WebSquare.util.getGlobalFunction(E);R&&R(A,L)}WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),A.send("xmlValue="+e)}else{var N=document.createElement("form");if(WebSquare.util._isMobileDevice()?N.target="__ipad_excel__":(N.target="__iframe__",N.encoding="text/plain"),t=t.indexOf("?")>-1?t+"&suffix="+(new Date).getTime()+n.q.safeRandom():t+"?suffix="+(new Date).getTime()+n.q.safeRandom(),N.action=t,N.method=i,N.style.display="inline",N.acceptCharset="UTF-8",void 0!==e){var F=document.createElement("input");F.type="hidden",F.name="xmlValue",WebSquare.xml.isDocument(e)&&(e=WebSquare.xml.serialize(e)),F.value=e,N.appendChild(F)}C.appendChild(N),N.submit()}}catch(t){h.Y.printStackTrace(t)}finally{try{N&&(F&&(F.value=""),C.removeChild(N))}catch(t){h.Y.printStackTrace(t)}}}},d.callParentFunction=function(t){var e=null;try{for(var i=opener||parent,s=t.wq_trim().split("."),r=0,a=i[s[r++]];a&&("object"==(0,o.A)(a)||"function"==typeof a)&&r<s.length;)a=a[s[r++]];for(var n=arguments.length,l=new Array(n>1?n-1:0),d=1;d<n;d++)l[d-1]=arguments[d]
;e=a.apply(a,l)}catch(t){h.Y.printStackTrace(t)}return e},d.closePopupWindow=function(){var t=WebSquare.net.getParameter("popupID");d.callParentFunction("WebSquare.uiplugin.popup.callClose",t)},d.getNamespaces=function(t){var e={};try{var i=null;if(1==t.nodeType?i=t.attributes:9==t.nodeType&&(i=t.documentElement.attributes),null!=i)for(var o=0;o<i.length;o++){var s=i.item(o);"xmlns"==s.nodeName?e[""]=null!=s.value?s.value:s.nodeValue:0==s.nodeName.indexOf("xmlns")&&(null!=s.value&&null!=s.name?e[s.name.substring(6)]=s.value:e[s.nodeName.substring(6)]=s.nodeValue)}}catch(t){h.Y.printStackTrace(t)}return e},d.getURL=function(t,e){if("string"==typeof t){void 0!==e&&null!=e||(e={});try{if(t.indexOf("://")>-1)return t=d._getWpackUrl(t,e.wpack);var i,o=!0!==e.absolutePath&&!t.startsWith("/")&&!t.startsWith("\\"),s=e.baseServletURI,r=e.baseURI;e.msaName&&(i=d._msaServerHash[e.msaName]),i?(!0===r&&(r=i.baseURI||n.q.baseURI),!0===s&&(s=i.baseServletURI||(r?"":n.q.baseServletURI)),s&&r?t=i.origin+s+r+t:s?t=i.origin+s+t:r?t=i.origin+r+t:(o&&(t=(e.tempHome||i.w2xHome||WebSquare.w2xHome)+t),t=i.origin+t)):o&&!0!==e.baseURI&&!i&&(t=(e.tempHome||WebSquare.w2xHome)+t),""==n.q.w2xDocumentRoot||t.startsWith("..")||i||(t=n.q.w2xDocumentRoot+t),i||!0===e.baseServletURI||!0===e.baseURI||e.imageServlet||(t=d._getContextRootUri(t)),!0!==e.baseURI||i?!0!==e.baseServletURI||i||(t=n.q.baseServletURI+t):t=n.q.baseURI+t,t=d._getWpackUrl(t,e.wpack)}catch(t){h.Y.printStackTrace(t)}finally{return t}}},d.getImageURL=function(t,e){void 0!==e&&null!=e||(e={});var i,o=!0===e.cssStyle,s=d.getConfiguration("/WebSquare/imageURLPrefix/@value"),r=d.getConfiguration("/WebSquare/imageURLPostfix/@value");if(e.msaName&&(i=d._msaServerHash[i]),"string"==typeof t){if(t.startsWith("data:")||t.startsWith("blob:"))return t;t=t.wq_trim();var a=0==n.q.isLocal&&d.browserCheck.ie&&"6"==d.browserVersion()&&-1==t.indexOf("://")&&!i;if(null!=l.Q.imageServlet){if(e.imageServlet=l.Q.imageServlet,t.startsWith("url")){var h=t.substring(3).wq_trim();"("==h.charAt(0)&&")"==h.charAt(h.length-1)&&(t=h.substring(1,h.length-1),i&&(t=l.Q.imageServlet+t),t=d.getURL(t,e),i||(t=n.q.baseURI+l.Q.imageServlet+t),t=l.Q.getImagePostfix(t),a&&(t=location.protocol+"//"+location.host+t),t="url("+t+")")}else""!==s?t=s+t:(i&&(t=l.Q.imageServlet+t),t=d.getURL(t,e),i||(t=n.q.baseURI+l.Q.imageServlet+t),"$blank"!=r&&(t=l.Q.getImagePostfix(t))),a&&(t=location.protocol+"//"+location.host+t),o&&(t="url("+t+")");null!=l.Q.imageHostUrl&&(t+="&hostUrl="+l.Q.imageHostUrl)}else"$blank"!=r&&(t=l.Q.getResourcePostfix(t)),t=""!==s?s+t:d.getURL(t,e),a&&(t=location.protocol+"//"+location.host+t),o&&(t="url("+t+")")}return t},d.getEngineImageURL=function(t,e){if(void 0===e&&(e=!1),"string"==typeof t)if(null!=l.Q.imageServlet)if(t.startsWith("url")){var i=t.substring(3).wq_trim();"("==i.charAt(0)&&")"==i.charAt(i.length-1)&&(t=i.substring(1,i.length-1),t=n.q.baseURI+l.Q.imageServlet+n.q.baseURI+t.wq_trim(),t="url("+(t=l.Q.getImagePostfix(t))+")")}else t=n.q.baseURI+l.Q.imageServlet+n.q.baseURI+t.wq_trim(),t=l.Q.getImagePostfix(t),e&&(t="url("+t+")");else t=n.q.baseURI+t.wq_trim(),e&&(t="url("+t+")");return t},d.getServletURL=function(t,e,i,o,s){try{var r={msaName:e};return o?(r.baseURI=!1,r.baseServletURI=!1,r.absolutePath=!0):(r.baseURI=!0,r.baseServletURI=!0,r._force=!0,r.absolutePath=!0),t&&"function"==typeof t.getURL?o?t.getURL(o,r):t.getURL(i,r):o?this._getMsaSrc(o,r):this._getMsaSrc(i,r)}catch(t){h.Y.printStackTrace(t)}},d.browserVersion=function(){if(d.browserCheck.moz){if(2==navigator.appVersion.charAt(0))return"2";if(3==navigator.appVersion.charAt(0))return"3";if(4==navigator.appVersion.charAt(0))return"4";if(5==navigator.appVersion.charAt(0))return"6"}else if(d.browserCheck.ieAllVersion){if(document.documentMode)return document.documentMode+"";if("2"==navigator.appVersion.charAt(0))return"2";if("3"==navigator.appVersion.charAt(0))return"3"
;if("4"==navigator.appVersion.charAt(0))return-1!=navigator.appVersion.indexOf("MSIE 9")?"9":-1!=navigator.appVersion.indexOf("MSIE 8")?"8":-1!=navigator.appVersion.indexOf("MSIE 7")?"7":-1!=navigator.appVersion.indexOf("MSIE 6")?"6":-1!=navigator.appVersion.indexOf("MSIE 5.5")?"5.5":-1!=navigator.appVersion.indexOf("MSIE 5.0")?"5.0":"4";if("5"==navigator.appVersion.charAt(0))return"5"}else if(d.browserCheck.android){var t=navigator.userAgent;if(t.indexOf("Android")>=0)return parseFloat(t.slice(t.indexOf("Android")+8))}return" "},d.setTimeout=function(t,e,i){var o=[];if(arguments.length>3)for(var s=3;s<arguments.length;s++)o.push(arguments[s]);window.setTimeout((function(){e.apply(t,o)}),i)},d.cloneObject=function(t){if("object"!=(0,o.A)(t))return t;if(null==t)return t;var e=new Object;for(var i in t)e[i]=d.cloneObject(t[i]);return e},d.makeStyle=function(t,e,i){if(!(void 0!==t&&null!=t||void 0!==e&&null!=e))return null;var o={};void 0!==e&&null!=e&&""!=e&&(o=WebSquare.skin.makeClassStyle(e),o=d.cloneObject(o));try{if(void 0!==t&&null!=t&&""!=t){for(var s=t.split(";"),r=0;r<s.length;r++){var a=s[r].indexOf(":");if(!(a<0)){var n=s[r].substring(0,a),l=s[r].substring(a+1);if(l.indexOf("url")>=0&&(l=l.wq_trim()).startsWith("url")){var c=l.substring(3).wq_trim();"("==c.charAt(0)&&")"==c.charAt(c.length-1)&&(l="url("+d.getImageURL(c.substring(1,c.length-1))+")")}o[n.wq_trim().capitalizeStyle()]=l.wq_trim()}}if(void 0!==i){var u={};for(r=0;r<i.length;r++)try{var p=i[r].wq_trim().capitalizeStyle(),g=o[p];void 0!==g&&(u[p]=g)}catch(t){h.Y.printStackTrace(t)}o=u}}}catch(t){h.Y.printStackTrace(t)}return o},d.applyStyle=function(t,e,i){try{if(void 0===e||null==e)return;if(WebSquare.util.isExist("style",t))if(void 0===i)for(var o in e)try{t.style[o]=e[o]}catch(e){h.Y.printStackTrace(e,"Object ID : "+t.id+",    ")}else for(o=0;o<i.length;o++)try{var s=e[i[o]];void 0!==s&&(t.style[i[o]]=s)}catch(e){h.Y.printStackTrace(e,"Object ID : "+t.id+",    ")}}catch(t){h.Y.printStackTrace(t)}},d.getConfiguration=function(t){return d.getConfigurationJSON(t)},d.getConfigurationJSON=function(t,e){if(l.Q.configurationJSON){var i;if(void 0!==e&&null!=e||(e={}),null!=(i="json"===e.type?n.q.configCacheObj[t]:"array"===e.type?n.q.configCacheArray[t]:n.q.configCache[t]))return i;i="";for(var o=0;o<l.Q.configurationJSON.length;o++){if(t.indexOf("/")>-1){for(var s=t.split("/"),r=l.Q.configurationJSON[o],a=!1,h=null,d=0;d<s.length;d++)if(""!=s[d]){a=!1;var c=s[d],u=c.indexOf("["),p=null,g=null;if(-1==u)h=c;else{h=c.substring(0,u);var m=c.match(/[a-zA-Z0-9_]*[\[][\s]*(@[a-zA-Z0-9_]*)[\\]*=[\s]*["']?([^'"]*)["']?[\]]/);null!=m&&(p=m[1],g=m[2])}if(r=r[h])if("[object Array]"===Object.prototype.toString.call(r))if("array"===e.type&&null==p&&null==g)a=!0;else for(var f=0;f<r.length;f++){if(null==p&&null==g){a=!0,r=r[f];break}if(g==r[f][p]){a=!0,r=r[f];break}}else(null==p&&null==g||g==r[p])&&(a=!0);if(!a){r=null;break}}"json"===e.type||"array"===e.type?i=r:(r&&(h&&h.startsWith("@")?i="string"==typeof r?r:r+"":("[object Array]"===Object.prototype.toString.call(r)?"array"!==e.type&&(i=r[0]["#text"]||"",i+=r[0]["#cdata"]||""):(i=r["#text"]||"",i+=r["#cdata"]||""),"string"!=typeof i&&(i+=""))),i=i.wq_trim())}else{r=l.Q.configurationJSON[o].WebSquare[t.wq_trim()];"json"===e.type?i=r:(r&&("[object Array]"===Object.prototype.toString.call(r)?"array"!==e.type&&(i=r[0]["@value"]):i=r["@value"]),i?i=i.wq_trim():"array"!==e.type&&(i=""))}if(i)break}if("json"===e.type||"array"===e.type)if(null==i&&(i={}),"json"===e.type){var b={};for(var y in i){var v=i[y];v.constructor!==Array&&null!=v["@value"]?b[y]=v["@value"]||"":b[y]=v}n.q.configCacheObj[t]=b,i=b}else n.q.configCacheArray[t]=i;else n.q.configCache[t]=i;return i}},d.getConfig=function(t){t.indexOf("/")>-1&&(t="/WebSquare/"+t);var e=this.getConfigurationJSON(t,{type:"json"});for(var i in e)e[i]&&"object"===(0,o.A)(e[i])&&(e[i]="");return e},d.getChildConfiguration=function(t,e){var i=[],o=this.getConfigurationJSON(t,{type:"array"
});for(var s in o){if(o[s].constructor===Array&&o[s].length>0){i=o[s];break}e&&!0===e.singleMode&&o[s].constructor!==Array&&(i=[o[s]])}return i},d.applyErrorMessage=(0,s.A)(a().mark((function t(){var e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,e=n.q.baseURI+l.Q.inquiresPath("message/")+d.getConfiguration("language")+".xml",t.next=5,WebSquare.xml.load(e);case 5:for(i=t.sent,o=i.documentElement.firstChild;null!=o;o=o.nextSibling)1==o.nodeType&&(d.errorMessageData[o.nodeName]=o.firstChild.nodeValue);t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),d.applyUserMessage=(0,s.A)(a().mark((function t(){var e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,e=n.q.baseURI+l.Q.inquiresPath("message/userMessage.xml"),t.next=5,WebSquare.xml.load(e);case 5:for(i=t.sent,o=i.documentElement.firstChild;null!=o;o=o.nextSibling)1==o.nodeType&&(d.userMessageData[o.nodeName]=o.firstChild.nodeValue);t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),d.setMaxZIndex=function(t){for(var e=0,i=document.body.childNodes,o=0;o<i.length;o++)if(1==i[o].nodeType){var s=i[o].style.zIndex;s>=e&&(e=s)}t.style.zIndex=e+1},d.clearCommon=function(){try{var t=function(t){for(var e in t){!0!==t[e].spaCache&&delete t[e]}};try{for(var e=d.userClearMemoryStack.length;e>0;e--){var i=d.userClearMemoryStack[e-1];i&&i()}}catch(t){h.Y.printStackTrace(t)}try{var o=WebSquare.util.getGlobalFunction(d.getConfiguration("/WebSquare/clearMemory/@userFunction"));"function"==typeof o&&o()}catch(t){h.Y.printStackTrace(t)}if(WebSquare&&n.q.timerHash)for(var s in n.q.timerHash){n.q.timerHash[s]&&d.clearTimer(s)}if(WebSquare.userTimerHash){for(var s in WebSquare.userTimerHash){WebSquare.userTimerHash[s]&&WebSquare.util.clearTimeout(s)}n.q.userTimerHash={}}if(WebSquare.userIntervalHash){for(var s in WebSquare.userIntervalHash){WebSquare.userIntervalHash[s]&&WebSquare.util.clearInterval(s)}n.q.userIntervalHash={}}if(WebSquare&&WebSquare.userData){for(var s in WebSquare.userData)WebSquare.userData[s]=null;n.q.userData={}}for(var r in WebSquare.net.paramObj=null,t(d._projectCommonHash),t(d._msaHash),d._msaServerHash={},WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.api.remove(r);WebSquare.DataCollection.stopBroadCast=!1,WebSquare.DataCollection.comp={},WebSquare.DataCollection.attributeMapInfo={},WebSquare.DataCollection.childToParentRelation={},WebSquare.DataCollection.parentToChildRelation={},WebSquare.DataCollection.childToParentRef={},WebSquare.DataCollection.parentToChildRef={},WebSquare.DataCollection.options={useConfig:"true",baseNode:"map",attributeMap:""},WebSquare.DataCollection.activated=!1,WebSquare.clearScriptHead();var a=d.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");if(WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.popupList)for(var l=WebSquare.uiplugin.popup.popupList,c=(e=0,l.length);e<c;e++){var u=l[e];u.useWindowPopup()&&"false"===a||u.close()}d.commonCache={},d.clearJQuery(),WebSquare._dataObjectFlag=!1,d._fireParentOnunload()}catch(t){h.Y.printStackTrace(t)}},d.setTimer=function(t,e){try{var i=(new Date).getTime(),o=e.key||t.toString().slice(0,30),s=e.delay||1,r=e.max||0,a=e.caller||window,l=e.args||[],d=n.q.timerHash[o];return d||(d=n.q.timerHash[o]={thread:null,timeoutKey:null,startTime:i}),d.thread=function(){window.WebSquare&&n.q.timerHash&&delete n.q.timerHash[o],e.before_call&&e.before_call.call(a,d);var i=t.apply(a,l);e.callback&&e.callback.call(a,i)},clearTimeout(d.timeoutKey),r<=0||i-d.startTime<r?(e.before_set&&e.before_set.call(a,d),d.timeoutKey=setTimeout(d.thread,s),e.after_set&&e.after_set.call(a,d)):d.thread(),o}catch(t){h.Y.printStackTrace(t,null,this)}},d.clearTimer=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30))
;var i=n.q.timerHash[t];i&&(clearTimeout(i.timeoutKey),e?i.thread():delete n.q.timerHash[t])}catch(t){h.Y.printStackTrace(t,null,this)}},d.measureTime=function(t,e){try{var i=e.key||t.toString().slice(0,30),o=e.caller||window;d.clearTimer(i,!0),d.setTimer((function(){}),{key:i,before_call:function(e){var s=(new Date).getTime()-e.startTime;n.q.measureHash[i]||(n.q.measureHash[i]=[],n.q.measureHash[i].sum=0);var r=n.q.measureHash[i];r.push(s),r.sum+=s,r.length>100&&(r.sum-=r.shift()),t.call(o,{time:s,aver:r.sum/r.length})}})}catch(t){h.Y.printStackTrace(t,null,this)}},d.modifyMaxConnection=function(t,e){try{if(d.browserCheck.ie){t=t||"10",e=e||"";var i=d.getConfiguration("/WebSquare/maxConnectionActiveX/@codebase");null!=i&&""!=i||(i="engine/cab/WebSquareConfig.cab");var o=document.createElement("div");o.style.width="0px",o.style.height="0px",o.style.visibility="hidden",document.body.appendChild(o),d._safeInnerHTML(o,"<object classid='clsid:BD66056F-D87B-4543-8638-A4CED765B9AA' codebase='"+i+"' style='display: none' width='0' height='0' align='center' hspace='0' vspace='0'><param name='MaxConnectionsPerServer' value='"+t+"' /><param name='SyncMode5' value='"+e+"' /></object>")}}catch(t){h.Y.printStackTrace(t,null)}},d.setSystemLanguage=function(t){n.q.useUserSystemLang=!0;var e=l.Q.getBrowserLanguage();t=WebSquare.cookie.getCookie("system_language")||t||e||"ko";n.q.systemLanguage=t;var i=d.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");imports(i)},d.getEmptyTag=function(){try{if(d.EMPTY_TAGS)return d.EMPTY_TAGS;d.EMPTY_TAGS={};var t=d.getConfiguration("/WebSquare/emptyTag/@value");if(t)for(var e=t.split(","),i=0;i<e.length;i++){var o=e[i].wq_trim();d.EMPTY_TAGS[o]=!0}return d.EMPTY_TAGS}catch(t){h.Y.printStackTrace(t,null)}},d.finalize=function(){try{WebSquare.DataCollection.stopBroadCast=!0,n.q.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.style.getScale();n.q.getBody()&&(d.firePageunload||(d.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")));var e=WebSquare.util.getGlobalFunction(d.getConfiguration("/WebSquare/spa/onpageunload/@value"));if("function"==typeof e)try{e()}catch(t){WebSquare.logger.printLog("eval script error : "+e),h.Y.printStackTrace(t,null)}if("true"===d.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){for(var i in d.memoryLeakComponent)if(null!=WebSquare.componentsCache[i]){if(Number(d.getConfiguration("/WebSquare/spa/autoReload/@"+i))<=Object.keys(WebSquare.componentsCache[i]).length)return void WebSquare.util.clearPage();d.memoryLeakComponentCount+=Object.keys(WebSquare.componentsCache[i]).length*d.memoryLeakComponent[i]}var o=d.getConfiguration("/WebSquare/spa/autoReload/@count");if(o=""==o?NaN:Number(o),d.memoryLeakComponentCount>0&&d.memoryLeakComponentCount>o)return void WebSquare.util.clearPage()}var s=d._getGlobalVariable(!0);if(s)for(var r=s.split(","),a=0;a<r.length;a++){var c=r[a].wq_trim();for(var u in window[c])delete window[c][u];window[c]={}}for(var p in WebSquare.idCache){var g=WebSquare.idCache[p];if("function"!=typeof g.remove||g.remove==WebSquare.xfControl.prototype.remove||g.options&&("wframe"==g.options.pluginName||"pageInherit"==g.options.pluginName||"pageFrame"==g.options.pluginName)){if(n.q.isPrintLog=!1,"function"==typeof g.finalize&&g.finalize(),n.q.isPrintLog=!0,"function"==typeof g.unbind&&g.unbind(),g.event&&g.event.clearCache(),n.q.useVisibleHelper&&g.render&&g.render.parentNode&&g!=WebSquare.body&&g.render.parentNode.removeChild(g.render),g.childControlList=[],window[g.id])try{delete window[g.id]}catch(t){window[g.id]=void 0}}else g.remove()}if(!n.q.useVisibleHelper&&WebSquare.body&&(WebSquare.body.childControlList=null,WebSquare.body.layerListener&&WebSquare.body.layerListener.removeAll(),WebSquare.body.render&&WebSquare.body.render.parentNode.removeChild(WebSquare.body.render)),n.q.body=null,n.q.idCache={},window[WebSquare.noConflict].comp={},
n.q.idToUUID={},n.q.scriptSectionExcuteFlag=null,n.q.scriptSection="",n.q.useVisibleHelper=!1,n.q.styleSheetEarlyImport=1,n.q.styleSheetEarlyImportName="",n.q.skin&&WebSquare.skin.skinTag&&(WebSquare.skin.skinTag=WebSquare.styleSheetEarlyImportList.slice(0)),n.q.externalCSSList=[],n.q.externalCSSDOM=[],n.q.externalCSSURL=[],n.q.pageXMLString=null,WebSquare.uiplugin&&WebSquare.uiplugin.scheduleCalendar&&(WebSquare.uiplugin.scheduleCalendar.isImported=!1),null!=n.q.WebSquaredoc){WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.WebSquaredoc.instanceRefElement=[],n.q.componentsCache={};var m=document.getElementsByTagName("head")[0];for(a=WebSquare.WebSquaredoc.cssList.length-1;a>=0;a--){var f=WebSquare.WebSquaredoc.cssList[a];if("LINK"===f.tagName.toUpperCase()){for(var b=WebSquare.util._getAbsolutePath(f.href.toString()),y=0;y<WebSquare.styleSheetEarlyImportList.length;y++)if(b===WebSquare.util._getAbsolutePath(WebSquare.styleSheetEarlyImportList[y])){WebSquare.WebSquaredoc.cssList.splice(y,1);break}}else m.removeChild(f),WebSquare.WebSquaredoc.cssList.splice(a,1)}if(m=null,n.q.externalCSSRemainder=WebSquare.WebSquaredoc.cssList.slice(0),null!=WebSquare.WebSquaredoc.xmlDocument)for(a=WebSquare.WebSquaredoc.xmlDocument.childNodes.length-1;a>=0;a--)WebSquare.WebSquaredoc.xmlDocument.removeChild(WebSquare.WebSquaredoc.xmlDocument.childNodes[a]);if(WebSquare.WebSquaredoc.models)for(var v=0;v<WebSquare.WebSquaredoc.models.length;v++){var w=WebSquare.WebSquaredoc.models[v];if(w){for(var S=0;S<w.submissions.length;S++)w.submissions[S].dead=!0,d.useSubmissionGlobal&&(window[w.submissions[S].id]=null);for(var _=0;_<w.workflows.length;_++)w.workflows[_].promiseStatus="REJECT",d.useWorkflowGlobal&&(window[w.workflows[_].id]=null)}}for(var p in WebSquare.WebSquaredoc)WebSquare.WebSquaredoc[p]=null}if(d.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),n.q.strictModeFrame=null),n.q.WebSquaredoc=null,n.q.callExecuteHelper=!1,d.firePageunload=!1,d.onurlchange=!1,WebSquare.layer&&(WebSquare.layer.disabledList=[],WebSquare.layer.submissionIDQueue=[],WebSquare.layer.submissionMessageQueue=[]),null==document.body){var C=document.createElement("body");l.Q.fullViewed&&l.Q.zoomed(C,t),document.documentElement.appendChild(C)}}catch(t){h.Y.printStackTrace(t,null)}},d.getComponentById=function(t){try{return"string"==typeof t&&WebSquare.idCache[WebSquare.idToUUID[t]]?WebSquare.idCache[WebSquare.idToUUID[t]]:window[t]}catch(t){h.Y.printStackTrace(t,null,this)}},d.setId=function(t,e){try{e._orgUUID=e.uuid,e.setAttribute("id",t),e.render.setAttribute("id",t),window[WebSquare.noConflict].comp[e.id]=null,delete window[WebSquare.noConflict].comp[e.id],e.id=t,WebSquare.idToUUID[t]=e.uuid,window[WebSquare.noConflict].comp[t]=e,"false"!=d.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[t]=e)}catch(t){h.Y.printStackTrace(t,null,this)}},d.cleanObj=function(t){try{var e=[],i=0;try{if(null==JSON.stringify(t))return i}catch(t){return h.Y.printStackTrace(t,null,this),i}e.push(t);for(var s=e.pop();null!=s;s=e.pop())if(!d.isNode(s)&&!d.isWindow(s)&&(i++,"object"==(0,o.A)(s)&&null!=s))for(var r in s){var a=s[r];"object"==(0,o.A)(a)&&null!=a&&e.push(a),delete s[r]}return i}catch(t){h.Y.printStackTrace(t,null,this)}},d.isWindow=function(t){return t==t.window},d.isNode=function(t){return"undefined"!=typeof Node?t instanceof Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName},d.isXML=function(t){try{if(t){var e=(t?t.ownerDocument||t:0).documentElement;return!!e&&"HTML"!==e.nodeName}return}catch(t){h.Y.printStackTrace(t,null,this)}},d.executePointScript=function(t){try{if(WebSquare.executePointScriptArr[t])for(var e=0;e<WebSquare.executePointScriptArr[t].length;e++){var i=WebSquare.executePointScriptArr[t][e];if("function"==typeof i.script){var o,s=WebSquare.util.getComponentById(i.scope)
;o=s&&s.scope&&s.options&&!0===s.options.scope?s.scope:WebSquare.strictModeFrame?WebSquare.strictModeFrame.scope:{},i.script(o)}}}catch(t){h.Y.printStackTrace(t,null,this)}finally{WebSquare.executePointScriptArr[t]&&(delete WebSquare.executePointScriptArr[t],WebSquare.executePointScriptArr[t]=null)}},d.getPageURL=function(t,e){if("string"!=typeof t)return"";void 0!==e&&null!=e||(e={});var i=t;!0!==e.skipURL&&(i=d.getURL(i,e)),!0!==e.skipUri&&(i=WebSquare.jsLoader.getUri(i,e));var o=d.getConfiguration("/WebSquare/pageURLPrefix/@ignoreW2xPath");if(WebSquare.pageURLPrefix){if("function"==n.q.pageURLPrefixType){var s=WebSquare.pageURLPrefix.wq_replaceAll("()",""),r=WebSquare.util.getGlobalFunction(s);"function"==typeof r&&(i=r(i),"true"!==o.toLowerCase()&&(i+=encodeURIComponent(t)))}else i=n.q.pageURLPrefix+encodeURIComponent(i);i=i.replace(/%2F/g,"/")}return i},d.clearObj=function(t,e,i){if(null==e&&(e=1),!(e>i||"object"!=(0,o.A)(t)&&"function"!=typeof t))for(var s in t){"object"!=(0,o.A)(t[s])&&"function"!=typeof t[s]||d.clearObj(t[s],e+1);try{t[s]=null,delete t[s]}catch(t){h.Y.printStackTrace(t,null,this)}}},d.clearJQuery=function(){try{if("undefined"!=typeof jQuery&&null!=jQuery){var t=[];for(var e in jQuery.cache)if(jQuery.cache[e].handle)try{t.push(jQuery.cache[e].handle.elem)}catch(t){h.Y.printStackTrace(t)}for(var i in jQuery.cleanData(t),t)delete t[i];t=null}}catch(t){WebSquare.logger.printLog("error : jQuery cleanData exception"),h.Y.printStackTrace(t,null,this)}},d._businessPreProcessor=function(){try{var t=d.getConfiguration("/WebSquare/preProcessor/businessPreProcessor/@value"),e=WebSquare.util.getGlobalFunction(t);"function"==typeof e&&e()}catch(t){h.Y.printStackTrace(t,null,this)}},d._initPopupParameter=function(){try{var t=d._getParentObj();if(n.q.isWebSquarePopup&&null!=t&&null!=t.WebSquare){var e,i=t.WebSquare.srcData,s=t.WebSquare.destData,r=!1,a="",c=WebSquare.net.getParameter("popupID"),u=t.WebSquare.dataObject[c];if(t.WebSquare.docTitleInfo&&(a=t.WebSquare.docTitleInfo[c]),a&&(document.title=a),void 0!==u&&null!=u)try{var p,g=u.type.toLowerCase(),m=u.name,f=(0,o.A)(u.data);if(m){switch(g){case"string":if("string"==f)p=u.data;else if("object"==f)return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!");break;case"json":if("string"==f)(y=JSON.parse(u.data))&&(p=y);else if("object"==f){if(d.isXML(u.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");try{if(WebSquare.util.isIEAllVersion()){var b=JSON.parse(JSON.stringify(u));b&&(u=b)}}catch(t){h.Y.printStackTrace(t)}p=u.data}break;case"xml":var y;if("string"==f)(y=WebSquare.xml.parse(u.data))&&(p=y);else if("object"==f){if(!d.isXML(u.data))return void WebSquare.logger.printLog("PopUp dataObject error : data of dataObject is in discord with type of dataObject!!");p=u.data}break;case"array":p=u.data}WebSquare.util.setData(m,p),WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.setDataObject(u),p&&WebSquare.strictModeFrame._dataObject&&!WebSquare.strictModeFrame._dataObject.data&&(WebSquare.strictModeFrame._dataObject.data=p),WebSquare.strictModeFrame.options.popupParam=g.charAt(0)+m)}}catch(t){h.Y.printStackTrace(t,null,this)}if(void 0!==i&&null!=i&&""!=i&&void 0!==s&&null!=s&&""!=s){try{if(r=i.indexOf("data:")>-1){var v=i.wq_replaceAll("data:",""),w=t.WebSquare.util.getComponentById(v);if(w)switch(w.initializeType){case"dataList":i=w.getAllJSON();break;case"dataMap":i=w.getJSON()}}else{var S=t.WebSquare.ModelUtil.findSerializedNode(i);i=WebSquare.xml.parse(S).documentElement}}catch(t){h.Y.printStackTrace(t)}try{if(r){var _=s.wq_replaceAll("data:",""),C=WebSquare.util.getComponentById(_);if(!C)return void $l("Error! : No match data. Must be the same as a srcDataType, a destDataType!["+_+"]")}else e=WebSquare.ModelUtil.findInstanceNode(s)}catch(t){h.Y.printStackTrace(t)}
if(r&&void 0!==i&&null!=i)C.setJSON(i,!0);else if(void 0!==e&&null!=e&&void 0!==i&&null!=i){for(var x=e.childNodes,I=i.childNodes,T=x.length-1;T>=0;T--)e.removeChild(x.item(T));if(d.browserCheck.ieAllVersion&&l.Q.useActiveXObject){var k=I.length-1;for(T=0;T<=k;T++)WebSquare.xml.appendChild(e,I[0])}else for(T=0;T<=I.length-1;T++)WebSquare.xml.appendChild(e,I[T]);var L=WebSquare.ModelUtil.getModelByID(t.WebSquare.destModelID);WebSquare.WebSquaredoc.unrender(t.WebSquare.destData),L.refresh()}}}}catch(t){h.Y.printStackTrace(t,null,this)}},d._initDataObject=function(){try{if(window.parent!==window.self&&null!=WebSquare._dataObject){var t=WebSquare._dataObject.name;if(t){var e=WebSquare._dataObject.type,i=WebSquare._dataObject.data.slice(0);switch(e){case"json":case"array":i=JSON.parse(i);break;case"xml":i=WebSquare.xml.parse(i)}WebSquare.util.setData(t,i)}}}catch(t){h.Y.crossOrigin({message:t.message,name:"initDataObject"})}},d._createGlobalVariable=function(t){try{var e=d._getGlobalVariable(t);if(e)for(var i=e.split(","),o=0;o<i.length;o++){var s="string"==typeof i[o]&&i[o].wq_trim();try{if(null!=window[s]&&!WebSquare.util.isEmptyObject(window[s]))throw{message:"variable auto creation error : ["+s+"] already exist!"};window[s]={},window[s][WebSquare.noConflict]=WebSquare.api,window[s][WebSquare.noConflict].id="";var r=o>0?String(o):"";window[WebSquare.noConflictFunction+r]=window[s][WebSquare.noConflict]}catch(t){h.Y.printStackTrace(t,null)}}}catch(t){h.Y.printStackTrace(t,null,this)}},d._getGlobalVariable=function(t){try{var e=d.getConfiguration("/WebSquare/spa/variable/@value")||"scwin",i=d.getConfiguration("/WebSquare/spa/variable/@clone")||"";return t&&i&&(e+=","+i),e}catch(t){h.Y.printStackTrace(t,null,this)}},d._controlInvoker=function(t,e,i){try{var o;return WebSquare.uiplugin[t]&&(o=i?i.constructor===Array?WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],i):WebSquare.uiplugin[t][e].apply(WebSquare.uiplugin[t][e],[i]):WebSquare.uiplugin[t][e]()),o}catch(t){h.Y.printStackTrace(t,null,this)}},d._isSinglePage=function(t){try{return!(WebSquare.uiplugin.wframe&&(WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>1||WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>1))}catch(t){h.Y.printStackTrace(t,null,this)}},d._fireParentOnload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeload()}catch(t){h.Y.crossOrigin({message:t.message,name:"oniframeload"})}},d._fireParentOnunload=function(){try{null!=window.frameElement&&window.parent!==window.self&&null!=window.parent.WebSquare&&parent.window[WebSquare.noConflict].comp[window.frameElement.id].fireIframeunload()}catch(t){h.Y.crossOrigin({message:t.message,name:"oniframeload"})}},d._loadMsaServer=function(){try{var t=l.Q.configurationJSON[0].WebSquare.msaServer;if(null!=t){var e=t.msa;if(!e)return;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],s=o["@baseURI"],r=o["@w2xHome"],a=o["@baseServletURI"],n=o["@contextRoot"],c=o["@name"],u=o["@origin"];!u&&o["@baseUrl"]&&(u=o["@baseUrl"]),d._msaServerHash[c]={origin:u,baseURI:s,w2xHome:r,baseServletURI:a,contextRoot:n}}}}catch(t){h.Y.printStackTrace(t,null,this)}},d._loadMsaStylesheet=function(){try{var t=l.Q.configurationJSON[0].WebSquare.msaStylesheet;if(null!=t){var e=t.module;if(!e)return;e.constructor!==Array&&(e=[e]);for(var i=0;i<e.length;i++){var o=e[i],s=o["@src"],r={msaName:o["@msaServerName"]},a=d._getMsaSrc(s,r);"string"==typeof a&&a&&n.q.styleSheetEarlyImportList.push(a)}}}catch(t){h.Y.printStackTrace(t,null,this)}},d._loadProjectCommon=(0,s.A)(a().mark((function t(){var e,i,o,s,r,n,c,u,p,g,m,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,null!=(e=l.Q.configurationJSON[0].WebSquare.projectCommon)){t.next=5;break}return t.abrupt("return");case 5:if(i=d.projectCommonVariable,o=e.module){t.next=9;break}
return t.abrupt("return");case 9:for(o.constructor!==Array&&(o=[o]),window[i]||(window[i]={}),s=[],r=[],n=0;n<o.length;n++)c=o[n],u=c["@src"],p=c["@name"].slice(i.length+1),g=c["@spaCache"],d._projectCommonHash[p],(m=WebSquare.jsLoader._loadObj(u))instanceof window.Promise&&(s.push(m),f={name:p,src:u,spaCache:g},r.push(f));return t.next=16,d._loadWebSquareCommon("projectCommon",s,r);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),h.Y.printStackTrace(t.t0,null,this);case 21:case"end":return t.stop()}}),t,this,[[1,18]])}))),d._loadMsaCommon=(0,s.A)(a().mark((function t(){var e,i,o,s,r,n,c,u,p,g,m,f,b,y,v;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,null!=(e=l.Q.configurationJSON[0].WebSquare.msaCommon)){t.next=5;break}return t.abrupt("return");case 5:for(i=d.projectCommonVariable,window[i]||(window[i]={}),(o=e.module).constructor!==Array&&(o=[o]),s=[],r=[],n=0;n<o.length;n++)c=o[n],u=c["@src"],p=c["@name"].slice(i.length+1),g=c["@msaServerName"],m=c["@spaCache"],d._msaHash[p]||d._projectCommonHash[p],f={msaName:g},b=d.getURL(u,f),(y=WebSquare.jsLoader._loadObj(b,f))instanceof window.Promise&&(s.push(y),v={name:p,src:u,spaCache:m},r.push(v));return t.next=14,d._loadWebSquareCommon("msa",s,r);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),h.Y.printStackTrace(t.t0,null,this);case 19:case"end":return t.stop()}}),t,this,[[1,16]])}))),d._loadWebSquareCommon=function(t,e,i){try{return Promise.allSettled(e).then(function(){var e=(0,s.A)(a().mark((function e(o){var s,r,l,h,c,u,p,g,m,f,b,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=function(t,e,i){if("string"==typeof t&&t){for(var o=t.split(","),s={},r=0;r<o.length;r++){var a=o[r].wq_trim("").replace(e+".","");s[a]=i[a]}return s}},r=d.projectCommonVariable,l=0;case 3:if(!(l<o.length)){e.next=42;break}if("fulfilled"===o[l].status&&o[l].value){e.next=6;break}return e.abrupt("continue",39);case 6:h=o[l].value,c=i[l].name,u=i[l].src,p=r+"."+c,g=n.q.uiplugin.wframe._createEmptyFrame(p),WebSquare.WebSquareparser.parseModels(h,g),WebSquare.WebSquareparser.parseDataCollections(h,g),WebSquare.WebSquareparser.parseMessageBroker(h,g),m="scwin";try{m=n.q.strictModeFrame.options.scopeVariable.split(",")[0]}catch(t){m="scwin"}for((f=g.scope)[m]={},b=WebSquare.jsonUtil.getNodesByTagName(h,"script"),y=0;y<b.length;y++)v=b[y],"function"==typeof(w=WebSquare.jsonUtil.getCDataNodeValue(v))&&w(f);for(S=f[m],(_=WebSquare.Elem.api.getElementsByTagName(h,"publicInfo",d._XML_NAMESPACE.W2)[0])&&(C={},x=s(_.getAttribute("method"),m,S),I=s(_.getAttribute("component"),m,f),T=s(_.getAttribute("submission"),m,f),(x||I||T)&&(n.q.extend(C,x),n.q.extend(C,I),n.q.extend(C,T),S=C)),k=c.split("."),L=window[r];k.length>1;)A=k.shift(),L[A]||(L[A]={}),L=L[A];if(L[k[0]]?n.q.extend(L[k[0]],S):L[k[0]]=S,(W=WebSquare.Elem.api.getElementsByTagName(h,"body",d._XML_NAMESPACE.XHTML)[0])&&(q=W.getAttribute("ev:onpageload")||"",M=q.replace(m+".",""),D=f[m][M]),(E="msa"===t?d._msaHash:d._projectCommonHash)[c]={projectVar:r,projectSrc:u},WebSquare.util.getBoolean(i[l].spaCache)&&(E[c].spaCache=!0),"function"!=typeof D){e.next=39;break}if("executed"!==WebSquare.scriptSectionExcuteFlag){e.next=38;break}return e.next=36,D();case 36:e.next=39;break;case 38:d._onpageloadArr.push(D);case 39:l++,e.next=3;break;case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){h.Y.printStackTrace(t)}))}catch(t){h.Y.printStackTrace(t,null,this)}},d._getParentObj=function(){try{var t;return null!=window.opener?t=opener:window.parent!==window.self&&(t=parent),t}catch(t){h.Y.printStackTrace(t,null,this)}return t},d._getMsaOption=function(t,e){try{var i={};for(var o in t&&("function"==typeof t._getMsaName&&(i.msaName=t._getMsaName()),t.options&&(i.tempHome=t.options.udcHome)),e)i[o]=e[o];return i}catch(t){h.Y.printStackTrace(t,null,this)}return i},d._getMsaSrc=function(t,e){try{var i=""
;void 0!==e&&null!=e||(e={});var o,s="getURL";if("image"===e.type&&(s="getImageURL",t.startsWith("data:")))return t;"string"==typeof e.msaName&&e.msaName&&(o=d._msaServerHash[e.msaName]);var r=e.frameObj;if(o)i=d[s](t,e);else if(r&&null!=WebSquare.idCache[r.uuid]&&r.options&&("wframe"===r.options.pluginName||"pageFrame"===r.options.pluginName)){e.tempHome=r.options.udcHome;var a=t,n=r._getMsaName();if(o=d._msaServerHash[n]){var l="";"image"===e.type&&"url("===a.slice(0,4)&&(l="url(",a=a.slice(4)),!0===e.absolutePath||"string"!=typeof a||a.startsWith("/")||a.startsWith("\\")||a.indexOf("://")>=0||e.tempHome||(a=l+r._getMsaHome()+a),e.msaName=n}else!0===e._force&&!0===e.baseServletURI&&(e.baseURI=!1);i=d[s](a,e)}else"string"==typeof e.tempHome&&e.tempHome?(!0===e._force&&!0===e.baseServletURI&&(e.baseURI=!1),i=d[s](t,e)):!0===e._force?(!0===e.baseServletURI&&(e.baseURI=!1),i=d[s](t,e)):i=d[s](t);return i}catch(t){h.Y.printStackTrace(t,null,this)}},d._scopingCommon=function(t,e,i){try{var o="WebSquare.core.commonCache."+e;return o+"= function(scopeObj){\nvar "+e+"; var ret;"+WebSquare.util.scopingFuncBody(t+"\nret = "+e+";","scopeObj","scopeObj")+"\nreturn ret;}"+(i?"\nwindow."+e+"="+o+'({"scope":{}});':"")}catch(t){h.Y.printStackTrace(t,null,this)}},d._copyCommon=function(t,e){try{var i=d.commonCache[t];if("function"!=typeof i){var s=window[t];if(!s)return{};var r="var "+t+" = ";r+=(a=s,n="_@#wq#@_",c=[],JSON.stringify(a,(function(t,e){return null==e?e:e===window?"window":e===window.opener?"opener":e===window.parent?"parent":e===window.top?"top":"function"==typeof e||"object"===(0,o.A)(e)&&e.constructor===RegExp?(c.push(e),n):e})).replace(new RegExp('"'+n+'"',"g"),(function(t){return c.shift()}))),l.Q.globalEval(d._scopingCommon(r,t)),i=d.commonCache[t]}return i(e)}catch(t){h.Y.printStackTrace(t,null,this)}var a,n,c},d._makeDetail=function(t){try{return{src:n.q.w2xPath||"",id:n.q.strictModeFrame?n.q.strictModeFrame.id:"",log:t||""}}catch(t){h.Y.printStackTrace(t,null,this)}},d._getWpackUrl=function(t,e){try{var i=!0===e||"string"==typeof e&&"true"===e.toLowerCase();i||(d._parseWpackConfig(),i=d._checkCommonPath(t)),i&&(t=WebSquare.jsLoader.getUri(t,{skipSrcExtension:!0}))}catch(t){h.Y.printStackTrace(t,null,this)}finally{return t}},d._parseWpackConfig=function(t,e){try{if(null!=d._commonPath)return;var i=d.getChildConfiguration("/WebSquare/wpack/commonPath",{singleMode:!0});d._commonPath={file:{},dir:[]};for(var o=0;o<i.length;o++){var s=i[o]["@src"];if("string"==typeof s&&s)if(".js"===s.slice(-3))d._commonPath.file[s]=!0;else{var r="/"===s.charAt(s.length-1)?"":"/";d._commonPath.dir.push(s+r)}}}catch(t){h.Y.printStackTrace(t,null,this)}finally{return t}},d._checkCommonPath=function(t){try{if("string"!=typeof t||".js"!==t.slice(-3))return!1;var e=d._shortenURL(t);if(!0===d._commonPath.file[e])return!0;for(var i=0;i<d._commonPath.dir.length;i++){var o=d._commonPath.dir[i];if(e.slice(0,o.length)===o)return!0}return!1}catch(t){h.Y.printStackTrace(t,null,this)}},d._shortenURL=function(t){try{if("string"!=typeof t)return t;for(var e=t.split("/"),i=[],o=0;o<e.length;o++){var s=e[o];".."===s?i.pop():"."!==s&&i.push(s)}var r=i.join("/");for(var a in d._msaServerHash){var n=d._msaServerHash[a];n&&n.origin&&(r=r.replace(n.origin,""))}var l=d.getConfiguration("/WebSquare/wpack/contextRoot/@value")||"/";if("/"===l.charAt(l.length-1)&&(l=l.slice(0,l.length-1)),l){var c=new RegExp("^"+l);r=r.replace(c,"")}return r}catch(e){return h.Y.printStackTrace(e,null,this),t}},d._emptyFunction=function(){},d._removeObject=function(t,e){try{void 0!==e&&null!=e||(e={});var i=null!=window.Proxy&&"function"==typeof Object.setPrototypeOf&&"function"==typeof Object.getPrototypeOf;if(i||"string"==typeof e.directKey){for(var o=Object.keys(t),s=[],r=o.length,a=0;a<r;a++)try{"function"==typeof t[o[a]]?t[o[a]]=d._emptyFunction:(delete t[o[a]],s.push(o[a]))}catch(e){delete t[o[a]]}if(i){var n=new window.Proxy({key:s},{get:function(t,e,i){
return"_removed"===e||(t.key.indexOf(e)>=0?void 0:new Function(""))}});Object.setPrototypeOf(t,n)}else for(var l=e.directKey.split(","),c=0;c<l.length;c++){var u=l[c];"function"==typeof t[u]&&(t[u]=d._emptyFunction)}}else for(var c in t)try{"function"==typeof t[c]?t[c]=function(){}:delete t[c]}catch(e){delete t[c]}t._removed=!0}catch(t){h.Y.printStackTrace(t)}},d._hasScope=function(t){try{return t&&t.options&&!0==={wframe:!0,pageInherit:!0,udc2:!0,pageFrame:!0}[t.options.pluginName]}catch(t){h.Y.printStackTrace(t)}},d._scopeOption=function(t,e){try{if(!(t&&e&&t.options&&t.options[e]&&t.scope_id))return;var i=t.scope_generator_id||t.scope_id,o=WebSquare.util.getComponentById(t.options[e],i);null!=o&&(o._wqContent&&o._wqContent._isUDC2?t.options[e]=o._wqContent.id:t.options[e]=o.id)}catch(t){h.Y.printStackTrace(t)}},d._scopeOptionApply=function(t,e){try{if(!(t&&e&&t.render&&t.options&&t.options[e]))return;var i=WebSquare.util.getComponentById(t.options[e],t.scope_id)||null;if(null==i)return;i.udc2Parent&&(i=i.udc2Parent);var o="function"==typeof i.getAccessibiltyId?i.getAccessibiltyId():t.options[e];t.render.setAttribute(e,o)}catch(t){h.Y.printStackTrace(t)}},d._safeInnerHTML=function(t,e){try{if(!(t instanceof HTMLElement))return;if("string"!=typeof e&&(e=""),e.indexOf("<")>=0){t.textContent="";var i="wq-safescr";if(e=e.replace(/<\s*script/gi,"<"+i).replace(/\s*\/\s*script\s*>/gi,"/"+i+">"),location.hostname!==window.document.domain){var o=document.createElement("div");for(o.innerHTML=e;o.firstChild;)t.appendChild(o.firstChild)}else for(var s=(new DOMParser).parseFromString(e,"text/html").body,r=0;r<s.childNodes.length;r++){var a=s.childNodes[r];1===a.nodeType&&"SCRIPT"===a.tagName.toUpperCase()||t.appendChild(a.cloneNode(!0))}}else t.textContent=e}catch(i){try{t.innerHTML=e}catch(t){h.Y.printStackTrace(t)}}},d._handleWindowLoaded=function(t,e){try{var i=function(){var i={uuid:t,_wq_type:"onwindowmousedown"};window.parent.postMessage(i,e)},o=function(i){var o={uuid:t,_wq_type:"onwindowkeyup",keyCode:i.charCode?i.charCode:i.keyCode};window.parent.postMessage(o,e)};WebSquare.util.fullViewed&&WebSquare.util.zoomed(document.body,"1"),e||(e=void 0),document.addEventListener&&!WebSquare.util.isIE()?(document.addEventListener("mousedown",i),document.addEventListener("keyup",o)):document.attachEvent&&(document.attachEvent("onmousedown",i),document.attachEvent("onkeyup",o))}catch(t){h.Y.printStackTrace(t,null)}},d._handleIframeLoaded=function(){try{for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var i=WebSquare.util.getComponentById(t[e].id);i&&i.options&&"iframe"===i.options.pluginName&&i._postDataObject()}}catch(t){h.Y.printStackTrace(t,null)}},d._getOrigin=function(t){try{if("string"!=typeof t)return;return t.indexOf("://")>-1||"*"===t.wq_trim()?t:void 0}catch(t){h.Y.printStackTrace(t,null)}},d._getContextRootUri=function(t){try{var e=t;if(n.q._contextRoot&&"string"==typeof t){var i=new RegExp("^"+n.q._contextRoot);t.match(i)||(e=(n.q._contextRoot+"/"+t).replace(/\/+/g,"/"))}return e}catch(t){return h.Y.printStackTrace(t,null),e}},d._jsonParse=function(t){var e=t;try{"string"==typeof t&&""!==t&&(e=JSON.parse(t)),"object"!==(0,o.A)(e)&&(e=t)}catch(t){WebSquare.logger.printLog(t.message)}return e},d._jsonStringify=function(t){var e=t;try{"object"===(0,o.A)(t)&&null!=t&&(e=JSON.stringify(t))}catch(t){WebSquare.logger.printLog(t.message)}return e},d._linkProperties=function(t,e){try{for(var i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||("object"!==(0,o.A)(t[i])&&"function"!=typeof t[i]||null===t[i]?function(i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},configurable:!0,enumerable:!0})}(i):e[i]=t[i]))}catch(t){h.Y.printStackTrace(t)}}},996:function(t,e,i){"use strict";i.d(e,{p:function(){return g}});var o=i(467),s=i(2284),r=i(4756),a=i.n(r),n=i(5461),l=i(5375),h=i(8971),d=i(2256),c=i(1204),u=i(3406),p=i(8683),g={_onRequest:!1,_requestUrl:n.q.baseServletURI+"serverTime.wq",
_checkLocalTime:{gTime:-1,time:-1,interval:1e3,diffMax:12e4,gDiffMax:12e4,refresh:!1,cnt:0,pendingCnt:0,pendingMaxCnt:1e3},toTimestampString:function(t){return p.Q.fillZero(t.getFullYear(),4)+"-"+p.Q.fillZero(t.getMonth()+1,2)+"-"+p.Q.fillZero(t.getDate(),2)+" "+p.Q.fillZero(t.getHours(),2)+":"+p.Q.fillZero(t.getMinutes(),2)+":"+p.Q.fillZero(t.getSeconds(),2)+"."+p.Q.fillZero(t.getMilliseconds(),3)+"000"},_parseDate:function(t,e){if(void 0!==e&&null!=e&&""!=e||(e="yyyyMMdd"),(t=c.Z.getDate(t)).length!=e.length)return t;for(var i=["","","","","",""],o=0;o<e.length;o++){var s=e.charAt(o),r=t.charAt(o);switch(s){case"y":i[0]+=r;break;case"M":i[1]+=r;break;case"d":i[2]+=r;break;case"H":i[3]+=r;break;case"m":i[4]+=r;break;case"s":i[5]+=r}}for(o=0;o<i.length;o++)0===o?p.Q.fillZero(i[o],4):p.Q.fillZero(i[o],2);return i},parseDate:function(t,e){var i=g._parseDate(t,e);if("string"==typeof i)return null;var o=i[0]||0,s=i[1]-1==-1?0:i[1]-1,r=i[2]||1,a=i[3]||0,n=i[4]||0,l=i[5]||0;return new Date(o,s,r,a,n,l)},dateDiff:function(t,e,i){void 0!==i&&null!=i||(i={}),t+="",e+="",t=c.Z.getDate(t),e=c.Z.getDate(e),8!=t.length&&alert(u.B.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(u.B.getMessage("E_date_ShouldBeNumberFormat",t)),8!=e.length&&alert(u.B.getMessage("E_date_ShouldBeyyMMddFormat",e)),isNaN(e)&&alert(u.B.getMessage("E_date_ShouldBeNumberFormat",e));var o=parseInt(t.substring(0,4),10),s=parseInt(t.substring(4,6),10),r=parseInt(t.substring(6,8),10),a=parseInt(e.substring(0,4),10),n=parseInt(e.substring(4,6),10),l=parseInt(e.substring(6,8),10),h=g.getMaxMinYear(),d=h.maxYear,p=h.minYear;if(o>d||o<p)alert(u.B.getMessage("E_date_YearRange",p,d,o));else if(s>12||s<1)alert(u.B.getMessage("E_date_MonthRange","1","12",s));else if(r>31||r<1)alert(u.B.getMessage("E_date_DayRange","1","31",r));else if(a>d||a<p)alert(u.B.getMessage("E_date_YearRange",p,d,a));else if(n>12||n<1)alert(u.B.getMessage("E_date_MonthRange","1","12",n));else{if(!(l>31||l<1)){if("month"==i.returnType)return 12*(a-o)+(n-s);var m=Date.UTC(o,s-1,r);return(Date.UTC(a,n-1,l)-m)/864e5}alert(u.B.getMessage("E_date_DayRange","1","31",l))}},dateAdd:function(t,e){t+="",8!=(t=c.Z.getDate(t)).length&&alert(u.B.getMessage("E_date_ShouldBeyyMMddFormat",t)),isNaN(t)&&alert(u.B.getMessage("E_date_ShouldBeNumberFormat",t));var i=parseInt(t.substring(0,4),10),o=parseInt(t.substring(4,6),10),s=parseInt(t.substring(6,8),10),r=g.getMaxMinYear(),a=r.maxYear,n=r.minYear;if(i>a||i<n)alert(u.B.getMessage("E_date_YearRange",n,a,i));else if(o>12||o<1)alert(u.B.getMessage("E_date_MonthRange","1","12",o));else{if(!(s>31||s<1)){var l=Date.UTC(i,o-1,s)+864e5*e,h=new Date;return h.setTime(l),p.Q.fillZero(h.getUTCFullYear()+"",4)+p.Q.fillZero(h.getUTCMonth()+1+"",2)+p.Q.fillZero(h.getUTCDate()+"",2)}alert(u.B.getMessage("E_date_DayRange","1","31",s))}},dateTimeAdd:function(t,e,i,o,s,r){var a,n=r||{};if(t+="",t=c.Z.getDate(t),void 0===i&&(i="day"),"time"===o?s?6!=t.length&&(a=u.B.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"hour"===i||"minute"===i?4!=t.length&&(a=u.B.getMessage("E_date_minute_ShouldBeHHmmFormat",t)):"second"===i&&6!=t.length&&(a=u.B.getMessage("E_date_minute_ShouldBeHHmmssFormat",t)):"day"==i?8!=t.length&&(a=u.B.getMessage("E_date_ShouldBeyyMMddFormat",t)):"month"==i?6!=t.length&&(a=u.B.getMessage("E_date_month_ShouldBeyyMMFormat",t)):"hour"==i?10!=t.length&&(a=u.B.getMessage("E_date_hour_ShouldBeyyMMddHHFormat",t)):"minute"==i&&12!=t.length&&(a=u.B.getMessage("E_date_minute_ShouldBeyyMMddmmFormat",t)),isNaN(t)&&(a=u.B.getMessage("E_date_ShouldBeNumberFormat",t)),a)!1!==n.useAlert&&alert(a);else{var l,h,d;"time"==o?s?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),_=parseInt(t.substring(4,6),10)):"hour"===i||"minute"===i?(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10)):"second"===i&&(w=parseInt(t.substring(0,2),10),T=parseInt(t.substring(2,4),10),_=parseInt(t.substring(4,6),10)):(l=parseInt(t.substring(0,4),10),
h=parseInt(t.substring(4,6),10),d=parseInt(t.substring(6,8),10),w=parseInt(t.substring(8,10),10),T=parseInt(t.substring(10,12),10));var m=g.getMaxMinYear(),f=m.maxYear,b=m.minYear;(l>f||l<b)&&(a=u.B.getMessage("E_date_YearRange",b,f,l)),(h>12||h<1)&&(a=u.B.getMessage("E_date_MonthRange","1","12",h));var y=31;if(2==h?y=l%400==0||l%4==0&&l%100!=0?29:28:4!=h&&6!=h&&9!=h&&11!=h||(y=30),d>y||d<1?a=u.B.getMessage("E_date_DayRange","1",y,d):w>23||w<0?a=u.B.getMessage("E_date_HourRange","0","23",w):T>59||T<0?a=u.B.getMessage("E_date_MinuteRange","0","59",T):(_>59||_<0)&&(a=u.B.getMessage("E_date_SecondRange","0","59",_)),!a){if("time"===o){if(s){var v="";"hour"==i?v=36e5:"minute"==i?v=6e4:"second"==i&&(v=1e3);var w=Date.UTC(1900,1,1,w,T,_)+e*v;(T=new Date).setTime(w);var S=p.Q.fillZero(p.Q.fillZero(T.getUTCHours()+"",2)+p.Q.fillZero(T.getUTCMinutes()+"",2)+p.Q.fillZero(T.getUTCSeconds()+"",2))}else if("hour"==i)if(e&&"string"==typeof e&&4===e.length){var _=parseInt(e.substring(0,2),10),C=parseInt(e.substring(2,4),10);v=6e4,w=Date.UTC(1900,1,1,w,T)+60*_*60*1e3+C*v;(T=new Date).setTime(w);var x=T.getUTCDate(),I=x>1?parseInt(T.getUTCHours(),10)+24*(x-1):T.getUTCHours();S=p.Q.fillZero(p.Q.fillZero(I+"",2)+p.Q.fillZero(T.getUTCMinutes()+"",2))}else{v=36e5,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=p.Q.fillZero(p.Q.fillZero(T.getUTCHours()+"",2)+p.Q.fillZero(T.getUTCMinutes()+"",2))}else if("minute"==i){v=6e4,w=Date.UTC(1900,1,1,w,T)+e*v;(T=new Date).setTime(w);S=p.Q.fillZero(p.Q.fillZero(T.getUTCHours()+"",2)+p.Q.fillZero(T.getUTCMinutes()+"",2))}else if("second"==i){var T;v=1e3,w=Date.UTC(1900,1,1,w,T,_)+e*v;(T=new Date).setTime(w);S=p.Q.fillZero(p.Q.fillZero(T.getUTCHours()+"",2)+p.Q.fillZero(T.getUTCMinutes()+"",2)+p.Q.fillZero(T.getUTCSeconds()+"",2))}}else if("day"==i){v=864e5;var k=Date.UTC(l,h-1,d)+e*v;(D=new Date).setTime(k);S=p.Q.fillZero(D.getUTCFullYear()+"",4)+p.Q.fillZero(D.getUTCMonth()+1+"",2)+p.Q.fillZero(D.getUTCDate()+"",2)}else if("month"==i){v=864e5;var L=0;if(e>0)for(var A=h-1;A<h-1+e;A++)L+=(32-new Date(l+A/12|0,A%12,32).getDate())*v;else{for(A=h-2;A>h-2+e;A--){L+=(32-new Date(l+(A<0?A%12!=0?(A/12|0)-1:A/12|0:0),A<0?A%12!=0?A%12+12:0:A%12,32).getDate())*v}L*=-1}k=Date.UTC(l,h-1)+L;(D=new Date).setTime(k);S=p.Q.fillZero(D.getUTCFullYear()+"",4)+p.Q.fillZero(D.getUTCMonth()+1+"",2)}else if("hour"==i){v=36e5,k=Date.UTC(l,h-1,d,w)+e*v;(D=new Date).setTime(k);S=p.Q.fillZero(D.getUTCFullYear()+"",4)+p.Q.fillZero(D.getUTCMonth()+1+"",2)+p.Q.fillZero(D.getUTCDate()+"",2)+p.Q.fillZero(D.getUTCHours()+"",2)}else if("minute"==i){var D;v=6e4,k=Date.UTC(l,h-1,d,w,T)+e*v;(D=new Date).setTime(k);S=p.Q.fillZero(D.getUTCFullYear()+"",4)+p.Q.fillZero(D.getUTCMonth()+1+"",2)+p.Q.fillZero(D.getUTCDate()+"",2)+p.Q.fillZero(D.getUTCHours()+"",2)+p.Q.fillZero(D.getUTCMinutes()+"",2)}else if("year"==i)return p.Q.fillZero(l+e+"",4);return S}!1!==n.useAlert&&alert(a)}},isValidDate:function(t,e,i){e=c.Z.getDate(e);function o(t,e,i){!0===i.useAlert&&alert(t);try{e.focus(),e.select()}catch(t){h.Y.printStackTrace(t)}var o=!1;return"boolean"===i.returnType?o:{result:o,message:t}}if((i=i||{}).useAlert=i.useAlert||!0,i.returnType=i.returnType||"boolean",i.useAlert=c.Z.getBoolean(i.useAlert),i.returnType=i.returnType.toLowerCase(),null==e||8!=e.length)return o(u.B.getMessage("E_date_ShouldBeyyMMddFormat",e),t,i);if(isNaN(e))return o(u.B.getMessage("E_date_ShouldBeNumberFormat",e),t,i);var s=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),a=parseInt(e.substring(6,8),10);if(r<1||r>12)return o(u.B.getMessage("E_date_MonthRange","1","12",r),t,i);var n=31;return 2==r?n=s%400==0||s%4==0&&s%100!=0?29:28:4!=r&&6!=r&&9!=r&&11!=r||(n=30),a<1||a>n?o(u.B.getMessage("E_date_DayRange","1",n,a),t,i):"boolean"===i.returnType||{result:!0}},getFormattedDate:function(t,e){var i=null;if("string"==typeof t){var o=e.replace(/[^yMdHms]/g,"");t=g.parseDate(t,o)}if("object"!==(0,s.A)(t)||null==t)return null
;if(void 0===e||null==e||""==e)i=t.getTime()+"";else{var r=-1;if((r=e.indexOf("yyyy"))>-1){var a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getFullYear()+"",4),r+4<e.length&&(a+=e.substring(r+4,e.length)),e=a}if((r=e.indexOf("YYYY"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getFullYear()+"",4),r+4<e.length&&(a+=e.substring(r+4,e.length)),e=a}if((r=e.indexOf("yy"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero((t.getFullYear()+"").substr(2,2)+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}if((r=e.indexOf("MM"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getMonth()+1+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}else e.indexOf("M")>-1&&(e=e.replace(/M/,t.getMonth()+1));if((r=e.indexOf("dd"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getDate()+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}else e.indexOf("d")>-1&&(e=e.replace(/d/,t.getDate()));if((r=e.indexOf("HH"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getHours()+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}if((r=e.indexOf("hh"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getHours()+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}if((r=e.indexOf("mm"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getMinutes()+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}if((r=e.indexOf("ss"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getSeconds()+"",2),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}if((r=e.indexOf("SSS"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=p.Q.fillZero(t.getMilliseconds()+"",3),r+3<e.length&&(a+=e.substring(r+3,e.length)),e=a}if((r=e.indexOf("EEEE"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=u.B.getMessage("F_dateFormat_daynames_full").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()],r+4<e.length&&(a+=e.substring(r+4,e.length)),e=a}if((r=e.indexOf("E"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=u.B.getMessage("F_dateFormat_daynames_abbr").split(",")[new Date(t.getFullYear(),t.getMonth(),t.getDate()).getUTCDay()];for(var n=1,l=r+1;"E"===e.charAt(l);l++)n++;r+n<e.length&&(a+=e.substring(r+n,e.length)),e=a}if((r=e.indexOf("ww"))>-1){a="";r>0&&(a+=e.substring(0,r)),a+=g.getWeek(t),r+2<e.length&&(a+=e.substring(r+2,e.length)),e=a}i=e}return i},getIOFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;var o=e;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),"yearMonthDate"==i){var s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6);t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)}else if("yearMonth"==i){s=t.substring(0,4),r=t.substring(4,6);t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)}else if("yearMonthDateHour"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8);var n=t.substring(8,10);t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)}else if("yearMonthDateTime"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8),n=t.substring(8,10);var l=t.substring(10,12);t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)).replace(/mm/g,l)}else if("yearMonthDateTimeSec"==i){s=t.substring(0,4),r=t.substring(4,6),a=t.substring(6,8),n=t.substring(8,10),l=t.substring(10,12);var d=t.substring(12,14);t=(t=(t=(t=(t=(t=o.replace(/yyyy/gi,s)).replace(/MM/g,r)).replace(/dd/gi,a)).replace(/HH/gi,n)).replace(/mm/g,l)).replace(/SS/gi,d)}return t}catch(t){h.Y.printStackTrace(t,null,this)}},getIOUnFormatDate:function(t,e,i){try{if(t.length!==e.length)return t;if(i||(8==t.length?i="yearMonthDate":6==t.length?i="yearMonth":10==t.length?i="yearMonthDateHour":12==t.length?i="yearMonthDateTime":14==t.length&&(i="yearMonthDateTimeSec")),"yearMonthDate"==i){var o=t.substr(e.indexOf("y"),4),s=p.Q.fillZero(t.substr(e.indexOf("M"),2),2),r=p.Q.fillZero(t.substr(e.indexOf("d"),2),2);t=o+s+r
}else if("yearMonth"==i){o=t.substr(e.indexOf("y"),4),s=p.Q.fillZero(t.substr(e.indexOf("M"),2),2);t=o+s}else if("yearMonthDateHour"==i){o=t.substr(e.indexOf("y"),4),s=p.Q.fillZero(t.substr(e.indexOf("M"),2),2),r=p.Q.fillZero(t.substr(e.indexOf("d"),2),2);var a=p.Q.fillZero(t.substr(e.indexOf("H"),2),2);t=o+s+r+a}else if("yearMonthDateTime"==i){o=t.substr(e.indexOf("y"),4),s=p.Q.fillZero(t.substr(e.indexOf("M"),2),2),r=p.Q.fillZero(t.substr(e.indexOf("d"),2),2),a=p.Q.fillZero(t.substr(e.indexOf("H"),2),2);var n=p.Q.fillZero(t.substr(e.indexOf("m"),2),2);t=o+s+r+a+n}else if("yearMonthDateTimeSec"==i){o=t.substr(e.indexOf("y"),4),s=p.Q.fillZero(t.substr(e.indexOf("M"),2),2),r=p.Q.fillZero(t.substr(e.indexOf("d"),2),2),a=p.Q.fillZero(t.substr(e.indexOf("H"),2),2),n=p.Q.fillZero(t.substr(e.indexOf("m"),2),2);var l=p.Q.fillZero(t.substr(e.indexOf("S"),2),2);t=o+s+r+a+n+l}return t}catch(t){h.Y.printStackTrace(t,null,this)}},_getDay:function(t,e){t+="";var i=parseInt(t.slice(0,4)),o=t.slice(4,6);o=0==o.charAt(0)?parseInt(o.charAt(1)):parseInt(o);var s=t.slice(6,8);if(s=0==s.charAt(0)?parseInt(s.charAt(1)):parseInt(s),i<1900)return e&&alert(u.B.getMessage("Date_err_1900")),-1;if(o<0||o>12)return e&&alert(u.B.getMessage("Date_err_12")),-1;if(s<0||s>31)return e&&alert(u.B.getMessage("Date_err_31")),-1;if(2==o&&s>28){if((i%4!=0||i%100==0)&&i%400!=0)return e&&alert(u.B.getMessage("Date_err_28")),-1;if(s>29)return e&&alert(u.B.getMessage("Date_err_29")),-1}if((4==o||6==o||9==o||11==o)&&s>30)return e&&alert(u.B.getMessage("DatePicker_monthNames").split(",")[o-1]+u.B.getMessage("Date_err_30")),-1;var r=o;1==o&&(r=13,i-=1),2==o&&(r=14,i-=1);var a=s+2*r+i+parseInt(3*(r+1)/5,10)+parseInt(i/4,10)-parseInt(i/100,10)+parseInt(i/400,10)+2;return a-7*parseInt(a/7,10)},getDay:function(t){switch(this._getDay(t,!0)){case 0:return WebSquare.language.getMessage("Calendar_weekdaynames_6")||"Saturday";case 1:return WebSquare.language.getMessage("Calendar_weekdaynames_0")||"Sunday";case 2:return WebSquare.language.getMessage("Calendar_weekdaynames_1")||"Monday";case 3:return WebSquare.language.getMessage("Calendar_weekdaynames_2")||"Tuesday";case 4:return WebSquare.language.getMessage("Calendar_weekdaynames_3")||"Wednesday";case 5:return WebSquare.language.getMessage("Calendar_weekdaynames_4")||"Thursday";case 6:return WebSquare.language.getMessage("Calendar_weekdaynames_5")||"Friday"}},toLunar:function(t){try{if("string"!=typeof t)return;this.__KoreanLunarCalendar||(this._KoreanLunarCalendar=new g.KoreanLunarCalendar);var e=parseInt(t.slice(0,4),10),i=parseInt(t.slice(4,6),10),o=parseInt(t.slice(6,8),10);if(this._KoreanLunarCalendar.setSolarDate(e,i,o))return this._KoreanLunarCalendar.isIntercalation=!1,this._KoreanLunarCalendar.LunarIsoFormat();var s="";s=e<=1e3?"date range error : Min supported day is 10000213":e>=2050?"date range error : Max supported day is 20501231.":"invalid date format. The valid format is yyyyMMdd (ex:20200516)",d.v.printLog("date.toLunar error : "+s)}catch(t){h.Y.printStackTrace(t,null,this)}},toSolar:function(t){try{if("string"!=typeof t)return;this.__KoreanLunarCalendar||(this._KoreanLunarCalendar=new g.KoreanLunarCalendar);var e=parseInt(t.slice(0,4),10),i=parseInt(t.slice(4,6),10),o=parseInt(t.slice(6,8),10);if(this._KoreanLunarCalendar.setLunarDate(e,i,o))return this._KoreanLunarCalendar.SolarIsoFormat();var s="";s=e<=1e3?"date range error : Min supported day is 10000101":e>=2050?"date range error : Max supported day is 20501118.":"invalid date format. The valid format is yyyyMMdd (ex:20200516)",d.v.printLog("date.toSolar error : "+s)}catch(t){h.Y.printStackTrace(t,null,this)}},getCurrentServerDate:function(t,e){if(t=t||"yyyyMMdd",void 0===e){var i=new Date(Date.now()+WebSquare.serverDiff);return g.getFormattedDate(i,t)}return g._getServerTime(t,null,e)}};g._getServerTime=function(){var t=(0,o.A)(a().mark((function t(e,i,o){var s,r,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==g._onRequest){
t.next=2;break}return t.abrupt("return");case 2:return s=e||"yyyyMMddHHmmssSSS",r="serverTime.wq",d=i||l.I.getConfiguration("serverTimeURL"),r=l.I.getServletURL(null,o,r,d),r+="?pattern="+s+"&idx="+(new Date).getTime()+n.q.safeRandom(),t.abrupt("return",new Promise((function(t,e){var i;try{(i=l.I.getXMLHTTPObject()).open("GET",r,!0),o||i.setRequestHeader("Cache-Control","no-cache"),i.onreadystatechange=function(){if(4==i.readyState)if(g._onRequest=!1,i.status>=200&&i.status<400){var o=i.responseText;if("string"!=typeof o||!o)return void e();var r=g.parseDate(o,s),a=new Date(r).getTime()-(new Date).getTime();a=new Date((new Date).getTime()+a),i.onreadystatechange=function(){},i=null;var n=g.getFormattedDate(a,s);t(n)}else i.onreadystatechange=function(){},i=null,e()},g._onRequest=!0,i.send()}catch(t){g._onRequest=!1,i&&(i.onreadystatechange=function(){},i=null),h.Y.printStackTrace(t),e()}})));case 8:case"end":return t.stop()}}),t)})));return function(e,i,o){return t.apply(this,arguments)}}(),g._checkLocalTimeInterval=function(){g._checkLocalTime.cnt++;var t=(new Date).getTime(),e=t-g._checkLocalTime.time,i=t-g._checkLocalTime.gTime,o=g._checkLocalTime.cnt*g._checkLocalTime.interval,s=Math.abs(i-o),r=l.I.getConfiguration("/WebSquare/date/serverDate/@autoupdateinterval")||"3600";r=1e3*parseInt(r,10),e<0||i<0?(d.v.printLog("diff < 0 || gTotal < 0",e,i,s,o,t),g.updateServerTime()):g._checkLocalTime.pendingCnt>g._checkLocalTime.pendingMaxCnt?(g.updateServerTime(),d.v.printLog("date._checkLocalTime.pendingCnt > date._checkLocalTime.pendingMaxCnt",e,i,s,o,t)):i>r?(g.updateServerTime(),d.v.printLog("gTotal > gMax",e,i,s,o,t)):g._checkLocalTime.timezoneOffset!==(new Date).getTimezoneOffset()?(g.updateServerTime(),d.v.printLog("date._checkLocalTime.timezoneOffset !== new Date().getTimezoneOffset()",e,i,s,o,t)):!0===g._checkLocalTime.refresh?(d.v.printLog("date._checkLocalTime.refresh === true",e,i,s,o,t),g.updateServerTime()):e>g._checkLocalTime.diffMax?(g._checkLocalTime.refresh=!0,g._checkLocalTime.pendingCnt++,d.v.printLog("diff > date._checkLocalTime.diffMax",e,i,s,o,t)):g._checkLocalTime.gDiffMax,g._checkLocalTime.time=(new Date).getTime()},g._initServerDiff=(0,o.A)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e="false"!==String(l.I.getConfiguration("/WebSquare/date/serverDate/@enable")).toLowerCase())){t.next=4;break}return t.next=4,g.updateServerTime().catch((function(t){d.v.printLog("WebSquare.date.updateServerTime fail.")}));case 4:e&&!isNaN(n.q.serverDiff)||(n.q.serverDiff=0),g._onRequest=!1,g._initCheckLocalTime(),c.Z.setInterval(g._checkLocalTimeInterval,{key:"WebSquare_date_checkLocalTimeInterval",caller:this,delay:g._checkLocalTime.interval});case 8:case"end":return t.stop()}}),t,this)}))),g._initCheckLocalTime=function(){g._checkLocalTime.time=(new Date).getTime(),g._checkLocalTime.gTime=(new Date).getTime(),g._checkLocalTime.cnt=0,g._checkLocalTime.refresh=!1,g._checkLocalTime.pendingCnt=0,g._checkLocalTime.timezoneOffset=(new Date).getTimezoneOffset()},g.updateServerTime=function(){var t=(0,o.A)(a().mark((function t(e,i,o){var s,r,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==g._onRequest){t.next=3;break}return t.abrupt("return");case 3:return s=e||"yyyyMMddHHmmssSSS",r="serverTime.wq",d=i||l.I.getConfiguration("serverTimeURL"),r=l.I.getServletURL(null,o,r,d),r+="?pattern="+s+"&idx="+(new Date).getTime()+n.q.safeRandom(),t.abrupt("return",new Promise((function(t,e){var i;try{(i=l.I.getXMLHTTPObject()).open("GET",r,!0),o||i.setRequestHeader("Cache-Control","no-cache"),i.onreadystatechange=function(){if(4==i.readyState)if(g._onRequest=!1,i.status>=200&&i.status<400){var o=i.responseText;if("string"!=typeof o||!o)return void e();var r=g.parseDate(o,s),a=new Date(r).getTime()-(new Date).getTime();n.q.serverDiff=a,a=new Date((new Date).getTime()+a),i.onreadystatechange=function(){},i=null,g._initCheckLocalTime();var l=g.getFormattedDate(a,s)
;t(l)}else i.onreadystatechange=function(){},i=null,e()},g._onRequest=!0,i.send()}catch(t){g._onRequest=!1,i&&(i.onreadystatechange=function(){},i=null),h.Y.printStackTrace(t),e()}})));case 9:case"end":return t.stop()}}),t)})));return function(e,i,o){return t.apply(this,arguments)}}(),g._updateServerTime=function(t){},g.getServerTimeZone=function(){return new Promise((function(t,e){var i=l.I.getXMLHTTPObject();try{i.open("GET",n.q.baseServletURI+"serverTimeZone.wq",!0),i.onreadystatechange=function(){if(4===i.readyState)try{n.q.serverTimeOffset=parseInt(i.responseText,10),t(WebSquare.serverTimeOffset),i.onreadystatechange=function(){},i=null}catch(t){i.onreadystatechange=function(){},i=null,e(t)}},i.send(null)}catch(t){i.onreadystatechange=function(){},i=null,e(t)}}))},g.getMaxMinYear=function(){var t=l.I.getConfiguration("/WebSquare/date/maxYear/@value")-0;(t<1e3||t>9999||isNaN(t))&&(t=2099);var e=l.I.getConfiguration("/WebSquare/date/minYear/@value")-0;if((e<1e3||e>9999||isNaN(e))&&(e=1901),e>t){var i=e;e=t,t=i}var o={};return o.maxYear=t,o.minYear=e,o},g.getWeek=function(t){var e=new Date;e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},g.KoreanLunarCalendar=function(){this.KOREAN_LUNAR_MIN_VALUE=10000101,this.KOREAN_LUNAR_MAX_VALUE=20501118,this.KOREAN_SOLAR_MIN_VALUE=10000213,this.KOREAN_SOLAR_MAX_VALUE=20501231,this.KOREAN_LUNAR_BASE_YEAR=1e3,this.SOLAR_LUNAR_DAY_DIFF=43,this.LUNAR_SMALL_MONTH_DAY=29,this.LUNAR_BIG_MONTH_DAY=30,this.SOLAR_SMALL_YEAR_DAY=365,this.SOLAR_BIG_YEAR_DAY=366,this.SOLAR_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31,29],this.KOREAN_CHEONGAN=[44049,51012,48337,51221,47924,44592,44221,49888,51076,44228],this.KOREAN_GANJI=[51088,52629,51064,47896,51652,49324,50724,48120,49888,50976,49696,54644],this.KOREAN_GAPJA_UNIT=[45380,50900,51068],this.CHINESE_CHEONGAN=[30002,20057,19993,19969,25098,24049,24218,36763,22764,30328],this.CHINESE_GANJI=[23376,19985,23493,21359,36784,24051,21320,26410,30003,37193,25100,20133],this.CHINESE_GAPJA_UNIT=[24180,26376,26085],this.INTERCALATION_STR=[50980,38287],
this.KOREAN_LUNAR_DATA=[2194016855,2197734699,2193886506,2194017621,3271595437,2193884522,2194016621,2197837021,3267626157,2193885773,2197827149,2193885990,3271600982,2194016981,2193883994,2197842298,3267758427,2193884315,2197834395,2193885771,3271674533,2193884842,2194016981,2197852893,3267625653,2194016599,2197705902,2194017431,3267626571,2197759306,2194017705,2197857974,3267757677,2193883758,2197907758,2193885486,3267628182,2197835157,2193886538,2197867881,3267627864,2194148715,2197918315,2193883741,3267627307,2197838507,2193885845,2193886026,3271696043,2193883861,2197927258,2194015419,3267625563,2197845303,2193884459,2193884821,3271571285,2193884842,2198063797,2193883765,3267626166,2197850718,2193885782,2193886502,3271581350,2194017621,2193884586,2197822826,3267758445,2197861551,2193884317,2193885773,3271589165,2193885862,2194017109,2197833173,3267625818,2194016605,2197885299,2193884251,3271596623,2193884747,2193885861,2197842793,3267757749,2193883866,2197826230,2194016567,3271476375,2194017431,2193884747,2197718698,3267759525,2193884596,2198030957,2193883822,3267628641,2197826862,2193886358,2197855565,2193886538,2194017637,2197906837,2194015581,3267625581,2197826141,2193885483,2197858967,3267627669,2193886026,2197850970,2194016981,3267757403,2197832375,2193884247,2193884459,3271564587,2193884821,2197853997,2193884586,3267758773,2197837037,2193884342,2194016855,3271504974,2193886502,2197929618,2194017621,3267626410,2197850554,2194016621,2193884334,3271576221,2193885773,2193886501,2197827365,3267627860,2198056297,2193883866,2194016605,3271648411,2193884315,2193885771,2197834571,3267626661,2197863251,2193884852,2194016950,3271657814,2194016663,2193884311,2197833367,3267626315,2197735077,2194017701,2193884588,3271797429,2193883758,2193885486,2197843118,3267628182,2193886538,2197827402,2194017621,3271603563,2194015579,2193883741,2197846333,3267627303,2193885845,2197904661,2193886026,3267758933,2197885653,2194015451,2197721694,3267758679,2193884459,2197842603,2193884821,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714222,2193886502,3267759763,2197837525,2193884586,2194016693,3271566701,2193884334,2197924429,2193885773,3267628326,2197843301,2193886034,2194017642,3271567066,2194016605,2197931165,2193884315,3267627595,2197850795,2193884837,2193886036,3271576500,2194016950,2194016603,2197824823,3267626135,2197853775,2193884491,2193884837,3271653061,2193884588,2194016950,2197895278,3267627310,2197867671,2193886358,2193886538,3271593386,2194017109,2193884522,2197969627,3267625565,2193885486,2197826859,2193885845,3271597389,2193885994,2194017109,2197845365,3267626202,2194016859,2197833047,2193884459,3271674515,2193884819,2193884842,2197850842,3267758821,2193884342,2197834414,2194016855,3267626279,2197759270,2194017875,2197857995,3267626410,2194015661,2197906605,2193884334,3267627598,2197835085,2193886502,2197863763,3267627858,2194017130,2197919082,2194015575,3267626141,2197903899,2193885771,2193885861,3271564965,2193886034,2197863258,2194016950,3267758427,2197841079,2193884311,2193884747,3271571275,2193884837,2197862067,2193884588,3267758774,2197914285,2193884318,2193885773,3271581003,2193885989,2193886034,2197892690,3267758938,2197858654,2194016603,2193884315,3271584343,2193885771,2193885861,2197834661,3267626708,2197867222,2194016950,2194016567,2197849247,2193884311,2193884747,2197706442,3267759525,2193884586,2197822828,2194016878,3271604527,2193885486,2193886358,2197847381,3267628362,2194017621,2197894485,2193884522,3267758701,2197822045,2193885483,2197850715,3267627669,2193885994,2197904170,2194016981,3267626202,2197822650,2194016855,2197853487,3267626279,2193884819,2197845683,2193884842,3267758773,2197828981,2193884342,2197867111,3267627566,2193886486,2197851798,2193886538,3267759530,2197837290,2194015597,2193884334,3271632989,2193885741,2197859607,2193885861,3267627858,2197847412,2194016986,2194015581,3271570747,2193884251,2193885739,2197887531,3267627685,2197855061,2193884850,2194016982,3271644470,2194016567,2193884247,2197830231,3267626283,2197727910,2194017685,2193884586,3271654060,2194016878,2193884462,2197830830,3267627606,2197863723,2193886506,2194017621,3271595437,2193884522,2194016877,2197837149,3267626283,2193885837,2197827157,2193885994,3271600982,2194016981,2193884378,2197842554,3267758679,2193884443,2197899799,2193884755,3271673513,2193884586,2194016949,2197852861,3267625654,2194016823,2197706030,2193886486,2194017867,2197698386,2194017706,2197927348,3267757421,2193883822,2197846589,2193885741,3267628309,2197835157,2193886034,2197867369,3267758810,2194015581,2197918299,2193884251,3267627563,2197838507,2193885845,2193886034,3271564970,2194016950,2197865819,2194015415,3267626071,2197845303,2193884459,2193884821,3271640725,2193884586,2197867189,2194016878,3267626158,2197850718,2193885782,2193886506,3271585450,2194017621,2193884522,2197891418,3267758429,2197861551,2193884315,2193885773,3271589165,2193885994,2194017109,2197833173,3267625690,2194016603,2197885271,2193884315,3271596623,2193884747,2193884841,2197842666,3267757749,2193883830,2197826222,2194016567,3271537814,2193886358,2194017867,2197714610,3267759530,2194015661,2197828461,2193883758,3267627310,2197826861,2193886357,2197855565,3267627850,2194017129,2197906778,2194015579,3267625565,2197826139,2193885483,2197858967,3267626645,2193885002,2197850970,2194016950,3267757371,2197832375,2193883735,2193884459,3271564587,2193884821,2197853869,2193884586,3267758773,2197837037,2193884334,2194016855,3271504974,2193886506,2197929364,2194017109,2193884522,2197846394,2194016605,2193884334,3271576219,2193885773,2193886501,2197887658,3267758933,2197853549,2193883866,2194016603,3271578807,2193884311,2193885771,2197834571,3267626665,2197867221,2194015669,2193883830,3271592286,2194016559,2193884311,2197702294,3267628362,2197868197,2194017641,2194015597,3271664309,2193883758,2193885486,2197843117,3267628181,2193886538,2197827402,2194017113,3271607661,2194015579,2193883741,2197846331,3267627307,2193885845,2197904149,2193884874,3267758805,2197885622,2194015419,2197852767,3267625559,2193884459,2197711530,2194017941,3267626666,2197830570,2194016949,2197861559,3267626158,2194016855,2197714221,2193886502,3267759509,2197837269,2193884522,2194016621,3271566685,2193884334,2197858895,2193885773,3267628325,2197843305,2194017109,2193883994,3271568058,2194016603,2197931163,2193884311,3267627595,2197850923,2193884837,2193884884,3271772853,2193883830,2194016567,2197824815,3267626135,2197722702,2193886538,2194017957,3271648937,2194015597,2193883830,2197895262,3267627310,2197863575,2193885845,2193886538,3271593386,2194017101,2194015595,2197832411,3267625565,2193885485,2197826859,2193885845,3271596877,2193884842,2194016981,2197841269,3267757243,2193883739,2197894231,2193884459,3271539348,2194017941,2193884842,2197850842,3267758517,2193884342,2197834414,2194016847,3267495206,2197892390,2194017621,2197923241,3267626346,2194016621,2197906589,2193884318,3267627597,2197835085,2193886501,2197863763,3267627860,2194017114,2197915994,2194016603,3267626139,2197834391,2193885771,2193885861,3271564965,2193884884,2197994203,2193883830,3267758391,2197841071,2193884311,2193884747,3271440202,2194017701,2197862069,2194015597,3267625646,2197846334,2193885486,2193886358,3271646485,2193886538,2194017701,2197894485,3267626346,2197846650,2194016861,2193885485,3271584427,2193885845,2193886026,2197834666,3267758805,2193884506,2197891258,2194016859,3271587127,2193884459,2193884819,2197903125,3267626666,2194016981,2197829045,2193884342,3271592542,2193885774,2193886502,2197843622,3267628370,2194017706,2197898858,2194015597,3267626158,2197830301,2193885773,2197847339,3267627813,2193886546,2197904724,2194017114,3267757405,2197828955,2193884315,2197845591,2193885771,2193885861,2197842789,2193884882,3267758810,2197833142,2194016567,2193884311,3271571095,2193884749,2197714602,2194017701,3267626410,2197838572,2194016942,2193885486,3271572782,2193886358,2197916997,2193886538,3267759445,2197906837,2193884522,2194016877,3271574877,2193884461,2193885845,2197896341,3267627850,2197912394,2194016981,2193884506,3271645754,2194016859,2193884459,2197899799,3267626643,2197853867,2193884842,2194016949,3271582965,2193884342,2194016855,2197701934,3267628310,2194017939,2197698386,2194017706,3271652778,2194015597,2193884334,2197903901,3267627565,2193886485,2197835173,2193886034,3271597418,2194016986,2194015581,2197906075,3267626075,2193885739,2197838635,2193885845,3267627858,2197891762,2194016982,2197910870,3267757367,2193884247,2197837399,2193884459,3267626645,2197829525,2193884586,2197858998,3267758701,2193884334,2197842542,2193885782,3267628330,2197839530,2194017621,2193884586,3271572330,2194016877,2197845181,2193884331,3267627661,2197839189,2193885994,2194017109,3271574997,2193884378,2194016605,2197824855,3267626139,2197842583,2193884747,2193884841,2197834666,2194015925,2193883834,2197826230,3267758391,2197710126,2193886486,2194017867,3271448274,2194017705,2194015669,2197828461,3267625646,2193885742,2197827117,2193886357,3271585109,2193886034,2194017129,2197833178,3267757405,2193883741,2197830235,2193885739,3271654027,2193885845,2193886026,2197904170,3267758805,2194015579,2197832375,2193883735,3271595311,2193884459,2193884821,2197841621,3267626410,2194016949,2197833069,2193884334,3267758679,2197763158,2193886506,2197913226,3267759445,2193884586,2197838554,2194016605,3267626158,2197834411,2193885773,2197851435,3267627817,2194017109,2197845365,2193883866,3267758429,2197837015,2193884315,2193885771,3271637579,2193884841,2197850841,2194015925,3267625654,2197903670,2194016567,2193884311,3271444118,2193886794,2197860006,2194017705,3267757485,2197906093,2193883822,2193885486,3271580845,2193886357,2193886538,2197896522,3267758953,2197845370,2194015579,2193883741,3271579995,2193885483,2193885845,2197835157,3267627850,2194017109,2197825237,2194015579,3271582327,2193883735,2193884459,2197707434,3267759765,2193884842,2197830570,2194016949,2197849277,2193884334,2194016855,2197706061,3267628326,2194017685,2197898837,2193884522,3267758509,2197824861,2193884334,2197842523,3267627597,2193886501,2197839273,2194017109,3267626346,2197826266,2194016605,2197845179,3267626139,2193885771,2197838667,2193884841,3267627732,2197965749,2193883830,2194016603,3271566647,2193884311,2197710422,2193886794,3267759781,2197903017,2194015669,2193883830,3271637166,2193885486,2197912717,2193886357,3267628362,2197908874,2194017129,2194015597,3271639643,2193883741,2193885485,2197826859,3267627669,2197847381,2193886026,2194017109,3271644501,2194015451,2193883739,2197895255,3267626283,2197850779,2193884821,2193884842,3271584490,2194016949,2193884342,2197834414,3267758679,2193884455,2197698342,2194017685,3271587509,2193884522,2194016685,2197837021,3267626158,2193885774,2197835085,2193886501,3271593305,2193886036,2194017642,2197907802,3267758427,2193884315,2197834395,2193885771,3271600935,2193884837,2193884884,2197973877,3267625654,2194016603,2197836983,2193884311,3267626571,2197698378,2194017957,2197849817,3267757485,2193883830,2197838190,2193885486,3267628182,2197835413,2193886538,2194017701,3271567189,2193884524,2197977787,2193883741,3267627309,2197839019,2193885845,2193886026,3271637834,2194017109,2197853533,2193884346,3267758683,2197837143,2193884459,2193885845,3271576469,2193884842,2194016981,2197825205,3267626166,2197842542,2194016855,2193884455,3271448230,2194017683,2193884586,2197830506,3267758445,2197861551,2193884334,2193885773,3271650573,2193886501,2193886546,2197839316,3267758954,2194016621,2197824859,2193884315,3271588439,2193885771,2193885989,2197904165,3267626708,2194016986,2197895350],
this.lunarYear=0,this.lunarMonth=0,this.lunarDay=0,this.isIntercalation=!1,this.solarYear=0,this.solarMonth=0,this.solarDay=0,this.__gapjaYearInx=[0,0,0],this.__gapjaMonthInx=[0,0,1],this.__gapjaDayInx=[0,0,2]},g.KoreanLunarCalendar.prototype.LunarIsoFormat=function(){var t=this.lunarYear+""+("0"+this.lunarMonth).slice(-2)+("0"+this.lunarDay).slice(-2);return this.isIntercalation&&(t+=" Intercalation"),t},g.KoreanLunarCalendar.prototype.SolarIsoFormat=function(){return this.solarYear+""+("0"+this.solarMonth).slice(-2)+("0"+this.solarDay).slice(-2)},g.KoreanLunarCalendar.prototype.__getLunarData=function(t){return this.KOREAN_LUNAR_DATA[t-this.KOREAN_LUNAR_BASE_YEAR]},g.KoreanLunarCalendar.prototype.__getLunarIntercalationMonth=function(t){return t>>12&15},g.KoreanLunarCalendar.prototype.__getLunarDays=function(t,e,i){var o=this.__getLunarData(t);return null!=e&&null!=i?!0===i&&this.__getLunarIntercalationMonth(o)===e?(o>>16&1)>0?this.LUNAR_BIG_MONTH_DAY:this.LUNAR_SMALL_MONTH_DAY:(o>>12-e&1)>0?this.LUNAR_BIG_MONTH_DAY:this.LUNAR_SMALL_MONTH_DAY:o>>17&511},g.KoreanLunarCalendar.prototype.__getLunarDaysBeforeBaseYear=function(t){for(var e=0,i=this.KOREAN_LUNAR_BASE_YEAR;i<=t;i++)e+=this.__getLunarDays(i);return e},g.KoreanLunarCalendar.prototype.__getLunarDaysBeforeBaseMonth=function(t,e,i){var o=0;if(t>=this.KOREAN_LUNAR_BASE_YEAR&&e>0){for(var s=1;s<=e;s++)o+=this.__getLunarDays(t,s,!1);if(!0===i){var r=this.__getLunarIntercalationMonth(this.__getLunarData(t));r>0&&r<e+1&&(o+=this.__getLunarDays(t,r,!0))}}return o},g.KoreanLunarCalendar.prototype.__getLunarAbsDays=function(t,e,i,o){var s=this.__getLunarDaysBeforeBaseYear(t-1)+this.__getLunarDaysBeforeBaseMonth(t,e-1,!0)+i;return!0===o&&this.__getLunarIntercalationMonth(this.__getLunarData(t))===e&&(s+=this.__getLunarDays(t,e,!1)),s},g.KoreanLunarCalendar.prototype.__isSolarIntercalationYear=function(t){return(t>>30&1)>0},g.KoreanLunarCalendar.prototype.__getSolarDays=function(t,e){var i=this.__getLunarData(t);if(null!=e)var o=2===e&&this.__isSolarIntercalationYear(i)?this.SOLAR_DAYS[12]:this.SOLAR_DAYS[e-1];else o=this.__isSolarIntercalationYear(i)?this.SOLAR_BIG_YEAR_DAY:this.SOLAR_SMALL_YEAR_DAY;return o},g.KoreanLunarCalendar.prototype.__getSolarDaysBeforeBaseYear=function(t){for(var e=0,i=this.KOREAN_LUNAR_BASE_YEAR;i<=t;i++)e+=this.__getSolarDays(i);return e},g.KoreanLunarCalendar.prototype.__getSolarDaysBeforeBaseMonth=function(t,e){for(var i=0,o=1;o<=e;o++)i+=this.__getSolarDays(t,o);return i},g.KoreanLunarCalendar.prototype.__getSolarAbsDays=function(t,e,i){var o=this.__getSolarDaysBeforeBaseYear(t-1)+this.__getSolarDaysBeforeBaseMonth(t,e-1)+i;return o-=this.SOLAR_LUNAR_DAY_DIFF},g.KoreanLunarCalendar.prototype.__setSolarDateByLunarDate=function(t,e,i,o){var s,r=this.__getLunarAbsDays(t,e,i,o),a=0,n=0;s=r<this.__getSolarAbsDays(t+1,1,1)?t:t+1;for(var l=12;l>=1;l--){var h=this.__getSolarAbsDays(s,l,1);if(r>=h){a=l,n=r-h+1;break}}this.solarYear=s,this.solarMonth=a,this.solarDay=n},g.KoreanLunarCalendar.prototype.__setLunarDateBySolarDate=function(t,e,i){for(var o=this.__getSolarAbsDays(t,e,i),s=o>=this.__getLunarAbsDays(t,1,1,!1)?t:t-1,r=0,a=0,n=!1,l=12;l>=1;l--){if(o>=this.__getLunarAbsDays(s,l,1,!1)){r=l,this.__getLunarIntercalationMonth(this.__getLunarData(s))===l&&(n=o>=this.__getLunarAbsDays(s,l,1,!0)),a=o-this.__getLunarAbsDays(s,r,1,n)+1;break}}this.lunarYear=s,this.lunarMonth=r,this.lunarDay=a,this.isIntercalation=n},g.KoreanLunarCalendar.prototype.__checkValidDate=function(t,e,i,o,s){var r=!1,a=1e4*i+100*o+s,n=t?this.KOREAN_LUNAR_MIN_VALUE:this.KOREAN_SOLAR_MIN_VALUE,l=t?this.KOREAN_LUNAR_MAX_VALUE:this.KOREAN_SOLAR_MAX_VALUE;if(n<=a&&l>=a&&o>0&&o<13&&s>0){var h=t?this.__getLunarDays(i,o,e):this.__getSolarDays(i,o);if(!t&&1582===i&&10===o){if(s>4&&s<15)return r;h+=10}s<=h&&(r=!0)}return r},g.KoreanLunarCalendar.prototype.setLunarDate=function(t,e,i,o){var s=!1;return this.__checkValidDate(!0,o,t,e,i)&&(this.lunarYear=t,this.lunarMonth=e,this.lunarDay=i,
this.isIntercalation=o&&this.__getLunarIntercalationMonth(this.__getLunarData(t))===e,this.__setSolarDateByLunarDate(t,e,i,o),s=!0),s},g.KoreanLunarCalendar.prototype.setSolarDate=function(t,e,i){var o=!1;return this.__checkValidDate(!1,!1,t,e,i)&&(this.solarYear=t,this.solarMonth=e,this.solarDay=i,this.__setLunarDateBySolarDate(t,e,i),o=!0),o},g.KoreanLunarCalendar.prototype.__getGapJa=function(){var t=this.__getLunarAbsDays(this.lunarYear,this.lunarMonth,this.lunarDay,this.isIntercalation);if(t>0){this.__gapjaYearInx[0]=(this.lunarYear+6-this.KOREAN_LUNAR_BASE_YEAR)%this.KOREAN_CHEONGAN.length,this.__gapjaYearInx[1]=(this.lunarYear+0-this.KOREAN_LUNAR_BASE_YEAR)%this.KOREAN_GANJI.length;var e=this.lunarMonth;e+=12*(this.lunarYear-this.KOREAN_LUNAR_BASE_YEAR),this.__gapjaMonthInx[0]=(e+3)%this.KOREAN_CHEONGAN.length,this.__gapjaMonthInx[1]=(e+1)%this.KOREAN_GANJI.length,this.__gapjaDayInx[0]=(t+4)%this.KOREAN_CHEONGAN.length,this.__gapjaDayInx[1]=(t+2)%this.KOREAN_GANJI.length}},g.KoreanLunarCalendar.prototype.getGapJaString=function(){this.__getGapJa();var t=String.fromCharCode(this.KOREAN_CHEONGAN[this.__gapjaYearInx[0]],this.KOREAN_GANJI[this.__gapjaYearInx[1]],this.KOREAN_GAPJA_UNIT[this.__gapjaYearInx[2]],this.KOREAN_CHEONGAN[this.__gapjaMonthInx[0]],this.KOREAN_GANJI[this.__gapjaMonthInx[1]],this.KOREAN_GAPJA_UNIT[this.__gapjaMonthInx[2]],this.KOREAN_CHEONGAN[this.__gapjaDayInx[0]],this.KOREAN_GANJI[this.__gapjaDayInx[1]],this.KOREAN_GAPJA_UNIT[this.__gapjaDayInx[2]]);return!0===this.isIntercalation&&(t+=" ("+String.fromCharCode(this.INTERCALATION_STR[0],this.KOREAN_GAPJA_UNIT[1])+")"),t},g.KoreanLunarCalendar.prototype.getChineseGapJaString=function(){this.__getGapJa();var t=String.fromCharCode(this.CHINESE_CHEONGAN[this.__gapjaYearInx[0]],this.CHINESE_GANJI[this.__gapjaYearInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaYearInx[2]],this.CHINESE_CHEONGAN[this.__gapjaMonthInx[0]],this.CHINESE_GANJI[this.__gapjaMonthInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaMonthInx[2]],this.CHINESE_CHEONGAN[this.__gapjaDayInx[0]],this.CHINESE_GANJI[this.__gapjaDayInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaDayInx[2]]);return!0===this.isIntercalation&&(t+=" ("+String.fromCharCode(this.INTERCALATION_STR[1],this.CHINESE_GAPJA_UNIT[1])+")"),t},g.KoreanLunarCalendar.prototype.getChineseGapJaString=function(){this.__getGapJa();var t=String.fromCharCode(this.CHINESE_CHEONGAN[this.__gapjaYearInx[0]],this.CHINESE_GANJI[this.__gapjaYearInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaYearInx[2]],this.CHINESE_CHEONGAN[this.__gapjaMonthInx[0]],this.CHINESE_GANJI[this.__gapjaMonthInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaMonthInx[2]],this.CHINESE_CHEONGAN[this.__gapjaDayInx[0]],this.CHINESE_GANJI[this.__gapjaDayInx[1]],this.CHINESE_GAPJA_UNIT[this.__gapjaDayInx[2]]);return!0===this.isIntercalation&&(t+=" ("+String.fromCharCode(this.INTERCALATION_STR[1],this.CHINESE_GAPJA_UNIT[1])+")"),t}},2338:function(t,e,i){"use strict";i.d(e,{f:function(){return n}});var o=i(2284),s=i(5461),r=i(8971),a=i(2256),n={clear:function(){for(var t in a.v.printLog(" WebSquare memory leak initialize start "),window._funs)window._funs[t]=null;for(var e in window._objs)if(void 0!==window._objs[e]._closures){for(var i in window._objs[e]._closures)try{window._objs[e].detachEvent(window._objs[e]._closures[i].name,window._objs[e]._closures[i]),window._objs[e]._closures[i]=null,window._funs[i]=null}catch(t){r.Y.printStackTrace(t)}window._objs[e]._closures=null,window._objs[e]=null}window._objs=null,a.v.printLog(" WebSquare memory leak initialize end ")},cleanObj:function(t){},clearElement:function(t){var e=null,i=0,o=0,s="";if(e=t.attributes){o=e.length;for(i=0;i<o;i++)"function"==typeof t[s=e[i].name]&&(t[s]=null)}if(e=t.childNodes){o=e.length;for(i=0;i<o;i++)this.clearElement(t.childNodes[i])}},applyParentObject:function(t,e){try{return e.apply(t,arguments)}catch(t){r.Y.printStackTrace(t)}},addListener:function(t,e,i,o){s.q.addListenerCnt++;try{if(o=o||!1,t.attachEvent)try{
t!=window?"onload"==e?s.q.onload=i:t.attachEvent(e,i.closure(t,e)):t.attachEvent(e,i)}catch(t){r.Y.printStackTrace(t)}else if(t.addEventListener)try{void 0!==e&&null!=e&&""!=e&&(e.startsWith("on")?t.addEventListener(e.slice(2),i,o):t.addEventListener(e,i,o))}catch(t){r.Y.printStackTrace(t)}}catch(i){a.v.printLog("ERROR ["+t.id+"] ["+e+"] at WebSquare.event.addListener"),r.Y.printStackTrace(i)}},removeListener:function(t,e,i,o){try{if(o=o||!1,t.detachEvent)try{t!=window?t.detachEvent(e,i.closure(t,e)):t.detachEvent(e,i)}catch(t){r.Y.printStackTrace(t)}else if(t.removeEventListener)try{t.removeEventListener(e.slice(2),i,o)}catch(t){r.Y.printStackTrace(t)}}catch(t){r.Y.printStackTrace(t)}},addUserEvents:function(t,e,i){var s=[];try{if(e){if(void 0!==i){for(var a={},n=0;n<i.length;n++)a[i[n]]="";var l=[];for(n=0;n<e.length;n++)void 0===a[e[n].name]?s.push(e[n]):l.push(e[n]);e=l}"object"==(0,o.A)(t.userEventList)&&"number"==typeof t.userEventList.length?t.userEventList=t.userEventList.concat(e):t.userEventList=e}}catch(t){r.Y.printStackTrace(t)}return s},fireEvent:function(t,e){try{var i=t.userEventList;if(t.options&&t.options.parentEvent&&t!=t.options.parentEvent)return void t.options.parentEvent.childFiredEvent.apply(t.options.parentEvent,arguments);if(i){for(var o,n=null,l=void 0,h=0;h<i.length;h++)if(void 0!==i[h].name&&i[h].name==e.toLowerCase()&&"script"===i[h].action)if("function"==typeof(o="string"==typeof i[h].param.handler?WebSquare.util.getGlobalFunction(i[h].param.handler,t.scope_id):i[h].param.handler)){if(null==n&&(n=[],arguments.length>2))for(var d=2;d<arguments.length;d++)n.push(arguments[d]);i[h].disabled||(l=t.scope_obj?function(t,e,i,o,r){if(e&&!0!==e._removed){s.q.scope_obj=e.scope_obj.id,s.q._performance.mark("event.start."+e.id);var a=t.apply(e,!0!==o?i:[e.scope_obj.scope].concat(i));if(e&&!0!==e._removed&&(s.q._performance.mark("event.end."+e.id),s.q._performance._valid())){var n=e.scope_obj;(n===e||e.options&&e.options.inheritedCompName)&&(n=WebSquare.idCache[e.parentFrame]);var l=WebSquare.language.getMessage("Performance_event"),h={src:n&&n.getSrc?n.getURL(n.getSrc()||s.q.w2xPath):s.q.w2xPath,id:e.id,orgId:e.org_id?e.org_id:e.id,scopeId:n?n.id:"",type:r,log:l};s.q._performance.measure("event."+e.id,"event.start."+e.id,h)}return s.q.scope_obj=null,a}}(o,t,n,i[h].param._old,i[h].name):o.apply(t,n),t.scope_obj&&null!=a.v&&"function"==typeof a.v.getEventDebug&&a.v.getEventDebug()&&"body"!==t.options.pluginName&&a.v.printLog("[EVENT LOG] id: ["+t.id+"] scope id: ["+(t.scope_obj?t.scope_obj.id:"")+"] ev: ["+i[h].name+"] : ev name: ["+i[h].param.handler+"]"))}else a.v.printLog("Event error ["+t.id+",ev:"+i[h].name+"] : "+i[h].param.handler+" is not a function");if(void 0!==l)return l}}catch(e){r.Y.printStackTrace(e,null,t)}},fireSystemEvent:function(t,e,i){try{if(!WebSquare.util.isIE()&&"createEvent"in document){"on"==e.slice(0,2)&&(e=e.substring(2,e.length));var o=document.createEvent("HTMLEvents");for(var s in o.initEvent(e,!0,!0),i)o[s]=i[s];t.render.dispatchEvent(o)}else if("createEventObject"in document){"on"!=e.slice(0,2)&&(e="on"+e);o=document.createEventObject();for(var s in o.eventType=e,o.cancelBubble=!0,o.returnValue=!0,i)o[s]=i[s];t.render.fireEvent(e,o)}}catch(t){r.Y.printStackTrace(t)}},getTarget:function(t){try{return null==t?null:t.target?t.target:t.srcElement?t.srcElement:null}catch(t){r.Y.printStackTrace(t)}},getRelatedTarget:function(t){try{return null==t?null:t.relatedTarget?t.relatedTarget:null!=window.event&&n.fromElement?t.fromElement===WebSquare.event.getTarget(t)?t.toElement:t.fromElement:null}catch(t){r.Y.printStackTrace(t)}},getClientX:function(t){try{return WebSquare.core.browserCheck.ie?n.clientX:t.clientX}catch(t){r.Y.printStackTrace(t)}},getClientY:function(t){try{return WebSquare.core.browserCheck.ie?n.clientY:t.clientY}catch(t){r.Y.printStackTrace(t)}},getOffsetX:function(t){try{if(WebSquare.core.browserCheck.ie)return n.offsetX;var e=t.target,i=WebSquare.style.getAbsoluteLeft(e)
;return t.pageX-i}catch(e){r.Y.printStackTrace(e)}},getOffsetY:function(t){try{if(WebSquare.core.browserCheck.ie)return n.offsetY;var e=t.target,i=WebSquare.style.getAbsoluteTop(e);return t.pageY-i}catch(e){r.Y.printStackTrace(e)}},getScreenX:function(t){try{if(WebSquare.core.browserCheck.ie)return n.screenX;if(!WebSquare.util.isTouchDevice()||!t.touches)return t.screenX;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenX}catch(t){r.Y.printStackTrace(t)}},getScreenY:function(t){try{if(WebSquare.core.browserCheck.ie)return n.screenY;if(!WebSquare.util.isTouchDevice()||!t.touches)return t.screenY;var e=t.touches.item(0)||t.changedTouches.item(0);if(e)return e.screenY}catch(t){r.Y.printStackTrace(t)}},getMouseX:function(t){try{var e=(t=t||n).clientX;return e+=document.documentElement.scrollLeft||document.body.scrollLeft,WebSquare.util.isTouchDevice()&&(t.touches?e=t.touches.item(0).pageX:t.pointers&&(e=t.pointers[0].pageX)),e}catch(t){r.Y.printStackTrace(t)}},getMouseY:function(t){try{var e=(t=t||n).clientY;return e+=document.documentElement.scrollTop||document.body.scrollTop,WebSquare.util.isTouchDevice()&&(t.touches?e=t.touches.item(0).pageY:t.pointers&&(e=t.pointers[0].pageY)),e}catch(t){r.Y.printStackTrace(t)}},stopPropagation:function(t){try{if(!t||"object"!==(0,o.A)(t))return;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}catch(t){r.Y.printStackTrace(t)}},preventDefault:function(t){try{if(!t||"object"!==(0,o.A)(t))return;t.preventDefault?t.preventDefault():t.returnValue=!1}catch(t){r.Y.printStackTrace(t)}},stopEvent:function(t){try{WebSquare.event.stopPropagation(t),WebSquare.event.preventDefault(t)}catch(t){r.Y.printStackTrace(t)}},bindAsEventListener:function(t,e){return function(i){e.apply(t,[i||window.event].concat(Array.prototype.slice.call(arguments,2)))}},addEvent:function(t,e,i){i.$$guid||(i.$$guid=WebSquare.event.addEvent.guid++),t.events||(t.events={});var o=t.events[e];o||(o=t.events[e]={},t["on"+e]&&(o[0]=t["on"+e])),o[i.$$guid]=i,t["on"+e]=WebSquare.event.handleEvent},removeEvent:function(t,e,i){t.events&&t.events[e]&&delete t.events[e][i.$$guid]},handleEvent:function(t){var e=!0;t=t||window.event;var i=this.events[t.type];for(var o in i)this.$$handleEvent=i[o],!1===this.$$handleEvent(t)&&(e=!1);return e},fixEvent:function(t){t.preventDefault=WebSquare.event.fixEvent.preventDefault,t.stopPropagation=WebSquare.event.fixEvent.stopPropagation}};n.fixEvent.preventDefault=function(){this.returnValue=!1},n.fixEvent.stopPropagation=function(){this.cancelBubble=!0},n.isEventSupported=function(t,e){var i=!1;try{if(!t)return!1;var o=e;"string"!=typeof o||"o"===o.charAt(0)&&"n"===o.charAt(1)||(o="on"+o),(i=o in t)||t.setAttribute&&t.removeAttribute&&(t.setAttribute(o,""),i="function"==typeof t[o],void 0!==t[o]&&(t[o]=void 0),t.removeAttribute(o))}catch(t){r.Y.printStackTrace(t)}return i},n.getMouseWheelDelta=function(t){try{var e=t.detail,i=t.wheelDelta,o=-1!=navigator.userAgent.indexOf("Windows")||!1,s=-1!=navigator.userAgent.indexOf("Macintosh")||!1;return WebSquare.util.isMobile()?WebSquare.core.browserCheck.android?i/=360:i/=120:WebSquare.util.isChrome()?i/=120:WebSquare.util.isSafari()?i/=o?120:s?12:120:WebSquare.util.isFF()?o?i=e/-3:s&&(i=-1*e):WebSquare.util.isOpera()?o?i/=120:s&&(i/=160):WebSquare.util.isIEAllVersion("8 9 10 11")&&(i/=120),i}catch(t){r.Y.printStackTrace(t)}}},8971:function(t,e,i){"use strict";i.d(e,{Y:function(){return s}});var o=i(5461),s={};!0!==o.q.skipLog||o.q.printError?(s.exceptionCnt=0,s.printError=function(t){WebSquare.logger.printLog("WebSquare Error\n\n"+t),WebSquare.logger.debug&&alert("WebSquare Error\n\n"+t)},s.printStackTrace=function(t,e,i){try{if(s.exceptionCnt++,o.q.printConsole||o.q.errorConsole){var r=o.q.w2xPath;if(i){var a=i.scope_obj;a&&"function"==typeof a.getSrc&&(r=a.getSrc())}if(t&&t.message){var n="\nxml page url : "+r,l=t.message+n;WebSquare.logger.printLog(l);try{t.message+=n,console.error(s.exceptionCnt,t)}catch(e){
console.error(s.exceptionCnt,t)}}var h=WebSquare.core.getConfiguration("/WebSquare/debug/@errorHandler"),d=WebSquare.util.getGlobalFunction(h);return void(d&&d(t,t.message))}var c,u="";if(i&&i.getID)if(u+="Exception Occured at element id ["+i.getID()+"]\n",i.parentFrame&&null!=(c=o.q.idCache[i.parentFrame])){var p={frameObj:c},g=WebSquare.core._getMsaSrc(c.getSrc(),p);u+="* frame       : id=["+c.id+"], src=["+g+"]\n"}try{t.componentName&&(u+="* component   :"+t.componentName+"\n")}catch(t){websquare.logger.printLog("* component   :")}try{t.componentID&&(u+="* id          :"+t.componentID+"\n")}catch(t){websquare.logger.printLog("* id   :")}try{t.eventName&&(u+="* event       :"+t.eventName+"\n")}catch(t){websquare.logger.printLog("* event   :")}try{t.description&&(u+="* description :"+t.message+"\n")}catch(t){websquare.logger.printLog("* description   :")}try{t.number&&(u+="* number      :"+(65535&t.number)+"\n")}catch(t){websquare.logger.printLog("* number   :")}try{t.line&&(u+="* line        :"+t.line+"\n")}catch(t){websquare.logger.printLog("* line   :")}try{t.lineNumber&&(u+="* lineNumber  :"+t.lineNumber+"\n")}catch(t){websquare.logger.printLog("* lineNumber   :")}try{t.columnNumber&&(u+="* columnNumber:"+t.columnNumber+"\n")}catch(t){websquare.logger.printLog("* columnNumber   :")}try{t.sourceURL&&(u+="* sourceURL   :"+t.sourceURL+"\n")}catch(t){websquare.logger.printLog("* sourceURL   :")}try{t.fileName&&(u+="* fileName    :"+t.fileName+"\n")}catch(t){websquare.logger.printLog("* fileName   :")}if(e&&((e+="").length>100?u+="* source        :"+e.substring(0,100)+"\n":u+="* source        :"+e+"\n"),void 0===t.aleradyThrow)try{null!=t.stack?u+="================================================================\n"+t.stack+"\n================================================================\n":t.message&&(u+="* message     : "+t.message+"\n");var m=WebSquare.language.getMessage("E_exception_ErrorOccursSeeLog",u);""==m&&(m=u),WebSquare.logger.printLog(m),s.printInternalSource(),t.aleradyThrow="djshin"}catch(t){console.error(t)}}catch(t){console.error(t)}},s.parseStack=function(t){for(var e=t.split("\n"),i=[],o=0;o<e.length;o++)e[o]&&(e[o].trim().startsWith("at")?i.push(e[o]):0==o&&navigator.userAgent.indexOf("Chrome")>-1?i.push("    "+e[o]):i.push("    at "+e[o]));return i.join("\n")},s.ieErrorHandler=function(t,e,i){return WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_IERuntimeError",i,window.event.errorCharacter,window.event.errorCode,e,t,s.getSignature(s.ieErrorHandler.caller))),s.printInternalSource(),!0},s.printInternalSource=function(){for(var t=0;t<WebSquare.BootLoader.globalEvalArr.length;t++){var e=[],i="\n<<Internal JavaScript Source Block",o=WebSquare.BootLoader.globalEvalArr[t];if(o)for(var s=o.split(WebSquare.scriptIdentifier),r=s.length>1?1:0,a=1,n=!0,l=0;l<s.length;l++)if(""!=s[l]){var h=s[l].split("\n"),d=h[0]+"",c=d.indexOf('";');c>0&&(d=h[0].substring(0,c),h[0]=h[0].substring(c+2)),1===r?e.push(i+" ["+d+"]["+t+"] Start>>"):e.push(i+"["+t+"] Start>>"),n&&(n=!1,e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),a++);for(var u=0,p=h.length;u<p;u++)e.push("\n"),e.push("["),1===r&&e.push(d+":"),e.push(WebSquare.BootLoader.fillZero(a,4)),e.push("]"),e.push(h[u]),a++;1===r?e.push(i+" ["+d+"]["+t+"] End>>\n"):e.push(i+"["+t+"] End>>\n")}var g=e.join("");WebSquare.logEnableFlag&&WebSquare.logMsgArray.push(g),WebSquare.printConsole&&console.log(g),WebSquare.remoteConsole&&WebSquare.remoteLogMsgArray.push(g)}WebSquare.BootLoader.globalEvalArr=[]},s.ffErrorHandler=function(t,e,i){return"Error loading script"==t?(WebSquare.BootLoader.printError("Module ["+e+"] Does not exist."),!1):(WebSquare.core.browserCheck.moz&&i++,WebSquare.logger.printLog(WebSquare.language.getMessage("E_exception_FFRuntimeError",i,e,t,s.getSignature(s.ffErrorHandler.caller))),s.printInternalSource(),!0)},s.getSignature=function(t,e){if(void 0===e&&(e=0),
e>10)return"    ...(omission)";if(null==t||"null"==t)return"";try{var i="";null!=t.caller&&(i=t.toString()!=t.caller.toString()?s.getSignature(t.caller,++e):"    ...(recursion)");var o,r=t.toString(),a=r.indexOf('["');return-1==a?-1==(o=r.indexOf(")"))?"    at "+r+"\n"+i:"    at "+r.substring(0,o+1)+"\n"+i:-1==(o=r.indexOf('"',a+2))?"    at "+r+"\n"+i:"    at "+r.substring(a+2,o)+"\n"+i}catch(e){return t}},s.crossOrigin=function(t){try{void 0!==t&&null!=t||(t={}),null!=this.crossOriginChecked||WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/debug/@skipCrossOrigin"))||(WebSquare.logger.printLog("WebSquare "+t.name+" fail : ["+t.message+"]from : ["+location.toString()+"]"),this.crossOriginChecked=!0)}catch(t){WebSquare.logger.printLog("exception.crossOrigin error.")}}):(s.printError=function(){},s.printStackTrace=function(){},s.parseStack=function(){},s.ieErrorHandler=function(){},s.printInternalSource=function(){},s.ffErrorHandler=function(){},s.getSignature=function(){},s.crossOrigin=function(){})},8926:function(t,e,i){"use strict";i.d(e,{r:function(){return l}});var o=i(2284),s=i(467),r=i(4756),a=i.n(r),n=i(8971),l={isEmpty:function(t){return!t||0===t.length},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},matchTagName:function(t,e,i){if(!t)throw"no json given";return i&&(e=this.applyNS(e,i)),this.matchType(t,WebSquare.Elem.type.element)&&t.N===e},matchType:function(t,e){return t.T&&t.T===e},getChildNodes:function(t){return t.E?t.E:[]},findChild:function(t,e){for(var i=this.getChildNodes(t),o=[],s=0;s<i.length;s++)if(i[s].N===e)return o.push(i[s]);return o},applyNS:function(t,e){var i=t;return e===WebSquare.core._XML_NAMESPACE.SCHEMA?i=t:e===WebSquare.core._XML_NAMESPACE.XFORMS?i="xf:"+t:e===WebSquare.core._XML_NAMESPACE.XHTML||e===WebSquare.core._XML_NAMESPACE.XML||e===WebSquare.core._XML_NAMESPACE.XSL?i=t:e===WebSquare.core._XML_NAMESPACE.EVENTS?i="ev:"+t:e===WebSquare.core._XML_NAMESPACE.W2&&(i="w2:"+t),i},dropNS:function(t){if(t)return t.substring(t.indexOf(":")+1)},getNS:function(t){if(t){var e=t.indexOf(":")>-1?t.indexOf(":"):t.length;return t.substring(0,e)}},walk_DFS:function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.pop(),r=this.getChildNodes(s),a=r.length-1;a>=0;a--)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i}};l.walk_DFS_async=function(){var t=(0,s.A)(a().mark((function t(e,i){var o,s,r,n,l,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=[],s=[e];case 2:if(!(s.length>0)){t.next=12;break}for(r=s.pop(),n=this.getChildNodes(r),l=n.length-1;l>=0;l--)s.push(n[l]);return t.next=8,i(r);case 8:null!=(h=t.sent)&&o.push(h),t.next=2;break;case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),l.walk_BFS=function(t,e){for(var i=[],o=[t];o.length>0;){for(var s=o.shift(),r=this.getChildNodes(s),a=0;a<r.length;a++)o.push(r[a]);var n=e(s);null!=n&&i.push(n)}return i},l.getNodesByTagName=function(t,e,i){if(!t)throw"no json given";i&&(e=this.applyNS(e,i));return this.walk_DFS(t,(function(t){if(t.N===e)return t}))},l.getAttribute=function(t,e){var i=t.A;if(i)return i[e]},l.getAttributes=function(t){var e=t.A;if(!e)return[];var i=[];for(var o in e)e.hasOwnProperty(o)&&i.push(o);return i},l.getAttributesObject=function(t){if(t.A)return t.A},l.appendChild=function(t,e){return t.E?t.E.push(e):t.E=[e],e},l.removeChild=function(t,e){for(var i=this.getChildNodes(t),o=0;o<i.length;o++)if(i[o]===e)return i.splice(o,1);return null},l.createNode=function(t){return{N:t,T:WebSquare.Elem.type.element,A:{}}},l.setAttribute=function(t,e,i){t.A[e]=i},l.removeAttribute=function(t,e){delete t.A[e]},l._object_create=function(t){var e=function(){};return e.prototype=t,new e},l.cloneNode=function(t,e,i,s,r,a){if(null===t||"object"!==(0,o.A)(t))return t;if(!0!==e){var n={};for(var l in t)"parent"!==l&&t.hasOwnProperty(l)&&(n[l]=t[l]);return n}
if("function"==typeof t.clone&&t.clone!==WebSquare.xfControl.prototype.clone)return t.clone(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t.nodeType&&"function"==typeof t.cloneNode)return t.cloneNode(!0);void 0===i&&(i=[],s=[]),null==r?r=0:r++;for(var h,d=i.length,c=0;c<d;c++)if(t===i[c])return s[c];if("[object Array]"==Object.prototype.toString.call(t)){var u=t.slice();i.push(t),s.push(u);for(c=u.length;c--;)u[c]=this.cloneNode(u[c],!0,i,s,r,a);return u}if(!0===a)h={};else{var p=Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__;p||(p=t.constructor.prototype),h=this._object_create(p)}i.push(t),s.push(h);var g={parent:!0};for(var l in t)!0!==g[l]&&(h[l]=this.cloneNode(t[l],!0,i,s,r,a));return h},l.getCDataNodeValue=function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].cdata||""),e},l.getTextNodeValue=function(t){var e="";return t.E&&t.E.length>0&&(e=t.E[0].text||""),e},l.getValue=function(t,e,i){for(var o="",s=this.getChildNodes(t),r=0;r<s.length;r++)if(s[r].N==e){var a=this.getNodesByTagName(t,e)[0];if(!i){var n=this.getChildNodes(a)[0];void 0!==n&&(o=3==n.T?n.text:4==n.T?n.cdata:"");break}o=this.getAttribute(a,i)}return o.wq_trim()},l.findNodes=function(t,e){var i=function(t){return t.A&&t.A===name?t:[]}.bind(this);return this.walk_DFS(t,i)},l.serialize=function(t){return JSON.stringify(t,(function(t,e){if("parent"!==t)return e}))},l.setJSONByPath=function(t,e,i){try{if("string"!=typeof e||null==t)return;for(var s=e.wq_trim().split("."),r=0;t&&("object"==(0,o.A)(t)||"function"==typeof t)&&r<s.length-1;)t=t[s[r++]];t[s[s.length-1]]=i}catch(t){n.Y.printStackTrace(t,null,this)}},l.getJSONByPath=function(t,e){try{if("string"!=typeof e||null==t)return t;for(var i=e.wq_trim().split("."),s=0;t&&("object"==(0,o.A)(t)||"function"==typeof t)&&s<i.length;)t=t[i[s++]];return t}catch(t){n.Y.printStackTrace(t,null,this)}}},3406:function(t,e,i){"use strict";i.d(e,{B:function(){return o}});var o={getMessage:function(t){try{var e="";if(!t)return"";void 0===WebSquareLang[t]?(WebSquare.logger.printLog("'"+t+"' is not defined."),e=""):e=WebSquareLang[t];for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)try{e=e.replace(new RegExp("%"+(i+1),"g"),i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}catch(t){WebSquare.logger.printLog(t.message)}return e}catch(t){WebSquare.logger.printLog(t.message)}}}},2256:function(t,e,i){"use strict";i.d(e,{Y:function(){return d},v:function(){return h}});var o=i(2284),s=i(5461),r=i(2660),a=i(5375),n=i(8971),l=i(3406),h={_skipLog:function(t){t.printLog=function(){},t.changeClientName=function(){},t.sendRemoteLog=function(){},t.printLog1=function(){},t.getFileName=function(){},t.getLogTime=function(){},t.getLog=function(){},t.getErrorLog=function(){},t.clearLog=function(){},t.showLog=function(){},t.saveLog=function(){},t.showDebugMsg=function(){},t.showErrorMsg=function(){},t.alertObject=function(){},t.getObjectStr=function(){},t.showObject=function(){},t._showObject=function(){},t.getFunctionName=function(){},t.showContextMenu=function(){},t.setGlobalDebug1=function(){},t.setGlobalDebug2=function(){},t.getGlobalDebug=function(){return!1},t.getEventDebug=function(){return!1},t.setEventDebug=function(){},t.getVersion=function(){},t.getVersionString=function(){return s.q.ver},t.getFileVersion=function(){},t.getFileVersionString=function(){return s.q.buildDate},t.contextMenuAddRow=function(){},t.contextMenuAddRow1=function(){},t.hideContextMenu=function(){},t.dumpCSS=function(){},t.debug=!1,t.debugKey="",s.q.logMsgArray=[]}};if(!0===s.q.skipLog)h._skipLog(h);else{h._initImport=function(){r.Q.browserCheck.safari?(document.oncontextmenu=function(t){if(t.ctrlKey&&2==t.button)return WebSquare.event.stopEvent(t),!1},document.onmousedown=h.showContextMenu):document.oncontextmenu=h.showContextMenu,document.onclick=h.hideContextMenu},s.q._initImportList.push("logger"),h.printLog=function(t){try{if(!WebSquare.logEnableFlag)return
;if(WebSquare.logMsgArrayLength++,WebSquare.isPrintLog){s.q.logMsgCurrentLength+=t.length,s.q.logMsgLength+=t.length,(WebSquare.logMsgArray.length>500||s.q.logMsgCurrentLength>5e4)&&(delete s.q.logMsgArray,s.q.logMsgArray=[],s.q.logMsgCurrentLength=t.length,WebSquare.logMsgArray.push(h.getLogTime()+" "+h.getFileName()+"] Delete logs for reducing memory usage. Total logs : "+s.q.logMsgArrayLength+", bytes : "+WebSquare.logMsgLength));var e=r.Q.getLogTime(),i=" "+h.getFileName()+"] "+t;WebSquare.logMsgArray.push(e+i),WebSquare.printConsole&&console.log(e+i),s.q.remoteConsole&&WebSquare.remoteLogMsgArray.push(e+s.q.logFileName+i)}}catch(t){console.error(t)}},h.print=function(){window.print()},h.changeClientName=function(){if(WebSquare.logEnableFlag){h.clientName||(h.clientName=r.Q.getCookie("remote_client_name"),h.clientName||(h.clientName="Client_"+parseInt(s.q.safeRandom()),r.Q.setCookie("remote_client_name",h.clientName)));var t=prompt(l.B.getMessage("E_logger_changeClientName"),h.clientName);t&&(h.clientName=t,r.Q.setCookie("remote_client_name",h.clientName))}},s.q.remoteConsole&&(h.sendRemoteLog=function(t){if(WebSquare.logEnableFlag&&(h.clientName||(h.clientName=r.Q.getCookie("remote_client_name"),h.clientName||(h.clientName="Client_"+parseInt(s.q.safeRandom()),r.Q.setCookie("remote_client_name",h.clientName))),s.q.remoteConsole)){try{if(WebSquare.remoteLogMsgArray.length>0){t=JSON.stringify({clientName:h.clientName,logs:s.q.remoteLogMsgArray});s.q.remoteLogMsgArray=[];var e=null;r.Q.useActiveXObject?e=new ActiveXObject(a.I._XMLHTTP_PROGIDS[0]):window.XMLHttpRequest&&(e=new XMLHttpRequest),e.open("POST",s.q._resourceURI+"fiddle/logAggregator.jsp",!1),e.send(t),e=null}}catch(t){n.Y.printStackTrace(t)}window.setTimeout("logger.sendRemoteLog()",1e3)}},window.setTimeout("logger.sendRemoteLog()",1e3)),h.printLog1=function(t){try{WebSquare.logEnableFlag&&WebSquare.logMsgArray.push("             "+h.getFileName()+"] "+t)}catch(t){console.error(t)}},h.getFileName=function(){if(WebSquare.logEnableFlag){var t=location.pathname;try{var e=t.lastIndexOf("/");e>-1&&e<t.length-1&&(t=t.substring(e+1)),(e=t.lastIndexOf("."))>-1&&(t=t.substring(0,e))}catch(t){n.Y.printStackTrace(t)}return t}},h.getLogTime=function(t){if(WebSquare.logEnableFlag){var e=null,i=(e="undefined"==t||null==t?new Date:new Date(t)).getTime(),o=i-s.q.logTime,r=WebSquare.text.fillZero(e.getHours(),2)+":"+WebSquare.text.fillZero(e.getMinutes(),2)+":"+WebSquare.text.fillZero(e.getSeconds(),2)+"."+WebSquare.text.fillZero(e.getMilliseconds(),3);return o<1e5?(s.q.logTotalTime+=o,r+=" "+WebSquare.text.fillZero(o,5)+" "+WebSquare.text.fillZero(WebSquare.logTotalTime,6)):r+=" 00000 000000",s.q.logTime=i,r}},h.getLog=function(t){if(WebSquare.logEnableFlag){if(t){var e=h.getLog();return h.clearLog(),e}var i="";try{window.parent!==window.self&&window.parent.WebSquare&&""!=(i=window.parent.logger.getLog())&&(i="Parent Log["+window.parent.name+"] \n"+i)}catch(t){n.Y.printStackTrace(t)}try{return""==i?WebSquare.logMsgArray.join("\n"):WebSquare.logMsgArray.join("\n")+"\n\n\n"+i}catch(t){n.Y.printStackTrace(t)}}},h.getErrorLog=function(){if(WebSquare.logEnableFlag){s.q.errorLogMsgArray=[];for(var t=0;t<WebSquare.logMsgArray.length;++t)(WebSquare.logMsgArray[t].indexOf("")>-1||WebSquare.logMsgArray[t].indexOf("")>-1||WebSquare.logMsgArray[t].indexOf("Runtime Error")>-1||WebSquare.logMsgArray[t].indexOf("Error occurs")>-1||WebSquare.logMsgArray[t].indexOf("error occurred")>-1)&&WebSquare.errorLogMsgArray.push(WebSquare.logMsgArray[t]);var e="";try{window.parent!==window.self&&window.parent.WebSquare&&""!=(e=window.parent.logger.getErrorLog())&&(e="\n----------------------------------------Parent Log["+window.parent.name+"]----------------------------------------\n"+e)}catch(t){n.Y.printStackTrace(t)}try{
return""==e?WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n"):WebSquare.errorLogMsgArray.join("\n--------------------------------------------------------------------------------\n")+"\n\n\n"+e}catch(t){n.Y.printStackTrace(t)}}},h.clearLog=function(){var t=h.getLog();try{window.parent!==window.self&&window.parent.WebSquare&&window.parent.logger.clearLog()}catch(t){n.Y.printStackTrace(t)}try{s.q.logMsgArray=[]}catch(t){n.Y.printStackTrace(t)}return t},h.showLog=function(){if(WebSquare.logEnableFlag){var t,e="";if(WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain)),r.Q.browserCheck.android||r.Q.browserCheck.iphone||r.Q.browserCheck.ipad||r.Q.browserCheck.ipod||r.Q.browserCheck.blackberry)(t=a.I.getConfiguration("logMsgMobileURL"))||(t=s.q.baseURI+r.Q.inquiresPath("message/logMsgMobile.html")),t+=e,window.open(t);else(t=a.I.getConfiguration("logMsgURL"))||(t=s.q.baseURI+r.Q.inquiresPath("message/logMsg.html")),t+=e,window.open(t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}},h.saveLog=function(){if(WebSquare.logEnableFlag){var t=h.getLog(),e=a.I.getXMLHTTPObject();e.open("POST",s.q._resourceURI+"engine/servlet/saveLog.jsp",!1),e.send(t),e=null}},h.showDebugMsg=function(t,e,i){if(WebSquare.logEnableFlag){var l;if(void 0!==e&&(t._config=e),void 0!==i&&(t.title=i),"object"==(0,o.A)(t))l=t;else{l=new Object;try{l["debug info"]=null!=t?t.toString():""}catch(t){n.Y.printStackTrace(t)}}var h="";WebSquare.domain&&(h="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var d=a.I.getConfiguration("debugMsgURL");d||(d=s.q.baseURI+r.Q.inquiresPath("message/debugMsg.html")),WebSquare.net.showWindow(d+h,l,"dialogHeight: 700pt; dialogWidth: 580pt; edge: Raised; center: Yes; help: No; edge: raised; resizable: Yes; status: No;")}},h.showErrorMsg=function(t){if(WebSquare.logEnableFlag){var e="";WebSquare.domain&&(e="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=a.I.getConfiguration("errorMsgURL");i||(i=s.q.baseURI+r.Q.inquiresPath("message/errorMsg.html")),WebSquare.net.showWindow(i+e,t,"dialogHeight: 300pt; dialogWidth: 280pt; edge: Raised; center: Yes; help: No; resizable: Yes; status: No;")}},h.alertObject=function(t,e){var i="";try{if("string"==typeof t)i=t;else if("object"==(0,o.A)(t))if(null==t)i+=" null";else try{for(var s in t){var r=s+"               ";r=r.substring(0,30);try{i+=r+":  "+t[s]+"\n"}catch(t){n.Y.printStackTrace(t)}}}catch(t){i+=l.B.getMessage("E_logger_InnerBlindObject")}}catch(t){n.Y.printStackTrace(t)}1==e?$l(i):alert(i)},h.getObjectStr=function(t,e,i){try{if(!WebSquare.logEnableFlag)return;for(var s="",r=0;r<t;r++)s+="\t";if(t>i.maxDepth)return s+"[...]";var a="";if("string"==typeof e||"number"==typeof e)a=e;else if("object"==(0,o.A)(e))if(null==e)a+=" null";else try{for(var d in e){var c=d+"               ";c=c.substring(0,25);try{if(isNaN(d)){if(i.exclude&&i.exclude.indexOf(d)>-1)continue;if(i.include&&-1==i.include.indexOf(d))continue}if(!i.includeFunction&&"function"==typeof e[d])continue;if("object"==(0,o.A)(e[d])&&null!=e[d]){if(!i.includeFunction&&0==(d+"").indexOf("on"))continue;if(!i.includeFunction&&void 0!==e[d].innerHTML){a+=s+c+": [DOM Obejct]\n";continue}if(e[d].documentElement||e[d].ownerDocument){a+=s+c+": [XML Obejct]\n"+s+WebSquare.xml.serialize(e[d])+"\n";continue}a+=s+c+":\n"+h.getObjectStr(t+1,e[d],i)+"\n"}else a+=s+c+": "+e[d]+"\n"}catch(t){n.Y.printStackTrace(t)}}}catch(t){a+=l.B.getMessage("E_logger_InnerBlindObject")}return a}catch(t){n.Y.printStackTrace(t)}},h.showObject=function(t,e){if(WebSquare.logEnableFlag){var i=new Object,s="";try{if(WebSquare.xml.isDocument(t))try{s+=WebSquare.xml.indent(t)}catch(t){s+=l.B.getMessage("E_logger_InnerBlindObject")}else if("string"==typeof t)s=t;else if("object"==(0,o.A)(t))if(null==t)s+=" null";else try{for(var r in t){var a=r+"               "
;if(a=a.substring(0,15),null==t[r])s+=a+":  null\n";else if(WebSquare.xml.isDocument(t[r]))s+=a+":  \n"+WebSquare.xml.indent(t[r]);else if("object"==(0,o.A)(t[r]))try{s+=a+":  "+h._showObject(t[r],1)}catch(t){s+=a+":  [object]\n"}else try{"function"==typeof t[r]?s+=a+":  "+n.Y.getSignature(t[r])+"\n":s+=a+":  "+t[r]+"\n"}catch(t){s+=a+":  \n"}}}catch(t){s+=l.B.getMessage("E_logger_InnerBlindObject")}}catch(t){n.Y.printStackTrace(t)}null==e||""==e?i.Object=s:i[e]=s,h.showDebugMsg(i,"text",l.B.getMessage("E_logger_ObjectInfo"))}},h._showObject=function(t,e){if(WebSquare.logEnableFlag){for(var i="\n",s="",r="",a=0;a<e;a++)s+="\t";try{if(WebSquare.xml.isDocument(t))try{i+=s+r+":  \n"+WebSquare.xml.indent(t)}catch(t){i+=l.B.getMessage("E_logger_InnerBlindObject")}else if("object"==(0,o.A)(t))if(null==t)i+=" null";else for(var d in t)if(r=(r=d+"               ").substring(0,15),null==t[d])i+=r+":  null\n";else if(WebSquare.xml.isDocument(t[d]))i+=s+r+":  \n"+WebSquare.xml.indent(t[d]);else if("object"==(0,o.A)(t[d]))try{i+=s+r+":  \n"+h._showObject(t[d],e++)}catch(t){i+=s+r+":  [object]\n"}else try{"function"==typeof t[d]?i+=s+r+":  "+n.Y.getSignature(t[d])+"\n":i+=s+r+":  "+t[d]+"\n"}catch(t){i+=s+r+":  \n"}}catch(t){i+=l.B.getMessage("E_logger_InnerBlindObject")}return i+="\n"}},h.getFunctionName=function(t){if(null==t||"null"==t)return"";try{var e=t.toString();if(-1==e.indexOf("anonymous")){var i=e.indexOf("function"),o=e.indexOf("(");return e.substring(i+8,o).wq_trim()}}catch(e){return t}return""},r.Q.browserCheck.android||r.Q.browserCheck.iphone||r.Q.browserCheck.ipad||r.Q.browserCheck.ipod||r.Q.browserCheck.blackberry?(h.getGlobalDebug=function(){return!1},h.getEventDebug=function(){return!1}):(r.Q.browserCheck.moz||r.Q.browserCheck.chrome||r.Q.browserCheck.ieAllVersion||r.Q.browserCheck.opera||r.Q.browserCheck.safari)&&(h.showContextMenu=function(t){if(WebSquare.logEnableFlag&&!1!==WebSquare.logEnableContextMenu){t=t||event;var e="block"==a.I.getConfiguration("debugMenu")||"blockAll"==a.I.getConfiguration("debugMenu");if(a.I.browserCheck.moz||a.I.browserCheck.chrome){if(!t.ctrlKey||3!=t.which||e&&!WebSquare.logEnableContextMenu)return!0}else if(a.I.browserCheck.ieAllVersion){if(!t.ctrlKey&&!t.crtlLeft||e&&!WebSquare.logEnableContextMenu)return!0}else if(a.I.browserCheck.opera){if(!(t.ctrlKey&&t.shiftKey&&(!e||WebSquare.logEnableContextMenu)||t.ctrlKey&&t.button==2(!e||WebSquare.logEnableContextMenu)))return!0}else if(a.I.browserCheck.safari&&(!t.ctrlKey||2!=t.button||e&&!WebSquare.logEnableContextMenu))return!0;var i=window.innerWidth-t.clientX,o=window.innerHeight-t.clientY,s=document.getElementById("_contextMenuLayer");void 0!==s&&null!=s||(s=document.createElement("div"),document.body.insertBefore(s,null),s.id="_contextMenuLayer",s.style.position="absolute"),s.style.left=i<182?(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX-182+"px":(window.pageXOffset||document.documentElement.scrollLeft)+t.clientX+"px",s.style.top=o<176?(window.pageYOffset||document.documentElement.scrollTop)+t.clientY-176+"px":(window.pageYOffset||document.documentElement.scrollTop)+t.clientY+"px";var r=JSON.stringify({x:WebSquare.event.getClientX(t),y:WebSquare.event.getClientY(t)});s.style.zIndex="20000",s.style.visibility="visible",s.style.display="";var n="";n+="<div onselectstart='return false' style='position:relative; overflow-x:hidden; overflow-y: auto; width:175px;height:250px; border:4px solid #e7e7e7; '>",n+="<table width='175' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>",n+=h.contextMenuAddRow("WebSquare.logger.showLog",l.B.getMessage("E_logger_ContextmenuSeeLog"),r),n+=h.contextMenuAddRow1("WebSquare.util.getAddress",l.B.getMessage("E_logger_ContextmenuSeeAddress"),r),n+=h.contextMenuAddRow("WebSquare.util.getRQ",l.B.getMessage("E_logger_ContextmenuSeeQR"),r),n+=h.contextMenuAddRow1("WebSquare.util.viewSource",l.B.getMessage("E_logger_ContextmenuSeeSource"),r),
n+=h.contextMenuAddRow("WebSquare.util.viewCollection",l.B.getMessage("E_logger_ContextmenuSeeCollection"),r),n+=h.contextMenuAddRow("WebSquare.util.viewSubmission",l.B.getMessage("E_logger_ContextmenuSeeSubmission"),r);a.I.getConfiguration("/WebSquare/debug/@fiddle");h.globalDebug1?n+=h.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",l.B.getMessage("E_logger_ContextmenuStopDebugOnScreen"),r):n+=h.contextMenuAddRow1("WebSquare.logger.setGlobalDebug1",l.B.getMessage("E_logger_ContextmenuStartDebugOnScreen"),r),WebSquare.logger.eventDebug?n+=WebSquare.logger.contextMenuAddRow("WebSquare.logger.setEventDebug()",WebSquare.language.getMessage("E_logger_ContextmenuStopEventDebug"),r):n+=WebSquare.logger.contextMenuAddRow("WebSquare.logger.setEventDebug()",WebSquare.language.getMessage("E_logger_ContextmenuStartEventDebug"),r),n+=h.contextMenuAddRow1("WebSquare.logger.print",l.B.getMessage("E_logger_ContextmenuPrint"),r),n+=h.contextMenuAddRow("WebSquare.util.reinitializeTop",l.B.getMessage("E_logger_ContextmenuPageReload"),r),n+=h.contextMenuAddRow("WebSquare.util.reinitializeWframe",l.B.getMessage("E_logger_ContextmenuPageReloadWframe"),r,"[false, "+r+"]"),n+=h.contextMenuAddRow1("parent.WebSquare.logger.getFileVersion",l.B.getMessage("E_logger_ContectmenuFileInfo"),r),n+=h.contextMenuAddRow("WebSquare.logger.getVersion",l.B.getMessage("E_logger_ContextmenuVersion"),r),n+="</table></div>",a.I._safeInnerHTML(s,n);for(var d=s.getElementsByTagName("td"),c=0;c<d.length;c++)d[c].getAttribute("data-onclick")&&WebSquare.event.addListener(d[c],"onclick",(function(){var t=this.getAttribute("data-onclick");t=t.replace(/[\(][\s]*[\)]/g,"");var e=this.getAttribute("data-point");h.hideContextMenu(e);var i=this.getAttribute("data-param"),o=[];i?o=JSON.parse(i):o.push(e);var s=WebSquare.util.getGlobalFunction(t);"function"==typeof s&&s.apply(s,o)}));return!1}},h.setGlobalDebug1=function(){WebSquare.logEnableFlag&&(h.globalDebug1=!h.globalDebug1,h.hideContextMenu())},h.setGlobalDebug2=function(){if(WebSquare.logEnableFlag){if(h.getGlobalDebug())WebSquare.cookie.setCookie("globalDebug","false");else"debug"==prompt(l.B.getMessage("E_logger_EnterPassword"),"")?WebSquare.cookie.setCookie("globalDebug","true"):(WebSquare.cookie.setCookie("globalDebug","false"),alert(l.B.getMessage("E_logger_IncorrectPassword")));h.hideContextMenu()}},h.getGlobalDebug=function(){try{if(!WebSquare.logEnableFlag)return;var t=parseInt(WebSquare.cookie.getCookie("lastAccess"),10);isNaN(t)&&(t=(new Date).getTime());var e=(new Date).getTime();return e-t<12e5?(WebSquare.cookie.setCookieAsync("lastAccess",e+""),"true"==WebSquare.cookie.getCookie("globalDebug")):(WebSquare.cookie.setCookie("globalDebug","false"),!1)}catch(t){n.Y.printStackTrace(t)}return!1},h.getEventDebug=function(){try{if(!WebSquare.logEnableFlag)return;return"true"==WebSquare.cookie.getCookie("eventDebug")}catch(t){n.Y.printStackTrace(t)}return!1},h.setEventDebug=function(){WebSquare.logEnableFlag&&(h.eventDebug=!h.eventDebug,WebSquare.cookie.setCookie("eventDebug",h.eventDebug),h.hideContextMenu())},h.getVersion=function(){WebSquare.logEnableFlag&&alert("WebSquare AI v6.0\nWebSquare AI Engine v6.0.0\n"+WebSquare.text.BASE64Decode(WebSquare.ver)+"\n\n  Copyright  2006  INSWAVE Systems, Inc All Rights Reserved.\n")},h.getVersionString=function(){return WebSquare.text.BASE64Decode(WebSquare.ver)},h.getFileVersion=function(){WebSquare.logEnableFlag&&alert("FileName : "+s.q.w2xPath+"\nBuildDate : "+WebSquare.buildDate)},h.getFileVersionString=function(){return s.q.buildDate},h.contextMenuAddRow=function(t,e,i,o,s){if(WebSquare.logEnableFlag){var r="font-family: Tahoma, Verdana, arial,helvetica; font-size: 11px; color: #222222; line-height: normal;background-color:#FFFFFF; color:#222222; width:100%; height:19px; text-decoration:none; padding:3px 3px 1px 3px; cursor:pointer; ";!0===s&&(r+="border-top:1px dotted #9fbcd4; ")
;var a='<tr><td onmouseover=\'this.style.backgroundColor="b8d5f2";this.style.color="003a89";\' onmouseout=\'this.style.backgroundColor="#FFFFFF";this.style.color="222222";\' ';a+="style='"+r+"'";var n="";return o&&(n=" data-param='"+o+"'"),a+=" data-point='"+i+"' data-onclick='"+t+"'"+n+">"+e+"</td></tr>"}},h.contextMenuAddRow1=function(t,e,i,o){return h.contextMenuAddRow(t,e,i,o,!0)},h.hideContextMenu=function(t){if(WebSquare.logEnableFlag&&(WebSquare&&a.I&&a.I.browserCheck))if(a.I.browserCheck.moz||a.I.browserCheck.chrome||a.I.browserCheck.ieAllVersion)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden",e.style.display="none");else if(a.I.browserCheck.opera||a.I.browserCheck.safari){var e;if(!t||t&&!t.ctrlKey)void 0!==(e=document.getElementById("_contextMenuLayer"))&&null!=e&&(e.style.visibility="hidden",e.style.display="none")}}),h.dumpCSS=function(){if(WebSquare.logEnableFlag&&a.I.browserCheck.ie)for(var t=document.styleSheets,e=0;e<t.length;e++){var i=t[e];alert(i.href+"/n"+i.cssText)}},h.enableLog=function(){s.q.logEnableFlag=!0},h.disableLog=function(){h.clearLog(),s.q.logEnableFlag=!1},h.enableContextMenu=function(){"blockAll"!=a.I.getConfiguration("debugMenu")&&(s.q.logEnableContextMenu=!0)},h.disableContextMenu=function(){"function"==typeof h.hideContextMenu&&h.hideContextMenu(),s.q.logEnableContextMenu=!1},h.debug=!1,h.debugKey="";var d={getScope:function(t){try{for(var e="string"==typeof t?document.getElementById(t):t,i=window;null!=e&&e!=document.body;){var o=WebSquare.idToUUID[e.getAttribute("id")];if(null!=o){var s=WebSquare.idCache[o];s&&s.scope_obj&&(i=s.scope_obj.scope);break}e=e.parentNode}return i}catch(t){n.Y.printStackTrace(t,null,this)}},getFrame:function(t){try{return WebSquare.debug.getScope(t).scwin.$w.getFrame().id}catch(t){n.Y.printStackTrace(t,null,this)}}}}},8683:function(t,e,i){"use strict";i.d(e,{E:function(){return h},Q:function(){return l}});var o=i(5461),s=i(8971),r=i(5375),a=i(1204),n=i(2338),l={checkMaxLength:function(t,e){if(void 0!==t&&void 0!==t.maxLength&&t.maxLength>-1&&e.length>t.maxLength){var i=e.length-t.maxLength;e=e.substring(i)}return e},checkAllowChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)&&(o+=a)}return o}return i},checkIgnoreChar:function(t,e){var i=t,o="";if(void 0!==e&&null!=e&&""!=e){for(var s=new RegExp("["+e+"]"),r=0;r<i.length;r++){var a=i.charAt(r);null!=a.match(s)||(o+=a)}return o}return i},getSelection:function(t){var e={start:0,end:0};try{if("selectionStart"in t)e.start=t.selectionStart,e.end=t.selectionEnd;else{var i=document.selection.createRange().getBookmark(),o=t.createTextRange();o.moveToBookmark(i);var r=t.createTextRange();r.collapse(!0),r.setEndPoint("EndToStart",o);var a=r.text.length,n=o.text.length;e.start=a,e.end=a+n}}catch(t){s.Y.printStackTrace(t)}return e},setSelection:function(t,e){try{if(t.setSelectionRange)t.focus(),t.setSelectionRange(e.start,e.end);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e.end),i.moveStart("character",e.start),i.select()}}catch(e){s.Y.printStackTrace(e,null,this),null!=t&&null!=t.focus&&t.focus()}},getCaretPos:function(t){var e=0;try{if(a.Z.isIE())for(var i=document.selection.createRange().duplicate(),o=t.createTextRange();i.compareEndPoints("StartToStart",o)>0;)i.moveStart("character",-1),e++;else e=t.selectionStart}catch(t){s.Y.printStackTrace(t)}return e},setCaretPos:function(t,e){try{if(a.Z.isIE()){var i=t.createTextRange();i.move("character",e),i.select()}else t.selectionStart=e,t.selectionEnd=e}catch(t){s.Y.printStackTrace(t)}},checkString:function(t,e){var i=t.render.value;if(r.I.browserCheck.moz){if(0==e.charCode)return;if(-1!=t.maxLength&&i.length>=t.maxLength){if(t.render.selectionStart!=t.render.selectionEnd)return;return void e.preventDefault()}}var o=e.charCode?e.charCode:e.keyCode
;if(!(1==e.ctrlKey&&86==o||1==e.ctrlKey&&118==o)){var s=String.fromCharCode(o);if(void 0!==t.ignoreChar&&null!=t.ignoreChar&&""!=t.ignoreChar){var a=new RegExp("["+t.ignoreChar+"]");if(null!=s.match(a))return r.I.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(void 0!==t.allowChar&&null!=t.allowChar&&""!=t.allowChar){a=new RegExp("["+t.allowChar+"]");if(null==s.match(a))return r.I.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}if(""!=t.characterCase&&"upper"==t.characterCase&&e.keyCode>=97&&e.keyCode<=122&&(e.keyCode-=32),""!=t.characterCase&&"lower"==t.characterCase&&n.f.keyCode>=65&&n.f.keyCode<=90&&(n.f.keyCode+=32),"number"==t.valueType){if(0!=t.getCaretPos()&&(45==n.f.keyCode||43==n.f.keyCode))return r.I.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(("+"==i.charAt(0)||"-"==i.charAt(0))&&0==t.getCaretPos())return r.I.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault();if(i.indexOf(".")>-1&&46==e.keyCode)return r.I.browserCheck.ie?void(e.returnValue=!1):void e.preventDefault()}}},validateValue:function(t,e){return"true"==e.mandatory&&""==t.wq_trim()?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be filled "),!1):-1!=e.minLength&&t.length<e.minLength?(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or more than "+e.minLength),!1):!(-1!=e.maxLength&&t.length>e.maxLength)||(e.isValid="false","true"==e.displayMessage&&(e.inValidMessage=e.id+" has to be same or less than "+e.maxLength),!1)},validateEffect:function(t,e){""!=e.invalid_background_color&&(e.render.style.backgroundColor=e.invalid_background_color),""!=e.invalid_color&&(e.render.style.color=e.invalid_color)},getPosition:function(t){var e=t.indexOf("."),i=0;if(e>-1){for(var o=t.substring(e),s=0;s<o.length;s++){"#"!=(a=o.charAt(s))&&"0"!=a||i++}i-=2*i}else for(var r=0;r<t.length;r++){var a;"0"==(a=t.charAt(r))&&i++}return i},checkComma:function(t){return-1!=t.indexOf(",")},formatCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g,o);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr((e.lastIndexOf("#")>e.lastIndexOf("0")?e.lastIndexOf("#"):e.lastIndexOf("0"))+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatFloat:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return t+"";s||(s=","),r||(r=".");var a=new RegExp("\\[("+r+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g,o);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatEuroCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s="."),r||(r=",")
;var a=new RegExp("\\[("+s+"*)\\]","g"),n=new RegExp("["+r+"]+[#0]+"),l=new RegExp("["+s+"]+[#0]+"),h=new RegExp("["+r+"][0-9]*"),d=e.match(a),c=(e=e.replace(a,"")).match(n),u=(c=null!=c?c.join(""):r).length-1,p=(e=e.replace(n,"")).match(l),g=(p=null!=p?p.join(""):s).length-1;e=e.replace(l,"");var m=new WebSquare.numberFormatter(t,s,r);if(o){null==d&&(d="[floor]");var f=t.match(h);if(c=r,f&&f.toString().length>=2)for(var b=f.toString().length,y=0;y<b-1;y++)c+="0"}m.setPrecision(u,d),m.cutZeroDecimal(c);var v=m.getValueWithDelimiter(s,g);o&&t.slice(-1)==r&&(v+=r),!o||"-"!==t&&"+"!==t||(v=t);var w=e.substr(0,e.indexOf("#")),S=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return w&&(v=w+v),S&&(v+=S),v},formatRupeeCurrency:function(t,e,i,o,s,r){var a=e;if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";if(s||(s=","),r||(r="."),e.indexOf(";")>-1){for(var n=e.split(";"),l="",h=0;h<n.length;h++){var d=(l=n[h].wq_trim()).match(WebSquare.text.formatRupeeCRe1);if(d&&d.length>0){var c=d[0].replace("[","").replace("]","");if(new Function("return Number("+t+")"+c)())break}}if(l)return WebSquare.text.formatRupeeCurrency(t,l.replace(WebSquare.text.formatRupeeCRe1,""),i,o,s,r)}var u=new RegExp("\\[("+r+"*)\\]","g"),p=new RegExp("["+r+"]+[#0]+"),g=new RegExp("["+s+"]+[#0]+"),m=new RegExp("["+r+"][0-9]*"),f=e.match(u),b=(e=e.replace(u,"")).match(p),y=(b=null!=b?b.join(""):r).length-1,v=(e=e.replace(p,"")).substr(0,e.indexOf("#")),w=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#")),S=e.match(g);S=null!=S?S.join(""):s,e=e.replace(g,"");var _=new WebSquare.numberFormatter(t,s,r);if(o){null==f&&(f="[floor]");var C=t.match(m);if(b=r,C&&C.toString().length>=2){var x=C.toString().length;for(h=0;h<x-1;h++)b+="0"}}_.setPrecision(y,f),_.cutZeroDecimal(b);var I=_.getFormattedValue(a);return o&&t.slice(-1)==r&&(I+=r),!o||"-"!==t&&"+"!==t||(I=t),v&&(I=v+I),w&&(I+=w),I},formatTengeCurrency:function(t,e,i,o,s,r){if(""==(t+="").wq_trim())return"";if(void 0===e||null==e||""==e)return parseFloat(t)+"";s||(s=" "),r||(r=",");var a="";t.length>1&&("+"==t.charAt(0)||"-"==t.charAt(0))&&(a=t.charAt(0),t=t.substr(1));var n=new RegExp("\\[(.*)\\]","g"),l=new RegExp("["+r+"]+[#0]+"),h=new RegExp("["+s+"]+[#0]+"),d=new RegExp("["+r+"][0-9]*"),c=e.match(n),u=(e=e.replace(n,"")).match(l),p=(u=null!=u?u.join(""):r).length-1,g=(e=e.replace(l,"")).match(h),m=(g=null!=g?g.join(""):s).length-1;e=e.replace(h,"");var f=new WebSquare.numberFormatter(t,s,r);if(o){null==c&&(c="[floor]");var b=t.match(d);if(u=r,b&&b.toString().length>=2)for(var y=b.toString().length,v=0;v<y-1;v++)u+="0"}f.setPrecision(p,c),f.cutZeroDecimal(u);var w=f.getValueWithDelimiter(s,m);o&&t.slice(-1)==r&&(w+=r),!o||"-"!==t&&"+"!==t||(w=t);var S=e.substr(0,e.indexOf("#")),_=e.substr(e.lastIndexOf("#")+1,e.length-1-e.lastIndexOf("#"));return S&&(w=S+w),_&&(w+=_),a+w},formatDate:function(t,e,i,o){if(void 0!==i&&null!=i&&""!=i||(i="yyyyMMdd"),!o&&t.length!==i.length)return t;void 0!==e&&null!=e&&""!=e||(e="yyyy/MM/dd");for(var s=0;s<t.length&&s<i.length;s++){var r=i.charAt(s),a=t.charAt(s);"yMdHmS".indexOf(r)>=0&&(e=e.replace(r,a))}if(e.indexOf("E")>=0){var n=WebSquare.date._parseDate(t,i);if(WebSquare.date._getDay(n.slice(0,3).join(""),!1)>=0){var l=new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5]);e=WebSquare.date.getFormattedDate(l,e)}else e=e.wq_replaceAll("E","")}return o&&(e=(e=e.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)(y|M|d|H|m|S)/g,"")).replace(/(y|M|d|H|m|S)/g,"")),e},formatTime:function(t,e,i){if(void 0!==i&&null!=i&&""!=i||(i="HHmmss"),void 0!==e&&null!=e&&""!=e||(e="HH:mm"),""==t)return"";for(var o=0;o<t.length&&o<i.length;o++){var s=i.charAt(o),r=t.charAt(o);"Hms".indexOf(s)>=0&&(e=e.replace(s,r))}return e=e.replace(/H|m|s/g,"0")},formatTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return""
;if(i)var o=new RegExp("[^"+i+"]","g"),s=t.replace(o,"");else s=t.replace(/\D/g,"");if(void 0===s||null==s||""==s)return"";for(var r=e,a=0,n=0;n<r.length;n++)if("#"==r[n]&&(r=n>0?r.substr(0,n)+s[0]+r.substr(n+1):s[0]+r.substr(n+1),s.length>0&&(s=s.substr(1)),0==s.length)){a=n+1;break}return a==r.length-1&&"#"!==r[a]?r=r.substr(0,a+1):0!==a&&(r=r.substr(0,a)),r},formatReverseTextMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var o=0;o<e.length;o++)"#"==e[o]&&1;if(i)var s=new RegExp("[^"+i+"]","g"),r=t.replace(s,"");else r=t.replace(/\D/g,"");if(void 0===r||null==r||""==r)return"";var a=e,n=0;for(o=a.length-1;o>=0;o--)if("#"==a[o]&&(a=o>0?a.substr(0,o)+r[r.length-1]+a.substr(o+1):r[r.length-1]+a.substr(o+1),0==(r=r.substr(0,r.length-1)).length)){n=o;break}return 1==n&&"#"!==a[0]?a=a.substr(0):0!==n&&(a=a.substr(n)),a},formatNumberMask:function(t,e,i){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";var o=t.replace(/\D/g,"");if("-"!==t&&(void 0===o||null==o||""==o))return"";for(var s=o.length-1;s>=0&&"0"==o[s];s--);if(o=o.substr(0,s+1),/^[0\D]+$/g.test(t)&&"0"==e[0]){var r=0;"-"==t[0]&&(r=1);for(s=r;s<t.length&&("0"==t[s]&&"0"==e[s]);s++);o=1==r?t.substr(1,s-1):t.substr(0,s)}if("-"!==t&&(void 0===o||null==o||""==o))return"";var a=e;if("-"==t[0]&&1==t.length)a=t[0];else{var n=0;for(s=0;s<a.length;s++)if(("#"==a[s]||"0"==a[s])&&(a=s>0?a.substr(0,s)+o[0]+a.substr(s+1):o[0]+a.substr(s+1),o.length>0&&(o=o.substr(1)),0==o.length)){n=s+1;break}for(;n<a.length;){if("#"==a[n]){for(n-=1;!/\d/g.test(a[n]);)n-=1;a=a.substr(0,n+1);break}n+=1}}return"-"==t[0]&&1!=t.length?t[0]+a:a},formatReverseNumberMask:function(t,e){if(void 0===e||null==e||""==e)return t;if(void 0===t||null==t||""==t)return"";for(var i=0,o=0;o<e.length;o++)"#"==e[o]&&(i+=1),"0"==e[o]&&(i+=1);var s=t.replace(/\D/g,"");if("-"!==t&&(void 0===s||null==s||""==s))return"";for(o=0;o<s.length&&"0"==s[o];o++);if(s=s.substr(o),/^[0\D]+$/g.test(t)&&(s="0"),s.length>i&&(s=s.substr(0,s.length-1)),"-"!==t&&(void 0===s||null==s||""==s))return"";var r=e;if("-"==t[0]&&1==t.length)r=t[0];else{var a=0;for(o=r.length-1;o>=0;o--)if(("#"==r[o]||"0"==r[o])&&(r=o>0?r.substr(0,o)+s[s.length-1]+r.substr(o+1):s[s.length-1]+r.substr(o+1),0==(s=s.substr(0,s.length-1)).length)){a=o-1;break}for(;a>=0;){if("#"==r[a]){for(;!/\d/g.test(r[a]);)a+=1;r=r.substr(a);break}a-=1}}return"-"==t[0]&&1!=t.length?t[0]+r:r},formatText:function(t,e){if(t+="",void 0===e||null==e||""==e)return t;for(var i="",o=t.length-1,s=e.length-1;s>=0&&o>=0;s--){var r=e.charAt(s);"#"!=r?i=r+i:(i=t.charAt(o)+i,o--)}return o>-1&&o<t.length&&(i=t.substring(0,o+1)+i),s>-1&&-1==e.substring(0,s+1).indexOf("#")&&(i=e.substring(0,s+1)+i),i},format:function(t,e,i,o){return"number"==i?WebSquare.text.formatCurrency(t,e):"currency"==i?WebSquare.text.formatEuroCurrency(t,e,o):"date"==i?WebSquare.text.formatDate(t,e,o):"time"==i?WebSquare.text.formatTime(t,e,o):WebSquare.text.formatText(t,e)},getValidString:function(t,e,i,o){return t},unformatCurrency:function(t,e){for(var i="",o=e.length,s=0;s<o;s++){var r=e.charAt(s);","!=r&&("$"==r?-1==t.indexOf("$")&&(i+=r):"\\"==r?-1==t.indexOf("\\")&&(i+=r):"+"==r?-1==t.indexOf("+")&&(i+=r):"-"==r?-1==t.indexOf("-")&&(i+=r):i+=r)}return i},unformatDate:function(t,e){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!=t.length)return e;var i="",o=t.indexOf("yyyy"),s=t.indexOf("MM"),r=t.indexOf("dd");return-1!=o&&(i+=e.substr(o,4)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i},unformatDate2:function(t,e,i){if(void 0!==t&&null!=t&&""!=t||(t="yyyy/MM/dd"),e.length!==t.length)return e;void 0!==i&&null!=i&&""!=i||(i=t.replace(/(\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s)/g,"")),e=e.replace(/[a-zA-Z]+/g,"");for(var o=0;o<t.length&&o<e.length;o++){var s=t.charAt(o),r=e.charAt(o);"yMdHmS".indexOf(s)>=0&&(i=i.replace(s,r))}return i},unformatTime:function(t,e){
if(void 0!==t&&null!=t){if(e.length!=t.length)return e;""==t&&(t="HH:mm:SS");var i="",o=t.indexOf("HH"),s=t.indexOf("mm"),r=t.indexOf("SS");return-1!=o&&(i+=e.substr(o,2)),-1!=s&&(i+=e.substr(s,2)),-1!=r&&(i+=e.substr(r,2)),i}},unformatText:function(t,e){if(void 0===t||null==t||""==t)return e;t=t.substring(t.indexOf(","));for(var i="",o=e.length-1,s=t.length-1;s>=0&&o>=0;s--){var r=t.charAt(s),a=e.charAt(o);("#"==r&&"#"!=a||r!=a)&&(i=a+i),o--}return o>-1&&(i=e.substring(0,o+1)+i),i},unformat:function(t){if(void 0===t.formatArray||void 0===t.formatArray.displayFormat||null==t.formatArray.displayFormat)return t.render.value;if("format"!=t.status)return t.render.value;t.status="unformat";var e=t.render.value,i=t.formatArray.displayFormat,o=t.valueType;return void 0!==o&&null!=o&&"number"==o?WebSquare.text.unformatCurrency(i,e):void 0!==o&&null!=o&&"date"==o?WebSquare.text.unformatDate(i,e):void 0!==o&&null!=o&&"time"==o?WebSquare.text.unformatTime(i,e):WebSquare.text.unformatText(i,e)},dynamicMask:function(t,e,i){try{var o=0,r=t.replace(/[^a-z^A-Z^0-9]/g,""),a={};for(o=0;o<e.length;o++){var n=e[o],l=n.replace(/[^#^S^X]/g,"").length,h=e[o+1],d=0;if(h){if(d=h.replace(/[^#^S^X]/g,"").length,r.length>d)continue;if(r.length<=d){a=WebSquare.text.maskit(t,h,i);break}}else{if(r.length>l){r=r.substring(0,l),a=WebSquare.text.maskit(r,n,i);break}if(r.length<=l){a=WebSquare.text.maskit(t,n,i);break}}}return a}catch(t){s.Y.printStackTrace(t,null,this)}},whichMask:function(t,e){try{for(var i in e){var o=e[i];if(t.length<=o.length){for(var r=!1,a=0;a<o.length;a++)if(!0===/^[*]/.test(o[a])){r=!0;break}return{key:i,mask:e[i],aster:r}}}return""}catch(t){s.Y.printStackTrace(t,null,this)}},_findValidValue:function(t,e){try{return!(!e||e.escape||!e.pattern.test(t))}catch(t){s.Y.printStackTrace(t,null,this)}},_removeInValidValue:function(t,e,i,o){try{for(var r=function(o){for(var s=-1,r=0;r<n.print().length;r++)if("sign"===n.findNodeAt(r).marked)0;else if(++s===o)break;var a=t[o],l=e[o];return!!i[l].pattern.test(a)},a="",n=o,l=0;l<t.length;l++){if(!0!==r(l)){a="";break}a+=t[l]}return a}catch(t){s.Y.printStackTrace(t,null,this)}},insertValidationLength:function(t,e,i){try{var o=t[e[e.length-1]].length,r=!0;return i.length>o&&(r=!1),r}catch(t){s.Y.printStackTrace(t,null,this)}},insertCharValidationFormat:function(t,e,i,o){try{var r=this.whichMask(e,t),a=!0;return this._removeInValidValue(e,r.mask,i,o)!==e&&(a=!1),a}catch(t){s.Y.printStackTrace(t,null,this)}},maskit:function(t,e,i){try{t=t||"",e=e||"";for(var o=0,r=0,a="",n="",l=0;o<e.length&&r<t.length;){var h=i[u=e[o]],d=t[r];h&&!h.escape?(h.pattern.test(d)&&(a+=d,n+=d,o++),r++):(h&&h.escape&&(u=e[++o]),a+=u,d===u&&r++,o++)}for(var c="";o<e.length;){var u;if(i[u=e[o]])break;l=1,c+=u,o++}return{orgValue:n,value:a+c,position:l}}catch(t){s.Y.printStackTrace(t,null,this)}},maskit2:function(t,e,i,o,r){try{var a=!(!r||void 0===r.notFormattingLastChar||null===r.notFormattingLastChar)&&r.notFormattingLastChar,n=r&&void 0!==r.nowInputCharIndex&&null!==r.nowInputCharIndex?r.nowInputCharIndex:-1;t=t||"";var l=e.key||"",h="",d=0,c=0,u="",p="",g="",m=0,f=0;for(!0!==o.isEmpty()&&o.clear();d<l.length&&c<t.length;){var b="",y=i[S=l[d]],v=t[c];if(y&&!y.escape){if(y.pattern.test(v))"*"===S?(u+=c===n&&!0===a?v:"*",g+="*"):(u+=v,g+=v),b="value",p+=v,h+=v,d++;else if(!0!==this._findValidValue(v,y))return{};o.insertAt(f,v,b),f++,c++}else y&&y.escape&&(S=l[++d]),u+=S,h+=S,o.insertAt(f,S,"sign"),f++,v===S&&c++,d++}for(var w="";d<l.length;){var S;if(i[S=l[d]])break;m=1,o.insertAt(f,S,"sign"),f++,w+=S,d++}return{orgValue:p,orgAsterValue:g,value:u+w,realValue:h+w,position:m}}catch(t){s.Y.printStackTrace(t,null,this)}},deleteMaskChar:function(t,e,i){try{var o=i.selectionStart,r=i.selectionEnd;if(o!=r){if(8==t.keyCode||46==t.keyCode){for(var a=i.value,h=0,d=0,c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(a.charAt(c))&&h++
;var u=(u=a.substring(0,o)+a.substring(r,a.length)).replace(/[^0-9^a-z^A-Z]/g,""),p=l.dynamicMask(u,e._editFormat,e._editTokens);i.value=p.value,e._editValue=p.orgValue;for(c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(p.value.charAt(c))&&d++;var g=o+(d-h);i===document.activeElement&&i.setSelectionRange(g,g),n.f.stopEvent(t)}}else if(o==r)if(8==t.keyCode){var m=(a=i.value).charAt(o-1),f=(h=0,d=0,1);for(c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(a.charAt(c))&&h++;if(0==/^[0-9a-zA-Z]/.test(m))for(c=o-1;c>=0&&0==/^[0-9a-zA-Z]/.test(a.charAt(c));c--)f++;u=a.substring(0,o-f)+a.substring(o,a.length),p=l.dynamicMask(u,e._editFormat,e._editTokens);i.value=p.value,e._editValue=p.orgValue;for(c=o-2;c>=0;c--)""!=p.value.charAt(c)&&0==/^[0-9a-zA-Z]/.test(p.value.charAt(c))&&d++;(g=o+(d-h)-1)<0&&(g=0),i===document.activeElement&&i.setSelectionRange(g,g),n.f.stopEvent(t)}else if(46==t.keyCode){for(m=(a=i.value).charAt(o),h=0,d=0,f=1,c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(a.charAt(c))&&h++;if(0==/^[0-9a-zA-Z]/.test(m))for(c=o;c<a.length&&0==/^[0-9a-zA-Z]/.test(a.charAt(c));c++)f++;u=(u=a.substring(0,o)+a.substring(o+f,a.length)).replace(/[^0-9^a-z^A-Z]/g,""),p=l.dynamicMask(u,e._editFormat,e._editTokens);i.value=p.value,e._editValue=p.orgValue;for(c=o-1;c>=0;c--)0==/^[0-9a-zA-Z]/.test(p.value.charAt(c))&&d++;g=o+(d-h);i===document.activeElement&&i.setSelectionRange(g,g),n.f.stopEvent(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},deleteMaskChar2:function(t,e,i){try{var o=i.selectionStart,r=i.selectionEnd,a=i.value.length,l=e,h=e.linkedList,d=this,c=o-h.countOneWayTarget(o-1,"sign","left"),u=!0,p=this.whichMask(e.removeSignValue,e.removeSignToken),g=this.maskit2(e.removeSignValue,p,e._editTokens,h);if(!g||""===g.orgValue)return n.f.preventDefault(t),void WebSquare.logger.printLog("Warning : Delete failed.");if(o!=r){if(8==t.keyCode||46==t.keyCode||88==t.keyCode&&(t.ctrlKey||t.metaKey)){for(var m=0,f=o;f<r;f++)"sign"===h.findNodeAt(f).marked&&m++;if(r-o===m)return n.f.preventDefault(t),void WebSquare.logger.printLog("Warning : Delete failed.");h.removeRange(o,r-1),h.removeValues("sign")}}else if(o==r)if(8==t.keyCode){if(!(o-1>=0))return;h.removeValues("sign"),null!=h.findNodeAt(c-1)&&c-1>=0&&(h.removeAt(c-1),c--)}else if(46==t.keyCode){if(!(o<a))return;h.removeValues("sign"),null!=h.findNodeAt(c)&&c<h.print().length?h.removeAt(c):u=!1}var b=h.print().join(""),y=function(t,e){var i=d.whichMask(t,l.removeSignToken);return g=d.maskit2(t,i,l._editTokens,h),!0!==WebSquare.util.isEmptyObject(g)&&!1!==e}(b,u);if(!1===y)return n.f.preventDefault(t),WebSquare.logger.printLog("Warning : Delete failed."),h.clear(),void d.maskit2(l.removeSignValue,p,l._editTokens,h);e.removeSignValue=b,88==t.keyCode&&(t.ctrlKey||t.metaKey)||(i.value=g.value),e._editValue=g.orgValue;var v=-1,w=0,S=0;for(f=0;f<h.print().length;f++)if("value"===h.findNodeAt(f).marked&&c===++w){v=f;break}for(f=v+1;f<h.print().length&&"sign"===h.findNodeAt(f).marked;f++)S++;var _=v+1+S;_<0&&(_=0),i===document.activeElement&&(88==t.keyCode&&(t.ctrlKey||t.metaKey)||i.setSelectionRange(_,_)),88==t.keyCode&&(t.ctrlKey||t.metaKey)||n.f.stopEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}},BASE64Encoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<64;o++)i[o]=e.charAt(o);var s=new Array;o=0;65279!=t.charCodeAt(0)&&(t=String.fromCharCode(65279)+t);var r=t.length;for(r%3==1&&(t+=String.fromCharCode(0)+String.fromCharCode(0)),r%3==2&&(t+=String.fromCharCode(0));o+2<t.length;)s[s.length]=i[t.charCodeAt(o)>>10],s[s.length]=i[(1008&t.charCodeAt(o))>>4],s[s.length]=i[(15&t.charCodeAt(o))<<2|t.charCodeAt(o+1)>>14],s[s.length]=i[(16128&t.charCodeAt(o+1))>>8],s.length%76==0&&(s[s.length]="\n"),s[s.length]=i[(252&t.charCodeAt(o+1))>>2],s[s.length]=i[(3&t.charCodeAt(o+1))<<4|t.charCodeAt(o+2)>>12],s[s.length]=i[(4032&t.charCodeAt(o+2))>>6],s[s.length]=i[63&t.charCodeAt(o+2)],s.length%76==0&&(s[s.length]="\n"),o+=3;return r%3==1&&(s.pop(),s.pop(),s.pop(),
s.pop(),28==r&&s.pop(),s[s.length-1]="="),r%3==2&&(s[s.length-1]=s[s.length-2]="="),s.join("")},BASE64Decoder:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Array,o=0;o<64;o++)i[e.charAt(o)]=o;var s=new Array;o=0;t=(t=t.replace(/\n|\r/g,"")).replace(/=/g,"");for(var r=parseInt(3*t.length/4)/2;o<t.length;)s[s.length]=i[t.charAt(o)]<<10|i[t.charAt(o+1)]<<4|i[t.charAt(o+2)]>>2,s[s.length]=(3&i[t.charAt(o+2)])<<14|i[t.charAt(o+3)]<<8|i[t.charAt(o+4)]<<2|i[t.charAt(o+5)]>>4,s[s.length]=(15&i[t.charAt(o+5)])<<12|i[t.charAt(o+6)]<<6|i[t.charAt(o+7)],o+=8;s=s.slice(1,r);var a="";try{a=String.fromCharCode.apply(document,s)}catch(t){for(o=0;o<s.length;o++)a+=String.fromCharCode(s[o])}return a},BASE64Encode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;t=WebSquare.text.UTF8Encode(t);do{var r=t.charCodeAt(o++),a=t.charCodeAt(o++),n=t.charCodeAt(o++),l=(3&(r=r||0))<<4|(a=a||0)>>4&15,h=(15&a)<<2|(n=n||0)>>6&3,d=63&n;a?n||(d=64):h=d=64,i+=e.charAt(r>>2&63)+e.charAt(l)+e.charAt(h)+e.charAt(d)}while(o<t.length);return i}catch(t){s.Y.printStackTrace(t)}},BASE64Decode:function(t){try{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",o=0;do{var r=e.indexOf(t.charAt(o++)),a=e.indexOf(t.charAt(o++)),n=e.indexOf(t.charAt(o++)),l=e.indexOf(t.charAt(o++)),h=(63&r)<<2|a>>4&3,d=(15&a)<<4|n>>2&15,c=(3&n)<<6|63&l;i+=String.fromCharCode(h)+(d?String.fromCharCode(d):"")+(c?String.fromCharCode(c):"")}while(o<t.length);return WebSquare.text.UTF8Decode(i)}catch(t){s.Y.printStackTrace(t)}},UTF8Encode:function(t){try{t=t.replace(/\r\n/g,"\n");for(var e,i="",o=0;o<t.length;o++)(e=t.charCodeAt(o))<128?i+=String.fromCharCode(e):e>127&&e<2048?(i+=String.fromCharCode(e>>6|192),i+=String.fromCharCode(63&e|128)):(i+=String.fromCharCode(e>>12|224),i+=String.fromCharCode(e>>6&63|128),i+=String.fromCharCode(63&e|128));return i}catch(t){s.Y.printStackTrace(t)}},UTF8Decode:function(t){try{for(var e="",i=0,o=0;i<t.length;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(e+=String.fromCharCode((31&o)<<6|63&t.charCodeAt(i+1)),i+=2):(e+=String.fromCharCode((15&o)<<12|(63&t.charCodeAt(i+1))<<6|63&t.charCodeAt(i+2)),i+=3);return e}catch(t){s.Y.printStackTrace(t)}},BASE64URLEncoder:function(t){return escape(WebSquare.text.BASE64Encoder(t))},BASE64URLDecoder:function(t){return WebSquare.text.BASE64Decoder(unescape(t))},fillZero:function(t,e){var i,o=t+"";if(isNaN(o))return t;if(o.length>=e)return o;for(i=e-o.length;i>0;)switch(i){case 1:i=0,o="0"+o;break;case 2:i=0,o="00"+o;break;case 3:i=0,o="000"+o;break;case 4:i=0,o="0000"+o;break;case 5:i=0,o="00000"+o;break;case 6:i=0,o="000000"+o;break;case 7:i=0,o="0000000"+o;break;case 8:i=0,o="00000000"+o;break;case 9:i=0,o="000000000"+o;break;case 10:i=0,o="0000000000"+o;break;case 11:i=0,o="00000000000"+o;break;case 12:i=0,o="000000000000"+o;break;case 13:i=0,o="0000000000000"+o;break;case 14:i=0,o="00000000000000"+o;break;case 15:i=0,o="000000000000000"+o;break;default:i-=15,o="000000000000000"+o}return o},isKorean:function(t){if(null!=t&&t.length>0){for(var e=0,i=0;i<t.length;i++)e|=WebSquare.text.getLocale(t.charAt(i));if(!(-4&e))return!0}return!1},getLocale:function(t){var e=0;if(t.length>0){var i=t.charCodeAt(0);e=i>=44032&&i<=55203?1:i>=4352&&i<=4601||i>=12593&&i<=12686?2:i>=48&&i<=57?4:i>=32&&i<=47||i>=58&&i<=64||i>=91&&i<=96||i>=123&&i<=126?8:i>=65&&i<=90?16:i>=97&&i<=122?32:48}return e},URLEncoder:function(t){if("number"==typeof t)return t;var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++){var o=""
;if(" "==t.charAt(i))e+="+";else if(t.charCodeAt(i)>=48&&t.charCodeAt(i)<=57||t.charCodeAt(i)>=65&&t.charCodeAt(i)<=90||t.charCodeAt(i)>=97&&t.charCodeAt(i)<=122||"@"==t.charAt(i)||"."==t.charAt(i)||"-"==t.charAt(i)||"*"==t.charAt(i)||"_"==t.charAt(i))e+=t.charAt(i);else if(null!=(o=WebSquare.text.getEUCKR(t.charCodeAt(i)))&&o>=42145)e+="%"+(o>>8).toString(16)+"%"+(255&o).toString(16);else if(t.charCodeAt(i)<=126){var s=t.charCodeAt(i).toString(16);1==s.length?e+="%0"+s:e+="%"+s}else e+="%3f"}return e},URLDecoder:function(t){var e="";if(null==t||0==t.length)return e;for(var i=0;i<t.length;i++)if("+"==t.charAt(i))e+=" ";else if("%"!=t.charAt(i))e+=t.charAt(i);else if(i+5<=t.length){var o=t.substring(i+1,i+3);"%"==t.charAt(i+3)&&parseInt(o,16)>160?(o=(o+=t.substring(i+4,i+6)).toUpperCase(),e+=String.fromCharCode(WebSquare.text.getUNICODE(parseInt(o,16))),i+=5):(e+=String.fromCharCode(parseInt(o,16)),i+=2)}else if(i+2<=t.length){o=t.substring(i+1,i+3);e+=String.fromCharCode(parseInt(o,16)),i+=2}else e+=t.charAt(i);return e},getEUCKR:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.UNICODE.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.UNICODE[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.UNICODE[s]<t))return WebSquare.text.EUCKR[s];i=s,s=Math.round((i+o)/2)}return""},getUNICODE:function(t){WebSquare.text.EUCKR||WebSquare.text.setEUCKR(),WebSquare.text.UNICODE||WebSquare.text.setUNICODE();for(var e=16,i=0,o=WebSquare.text.EUCKR.length-1,s=Math.round((i+o)/2);e-- >0;)if(WebSquare.text.EUCKR[s]>t)o=s,s=Math.round((i+o)/2);else{if(!(WebSquare.text.EUCKR[s]<t))return WebSquare.text.UNICODE[s];i=s,s=Math.round((i+o)/2)}return 63},isFinalConsonant:function(t){var e=t.charCodeAt(t.length-1);return!(e<44032||e>55197)&&(e-16)%28!=0},arraySort:function(t,e){for(var i=new Array,o=0;o<t.length;o++)i.push(t[o]);return void 0===e?i.sort():i.sort(e)},setEUCKR:function(){for(var t=[42145],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+2979,e++;e<2444;e++)t[e]=t[e-1]+((e-188)%94==0?163:1);WebSquare.text.EUCKR=t},setUNICODE:function(){for(var t=[12593],e=1;e<94;e++)t[e]=t[e-1]+1;for(t[e]=t[e-1]+31346,
e++;e<2444;e++)t[e]=t[e-1]+"#%%###(#######$####%&*#$##)#%&-$)&&6#%%#$(#$###%###&&*#$##)##$%#*#$##&%&&+$+#%%#$$%##$$#(#%&$(#$$)&&+%#)#%&*#$$)&&+$+#%%###'##$$#(#%&.#)5+#%&*#$+&&6#%%##)#$$)>#%%#$(#$$#&$##$&$(#$##&%#%&*#$##)#)R##$&*#$##)#%.%$)&&-#'%>#%$$*#$$##'#).#)#6)&&*#&)>#%&)##$$#(*.#)#%&*#%*&&*#->#%$$$'##$$&A#%&*#$$)##$%###(#$####$$##%&*#$##)#%&*'E#$#&$#'#$##(##%&*#$##)#%&*#%#%&&:#%&$(#$$'##&&.F&&*#$+#%&+$$)#%%#*#$$)6*>&&*#-#)*#&)#%&##(#$$#&$&&6#%&$(#$$'$##$%####&##$####&##%&*#$##)Z##$%#$#'#$$$%$#%&*#$##)&&.#)&:#%%#$$&#$$$$%&&66*&&*#$+>#%&*#$$)6*7)&&+$$)&&*')#%%#$(#$$)>#%%#*#$###(#%&*#$##(##%&*#$##a#%&$#'#$##(##%&*#$##)6F#%&/)*6>&V#%&)#'E>&&*#&E#%%#*#$+&&*#-&&*#$$)#%&*#$###&###%&*#$##)#%1$E#%&*#$##(##%&*#$$)#%&*#$##)&/$+#%&*#$$)&3=*&&*#$$)&&+$$)#%&*#$$)6*>#%&*%$)#%&*#$$)#%&*#$$#%#@#%&*#$$)#%$####(#$$#%$##%&*#$###(#)/E#%&$(#$$#'##%&*#$##)#%&-##$'>#$#&$(#$$)&2#E&&+$$)&&+$+##$%###(#$$&$#&&+$+>&&6&&*%+&&*%G#%%#$(#$##$$%####%####'#$$&%#%&*#$##&%#%/I#%%#$(#$$#(#%%#*#$##)#%&+$##&%&:##$&*#$$)&2*6*#%&*#-&:#%%###(#$$&#$*.*>#%&/)&&*%$)#%&*#$G#%&$(#$$##'#%&$(#$##(##%&*#$##)#1J#%%#*%##)7)#1#$##E#%&*#&a>7)#%&*%$}7)&&*#I#%&*#$$)#$#%###(#$##&%#%&*#$##)#%&*#$$)&&*')####%#$#'#$##'$#%&*#$##)#%&*#$##)&&/)##$&$(#$$&%#%&/)&&*%#*&&*#$+#%&*#$$)#%%#*#$$$$#$6*#%&*')#%&*#$$)#)*%$)#%&#)#$$E#%%#)##$$'$#$#&*#%#(##%&*#%#>E#%&$(#%#)&&V:#%%#$(#&)#%2*6*&&*#->#%&*#&)6*>&O)#%&$'##-&&*.#%&*#$$)#%##$##'##$##&#$#%&*#$##)#%&%'#$$&$#&&+-#%#$###(######$$$#%&*#$$)##$&$#'#####&###&&*#$#*#%&##$%##$$$'#%&*#$##)#%.%$)#%&*#$$)#%&*#$$)#%&##(#$$)#%&*#%#)#%&*#&)#%&*#$$)#%&*#$$$'#%&($#$$#######&&*%+#%&##'##$###&$#%$##$(#$###(#%&*#$##)#%$$*')&&6#%&$(#$$#(#%&*#$$)&&*#%#)>#%&$(#$$##&##)+$$)6#)&&*#$$)#%3)#%&##(#$$)6*>#%&*#$+&&*.#%&*#$$E#%%#$(#$$#%#$#%$$%'#$##)#%&*#$##)&3E#%&*#$##)7)6F#%&*#$$$'#).*6*&&*#B)#%&*#&)6#E>>2%$E#%&*#&#'##%$$*#$###(#%&*#$##)&$$*'E#%&*#$##)#%&*#$$)&2*&3)#%&*#$$)&&/E&&*#$$)2.#%&*#$$)6*&:&&*#$$)&&*')#%&*#$$E#%%##)#$$)#%&*#$$)#%&*#$##)#6E#%%#*#$##)#%&*#$$)&&*#$##)>#%&*#$$)#%&*')7)*6>#%&*#$$)&&/)7)#%&*#$$)&&*.#%&*#&E#%&*#$$)#%&#)#$##)#%&*#$##)7E#%&$(#$##)#%&*#$$)&2*&:#%&*#$$'$&:>&1$)>#%&*#$$)6*>#%&*#&)&&*')#%%#$(#$+&&*#-#%&*#$$)##$&$(#$##&%#%&*#$##)#Y#%&*#$##)#%&*#$$)&&*#%#)*+$+#%&*#$$)7E&:&&+$+#%%#$(#$$)7E&&*%+&&*%$)&&*#$G#%&*#$$)#%&'%#$$)#%&*#$##)7E#%&$(#$$)#%&*#$$)#%&*#$##)&&+-#%&'%#$$&%#%&-$)#%1$)#%&+$$)&&+$+#%&'%%$)&&*')#%&/)#%&*#$$)#%&*%$)#%$###)#$$&%&&*#&)#%&*#$$".substr(e-95,1).charCodeAt(0)-34;WebSquare.text.UNICODE=t},linkedList:function(){try{var t=function(t,e){return{value:t,next:null,marked:e}};return{head:null,tail:null,prev:null,isEmpty:function(){return null===this.head},insertAt:function(e,i,o){if(0===e)(s=t(i,o)).next=this.head,this.head=s,this.tail||(this.tail=s);else{for(var s=t(i,o),r=this.head,a=null,n=0;n<e;)a=r,r=r.next,n++;s.prev=a,s.next=r,a.next=s,r||(this.tail=s)}},findNodeAt:function(t){if(t<0)return null;for(var e=this.head,i=0;e;){if(i===t)return e;e=e.next,i++}return null},removeAt:function(t){var e=this.head,i=null,o=0;if(0===t)this.head=e.next,this.head||(this.tail=null);else{for(;o<t;)i=e,e=e.next,o++;i.next=e.next,e.next||(this.tail=i)}},removeRange:function(t,e){if(!(t<0||t>=this.length||e<0||e>=this.length)){for(var i=this.head,o=null,s=0;s<t;)o=i,i=i.next,s++;for(var r=e-t+1;i&&r>0;){var a=i.next;o?o.next=a:this.head=a,a||(this.tail=o),i=a,r--,this.length--}}},removeValues:function(t){for(var e=this.head,i=null;e;)t===e.marked?e===this.head?(this.head=e.next,this.head||(this.tail=null)):(i.next=e.next,e.next||(this.tail=i)):i=e,e=e.next},findExcluding:function(t){for(var e=[],i=this.head;i;)i.marked!==t&&e.push(i.value),i=i.next;return e},countOneWayTarget:function(t,e,i){var o=0,s=0,r=this.head;if(t<0)return s;for(;r;)if("left"===i){if(r.marked===e&&s++,o>=t)break;r=r.next,o++}else if("right"===i){if(o<t){r=r.next,o++;continue}r.marked===e&&s++,r=r.next}return s},modifyMarkedAttributeAtIndex:function(t,e){if(!(t<0||t>=this.length))for(var i=this.head,o=0;i;){if(o===t){i.marked=e;break}i=i.next,o++}},print:function(){
for(var t=this.head,e=[];t;)e.push(t.value),t=t.next;return e},clear:function(){this.head=null,this.tail=null}}}catch(t){s.Y.printStackTrace(t,null,this)}}},h=function(t,e,i){this.sign="",this.integer=new Array,this.decimal=new Array,this.delimiter=e||",",this.decimalDelimiter=i||".";var o="",s="",r=t.split(this.decimalDelimiter);1==r.length?(o=r[0],s=""):r.length>1&&(o=r[0],s=r[1]),"+"!=o.charAt(0)&&"-"!=o.charAt(0)||(this.sign=o.charAt(0),o=o.substr(1));var a=o.match(new RegExp("[^0]+[0-9]*"));o=null!=a?a.join(""):"0";for(var n=0;n<o.length;n++)this.integer.push(parseInt(o.charAt(n)));for(n=0;n<s.length;n++)this.decimal.push(parseInt(s.charAt(n)))};h.prototype.getValue=function(){var t="";return t+=this.sign,this.integer.length>0&&(t+=this.integer.join("")),this.decimal.length>0&&(t+=".",t+=this.decimal.join("")),t},h.prototype.setPrecision=function(t,e){null==t&&(t=0),null==e&&(e="[round]");var i=0;"[round]"==e?i=5:"[floor]"==e?i=0:"[ceil]"==e&&(i=9);var o=this.decimal.length;if(t+1>o)for(var s=0;s<t+1-o;s++)this.decimal.push(0);else this.decimal=this.decimal.slice(0,t+1);var r=0;this.decimal[t]+i>9&&(r=1);for(s=t-1;s>=0;s--)this.decimal[s]+=r,this.decimal[s]>9?(r=1,this.decimal[s]-=10):r=0;if(this.decimal.pop(),0!=r)for(s=this.integer.length-1;s>=0;s--)this.integer[s]+=r,this.integer[s]>9?(r=1,this.integer[s]-=10):r=0;if(0!=r){this.integer.push(0);for(s=this.integer.length-1;s>=1;s--)this.integer[s]=this.integer[s-1];this.integer[0]=1}},h.prototype.getValueWithDelimiter=function(t,e,i){var o="";if(null==e||e<=0)return this.getValue();if(o+=this.sign,this.integer.length>0)for(var s=this.integer.length%e,r=0,a=0;a<this.integer.length;a++)(a+1)%e==s&&(o+=this.integer.slice(r,a+1).join(""),a+1<this.integer.length&&(o+=t||this.delimiter),r=a+1);return this.decimal.length>0&&(o+=this.decimalDelimiter,o+=this.decimal.join("")),"-0"!==o||i||(o="0"),o},h.prototype.getFormattedValue=function(t){var e="";if(!t)return this.getValue();e+=this.sign;var i=[];o.q.extend(i,this.integer);for(var s=[],r=(t.indexOf(this.decimalDelimiter)>-1?t.substring(0,t.indexOf(this.decimalDelimiter)):t.substring(0)).split(this.delimiter).reverse(),a=0;a<this.integer.length&&0!=i.length;a++){for(var n=r[a%r.length].length,l=[],h=0;h<n;h++)l.push(i.pop());s.push(l.reverse().join(""))}return e+=s.reverse().join(this.delimiter),this.decimal.length>0&&(e+=this.decimalDelimiter,e+=this.decimal.join("")),e},h.prototype.cutZeroDecimal=function(t){for(var e=t.lastIndexOf("0")-1,i=this.decimal.length-1;i>=0&&0==this.decimal[i]&&i>e;)this.decimal.pop(),i--}},1204:function(t,e,i){"use strict";i.d(e,{Z:function(){return f}});var o,s,r,a,n=i(2284),l=i(467),h=i(4756),d=i.n(h),c=i(5461),u=i(2660),p=i(8971),g=i(5375),m=i(2256),f={loadedUserComponent:{},loadedUserComponentPluginName:{},loadedUserComponentURL:{},loadedInheritComponent:{},loadedInheritComponentPluginName:{},loadedInheritComponentURL:{}},b=window.document;f._initImport=function(){f.getTopWindow.getAttribute=WebSquare.session.getAttribute,f.getTopWindow.removeAttribute=WebSquare.session.removeAttribute,f.getTopWindow.removeSession=WebSquare.session.removeSession,f.getTopWindow.setAttribute=WebSquare.session.setAttribute},c.q._initImportList.push("util"),f.isEmptyObject=function(t){try{for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}catch(t){p.Y.printStackTrace(t,null,this)}},f.documentWrite=function(t,e){if(void 0!==e&&null!=e&&""!=e){var i=b.getElementById(e);g.I._safeInnerHTML(i,t)}else b.write(t)},f.numericSort=function(t,e){return parseInt(t,10)-parseInt(e,10)},f.getNumber=function(t){var e=t+"",i=e.replace(/,/g,"");return null!=i.match(/[^0-9.-]/g)?(m.v.printLog("Not a Number :"+e),NaN):(""==i&&(i="0"),-1==i.indexOf(".")?parseInt(i,10):parseFloat(i))},f.setNumber=function(t){if(null!=t){var e=t+"";if(0!=e.length){var i="",o="",s="";"+"!=e.substring(0,1)&&"-"!=e.substring(0,1)||(i=e.substring(0,1),e=e.substring(1)),
e.indexOf(".")>-1&&(s=e.substring(e.indexOf(".")),e=e.substring(0,e.indexOf(".")));for(var r=e.length-3;r>=1;r-=3)o=","+e.substring(r,r+3)+o;return i+(o=e.substring(0,r+3)+o)+s}}},f.parseInt=function(t,e){var i=parseInt(t,10);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},f.parseFloat=function(t,e){var i=parseFloat(t);return void 0!==e&&!isNaN(e)&&isNaN(i)?e:i},f.parseArray=function(t){for(var e="[",i=0;i<t.length;i++){var o=t[i];"string"==typeof o&&(o.indexOf('"')>=0&&(o=o.replaceAll('"','\\"')),o='"'+o+'"'),i<t.length-1?e+=o+",":e+=o}return e+="]"},f.getDate=function(t){var e=t+"";if(10==e.length){return e.replace(/[^0-9]/g,"")}return e},f.setDate=function(t,e){var i=t+"";if(e||(e="/"),8==i.length&&/^[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]{1}$/g.test(e))return i.substring(0,4)+e+i.substring(4,6)+e+i.substring(6,8)},f.getTime=function(t){var e=t+"";if(5==e.length||8==e.length){return e.replace(/[^0-9]/g,"")}return e},f.setTime=function(t){var e=t+"";if(4==e.length)return e.substring(0,2)+":"+e.substring(2,4)},f.getAddress=function(t){var e,i=WebSquare.util.getFrameFromPoint(t),o=null;i&&(o=WebSquare.idCache[i]);var s=location.toString();if(null!=o&&o.frameDoc){e=""+o.getURL(o.getSrc())}else e=s,WebSquare.util.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(WebSquare.util.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,WebSquare.util.decodeParameter(location.search))).replace(location.hash,WebSquare.util.decodeParameter(location.hash))));prompt(e,e)},f.getRQ=function(t){try{var e,i=f.getFrameFromPoint(t),o=null;i&&(o=c.q.idCache[i]),null!=o&&o.frameDoc?e=o.getURL(o.getSrc(),{msaName:o._getMsaName(),baseURI:!0}):(e=location.toString(),f.isEncodeParameter()&&!WebSquare.net.paramObj.w2xPath&&(f.getEncodeParameterOption("onlyParam")||(e=(e=e.replace(location.search,f.decodeParameter(location.search))).replace(location.hash,f.decodeParameter(location.hash)))));var s=encodeURIComponent(WebSquare.text.BASE64Encode(e)),r="";r=WebSquare.domain?(r="?domain="+WebSquare.text.URLEncoder(WebSquare.domain))+"&qrAddr="+s:"?qrAddr="+s;var a=g.I.getConfiguration("viewSourceURL");a||(a=g.I.getURL(u.Q.inquiresPath("message/QR.html"),{baseURI:!0})),window.open(a+r,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}catch(t){p.Y.printStackTrace(t,null,this)}},f.viewSource=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?"+i+e);var s=g.I.getConfiguration("viewSourceURL");s||(s=c.q.baseURI+u.Q.inquiresPath("message/viewSource.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewCollection=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?"+i+e);var s=g.I.getConfiguration("viewCollectionURL");s||(s=c.q.baseURI+u.Q.inquiresPath("message/viewCollection.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewInstance=function(){var t="";WebSquare.domain&&(t="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var e=g.I.getConfiguration("viewInstanceURL");e||(e=c.q.baseURI+u.Q.inquiresPath("message/viewInstance.html")),window.open(e+t,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewFiddle=function(t){var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?"+i+e);var s=g.I.getConfiguration("fiddleURL")
;s||(s=c.q.baseURI+u.Q.inquiresPath("fiddle/fiddle.html")),window.open(s+o,"_blank","top=30,height=710,left=50,width=1100,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.viewSubmission=function(t){try{var e=WebSquare.util.getFrameFromPoint(t),i="scope=",o="";WebSquare.domain?(o="?domain="+WebSquare.text.URLEncoder(WebSquare.domain),null!=e&&(o=o+"&"+i+e)):null!=e&&(o="?"+i+e);var s=g.I.getConfiguration("viewSubmissionURL");s||(s=c.q.baseURI+u.Q.inquiresPath("message/viewSubmission.html")),window.open(s+o,"_blank","top=120,height=485,left=200,width=650,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")}catch(t){p.Y.printStackTrace(t)}},f.getSource=function(){var t=(0,l.A)(d().mark((function t(e,i){var o,s,r,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null,i&&(o=WebSquare.idCache[i]),s=null!=o&&o.frameDoc&&o.frameDoc.xmlDocument?o.frameDoc:WebSquare.WebSquaredoc,r="","xml"!==s.getType()){t.next=8;break}a=null!=s.xmlDocument_org?s.xmlDocument_org:s.xmlDocument,t.next=17;break;case 8:if(null==o||o===WebSquare.strictModeFrame){t.next=14;break}return t.next=11,WebSquare.xml.load(o.getMsaSrc());case 11:a=t.sent,t.next=17;break;case 14:return t.next=16,WebSquare.xml.load(g.I.getPageURL(WebSquare.w2xPath,{skipUri:!0}));case 16:a=t.sent;case 17:return r=void 0!==e&&"raw"==e?WebSquare.xml.serialize(a):void 0!==e&&"text"==e?WebSquare.xml.indent(a):WebSquare.xml.indent(a,"html"),t.abrupt("return",r);case 19:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),f.getInstance=function(t){return void 0!==t&&"raw"==t?WebSquare.xml.serialize(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):void 0!==t&&"text"==t?WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode):WebSquare.xml.indent(WebSquare.ModelUtil.getInstanceByXPath("/").xmlNode.parentNode,"html")},f.printRange=function(t){var e="?id="+t;WebSquare.domain&&(e+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain));var i=g.I.getConfiguration("printRangeURL");i||(i=c.q.baseURI+u.Q.inquiresPath("message/printRange.html")),window.open(i+e,"_blank","top=0,height=670,left=0,width=1000,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no")},f.evalProp=function(t,e){return u.Q.evalProp(t,e)},f.setCursor=function(t){b.body.style.cursor=t;var e=b.getElementsByTagName("div");if(null!=e)for(var i=0;i<e.length;i++)"undefined"!=e[i].id&&"none"!=e[i].currentStyle.display&&"hidden"!=e[i].currentStyle.visibility&&(e[i].style.cursor=t)},f.setCursorAsync=function(t){var e="WebSquare.util.setCursor('"+t+"');";window.setTimeout(e,1)},f.toPixel=function(t,e){if(-1!=String(t).indexOf("%")){var i=parseInt(t);return parseInt(i/100*("x"==e?screen.availWidth:screen.availHeight))}return t},f.dbltoHexacode=function(t){t=Math.floor(t);for(var e="0123456789ABCDEF",i=e.substr(15&t,1);t>15;)i=e.substr(15&(t>>=4),1)+i;return i},f.hexacodetoDbl=function(t){return parseInt(t,16)},f.isOdd=function(t){return parseInt(t)%2!=0},f.isInteger=function(t){var e=parseInt(t,10);return!isNaN(e)&&(t==e&&t.toString()==e.toString())},f.isExist=function(t,e){return null!=e[t]},f.isDef=function(t,e){return null==e&&(e=window),null!=e[t]&&void 0!==e[t]},f.getTDIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TD"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){p.Y.printStackTrace(t)}return-1},f.getTRIndex=function(t){try{for(;"TABLE"!=t.tagName;){if("TR"==t.tagName){for(var e=t.parentNode.childNodes,i=0;i<e.length;i++)if(e.item(i)==t)return i;break}t=t.parentNode}}catch(t){p.Y.printStackTrace(t)}return-1},f.getSiblingIndex=function(t){try{if(!t)return-1;for(var e=0;t.previousSibling;)t=t.previousSibling,e++;return e}catch(t){p.Y.printStackTrace(t)}return-1},f.getObjectValue=function(t,e,i){
return void 0!==t&&null!=t&&void 0!==t[e]&&""!=t[e]?t[e]:void 0===i?null:i},f.objToXML=function(t){var e=WebSquare.xml.parse("<object/>");for(var i in t)"string"==typeof i&&"string"==typeof t[i]&&WebSquare.xml.setValue(e.documentElement,i,"value",t[i]);return e},f.getBoolean=function(t){return"boolean"==typeof t?t:"string"==typeof t&&"true"==t.toLowerCase()},f.checkUpdate=function(){},f.registContextMenu=function(t,e){var i=t,o=WebSquare.util.makeContextMenuString(e).menuStr;"string"==typeof t&&(i=g.I.getComponentById(t)),"object"==(0,n.A)(i)&&(void 0!==i.render&&null!=i.render&&(i=i.render),g.I.browserCheck.opera?i.onmousedown=function(t){if(t.ctrlKey){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var i=window.innerWidth-WebSquare.event.getClientX(t),s=window.innerHeight-WebSquare.event.getClientY(t),r=b.getElementById("_contextMenuLayer");void 0!==r&&null!=r||(r=b.createElement("div"),b.body.insertBefore(r,null),r.id="_contextMenuLayer",r.style.position="absolute"),r.style.left=i<182?window.pageXOffset+WebSquare.event.getClientX(t)-182:window.pageXOffset+WebSquare.event.getClientX(t),r.style.top=s<176?window.pageYOffset+WebSquare.event.getClientY(t)-176:window.pageYOffset+WebSquare.event.getClientY(t);var a=19*e.size()+9;return e.size()>15&&(a="295px"),r.style.height=a,r.style.overflow="hidden",r.style.zIndex="20000",r.style.visibility="visible",g.I._safeInnerHTML(r,o),!1}return!0}:i.oncontextmenu=function(t){WebSquare.util.contextObject=WebSquare.event.getTarget(t);var e=b.getElementById("_contextMenuLayer"),i=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,r=WebSquare.event.getClientX(t)+i,a=WebSquare.event.getClientY(t)+s;void 0!==e&&null!=e||((e=b.createElement("div")).id="_contextMenuLayer",e.style.position="absolute",document.body.appendChild(e)),e.style.zIndex="20000",e.style.visibility="visible",g.I._safeInnerHTML(e,o);var n=e.offsetWidth+10,l=e.offsetHeight+10;return r+n>i+document.documentElement.clientWidth&&(r=i+document.documentElement.clientWidth-n-10),a+l>s+document.documentElement.clientHeight&&(a=s+document.documentElement.clientHeight-l-10),e.style.left=r+"px",e.style.top=a+"px",!1})},f.removeContextMenu=function(t){var e=t;"string"==typeof t&&(e=g.I.getComponentById(t)),"object"==(0,n.A)(e)&&(void 0!==e.render&&null!=e.render&&(e=e.render),e.oncontextmenu=null)},f.makeContextMenuString=function(t){for(var e="",i=175,o=0;o<t.size();o++){var s=t.elementAt(o),r=WebSquare.xml.getAttribute(s,"name","value"),a=WebSquare.util.getWidth(r)+30;i<a&&(i=a)}if(g.I.browserCheck.ieAllVersion){var n=19*t.size()+10;t.size()>15&&(n=295),e+="<div id='contextLayer' onselectstart='return false' style='overflow-x:hidden; overflow-y: auto; width:"+(i+5)+"px; height:"+n+"px; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}else{n=19*t.size()+10;t.size()>15&&(n=286),e+="<div onselectstart='return false' style='position:relative; overflow:auto; width:"+i+"px;height:"+n+"px; border:4px solid #e7e7e7; '>",e+="<table width='"+i+"' border='0' style='border-collapse:collapse; border:1px solid #9fbcd4; background-color:#FFFFFF;'>"}for(o=0;o<t.size();o++){s=t.elementAt(o);"true"==WebSquare.xml.getAttribute(s,"separator","value")?e+=m.v.contextMenuAddRow1(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value")):e+=m.v.contextMenuAddRow(WebSquare.xml.getAttribute(s,"method","value"),WebSquare.xml.getAttribute(s,"name","value"))}var l={};return l.menuStr=e,l.width=i,l},f.getElement=function(t){window._elements||(window._elements=[]);var e=b.createElement(t);return window._elements.push(e),e},f.getURLString=function(t){try{if(-1!=t.toLowerCase().indexOf("url")){var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i);return o=o.replace(/\"/g,"")}}catch(t){p.Y.printStackTrace(t)}},f.toHexColor=function(t){try{if(-1!=t.indexOf("rgb")){
var e=t.indexOf("("),i=t.indexOf(")"),o=t.substring(e+1,i).split(","),s=parseInt(o[0]).toString(16),r=parseInt(o[1]).toString(16),a=parseInt(o[2]).toString(16);return 1==s.length&&(s="0"+s),1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),"#"+s+r+a}return t}catch(t){p.Y.printStackTrace(t)}},window.getComputedStyle||(window.getComputedStyle=function(t,e){return this.el=t,this.getPropertyValue=function(e){return"float"==e&&(e="styleFloat"),e=e.capitalizeStyle(),t&&t.currentStyle&&t.currentStyle[e]?t.currentStyle[e]:null},this}),document.documentElement.currentStyle?f.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:window.getComputedStyle?f.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i}:f.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?this.toHexColor(i):i},f.setSize=function(t){if(!g.I.browserCheck.ie){var e=WebSquare.util.getStyleProperty(t,"width"),i=WebSquare.util.getStyleProperty(t,"height"),o=parseInt(WebSquare.util.getStyleProperty(t,"border-left-width"))||0,s=parseInt(WebSquare.util.getStyleProperty(t,"border-right-width"))||0,r=parseInt(WebSquare.util.getStyleProperty(t,"border-top-width"))||0,a=parseInt(WebSquare.util.getStyleProperty(t,"border-bottom-width"))||0,n=parseInt(WebSquare.util.getStyleProperty(t,"padding-left"))||0,l=parseInt(WebSquare.util.getStyleProperty(t,"padding-right"))||0,h=parseInt(WebSquare.util.getStyleProperty(t,"padding-top"))||0,d=parseInt(WebSquare.util.getStyleProperty(t,"padding-bottom"))||0;""!=e&&e.indexOf("px")>=0&&(t.style.width=parseInt(e)-o-s-n-l),""!=i&&i.indexOf("px")>=0&&(t.style.height=parseInt(i)-r-a-h-d)}},f.getWidth=function(t,e,i){e=null==e?"":e,i=null==i?"":i;var o=WebSquare.util.getRulerSpan();return o.style.cssText=e,o.style.visibility="hidden",o.style.position="absolute",o.style.width="",o.className=i,g.I._safeInnerHTML(o,t),o.style.top="-10000px",o.style.left="-10000px",o.offsetWidth},f.getRulerSpan=function(t,e){var i=b.getElementById("__rulerSpan__");return null==i&&((i=b.createElement("span")).id="__rulerSpan__",i.style.visibility="hidden",i.style.position="absolute",b.body.appendChild(i)),i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,i},f.getImageUrl=function(t,e){var i=WebSquare.util.getRulerSpan();return i.style.cssText=t,i.style.visibility="hidden",i.style.position="absolute",i.className=e,i.style.top="-10000px",i.style.left="-10000px",WebSquare.util.getStyleProperty(i,"background-image")},f.getHeight=function(t,e,i){var o=WebSquare.util.getRulerSpan();return o.style.width=e,null!=i?(o.style.fontSize=i.style.fontSize,o.style.fontFamily=i.style.fontFamily,o.style.fontWeight=i.style.fontWeight):(o.style.fontSize="",o.style.fontFamily="",o.style.fontWeight=""),g.I._safeInnerHTML(o,t),o.style.top="-10000px",o.style.left="-10000px",o.offsetHeight},f.getHeight2=function(t,e,i,o){var s=WebSquare.util.getRulerSpan();s.style.cssText=i,s.className=o,s.style.visibility="hidden",s.style.height="",s.style.position="",s.style.padding="0 0 0 0 ",s.style.width=WebSquare.util.getStyleProperty(s,"width"),s.style.fontSize=WebSquare.util.getStyleProperty(s,"font-size")||"12px",s.style.fontFamily=WebSquare.util.getStyleProperty(s,"font-family")||"",s.style.fontWeight=WebSquare.util.getStyleProperty(s,"font-weight")||"",g.I._safeInnerHTML(s,t),s.style.top="-10000px",s.style.left="-10000px";var r=s.offsetHeight;return 0==r&&(r=parseInt(s.style.fontSize)),r},f.setVerticalAlignMiddle=function(t,e){var i=WebSquare.util.getStyleProperty(t,"height"),o=WebSquare.util.getStyleProperty(t,"vertical-align");o=""==o?"middle":o;var s=WebSquare.util.getStyleProperty(t,"padding-top");if((""==s||"0px"==s)&&"middle"==o&&""!=i&&i.indexOf("px")>=0){var r=document.createElement("div");t.appendChild(r),
g.I._safeInnerHTML(r,e),(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",g.I._safeInnerHTML(n,e);var a=n.offsetHeight;r.style.marginTop=(parseInt(i)-a)/2}else if((""==s||"0px"==s)&&"bottom"==o&&""!=i&&i.indexOf("px")>=0){var n;r=document.createElement("div");t.appendChild(r),g.I._safeInnerHTML(r,e),(n=WebSquare.util.getRulerSpan(t.style.cssText,t.className)).style.height="",n.style.top="-10000px",n.style.left="-10000px",g.I._safeInnerHTML(n,e);a=n.offsetHeight;var l=parseInt(i)-a-3;r.style.marginTop=l}else g.I._safeInnerHTML(t,e)},f.getChildNodeAt=function(t,e){try{for(var i=WebSquare.util.first(t),o=0;null!=i&&o<e;)i=WebSquare.util.next(i),o++;return i}catch(t){p.Y.printStackTrace(t)}},f.prev=function(t){do{t=t.previousSibling}while(t&&1!=t.nodeType);return t},f.next=function(t){do{t=t.nextSibling}while(t&&1!=t.nodeType);return t},f.first=function(t){return null==(t=t.firstChild)?t:t&&1!=t.nodeType?WebSquare.util.next(t):t},f.last=function(t){return(t=t.lastChild)&&1!=t.nodeType?WebSquare.util.prev(t):t},f.parent=function(t,e){e=e||1;for(var i=0;i<e;i++)null!=t&&(t=t.parentNode);return t},f.getEvent=function(t){try{t=t||event}catch(t){p.Y.printStackTrace(t)}return t},f.getStringByteSize=function(t,e){try{if(!t)return 0;var i=g.I.getConfiguration("/WebSquare/byteCheckEncoding/@value");switch(i||(i="UTF-8"),i=i.toUpperCase()){case"UTF-8":return WebSquare.util.getByteLengthUtf8(t,e);case"EUC-KR":return WebSquare.util.getByteLengthEUCKR(t,e);default:return WebSquare.util.getByteLength(t,e)}}catch(t){p.Y.printStackTrace(t,null,this)}},f.getByteLength=function(t,e){try{for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}1==a.length?i++:-1!=a.indexOf("%u")?i+=2:-1!=a.indexOf("%")&&(i+=a.length/3)}return i}catch(t){p.Y.printStackTrace(t,null,this)}},f.getByteLengthEUCKR=function(t,e){try{e=e||"";for(var i=0,o="",s="",r=0;r<t.length;r++){if(s=t.charAt(r),e.length>0){for(var a=!1,n=0;n<e.length;n++)if(s===e[n]){a=!0;break}if(a)continue}"0000"<=(o=("0000"+t.charCodeAt(r).toString(16).toUpperCase()).slice(-4))&&o<="007F"?i++:i+=2}return i}catch(t){p.Y.printStackTrace(t,null,this)}},f.getByteLengthUtf8=function(t,e){for(var i=0,o=(e=e||"",[]),s=0;s<e.length;s++)o.push(escape(e.charAt(s)));for(var r=0;r<t.length;r++){var a=escape(t.charAt(r));if(o.length>0){for(var n=!1,l=0;l<o.length;l++)if(a===o[l]){n=!0;break}if(n)continue}i+=WebSquare.util.getCharByteSize(t.charAt(r))}return i},f.getStringByByteSize=function(t,e,i,o){if(!t)return"";var s=g.I.getConfiguration("/WebSquare/byteCheckEncoding/@value");return s||(s="UTF-8"),"UTF-8"===(s=s.toUpperCase())?WebSquare.util.getByteStringByLengthUtf8(t,e,i,o):WebSquare.util.getByteStringByLength(t,e,i,o)},f.getByteStringByLength=function(t,e,i,o){for(var s=0,r=(i=i||"",[]),a=0;a<i.length;a++)r.push(escape(i.charAt(a)));for(var n=0,l=0;l<t.length;l++){var h=escape(t.charAt(l));if(r.length>0){for(var d=!1,c=0;c<r.length;c++)if(h===r[c]){d=!0;break}if(d)continue}var u=0;if(1==h.length?u=1:-1!=h.indexOf("%u")?u=2:-1!=h.indexOf("%")&&(u=h.length/3),s+u<=e&&(n=l,s),(s+=u)>e)return o?o.nowSelectionStart<t.length?t.substring(0,o.prevSelectionStart)+t.substring(o.nowSelectionStart):t.substring(0,n+1):t.substring(0,l)}return t},f.getByteStringByLengthUtf8=function(t,e,i,o){for(var s=0,r=(i=i||"",[]),a=0;a<i.length;a++)r.push(escape(i.charAt(a)));for(var n=0,l=0;l<t.length;l++){var h=escape(t.charAt(l));if(r.length>0){for(var d=!1,c=0;c<r.length;c++)if(h===r[c]){d=!0;break}if(d)continue}var u=WebSquare.util.getCharByteSize(t.charAt(l));if(s+u<=e&&(n=l,s),(s+=u)>e)return o?o.nowSelectionStart<t.length?t.substring(0,o.prevSelectionStart)+t.substring(o.nowSelectionStart):t.substring(0,n+1):t.substring(0,l)}return t},f.getCharByteSize=function(t){if(!t||0==t.length)return 0
;var e=t.charCodeAt(0);return e<=127?1:e<=2047?2:e<=65535?3:4},f.getImageStyle=function(t,e){var i="",o=t.toLowerCase();if(o.indexOf("background-image")>=0){var s=(o=o.substring(o.indexOf("background-image"))).split(";")[0].split(":");s.shift(),(i=s.join("").wq_trim()).startsWith("url")&&"("==(i=i.substring(3).wq_trim()).charAt(0)&&")"==i.charAt(i.length-1)&&(i=g.I.getImageURL(i.substring(1,i.length-1)))}else i=WebSquare.skin.makeBackgroundImageUrl(e);return""!=i&&"none"!=i&&(i="background-image:url("+i+")"),i},f.getInnerText=function(t){var e="";try{void 0===(e=t.innerText)&&(e=t.textContent)}catch(t){p.Y.printStackTrace(t)}return e},f.getTextNodeValue=function(t){try{var e=null;if(t)for(var i=t.firstChild;null!=i;i=i.nextSibling)if(3==i.nodeType){e=i.nodeValue;break}return e}catch(t){m.v.printLog("dataController.getTextNodeValue :"+t.message),p.Y.printStackTrace(t)}},f.browserVersion=function(){try{return g.I.browserVersion()}catch(t){p.Y.printStackTrace(t)}},f.isIE=function(t){try{var e=g.I.browserCheck.ieVersion[t];return null!=e||(e=g.I.browserCheck.ie,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.ieVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isIEAllVersion=function(t){try{var e=g.I.browserCheck.ieVersion[t];return null!=e||(e=g.I.browserCheck.ieAllVersion,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.ieVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isFF=function(t){try{var e=g.I.browserCheck.mozVersion[t];return null!=e||(e=g.I.browserCheck.moz,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.mozVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isChrome=function(t){try{var e=g.I.browserCheck.chromeVersion[t];return null!=e||(e=g.I.browserCheck.chrome,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.chromeVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isSafari=function(t){try{var e=g.I.browserCheck.safariVersion[t];return null!=e||(e=g.I.browserCheck.safari,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.safariVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isOpera=function(t){try{var e=g.I.browserCheck.operaVersion[t];return null!=e||(e=g.I.browserCheck.opera,t&&g.I.browserVersion()&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.operaVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isSpartan=function(){try{return g.I.browserCheck.spartan}catch(t){p.Y.printStackTrace(t)}},f.isChromeEdge=function(t){try{var e=g.I.browserCheck.chromeEdgeVersion[t];return null!=e||(e=g.I.browserCheck.chromeEdge,t&&(t+="",e=e&&t.indexOf(g.I.browserVersion())>-1,g.I.browserCheck.chromeEdgeVersion[t]=e)),e}catch(t){p.Y.printStackTrace(t)}},f.isMobile=function(){try{var t=g.I.browserCheck.isMobile;return null!=t?t:(t=!!(g.I.browserCheck.android||g.I.browserCheck.iphone||g.I.browserCheck.ipad||g.I.browserCheck.ipod||g.I.browserCheck.blackberry),g.I.browserCheck.isMobile=t,g.I.browserCheck.isMobile)}catch(t){p.Y.printStackTrace(t)}},f._isMobileDevice=function(){try{return!!(g.I.browserCheck.android||g.I.browserCheck.iphone||/iPad/.test(navigator.userAgent)||g.I.browserCheck.ipod||g.I.browserCheck.blackberry)}catch(t){p.Y.printStackTrace(t)}},f.isNull=function(t){return void 0===t||null==t},f.isNumber=function(t){return!WebSquare.util.isNull(t)&&t.constructor==Number},f.isString=function(t){return!WebSquare.util.isNull(t)&&t.constructor==String},f.isArray=function(t){return t&&"object"===(0,n.A)(t)&&"number"==typeof t.length&&"function"==typeof t.splice&&!t.propertyIsEnumerable("length")},f.isRegExp=function(t){return!WebSquare.util.isNull(t)&&t instanceof RegExp},f.isKorean=function(t){if("string"!=typeof t)return!1;return/[-|-|-]/.test(t)},f.XMLToHTML=function(t){if(void 0===t.tagName&&3==t.nodeType)return document.createTextNode(t.nodeValue);var e=document.createElement(t.tagName),i=WebSquare.WebSquareparser.parseAttribute(t);try{
for(var o in i)"style"!=o?"className"!=o?e[o]=i[o]:e.className=i[o]:e.style.cssText=i[o]}catch(t){p.Y.printStackTrace(t,null,this)}for(var s=t.firstChild;null!=s;s=s.nextSibling)1==s.nodeType?e.appendChild(this.XMLToHTML(s)):2!=s.nodeType&&3!=s.nodeType&&4!=s.nodeType||e.appendChild(document.createTextNode(s.nodeValue));return e},f.setPrecision=function(t){try{return"number"==typeof t&&(t=parseFloat(t.toFixed(10)),t=parseFloat(t.toPrecision(15))),t}catch(t){p.Y.printStackTrace(t)}},f.sum=function(t,e){try{if(!(t.length>0))return t;void 0!==e&&null!=e||(e={});for(var i=0,o=0,s=0;s<t.length;s++){"string"==typeof t[s]&&""==t[s].replace(/^\s+|\s+$/g,"")&&(t[s]="0");var r=t[s]-0;i+=r,o+=Math.abs(r)}var a=Math.round(Math.log(Math.max(o),10)*Math.LOG10E);a=null!==a&&!isNaN(a)&&isFinite(a)?a:0;var n=this.getPrecision(e.displayFormat);if(parseInt(i,10)===i&&0===n);else if(Math.abs(i)<1)i=-0===(i=parseFloat(i.toFixed(a>10?0:10-a)))?0:i;else if(Math.abs(i)<1e12){var l=Math.max(12,a+n);i=parseFloat(i.toPrecision(l))}else i=a+n<17?parseFloat(i.toPrecision(a+n)):Math.round(i);return i}catch(t){p.Y.printStackTrace(t)}},f.getPrecision=function(t){var e=0;try{if(!t||"string"!=typeof t)return 0;var i=new RegExp("\\[(.*)\\]","g"),o=new RegExp("[.]+[#0]+"),s=t.replace(i,"").match(o);e=(s=null!=s?s.join(""):".").length-1}catch(t){p.Y.printStackTrace(t)}return e},f.dynamicCreate=function(t,e,i,o,s,r,a){try{var n=a&&a.id;if(f.getComponentById(t,n))return void m.v.printLog("dynamicCreate error : ID duplcation.\nA component with the provided ID already exists."+t);var l=null;!i.nodeType||1!==i.nodeType&&9!==i.nodeType?"string"==typeof i&&(l=WebSquare.xml.parse(i))&&(l=!0===WebSquare.convertPageXML?WebSquare.xmljs.xml2json(l).E[0]:l.documentElement,i={}):(l=9==i.nodeType?i.documentElement:i,i={}),null==l&&(i.pluginName=e);var h,d=null;if(r){var c=WebSquare.util.getComponentById(r,a.id);c&&(d=c.uuid)}else a&&(d=a.uuid);i._idCollisionCheck=!0,null==a||!a.options||"wframe"!==a.options.pluginName&&"pageInherit"!==a.options.pluginName&&"udc2"!==a.options.pluginName&&"pageFrame"!==a.options.pluginName||(i.scope_obj=a),!0===WebSquare.convertPageXML&&g.I.isXML(l)&&(l=WebSquare.xmljs.xml2json(l).E[0]);var u=!0;!i||"wframe"!==i.pluginName&&"pageFrame"!==i.pluginName||(i.preload=!0,i.src||(u=!1)),h=null==l||"true"!==g.I.getConfiguration("/WebSquare/dynamicCreate/parseChild/@value")?WebSquare.controlFactory.createControl(t,i,l,i.scope_obj||null,!0,d):WebSquare.controlFactory.create(t,i,l,i.scope_obj||null,d);var b=WebSquare.controlFactory._awaitObj.key.length>0||WebSquare.controlFactory._asyncList.length>0||"function"==typeof h.initAsync||h.constructor===Promise;if(u&&b){var y=WebSquare.controlFactory.initAsync(),v=(n=i.scope_obj&&i.scope_obj.id,y.then((function(e,i){return h.constructor===Promise?h.then((function(e,i){var r=f.getComponentById(t,n);return f._dynamicCreateAfter(r,s,o)})):f._dynamicCreateAfter(h,s,o)})));return m.v.printLog("$p.dynamicCreate : return promise because engine files are not ready."),v}return f._dynamicCreateAfter(h,s,o),h}catch(t){p.Y.printStackTrace(t)}},f._dynamicCreateAfter=function(t,e,i){try{return e&&t.modelControl.setItemset(e.nodeset,e.label,e.value),t.appendTo(i||WebSquare.getBody()),t.activate(),t.onComplete(),e&&t.refreshItemset(),t}catch(t){p.Y.printStackTrace(t)}},f.getComponentById=function(t,e){try{var i=t;if(!e&&WebSquare.strictModeFrame&&WebSquare.strictModeFrame.id!==t&&(e=WebSquare.strictModeFrame.id),e){var o=WebSquare.util.getComponentById(e);if(null!=o)for(var s=o;null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[t]){i=s.scope[t].id;break}if(s.scope_obj===s)break;if(WebSquare.strictMode)break}}return WebSquare.idCache[WebSquare.idToUUID[i]]||window[i]}catch(t){p.Y.printStackTrace(t,null,this)}},f.getEventTarget=function(t){var e={};try{return void 0!==t&&null!=t&&""!=t&&(e.pluginName=t.options.pluginName,e.id=t.org_id,e.realId=t.id),e}catch(t){return p.Y.printStackTrace(t,null,this),e}},
f.getGlobalFunction=function(t,e){try{if("function"==typeof t)return t;if("string"!=typeof t||!t)return null;if(!0===/^\s*function/.test(t))return new Function("return "+t)();var i=t.wq_trim(),o=i.indexOf("("),s=i.indexOf(")",o),r=[];o>=0&&s>=0&&(r=i.slice(o+1,s).split(","),i=i.slice(0,o)),e&&i.slice(0,e.length+1)===e+"_"&&(i=i.slice(e.length+1)),i=i.split(".");var a,l=0,h=null,d=!1;if(e){if(null!=(a=WebSquare.util.getComponentById(e)))for(var c=a;null!=c&&null!=c.scope;c=c.scope_obj){for(var u=c.scope[i[l++]];u&&("object"==(0,n.A)(u)||"function"==typeof u)&&l<i.length;)u=u[i[l++]];if("function"==typeof(h=u))break;if(c.scope_obj===c)break;if(WebSquare.strictMode)break}if("function"!=typeof h)try{h=new Function("return "+t)(),d=!0}catch(t){h=null}}else{for(u=i[0]&&window[i[l++]]||null;u&&("object"==(0,n.A)(u)||"function"==typeof u)&&l<i.length;)u=u[i[l++]];if("function"==typeof u)h=u,d=!0;else try{h=new Function("return "+t)(),d=!0}catch(t){h=null}}if(o>=0&&s>=0&&"function"==typeof h){for(var m=0;m<r.length;m++)try{r[m]=new Function("return "+r[m])()}catch(t){r[m]}h=h.apply(h,r)}else if(d&&"function"==typeof h){var f=g.I.getConfiguration("/WebSquare/wpack/common/@name");if(f&&"string"==typeof f){var b,y=new RegExp("^("+f.replace(/,/g,"|")+")$");a&&a.scope&&(b=a.scope[WebSquare.noConflictFunction]);for(m=0;m<i.length-1;m++)if(y.test(i[m])){var v=h.toString();v.slice(v.indexOf("(")+1,v.indexOf(")")).split(",")[0].wq_trim()===WebSquare.noConflictFunction&&(h=h.bind(h,b));break}}}return h}catch(t){p.Y.printStackTrace(t,null,this)}},f.createPopup=function(t,e,i,o,s,r,a,n,l,h,d){try{WebSquare.uiplugin.popup.createPopup(t,e,i,o,s,r,a,n,l,h,d)}catch(t){p.Y.printStackTrace(t,null,this)}},f.openPopup=function(t,e,i,o){try{WebSquare.uiplugin.popup.openPopup(t,e,i,o)}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupParam=function(){try{return WebSquare.uiplugin.popup.getPopupParam()}catch(t){p.Y.printStackTrace(t,null,this)}},f.closePopup=function(t,e){try{var i="";i=null==t?WebSquare.net.getParameter("popupID"):t,null==t&&opener&&opener.WebSquare?opener.WebSquare.uiplugin.popup.callClose(i,e):parent!==window&&null!=parent.WebSquare?(parent.WebSquare.uiplugin.popup&&parent.WebSquare.uiplugin.popup.callClose(i,e),WebSquare.uiplugin.popup&&WebSquare.uiplugin.popup.callClose(i,e)):WebSquare.uiplugin.popup.callClose(i,e)}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopup=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopup(t,e):null}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupList=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupList(t,e):[]}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupWindow=function(t,e){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindow(t,e):null}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupWindowList=function(t,e,i){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getPopupWindowList(t,e,i):[]}catch(t){p.Y.printStackTrace(t,null,this)}},f.getAllPopupList=function(){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getAllPopupList():[]}catch(t){p.Y.printStackTrace(t,null,this)}},f.getAllPopupWindowList=function(t){try{return WebSquare.uiplugin.popup?WebSquare.uiplugin.popup.getAllPopupWindowList(t):[]}catch(t){p.Y.printStackTrace(t,null,this)}},f.isPopup=function(){try{return null!=window.opener&&!window.opener.closed}catch(t){return!1}},f.isPopup2=function(){try{return(window.self!==window.parent||null!=window.opener)&&((window.self!==window.parent||!window.opener||!window.opener.closed)&&(window.self===window.parent||!1!==WebSquare.isWebSquarePopup))}catch(t){return!1}},f.isWFramePopup=function(){try{return!1}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupUrl=function(){try{return WebSquare.net.getParameter("w2xPath")}catch(t){p.Y.printStackTrace(t,null,this)}},f.getPopupId=function(){try{return WebSquare.net.getParameter("popupID")}catch(t){
p.Y.printStackTrace(t,null,this)}},f.getFrameId=function(){try{return null}catch(t){p.Y.printStackTrace(t,null,this)}},f.getFrame=function(){try{return null}catch(t){p.Y.printStackTrace(t,null,this)}},f.getParentWindow=function(){try{var t=opener||parent||window;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){p.Y.printStackTrace(t,null,this)}},f.getTopWindow=function(){try{var t=top;if(!WebSquare.strictMode)return t;try{return t.WebSquare&&t.WebSquare.strictModeFrame?t.WebSquare.strictModeFrame.scope:t}catch(e){return t}}catch(t){p.Y.printStackTrace(t,null,this)}},f.getMainFrame=function(){try{return WebSquare.strictMode?WebSquare.strictModeFrame.scope:window}catch(t){p.Y.printStackTrace(t,null,this)}},f.jQuerySelector=function(t){try{if("undefined"!=typeof jQuery&&null!=jQuery)return jQuery(t)}catch(t){p.Y.printStackTrace(t,null,this)}},f.getDocumentSize=function(t){try{return"height"==(t=t.toLowerCase())?document.documentElement.clientHeight||document.body.clientHeight:"width"==t?document.documentElement.clientWidth||document.body.clientWidth:void m.v.printLog("getDocumentSize : wrong sizeName["+t+"]")}catch(t){p.Y.printStackTrace(t)}},f.getSubmissionURL=function(t,e){try{var i;i="string"==typeof WebSquare.hybridSubmissionURL&&""!=WebSquare.hybridSubmissionURL?WebSquare.hybridSubmissionURL:g.I.getConfiguration("/WebSquare/hybrid/submissionURL");var o=WebSquare.util.appendingPathComponent(i,t);return g.I._getMsaSrc(o,e)}catch(t){p.Y.printStackTrace(t)}},f.appendingPathComponent=function(t,e){try{if(e.indexOf("://")>0||0==t.length)return e;var i=t.length;return"/"==t.charAt(i-1)?"/"==e.charAt(0)?t+e.substr(1):t+e:"/"==e.charAt(0)?t+e:t+"/"+e}catch(t){p.Y.printStackTrace(t)}},f.setDocumentLang=function(t){try{document.documentElement.setAttribute("xml:lang",t)}catch(t){p.Y.printStackTrace(t,null,this)}},f.setDisabled=function(t){try{var e,i,o,s=[],r=[],a=t.componentId,n=t.disabled,l=t.excludeIdList,h=t.includeIdList,d=t.includeAll,c=t.excludeAll,u=t.skipTab;if(!(e=a?WebSquare.util.getComponentById(a):WebSquare.getBody())||!e.options||!e.options.pluginName)return m.v.printLog("[WebSquare.util.setDisabled]id: The component with the provided ID cannot be found."),{doneComponents:s,skipComponents:r};if(WebSquare.util.isArray(h)){i||(i={});for(var g=0;g<h.length;g++)i[h[g]]=!0}else h&&(i=h);if(WebSquare.util.isArray(l)){o||(o={});for(g=0;g<l.length;g++)o[l[g]]=!0}else l&&(o=l);var f=WebSquare.util.getDisabledComponentIdList(e,n),b=f.targetComponents;r=f.skipComponents;for(g=0;g<b.length;g++){if(v=WebSquare.util.getComponentById(b[g])){var y=v.options.disabled;if(!i)try{y!==n&&v.setDisabled(n,u),s.push(v.id)}catch(t){m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}if(i&&d)try{(i[v.id]||i[v.org_id])&&(y!==n&&v.setDisabled(n,u),s.push(v.id))}catch(t){m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}if(o&&c)try{(o[v.id]||o[v.org_id])&&y===n&&v.setDisabled(!n,u)}catch(t){m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}}}if(h&&!d)for(g=0;g<h.length;g++){if((y=(v=WebSquare.util.getComponentById(h[g])).options.disabled)!==n)try{v.setDisabled(n,u)}catch(t){m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}}if(l&&!c)for(g=0;g<l.length;g++){if((y=(v=WebSquare.util.getComponentById(l[g])).options.disabled)===n)try{v.setDisabled(!n,u)}catch(t){m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}}for(g=0;g<r.length;g++){var v;if((y=(v=WebSquare.util.getComponentById(r[g])).options.disabled)!==n)try{v.setDisabled(n,u)}catch(t){
m.v.printLog("[WebSquare.util.setDisabled]["+v.id+"] Failed to disable the component. Please verify the component status.")}}return{doneComponents:s,skipComponents:r}}catch(t){p.Y.printStackTrace(t,null,this)}},f.getDisabledComponentIdList=function(t,e,i){try{if(i||((i={}).targetComponents=[],i.skipComponents=[]),t||(t=WebSquare.getBody()),t&&t.options&&"body"==t.options.pluginName);else{if("stop"==t.activeStatus)return i;if(!t.id||!t.options||!t.options.pluginName&&!t.options.udcName)return i;t.options.disabled===e?i.skipComponents.push(t.id):i.targetComponents.push(t.id)}for(var o=0;o<t.childControlList.length;o++){var s=t.childControlList[o];s&&WebSquare.util.getComponentById(s.id)&&s.options&&(s.options.pluginName||s.options.udcName)&&WebSquare.util.getDisabledComponentIdList(s,e,i)}return i}catch(t){p.Y.printStackTrace(t,null,this)}},f.getIgnoreKeyPressCodes=function(){return{8:"backspace",9:"tab",37:"left",38:"up",39:"right",40:"down",36:"home",35:"end",4:"insert",46:"del",33:"pageup",34:"pagedown"}},f.getKeyCode=function(t,e){var i,o=WebSquare.text.getCaretPos(t.render),s=-1;if(s=o<=1?t.render.value.charCodeAt(0):t.render.value.charCodeAt(o-1),null!=e&&(i=e.charCode||e.keyCode||e.which),i)return 0==i||229==i||i>=48&&s>=0?s:i},f.setDomain=function(t){try{WebSquare.domain=t,document.domain=t}catch(t){p.Y.printStackTrace(t)}},f.getChildren=function(t,e){try{if(t||(t=t||WebSquare.getBody(),e&&(e.recursive=!1)),e){for(var i=[],o=void 0===e.excludeInnerComp?WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/util/excludeInnerComp/@value")):WebSquare.util.getBoolean(e.excludeInnerComp),s=void 0===e.excludeContainerComp?WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/util/excludeContainerInnerComp/@value")):WebSquare.util.getBoolean(e.excludeContainerComp),r=e.recursive?t.getAllChildren({excludeInnerComp:o,excludeContainerInnerComp:s,excludePlugin:e.excludePlugin,excludeId:e.excludeId}):t.getChildren(),a=!!e.excludePlugin&&" "+e.excludePlugin+" ",n=!!e.includePlugin&&" "+e.includePlugin+" ",l=!!e.excludeId&&" "+e.excludeId+" ",h=0;h<r.length;h++)(!l||l.indexOf(" "+r[h].id+" ")<0)&&(!a||a.indexOf(" "+r[h].options.pluginName+" ")<0)&&(!n||n.indexOf(" "+r[h].options.pluginName+" ")>-1)&&i.push(r[h]);return i}return t.getChildren().slice(0)}catch(t){p.Y.printStackTrace(t)}},f.addClearMemory=function(t){try{t&&g.I.userClearMemoryStack.push(t)}catch(t){p.Y.printStackTrace(t)}},f.loadUserComponent=function(){var t=(0,l.A)(d().mark((function t(e,i,o,s,r,a,n){var l,h,c,u,f,b,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E,R,N,F,O,B;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,n||(n=e),h=[],c=!0===a?"Inherit":"User",u=WebSquare.util["loaded"+c+"ComponentURL"][e],"false"===r||null==u){t.next=10;break}l="string"==typeof u&&"xml"===WebSquare.jsLoader.getPageTypeByString(u)?WebSquare.xml.parse(u):u,t.next=13;break;case 10:return t.next=12,WebSquare.jsLoader._loadObj(e);case 12:l=t.sent;case 13:if(f=g.I.isXML(l)?"xml":"js",b=[],v=WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/supportW2Udc/@value")),i&&o)b.push(o);else if("xml"===f)for(w=WebSquare.xml.findNodes(l.documentElement,"//@pluginName"),S=0;S<w.length;S++)b.push(w[S].value);else for(y=WebSquare.jsonUtil.walk_DFS(l,(function(t){if(t.A&&t.A.pluginName)return t})),S=0;S<y.length;S++)b.push(y[S].A.pluginName);if(WebSquare.util["loaded"+c+"Component"][e+"#"+b[0]]){t.next=44;break}_=WebSquare.w2xHome,S=0;case 20:if(!(S<b.length)){t.next=42;break}if((C=b[S]).indexOf("_")>-1||v){t.next=25;break}return m.v.printLog("ERROR : The udc pluginName provided is invalid. The correct format should be ProjectName_ComponentName. Please update the pluginName accordingly. ["+e+","+C+"]"),t.abrupt("continue",39);case 25:if(!WebSquare.util["loaded"+c+"ComponentPluginName"][C]){t.next=29;break}
return(I=WebSquare.util["loaded"+c+"ComponentPluginName"][C].split("#")[0])!=e?m.v.printLog("ERROR : udc name ["+C+"] already exists in another udc file : ["+e+","+I+"]"):m.v.printLog("ERROR : udc name ["+C+"] already exists in same udc file : ["+e+"]"),t.abrupt("continue",39);case 29:if(x=i&&o?"xml"===f?WebSquare.xml.findNode(l.documentElement,"//*[@id='"+i+"']"):WebSquare.jsonUtil.walk_DFS(l,(function(t){if(t.A&&t.A.id===i)return t})):"xml"===f?WebSquare.xml.findNode(l.documentElement,"//*[@pluginName='"+C+"']"):y[S],T=n.lastIndexOf("/"),WebSquare.w2xHome=T<0?"/":n.slice(0,n.lastIndexOf("/"))+"/",x){t.next=34;break}return t.abrupt("continue",39);case 34:if("xml"===f){for(k=x.firstChild,L=k;null!=L;L=L.nextSibling)"w2:style"===L.nodeName||"style"===L.nodeName?(A="",A=v?WebSquare.xml.getTextNodeValue(L):WebSquare.xml.getCDataNodeValue(L),WebSquare.cssManager.addInternalCSS(A)):"script"===L.nodeName?(D=WebSquare.util.getBoolean(L.getAttribute("scopeExternal"))||s&&s.options.scopeExternal,W=L.getAttribute("scopeVariable")||"",q=L.getAttribute(L,"msaName"),M=WebSquare.jsonUtil.getAttribute(L,"wpack"),(E=WebSquare.Parser.parseExternalScript({uri:L.getAttribute("src"),cache:L.getAttribute("cache"),lazy:L.getAttribute("defer"),frameObj:s,scopeExternal:D,scopeVariable:W,msaName:q,wpack:M}))instanceof window.Promise&&h.push(E)):"link"===L.nodeName&&((R=WebSquare.Parser.parseAttribute(L)).href&&(N={frameObj:s,msaName:R.msaName},R.href=WebSquare.util.getAbsolutePath(g.I._getMsaSrc(R.href,N))),null==R.type&&(R.type="text/css"),null==R.rel&&(R.rel="stylesheet"),WebSquare.skin.addImport(R,!0,{scopeObj:s}));x.setAttribute("udcHome",WebSquare.w2xHome)}else h=WebSquare.jsonUtil.walk_DFS(x,(function(t){if(t.N)switch(t.N){case"style":case"w2:style":var e=WebSquare.jsonUtil.getCDataNodeValue(t);WebSquare.cssManager.addInternalCSS(e);break;case"link":var i=WebSquare.Parser.parseAttribute(t);if(i.href){var o={frameObj:s,msaName:i.msaName};i.href=WebSquare.util.getAbsolutePath(g.I._getMsaSrc(i.href,o))}null==i.type&&(i.type="text/css"),null==i.rel&&(i.rel="stylesheet"),WebSquare.skin.addImport(i,!0,{scopeObj:s});break;case"script":var r=new WebSquare.Elem(t),a=WebSquare.util.getBoolean(r.getAttribute("scopeExternal"))||s&&s.options.scopeExternal,n=r.getAttribute("scopeVariable")||"",l=r.getAttribute("msaName"),h=WebSquare.jsonUtil.getAttribute(r,"wpack"),d=WebSquare.Parser.parseExternalScript({uri:r.getAttribute("src"),cache:r.getAttribute("cache"),lazy:r.getAttribute("defer"),frameObj:s,scopeExternal:a,scopeVariable:n,msaName:l,wpack:h});if(d instanceof window.Promise)return d}})),WebSquare.jsonUtil.setAttribute(x,"udcHome",WebSquare.w2xHome);WebSquare.util["loaded"+c+"Component"][e+"#"+C]=x,WebSquare.util["loaded"+c+"ComponentPluginName"][C]=e+"#"+C,WebSquare.util["loaded"+c+"ComponentURL"][e]="xml"===f?WebSquare.xml.serialize(l):l,s&&(s.userComponentList.push(e+"#"+C),s.userPluginList.push(C));case 39:S++,t.next=20;break;case 42:"xml"===f?WebSquare.Parser.WebSquareParser.prototype.parseScript(l,null,null,!0):WebSquare.jsonParser.prototype.parseScript(l,null,null,!0),WebSquare.w2xHome=_;case 44:for(F=WebSquare.Elem.api.getElementsByTagName(l,"head")[0],O=WebSquare.Elem.api.getElementsByTagName(F,"require",g.I._XML_NAMESPACE.W2),S=0;S<O.length;S++)e=g.I.getPageURL(O[S].getAttribute("src")),i=O[S].getAttribute("id"),o=O[S].getAttribute("pluginName"),r=O[S].getAttribute("cache"),WebSquare.util.loadUserComponent(e,i,o,s,r);return B=s?s.uuid:"",t.next=50,Promise.allSettled(h).then((function(t){for(var e=0;e<t.length;e++)if("fulfilled"===t[e].status){var i=t[e].value;if(i){var o=WebSquare.idCache[B];WebSquare.Parser._parseExternalScriptAfter(i,o)}}})).catch((function(t){p.Y.printStackTrace(t)}));case 50:t.next=55;break;case 52:t.prev=52,t.t0=t.catch(1),p.Y.printStackTrace(t.t0);case 55:case"end":return t.stop()}}),t,null,[[1,52]])})));return function(e,i,o,s,r,a,n){return t.apply(this,arguments)}}(),f.loadInheritComponent=function(){var t=(0,
l.A)(d().mark((function t(e,i,o,s,r){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,WebSquare.util.loadUserComponent(e,i,o,s,r,!0);case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),p.Y.printStackTrace(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,i,o,s,r){return t.apply(this,arguments)}}(),f.unloadUserComponent=function(t,e,i){},f.setTimeout=function(t,e){try{var i=(new Date).getTime(),o=e.key||t.toString().slice(0,30),s=e.delay||e.max||1,r=e.max||0,a=e.caller||window,n=e.args||[],l=WebSquare.userTimerHash[o];return l||(l=WebSquare.userTimerHash[o]={thread:null,timeoutKey:null,startTime:i}),l.thread=function(){window.WebSquare&&WebSquare.userTimerHash&&delete WebSquare.userTimerHash[o],e.before_call&&e.before_call.call(a,l);var i=t.apply(a,n);e.callback&&e.callback.call(a,i)},clearTimeout(l.timeoutKey),r<=0||i-l.startTime<r?(e.before_set&&e.before_set.call(a,l),l.timeoutKey=setTimeout(l.thread,s),e.after_set&&e.after_set.call(a,l)):l.thread(),o}catch(t){p.Y.printStackTrace(t,null,this)}},f.clearTimeout=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userTimerHash[t];i&&(clearTimeout(i.timeoutKey),e&&i.thread(),WebSquare.userTimerHash[t]=null,delete WebSquare.userTimerHash[t])}catch(t){p.Y.printStackTrace(t,null,this)}},f.setInterval=function(t,e){try{var i=e.key||t.toString().slice(0,30),o=e.delay||1,s=e.caller,r=e.args,a=WebSquare.userIntervalHash[i];return a||(a=WebSquare.userIntervalHash[i]={thread:null,timeoutKey:null}),r?(s||(s=window),a.thread=function(){t.apply(s,r)}):a.thread=s?function(){t.call(s)}:function(){t()},null!=a.timeoutKey&&clearInterval(a.timeoutKey),a.timeoutKey=setInterval(a.thread,o),i}catch(t){p.Y.printStackTrace(t,null,this)}},f.clearInterval=function(t,e){try{"function"==typeof t&&(t=t.toString().slice(0,30));var i=WebSquare.userIntervalHash[t];i&&(clearInterval(i.timeoutKey),e&&i.thread(),WebSquare.userIntervalHash[t]=null,delete WebSquare.userIntervalHash[t])}catch(t){p.Y.printStackTrace(t,null,this)}},f.getTimeoutKeyList=function(){var t=[];for(var e in WebSquare.userTimerHash)t.push(e);return t},f.getIntervalKeyList=function(){var t=[];for(var e in WebSquare.userIntervalHash)t.push(e);return t},f.setData=function(t,e){try{WebSquare.userData[t]=e}catch(t){p.Y.printStackTrace(t,null,this)}},f.getData=function(t){try{return WebSquare.userData[t]||null}catch(t){p.Y.printStackTrace(t,null,this)}},f.removeData=function(t){try{if("object"==(0,n.A)(WebSquare.userData[t]))for(var e in WebSquare.userData[t])delete WebSquare.userData[t][e];WebSquare.userData[t]=null,delete WebSquare.userData[t]}catch(t){p.Y.printStackTrace(t,null,this)}},f.url=function(t,e){try{null==e&&(e={});var i={msaName:e.msaName};if(null==e.shortURL&&(e.shortURL=t.indexOf("?w2xPath")<0&&t.indexOf("#w2xPath")<0&&t.slice(t.lastIndexOf(".")).startsWith(".xml")),!e.shortURL)return void("#"==t.charAt(0)?location.hash=t:e.replaceHistory?location.replace(t):location.assign(t));null==e.spa&&(e.spa="true"==g.I.getConfiguration("/WebSquare/spa/@value"));var o="";if(e.param)for(var s in e.param)WebSquare.util.getEncodeParameterOption("onlyParam")?o+="&"+WebSquare.util.encodeParameter(s)+"="+WebSquare.text.URLEncoder(e.param[s]):o+="&"+s+"="+WebSquare.text.URLEncoder(e.param[s]);var r="w2xPath";if(WebSquare.util.getEncodeParameterOption("pathName")?r=WebSquare.util.getEncodeParameterOption("pathName"):WebSquare.util.isEncodeParameter()&&(r=WebSquare.util.encodeParameter("w2xPath")),m.v.printLog("before change url"),e.spa){var a=g.I.getURL(t,i);(b=(f=location.toString()).indexOf("#"))<0&&(b=f.length);var n=f.substring(0,b);y=WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?n+"#"+r+"="+a+o:n+"#"+r+"="+WebSquare.util.encodeParameter(a+o):n+"#"+r+"="+a+o
;var l=e.transition?e.transition.toLowerCase():"",h="",d=g.I.getXMLHTTPObject(),u=c.q.baseURI+"suffix.txt?postfix="+(new Date).getTime()+c.q.safeRandom();if(d.open("GET",u,!1),d.send(null),d.status>="400"||(h=d.responseText.wq_trim(),WebSquare.suffix!=h&&(WebSquare.suffix=h,e.forceReload=!0)),d=null,e.urlHashText&&(y=WebSquare.util.isEncodeParameter()?n+WebSquare.util.encodeParameter("#"+e.urlHashText+o):n+"#"+e.urlHashText+o,WebSquare.spaURLMapping[e.urlHashText]=WebSquare.text.URLDecoder(a),"sessionStorage"in window&&sessionStorage.setItem("wq_spaURLMapping",JSON.stringify(WebSquare.spaURLMapping))),e.forceReload){if("onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),e.replaceHistory)switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}if(g.I.firePageunload||g.I.onurlchange||(g.I.firePageunload=!0,WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload")),!g.I.onurlchange)"true"!==g.I.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),wq_reload(y)}else if(WebSquare.w2xPath="",y==f)WebSquare.util.onhashchange();else if(g.I.urlchangebyapi=!0,e.replaceHistory)switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}}else{var f,b;a=g.I.getURL(t,i);(b=(f=location.toString()).indexOf("?"))<0&&(b=f.indexOf("#"))<0&&(b=f.length);var y;n=f.substring(0,b);if(y=WebSquare.configPath?n+"?w2Config="+WebSquare.configPath+"&"+r+"=":n+"?"+r+"=",WebSquare.util.isEncodeParameter()?WebSquare.util.getEncodeParameterOption("onlyParam")?y=y+a+o:y+=WebSquare.util.encodeParameter(a+o):y=y+a+o,"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),WebSquare.event.fireEvent(WebSquare.getBody(),"onpageunload"),e.replaceHistory)switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.replace(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.replace(y)}));break;default:location.replace(y)}else switch(l){case"fadeout":$("body").fadeOut(1e3,(function(){location.assign(y)}));break;case"slideup":$("body").slideUp(1e3,(function(){location.assign(y)}));break;default:location.assign(y)}}}catch(t){p.Y.printStackTrace(t)}},f.clearPage=function(){return g.I.onclearpage=!0,WebSquare.util.url(WebSquare.net.getBlankXML(),{spa:!0,forceReload:!0})},f.reinitializeWframe=function(t,e){try{var i=JSON.stringify(e),o=WebSquare.util.getFrameFromPoint(i),s=null;o&&(s=WebSquare.idCache[o]),s&&s.reload()}catch(t){p.Y.printStackTrace(t)}},f.reinitialize=function(t){try{if(m.v.printLog("before redraw page"),t)"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),g.I.finalize(),location.reload();else{var e=WebSquare.net.getParameter("w2xPath");""!=e&&e==WebSquare.w2xPath||(location.hash=location.hash+"#w2xPath="+WebSquare.w2xPath),WebSquare.w2xPath="",WebSquare.util.onhashchange()}}catch(t){p.Y.printStackTrace(t)}},f.reinitializeTop=function(){try{var t=WebSquare.util.getTop();t.WebSquare&&t.WebSquare.util.reinitialize(!1)}catch(t){p.Y.printStackTrace(t)}},f.onhashchange=function(){var t=(0,l.A)(d().mark((function t(e){var i,o,s,r,a,n,l,h,c,f,b,y;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=!1,o="",null!=(s=WebSquare.util.getUrlHashText())&&(i=!0,o=s),i||(o=WebSquare.net.getParameter("w2xPath")),""!=o){t.next=10;break}
return location.toString().indexOf("."+WebSquare.w2xExtension),t.abrupt("return");case 10:if(o!=WebSquare.w2xPath){t.next=12;break}return t.abrupt("return");case 12:if(g.I.urlchangebyapi||""===WebSquare.w2xPath){t.next=15;break}if(!(location.hash.indexOf("w2xPath")<0)||i){t.next=15;break}return t.abrupt("return");case 15:for(r in"onhashchange"in window?window.onhashchange=null:window.clearInterval(WebSquare.util._hashTestKey),u.Q.performanceCheck)u.Q.performanceCheck[r]=new Date;if(u.Q.printLog("[SPA1] The user request for new XML page. "),a=location.href,g.I.onurlchange=!0,g.I.onclearpage=!1,g.I.finalize(),g.I.onurlchange=!1,g.I.urlchangebyapi=!1,!g.I.onclearpage&&(i||WebSquare.net.getParameter("w2xPath")==o)){t.next=31;break}return g.I.onclearpage=!1,location.replace(a),"true"!==g.I.getConfiguration("/WebSquare/clearMemory/@value")&&WebSquare.clearMemory(),window.wq_reload(a),t.abrupt("return");case 31:return g.I.onclearpage=!1,u.Q.performanceCheck.mid1=new Date,u.Q.printLog("[SPA2] Clear page resources. Time:"+(u.Q.performanceCheck.mid1.getTime()-u.Q.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=o,n=/[\\]/g,WebSquare.w2xPath=WebSquare.w2xPath.replace(n,"/"),l=WebSquare.w2xPath.lastIndexOf("/"),""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=l>-1?WebSquare.w2xPath.substring(0,l+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=l>-1?" "+WebSquare.w2xPath.substring(l+1):" "+WebSquare.w2xPath,"/"==(h=WebSquare.net.getParameter("w2xDocumentRoot"))||"\\"==h?WebSquare.w2xDocumentRoot="":""!=h&&(WebSquare.w2xDocumentRoot=h),m.v.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),m.v.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),m.v.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),m.v.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),t.next=48,u.Q.loadEngineModuleAsync(!0);case 48:g.I._createGlobalVariable(),WebSquare._loadCSS({isSPA:!0,w2xPath:o}),c=g.I.getConfiguration("/WebSquare/spa/defer/@function"),b=parseInt(g.I.getConfiguration("/WebSquare/spa/defer/@delay"),10)||0,c&&(f=WebSquare.util.getGlobalFunction(c)),y=!1,"function"==typeof f&&b>0&&(y=f(o)),!0===y?WebSquare.util.setTimeout(WebSquare.util._onhashchange,{key:"WebSquare.util._onhashchange",caller:this,delay:b,args:[o]}):WebSquare.util._onhashchange(o),t.next=61;break;case 58:t.prev=58,t.t0=t.catch(1),p.Y.printStackTrace(t.t0);case 61:case"end":return t.stop()}}),t,this,[[1,58]])})));return function(e){return t.apply(this,arguments)}}(),f._onhashchange=function(t){if(!WebSquare.initialize(t,!0)){"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=window.setInterval(WebSquare.util._hashTest,50),m.v.printLog("Runtime Error : "+t+" load failed.");var e=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",t);WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:e})}},f.getUrlHashText=function(){try{var t=null;for(var e in WebSquare.spaURLMapping)for(var i=location.hash.slice(1).split(/[\&\?\#]/),o=0;o<i.length;o++)if(e===i[o]){t=WebSquare.spaURLMapping[e];break}return t}catch(t){p.Y.printStackTrace(t,null,this)}},f._stopProcess=function(t){if(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0){var e=WebSquare.util.getUrlHashText();if(null==e&&(e=WebSquare.net.getParameter("w2xPath")),!e)return!1;if(e!=WebSquare.w2xPath)return m.v.printLog("[SPA_Exception] Event Activation Canceled by New Page Request : #w2xPath="+e),WebSquare.util.onhashchange(),!0}return!1},f.isSPA=function(){return location.hash&&location.hash.lastIndexOf("w2xPath")>=0||null!=WebSquare.util.getUrlHashText()},f.movePage=function(){var t=(0,l.A)(d().mark((function t(e){var i,o,s,r,a,n,l,h,c,b,y,v;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in t.prev=1,i=e,"onhashchange"in window?window.onhashchange=null:clearInterval(WebSquare.util._hashTestKey),u.Q.performanceCheck)u.Q.performanceCheck[o]=new Date
;if(u.Q.printLog("[SPA1] The user request for new XML page. "),g.I.onurlchange=!0,g.I.onclearpage=!1,"true"!==g.I.getConfiguration("/WebSquare/spa/autoReload/@value").toLowerCase()){t.next=24;break}t.t0=d().keys(g.I.memoryLeakComponent);case 10:if((t.t1=t.t0()).done){t.next=19;break}if(s=t.t1.value,null==WebSquare.componentsCache[s]){t.next=17;break}if(WebSquare.hybridApp||!(Number(g.I.getConfiguration("/WebSquare/spa/autoReload/@"+s))<=Object.keys(WebSquare.componentsCache[s]).length)){t.next=16;break}try{(r=g.I.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))?"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(e):WebSquare.util.url(e,{spa:!1})}catch(t){p.Y.printStackTrace(t)}return t.abrupt("return");case 16:g.I.memoryLeakComponentCount+=Object.keys(WebSquare.componentsCache[s]).length*g.I.memoryLeakComponent[s];case 17:t.next=10;break;case 19:if(n=""==(n=g.I.getConfiguration("/WebSquare/spa/autoReload/@count"))?NaN:Number(n),!(!WebSquare.hybridApp&&g.I.memoryLeakComponentCount>0&&g.I.memoryLeakComponentCount>n)){t.next=24;break}try{(r=g.I.getConfiguration("/WebSquare/spa/autoReload/@userFunction"))?"function"==typeof(a=WebSquare.util.getGlobalFunction(r))&&a(e):WebSquare.util.url(e,{spa:!1})}catch(t){p.Y.printStackTrace(t)}return t.abrupt("return");case 24:return g.I.finalize(),g.I.onurlchange=!1,g.I.urlchangebyapi=!1,g.I.onclearpage=!1,u.Q.performanceCheck.mid1=new Date,u.Q.printLog("[SPA2] Clear page resources. Time:"+(u.Q.performanceCheck.mid1.getTime()-u.Q.performanceCheck.start.getTime())+"ms"),WebSquare.w2xPath=i,l=/[\\]/g,WebSquare.w2xPath=WebSquare.w2xPath.replace(l,"/"),h=WebSquare.w2xPath.lastIndexOf("/"),""==WebSquare.net.getParameter("w2xHome")?WebSquare.w2xHome=h>-1?WebSquare.w2xPath.substring(0,h+1):"/":WebSquare.w2xHome=WebSquare.net.getParameter("w2xHome"),WebSquare.logFileName=h>-1?" "+WebSquare.w2xPath.substring(h+1):" "+WebSquare.w2xPath,"/"==(c=WebSquare.net.getParameter("w2xDocumentRoot"))||"\\"==c?WebSquare.w2xDocumentRoot="":""!=c&&(WebSquare.w2xDocumentRoot=c),m.v.printLog("w2xDocumentRoot["+WebSquare.w2xDocumentRoot+"]"),m.v.printLog("w2xHome        ["+WebSquare.w2xHome+"]"),m.v.printLog("w2xPath        ["+WebSquare.w2xPath+"]"),m.v.printLog("w2xTheme       ["+WebSquare.w2xTheme+"]"),t.next=44,u.Q.loadEngineModuleAsync(!0);case 44:return b=WebSquare.util._stopProcess,f._stopProcess=function(){},t.next=48,WebSquare.initialize(i,!0);case 48:if(t.sent){t.next=53;break}"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50),m.v.printLog("Runtime Error : "+i+" load failed."),y=WebSquare.language.getMessage("E_initializer_XMLLoadFailError",i),WebSquare.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:y});case 53:for(v in g.I.clearTimer("WebSquare_startOnload"),WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp)WebSquare.DataCollection.comp[v].activate();WebSquare.getBody().activate(),u.Q.performanceCheck.mid6=new Date,u.Q.printLog("[SPA7][EVENT] Event Activation. Time:"+(u.Q.performanceCheck.mid6.getTime()-u.Q.performanceCheck.mid5.getTime())+"ms"),WebSquare.startOnLoad(!0),"onhashchange"in window?window.onhashchange=WebSquare.util.onhashchange:WebSquare.util._wait_for_iframe_reload(),WebSquare.getBody().onComplete(),WebSquare.DataCollection.api.onComplete(),WebSquare.util._stopProcess=b,t.next=69;break;case 66:t.prev=66,t.t2=t.catch(1),p.Y.printStackTrace(t.t2);case 69:case"end":return t.stop()}}),t,null,[[1,66]])})));return function(e){return t.apply(this,arguments)}}(),"onhashchange"in window||(f._hashTest=function(){if(WebSquare.util._hash){if(WebSquare.util._hash!=location.hash)WebSquare.util._hash=location.hash,WebSquare.util.onhashchange();else if(WebSquare.util._hiddenFrame&&!WebSquare.util._iframe_wait){try{var t=document.getElementById(WebSquare.util._hiddenFrame.id);if(null!=t){var e=t.contentWindow.location.search.slice(1);if(e!=WebSquare.w2xPath){
var i=location.hash.lastIndexOf("#w2xPath");if(i<0)location.hash.length>0?location.hash=location.hash+"&w2xPath="+e:location.hash="#w2xPath="+e;else{var o=location.hash.substring(i+1).search(/[\&\?\#]/)+1;o<0?location.hash=location.hash.slice(0,i)+"#w2xPath="+e:(location.hash=location.hash.slice(0,i)+"#w2xPath="+e+location.hash.substring(i+o),alert(location.hash.slice(0,i)),alert(e),alert(location.hash.substring(i+o))),alert(location.hash)}}}else document.body.appendChild(WebSquare.util._hiddenFrame)}catch(t){p.Y.printStackTrace(t)}t=null}}else WebSquare.util._hash=location.hash},f._makeFrame=function(){try{var t=document.createElement("iframe");t.id="wq_hidden_frame_for_spa_history",t.src=c.q._resourceURI+"blank.html?"+WebSquare.w2xPath,t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.style.display="none",WebSquare.util._hiddenFrame=document.body.appendChild(t),t=null}catch(t){p.Y.printStackTrace(t)}},f._wait_for_iframe_reload=function(t){(t||location.hash&&location.hash.lastIndexOf("w2xPath")>=0)&&WebSquare.util._iframe_wait&&(WebSquare.util._hiddenFrame.contentWindow.location.search.slice(1)!=WebSquare.w2xPath?setTimeout(WebSquare.util._wait_for_iframe_reload,5):(WebSquare.util._iframe_wait=!1,WebSquare.util._hashTestKey=setInterval(WebSquare.util._hashTest,50)))}),f.setFullView=function(t){try{var e=function(){var e=window.innerWidth||document.body.clientWidth,i=window.innerHeight||document.body.clientHeight;if(null!==t&&"function"==typeof t){var o=t();if(null!==o&&"object"===(0,n.A)(o)&&o.baseHeight&&o.baseWidth){var s,r,a=e/o.baseWidth,l=i/o.baseHeight;(s=a>l?l:a)<(r=!isNaN(parseFloat(o.minZoom))&&isFinite(o.minZoom)?o.minZoom:.5)&&(s=r),WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,s),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,s),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=s,document.documentElement.style.overflow="hidden"}else!isNaN(parseFloat(o))&&isFinite(o)&&(WebSquare.util.isIEAllVersion()&&(document.body.style.width=document.documentElement.offsetWidth/s+"px",document.body.style.height=document.documentElement.offsetHeight/s+"px"),WebSquare.util.zoomed(document.body,o),WebSquare.util.isIEAllVersion()||WebSquare.util.traverseAndZoom(document,o),WebSquare.util.fullViewed=!0,WebSquare.util.fullViewRatio=o,document.documentElement.style.overflow="hidden")}};WebSquare.getBody().event.addListener(window,"onresize",e),e()}catch(t){p.Y.printStackTrace(t)}},f.getMetaValue=function(t){try{var e="",i=WebSquare.Elem.api.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){p.Y.printStackTrace(t)}},f.traverseAndZoom=function(t,e){for(var i=t.getElementsByTagName("iframe"),o=0;o<i.length;o++)i[o].contentWindow.WebSquare.util.zoomed(i[o].contentWindow.document.body,e),i[o].contentWindow.WebSquare.util.traverseAndZoom(i[o].contentWindow.document,e)},f.zoomed=function(t,e){if(u.Q.browserCheck.moz&&t&&t.style)t.style.MozTransform="scale("+e+")",t.style.MozTransformOrigin="left top";else if(t&&t.style&&(t.style.zoom=e,u.Q.fullViewClass)){u.Q.fullViewClass=!1;for(var i=document.getElementsByTagName("style"),o=0;o<i.length;o++)if(i[o].textContent==u.Q.fullViewClassCssText){document.getElementsByTagName("head")[0].removeChild(i[o]);break}}},f.createProgressBar=function(t){try{if(t&&t.id){var e=WebSquare.util.dynamicCreate(t.id,"progressbar",t);e.render.style.zIndex=4500,e.setStyle("position","absolute")}else m.v.printLog("Please set Progressbar options id")}catch(t){p.Y.printStackTrace(t)}},f.getNextTabbableComp=function(t){try{var e;return e=function t(e){if(null!=WebSquare.tabOrder[e]&&null!=WebSquare.tabOrder[e].nextTabID){var i=WebSquare.tabOrder[e].nextTabID,o=WebSquare.util.getComponentById(i)
;if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||!1===o._getVisible()?t(i):i}}(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){p.Y.printStackTrace(t)}},f.getPreTabbableComp=function(t){try{var e;return e=function t(e){if(null!=WebSquare.tabOrder[e]&&null!=WebSquare.tabOrder[e].preTabID){var i=WebSquare.tabOrder[e].preTabID,o=WebSquare.util.getComponentById(i);if(o)return!0===o.getReadOnly()||!0===o.getDisabled()||$("#"+i+":visible").length<1?t(i):i}}(t),WebSquare.util.getComponentById(e)||WebSquare.util.getComponentById(t)}catch(t){p.Y.printStackTrace(t)}},f.setNextTabPageComp=function(t,e){try{var i=WebSquare.util.getComponentById(t);if(i&&("wframe"==i.options.pluginName||"pageFrame"==i.options.pluginName||i.options.udcName)){var o,s=null;if(e&&e.firstTabID&&(i.options.firstTabID=e.firstTabID),e&&e.lastTabID&&(i.options.lastTabID=o=e.lastTabID),i.options.nextTabID){s=$("#"+i.id+" *:wq:tabbable"),null==WebSquare.tabOrder[i.id]&&(WebSquare.tabOrder[i.id]={});var r=null;i.options.udcName?i.parentFrame&&void 0!==WebSquare.idCache[i.parentFrame]&&(r=WebSquare.idCache[i.parentFrame].id):r=i.scope_id;var a,n=null!=r?WebSquare.util.getComponentById(i.options.nextTabID,r).id:i.options.nextTabID;if(WebSquare.tabOrder[i.id].nextTabID=n,o)a=null!=r?WebSquare.util.getComponentById(i.options.lastTabID,r).id:i.options.lastTabID;else{var l=$(s[s.length-1]).wq()[0];l&&(a=l.id)}a&&(null==WebSquare.tabOrder[n]&&(WebSquare.tabOrder[n]={}),WebSquare.tabOrder[n].preTabID=a,null==WebSquare.tabOrder[a]&&(WebSquare.tabOrder[a]={}),WebSquare.tabOrder[a].nextTabID=n)}if(null!=WebSquare.tabOrder[i.id]&&null!=WebSquare.tabOrder[i.id].preTabID){var h,d=null;if(null!=i.options.firstTabID)d=null!=r?WebSquare.util.getComponentById(i.options.firstTabID,r).id:i.options.firstTabID;else null==s&&(s=$("#"+i.id+" *:wq:tabbable")),(h=$(s[0]).wq()[0])&&(d=h.id);if(d){var c=WebSquare.tabOrder[i.id].preTabID;WebSquare.tabOrder[c].nextTabID=d,null==WebSquare.tabOrder[d]&&(WebSquare.tabOrder[d]={}),WebSquare.tabOrder[d].preTabID=c}}}}catch(t){p.Y.printStackTrace(t)}},f.setNextTabID=function(t,e,i){try{if(null!=e){null==WebSquare.tabOrder[t]&&(WebSquare.tabOrder[t]={});var o=f.getComponentById(t,i),s=o.getGenerator(),r=!1;"generator"==s.options.pluginName&&(r=!0);var a=i||o.scope_id;if(o.options.inheritedCompName&&(a=WebSquare.idCache[o.parentFrame].id),r)if(!f.getComponentById(e)){var n=f.getDataPrefix("g_index"),l=(f.getDataPrefix("original_id"),o.element.getAttribute(n));e=s.id+"_"+l+"_"+e}var h=WebSquare.util.getComponentById(e,a);e=null!=a?h.id:e;if(h._wqContent&&h._wqContent._isUDC2&&(e=h._wqContent.id),WebSquare.tabOrder[e]&&h&&("wframe"===h.options.pluginName||"pageFrame"===h.options.pluginName||h.options.udcName))if(WebSquare.tabOrder[e].preTabID!==t){var d=null;if(a||(h.options.udcName?h.parentFrame&&void 0!==WebSquare.idCache[h.parentFrame]&&(a=WebSquare.idCache[h.parentFrame].id):a=h.scope_id),null!=WebSquare.tabOrder[h.id]){var c,u=null;if(null!=h.options.firstTabID)u=null!=a?WebSquare.util.getComponentById(h.options.firstTabID,a).id:h.options.firstTabID;else null==d&&(d=$("#"+h.id+" *:wq:tabbable")),(c=$(d[0]).wq()[0])&&(u=c.id);u&&(WebSquare.tabOrder[t].nextTabID=u,null==WebSquare.tabOrder[u]&&(WebSquare.tabOrder[u]={}),WebSquare.tabOrder[u].preTabID=t)}}else WebSquare.tabOrder[t].nextTabID=e;else WebSquare.tabOrder[t].nextTabID=e;null==WebSquare.tabOrder[e]&&(WebSquare.tabOrder[e]={}),WebSquare.tabOrder[e].preTabID=t}}catch(t){p.Y.printStackTrace(t)}},f._getTabbableComp=function(t){WebSquare.util._getTabbableComp;try{var e=[];return t&&(e=t.querySelectorAll('a[href], button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), details, [aria-hidden]:not([aria-hidden="true"])')),e}catch(t){p.Y.printStackTrace(t)}},f.autoFocus=function(t,e){WebSquare.util.autoFocus;try{
var i=WebSquare.util.getStringByByteSize(e,t.options.maxByteLength+2,t.options.byteCheckIgnoreChar),o=WebSquare.util.getByteLength(i)===t.options.maxByteLength&&!0!==WebSquare.util.isKorean(e.charAt(e.length-1)),s=WebSquare.util.getByteLength(i)>t.options.maxByteLength;t.options.autoFocus&&(o||s)&&WebSquare.util._autoFocus(t)}catch(t){p.Y.printStackTrace(t)}},f._autoFocus=function(t){WebSquare.util.autoFocus;try{if(null!=WebSquare.tabOrder[t.id]&&null!=WebSquare.tabOrder[t.id].nextTabID){var e=WebSquare.util.getNextTabbableComp(t.id);e&&e.focus()}else{var i=WebSquare.util.getGlobalFunction(g.I.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof i&&i.call(t,t.id)}}catch(t){p.Y.printStackTrace(t)}},f.multipleExcelDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],h="",d=i.action||i.advancedExcelDownloadURL||"",c=0;c<o.length;c++){for(var u in s={},r=[],s=o[c],i)s[u]=i[u];if(s.dataProvider=s.dataProvider||"",s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,h=s.wframeId||"",null!=(e=WebSquare.util.getComponentById(s.gridId,h))&&null!=e.delayedDrawObj&&e.setRedrawStatus("draw");var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}if(0===s.type||1===s.type){0==c&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg,{scope:t.scopeId||s.wframeId||""})):WebSquare.getBody().showModal("w2modal_gridDownload")),s.cellInfo=[],s.isPlainDataCol=[],s.isSelectCol=[],s.isBasicCol=[],s.isExpCol=[],s.isCustomCol=[],s.isCustomModelCol=[],s.isCustomType=[],s.isEscapeFormatter=[];var v=e.oneRowDataLength;for(b=0;b<v;b++){var w=e.getCellInfo(b),S=w.options.inputType;s.cellInfo[b]=w,s.isCustomType[b]="custom"===S,s.isPlainDataCol[b]="checkbox"===S||"image"===S||"radio"===S||"autofinder"===S,s.isSelectCol[b]="select"===S||"checkcombobox"===S||"autoComplete"===S,s.isExpCol[b]="expression"===S,s.isCustomModelCol[b]=w.useCustomModelFormatter,s.isCustomCol[b]=w.useCustomFormatter,s.isEscapeFormatter[b]=w.useEscapeFormatter,s.isBasicCol[b]=!(s.isPlainDataCol[b]||s.isSelectCol[b]||s.isExpCol[b]||s.isCustomModelCol[b]||s.isCustomType[b]||s.isCustomCol[b]||s.isEscapeFormatter[b])}}var _;s.multiexcel=!0,s.massStorage=!1,s.dataHandler=s.dataHandler||"",_=""!=s.dataHandler?e.sendExcelData(s,r,""):e.makeExcelData(0,[],s,r),0==l.length?(l=_)[0]="<vector result='"+o.length+"'>":(_[1]="<data vectorkey='"+c+"'><hashtable>",_.pop(),_.shift(),l.pop(),(l=l.concat(_)).push("</vector>"))}if(0==n&&m.v.printLog("sheetName has not been set. Set the properties sheetName."),1==n){var C=i.msaName||e._getMsaName()||"";if(""!=C){var x="";""!=d&&(x=d),d=g.I.getServletURL(e,C,"xmlToExcel2.wq",x),s.useXHR=!0,s.userExcel=!0}""==d&&(d=e.options.advancedExcelDownloadURL),s.scopeId=t.scopeId||s.wframeId||"",g.I.excelDownload(d,l.join(""),"post",s),e.xmlData=null,void 0===s.showProcess||!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&this.hideDownloadLayer()}}catch(t){p.Y.printStackTrace(t,null,this)}},f.multipleExcelUpload=function(t){try{if(!t&&t.common)return;if(!t&&t.excelInfo)return;var e={status:[],uploadType:[],columnIds:[],dataList:[],gridID:[],wframeId:[]},i=t.common,o=t.excelInfo,s="",r=i.processMsg||"";r=WebSquare.text.BASE64URLEncoder(r);var a,n=i.action||"",l=i.postMsg||"false",h="",d="",c="",m=i.callbackFunction||"",f=t.scopeId,b=[];b.push("<vector result='"+o.length+"'>");for(var y=0;y<o.length;y++){var v={};c=(C=o[y]).wframeId||"";var w=WebSquare.util.getComponentById(C.gridId,c),S=w.element._elementType;b.push("<data vectorkey='"+y+"'>"),b.push("<hashtable>");var _="";_="json"===S?WebSquare.xmljs.json2xml(w.element._element,{changeKey:{
"w2:select":"w2:column"}}):WebSquare.xml.serialize(w.element),b.push("<data hashkey='style'>"+_+"</data>");var C,x=(C=C||{}).type||"0",I=C.removeColumns||"",T=C.startRowIndex||"0",k=C.startColumnIndex||"0",L=C.endColumnIndex||"-1",A=C.sheetNo||"0",D=C.headerExist||"0";0===C.footerExist&&(C.footerExist="0");var W=C.footerExist||"1",q=C.append||"0",M=C.hidden||"0",E=C.fillHidden||"0",R=C.optionParam||"",N=C.skipSpace||"0",F=C.insertColumns||[],O="";if(w.options.dataList){var B=w.modelControl.getDataComp(w.options.dataList);null!=B&&(O=B.id)}var P=C.status||"R",Y=C.delim||",",V="",H="",j=C.pwd||"",z=i.loadingMode||"POI";d=i.maxFileSize||"-1";var G=C.cellDataConvertor||"",Z=C.decimal||"4";a=C.useModalDisable||"false";for(var U=C.useMaxByteLength||"false",X=i.advancedExcelUploadURL||"",K=0;K<F.length;K++){var $=F[K],J=$.columnIndex+""||"",Q=$.columnValue+""||"";""!=J&&(V=V+H+J+","+Q,H="|")}if(D=parseInt(D,10),q=parseInt(q,10),M=parseInt(M,10),W=parseInt(W,10),v.header=1==D?"true":"false",v.footer=1==W?"true":"false",v.append=1==q?"true":"false",v.removeColumns=I,v.fillHidden=1==E?"true":"false",v.hidden=1==M?"true":"false",v.type=1==x?"true":"false",v.uploadType=x,v.skipSpace=1==N?"true":"false",v.insertColumns=V,v.optionParam=R,v.msaName=i.msaName||"",""==X){var tt=i.msaName||w._getMsaName()||"";if(""!=tt){var et="";""!=n&&(et=n),n=g.I.getServletURL(w,tt,"excelToGrid2.wq",et),l="true"}else n=w.options.advancedExcelUploadURL}else n=X;v.gridID=w.id;var it=[];for(K=w.defaultColCnt;K<w.hiddenList.length;K++)1==w.hiddenList[K]&&it.push(K-w.defaultColCnt);v.columnNum=w.getTotalCol(),v.expressionColumns=w.getExpressionColumnArr().join(","),v.hiddenColumns=it.join(","),v.headerRows=w.getElementById(w.id+"_head_table").rows.length,v.gridStartRow=T||"1",v.gridStartCol=k||"1",v.gridEndCol=L,v.gridSheetNo=A||"0",v.domain="",WebSquare.domain&&(v.domain=WebSquare.text.URLEncoder(WebSquare.domain)),v.delim=Y,v.dataList=O,v.columnIds=w.cellIdList.join(","),v.status=P,v.pwd=j,v.loadingMode=z,v.maxFileSize=d,v.cellDataConvertor=G,v.decimal=Z,v.useMaxByteLength=U+"","grid"==w.initializeType&&w.options.ref&&C.instanceBind&&(v.instanceBind=C.instanceBind);s=C.popupUrl||w.options.advancedExcelMultiUploadPopupURL;var ot=C.advancedHidden||"0",st="";""!=v.pwd&&(st=WebSquare.text.BASE64Encoder(v.pwd)),v.pwd=st,b.push("<data hashkey='type' value='"+v.type+"'/>"),b.push("<data hashkey='header' value='"+v.header+"'/>"),b.push("<data hashkey='footer' value='"+v.footer+"'/>"),b.push("<data hashkey='append' value='"+v.append+"'/>"),b.push("<data hashkey='removeColumns' value='"+v.removeColumns+"'/>"),b.push("<data hashkey='fillHidden' value='"+v.fillHidden+"'/>"),b.push("<data hashkey='hidden' value='"+v.hidden+"'/>"),b.push("<data hashkey='uploadType' value='"+v.uploadType+"'/>"),b.push("<data hashkey='skip_space' value='"+v.skipSpace+"'/>"),b.push("<data hashkey='insertColumns' value='"+v.insertColumns+"'/>"),b.push("<data hashkey='optionParam' value='"+v.optionParam+"'/>"),b.push("<data hashkey='gridID' value='"+v.gridID+"'/>"),b.push("<data hashkey='columnNum' value='"+v.columnNum+"'/>"),b.push("<data hashkey='expressionColumns' value='"+v.expressionColumns+"'/>"),b.push("<data hashkey='hiddenColumns' value='"+v.hiddenColumns+"'/>"),b.push("<data hashkey='headerRows' value='"+v.headerRows+"'/>"),b.push("<data hashkey='gridStartRow' value='"+v.gridStartRow+"'/>"),b.push("<data hashkey='gridStartCol' value='"+v.gridStartCol+"'/>"),b.push("<data hashkey='gridEndCol' value='"+v.gridEndCol+"'/>"),b.push("<data hashkey='gridSheetNo' value='"+v.gridSheetNo+"'/>"),b.push("<data hashkey='domain' value='"+v.domain+"'/>"),b.push("<data hashkey='delim' value='"+v.delim+"'/>"),b.push("<data hashkey='dataList' value='"+v.dataList+"'/>"),b.push("<data hashkey='columnIds' value='"+v.columnIds+"'/>"),b.push("<data hashkey='status' value='"+v.status+"'/>"),b.push("<data hashkey='pwd' value='"+v.pwd+"'/>"),b.push("<data hashkey='loadingMode' value='"+v.loadingMode+"'/>"),
b.push("<data hashkey='maxFileSize' value='"+v.maxFileSize+"'/>"),b.push("<data hashkey='cellDataConvertor' value='"+v.cellDataConvertor+"'/>"),b.push("<data hashkey='decimal' value='"+v.decimal+"'/>"),b.push("<data hashkey='useMaxByteLength' value='"+v.useMaxByteLength+"'/>"),b.push("<data hashkey='advancedHidden' value='"+v.advancedHidden+"'/>"),b.push("<data hashkey='bodyRows' value='"+w.struct.body.rowArr.length+"'/>"),b.push("<data hashkey='msaName' value='"+v.msaName+"'/>"),b.push("</hashtable>"),b.push("</data>"),e.status.push(v.status),e.uploadType.push(v.uploadType),e.columnIds.push(v.columnIds),e.dataList.push(v.dataList),e.gridID.push(v.gridID),e.wframeId.push(c)}b.push("</vector>"),s+="?gridID="+v.gridID,WebSquare.domain&&(s+="&domain="+v.domain),s+=1==ot?"&advancedHidden=true":"&advancedHidden=false",s+="&multi=true",e.processMsg=r,e.maxFileSize=d,e.useModalDisable=a,e.action=n,e.append=q,e.delim=Y,e.callbackFunction=m,e.scopeId=f,e.postMsg=l,e.loadingMode=z,WebSquare._excelMultiInfo=JSON.stringify(e),WebSquare._excelMultiUploadInfo=b.join(""),h=void 0===i.features||"string"!=typeof i.features?"top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no":i.features,s=u.Q.getEngineUri(s),window.open(s,"fileupWindow",h)}catch(t){p.Y.printStackTrace(t,null,this)}},f.multipleDataListDownload=function(t){try{for(var e,i=t.common,o=t.excelInfo,s={},r=[],a=[],n=!0,l=[],h="",d=i.action||i.dataListDownloadURL||"",c=0;c<o.length;c++){for(var u in s={},r=[],s=o[c],i)s[u]=i[u];if(s.dataProvider=s.dataProvider||"",s.splitProvider=s.splitProvider||"",""==s.dataProvider&&!1,""==s.sheetName){n=!1;break}var f;f=s.sheetName;for(var b=0;b<a.length;b++)if(a[b]==s.sheetName){s.sheetName=s.sheetName+"("+b+")";break}a.push(f),r=s.infoArr,h=s.wframeId||"",e=WebSquare.util.getComponentById(s.dataListId,h);var y=parseInt(s.rowsByN);switch(s.rowsByN=y>100?y:100,s.dataLength=e.getDataLength(),s.type+""){case"":case"0":s.type=0;break;case"2":s.type=2;break;default:s.type=1}0==c&&(!0===s.showProcess?(s.processMsg=s.processMsg||"composing excel data...",WebSquare.layer.showProcessMessage(s.processMsg)):WebSquare.getBody().showModal("w2modal_gridDownload"));var v;s.multiexcel=!0,s.dataHandler=s.dataHandler||"",v=""!=s.dataHandler?WebSquare.util.sendDataList(e,s,r,""):WebSquare.util.makeDataListData(e,0,[],s,r),0==l.length?(l=v)[0]="<vector result='"+o.length+"'>":(v[1]="<data vectorkey='"+c+"'><hashtable>",v.pop(),v.shift(),l.pop(),(l=l.concat(v)).push("</vector>"))}if(0==n&&m.v.printLog("sheetName has not been set. Set the properties sheetName."),1==n){var w=i.msaName||e.scope_obj._getMsaName()||"";if(""!=w){var S="";""!=d&&(S=d),d=g.I.getServletURL(e,w,"dataListToExcel.wq",S),s.useXHR=!0,s.userExcel=!0}""==d&&(d=WebSquare.baseServletURI+"dataListToExcel.wq"),s.scopeId=t.scopeId||s.wframeId||"",g.I.excelDownload(d,l.join(""),"post",s),!1===s.showProcess?WebSquare.getBody().hideModal():!0===s.showConfirm&&(window.gridExceldownloadIframe.style.display="none",window.downloadGridId=null,WebSquare.getBody().hideModal())}}catch(t){p.Y.printStackTrace(t,null,this)}},f.makeDataListData=function(t,e,i,o,s){try{var r=i.length,a=e+o.rowsByN;a=a<o.dataLength?a:o.dataLength;var n=o.separator||",";if(""==o.dataProvider&&""==o.splitProvider&&(a=o.dataLength,r=(i=t.getAllData()).length),!(a<o.dataLength&&""==o.dataProvider&&""==o.splitProvider)){var l;if(""==o.dataProvider&&""==o.splitProvider)if(i.length>=2)if(r>0){var h=i[0],d=i[r-1];i[0]='<array><![CDATA[["'+h,i[r-1]=d+'"]]]></array>',l=i.join('"'+n+'"'),i[0]=h,i[r-1]=d}else l="<array><![CDATA[["+i+"]]]></array>";else l="<array><![CDATA[["+(1===i.length?'"'+i[0]+'"':"")+"]]]></array>";else l="<array><![CDATA[[ ]]]></array>";return WebSquare.util.sendDataList(t,o,s,l)}WebSquare.util.makeDataListData(t,a,i,o,s)}catch(e){
var c=g.I.getConfiguration("/WebSquare/dataList/excel/download/errorHandler/@value"),u=WebSquare.util.getGlobalFunction(c,t.scope_id);"function"==typeof u&&u.call(t,t.id),p.Y.printStackTrace(e,null,t)}},f.sendDataList=function(t,e,i,o){var s=WebSquare.xml.encode(e.fileName)||"excel",r=e.sheetName||"sheet",a=(e.type,e.multipleSheet||"true"),n=e.removeColumns||"",l=e.startRowIndex||"0",h=e.startColumnIndex||"0",d=e.headerColor||"",c=e.headerFontName||"",u=e.headerFontSize||"",p=e.headerFontColor||"",g=e.bodyColor||"",m=e.bodyFontName||"",f=e.bodyFontSize||"",b=e.bodyFontColor||"",y=e.rowNumHeaderColor||"",v=e.rowNumHeaderFontName||"",w=e.rowNumHeaderFontSize||"",S=e.rowNumHeaderFontColor||"",_=e.rowNumBodyColor||"",C=e.rowNumBodyFontName||"",x=e.rowNumBodyFontSize||"",I=e.rowNumBodyFontColor||"",T=e.dataProvider||"",k=e.splitProvider||"",L=e.providerRequestXml||"",A=e.userDataXml||"",D=e.optionParam||"",W=e.bodyWordwrap||"",q=e.useEuroLocale||"false",M=e.useHeader||"true";e.printSet=e.printSet||{};var E=e.printSet.fitToPage||"false",R=e.printSet.landScape||"false",N=e.printSet.fitWidth||"1",F=e.printSet.fitHeight||"1",O=e.printSet.scale||"100",B=e.printSet.pageSize||"A4",P=e.separator||",",Y=e.freezePane||"",V=e.autoSizeColumn||"false",H=e.displayGridlines||"",j=e.useDataFormat||"false",z=(e.columnOrder,WebSquare.xml.encode(e.rowNumHeaderValue)||""),G=e.rowNumVisible+""=="true",Z=e.startRowNumber||"0",U=e.bodyNumberDefaultValue||"",X=e.numberToText||"false",K=e.rowHeight||"-1",$=e.headerRowHeight||"-1",J=e.maxDataSize||-1;J=parseInt(J,10);var Q=e.pwd||"",tt=e.headerAutoFilter||"false";e.httpReadOnly=e.httpReadOnly+""=="true";e.dataListDownloadURL;var et=e.useXHR||"false";e.useXHR=et+""=="true";var it=e.openFile||"false",ot=e.macroFileName||"",st=e.useMacro||"false",rt=e.sameSite||"",at=e.msaName||"",nt=t.element,lt="";if(nt&&"JSON"==nt.elementType){lt="<w2:dataList id='"+nt.id+"' baseNode='list' repeatNode='map'>",lt+="<w2:columnInfo>";for(var ht=0;ht<nt.columnInfo.length;ht++){var dt=nt.columnInfo[ht];lt+="<w2:column id='"+dt.id+"' name='"+dt.name+"' dataType='"+dt.dataType+"'/>"}lt+="</w2:columnInfo>",lt+="</w2:dataList>"}else lt=WebSquare.xml.serialize(nt);var ct=[];if(ct.push("<vector result='1'>"),ct.push("<data vectorkey='0'><hashtable>"),ct.push("<data hashkey='style'>"+lt+"</data>"),e.dataHandler=e.dataHandler||"",""!=e.dataHandler){var ut=WebSquare.util.getGlobalFunction(e.dataHandler,t.scope_id);if("function"==typeof ut){var pt=ut.call(t,t.id);P=e.separator||",";o='<array><![CDATA[["'+pt.join('"'+P+'"')+'"]]]></array>'}}ct.push("<data hashkey='data'>"+o+"</data>"),ct.push("<data hashkey='rowNumVisible' value='"+G+"'/>"),ct.push("<data hashkey='fileName' value='"+s+"'/>"),ct.push("<data hashkey='sheetName' value='"+r+"'/>"),ct.push("<data hashkey='multipleSheet' value='"+a+"'/>"),ct.push("<data hashkey='stRowIndex' value='"+l+"'/>"),ct.push("<data hashkey='stColIndex' value='"+h+"'/>"),ct.push("<data hashkey='removeColumns' value='"+n+"'/>"),ct.push("<data hashkey='headerColor' value='"+d+"'/>"),ct.push("<data hashkey='headerFontName' value='"+c+"'/>"),ct.push("<data hashkey='headerFontSize' value='"+u+"'/>"),ct.push("<data hashkey='headerFontColor' value='"+p+"'/>"),ct.push("<data hashkey='bodyColor' value='"+g+"'/>"),ct.push("<data hashkey='bodyFontName' value='"+m+"'/>"),ct.push("<data hashkey='bodyFontSize' value='"+f+"'/>"),ct.push("<data hashkey='bodyFontColor' value='"+b+"'/>"),G&&(ct.push("<data hashkey='rowNumHeaderColor' value='"+y+"'/>"),ct.push("<data hashkey='rowNumHeaderFontName' value='"+v+"'/>"),ct.push("<data hashkey='rowNumHeaderFontSize' value='"+w+"'/>"),ct.push("<data hashkey='rowNumHeaderFontColor' value='"+S+"'/>"),ct.push("<data hashkey='rowNumBodyColor' value='"+_+"'/>"),ct.push("<data hashkey='rowNumBodyFontName' value='"+C+"'/>"),ct.push("<data hashkey='rowNumBodyFontSize' value='"+x+"'/>"),ct.push("<data hashkey='rowNumBodyFontColor' value='"+I+"'/>")),
ct.push("<data hashkey='dataProvider' value='"+T+"'/>"),ct.push("<data hashkey='splitProvider' value='"+k+"'/>"),ct.push("<data hashkey='providerRequestXml' value=''>"+L+"</data>"),ct.push("<data hashkey='userDataXml' value=''>"+A+"</data>"),ct.push("<data hashkey='optionParam' value='"+D+"'/>"),""!=W&&ct.push("<data hashkey='bodyWordwrap' value='"+W+"'/>"),ct.push("<data hashkey='useEuroLocale' value='"+q+"'/>"),ct.push("<data hashkey='useHeader' value='"+M+"'/>"),ct.push("<data hashkey='fitToPage' value='"+E+"'/>"),ct.push("<data hashkey='landScape' value='"+R+"'/>"),ct.push("<data hashkey='fitWidth' value='"+N+"'/>"),ct.push("<data hashkey='fitHeight' value='"+F+"'/>"),ct.push("<data hashkey='scale' value='"+O+"'/>"),ct.push("<data hashkey='pageSize' value='"+B+"'/>"),ct.push("<data hashkey='separator' value='"+P+"'/>"),ct.push("<data hashkey='freezePane' value='"+Y+"'/>"),ct.push("<data hashkey='autoSizeColumn' value='"+V+"'/>"),ct.push("<data hashkey='displayGridlines' value='"+H+"'/>"),ct.push("<data hashkey='useDataFormat' value='"+j+"'/>"),ct.push("<data hashkey='rowNumHeaderValue' value='"+z+"'/>"),ct.push("<data hashkey='startRowNumber' value='"+Z+"'/>"),ct.push("<data hashkey='bodyNumberDefaultValue' value='"+U+"'/>"),ct.push("<data hashkey='numberToText' value='"+X+"'/>"),ct.push("<data hashkey='rowHeight' value='"+K+"'/>"),ct.push("<data hashkey='headerRowHeight' value='"+$+"'/>"),ct.push("<data hashkey='pwd' value='"+Q+"'/>"),ct.push("<data hashkey='headerAutoFilter' value='"+tt+"'/>"),ct.push("<data hashkey='openFile' value='"+it+"'/>"),ct.push("<data hashkey='macroFileName' value='"+ot+"'/>"),ct.push("<data hashkey='useMacro' value='"+st+"'/>"),""!=rt&&ct.push("<data hashkey='sameSite' value='"+rt+"'/>"),""!=at&&(ct.push("<data hashkey='msaName' value='"+at+"'/>"),et="true"),""!=et&&ct.push("<data hashkey='useXHR' value='"+et+"'/>"),null!=i&&void 0!==i||(i=[]),ct.push("<data hashkey='information'><vector result='"+i.length+"'>");for(ht=0;ht<i.length;ht++){var gt=i[ht];for(var mt in gt.rowSpan=gt.rowSpan||"1",gt.colSpan=gt.colSpan||"1",ct.push("<data vectorkey='"+ht+"'><hashtable>"),gt)"text"==mt?ct.push("<data hashkey='"+mt+"' value='"+WebSquare.xml.encode(gt[mt])+"'/>"):ct.push("<data hashkey='"+mt+"' value='"+gt[mt]+"'/>");ct.push("</hashtable></data>")}return ct.push("</vector></data>"),ct.push("</hashtable></data>"),ct.push("</vector>"),ct},f.mirrorView=function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e="height="+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+",width="+t+",location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",i="";WebSquare.domain&&(i="?domain="+WebSquare.text.URLEncoder(WebSquare.domain));var o=c.q._resourceURI+"mirrorView.html";window.open(o+i,"_blank",e)},f.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.canvasId||"watermarkCanvas",o=e.target&&e.target.render,s=o?e.target.render:document.body,r=e.lineGap||300,a=t,n=document.getElementById(i);n||((n=document.createElement("canvas")).id=i,n.style.position=o?"relative":"fixed",n.style.pointerEvents="none",n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.bottom="0px",n.setAttribute("data-watermark_msg",a),n.setAttribute("data-watermark_target",o?e.target.uuid:""),n.setAttribute("data-watermark_linegap",r),s.appendChild(n),s.setAttribute("data-watermark_canvas",i),o||WebSquare.event.addListener(window,"onresize",WebSquare.util._watermarkResize)),WebSquare.util._watermarkRedraw(s)}catch(t){p.Y.printStackTrace(t,null,this)}},f._watermarkDate=function(){try{var t=new Date;return WebSquare.text.fillZero(t.getFullYear(),4)+"-"+WebSquare.text.fillZero(t.getMonth()+1,2)+"-"+WebSquare.text.fillZero(t.getDate(),2)+" "+WebSquare.text.fillZero(t.getHours(),2)+":"+WebSquare.text.fillZero(t.getMinutes(),2)+":"+WebSquare.text.fillZero(t.getSeconds(),2)}catch(t){p.Y.printStackTrace(t,null,this)}},
f._watermarkResize=function(t){try{var e=WebSquare.event.getTarget(t);WebSquare.util.setTimeout((function(t){WebSquare.util._watermarkRedraw(t)}),{key:"wq_watermark",max:70,args:[e]})}catch(t){p.Y.printStackTrace(t,null,this)}},f._watermarkRedraw=function(t){try{var e,i=function(t,i){for(var o=Math.ceil(s.measureText(t).width),r=Math.ceil(e.width/o)+1,a=(t=new Array(r).join(t),0);a<Math.ceil(e.width/c);a++)s.fillText(t,-600,i+a*c)},o=t&&t!==self;e=o?document.getElementById(t.getAttribute("data-watermark_canvas")):document.getElementById(document.body.getAttribute("data-watermark_canvas")),o?(e.width=t.clientWidth,e.height=t.clientHeight):(e.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight);var s=e.getContext("2d");s.globalAlpha=.2,s.rotate(6.9*Math.PI/4),s.fillStyle="#000",s.font="bold 30px Sans-Serif";var r=s.measureText(" ").width,a=WebSquare.util._watermarkDate(),n=s.measureText(a).width;s.font="bold 50px Sans-Serif";var l=s.measureText(" ").width,h=e.getAttribute("data-watermark_msg"),d=s.measureText(h).width,c=parseInt(e.getAttribute("data-watermark_linegap"));if(d<n)for(;d<n;)h+=" ",d+=l;else for(;d>n;)a+=" ",n+=r;i(h+="     ",250),s.font="bold 30px Sans-Serif",i(a+="        ",300)}catch(t){p.Y.printStackTrace(t,null,this)}},f._watermarkRemove=function(t){try{if(!WebSquare.util._watermarkArr)return;for(var e=WebSquare.util._watermarkArr.length-1;e>=0;e--){WebSquare.util._watermarkArr[e]===t&&WebSquare.util._watermarkArr.splice(e,1);var i=document.getElementById(t);i&&i.parentNode.removeChild(i)}}catch(t){p.Y.printStackTrace(t,null,this)}},f.redrawComponent=function(t,e){try{var i=WebSquare.util.getComponentById(t),o=e;null==e&&i.render&&(o=i.render.parentElement);var s=i.element.cloneNode(!0),r=i.options.pluginName;return i.remove(),WebSquare.util.dynamicCreate(t,r,s,o)}catch(t){p.Y.printStackTrace(t,null,this)}},f.emptySelection=function(){try{window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}catch(t){p.Y.printStackTrace(t,null,this)}},f.exportJSChartAll=function(t){try{var e=t.type,i=t.fcArr||[],o=t.fileName,s=t.direction||"vertical",r={};if(i.length>0)for(var a=0;a<i.length;a++)r["fc_"+i[a]]=FusionCharts.items["fc_"+i[a]];else for(var a in FusionCharts.items)r[a]=FusionCharts.items[a];var n="",l=0,h=0,d=0,c=0,u=0,m=0;for(var a in r)if(r[a].options.containerElement)if("horizontal"==s.toLowerCase()){h+=r[a].options.containerElement.offsetWidth;var f=r[a].options.containerElement.offsetHeight;f>d&&(d=f),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate("+m+",0)'>"+b+"</g>",m+=r[a].options.containerElement.offsetWidth}else{l+=r[a].options.containerElement.offsetHeight;var b,y=r[a].options.containerElement.offsetWidth;y>c&&(c=y),(b=r[a].getSVGString())&&(b=(b=(b=b.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'"),WebSquare.util.isIEAllVersion(11)&&(b=(b=b.wq_replaceAll("&quot;","")).wq_replaceAll(location.href,"")),"zoomline"==r[a].options.chartType.toLowerCase()&&(b=b.wq_replaceAll('stroke-dasharray="-','stroke-dasharray="')),
"pie3d"!=r[a].options.chartType.toLowerCase()&&"doughnut3d"!=r[a].options.chartType.toLowerCase()||(b=b.wq_replaceAll('font-family="15"','font-family="Verdana"'))),n+="<g transform='translate(0,"+u+")'>"+b+"</g>",u+=r[a].options.containerElement.offsetHeight}n="horizontal"==s.toLowerCase()?"<svg width='"+h+"' height='"+d+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>":"<svg width='"+c+"' height='"+l+"' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+n+"</svg>";var v=encodeURI(n+"ExportType="+e+"ExportFileName="+o);g.I.download("engine/servlet/exportFusionChart.jsp",v,"post"),r=null}catch(t){p.Y.printStackTrace(t,null,this)}},f.getRuntimeId=function(t,e){try{var i="";if(WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]])i=t;else{var o=g.I._getGlobalVariable();if(o)for(var s=o.split(","),r=0;r<s.length;r++){if(t===s[r].wq_trim()){i=t;break}}}return i}catch(t){return p.Y.printStackTrace(t,null,this),""}},f.serialize=function(t){var e={header:{ip:(t=t||{}).ip?t.ip:"",method:t.method?t.method:"HEAD",status:t.status?t.status:"-1",auth:t.auth?t.auth:"",sender:t.sender?t.sender:"",receiver:t.receiver?t.receiver:"",pageURL:WebSquare.w2xPath,pageName:t.pageName?t.pageName:"",extension:t.extension?t.extension:{},comps:{}},body:{}},i={header:!1,body:!1,validate:!1};switch(e.header.method){case"HEAD":i.header=!0,i.body=!0;break;case"HEADCOMP":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=!0;break;case"HEADBODY":i.header=this._serializeHeaderComps("top",window,e.header.comps),i.body=this._serializeBody("top",window,e.body);break;default:return!1}return i.validate=this._serializeValidate(e),!!(i.validate&&i.header&&i.body)&&JSON.stringify(e)},f._serializeHeaderComps=function(t,e,i){if("string"!=typeof t||arguments.length<=1)return!1;var o=e,s=o.WebSquare.DataCollection.comp;for(var r in i[t]={},s)i[t][r]=r;var a=o.WebSquare.idCache;for(var r in a){var n=a[r];switch(n.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeHeaderComps(n.id,o.document.getElementById(n.id).contentWindow,i[t]);break;default:n.options.serializable&&(i[t][n.id]=n.id)}}return!0},f._serializeBody=function(t,e,i){if("string"!=typeof t||arguments.length<=1)return!1;var o=e;i[t]=JSON.parse(o.WebSquare.DataCollection.api._getArrayEvalString());var s=o.WebSquare.idCache;for(var r in s){var a=s[r];switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:break;case o.WebSquare.uiplugin.iframe:this._serializeBody(a.id,o.document.getElementById(a.id).contentWindow,i[t]);break;default:a.options.serializable&&(i[t][a.id]=a.serialize())}}return!0},f._serializeValidate=function(t){return!0},f.parse=function(t){return JSON.parse(t)},f._restore=function(t,e,i){var o=i;if(o.WebSquare){var s=o.WebSquare.DataCollection.comp;for(var r in e){var a=s[r]||o.WebSquare.idCache[r]||o[r];if(a)switch(a.constructor){case o.WebSquare.DataCollection.dataList:case o.WebSquare.DataCollection.dataMap:o.WebSquare.DataCollection.api._setArrayEvalString("{"+r+":"+JSON.stringify(e[r])+"}");break;case o.WebSquare.uiplugin.iframe:this._restore(a.id,e[a.id],o.document.getElementById(a.id).contentWindow);break;default:a.options&&a.options.serializable&&a.restore(e[r])}}}},f.restore=function(t,e){try{var i={};if("string"==typeof t)i=JSON.parse(t);else{if("object"!=(0,n.A)(t))return!1;i=t}return this._restore("top",i.body.top,e||window.top),!0}catch(t){p.Y.printStackTrace(t,null,this)}return!1},f.getFrameFromPoint=function(t){try{for(var e=JSON.parse(t),i=document.elementFromPoint(e.x,e.y),o=null;i&&"BODY"!==i.tagName;){if("DIV"==i.tagName&&(WebSquare.xfControl.prototype.__hasClass(i,"w2wframe")||WebSquare.xfControl.prototype.__hasClass(i,"w2pageFrame"))){var s=WebSquare.util.getComponentById(i.getAttribute("id"))
;if(s&&s.options&&s.options.scope){o=s.uuid;break}}i=i.parentNode}return null==o&&WebSquare.strictModeFrame&&(o=WebSquare.strictModeFrame.uuid),o}catch(t){p.Y.printStackTrace(t,null,this)}},f.getAbsolutePath=function(t){try{if(!t||"string"!=typeof t)return"";var e=document.createElement("a");e.setAttribute("href",t);var i=WebSquare.util._getAbsolutePath(e.href.toString());return e=null,i}catch(t){return""}},f._getAbsolutePath=function(t){try{var e=t.indexOf("?");return e<0&&(e=t.length),t.slice(0,e)}catch(t){return""}},f.getFrameByPath=function(t,e,i){try{var o;if("/"===(t=t.wq_trim()).charAt(0))o=WebSquare.util.getComponentById(t.slice(1));else{var s=t.split("/");o=WebSquare.util.getComponentById(e)||"";for(var r=0;r<s.length;r++){var a=s[r];""===a||"."===a||(".."===a?o=o.scope_obj||"":o&&o.options&&("wframe"===o.options.pluginName||"pageFrame"===o.options.pluginName||"pageInherit"===o.options.pluginName)?o.options.scope&&(o=o.getObj(s[r])):o=WebSquare.util.getComponentById(s[r]))}}return i&&"component"===i.returnType?o:o.id}catch(t){p.Y.printStackTrace(t)}},f.getComponentByPath=function(t,e){try{return WebSquare.util.getFrameByPath(t,e,{returnType:"component"})}catch(t){p.Y.printStackTrace(t)}},f.getFocusedComponentId=function(t){try{for(var e=t||document.activeElement;e&&"BODY"!==e.tagName.toUpperCase();){var i=e.getAttribute("id")&&"idToUUID"in WebSquare&&WebSquare.idToUUID[e.getAttribute("id")]&&WebSquare.idCache[WebSquare.idToUUID[e.getAttribute("id")]],o=e.getAttribute("id")&&WebSquare.componentIdCache&&WebSquare.componentIdCache[e.getAttribute("id")],s=i||o;if(s&&s.getFocusedComponentId&&("function"==typeof s.getFocusedComponentId||"[object Function]"===s.getFocusedComponentId.toString()))return s.getFocusedComponentId();if(s)return s.id;e=e.parentNode}return""}catch(t){p.Y.printStackTrace(t,null,this)}},f.arrayDiff=function(t,e,i){if(!this.isArray(e))return t.slice();for(var o=e.length,s=t.length,r=-1,a=[];++r<s;){for(var n=t[r],l=!1,h=0;h<o;h++){var d=e[h];if(i&&i.call(null,n,d)){l=!0;break}if(n===d){l=!0;break}}!1===l&&a.push(n)}return a},f.scopingFuncBody=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"!=typeof t)return!0===i?t:null;var s,r=WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/wpack/@use"));if(e){var a=!0===r?"":"\n";s="scopeObj"===i?"WebSquare.scope_obj="+e+".id;\n with("+e+".scope){\n var udc_obj = "+e+".id;\n"+t+" \nWebSquare.scope_obj=null;\n}":"WebSquare.scope_obj="+e+";"+a+" with(WebSquare.util.getComponentById('"+e+"').scope){"+a+" var udc_obj = "+e+";\n"+(!0===i?"":" var ret = ")+t+" \n WebSquare.scope_obj=null;"+(!0===i?"":"\n return ret;")+"\n}"}else{s=(a=!0===r?"\n":"")+(!0===i?"":"return ")+t+"\n"}return!0===o.async&&(s="return async function(){"+s+"}()"),s}catch(t){p.Y.printStackTrace(t,null,this)}},f.isNullReg=function(t){try{return t.source===/\/^[a-z0-9_-]{3,16}$\//gi.source||"/^[a-z0-9_-]{3,16}$/"===t.source}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.setScreenView=function(t){try{if(!WebSquare.util.isTop())return;void 0!==t&&null!=t||(t={});var e=parseInt(t.baseWidth,10),i=parseInt(t.baseHeight,10),o=parseFloat(t.maxRatio,10)||1e3,s=parseFloat(t.minRatio,10)||.001;if(o=Math.max(o,s),s=Math.min(s,s),"screen"===t.type){var r=(g.I.browserCheck.ipad||g.I.browserCheck.iphone||g.I.browserCheck.ipod)&&Math.floor(Math.abs(window.orientation/90))>=1&&window.orientation%90==0,a=r?window.screen.height:window.screen.width,n=r?window.screen.width:window.screen.height,l=a/e,h=n/i;if(!0===t.useRelativeScale)l=Math.min(Math.max(l,s),o),h=Math.min(Math.max(h,s),o),WebSquare.util._applyRelativeScreenView(l,h,e,i);else{var d=!0===t.allowScroll?Math.max(l,h):Math.min(l,h);if(1===(d=Math.min(Math.max(d,s),o)))WebSquare.util.clearScreenView();else{var c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,u=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight
;document.documentElement.scrollHeight||document.body.scrollHeight;WebSquare.util._applyScreenView(d,c,u)}}}}catch(t){p.Y.printStackTrace(t,null,this)}},f._applyScreenView=function(t,e,i){try{if(!WebSquare.util.isTop())return;var o="body {-webkit-transform : scale("+t+");-moz-transform : scale("+t+");-ms-transform : scale("+t+");-o-transform : scale("+t+");transform : scale("+t+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+e/t+"px;height : "+i/t+"px;}",s=document.getElementsByTagName("head")[0];u.Q.fullViewClass=!0,u.Q.fullViewed=!0,u.Q.fullViewRatio=t;var r=null;g.I.browserCheck.ie?((r=document.createElement("style")).setAttribute("type","text/css"),r.styleSheet.cssText=o):(r=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(o)),r.setAttribute("data-screenview","true"),s.appendChild(r)}catch(t){p.Y.printStackTrace(t,null,this)}},f._applyRelativeScreenView=function(t,e,i,o){try{if(!WebSquare.util.isTop())return;var s="body {-webkit-transform : scale("+t+","+e+");-moz-transform : scale("+t+","+e+");-ms-transform : scale("+t+","+e+");-o-transform : scale("+t+","+e+");transform : scale("+t+","+e+");transform-origin : 0 0;-ms-transform-origin : 0 0;width : "+i+"px;height : "+o+"px;}",r=document.getElementsByTagName("head")[0];u.Q.fullViewClass=!0,u.Q.fullViewed=!0,u.Q.fullViewRatio=t;var a=null;g.I.browserCheck.ie?((a=document.createElement("style")).setAttribute("type","text/css"),a.styleSheet.cssText=s):(a=document.createElementNS("http://www.w3.org/1999/xhtml","style")).appendChild(document.createTextNode(s)),a.setAttribute("data-screenview","true"),r.appendChild(a)}catch(t){p.Y.printStackTrace(t,null,this)}},f.clearScreenView=function(){try{if(!WebSquare.util.isTop()||!u.Q.fullViewClass)return;for(var t=document.getElementsByTagName("style"),e=0;e<t.length;e++){var i=t[e];if("true"===i.getAttribute("data-screenview")){i.parentNode.removeChild(i);break}}u.Q.fullViewClass=!1,u.Q.fullViewed=!1,u.Q.fullViewRatio=1}catch(t){p.Y.printStackTrace(t,null,this)}},f.getTop=function(){try{for(var t=self,e=0;e<1e3;e++)try{if(t.parent===t)break;if(void 0===t.parent.WebSquare||null==t.parent.WebSquare)break;t=t.parent}catch(t){break}return t}catch(t){return p.Y.printStackTrace(t,null,this),self}},f.isTop=function(){try{return WebSquare.util.getTop()===self}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.isTouchDevice=function(){try{var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!(navigator.maxTouchPoints>0||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)||function(t){return window.matchMedia&&window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.cloneObject=function(t,e){try{if("object"!==(0,n.A)(t)||null==t)return null;void 0!==e&&null!=e||(e={});var i=e.scope,o=e.exclude,s=!0===e.skipFunction,r=JSON.stringify(t,(function(t,e){return o&&!0===o[t]?void 0:null==e?e:e===window?"@wq_window":e===window.opener?"@wq_opener":e===window.parent?"@wq_parent":e===window.top?"@wq_top":"function"==typeof e?s?void 0:"@wq_function#"+e.toString():"object"===(0,n.A)(e)&&e.constructor===RegExp?"@wq_regExp#"+e.toString():e}));return JSON.parse(r,(function(t,e){try{if("string"!=typeof e||"@wq_"!==e.slice(0,4))return e;if("@wq_window"===e||"@wq_opener"===e||"@wq_parent"===e||"@wq_top"===e)return window[e.slice(4)];if("@wq_function#"===e.slice(0,13))return new Function(WebSquare.util.scopingFuncBody(e.slice(13),i))();if("@wq_regExp#"===e.slice(0,11))return new Function("return "+e.slice(11))()}catch(t){return e}}))}catch(t){return p.Y.printStackTrace(t,null,this),null}},f._copyOptions=function(t){try{var e={};for(var i in t)e[i]=i instanceof Array?t[i].slice(0):t[i];return e.__copyOptions=!0,e}catch(t){return p.Y.printStackTrace(t,null,this),null}},f.isHybrid=function(){try{return WebSquare.hybridApp}catch(t){return p.Y.printStackTrace(t,null,this),!1}},
f.encodeParameter=(s=function(t,e){for(var i=-1,s=0;s<o.length;s++)if(o[s]==t){i=s;break}return i<0?t:o[(i+e)%o.length]},r=function(t,e){for(var i=0,o=(t=WebSquare.text.BASE64Encode(t)).length-1;o>=0&&"="==t[o];o--)i+=1;t=t.substring(0,t.length-i);var r="";for(o=0;o<t.length;o++)r=r.concat(s(t[o],Number(e)));return r},a=function(t,e){if(!t)return t;o||function(t){o=[];for(var e=[".","/","-","_","+"],i=0;i<26;i++)o.push(String.fromCharCode(i+65)),i<10?o.push(String.fromCharCode(i+48)):i>=t%8+12&&i<t%8+12+e.length&&o.push(e[i-(t%8+12)]),o.push(String.fromCharCode(i+97))}(e+100);for(var i="",s=0,a="";s<t.length;)"?"!=t[s]&&"&"!=t[s]&&"#"!=t[s]&&"="!=t[s]?a+=t[s]:(a.length>0&&(i+=r(a,e),a=""),i+=t[s]),s++;return a.length>0&&(i+=r(a,e)),i},function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return a(t,e)}catch(t){return""}}),f.decodeParameter=function(){var t,e=function(e,i){for(var o=-1,s=0;s<t.length;s++)if(t[s]==e){o=s;break}return o<0?e:((o=t.length-(i+t.length-o)%t.length)==t.length&&(o=0),t[o])},i=function(t,i){for(var o="",s=0;s<t.length;s++)o=o.concat(e(t[s],Number(i)));for(;o.length%4!=0;)o+="=";return o=WebSquare.text.BASE64Decode(o)},o=function(e,o){if(!e)return e;e=e.replace(" ","+"),t||function(e){t=[];for(var i=[".","/","-","_","+"],o=0;o<26;o++)t.push(String.fromCharCode(o+65)),o<10?t.push(String.fromCharCode(o+48)):o>=e%8+12&&o<e%8+12+i.length&&t.push(i[o-(e%8+12)]),t.push(String.fromCharCode(o+97))}(o+100);for(var s="",r=0,a="";r<e.length;){"?"!=e[r]&&"&"!=e[r]&&"#"!=e[r]&&"="!=e[r]?a+=e[r]:(a.length>0&&(s+=i(a,o),a=""),s+=e[r]),r++}return a.length>0&&(s+=i(a,o)),s};return function(t){var e=WebSquare.util.getEncodeParameterOption("key");e&&0!=e.length||(e=0),e=parseInt(e);try{return o(t,e)}catch(t){return""}}}(),f.isEncodeParameter=function(){try{return WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/encodeParameter/@value"))||!1}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.getEncodeParameterOption=function(t){try{if("pathName"==t)return g.I.getConfiguration("/WebSquare/encodeParameter/@pathName")||"";if("fallback"==t)return WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/encodeParameter/@fallback"))||!1;if(WebSquare.util.isEncodeParameter()){if("value"==t)return WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/encodeParameter/@value"))||!1;if("key"==t)return g.I.getConfiguration("/WebSquare/encodeParameter/@key")||"";if("onlyParam"==t)return WebSquare.util.getBoolean(g.I.getConfiguration("/WebSquare/encodeParameter/@onlyParam"))||!1}return!1}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.getMediaInfo=function(){try{var t;t="json"===WebSquare.WebSquaredoc.getType()?WebSquare.jsonUtil.getNodesByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",WebSquare.core._XML_NAMESPACE.W2):WebSquare.xml.getElementsByTagName(WebSquare.WebSquaredoc.getPageInfo(),"screen",g.I._XML_NAMESPACE.W2);for(var e={currentScreen:f.getCurrentScreen(t),mediaInfo:[]},i=0;i<t.length;i++)e.mediaInfo[i]={},e.mediaInfo[i].name=WebSquare.Elem.api.getAttribute(t[i],"name"),e.mediaInfo[i].viewport=WebSquare.Elem.api.getAttribute(t[i],"viewport").split("x"),e.mediaInfo[i].pageSize=WebSquare.Elem.api.getAttribute(t[i],"pageSize").split("x");return e}catch(t){p.Y.printStackTrace(t,null,this)}},f.getCurrentScreen=function(t){try{for(var e,i=f._getBrowserWidth(),o=null,s=e=9999,r=null,a=0;a<t.length;a++){var n=WebSquare.Elem.api.getAttribute(t[a],"viewport"),l=n.indexOf("x");-1!=l?s>(e=(o=Number(n.substring(0,l)))>=i?o:9999)&&(s=e,r=WebSquare.Elem.api.getAttribute(t[a],"name")):(e=9999,r=WebSquare.Elem.api.getAttribute(t[a],"name"))}return r}catch(t){p.Y.printStackTrace(t,null,this)}},f._getDefaultProperties=function(t,e,i){try{if(!t)return;var o,s,r,a;WebSquare._defaultPropertiesComp||(WebSquare._defaultPropertiesComp=[]);var n={},l=t.split(".");l.length>3?(s=l.pop(),a=l.pop(),r=l.pop()):(a=l.pop(),r=l.pop().toLowerCase()),
"dataList"==a||"dataMap"==a||"linkedDataList"==a||"aliasDataMap"==a||"aliasDataList"==a||"aliasLinkedDataList"==a?(r="dataCollection",n.type=a):n.pluginName=a;var h,d,c,u=e?e.split(","):[],m=i?i.split(","):[];if(u.length!==m.length)return;if(s)if("gridView"!=a&&"grid"!=a||"column"!=s)if("tableLayout"==a){d=n.pluginName+"_"+s;for(b=0;b<u.length;b++)n[u[b]]=m[b],d+="_"+u[b]+"_"+m[b];n.pluginName="group"}else if("accordion"==a){if("panels"==s){o=this.initPanel(this.panelInfoArr[b]),d="accordion_panels";for(b=0;b<u.length;b++)n[u[b]]=m[b],d+="_"+u[b]+"_"+m[b];n.pluginName="panels"}}else{if("dataList"!=a||"column"!=s)return null;d="dataList_column",c="col";for(b=0;b<u.length;b++)n[u[b]]=m[b],d+="_"+u[b]+"_"+m[b],c+="_"+u[b]+"_"+m[b];n.columnInfo=[{id:c}]}else{d=n.pluginName+"_"+s,c="col";for(var f="",b=0;b<u.length;b++)n[u[b]]=m[b],d+="_"+u[b]+"_"+m[b],c+="_"+u[b]+"_"+m[b],f+=" "+u[b]+'="'+m[b]+'"';f+=' id="'+c+'"';var y="";y+="<w2:"+n.pluginName+' xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" id="'+d+'">',y+='<w2:header style="">',y+='<w2:row style="">',y+="<w2:column></w2:column>",y+="</w2:row>",y+="</w2:header>",y+='<w2:gBody style="">',y+='<w2:row style="">',y+="<w2:column"+f+"></w2:column>",y+="</w2:row>",y+="</w2:gBody>",y+="</w2:"+n.pluginName+">",h=(h=WebSquare.xml.parse(y)).documentElement}else{d=n.pluginName||n.type;for(b=0;b<u.length;b++)n[u[b]]=m[b],d+="_"+u[b]+"_"+m[b];"tableLayout"==n.pluginName&&(n.pluginName="group")}if(WebSquare._defaultPropertiesComp.indexOf(d)>-1)return"column"==s&&c?"dataCollection"==r?o.getCellInfo(c).options:g.I.getComponentById(d).cellInfoHash[c].options:"Submission"==a?g.I.getComponentById(d):g.I.getComponentById(d).options;var v=null;if("dataCollection"==r){if(n.id=d,n.option={},WebSquare.DataCollection.api.create(n),o=g.I.getComponentById(d))return WebSquare._defaultPropertiesComp.push(d),"column"==s?o.getCellInfo(c).options:o.options}else if("tag"==a)o=new WebSquare.tag(d,null,{});else{if("Submission"==a)return WebSquare.ModelUtil.createSubmission({id:d}),(o=g.I.getComponentById(d))&&WebSquare._defaultPropertiesComp.push(d),o;o=WebSquare.controlFactory.createControl(d,n,h,null,!0)}return o&&(o.appendTo(WebSquare.getBody()),o.activate(),o.onComplete(),WebSquare._defaultPropertiesComp.push(d),v="column"==s&&c?o.cellInfoHash[c].options:o.options),v}catch(t){return p.Y.printStackTrace(t,null,this),null}},f.loadLocale=function(t){try{requires(t),u.Q.importCache[t]}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.deleteLocale=function(t){try{u.Q.importCache[t]="",WebSquare.WebSquareLang={}}catch(t){return p.Y.printStackTrace(t,null,this),!1}},f.getEscape=function(t,e){try{var i=e?g.I.getConfig(e):"";t=t||i.escape;var o=g.I.getConfiguration("escape");return t||o}catch(t){p.Y.printStackTrace(t,null,this)}},f.updateSuffix=function(t){try{var e=g.I.getXMLHTTPObject(),i=WebSquare.baseURI+"suffix.txt?postfix="+(new Date).getTime()+c.q.safeRandom();e.open("GET",i,!0),e.onreadystatechange=function(){f.updateSuffixCallback(e,t)},e.send(null)}catch(t){p.Y.printStackTrace(t,null,this)}},f.updateSuffixCallback=function(t,e){try{if(4==t.readyState){if(t.status&&(200>t.status||300<=t.status)||0===t.status);else t.responseText.wq_trim()!=c.q.suffix&&(c.q.suffix=t.responseText.wq_trim(),m.v.printLog("suffix.txt updated."));if(e.callback&&""!=e.callback){var i=f.getGlobalFunction(e.callback,e.scopeId);i&&i()}t.onreadystatechange=function(){},t=null}}catch(t){p.Y.printStackTrace(t,null,this)}},f.isHTML5=function(){try{if(null===document.doctype)return!1;var t=document.doctype;return"<!DOCTYPE html>"==="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC"'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"}catch(t){p.Y.printStackTrace(t,null,this)}},f.setLanguagePack=function(){var t=(0,l.A)(d().mark((function t(e){var i;return d().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return i=g.I.getConfiguration("/WebSquare/languagePack/url[@lang='"+e+"']/@value"),i=u.Q.getEngineUri(i),t.abrupt("return",u.Q.writeAsync(i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f.getStyleFromCssStr=function(t,e){try{var i=null;if(!e)return i;for(var o=t.split(" "),s=0;s<o.length;s++)for(var r=0;r<document.styleSheets.length;r++){var a=document.styleSheets[r];try{a.cssRules}catch(t){continue}for(var n=0;a.cssRules&&n<a.cssRules.length;n++){var l=a.cssRules[n],h=l.selectorText;if(h){var d=h.lastIndexOf(".");if(-1!=d)if(h.slice(d)=="."+o[s]){i||(i={});for(var c=0;c<e.length;c++){var u=e[c];""!=l.style[u]&&(i[u]=l.style[u])}r=document.styleSheets.length;break}}}}return i}catch(t){p.Y.printStackTrace(t,null,this)}},f._getChromeVersion=function(){try{var t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2],10):void 0}catch(t){p.Y.printStackTrace(t,null,this)}},f.getDataPrefix=function(t){try{return 1==c.q.dataPrefix&&(t="data-"+t),t}catch(t){p.Y.printStackTrace(t,null,this)}},f.setPerformanceUse=function(t){try{c.q._performance.use=f.getBoolean(t)}catch(t){p.Y.printStackTrace(t,null,this)}},f.requestAnimationFrame=function(t,e){try{if(window.requestAnimationFrame)window.requestAnimationFrame(t);else setTimeout(t,e||5)}catch(t){p.Y.printStackTrace(t,null,this)}},f.isExecCommandSupported=function(){try{return!(!document.execCommand||"function"!=typeof document.execCommand)}catch(t){p.Y.printStackTrace(t,null,this)}},f._getCrossFilterPath=function(t,e){var i=t;e||(e=""),t.startsWith("//")&&(i=t.replace(/^\/+/g,"/"),m.v.printLog("Access is denied for the specified path. The double slashes ('//') in the path will be replaced by a single slash ('/')")),t=t.toLowerCase();var o,s,r=g.I.getConfiguration("/WebSquare/w2xPathCrossFilter/@enable"),a=g.I.getConfiguration("/WebSquare/w2xPathCrossFilter/@allowOrigins");if(a=a.toLowerCase(),e=e.toLowerCase(),"true"==r&&"*"!=a&&(t.startsWith("http://")||t.startsWith("https://"))){o=-1===(o=t.replace(/^https?:\/\/+/g,"")).indexOf("/")?o:o.substring(0,o.indexOf("/"));var n=(s=new RegExp(/^https?:\/\/+/g).exec(t))[0]+o==location.origin;""!=a&&""!=e?a=a+","+e:""==a&&(a=e),-1!=a.indexOf(s[0]+o)||n||(i=t.replace(/^https?:\/\/+/g,"/"),m.v.printLog("Access is denied for the specified path. 'https://' in the path will be replaced by a '/'"))}return i},f.jsAsync=function(){var t=(0,l.A)(d().mark((function t(e,i){var o;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=WebSquare.noConflictFunction,t.abrupt("return",window[o].main()[o].jsAsync(e,i));case 5:t.prev=5,t.t0=t.catch(0),p.Y.printStackTrace(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,i){return t.apply(this,arguments)}}(),f.loadPageCommon=function(){var t=(0,l.A)(d().mark((function t(e,i,o,s){var r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=WebSquare.noConflictFunction,t.abrupt("return",window[r].main()[r].loadPageCommon(e));case 5:t.prev=5,t.t0=t.catch(0),p.Y.printStackTrace(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),f.loadMSACommon=function(){var t=(0,l.A)(d().mark((function t(e){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=WebSquare.noConflictFunction,t.abrupt("return",window[i].main()[i].loadMSACommon(e));case 5:t.prev=5,t.t0=t.catch(0),p.Y.printStackTrace(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),f.loadGlobalCommon=function(){var t=(0,l.A)(d().mark((function t(e){var i,o,s,r,a,n,l,h,c,u,f,b;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e instanceof Array){t.next=3;break}throw new Error("$p.loadGlobalCommon error : invalid parameter. The infoArray must be of array type.");case 3:
i=g.I.projectCommonVariable,window[i]||(window[i]={}),o=[],s=[],r=0;case 8:if(!(r<e.length)){t.next=26;break}if(a=e[r],n=a.src,l=a.name,h=a.reload,c=a.spaCache,"string"==typeof n&&"string"==typeof l&&n&&l){t.next=19;break}return u="$p.loadGlobalCommon partial error : invalid info. src : "+n+", name : "+l,m.v.printLog(u),o.push(Promise.reject(new Error(u))),t.abrupt("continue",23);case 19:l=l.replace(i+".",""),!0!==h&&(g.I._msaHash[l]||g.I._projectCommonHash[l]),(f=WebSquare.jsLoader._loadObj(n))instanceof window.Promise&&(o.push(f),b={name:l,src:n,spaCache:c},s.push(b));case 23:r++,t.next=8;break;case 26:return t.next=28,g.I._loadWebSquareCommon("projectCommon",o,s);case 28:t.next=33;break;case 30:t.prev=30,t.t0=t.catch(0),p.Y.printStackTrace(t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,30]])})));return function(e){return t.apply(this,arguments)}}(),f._getBrowserWidth=function(){try{return window.top===window.self?window.innerWidth:"number"==typeof WebSquare._innerWidthDiff?window.outerWidth-WebSquare._innerWidthDiff:window.outerWidth}catch(t){p.Y.printStackTrace(t)}},f._animationEnd=function(){try{var t,e=document.createElement("fakeelement"),i={OAnimation:"oanimationend",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(t in i)if(void 0!==e.style[t])return i[t]}catch(t){p.Y.printStackTrace(t,null,this)}},function(t){var e={},i={},o=/^[^?#]*\//.exec(location.href)[0],s=/^[\w-]+\:\/\/\/?[^\/]+/.exec(o)[0],r=document.createElement("script"),a="boolean"==typeof r.preload||r.readyState&&"uninitialized"==r.readyState,l=!a&&!0===r.async||WebSquare.util.isIE(10)&&"async"in r,h=a&&!l,d=1,c=3;function f(t){S(t)&&!t._done&&(t(),t._done=1)}function y(t){var e=t.split("/"),i=e[e.length-1],o=i.indexOf("?");return-1!=o?i.substring(0,o):i}function v(t,e){var o={},s="";if("string"==typeof e&&e){var r=g.I._msaServerHash[e];r&&(s=r.origin||"")}if("object"==(0,n.A)(t))for(var a in t)t[a]&&(o={name:a,url:s+t[a]});else o={name:y(t),url:s+t};var l=i[o.url];if(l)return l;for(var t in i)if(i[t]==o.url)return i[t];return i[o.url]=o,o}function w(t,e){if(t){"object"==(0,n.A)(t)&&(t=[].slice.call(t));for(var i=0;i<t.length;i++)e.call(t,t[i],i)}}function S(t){return"[object Function]"==Object.prototype.toString.call(t)}function _(t){for(var e in t=t||i)if(t[e].state!=c)return!1;return!0}function C(t,e){t.state||(t.state=0,t.onpreload=[],I({src:t.url,type:"cache"},(function(){!function(t){t.state=d,w(t.onpreload,(function(t){t.call()}))}(t)})))}function x(t,i){return void 0!==WebSquare.scriptCachedList[t.url]&&null!==WebSquare.scriptCachedList[t.url]||("false"===g.I.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[t.url]=0:WebSquare.scriptCachedList[t.url]=1),t.state==c&&WebSquare.scriptCachedList[t.url]>1?(WebSquare.scriptCachedList[t.url]++,i?i():void 0):2==t.state?WebSquare.util.ready(t.url,i,t.name):0==t.state?t.onpreload.push((function(){x(t,i)})):(t.state=2,"false"!==g.I.getConfiguration("/WebSquare/spa/scriptCache/@value")&&WebSquare.scriptCachedList[t.url]++,void I(t.url,(function(){t.state=c,i&&i(),w(e[t.url],(function(t){f(t)})),_()&&w(e.ALL,(function(t){f(t)}))})))}function I(t,e){try{var i=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=b.createElement("script");o.type="text/"+(t.type||"javascript");var s=g.I.getConfiguration("/WebSquare/script/@postfix"),r=u.Q.getEngineUri(t.src||t);"environment"===s&&(r=u.Q.getResourcePostfix(t.src||t)),o.src=r,o.async=!1,o.setAttribute("data-wqexternal","true"),WebSquare.util.isIE(10)?(o.onload=function(){e.done||(o.onload=null,o=void 0,e(),e.done=!0)},o.onerror=function(){e(),e.done=!0}):o.onreadystatechange=o.onload=function(){var t=o.readyState;e.done||t&&!/loaded|complete/.test(t)||(o.onload=o.onreadystatechange=null,o=void 0,e(),e.done=!0)},WebSquare.util.isIE()||(o.onerror=function(){e(),e.done=!0}),i.appendChild(o),i=null}catch(t){p.Y.printStackTrace(t,null,this)}}
t.ready=function(t,o,s){S(s)&&(o=s,t="ALL");var r=i[t];if(r&&r.state==c||"ALL"==t&&_())return f(o),WebSquare.util;var a=e[t];return a?a.push(o):a=e[t]=[o],WebSquare.util},t.js=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e.slice(0),a=r[r.length-1],n="";if("string"==typeof a&&g.I._msaServerHash[a]&&(n=r.pop()),l){m.v.printLog("[WebSquare.util.js]script loading[script_ordered_async]"),I=r[r.length-1],b={},T=-1,S(I)||(I=null),w(r,(function(t,e){t!=I&&(t=v(t,n),b[t.url]||T++,b[t.url]=t)}));var d=0;for(var c in b)!function(t,e){x(t,I&&e==T?function(){f(I)}:null)}(b[c],d),d++;return WebSquare.util}if(h){m.v.printLog("[WebSquare.util.js]script loading[script_cache]");var p=[],b={};for(d=0;d<r.length;d++)!function(t){S(t)?p.push(t):(b[t]||p.push(t),b[t]=t)}(r[d]);r=p;var y=[].slice.call(r,1),_=y[0];return _?(w(y,(function(t){S(t)||C(v(t,n))})),x(v(r[0],n),S(_)?_:function(){WebSquare.util.js.apply(null,y)})):x(v(r[0],n)),WebSquare.util}m.v.printLog("[WebSquare.util.js]script loading[XHR]");var I=r[r.length-1],T=(b={},-1);S(I)||(I=null),w(r,(function(t,e){t!=I&&(t=v(t,n),b[t.url]||T++,b[t.url]=t)}));d=0;for(var c in b)!function(t,e){var i,r,a,n=(i=t.url,r="",a=/^\w+\:\/\//,/^\/\/\/?/.test(i)?i=location.protocol+i:a.test(i)||"/"==i.charAt(0)||(i=(r||"")+i),a.test(i)?i:("/"==i.charAt(0)?s:o)+i);0==n.indexOf(s)?u.Q.globalEval(u.Q.loadUri(n)):x(t,null),I&&e==T&&f(I)}(b[c],d),d++;return WebSquare.util}}(f)},4860:function(t,e,i){"use strict";i.d(e,{G:function(){return a},N:function(){return r}});var o=i(5461),s=i(8971),r={},a=function(){};a.prototype.validate=function(){return!0},a.prototype.setMandatory=function(t){this.validator&&(0==t?this.validator.removeCommand(new r.mandatoryCommand(this.options.mandatory)):this.validator.addCommand(new r.mandatoryCommand(t)),this.onPropertyChange("mandatory",t)),this.options.mandatory=t},a.prototype.getMandatory=function(){return this.options.mandatory},a.prototype.setMinLength=function(t){this.validator&&(this.validator.removeCommand(new r.minLengthCommand(this.options.minLength)),this.validator.addCommand(new r.minLengthCommand(t))),this.options.minlength=t},a.prototype.getMinLength=function(){return this.options.minlength},a.prototype.setMaxLength=function(t){"float"!=this.options.dataType&&"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType?(""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxLengthCommand(this.options.maxLength,this.options.useMaxLength)),this.validator.addCommand(new r.maxLengthCommand(t,this.options.useMaxLength))),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(this.render.maxLength=t)),this.render&&"input"==this.render.tagName.toLowerCase()&&!this.options.useMaxLength&&(""===t||-1==t?this.render.removeAttribute("maxlength"):this.render.maxLength=t)):this.setFloatMaxLength(t.toString(),this.options.decimalDelimiter,this.options.delimiter)},a.prototype.getMaxLength=function(){return"float"===this.options.dataType||"true"===this.options.floatNumber?this.floatMaxlength:this.options.maxlength},a.prototype.setFloatMaxLength=function(t,e,i){try{""===t||-1==t?(this.validator&&this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.options.maxlength=t,this.render&&"input"==this.render.tagName.toLowerCase()&&this.render.removeAttribute("maxLength")):(this.validator&&(this.validator.removeCommand(new r.maxFloatLengthCommand(this.options.maxLength)),this.validator.addCommand(new r.maxFloatLengthCommand(t,e,i))),this.options.maxlength="-1"),this.floatMaxlength=t}catch(t){s.Y.printStackTrace(t)}},
a.prototype.setMinByteLength=function(t){this.validator&&(this.validator.removeCommand(new r.minByteLengthCommand(this.options.minByteLength)),this.validator.addCommand(new r.minByteLengthCommand(t))),this.options.minByteLength=t},a.prototype.getMinByteLength=function(){return this.options.minByteLength},a.prototype.setMaxByteLength=function(t){try{""===t||-1==t?this.validator&&this.validator.removeCommand(new r.maxByteLengthCommand(this.options.maxByteLength)):this.validator&&(this.validator.removeCommand(new r.maxByteLengthCommand(this.options.maxByteLength)),this.validator.addCommand(new r.maxByteLengthCommand(t))),this.options.maxByteLength=t}catch(t){s.Y.printStackTrace(t)}},a.prototype.getMaxByteLength=function(){return this.options.maxByteLength},a.prototype.getAllowChar=function(){return this.options.allowChar},a.prototype.setIgnoreChar=function(t){this.options.ignoreChar=t},a.prototype.getIgnoreChar=function(){return this.options.ignoreChar},a.prototype.getDisplayMessage=function(){return this.options.displaymessage},a.prototype.getInvalidMessage=function(){return this.options.invalidMessage},r.validateCommand=function(){},r.validateCommand.prototype.executeValidate=function(t){return alert("you should override 'executeValidate'"),!0},r.validateCommand.prototype.executeValidateString=function(t){return alert("you should override 'executeValidateString'"),t},r.validateCommand.prototype.executeValidateKeyPress=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyDown=function(t,e,i){return alert("you should override 'executeValidateKeyPress'"),!0},r.validateCommand.prototype.executeValidateKeyInput=function(t,e,i){return alert("you should override 'executeValidateKeyInput'"),!0},r.validateCommand.prototype.executeInvalidMessage=function(){return alert("you should override 'executeInvalidMessage'"),"invalidMessage"},r.validateCommand.prototype.getType=function(){return alert("you should override 'getType'"),""},r.validateCommand.prototype.getValue=function(){return alert("you should override 'getValue'"),""},r.validateCommand.prototype.getDetail=function(){return alert("you should override 'getDetail'"),""},r.invalidObject=function(t,e){try{this.invalidCommand=e,this.callerId=t}catch(t){s.Y.printStackTrace(t)}},r.invalidObject.prototype.getCaller=function(){var t=null;try{t=WebSquare.core.getComponentById(this.callerId)}catch(t){s.Y.printStackTrace(t)}return t},r.invalidObject.prototype.getType=function(){return this.invalidCommand?this.invalidCommand.getType():""},r.invalidObject.prototype.getDetail=function(){return this.invalidCommand?this.invalidCommand.getDetail():""},r.invalidObject.prototype.getValue=function(){return this.invalidCommand?this.invalidCommand.getValue():""},r.invalidObject.prototype.getPrefix=function(){return null},r.validateInvoker=function(t,e){try{if(this.commandList=[],e=e||{},this.invalidMessage=e.invalidMessage||"",this.displaymessage=e.displaymessage||!1,this.invalidMessageFunc=e.invalidMessageFunc||null,e._scope_obj_uuid_bak?this.scopeId=e._scope_obj_uuid_bak&&WebSquare.idCache[e._scope_obj_uuid_bak]&&WebSquare.idCache[e._scope_obj_uuid_bak].id:this.scopeId=e._scope_obj_uuid&&WebSquare.idCache[e._scope_obj_uuid]&&WebSquare.idCache[e._scope_obj_uuid].id,this.invalidMessageFunc&&(this.invalidMessageFunc.indexOf("(")<0&&(this.invalidMessageFunc+="()"),this.invalidMsgFuncName=this.invalidMessageFunc.substring(0,this.invalidMessageFunc.indexOf("(")),this.tmpFunc=this.invalidMessageFunc.replace(this.invalidMsgFuncName,"_validator_.doValidate")),this.callerId=t,void 0!==e.mandatory&&1==e.mandatory&&this.addCommand(new r.mandatoryCommand(e.mandatory)),void 0!==e.allowChar&&""!=e.allowChar&&this.addCommand(new r.allowCharCommand(e.allowChar)),void 0!==e.ignoreChar&&""!=e.ignoreChar&&this.addCommand(new r.ignoreCharCommand(e.ignoreChar)),void 0!==e.maxlength&&-1!=e.maxlength)if(e.useMaxLength&&"number"===e.dataType){
var i=[e.delimeter||e.delimiter||","].join("");this.addCommand(new r.ignoreCharCommand(i)),this.addCommand(new r.maxLengthCommand(e.maxlength,e.useMaxLength))}else"float"===e.datatype?this.addCommand(new r.maxFloatLengthCommand(e.maxlength)):this.addCommand(new r.maxLengthCommand(e.maxlength));void 0!==e.minlength&&-1!=e.minlength&&this.addCommand(new r.minLengthCommand(e.minlength)),void 0!==e.maxByteLength&&-1!=e.maxByteLength&&this.addCommand(new r.maxByteLengthCommand(e.maxByteLength,e.byteCheckIgnoreChar)),void 0!==e.minByteLength&&-1!=e.minByteLength&&this.addCommand(new r.minByteLengthCommand(e.minByteLength)),void 0!==e.validator&&""!=e.validator&&this.addCommand(new r.commandAdapter(e.validator,this.scopeId))}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.addCommand=function(t,e){try{!0===e?this.commandList.unshift(t):this.commandList.push(t)}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.removeCommand=function(t){try{for(var e=new Array,i=0;i<this.commandList.length;i++)this.commandList[i].getType()!=t.getType()&&e.push(this.commandList[i]);this.commandList=e}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.clearCommand=function(){try{this.commandList=null,this.commandList=[]}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.applyPriority=function(){},r.validateInvoker.prototype.validate=function(t,e){try{var i=!0,o="";this.obfuscator_invalidObject=null;for(var a=0;a<this.commandList.length;a++)if(!this.commandList[a].executeValidate(t,e)){i=!1,o+=this.commandList[a].executeInvalidMessage()+"\n",this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[a]);break}if(0==i){if(""!=this.invalidMessage&&null!=this.invalidMessage&&(o=this.invalidMessage),this.invalidMessageFunc&&this.obfuscator_invalidObject)try{o=new Function("_validator_","return "+this.tmpFunc)(this)}catch(t){o=""}if(1==this.displaymessage&&o)try{alert(o)}catch(t){s.Y.printStackTrace(t)}}return i}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.doValidate=function(){var t=WebSquare.util.getGlobalFunction(this.invalidMsgFuncName,this.scopeId);if("function"==typeof t){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t.apply(this.obfuscator_invalidObject,i)}},r.validateInvoker.prototype.validateString=function(t){try{this.applyPriority();for(var e=0;e<this.commandList.length;e++)t=this.callerId?this.commandList[e].executeValidateString(t,this.callerId):this.commandList[e].executeValidateString(t);return t}catch(t){s.Y.printStackTrace(t)}},r.validateInvoker.prototype.validateKeyPress=function(t,e,i,o){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var a=!0,n=0;n<this.commandList.length;n++)if(!this.commandList[n].executeValidateKeyPress(t,e,i,o)){a=!1,this.obfuscator_invalidObject=new r.invalidObject(this.callerId,this.commandList[n]);break}return a}catch(i){s.Y.printStackTrace(i)}},r.validateInvoker.prototype.validateKeyDown=function(t,e,i){try{if(!(1!=i.metaKey&&1!=i.ctrlKey||67!=i.charCode&&99!=i.charCode&&86!=i.charCode&&118!=i.charCode))return!0;for(var o=!0,r=0;r<this.commandList.length;r++)if(!this.commandList[r].executeValidateKeyDown(t,e,i)){o=!1;break}return o}catch(i){s.Y.printStackTrace(i)}},r.validateInvoker.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.validateInvoker.prototype.validateKeyInput=function(t,e,i){try{for(var o=!0,r=e,a=0;a<this.commandList.length;a++){var n=this.commandList[a].executeValidateKeyInput(t,e,i);if("string"==typeof n?r=n:o=n,!o)break}return{str:r,valid:o}}catch(i){s.Y.printStackTrace(i)}},r.validateInvoker.prototype.validateKorean=function(t,e){try{var i=t;if("number"===e||"float"===e){i=t.replace(/[-|-|-]/g,"")}return i}catch(t){s.Y.printStackTrace(t)}},r.mandatoryCommand=function(t){this.mandatory=t},o.q.extend(r.mandatoryCommand.prototype,r.validateCommand.prototype),
r.mandatoryCommand.prototype.getType=function(){return"mandatory"},r.mandatoryCommand.prototype.getDetail=function(){return{}},r.mandatoryCommand.prototype.getValue=function(){return""},r.mandatoryCommand.prototype.executeValidate=function(t){try{return null!=t&&""!=t}catch(t){s.Y.printStackTrace(t)}},r.mandatoryCommand.prototype.executeValidateString=function(t){return t},r.mandatoryCommand.prototype.executeValidateKeyPress=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyDown=function(t){return!0},r.mandatoryCommand.prototype.executeValidateKeyInput=function(t){return!0},r.mandatoryCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_mandatory")},r.maxLengthCommand=function(t,e){this.maxLength=parseInt(t,10)||0,this.useMaxLength=!!e},o.q.extend(r.maxLengthCommand.prototype,r.validateCommand.prototype),r.maxLengthCommand.prototype.getType=function(){return"maxLength"},r.maxLengthCommand.prototype.getDetail=function(){return{}},r.maxLengthCommand.prototype.getValue=function(){return this.maxLength},r.maxLengthCommand.prototype.executeValidate=function(t){if(this.useMaxLength)return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(t=t.substr(1)),!(t.length>this.maxLength);var e=!0;return t.length>this.maxLength&&(e=!1),e},r.maxLengthCommand.prototype.executeValidateString=function(t){try{if(this.useMaxLength){var e="";return"-"!==t.charAt(0)&&"+"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1)),t.length>this.maxLength?e+t.substr(0,this.maxLength):e+t}return t&&t.length>this.maxLength&&(t=t.substr(0,this.maxLength)),t}catch(t){s.Y.printStackTrace(t)}},r.maxLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){try{if(this.useMaxLength){var r=WebSquare.text.getSelection(t),a=i.keyCode||i.charCode,n=a-48<0||a-48>9?i.key:a-48+"";e=e.substr(0,r.start)+n+e.substr(r.end);return this.executeValidate(e)}return t.maxLength=o>0?o:this.maxLength,!0}catch(i){s.Y.printStackTrace(i)}},r.maxLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxLength",this.maxLength)},r.minLengthCommand=function(t){this.minLength=t||0},o.q.extend(r.minLengthCommand.prototype,r.validateCommand.prototype),r.minLengthCommand.prototype.getType=function(){return"minLength"},r.minLengthCommand.prototype.getDetail=function(){return{}},r.minLengthCommand.prototype.getValue=function(){return this.minLength},r.minLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return t.length<this.minLength&&(e=!1),e}catch(t){s.Y.printStackTrace(t)}},r.minLengthCommand.prototype.executeValidateString=function(t){return t},r.minLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.minLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minLength",this.minLength)},r.maxFloatLengthCommand=function(t,e,i){this.decimalDelimiter=e||".",this.delimiter=i||",";var o=t.split(".")[0]||"*",s=t.split(".")[1]||"0";this.currentIntegerCount=0,this.currentFractionCount=0,this.integerMaxLength="*"!==o&&""!==o&&"-1"!==o&&o?parseInt(o,10):1/0,this.fractionMaxLength="*"!==s&&""!==s&&"-1"!==s&&s?parseInt(s,10):1/0},o.q.extend(r.maxFloatLengthCommand.prototype,r.validateCommand.prototype),r.maxFloatLengthCommand.prototype.getType=function(){return"maxFloatLength"},r.maxFloatLengthCommand.prototype.getDetail=function(){var t="init",e="Invalid input value.",i=0;return-1!=this.integerMaxLength&&this.currentIntegerCount>this.integerMaxLength?(i=1,e="Value exceeds maximum digits allowed for the integer part.",t="integer",
this.currentIntegerCount=0):-1!=this.fractionMaxLength&&this.currentFractionCount>this.fractionMaxLength?(i=2,e="The number of decimal places exceeds the maximum allowed.",t="fraction",this.currentFractionCount=0):(t="init",i=3),{currentState:t,code:i,message:e}},r.maxFloatLengthCommand.prototype.getValue=function(){var t=this.integerMaxLength===1/0?"*":this.integerMaxLength,e=this.fractionMaxLength===1/0?"*":this.fractionMaxLength;return t+this.decimalDelimiter+e},r.maxFloatLengthCommand.prototype.executeValidate=function(t){var e=t.charAt(0)||t[0];"+"!==e&&"-"!==e||(t=t.split(e).join(""));var i=t.split(this.decimalDelimiter);if(2!==i.length||i[1]||(i=[i[0]]),1==i.length){if((o=i[0].wq_trim()).length>this.integerMaxLength)return this.currentIntegerCount=o.length,!1}else{if(2!=i.length)return!1;var o=i[0].wq_trim(),s=i[1].wq_trim();if(o.length>this.integerMaxLength||s.length>this.fractionMaxLength)return this.currentIntegerCount=o.length,this.currentFractionCount=s.length,!1}return!0},r.maxFloatLengthCommand.prototype.executeValidateString=function(t){try{var e="",i=t.charAt(0)||t[0];"+"!==i&&"-"!==i||(e=i,t=t.split(i).join(""));var o=t.split(this.decimalDelimiter);if(2!==o.length||o[1]||(o=[o[0]]),1==o.length)(r=o[0].wq_trim()).length>this.integerMaxLength&&(t=t.substr(0,this.integerMaxLength));else if(o.length>1){var r=o[0].wq_trim(),a=o[1].wq_trim();r.length>this.integerMaxLength&&(r=r.substr(0,this.integerMaxLength)),a.length>this.fractionMaxLength&&(a=a.substr(0,this.fractionMaxLength)),t=r+this.decimalDelimiter+a}return e+t}catch(t){s.Y.printStackTrace(t)}},r.maxFloatLengthCommand.prototype.executeValidateKeyPress=function(t,e,i,o){if(WebSquare.util.isFF()&&0===i.charCode)return this.executeValidate(e.split(this.delimiter).join(""));e=t.value;var s=WebSquare.text.getSelection(t),r=i.keyCode||i.charCode,a=r-48<0||r-48>9?String.fromCharCode(r):r-48+"";a=96<=r&&r<=105?r-96+"":a,a=110==r||190==r?".":a,a=i.metaKey||i.ctrlKey||46!=r&&110!=r&&190!=r?a:".";var n=(e=e.substr(0,s.start)+a+e.substr(s.end)).split(this.delimiter).join("");return this.executeValidate(n)},r.maxFloatLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=t.value.split(this.delimiter).join("");return!!(i.shiftKey&&187==o||189==o||(i.metaKey||i.ctrlKey)&&65==o||(i.metaKey||i.ctrlKey)&&67==o||(i.metaKey||i.ctrlKey)&&86==o||(i.metaKey||i.ctrlKey)&&88==o||(i.metaKey||i.ctrlKey)&&90==o||o>=33&&o<=40||107==o||109==o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||8==o||13==o||12==o||144==o||9==o||46==o||45==o)||this.executeValidate(s)},r.maxFloatLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.maxFloatLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxFloatLength",this.integerMaxLength,this.fractionMaxLength)},r.maxByteLengthCommand=function(t,e){this.maxByteLength=t||0,this.byteCheckIgnoreChar=e||""},o.q.extend(r.maxByteLengthCommand.prototype,r.validateCommand.prototype),r.maxByteLengthCommand.prototype.getType=function(){return"maxByteLength"},r.maxByteLengthCommand.prototype.getDetail=function(){return{}},r.maxByteLengthCommand.prototype.getValue=function(){return this.maxByteLength},r.maxByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar)>this.maxByteLength&&(e=!1),e}catch(t){s.Y.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateString=function(t){try{for(var e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);t.length>0&&e>this.maxByteLength;)t=t.substr(0,t.length-1),e=WebSquare.util.getStringByteSize(t,this.byteCheckIgnoreChar);return t}catch(t){s.Y.printStackTrace(t)}},r.maxByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.maxByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0
},r.maxByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_maxByteLength",this.maxByteLength)},r.minByteLengthCommand=function(t){this.minByteLength=t||0},o.q.extend(r.minByteLengthCommand.prototype,r.validateCommand.prototype),r.minByteLengthCommand.prototype.getType=function(){return"minByteLength"},r.minByteLengthCommand.prototype.getDetail=function(){return{}},r.minByteLengthCommand.prototype.getValue=function(){return this.minByteLength},r.minByteLengthCommand.prototype.executeValidate=function(t){try{var e=!0;return WebSquare.util.getStringByteSize(t)<this.minByteLength&&(e=!1),e}catch(t){s.Y.printStackTrace(t)}},r.minByteLengthCommand.prototype.executeValidateString=function(t){return t},r.minByteLengthCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.minByteLengthCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_minByteLength",this.minByteLength)},r.allowCharCommand=function(t){this.allowChar=t,this.regExp=new RegExp("["+t+"]","g")},o.q.extend(r.allowCharCommand.prototype,r.validateCommand.prototype),r.allowCharCommand.prototype.getType=function(){return"allowChar"},r.allowCharCommand.prototype.getDetail=function(){return{}},r.allowCharCommand.prototype.getValue=function(){return this.allowChar},r.allowCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&(t.match(this.regExp)||(e=!1)),e}catch(t){s.Y.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateString=function(t){try{var e=t.match(this.regExp);return t=e?e.join(""):""}catch(t){s.Y.printStackTrace(t)}},r.allowCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)||(o=!1),WebSquare.util.isFF()&&0==i.charCode&&(o=!0),WebSquare.util.isOpera()&&WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r]&&(o=!0)}return o}catch(i){s.Y.printStackTrace(i)}},r.allowCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.allowCharCommand.prototype.executeValidateKeyInput=function(t,e,i){for(var o,s=[];null!==(o=this.regExp.exec(e));)s.push(o[0]);return s.join("")},r.allowCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_allowChar",this.allowChar)},r.ignoreCharCommand=function(t){this.ignoreChar=t,this.regExp=new RegExp("["+t+"]","g")},o.q.extend(r.ignoreCharCommand.prototype,r.validateCommand.prototype),r.ignoreCharCommand.prototype.getType=function(){return"ignoreChar"},r.ignoreCharCommand.prototype.getDetail=function(){return{}},r.ignoreCharCommand.prototype.getValue=function(){return this.ignoreChar},r.ignoreCharCommand.prototype.executeValidate=function(t){try{var e=!0;return""!=t&&t.match(this.regExp)&&(e=!1),e}catch(t){s.Y.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateString=function(t){try{return t=t.replace(this.regExp,"")}catch(t){s.Y.printStackTrace(t)}},r.ignoreCharCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode;String.fromCharCode(r).match(this.regExp)&&(o=!1)}return o}catch(i){s.Y.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.ignoreCharCommand.prototype.executeValidateKeyInput=function(t,e,i){try{return e=e.replace(this.regExp,"")}catch(i){s.Y.printStackTrace(i)}},r.ignoreCharCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_ignoreChar",this.ignoreChar)},r.numberCommand=function(t,e){t||(t=","),e||(e="."),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.q.extend(r.numberCommand.prototype,r.validateCommand.prototype),
r.numberCommand.prototype.getType=function(){return"number"},r.numberCommand.prototype.getDetail=function(){return{}},r.numberCommand.prototype.getValue=function(){return""},r.numberCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.numberCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.Y.printStackTrace(t)}},r.numberCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=i.charCode?i.charCode:i.keyCode,a=String.fromCharCode(r),n=WebSquare.text.getSelection(t),l=e.substr(0,n.start)+a+e.substr(n.end),h=l.match(this.pattern);o=!(!h||h+""!=l),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[r])&&(o=!0)}return o}catch(i){s.Y.printStackTrace(i)}},r.numberCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.numberCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.numberCommand.prototype.executeInvalidMessage=function(){return""},r.digitCommand=function(t,e){t||(t=","),e||(e="."),this.delimiter=t,this.decimalDelimiter=e},o.q.extend(r.digitCommand.prototype,r.validateCommand.prototype),r.digitCommand.prototype.getType=function(){return"digit"},r.digitCommand.prototype.getDetail=function(){return{}},r.digitCommand.prototype.getValue=function(){return""},r.digitCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.digitCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.digitCommand.prototype.executeValidateString=function(t){try{var e="";"+"!==t.charAt(0)&&"-"!==t.charAt(0)||(e=t.charAt(0),t=t.substr(1));var i=t.match(/[^0]+[0-9]*/g);if(null!=i){var o="";null!=t.match(/^0+[^0-9]/)&&(o="0"),i=o+i.join("")}else i=""!==t?"0":"";return t=e+i}catch(t){s.Y.printStackTrace(t)}},r.digitCommand.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.digitCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.digitCommand.prototype.executeInvalidMessage=function(){return""},r.floatCommand=function(t,e,i){this.currentState="init",this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*$"),this.numberPattern=new RegExp("[0-9\\+\\-\\"+e+"]+","g"),this.delimiter=t||",",this.decimalDelimiter=e||".",this.applyFormat=i||"all"},o.q.extend(r.floatCommand.prototype,r.validateCommand.prototype),r.floatCommand.prototype.getType=function(){return"float"},r.floatCommand.prototype.getDetail=function(){return"error"===this.currentState?{currentState:"init",code:3,message:"Invalid input value."}:{}},r.floatCommand.prototype.getValue=function(){return""},r.floatCommand.prototype.executeValidate=function(t){try{return""===t||""!==this.executeValidateString(t)}catch(t){s.Y.printStackTrace(t)}return!1},r.floatCommand.prototype.executeValidateString=function(t){try{this.currentState="init";var e=(t=t.split(this.delimiter).join("")).split(this.decimalDelimiter).join("."),i=this.pattern.test(t),o=parseFloat(e);if(!i||"number"!=typeof o||t[t.length-1]===this.decimalDelimiter){this.currentState="error";var r=t.match(this.numberPattern);return r?r.join(""):""}return t}catch(t){s.Y.printStackTrace(t)}return""},r.floatCommand.prototype.executeValidateKeyPress=function(t,e,i){return this.executeValidate(e)},r.floatCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_float")},r.floatCommand.prototype.executeValidateKeyDown=function(t,e,i){var o=i.keyCode||i.charCode,s=o-48<0||o-48>9?String.fromCharCode(o):o-48+"";if(s=96<=o&&o<=105?o-96+"":s,s=110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=188===o&&","===this.decimalDelimiter?",":s,s=189===o||173===o||109===o?"-":s,s=i.metaKey||i.ctrlKey||46!==o&&110!==o&&190!==o||"."!==this.decimalDelimiter?s:".",s=i.shiftKey&&187===o||107==o?"+":s,
(i.metaKey||i.ctrlKey)&&65===o||(i.metaKey||i.ctrlKey)&&67===o||(i.metaKey||i.ctrlKey)&&86===o||(i.metaKey||i.ctrlKey)&&88===o||(i.metaKey||i.ctrlKey)&&90===o||o>=33&&o<=40||8===o||13===o||(110===o||190===o||173===o)&&"."===this.decimalDelimiter||12==o||144==o||o>=112&&o<=123||o>=16&&o<=20||9===o||46===o||45==o||27===o)return!0;var r=WebSquare.text.getSelection(t),a=e.substr(0,r.start)+s+e.substr(r.end);return!!a.split(this.delimiter).join("").match(this.pattern)&&this.executeValidate(a)},r.floatCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(!0!==this.pattern.test(e)){this.currentState="error";var o=e.match(this.numberPattern);return o?o.join(""):""}return!0}catch(i){s.Y.printStackTrace(i)}},r.dateCommand=function(t){this.dateHelper=new WebSquare.uiplugin.dateHelper,this.ioFormat=t||"yyyyMMddHHmmSS"},o.q.extend(r.dateCommand.prototype,r.validateCommand.prototype),r.dateCommand.prototype.getType=function(){return"date"},r.dateCommand.prototype.getDetail=function(){return{}},r.dateCommand.prototype.getValue=function(){return""},r.dateCommand.prototype.executeValidate=function(t,e){try{var i=!0,o=this.ioFormat.indexOf("yyyy"),r=this.ioFormat.indexOf("MM"),a=this.ioFormat.indexOf("dd"),n=this.ioFormat.indexOf("HH"),l=this.ioFormat.indexOf("mm"),h=this.ioFormat.indexOf("SS"),d=t.substr(o,4),c=t.substr(r,2),u=t.substr(a,2),p=t.substr(n,2),g=t.substr(l,2),m=t.substr(h,2);if("validateZero"===(e=e||{}).dateValidCheckType&&(isNaN(parseInt(d,10))||parseInt(d,10)<1))return i=!1;switch(t.length){case 4:(isNaN(parseInt(d,10))||parseInt(d,10)<1)&&(i=!1);break;case 6:(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>12)&&(i=!1);break;case 8:(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>12)&&(i=!1);var f=this.dateHelper.getMonthCount(d,c);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>f)&&(i=!1);break;case 10:(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>12)&&(i=!1);f=this.dateHelper.getMonthCount(d,c);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>f)&&(i=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>23)&&(i=!1);break;case 12:(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>12)&&(i=!1);f=this.dateHelper.getMonthCount(d,c);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>f)&&(i=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>23)&&(i=!1),(isNaN(parseInt(g,10))||parseInt(g,10)<0||parseInt(g,10)>59)&&(i=!1);break;case 14:(isNaN(parseInt(c,10))||parseInt(c,10)<1||parseInt(c,10)>12)&&(i=!1);f=this.dateHelper.getMonthCount(d,c);(isNaN(parseInt(u,10))||parseInt(u,10)<1||parseInt(u,10)>f)&&(i=!1),(isNaN(parseInt(p,10))||parseInt(p,10)<0||parseInt(p,10)>23)&&(i=!1),(isNaN(parseInt(g,10))||parseInt(g,10)<0||parseInt(g,10)>59)&&(i=!1),(isNaN(parseInt(m,10))||parseInt(m,10)<0||parseInt(m,10)>59)&&(i=!1);break;default:i=!1}return i}catch(t){s.Y.printStackTrace(t)}},r.dateCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.Y.printStackTrace(t)}},r.dateCommand.prototype.executeValidateKeyPress=function(t,e,i){try{return!0}catch(i){s.Y.printStackTrace(i)}},r.dateCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.dateCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.dateCommand.prototype.executeInvalidMessage=function(){return WebSquare.language.getMessage("V_error_date")},r.euroCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.q.extend(r.euroCommand.prototype,r.validateCommand.prototype),r.euroCommand.prototype.getType=function(){return"euro"},r.euroCommand.prototype.getDetail=function(){return{}},r.euroCommand.prototype.getValue=function(){return""},r.euroCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.euroCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\,]+/g);return t=e?e.join(""):""}catch(t){s.Y.printStackTrace(t)}},
r.euroCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.Y.printStackTrace(i)}},r.euroCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.euroCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.euroCommand.prototype.executeInvalidMessage=function(){return""},r.rupeeCommand=function(t,e){t||(t="."),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.q.extend(r.rupeeCommand.prototype,r.validateCommand.prototype),r.rupeeCommand.prototype.getType=function(){return"rupee"},r.rupeeCommand.prototype.getDetail=function(){return{}},r.rupeeCommand.prototype.getValue=function(){return""},r.rupeeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-\.]+/g);return t=e?e.join(""):""}catch(t){s.Y.printStackTrace(t)}},r.rupeeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.rupeeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.Y.printStackTrace(i)}},r.rupeeCommand.prototype.executeInvalidMessage=function(){return""},r.numberMaskCommand=function(t,e,i){this.masking=t,this.maskFormat=e,this.applyFormat=i,this.pattern=new RegExp("^[0-9-+]")},o.q.extend(r.numberMaskCommand.prototype,r.validateCommand.prototype),r.numberMaskCommand.prototype.getType=function(){return"mask"},r.numberMaskCommand.prototype.getDetail=function(){return{}},r.numberMaskCommand.prototype.getValue=function(){return""},r.numberMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.Y.printStackTrace(t)}},r.numberMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.numberMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i&&"all"==this.applyFormat){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n="-"==e[0]?e.length:e.length,l=this.masking,h=this.maskFormat;n="-"==e[0]?e.length-1:e.length;"reverse"==h&&n>l.length?/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==h&&n>l.length&&/\d/g.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.Y.printStackTrace(i)}},r.numberMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,c="-"==e[0]?e.length-1:e.length,u=h.length;a.start==a.end&&(this.pattern.test(l)?"reverse"==d&&c>=u?"0"==h[0]?("0"!=e[0]&&"-"!=e[0]||"-"==e[0]&&"0"!=e[1])&&(o=!1):o=!1:"default"==d&&c>=u&&("0"==h[u-1]?"0"!=e[e.length-1]&&(o=!1):"#"==h[u-1]&&(o=!1)):o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=this.masking,d=this.maskFormat,c="-"==e[0]?e.length-1:e.length,u=0;for(var p=0;p<h.length;p++)"0"!=h[p]&&"#"!=h[p]||(u+=1);a.start==a.end&&c>=u&&(o=!1),this.pattern.test(l)||(o=!1,
0!=a.start||"-"!=i.key&&"Subtract"!=i.key||(o=!0))}return o}catch(i){s.Y.printStackTrace(i)}},r.numberMaskCommand.prototype.executeInvalidMessage=function(){return""},r.textMaskCommand=function(t,e,i,o){this.masking=t,this.maskFormat=e,this.applyFormat=i,o?(this.pattern=new RegExp("^["+o+"]"),this.rPattern=new RegExp("["+o+"]")):(this.pattern=new RegExp("^[0-9]"),this.rPattern=new RegExp("[0-9]"))},o.q.extend(r.textMaskCommand.prototype,r.validateCommand.prototype),r.textMaskCommand.prototype.getType=function(){return"mask"},r.textMaskCommand.prototype.getDetail=function(){return{}},r.textMaskCommand.prototype.getValue=function(){return""},r.textMaskCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateString=function(t){try{return t}catch(t){s.Y.printStackTrace(t)}},r.textMaskCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.textMaskCommand.prototype.executeValidateKeyInput=function(t,e,i){try{if(i){var o=WebSquare.event.getTarget(i),r=WebSquare.text.getCaretPos(o),a=e,n=this.masking,l=this.maskFormat;"reverse"==l&&e.length>n.length?this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r)):"default"==l&&e.length>n.length&&this.rPattern.test(e[r-1])&&(a=e.substr(0,r-1)+e.substr(r))}return a}catch(i){s.Y.printStackTrace(i)}},r.textMaskCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i)if("all"==this.applyFormat){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),n=i.charCode?i.charCode:i.keyCode,l=this.masking,h=String.fromCharCode(n),d=e.length,c=l.length;a.start==a.end&&d>=c&&(o=!1),this.pattern.test(h)||(o=!1)}else if("display"==this.applyFormat){r=WebSquare.event.getTarget(i),a=WebSquare.text.getSelection(r),l=this.masking,n=i.charCode?i.charCode:i.keyCode,h=String.fromCharCode(n),d=e.length,c=0;for(var u=0;u<l.length;u++)"#"==l[u]&&(c+=1);a.start==a.end&&d>=c&&(o=!1),this.pattern.test(h)||(o=!1)}return o}catch(i){s.Y.printStackTrace(i)}},r.textMaskCommand.prototype.executeInvalidMessage=function(){return""},r.tengeCommand=function(t,e){t||(t=" "),e||(e=","),this.pattern=new RegExp("^[+-]?[0-9]*["+e+"]?[0-9]*"),this.delimiter=t,this.decimalDelimiter=e},o.q.extend(r.tengeCommand.prototype,r.validateCommand.prototype),r.tengeCommand.prototype.getType=function(){return"tenge"},r.tengeCommand.prototype.getDetail=function(){return{}},r.tengeCommand.prototype.getValue=function(){return""},r.tengeCommand.prototype.executeValidate=function(t){try{return!0}catch(t){s.Y.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateString=function(t){try{var e=t.match(/[0-9\+\-]+/g);return t=e?e.join(""):""}catch(t){s.Y.printStackTrace(t)}},r.tengeCommand.prototype.executeValidateKeyPress=function(t,e,i){try{var o=!0;if(i){var r=WebSquare.event.getTarget(i),a=WebSquare.text.getCaretPos(r),n=i.charCode?i.charCode:i.keyCode,l=String.fromCharCode(n),h=e.substr(0,a)+l+e.substr(a),d=h.match(this.pattern);o=!(!d||d+""!=h),(WebSquare.util.isFF()&&0==i.charCode||WebSquare.util.isOpera()&&WebSquare.util.getIgnoreKeyPressCodes()[n])&&(o=!0)}return o}catch(i){s.Y.printStackTrace(i)}},r.tengeCommand.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.tengeCommand.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.tengeCommand.prototype.executeInvalidMessage=function(){return""},r.commandAdapter=function(t,e){this.userFunc=t,this.scopeId=e},o.q.extend(r.commandAdapter.prototype,r.validateCommand.prototype),r.commandAdapter.prototype.executeValidate=function(t){return!0},r.commandAdapter.prototype.getDetail=function(){return{}},r.commandAdapter.prototype.getType=function(){return"user"},r.commandAdapter.prototype.getValue=function(){return""},r.commandAdapter.prototype.executeValidateString=function(t,e){try{if("function"!=typeof this.userFunc)try{this.userFunc=WebSquare.util.getGlobalFunction(this.userFunc,this.scopeId)}catch(t){
WebSquare.logger.printLog("executeValidateString initialize.")}return"function"==typeof this.userFunc&&(t=this.userFunc(t,e)),t}catch(t){s.Y.printStackTrace(t)}},r.commandAdapter.prototype.executeValidateKeyPress=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyDown=function(t,e,i){return!0},r.commandAdapter.prototype.executeValidateKeyInput=function(t,e,i){return!0},r.commandAdapter.prototype.executeInvalidMessage=function(){return""}},7991:function(t,e,i){"use strict";i.d(e,{_:function(){return C}});var o,s,r,a,n,l,h,d,c,u,p=i(2284),g=i(467),m=i(4756),f=i.n(m),b=i(2660),y=i(8971),v=i(5375),w=i(2256),S=i(3406),_=i(8683),C=(i(996),{});C._MSMXL_PROGIDS=b.Q._MSMXL_PROGIDS,C.loadDocumentCache={},C.load=function(){var t=(0,g.A)(f().mark((function t(e,i,o,s){var r,a,n,l,h,d;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,a=e,t.prev=3,void 0===i||!i){t.next=8;break}if(void 0===(r=C.loadDocumentCache[a])||null==r){t.next=8;break}return t.abrupt("return",r);case 8:if("string"!=typeof e){t.next=36;break}return t.next=12,v.I.loadAsync(e,{useXML:!0});case 12:if(n=t.sent){t.next=15;break}return t.abrupt("return",null);case 15:if(r=void 0!==s&&s?C._parse(n):C.parse(n),l="object"==(0,p.A)(r),!s&&b.Q.useWebSquareXMLParser||!b.Q.useActiveXObject||0==r.parseError.errorCode){t.next=32;break}throw w.v.debug&&(h="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no",window.open(e,"_blank",h)),(d=new Object).ParserException=S.B.getMessage("E_xml_ErrorOccurLoadingXML"),d.ParserException+="\nerrorCode: "+r.parseError.errorCode,d.ParserException+="\nfilepos : "+r.parseError.filepos,d.ParserException+="\nline    : "+r.parseError.line,d.ParserException+="\nlinepos : "+r.parseError.linepos,d.ParserException+="\nreason  : "+r.parseError.reason,d.ParserException+="srcText   : "+r.parseError.srcText,d.ParserException+="\nurl : "+r.parseError.url,r=null,d;case 32:if(l){t.next=36;break}return w.v.debug&&(h="top=120,height=485,left=50,width=800,location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no",window.open(e,"_blank",h)),w.v.printLog("ERROR : "+S.B.getMessage("E_xml_ErrorOccurLoadingXMLWithURL",a)),t.abrupt("return",null);case 36:void 0!==i&&i&&(C.loadDocumentCache[a]=r),t.next=42;break;case 39:t.prev=39,t.t0=t.catch(3),y.Y.printStackTrace(t.t0,"xml.load");case 42:return t.abrupt("return",r);case 43:case"end":return t.stop()}}),t,null,[[3,39]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),C.loadSafari=function(t){var e=b.Q.getXMLHTTPObject();e.open("GET",t,!1),e.send(null);var i=e.responseText;return e=null,this.parse(i)},C.parse=function(t,e){var i=null;try{if(b.Q.useWebSquareXMLParser){if("string"==typeof t){if(""==(t=t.wq_trim()))return w.v.printLog("ERROR : xml.load Error. String is empty."),null;"<"!=t.charAt(0)&&(t="<"+t+"/>")}else null==t||9!=t.nodeType&&1!=t.nodeType||(t=C.serialize(t));var o=new DOMImplementation;o.namespaceAware=!0,o.errorChecking=!1,o.preserveWhiteSpace=!0,i=o.loadXML(t)}else i=C._parse(t,e)}catch(t){return y.Y.printStackTrace(t,"xml.parse"),null}return i},C._parse=function(t,e){var i=null;try{if("string"==typeof t&&t.startsWith("<!DOCTYPE")){var o=t.indexOf("<",9);o>0&&(t=t.substring(o))}if(b.Q.useActiveXObject){if((i=new ActiveXObject(C._MSMXL_PROGIDS[0])).async=!1,i.validateOnParse=!1,"true"==v.I.getConfiguration("/WebSquare/preserveWhiteSpace/@value")&&(i.preserveWhiteSpace=!0),"string"==typeof t){if(""==(t=t.wq_trim()))return w.v.printLog("ERROR : xml.load Error. String is empty."),null;if("<"!=t.charAt(0)){var s="<"+t+"/>";i.loadXML(s)}else i.loadXML(t)}else null==t||9!=t.nodeType&&1!=t.nodeType||i.loadXML(t.xml);if(void 0!==e&&(1==e||"true"==e)){var r=v.I.getNamespaces(i),a="";for(var n in r)""!=n&&(a+="xmlns:"+n+'="'+r[n]+'" ');i.setProperty("SelectionLanguage","XPath"),i.setProperty("SelectionNamespaces",a)}}else if(v.I.supportDOM)try{
var l=new DOMParser;if("string"==typeof t){if(""==(t=t.wq_trim()))return w.v.printLog("ERROR : xml.load Error. String is empty."),null;if("<"!=t.charAt(0)){s="<"+t+"/>";i=l.parseFromString(s,"text/xml")}else i=l.parseFromString(t,"text/xml")}else null==t||9!=t.nodeType&&1!=t.nodeType||(i=l.parseFromString(C.serialize(t),"text/xml"));if(i.async=!1,v.I.browserCheck.moz&&"parsererror"==i.documentElement.nodeName)return w.v.printLog("[Firefox]"+S.B.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null;if((v.I.browserCheck.chrome||v.I.browserCheck.safari)&&i.getElementsByTagName("parsererror").length>0)return w.v.printLog("[Safari/Chrome]"+S.B.getMessage("E_xml_ErrorOccurParsingXML")+"(parsererror)"),null}catch(t){return w.v.printLog("[DOMParser] "+S.B.getMessage("E_xml_ErrorOccurParsingXML")),y.Y.printStackTrace(t,"xml.parse"),null}if(void 0===i||null==i)return w.v.printLog("ERROR : "+S.B.getMessage("E_xml_XMLUnsupportedBrowser")),null;if(b.Q.useActiveXObject&&0!=i.parseError.errorCode){var h=new Object;throw h.ParserException=S.B.getMessage("E_xml_ErrorOccurParsingXML"),h.ParserException+="\nerrorCode      : "+i.parseError.errorCode,h.ParserException+="\nfilepos        : "+i.parseError.filepos,h.ParserException+="\nline           : "+i.parseError.line,h.ParserException+="\nlinepos        : "+i.parseError.linepos,h.ParserException+="\nreason         : "+i.parseError.reason,h.ParserException+="\nsrcText        : "+i.parseError.srcText,h.ParserException+="\nurl            : "+i.parseError.url,h.ParserException+="string"==typeof t?"\n\n: "+t:"\n\n: "+t.xml,h}}catch(h){return y.Y.printStackTrace(h,"xml.parse"),null}return i},C.remove_xmlns_regexp=/xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml['"]|xmlns:w2=['"]http:\/\/www.inswave.com\/websquare['"]/,C.serialize=function(t){if(!t)return"";var e="";try{if(b.Q.useWebSquareXMLParser)try{var i=[];C._serialize(t,i),e=i.join("")}catch(t){y.Y.printStackTrace(t,"xml.serialize")}else if(b.Q.useActiveXObject)e=null!=(e=t.xml)?e.wq_trim():"";else if(v.I.websquareSerializer)try{i=[];C._serialize(t,i),e=i.join("")}catch(t){y.Y.printStackTrace(t,"xml.serialize")}else if(v.I.supportDOM){e=(new XMLSerializer).serializeToString(t)}}catch(t){y.Y.printStackTrace(t,"xml.serialize")}return e},C.noNameSpaceSerialize=function(t){var e=C.serialize(t);return"true"==v.I.getConfiguration("/WebSquare/removeXmlNameSpace/@value")&&(e=e.replace(C.remove_xmlns_regexp,"")),e},C.nodeSerialize=function(t,e){try{switch(void 0===e&&(e={}),void 0===e.standalone&&(e.standalone=null),void 0===e.encoding&&(e.encoding="UTF-8"),void 0===e.omitXmlDeclaration&&(e.omitXmlDeclaration=!1),void 0===e.includeNamespacePrefixes&&(e.includeNamespacePrefixes=null),void 0===e.cdataSectionElements&&(e.cdataSectionElements=[]),t.nodeType){case 1:for(var i="<"+t.tagName,o=0;o<t.attributes.length;++o){var s=t.attributes[o];null!=s&&(s.specified&&(i+=i.nodeSerialize(s,e)))}if(t.hasChildNodes()){i+=">";for(var r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);i+="</"+t.tagName+">"}else i+="></"+t.tagName+">";return i;case 2:return t.name.match(/^xmlns(:|$)/)&&!i.isVisiblyUtilized(t)?"":" "+t.name+'="'+t.value.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"';case 3:if(!i.isCDataSectionElement(t.parentNode))return t.data.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");case 4:return"<![CDATA["+t.data.replace(/]]>/g,"]]]]><![CDATA[>")+"]]>";case 7:return"<?"+t.target+" "+t.data+"?>";case 8:return"\x3c!--"+t.data+"--\x3e";case 9:i="";if(!e.omitXmlDeclaration)i+='<?xml version="1.0" encoding="'+("UTF-16"==e.encoding?"UTF-16":"UTF-8")+'"'+(null!=e.standalone?' standalone="'+(e.standalone?"yes":"no")+'"':"")+"?>\n\n";for(r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e)+"\n";return i;case 10:i="<!DOCTYPE "+t.name+' PUBLIC "'+t.publicId+'" "'+t.systemId+'" [\n';return i+="]>";case 11:for(i="",r=t.firstChild;null!=r;r=r.nextSibling)i+=i.nodeSerialize(r,e);return i
;default:w.v.printLog("Unsupported node: "+t.nodeName+" ("+t.nodeType+")")}}catch(t){y.Y.printStackTrace(t)}},C.isVisiblyUtilized=function(t,e){if(!e.includeNamespacePrefixes)return!0;var i=t.name.substring(6),o=new XPath("..").selectNode(t);for(var s in e.includeNamespacePrefixes){var r=e.includeNamespacePrefixes[s];if(r==i||"#default"==r&&""==i)return!0}return"xmlns"==t.name?null==o.prefix:new XPath("parent::"+i+":* or ..//@"+i+":*").evaluate(t)},C.isCDataSectionElement=function(t,e){for(var i in e.cdataSectionElements)if(e.cdataSectionElements[i].matches(t))return!0;return!1},C.indent=function(t,e){if(void 0===e){try{var i=[];return C._treeWalk2(t,i,0),i.join("")}catch(t){y.Y.printStackTrace(t,"xml.indent")}return null}try{i=[];return C._treeWalk(t,i,0),i.join("")}catch(t){y.Y.printStackTrace(t,"xml.indent")}return""},C._serialize=function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(C._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);C._serialize(a,e)}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(C._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);C._serialize(a,e)}},C._treeWalk=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("<br />");for(var s=0;s<i;s++)e.push("&nbsp;");if(e.push("<font color='blue'><b>&lt;"),e.push(t.nodeName),e.push("</b></font>"),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);r.nodeValue.indexOf('"')>-1?e.push(" <font color='red'>"+r.name+"</font>='<i><font color='#888888'>"+C.encode2(r.nodeValue)+"</font></i>'"):e.push(" <font color='red'>"+r.name+"</font>=\"<i><font color='#888888'>"+C.encode2(r.nodeValue)+'</font></i>"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);C._treeWalk(h,e,i+4)&&(n=!0)}if(n){e.push("<br />");for(s=0;s<i;s++)e.push("&nbsp;")}e.push("<font color='blue'><b>&lt;/"),e.push(t.nodeName),e.push("&gt;</b></font>")}else e.push("<font color='blue'><b>/&gt;</b></font>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(C.encode2(d))}else if(4==t.nodeType)e.push("&lt;![CDATA["+C.encode1(t.nodeValue)+"]]&gt;");else if(7==t.nodeType)e.push("<b>&lt;?"+t.nodeName+" "+C.encode1(t.nodeValue)+"?&gt;</b>");else if(8==t.nodeType);else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);C._treeWalk(h,e,i)}return o},C._treeWalk2=function(t,e,i){var o=!1;if(i=i||0,1==t.nodeType){o=!0,i&&e.push("\n");for(var s=0;s<i;s++)e.push(" ");if(e.push("<"),e.push(t.nodeName),t.attributes.length>0)for(s=0;s<t.attributes.length;s++){var r=t.attributes.item(s);e.push(" "),e.push(r.name),e.push('="'),e.push(C._encode(r.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var a=t.childNodes,n=!1,l=0;l<a.length;l++){var h=a.item(l);C._treeWalk2(h,e,i+4)&&(n=!0)}if(n){e.push("\n");for(s=0;s<i;s++)e.push(" ")}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType){var d=t.nodeValue||"";d=d.trim(),e.push(C._encode(d))}else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(8==t.nodeType)e.push("\x3c!--"+t.nodeValue+"--\x3e");else if(9==t.nodeType)for(a=t.childNodes,l=0;l<a.length;l++){h=a.item(l);C._treeWalk2(h,e,i)}return o},C.encode1=(o=/&/g,s=/</g,r=/>/g,a=/"/g,n=/\r\n/g,l=/\n/g,h=/\r/g,d=/ /g,c=/\t/g,function(t){var e=null;if(null==t)e="";else if("string"==typeof t)e=t;else{if(!C.isDocument(t))return t;e=C.serialize(t)}
return e.replace(o,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(a,"&quot;").replace(d,"&nbsp;").replace(c,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(n,"<br />").replace(l,"<br />").replace(h,"<br />")}),C.encode2=function(){var t=/&/g,e=/</g,i=/>/g,o=/\r\n/g,s=/\n/g,r=/\r/g,a=/ /g,n=/\t/g;return function(l){var h=null;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!C.isDocument(l))return l;h=C.serialize(l)}return h.replace(t,"&amp;amp;").replace(e,"&amp;lt;").replace(i,"&amp;gt;").replace(a,"&nbsp;").replace(n,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(o,"<br />").replace(s,"<br />").replace(r,"<br />")}}(),C._encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g;return function(r){return r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;")}}(),C._decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&apos;;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'")}}(),C.__decode=function(){var t=/&lt[;]{0,1}/g,e=/&gt[;]{0,1}/g,i=/&apos[;]{0,1}/g,o=/&quot[;]{0,1}/g,s=/&amp[;]{0,1}/g,r=/&apos[;]{0,1}/g,a=/&nbsp[;]{0,1}/g;return function(n){return n.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'").replace(a," ")}}(),C.__decode2=function(){var t=/&lt[;]{0,1}/g,e=/&gt[;]{0,1}/g,i=/&apos[;]{0,1}/g,o=/&quot[;]{0,1}/g,s=/&amp[;]{0,1}/g,r=/&apos[;]{0,1}/g,a=/&nbsp[;]{0,1}/g;return function(n){return n.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"'").replace(a,"")}}(),C.encode=function(){var t=/&/g,e=/</g,i=/>/g,o=/'/g,s=/"/g,r=/\r\n/g,a=/\n/g,n=/\r/g;return function(l){var h=null;if(null==l)h="";else if("string"==typeof l)h=l;else{if(!C.isDocument(l))return l;h=C.serialize(l)}return h.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&apos;").replace(s,"&quot;").replace(r,"&#xA;").replace(a,"&#xA;").replace(n,"&#xA;")}}(),C.decode=function(){var t=/&lt;/g,e=/&gt;/g,i=/&apos;/g,o=/&quot;/g,s=/&amp;/g,r=/&#xA;/g;return function(a){return a.replace(t,"<").replace(e,">").replace(i,"'").replace(o,'"').replace(s,"&").replace(r,"\n")}}(),C.isDocument=function(t){try{return"object"==(0,p.A)(t)&&void 0!==t.documentElement&&9==t.nodeType}catch(t){y.Y.printStackTrace(t,"xml.isDocument")}return!1},C.isDocumentString=function(t){var e;try{if(b.Q.useActiveXObject)(e=new ActiveXObject(C._MSMXL_PROGIDS[0])).async=!1,e.validateOnParse=!1,e.loadXML(t);else if("<"==t.wq_trim().charAt(0))(e=(new DOMParser).parseFromString(t,"text/xml")).async=!1;if(void 0===e||null==e)return!1;if(v.I.browserCheck.moz&&"parsererror"==e.documentElement.nodeName)return!1;if(b.Q.useActiveXObject&&0!=e.parseError.errorCode)return!1}catch(t){return!1}return!0},C.getElementsByTagName=function(t,e,i){if(!(v.I.browserCheck.ieAllVersion||b.Q.browserCheck.chrome||b.Q.browserCheck.safari||b.Q.browserCheck.opera||WebSquare.util.isMobile()))return v.I.browserCheck.moz?void 0===i?t.getElementsByTagName(e):t.getElementsByTagNameNS(i,e):t.getElementsByTagName(e);try{return void 0===i?e.indexOf(":")>=0?t.selectNodes(".//*['"+e+"'=name()]"):t.selectNodes(".//*['"+e+"'=local-name()]"):t.selectNodes(".//*['"+e+"'=local-name()]['"+i+"'=namespace-uri()]")}catch(s){if(void 0===i)return t.getElementsByTagName(e);var o=e;return i==v.I._XML_NAMESPACE.SCHEMA?o=e:i==v.I._XML_NAMESPACE.XFORMS?o="xf:"+e:i==v.I._XML_NAMESPACE.XHTML||i==v.I._XML_NAMESPACE.XML||i==v.I._XML_NAMESPACE.XSL?o=e:i==v.I._XML_NAMESPACE.EVENTS?o="ev:"+e:i==v.I._XML_NAMESPACE.W2&&(o="w2:"+e),t.getElementsByTagName(o)}},C.matchNode=function(t,e,i){if(void 0===i)return t.nodeName==e;var o=t.nodeName.split(":"),s=2==o.length?o[1]:o[0];return i==t.namespaceURI&&s==e},C.nodeInfoObj=(u={},function(t){var e=t.nodeName;if(!u[e]){var i=t.namespaceURI;if(void 0!==i&&""!==i){var o=e.split(":");u[e]={nodeName:o[o.length-1],uri:i}}else u[e]={nodeName:e}}return u[e]}),C.getLocalName=function(t){
var e=t.nodeName.split(":");return 2==e.length?e[1]:e[0]},C.findNode=function(t,e){try{return t.selectSingleNode(e)}catch(t){y.Y.printStackTrace(t)}return null},C.findNodes=function(t,e){try{return t.selectNodes(e)}catch(t){y.Y.printStackTrace(t)}return null},C.createElement=function(t,e){var i,o;if(v.I.browserCheck.opera)i=t.createElementNS("",e);else if(v.I.browserCheck.ieAllVersion&&!b.Q.useActiveXObject){var s=e.indexOf(":");if(-1==s)o=C.parse("<"+e+"/>");else{var r=e.substring(0,s),a=v.I.getNamespaces(t);o=a[r]?C.parse("<"+e+" xmlns:"+r+'="'+a[r]+'"/>'):C.parse("<"+e+"/>")}null!=o&&(i=t.importNode(o.documentElement.cloneNode(!1),!1))}else i=t.createElement(e);return i},C.createNode=function(t,e,i){try{if(i&&v.I.browserCheck.ieAllVersion&&b.Q.useActiveXObject){var o=v.I.getNamespaces(t),s="";for(var r in o)""!=r&&(s+="xmlns:"+r+'="'+o[r]+'" ');9==t.nodeType?(t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",s)):1==t.nodeType&&(t.ownerDocument.setProperty("SelectionLanguage","XPath"),t.ownerDocument.setProperty("SelectionNamespaces",s))}var a=t.selectSingleNode(e);if(null==a){var n=e.lastIndexOf("/");if(n>0){var l=e.substring(0,n),h=e.substring(n+1);if(null==h.match(/[@'"()=]/i)){var d=C.createNode(t,l);null!=d&&(9==t.nodeType?a=C.createElement(t,h):1==t.nodeType&&(a=C.createElement(t.ownerDocument,h)),a=C.appendChild(d,a))}else{var c=h.split(/[[=\]]/);if((4==c.length||3==c.length)&&null!=c[1].match(/^@/)){var u=C.createNode(t,l);null!=u&&(9==t.nodeType?a=C.createElement(t,c[0]):1==t.nodeType&&(a=C.createElement(t.ownerDocument,c[0])),a.setAttribute(c[1].wq_trim().slice(1),c[2].wq_replaceAll("'","")),a=C.appendChild(u,a))}}}else 1==t.nodeType&&"/"!=e.charAt(0)&&(a=C.createElement(t.ownerDocument,e),a=C.appendChild(t,a))}return a}catch(t){y.Y.printStackTrace(t)}return null},C.appendChild=function(t,e){var i;try{return t.ownerDocument==e.ownerDocument?i=t.appendChild(e):"function"==typeof t.ownerDocument.importNode?(i=t.ownerDocument.importNode(e,!0),i=t.appendChild(i)):i=t.appendChild(e)}catch(t){y.Y.printStackTrace(t)}},C.getValue=function(t,e,i){var o="";try{var s=t.selectSingleNode(e);if(null!=s)if(void 0!==i)o=s.getAttribute(i);else if(2==s.nodeType||3==s.nodeType||4==s.nodeType)o=null!=s.value?s.value:s.nodeValue;else for(var r=s.childNodes,a=0;a<r.length;a++){var n=r[a];(3==n.nodeType||4==n.nodeType)&&(o+=n.nodeValue)}null==o&&(o="")}catch(t){y.Y.printStackTrace(t)}return o},C.getAttribute=function(t,e,i){var o="";try{if("string"==typeof t&&(t=C.parse(t)),void 0===i)o=1==t.nodeType?t.getAttribute(e):t.documentElement.getAttribute(e);else{var s=null;null!=(s=1==t.nodeType?t.selectSingleNode(e):t.selectSingleNode("/*/"+e))&&(o=s.getAttribute(i)),null==o&&(o="")}null==o&&(o="")}catch(t){y.Y.printStackTrace(t)}return o},C.getString=function(t,e){return C.getAttribute(t,e,"value")},C.getChildren=function(t,e){var i=[];try{var o=t.selectSingleNode(e);if(null!=o)for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){var n={};n["@tagName"]=a.nodeName;var l=a.attributes;if(null!=l)for(var h=0;h<l.length;h++)n[l[h].nodeName]=l[h].nodeValue;i.push(n)}}}catch(t){y.Y.printStackTrace(t)}return i},C.setValue=function(t,e,i,o){try{var s=C.createNode(t,e);if(null!=s)if(void 0!==o)s.setAttribute(i,o);else{for(var r=s.childNodes,a=0;a<r.length;a++){var n=r.item(a);(3==n.nodeType||4==n.nodeType)&&s.removeChild(n)}var l=null;l=1==t.nodeType?t.ownerDocument.createTextNode(i):t.createTextNode(i),C.appendChild(s,l)}}catch(t){y.Y.printStackTrace(t)}},C.setAttribute=function(t,e,i,o){try{if("string"==typeof t&&(t=C.parse(t)),void 0===o)1==t.nodeType?t.setAttribute(e,i):t.documentElement.setAttribute(e,i);else{1==t.nodeType||(e="/*/"+e);var s=C.createNode(t,e);null!=s&&s.setAttribute(i,o)}}catch(t){y.Y.printStackTrace(t)}},C.setString=function(t,e,i){C.setAttribute(t,e,"value",i)},C.transform=function(){var t=(0,g.A)(f().mark((function t(e,i,o){var s,r,a,n,l,h,d,c,u,g,m,S,_
;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,s="false",(w.v.globalDebug1||w.v.getGlobalDebug())&&(s="true"),r=null,"string"!=typeof e){t.next=9;break}r=C._parse(e),t.next=18;break;case 9:if(!C.isDocument(e)){t.next=13;break}r=b.Q.useWebSquareXMLParser?C._parse(C.serialize(e)):e,t.next=18;break;case 13:if("object"!=(0,p.A)(e)||void 0===e.type||"vector"!=e.type&&"hashtable"!=e.type){t.next=17;break}r=b.Q.useWebSquareXMLParser?C._parse(C.serialize(e.toDocument())):e.toDocument(),t.next=18;break;case 17:return t.abrupt("return","");case 18:return t.next=20,C.load(i,!0,void 0,!0);case 20:if(a=t.sent,n="",!v.I.supportActiveX){t.next=26;break}n=r.transformNode(a),t.next=49;break;case 26:if("undefined"==typeof XSLTProcessor){t.next=34;break}(l=new XSLTProcessor).importStylesheet(a),h=l.transformToDocument(r),(n=C.serialize(h)).indexOf("<transformiix:result")>-1&&(n=n.substring(n.indexOf(">")+1,n.lastIndexOf("<"))),t.next=49;break;case 34:d=null;try{d=new ActiveXObject("Msxml2.XSLTemplate")}catch(t){y.Y.printStackTrace(t)}if(!d){t.next=47;break}c=d,(u=new ActiveXObject("Msxml2.FreeThreadedDOMDocument")).loadXML(C.serialize(a)),c.stylesheet=u,(g=c.createProcessor()).input=r,g.transform(),n=g.output,t.next=49;break;case 47:return w.v.printLog("ERROR : transform is not supported."),t.abrupt("return","");case 49:if(void 0!==o&&null!=o&&""!=o?(m=document.getElementById(o),v.I._safeInnerHTML(m,n+"<XSLINFO value='"+i+"'/>"),"true"==s&&(_=/>[\s]*</g,(S={}).html=n.replace(_,">\n<"),S.xml=C.indent(r),S.xsl=C.indent(a),S.target=o,w.v.showDebugMsg(S,"xml","Transform execution result"))):"true"==s&&(_=/>[\s]*</g,(S={}).html=n.replace(_,">\n<"),S.xml=C.indent(r),S.xsl=C.indent(a),w.v.showDebugMsg(S,"xml","Transform execution result")),void 0===n||"undefined"==n){t.next=54;break}return t.abrupt("return",n);case 54:return t.abrupt("return","");case 55:t.next=60;break;case 57:t.prev=57,t.t0=t.catch(1),y.Y.printStackTrace(t.t0);case 60:case"end":return t.stop()}}),t,null,[[1,57]])})));return function(e,i,o){return t.apply(this,arguments)}}(),C.hasChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return!0;return!1},C.getChildrenByTagName=function(t,e,i){var o=new Array;if(void 0===i)for(var s=t.firstChild;null!=s;s=s.nextSibling){if(1==s.nodeType)(a=2==(r=s.nodeName.split(":")).length?r[1]:r[0])==e&&o.push(s)}else for(s=t.firstChild;null!=s;s=s.nextSibling)if(1==s.nodeType){var r,a=2==(r=s.nodeName.split(":")).length?r[1]:r[0];i==s.namespaceURI&&a==e&&o.push(s)}return o},C.getFirstChildElement=function(t){for(var e=t.firstChild;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},C.getFirstChildElements=function(t){for(var e=new Array,i=t.firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&e.push(i);return e},C.getNextSiblingElement=function(t){for(var e=t.nextSibling;null!=e;e=e.nextSibling)if(1==e.nodeType)return e;return null},C.getTextNodeValue=function(t){for(var e=null,i="",o=t.firstChild;null!=o;o=o.nextSibling)3==o.nodeType&&(i+=o.nodeValue);return""!=i&&(e=i),e},C.setTextNodeValue=function(t,e){if(t&&1==t.nodeType)if(null==t.firstChild){var i=t.ownerDocument.createTextNode(e);C.appendChild(t,i)}else 3==t.firstChild.nodeType&&(t.firstChild.nodeValue=e)},C.getCDataNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)4==i.nodeType&&(e=i.nodeValue);return e},C.getCData=function(t,e){try{var i="",o=t.selectSingleNode("/*/"+e);if(null!=o)for(var s=o.getAttribute("encode"),r=0;r<o.childNodes.length;r++){var a=o.childNodes[r];if(4==a.nodeType){i=a.nodeValue,"base64"==s&&(i=_.Q.BASE64Decoder(i));break}}return null==i&&(i=""),i}catch(t){y.Y.printStackTrace(t)}},C.setCData=function(t,e,i){try{var o=null;i.indexOf("]]>")>=0?(o="base64",i=_.Q.BASE64Encoder(i)):o="text";var s=t.selectSingleNode("/*/"+e);if(null==s){var r=t.createElement(e);r.setAttribute("type","CDATA"),r.setAttribute("encode",o),r.appendChild(t.createCDATASection(i)),
C.appendChild(t.documentElement,r)}else{for(var a=s.childNodes.length-1;a>=0;a--)4==s.childNodes[a].nodeType&&s.removeChild(s.childNodes[a]);s.setAttribute("type","CDATA"),s.setAttribute("encode",o),s.appendChild(t.createCDATASection(i))}}catch(t){y.Y.printStackTrace(t)}},C.nodeWellFormed=function(t){try{for(var e="",i="",o=!1,s=!1,r=0,a=0;a<t.length;a++){var n=t.charAt(a);if("="==n)'"'==t.charAt(a+1)?e+=n:(e=e+n+'"',s=!0);else if('"'==n)e+=n,o=0==o;else if(" "==n){if(" "==t.charAt(a-1))continue;r++,1==o?i=i+e+n:s?(i=i+e+'"'+n,s=!1):(1!=r&&'"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),i=i+e+n),e=""}else">"==n?(1==s?(e=e+'"'+n,s=!1,o=!1):('"'!=t.charAt(a-1)&&-1==e.indexOf("=")&&(e+='=""'),e+=n),r=0):e+=n}return e.length>0&&(i+=e),i}catch(t){y.Y.printStackTrace(t)}}},434:function(t,e,i){"use strict";i.r(e),i.d(e,{accordion:function(){return d},panels:function(){return c}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2256),h=i(2406),d=function(t,e,i){h.q.call(this,t,e,i)};o.q.extend(d.prototype,h.q.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.accordion",pluginName:"accordion",userEvents:["onclick","onpanelload","onpanelunload"],tabIndex:"",useConfig:!0,cols:1,selectedPanel:"",collapsible:!1,collapseAll:!1,unCollapseAll:!1,titleDivTag:!1,enterKeyPanelToggle:!0,panelMoveSpeed:500,senseReader:!1,independentPanel:!1,accessibility:!1},d.prototype.initialize=function(t){this.panelIdCount=0,this.colArr=[],this.options.accessibility&&(this.options.senseReader=!0),this.panelInfoArr=this.makePanelArr(t,this.options),this.panelTitleArr=this.makePanelTitleArr(t,this.options,this.panelInfoArr),this.panelContentArr=this.makePanelContentArr(t,this.options,this.panelInfoArr),this.panelObjArr=this.makePanelObjArr(),this.panelArr=[],this.panelTitle=[],this.panelContent=[],this.options.panelMoveSpeed=parseInt(this.options.panelMoveSpeed,10),this.options.panelMoveSpeed<1?this.options.panelMoveSpeed=1:this.options.panelMoveSpeed>1e4&&(this.options.panelMoveSpeed=1e4)},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";t.push("<div id='"+this.id+"' "+e+" class='w2accordion "+this.options.className+"' "+i+">");for(var o=0;o<this.options.cols;o++)t.push("<div id='"+this.id+"_col_"+o+"' class=''></div>");return t.push("</div>"),t.join("")},d.prototype.setAction=function(){for(var t=0;t<this.render.childNodes.length;t++)this.colArr.push(this.render.childNodes[t]);this.initAllpanel()},d.prototype.makePanelArr=function(t,e){try{if(null==t)return[];for(var i=[],o=0,s=t.getChildNodes(),a=0;a<s.length;a++){var n=s[a];if(n.nodeType==WebSquare.Elem.type.element&&"w2:panels"==n.getTagName()){o++;var l,h=n.getAttribute("id"),d=this.options&&null!=this.options._scope_obj_org_id?this.options._scope_obj_org_id:null;null==h?(l=this.id+"_panel_"+this.panelIdCount,null!=d&&(d=d+"_panel_"+this.panelIdCount),this.panelIdCount++):(l=this.id+"_panel_"+h,null!=d&&(d=d+"_panel_"+h));var c=WebSquare.WebSquareparser.parseAttribute(n);void 0===c.title&&(c.title=""),void 0!==c.disabledPanels&&"true"===c.disabledPanels||(c.disabledPanels=!1),"true"===c.disabledPanels&&(c.disabledPanels=!0),!0===this.options.unCollapseAll?!0===c.disabledPanels?c.isOpen=!1:c.isOpen=!0:""!=this.options.selectedPanel&&-1!=this.options.selectedPanel||1!=o||!0===c.disabledPanels?this.options.selectedPanel==h&&!0!==c.disabledPanels?c.isOpen=!0:c.isOpen=!1:c.isOpen=!0;var u={id:l,org_id:d,col:0,isOpen:c.isOpen,userID:h,element:n,senseReader:this.options.senseReader,disabledPanels:c.disabledPanels};i.push(u)}}return i}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.makePanelTitleArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelTitle",s.I._XML_NAMESPACE.W2);h=h[0]
;var d=WebSquare.WebSquareparser.parseAttribute(h);void 0===d.label&&(d.label="");var c=d.id,u={id:i[a].id+"_panelTitle_"+c,label:d.label,style:d.style,className:d.className,element:h};o.push(u),a++}return o}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.makePanelContentArr=function(t,e,i){try{if(null==t)return[];for(var o=[],a=0,n=t.getChildNodes(),l=0;l<n.length;l++)if(n[l].nodeType==WebSquare.Elem.type.element&&"w2:panels"==n[l].getTagName()){var h=WebSquare.Elem.api.getElementsByTagName(n[l],"panelContent",s.I._XML_NAMESPACE.W2);if(h){h=h[0];var d=WebSquare.WebSquareparser.parseAttribute(h),c=d.id,u={id:i[a].id+"_panelContent_"+c,org_id:null==i[a].org_id?null:i[a].org_id+"_panelContent_"+c,title:d.title,style:d.style,className:d.className,xml:h};o.push(u),a++}}return o}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.initPanel=function(t){return this.scope_obj&&(t._scope_obj_uuid=this.scope_obj.uuid,t._scope_obj_org_id=t.org_id,t._scope_obj_runtime_id=t.id),new WebSquare.uiplugin.panels(t.id,t,t.element)},d.prototype.initPanelTitle=function(t){return t.className||(t.className="w2panel_title_text"),this.options.senseReader?t.tagname="strong":this.options.titleDivTag?t.tagname="div":t.tagname="span",new WebSquare.uiplugin.group(t.id,t,t.element)},d.prototype.makePanelObjArr=function(){try{for(var t=[],e=0;e<this.panelInfoArr.length;e++)t.push({panel:this.initPanel(this.panelInfoArr[e]).uuid,content:this.initPanelContent(this.panelContentArr[e]).uuid});return t}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.initPanelContent=function(t){var e=t.org_id||t.id,i="w2panels_content_closed";return t.className&&(i+=" "+t.className),WebSquare.controlFactory.createByJSON(e,{className:i},t.xml._element,this.scope_obj,this.parentFrame)},d.prototype.initAllpanel=function(){try{for(var t,e,i,o=0;o<this.panelInfoArr.length;o++){var s=this.panelObjArr[o];t=WebSquare.idCache[s.panel],e=this.initPanelTitle(this.panelTitleArr[o]),(i=WebSquare.idCache[s.content]).activate(),this.addControl(t),t.appendTo(this.colArr[0]),t.activate(),t.addControl(e),t.addControl(i),e.appendTo(t.render.childNodes[0]),i.appendTo(t.render),i.addClass("w2panels_content_closed"),e.activate(),i.activate(),e.render.innerHTML=e.options.label,e.removeClass("w2group"),t.panelTitle=e,t.panelContent=i,this.panelArr.push(t),this.panelTitle.push(e),this.panelContent.push(i),this.options.collapseAll?t.options.isOpen&&this._closePanel(this.getOpenPanelInfo().id):t.options.isOpen&&(i.addClass("w2panels_content_open"),e.render.parentNode.setAttribute("aria-expanded","true"))}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},d.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,className:n.options.className});break}}t.push(o)}return t},d.prototype.getOpenPanelInfo=function(t){try{var e;e=null==t||null==t?0:t;var i=this.getOpenPanelListInfo();return e<i.length?i[e]:[]}catch(t){r.Y.printStackTrace(t)}},d.prototype.getOpenPanelListInfo=function(){try{for(var t=[],e=0;e<this.childControlList.length;e++){1==this.childControlList[e].options.isOpen&&t.push(this.panelInfoArr[e])}return t}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(r.id==this.id+"_panel_"+t)return r}},d.prototype.setPanelTitle=function(t,e){try{var i=this.getPanelById(this.id+"_panel_"+t);i?(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e):l.v.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.Y.printStackTrace(t,null,this)}},
d.prototype.setDisabledPanel=function(t,e){try{var i=this.getPanelById(this.id+"_panel_"+t);i?!0===(e=void 0===e||e)?(!0===i.options.isOpen&&(this._closePanel(i.id),i.options.isOpen=!1),i.options.disabledPanels=!0):i.options.disabledPanels=!1:l.v.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.openPanel=function(t){try{this._openPanel(t,!0)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._openPanel=function(t,e){try{var i=this.getPanelById(t)||this.getPanelById(this.id+"_panel_"+t),o=i.panelContent,s=i.panelTitle,n=!0;if(e&&!this.options.collapsible&&(n=!1),n)for(var l=0;l<this.childControlList.length;l++)this.panelArr[l].options.id!=this.id+"_panel_"+t&&1==this.childControlList[l].options.isOpen&&!0!==this.options.independentPanel&&(this._closePanel(this.childControlList[l].options.id),this.childControlList[l].options.isOpen=!1);i.options.isOpen||!0===i.options.disabledPanels||this.slide(o.render,this.options.panelMoveSpeed,"slideDown",(function(){o.addClass("w2panels_content_open"),i.addClass(i.dom.Img,"w2panels_title_image_open"),i.options.isOpen=!0,s.render.parentNode.setAttribute("aria-expanded","true"),a.f.fireEvent(i.parentControl,"onpanelload",i.id,i.options.userID)}))}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.closePanel=function(t){try{this._closePanel(t)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._closePanel=function(t){try{var e=this.getPanelById(t)||this.getPanelById(this.id+"_panel_"+t);if(e){var i=e.panelContent,o=e.panelTitle;e.options.isOpen&&!0!==e.options.disabledPanels&&this.slide(i.render,this.options.panelMoveSpeed,"slideUp",(function(){i.removeClass("w2panels_content_open"),e.removeClass(e.dom.Img,"w2panels_title_image_open"),e.options.isOpen=!1,o.render.parentNode.setAttribute("aria-expanded","false"),a.f.fireEvent(e.parentControl,"onpanelunload",e.id,e.options.userID)}))}else l.v.printLog("error : cannot find panel with id["+t+"] at ["+this.id+"]")}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setColor=function(t){try{var e=this.getElementById(this.id);if(t.borderColor&&(e.style.borderColor=t.borderColor),t.panelColor)for(var i=0;i<this.panelArr.length;i++)this.getElementById(this.panelArr[i].id+"_title").style.background=t.panelColor}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.finalize=function(){try{for(var t=0;t<this.panelObjArr.length;t++){var e=this.panelObjArr[t];for(var i in e){var o=WebSquare.idCache[e[i]];o&&"function"==typeof o.remove&&o.remove()}}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.slide=function(t,e,i,o){try{var s,a=i;"slideDown"==a&&(t.style.display="block");var l=t.scrollHeight;s="slideDown"==a?0:l,t.style.height=s+"px",t.style.overflow="hidden";var h=null;n.Z.requestAnimationFrame((function i(r){h||(h=r);var d=r-h,c=Math.min(d/e,1);s="slideDown"==a?Math.floor(l*c):Math.floor(l*(1-c)),t.style.height=s+"px",c<1?n.Z.requestAnimationFrame(i):("slideUp"==a&&(t.style.display="none"),o&&o())}))}catch(t){r.Y.printStackTrace(t,null,this)}};var c=function(t,e,i){h.q.call(this,t,e,i)};o.q.extend(c.prototype,h.q.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.panels",pluginName:"panels",title:"",src:"",scope:!1,isOpen:!1,disabledPanels:!1,userEvents:["onpanelsopen","onpanelsclose","onpanelsmouseover","onpanelsmouseout"]},c.prototype.initialize=function(t){},c.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panels"+this.options.className+"'>"),this.options.senseReader?(t.push("<a id='"+this.id+"_title' class='w2panels_title' role='button' aria-expanded='false' href='javascript:void(null)'>"),t.push("<span id='"+this.id+"_title_image' class='w2panels_title_image'></span>"),t.push("</a>")):(t.push("<div id='"+this.id+"_title' class='w2panels_title' role='button' aria-expanded='false'>"),
t.push("<div id='"+this.id+"_title_image' class='w2panels_title_image'></div>"),t.push("</div>")),t.push("</div>"),t.join("")},c.prototype.setAction=function(){this.dom.title=this.getElementById(this.id+"_title"),this.dom.Img=this.getElementById(this.id+"_title_image"),this.event.addListener(this.dom.title,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.dom.title,"onmouseover",this.event.bindAsEventListener(this,this.handleTitleOver)),this.event.addListener(this.dom.title,"onmouseout",this.event.bindAsEventListener(this,this.handleTitleOut)),this.parentControl.options.accessibility?this.event.addListener(this.dom.title,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)):this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.isOpen&&this.addClass(this.dom.Img,"w2panels_title_image_open")},c.prototype.handleTitleClick=function(t){try{if(!this.parentControl.options.collapsible)for(var e=0;e<this.parentControl.childControlList.length;e++)this.parentControl.panelArr[e].options.id!=this.id&&1==this.parentControl.childControlList[e].options.isOpen?!0!==this.parentControl.options.independentPanel&&(this.parentControl._closePanel(this.parentControl.childControlList[e].options.id),this.parentControl.childControlList[e].options.isOpen=!1,a.f.fireEvent(this,"onpanelsclose",t)):this.parentControl.panelArr[e].options.id==this.id&&this.parentControl.options.accessibility&&this.parentControl.childControlList[e].options.isOpen&&(this.parentControl._closePanel(this.parentControl.childControlList[e].options.id),a.f.fireEvent(this,"onpanelsclose",t));!0!==this.options.disabledPanels&&(this.options.isOpen?this.parentControl.options.collapsible&&(this.parentControl._closePanel(this.id),this.options.isOpen=!1,a.f.fireEvent(this,"onpanelsclose",t)):(this.parentControl._openPanel(this.id),this.options.isOpen=!0,a.f.fireEvent(this,"onpanelsopen",t)),a.f.fireEvent(this.parentControl,"onclick",this,this.options.isOpen))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleTitleOver=function(t){try{this.addClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.f.fireEvent(this,"onpanelsmouseover",t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleTitleOut=function(t){try{this.removeClass(this.getElementById(this.id+"_title"),"w2panels_title_over"),a.f.fireEvent(this,"onpanelsmouseout",t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{if(13==(t.charCode?t.charCode:t.keyCode)&&this.parentControl.options.enterKeyPanelToggle)return a.f.preventDefault(t),void this.handleTitleClick(t)}catch(t){r.Y.printStackTrace(t,null,this)}}},7662:function(t,e,i){"use strict";i.r(e),i.d(e,{anchor:function(){return l}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2406),l=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(l.prototype,n.q.prototype),l.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.anchor",pluginName:"anchor",userEvents:["onclick","ontooltipshow","ontooltiphide"],outerDiv:!0,clickEventElement:"anchor",label:"",href:"",name:"",target:"",title:"",tabIndex:"",useLocale:!1,localeRef:"",disabled:!1,escape:!0,animationType:"",animationColor:"",enableReadOnly:!1},l.prototype.htmlStr1=["<div id='",,"' ",," class='w2anchor ",,"'><a href='",,"' ",,">",,"</a></div>"],l.prototype.htmlStr2=["<a id='",,"' ",," class='w2anchor2 ",,"' href='",,"' ",,">",,"</a>"],l.prototype.initialize=function(t){try{if(t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value)}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=this.options.outerDiv?this.htmlStr1:this.htmlStr2;t[1]=this.id,t[3]=this.options.style?'style="'+this.options.style+'"':"",t[5]=this.options.className;var e=this.options.href?this.options.href:"javascript:void(null);";e.indexOf("javascript:")>=0&&(e=e.replace(/'/g,'"')),t[7]=e,
t[9]=(this.options.name?' name="'+this.options.name+'"':"")+(this.options.target?' target="'+this.options.target+'"':"")+(this.options.title?' title="'+this.options.title+'"':"")+(""==this.options.tabIndex?"":' tabIndex="'+this.options.tabIndex+'"')+(this.options.role?' role="'+this.options.role+'"':"");var i=this.options.label;if(this.options.useLocale&&this.options.localeRef){var o=this.getLocaleValue(this.options.localeRef);o&&(i=o)}return i=this.options.escape?WebSquare.xml._encode(i):i,"bubble"===this.options.animationType?t[11]="<em class='btn_bubble_content'>"+i+"</em><i class='btn_bubble_bubbles'></i>":t[11]=i,t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.dom.anchor="A"==this.render.tagName?this.render:this.render.firstChild,this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.outerDiv&&"outerDiv"===this.options.clickEventElement?this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)):this.event.addListener(this.dom.anchor,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.anchor,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),"bubble"===this.options.animationType&&this.event.addListener(this.render,"onpointerdown",this.event.bindAsEventListener(this,this.handlePointerDownEvent))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyleValue("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyleValue("padding-top"))||0,r=parseInt(this.getStyleValue("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-r)/2):"bottom"==t&&(a=Math.floor(i-r)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setValueNM=function(t){try{if(a.Z.isNull(t))return;t=t.toString(),this.options.label=t,this.options.escape&&(t=WebSquare.xml._encode(t)),this.dom.anchor&&(this.dom.anchor.innerHTML=t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.label}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){try{var e=r.f.getTarget(t);if(e&&this.options.outerDiv&&e===this.render)return void this.dom.anchor.click();""==this.options.href.wq_trim()&&r.f.stopEvent(t),r.f.fireEvent(this,"onclick")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.f.preventDefault(t),e=a.Z.getPreTabbableComp(this.id))return void e.focus(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.f.preventDefault(t),e=a.Z.getNextTabbableComp(this.id))return void e.focus(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handlePointerDownEvent=function(t){try{this.options.animationColor;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("btn_bubble")){var i=e.getElement(),o=i.getElementsByClassName("btn_bubble_bubbles")[0];if(o){var r=this.options.animationColor||WebSquare.util.getStyleProperty(i,"color"),n=document.createElement("i");n.className="btn_bubble_bubble",o.appendChild(n)
;var l=a.Z._animationEnd();n.addEventListener(l,(function(){this.remove()}));var h=t.pageX,d=t.pageY,c=i.getBoundingClientRect(),u=h-c.left,p=d-c.top;o.style.webkitTransform="translate3d("+u+"px,"+p+"px,0)",o.style.transform="translate3d("+u+"px,"+p+"px,0)",n.style.backgroundColor=r}}e=null}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setHref=function(t){try{this.options.href=t,this.dom.anchor.href=t}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getHref=function(){try{return this.dom.anchor.href}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setDisabled=function(t){try{if("boolean"!=typeof t)return!1;!0===o.q.dataPrefix?(this.dom.anchor.disabled=t,this.options.disabled=t):(this.options.outerDiv&&(this.dom.anchor.disabled=t),n.q.prototype.setDisabled.call(this,t)),t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled")}catch(t){s.Y.printStackTrace(t)}return t},l.prototype.setReadOnly=function(t){try{if(!0===o.q.dataPrefix){if("boolean"!=typeof t)return!1;t=a.Z.getBoolean(t),this.options.readOnly=t,t?this.addClass(this.render,"w2anchor_readonly"):this.removeClass(this.render,"w2anchor_readonly")}else n.q.prototype.setReadOnly.call(this,t)}catch(t){s.Y.printStackTrace(t,null,this)}return t},l.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.ref=this.options.ref,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t):null}catch(t){s.Y.printStackTrace(t)}},l.prototype.focus=function(){try{this.dom.anchor.focus()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){s.Y.printStackTrace(t)}}},3312:function(t,e,i){"use strict";i.r(e),i.d(e,{autoComplete:function(){return u}});var o=i(4980),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(2406),d=i(7455),c=i(4860),u=function(t,e,i){h.q.call(this,t,e,i)};s.q.extend(u.prototype,h.q.prototype),s.q.extend(u.prototype,d.t.prototype),s.q.extend(u.prototype,c.G.prototype),u.prototype.defaultOptions=(0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)((0,o.A)({pluginType:"uiplugin.autoComplete",pluginName:"autoComplete",renderType:"component",userEvents:["onchange","oneditend","onviewchange","oneditkeyup","oneditenter","onselected","onbeforeselect"],useConfig:!0,serializable:!0,useOtherComponentId:"",value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",displayModeSync:!1,delimiter:"\t",defaultStyle:"",activeStyle:"",textAlign:"",defaultClass:"w2inputSelectDefault",activeClass:"w2inputSelectActive",useLocale:!1,submenuSize:"fixed",direction:"auto",dynamicDraw:!0,tooltipDisplay:!1,tooltipClass:"",itemTooltipDisplay:!1,itemTooltipFormatter:"",tooltipTime:1,editable:!0,search:"start",editmode:!1,dataurl:"",interactionMode:!1,interactionKey:"default",interactionEnterKey:!1,submission:"",submissionFunc:"",keyInputRef:"",readOnly:!1,mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,interactionMinByteLength:0,title:"",noResult:"previous",noResultFirstItem:!1,ignoreBlankOnNoResult:!1,escape:!0,displayFormatter:"",useMousewheel:!0,editModeEvent:"onclick",showItemTableByFocus:!1,allowEmptySubmission:"false",searchTarget:"label",caseSensitive:!0,editType:"select",useKeywordHighlight:!1,returnValueType:"null",emptyItem:!1,emptyValue:"",emptyIndex:0,closeonmouseleave:!1,handleOtherClick:!0,animation:"",selectedData:!0,preventWheelEvent:!1,customLabelFormatter:"",disableEdit:!1,type:"text",wheelRows:0,visibleColumn:"",
visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",autocomplete:"off",placeholder:"",autoFocus:!1,noUseAutoFind:!1,findItemFirstKey:!1,nextTabByEnter:!1,customToggleKey:"",selectByTabKey:!1,preventKeyList:"",useFindItemFirstKeyChar:!0,setNodeSetNoOnchange:!1,hideListOnFocus:!1,itemEnterHandleMode:"arrow"},"useLocale",!1),"placeholderLocaleRef",""),"accessibility",!1),"appearance",""),"removeLabelFor",!1),"labelForText",""),u.prototype.initialize=function(t){try{if(this._setSetting=!1,this.itemTable=null,this.gridOptions={},this.gridViewOptions={},this.isOpen=!1,this.statusSubLayer=!1,this._itemTableRedraw=!0,this.supportAutocomplete=!1,!0===this.options.accessibility&&(this.options.renderType="input"),this.options.emptyItem?(this.options.noResult="clear",this.noResult="clear"):this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.options.tooltip&&this.options.tooltipDisplay&&(this.options.tooltip=""),this.editable=this.options.editable,this.search=this.options.search,this.orgSearchArr=[],this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.selectedGridViewRowObj={},this.viewArr=[],this.itemArr=[],this.dummyItemArr=[],this.dummyGridItemArr=[],this.mytime=null,this.hideTime=null,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.editmode=this.options.editmode,this.findkeymode=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.skipMatch=!1,this.defaultAllOptionLabel=WebSquare.language.getMessage("AutoComplete_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("AutoComplete_choose"),this._initDisplayMode(),this.dataurl=this.options.dataurl,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,!this.options.interactionMode||this.options.submission||this.options.submissionFunc||(this.options.interactionMode=!1),this._showItemTableByFocus=!1,"onfocus"===this.options.editModeEvent&&this.options.showItemTableByFocus&&(this._showItemTableByFocus=!0),this.interactionMode=this.options.interactionMode,t){var e=WebSquare.Elem.api.getElementsByTagName(t,"choices",r.I._XML_NAMESPACE.W2)[0];if(e){var i=WebSquare.Elem.api.getElementsByTagName(e,"gridItemset",r.I._XML_NAMESPACE.W2)[0];null==i&&(i=WebSquare.Elem.api.getElementsByTagName(e,"gridViewItemset",r.I._XML_NAMESPACE.W2)[0]),i&&"w2:gridItemset"==i.getTagName()?this.itemTableMode="grid":i&&"w2:gridViewItemset"==i.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView");if("grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.autoFinder="w2:autoFinder"==t.getTagName(),this.autoFinder){if(this.display_path=this.options.display_path,void 0!==this.display_path){this.display_path=this.display_path.replace(/^\s\s*/,"").replace(/\s\s*$/,"");var o=this.display_path.split(" "),s=o[0],n=o[1],h=o[2];this.setItemSet(s,n,h),this.buildItemArr()}}else"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemsetObj=WebSquare.WebSquareparser.parseItemset(t))}if(this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.displayFormatter=null,this.onchangeFlag=!1,this.otherClicked=!1,this.options.autocomplete&&WebSquare.uiplugin.autoComplete.autocomplete&&(this.supportAutocomplete=!0),this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.options.customSearchStrArrFunction&&(this.customSearchStrArrFunction=l.Z.getGlobalFunction(this.options.customSearchStrArrFunction,this.scope_id)),
this.myhelper=new WebSquare.korHelper,this.beforeEditValue="",this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var d=this.options.preventKeyList.split(","),c=0;c<d.length;c++){var u=d[c].wq_trim();u&&(this._preventKeyObj[u]=!0)}this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"",67:"",68:"",69:"",70:"",71:"",81:"",82:"",83:"",84:"",86:"",87:"",88:"",90:""},this.korCharHash2={69:"",81:"",82:"",84:"",87:""},this.resizeObj={width:0,height:0}}catch(t){a.Y.printStackTrace(t,null,this)}},u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title+"'",i=""==this.options.style?"":"style='"+this.options.style+"'",o="";o=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var s,r=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",n=""==this.options.textAlign?r:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",l="text"==this.options.type?"type = 'text' ":"type = '"+this.options.type+"' ",h=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",d=this.options.placeholder?"w2autoComplete_label w2autoComplete_placeholder":"w2autoComplete_label";this.options.useLocale&&this.options.placeholderLocaleRef&&(s=this.getLocaleValue(this.options.placeholderLocaleRef));var c=s||this.options.placeholder,u=this.options.placeholder?"data-placeholder='"+c+"' ":"",p="";"none"==this.options.appearance&&(p=" w2autoComplete_ul_col_arrow_hide");var g=WebSquare.language.getMessage("AutoComplete_label")||"AutoComplete";if("native"==this.options.renderType)d=this.options.placeholder?"w2autoComplete_ul_label w2autoComplete_placeholder":"w2autoComplete_ul_label",t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete_acc "+this.options.className+"' "+o+" "+e+">"),t.push("<div id='"+this.id+"_div_input' class='w2autoComplete_ul_col_label'>"),t.push("<input id='"+this.id+"_input' role = 'combobox' aria-expanded = 'false' aria-haspopup = 'true' auto-complete = 'list' aria-owns = '#"+this.id+"_itemTable' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+l+e+h+" />"),t.push("<span id='"+this.id+"_label' class='"+d+"' "+u+n+"></span>"),t.push("</div>"),t.push("<div id='"+this.id+"_div_arrow' class='w2autoComplete_ul_col_arrow"+p+"'>"),t.push("<a id='"+this.id+"_arrow' class='w2autoComplete_col_button' href='javascript:void(null);' aria-haspopup='true' aria-expanded='false'>"+g+"</a>"),t.push("</div>"),t.push("</div>");else if("input"==this.options.renderType){d=this.options.placeholder?"w2autoComplete_ul_label w2autoComplete_placeholder":"w2autoComplete_ul_label",t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete_acc "+this.options.className+"' "+o+" "+e+">"),t.push("<div id='"+this.id+"_div_input' class='w2autoComplete_ul_col_label'>");var m=WebSquare.language.getMessage("AutoComplete_inputFormat")||"Input Format";if(1==this.options.removeLabelFor);else{var f=m;this.options.labelForText&&(f=this.options.labelForText),t.push("<label for='"+this.id+"_input' class='w2blind'>"+f+"</label>")}
t.push("<input type='text' id='"+this.id+"_input' role = 'combobox' aria-expanded = 'false' aria-autocomplete = 'list' aria-controls = '"+this.id+"_itemTable_main' aria-activedescendant='' class='w2autoComplete_input w2table_sb_ul_col2' style='border-width:0px; width:100%; padding:0px;' "+l+e+h+" />"),t.push("<span id='"+this.id+"_label' class='"+d+"' "+u+n+" style='display:none;'></span>"),t.push("</div>"),t.push("<div id='"+this.id+"_div_arrow' class='w2autoComplete_ul_col_arrow"+p+"'>"),t.push("<button id='"+this.id+"_arrow' class='w2autoComplete_col_button' href='javascript:void(null);' aria-label='"+g+"' aria-expanded='false' tabindex='-1' style='border:0'></button>"),t.push("</div>"),t.push("</div>")}else t.push("<div id='"+this.id+"' "+i+" class='w2autoComplete "+this.options.className+"' "+o+" "+e+" role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='inline' >"),t.push("<table class='w2autoComplete_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2autoComplete_row w2autoComplete_row_main'>"),t.push("<td class='w2autoComplete_col_label' "+r+">"),t.push("<div class='w2autoComplete_label'>"),t.push("<span id='"+this.id+"_label' class='"+d+"' "+u+n+"></span>"),t.push("<input id='"+this.id+"_input' class='w2autoComplete_input' style='border-width:0px; width:100%; padding:0px; display:none;' "+l+e+h+" />"),t.push("</div></td>"),"none"!=this.options.appearance&&t.push("<td class='w2autoComplete_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>");return t.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{if(this.options.itemTooltipDisplay&&this.options.itemTooltipFormatter&&(this.itemTooltipFormatter=l.Z.getGlobalFunction(this.options.itemTooltipFormatter,this.scope_id)),this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),"native"==this.options.renderType||"input"==this.options.renderType){if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divArrow=this.getElementById(this.id+"_div_arrow"),this.dom.imgArrow=this.getElementById(this.id+"_arrow"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}h.q.addCheckResize(this.uuid,"checkResize")}""!=this.options.tabIndex&&(this.dom.input.tabIndex=this.options.tabIndex),WebSquare.util.isTouchDevice()?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?("grid"===this.itemTableMode?WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable":WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{ontouchstart:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{ontouchstart:this.handleClickEventDocument}}):this.options.useOtherComponentId?r.I.setTimer((function(){this.otherComponent=l.Z.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,event:{onmousedown:this.handleClickEventDocument}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){n.f.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,
caller:this,delay:100}):"grid"==this.itemTableMode||"gridView"==this.itemTableMode?("grid"===this.itemTableMode?WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable":WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{onmousedown:this.handleClickEventDocument}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,event:{onmousedown:this.handleClickEventDocument}})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if("native"!=this.options.renderType&&"input"!=this.options.renderType||this.setSetting(),this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),l.Z.isTouchDevice()&&(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,(function(t){1==s.q.getBody().getLayerListener().existShow&&s.q.getBody().getLayerListener().hideAll()})))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleInputKeyupEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.bind("onviewchange",(function(t){this.onchangeFlag=!0})),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),"native"==this.options.renderType?(this.event.addListener(this.dom.imgArrow,"onfocusin",this.event.bindAsEventListener(this,this.handleArrowFocusInEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))):"input"==this.options.renderType?this.event.addListener(this.dom.input,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownAccessibilityEvent)):this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}-1!=this.selectedIndex||0!=this.options.emptyIndex&&this.options.emptyIndex?this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(0),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.readOnly&&this.onPropertyChange("readOnly",l.Z.getBoolean(this.options.readOnly)),
this.options.mandatory&&this.onPropertyChange("mandatory",l.Z.getBoolean(this.options.mandatory))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded())if(this._itemTableRedraw=!0,this.refreshItemArr(),this.componentRedraw(t),this.itemArr.length<=0&&-1!=this.selectedIndex&&this.initAutoComplete(),"grid"==this.itemTableMode?(this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&this.setGridData()):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView&&this.setGridViewData()),this.modelControl.isBinded())this.refresh();else if(-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult)this.setSelectedIndexNM(-1,!0);else{var e=this.options.placeholder?-1:0;this.setSelectedIndexNM(e)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&this.getItemCount()>0){var t=this.getValue(),e=this.modelControl.getData(),i=this.setValueNM(e);if(1==i)t!=this.getValue()&&n.f.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()}),null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(isNaN(i))null!=this.getValue()&&e!=this.getValue()&&this.modelControl.setData(this.getValue());else if("clear"===this.noResult||this.options.emptyItem)this.setSelectedIndex(-1,!0,!1);else if("previous"===this.noResult){var o=this.options.placeholder?-1:0;this.setSelectedIndex(o,!1,!1)}else{if("noEnd"===this.noResult)return;if("useData"===this.noResult)return;if("first"===this.noResult)return void(this.options.noResultFirstItem&&this.setSelectedIndex(0))}}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t){try{if(this.showRowIndex=0,this.setSelectOptions(),this.itemArr.length>0){var e=0;(this.options.placeholder||"useData"===this.noResult&&"gridView"===this.itemTableMode&&!1===this.options.selectedData)&&(e=-1),t&&"replace"!==t&&this.getSelectedIndex()>-1&&(e=this.getSelectedIndex()),this.itemArr&&this.itemArr[e]?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[e].label):this.itemArr[e].label:this.dom.label.innerHTML="";var i="replace"===t&&!0===this.options.setNodeSetNoOnchange;this.modelControl.isBinded()?this.setSelectedIndex(e,!1,!1,i):this.setSelectedIndex(e,void 0,void 0,i)}else this.dom.label.innerHTML="";"input"!=this.options.renderType&&this.showEditMode(!1),this.setValueNM("")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSubLayer=function(){try{if(null==this.itemTable){var t=this;if("grid"==this.itemTableMode)this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.focus(),"dataList"===t.gridOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(t.viewArr[e].index)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.focus())}))),
0===this.itemArr.length&&this.itemTable.hide();else if("gridView"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.findStop=!0,(t.editmode||t.findkeymode)&&(t.mozTrickBuffer=""),t.itemTable._focus(),t._focusSkip=!0;var o=t.viewArr[e].orgLabel+"|"+t.viewArr[e].value,s=t.findinItemArr(o,WebSquare.allValue||"all");t.setSelectedIndex1(s)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.itemTable._focus(),t._focusSkip=!0;var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(t.viewArr[o].index)}else 27==i&&(t._closeSubLayer(),t.showEditMode(!1),t.itemTable._focus(),t._focusSkip=!0)}))),0===this.itemArr.length&&this.itemTable.hide();else{var e={row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2input_table "+this.options.className,w2table:"w2input_table_sb",w2table_main:"w2input_table_sb_main",w2table_row:"w2input_table_sb_row",w2table_col:"w2input_table_sb_col",w2table_col_over:"w2input_table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,parent_uuid:this.uuid,selectByTabKey:this.options.selectByTabKey};"native"!==this.options.renderType&&"input"!==this.options.renderType||(e.className="w2table "+this.options.className,e.w2table="w2table_sb",e.w2table_main="w2table_sb_ul_main",e.w2table_row="w2table_sb_ul_row",e.w2table_col="w2table_sb_ul_col",e.tableRender="ul",e.noUseUpDownKey=!1,e.noUseTabKeyByMove=!0),"native"===this.options.renderType?e.w2table_col_over="w2table_sb_ul_col_over":"input"===this.options.renderType?(e.w2table_col_over="w2table_sb_ul_col_over2",e.parentPluginName="autoComplete_input"):e.useFindItemFirstKeyChar=this.options.useFindItemFirstKeyChar,this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",e),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),"input"===this.options.renderType&&(this.itemTable.addMouseOverEventListener((function(e){this.selectedCell&&t.dom.input.setAttribute("aria-activedescendant",this.selectedCell.id)})),this.itemTable.addMouseLeaveEventListener((function(e){t.dom.input.setAttribute("aria-activedescendant","")}))),this.itemTable.addClickEventListener((function(e,i){if("input"!==t.options.renderType||i){n.f.fireEvent(t,"onitemclick",i),t.findStop=!0;var o=t.selectedIndex,s=t.getValue();if(t.editmode||t.findkeymode){t.mozTrickBuffer="";var r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel};var a=t.selectedItem.orgLabel+"|"+t.selectedItem.value,l=t.findinItemArr(a,WebSquare.allValue||"all");t.setSelectedIndex1(l,!0),"input"!=t.options.renderType&&t.focus(),t.closeTable()}else{r=t.viewArr[i].label;t.options.useKeywordHighlight&&(r=r.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=r,t.selectedItem={text:r,value:t.viewArr[i].value,orgLabel:t.viewArr[i].orgLabel},
"native"===t.options.renderType?"arrow"==t.options.itemEnterHandleMode?(t.setSelectedIndex1(t.viewArr[i].index),t.dom.imgArrow.focus()):"edit"==t.options.itemEnterHandleMode?(t.setSelectedIndex1(t.viewArr[i].index),t.focus()):(t.focus(),t.setSelectedIndex1(t.viewArr[i].index)):"input"===t.options.renderType?t.setSelectedIndex1(i):(t.setSelectedIndex1(i),t.focus(),t.closeTable())}var h={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};n.f.fireEvent(t,"onselected",h)}})),this.itemTable.addKeyDownEventListener((function(e){var i=e.charCode?e.charCode:e.keyCode;if("input"!==this.options.renderType&&"ul"==this.options.tableRender&&t.itemTable.endReached)1==this.getItemCount()&&13==i?t.enterHandle(e):9==i&&(t.closeSubLayer(),t.dom.imgArrow.focus(),t.itemTable.endReached=!1);else{if(l.Z.isIEAllVersion()){if(e.srcElement.parentElement!=this.render)return}else if(n.f.getTarget(e)!==this.render)return void("ul"==this.options.tableRender&&9==i&&(t._setLabel(t.viewArr[this.getSelectedIndex()].index),t.showEditMode(!1)));if(27==i)return t._closeSubLayer(),t.showEditMode(!1),void t.focus();if(t.options.customToggleKey==i)return t._closeSubLayer(),void t.focus();if(!t.options.findItemFirstKey)if(1==t.interactionMode||t.editmode||t.findkeymode){for(var o=0,s=t.selectedItem.orgLabel+"|"+t.selectedItem.value,r=0;r<t.viewArr.length;r++)if(s==t.viewArr[r].orgLabel+"|"+t.viewArr[r].value){o=r;break}if(13==i||t.options.selectByTabKey&&9==i){if(0==t.viewArr.length)return}else if(38==i||9==i&&e.shiftKey){if(0==o)return;o-=1}else if(40==i||9==i){if(o+1==t.viewArr.length)return;o+=1}else 35==i?o=t.viewArr.length-1:36==i?o=0:33==i?(o-=t.viewArr.length)<0&&(o=0):34==i&&(o+=t.viewArr.length)>=t.viewArr.length&&(o=t.viewArr.length-1);if(t.viewArr.length>o){var a=t.viewArr[o].label;t.options.useKeywordHighlight&&(a=a.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),t.dom.input.value=a,t.selectedItem={text:a,value:t.viewArr[o].value,orgLabel:t.viewArr[o].orgLabel},t.itemTable.setSelectedIndex(o)}}else{var h=-1;h=t.getSelectedIndex(),38==i||9==i&&e.shiftKey?h>0&&(h-=1):40==i||9==i?h+1<t.getItemCount()&&(h+=1):35==i?h=t.getItemCount()-1:36==i?h=0:33==i?(h-=t.itemTable.rowCount)<0&&(h=0):34==i&&(h+=t.itemTable.rowCount)>=t.itemTable.getItemCount()&&(h=t.itemTable.getItemCount()-1),t.setSelectedIndex1(h,!0),t.itemTable.setSelectedIndex(h)}}}));var i=WebSquare.idCache[this.uuid],o=this.options.closeonmouseleave,s=this.options.itemTooltipDisplay;(o||s)&&this.itemTable.addMouseLeaveEventListener((function(e){if(o){var r=t.render.offsetHeight,a=t.getAbsolutePosition("top");e.clientY>=a&&e.clientY<=a+r||t.closeSubLayer()}s&&i.hideTooltip()})),s&&this.itemTable.addMouseOverEventListener((function(t){var e=l.Z.getDataPrefix("index"),o=t,s=WebSquare.style.getAbsoluteLeft(o)+20,r=WebSquare.style.getAbsoluteTop(o)+o.offsetHeight+3,a="ul"===i.options.tableRender?o.innerText:o.innerHTML;if(i.itemTooltipFormatter&&"function"==typeof i.itemTooltipFormatter){var n=parseInt(o.getAttribute(e),10);a=i.itemTooltipFormatter(a,n,i.options._rowIndex,i.options._colIndex)}i.showTooltip(s,r,a)})),this.editmode&&this.viewArr.length>0?(this.setItemTable(),"native"!=this.options.renderType&&"input"!=this.options.renderType&&this.itemTable.setSelectedIndex(0)):null!=this.itemArr&&this.itemArr.length>0?this.setItemTable():(this.itemTable.hide(),null!=this.itemTable.mainTable&&this.itemTable.render.firstChild?this.setItemTable():$l("this.itemTable.mainTable is null.["+this.id+"]"))}if("native"===this.options.renderType||"input"===this.options.renderType){var r=this.dom.input;r&&r.setAttribute("aria-controls",this.id+"_itemTable_main")}if("native"===this.options.renderType){var h=this.dom.imgArrow;h&&h.setAttribute("aria-controls",this.id+"_itemTable_main")}this.isOpen=!0,this.closeSubLayer()}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{
null!=this.itemTable&&(this.editmode?0==this.viewArr.length||"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&(this.itemTable.setItemArr(this.viewArr),this.itemTable.setSelectedIndex(0)):"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setItemTable=function(){try{var t,e;"native"===this.options.renderType||"input"==this.options.renderType?(t=this.itemTable.render.getElementsByTagName("li"),e=this.itemTable.render.getElementsByTagName("li")):(t=this.itemTable.render.getElementsByTagName("tr"),e=this.itemTable.render.getElementsByTagName("td")),(t.length!==this.itemArr.length||this.viewArr.length!==this.itemArr.length||this._itemTableRedraw)&&(this._itemTableRedraw=!1,this.itemTable.setItemArr(this.viewArr));var i=this.render.offsetWidth,o=document.documentElement.clientWidth||document.body.clientWidth||0,s=WebSquare.style.getAbsoluteLeft(this.render),n=0;if(e&&e.length>0){for(var l=0,h=this.options.visibleRowNum,d=this.editmode?this.viewArr:this.itemArr,c=0,u=0;u<d.length&&h>0;u++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===d[u]._hidden||(l+=e[u].offsetHeight,h--,c++);r.I.browserCheck.moz&&l<34&&1===c&&(l=34),this.itemTable.setStyle("height",l+"px")}var p=0;"auto"==this.options.submenuSize&&(p=WebSquare.style.getSize(this.itemTable.render,"innerwidth")-WebSquare.style.getSize(this.itemTable.render,"width")),"fixed"==this.options.submenuSize||parseInt(i)>=parseInt(this.itemTable.render.offsetWidth)?(this.itemTable.setStyle("width",i-2-p+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i-p+"px":this.itemTable.render.firstChild.style.width=i-17-p+"px"):this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px"):this.itemTable.render.firstChild.offsetWidth>i?this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+"px"):(this.itemTable.render.firstChild.style.width=i-p+"px",this.itemTable.setStyle("width",i-2-p+"px"));var g=this.options.direction;if("auto"==g){var m=document.body.scrollTop;m<document.documentElement.scrollTop&&(m=document.documentElement.scrollTop);var f=WebSquare.style.getAbsoluteTop(this.render)-m,b=document.documentElement.clientHeight-(f+this.render.offsetHeight),y=this.itemTable.render.offsetHeight,v=Math.max(b,f);if(v<y&&e&&e.length>0){var w=0;for(u=0;u<e.length&&!(w+e[u].offsetHeight+2>v);u++)w+=e[u].offsetHeight;this.itemTable.rowCount=u,this.itemTable.setStyle("height",w+"px"),v!==b&&(g="up")}else b<y&&f>y&&(g="up")}if(n="up"==g?WebSquare.style.getAbsoluteTop(this.render)-this.itemTable.render.offsetHeight:WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,o<s+this.itemTable.render.offsetWidth)if((s=s+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0){s=WebSquare.style.getAbsoluteLeft(this.render);var S=document.body.offsetWidth-17-s;this.itemTable.setStyle("width",S+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(l+=20),this.itemTable.setStyle("height",l+"px"),this.itemTable.setStyle("overflow-x","auto")}else this.itemTable.setStyle("overflow-x","hidden");else{S=this.itemTable.render.firstChild.offsetWidth;var _=this.itemTable.render.clientWidth;if(s+S<o&&"auto"==this.itemTable.getStyle("overflow-x")){var C=S>_?S:_;l-=20,this.itemTable.setStyle("height",l+"px"),this.itemTable.setStyle("width",C+"px"),this.itemTable.setStyle("overflow-x","hidden")}}this.itemTableDirection=g,this.itemTable.render.style.left=s+"px",this.itemTable.render.style.top=n+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.buildItemArr=function(){try{
this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].orgLabel||this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){var s=this._getChooseOptionLabel();this.itemArr=[{label:s,value:this.options.chooseOptionValue,orgLabel:s,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getViewItemText=function(t){try{var e="";if(t>-1&&t<this.viewArr.length)switch(e=this.viewArr[t].label,this.options.displayMode){case"0":break;case"1":e=this.viewArr[t].value+this.options.delimiter+e;break;case"2":e=e+this.options.delimiter+this.viewArr[t].value;break;case"3":e=this.viewArr[t].value}return e}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.parseLabel=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.label.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.parseValue=function(t){try{if(this.itemsetObj.label.indexOf("@")>-1){var e=this.itemsetObj.value.split("@");if(this.itemsetObj.label.indexOf("/")>-1){var i=e[0].split("/"),o=i[i.length-2],s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,o);return WebSquare.WebSquareparser.getAttribute(s[0],e[1])}return WebSquare.WebSquareparser.getAttribute(this.itemArr[t].xml,e[1])}return(s=WebSquare.xml.getElementsByTagName(this.itemArr[t].xml,this.itemsetObj.label))[0].firstChild.nodeValue}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;if(e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),"grid"==this.itemTableMode){if(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),o)for(var s=0;s<this.itemsetObj.items.length;s++)this.itemsetObj.items[s].id==this.itemsetObj.labelId&&(this.itemsetObj.items[s].ref=e),this.itemsetObj.items[s].id==this.itemsetObj.valueId&&(this.itemsetObj.items[s].ref=i);this.refreshGridItemArr()}else"gridView"==this.itemTableMode?(this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.refreshGridViewItemArr()):this.buildItemArr()
;for(s=0;s<this.itemArr.length;s++)this.itemArr[s].orgLabel=this.itemArr[s].label,this.itemArr[s].label=this.getItemText(s);if(this.options.interactionMode){if(r.I.clearTimer(this.id+"_showEditMode",!0),this.interactionMode&&(this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},"useData"===this.options.noResult&&this.dummyItemArr.length))for(s=0;s<this.dummyItemArr.length;s++)this.itemArr=[{label:this.dummyItemArr[s].label,value:this.dummyItemArr[s].value,orgLabel:this.dummyItemArr[s].orgLabel}].concat(this.itemArr);if(1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr),"grid"==this.itemTableMode&&this.gridOptions.dataComp)){for(var n=-1,l={},h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),l[this.itemsetObj.items[h].id]="";l[this.itemsetObj.items[-1==n?0:n].id]=this.defaultAllOptionLabel,this.gridRowItemArr.unshift(l)}if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(s=0;s<this.itemArr.length;s++){var d=this.itemArr[s].label;if(this.options.useKeywordHighlight){var c=d.indexOf(this.mozTrickBuffer);c>=0&&(d=d.substring(0,c)+"<span class='w2autoComplete_keyword'>"+this.mozTrickBuffer+"</span>"+d.substring(c+this.mozTrickBuffer.length,d.length))}this.viewArr.push({label:d,orgLabel:this.itemArr[s].orgLabel,value:this.itemArr[s].value,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr),this.selectedIndex=0,this.selectedItem={text:this.itemArr[this.selectedIndex].label,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}}this.viewArr=[];for(s=0;s<this.itemArr.length;s++)this.viewArr.push({label:this.itemArr[s].label,value:this.itemArr[s].value,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){if(this.setSubLayer(),this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var u=[];for(n=-1,h=0;h<this.itemsetObj.items.length;h++)-1==n&&this.itemsetObj.items[h].ref==this.itemsetObj.label&&(n=h),u.push("");u[-1==n?0:n]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,u,!1)}var p=[];if(this.options.allOption){var g=this.gridOptions.sortIndex.split(" ")[0],m=this.itemTable.grid.getCellInfo(g).options.dataType,f=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);p[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==m?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*f:t<e?-1*f:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:p})}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.updateTable=function(){},u.prototype.openTable=function(){try{this.showTable()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{n.f.fireEvent(this,"ontoggleclick",this.isOpen),this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.openSubLayer=function(t){try{WebSquare.getBody().getLayerListener().show(this.id,t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._openSubLayer=function(t){try{t||(t={});var e=void 0===t.select||t.select;if(this.setSubLayer(),!this.isOpen){if(0==this.itemArr.length)return;if(this.itemTable.show(),this.addClass("w2autoComplete_open"),
"native"===this.options.renderType||"input"==this.options.renderType){var i=this.dom.input;i&&i.setAttribute("aria-expanded","true");var o=this.dom.imgArrow;o&&o.setAttribute("aria-expanded","true")}if("input"==this.options.renderType&&this.itemTable.render.firstChild){var s=WebSquare.language.getMessage("AutoComplete_label")||"AutoComplete";this.itemTable.render.firstChild.setAttribute("aria-label",s)}if(this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),l.Z.isMobile()||this.options.editable&&!this.options.disableEdit&&(this.editmode||!this.options.findItemFirstKey)||this.itemTable.focus(),-1!=this.selectedIndex&&e){var r=this.selectedIndex;0==r&&(this.itemTable._getCellDisabled(r)||this.itemTable._getCellHidden(r))&&r++,this.itemTable.setSelectedIndex(r)}if(this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.options.animation&&("slideDown"!==this.options.animation||"up"!==this.itemTableDirection)){this.getItemCount()<=this.options.visibleRowNum&&this.itemTable.setStyle("overflow-y","hidden");var n="w2"+this.options.animation;this.addClass(this.itemTable.render,n)}this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._openOtherLayer=function(t){try{if(this.isOpen)this.setGridData();else{if(0==this.itemArr.length)return;var e=this.otherComponent;"grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),(e=this.itemTable).grid.removeFocusedCell(),e.setPosition(0,0),e.show(),e.grid.handleResize()):"gridView"==this.itemTableMode?(this.setSubLayer(),this.setGridViewData(),null!=(e=this.itemTable).gridView&&null!=e.gridView._dataList&&e.gridView.removeFocusedCell(),e.setPosition(0,0),e.show(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.offsetHeight+"px"),e.gridView.handleResize()):e.show(),this.addClass("w2autoComplete_open");var i=WebSquare.style.getAbsoluteLeft(this.render),o=WebSquare.style.getAbsoluteTop(this.render),s=this.options.direction;if("auto"==s||"fit"==s){var r=document.body.scrollTop;r<document.documentElement.scrollTop&&(r=document.documentElement.scrollTop);var n=o-r,h=document.documentElement.clientHeight-(n+this.render.offsetHeight),d=e.render.offsetHeight;h<d&&n>d&&(s="up")}if("up"==s)if("gridView"==this.itemTableMode){o-=this.getElementById(this.id+"_gridViewItemTable_gridView_body_table").offsetHeight;var c=this.getElementById(this.itemTable.id+"_gridView_main_div").style.zIndex;this.setStyle("z-index",c+1)}else o-=e.render.offsetHeight;else o+=this.render.offsetHeight;if("fit"==this.options.direction){"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(this.itemTable.render.firstChild.style.width="100%"),i=WebSquare.style.getAbsoluteLeft(this.render),e.setPosition(i,o);var u=document.documentElement.clientWidth-i;e.setSize(u,e.render.offsetHeight)}else"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(i=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(e.render.style.width=this.render.offsetWidth+"px")),"fit"!=s&&document.documentElement.clientWidth<i+e.render.offsetWidth&&(i=i+this.render.offsetWidth-e.render.offsetWidth),i<0&&(i=0);this.itemTableDirection=s,e.render.style.left=i+"px",e.render.style.top=o+"px",this.isOpen=!0,WebSquare.style.adjustZIndex(this.uuid,e.uuid,"itemTable"),
this.options.findItemFirstKey&&(l.Z.isMobile()||this.options.editable&&!this.options.disableEdit&&this.editmode||("grid"==this.itemTableMode?e.grid.render.focus():"gridView"==this.itemTableMode&&e.gridView.render.focus()))}if(-1!=this.selectedIndex)for(var p=0;p<this.viewArr.length;p++)if(this.viewArr[p].index==this.selectedIndex){this.itemTable.setSelectedIndex(p,t&&t.noFocus);break}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.closeSubLayer=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._closeSubLayer=function(){try{if(this.isOpen&&null!=this.itemTable){if(this.itemTable.hide(),this.removeClass("w2autoComplete_open"),this.itemTable.render.setAttribute("aria-expanded","false"),"native"===this.options.renderType||"input"==this.options.renderType){var t=this.dom.input;t&&t.setAttribute("aria-expanded","false");var e=this.dom.imgArrow;e&&e.setAttribute("aria-expanded","false")}1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2autoComplete_open"),"grid"==this.itemTableMode?i.grid.handleResize():"gridView"==this.itemTableMode&&i.gridView.handleResize(),this.isOpen=!1,!0===e?n.f.fireEvent(this,"onclose",!0):n.f.fireEvent(this,"onclose",!1))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex=function(t,e,i,o){try{if(isNaN(t))return;if(l.Z.isNull(t))return;t=parseInt(t);var s=!0;if(!1===n.f.fireEvent(this,"onbeforeselect",this.selectedIndex,t)&&t!==this.selectedIndex&&(t=this.selectedIndex,s=!1),this.options.emptyItem&&(t<0||t>=this.getItemCount()))if(this.modelControl.isBinded())(1==this.options.selectedData||0!=i)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var r=this.getSelectedIndex(),h=this.getValue();this.setSelectedIndexNM(-1),-1!=r&&!0!==o&&n.f.fireEvent(this,"onchange",{oldValue:h,newValue:this.getValue()})}else{if(t>=this.getItemCount())return;if(t<0&&!e)return;var d="";t>-1&&(d=this.itemArr[t].value);var c=this.getValue();1==this.options.selectedData||"gridView"===this.itemTableMode&&!1===this.options.selectedData&&-1===t?this.modelControl.setData(d):0!=i?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(d),1==this.options.chooseOption&&0==t&&this.setSelectedIndexNM(0)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1);r=this.getSelectedIndex(),h=this.getValue();this.modelControl.isBinded()&&this.modelControl.getData()===c&&!1!==s||this.setSelectedIndexNM(t,e),r!=this.getSelectedIndex()&&(!0!==o&&n.f.fireEvent(this,"onchange",{oldValue:h,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh"]}))}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t,e){try{if(this.dummyData=null,t=parseInt(t),isNaN(t))return!1;if(this.options.emptyItem&&(t<0||t>=this.getItemCount()))this.selectedIndex=-1,this.dom.label.innerHTML="",this.dom.input.value="",this.itemTable&&this.itemTable.setSelectedIndex(0),this.selectedItem={text:"",value:"",orgLabel:""},this.showEditMode(!1);else{if(isNaN(t)||t>=this.getItemCount())return!1;if(t<0&&!e)return!1;if(this.selectedIndex=t,t>-1){
"grid"==this.itemTableMode?this.gridOptions.dataComp?this.selectedGridRowObj=this.gridOptions.dataComp.getRowArray(t):this.selectedGridRowObj=this.gridRowItemArr[t]:"gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t));var i=this.itemArr[t].label;this._setLabel(t),"input"!=this.options.renderType&&(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=i),this.selectedItem={text:i,value:this.itemArr[t].value,orgLabel:this.itemArr[t].orgLabel},this.itemTable&&"input"!=this.options.renderType&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)}else-1==t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?("gridView"==this.itemTableMode&&this.gridViewOptions.dataComp&&(this.selectedGridViewRowObj=this.gridViewOptions.dataComp.getRowArray(t)),this.dom.label.innerHTML=this._domInputValue,this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=this._domInputValue,this.selectedItem={text:this._domInputValue},this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t)):(this.dom.label.innerHTML="",this.dom.input.value="",this.showEditMode(!1))}return!0}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._setLabel=function(t){try{if(this.dom.label){if(t<0||t>=this.getItemCount())return;var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen)),this.dom.label.innerHTML=e}else{var s=this.options.escape?this._encode(e):e;s=this.getFormattedValue(t,s),"input"==this.options.renderType?this.dom.input.value=s:this.dom.label.innerHTML=s}}}catch(t){a.Y.printStackTrace(t)}},u.prototype._getLabel=function(t){try{if(this.dom.label){var e=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var i=this.itemArr[t].value+"",o=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(e=this.customLabelFormatter.call(this,o,i,this.isOpen))}return e}}catch(t){a.Y.printStackTrace(t)}},u.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){a.Y.printStackTrace(t)}},u.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){a.Y.printStackTrace(t)}},u.prototype._refreshItemTable=function(){try{this.isOpen&&this.closeSubLayer(),this.setSelectItemArr(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable&&this.itemTable.setItemArr(this.itemArr),this._setLabel(this.getSelectedIndex())}catch(t){a.Y.printStackTrace(t)}},u.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){a.Y.printStackTrace(t)}},u.prototype.setAllSelectedIndex=function(t,e){try{
return this.allItemArr[t]?(this.selectedIndex=-1,this.selectedAllIndex=t,this.setDummyData(this.allItemArr[t].value,this.allItemArr[t].label+""),e&&this.modelControl.setData(this.allItemArr[t].value),NaN):(this.selectedAllIndex=-1,!1)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{if(l.Z.isNull(t))return;var e=this.getValue(),i=this.setValueNM(t);1==i?(this.modelControl.setData(t),e!=this.getValue()&&n.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})):isNaN(i)?this.modelControl.isBinded()&&this.modelControl.setData(t):this.options.emptyItem?this.setSelectedIndex(-1):-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult?(this._domInputValue=t,this.setSelectedIndex(-1,!0)):this.setSelectedIndex(0),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t){try{if(l.Z.isNull(t))return;t=t.toString();var e=this.getItemCount();t&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&(this.selectedIndex=-1);for(var i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(l.Z.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{if(this.dummyData)return this.dummyData.value;if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;if(this.options.emptyItem&&-1==this.selectedIndex)return this.options.emptyValue;if("empty"==this.options.returnValueType)return"";var t=null;return"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult&&this._domInputValue&&(t=this._domInputValue),t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getText=function(t){try{return this.dummyData?this.dummyData.label:this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setItem=function(t,e,i,o){try{if(!this.itemArr)return;if(this.itemArr.length<=o)return;this.itemArr[o].label=t,this.itemArr[o].value=e,this.itemArr[o].orgLabel=t,this.itemArr[o].label=this.getItemText(o),this.itemArr[o].xml=i}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.addItem=function(t,e,i,o){try{var s,r=!0;if(t+="",e+="",null==i){var n="<DATA><label>"+WebSquare.xml.encode(t)+"</label><value>"+WebSquare.xml.encode(e)+"</value></DATA>";s=WebSquare.xml.parse(n)}var l={label:t,value:e,orgLabel:t,xml:s};o=parseInt(o,10),(isNaN(o)||o<0||o>=this.getItemCount())&&(o=this.getItemCount());for(var h=0;h<this.itemArr.length;h++)if("all"==this.options.searchTarget){if(this.itemArr[h].value==l.value&&this.itemArr[h].orgLabel==l.orgLabel){r=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}}else if(this.itemArr[h].value==l.value){r=!1,alert(WebSquare.language.getMessage("AutoComplete_addItem_invalid",this.id,h));break}if(r){void 0===o?("0"!=this.options.displayMode&&(l.label=this.getItemText(o)),
this.itemArr.push(l)):(this.itemArr.splice(o,0,l),"0"!=this.options.displayMode&&(this.itemArr[o].label=this.getItemText(o)),o<=this.selectedIndex&&this.setSelectedIndexNM(this.selectedIndex+1)),this.viewArr=[];for(h=0;h<this.itemArr.length;h++)this.viewArr.push({label:this.itemArr[h].label,value:this.itemArr[h].value,orgLabel:this.itemArr[h].orgLabel,index:h,_hidden:this.itemArr[h]._hidden,_disabled:this.itemArr[h]._disabled});return!0}return!1}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getItem=function(t){try{if(void 0===t)return;if(t>=this.itemArr.length||t<0)return;return this.itemTable&&this.gridOptions.sortIndex&&this.gridItemArr.length>0?this.itemArr[this.itemTable.grid.getRealRowIndex(t)]:this.itemArr[t]}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getSearchedItems=function(){try{return this.viewArr}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getSelectedRow=function(){try{if("grid"==this.itemTableMode)return this.selectedGridRowObj;if("gridView"==this.itemTableMode)return this.selectedGridViewRowObj;var t={};return t.label=this.selectedItem.orgLabel,t.value=this.selectedItem.value,t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":var i=this.dom.button;1==e?(this.closeSubLayer(),this.addClass("w2autoComplete_disabled"),null!=i&&this.addClass(i,"w2autoComplete_button_disabled")):(this.removeClass("w2autoComplete_disabled"),null!=i&&this.removeClass(i,"w2autoComplete_disabled"));var o=this.getElementById(this.id+"_input");1==e?o.setAttribute("disabled","disabled"):o.removeAttribute("disabled");break;case"readOnly":1==e?this.addClass("w2autoComplete_readonly"):this.removeClass("w2autoComplete_readonly");o=this.getElementById(this.id+"_input");1==e?o.setAttribute("readonly","readonly"):o.removeAttribute("readonly");break;case"mandatory":1==e?this.addClass(this.render,"w2autoComplete_mandatory"):this.removeClass(this.render,"w2autoComplete_mandatory")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSelectedIndex1=function(t,e,i){try{var o=this.selectedIndex,s=this.getValue();if(this.setSelectedIndex(t,i),o!=this.selectedIndex){var r={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex};n.f.fireEvent(this,"onviewchange",r)}e||this.closeSubLayer()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.showTooltip=function(t,e,i){try{if(!i)return;null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o="";this.options.itemTooltipDisplay&&(o="position:absolute;z-index:10000;");var s=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var n=r.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(n){var h=l.Z.getGlobalFunction(n,s.scope_id),d=!0;if("function"==typeof h&&(d=h(s)),!d)return}}catch(t){a.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2autoComplete_tooltip "+this.options.tooltipClass,style:o}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),
this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=this._encode(i)),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDisableEdit=function(t){this.disableEdit(t)},u.prototype.disableEdit=function(t){try{this.options.disableEdit=l.Z.getBoolean(t),!0===this.options.disableEdit&&this._refreshItemTable()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2autoComplete_input")&&this.isOpen)return void this.changeMode();if(e.match("w2autoComplete_col_label")||e.match("w2autoComplete_ul_col_label"))return this.isOpen?this._showItemTableByFocus||"onfocus"===this.options.editModeEvent&&this.viewArr.length<this.itemArr.length||"native"==this.options.renderType||"input"==this.options.renderType||this.closeSubLayer():(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),!0!==this.options.disableEdit&&!1!==this.options.editable||this.openSubLayer()),void(!this.options.disableEdit&&this.options.editable&&this.changeMode({hideListOnFocus:this.options.hideListOnFocus}));e.match("w2autoComplete_col_button")&&(this.mytime&&clearTimeout(this.mytime),this.isOpen&&(this._showItemTableByFocus||this.viewArr.length<this.itemArr.length)&&this.closeSubLayer())}this.mozTrickBuffer="",this.editmode=!1,this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i,_hidden:this.itemArr[i]._hidden,_disabled:this.itemArr[i]._disabled});"onfocus"===this.options.editModeEvent&&!0===this._bOpen&&(this.isOpen=!0,this._bOpen=!1),this.options.useOtherComponentId||this.options.useKeywordHighlight&&this.options.interactionMode&&(this._itemTableRedraw=!0),this.toggle(),e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&(r.I.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0),this.otherClicked=!0)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.endEdit=function(t){try{var e,i=this.dom.input.value,o=t&&!0===t.noEvent;n.f.fireEvent(this,"oneditend",i),this.mytime&&window.clearTimeout(this.mytime),this.hideTime&&window.clearTimeout(this.hideTime);var s,h=this.dom.input.value,d=this.options.searchTarget,c=!1;1==this.options.displayMode?(s=h.split(this.options.delimiter),"value"==d?h=s[0]:"label"==d?null!=(h=s[1])&&""!==h||(h=s[0]):"both"==d?s[0]&&s[1]?(h=s[1]+"|"+s[0],c=!0):null!=(h=s[1])&&""!==h||(h=s[0]):"all"==d&&(null==s[1]&&1==s.length&&(s[1]=s[0],s[0]=""),h=s[1]+"|"+s[0])):2==this.options.displayMode&&(s=h.split(this.options.delimiter),"value"==d?null!=(h=s[1])&&""!==h||(h=s[0]):"label"==d||"both"==d?h=s[0]:"all"==d&&(null==s[1]&&(s[1]=""),h=s[0]+"|"+s[1]));var u=this.itemArr[this.selectedIndex]
;if(null!=(e=null!=u&&(("value"===d||"both"===d)&&h===u.value||("label"===d||"both"===d)&&h===u.orgLabel||"all"===d&&h===u.orgLabel+"|"+u.value)?this.selectedIndex:this.findinItemArr(h,this.options.searchTarget,c)))"useData"!==this.noResult||o?"clear"===this.noResult?o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0):!0===this.otherClicked?(!0===this.options.handleOtherClick&&this.setSelectedIndex1(e,!0),this.otherClicked=!1):this.setSelectedIndex(e):this.setSelectedIndex1(e,!0);else if("useData"===this.noResult){if(e=1==this.options.allOption||1==this.options.chooseOption?1:0,this.options.ignoreBlankOnNoResult&&""===this.dom.input.value)e=0;else{if("gridView"===this.itemTableMode){var p={label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value};this.dummyGridItemArr.push(p)}"all"===d&&2===s.length?(this.options.interactionMode&&this.dummyItemArr.push({label:s[0],value:s[0],orgLabel:s[0]}),1==this.options.displayMode?this.addItem(s[1],s[0],null,e):this.addItem(s[0],s[1],null,e)):(this.options.interactionMode&&this.dummyItemArr.push({label:this.dom.input.value,value:this.dom.input.value,orgLabel:this.dom.input.value}),this.addItem(this.dom.input.value,this.dom.input.value,null,e))}o?this.setSelectedIndex(e):this.setSelectedIndex1(e,!0)}else"clear"===this.noResult&&(e=1==this.options.allOption||1==this.options.chooseOption?0:-1,o?this.setSelectedIndex(e,!0):this.setSelectedIndex1(e,!0,!0));var g="",m=this.modelControl.isBinded()&&e!==this.getSelectedIndex();null==this.dom.input||null==this.itemArr||-1==this.selectedIndex||m||(this.options.customLabelFormatter&&(this.customLabelFormatter=l.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.selectedItem.text==this.dom.input.value&&""!=this.dom.input.value?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.selectedItem.text):this.selectedItem.text,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g):this.itemArr&&this.itemArr[this.selectedIndex]?("function"==typeof this.customLabelFormatter?g=this._getLabel(this.selectedIndex):(g=this.options.escape?this._encode(this.itemArr[this.selectedIndex].label):this.itemArr[this.selectedIndex].label,g=this.getFormattedValue(this.selectedIndex,g)),this.dom.label.innerHTML=g,this.selectedItem={text:g,value:this.itemArr[this.selectedIndex].value,orgLabel:this.itemArr[this.selectedIndex].orgLabel}):this.dom.label.innerHTML=""),"input"!=this.options.renderType&&this.showEditMode(!1),this.mozTrickBuffer="",(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.findStop=!0,l.Z.clearInterval(this.id+"_mozTrickCompare"))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleblurEventInput=function(){if("native"==this.options.renderType||"input"===this.options.renderType){var t=""===this.options.tabIndex?"0":this.options.tabIndex;this.render.getAttribute("tabIndex")||this.render.setAttribute("tabIndex",t)}"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer()),this.otherClicked=!1},u.prototype.handleKeypressEvent=function(t){try{var e=this.dom.input.value;this.validator.validateKeyPress(this.dom.input,e,t)||n.f.stopEvent(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=!0;if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if((13==e||this.options.selectByTabKey&&9==e)&&(this.options.disableEdit||!this.editable))return void this.handleClickEvent(t);if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.mozTrickCompare(),l.Z.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),"native"==this.options.renderType&&9==e&&!t.shiftKey)return
;return 9!=e&&13!=e||(i=n.f.fireEvent(this,"oneditenter",t)),void((9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?("native"==this.options.renderType&&this.render.removeAttribute("tabIndex"),null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID?(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):"onfocus"===this.options.editModeEvent&&this.focus()):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)))))}e=t.charCode?t.charCode:t.keyCode;if(this.options.customToggleKey==e)return void this.toggle();if(r.I.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void("native"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}else{if(!(40!=e&&38!=e||this.isOpen))return this.handleClickEvent(t),void n.f.preventDefault(t);if(13==e&&!this.isOpen)return void("native"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}if(9!=e&&13!=e||(i=n.f.fireEvent(this,"oneditenter",t)),(9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)))),this.findItemStartedWithKeyChar(t,e),null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&(27==e?(this._closeSubLayer(),this.showEditMode(!1),this.focus()):this.itemTable.handleKeydownEvent(t)),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;return void(null!=this.itemTable&&this.itemTable.render.style.display)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeydownAccessibilityEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=!0;if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&(this.options.disableEdit||!this.editable))return void this.handleClickEvent(t);if(this.event.isMe(t,this.dom.input)){this.editmode=!0,this.inputKeyDown(t,!1),(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.mozTrickCompare(),l.Z.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10}));e=t.charCode?t.charCode:t.keyCode;if(40==e||38==e||120==e&&t.ctrlKey||121==e&&t.ctrlKey||120==e||121==e){if(this.isOpen){var o=this.itemTable.getSelectedIndex(),s=o=parseInt(o);if(120==e&&t.ctrlKey||38==e||120==e){if(!0!==this.itemTable.options.noUseUpDownKey){var h=!1;for(s>0?0==--s&&this.itemTable._getCellHidden(s)&&(s--,h=!0):h=!0;s>=0&&(this.itemTable._getCellDisabled(s)||this.itemTable._getCellHidden(s));)s--;s>=0&&this.itemTable.setSelectedIndex(s),this.itemTable._keyIndex=h?-1:s,this.itemTable._directionKeyPressed=!0}}else if((121==e&&t.ctrlKey||40==e||121==e)&&!0!==this.itemTable.options.noUseUpDownKey){var d=this.itemTable.getItemCount();h=!1;for(s+1<d?++s+1==d&&this.itemTable._getCellHidden(s)&&(s++,h=!0):h=!0;s+1<=d&&(this.itemTable._getCellDisabled(s)||this.itemTable._getCellHidden(s));)s++;s<d&&this.itemTable.setSelectedIndex(s),this.itemTable._keyIndex=h?d:s,this.itemTable._directionKeyPressed=!0}}else if(121==e&&t.ctrlKey||40==e||121==e){this.mozTrickBuffer="",this.viewArr=[];for(var c=0;c<this.itemArr.length;c++)this.viewArr.push({label:this.itemArr[c].label,value:this.itemArr[c].value,orgLabel:this.itemArr[c].orgLabel,index:c,_hidden:this.itemArr[c]._hidden,_disabled:this.itemArr[c]._disabled});this.openSubLayer()}return void(this.itemTable&&this.itemTable.selectedCell&&this.dom.input.setAttribute("aria-activedescendant",this.itemTable.selectedCell.id))}if(13==e&&this.editable)return void this.itemTable.handleKeydownEvent(t);if("input"==this.options.renderType&&9==e&&!t.shiftKey)return
;return 9!=e&&13!=e||(i=n.f.fireEvent(this,"oneditenter",t)),void((9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?("input"==this.options.renderType&&this.render.removeAttribute("tabIndex"),null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t))):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)))))}e=t.charCode?t.charCode:t.keyCode;if(this.options.customToggleKey==e)return void this.toggle();if(r.I.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void("input"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}else{if(!(40!=e&&38!=e||this.isOpen))return this.handleClickEvent(t),void n.f.preventDefault(t);if(13==e&&!this.isOpen)return void("input"==this.options.renderType&&t.target.matches(".w2autoComplete_col_button")||this.changeMode())}if(9!=e&&13!=e||(i=n.f.fireEvent(this,"oneditenter",t)),(9==e||13==e&&!0===this.options.nextTabByEnter)&&(this.tabOrderMoveStart=!1,!1!==i&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)))),this.findItemStartedWithKeyChar(t,e),null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&(27==e?(this._closeSubLayer(),this.showEditMode(!1),this.focus()):this.itemTable.handleKeydownEvent(t)),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;return void(null!=this.itemTable&&this.itemTable.render.style.display)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(9==i||13==i&&!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=l.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=l.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.isOpen&&this.closeSubLayer(),this.tabOrderMoveStart=!1,e.focus(t))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleInputKeyupEvent=function(t){try{if(this.editmode){var e=t.charCode?t.charCode:t.keyCode,i={oldValue:this.beforeEditValue,newValue:this.dom.input.value,keyCode:e};this.options.maxByteLength&&n.f.fireEvent(this,"oneditfull");n.f.fireEvent(this,"oneditkeyup",i,t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleInputEvent=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.render,e,t);i.valid?this.dom.input.value=i.str:n.f.stopEvent(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleArrowFocusInEvent=function(t){try{this.dom.input,t.relatedTarget;this.dom.input!=t.relatedTarget&&!this.options.disableEdit&&this.options.editable&&this.changeMode({noFocus:!0})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.find=function(t,e){try{var i=this.dom.input.value;if("function"==typeof this.customSearchStrArrFunction)return void this._findInSearchStrArr();if(""==i&&!e)return this.mozTrickBuffer=i,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==i)return void(this.mozTrickBuffer=i);this.mozTrickBuffer=i,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(i=i.toLowerCase());var o=!1;if(this._showItemTableByFocus&&e)for(var s=0;s<this.itemArr.length;s++)this.viewArr.push({label:this.itemArr[s].label,value:this.itemArr[s].value,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,
_disabled:this.itemArr[s]._disabled});else for(s=0;s<this.itemArr.length;s++)if(!this.itemArr[s].noItem){var r=!1;if(this.itemArr[s].orgLabel||(this.itemArr[s].orgLabel=this.itemArr[s].label,this.itemArr[s].label=this.getItemText(s)),!r&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var n=this.options.caseSensitive?this.itemArr[s].orgLabel:this.itemArr[s].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(n=this.options.caseSensitive?this.itemArr[s].label:this.itemArr[s].label.toLowerCase()),"contain"==this.search?r=this.myhelper.containWith(n,i):"start"==this.search?r=this.myhelper.startWith(n,i):"none"==this.search&&(r=n==i),n==i&&(o=!0)}if(!r&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var h=this.options.caseSensitive?this.itemArr[s].value:this.itemArr[s].value.toLowerCase();"contain"==this.search?r=this.myhelper.containWith(h,i):"start"==this.search?r=this.myhelper.startWith(h,i):"none"==this.search&&(r=h==i),h==i&&(o=!0)}var d=this.itemArr[s].label;if(this.options.useKeywordHighlight){var c=this.options.caseSensitive?d:d.toUpperCase(),u=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),p=c.indexOf(u);if(p>=0){var g=d.substring(p,p+this.mozTrickBuffer.length);d=d.substring(0,p)+"<span class='w2autoComplete_keyword'>"+g+"</span>"+d.substring(p+this.mozTrickBuffer.length,d.length)}}r&&this.viewArr.push({value:this.itemArr[s].value,label:d,orgLabel:this.itemArr[s].orgLabel,index:s,_hidden:this.itemArr[s]._hidden,_disabled:this.itemArr[s]._disabled})}if(this.options.disabled)return!1;1!==this.viewArr.length&&(o=!1),this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):("input"==this.options.renderType&&this.itemTable&&this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.openSubLayer({select:!1}))):this.closeSubLayer(),this.options.autoFocus&&!0===o&&!0!==t&&l.Z._autoFocus(this)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._findInSearchStrArr=function(){try{var t=this.customSearchStrArrFunction.call(this,this.dom.input.value),e=this.dom.input.value;if(this.mozTrickBuffer=e,""==e||t&&t.lengh<1)return void(null!=this.itemTable&&this.closeSubLayer());this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(e=e.toLowerCase());for(var i=0;i<t.length;i++){e=this.options.caseSensitive?t[i]:t[i].toLowerCase();for(var o=0;o<this.itemArr.length;o++){var s=!1;if(this.itemArr[o].orgLabel||(this.itemArr[o].orgLabel=this.itemArr[o].label,this.itemArr[o].label=this.getItemText(o)),!s&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var r=this.options.caseSensitive?this.itemArr[o].orgLabel:this.itemArr[o].orgLabel.toLowerCase();"all"==this.options.searchTarget&&(r=this.options.caseSensitive?this.itemArr[o].label:this.itemArr[o].label.toLowerCase()),"contain"==this.search?s=this.myhelper.containWith(r,e):"start"==this.search?s=this.myhelper.startWith(r,e):"none"==this.search&&(s=r==e)}if(!s&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var n=this.options.caseSensitive?this.itemArr[o].value:this.itemArr[o].value.toLowerCase();"contain"==this.search?s=this.myhelper.containWith(n,e):"start"==this.search?s=this.myhelper.startWith(n,e):"none"==this.search&&(s=n==e)}var l=this.itemArr[o].label;if(this.options.useKeywordHighlight){var h=this.options.caseSensitive?l:l.toUpperCase(),d=this.options.caseSensitive?this.mozTrickBuffer:this.mozTrickBuffer.toUpperCase(),c=h.indexOf(d);if(c>=0){var u=l.substring(c,c+this.mozTrickBuffer.length)
;l=l.substring(0,c)+"<span class='w2autoComplete_keyword'>"+u+"</span>"+l.substring(c+this.mozTrickBuffer.length,l.length)}}s&&this.viewArr.push({value:this.itemArr[o].value,label:l,orgLabel:this.itemArr[o].orgLabel,index:o,_hidden:this.itemArr[o]._hidden,_disabled:this.itemArr[o]._disabled})}}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&"gridView"!=this.itemTableMode&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr)),"grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.openSubLayer({noFocus:!0}):this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=l.Z.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this._itemTableRedraw=!0,this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=l.Z.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var r="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(r),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if(!("native"!=this.options.renderType&&"input"!=this.options.renderType||37!=i&&38!=i&&39!=i&&40!=i))return;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey){if("native"!=this.options.renderType||9!=i||t.shiftKey)if(40!=i||this.isOpen){if(!(t.shiftKey||38!=i&&33!=i&&40!=i&&34!=i&&35!=i&&36!=i))return r.I.browserCheck.chrome||r.I.browserCheck.safari||l.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.findStop=!0),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()));if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?this.itemTable.setFocusedCell(0,0):this.itemTable.focus()),r.I.browserCheck.chrome||r.I.browserCheck.safari||l.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else if(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)return this.editmode=!1,this.itemTable.inputBlurInside=!0,this.itemTable.setSelectedIndex(0),this._setLabel(this.viewArr[0].index),this.showEditMode(!1),void n.f.preventDefault(t)}else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){if("native"!=this.options.renderType||9!=i||t.shiftKey){if(!(t.shiftKey||38!=i&&33!=i&&40!=i&&34!=i&&35!=i&&36!=i))return r.I.browserCheck.chrome||r.I.browserCheck.safari||l.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),
this.hideTime&&clearTimeout(this.hideTime)):(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.focus());if(13==i)return void this.enterHandle(t);if(9==i&&this.options.selectByTabKey)return this.enterHandle(t),void WebSquare.event.preventDefault(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length||this.viewArr.length!=this.itemArr.length)return;return this.arrowHandle(t),r.I.browserCheck.chrome||r.I.browserCheck.safari||l.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(r.I.browserCheck.moz||r.I.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}if(27===i)return this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),void this.closeTable()}else if(WebSquare.getBody().getLayerListener().isShow(this.id)&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)return this.editmode=!1,this.itemTable.inputBlurInside=!0,this.itemTable.setSelectedIndex(0),this._setLabel(this.viewArr[0].index),this.showEditMode(!1),void n.f.preventDefault(t)}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.selectedItem={text:"",value:"",orgLabel:""},this.selectedGridRowObj={},this.beforeEditValue=this.dom.input.value,this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;if((this.editmode||this.findkeymode)&&(""==this.dom.input.value||0==this.viewArr.length))return void n.f.stopEvent(t);for(var i=0,o=0;o<this.viewArr.length;o++)if(this.selectedItem.orgLabel==this.viewArr[o].orgLabel){i=o;break}if(9==e||9==e&&t.shiftKey?this.setSelectedIndex1(this.viewArr[i].index):this.itemTable.handleKeydownEvent(t),this.viewArr.length>0){var s="";s="value"==this.options.searchTarget?this.viewArr[i].value:this.viewArr[i].label,this.options.useKeywordHighlight&&(s=s.wq_replaceAll("<span class='w2autoComplete_keyword'>","").wq_replaceAll("</span>","")),this.dom.input.value=s,this.selectedItem={text:s,value:this.viewArr[i].value,orgLabel:this.viewArr[i].orgLabel},this.itemTable.setSelectedIndex(i)}return void(this.mozTrickBuffer="")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;if(n.f.fireEvent(this,"oneditend",i),(null==this.itemTable||null==this.itemTable.selectedCell)&&(null!=this.itemTable||this.options.useOtherComponentId||this.setSubLayer(),null==this.itemTable.selectedCell)){var o=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode&&void 0===o&&(o=-1),this.setSelectedIndex1(o,!0,!0);else if("noEnd"===this.noResult){if(void 0===o)return;this.setSelectedIndex1(o,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(e=null==o?this.findinItemArr(this.viewArr[0].value,"value"):o,this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)))}if(r.I.browserCheck.opera&&n.f.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?(void 0===e&&(e=-1),this.setSelectedIndex1(e,!0,!0)):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute("index")),this.setSelectedIndex1(e,!0));else if("noEnd"===this.noResult){if(void 0===e)return
;this.setSelectedIndex1(e,!0)}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.setSelectedIndex1(e,!0)):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.setSelectedIndex1(e,!0)));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),"native"===this.options.renderType?this.isOpen?this.viewArr&&1==this.viewArr.length?(this.closeTable(),this.focus()):(this.showEditMode(!1),this.focus(),this.closeTable()):(this.showEditMode(!1),this.isOpen=!0,this.focus(),this.isOpen=!1):"input"===this.options.renderType?this.isOpen?(this.viewArr&&this.viewArr.length,this.closeTable()):this.dom.input.blur():(this.showEditMode(!1),this.closeTable(),this.focus())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.findinItemArr=function(t,e,i,o){try{for(var s=function(t,e){return e&&"string"==typeof t?t.toLowerCase():t},r=e||"label",n=o&&!0===o.ignoreCaseSensitive,l=s(t,n),h=0;h<this.itemArr.length;h++)if(!0!==this.itemArr[h]._disabled){var d=s(this.itemArr[h].value,n),c=s(this.itemArr[h].label,n),u=s(this.itemArr[h].orgLabel,n);if("value"===r){if(l==d)return h}else if("label"===r){if(1==this.options.displayMode||2==this.options.displayMode){if(l==u)return h}else if(l==c)return h}else if("both"===r){if(1==i){if(l==u+"|"+d)return h;var p=this.dom.input.value;if(p===c||p===u||p===d)return h}else if(l==u||l==d)return h}else if("all"===r&&l==u+"|"+d)return h}if(!this.options.caseSensitive&&!n)return this.findinItemArr(t,e,i,{ignoreCaseSensitive:!0});if(this.dummyData&&(("value"===r||"both"===r)&&this.dummyData.value||("label"===r||"both"===r)&&t===this.dummyData.label||"all"===r&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;if(n.f.stopEvent(t),!this.options.useMousewheel)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2autoComplete_selected"))if(this.isOpen){if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode){if(this.itemTable.selectedCell)void 0===(i=this.itemTable.selectedCell.index)&&(i=this.itemTable.selectedCell.getAttribute("index"),this.dom.input.value=this.viewArr[i].label),this.itemTable.setSelectedIndex(i)}}else{var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{if(n.f.stopEvent(t),!this.isOpen){if("native"==this.options.renderType||"input"==this.options.renderType)this.addClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected")}"onfocus"!=this.options.editModeEvent&&"native"!=this.options.renderType&&"input"!=this.options.renderType||!0===this.options.disableEdit||!1===this.options.editable||!0===this._focusSkip&&"input"!==this.options.renderType||this.changeMode({skipFind:this._skipFind})}this.onchangeFlag&&(this.onchangeFlag=!1,n.f.fireEvent(this,"onafteredit")),this._focusSkip=!1,this._skipFind=!1}catch(t){this._focusSkip=!1,this._skipFind=!1,a.Y.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{if(n.f.stopEvent(t),!this.isOpen)if("native"==this.options.renderType||"input"==this.options.renderType)this.removeClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}
}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{if(n.f.stopEvent(t),!l.Z.isIE(6)&&!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");"native"==this.options.renderType||"input"==this.options.renderType?this.addClass("w2autoComplete_selected"):(this.addClass(e,"w2autoComplete_selected"),this.addClass("w2autoComplete_body_selected"))}if(!this.isOpen){for(var i=this.event.getTargetIterator(t,this.render);i.next();)if((i.match("w2autoComplete")||i.match("w2autoComplete_acc"))&&!(1!=this.options.tooltipDisplay||this.editmode&&this.event.isMe(t,this.dom.input))){var o=i.getElement(),s=WebSquare.style.getAbsoluteLeft(o)+20,r=WebSquare.style.getAbsoluteTop(o)+this.render.offsetHeight+3,h=this.dom.label.innerHTML;this.showTooltip(s,r,h)}i=null}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{if(n.f.stopEvent(t),1==this.options.tooltipDisplay&&this.hideTooltip(),!this.isOpen)if("native"==this.options.renderType||"input"==this.options.renderType)this.removeClass("w2autoComplete_selected");else{var e=document.getElementById(this.id+"_main_tbody");this.removeClass(e,"w2autoComplete_selected"),this.removeClass("w2autoComplete_body_selected")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.changeMode=function(t){try{if(!1===this.options.editable)return;if(void 0!==t&&null!=t||(t={}),this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){var e="";if(e=-1===this.selectedIndex&&"gridView"===this.itemTableMode&&!1===this.options.selectedData&&"useData"===this.options.noResult||"both"===this.options.searchTarget&&this.options.displayModeSync?this.selectedItem.text:"value"==this.options.searchTarget?this.selectedItem.value:"label"==this.options.searchTarget||"both"==this.options.searchTarget?this.selectedItem.orgLabel:"all"==this.options.searchTarget?this.selectedItem.text:this.selectedItem.orgLabel,"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&!0!==t.noFocus&&this.setfFocus();var i=WebSquare.xml.decode(e+"");this.dom.input.value=i,(l.Z.isOpera()||l.Z.isFF())&&this.dom.input.setSelectionRange(i.length,i.length)}else this.dom.input.value=WebSquare.xml.decode(e+""),this.showEditMode(!0),!0!==t.noFocus&&"input"!==this.options.renderType&&(this.dom.input.select(),this.setfFocus())}if("input"===this.options.renderType&&!0!==t.noFocus&&(this.dom.input.select(),this.setfFocus()),!this.interactionMode&&"native"!=this.options.renderType&&"input"!=this.options.renderType&&!0!==t.noFocus&&!0!==t.skipFind&&this.itemArr.length>0&&!0!==t.hideListOnFocus){var o=this;(this._showItemTableByFocus||this.dom.input.value&&this.dom.input.value!==this.defaultAllOptionLabel&&this.dom.input.value!==this._getChooseOptionLabel())&&(this.mytime&&clearTimeout(this.mytime),this.mytime=setTimeout((function(){o.find(!0,!0)}),100))}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):r.I.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){a.Y.printStackTrace(t,null,this)}}),{key:this.id+"_showEditMode",caller:this,delay:1})},u.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){
a.Y.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{t=l.Z.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){a.Y.printStackTrace(t)}return t},u.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setEditMode=function(){try{this.setInputFocus()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.removeAll=function(t){try{if(this.selectedItem={text:"",value:"",orgLabel:""},this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML="","grid"==this.itemTableMode)this.viewArr=[],this.gridItemArr=[],this.gridRowItemArr=[],this.selectedGridRowObj={},this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.viewArr=[],this.gridViewItemArr=[],this.gridViewRowItemArr=[],this.selectedGridViewRowObj={},this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.initAutoComplete=function(){try{this.removeAll(),this.selectedIndex=-1,this.selectedItem={text:"",value:"",orgLabel:""},this.viewArr=[],this.dom.input.value="",this.dummyData=null,this._itemTableRedraw=!0,this.isOpen&&this.closeSubLayer(),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.hide=function(){try{this.closeSubLayer(),h.q.prototype.hide.call(this)}catch(t){a.Y.printStackTrace(t)}},u.prototype.getFormattedValue=function(t,e){try{var i=e;return this.options.displayFormatter&&(this.displayFormatter||(this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++,this.displayFormatter=l.Z.getGlobalFunction(this.options.displayFormatter,this.scope_id)),"function"==typeof this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))),i}catch(t){a.Y.printStackTrace(t)}},u.prototype.findItemStartedWithKeyChar=function(t,e){try{if(!1===this.options.useFindItemFirstKeyChar)return;var i=this.keyCharHash[e],o=-1;if(i){var s=this.korCharHash[e],r=this.korCharHash2[e],n=this.selectedIndex;this.options.findItem?(this._keyBuffer+=i,n=0):(this._keyBuffer=i,n++);for(var h=1;;)if(n%=this.itemArr.length,!0!==this.itemArr[n]._hidden){var d=this.itemArr[n].label.toLowerCase();if(0!=n||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=n&&1!=n||!0!==this.options.chooseOption||!0!==this.options.allOption){var c=!1;s&&!t.shiftKey?c=this.myhelper.startWith(d,s):r&&t.shiftKey&&(c=this.myhelper.startWith(d,r));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&l.Z.getBoolean(this.options.findItemKor)){o=n;break}if(d.startsWith(u)){this._keyBuffer="",o=n;break}if(h>this.itemArr.length)break;n++,h++}else{if(this.itemArr.length<=2)break;n++}else{if(this.itemArr.length<=1)break;n++}}else n++;if(o>-1)return this.setSelectedIndex1(o),!0}if(-1==o)return this._keyBuffer="",!1}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.Y.printStackTrace(t)}},
u.prototype.focusNextTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var t=l.Z.getNextTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){a.Y.printStackTrace(t)}},u.prototype.focusPreTabOrder=function(){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=l.Z.getPreTabbableComp(this.id);t&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),t.focus())}}catch(t){a.Y.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){a.Y.printStackTrace(t)}},u.prototype.setGridData=function(){this.itemTable.grid.clearFilter(),this.itemTable.grid.setTopRowIndex(0);var t=this.itemsetObj.labelId,e=this.itemsetObj.valueId;if(!this.options.interactionMode)if(this.gridItemArr=[],this.gridOptions.dataComp){var i=this.itemTable.grid.getColCnt();if(this.gridOptions.dataComp.getColumnCount()!=i){var o,s=[],r={},a=[];for(var n in this.itemTable.grid.cellInfoHash)s.push(this.itemTable.grid.cellInfoHash[n].id);if(o=this.gridOptions.dataComp.getColData(s[0]).length,null==this.gridOptions.dataComp.sortStatusArr){for(var l=0;l<s.length;l++)r[s[l]]=this.gridOptions.dataComp.getColData(s[l]);for(var h=0;h<o;h++)for(var n in a[h]={},r)a[h][n]=r[n][h];for(n=0;n<this.viewArr.length;n++)for(l=0;l<a.length;l++)if(this.viewArr[n].orgLabel===a[l][this.itemsetObj.label]&&this.viewArr[n].value===a[l][this.itemsetObj.value]){var d=[];for(var c in a[l])d.push(a[l][c]);this.gridItemArr=this.gridItemArr.concat(d);break}}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.itemArr.length;l++)if(this.viewArr[n].orgLabel===this.itemArr[l].label&&this.viewArr[n].value===this.itemArr[l].value){this.gridItemArr=this.gridItemArr.concat(this.gridOptions.dataComp.getRowData(l));break}}else for(n=0;n<this.viewArr.length;n++)for(l=0;l<this.gridRowItemArr.length;l++)if(this.viewArr[n].orgLabel===this.gridRowItemArr[l][t]&&this.viewArr[n].value===this.gridRowItemArr[l][e]){for(var u in this.gridRowItemArr[l])this.gridItemArr.push(this.gridRowItemArr[l][u]);break}if(this.itemTable.grid.setData(this.gridItemArr.slice(0)),this.options.allOption){var p=[],g=-1;for(l=0;l<this.itemsetObj.items.length;l++)-1==g&&this.itemsetObj.items[l].ref==this.itemsetObj.label&&(g=l),p.push("");p[-1==g?0:g]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,p,!1)}if(this.gridOptions.sortIndex&&this.gridItemArr.length>0){var m=[];if(this.options.allOption){var f=this.gridOptions.sortIndex.split(" ")[0],b=this.itemTable.grid.getCellInfo(f).options.dataType,y=parseInt(this.gridOptions.sortOrder.split(" ")[0],10);m[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==b?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*y:t<e?-1*y:0)}}this.itemTable.grid.multisort({sortIndex:this.gridOptions.sortIndex,sortOrder:this.gridOptions.sortOrder,sortFuncArr:m})}else{var v=this.gridItemArr.length>0&&this.itemTable.grid.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;v&&this.itemTable.show(),this.itemTable.grid.notifyDataChanged({keepTop:!0}),v&&this.itemTable.hide()}},u.prototype.setGridViewData=function(){this.itemTable.gridView.setTopRowIndex(0);var t=null;if((t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList)).removeAll(),t.setData(this.gridViewOptions.dataComp.getAllFilteredData()),this.options.allOption||this.options.chooseOption){for(var e=[],i=-1,o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");this.options.allOption&&(e[-1==i?0:i]=this.defaultAllOptionLabel,t.setRowData(0,e,!1)),this.options.chooseOption&&(e[-1==i?0:i]=this._getChooseOptionLabel(),t.setRowData(0,e,!1))}if(this.dummyGridItemArr.length>0){var s=0;this.options.allOption&&s++,this.options.chooseOption&&s++;e=[],i=-1
;var r=t.bodyIdColIndexMap[this.itemsetObj.value];for(o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");for(var a=0;a<this.dummyGridItemArr.length;a++)e[-1==i?0:i]=this.dummyGridItemArr[a].label,e[-1==r?1:r]=this.dummyGridItemArr[a].value,t.setRowData(s,e,!1)}if(!this.options.interactionMode){if(this.viewArr&&0==this.viewArr.length)for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a,_hidden:this.itemArr[a]._hidden,_disabled:this.itemArr[a]._disabled});if(this.gridViewItemArr=[],this.gridViewOptions.dataComp)if(this.viewArr.length===this.itemArr.length)this.gridViewItemArr=this.gridViewItemArr.concat(t.dataArr);else for(a=0;a<this.viewArr.length;a++)for(o=0;o<this.itemArr.length;o++)if(this.viewArr[a].orgLabel===this.itemArr[o].orgLabel&&this.viewArr[a].value===this.itemArr[o].value){for(var n=t.getRowData(o),l=0;l<n.length;l++)this.gridViewItemArr.push(n[l]);break}}t.setData(this.gridViewItemArr.slice(0)),this.options.interactionMode&&(this.options.allOption&&(e[-1==i?0:i]=this.defaultAllOptionLabel,t.setRowData(0,e,!1)),this.options.chooseOption&&(e[-1==i?0:i]=this._getChooseOptionLabel(),t.setRowData(0,e,!1)));for(a=0;a<this.viewArr.length;a++)this.viewArr[a]._hidden?this.itemTable.gridView.setRowVisible(a,!1):this.itemTable.gridView.setRowVisible(a,!0);if(this.gridViewOptions.sortIndex&&this.gridViewItemArr.length>0){var h=[];if(this.options.allOption){var d=this.gridViewOptions.sortIndex.split(" ")[0],c=this.itemTable.gridView.getCellInfo(d).options.dataType,u=parseInt(this.gridViewOptions.sortOrder.split(" ")[0],10);h[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==c?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*u:t<e?-1*u:0)}}this.itemTable.gridView._dataList.multisort({sortIndex:this.gridViewOptions.sortIndex,sortOrder:this.gridViewOptions.sortOrder,sortFuncArr:h})}else{var p=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;p&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),p&&this.itemTable.hide()}},u.prototype.setDummyData=function(t,e){this.dummyData={value:t,label:e},this.selectedIndex=-1,this.showEditMode(!1),this.selectedItem={text:e,value:t,orgLabel:e};var i=this.options.escape?this._encode(e):e;this.dom.label.innerHTML=i,this.dom.input.value=e},u.prototype.setStyle=function(t,e){try{if(!this.render)return;WebSquare.style.setStyle(this.render,t,e),"font-size"==t&&(this.dom.label.style[t]=e)}catch(t){a.Y.printStackTrace(t)}},u.prototype.changeChooseOption=function(t,e){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t,orgLabel:e}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr);var r=this.getSelectedIndex();i!==r&&-1!==r||this.setSelectedIndex(0)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},u.prototype.restore=function(t){try{return this.setSelectedIndex(t.selectedIndex),!0}catch(t){return a.Y.printStackTrace(t,null,this),!1}},u.prototype.setItemTableFocus=function(){try{WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._encode=function(t){var e=t;try{if("string"!=typeof t)return e
;var i="<span class='w2autoComplete_keyword'>",o="</span>",s=t.indexOf(i),r=t.indexOf(o,37);return e=this.options.useKeywordHighlight&&s>=0&&r>=0&&t.slice(s,s+37)===i&&t.slice(r,r+7)===o?t.slice(0,s)+i+WebSquare.xml._encode(t.slice(s+37,r))+o+WebSquare.xml._encode(t.slice(r+7)):WebSquare.xml._encode(t)}catch(t){return a.Y.printStackTrace(t,null,this),e}},u.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=l.Z.getBoolean(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._getVisibleItemCountViewArr=function(){try{for(var t=0,e=0;e<this.viewArr.length;e++)!0!==this.viewArr[e]._hidden&&t++;return t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSetting=function(){try{if(!this.render||"native"!=this.options.renderType&&"input"!=this.options.renderType)return;var t,e,i=WebSquare.style.getStyle(this.render,"width"),o=WebSquare.style.getStyle(this.dom.divArrow,"width");if(o=o.lastIndexOf("px")>-1?Math.ceil(1*o.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-o-s;else if(i.lastIndexOf("%")>-1&&this.parentControl){if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,r=WebSquare.style.getStyle(w,"padding-left"),n=WebSquare.style.getStyle(w,"padding-right"),l=WebSquare.style.getStyle(w,"border-left-width"),h=WebSquare.style.getStyle(w,"border-right-width");r=r.lastIndexOf("px")>-1?parseInt(r,10):0,n=n.lastIndexOf("px")>-1?parseInt(n,10):0,l=l.lastIndexOf("px")>-1?parseInt(l,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(w.offsetWidth-(r+n+l+h))*parseInt(i.wq_replaceAll("%",""),10)/100-o-s}}var d=WebSquare.style.getStyle(this.dom.input,"border-right-width");d=(d=1*d.wq_replaceAll("px",""))>1?parseInt(d,10):Math.ceil(d);var c=WebSquare.style.getStyle(this.dom.input,"border-left-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var u=WebSquare.style.getStyle(this.dom.input,"border-top-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var p=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var g=WebSquare.style.getStyle(this.dom.input,"padding-right");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g);var m=WebSquare.style.getStyle(this.dom.input,"padding-left");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-top");f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var b,y=WebSquare.style.getStyle(this.dom.input,"padding-bottom");y=(y=1*y.wq_replaceAll("px",""))>1?parseInt(y,10):Math.ceil(y),t=i-(d+c+g+m),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px");var v=WebSquare.style.getStyle(this.render,"height");if((v="auto"==v?this.render.offsetHeight+"px":v).lastIndexOf("px")>-1)v=parseInt(v.wq_replaceAll("px",""),10);else if(v.lastIndexOf("%")>-1){var w;if(w=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))v=w.offsetHeight*parseInt(v.wq_replaceAll("%",""),10)/100}e=v-(u+p+f+y);var S=parseInt(WebSquare.style.getStyle(this.dom.imgArrow,"height"),10);b=S>0?(v-S)/2:(v-16)/2,(WebSquare.util.isIE(6)||WebSquare.util.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.imgArrow,"top",Math.max(b,0)+"px"),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(v,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px"),this.resizeObj.offsetWidth=this.render.offsetWidth,this.resizeObj.offsetWidth=this.render.offsetHeight}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.checkResize=function(){try{
if(!this.render)return;var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height);else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.setSetting()}this.resizeObj={width:t,height:e}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){a.Y.printStackTrace(t)}},u.prototype.handleMousedownEvent=function(t){try{if("onfocus"===this.options.editModeEvent)for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2autoComplete_col_button")&&(!0===this.isOpen&&(this._bOpen=!0),this._skipFind=!0,e.stop());n.f.stopPropagation(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.focus=function(){try{this._focusSkip=!0,h.q.prototype.focus.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}}},7704:function(t,e,i){"use strict";i.r(e),i.d(e,{balloonTip:function(){return a}});var o=i(5461),s=i(8971),r=i(2406),a=function(t,e,i){r.q.call(this,t,e,i)};o.q.extend(a.prototype,r.q.prototype),a.prototype.defaultOptions={pluginType:"uiplugin.balloonTip",pluginName:"balloonTip",editable:!0},a.prototype.initialize=function(t){},a.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2balloonTip'>"),t.push("<table id='"+this.id+"_mytable' class='w2balloonTip_table'>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_topleft'></td>"),t.push("<td class='w2balloonTip_col_topcenter'></td>"),t.push("<td class='w2balloonTip_col_topright'></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td class='w2balloonTip_col_centerleft'><div class='w2balloonTip_left'></div></td>"),t.push("<td class='w2balloonTip_col_centercenter'>"),t.push("<div id='"+this.id+"_label' role='tooltip' class='w2balloonTip_label'>12121212</div>"),t.push("</td>"),t.push("<td class='w2balloonTip_col_centerright'><div class='w2balloonTip_right'></div></td>"),t.push("</tr>"),t.push("<tr>"),t.push("<td id='bleft' class='w2balloonTip_col_bottomleft'></td>"),t.push("<td class='w2balloonTip_col_bottomcenter'></td>"),t.push("<td id='bright' class='w2balloonTip_col_bottomright'></td>"),t.push("</tr>"),t.push("</table>"),t.push("</div>"),t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},a.prototype.setAction=function(){try{this.dom.label=document.getElementById(this.id+"_label")}catch(t){s.Y.printStackTrace(t,null,this)}},a.prototype.setValue=function(t){try{this.dom.label.innerHTML=t}catch(t){s.Y.printStackTrace(t,null,this)}},a.prototype.getValue=function(){try{return this.dom.label.innerHTML}catch(t){s.Y.printStackTrace(t,null,this)}}},4228:function(t,e,i){"use strict";i.r(e),i.d(e,{button:function(){return l}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2406),l=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(l.prototype,n.q.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.button",pluginName:"button",userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onfocus","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove","onkeydown","onkeypress","onkeyup"],parseChild:!0,parseAttributes:!0,useConfig:!0,type:"button",label:"",localeRef:"",useLocale:!1,title:"",initStyle:!1,animationType:"",animationColor:"",tooltipPositionX:"",tooltipPositionY:""},l.prototype.initialize=function(t){try{if(this.evented=!1,this.options.label,this.options.useLocale&&this.options.localeRef){var e=this.getLocaleValue(this.options.localeRef);e&&(this.options.label=e)}var i=this.options.initStyle;this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.initStyle=i||"",this.options.tooltipPositionX=this.options.tooltipShowPositionX||this.options.tooltipPositionX,this.options.tooltipPositionY=this.options.tooltipShowPositionY||this.options.tooltipPositionY}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{
var t=[],e=this.options.type?" type='"+this.options.type+"'":" type='button'",i=""==this.options.tabIndex?" tabIndex='0'":" tabIndex='"+this.options.tabIndex+"'",o=this.options.label.wq_replaceAll("'","&#39;"),r=""==o?"":" data-label ='"+o+"'",a=""==this.options.title?"":" title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",n=""==this.options.style?"":"style='"+this.options.style+"'",l=this.options.className?" "+this.options.className+"'":"'";if(t.push("<button"+e+i+" id='"+this.id+"' "+n+" class='w2button"+l+r+a+">"),"bubble"===this.options.animationType)t.push("<em class='btn_bubble_content'>"+o+"</em>"),t.push("<i class='btn_bubble_bubbles'></i>");else{var h=!1,d=this.getChildren();if(d.length>0)for(var c=0;c<d.length;c++)t.push(d[c].toHTML()),d[c].element&&3==d[c].element.nodeType&&(h=!0);h||t.push(o)}return t.push("</button>"),t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}this.dom.input=document.getElementById(this.id),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),"bubble"===this.options.animationType&&this.event.addListener(this.render,"onpointerdown",this.event.bindAsEventListener(this,this.handlePointerDownEvent))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{this.options.disabled||(this.options.value=t,"button"==this.options.type.toLowerCase()&&(this.dom.input.value=t,this.render.innerHTML=t))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setLabel(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.options.value}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.value}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{"button"==this.options.type&&((t=t.wq_trim()).startsWith("url")?this.render.style.backgroundImage=this.getURL(t):this.render.style.backgroundImage="url("+this.getURL(t)+")")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getBackgroundImage=function(){try{return"button"==this.options.type?this.getStyle("background-image"):""}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getType=function(){try{return this.options.type}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{var i=this.render;switch(t){case"disabled":if(1==e||"disabled"==e)WebSquare.getBody().hideToolTip();1==e?this.addClass(i,"w2button_disabled"):this.removeClass(i,"w2button_disabled");break;case"readOnly":1==e?this.addClass(i,"w2button_readOnly"):this.removeClass(i,"w2button_readOnly")}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMouseoverEvent=function(){try{if(1==this.options.disabled)return;this.addClass(row,"w2button_over")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(){try{if(1==this.options.disabled)return;this.removeClass(row,"w2button_over"),this.removeClass(row,"w2button_press")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMousedownEvent=function(){try{var t=this.getElementById(this.id+"_row");this.addClass(t,"w2button_press")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMouseupEvent=function(){try{var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2button_press")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,
t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=a.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=a.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handlePointerDownEvent=function(t){try{this.options.animationColor;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("btn_bubble")){var i=e.getElement(),o=i.getElementsByClassName("btn_bubble_bubbles")[0];if(o){var r=this.options.animationColor||WebSquare.util.getStyleProperty(i,"color"),n=document.createElement("i");n.className="btn_bubble_bubble",o.appendChild(n);var l=a.Z._animationEnd();n.addEventListener(l,(function(){this.remove()}));var h=t.pageX,d=t.pageY,c=i.getBoundingClientRect(),u=h-c.left,p=d-c.top;o.style.webkitTransform="translate3d("+u+"px,"+p+"px,0)",o.style.transform="translate3d("+u+"px,"+p+"px,0)",n.style.backgroundColor=r}}e=null}catch(t){s.Y.printStackTrace(t,null,this)}}},2280:function(t,e,i){"use strict";i.r(e),i.d(e,{calendar:function(){return c}});var o=i(5461),s=i(8971),r=i(1204),a=i(3406),n=i(2338),l=i(2256),h=i(2406),d=i(1304),c=function(t,e,i){this.defaultOptions.yearSuffix=a.B.getMessage("Calendar_yearsuffix"),h.q.call(this,t,e,i)};o.q.extend(c.prototype,h.q.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.calendar",pluginName:"calendar",userEvents:["ondateselect","onconfirm","oncancel","onchange","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","ondblclick"],useConfig:!0,dateFormat:"",delimiter:"",calendarClass:"class1",monthNames:"",yearSuffix:"",calendarValueType:"yearMonthDate",wmode:!1,holiday:"",holidayRef:"",disabledDate:"",enabledDate:"*",keepFocusSelect:!1,minYear:1978,maxYear:2030,serverSync:!1,serverSyncType:"once",useUnlimitedYear:!0,initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,cancelButtonHide:!1,resetButtonShow:!1,footerDiv:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,renderType:"component",pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",backlink:"",useYearSelect:!0,useMonthSelect:!0,displayFormat:"",displayFormatFunc:"",visibleRowNum:5,weekStartsOn:0,focusOnStart:!0,displayHrMinSec:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeAfterDate:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",useMonthYearFormat:!1,keepFixedDate:!1,useButton:!1,highlightSelectedWeek:!1,displayDayType:"image",showToday:!0,senseReader:!1,chooseOption:!1,visibleWeekNum:6,todaySelect:!1,dayMoveFixed:!1,dateMoveFixed:!1,accessibility:!1,useRole:!1,selectRenderType:"",fixedMonth:!1},c.prototype.initialize=function(t){try{if(!0===this.options.accessibility&&(this.options.senseReader=!0,this.options.renderType="native",this.options.displayDayType="textNative",this.options.useRole=!0,this.options.focusOnOuterDiv=!0,this.options.focusOnStart=!1,this.options.cancelButtonShow=!0,this.options.cancleButtonShow=!0,this.options.selectRenderType="native",this.options.footerDiv=!0),this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,
"yearMonthDateTime"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmm":"yearMonthDateHour"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMddHH":"yearMonthDate"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.dateFormat=this.options.dateFormat||"yyyyMM":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.dateFormat=this.options.dateFormat||"yyyyMMddHHmmSS"),this.todayHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id),this.fixedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id,{useUnlimitedYear:this.options.useUnlimitedYear,maxYear:this.options.maxYear}),this.selectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id,{useUnlimitedYear:this.options.useUnlimitedYear,maxYear:this.options.maxYear}),this.oldYearValue=this.todayHelper.getYear(),this.oldMonthValue=this.todayHelper.getMonth(),"dynamic"==this.options.pickerType){this.pickerSelectedDateHelper=new WebSquare.uiplugin.dateHelper(this.options.serverSync,this.scope_id);for(var e,i=this.pickerSelectedDateHelper.getYear(),o=[],l=this.options.maxYear-(this.options.minYear-1),h=this.options.minYear,c=Math.ceil(l/12),u=0;u<c;u++){var p=[];e=u==c-1?this.options.maxYear:h+11,p.push(h),p.push(e),o.push(p),i>=h&&i<=e&&(this.pickerSelectedDateHelper.selectedDecadeIndex=u,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(u/12)),h+=12}this.pickerSelectedDateHelper.decadeArr=o}var g,m,f;if(this.holidayXpath(),this.formatter=WebSquare.format.createFormatter("date",this.options.dateFormat,null,null,null,null,this.scope_id,this.id),this.objCellClass={},"yearMonth"==this.options.calendarValueType&&("dynamic"==this.options.pickerType?this.options.calendarClass="classYearMonth_dynamic":this.options.outsideClickEvent?this.options.calendarClass="classYearMonth_outsideClick_"+this.options.calendarClass:this.options.calendarClass="classYearMonth_"+this.options.calendarClass),"year"==this.options.calendarValueType&&("dynamic"==this.options.pickerType||(this.options.calendarClass="classYear_"+this.options.calendarClass)),this.minYear=this.options.minYear,this.maxYear=this.options.maxYear,"dynamic"==this.options.pickerType&&("year"==this.options.calendarValueType?this.dynamicCalendarStatus="year":"yearMonth"==this.options.calendarValueType?this.dynamicCalendarStatus="month":this.dynamicCalendarStatus="day",this._initDisabledMonthInfo()),r.Z.isMobile()&&(this.options.mobileRenderType?this.options.renderType=this.options.mobileRenderType:this.options.renderType="native"),this.dayIndexArray=[0,1,2,3,4,5,6],this.shiftDay=0-this.options.weekStartsOn,this.shiftDayIndex(this.shiftDay),this.options.visibleHourList)g=this.options.visibleHourList.split(",");else{g=[];for(u=0;u<24;u++)g.push(u+"")}if(this.options.visibleMinList)m=this.options.visibleMinList.split(",");else{m=[];for(u=0;u<60;u++)m.push(u+"")}if(this.options.visibleSecList)f=this.options.visibleSecList.split(",");else{f=[];for(u=0;u<60;u++)f.push(u+"")}var b=this._getYearList();if("native"==this.options.renderType){if(this.selectboxYearHTMLstr=[],this.options.useYearSelect){this.selectboxYearHTMLstr.push("<select id='"+this.id+"_selectbox_year' class='w2calendar_selectbox_year_native' title='"+a.B.getMessage("Calendar_select_year")+"' >");for(var y=0;y<b.length;y++)this.selectboxYearHTMLstr.push("\t<option value='"+b[y]+" '>"+b[y]+this.options.yearSuffix+"</option>");this.selectboxYearHTMLstr.push("</select>")}else{var v=d.o.createControl((this.org_id||this.id)+"_selectbox_year",{className:"w2calendar_selectbox_year_native",labelWidthAuto:!1,wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"
},null,this.scope_obj,!0,this.parentFrame);for(y=0;y<b.length;y++)v.addItemArr(b[y]+this.options.yearSuffix,b[y]);this.addControl(v)}if(this.selectboxMonthHTMLstr=[],this.options.useMonthSelect){this.selectboxMonthHTMLstr.push("<select id='"+this.id+"_selectbox_month' class='w2calendar_selectbox_month_native'  title='"+a.B.getMessage("Calendar_select_month")+"' >");for(var w=a.B.getMessage("Calendar_monthnames").split(","),S=this.options.monthNames?this.options.monthNames.split(","):w,_=0;_<12;_++){var C=_+1,x=S[_]||_+1;this.selectboxMonthHTMLstr.push("   <option value='"+C+" '>"+x+"</option>")}this.selectboxMonthHTMLstr.push("</select>")}else{var I=d.o.createControl((this.org_id||this.id)+"_selectbox_month",{className:"w2calendar_selectbox_month_native",labelWidthAuto:!1,wmode:this.options.wmode,readOnly:!0,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame);for(w=a.B.getMessage("Calendar_monthnames").split(","),S=this.options.monthNames?this.options.monthNames.split(","):w,_=0;_<12;_++){x=S[_]||_+1;I.addItemArr(x,_+1)}this.addControl(I)}this.selectboxHourHTMLstr=[],this.selectboxHourHTMLstr.push("<select id='"+this.id+"_selectbox_hour' class='w2calendar_selectbox_hour_mobile'  title='"+a.B.getMessage("Calendar_select_hour")+"' onchange='WebSquare.event.fireEvent(WebSquare.util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var T=0;T<g.length;T++)this.selectboxHourHTMLstr.push("    <option value='"+g[T]+" '>"+g[T]+"</option>");this.selectboxHourHTMLstr.push("</select>"),this.selectboxMinuteHTMLstr=[],this.selectboxMinuteHTMLstr.push("<select id='"+this.id+"_selectbox_minute' class='w2calendar_selectbox_minute_mobile' title='"+a.B.getMessage("Calendar_select_minute")+"' onchange='WebSquare.event.fireEvent(WebSquare.util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var k=0;k<m.length;k++)this.selectboxMinuteHTMLstr.push("  <option value='"+m[k]+" '>"+m[k]+"</option>");this.selectboxMinuteHTMLstr.push("</select>"),this.selectboxSecondHTMLstr=[],this.selectboxSecondHTMLstr.push("<select id='"+this.id+"_selectbox_second' class='w2calendar_selectbox_second_mobile' title='"+a.B.getMessage("Calendar_select_second")+"' onchange='WebSquare.event.fireEvent(WebSquare.util.getComponentById(\""+this.id+'"),"onchange");\'>');for(var L=0;L<f.length;L++)this.selectboxSecondHTMLstr.push("  <option value='"+f[L]+" '>"+f[L]+"</option>");this.selectboxSecondHTMLstr.push("</select>")}else{var A="",D="";this.options.useMonthYearFormat?(A="w2calendar_selectbox_year_monthAfter",D="w2calendar_selectbox_month_yearBefore"):(A="w2calendar_selectbox_year",D="w2calendar_selectbox_month");for(v=d.o.createControl((this.org_id||this.id)+"_selectbox_year",{className:A,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:a.B.getMessage("Calendar_select_year"),readOnly:!this.options.useYearSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame),I=d.o.createControl((this.org_id||this.id)+"_selectbox_month",{className:D,labelWidthAuto:!1,submenuSize:"auto",wmode:this.options.wmode,title:a.B.getMessage("Calendar_select_month"),readOnly:!this.options.useMonthSelect,chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame),y=0;y<b.length;y++)v.addItemArr(b[y]+this.options.yearSuffix,b[y]);for(w=a.B.getMessage("Calendar_monthnames").split(","),S=this.options.monthNames?this.options.monthNames.split(","):w,_=0;_<12;_++){x=S[_]||_+1;I.addItemArr(x,_+1)}v.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoYear(this.getValue())}}}],v.options.xmlEvents=[{name:"onviewchange",action:"script",param:{
handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoYear(this.getValue()),o!=(e=i.getValue())&&n.f.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),"year"===W.options.calendarValueType&&(W.options.skipConfirm||W.options.skipConfirmOnly)&&W.hasClass(document.activeElement,"w2calendar_selectbox_year")&&WebSquare.event.fireEvent(W,"onconfirm"),(o=t.oldValue)!=(e=t.newValue)&&n.f.fireEvent(i,"onyearselect",{oldValue:o,newValue:e})}}}],I.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){this.getParent().gotoMonth(this.getValue())}}}];var W=this;if(I.options.xmlEvents=[{name:"onviewchange",action:"script",param:{handler:function(t){var e,i=this.getParent(),o=i.getValue();i.gotoMonth(this.getValue()),o!=(e=i.getValue())&&n.f.fireEvent(i,"onviewchange",{oldValue:o,newValue:e}),"yearMonth"===W.options.calendarValueType&&(W.options.skipConfirm||W.options.skipConfirmOnly)&&n.f.fireEvent(W,"onconfirm"),(o=t.oldValue)!=(e=t.newValue)&&n.f.fireEvent(i,"onmonthselect",{oldValue:o,newValue:e})}}},{name:"onclose",action:"script",param:{handler:function(t){var e=this.getParent(),i=e.getValue();e.gotoMonth(this.getValue()),i==e.getValue()&&"yearMonth"===W.options.calendarValueType&&(W.options.skipConfirm||W.options.skipConfirmOnly)&&n.f.fireEvent(W,"onconfirm")}}}],this.addControl(v),this.addControl(I),"yearMonthDateHour"==this.options.calendarValueType||"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType)if(this.options.displayHrMinSec){var q=function(t,e){try{var i=WebSquare.idCache[e];if(t=parseInt(t,10),isNaN(t))return!1;if(t<0||t>=i.getItemCount())return!!i.options.emptyItem&&(i.selectedIndex=-1,i.dom.label.innerHTML="",i.itemTable&&i.itemTable.setSelectedIndex(0),!0);i.selectedIndex=t;var o=i.itemArr[t].label+"";return o.indexOf("&")>-1&&(o=o.wq_replaceAll("&","&amp;")),i.options.escape&&(o=WebSquare.xml._encode(o)),i.dom.label&&(o=parseInt(o,10),i.dom.label.innerHTML=o),i.itemTable&&i.render.setAttribute("aria-activedescendant",i.itemTable.id+"_"+t),!0}catch(t){s.Y.printStackTrace(t,null,i)}},M=d.o.createControl((this.org_id||this.id)+"_selectbox_hour",{className:"w2calendar_selectbox_hour",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank",renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame);for(T=0;T<g.length;T++)M.addItem(g[T],a.B.getMessage("Calendar_valuetype_hour"));if(M.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],M.setSelectedIndexNM=function(t){return q(t,this.uuid)},this.addControl(M),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){var E=d.o.createControl((this.org_id||this.id)+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank",renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame);for(k=0;k<m.length;k++)E.addItem(m[k],a.B.getMessage("Calendar_valuetype_minute"));if(E.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],E.setSelectedIndexNM=function(t){return q(t,this.uuid)},this.addControl(E),"yearMonthDateTimeSec"==this.options.calendarValueType){var R=d.o.createControl((this.org_id||this.id)+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank",
renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame);for(L=0;L<f.length;L++)R.addItem(f[L],a.B.getMessage("Calendar_valuetype_second"));R.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],R.setSelectedIndexNM=function(t){return q(t,this.uuid)},this.addControl(R)}}}else{for(M=d.o.createControl((this.org_id||this.id)+"_selectbox_hour",{className:"w2calendar_selectbox_hour",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_hour"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,displayMode:"1",delimiter:"$blank",renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame),T=0;T<g.length;T++)M.addItemArr(g[T],g[T]);if(M.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],this.addControl(M),"yearMonthDateTime"==this.options.calendarValueType||"yearMonthDateTimeSec"==this.options.calendarValueType){for(E=d.o.createControl((this.org_id||this.id)+"_selectbox_minute",{className:"w2calendar_selectbox_minute",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_minute"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame),k=0;k<m.length;k++)E.addItemArr(m[k],m[k]);if(E.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],this.addControl(E),"yearMonthDateTimeSec"==this.options.calendarValueType){for(R=d.o.createControl((this.org_id||this.id)+"_selectbox_second",{className:"w2calendar_selectbox_second",submenuSize:"auto",labelWidthAuto:!1,title:a.B.getMessage("Calendar_select_second"),chooseOption:this.options.chooseOption,visibleRowNum:this.options.visibleRowNum,renderType:this.options.selectRenderType,pluginName:"selectbox"},null,this.scope_obj,!0,this.parentFrame),L=0;L<f.length;L++)R.addItemArr(f[L],f[L]);R.options.xmlEvents=[{name:"onchange",action:"script",param:{handler:function(t){n.f.fireEvent(this.getParent(),"onchange")}}}],this.addControl(R)}}}}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=r.Z.getDataPrefix("name"),e=[],i=""==this.options.title?"":"title='"+this.options.title+"'",n=""==this.options.style?"":"style='"+this.options.style+"'",l=""==this.options.tabIndex?this.options.focusOnOuterDiv?"tabIndex='0'":"":"tabIndex='"+this.options.tabIndex+"'",h="native"===this.options.selectRenderType?" w2calendar_footer_native":"";if(e.push("<div id='"+this.id+"' "+t+"='"+this.id+"' "+n+" class='w2calendar w2calendar_"+this.options.calendarClass+" "+this.options.className+"' role='calendar' "+i+" "+l+">"),!0===this.options.senseReader&&r.Z.isMobile()&&e.push("<button id='"+this.id+"_start' "+t+"='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2calendar w2calendar_start'>"+a.B.getMessage("Calendar_start")+"</button>"),e.push("<div class='w2calendar_wrap'>"),"dynamic"==this.options.pickerType?(e.push("<div class='w2calendar_picker_header'>"),e.push("<div id='"+this.id+"_picker_header_last_entity' class='w2calendar_picker_header_last_entity' role='button' tabindex='0' title=''></div>"),e.push("<div id='"+this.id+"_picker_header_dynamic_entity' class='w2calendar_picker_header_dynamic_entity' role='button' tabindex='0' title=''></div>"),e.push("<div id='"+this.id+"_picker_header_next_entity' class='w2calendar_picker_header_next_entity' role='button' tabindex='0' title=''></div>"),e.push("</div>")):(e.push("<div class='w2calendar_header'>"),
"native"==this.options.renderType?(e.push("<button id='"+this.id+"_last_year' class='w2calendar_header_last_year' title='"+a.B.getMessage("Calendar_previous_year")+"'>"+a.B.getMessage("Calendar_previous_year")+"</button>"),e.push("<button class='w2calendar_header_last_month' title='"+a.B.getMessage("Calendar_previous_month")+"'>"+a.B.getMessage("Calendar_previous_month")+"</button>")):(e.push("<div id='"+this.id+"_last_year' "+t+"='"+this.id+"_last_year' class='w2calendar_header_last_year' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_previous_year")+"'></div>"),e.push("<div class='w2calendar_header_last_month' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_previous_month")+"'></div>")),"native"==this.options.renderType?(e.push(this.options.useYearSelect?this.selectboxYearHTMLstr.join(""):this.getChild(this.id+"_selectbox_year").toHTML()),e.push(this.options.useMonthSelect?this.selectboxMonthHTMLstr.join(""):this.getChild(this.id+"_selectbox_month").toHTML())):(e.push(this.getChild(this.id+"_selectbox_year").toHTML()),e.push(this.getChild(this.id+"_selectbox_month").toHTML())),"native"==this.options.renderType?(e.push("<button class='w2calendar_header_next_month' title='"+a.B.getMessage("Calendar_next_month")+"'>"+a.B.getMessage("Calendar_next_month")+"</button>"),"year"==this.options.calendarValueType?e.push("<button class='w2calendar_header_next_year_yearType' title='"+a.B.getMessage("Calendar_next_year")+"'>"+a.B.getMessage("Calendar_next_year")+"</button>"):e.push("<button class='w2calendar_header_next_year' title='"+a.B.getMessage("Calendar_next_year")+"'>"+a.B.getMessage("Calendar_next_year")+"</button>")):(e.push("<div class='w2calendar_header_next_month' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_next_month")+"'></div>"),"year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_next_year_yearType' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_next_year")+"'></div>"):e.push("<div class='w2calendar_header_next_year' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_next_year")+"'></div>")),1==r.Z.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<button id='"+this.id+"_today_btn' title='"+a.B.getMessage("Calendar_today")+"' class='w2calendar_go_today'>"+a.B.getMessage("Calendar_today")+"</button>"):e.push("<div class='w2calendar_go_today' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div>"),1!=this.options.cancleButtonShow||this.options.cancelButtonHide||(e.push("<td class='w2calendar_blank' ></td>"),"native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' title='"+a.B.getMessage("Calendar_cancel")+"' >"+a.B.getMessage("Calendar_cancel")+"</a></td>"):e.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div></td>"))),"yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this.options.outsideClickEvent||(this.options.skipConfirm&&!this.options.skipConfirmOnly||("year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_btn_ok_yearType' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"'></div>"):this.options.useButton?e.push("<button class='w2inputCalendar_header_btn_ok_div' >"+a.B.getMessage("Calendar_ok")+"</button>"):e.push("<div class='w2calendar_header_btn_ok' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"'></div>")),
this.options.cancelButtonHide||("year"==this.options.calendarValueType?e.push("<div class='w2calendar_header_btn_close_yearType' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_close")+"'></div>"):this.options.useButton?e.push("<button class='w2inputCalendar_header_btn_close_div' >"+a.B.getMessage("Calendar_close")+"</button>"):e.push("<div class='w2calendar_header_btn_close' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_close")+"'></div>"))),e.push("</div>")),"dynamic"==this.options.pickerType){var d="";"html5"!=o.q.docType&&(d=" summary='calendar period'"),e.push("<div id='"+this.id+"_picker_content' class='w2calendar_picker_content' style='display:none;'>"),e.push("<table class='w2calendar_picker_content_table w2calendar_picker_content_table_border_spacing' "+d+">"),e.push("<tbody>"),e.push("<tr>"),e.push("<td>");for(var c=r.Z.getDataPrefix("index"),u=0;u<12;u++)e.push("<div id='"+this.id+"_picker_cell_"+u+"' "+c+"='"+u+"' role='button' class='w2calendar_picker_cell'>"),e.push("<span style='display: table-cell; vertical-align: middle;'></span>"),e.push("</div>");e.push("</td>"),e.push("</tr>"),e.push("</tbody>"),e.push("</table>"),e.push("</div>")}d="";"html5"!=o.q.docType&&(d=" summary='"+(d=this.options.summary?this.options.summary:a.B.getMessage("Calendar_summary"))+"'");var p=this.options.caption?this.options.caption:a.B.getMessage("Calendar_caption"),g=!0===this.options.useRole?" role='grid'":"",m=!0===this.options.useRole?" role='row'":"";e.push("<div id='"+this.id+"_content' class='w2calendar_content'>"),e.push("<table class='w2calendar_content_table'"+d+g+">"),e.push("<caption class='w2blind'>"+p+"</caption>"),e.push("<thead>"),e.push("<tr"+m+">");for(var f=!0===this.options.useRole?" role='columnheader'":"",b=0;b<7;b++){var y=a.B.getMessage("Calendar_weekdaynames_"+this.dayIndexArray[b]);if("native"==this.options.renderType||"textNative"===this.options.displayDayType)if("text"===this.options.displayDayType||"textNative"===this.options.displayDayType){var v=a.B.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[b]);e.push("<th class='w2calendar_col_day_text w2calendar_day_text_"+this.dayIndexArray[b]+"' title='"+y+"' scope='col'"+f+">"+v+"</th>")}else e.push("<th class='w2calendar_col_day w2calendar_day"+this.dayIndexArray[b]+"' title='"+y+"' scope='col'>"+y+"</th>");else if("text"===this.options.displayDayType){v=a.B.getMessage("Calendar_weekdaynames_short_"+this.dayIndexArray[b]);e.push("<td class='w2calendar_col_day_text'><div class='w2calendar_day w2calendar_day_text_"+this.dayIndexArray[b]+"' title='"+y+"' >"+v+"</div></td>")}else e.push("<td class='w2calendar_col_day'><div class='w2calendar_day w2calendar_day"+this.dayIndexArray[b]+"' title='"+y+"' ></div></td>")}e.push("</tr>"),e.push("</thead>");for(var w=this.options.visibleWeekNum,S=!0===this.options.useRole?" role='gridcell'":"",_=0;_<w;_++){e.push("<tr"+m+">");for(var C=0;C<7;C++)e.push("<td id='"+this.id+"_cell_"+_+"_"+C+"'"+S+"></td>");e.push("</tr>")}e.push("</table>"),e.push("</div>");var x=this.options.resetButtonShow;if(this.options.footerDiv){if(e.push("<div class='w2calendar_footer"+h+"'>"),"yearMonthDate"==this.options.calendarValueType){"native"==this.options.renderType?e.push("<button class='w2calendar_go_today w2calendar_go_today_div' title='"+a.B.getMessage("Calendar_today")+"'>"+a.B.getMessage("Calendar_today")+"</button>"):e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div>"),e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>");T=1==this.options.cancleButtonShow&&!this.options.cancelButtonHide,k="";x&&T&&(k="4"),e.push("<div class='w2calendar_blank"+k+" w2calendar_blank_div'></div>"),
x&&("native"==this.options.renderType?e.push("<a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_reset w2calendar_date_reset_div w2calendar_date_reset_div_native' role='button' title='"+a.B.getMessage("Calendar_reset")+"'>"+a.B.getMessage("Calendar_reset")+"</a>"):e.push("<div class='w2calendar_date_reset w2calendar_date_reset_div' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div>")),T&&("native"==this.options.renderType?e.push("<a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel w2calendar_date_cancel_div w2calendar_date_cancel_div_native' role='button' title='"+a.B.getMessage("Calendar_cancel")+"'>"+a.B.getMessage("Calendar_cancel")+"</a>"):e.push("<div class='w2calendar_date_cancel w2calendar_date_cancel_div' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div>"))}else"yearMonthDateHour"==this.options.calendarValueType?"native"==this.options.renderType?(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"'>"+a.B.getMessage("Calendar_ok")+"</a>"),x&&e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' >"+a.B.getMessage("Calendar_reset")+"</a>"),this.options.cancelButtonHide||e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"'>"+a.B.getMessage("Calendar_cancel")+"</a>")):(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div>"),x&&e.push("<div class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div>"),this.options.cancelButtonHide||e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTime"==this.options.calendarValueType?"native"==this.options.renderType?(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile w2calendar_footer_date_mobile_div'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' >"+a.B.getMessage("Calendar_ok")+"</a>"),x&&e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"'>"+a.B.getMessage("Calendar_reset")+"</a>"),this.options.cancelButtonHide||e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"'>"+a.B.getMessage("Calendar_cancel")+"</a>")):(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date w2calendar_footer_date_div'></span>"),e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div>"),
e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div>"),x&&e.push("<div class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div>"),this.options.cancelButtonHide||e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></span>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.selectboxHourHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.selectboxMinuteHTMLstr.join("")+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_sec_div'>"+this.selectboxSecondHTMLstr.join("")+"</div>"),e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' >"+a.B.getMessage("Calendar_ok")+"</a>"),x&&e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' >"+a.B.getMessage("Calendar_reset")+"</a>"),this.options.cancelButtonHide||e.push("<a href='#"+this.options.backlink+"' class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"'>"+a.B.getMessage("Calendar_cancel")+"</a>")):(e.push("<span id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></span>"),e.push("<div class='w2calendar_go_today w2calendar_go_today_div' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div>"),e.push("<div class='w2calendar_footer_hour_div'>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_min_div'>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</div>"),e.push("<span class='w2calendar_footer_colon'> : </span>"),e.push("<div class='w2calendar_footer_sec_div'>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</div>"),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<div class='w2calendar_time_confirm w2calendar_time_confirm_div' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div>"),x&&e.push("<div class='w2calendar_time_reset w2calendar_time_reset_div' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div>"),this.options.cancelButtonHide||e.push("<div class='w2calendar_time_cancel w2calendar_time_cancel_div' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div>")));e.push("</div>")}else{if(e.push("<table class='w2calendar_footer"+h+"'><tr>"),"yearMonthDate"==this.options.calendarValueType){0==r.Z.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today' title='"+a.B.getMessage("Calendar_today")+"' >"+a.B.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div></td>"));var I="",T=1==this.options.cancleButtonShow&&0==r.Z.getBoolean(this.options.topLayout)&&!this.options.cancelButtonHide;x&&T&&(I=" w2calendar_currentdate_nowrap"),e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date"+I+"'></div></td>");var k="";x&&T&&(k="2",
"native"==this.options.renderType&&(k="4")),(T||x)&&e.push("<td class='w2calendar_blank"+k+"'></td>"),x&&("native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_reset' role='button' title='"+a.B.getMessage("Calendar_reset")+"' >"+a.B.getMessage("Calendar_reset")+"</a></td>"):e.push("<td><div class='w2calendar_date_reset' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div></td>")),T&&("native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_date_cancel' role='button' title='"+a.B.getMessage("Calendar_cancel")+"' >"+a.B.getMessage("Calendar_cancel")+"</a></td>"):e.push("<td><div class='w2calendar_date_cancel' role='button' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div></td>"))}else if("yearMonthDateHour"==this.options.calendarValueType){0==r.Z.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today' title='"+a.B.getMessage("Calendar_today")+"'>"+a.B.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div></td>"));I="";var T=!this.options.cancelButtonHide;x&&T&&(I=" w2calendar_currentdate_nowrap"),"native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile"+I+"'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date"+I+"'></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div></td>"),x&&("native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_time_reset' role='button' title='"+a.B.getMessage("Calendar_reset")+"' >"+a.B.getMessage("Calendar_reset")+"</a></td>"):e.push("<td><div class='w2calendar_time_reset' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div></td>")),this.options.cancelButtonHide||e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div></td>")}else"yearMonthDateTime"==this.options.calendarValueType?(0==r.Z.getBoolean(this.options.topLayout)&&("native"==this.options.renderType?e.push("<td><button class='w2calendar_go_today' title='"+a.B.getMessage("Calendar_today")+"' >"+a.B.getMessage("Calendar_today")+"</button></td>"):e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.B.getMessage("Calendar_today")+"' tabindex='0'></div></td>")),"native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_mobile'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date'></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div></td>"),x&&("native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_time_reset' role='button' title='"+a.B.getMessage("Calendar_reset")+"'>"+a.B.getMessage("Calendar_reset")+"</a></td>"):e.push("<td><div class='w2calendar_time_reset' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div></td>")),
this.options.cancelButtonHide||e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div></td>")):"yearMonthDateTimeSec"==this.options.calendarValueType&&("native"==this.options.renderType?(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<td>"+this.selectboxHourHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxMinuteHTMLstr.join("")+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.selectboxSecondHTMLstr.join("")+"</td>")):(e.push("<td><div id='"+this.id+"_currentDate' class='w2calendar_footer_date_sec'></div></td>"),e.push("<td><div class='w2calendar_go_today' role='button' title='"+a.B.getMessage("Calendar_today")+"' ></div></td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_hour").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_minute").toHTML()+"</td>"),e.push("<td> : </td>"),e.push("<td>"+this.getChild(this.id+"_selectbox_second").toHTML()+"</td>")),this.options.skipConfirm&&!this.options.skipConfirmOnly||e.push("<td><div class='w2calendar_time_confirm' tabindex='0' title='"+a.B.getMessage("Calendar_ok")+"' ></div></td>"),x&&("native"==this.options.renderType?e.push("<td><a href='#"+this.options.backlink+"' id='"+this.id+"_backlink' class='w2calendar_time_reset' role='button' title='"+a.B.getMessage("Calendar_reset")+"' >"+a.B.getMessage("Calendar_reset")+"</a></td>"):e.push("<td><div class='w2calendar_time_reset' tabindex='0' title='"+a.B.getMessage("Calendar_reset")+"' ></div></td>")),this.options.cancelButtonHide||e.push("<td><div class='w2calendar_time_cancel' tabindex='0' title='"+a.B.getMessage("Calendar_cancel")+"' ></div></td>"));e.push("</tr></table>")}return e.push("</div></div>"),e.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{if(!this.options.displayFormat&&this.options.displayFormatFunc){var t=r.Z.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof t&&(this.options.displayFormat=t.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.delimiter?this.options.displayFormat="yyyy"+this.options.delimiter+"MM":this.options.displayFormat="yyyy/MM","yearMonthDate"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(this.options.delimiter?this.options.displayFormat+=this.options.delimiter+"dd":this.options.displayFormat+="/dd")),this.render.style.width="",this.render.style.height="",this.dom.content=document.getElementById(this.id+"_content"),this.dom.currentDate=document.getElementById(this.id+"_currentDate"),this.dom.selectboxYear=document.getElementById(this.id+"_selectbox_year"),this.dom.selectboxMonth=document.getElementById(this.id+"_selectbox_month"),this.dom.selectboxHour=document.getElementById(this.id+"_selectbox_hour"),this.dom.selectboxMinute=document.getElementById(this.id+"_selectbox_minute"),this.dom.selectboxSecond=document.getElementById(this.id+"_selectbox_second"),WebSquare.style.adjustZIndex(this.uuid,this.uuid,"calendar"),"dynamic"==this.options.pickerType){this.dom.pickerLastEntity=document.getElementById(this.id+"_picker_header_last_entity"),this.dom.pickerDynamicEntity=document.getElementById(this.id+"_picker_header_dynamic_entity"),this.dom.pickerNextEntity=document.getElementById(this.id+"_picker_header_next_entity"),this.dom.pickerContent=document.getElementById(this.id+"_picker_content"),this.dom.pickerCells=[];for(var e=0;e<12;e++)this.dom.pickerCells.push(document.getElementById(this.id+"_picker_cell_"+e));"year"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("year"),
this._setDynamicHeaderHTML("year")):"yearMonth"===this.options.calendarValueType?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month")):this._setDynamicHeaderHTML("month")}if(!1===this.options.showToday){var i;if(r.Z.isIE(8)||r.Z.isIE(7)||r.Z.isIE(6)){var o;o="native"==this.options.renderType?this.render.getElementsByTagName("button"):this.render.getElementsByTagName("div");for(e=0;e<o.length;e++)if("w2calendar_go_today"===o[e].className){i=o[e];break}}else i=this.render.getElementsByClassName("w2calendar_go_today")[0];this.addClass(i,"w2calendar_go_today_hidden")}else if("yearMonthDateTime"==this.options.calendarValueType){var a=this.getElementById(this.id+"_currentDate");a&&(a.style.display="none")}this.options.fixedMonth&&this._setFixedMonth(this.options.fixedMonth)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{this.refresh(),r.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),!0!==this.options.accessibility&&this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),"dynamic"!=this.options.pickerType&&(this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.selectboxYearEvent)),this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.selectboxMonthEvent)),this.event.addListener2(this.dom.selectboxYear,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.event.addListener2(this.dom.selectboxMonth,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.dom.selectboxHour&&this.event.addListener2(this.dom.selectboxHour,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.dom.selectboxMinute&&this.event.addListener2(this.dom.selectboxMinute,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)}))),this.dom.selectboxSecond&&this.event.addListener2(this.dom.selectboxSecond,"onmousewheel",this.event.bindAsEventListener(this,(function(t){n.f.stopPropagation(t)})))),"native"==this.options.renderType&&(this.dom.selectboxYear&&this.event.addListener2(this.dom.selectboxYear,"onchange",this.event.bindAsEventListener(this,this.handleYearChange)),this.dom.selectboxMonth&&this.event.addListener2(this.dom.selectboxMonth,"onchange",this.event.bindAsEventListener(this,this.handleMonthChange))),this.options.holidayRef&&this.refreshItemset()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.selectboxYearEvent=function(t){this.gotoYear(t.srcElement?t.srcElement.value:t.originalTarget.value)},c.prototype.selectboxMonthEvent=function(t){this.gotoMonth(t.srcElement?t.srcElement.value:t.originalTarget.value)},c.prototype.refresh=function(){try{if(this.holidayXpath(),this.updateCalendar(),this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();e&&(this.selectedDateHelper.setDateAllByString(e),this.setSelectedDay(this.selectedDateHelper.getDate()),this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat)),
t!=this.getValue()&&n.f.fireEvent(this,"onchange"))}if("yearMonth"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType&&(this.options.keepFixedDate?this.dom.currentDate.innerHTML=this.todayHelper.getFormatDateAll(this.options.displayFormat):1==this.options.dateMoveFixed?this.dom.currentDate.innerHTML=this.fixedDateHelper.getFormatDateAll(this.options.displayFormat):this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat),!r.Z.isMobile()&&"none"!=this.getStyle("display")))for(var i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){var l=this.getElementById(this.id+"_cell_"+i+"_"+o);if(l){var h=l;if("native"!=this.options.renderType||r.Z.isMobile()||null==(h=l.getElementsByTagName("button")[0])&&(h=l),this.__hasClass(l,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{this.options.focusOnStart&&l.firstChild.focus()}catch(t){s.Y.printStackTrace(t,null,this)}}else try{l.setAttribute("tabIndex","0"),!0===this.options.accessibility&&l.setAttribute("aria-selected","true"),this.options.focusOnStart&&l.focus()}catch(t){s.Y.printStackTrace(t,null,this)}h.setAttribute("title",a.B.getMessage("Calendar_select_title"))}else l.removeAttribute("tabIndex"),!0===this.options.accessibility&&l.setAttribute("aria-selected","false"),h.removeAttribute("title")}}this.broadcast({linkedDataList:["refresh"]})}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.updateCalendar=function(){try{var t=this.selectedDateHelper.getYear(),e=this.selectedDateHelper.getMonth(),i=this.selectedDateHelper.getDate(),o=this.selectedDateHelper.getHour(),n=this.selectedDateHelper.getMinute(),l=this.selectedDateHelper.getSecond(),h=this.todayHelper.getYear(),d=this.todayHelper.getMonth(),c=this.todayHelper.getDate(),u=!1;if(t===h&&e===d&&(u=!0),"dynamic"!==this.options.pickerType)if("native"==this.options.renderType){if(this.options.useYearSelect)for(var p=0;p<this.dom.selectboxYear.options.length;p++)this.dom.selectboxYear.options[p].value==t&&(this.dom.selectboxYear.options[p].selected=!0);else this.getChild(this.id+"_selectbox_year").setValue(t);if(this.options.useMonthSelect)for(p=0;p<this.dom.selectboxMonth.options.length;p++)this.dom.selectboxMonth.options[p].value==e&&(this.dom.selectboxMonth.options[p].selected=!0);else this.getChild(this.id+"_selectbox_month").setValue(e)}else this.getChild(this.id+"_selectbox_year").setValue(t),this.getChild(this.id+"_selectbox_month").setValue(e),"yearMonthDateHour"==this.options.calendarValueType&&this.options.serverSync?this.getChild(this.id+"_selectbox_hour").setValue(o):"yearMonthDateTime"==this.options.calendarValueType&&this.options.serverSync?(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(n)):"yearMonthDateTimeSec"==this.options.calendarValueType&&this.options.serverSync&&(this.getChild(this.id+"_selectbox_hour").setValue(o),this.getChild(this.id+"_selectbox_minute").setValue(n),this.getChild(this.id+"_selectbox_second").setValue(l));var g=this.selectedDateHelper.getMonthCount(),m=this.selectedDateHelper.getFirstDay();(m+=this.shiftDay)<=0&&(m+=7);var f=this.options.visibleWeekNum,b=0,y=new WebSquare.uiplugin.dateHelper;y.setDateAllByString(this.selectedDateHelper.getDateAll()),y.setLastMonth();var v=y.getMonthCount(),w=1==e?t-1:t,S=1==e?12:e-1,_=12==e?t+1:t,C=12==e?1:e+1,x=new WebSquare.uiplugin.dateHelper;x.setDateAllByString(this.selectedDateHelper.getDateAll()),x.setNextMonth();var I=x.getMonthCount(),T=this.options.disableAfterDate,k=this.options.disableBeforeDate,L=this.options.disabledDate;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var A=this.options.ioFormat;if(T&&(T=WebSquare.text.unformatDate(A.substr(0,8),T)),k&&(k=WebSquare.text.unformatDate(A.substr(0,8),k)),L){var D=L.split(" ");for(p=0;p<D.length;p++)D[p]=WebSquare.text.unformatDate(A.substr(0,8),D[p]);L=D.join(" ")}}
for(var W=0;W<f;W++)for(var q=0;q<7;q++){var M=++b-m,E=(m+M-1)%7,R="",N=this.getElementById(this.id+"_cell_"+W+"_"+q);if(N){if(k){if(8==k.length)var F=parseInt(k.substr(0,4),10)||0,O=parseInt(k.substr(4,2),10)||0,B=parseInt(k.substr(6,2),10)||0;var P=F>this.selectedDateHelper.getYear()||F==this.selectedDateHelper.getYear()&&O>this.selectedDateHelper.getMonth()||F==this.selectedDateHelper.getYear()&&O==this.selectedDateHelper.getMonth()&&B>M}else P=this.options.disableBeforeToday&&(this.todayHelper.getYear()>this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()>this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()>M);if(T){if(8==T.length)F=parseInt(T.substr(0,4),10)||0,O=parseInt(T.substr(4,2),10)||0,B=parseInt(T.substr(6,2),10)||0;var Y=F<this.selectedDateHelper.getYear()||F==this.selectedDateHelper.getYear()&&O<this.selectedDateHelper.getMonth()||F==this.selectedDateHelper.getYear()&&O==this.selectedDateHelper.getMonth()&&B<M}else Y=this.options.disableAfterToday&&(this.todayHelper.getYear()<this.selectedDateHelper.getYear()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()<this.selectedDateHelper.getMonth()||this.todayHelper.getYear()==this.selectedDateHelper.getYear()&&this.todayHelper.getMonth()==this.selectedDateHelper.getMonth()&&this.todayHelper.getDate()<M);var V=r.Z.getDataPrefix("index");if(M<1)R=v+M,N.innerHTML=R,P||Y||this.options.fixedMonth?(N.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth w2calendar_date_disable",this.options.fixedMonth&&(N.style.cursor="default")):N.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_lastmonth",N.setAttribute(V,R),N.setAttribute("title",a.B.getMessage("Calendar_tooltip",w,S<10?"0"+S:S,R)),N.removeAttribute("tabIndex"),!0===this.options.accessibility&&N.setAttribute("aria-selected","false");else if(M>g){if((R=M-g)>I&&(R-=I,g+=I,x.setNextMonth(),I=x.getMonthCount()),N.innerHTML=R,Y||P||this.options.fixedMonth?(N.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth w2calendar_date_disable",this.options.fixedMonth&&(N.style.cursor="default")):N.className="w2calendar_col_date w2calendar_date w2calendar_date_off w2calendar_date_nextmonth",N.setAttribute(V,R),N.setAttribute("title",a.B.getMessage("Calendar_tooltip",_,C<10?"0"+C:C,R)),N.removeAttribute("tabIndex"),!0===this.options.accessibility&&N.setAttribute("aria-selected","false"),this.options.highlightSelectedWeek&&6===q&&M-q<=i&&i<=M)for(var H=0;H<7;H++){var j=this.getElementById(this.id+"_cell_"+W+"_"+H);this.addClass(j,"w2calendar_selected_week")}}else{var z,G;R=M;var Z=t+""+(G=e<10?"0"+e:e)+(z=M<10?"0"+R:R),U="*"+G+z;if(i===M?(-1!==L.indexOf(Z)&&-1===this.options.enabledDate.indexOf(Z)?N.className="w2calendar_col_date w2calendar_date_"+M+" w2calendar_date_disable":-1!==this.options.holiday.indexOf(Z)?N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+M+" w2calendar_holiday w2calendar_selected "+(this.objCellClass[Z]||""):N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+M+" w2calendar_day_"+this.dayIndexArray[E]+" w2calendar_selected "+(this.objCellClass[Z]||""),N.setAttribute("tabindex","0"),
!0===this.options.accessibility&&N.setAttribute("aria-selected","true")):(-1===L.indexOf(Z)&&-1===L.indexOf("*")||-1!==this.options.enabledDate.indexOf(Z)?-1!==this.options.holiday.indexOf(Z)||-1!==this.options.holiday.indexOf(U)?N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+M+" w2calendar_holiday "+(this.objCellClass[Z]||""):N.className="w2calendar_col_date w2calendar_date_on w2calendar_date_"+M+" w2calendar_day_"+this.dayIndexArray[E]+" "+(this.objCellClass[Z]||""):N.className="w2calendar_col_date w2calendar_date_"+M+" w2calendar_date_disable",N.removeAttribute("tabIndex"),!0===this.options.accessibility&&N.setAttribute("aria-selected","false")),u&&c===M&&(N.className+=" w2calendar_today"),(P||Y)&&(N.className="w2calendar_col_date w2calendar_date_"+M+" w2calendar_date_disable"),"native"!=this.options.renderType||r.Z.isMobile()||!0===this.options.accessibility?N.innerHTML=R:N.innerHTML="<button>"+R+"</button>",this.options.highlightSelectedWeek&&6===q&&M-q<=i&&i<=M)for(H=0;H<7;H++){j=this.getElementById(this.id+"_cell_"+W+"_"+H);this.addClass(j,"w2calendar_selected_week")}N.setAttribute("title",""),N.setAttribute(V,M)}}}"dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")),6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.holidayXpath=function(){try{if(""!=this.options.holidayRef)if(this.options.holidayRef.match("data:")){var t=this.options.holidayRef.replace(/^data:/,"").split("."),e=t[0],i=this.modelControl.getDataComp(e,{type:"aliasDataCollection"});if(i){var o="";i.getRowCount()>0&&(o=i.getColData(t[1]).join(" ").replace(/[^0-9*\s*]/g,"")),this.options.holiday=o,WebSquare.DataCollection.api.addRelation(this.id,i.id)}}else for(var r=WebSquare.ModelUtil.findInstanceNodes(this.options.holidayRef,null,this.scope_id),a=0;a<r.length;a++){var n=WebSquare.xml.serialize(r[a]).replace(/[^0-9*\s*]/g,"");-1==this.options.holiday.indexOf(n)&&(this.options.holiday=this.options.holiday+" "+n)}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoCalendar=function(t){try{if(r.Z.isNull(t))return;t=t.toString();var e=this.getValue();1==this.options.dateMoveFixed&&this.fixedDateHelper.setDateAllByString(t),this.selectedDateHelper.setDateAllByString(t);var i=this.selectedDateHelper.getYear(),o=!1;if(this.options.selectUnlimitedYear)for(var a=this.options.selectUnlimitedYear.split(","),l=0;l<a.length;l++)a[l]==i&&(o=!0);if(i<this.minYear&&!o&&this._gotoYear(this.minYear,!1),i>this.maxYear&&!o&&(this.options.useUnlimitedYear&&"9999"==i?this._gotoYear(i,!1):this._gotoYear(this.maxYear,!1)),"native"==this.options.renderType&&e.substring(0,6)==this.getValue().substring(0,6)?(this.setSelectedDay(this.selectedDateHelper.getDate()),this.dom.currentDate&&(this.dom.currentDate.innerHTML=this.selectedDateHelper.getFormatDateAll(this.options.displayFormat))):this.refresh(),this.getValue()!=e&&n.f.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),"dynamic"==this.options.pickerType){switch("day"!==this.dynamicCalendarStatus&&"month"!==this.dynamicCalendarStatus&&"year"!==this.dynamicCalendarStatus&&"decade"!==this.dynamicCalendarStatus&&(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"),this.dynamicCalendarStatus){case"month":this.setSelectedDay(this.selectedDateHelper.getMonth()-1);break;case"year":this.setSelectedDay(this.selectedDateHelper.getYear())}this.pickerSelectedDateHelper.setDateAllByString(t),this._refreshDynamicSelectedDecateIndex(),"year"===this.options.calendarValueType?(this._setDynamicHeaderHTML("year"),this._drawDynamicTable("year")):this._setDynamicHeaderHTML("month")}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoToday=function(){try{
this.options.serverSync&&this.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType});var t=this.todayHelper.getYear(),e=this.todayHelper.getMonth(),i=this.todayHelper.getDate();this.gotoCalendar(this.getDateString(t,e,i)),this._pickerStatusRefresh()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoNextYear=function(){try{var t=this.getValue();this.selectedDateHelper.setNextYear(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextYear(),this.refresh(),this.getValue()!=t&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoNextMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setNextMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setNextMonth(),this.refresh(),this.getValue()!=t&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoLastYear=function(){try{var t=this.getValue();this.selectedDateHelper.setLastYear(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastYear(),this.refresh(),this.getValue()!=t&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoLastMonth=function(){try{var t=this.getValue();this.selectedDateHelper.setLastMonth(),"dynamic"==this.options.pickerType&&this.pickerSelectedDateHelper.setLastMonth(),this.refresh(),this.getValue()!=t&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoYear=function(t){try{this._gotoYear(t,!0)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._gotoYear=function(t,e){try{e=void 0===e||e;var i=this.getValue();this.selectedDateHelper.setYear(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setYear(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=i&&e&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoMonth=function(t){try{var e=this.getValue();this.selectedDateHelper.setMonth(t),this.selectedDateHelper._checkValidDate(),"dynamic"==this.options.pickerType&&(this.pickerSelectedDateHelper.setMonth(t),this.pickerSelectedDateHelper._checkValidDate()),this.refresh(),this.getValue()!=e&&n.f.fireEvent(this,"onchange")}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.gotoTime=function(t,e,i){try{if(this.options.visibleHourList||(t=parseInt(t,10)),this.options.visibleMinList||(e=parseInt(e,10)),this.options.visibleSecList||(i=parseInt(i,10)),"native"==this.options.renderType)if("yearMonthDateHour"==this.options.calendarValueType){var o=this.dom.selectboxHour.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxHour.value!=o&&n.f.fireEvent(this,"onchange")}else if("yearMonthDateTime"==this.options.calendarValueType){o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value;this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value!=o&&n.f.fireEvent(this,"onchange")}else"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value,this.dom.selectboxHour.value=parseInt(t,10)+" ",this.dom.selectboxMinute.value=parseInt(e,10)+" ",this.dom.selectboxSecond.value=parseInt(i,10)+" ",this.dom.selectboxHour.value+"_"+this.dom.selectboxMinute.value+"_"+this.dom.selectboxSecond.value!=o&&n.f.fireEvent(this,"onchange"));else{var r=this.getChild(this.id+"_selectbox_hour"),a=this.getChild(this.id+"_selectbox_minute"),l=this.getChild(this.id+"_selectbox_second");o=null;"yearMonthDateHour"==this.options.calendarValueType?(o=r.getValue(),r.setValue(t),r.getValue()!=o&&n.f.fireEvent(this,"onchange")):"yearMonthDateTime"==this.options.calendarValueType?(o=r.getValue()+"_"+a.getValue(),r.setValue(t),a.setValue(e),
r.getValue()+"_"+a.getValue()!=o&&n.f.fireEvent(this,"onchange")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(o=r.getValue()+"_"+a.getValue()+"_"+l.getValue(),r.setValue(t),a.setValue(e),l.setValue(i),r.getValue()+"_"+a.getValue()+"_"+l.getValue()!=o&&n.f.fireEvent(this,"onchange"))}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{var t="";return"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType||"year"==this.options.calendarValueType?t=this.getDate():"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.getDate()+""+this.getTime()),t}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getDate=function(){try{var t="";if("yearMonthDate"==this.options.calendarValueType)t=1==this.options.dateMoveFixed?this.fixedDateHelper.getDateAll():this.selectedDateHelper.getDateAll();else if("yearMonth"==this.options.calendarValueType){var e=this.selectedDateHelper.getYear(),i=this.selectedDateHelper.getMonth();parseInt(i)<10&&(i="0"+i),t=e+""+i}else if("year"==this.options.calendarValueType){t=(e=this.selectedDateHelper.getYear())+""}else"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType||(t=this.selectedDateHelper.getDateAll());return t}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getTime=function(){try{var t="";if("yearMonthDateHour"==this.options.calendarValueType){if("native"==this.options.renderType)var e=this.dom.selectboxHour.value.wq_trim();else e=this.getChild(this.id+"_selectbox_hour").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),t=e+""}else if("yearMonthDateTime"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim();var i=this.dom.selectboxMinute.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),t=e+""+i}else if("yearMonthDateTimeSec"==this.options.calendarValueType){if("native"==this.options.renderType){e=this.dom.selectboxHour.value.wq_trim(),i=this.dom.selectboxMinute.value.wq_trim();var o=this.dom.selectboxSecond.value.wq_trim()}else e=this.getChild(this.id+"_selectbox_hour").getValue(),i=this.getChild(this.id+"_selectbox_minute").getValue(),o=this.getChild(this.id+"_selectbox_second").getValue();parseInt(e,10)<10&&e.length<2&&(e="0"+e),parseInt(i,10)<10&&i.length<2&&(i="0"+i),parseInt(o,10)<10&&o.length<2&&(o="0"+o),t=e+""+i+o}return t}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getDateFormat=function(){try{return this.options.dateFormat}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getFormattedValue=function(){try{var t=this.getValue();if("yearMonthDate"==this.options.calendarValueType)if(""!=(n=this.getDateFormat()||"")){var e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6);t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)}else t=this.formatter.format(t);else if("yearMonth"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4);t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)}else t=this.formatter.format(t)}else if("yearMonthDateHour"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8);var r=t.substring(8,10);t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)}else t=this.formatter.format(t)}else if("yearMonthDateTime"==this.options.calendarValueType){if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10);var a=t.substring(10)
;t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)}else t=this.formatter.format(t)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){var n;if(""!=(n=this.getDateFormat()||"")){e=t.substring(0,4),i=t.substring(4,6),o=t.substring(6,8),r=t.substring(8,10),a=t.substring(10,12);var l=t.substring(12);t=(t=(t=(t=(t=(t=n.replace(/yyyy/gi,e)).replace(/MM/g,i)).replace(/dd/gi,o)).replace(/HH/gi,r)).replace(/mm/g,a)).replace(/SS/gi,l)}else t=this.formatter.format(t)}return t}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedDay=function(){try{return"yearMonth"==this.options.calendarValueType?"":this.selectedDateHelper.getDayStr(this.selectedDateHelper.getDay())}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setDateFormat=function(t){try{var e="";if("yearMonthDate"==this.options.calendarValueType){if(t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return e=a.B.getMessage("Calendar_info1",this.id)||"Since the calendarValueType option of "+this.id+" is 'yearMonthDate', the strings that can be used as arguments for the setDateFormat API are yyyy, MM, and dd.",void l.v.printLog(e)}else if("yearMonth"==this.options.calendarValueType){if(t.indexOf("dd")>0||t.indexOf("HH")>0||t.indexOf("mm")>0||t.indexOf("SS")>0)return e=a.B.getMessage("Calendar_info2",this.id)||"Since the calendarValueType option of "+this.id+" is 'yearMonth', the strings that can be used as arguments for the setDateFormat API are yyyy, MM.",void l.v.printLog(e)}else if("yearMonthDateHour"==this.options.calendarValueType){if(t.indexOf("mm")>0||t.indexOf("SS")>0)return e=a.B.getMessage("Calendar_info3",this.id)||"Since the calendarValueType option of "+this.id+" is 'yearMonthDateHour', the strings that can be used as arguments for the setDateFormat API are yyyy, MM, dd, HH.",void l.v.printLog(e)}else if("yearMonthDateTime"==this.options.calendarValueType){if(t.indexOf("SS")>0)return e=a.B.getMessage("Calendar_info4",this.id)||"Since the calendarValueType option of "+this.id+" is 'yearMonthDateTime', the strings that can be used as arguments for the setDateFormat API are yyyy, MM, dd, HH, mm.",void l.v.printLog(e)}else this.options.calendarValueType;this.options.dateFormat=t,this.formatter.setMasking(t)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setSkin=function(t){try{"class1"!=t&&"class2"!=t&&"class3"!=t&&"class4"!=t&&"class5"!=t||(this.changeClass(this.render,"w2calendar_"+this.options.calendarClass,"w2calendar_"+t),this.options.calendarClass=t)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{if(""===this.options.initValue?this.gotoToday():this.gotoCalendar(this.options.initValue),t.fireEvent){var e=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(this,"ondateselect",this.getFormattedValue(),e)}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.updateYearSelect=function(t,e){try{var i=this.getChild(this.id+"_selectbox_year"),o=i.getValue();t&&(this.options.minYear=t,this.minYear=t),e&&(this.options.maxYear=e,this.maxYear=e),i.removeAll(),i.itemTable=null;for(var r=this._getYearList(),a=0;a<r.length;a++)i.addItemArr(r[a]+this.options.yearSuffix,r[a]);if(o<t||o>e){o<t?(i.setValue(t),this.gotoYear(t)):o>e&&(i.setValue(e),this.gotoYear(e));var n=this.getFormattedValue();n=this.parentControl.validator.validateString(n),n=this.parentControl.sub_validator.validateString(n),""!=this.parentControl.getValue()&&this.parentControl.setValue(n),this.gotoCalendar(n),this.selectedDateHelper.setDateAll(n.substring(0,4),n.substring(4,6),n.substring(6,8),n.substring(8,10),n.substring(10,12),n.substring(12,14))}else i.setValue(o)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{if(t=r.Z.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),this.render.disabled=t,
1==t?this.addClass("w2calendar_disabled"):this.removeClass("w2calendar_disabled"),"dynamic"===this.options.pickerType){if(this.render.getElementsByClassName("w2calendar_picker_header")[0])for(var e=this.render.querySelectorAll("div.w2calendar_picker_header > *"),i=0;i<e.length;i++)e[i].setAttribute("tabindex",t?"-1":"0");return}"native"===this.options.renderType?"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled")):"yearMonthDateHour"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled")):"yearMonthDateTime"==this.options.calendarValueType?t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),this.dom.selectboxMinute.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),this.dom.selectboxMinute.removeAttribute("disabled")):"yearMonthDateTimeSec"==this.options.calendarValueType&&(t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled"),this.dom.selectboxHour.setAttribute("disabled","disabled"),this.dom.selectboxMinute.setAttribute("disabled","disabled"),this.dom.selectboxSecond.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"),this.dom.selectboxHour.removeAttribute("disabled"),this.dom.selectboxMinute.removeAttribute("disabled"),this.dom.selectboxSecond.removeAttribute("disabled"))):"yearMonthDate"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t)):"yearMonthDateHour"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t)):"yearMonthDateTime"==this.options.calendarValueType?(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t)):"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t),this.getChild(this.id+"_selectbox_hour").setDisabled(t),this.getChild(this.id+"_selectbox_minute").setDisabled(t),this.getChild(this.id+"_selectbox_second").setDisabled(t))}catch(t){s.Y.printStackTrace(t)}return t},c.prototype.setFixedMonth=function(t){try{null==t&&(t=!0),t=r.Z.getBoolean(t),this.options.fixedMonth=t,this._setFixedMonth(t),this.updateCalendar()}catch(t){s.Y.printStackTrace(t)}},c.prototype._setFixedMonth=function(t){try{var e;if(t=r.Z.getBoolean(t),"dynamic"===this.options.pickerType){if(e=this.render.getElementsByClassName("w2calendar_picker_header")[0]){this._setReadonlyStyle(e,t,"w2calendar_header_readonly"),t?this.addClass(e,"w2calendar_readonly_hover_effects"):this.removeClass(e,"w2calendar_readonly_hover_effects");for(var i=this.render.querySelectorAll("div.w2calendar_picker_header > *"),o=0;o<i.length;o++)this._setReadonlyStyle(i[o],t,"w2calendar_header_readonly")}return}
e=this.render.getElementsByClassName("w2calendar_header")[0];var a,n=this.render.getElementsByClassName("w2calendar_header_last_year")[0],l=this.render.getElementsByClassName("w2calendar_header_next_year")[0]||this.render.getElementsByClassName("w2calendar_header_next_year_yearType")[0],h=this.render.getElementsByClassName("w2calendar_header_last_month")[0],d=this.render.getElementsByClassName("w2calendar_header_next_month")[0],c=this.render.getElementsByClassName("w2calendar_header_btn_ok")[0]||this.render.getElementsByClassName("w2calendar_header_btn_ok_yearType")[0],u=this.render.getElementsByClassName("w2calendar_header_btn_close")[0]||this.render.getElementsByClassName("w2calendar_header_btn_close_yearType")[0];e&&("native"===this.options.renderType?(a="w2calendar_disabled",this._setReadonlyStyle(this.dom.selectboxYear,t,a),this._setReadonlyStyle(this.dom.selectboxMonth,t,a),t?(this.dom.selectboxYear.setAttribute("disabled","disabled"),this.dom.selectboxMonth.setAttribute("disabled","disabled")):(this.dom.selectboxYear.removeAttribute("disabled"),this.dom.selectboxMonth.removeAttribute("disabled"))):(a="w2calendar_header_readonly",this.getChild(this.id+"_selectbox_year").setDisabled(t),this.getChild(this.id+"_selectbox_month").setDisabled(t)),this._setReadonlyStyle(e,t,a),this._setReadonlyStyle(n,t,a),this._setReadonlyStyle(l,t,a),this._setReadonlyStyle(h,t,a),this._setReadonlyStyle(d,t,a),"yearMonth"!==this.options.calendarValueType&&"year"!==this.options.calendarValueType||(this._setReadonlyStyle(c,t,a),this._setReadonlyStyle(u,t,a)))}catch(t){s.Y.printStackTrace(t)}},c.prototype._setReadonlyStyle=function(t,e,i){try{t&&(!0===e?(t.setAttribute("aria-readonly","true"),t.setAttribute("tabindex","-1"),t.style.hasOwnProperty("cursor")&&(t.style.cursor="default"),i&&this.addClass(t,i)):(t.removeAttribute("aria-readonly"),t.setAttribute("tabindex","0"),t.style.hasOwnProperty("cursor")&&(t.style.cursor="pointer"),i&&this.removeClass(t,i)))}catch(t){s.Y.printStackTrace(t)}},c.prototype.handleFocusEvent=function(t){try{if((t.srcElement?t.srcElement:t.originalTarget)==this.render){if("yearMonth"==this.options.calendarValueType){var e=this.getElementById(this.id+"_selectbox_year");return void(e&&e.focus())}var i,o,r;for(i=0;i<this.options.visibleWeekNum;i++)for(o=0;o<7;o++)if(r=this.getElementById(this.id+"_cell_"+i+"_"+o),this.__hasClass(r,"w2calendar_selected")){if("native"==this.options.renderType){if(0==this.options.keepFocusSelect)try{r.firstChild.focus()}catch(t){s.Y.printStackTrace(t,null,this)}}else try{r.focus()}catch(t){s.Y.printStackTrace(t,null,this)}return}}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e&&9!=e)return;if(13==e){var i=!1;if(this.options.accessibility){var o=WebSquare.event.getTarget(t);(this.hasClass(o,"w2calendar_header_last_year")||this.hasClass(o,"w2calendar_header_next_year")||this.hasClass(o,"w2calendar_header_next_year_yearType")||this.hasClass(o,"w2calendar_header_last_month")||this.hasClass(o,"w2calendar_header_next_month"))&&(i=!0)}return void(i||this.handleClickEvent(t))}if("native"===this.options.renderType&&!0!==this.options.accessibility)return;var a,l="td",h=r.Z.getDataPrefix("index"),d=this.event.getTargetIterator(t,this.render),c=!1,u="year"===this.options.calendarValueType||"yearMonth"===this.options.calendarValueType;for(u&&"dynamic"===this.options.pickerType&&(l="div");d.next();)if(1==(a=d.getElement()).nodeType&&a.nodeName.toLowerCase()==l&&a.getAttribute(h)){c=!0;break}if(0==c)return;if(9==e)return void(u&&this.options.pickerType);if(u){if("dynamic"!==this.options.pickerType)return;var p=this.render.getElementsByClassName("w2calendar_picker_cell").length,g=a.id.substr((this.id+"_picker_cell_").length),m=parseInt(a.getAttribute(h));m<0&&(m=0),37==e||38==e?m>0&&m--:39!=e&&40!=e||m<p-1&&m++}else{g=a.id.substr((this.id+"_cell_").length);var f=-1,b=-1
;b=parseInt(g.substr(0,g.indexOf("_")),10),((f=parseInt(g.substr(g.indexOf("_")+1),10))<0||b<0)&&(f=b=0),37==e?--f<0&&(b>0?(f=6,b--):f=0):38==e?b>0&&b--:39==e?++f>6&&(b<7?(f=0,b++):f=6):40==e&&b<7&&b++}var y=document.getElementById(this.id+"_cell_"+b+"_"+f);if(u&&"dynamic"===this.options.pickerType&&(y=document.getElementById(this.id+"_picker_cell_"+m)),null==y)return;a.setAttribute("tabIndex",-1),y.setAttribute("tabIndex",0),y.focus(),n.f.stopEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedDay=function(t){try{var e=r.Z.getDataPrefix("index");if("selectbox"===this.options.pickerType)for(var i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){if((l=this.getElementById(this.id+"_cell_"+i+"_"+o))&&this.hasClass(l,"w2calendar_date_on")){var n=l;"native"!=this.options.renderType||r.Z.isMobile()||null==(n=l.getElementsByTagName("button")[0])&&(n=l),l.getAttribute(e)==t?(this.addClass(l,"w2calendar_selected"),n.setAttribute("title",a.B.getMessage("Calendar_select_title")),!0===this.options.accessibility&&l.setAttribute("aria-selected","true"),l.setAttribute("tabIndex","0")):(this.removeClass(l,"w2calendar_selected"),n.removeAttribute("title"),!0===this.options.accessibility&&l.setAttribute("aria-selected","false"),l.removeAttribute("tabIndex"))}}else if("dynamic"===this.options.pickerType)if("year"==this.options.calendarValueType||"yearMonth"==this.options.calendarValueType)for(var l=0;l<12;l++){var h=this.getElementById(this.id+"_picker_cell_"+l);if(h){var d=h.getAttribute(e);"year"==this.options.calendarValueType&&"year"===this.dynamicCalendarStatus&&(d=h.firstChild.innerText),d==t?(this.addClass(h,"active"),h.setAttribute("tabIndex","0"),h.setAttribute("aria-selected","true"),h.setAttribute("title",a.B.getMessage("Calendar_select_title"))):(this.removeClass(h,"active"),h.removeAttribute("title"),h.setAttribute("aria-selected","false"),h.removeAttribute("tabIndex"))}}else for(i=0;i<this.options.visibleWeekNum;i++)for(o=0;o<7;o++){if((l=this.getElementById(this.id+"_cell_"+i+"_"+o))&&this.hasClass(l,"w2calendar_date_on")){n=l;"native"!=this.options.renderType||WebSquare.util.isMobile()||null==(n=l.getElementsByTagName("button")[0])&&(n=l),l.getAttribute(e)==t?(this.addClass(l,"w2calendar_selected"),n.setAttribute("title",a.B.getMessage("Calendar_select_title")),l.setAttribute("tabIndex","0"),l.setAttribute("aria-selected","true")):(this.removeClass(l,"w2calendar_selected"),n.removeAttribute("title"),l.removeAttribute("tabIndex"),l.setAttribute("aria-selected","false"))}}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setFocus=function(t){try{for(var e=r.Z.getDataPrefix("index"),i=0;i<this.options.visibleWeekNum;i++)for(var o=0;o<7;o++){var a=this.getElementById(this.id+"_cell_"+i+"_"+o);if(a&&(this.hasClass(a,"w2calendar_date_on")&&a.getAttribute(e)==t))return void a.focus()}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{h.q.prototype.hide.call(this),"yearMonth"==this.options.calendarValueType&&this.options.outsideClickEvent&&n.f.fireEvent(this,"onoutsideclick");for(var t=0;t<this.childControlList.length;t++){this.childControlList[t].hide()}}catch(t){s.Y.printStackTrace(t)}},c.prototype.show=function(t,e){try{e&&WebSquare.idCache[e]||(e=this.uuid),h.q.prototype.show.call(this,t),WebSquare.style.adjustZIndex(e,this.uuid,"calendar");for(var i=0;i<this.childControlList.length;i++){this.childControlList[i].show(t)}}catch(t){s.Y.printStackTrace(t)}},c.prototype.getDateString=function(t,e,i){try{void 0===t&&(t=this.selectedDateHelper.getYear()),void 0===e&&(e=this.selectedDateHelper.getMonth()),void 0===i&&(i=this.selectedDateHelper.getDate());var o=t+"",r=e+"",a=i+"";return 1==r.length&&(r="0"+r),1==a.length&&(a="0"+a),o+r+a}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{for(var e=r.Z.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render),o=this.getValue();i.next();){
if(i.match("w2calendar_header_last_year")||i.match("w2calendar_header_next_year")||i.match("w2calendar_header_next_year_yearType")||i.match("w2calendar_header_last_month")||i.match("w2calendar_header_next_month")||i.match("w2calendar_go_today"))for(var a=0;a<this.childControlList.length;a++){var l=this.childControlList[a];WebSquare.getBody().getLayerListener().hide(l.id)}if((i.match("w2calendar_date_disable")||i.match("w2calendar_month_disable"))&&(n.f.stopEvent(t),i.stop()),i.match("w2calendar_header_last_year")){if(!this.options.fixedMonth){if(this.selectedDateHelper.getYear()>this.minYear){var h=1;1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),1==this.options.dateMoveFixed&&(h=0),this.selectedDateHelper.setDate(h),this.gotoLastYear()}if("native"==this.options.renderType){var d=this.selectedDateHelper.getYear();(o=Number(this.oldYearValue))!=d&&n.f.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldYearValue=d}}i.stop()}if(i.match("w2calendar_header_next_year")||i.match("w2calendar_header_next_year_yearType")){if(!this.options.fixedMonth){h=1;if(1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),1==this.options.dateMoveFixed&&(h=0),(this.selectedDateHelper.getYear()<this.maxYear||this.options.useUnlimitedYear&&this.selectedDateHelper.getYear()==this.maxYear)&&(this.selectedDateHelper.setDate(h),this.gotoNextYear()),"native"==this.options.renderType){d=this.selectedDateHelper.getYear();(o=Number(this.oldYearValue))!=d&&n.f.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldYearValue=d}}i.stop()}if(i.match("w2calendar_header_last_month")){if(!this.options.fixedMonth){if(this.selectedDateHelper.getYear()>=this.minYear)if(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth());else{h=1;1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),1==this.options.dateMoveFixed&&(h=0),this.selectedDateHelper.setDate(h),this.gotoLastMonth()}if("native"==this.options.renderType){d=this.selectedDateHelper.getMonth();(o=Number(this.oldMonthValue))!=d&&n.f.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldMonthValue=d}}i.stop()}if(i.match("w2calendar_header_next_month")){if(!this.options.fixedMonth){h=1;if(1==this.options.dayMoveFixed&&(h=this.selectedDateHelper.getDate()),1==this.options.dateMoveFixed&&(h=0),this.selectedDateHelper.getYear()<=this.maxYear?this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()?this.options.useUnlimitedYear&&(this.selectedDateHelper.setDate(h),this.gotoNextMonth()):(this.selectedDateHelper.setDate(h),this.gotoNextMonth()):this.options.useUnlimitedYear&&"9999"==this.selectedDateHelper.getYear()&&this.selectedDateHelper.getMonth()<12&&(this.selectedDateHelper.setDate(h),this.gotoNextMonth()),"native"==this.options.renderType){d=this.selectedDateHelper.getMonth();(o=Number(this.oldMonthValue))!=d&&n.f.fireEvent(this.getParent(),"onyearselect",{oldValue:o,newValue:d}),this.oldMonthValue=d}}i.stop()}if(i.match("w2calendar_date_lastmonth")){if(1==this.options.disableBeforeAfterDate)return;var c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);if(c>=this.minYear)if(c==this.minYear&&1==u);else if(u>1?u-=1:(c-=1,u=12),this.options.nextLastMonthDateSelect){var g=new Date(c,u,p),m=this.getDateString(c,u,p);this.gotoCalendar(m),n.f.fireEvent(this,"ondateselect")}else this.gotoCalendar(this.getDateString(c,u,p)),this.setFocus(p);i.stop()}if(i.match("w2calendar_date_nextmonth")){if(1==this.options.disableBeforeAfterDate)return;c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);if(c<=this.maxYear)if(c==this.maxYear&&12==u);else if(u<12?u+=1:(c+=1,u=1),this.options.nextLastMonthDateSelect){g=new Date(c,u,p),m=this.getDateString(c,u,p);this.gotoCalendar(m),n.f.fireEvent(this,"ondateselect")
}else this.gotoCalendar(this.getDateString(c,u,p)),this.setFocus(p);i.stop()}if((i.match("w2calendar_header_btn_ok")||i.match("w2calendar_header_btn_ok_yearType")||i.match("w2inputCalendar_header_btn_ok_div"))&&(this.options.fixedMonth||n.f.fireEvent(this,"onconfirm"),i.stop()),(i.match("w2calendar_header_btn_close")||i.match("w2calendar_header_btn_close_yearType")||i.match("w2inputCalendar_header_btn_close_div"))&&(this.options.fixedMonth||n.f.fireEvent(this,"oncancel"),i.stop()),i.match("w2calendar_time_confirm")&&(n.f.fireEvent(this,"onconfirm"),i.stop()),i.match("w2calendar_time_cancel")&&(n.f.fireEvent(this,"oncancel"),n.f.stopEvent(t),i.stop()),i.match("w2calendar_date_cancel")&&(n.f.fireEvent(this,"oncancel"),n.f.stopEvent(t),i.stop()),(i.match("w2calendar_date_reset")||i.match("w2calendar_time_reset"))&&(n.f.fireEvent(this,"onreset"),n.f.stopEvent(t),i.stop()),i.match("w2calendar_go_today")){if("dynamic"===this.options.pickerType&&(this.dynamicCalendarStatus="day"),this.gotoToday(),"native"==this.options.renderType||this.options.todaySelect){c=this.todayHelper.getYear(),u=this.todayHelper.getMonth(),p=this.todayHelper.getDate(),g=new Date(c,u-1,p);n.f.fireEvent(this,"ondateselect",this.getFormattedValue(),g)}i.stop()}if(i.match("w2calendar_date_on")){c=this.selectedDateHelper.getYear(),u=this.selectedDateHelper.getMonth(),p=i.getElement().getAttribute(e);if("dynamic"===this.options.pickerType&&this._isDisabledMonth({year:c,month:u}))return;this.gotoCalendar(this.getDateString(c,u,p));g=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(this,"ondateselect",this.getFormattedValue(),g),i.stop()}if(i.match("w2calendar_picker_header_dynamic_entity")&&(this.options.fixedMonth||("day"==this.dynamicCalendarStatus?(WebSquare.style.setStyle(this.dom.content,"display","none"),WebSquare.style.setStyle(this.dom.pickerContent,"display","block"),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"):"month"==this.dynamicCalendarStatus?"month"!=this.options.fixPickerStatus&&(this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"):"year"==this.dynamicCalendarStatus&&(this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century"),this.dynamicCalendarStatus="decade")),i.stop()),i.match("w2calendar_picker_header_last_entity")&&!this.options.fixedMonth)if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()>=this.minYear&&(this.selectedDateHelper.getYear()==this.minYear&&1==this.selectedDateHelper.getMonth()||this._isDisabledMonth({year:this.selectedDateHelper.getYear(),month:this.selectedDateHelper.getMonth()-1})||(this.selectedDateHelper.setDate(1),this.gotoLastMonth(),this._setDynamicHeaderHTML("month"))),i.stop();else if("month"==this.dynamicCalendarStatus){(w=this.selectedDateHelper.getYear()-1)>=this.minYear&&(this._isDisabledYear({year:w})||(this.pickerSelectedDateHelper.setYear(w),this.selectedDateHelper.setYear(w),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year")))}else if("year"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.selectedDecadeIndex>0){var f=this.pickerSelectedDateHelper.selectedDecadeIndex-1,b=this.pickerSelectedDateHelper.decadeArr[f],y=!1;if(b)for(var v=b[0];v<=b[1];v++){if(!this._isDisabledYear(v)){y=!1;break}y=!0}y||(this.pickerSelectedDateHelper.selectedDecadeIndex-=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"))}}else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex-12<0)return;this.pickerSelectedDateHelper.startDecadeIndex-=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}
if(i.match("w2calendar_picker_header_next_entity")&&!this.options.fixedMonth)if("day"==this.dynamicCalendarStatus)this.selectedDateHelper.getYear()<=this.maxYear&&(this.selectedDateHelper.getYear()==this.maxYear&&12==this.selectedDateHelper.getMonth()||this._isDisabledMonth({year:this.selectedDateHelper.getYear(),month:this.selectedDateHelper.getMonth()+1})||(this.selectedDateHelper.setDate(1),this.gotoNextMonth(),this._setDynamicHeaderHTML("month"))),i.stop();else if("month"==this.dynamicCalendarStatus){var w;(w=this.selectedDateHelper.getYear()+1)<=this.maxYear&&(this._isDisabledMonth({year:w})||(this.pickerSelectedDateHelper.setYear(w),this.selectedDateHelper.setYear(w),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year")))}else if("year"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.selectedDecadeIndex<this.pickerSelectedDateHelper.decadeArr.length-1){f=this.pickerSelectedDateHelper.selectedDecadeIndex+1,b=this.pickerSelectedDateHelper.decadeArr[f],y=!1;if(b)for(v=b[0];v<=b[1];v++){if(!this._isDisabledYear(v)){y=!1;break}y=!0}y||(this.pickerSelectedDateHelper.selectedDecadeIndex+=1,this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"))}}else if("decade"==this.dynamicCalendarStatus){if(this.pickerSelectedDateHelper.startDecadeIndex+12>=this.pickerSelectedDateHelper.decadeArr.length)return;this.pickerSelectedDateHelper.startDecadeIndex+=12,this._drawDynamicTable("decade"),this._setDynamicHeaderHTML("century")}if(i.match("w2calendar_picker_cell")){if("month"==this.dynamicCalendarStatus){var S=parseInt(i.getElement().getAttribute(e),10);if("yearMonth"==this.options.calendarValueType){o=this.getValue();this.pickerSelectedDateHelper.setMonth(S+1),this.selectedDateHelper.setMonth(S+1),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("month");d=this.getValue();n.f.fireEvent(this,"onmonthselect",{oldValue:o,newValue:d})}else WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.pickerSelectedDateHelper.setMonth(S+1),this.gotoMonth(S+1),this._setDynamicHeaderHTML("month"),this.dynamicCalendarStatus="day"}else if("year"==this.dynamicCalendarStatus){S=parseInt(i.getElement().getAttribute(e),10);var _=this.pickerSelectedDateHelper.selectedDecadeIndex,C=this.pickerSelectedDateHelper.decadeArr;if(C[_][0]+S<=this.options.maxYear)if("year"==this.options.calendarValueType){o=this.getValue();this.pickerSelectedDateHelper.setYear(C[_][0]+S),this.selectedDateHelper.setYear(C[_][0]+S),this._drawDynamicTable("year"),this._setDynamicHeaderHTML("year");d=this.getValue();n.f.fireEvent(this,"onyearselect",{oldValue:o,newValue:d})}else this.pickerSelectedDateHelper.setYear(C[_][0]+S),this.selectedDateHelper.setYear(C[_][0]+S),this._drawDynamicTable("month"),this._setDynamicHeaderHTML("year"),this.dynamicCalendarStatus="month"}else if("decade"==this.dynamicCalendarStatus){S=parseInt(i.getElement().getAttribute(e),10);if(this.pickerSelectedDateHelper.selectedDecadeIndex=this.pickerSelectedDateHelper.startDecadeIndex+S,!i.getElement().firstChild.innerText)return;this._drawDynamicTable("year"),this._setDynamicHeaderHTML("decade"),this.dynamicCalendarStatus="year"}i.stop()}}i=null,o!=(d=this.getValue())&&n.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:d})}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{n.f.stopEvent(t)
;for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.addClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.addClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.addClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_date_cancel")?this.addClass(e.getElement(),"w2calendar_date_cancel_over"):e.match("w2calendar_time_cancel")?this.addClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_date_reset")?this.addClass(e.getElement(),"w2calendar_date_reset_over"):e.match("w2calendar_time_reset")?this.addClass(e.getElement(),"w2calendar_time_reset_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.options.fixedMonth||this.addClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&(this.options.fixedMonth||this.addClass(e.getElement(),"w2calendar_header_btn_close_over"));e=null}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{n.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2calendar_go_today")?this.removeClass(e.getElement(),"w2calendar_go_today_over"):e.match("w2calendar_date_on")?this.removeClass(e.getElement(),"w2calendar_date_over"):e.match("w2calendar_time_confirm")?this.removeClass(e.getElement(),"w2calendar_time_confirm_over"):e.match("w2calendar_date_cancel")?this.removeClass(e.getElement(),"w2calendar_date_cancel_over"):e.match("w2calendar_time_cancel")?this.removeClass(e.getElement(),"w2calendar_time_cancel_over"):e.match("w2calendar_date_reset")?this.removeClass(e.getElement(),"w2calendar_date_reset_over"):e.match("w2calendar_time_reset")?this.removeClass(e.getElement(),"w2calendar_time_reset_over"):e.match("w2calendar_header_btn_ok")||e.match("w2calendar_header_btn_ok_yearType")?this.removeClass(e.getElement(),"w2calendar_header_btn_ok_over"):(e.match("w2calendar_header_btn_close")||e.match("w2calendar_header_btn_close_yearType"))&&this.removeClass(e.getElement(),"w2calendar_header_btn_close_over");e=null}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleYearChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldYearValue);o!=i&&n.f.fireEvent(this,"onyearselect",{oldValue:o,newValue:i}),this.oldYearValue=i}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.handleMonthChange=function(t){try{var e=t.target||t.srcElement,i=Number(e.value),o=Number(this.oldMonthValue);o!=i&&n.f.fireEvent(this,"onmonthselect",{oldValue:o,newValue:i}),this.oldMonthValue=i}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getServerDate=function(){return WebSquare.date.getCurrentServerDate()},c.prototype.shiftDayIndex=function(t){if(t>0)for(var e=0;e<t;e++)this.dayIndexArray.unshift(this.dayIndexArray.pop());else for(e=0;e<Math.abs(t);e++)this.dayIndexArray.push(this.dayIndexArray.shift())},c.prototype.setCellClass=function(t,e){try{this.objCellClass[t]=e,this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.removeCellClass=function(t){try{this.objCellClass[t]="",this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.removeAllCellClass=function(){try{for(var t in this.objCellClass)this.objCellClass[t]="";this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.finalize=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()},c.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.modelControl.useItemset=!0,this.refreshItemset())}catch(t){s.Y.printStackTrace(t)}},c.prototype.refreshItemset=function(){try{var t=this.options.holidayRef.replace(/^data:/,"").split(".")[0],e=this.modelControl.getDataComp(t,{type:"aliasDataCollection"});null==this._dataList&&null!=e&&(this._dataList=e,
this._dataList.addChild(this),this.modelControl.useItemset=!0);var i=this.options.holiday.slice(0);this.holidayXpath(),i!=this.options.holiday&&this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.removeHoliday=function(){try{this.options.holiday="",this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.setDisabledDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t);for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.disableDate=function(t){this.setDisabledDate(t)},c.prototype.setEnabledDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.enableDate=function(t){this.setEnabledDate(t)},c.prototype.setDisableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t),this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.disableBeforeDate=function(t){this.setDisableBeforeDate(t)},c.prototype.setDisableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t),this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.disableAfterDate=function(t){this.setDisableAfterDate(t)},c.prototype.enableAllDate=function(){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",this.updateCalendar()}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t={};return t.ref=this.options.ref,t.holidayRef=this.options.holidayRef,t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t}return null}catch(t){s.Y.printStackTrace(t)}},c.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._setDynamicHeaderHTML=function(t){try{switch(t){case"month":var e=this.pickerSelectedDateHelper.getYear(),i=this.pickerSelectedDateHelper.getMonth(),o=a.B.getMessage("Calendar_monthnames").split(","),r=this.options.monthNames?this.options.monthNames.split(","):o;"month"==this.options.dynamicHeaderOrder?this.dom.pickerDynamicEntity.innerHTML="<span class='month'>"+r[i-1]+"</span><span class='year'>"+e+this.options.yearSuffix+"</span>":"year"==this.options.dynamicHeaderOrder&&(this.dom.pickerDynamicEntity.innerHTML="<span class='year'>"+e+this.options.yearSuffix+"</span><span class='month'>"+r[i-1]+"</span>");break;case"year":e=this.pickerSelectedDateHelper.getYear();this.dom.pickerDynamicEntity.innerHTML=e+this.options.yearSuffix;break;case"decade":var n=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex];this.dom.pickerDynamicEntity.innerHTML=n[0]+" - "+n[1];break;case"century":var l=this.pickerSelectedDateHelper.startDecadeIndex,h=l+11,d=this.pickerSelectedDateHelper.decadeArr;void 0===d[h]&&(h=d.length-1),this.dom.pickerDynamicEntity.innerHTML=d[l][0]+" - "+d[h][1]}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._drawDynamicTable=function(t){try{switch(t){case"month":for(var e=this.pickerSelectedDateHelper.getMonth(),i=this.pickerSelectedDateHelper.getYear(),o=a.B.getMessage("Calendar_monthnames").split(","),r=this.options.monthNames?this.options.monthNames.split(","):o,n=0;n<12;n++){var l=r[n]||n+1;this.dom.pickerCells[n].firstChild.innerHTML=l,this.removeClass(this.dom.pickerCells[n],"active"),this._isDisabledMonth({year:i,month:n+1})?(this.addClass(this.dom.pickerCells[n],"w2calendar_month_disable"),
this.dom.pickerCells[n].setAttribute("disabled","disabled")):(n==e-1&&this.addClass(this.dom.pickerCells[n],"active"),this.removeClass(this.dom.pickerCells[n],"w2calendar_month_disable"),this.dom.pickerCells[n].removeAttribute("disabled"))}break;case"year":for(var h=this.pickerSelectedDateHelper.decadeArr[this.pickerSelectedDateHelper.selectedDecadeIndex],d=(i=this.pickerSelectedDateHelper.getYear(),0);d<12;d++){(l=d+h[0])>this.options.maxYear?this.dom.pickerCells[d].firstChild.innerHTML="":this.dom.pickerCells[d].firstChild.innerHTML=l,this.removeClass(this.dom.pickerCells[d],"active"),this._isDisabledYear(l)?(this.addClass(this.dom.pickerCells[d],"w2calendar_month_disable"),this.dom.pickerCells[d].setAttribute("disabled","disabled")):(this.removeClass(this.dom.pickerCells[d],"w2calendar_month_disable"),this.dom.pickerCells[d].removeAttribute("disabled"),l==i&&this.addClass(this.dom.pickerCells[d],"active"))}break;case"decade":for(var c=this.pickerSelectedDateHelper.selectedDecadeIndex,u=this.pickerSelectedDateHelper.startDecadeIndex,p=this.pickerSelectedDateHelper.decadeArr,g=0;g<12;g++){var m=u+g,f=(h=p[m],!1);if(h)for(var b=h[0];b<=h[1];b++){if(!this._isDisabledYear(b)){f=!1;break}f=!0}m<p.length?this.dom.pickerCells[g].firstChild.innerHTML=h[0]+" - "+h[1]:this.dom.pickerCells[g].firstChild.innerHTML="",this.removeClass(this.dom.pickerCells[g],"active"),f?(this.addClass(this.dom.pickerCells[g],"w2calendar_month_disable"),this.dom.pickerCells[g].setAttribute("disabled","disabled")):(this.removeClass(this.dom.pickerCells[g],"w2calendar_month_disable"),this.dom.pickerCells[g].removeAttribute("disabled"),m==c&&this.addClass(this.dom.pickerCells[g],"active"))}}6!==this.options.visibleWeekNum&&this.setSize(null,this.dom.content.parentNode.offsetHeight)}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._pickerStatusRefresh=function(){try{"dynamic"===this.options.pickerType&&("yearMonth"===this.options.calendarValueType?(this.dynamicCalendarStatus="month",this._drawDynamicTable("month")):"year"===this.options.calendarValueType?(this._refreshDynamicSelectedDecateIndex(),this._drawDynamicTable("year"),this.dynamicCalendarStatus="year"):(WebSquare.style.setStyle(this.dom.content,"display","block"),WebSquare.style.setStyle(this.dom.pickerContent,"display","none"),this.dynamicCalendarStatus="day"))}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._refreshDynamicSelectedDecateIndex=function(){try{for(var t=this.pickerSelectedDateHelper.getYear(),e=0;e<this.pickerSelectedDateHelper.decadeArr.length;e++)if(t>=this.pickerSelectedDateHelper.decadeArr[e][0]&&t<=this.pickerSelectedDateHelper.decadeArr[e][1]){this.pickerSelectedDateHelper.selectedDecadeIndex=e,this.pickerSelectedDateHelper.startDecadeIndex=12*Math.floor(e/12);break}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._initDisabledMonthInfo=function(t){try{this._disableBeforeYear=0,this._disableBeforeMonth=0,this._disableAfterYear=0,this._disableAfterMonth=0;var e=this.options.disableAfterMonth?parseInt(this.options.disableAfterMonth.substr(0,4),10):0,i=this.options.disableAfterMonth?parseInt(this.options.disableAfterMonth.substr(4,2),10):0,o=this.options.disableBeforeMonth?parseInt(this.options.disableBeforeMonth.substr(0,4),10):0,r=this.options.disableBeforeMonth?parseInt(this.options.disableBeforeMonth.substr(4,2),10):0;if(o>=parseInt(this.minYear)&&o>0&&r>0&&r<=12&&(this._disableBeforeYear=o,this._disableBeforeMonth=r),e<=parseInt(this.maxYear)&&e>0&&i>0&&i<=12&&(this._disableAfterYear=e,this._disableAfterMonth=i),this._disabledMonthArr=[],this.options.disabledMonth)for(var a=this.options.disabledMonth.split(" "),n=0;n<a.length;n++)if(6==a[n].length){var l=parseInt(a[n].substr(0,4),10)||0,h=parseInt(a[n].substr(4,2),10)||0;e<=parseInt(this.maxYear)&&l>=parseInt(this.minYear)&&l>0&&h>0&&h<=12&&this._disabledMonthArr.push({year:l,month:h})}}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._isDisabledMonth=function(t){try{
if("dynamic"!==this.options.pickerType)return;var e=!1,i=!1,o=t.year||0,r=t.month||0;if(r>12?(o++,r%=12):0==t.month&&(o--,r=12),this._disableAfterYear&&(e=this._disableAfterYear<o||this._disableAfterYear==o&&this._disableAfterMonth<r),this._disableBeforeYear&&(i=this._disableBeforeYear>o||this._disableBeforeYear==o&&this._disableBeforeMonth>r),e||i)return!0;if(this._disabledMonthArr.length>0)for(var a=0;a<this._disabledMonthArr.length;a++)if(this._disabledMonthArr[a].year==o&&this._disabledMonthArr[a].month==r)return!0;return!1}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._isDisabledYear=function(t){try{if("dynamic"!==this.options.pickerType||!t)return;var e=!1,i=!1;if(this._disableAfterYear&&(e=this._disableAfterYear<t),this._disableBeforeYear&&(i=this._disableBeforeYear>t),e||i)return!0;if(this._disabledMonthArr.length>0){for(var o=0,r=0;r<this._disabledMonthArr.length;r++)this._disabledMonthArr[r].year==t&&o++;if(o>11)return!0}return!1}catch(t){s.Y.printStackTrace(t,null,this)}},c.prototype._getYearList=function(){try{for(var t=[],e=this.minYear;e<this.maxYear+1;e++)t.push(e);if(this.options.selectUnlimitedYear){for(var i=this.options.selectUnlimitedYear.split(","),o=0;o<i.length;o++)i[o]<this.options.minYear?t.unshift(i[o]):i[o]>this.options.maxYear&&t.push(i[o]);t.sort((function(t,e){return parseInt(t)-parseInt(e)}))}return!1!==this.options.useUnlimitedYear&&t.push("9999"),t}catch(t){s.Y.printStackTrace(t,null,this)}}},9906:function(t,e,i){"use strict";i.r(e),i.d(e,{checkbox:function(){return c}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(7455),d=i(4860),c=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(c.prototype,l.q.prototype),o.q.extend(c.prototype,h.t.prototype),o.q.extend(c.prototype,d.G.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.checkbox",pluginName:"checkbox",userEvents:["onchange","onlabelclick","oncheckboxclick","onviewchange","onkeyup","onkeydown"],useConfig:!0,serializable:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",selectedindex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useCheckboxTitle:!0,escape:!0,falseValue:"",ignoreTabIndex:!1,separator:" ",tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",refInitSync:!1},c.prototype.initialize=function(t){try{this.inputType="checkbox";var e=s.I.getConfiguration("/WebSquare/checkbox/renderType/@value");""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),"native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.oldValueForIE=[],this.settingData=!1,this.options.tooltipFormatter&&(this.tooltipFormatter=n.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e="label",i=this.itemArr.length,o=this.options.name||this.id+"_input",s=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.title?"":"title='"+this.options.title+"'",l=1==this.options.ignoreTabIndex?" tabindex='-1'":""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",h=n.Z.getDataPrefix("index")
;if("native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+s+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+o+"' id='"+this.id+"' "+h+"='0' "+a+l+" />");else if("checkboxgroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+s+" class='w2"+this.inputType+" "+this.options.className+"' "+a+">");for(var d=0;d<i;d++){var c="";this.itemArr&&this.itemArr[d]&&!0===this.itemArr[d]._hidden&&(c=" style='display:none;'");var u=this.id+"_input_"+d,p=this.options.escape?WebSquare.xml._encode(this.itemArr[d].label):this.itemArr[d].label,g="",m="";this.itemDisabledArray[d]&&(g="disabled",m="w2checkbox_disabled"),t.push("<"+this.options.itemTagname+" class='w2checkbox_item w2checkbox_item_"+d+"'"+c+">");p=this.options.escape?WebSquare.xml._encode(this.itemArr[d].label):this.itemArr[d].label;var f=this.options.useCheckboxTitle?" title='"+p+"' ":"";t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+o+"' "+h+"='"+d+"' id='"+u+"' "+g+l+f+" />"),t.push("<label class='w2"+this.inputType+"_label "+m+"' "+h+"='"+d+"' for='"+u+"'>"+p+"</"+e+">"),t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+s+" class='w2"+this.inputType+" "+this.options.className+"' "+a+">"),t.push("<table class='w2"+this.inputType+"_main'>");for(var b=0;b<this.rowCount;b++){u=this.id+"_input_"+b,t.push("<tr class='w2"+this.inputType+"_row'>");for(var y=0;y<this.colCount;y++){var v=b*this.colCount+y;c="";this.itemArr&&this.itemArr[v]&&!0===this.itemArr[v]._hidden&&(c=" style='display:none;'");u=this.id+"_input_"+v,g="",m="";if(this.itemDisabledArray[v]&&(g="disabled",m="w2checkbox_disabled"),v<i){p=this.options.escape?WebSquare.xml._encode(this.itemArr[v].label):this.itemArr[v].label,f=this.options.useCheckboxTitle?" title='"+p+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+c+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+o+"' "+h+"='"+v+"'  id='"+u+"'"+f+g+l+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+c+"><"+e+" class='w2"+this.inputType+"_label "+m+"' "+h+"='"+v+"' for='"+u+"'>"+p+"</"+e+"></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+c+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+c+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw(),this.options.enableColumn&&this.refreshEnable()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}var e=this.getCheckboxList();if(this.options.selectedindex>-1){for(var i=0;i<e.length;i++){e[i].checked=!1,this.oldValueForIE[i]=!1}this.setSelectedIndexNM(this.options.selectedindex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}else{for(i=0;i<e.length;i++)this.modelControl.isBinded()||(this.oldValueForIE[i]=!1);this.options.falseValue&&this.modelControl.isBinded()&&this.options.refInitSync&&this.modelControl.setData(this.options.falseValue)}this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),
this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue();this.refreshItemArr(),this.itemDisabledArray=new Array;for(var e=0;e<this.itemArr.length;e++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t,e){try{if(n.Z.isNull(t)||1==isNaN(Number(t)))return;t=parseInt(t);var i=this.getValue();n.Z.isIEAllVersion()&&parseInt(s.I.browserVersion(),10)>8?this.setSelectedIndexNM(t,null,e):this.setSelectedIndexNM(t),this.settingData=!0,this.modelControl.setData(this.getValue()),this.settingData=!1,i!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(o);return e.join(t).wq_trim()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e,i){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var o=this.getCheckboxList()[t];return e=null==e?!o.checked:e,o.checked=e,2!=i&&1!=this.settingData&&(this.oldValueForIE[t]=e),!0}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.Z.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.Z.isNull(t))return;for(var e=(t=t.toString()).split(this.options.separator||" "),i=[],o=0;o<e.length;o++)i[e[o]+""]="";var s=this.getItemCount();for(o=0;o<s;o++){null!=i[t=this.itemArr[o].value]?this.setSelectedIndexNM(o,!0):this.setSelectedIndexNM(o,!1)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInstanceValue=function(t){try{if(null!=t){if(n.Z.isNull(t))return;t=parseInt(t)}var e=this.getValue(),i="";this.modelControl.isBinded()?(i=this.modelControl.getData(),this.modelControl.setData(e),i!=e&&a.f.fireEvent(this,"onchange",{oldValue:i,newValue:e})):(i=this.getValue(null,t),a.f.fireEvent(this,"onchange",{oldValue:i,newValue:e}))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{t||(t=this.options.separator||" ");for(var e=[],i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].checked&&e.push(this.itemArr[o].label);return e.join(t).wq_trim()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getValue=function(t,e){try{t||(t=this.options.separator||" ")
;for(var i=[],o=this.getCheckboxList(),s=0;s<o.length;s++)void 0!==e&&s===e?o[s].checked||i.push(this.itemArr[s].value):o[s].checked&&i.push(this.itemArr[s].value);return i.join(t).wq_trim()||this.options.falseValue}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getCheckboxList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getCheckboxList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;for(var e=this.getValue(),i=null,o=this.getCheckboxList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getCheckboxList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getCheckboxList(),o=0;o<i.length;o++)i[o].disabled=e;1==e?this.addClass(this.render,"w2checkbox_readonly"):this.removeClass(this.render,"w2checkbox_readonly");break;case"mandatory":1==e?this.addClass(this.render,"w2checkbox_mandatory"):this.removeClass(this.render,"w2checkbox_mandatory")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getCheckboxList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("checkboxArr","input")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.focus=function(){try{this.getCheckboxList()[0].focus()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.click=function(t){try{this.getCheckboxList()[t].click()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.reset=function(){try{for(var t=this.getCheckboxList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1,this.oldValueForIE[i]=!1);var o=this.getValue();this.modelControl.setData(o),e!=o&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.checkAll=function(t){try{for(var e=this.getItemCount(),i=0;i<e;i++)this.setSelectedIndexNM(i,t);this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.Z.getBoolean(t);for(var e=this.getCheckboxList(),i=this.getLabelList(),s=0;s<e.length;s++)e[s].itemDisabled||(this.itemDisabledArray[s]=t,t?(this.addClass(i[s],"w2checkbox_disabled"),e[s].setAttribute("disabled","disabled")):(this.removeClass(i[s],"w2checkbox_disabled"),e[s].removeAttribute("disabled")));return this.options.disabled=t,!0!==o.q.dataPrefix&&(t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled")),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setReadOnly=function(t){try{
!0===o.q.dataPrefix?(t=n.Z.getBoolean(t),this.options.readOnly=t,this.onPropertyChange("readOnly",t)):l.q.prototype.setReadOnly.call(this,t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.Z.getBoolean(e);var i=this.getCheckboxList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?(this.addClass(o[t],"w2checkbox_disabled"),i[t].setAttribute("disabled","disabled")):(this.removeClass(o[t],"w2checkbox_disabled"),i[t].removeAttribute("disabled")),this.itemDisabledArray.indexOf(!1)>-1?(this.options.disabled=!1,this.render.removeAttribute("disabled")):(this.options.disabled=!0,this.render.setAttribute("disabled","disabled"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getCheckboxList()[t].disabled}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();this.checkAll(!1),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=this.event.getTargetIterator(t,this.render),i=n.Z.getDataPrefix("index");e.next();){var o;if(e.match("w2"+this.inputType+"_input")){var l=e.getElement().getAttribute(i);n.Z.isIEAllVersion()&&parseInt(s.I.browserVersion(),10)>8||this.setInstanceValue(l),o=1,this.fireOnclick({type:"1",index:l})}else if(e.match("w2"+this.inputType+"_label")&&!e.match("w2"+this.inputType+"_disabled")){l=e.getElement().getAttribute(i);a.f.preventDefault(t),o=2,n.Z.isIEAllVersion()&&parseInt(s.I.browserVersion(),10)>8?this.setSelectedIndex(l,o):this.setSelectedIndex(l),this.fireOnclick({type:"2",index:l})}}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=a.f.getTarget(t),i=n.Z.getDataPrefix("index");e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("checkboxgroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2checkbox_item")>=0);)e=e.parentNode;if(e){var o;o="checkboxgroup"===this.options.renderType?e.getElementsByClassName("w2checkbox_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var s=WebSquare.style.getStyle(e,"text-overflow"),l=o.innerHTML;if(this.options.tooltipFormatter&&"function"!=typeof this.tooltipFormatter&&(this.tooltipFormatter=n.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)),!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if("function"==typeof this.tooltipFormatter){var c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else if("ellipsis"==s){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var u=this.toolTipRuler.firstChild.offsetWidth,p=e.clientWidth
;if(o.nodeType!=WebSquare.Elem.type.text){var g=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),m=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");u-=parseInt(g||"0",10),u-=parseInt(m||"0",10),p-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(p<u){h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if(document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel)l=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.Z.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.Y.printStackTrace(t)}var d=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2checkbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var c=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",c+"px"),document.body.scrollWidth>d){var u=t-(document.body.scrollWidth-d);u<0&&(u=0),this.tooltip.setStyle("left",u+"px")}})),100*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode)){this.tabOrderMoveStart=!1;var e=this.getCheckboxList();if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){if(document.activeElement!=e[0])return;this.tabOrderMoveStart=!0,a.f.preventDefault(t)}}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){if(document.activeElement!=e[e.length-1])return;this.tabOrderMoveStart=!0,a.f.preventDefault(t)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.f.fireEvent(this,"onchange")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.fireOnclick=function(t){try{if(!t)return
;var e=t.type||"1",i=t.index,o=this.getCheckboxList(),l=o[i].checked,h=this.itemArr[i].value,d=!1;n.Z.isIEAllVersion()&&parseInt(s.I.browserVersion(),10)>8&&(null==this.oldValueForIE[i]?(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i)):l==this.oldValueForIE[i]?d=!0:(this.oldValueForIE[i]=l,"1"===e&&this.setInstanceValue(i))),o[i].disabled||("1"===e?a.f.fireEvent(this,"oncheckboxclick",i,l,h):"2"===e&&a.f.fireEvent(this,"onlabelclick",i,l,h),0==d&&a.f.fireEvent(this,"onviewchange",{index:i,checked:l,value:h}))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},c.prototype.restore=function(t){try{this.checkAll(!1);for(var e=t.selectedIndex.split(this.options.separator),i=0,o=e.length;i<o;i++)this.setSelectedIndex(parseInt(e[i],10));return!0}catch(t){return r.Y.printStackTrace(t,null,this),!1}},c.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),"checkboxgroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._refreshVisible=function(t){try{for(var e=0;e<t.length;e++){var i=parseInt(t[e].getAttribute("index"),10);this.itemArr[i]&&!0===this.itemArr[i]._hidden?t[i].parentNode.style.display="none":t[i].parentNode.style.display=""}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.Y.printStackTrace(t,null,this)}}},4722:function(t,e,i){"use strict";i.r(e),i.d(e,{checkcombobox:function(){return c}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(7455),d=i(4860),c=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(c.prototype,l.q.prototype),o.q.extend(c.prototype,h.t.prototype),o.q.extend(c.prototype,d.G.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox",renderType:"component",userEvents:["onchange","onclose","onviewchange","oncheckboxclick","oncellclick"],systemEvents:["onblur","onclick","ondblclick","onfocus"],serializable:!0,useConfig:!0,separator:" ",value:"",sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,visibleColNum:1,visibleColMax:1,displayMode:"0",delimiter:"\t",textAlign:"",chooseOption:!1,chooseOptionLabel:"",allOption:!1,tooltipMode:"none",readOnly:!1,defaultStyle:"",activeStyle:"",defaultClass:"w2checkcombobox_default",activeClass:"w2checkcombobox_active",useLocale:!1,submenuSize:"auto",direction:"auto",checkboxClickSync:!1,showCheckedTop:!1,tooltipDisplay:!1,tooltipShowAlways:!1,tooltipClass:"",tooltipTime:1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,closeonmouseleave:!1,animation:"",customLabelFormatter:"",navBtn:!1,displayAllOptionLabel:!1,checkDisabledOnAllCheck:!0,search:"start",searchTarget:"label",editable:!1,editType:"select",editModeEvent:"onclick",handleOtherClick:!0,noResult:"previous",interactionMode:!1,ignoreBlankOnNoResult:!1,useKeywordHighlight:!1,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",visibleColumnAutoClear:!1,useDrag:!1,useEdit:!1,rangeSeparator:"",validateOnInput:!1,checkTarget:"",accessibility:!1,allOptionChecked:!1,columnEllipsis:!1},c.prototype.initialize=function(t){try{if(this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.separator=this.options.separator=this.options.separator||" ",this.selectedInfo={},this.originArrInfo=[],this.editable=this.options.editable,this.search=this.options.search,
this.myhelper=new WebSquare.korHelper,this.viewArr=[],this.mytime=null,this.hideTime=null,this.noResult="previous"===this.options.noResult||"clear"===this.options.noResult||"noEnd"===this.options.noResult||"useData"===this.options.noResult||"first"===this.options.noResult?this.options.noResult:"previous",this.interactionMode=this.options.interactionMode,this.itemTableLastCell=null,this.navBtnReached=!1,this.mozTrickBuffer="",this.trickBuffer="",this.findStop=!1,this.displayFormatter=null,this.labelColumn=-1,this._currentTarget=null,this._dragGhost=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("CheckCombobox_all"),t&&"$blank"==t.getAttribute("chooseOptionLabel")?this.defaultChooseOptionLabel="":this.defaultChooseOptionLabel=WebSquare.language.getMessage("CheckCombobox_choose"),this._initDisplayMode(),t){var e="xf"==t.getTagName().split(":")[0]?s.I._XML_NAMESPACE.XFORMS:s.I._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.I._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.I._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t),this.itemDisabledArray=new Array;for(var a=0;a<this.itemArr.length;a++)this.itemDisabledArray.push(!1);!1===this.options.checkboxClickSync&&(this.options.showCheckedTop=!1),!0===this.options.accessibility&&(this.options.renderType="native"),"native"==this.options.renderType&&(this.options.tableRender="ul"),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.options.useEdit&&(this.options.editable=!1,this.options.searchTarget="label","both"!=this.options.checkTarget&&"label"!=this.options.checkTarget&&"value"!=this.options.checkTarget&&(this.options.checkTarget=""))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{l.q.prototype.finalize.call(this),this.itemTable&&(this.itemTable.remove(),this.itemTable=null),this._dragGhost&&this._dragGhost.remove(),this.labelRuler=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+'"',s=""==this.options.textAlign?"":"style= 'text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'",a="";return a=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'","native"===this.options.renderType?!0===this.options.accessibility?(t.push("<button id='"+this.id+"' "+e+" class='w2checkcombobox_acc_accessibility "+this.options.className+"' tabIndex='0' aria-expanded='false' "+i+">"),t.push("</button>")):(t.push("<div id='"+this.id+"' "+e+" role='combobox' aria-controls='list' aria-labelledby='"+this.id+"_itemTable' class='w2checkcombobox_acc "+this.options.className+"' tabIndex='0' "+i+">"),t.push("<div id='"+this.id+"_nativeLabel' class='w2checkcombobox_acc_custom' style=''>"),this.options.editable||this.options.useEdit?(t.push("<div class='w2checkcombobox_acc_custom_native_useEditLabel' style='"+o+"'>"),t.push("<span id='"+this.id+"_label' class='w2checkcombobox_acc_custom_label' style='"+s+"'></span>"),t.push("<input id='"+this.id+"_input' class='w2checkcombobox_input w2checkcombobox_acc_custom_label' style='margin:0 auto;display:none;visibility:hidden;' type='text' "+i+" />"),
t.push("</div>")):(t.push("<div class='w2checkcombobox_acc_custom_native_label' style=''"+o+">"),t.push("<label id='"+this.id+"_label' class='w2checkcombobox_acc_custom_label' style='display:inline-block;' ></label>"),t.push("</div>")),t.push("<a id='"+this.id+"_button' class='w2checkcombobox_acc_custom_arrow w2checkcombobox_acc_custom_arrow_native' aria-hidden='true' style=''></a>"),t.push("</div>"),t.push("</div>")):(t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2checkcombobox "+this.options.className+"' "+a+i+">"),t.push("<table class='w2checkcombobox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2checkcombobox_row w2checkcombobox_row_main'>"),this.options.editable||this.options.useEdit?(t.push("<td class='w2checkcombobox_col_label' "+o+">"),t.push("<div class='w2checkcombobox_label'>"),t.push("<span id='"+this.id+"_label' class='w2checkcombobox_label' "+s+"></span>"),t.push("<input id='"+this.id+"_input' class='w2checkcombobox_input' style='border-width:0px; width:100%; padding:0px; display:none;' type='text' "+i+" />"),t.push("</div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")):(t.push("<td class='w2checkcombobox_col_label' "+o+"><div id='"+this.id+"_label' role='document' aria-live='assertive' class='w2checkcombobox_label' "+s+"></div></td>"),t.push("<td class='w2checkcombobox_col_button' id='"+this.id+"_button' aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>")),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{this.options.itemTooltipDisplay&&this.options.itemTooltipFormatter&&(this.itemTooltipFormatter=n.Z.getGlobalFunction(this.options.itemTooltipFormatter,this.scope_id)),this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.input=this.getElementById(this.id+"_input"),"native"===this.options.renderType&&(this.dom.nativeLabel=this.getElementById(this.id+"_nativeLabel")),this.dom.tbody=this.getElementById(this.id+"_main_tbody")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.useOtherComponentId?s.I.setTimer((function(){this.otherComponent=n.Z.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.f.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:this.options.editable||this.options.useEdit?{onmousedown:this.handleClickEventDocument}:{}}),
this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),a.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.f.stopPropagation(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.useEdit&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),(this.options.editable||this.options.useEdit)&&(this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleblurEventInput)),this.options.validateOnInput&&this.event.addListener(this.dom.input,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this.refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(1==this.options.chooseOption){var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," "),!0===this.options.accessibility?this.render.innerHTML=e:this.dom.label&&(this.dom.label.innerHTML=e)}this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),this.options.visibleColumnAutoClear&&this.bind("onviewchange",this._clearVisibleColumnChecked)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){this.refreshItemArr(),this.componentRedraw(),this.itemDisabledArray=new Array;for(var t=0;t<this.itemArr.length;t++)this.itemDisabledArray.push(!1);if("grid"==this.itemTableMode)this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid&&(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr)));else if("gridView"==this.itemTableMode){if(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).setData(this.gridViewItemArr,!1),this.setGridViewData()}if(this.options.editable&&this.itemArr.length<=0&&this.initCheckCombobox(),this.modelControl.isBinded())this.refresh();else{var e=[];for(t=0;t<this.itemArr.length;t++)this.itemArr[t].value!=WebSquare.allValue&&e.push({index:t,checked:!1});this.setSelectedInfoNM(e)}}this.isOpen?this.setItemTable():this.options.useEdit&&this.itemTable&&(this.itemTable.show(),this.setItemTable(),this.itemTable.hide())}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();1==this.setValueNM(e)&&t!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(){try{!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),
"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),(this.options.editable||this.options.useEdit)&&this.showEditMode(!1),this.setValueNM("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setLabelWidthByItemLength=function(){try{this.labelRuler&&document.getElementById("checkcombobox_ruler")||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",this.labelRuler.id="checkcombobox_ruler",document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);if(this.render){var i=document.getElementById(this.id+"_button");this.render.style.width=t+i.offsetWidth+10+"px"}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.itemTableHandleKeydownEvent=function(t){try{var e=a.f.getTarget(t),i=parseInt(this.itemTable.getSelectedIndex()),o=t.charCode?t.charCode:t.keyCode,s=i,n=this.itemTable.getItemCount(),l=document.getElementById(this.itemTable.id+"_main");if(9==o&&t.shiftKey||38===o)if(a.f.preventDefault(t),!0!==this.navBtnReached)if(s>0){for(;0<=s-1&&this.itemTable._getCellDisabled(s-1)||this.itemTable._getCellHidden(s-1);)0===--s&&(this.itemTable.endReached=!0);if(s>0)this.itemTable.setSelectedIndex(s-1),(d=this.itemTable.selectedCell.querySelector("#"+this.itemTable.selectedCell.id+"_checkbox"))&&(d.focus(),l.setAttribute("aria-activedescendant",d.id))}else this.itemTable.endReached=!0;else{if(e===this.dom.confirmBtn){this.selectedCell=this.itemTableLastCell;var h=WebSquare.util.getDataPrefix("index");this.dom.confirmBtn.removeAttribute("tabIndex"),this.itemTable.setSelectedIndex(this.selectedCell.getAttribute(h)),(d=this.itemTable.selectedCell.querySelector("#"+this.itemTable.selectedCell.id+"_checkbox"))&&(d.focus(),l.setAttribute("aria-activedescendant",d.id)),this.navBtnReached=!1}e===this.dom.cancelBtn&&this.dom.confirmBtn&&(this.dom.cancelBtn.removeAttribute("tabIndex"),this.dom.confirmBtn.setAttribute("tabIndex",0),this.dom.confirmBtn.focus())}else if(9==o&&!t.shiftKey||40===o){if(a.f.preventDefault(t),s+1<n){for(s++;s+1<=n&&this.itemTable._getCellDisabled(s)||this.itemTable._getCellHidden(s);)++s===n&&(this.options.navBtn?this.navBtnReached=!0:this.itemTable.endReached=!0);if(s<n)this.itemTable.setSelectedIndex(s),(d=this.itemTable.selectedCell.querySelector("#"+this.itemTable.selectedCell.id+"_checkbox"))&&(d.focus(),l.setAttribute("aria-activedescendant",d.id))}else this.options.navBtn?this.navBtnReached=!0:this.itemTable.endReached=!0;!0===this.navBtnReached&&(e!==this.dom.confirmBtn&&e!==this.dom.cancelBtn&&(this.itemTableLastCell=this.itemTable.selectedCell,this.dom.confirmBtn&&(this.dom.confirmBtn.setAttribute("tabIndex",0),this.dom.confirmBtn.focus()),this.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over)),e===this.dom.confirmBtn&&this.dom.cancelBtn&&(this.dom.confirmBtn.removeAttribute("tabIndex"),this.dom.cancelBtn.setAttribute("tabIndex",0),this.dom.cancelBtn.focus()),e===this.dom.cancelBtn&&(null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.itemTable.endReached=!0,this.navBtnReached=!1,this.isOpen&&this._closeSubLayer(),this.dom.button.focus()))}else if(32==o)if(a.f.preventDefault(t),e===this.dom.confirmBtn)null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.dom.confirmBtn.click(),this.navBtnReached=!1,this.dom.button.focus();else if(e===this.dom.cancelBtn)null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null),this.dom.cancelBtn.click();else{var d;if(this.itemTable.options.checkbox&&!this.itemTable._getCellDisabled(s)&&i>=0)(d=document.getElementById(this.itemTable.id+"_"+i+"_checkbox")).click()}else 13==o&&e===this.itemTable.selectedCell&&(a.f.preventDefault(t),this.itemTable.endReached=!0)
;!0===this.itemTable.endReached&&(this.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over),this.itemTable.selectedCell=null,this.isOpen&&this._closeSubLayer(),this.itemTable.endReached=null,this.render.focus())}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable)if("grid"==this.itemTableMode){if(this.gridItemArr.length<=0)return;this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData()}else if("gridView"==this.itemTableMode){if(this.gridViewItemArr.length<=0)return;"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,submenuSize:this.options.submenuSize,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,navBtn:this.options.navBtn,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i,o,s){t.focus(),s=s||{},"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e));var r=parseInt(t.itemTable.options.gridViewOptions.checkColumn);if("checkbox"===this.getCellInputType(e,i)&&i===r){var n="";if(!0===s.checked){if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(var l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!0});this.checkAll(r,!0),t.checkAll(r,!0)}else t.itemArr[e].checked=!0,t.addSelectedInfo({index:e,checked:!0}),this.setCellChecked(e,i,!0);n=!0}else{if(0===e&&this.getCellData(e,t.labelColumn)===t.defaultAllOptionLabel){for(l=1;l<t.itemArr.length;l++)t.addSelectedInfo({index:l,checked:!1});this.checkAll(r,!1),t.checkAll(r,!1)}else t.itemArr[e].checked=!1,t.addSelectedInfo({index:e,checked:!1}),this.setCellChecked(e,i,!1);n=!1}if(t.options.allOption&&e>0){var h=!0;if(!0===s.checked){for(l=1;l<t.itemArr.length;l++)if(!t.itemArr[l].checked){h=!1;break}}else t.itemArr[e].checked=!1,h=!1;this.setCellChecked(0,i,h)}a.f.fireEvent(t,"oncellclick",e,i,n)}})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){27==(e.charCode?e.charCode:e.keyCode)&&(t._closeSubLayer(),t.focus())})));for(var e=parseInt(this.itemTable.options.gridViewOptions.checkColumn),i=this.itemTable.gridView.getRowCount(),o=1==this.options.allOption?1:0,l=o;l<i;l++)"1"===this.itemTable.gridView.getCellData(l,e)?this.addSelectedInfo({index:l+o,checked:!0}):this.addSelectedInfo({index:l+o,checked:!1});this.setGridViewData()}else{var h="fixed"===this.options.submenuSize&&this.options.columnEllipsis?"w2table_ccb_col_ellipsis":"",d="fixed"===this.options.submenuSize&&this.options.columnEllipsis?"w2table_ccb_col_checkbox_ellipsis":"",c="fixed"===this.options.submenuSize&&this.options.columnEllipsis?"w2table_ccb_col_label_ellipsis":"",u={row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,
style:"position:absolute;",defaultStyle:(!0===this.options.accessibility?"":"text-align:"+this.options.textAlign+";")+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_ccb",w2table_main:"w2table_ccb_main",w2table_row:"w2table_ccb_row",w2table_col:"w2table_ccb_col "+h,w2table_col_over:"w2table_ccb_col_over",w2table_col_checkbox:"w2table_ccb_col_checkbox "+d,w2table_col_label:"w2table_ccb_col_label "+c,checkbox:!0,navBtn:this.options.navBtn,escape:this.options.escape,editable:this.options.editable,wheelRows:this.options.wheelRows,parent_uuid:this.uuid,parentPluginName:this.options.pluginName,visibleColNum:this.options.visibleColNum,visibleColMax:this.options.visibleColMax},p=this.options.accessibility?"w2table_ccb_ul_col_over_accessibility":"w2table_ccb_ul_col_over";"native"===this.options.renderType&&(u.w2table="w2table_ccb_native",u.w2table_main="w2table_ccb_ul_main",u.w2table_col="w2table_ccb_ul_col "+h,u.w2table_row="w2table_ccb_ul_row",u.w2table_col_over=p,u.w2table_col_checkbox="w2table_ccb_ul_col_checkbox "+d,u.w2table_col_label="w2table_ccb_ul_col_label "+c,u.tableRender=this.options.tableRender),this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",u);t=this;"native"===this.options.renderType&&(this.itemTable.handleKeydownEvent=function(e){return t.itemTableHandleKeydownEvent(e)}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){var o=document.getElementById(t.id+"_itemTable_"+i+"_checkbox");if(o&&o.value==WebSquare.allValue){for(var s=n.Z.getBoolean(o.checked),r=1;r<t.itemArr.length;r++)if(n.Z.getBoolean(t.options.checkDisabledOnAllCheck)||!t.itemDisabledArray[r]){var l=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");l&&l.checked!=s&&(l.checked=s),t.addSelectedInfo({index:r,checked:s})}}else t.options.editable&&(t.mozTrickBuffer="",i=t.viewArr[i].index),t.addSelectedInfo({index:i,checked:o.checked});if(t.options.allOption)if(i>0){var h=!0;if(o.checked)if(t.options.editable&&t.editmode){t.itemArr[i].checked=!0;for(r=1;r<t.itemArr.length;r++)if(!t.itemArr[r].checked){h=!1;break}}else for(r=1;r<t.itemArr.length;r++){var d=document.getElementById(t.id+"_itemTable_"+r+"_checkbox");if(d&&!d.checked){h=!1;break}}else h=!1;document.getElementById(t.id+"_itemTable_0_checkbox").checked=h,t.options.editable&&(t.itemArr[0].allchecked=h)}else t.options.editable&&(t.itemArr[0].allchecked=o.checked);if(t.options.checkboxClickSync){var c=t.getValue(),u=t.getInfoArray(),p=t.convertInfoHash2Array(t.selectedInfo);p.length>0&&t.setSelectedInfo(p);var g=t.getValue();if(c!=g){var m={oldInfo:u,newInfo:t.getInfoArray(),oldValue:c,newValue:g};a.f.fireEvent(t,"onviewchange",m)}}a.f.fireEvent(t,"oncheckboxclick",i,o.checked,o.value)})),this.itemTable.addKeyDownEventListener((function(e,i){var o=e.charCode?e.charCode:e.keyCode;(13==o||27==o)&&(t.focus(),t.closeSubLayer())}));var g=WebSquare.idCache[this.uuid],m=this.options.closeonmouseleave,f=this.options.itemTooltipDisplay;if((m||f)&&this.itemTable.addMouseLeaveEventListener((function(e){if(m){var i=t.render.offsetHeight,o=t.getAbsolutePosition("top");e.clientY>=o&&e.clientY<=o+i||t.closeSubLayer()}f&&g.hideTooltip()})),f&&this.itemTable.addMouseOverEventListener((function(t){var e=n.Z.getDataPrefix("index"),i=t,o=WebSquare.style.getAbsoluteLeft(i)+20,s=WebSquare.style.getAbsoluteTop(i)+i.offsetHeight+3,r="ul"===g.options.tableRender?i.innerText:i.innerHTML;if(g.itemTooltipFormatter&&"function"==typeof g.itemTooltipFormatter){var a=parseInt(i.getAttribute(e),10);r=g.itemTooltipFormatter(r,a,g.options._rowIndex,g.options._colIndex)}g.showTooltip(o,s,r)})),this.options.useDrag&&(this.itemTable.event.addListener(this.itemTable.render,"onmousedown",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousedown)),this._dragGhost||(this._dragGhost=new WebSquare.uiplugin.group(this.id+"_dragGhost",{className:"w2checkcombobox_ghost"}),
this._dragGhost.writeTo(WebSquare.getBody(),null,this.parentFrame),this._dragGhost.activate(),this._dragGhost.onComplete())),this._getSelectedInfo().length>0&&!0===this.options.showCheckedTop){for(l=0;l<this.getItemCount();l++){if(this.itemArr[l].checked)null!=(v=document.getElementById(this.id+"_itemTable_"+l+"_checkbox"))&&(v.checked=!0),this.addSelectedInfo({index:l,checked:null==v||v.checked})}this._sortCheckItemArr()}if(this.setSelectOptions(),this.setItemTable(),"native"===this.options.renderType){var b=WebSquare.language.getMessage("CheckCombobox_label")||"label";document.getElementById(this.itemTable.id+"_main").setAttribute("aria-label",b)}var y=!0;for(l=0;l<this.getItemCount();l++){var v;if(this.itemArr[l].checked)null!=(v=document.getElementById(this.id+"_itemTable_"+l+"_checkbox"))&&(v.checked=!0),this.addSelectedInfo({index:l,checked:null==v||v.checked});else 1==this.options.allOption?(1==this.getItemCount()||this.itemArr[l].value!=WebSquare.allValue)&&(y=!1):y=!1}1==y&&1==this.options.allOption&&this.getItemCount()>0&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!0)}if(!this.options.editable)for(l=0;l<this.itemDisabledArray.length;l++)this.setItemDisabled(l,this.itemDisabledArray[l]);if(this.options.enableColumn&&this.refreshEnable(),this.options.navBtn&&!this.itemTable.getElementById(this.id+"_btnArea")){var w,S=[],_=WebSquare.language.getMessage("itemTable_cancel")||"cancel",C=WebSquare.language.getMessage("itemTable_confirm")||"confirm",x=document.createElement("div");if(x.className="w2checkcombobox_btnArea",x.id=this.id+"_btnArea",x.setAttribute("role","listitem option"),x.setAttribute("aria-setsize",this.options.visibleRowNum),x.setAttribute("aria-posinset",this.options.visibleRowNum),S.push("<div id='"+this.id+"_btn_confirm' class='w2checkcombobox_btn_confirm' role='button' title='"+C+"'>"+C+"</div>"),S.push("<div id='"+this.id+"_btn_cancel' class='w2checkcombobox_btn_cancel' role='button' title='"+_+"'>"+_+"</div>"),S=S.join(""),x.innerHTML=S,n.Z.isIE()&&s.I.browserVersion()<=8){var I,T=this.itemTable.render.getElementsByTagName("div");for(l=0;I=T[l++];)if("w2checkcombobox_btn_div"==I.className){w=I;break}}else w=this.itemTable.render.getElementsByClassName("w2checkcombobox_btn_div")[0];w.appendChild(x),this.dom.confirmBtn&&this.dom.cancelBtn||(this.dom.confirmBtn=this.itemTable.getElementById(this.id+"_btn_confirm"),this.dom.cancelBtn=this.itemTable.getElementById(this.id+"_btn_cancel")),this.event.addListener(this.dom.confirmBtn,"onclick",this.event.bindAsEventListener(this,(function(){this.closeSubLayer()}))),this.event.addListener(this.dom.cancelBtn,"onclick",this.event.bindAsEventListener(this,(function(){if(this.options.editable){var t=0;if(this.options.allOption)document.getElementById(this.id+"_itemTable_0_checkbox").checked=!1,this.itemArr[0].allchecked=!1,t=1;for(var e=t;e<this.viewArr.length;e++){var i=this.viewArr[e].index;if(this.itemArr[i].checked=!1,this.addSelectedInfo({index:i,checked:!1}),(u=document.getElementById(this.id+"_itemTable_"+e+"_checkbox")).checked=!1,this.options.checkboxClickSync){var o=this.getValue(),s=this.getInfoArray(),r=this.convertInfoHash2Array(this.selectedInfo);r.length>0&&this.setSelectedInfo(r);var n=this.getValue();if(o!=n){var l={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:n};a.f.fireEvent(this,"onviewchange",l)}}}}else{var h=this.getItemCount();if("gridView"===this.itemTableMode){var d=parseInt(this.itemTable.options.gridViewOptions.checkColumn);for(h=this.itemTable.gridView.getRowCount(),this.options.allOption,e=0;e<h;e++){var c=this.itemTable.gridView._getTdElem(e,d);c&&(c.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:e,checked:!1})}}else for(e=0;e<h;e++){var u;(u=document.getElementById(this.id+"_itemTable_"+e+"_checkbox"))&&(u.checked=!1,this.addSelectedInfo({index:e,checked:u.checked}))}}})))}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{
null!=this.itemTable&&"gridView"!=this.itemTableMode&&!0!==this.refreshStopItemTable&&(this.options.editable?this.editmode?0==this.viewArr.length||this.itemTable.setItemArr(this.viewArr):null!=this.itemArr&&0!=this.itemArr.length?this.itemTable.setItemArr(this.itemArr):this.itemTable.hide():this.itemTable.setItemArr(this.itemArr))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{if(this.options.editable){for(var t=0;t<this.viewArr.length;t++)this.viewArr[t].checked=!(!this.itemArr[this.viewArr[t].index].checked&&!this.itemArr[this.viewArr[t].index].allchecked)||"";this.itemTable.setItemArr(this.viewArr);for(var e=0;e<this.viewArr.length;e++)this.setItemDisabled(e,this.itemDisabledArray[e])}var i=this.render.offsetWidth-2,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.getVisibleItemCount(),l=0,h=this.options.visibleColNum>1||this.options.visibleColMax>1;if(!0===this.options.navBtn)if(this.getElementById(this.id+"_btnArea"))l=WebSquare.style.getSize(this.getElementById(this.id+"_btn_confirm"),"outermarginwidth")+WebSquare.style.getSize(this.getElementById(this.id+"_btn_cancel"),"outermarginwidth");var d=0;"auto"==this.options.submenuSize&&"auto"==this.options.submenuSize&&(d=WebSquare.style.getSize(this.itemTable.render,"innerwidth")-WebSquare.style.getSize(this.itemTable.render,"width")),"gridView"===this.itemTableMode||"grid"===this.itemTableMode||"column"===this.options.submenuSize||h||(this.itemTable.setStyle("width",this.render.offsetWidth-d+"px"),this.itemTable.render.firstChild.style.width=this.render.offsetWidth-d+"px");var c=this.itemTable.render.getElementsByTagName("tr"),u=this.itemTable.render.getElementsByTagName("td");if("native"===this.options.renderType)var p=this.itemTable.render.getElementsByTagName("li");if("gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode)if("native"!==this.options.renderType&&u&&u.length>0){var g=0,m=n;h?(b=Math.min(c.length,this.options.visibleRowNum),m=c.length):this.options.editable?(b=Math.min(u.length,this.options.visibleRowNum),m=u.length):b=Math.min(n,this.options.visibleRowNum);var f=0;for(e=0;e<m&&b>0;e++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[e]._hidden||(g+=h?c[e].offsetHeight:u[0].offsetHeight,b--,f++);1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=g+"px",g+=u[0].offsetHeight):s.I.browserCheck.moz&&g<34&&1===f&&(g=34),this.itemTable.setStyle("height",g+"px")}else if("native"===this.options.renderType&&p&&p.length>0){var b,y=0;m=n;this.options.editable?(b=Math.min(p.length,this.options.visibleRowNum),m=p.length):b=Math.min(n,this.options.visibleRowNum);for(f=0,e=0;e<m&&b>0;e++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[e]._hidden||(y+=parseInt(WebSquare.style.getStyle(p[e],"height").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(p[e],"padding-top").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(p[e],"padding-bottom").wq_replaceAll("px",""),10)+parseInt(WebSquare.style.getStyle(p[e],"border-top").slice(0,1),10),b--,f++);1==this.options.navBtn?(this.getElementById(this.itemTable.id+"_wrapper").style.height=y+"px",this.getElementById(this.itemTable.id+"_wrapper").style.left="-1px",y+=p[0].offsetHeight):s.I.browserCheck.moz&&g<34&&1===f&&(g=34),this.itemTable.setStyle("height",y+"px")}if("column"==this.options.submenuSize){if(this.itemTable.render.scrollHeight>this.itemTable.render.offsetHeight){var v=this.itemTable.mainTable.offsetWidth+17;this.itemTable.render.offsetWidth!==v&&this.itemTable.setStyle("width",v+"px")}}else if(this.itemTableMode&&this[this.itemTableMode+"Options"].width)!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=this.itemTable.render.offsetWidth+"px");else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",i+"px"),
!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=i+"px",this.getElementById(this.id+"_btnArea")&&(l>i&&l/2<i&&(g+=u[0].offsetHeight,this.itemTable.setStyle("height",g+"px")),this.getElementById(this.id+"_btnArea").style.width=i+"px")),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=i+"px":this.itemTable.render.firstChild.style.width=i-17+"px";else if("auto"==this.options.submenuSize){var w=2;"gridView"!==this.itemTableMode&&"grid"!==this.itemTableMode||(w=0);var S=this.render.offsetWidth-d-w,_=this.itemTable.render.clientWidth-d,C=this.itemTable.maxWidth,x=0;if((_=S<C?C:S)<S-2&&(_=S-2),n>this.options.visibleRowNum&&(x=17),_=Math.max(l,_),this.itemTable.setStyle("width",_+"px"),!0===this.options.navBtn&&this.getElementById(this.id+"_btnArea")&&(this.getElementById(this.id+"_btnArea").style.width=_+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||n<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=_+"px",!0===this.options.navBtn&&(this.itemTable.render.firstChild.firstChild.style.width=_+"px");else{this.itemTable.render.firstChild.style.width=_-x+"px";var I=this.itemTable.render.firstChild.offsetWidth;I>_-x&&(this.itemTable.render.firstChild.style.width=I+"px",this.itemTable.setStyle("width",Math.max(l,I)+x+"px"))}}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",Math.max(l,this.itemTable.render.firstChild.offsetWidth)+x+"px");var T=this.options.direction;if("auto"==T){var k=document.body.scrollTop;k<document.documentElement.scrollTop&&(k=document.documentElement.scrollTop);var L=a-k,A=document.documentElement.clientHeight-(L+this.render.offsetHeight),D=this.itemTable.render.offsetHeight,W=Math.max(A,L);if(W<D&&u&&u.length>0){var q=0;for(e=0;e<u.length&&!(q+u[e].offsetHeight+2>W);e++)q+=u[e].offsetHeight;this.itemTable.rowCount=e,this.itemTable.setStyle("height",q+"px"),W!==A&&(T="up")}else A<D&&L>D&&(T="up")}if("up"==T?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth&&(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth),this.itemTableDirection=T,this.itemTable.render.style.left=o+"px",this.itemTable.render.style.top=a+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable"),this.options.animation&&("slideDown"!==this.options.animation||"up"!==T)){this.getItemCount()<=this.options.visibleRowNum&&this.itemTable.setStyle("overflow-y","hidden");var M="w2"+this.options.animation;this.addClass(this.itemTable.render,M)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._sortItemArr=function(){try{var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}var s=this.modelControl.getDataComp(),a=s&&s.getCellInfo(this.itemsetObj[this.options.sortOption]);return a&&"number"===a.options.dataType?t.sort((function(t,e){return t.toString().localeCompare(e.toString(),void 0,{numeric:!0,sensitivity:"base"})})):t.sort(),"descending"==this.options.sortMethod&&t.reverse(),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption&&(this.itemArr=this._sortItemArr()),!0===this.options.showCheckedTop&&(this.originArrInfo=this.itemArr),this.options.editable){for(var t=0;t<this.itemArr.length;t++)this.itemArr[t].orgLabel=this.itemArr[t].orgLabel||this.itemArr[t].label,this.itemArr[t].label=this.getItemText(t);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0,allchecked:""}].concat(this.itemArr)),this.viewArr=[];for(t=0;t<this.itemArr.length;t++)this.viewArr.push({
label:this.itemArr[t].label,value:this.itemArr[t].value,orgLabel:this.itemArr[t].orgLabel,index:t,checked:""})}else{for(t=0;t<this.itemArr.length;t++)this.itemArr[t].orgLabel=this.itemArr[t].orgLabel||this.itemArr[t].label,this.itemArr[t].label=this.getItemText(t);1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(){try{if(this.oldValue=this.getValue(),this.setSubLayer(),!this.isOpen){if(this.itemTable.show(),this.addClass("w2checkcombobox_open"),!0===this.options.accessibility?this.render.setAttribute("aria-expanded","true"):this.itemTable.render.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),!this.options.editable)if("native"===this.options.renderType){var t=document.getElementById(this.itemTable.id+"_main");t.setAttribute("tabindex",0),t.focus()}else this.itemTable.focus();if(this.editmode&&void 0!==this.dom.input&&null!=this.dom.input&&this.setfFocus(),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var e=this._getSelectedInfo();if(e.length>0){var i=this.customLabelFormatter.call(this,e,this.isOpen);!0===this.options.accessibility?this.render.innerHTML=i:this.dom.label&&(this.dom.label.innerHTML=i)}}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(t){try{var e={documentClick:t};null!=this.itemTable&&("grid"==this.itemTableMode&&this.gridItemArr.length>0?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.gridViewItemArr.length>0&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0])),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.closeSubLayer1=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.getValue(),o=this.getInfoArray();if(this.isOpen&&null!=this.itemTable){1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id);var s=this.convertInfoHash2Array(this.selectedInfo);if(s.length>0&&this.setSelectedInfo(s),!0===this.options.showCheckedTop&&this._sortCheckItemArr(),this.itemTable.hide(),this.removeClass("w2checkcombobox_open"),!0===this.options.accessibility?(this.render.setAttribute("aria-expanded","false"),document.getElementById(this.itemTable.id+"_main").removeAttribute("aria-activedescendant")):this.itemTable.render.setAttribute("aria-expanded","false"),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var l=this._getSelectedInfo(),h=this.customLabelFormatter.call(this,l,this.isOpen);""==h&&1==this.options.chooseOption&&(h=this._getChooseOptionLabel(),h=WebSquare.xml.decode(h).replace("&nbsp;"," ")),!0===this.options.accessibility?this.render.innerHTML=h:this.dom.label&&(this.dom.label.innerHTML=h)}var d=this.getValue();if(i!=d){var c={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:d};a.f.fireEvent(this,"onviewchange",c)}!0===e?a.f.fireEvent(this,"onclose",!0):a.f.fireEvent(this,"onclose",!1),this.selectedInfo={},
"native"===this.options.renderType&&!0===this.itemTable.inputBlurInside&&(this.itemTable.inputBlurInside=!1)}this._dragGhost&&this._dragGhost.hide()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._originArrInfoHashMap=function(){try{for(var t=this.originArrInfo,e={},i=0;i<t.length;i++)e[t[i].value]=i;return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._originArrHashSortItemArr=function(t){try{for(var e=this._originArrInfoHashMap(),i=0;i<t.length;i++)t[i].value&&(t[i].orgIndex=e[t[i].value]||0);return t.sort((function(t,e){return t.orgIndex-e.orgIndex})),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._checkClassification=function(t){try{var e=!1,i=0;if(1==this.options.allOption){i++;var o=document.getElementById(this.id+"_itemTable_0_checkbox");o&&t[0].value===WebSquare.allValue&&(!0===o.checked?e=!0:t.shift())}if(!0!==e){for(var s=[],a=[],n=[],l=0;l<t.length;l++)!0===t[l].checked?(s.push(t[l]),this._deleteSelectedInfo({index:l+i})):a.push(t[l]);if(this._originArrHashSortItemArr(s),this._originArrHashSortItemArr(a),!0===this.options.allOption){var h={label:this.defaultAllOptionLabel,value:WebSquare.allValue};n.push(h)}for(var d=0;d<s.length;d++)n.push(s[d]),this.addSelectedInfo({index:d+i,checked:!0});for(d=0;d<a.length;d++)n.push(a[d]);this.itemArr=n.slice(0),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.Y.printStackTrace(t)}},c.prototype._sortCheckItemArr=function(){try{var t=this.selectedInfo;if(!0!==n.Z.isEmptyObject(t)){this._checkClassification(this.itemArr),this.setSelectOptions(),this.setItemTable();var e=this.convertInfoHash2Array(t);e.length>0&&this.setSelectedInfoNM(e),this.modelControl.isBinded()&&this.refresh()}}catch(t){r.Y.printStackTrace(t)}},c.prototype.setSelectedInfo=function(t){try{if(this._removeSelectedInfo(t),this.modelControl.isBinded())this.modelControl.setData(this.getInfoValue(t));else{var e=this.getValue();this.setSelectedInfoNM(t)&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._removeSelectedInfo=function(t){try{if(!t||t.length<1)return!1;for(var e=0;e<t.length;e++)!1===t[e].checked&&this.selectedInfo[t[e].index]&&delete this.selectedInfo[t[e].index]}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getInfoValue=function(t){try{for(var e=0;e<this.itemArr.length;e++){var i=this.itemArr[e].checked;if(i){for(var o=null,s=0;s<t.length;s++)if(e==parseInt(t[s].index,10)){o=t[s];break}o||t.push({index:e,checked:i})}}var a=[],n=this.convertInfoArray2Hash(t);for(e=0;e<this.itemArr.length;e++){(o=n[e])&&o.checked&&a.push(this.itemArr[e].value)}return a.join(this.separator)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.convertInfoArray2Hash=function(t){try{for(var e={},i=0;i<t.length;i++)e[t[i].index]=t[i];return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.convertInfoHash2Array=function(t){try{var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addSelectedInfo=function(t){try{return!(!t||void 0===t.index)&&(this.selectedInfo[t.index]=t,!0)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._deleteSelectedInfo=function(t){try{return!(!t||void 0===t.index)&&(delete this.selectedInfo[t.index],!0)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedInfoNM=function(t){try{if(!n.Z.isArray(t))return!1;for(var e=0;e<t.length;e++){var i=t[e].index,o=n.Z.getBoolean(t[e].checked);i=parseInt(i);var s=document.getElementById(this.id+"_itemTable_"+i+"_checkbox");s&&(s.checked=o),this.itemArr[i].checked=o}var a="";if(1==this.options.allOption){for(var l=!0,h=document.getElementById(this.id+"_itemTable_0_checkbox"),d=1;d<this.itemArr.length;d++)if(!this.itemArr[d].checked){l=!1;break}if(h&&h.checked!=l&&(h.checked=l),1==this.options.displayAllOptionLabel)if(document.getElementById(this.id+"_itemTable_0_checkbox")){
if(h)if(1==h.checked)a=WebSquare.language.getMessage("CheckCombobox_allOption_label")||"choose all";else a=this.getText()}else a=1==l?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"choose all":this.getText();else a=this.getText()}else a=this.getText();return this.options.escape&&(a=this._encode(a)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&""==(a=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen))&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," ")),!0===this.options.accessibility?this.render.innerHTML=a:this.dom.label&&(this.dom.label.innerHTML=a),""==a&&1==this.options.chooseOption&&(a=this._getChooseOptionLabel(),a=WebSquare.xml.decode(a).replace("&nbsp;"," "),!0===this.options.accessibility?this.render.innerHTML=a:this.dom.label&&(this.dom.label.innerHTML=a)),(this.options.editable||this.options.useEdit)&&(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible",this.dom.input.value=a,this.editmode=!1),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=a),!0}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){r.Y.printStackTrace(t)}},c.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){r.Y.printStackTrace(t)}},c.prototype._refreshItemTable=function(){try{this.isOpen&&this.closeSubLayer(),this.setSelectItemArr();var t=this.getSelectedInfo(),e=this.convertInfoHash2Array(t);"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable&&this.itemTable.setItemArr(this.itemArr),e.length>0&&this.setSelectedInfo(e)}catch(t){r.Y.printStackTrace(t)}},c.prototype._getChooseOptionLabel=function(){try{var t=this.options.chooseOptionLabel||this.defaultChooseOptionLabel;if(this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var e=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);e&&(t=e)}return t}catch(t){r.Y.printStackTrace(t)}},c.prototype.stopRefresh=function(t){try{this.refreshStop=n.Z.getBoolean(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.Z.getBoolean(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push({index:i,label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,checked:!0});return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._getSelectedInfo=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)if(this.itemArr[i].checked){var o=this.itemArr[i].orgLabel;void 0===o&&(o=this.itemArr[i].label),e.push({index:i,label:o,value:this.itemArr[i].value})}return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getInfo=function(t){try{var e;return this.itemArr.length>t&&((e={}).index=t,e.label=this.itemArr[t].label,e.value=this.itemArr[t].value,e.checked=n.Z.getBoolean(this.itemArr[t].checked)),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getInfoArray=function(){try{for(var t=[],e=!0,i=0;i<this.itemArr.length;i++){var o={};o.index=i,o.label=this.itemArr[i].label,o.value=this.itemArr[i].value,o.checked=n.Z.getBoolean(this.itemArr[i].checked),t.push(o),
!0===this.options.allOptionChecked&&this.itemArr[i].value!==WebSquare.allValue&&this.itemArr[i].label!==this._getChooseOptionLabel()&&!0!==this.itemArr[i].checked&&(e=!1)}return!0===this.options.allOptionChecked&&t[0].value===WebSquare.allValue&&(t[0].checked=e),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.Z.isNull(t))return;var e=this.getValue();if(this.modelControl.isBinded()?this.modelControl.setData(t):1==this.setValueNM(t)&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}),"gridView"===this.itemTableMode)for(var i=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),o=parseInt(this.itemTable.options.gridViewOptions.checkColumn),s=this.itemTable.gridView.getCellInfo(0,o),l=s.options.trueValue,h=s.options.falseValue,d=1==this.options.allOption?1:0,c=this.itemTable.gridView.getRowCount()-d,u=0;u<c;u++){var p=this.itemTable.gridView._getTdElem(u+d,o);!0===this.itemArr[u+d].checked?(p&&(p.getElementsByTagName("input")[0].checked=!0),this.addSelectedInfo({index:u+d,checked:!0}),i.setCellData(u+d,o,l)):(p&&(p.getElementsByTagName("input")[0].checked=!1),this.addSelectedInfo({index:u+d,checked:!1}),i.setCellData(u+d,o,h))}if(this._getSelectedInfo().length>0&&!0===this.options.showCheckedTop&&null!==this.itemTable&&1==this.setValueNM(t)&&e!=this.getValue()){for(u=0;u<this.getItemCount();u++)if(this.itemArr[u].checked){var g=document.getElementById(this.id+"_itemTable_"+u+"_checkbox");null!=g&&(g.checked=!0),this.addSelectedInfo({index:u,checked:null==g||g.checked})}this._sortCheckItemArr()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(!n.Z.isArray(t)){if(n.Z.isNull(t))return;var e=t.toString();t=e.split(this.separator)}for(var i=[],o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value!=WebSquare.allValue){var a={};a.index=s,a.checked=!1;for(var l=0;l<t.length;l++)if(t[l]==this.itemArr[s].value){a.checked=!0;break}i.push(a)}return this.setSelectedInfoNM(i)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getValue=function(t){try{t||(t=this.separator);for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].value);return i.join(t).wq_trim()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getValueArray=function(){try{for(var t=this.getItemCount(),e=[],i=0;i<t;i++)this.itemArr[i].checked&&e.push(this.itemArr[i].value);return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setText=function(t){try{for(var e=this.getItemCount(),i=[],o=this._getRangeTextArray(t),s=0;s<e;s++)for(var a=0;a<o.length;a++)if(this.options.useEdit&&this.options.checkTarget){if("both"===this.options.checkTarget){if(this.itemArr[s].orgLabel===o[a]||this.itemArr[s].value===o[a]){i.push(this.itemArr[s].value);break}}else if("value"===this.options.checkTarget){if(this.itemArr[s].value===o[a]){i.push(this.itemArr[s].value);break}}else if("label"===this.options.checkTarget&&(this.itemArr[s].orgLabel===o[a]||this.itemArr[s].label===o[a])){i.push(this.itemArr[s].value);break}}else if(this.itemArr[s].label==o[a]){i.push(this.itemArr[s].value);break}this.setValue(i.join(this.separator))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{return this._getRangeText(this.itemArr,this.getItemCount(),t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._getRangeText=function(t,e,i,o){try{i||(i=this.separator);for(var s,a=[],n=!1,l=!1,h=0;h<e;h++){(o?!0===o[h+"_"]:t[h].checked)?this.options.rangeSeparator?(h-s==1&&h!==e-1?n||(n=!0,a.push(this.options.rangeSeparator),l=!0):(n=!1,a.push(t[h].label)),s=h):a.push(t[h].label):n&&(a.push(t[s].label),n=!1)}var d="";if(l)for(h=0;h<a.length;h++)d+=a[h],h!==a.length-1&&a[h]!==this.options.rangeSeparator&&a[h+1]!==this.options.rangeSeparator&&(d+=i);else d=a.join(i).wq_trim();return d}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getTextArray=function(t){try{
for(var e=this.getItemCount(),i=[],o=0;o<e;o++)this.itemArr[o].checked&&i.push(this.itemArr[o].label);return i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._getRangeTextArray=function(t){try{var e=t.split(this.separator);if(this.options.rangeSeparator&&t.indexOf(this.options.rangeSeparator)>=0){for(var i=[],o=this.getItemCount(),s=0;s<e.length;s++)if(e[s].indexOf(this.options.rangeSeparator)>=0){for(var a=e[s].split(this.options.rangeSeparator),n=NaN,l=NaN,h=0;h<o&&(this.options.checkTarget?"both"===this.options.checkTarget?this.itemArr[h].orgLabel===a[0]||this.itemArr[h].value===a[0]?n=h:this.itemArr[h].orgLabel!==a[1]&&this.itemArr[h].value!==a[1]||(l=h):"value"===this.options.checkTarget?this.itemArr[h].value===a[0]?n=h:this.itemArr[h].value===a[1]&&(l=h):"label"===this.options.checkTarget&&(this.itemArr[h].orgLabel===a[0]||this.itemArr[h].label===a[0]?n=h:this.itemArr[h].orgLabel!==a[1]&&this.itemArr[h].label!==a[1]||(l=h)):this.itemArr[h].label==a[0]?n=h:this.itemArr[h].label==a[1]&&(l=h),isNaN(n)||isNaN(l));h++);for(h=n;h<=l;h++)this.options.checkTarget?"both"===this.options.checkTarget?i.push(this.itemArr[h].orgLabel):"value"===this.options.checkTarget?i.push(this.itemArr[h].value):"label"===this.options.checkTarget&&i.push(this.itemArr[h].orgLabel):i.push(this.itemArr[h].label)}else i.push(e[s]);return i}return e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItemArr=function(t,e){try{this.itemArr.push({label:t,value:e}),this.itemDisabledArray.push(!1)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._addOrgArrInfo=function(t,e){try{for(var i=t,o=this.originArrInfo,s=t;s<o.length;s++)i++,o[s].orgIndex=i;e.orgIndex=t,o.splice(t,0,e)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o={value:t,label:e};if(!0===this.options.showCheckedTop&&this.itemArr.length>0){this._addOrgArrInfo(i,o);var s=this._getSelectedInfo().length;!0===this.options.allOption&&s++,this.itemArr.splice(s,0,o)}else this.itemArr.splice(i,0,o);if("0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.itemDisabledArray.splice(i,0,!1),this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a})}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;var e=null;if(t>=0&&t<this.getItemCount()){if(e=this.itemArr.splice(t,1)[0],this.options.editable&&this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}this.itemDisabledArray.splice(t,1)}return this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.setValueNM(this.getValue()),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.removeAll=function(t){try{if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption)){var e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.setSelectOptions(this.itemArr),
this.itemArr.length>0?this.dom.label.innerHTML=this.options.escape?this._encode(this.itemArr[0].label):this.itemArr[0].label:this.dom.label.innerHTML=""}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":var i;if("component"==this.options.renderType||"native"==this.options.renderType)(i=1==this.options.accessibility?document.getElementById(this.id):document.getElementById(this.id+"_label"))&&(i.style.color=e?"#848684":"");var o=this.dom.button;1==e?(this.closeSubLayer(),this.addClass(this.render,"w2checkcombobox_disabled"),null!=o&&this.addClass(o,"w2checkcombobox_button_disabled")):(this.removeClass(this.render,"w2checkcombobox_disabled"),null!=o&&this.removeClass(o,"w2checkcombobox_button_disabled"));break;case"mandatory":1==e?this.addClass(this.render,"w2checkcombobox_mandatory"):this.removeClass(this.render,"w2checkcombobox_mandatory")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),l.q.prototype.hide.call(this)}catch(t){r.Y.printStackTrace(t)}},c.prototype.showTooltip=function(t,e,i){try{if(!i)return;null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o="";this.options.itemTooltipDisplay&&(o="position:absolute;z-index:10000;");var l=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var h=s.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(h){var d=n.Z.getGlobalFunction(h,l.scope_id),c=!0;if("function"==typeof d&&(c=d(l)),!c)return}}catch(t){r.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2checkcombobox_tooltip "+this.options.tooltipClass,style:o}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,a.f.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),a.f.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.checkAll=function(t){try{void 0===t&&(t=!0);for(var e=[],i=0;i<this.itemArr.length;i++)this.itemArr[i].value!=WebSquare.allValue&&e.push({index:i,checked:t});return null!=this.itemTable&&1==this.options.allOption&&0!=e.length&&document.getElementById(this.id+"_itemTable_0_checkbox")&&(document.getElementById(this.id+"_itemTable_0_checkbox").checked=!!t),this.setSelectedInfo(e)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",
this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount()||"gridView"===this.itemTableMode)return;if(e=n.Z.getBoolean(e),this.itemDisabledArray[t]=e,this.itemTable){var i=this.itemTable.getDomList("checkboxArr","input"),o="";o="native"===this.options.renderType?this.itemTable.getDomList("checkboxItemArr","li"):this.itemTable.getDomList("checkboxItemArr","td"),i[t].disabled=e,i[t].itemDisabled=e,1==e?this.addClass(o[t],"w2checkcombobox_item_disabled"):this.removeClass(o[t],"w2checkcombobox_item_disabled")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.itemDisabledArray[t]}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;if(this.options.editable||this.options.useEdit){this._parent_uuid&&a.f.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2checkcombobox_input")&&this.isOpen)return;if(e.match("w2checkcombobox_col_label")||e.match("w2checkcombobox_acc_custom_native_useEditLabel"))return this.isOpen&&!this.options.useEdit?this.closeSubLayer():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this.changeMode(),void(this.options.useEdit&&this.openSubLayer())}if(this.mozTrickBuffer="",this.editmode=!1,this.options.allOption&&this.getItemDisabled(0)&&this.setItemDisabled(0,!1),!this.options.interactionMode){this.viewArr=[];for(var i=0;i<this.itemArr.length;i++)this.viewArr.push({label:this.itemArr[i].label,value:this.itemArr[i].value,orgLabel:this.itemArr[i].orgLabel,index:i})}"native"===this.options.renderType&&null!==this.itemTable&&null!==this.itemTable.selectedCell&&(this.itemTable.selectedCell=null);var o=this.isOpen;this.setSubLayer(),o==this.isOpen&&(this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()),e=null}else this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.options.useEdit&&this.event.isMe(t,this.dom.input))return void(13===e&&this.dom.input.blur());if(this.options.editable){if(this.event.isMe(t,this.dom.input)){if(this.editmode=!0,this.inputKeyDown(t,!1),(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.mozTrickCompare(),n.Z.setInterval(this.mozTrickCompare,{key:this.id+"_mozTrickCompare",caller:this,delay:10})),9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.f.preventDefault(t),i=n.Z.getPreTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.f.preventDefault(t),i=n.Z.getNextTabbableComp(this.id))return this.endEdit(),this.isOpen&&this.closeSubLayer(),void i.focus(t);return}e=t.charCode?t.charCode:t.keyCode;if(s.I.browserCheck.opera){if(18==e&&!this.isOpen)return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}else{if(!(40!=e&&38!=e||this.isOpen))return void this.handleClickEvent(t);if(13==e&&!this.isOpen)return void this.changeMode()}if(9==e)if(t.shiftKey){
if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.f.preventDefault(t),i=n.Z.getPreTabbableComp(this.id)))return this.isOpen&&this.closeSubLayer(),void i.focus(t)}else null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.f.preventDefault(t),(i=n.Z.getNextTabbableComp(this.id))&&(this.isOpen&&this.closeSubLayer(),i.focus(t)));if(null!=this.itemTable&&this.viewArr.length>0)1==this.isOpen&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.itemTable.handleKeydownEvent(t),this.editmode=!1;else if(null!=this.itemTable&&""==this.itemTable.render.style.display)return;if(null!=this.itemTable&&""==this.itemTable.render.style.display)return}else{if(13==e||40==e)return void this.handleClickEvent(t);var i;if(9==e)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(a.f.preventDefault(t),i=n.Z.getPreTabbableComp(this.id)))return void i.focus(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(a.f.preventDefault(t),i=n.Z.getNextTabbableComp(this.id)))return void i.focus(t);if(this.isOpen)return}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownNativeEvent=function(t){try{for(var e=t.charCode?t.charCode:t.keyCode,i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2checkcombobox_acc"))return void(9==e&&(t.shiftKey?this.dom.input&&this.endEdit():this.options.useEdit?(this.showEditMode(!0),this.changeMode()):this.dom.label.setAttribute("tabIndex",0)));if(i.match("w2checkcombobox_input"))return 9==e&&(this.dom.input.blur(),t.shiftKey||this.dom.button.setAttribute("tabIndex",0)),void(13===e&&this.dom.input.blur());if(i.match("w2checkcombobox_acc_custom_label")&&(this.dom.label.removeAttribute("tabIndex"),this.dom.button.setAttribute("tabIndex",0)),i.match("w2checkcombobox_acc_custom_arrow")){if(9==e){if(t.shiftKey)this.options.useEdit?null!==this.dom.input&&(this.showEditMode(!0),this.changeMode()):this.dom.label.setAttribute("tabIndex",0);else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){a.f.preventDefault(t);var o=n.Z.getNextTabbableComp(this.id);if(o)return this.isOpen&&this.closeSubLayer(),void o.focus(t)}}else 13!=e&&40!=e||this.handleClickEvent(t);return}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{if(!this.event.isMe(t,this.dom.input))return;var e;if(t.key)e=t.key;else{var i=t.charCode?t.charCode:t.keyCode;e=String.fromCharCode(i)}if(e===this.options.separator){for(var o=this.getItemCount(),s=[],a=this._getRangeTextArray(this.dom.input.value),n=0;n<o;n++)if(this.itemArr[n].value!==WebSquare.allValue&&this.itemArr[n].value!==this.options.chooseOptionValue){var l={};l.index=n,l.checked=!1;for(var h=0;h<a.length;h++)if(this.options.useEdit&&this.options.checkTarget){if("both"===this.options.checkTarget){if(this.itemArr[n].orgLabel===a[h]||this.itemArr[n].value===a[h]){l.checked=!0;break}}else if("value"===this.options.checkTarget){if(this.itemArr[n].value===a[h]){l.checked=!0;break}}else if("label"===this.options.checkTarget&&(this.itemArr[n].orgLabel===a[h]||this.itemArr[n].label===a[h])){l.checked=!0;break}}else if(this.itemArr[n].label==a[h]){l.checked=!0;break}s.push(l)}for(n=0;n<s.length;n++){var d=s[n].index,c=document.getElementById(this.id+"_itemTable_"+d+"_checkbox");c&&(c.checked=s[n].checked),this.itemArr[d].checked=s[n].checked}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{if(a.f.stopEvent(t),(this.options.editable||this.options.useEdit)&&!this.isOpen){var e=document.getElementById(this.id+"_main_tbody");this.addClass(e,"w2checkcombobox_selected"),"onfocus"==this.options.editModeEvent&&this.changeMode()}"native"===this.options.renderType?this.addClass(this.dom.nativeLabel,"w2checkcombobox_focus"):(this.addClass(this.dom.tbody,"w2checkcombobox_focus"),this.addClass("w2checkcombobox_body_focus"))}catch(t){
r.Y.printStackTrace(t,null,this)}},c.prototype.handleClickEventDocument=function(t){try{!this.event.isMe(t,this.render)&&this.options.handleOtherClick&&(null!=this.itemTable&&this.itemTable.inputBlurInside&&this.editmode&&(s.I.setTimer(this.endEdit,{key:this.id+"_handleClickEventDocument",caller:this,delay:1}),this.itemTable.inputBlurInside=!1),this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),null!=this.itemTable&&0==this.findkeymode?WebSquare.getBody().getLayerListener().isShow(this.id)&&this.closeSubLayer():null!=this.itemTable&&1==this.findkeymode&&(this.findkeymode=!0))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{a.f.stopEvent(t),"native"===this.options.renderType?this.removeClass(this.dom.nativeLabel,"w2checkcombobox_focus"):(this.removeClass(this.dom.tbody,"w2checkcombobox_focus"),this.removeClass("w2checkcombobox_body_focus"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleblurEventInput=function(){"none"!=this.dom.input.style.display&&this.options.handleOtherClick&&(null==this.itemTable||null!=this.itemTable&&!this.itemTable.inputBlurInside)&&(this.endEdit(),this.isOpen&&this.closeSubLayer(),"native"===this.options.renderType&&this.showEditMode(!1))},c.prototype.handleMouseoverEvent=function(t){try{if(a.f.stopEvent(t),"native"==this.options.renderType?this.addClass("w2checkcombobox_native_over"):(this.addClass(this.dom.tbody,"w2checkcombobox_over"),this.addClass("w2checkcombobox_body_over")),!this.isOpen){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if((e.match("w2checkcombobox")||e.match("w2checkcombobox_acc_custom")||e.match("w2checkcombobox_acc_accessibility"))&&(1==this.options.tooltipDisplay||1==this.options.tooltipShowAlways)){var i,o=e.getElement();i=!0===this.options.accessibility?"w2checkcombobox_acc_accessibility":"native"===this.options.renderType?"w2checkcombobox_acc_custom_native_label":"w2checkcombobox_label";var s=this.options.accessibility?o:o.getElementsByClassName(i)[0],n=WebSquare.style.getStyle(s,"text-overflow"),l=this.options.accessibility?s.innerText:this.dom.label.innerHTML;if(!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(o)+20,d=WebSquare.style.getAbsoluteTop(o)+this.render.offsetHeight+3;this.showTooltip(h,d,l)}else if("ellipsis"==n){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=s.className,this.toolTipRuler.innerHTML=s.innerText,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(s,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(s,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(s,"font-weight");var c=this.toolTipRuler.offsetWidth,u=s.clientWidth;if(3!=s.nodeType){var p=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");c-=parseInt(p||"0",10),c-=parseInt(g||"0",10),u-=parseInt(WebSquare.style.getStyle(s,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(s,"padding-right"),10),u-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10)}if(u<c){h=WebSquare.style.getAbsoluteLeft(o)+20,d=WebSquare.style.getAbsoluteTop(o)+this.render.offsetHeight+3;document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(l=this.options.tooltipItemLabel),this.showTooltip(h,d,l)}}}e=null}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),1!=this.options.tooltipDisplay&&1!=this.options.tooltipShowAlways||this.hideTooltip(),"native"==this.options.renderType?this.removeClass("w2checkcombobox_native_over"):(this.removeClass(this.dom.tbody,"w2checkcombobox_over"),
this.removeClass("w2checkcombobox_body_over"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisplayAllOptionLabel=function(t){try{if(!this.options.allOption)return;var e=this.options.displayAllOptionLabel,i=n.Z.getBoolean(t);this.options.displayAllOptionLabel=i;var o=document.getElementById(this.id+"_itemTable_0_checkbox");if(e!=i){var s=!0;if(!o||!o.checked)for(var a=1;a<this.getItemCount();a++)if(!this.itemArr[a].checked){s=!1;break}if(!1===s)return;var l="";l=1==i?WebSquare.language.getMessage("CheckCombobox_allOption_label")||"choose all":this.getText(),this.options.escape&&(l=this._encode(l)),this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&(l=this.customLabelFormatter.call(this,this._getSelectedInfo(),this.isOpen)),this.dom.label&&(this.dom.label.innerHTML=l),"title"==this.options.tooltipMode&&(document.getElementById(this.id).title=l)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.serialize=function(){return{selectedInfo:this.getSelectedInfo()}},c.prototype.restore=function(t){try{return this.checkAll(!1),this.setSelectedInfo(t.selectedInfo),!0}catch(t){return r.Y.printStackTrace(t,null,this),!1}},c.prototype.changeMode=function(){try{if(this.editmode=!0,this.findStop=!1,"block"!=this.dom.input.style.display){if(this.options.rangeSeparator)return this.dom.input.value=this.getText(),this.showEditMode(!0),void("focus"!=this.options.editType?(this.dom.input.select(),this.setfFocus()):document.activeElement!=this.dom.input&&this.setfFocus());var t="",e=this.options.searchTarget;this.options.useEdit&&this.options.checkTarget&&(e=this.options.checkTarget);var i=this.getCheckedValue(e);i.length>0&&(t=i.join(this.separator).wq_trim());var o=t;if(this.options.useEdit||(o+=" "),"focus"==this.options.editType){this.showEditMode(!0),document.activeElement!=this.dom.input&&this.setfFocus();var s=WebSquare.xml.decode(o);this.dom.input.value=s,(n.Z.isOpera()||n.Z.isFF())&&this.dom.input.setSelectionRange(s.length,s.length)}else this.dom.input.value=WebSquare.xml.decode(o),this.showEditMode(!0),this.dom.input.select(),this.setfFocus()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getCheckedValue=function(t){try{var e=[];t&&"both"!==t||(t="orgLabel");for(var i=0;i<this.itemArr.length;i++)this.itemArr[i].checked&&e.push(this.itemArr[i][t]);return e}catch(t){r.Y.printStackTrace(t)}},c.prototype.showEditMode=function(t){t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):s.I.setTimer((function(){try{this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible"}catch(t){r.Y.printStackTrace(t)}}),{key:this.id+"_showEditMode",caller:this,delay:1})},c.prototype.setfFocus=function(){try{this.dom.input.focus(),null!=this.itemTable&&(this.itemTable.inputBlurInside=!1)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.Z.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.Y.printStackTrace(t)}return t},c.prototype.initCheckCombobox=function(){try{this.removeAll(),this.dom.input.value="",this.dummyData=null,this.isOpen&&this.closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},
c.prototype.mozTrickCompare=function(){try{this.dom.input.value!=this.trickBuffer&&(this.trickBuffer=this.dom.input.value,0==this.findStop&&this.inputKeyDown({},!0))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInputFocus=function(){try{this.changeMode()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.inputKeyDown=function(t,e){try{if(0==e)var i=t.charCode?t.charCode:t.keyCode;if(this.interactionMode){if(this.editmode=!1,0==e)if("default"==this.options.interactionKey||this.isOpen||this.options.interactionEnterKey)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.I.browserCheck.chrome||s.I.browserCheck.safari||n.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void(this.options.interactionEnterKey?this.mytime=this.runSubmission(i):this.enterHandle(t));if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus(),s.I.browserCheck.chrome||s.I.browserCheck.safari||n.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.findStop=!0),this.endEdit(),void(this.isOpen&&this.closeSubLayer())}}else;else this.options.interactionKey;if(!this.options.interactionEnterKey){var o=this;this.mytime=setTimeout((function(){o.runSubmission(i)}),100)}return}if(0==e)if(40!=i||this.isOpen){if(38==i||33==i||40==i||34==i||35==i||36==i)return s.I.browserCheck.chrome||s.I.browserCheck.safari||n.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.findStop=!0),this.arrowHandle(t),void(WebSquare.getBody().getLayerListener().isShow(this.id)&&this.itemTable.focus());if(13==i)return void this.enterHandle(t);if(9==i||9==i&&t.shiftKey){if(""==this.dom.input.value||0==this.viewArr.length)return;return this.arrowHandle(t),s.I.browserCheck.chrome||s.I.browserCheck.safari||n.Z.isIEAllVersion()?(this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime)):(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.findStop=!0),void(this.isOpen&&this.closeSubLayer())}}else if(""==this.dom.input.value.wq_trim())return void this.render.click();if(this.itemArr.length>0){o=this;this.mytime=setTimeout((function(){o.find()}),100)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.arrowHandle=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(null==this.itemTable)return;var i=this.findinItemArr(this.dom.input.value,this.options.searchTarget);return!this.editmode&&!this.findkeymode||""!=this.dom.input.value&&0!=this.viewArr.length?(9==e||9==e&&t.shiftKey?this.addSelectedInfo({index:i,checked:!0}):this.itemTable.handleKeydownEvent(t),void(this.mozTrickBuffer="")):void a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.find=function(){try{var t=this.dom.input.value;if(""==t)return this.mozTrickBuffer=t,void(null!=this.itemTable&&this.closeSubLayer());if(this.mozTrickBuffer==t)return void(this.mozTrickBuffer=t);this.mozTrickBuffer=t,this.isOpen&&this.closeSubLayer(),this.viewArr=[],this.options.caseSensitive||(t=t.toLowerCase());for(var e=0;e<this.itemArr.length;e++)if(!this.itemArr[e].noItem){var i=!1;if(this.itemArr[e].orgLabel||(this.itemArr[e].orgLabel=this.itemArr[e].label,this.itemArr[e].label=this.getItemText(e)),!i&&("label"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var o=this.options.caseSensitive?this.itemArr[e].orgLabel:this.itemArr[e].orgLabel.toLowerCase()
;"all"==this.options.searchTarget&&(o=this.options.caseSensitive?this.itemArr[e].label:this.itemArr[e].label.toLowerCase()),"contain"==this.search?i=this.myhelper.containWith(o,t):"start"==this.search?i=this.myhelper.startWith(o,t):"none"==this.search&&(i=o==t)}if(!i&&("value"==this.options.searchTarget||"both"==this.options.searchTarget||"all"==this.options.searchTarget)){var s=this.options.caseSensitive?this.itemArr[e].value:this.itemArr[e].value.toLowerCase();"contain"==this.search?i=this.myhelper.containWith(s,t):"start"==this.search?i=this.myhelper.startWith(s,t):"none"==this.search&&(i=s==t)}var a=this.itemArr[e].label;if(this.options.useKeywordHighlight){var n=a.indexOf(this.mozTrickBuffer);n>=0&&(a=a.substring(0,n)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+a.substring(n+this.mozTrickBuffer.length,a.length))}i&&this.viewArr.push({value:this.itemArr[e].value,label:a,orgLabel:this.itemArr[e].orgLabel,index:e})}if(this.options.disabled)return!1;this.viewArr.length>0?this.isOpen||(1==this.options.allOption&&(this.viewArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,index:0,noItem:!0}].concat(this.viewArr),this.setItemDisabled(0,!0)),this.openSubLayer({select:!1})):this.closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getFormattedValue=function(t,e){try{var i=e;if(this.options.displayFormatter){if(!this.displayFormatter){this.fixedIndex=-1,1==this.options.allOption&&this.fixedIndex++,1==this.options.chooseOption&&this.fixedIndex++;try{var o=n.Z.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof o&&(this.displayFormatter=o)}catch(t){r.Y.printStackTrace(t)}}this.displayFormatter&&t>this.fixedIndex&&(i=this.displayFormatter(e))}return i}catch(t){r.Y.printStackTrace(t)}},c.prototype.enterHandle=function(t){try{var e,i=this.dom.input.value;a.f.fireEvent(this,"oneditend",i);var o=n.Z.getDataPrefix("index");if((null==this.itemTable||null==this.itemTable.selectedCell)&&(null==this.itemTable&&this.setSubLayer(),null==this.itemTable.selectedCell)){var l=this.findinItemArr(this.dom.input.value,this.options.searchTarget);if("clear"===this.noResult);else if("previous"===this.noResult)void 0===l||this.addSelectedInfo({index:l,checked:!0});else if("noEnd"===this.noResult){if(void 0===l)return;this.addSelectedInfo({index:l,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==l?(this.selectedInfo={},e=this.findinItemArr(this.viewArr[0].value,"value")):e=l,this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(this.selectedInfo={},e=this.findinItemArr(this.itemArr[0].value,"value"),this.addSelectedInfo({index:e,checked:!0})))}if(s.I.browserCheck.opera&&a.f.stopEvent(t),this.mozTrickBuffer="",null!=this.itemTable.selectedCell)if(e=this.findinItemArr(this.dom.input.value,this.options.searchTarget),"clear"===this.noResult);else if("previous"===this.noResult)1==this.interactionMode?void 0===e&&(this.selectedInfo={}):(void 0===e&&void 0===(e=this.itemTable.selectedCell.index)&&(e=this.itemTable.selectedCell.getAttribute(o)),this.addSelectedInfo({index:e,checked:!0}));else if("noEnd"===this.noResult){if(void 0===e)return;this.addSelectedInfo({index:e,checked:!0})}else"useData"===this.noResult||"first"===this.noResult&&(this.viewArr.length>0?(null==e&&(e=this.findinItemArr(this.viewArr[0].value,"value")),this.addSelectedInfo({index:e,checked:!0})):0!=this.dom.input.value&&void 0!==this.findinItemArr(this.dom.input.value,"value")||this.itemArr.length>0&&(e=this.findinItemArr(this.itemArr[0].value,"value"),this.selectedInfo={},this.addSelectedInfo({index:e,checked:!0})));this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.focus(),this.closeTable()}catch(t){r.Y.printStackTrace(t,null,this)}},
c.prototype.findinItemArr=function(t,e){try{for(var i=e||"label",o=0;o<this.itemArr.length;o++)if("value"===i){if(t==this.itemArr[o].value)return o}else if("label"===i){if(1==this.options.displayMode||2==this.options.displayMode){if(t==this.itemArr[o].orgLabel)return o}else if(t==this.itemArr[o].label)return o}else if("both"===i){if(t==this.itemArr[o].orgLabel||t==this.itemArr[o].value)return o}else if("all"===i&&t==this.itemArr[o].orgLabel+"|"+this.itemArr[o].value)return o;if(this.dummyData&&("value"===i&&this.dummyData.value||"label"===i&&t===this.dummyData.label||"all"===i&&t===this.dummyData.label+"|"+this.dummyData.value))return NaN}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.runSubmission=function(t){try{var e=!0,i=this.dom.input.value,o=n.Z.getStringByteSize(i);if(this.options.interactionMinByteLength>0&&this.options.interactionMinByteLength>o&&(e=!1),"false"!=this.options.allowEmptySubmission&&""==i||"default"==this.options.interactionKey&&this.mozTrickBuffer==i&&(e=!1),e)if(this.mozTrickBuffer=i,""!=this.options.submissionFunc.wq_trim()){var s=n.Z.getGlobalFunction(this.options.submissionFunc,this.scope_id);"function"==typeof s&&s(i,t)}else if(""!=this.options.submission.wq_trim()){var a="<key>"+WebSquare.xml.encode(i)+"</key>";WebSquare.WebSquaredoc.models[0].rebuild(WebSquare.xml.parse(a),this.options.keyInputRef),WebSquare.WebSquaredoc.models[0].refresh(),WebSquare.ModelUtil.executeSubmission(this.options.submission)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setItemSet=function(t,e,i){try{void 0===this.itemsetObj&&(this.itemsetObj={});var o=!1;e==this.itemsetObj.label&&i==this.itemsetObj.value||(o=!0),this.itemsetObj.nodeset=t,o&&(this.itemsetObj.label=e,this.itemsetObj.value=i),this.buildItemArr();for(var a=0;a<this.itemArr.length;a++)this.itemArr[a].orgLabel=this.itemArr[a].label,this.itemArr[a].label=this.getItemText(a);if(this.options.interactionMode){if(s.I.clearTimer(this.id+"_showEditMode",!0),1==this.options.allOption&&this.itemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel,noItem:!0}].concat(this.itemArr)),1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++){var n=this.itemArr[a].label;if(this.options.useKeywordHighlight){var l=n.indexOf(this.mozTrickBuffer);l>=0&&(n=n.substring(0,l)+"<span class='w2checkcombobox_keyword'>"+this.mozTrickBuffer+"</span>"+n.substring(l+this.mozTrickBuffer.length,n.length))}this.viewArr.push({label:n,orgLabel:this.itemArr[a].orgLabel,value:this.itemArr[a].value,index:a})}}else{if(1==this.options.chooseOption){e=this._getChooseOptionLabel();this.itemArr=[{label:e,value:this.options.chooseOptionValue,orgLabel:e,noItem:!0}].concat(this.itemArr)}this.viewArr=[];for(a=0;a<this.itemArr.length;a++)this.viewArr.push({label:this.itemArr[a].label,value:this.itemArr[a].value,orgLabel:this.itemArr[a].orgLabel,index:a})}var h=this.getCheckedValue(this.options.searchTarget),d="";h.length>0&&(d=h.join(this.separator).wq_trim()),this.itemArr.length>0?!0===this.options.accessibility?this.render.innerHTML=d:this.dom.label.innerHTML=d:!0===this.options.accessibility?this.render.innerHTML="":this.dom.label.innerHTML=""}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.buildItemArr=function(){try{this.modelControl.setItemset(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value),this.itemArr=[],this.itemsetObj.nodeset.match("data:")?(this.itemArr=this.modelControl.getDataCollectionItemsetData(this.id),this.allItemArr=this.modelControl.getDataCollectionItemsetData(this.id,{allData:!0})):this.itemArr=this.modelControl.getItemsetData(),this.options.useLocale&&!1!==this.options.useItemLocale&&(this.itemArr=this.getLocaleItemArr(this.itemArr),this.allItemArr=this.getLocaleItemArr(this.allItemArr))}catch(t){
r.Y.printStackTrace(t,null,this)}},c.prototype.closeTable=function(){try{this.closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.openTable=function(){try{this.showTable()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.endEdit=function(){try{var t=this.dom.input.value;if(a.f.fireEvent(this,"oneditend",t),this.options.useEdit)return void this.setText(t);this.mytime&&clearTimeout(this.mytime),this.hideTime&&clearTimeout(this.hideTime),this.showEditMode(!1),this.mozTrickBuffer="",(s.I.browserCheck.moz||s.I.browserCheck.opera)&&(this.findStop=!0,n.Z.clearInterval(this.id+"_mozTrickCompare"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.showTable=function(){try{this.openSubLayer({select:!1})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setGridViewData=function(){try{var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList),e=this.gridViewOptions.dataComp.filterManager.filterArr;if(e)for(var i=0;i<e.length;i++)t.setColumnFilter({type:e[i].options.type,colIndex:e[i].options.colIndex,key:e[i].options.key,condition:e[i].options.condition});if(this.options.allOption){var o=t.getAllData(),s=WebSquare.language.getMessage("CheckCombobox_all")||"choose all";if(o[0]!=s){for(var a=[],n=-1,l=0;l<t.cellIdList.length;l++)-1==n&&t.cellIdList[l]==this.itemsetObj.label&&(n=l),a.push("");this.labelColumn=-1==n?0:n,a[this.labelColumn]=this.defaultAllOptionLabel,t.setRowData(0,a,!1)}}var h=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display;h&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),h&&this.itemTable.hide()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i){i.hide(),this.removeClass("w2checkcombobox_open");var o=this.getValue(),s=this.getInfoArray(),n=this.convertInfoHash2Array(this.selectedInfo);n.length>0&&this.setSelectedInfo(n),this.isOpen=!1;var l=this.getValue();if(o!=l){var h={oldInfo:s,newInfo:this.getInfoArray(),oldValue:o,newValue:l};a.f.fireEvent(this,"onviewchange",h)}this.isOpen=!1,!0===e?a.f.fireEvent(this,"onclose",!0):a.f.fireEvent(this,"onclose",!1),this.selectedInfo={}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._openOtherLayer=function(){try{if("gridView"==this.itemTableMode&&this.gridViewItemArr.length<=0)return;var t,e=this.otherComponent;if("grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(this.setSubLayer(),e=this.itemTable),!this.isOpen){e.setPosition(0,0),e.show();var i=0;this.options.navBtn&&(t=this.itemTable.getElementById(this.id+"_btnArea"))&&(i=t.getBoundingClientRect().height,t.style.width=this.itemTable.render.clientWidth+"px"),"grid"==this.itemTableMode?this.itemTable.render.style.height=parseFloat(this.itemTable.grid.render.style.height)+i+"px":"gridView"==this.itemTableMode&&(this.itemTable.render.style.height=parseFloat(this.itemTable.gridView.render.style.height)+i+"px"),this.addClass("w2checkcombobox_open");var o=WebSquare.style.getAbsoluteLeft(this.render),s=WebSquare.style.getAbsoluteTop(this.render),a=this.options.direction;if("auto"==a){var n=document.body.scrollTop;n<document.documentElement.scrollTop&&(n=document.documentElement.scrollTop);var l=s-n,h=document.documentElement.clientHeight-(l+this.render.offsetHeight),d=e.render.offsetHeight;h<d&&l>d&&(a="up")}"up"==a?s-=e.render.offsetHeight:s+=this.render.offsetHeight,document.documentElement.clientWidth<o+e.render.offsetWidth&&(o=o+this.render.offsetWidth-e.render.offsetWidth),"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(o=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(e.render.style.width=this.render.offsetWidth+"px")),e.render.style.left=o+"px",e.render.style.top=s+"px",this.isOpen=!0,
this.itemTableDirection=a,WebSquare.style.adjustZIndex(this.uuid,e.uuid,"itemTable")}if("grid"==this.itemTableMode)null!=this.targetFocusedIndex?c=this.targetFocusedIndex:-1==(c=this.itemTable.grid.getFocusedRowIndex())&&(c=0),this.itemTable.grid.setFocusedCell(c,0),this.targetFocusedIndex=null;else if("gridView"==this.itemTableMode){var c;null!=this.targetFocusedIndex?c=this.targetFocusedIndex:-1==(c=this.itemTable.gridView.getFocusedRowIndex())&&(c=0),this.itemTable.gridView.setFocusedCell(c,0),this.targetFocusedIndex=null}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setVisibleRowNum=function(t){try{this.options.visibleRowNum=t,this._closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._clearVisibleColumnChecked=function(){try{for(var t=!1,e=0;e<this.itemArr.length;e++){var i=this.itemArr[e];!0===i._hidden&&!1!==i.checked&&(i.checked=!1,t=!0)}if(t){var o=this.getValue();this.modelControl.isBinded()&&this.modelControl.setData(o),this.setValueNM(o)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._encode=function(t){var e=t;try{var i="<span class='w2checkcombobox_keyword'>",o="</span>",s=t.indexOf(o,38);return e=this.options.useKeywordHighlight&&s>=0&&t.slice(0,38)===i&&t.slice(s,s+7)===o?i+WebSquare.xml._encode(t.slice(38,s))+o+WebSquare.xml._encode(t.slice(s+7)):WebSquare.xml._encode(t)}catch(t){return r.Y.printStackTrace(t,null,this),e}},c.prototype.handleItemtableMousedown=function(t){try{for(var e=this.itemTable.event.getTargetIterator(t),i=n.Z.getDataPrefix("row"),o=n.Z.getDataPrefix("col");e.next();)if("native"!==this.options.renderType&&e.match(this.itemTable.options.w2table_col,null,"td")||"native"===this.options.renderType&&e.match(this.itemTable.options.w2table_col,null,"li")){var s=e.getElement(),l=a.f.getMouseX(t),h=a.f.getMouseY(t);this._currentTarget={row:parseInt(s.getAttribute(i),10),col:parseInt(s.getAttribute(o),10),mouseX:l,mouseY:h,selectedIndex:{},shiftKey:t.shiftKey},this._dragGhost.setPosition(l,h),this._dragGhost.show();var d={passive:!1};return n.Z.emptySelection(),a.f.preventDefault(t),1==n.Z.isTouchDevice()&&(this.itemTable.event.addListener(document.documentElement,"ontouchmove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),d),this.itemTable.event.addListener(document.documentElement,"ontouchend",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),d)),this.itemTable.event.addListener(document.documentElement,"onmousemove",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMousemove),d),void this.itemTable.event.addListener(document.documentElement,"onmouseup",this.itemTable.event.bindAsEventListener(this,this.handleItemtableMouseup),d)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleItemtableMousemove=function(t){try{if(!this._currentTarget)return;var e=a.f.getMouseX(t),i=a.f.getMouseY(t),o=e-this._currentTarget.mouseX,s=i-this._currentTarget.mouseY,l=o>0?0:o,h=s>0?0:s;(l<0||h<0)&&this._dragGhost.setPosition(this._currentTarget.mouseX+l,this._currentTarget.mouseY+h),this._dragGhost.setSize(Math.abs(o),Math.abs(s));for(var d=a.f.getTarget(t),c=this.itemTable.event.getTargetIterator(t),u=n.Z.getDataPrefix("row"),p=n.Z.getDataPrefix("col");c.next();)if("native"!==this.options.renderType&&c.match(this.itemTable.options.w2table_col,null,"td")||"native"===this.options.renderType&&c.match(this.itemTable.options.w2table_col,null,"li")){d=c.getElement();for(var g=parseInt(d.getAttribute(u),10),m=parseInt(d.getAttribute(p),10),f=d.parentNode.childNodes.length,b=g-this._currentTarget.row,y=m-this._currentTarget.col,v=Math.abs(b),w=Math.abs(y),S={},_=0;_<=v;_++)for(var C=0;C<=w;C++){var x,I;x=b>0?this._currentTarget.row+_:this._currentTarget.row-_,I=y>0?this._currentTarget.col+C:this._currentTarget.col-C;var T=-1;if(S[T="native"===this.options.renderType?x:x*f+I]=!0,
!this._currentTarget.selectedIndex[T])(L=document.getElementById(this.itemTable.id+"_"+T))&&L.firstChild&&L.firstChild.checked===this._currentTarget.shiftKey&&L.click()}for(var k in this._currentTarget.selectedIndex){var L;if(!S[k])(L=document.getElementById(this.itemTable.id+"_"+k))&&L.click()}this._currentTarget.selectedIndex=S,c.stop()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleItemtableMouseup=function(t){try{this._currentTarget=null,this._dragGhost.setSize(0,0),this._dragGhost.hide(),1==n.Z.isTouchDevice()&&(this.itemTable.event.removeEvent(document.documentElement,"ontouchmove"),this.itemTable.event.removeEvent(document.documentElement,"ontouchend")),this.itemTable.event.removeEvent(document.documentElement,"onmousemove"),this.itemTable.event.removeEvent(document.documentElement,"onmouseup")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value,i=this.validator.validateKeyInput(this.dom.input,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.dom.input);n.Z.isIEAllVersion()||(o-=e.length-i.str.length),this.dom.input.value=i.str,WebSquare.text.setCaretPos(this.dom.input,o)}}else a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.Y.printStackTrace(t,null,this)}}},554:function(t,e,i){"use strict";i.r(e),i.d(e,{floatingLayer:function(){return h}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.floatingLayer",pluginName:"floatingLayer",parseChild:!0,userEvents:["onclose","onlayermove","onlayerclick","onbeforeclose","onlayerresize"],useConfig:!0,bodyComplex:!0,dragAlwaysView:!1,title:"",titleClass:"",useResizeDrag:!1,modal:!1,closeButtonSrc:"",closeButtonClass:"",headerLeftClass:"",headerCenterClass:"",headerRightClass:"",bodyLeftClass:"",bodyCenterClass:"",bodyRightClass:"",bodyLeftBottomClass:"",bodyBottomClass:"",bodyRightBottomClass:"",useModal:!1,useModalStack:"",frameModal:"",useAnchor:!1,dragAutoPosition:!1,movable:!0,documentTitle:!0,closeTitle:"close",ghostLayer:!1,headerHTML:"",dragResizable:!1,fixed:!1,useCloseButton:!0,useLocale:!1,localeRef:"",accessibility:!1,layerMoveType:"overflow"},h.prototype.initialize=function(t){try{this.zIndex=0,""==this.options.useModalStack&&(this.options.useModalStack=s.I.getConfiguration("/WebSquare/floatingLayer/@useModalStack")),this.modalStack=0}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t,e=[],i=this.options.title;1==this.options.useLocale&&""!=this.options.localeRef&&(i=this.getLocaleValue(this.options.localeRef)),t=i?"title='"+i.wq_replaceAll("'","&#39;")+"'":"";var o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'";if(1==this.options.accessibility){e.push("<div id='"+this.id+"' "+o+" class='w2floatingLayer w2floatingLayer_group "+this.options.className+"' role='dialog' aria-modal='true' aria-labelledby='"+this.options.id+"_title' aria-describedby='"+this.options.id+"_contents'>"),e.push("<div class=''>"),e.push("<div class='w2floatingLayer_dragArea'>"),e.push("<div class='w2floatingLayer_header'>"),e.push("<h2 id='"+this.options.id+"_title' class='w2floatingLayer_div_title'>"+i+"</h2>"),e.push("</div>"),e.push("</div>"),e.push("<div id='"+this.options.id+"_contents' class='w2floatingLayer_contents w2floatingLayer_div_contents'>");for(var a=this.getChildren(),l=0;l<a.length;l++)e.push(a[l].toHTML());e.push("</div>"),e.push("<input id='"+this.id+"_closeButton' type='button' class='w2floatingLayer_header_close_button' value='"+this.options.closeTitle+"'>"),e.push("</div>")}else{
if(e.push("<div role='application' id='"+this.id+"' "+o+" class='w2floatingLayer "+this.options.className+"' "+s+">"),e.push("<table class='w2floatingLayer_table'>"),e.push("<tr class='w2floatingLayer_dragArea'>"),e.push("<td class='w2floatingLayer_topleft "+this.options.headerLeftClass+"'></td>"),e.push("<td id='"+this.id+"_headerHTML' class='w2floatingLayer_topcenter "+this.options.headerCenterClass+"' "+t+" >"),this.options.headerHTML){var h=this.options.headerHTML;try{var d=n.Z.getGlobalFunction(this.options.headerHTML,this.scope_id);h="function"==typeof d?d():this.options.headerHTML}catch(t){r.Y.printStackTrace(t,null,this)}e.push(h)}else e.push("<div id='"+this.id+"_titleDiv' class='w2floatingLayer_title "+this.options.titleClass+"' >"+i+"</div>"),n.Z.getBoolean(this.options.useATagBtn)?e.push("<a id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+s+"' href='javascript:void(null);' title='"+this.options.closeTitle+"' ></a></div>"):e.push("<div id='"+this.id+"_closeButton' class='w2floatingLayer_close_button "+this.options.closeButtonClass+"' "+s+" title='"+this.options.closeTitle+"' ></div>");if(e.push("</td>"),e.push("<td class='w2floatingLayer_topright "+this.options.headerRightClass+"'></td>"),e.push("</tr>"),n.Z.getBoolean(this.options.fullContentArea)){e.push("<tr>"),e.push("<td class='w2floatingLayer_fullContentArea' colSpan=3>"),e.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),e.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' tabIndex='0'>"+i+"</div>");for(a=this.getChildren(),l=0;l<a.length;l++)e.push(a[l].toHTML());e.push("</div>"),e.push("</td>"),e.push("</tr>")}else{e.push("<tr>"),e.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerleft "+this.options.bodyLeftClass+"'></td>"),e.push("<td class='w2floatingLayer_centercenter'>"),e.push("<div id='"+this.id+"_contents' class='w2floatingLayer_contents "+this.options.bodyCenterClass+"'>"),e.push("<div id='"+this.id+"_innerLink' class='w2floatingLayer_innerLink' "+s+">"+i+"</div>");for(a=this.getChildren(),l=0;l<a.length;l++)e.push(a[l].toHTML());e.push("</div>"),e.push("</td>"),e.push("<td class='w2floatingLayer_dragArea w2floatingLayer_centerright "+this.options.bodyRightClass+"'></td>"),e.push("</tr>"),e.push("<tr class='w2floatingLayer_dragArea'>"),e.push("<td class='w2floatingLayer_bottomleft "+this.options.bodyLeftBottomClass+"'></td>"),e.push("<td class='w2floatingLayer_bottomcenter "+this.options.bodyBottomClass+"'></td>"),e.push("<td class='w2floatingLayer_bottomright "+this.options.bodyRightBottomClass+"'></td>"),e.push("</tr>")}e.push("</table>")}return this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_right'></div>"),e.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize'></div>"),e.push("<div id='"+this.id+"_resize' class='w2floatingLayer_resize_bottom'></div>")),e.push("</div>"),e.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setPreAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.Z.getStyleProperty(this.render,"z-index");t&&"auto"!=t||(t=4500),this.render.style.zIndex=t,this.zIndex=t}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.contents=this.getElementById(this.id+"_contents"),this.dom.closeButton=this.getElementById(this.id+"_closeButton"),1==this.options.useModal){var t=n.Z.getStyleProperty(this.render,"z-index");n.Z.getStyleProperty(this.render,"z-index")&&"auto"!=t||(this.render.style.zIndex=4500)}if(this.resetContentSize(),n.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),
this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStart)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),this.render.offsetWidth>0&&this.render.offsetHeight>0&&this.options.useModal&&this.showModal(),0==this.options.useCloseButton){var e=this.getElementById(this.id+"_closeButton");e&&(e.style.display="none")}if("restrict"===this.options.layerMoveType&&this.render&&this.render.parentNode){var i=this.render.parentNode;"hidden"!==window.getComputedStyle(i).overflow&&(i.style.overflow="hidden")}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(1==this.options.accessibility){if(27==e)this.hide(),a.f.fireEvent(this,"onclose");else if(t.shiftKey&&9==e){if((l=n.Z._getTabbableComp(this.render)).length>=1&&t.target==l[0]&&this.dom.closeButton)return this.dom.closeButton.focus(),void a.f.preventDefault(t)}for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2floatingLayer_close_button")||i.match("w2floatingLayer_header_close_button"))if(13==e||32==e)this.handleClickEvent(t);else if(t.shiftKey||9!=e){if(1==this.options.movable&&(38==e||40==e||37==e||39==e)){var o=this.getAbsolutePosition("left",this.render),s=this.getAbsolutePosition("top",this.render);38==e?(s-=1,o=null):40==e?(s+=1,o=null):37==e?(o-=1,s=null):39==e&&(o+=1,s=null),(null!=o&&o>0||null!=s&&s>0)&&this.setPosition(o,s)}}else{var l;if((l=n.Z._getTabbableComp(this.render)).length>=1)l[0].focus(),a.f.preventDefault(t);else if(this.dom.closeButton)return void this.dom.closeButton.focus()}return void(i=null)}if(13!=e)return;this.handleClickEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.focus=function(){try{this.render.focus()}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype._calculateRestrictedPosition=function(t,e,i,o,s){try{s=s||0;var a,n,l,h,d=document.getElementById(this.id+"_drag"),c=this.render.offsetLeft+i,u=this.render.offsetTop+o;if(this.parentControl&&(a=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement.scrollLeft||document.body.scrollLeft),this.render&&this.render.parentNode){var p=this.render.parentNode;l=WebSquare.style.getAbsoluteTop(p),h=WebSquare.style.getAbsoluteLeft(p)}var g=this.getMaxSize(),m=g.height,f=g.width,b=WebSquare.style.getAbsoluteLeft(d),y=WebSquare.style.getAbsoluteTop(d),v=window.getComputedStyle(d),w=parseFloat(v.borderTopWidth)||0,S=parseFloat(v.borderBottomWidth)||0,_=parseFloat(v.borderLeftWidth)||0,C=parseFloat(v.borderRightWidth)||0,x=d.offsetWidth-_-C,I=d.offsetHeight-w-S,T=!1;return b<h-s&&i<0?(c=0,T=!0):b+x>f+h+s&&i>0?(c=f-x-n,T=!0):y<l-s&&o<0?(u=0,T=!0):y+I>l+m+s&&o>0&&(u=m-I-a,T=!0),u>this.render.parentNode.offsetHeight-I&&(u=m-I-a),c>this.render.parentNode.offsetWidth-x&&(c=f-x-n),c<0&&(c=0),u<0&&(u=0),this._lastCalculatedPosition={left:c,top:u},{isOutOfBounds:T}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{a.f.fireEvent(this,"onlayerclick"),a.f.stopPropagation(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2floatingLayer_close_button")||e.match("w2floatingLayer_header_close_button")){if(!1===a.f.fireEvent(this,"onbeforeclose"))break;this.hide(),this.options.useModal,a.f.fireEvent(this,"onclose")}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleMousedownEvent=function(t){try{if(!this.options.movable)return
;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2floatingLayer_dragArea")&&!this.options.fixed){var i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:10,mode:"move",makeGhostLayer:function(t){t.setSize(i.render.offsetWidth,i.render.offsetHeight);var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render);return t.setPosition(e,o),t},handleStart:function(){1==i.options.useModal&&WebSquare.getBody().showModal("w2modal_onmove")},handleUpdate:function(t,e,o,s,r){if("restrict"===i.options.layerMoveType){var a=i._calculateRestrictedPosition(t,e,o,s,40);a&&a.isOutOfBounds&&WebSquare.dragdrop.gDragManager.finish(r)}},handleFinish:function(t,e,o,s){var r,n,l=/matrix\((-?\d*\.?\d+),\s*0,\s*0,\s*(-?\d*\.?\d+),\s*0,\s*0\)/,h=WebSquare.style.getStyle(document.body,"transform");if(h?(r=null==(r=h.match(l))?1:parseFloat(r[1])||1,n=null==(n=h.match(l))?1:parseFloat(n[2])||1):(r=1,n=1),"restrict"===i.options.layerMoveType){var d=i.render.offsetLeft,c=i.render.offsetTop,u=i.render.clientWidth,p=i.render.clientHeight,g=i.getMaxSize(),m=g.width,f=g.height,b=d+o,y=c+s;d+o<0&&(b=0),c+s<0&&(y=0),d+u+o>m&&(b=u<=m?m-u:o<0?0:d),c+p+s>f&&(y=p<=f?f-p:s<0?0:c),i.setPosition(b/r,y/n)}else WebSquare.idCache[i.parentFrame]?i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(WebSquare.idCache[i.parentFrame].render))/r,(e+s-WebSquare.style.getAbsoluteTop(WebSquare.idCache[i.parentFrame].render))/n):i.setPosition((t+o-WebSquare.style.getAbsoluteLeft(document.body))/r,(e+s-WebSquare.style.getAbsoluteTop(document.body))/n);1==i.options.useModal&&WebSquare.getBody().hideModal(!0),a.f.fireEvent(i,"onlayermove",t+o,e+s)}})}if(e.match("w2floatingLayer_resize")){a.f.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleUpdate:function(t,e,o,s,r){if("restrict"===i.options.layerMoveType){var a=i._calculateRestrictedPosition(t,e,o,s);a&&a.isOutOfBounds&&WebSquare.dragdrop.gDragManager.finish(r)}},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10)+o,n=parseInt(i.getStyle("height"),10)+s;if("restrict"===i.options.layerMoveType){var l=i.getMaxSize(),h=l.width,d=l.height,c=i.render.offsetLeft+a,u=i.render.offsetTop+n;h<c&&(a=h-i.render.offsetLeft),d<u&&(n=d-i.render.offsetTop)}i.setSize(a,n)}})}if(e.match("w2floatingLayer_resize_right")){a.f.stopEvent(t);i=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_right",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleUpdate:function(t,e,o,s,r){if("restrict"===i.options.layerMoveType){var a=i._calculateRestrictedPosition(t,e,o,s,40);a&&a.isOutOfBounds&&WebSquare.dragdrop.gDragManager.finish(r)}},handleFinish:function(t,e,o,s,r){
i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10),l=a+o;if("restrict"===i.options.layerMoveType){var h=i.getMaxSize().width;h<i.render.offsetLeft+l&&(l=h-i.render.offsetLeft)}i.setSize(l,n)}})}if(e.match("w2floatingLayer_resize_bottom")){a.f.stopEvent(t);i=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:"resize_bottom",makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(i.render),o=WebSquare.style.getAbsoluteTop(i.render),s=i.getElementSize(i.render),r=s.width,a=s.height;return r=r-(parseInt(n.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(n.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(r,a),t.setPosition(e,o),t},handleStart:function(){i.showModal.call(i)},handleUpdate:function(t,e,o,s,r){if("restrict"===i.options.layerMoveType){var a=i._calculateRestrictedPosition(t,e,o,s,40);a&&a.isOutOfBounds&&WebSquare.dragdrop.gDragManager.finish(r)}},handleFinish:function(t,e,o,s,r){i.hideModal.call(i);var a=parseInt(i.getStyle("width"),10),n=parseInt(i.getStyle("height"),10)+s;if("restrict"===i.options.layerMoveType){var l=i.getMaxSize().height;l<i.render.offsetTop+n&&(n=l-i.render.offsetTop)}i.setSize(a,n)}})}}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.addClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_close_button")&&this.removeClass(this.dom.closeButton,"w2floatingLayer_close_button_over");e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleSelectStart=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2floatingLayer_dragArea")&&a.f.stopEvent(t);e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setSize=function(t,e){try{if(!this.render)return;t=parseInt(t),e=parseInt(e),null!=t&&!isNaN(t)&&t>=0&&(this.render.style.width=t+"px"),null!=e&&!isNaN(e)&&e>=0&&(this.render.style.height=e+"px",this.resetContentSize()),a.f.fireEvent(this,"onlayerresize")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.resetContentSize=function(){try{var t=n.Z.getStyleProperty(this.render,"height");if(t=parseInt(t,10),isNaN(t)){var e=this.getSize("height")-42;this.dom.contents.style.height="number"==typeof e&&e>0?this.getSize("height")-42+"px":""}else this.dom.contents.style.height=t-42+"px";this.options.fullContentArea&&(this.dom.contents.style.width=this.render.style.width)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setTitle=function(t){try{this.dom.titleDiv||(this.dom.titleDiv=this.getElementById(this.id+"_titleDiv")),this.dom.titleDiv&&(this.dom.titleDiv.innerHTML=t,this.dom.titleDiv.parentNode.setAttribute("title",t.wq_replaceAll("'","&#39;")))}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.showModal=function(){var t=WebSquare.getBody();if(this.modalStack<=0){if(WebSquare.util.getBoolean(this.options.useModalStack)){var e={},i=this.options.pluginName;if(this.options.frameModal){e[i="popup"]={id:this.uuid};var o={className:"w2modal_floatingLayer",popupModal:this.options.useModal,stackComponents:e};if("true"===this.options.frameModal){var s=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&s!=this.scope_obj.uuid?this.scope_obj.showFrameModal(o):t.showModal(o)}else"false"===this.options.frameModal&&t.showModal(o)}else e[i]=this.uuid,t.showModal("w2modal_floatingLayer",null,e)}else t.showModal("w2modal_floatingLayer")
;this.modalStack++}},h.prototype.hideModal=function(){if(this.modalStack>0){if(WebSquare.util.getBoolean(this.options.useModalStack))if(this.options.frameModal)if("true"===this.options.frameModal){var t=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&t!=this.scope_obj.uuid?this.scope_obj.hideFrameModal(this.uuid):WebSquare.getBody().hideModal(null,this.uuid)}else WebSquare.getBody().hideModal(null,this.uuid);else WebSquare.getBody().hideModal();else WebSquare.getBody().hideModal(!0);this.modalStack--}},h.prototype.show=function(t){if(l.q.prototype.show.call(this,t),1==this.options.useModal&&this.showModal(),this.options.useAnchor){var e=this.id+"_innerLink";this.getElementById(e).setAttribute("name",e+"_name");var i=document.createElement("a");document.body.appendChild(i),i.setAttribute("href","#"+e+"_name"),i.click(),document.body.removeChild(i),i=null}1==this.options.accessibility&&(this._targetId=document.activeElement.id,this.dom.closeButton&&this.dom.closeButton.focus())},h.prototype.hide=function(){if(l.q.prototype.hide.apply(this),1==this.options.useModal&&this.hideModal(),this.options.useAnchor&&this.backlink){var t=n.Z.getComponentById(this.backlink);t.render.setAttribute("name",t.id+"_backlink");var e=document.createElement("a");document.body.appendChild(e),e.setAttribute("href","#"+t.id+"_backlink"),e.click(),document.body.removeChild(e)}if(1==this.options.accessibility&&this._targetId){var i=this._targetId;n.Z.requestAnimationFrame((function(){var t=document.getElementById(i);t&&t.focus()}))}},h.prototype.setUseCloseButton=function(t){try{if("boolean"!=typeof t||this.options.useCloseButton===t)return;this.options.useCloseButton=t;var e=this.getElementById(this.id+"_closeButton");if(e)return;e.style.display=t?"":"none"}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setBackLink=function(t){"string"==typeof t?this.backlink=t:t&&"string"==typeof t.id&&(this.backlink=t.id)},h.prototype.setHeaderHTML=function(t){try{if(t){var e=t;try{var i=n.Z.getGlobalFunction(t,this.scope_id);e="function"==typeof i?i():i}catch(i){e=t}var o=this.getElementById(this.id+"_headerHTML");o&&(o.innerHTML=e,this.options.headerHTML=e)}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getMaxSize=function(){for(var t,e,i=this.parentControl;null!=i&&null==i.render;)i=i.parentControl;(i?(t=WebSquare.style.getSize(i.render,"width"),e=WebSquare.style.getSize(i.render,"height")):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(n.Z.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(n.Z.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(n.Z.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},h.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(n.Z.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(n.Z.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(n.Z.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},h.prototype.finalize=function(){try{this.hide(),WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){r.Y.printStackTrace(t,null,this)}}},5254:function(t,e,i){"use strict";i.r(e),i.d(e,{generator:function(){return c}})
;var o=i(467),s=i(4756),r=i.n(s),a=i(5461),n=i(5375),l=i(8971),h=i(1204),d=i(2406),c=function(t,e,i){d.q.call(this,t,e,i)};c.prototype.initAsync=(0,o.A)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._parse();case 2:case"end":return t.stop()}}),t,this)}))),a.q.extend(c.prototype,d.q.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.generator",pluginName:"generator",tagname:"div"},c.prototype.initialize=function(t){this.idCounter=0,this.dynamicCreateHash=h.Z.isIE()&&parseInt(n.I.browserVersion(),10)<10?{tbody:!0,thead:!0,tfoot:!0,tr:!0}:{},this.passHash={script:!0,label:!0,value:!0,choices:!0,item:!0,itemset:!0,attributes:!0},t&&1==t.nodeType&&!this.id&&(this.id=t.getAttribute("id")),this.tagName=this.options.tagname,this.itemCnt=0,this.insertItemCnt=0,this.generatedIndexSet=[],this.generatedElementSet=[]},c.prototype.toHTML=function(){try{var t=[],e=WebSquare.Parser.parseAttribute(this.element);for(var i in t.push("<"+this.options.tagname),e)if("id"==i){var o=this.id?" id='"+this.id+"'":" id='"+e[i]+"'";t.push(o)}else if("tagname"!=i){"className"==i&&(e[i="class"]=e.className,delete e.className);var s=i;"g_index"!=i&&"original_id"!=i||(s=h.Z.getDataPrefix(i));o=e[i]?" "+s+"='"+e[i]+"'":"";t.push(o)}return t.push(">"),t.push("</"+this.options.tagname+">"),t.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){},c.prototype.setChildElement=function(t,e){try{if(1==t.nodeType){var i=t.getLocalName();if(!this.passHash[i]){var o="";o=this.scope_obj&&null!=this.org_id?this.org_id+"_"+e+"_":this.id+"_"+e+"_";var s=t.getAttribute("id")||"",r=t.getAttribute("label"),a=t.getTagName();t._element.A||(t._element.A={}),t.setAttribute("g_index",e),"w2:tag"==a&&""==s&&(s="w2generator_"+this.idCounter++),s&&(t.setAttribute("original_id",s),"w2:listColumn"!=a&&t.setAttribute("id",o+s));var n=t.getAttribute("for");if(n&&(t.setAttribute("original_for",n),t.setAttribute("for",o+n)),r&&"w2:textbox"!==a&&"w2:span"!==a&&(t.setAttribute("original_label",r),t.setAttribute("label",WebSquare.xml.encode(r))),"w2:generator"!=a)for(var h=t.getChildNodes(),d=0;d<h.length;d++)this.setChildElement(h[d],e)}}}catch(t){l.Y.printStackTrace(t)}},c.prototype.restoreChildElement=function(t){try{if(1==t.nodeType){var e=t.getLocalName();if(!this.passHash[e]){var i=t.getAttribute("original_id"),o=t.getAttribute("original_ref"),s=t.getAttribute("original_label"),r=t.getAttribute("original_for");if(t.removeAttribute("g_index"),i&&(t.setAttribute("id",i),t.removeAttribute("original_id")),o&&(t.setAttribute("ref",o),t.removeAttribute("original_ref")),s&&(t.setAttribute("label",s),t.removeAttribute("original_label")),r&&(t.setAttribute("for",r),t.removeAttribute("original_for")),"w2:generator"==t.getTagName()){var a=t.getAttribute("original_nodeset");a&&(t.setAttribute("nodeset",a),t.removeAttribute("original_nodeset"))}else for(var n=t.getChildNodes(),h=0;h<n.length;h++)this.restoreChildElement(n[h])}}}catch(t){l.Y.printStackTrace(t)}},c.prototype.getLength=function(){return this.generatedIndexSet.length},c.prototype.getChild=function(t,e){var i=this.generatedIndexSet[t],o=this.id+"_"+i+"_"+e;return h.Z.getComponentById(o)||document.getElementById(o)},c.prototype.insertChild=function(t){return this.insert(t)},c.prototype.insertChildAsync=function(){var t=(0,o.A)(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.insert(e,{async:!0}));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),c.prototype.insert=function(t,e){try{if("number"==typeof t&&null!=this.generatedElementSet[t]){for(var i=0,o=0;o<t;o++)i+=this.generatedElementSet[o].length;this.targetNode=this.render.childNodes[i]}var s=[],r=[],a=[],h=this.dynamicCreateHash[this.options.tagname],d=this.element.cloneNode(!0),c=0,u=d.getChildNodes();for(o=0;o<u.length;o++){var p=u[o]
;this.setChildElement(p,this.insertItemCnt);var g=null;1===p.nodeType?(g=this._compHash[c]._cloneRecursive(p),c++):(3!==p.nodeType||h)&&(g=WebSquare.controlFactory.createByJSON(null,null,p._element,this.scope_obj,this.parentFrame)),g&&(this.addControl(g),h?this.dynamicAppend(this.render,g,t):3==p.nodeType?r.push(p.nodeValue):(r.push(g.toHTML()),a.push(g))),h&&this.restoreChildElement(p),g&&s.push(g)}var m=WebSquare.controlFactory.initAsync(),f=WebSquare.controlFactory._asyncList.length>0||WebSquare.controlFactory._awaitObj.key.length>0;if(!h){var b=r.join(""),y=document.createElement(this.options.tagname);for(y.innerHTML=b;y.childNodes.length>0;)this.targetNode?this.targetNode=this.render.insertBefore(y.childNodes[y.childNodes.length-1],this.targetNode):this.render.appendChild(y.childNodes[0]);if(f){for(var v=this.uuid,w=[],S=0;S<a.length;S++)w.push(a[S].uuid);m=m.then((function(t,e){n.I.executePointScript(4);for(var i=WebSquare.idCache[v],o=[],s=0;s<w.length;s++)o.push(WebSquare.idCache[w[s]]);i._insertAfter(o)}))}else this._insertAfter(a)}var _=this.itemCnt;"number"==typeof t?(this.generatedIndexSet.splice(t,0,this.insertItemCnt),this.generatedElementSet.splice(t,0,s),_=t):(this.generatedIndexSet.push(this.insertItemCnt),this.generatedElementSet.push(s)),this.targetNode=null,this.itemCnt++,this.insertItemCnt++;var C=_;return e&&!0===e.async&&(C=m=m.then((function(t,e){return _}))),C}catch(t){l.Y.printStackTrace(t,null,this)}},c.prototype._insertAfter=function(t){try{for(;t.length>0;){var e=t.shift();e.activate(),e.onComplete()}}catch(t){l.Y.printStackTrace(t,null,this)}},c.prototype.dynamicAppend=function(t,e,i){try{var o=e.toHTML(),s=o.match(/(<)([^ >\/]*)/),r=s&&s[2]?s[2]:null;if(r){var a=document.createElement(r),n=WebSquare.xml.parse(o),h=WebSquare.WebSquareparser.parseAttribute(n.documentElement);try{for(var c in h)"style"==c?a.style.cssText=h[c]:"className"==c?a.className=h[c]:a.setAttribute(c,h[c])}catch(t){l.Y.printStackTrace(t,null,this)}if("number"==typeof i&&this.targetNode?(t.insertBefore(a,this.targetNode),e.activate(),e.onComplete()):(t.appendChild(a),e.activate(),e.onComplete()),0==e.childControlList.length)for(var u=0;u<n.documentElement.childNodes.length;u++){var p=n.documentElement.childNodes[u];(g=WebSquare.controlFactory.create(null,null,p))&&e.addControl(g)}for(u=0;u<e.childControlList.length;u++){var g;3==(g=e.childControlList[u]).element.nodeType?a.appendChild(document.createTextNode(g.element.data)):this.dynamicCreateHash[r]?this.dynamicAppend(a,g):(d.q.prototype.writeTo.call(g,a),g.activate(),g.onComplete())}}}catch(t){l.Y.printStackTrace(t,null,this)}},c.prototype._clone=function(t){try{var e=d.q.prototype._clone.call(this,t);return e._compHash=this._compHash.slice(0),e}catch(t){l.Y.printStackTrace(t,null,this)}},c.prototype.removeChild=function(t){return null==t&&(t=this.generatedElementSet.length-1),this.remove(t)},c.prototype.remove=function(t){if(null!=t){if("number"==typeof t&&this.generatedElementSet[t]){for(var e=0;e<this.generatedElementSet[t].length;e++){var i=this.generatedElementSet[t][e];i.remove&&i.remove()}var o=this.generatedIndexSet.splice(t,1);return this.generatedElementSet.splice(t,1),this.itemCnt--,o}}else d.q.prototype.remove.call(this)},c.prototype.removeAll=function(){for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove&&this.childControlList[t].remove();WebSquare.removeChildren(this.render),this.generatedIndexSet=[],this.generatedElementSet=[],this.itemCnt=0,this.insertItemCnt=0},c.prototype.getIndexArray=function(){return this.generatedIndexSet.slice(0)},c.prototype.setStyle=function(t,e){try{if(!this.render)return;if(WebSquare.style.setStyle(this.render,t,e),"width"==t||"height"==t)for(var i=this.getChildren(),o=this.getChildrenCount(),s=0;s<o;s++)i[s].render.style[t]=e}catch(t){l.Y.printStackTrace(t)}},c.prototype.finalize=function(){try{if(d.q.prototype.finalize.call(this),
this._compHash)for(var t=0;t<this._compHash.length;t++)this._compHash[t].remove();this.removeAll()}catch(t){l.Y.printStackTrace(t)}},c.prototype._parse=(0,o.A)(r().mark((function t(){var e,i,o,s,a,h,d,c,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{for(this._compHash=[],e=this.dynamicCreateHash[this.options.tagname],i=this.element.cloneNode(!0),o=i.getChildNodes(),s=0;s<o.length;s++)a=o[s],this.setChildElement(a,"_base_"),h=null,(3!==a.nodeType||e)&&(h=WebSquare.controlFactory.createByJSON(null,null,a._element,this.scope_obj,this.parentFrame)),h&&(d=function(t,e,i){for(var o=[t];o.length>0;){var s=o.pop(),r=s.childControlList&&s.childControlList.length>0,a=n.I._hasScope(s)||s.scope_obj!==e.scope_obj;if(r&&!a)for(var l=0;l<s.childControlList.length;l++)o.push(s.childControlList[l]);s.scope_obj=e.scope_obj,s.scope_id=e.scope_id}i>=0&&null!=i?e._compHash.splice(u,0,t):e._compHash.push(t)},!0===h._wqAsync?(c=this.uuid,u=this._compHash.length,h.then((function(t,e){var i=WebSquare.idCache[c];d(t,i,u)}))):d(h,this))}catch(t){l.Y.printStackTrace(t,null,this)}case 2:case"end":return t.stop()}}),t,this)})))},4524:function(t,e,i){"use strict";i.r(e),i.d(e,{gridLayout:function(){return d}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(2256),d=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(d.prototype,l.q.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.gridLayout",pluginName:"gridLayout",gridTemplateColumns:"",gridTemplateRows:"",gridColumnGap:"",gridRowGap:"",gridRow:"",gridColumn:"",defaultClassPostfix:null,parseChild:!0,parseAttributes:!0,rowShow:""},d.prototype.initialize=function(t){try{var e=null;if(this.adaptive=[],this.isIE=null,this.gridLayout={},this.updatedGridLayout={templateColumns:[],templateRows:[],column:[],row:[]},this.layoutStyle=document.getElementById(this.id+"_style"),null==this.layoutStyle){var i=document.createElement("style");i.type="text/css",i.id=this.id+"_style",document.getElementsByTagName("head")[0].appendChild(i),this.layoutStyle=i}this.adaptive=s.I.getChildConfiguration("/WebSquare/mediaInfo",{singleMode:!0}),0===this.adaptive.length&&this.adaptive.push({name:"default"}),n.Z.isIEAllVersion()||/Edge/.test(navigator.userAgent)?this.isIE=!0:this.isIE=!1,this.gridLayout={templateColumns:this.options.gridTemplateColumns.split(";"),templateRows:this.options.gridTemplateRows.split(";"),column:this.options.gridColumn.split(";"),row:this.options.gridRow.split(";"),columnGap:this.options.gridColumnGap.split(";"),rowGap:this.options.gridRowGap.split(";"),rowShow:this.options.rowShow.split(";")},this.gridLayout.templateColumns[0]=this.gridLayout.templateColumns[0].wq_trim().split(" "),this.gridLayout.templateRows[0]=this.gridLayout.templateRows[0].wq_trim().split(" "),this.gridLayout.column[0]=this.gridLayout.column[0].wq_trim().split(":"),this.gridLayout.row[0]=this.gridLayout.row[0].wq_trim().split(":"),this.updatedGridLayout.column[0]=this.gridLayout.column[0],this.updatedGridLayout.row[0]=this.gridLayout.row[0],this.gridLayout.rowShow[0]=this.gridLayout.rowShow[0].wq_trim().split(":"),e=null;for(var o=1;o<this.adaptive.length;o++)null==this.gridLayout.templateColumns[o]?this.gridLayout.templateColumns[o]=this.gridLayout.templateColumns[0].slice():(e=this.gridLayout.templateColumns[o].replace(/(\s*)/g,""),this.gridLayout.templateColumns[o]=""==e?this.gridLayout.templateColumns[0].slice():this.gridLayout.templateColumns[o].wq_trim().split(" ")),null==this.gridLayout.templateRows[o]?this.gridLayout.templateRows[o]=this.gridLayout.templateRows[0].slice():(e=this.gridLayout.templateRows[o].replace(/(\s*)/g,""),this.gridLayout.templateRows[o]=""==e?this.gridLayout.templateRows[0].slice():this.gridLayout.templateRows[o].wq_trim().split(" ")),null==this.gridLayout.column[o]?this.gridLayout.column[o]=this.gridLayout.column[0].slice():(e=this.gridLayout.column[o].replace(/(\s*)/g,""),
this.gridLayout.column[o]=""==e?this.gridLayout.column[0].slice():this.gridLayout.column[o].wq_trim().split(":")),this.updatedGridLayout.column[o]=this.gridLayout.column[o],null==this.gridLayout.row[o]?this.gridLayout.row[o]=this.gridLayout.row[0].slice():(e=this.gridLayout.row[o].replace(/(\s*)/g,""),this.gridLayout.row[o]=""==e?this.gridLayout.row[0].slice():this.gridLayout.row[o].wq_trim().split(":")),this.updatedGridLayout.row[o]=this.gridLayout.row[o],null==this.gridLayout.columnGap[o]?this.gridLayout.columnGap[o]=this.gridLayout.columnGap[0].slice():(e=this.gridLayout.columnGap[o].replace(/(\s*)/g,""),this.gridLayout.columnGap[o]=""==e?this.gridLayout.columnGap[0].slice():this.gridLayout.columnGap[o].wq_trim()),null==this.gridLayout.rowGap[o]?this.gridLayout.rowGap[o]=this.gridLayout.rowGap[0].slice():(e=this.gridLayout.rowGap[o].replace(/(\s*)/g,""),this.gridLayout.rowGap[o]=""==e?this.gridLayout.rowGap[0].slice():this.gridLayout.rowGap[o].wq_trim()),null==this.gridLayout.rowShow[o]?this.gridLayout.rowShow[o]=this.gridLayout.rowShow[0].slice():(e=this.gridLayout.rowShow[o].replace(/(\s*)/g,""),this.gridLayout.rowShow[o]=""==e?this.gridLayout.rowShow[0].slice():this.gridLayout.rowShow[o].wq_trim().split(":"));this._initializeIE(),this._resizeObj=null,this._bResizeInit=!1,this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]}}catch(t){r.Y.printStackTrace(t)}},d.prototype._initializeIE=function(t){try{if(!this.isIE)return;for(var e=0;e<this.adaptive.length;e++){for(var i=this.gridLayout.templateColumns[e].slice(),o=this.gridLayout.templateRows[e].slice(),s=2*Math.max(i.length,o.length)-1,a=1;a<s;a++)n.Z.isOdd(a)&&(null!=i[a]&&i.splice(a,0,this.gridLayout.columnGap[e]),null!=o[a]&&o.splice(a,0,this.gridLayout.rowGap[e]));for(var l=this.gridLayout.row[e].slice(),h=0;h<l.length;h++){var d=l[h].wq_trim();if(-1==d.indexOf("/")){var c=parseInt(o.length/2)+1,u=Number(d);u>c&&(u=c),l[h]=String(2*u-1)}}for(var p=this.gridLayout.column[e].slice(),g=0;g<p.length;g++){var m=p[g].wq_trim();if(-1==m.indexOf("/")){c=parseInt(i.length/2)+1;var f=Number(m);f>c&&(f=c),p[g]=String(2*f-1)}}if(null==t)this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l;else{if(e!=t)continue;this.gridLayout.templateColumns[e]=i,this.gridLayout.templateRows[e]=o,this.gridLayout.column[e]=p,this.gridLayout.row[e]=l}}}catch(t){r.Y.printStackTrace(t)}},d.prototype.toHTML=function(){var t=[],e=this.getChildren(),i=e.length,o=""==this.options.style?"":"style='"+this.options.style+"'",s=null==this.options.defaultClassPostfix?"":this.options.defaultClassPostfix;t.push("<div id='"+this.id+"' class='w2gridLayout"+s+" "+this.id+" "+this.options.className+"'"+o+">"),this._createTemplateRules(0),this._createItemRules(0,e),this._createMediaRules();for(var r=0;r<i;r++){if(e[r]._isTag)if(null==e[r].element.getAttribute("class"))e[r].element.setAttribute("class",e[r].id);else{var a=e[r].element.getAttribute("class")+" "+e[r].id;e[r].element.setAttribute("class",a)}else""==e[r].options.className?e[r].options.className=e[r].id:e[r].options.className+=" "+e[r].id;t.push([e[r].toHTML()])}return t.push("</div>"),t.join("")},d.prototype.setAction=function(){},d.prototype._createMediaRules=function(t,e){try{for(var i=null==t?this.adaptive.length:t+1,o=this.getChildren(),s=[],a=null,n=null,l=1;l<i;l++){a=this._createTemplateRules(l),n=this._createItemRules(l,o);var h=this.adaptive[l];h.maxWidth?s[l]="@media all and (max-width: "+h.maxWidth+"px) { ":h.minWidth&&(s[l]="@media all and (min-width: "+h.minWidth+"px) { "),this.isIE,s[l]+=a,s[l]+=n,this.gridLayout.rowShow[t]&&("0"==this.gridLayout.rowShow[t][l]?s[l]+="display: none;":"1"==this.gridLayout.rowShow[t][l]&&(s[l]+="display: block;")),s[l]+="}",null==e?this.layoutStyle.sheet.insertRule(s[l],this.layoutStyle.sheet.cssRules.length):l==t&&this.layoutStyle.sheet.insertRule(s[l],e)}}catch(t){r.Y.printStackTrace(t)}},
d.prototype._createTemplateRules=function(t){try{var e=[];if(e[0]="",e[0]+="."+this.id+"{",this.isIE){var i=this._getTemplateIE(t);e[0]+="display: -ms-grid;",e[0]+="-ms-grid-columns:"+i.ieColumns+";",e[0]+="-ms-grid-rows:"+i.ieRows+";"}else e[0]+="display: grid;",e[0]+="grid-template-columns:"+this.gridLayout.templateColumns[t].join(" ")+";",e[0]+="grid-template-rows:"+this.gridLayout.templateRows[t].join(" ")+";",e[0]+="grid-column-gap:"+this.gridLayout.columnGap[t]+";",e[0]+="grid-row-gap:"+this.gridLayout.rowGap[t]+";";if(e[0]+="}",0!=t)return e;this.layoutStyle.sheet.insertRule(e,0)}catch(t){r.Y.printStackTrace(t)}},d.prototype._createItemRules=function(t,e,i){try{var o=[],s=e.length;if(this.isIE)var a=this._getItemIE(e,t,"column"),n=this._getItemIE(e,t,"row");else this._getItemNotIE(e,t,"column"),this._getItemNotIE(e,t,"row");for(var l=0;l<s;l++)if(o[l]="",o[l]+="."+e[l].id+"{",this.isIE?(""==a.itemSpanSection[l]?o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: 1;":o[l]+="-ms-grid-column:"+a.itemSection[l]+";-ms-grid-column-span: "+a.itemSpanSection[l]+";",""==n.itemSpanSection[l]?o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: 1;":o[l]+="-ms-grid-row:"+n.itemSection[l]+";-ms-grid-row-span: "+n.itemSpanSection[l]+";"):(o[l]+="grid-column:"+this.gridLayout.column[t][l]+";",o[l]+="grid-row:"+this.gridLayout.row[t][l]+";"),this.gridLayout.rowShow[t]&&("0"==this.gridLayout.rowShow[t][l]?o[l]+="display: none;":"1"==this.gridLayout.rowShow[t][l]&&(o[l]+="display: block;")),o[l]+="}",0==t){if(null!=i){this.layoutStyle.sheet.insertRule(o[l],i);break}this.layoutStyle.sheet.insertRule(o[l],l+1)}return o.join(" ")}catch(t){r.Y.printStackTrace(t)}},d.prototype._getTemplateIE=function(t){try{var e={};return e.ieColumns=this.gridLayout.templateColumns[t].join(" "),e.ieRows=this.gridLayout.templateRows[t].join(" "),e}catch(t){r.Y.printStackTrace(t)}},d.prototype._getItemIE=function(t,e,i){try{i="row"==i.toLowerCase()?i:"column";var o=this.gridLayout[i][e],s="row"==i?"templateRows":"templateColumns",a=n.Z.parseInt(this.gridLayout[s][e].length/2)+1,l=this.gridLayout[s][e].length,h={},d=null,c=t.length;h.itemSection=[],h.itemSpanSection=[];for(var u=0;u<c;u++)d=null,n.Z.isNull(o[u])||NaN==o[u]?(h.itemSection[u]=l,h.itemSpanSection[u]="",o.push(String(a))):-1==o[u].indexOf("/")?(o[u]<=0&&(h.itemSection[u]="1"),h.itemSection[u]=o[u].wq_trim(),h.itemSpanSection[u]=""):((d=o[u].split("/"))[0]<=0&&(d[0]="1"),h.itemSection[u]=d[0].wq_trim(),h.itemSpanSection[u]=d[1].wq_trim(),1!=h.itemSection[u]&&h.itemSection[u]<h.itemSpanSection[u]?h.itemSpanSection[u]=Number(h.itemSpanSection[u])-Number(h.itemSection[u]):h.itemSection[u]==h.itemSpanSection[u]&&(h.itemSpanSection[u]="1"),h.itemSection[u]>a&&(h.itemSection[u]=a),h.itemSection[u]=2*Number(h.itemSection[u])-1,h.itemSpanSection[u]>l?h.itemSpanSection[u]=l:n.Z.isOdd(h.itemSpanSection[u])||(h.itemSpanSection[u]=Number(h.itemSpanSection[u])+1)),h.itemSection[u]=String(h.itemSection[u]),h.itemSpanSection[u]=String(h.itemSpanSection[u]),""==h.itemSpanSection[u]?o.splice(u,1,h.itemSection[u]):o.splice(u,1,h.itemSection[u]+" / "+h.itemSpanSection[u]);return h}catch(t){r.Y.printStackTrace(t)}},d.prototype._getItemNotIE=function(t,e,i){try{for(var o="row"==(i="row"==i.toLowerCase()?i:"column")?"templateRows":"templateColumns",s=this.gridLayout[o][e].length,a=this.gridLayout[i][e],l=[],h=t.length,d=0;d<h;d++)n.Z.isNull(a[d])||NaN==a[d]?a.push(String(s)):-1==a[d].indexOf("/")?(a[d]<=0?a[d]="1":a[d]>s&&(a[d]=s),a[d]=String(a[d])):((l=a[d].split("/"))[0]<=0?l[0]="1":l[0]>s&&(l[0]=String(s)),l[1]>s+1&&(l[1]=" "+(s+1)),a[d]=l.join("/"),l=[])}catch(t){r.Y.printStackTrace(t)}},d.prototype.setActiveLayout=function(t,e,i){try{var o=this.getScreenIdx(),s=!1,a=this.getChildren(),n=a.length;if(n>t&&(0!=e&&(this.gridLayout.column[o].splice(t,1,String(e)),s=!0),0!=i&&(this.gridLayout.row[o].splice(t,1,String(i)),s=!0)),s)if(0==o)this.layoutStyle.sheet.deleteRule(t+1),
this._createItemRules(o,[a[t]],t+1);else for(var l=this.layoutStyle.sheet.cssRules.length,h=0,d=n+1;d<l;d++)if(4==this.layoutStyle.sheet.cssRules[d].type&&++h==o){this.layoutStyle.sheet.deleteRule(d),this._createMediaRules(o,d);break}}catch(t){r.Y.printStackTrace(t)}},d.prototype.setLayout=function(t,e,i){try{this.setActiveLayout(t,e,i);for(var o={},s=[],a=[],n=0;n<this.adaptive.length;n++)s[n]=this.gridLayout.column[n][t],a[n]=this.gridLayout.row[n][t];return o.column=s.join(":"),o.row=a.join(":"),"columnInfo: "+o.column+", rowInfo: "+o.row}catch(t){r.Y.printStackTrace(t)}},d.prototype.getScreenIdx=function(){try{this.adaptive;for(var t,e,i=n.Z._getBrowserWidth(),o=0,s=0;s<this.adaptive.length;s++){var a=parseInt(this.adaptive[s].minWidth,10),l=parseInt(this.adaptive[s].maxWidth,10);l>=0&&i<=l?(null==t||t>l)&&(o=s,t=l):a>=0&&i>=a&&(null==e||e<a)&&(o=s,e=a)}return o}catch(t){r.Y.printStackTrace(t)}},d.prototype.getLayout=function(t){try{for(var e={},i=[],o=[],s=0;s<this.adaptive.length;s++)i[s]=this.gridLayout.column[s][t],o[s]=this.gridLayout.row[s][t];return e.column=i.join(":"),e.row=o.join(":"),"columnInfo: "+e.column+", rowInfo: "+e.row}catch(t){r.Y.printStackTrace(t)}},d.prototype.setGap=function(t,e){try{var i=this.getScreenIdx(),o="columnGap"==(t="col"==t?"columnGap":"rowGap")?"templateColumns":"templateRows";if(this.isIE){var s=this.gridLayout[t][i],a=this.gridLayout[o][i].map((function(t){return t==s&&(t=e),t}));this.gridLayout[o][i]=a}this.gridLayout[t][i]=e,this._changeRules(i)}catch(t){r.Y.printStackTrace(t)}},d.prototype.getTemplate=function(){try{for(var t={},e=[],i=[],o=0;o<this.adaptive.length;o++)e[o]=this.gridLayout.templateColumns[o].join(" "),i[o]=this.gridLayout.templateRows[o].join(" ");return t.templateColumns=e.join(":"),t.templateRows=i.join(":"),"templateColumnsInfo: "+t.templateColumns+", templateRowsInfo: "+t.templateRows}catch(t){r.Y.printStackTrace(t)}},d.prototype._changeRules=function(t,e){try{var i=this.getChildren();if(this.isIE&&this._initializeIE(t),0==t)if(e){for(var o=this.layoutStyle.sheet.rules.length,s=o-1;s>=0;s--)4!=this.layoutStyle.sheet.rules[s].type&&this.layoutStyle.sheet.deleteRule(s);this._createTemplateRules(0),this._createItemRules(0,i)}else this.layoutStyle.sheet.deleteRule(t),this._createTemplateRules(t,1);else{var a=this.layoutStyle.sheet.cssRules.length,n=0;for(s=i.length+1;s<a;s++)if(4==this.layoutStyle.sheet.cssRules[s].type&&++n==t){this.layoutStyle.sheet.deleteRule(s),this._createMediaRules(t,s);break}}}catch(t){r.Y.printStackTrace(t)}},d.prototype.setTemplate=function(t,e,i){try{if(Math.sign||(Math.sign=function(t){return(t>0)-(t<0)||+t}),e="col"==e?"templateColumns":"templateRows",-1!=Math.sign(t)){var o=this.getScreenIdx(),s=this.gridLayout[e][o].length;this.isIE?s>2*t&&(t*=2,this.gridLayout[e][o][t]=i,this._changeRules(o)):s>t&&(this.gridLayout[e][o][t]=i,this._changeRules(o))}}catch(t){r.Y.printStackTrace(t)}},d.prototype.setAllTemplate=function(t,e){try{var i=this.getScreenIdx(),o=e.split(" ");if(t="col"==t?"templateColumns":"templateRows",this.isIE)for(var s=2*o.length-1,a="templateColumn"==t?"columnGap":"rowGap",l=1;l<s;l++)n.Z.isOdd(l)&&o.splice(l,0,this.gridLayout[a][i]);this.gridLayout[t][i]=o,this._changeRules(i)}catch(t){r.Y.printStackTrace(t)}},d.prototype._copyLayout=function(){try{if(!this.isIE)return t={templateColumns:this.gridLayout.templateColumns,templateRows:this.gridLayout.templateRows,row:this.gridLayout.row,column:this.gridLayout.column};for(var t={templateColumns:[],templateRows:[],row:[],column:[]},e=this.getChildren(),i=0;i<this.adaptive.length;i++){for(var o=this.gridLayout.templateColumns[i].slice(),s=this.gridLayout.templateRows[i].slice(),a=Math.max(o.length,s.length);a>0;a--)n.Z.isOdd(a)&&(null!=o[a]&&o.splice(a,1),null!=s[a]&&s.splice(a,1));t.templateColumns.push(o),t.templateRows.push(s),this.updatedGridLayout.templateColumns.push(o),this.updatedGridLayout.templateRows.push(s);for(var l="column",h="templateColumns",d=0;d<2;d++){
var c=this.updatedGridLayout[h][i].length,u=this.updatedGridLayout[l][i],p=[],g=e.length;for(a=0;a<g;a++)n.Z.isNull(u[a])||NaN==u[a]?u.push(String(c)):-1==u[a].indexOf("/")?(u[a]<=0?u[a]="1":u[a]>c&&(u[a]=c),u[a]=String(u[a])):((p=u[a].split("/"))[0]<=0?p[0]="1":p[0]>c&&(p[0]=String(c)),p[1]>c+1&&(p[1]=" "+(c+1)),u[a]=p.join("/"),p=[]);t[l].push(u),l="row",h="templateRows"}}return t}catch(t){r.Y.printStackTrace(t)}},d.prototype.getLayoutInfo=function(){try{for(var t=this.getChildren(),e=t.length,i=this.getScreenIdx(),o=this._copyLayout(),s={layout:"grid",currentScreen:this.adaptive[i].name,layoutInfo:[]},a=0;a<this.adaptive.length;a++){var n={name:this.adaptive[a].name,minWidth:this.adaptive[a].minWidth,maxWidth:this.adaptive[a].maxWidth,templateColumns:o.templateColumns[a],templateRows:o.templateRows[a],itemInfo:[]};s.layoutInfo.push(n);for(var l=0;l<e;l++){var h={id:t[l].id,rowStart:"",rowEnd:"",colStart:"",colEnd:""},d=null;-1==o.row[a][l].indexOf("/")?h.rowStart=o.row[a][l]:(d=o.row[a][l].split("/"),h.rowStart=d[0].wq_trim(),h.rowEnd=d[1].wq_trim()),d=null,-1==o.column[a][l].indexOf("/")?h.colStart=o.column[a][l]:(d=o.column[a][l].split("/"),h.colStart=d[0].wq_trim(),h.colEnd=d[1].wq_trim()),s.layoutInfo[a].itemInfo.push(h)}}return s}catch(t){r.Y.printStackTrace(t)}},d.prototype._checkId=function(t){try{var e=t.length,i=this.getChildren(),o={},s=[];for(var a in i)o[i[a].id]=i[a];for(a=0;a<e;a++)if(null!=t[a].itemInfo){var n={},l=t[a].itemInfo;for(var d in l){if(null==l[d].id)return!1;null!=o[l[d].id]?n[l[d].id]=l[d]:h.v.printLog("id["+l[d].id+"] No matches found.")}s.push(n)}else t[a].itemInfo=[],s.push("dumy");return s}catch(t){r.Y.printStackTrace(t)}},d.prototype._setEmptyScreenInfo=function(t){try{var e={};for(var i in t.layoutInfo){e[t.layoutInfo[i].name]=t.layoutInfo[i].name}for(i=0;i<this.adaptive.length;i++)null==e[this.adaptive[i].name]&&t.layoutInfo.splice(i,0,new Object({name:void 0}));return t}catch(t){r.Y.printStackTrace(t)}},d.prototype.setLayoutInfo=function(t){try{t=this._setEmptyScreenInfo(t);var e=this._checkId(t.layoutInfo);if(0==e)return;for(var i=0;i<this.adaptive.length;i++){var o=t.layoutInfo[i];if(null!=o.name){this.isIE&&(this.gridLayout.templateColumns[i]=this.updatedGridLayout.templateColumns[i],this.gridLayout.templateRows[i]=this.updatedGridLayout.templateRows[i]);var s=o.itemInfo;if(0==s.length)continue;for(var a in s){var n=s[a].id;e[i][n]&&(""==s[a].rowEnd?this.gridLayout.row[i].splice(a,1,s[a].rowStart):this.gridLayout.row[i].splice(a,1,s[a].rowStart+" / "+s[a].rowEnd),this.updatedGridLayout.row[i]=this.gridLayout.row[i],""==s[a].colEnd?this.gridLayout.column[i].splice(a,1,s[a].colStart):this.gridLayout.column[i].splice(a,1,s[a].colStart+" / "+s[a].colEnd),this.updatedGridLayout.column[i]=this.gridLayout.column[i])}o.templateColumns&&o.templateColumns.constructor,o.templateRows&&o.templateRows.constructor,this._changeRules(i,!0)}}}catch(t){r.Y.printStackTrace(t)}},d.prototype._updateLayoutInfo=function(t){},d.prototype.addResizeBar=function(t,e,i){try{if(isNaN(t)||t<=0)return void h.v.printLog("gridLayout.addResizeBar error : invalid index.");"row"!==e&&(e="col");var s=this.id+"_resizeBar_"+e+"_"+t,l=this.scope_id+"_"+s;if(null!=n.Z.getComponentById(s))return;void 0!==i&&null!=i||(i={});var d=this.getLayoutInfo(),c=o.q.extend({},d),u=c.layoutInfo,p=-1,g=this.getScreenIdx(),m=u[g],f=!1;if(this._resizeInfo.orgInfoStr||(this._resizeInfo.orgInfoStr=JSON.stringify(m)),"row"===e){if(t>=m.templateRows.length)return void h.v.printLog("gridLayout.addResizeBar error : invalid index.");var b=t;for(var y in this._resizeInfo.row)this._resizeInfo.row[y]>b?this._resizeInfo.row[y]++:t++;m.templateRows.splice(t,0,i.size||"5px"),this._resizeInfo.row[s]=t;for(var v=0;v<m.itemInfo.length;v++){var w=m.itemInfo[v],S=Number(w.rowStart),_=Number(w.rowEnd||w.rowStart);if(S>t){if(!1===f)f=!0,(I={}).id=l,I.rowStart=w.rowStart,I.rowEnd="",I.colStart=i.start||"1",I.colEnd=i.end||String(m.templateColumns.length+1),
m.itemInfo.splice(v,0,I),p=v,v++;w.rowStart=String(S+1),w.rowEnd=String(_+1)}else _>t+1&&(w.rowEnd=String(_+1))}}else{if(t>=m.templateColumns.length)return void h.v.printLog("gridLayout.addResizeBar error : invalid index.");b=t;for(var y in this._resizeInfo.col)this._resizeInfo.col[y]>b?this._resizeInfo.col[y]++:t++;m.templateColumns.splice(t,0,i.size||"5px"),this._resizeInfo.col[s]=t;for(v=0;v<m.itemInfo.length;v++){w=m.itemInfo[v];var C=Number(w.colStart),x=Number(w.colEnd||w.colStart);if(C>t){var I;if(!1===f)f=!0,(I={}).id=l,I.colStart=w.colStart,I.colEnd="",I.rowStart=i.start||"1",I.rowEnd=i.end||String(m.templateRows.length+1),m.itemInfo.splice(v,0,I),p=v,v++;w.colStart=String(C+1),w.colEnd=String(x+1)}else x>t+1&&(w.colEnd=String(x+1))}}var T="w2gridLayout_resizeBarH";"row"===e&&(T="w2gridLayout_resizeBarV");var k=WebSquare.controlFactory.create(s,{className:"w2gridLayout_resizeBar "+T+" "+l,pluginName:"group",parseChild:!1},null,this.scope_obj,this.parentFrame,!0);k.bind("onmousedown",function(t,e,i,o,s,r,n){return function(l){var h=WebSquare.idCache[t],d=WebSquare.idCache[r],c=WebSquare.idCache[n];"row"!==i&&(i="col");var u=h._resizeInfo[i][e];h._resizeObj={index:u-1,direction:i,screenIdx:o,cssStr:s,startX:a.f.getMouseX(l),startY:a.f.getMouseY(l),heightFront:d.render.offsetHeight,heightBack:c.render.offsetHeight,widthFront:d.render.offsetWidth,widthBack:c.render.offsetWidth},h.addClass(s)}}(this.uuid,s,e,g,T,this.childControlList[p-1].uuid,this.childControlList[p].uuid)),k.bind("onmouseup",(L=this.uuid,A=T,function(){var t=WebSquare.idCache[L];t._resizeObj=null,t.removeClass(A)})),k.writeTo(this,null,this.parentFrame,{index:p}),k.activate(),this.addControl(k,void 0,void 0,{index:p}),this._resizeInfo.resizeComp.push(k.uuid),this.setLayoutInfo(c),!1===this._bResizeInit&&(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this._bResizeInit=!0)}catch(t){r.Y.printStackTrace(t)}var L,A},d.prototype.clearResizeBar=function(){try{if(!this._resizeInfo.orgInfoStr&&0===this._resizeInfo.resizeComp.length)return;var t=this.getLayoutInfo(),e=o.q.extend({},t),i=e.layoutInfo,s=this.getScreenIdx();this._resizeInfo.orgInfoStr&&(i[s]=JSON.parse(this._resizeInfo.orgInfoStr),this.gridLayout.templateColumns[s]=i[s].templateColumns,this.gridLayout.templateRows[s]=i[s].templateRows);for(var a=0;a<this._resizeInfo.resizeComp.length;a++){var n=WebSquare.idCache[this._resizeInfo.resizeComp[a]];n&&n.remove()}this._resizeInfo={row:{},col:{},orgInfoStr:"",resizeComp:[]},this.setLayoutInfo(e)}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next(););e=null},d.prototype.handleMouseoverEvent=function(t){a.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.addClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMouseoutEvent=function(t){a.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2gridLayout")&&this.removeClass(e.getElement(),"w2gridLayout_over");e=null},d.prototype.handleMousemoveEvent=function(t){try{if(this._resizeObj){var e=this._resizeObj.screenIdx,i=this._resizeObj.index,o=this._resizeObj.direction,s=this._resizeObj.startX,n=this._resizeObj.startY,l=this._resizeObj.heightFront,h=this._resizeObj.heightBack,d=this._resizeObj.widthFront,c=this._resizeObj.widthBack,u=this.getLayoutInfo(),p=u.layoutInfo[e];if("row"===o){var g=h-(m=a.f.getMouseY(t)-n);l+m>5&&g>5&&(p.templateRows[i]=l+m+"px",p.templateRows[i+2]=h-m+"px")}else{var m;g=h-(m=a.f.getMouseX(t)-s);l+m>5&&g>5&&(p.templateColumns[i]=d+m+"px",p.templateColumns[i+2]=c-m+"px")}this.setLayoutInfo(u)}}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleMouseupEvent=function(t){try{
this._resizeObj&&this.removeClass(this._resizeObj.cssStr),this._resizeObj=null}catch(t){r.Y.printStackTrace(t)}},d.prototype.finalize=function(){try{null!=this.layoutStyle&&null!=this.layoutStyle.parentNode&&this.layoutStyle.parentNode.removeChild(this.layoutStyle)}catch(t){r.Y.printStackTrace(t)}}},7867:function(t,e,i){"use strict";i.r(e),i.d(e,{cellInfo:function(){return O},drilldown:function(){return E},gridView:function(){return P},headerInfo:function(){return k},linkedMappingController:function(){return N},mappingController:function(){return R.b}});var o=i(5461),s=i(8971),r=i(5375),a=i(1204),n=i(2406),l=i(2284),h=function(){};h.prototype._notifySettedGridDataAll=function(t,e){try{this.dataList.clearFilter(!0),t||(this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.extraData={grid:{},row:[],col:[],cell:[]},e=0,this._removeAllTDCellClass(),this._removeAllTRClass(),this._cellSelectedIndex=[],this.hiddenRowObj.init&&this.clearRowVisible({noDraw:!0})),this.hasFooter&&(this.footerTempSum=[]),this.beforeDataLength=-1,1==this.isDrillDown&&(this.setCellInfo(),1==this.isPaste?this.initPasteDrilldown():this.initDrilldown()),this.initStyleArr(e),this.lastTopRowIndex=null,this.loadFlag=!0,this.settedData=!0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySettedGridData=function(t,e,i,o,r,a){try{if(this.options.scrollFix&&this.settedData){for(var n=this.getTopRowIndex(),l=0;l<=this.lastIndex;l++){var h=n+l;this.drawRowData(h-this.rowIndex,h)}return}this.dataList.clearFilter(!0),this._oldFilterArrStr||this.notifyClearFilter(!0),this.settedData=!1;i=i;var d=[];if(!(e=e||!1)&&this.hiddenRowObj.init)for(var c in this.hiddenRowObj.row)!0===this.hiddenRowObj.row[c]&&d.push(c);this._notifySettedGridDataAll(e,i),0==this.loadFlag&&e?this.loadFlag=!1:this.loadFlag=!0,this.lastTopRowIndex=null;var u={gridData:!0!==a};if(e&&(u.append=!0,u.keepTop=!0),this.notifyDataChanged(u),!e)for(l=0;l<d.length;l++)this.setRowVisible(d[l]);this.loadFlag=!0,0==this.getTotalRow()&&this.removeFocusedCell(),this.options.focusOnSetData&&this._setFocusedCell(0,0),!0!==this._isBrowserScroll()&&this.setScrollYHeight(),this.settedData=!0,this.options.fixedRightColumn>0&&this._handleScrollX(),(!e&&this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0),(!0===r||this.options.instanceBindBySetData)&&this.options.ref&&this._refreshInstance(t,e),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeSettedCellData=function(){try{if(null!=this.editedCell)return this.options.keepEditMode&&"onclick"==this.options.editModeEvent&&(this._reEditCell={_editTd:this.editedCell.editTd,_rowIndex:this.editedCell.editRowIndex}),void this.editedCell.handleEndEdit()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySettedCellData=function(t,e,i,o){try{this.hasFooter&&(this.footerTempSum=[]);var r=this.getColumnIndex(e);t=this._getGroupbyGroupedRowIndex(t);this.notifyCellChanged(t,r,o),null==r&&null!=this._dataList.getColumnIndex(e)&&this._refreshExpression(t,e),this.isDrillDown&&(null==r&&this._dataList.options.depthColumn&&(r=this._dataList.getColumnIndex(e)),this.drilldown.options.depthColumn==r&&(this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight()));var n=a.Z.getDataPrefix("colMerged"),l=this.getCellInfo(e),h=t,d=this.getTotalRow();if(l&&l.options.colMerge&&l.options.colMergeEdit&&!this.groupbyStatus.grouped){var c=this.data_td_list[(h-this.rowIndex)*this.oneRowDataLength+r];if(c){var u,p=c.getAttribute(n);if("1"==p&&i!=this.dataList.getCellData(h-1,r))if(c.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex,h,r),
h<d-1)(u=this.data_td_list[(h-this.rowIndex+1)*this.oneRowDataLength+r])&&(i==this.dataList.getCellData(h+1,r)?u.setAttribute(n,"1"):u.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex+1,h+1,r));if("0"==p)if(h>=1&&i==this.dataList.getCellData(h-1,r)&&(c.setAttribute(n,"1"),this.drawCellData(h-this.rowIndex,h,r)),h<d-1)(u=this.data_td_list[(h-this.rowIndex+1)*this.oneRowDataLength+r])&&(i==this.dataList.getCellData(h+1,r)?u.setAttribute(n,"1"):u.setAttribute(n,"0"),this.drawCellData(h-this.rowIndex+1,h+1,r))}}this._reEditCell&&this._reEditCell._editTd&&(this.editMode=!0,this.setCellEditMode(this._reEditCell._editTd,this._reEditCell._rowIndex),this._reEditCell={}),this.moveDirection=null,!0===this._isHybridScroll()&&this._setHybridVisibleHeight()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeInsertedRow=function(t){try{!this.isDrillDown&&t>this.getDataLength()&&(t=this.getDataLength());var e=!1,i=[];if(this.isDrillDown){for(var o=this.drilldown.getParentRowIndex(t);o>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(o))||(e=!0,i.push(o)),o=this.drilldown.getParentRowIndex(o);if(e)for(var r=i.length-1;r>=0;r--)if(!this.drilldown.isOpen(i[r])){var a=this.drilldown.getDisplayRowIndex(i[r]);this._toggle(a)}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterInsertedRow=function(t,e){try{var i=function(t,e,i){var o=i,s=[],r=t.length;for(var a in t)if(!isNaN(a)){var n=Number(a);n>=e&&s.push(n)}s.sort((function(t,e){return e-t}));for(var l=0;l<s.length;l++){var h=s[l];t[h+o]=t[h],delete t[h]}t.length=r+o};this.settedData=!1;var o=this.dataList.getRealRowIndex(t),r=this.getTotalCol();this.resetExpressionFunc();var a=o*r;i(this.cellStyleArr,a,r),i(this.cellClassArr,a,r),i(this.cellReadOnlyArr,a,r),i(this.cellDisabledArr,a,r),i(this._cellSelectedIndex,a,r),this.rowClassArr.splice(t,0,null),this.extraData.row.splice(t,0,null),this.extraData.cell.splice(t,0,null);for(var n=this.getColumnCount(),l=0;l<n;l++){var h=this.getCellInfo(l);if("custom"==h.options.inputType){var d=this.getDataLength();h.isValidTypeGetter||(h.cellManagerHashByRowIndex.splice(o,0,null),h.cellManagerIDByRowIndex.splice(o,0,null),h.cellManagerInfoByRowIndex.splice(o,0,null));for(var c=d;c>o;c--){var u=h.cellManagerHashByRowIndex[c];if(u){var p,g=h.cellManagerIDByRowIndex[c];p=u.options.embeddedInput?this.id+"_"+g:h.mainGridId+g,this._removeDom(p),h.isValidTypeGetter||(h.cellManagerHashByRowIndex[c]=null,h.cellManagerIDByRowIndex[c]=null)}}}}if(this.isDrillDown&&this.drilldown.statusArr.splice(o,0,!0),this.hasFooter&&(this.footerTempSum=[]),this._mergeNotifyRowChanged("insertRow",t),!0!==e&&(this.notifyRowInserted(t),this.notifyStatusChanged({rowIndex:[t]})),this.options.ref&&1!=this.insertRowByInstance&&!0!==e&&this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){var m;m=1==this.repeatNodeTagNameFilter&&1==this.repeatNodeTagName.length?this.filteredRepeatNodeTagName[0]:this.repeatNodeTagName[0];var f,b=WebSquare.xml.parse("<"+m+"></"+m+">").documentElement,y=b,v=m;this.repeatNodeTagName.length>1&&(v=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(l=1;l<this.repeatNodeTagName.length;l++)y=WebSquare.xml.createNode(y,this.repeatNodeTagName[l],!1);f=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(b,v):b;for(l=0;l<this.repeatNodeChildTagName.length;l++)WebSquare.xml.createNode(f,this.repeatNodeChildTagName[l],!1);t>=this.maxRowLength?WebSquare.ModelUtil.setInstanceNode(b,this.options.ref,null,"append",!1,this.scope_id):WebSquare.ModelUtil.setInstanceNode(b,this.options.ref+"/"+m+"["+(t+1)+"]",null,"insertBeforeSibling",!1,this.scope_id)}return this.settedData=!0,this.loadFlag=null==this.loadFlag||this.loadFlag,this._refreshColumnClass(),this._autoFitRefreshNative(),t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeRemovedRow=function(t){try{if(this.options.ref&&1!=this.removeRowByInstance){var e=this.getRealRowIndex(t)+1
;WebSquare.ModelUtil.removeInstanceNode(this.options.ref+"/"+this.repeatNodeTagName[0]+"["+e+"]",!1,this.scope_id)}if(this.isDrillDown&&this._dataList.options.depthColumn){for(var i=!1,o=[],r=this.drilldown.getParentRowIndex(t);r>-1;)this.drilldown.isOpen(this.drilldown.getDisplayRowIndex(r))||(i=!0,o.push(r)),r=this.drilldown.getParentRowIndex(r);if(i)for(var a=o.length-1;a>=0;a--)if(!this.drilldown.isOpen(o[a])){var n=this.drilldown.getDisplayRowIndex(o[a]);this._toggle(n)}t=this.drilldown.getDisplayRowIndex(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeKeepFilter=function(){try{var t=this._dataList.getFilterList();if(t.length<=0||isNaN(t.length))return;this._oldFilterArrStr=JSON.stringify(t,(function(t,e){return"function"==typeof e||e&&"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})),this.customFilterStatusObj&&(this._oldStatusObj=JSON.stringify(this.customFilterStatusObj)),this.customFilterList&&this.customFilterList.customFilterListFilterInfo?this._oldFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})):this.groupbyStatus.grouped&&this.groupbyStatus.filter&&(this._oldFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterKeepFilter=function(){try{if(!this._oldFilterArrStr)return;this._refreshCustomFilterHistory(this._oldFilterArrStr,this._oldFilterInfo,this._oldStatusObj),this._oldFilterArrStr=null,this._oldFilterInfo=null,this._oldStatusObj=null,this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterRemovedRow=function(t,e,i,o){try{var r=function(t,e,i){if(!(e>t.length)){var o=Math.min(i,t.length-e),s=[];for(var r in t)if(!isNaN(r)){var a=Number(r);a>=e&&a<e+o?delete t[r]:a>=e+o&&s.push(a)}s.sort((function(t,e){return t-e}));for(var n=0;n<s.length;n++){var l=s[n];t[l-o]=t[l],delete t[l]}t.length-=o}};this.removed=!0,this.isDrillDown&&this.drilldown.statusArr.splice(i,1);var n=this.getTotalCol(),l=n*i;r(this.cellStyleArr,l,n),r(this.cellClassArr,l,n),r(this.cellReadOnlyArr,l,n),r(this.cellDisabledArr,l,n),r(this._cellSelectedIndex,l,n),this.rowClassArr.splice(i,1);for(var h=this.getColumnCount(),d=0;d<h;d++){var c=this.getCellInfo(d);if("custom"==c.options.inputType){var u=this.getDataLength(),p=c.cellManagerHashByRowIndex[i];if(p){var g,m=c.cellManagerIDByRowIndex[i];if(g=p.options.embeddedInput?this.id+"_"+m:c.mainGridId+m,this._removeDom(g),c.isValidTypeGetter&&(delete c.cellManagerHashByID[m],delete c.cellManagerHashByRowIndex[i],delete c.cellManagerIDByRowIndex[i],i<u)){for(var f=i;f<u;f++)c.cellManagerHashByRowIndex[f]=c.cellManagerHashByRowIndex[f+1],c.cellManagerIDByRowIndex[f]=c.cellManagerIDByRowIndex[f+1];delete c.cellManagerHashByRowIndex[u],delete c.cellManagerIDByRowIndex[u]}}c.isValidTypeGetter||(c.cellManagerInfoByRowIndex.splice(i,1),c.cellManagerHashByRowIndex.splice(i,1),c.cellManagerIDByRowIndex.splice(i,1))}}if(this.itemValueObj)for(var b in this.itemValueObj){var y=o.split(",")[this._dataList.bodyIdColIndexMap[b]];for(var v in this.itemValueObj[b])-1!=v.indexOf("auto")&&this.itemValueObj[b][v]===y&&(this.itemValueObj[b][v]="")}if(!0!==e){var w=this.checkScrollEnd,S=this.scrollEvent;if(this.checkScrollEnd=!1,this.scrollEvent=!1,this._getFocusedRowIndex()==this.getDataLength()){var _=this._getFocusedRowIndex(),C=this.getFocusedColumnIndex();this.removeRowFocus(this.getDataLength()),this._setFocusedCell(_-1,C)}this.resetExpressionFunc(),this.hasFooter&&(this.footerTempSum=[]),this._mergeNotifyRowChanged("removeRow",t),this.notifyRowChanged(t),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.notifyStatusChanged({rowindex:[t]}),a.Z.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e,
this._autoFitRefreshNative()}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[w,S]})}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRemovedRows=function(t,e){try{if(!0!==e){var i=this.checkScrollEnd,o=this.scrollEvent;this.checkScrollEnd=!1,this.scrollEvent=!1,this.resetExpressionFunc();for(var r=t.split(","),n=0;n<r.length;n++)this._mergeNotifyRowChanged("removeRow",r[n]);this.notifyRowChanged(),a.Z.setTimeout((function(t,e){this.checkScrollEnd=t,this.scrollEvent=e}),{key:this.id+"_notifyAfterRemovedRow",caller:this,delay:150,args:[i,o]}),this._autoFitRefreshNative()}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRemovedAll=function(t){try{this.removed=!0;var e=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this.clearCellVisible({skipDraw:!0}),this.loadFlag=!0,this.rowStyleArr=[],this.rowReadOnlyArr=[],this.rowDisabledArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this.cellReadOnlyArr=[],this.cellDisabledArr=[],this.extraData={grid:{},row:[],col:[],cell:[]},this._removeAllTDCellClass(),this._removeAllTRClass(),this._cellSelectedIndex=[],this.resetExpressionFunc();for(var i=this.getTotalCol(),o=0;o<i;o++){var r=this.getCellInfo(o);if(r&&r.options&&"expression"==r.options.inputType)for(var a=this.drawedRowLength,n=0;n<a;n++)r.options.expressionFunc&&r.options.expressionFunc[n]&&(r.options.expressionFunc[n]={});else if("custom"==r.options.inputType){for(var l=0;l<r.cellManagerIDByRowIndex.length;l++){var h,d=r.cellManagerHashByRowIndex[l],c=r.cellManagerIDByRowIndex[l];h=d.options.embeddedInput?this.id+"_"+c:r.mainGridId+c,this._removeDom(h)}r.isValidTypeGetter?(r.cellManagerHashByID={},r.cellManagerHashByRowIndex={},r.cellManagerIDByRowIndex={}):(r.cellManagerInfoByRowIndex=[],r.cellManagerHashByRowIndex=[],r.cellManagerIDByRowIndex=[])}}this.removeFocusedCell();for(o=0;o<this.dataRowList.length;o++){var u=this.dataRowList[o];u.style.display="none",this.__addClass(u,"w2grid_hidedRow"),this.__hasClass(u,"w2grid_lastRow")&&this.__removeClass(u,"w2grid_lastRow")}this.lastDisplayedRow=-1,this.subtotalHidden(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1,this.maxRowLength=0,this.displayNoResultMessage(),this.drawFooter();var p={sortIcon:this.options.hideSortIconOnNoData};this.drawHeader(void 0,p),this._setCheckboxHead(),0==this.getDataLength()&&(this.removeFocusedCell(),"all"===this.options.visibleRowNum&&this.setSize(null,this.defaultDataLayerHeight)),this.setScrollYHeight(),this.displayFixedColumnLine(),this.options.ref&&1!=this.removeRowByInstance&&WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],gridNoRefresh:!0,scopeId:this.scope_id}),this.options.groupbyFilterBox&&!1!==t&&this.clearFilterHistory(),1==this.isDrillDown&&this.initDrilldown(),this.itemValueObj={},this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRemovedRange=function(t){try{this.removed=!0,this.notifyRowChanged(t)}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyCreatedRowStatus=function(t){try{var e=function(t,e,i){var o=i,s=[],r=t.length;for(var a in t)if(!isNaN(a)){var n=Number(a);n>=e&&s.push(n)}s.sort((function(t,e){return e-t}));for(var l=0;l<s.length;l++){var h=s[l];t[h+o]=t[h],delete t[h]}t.length=r+o};e(this.rowStyleArr,t,1),e(this.rowReadOnlyArr,t,1),e(this.rowDisabledArr,t,1),e(this.rowStyleFixedArr,t,1),e(this.rowStyleDataArr,t,1)}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyRemovedRowStatus=function(t){try{var e=function(t,e,i){if(!(e>t.length)){var o=Math.min(i,t.length-e),s=[];for(var r in t)if(!isNaN(r)){var a=Number(r);a>=e&&a<e+o?delete t[r]:a>=e+o&&s.push(a)}s.sort((function(t,e){return t-e}));for(var n=0;n<s.length;n++){var l=s[n];t[l-o]=t[l],delete t[l]}t.length-=o}}
;e(this.rowStyleArr,t,1),e(this.rowReadOnlyArr,t,1),e(this.rowDisabledArr,t,1),e(this.rowStyleFixedArr,t,1),e(this.rowStyleDataArr,t,1)}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyDeleteRow=function(t){try{if(this.getFocusedRowIndex()===t&&this.removeFocusedCell(),!0!==this.options.hideDeletedRow||this.groupbyStatus.grouped||this.isDrillDown){this._drawRowStatus(t-this.rowIndex,t);for(var e=0;e<this.oneRowDataLength;e++)this._drawCellStatus(t-this.rowIndex,t,e)}else this.setRowVisible(t,!1);this.displayNoResultMessage(),this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var i=0;i<this.getColCnt();i++){var o=this.getColumnID(i),r=this.expressionAssArr[o];if(null!=r)for(e=0;e<r.length;e++){var a=this.getColumnIndex(r[e]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyUndeleteRow=function(t){try{if(!0!==this.options.hideDeletedRow||this.groupbyStatus.grouped||this.isDrillDown){this._drawRowStatus(t-this.rowIndex,t);for(var e=0;e<this.oneRowDataLength;e++)this._drawCellStatus(t-this.rowIndex,t,e)}else this.setRowVisible(t,!0);this.displayNoResultMessage(),this.displayFixedColumnLine(),this.hasFooter&&this.options.excludeDeletedRows&&this.drawFooter(),this.hasSubtotal&&this.options.excludeDeletedRows&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex));for(var i=0;i<this.getColCnt();i++){var o=this.getColumnID(i),r=this.expressionAssArr[o];if(null!=r)for(e=0;e<r.length;e++){var a=this.getColumnIndex(r[e]);this.drawCellData(t-this.rowIndex,t,a)}}}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyReformed=function(){try{if(this.options.rowStatusVisible)for(var t=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,e=0;e<=t;e++)this._drawRowStatus(e,this.rowIndex+e);if(this.options.cellStatusVisible)for(t=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,e=0;e<=t;e++)for(var i=0;i<this.oneRowDataLength;i++)this._drawCellStatus(e,this.rowIndex+e,i)}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyModifyAllStatus=function(t){try{for(var e=0;e<this.getDataLength();e++)this._drawRowStatus(e-this.rowIndex,e);this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:"all"})}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyModifyRangeStatus=function(t,e,i){try{var o=this.getDataLength();if(0<=t&&e<=o)for(var r=t;r<=e;r++)this._drawRowStatus(r-this.rowIndex,r);this.displayNoResultMessage(),this.notifyStatusChanged({startIndex:t,endIndex:e})}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyModifyRowStatus=function(t,e){try{t>-1&&t<this.getDataLength()&&(this._drawRowStatus(t-this.rowIndex,t),this.displayNoResultMessage(),this.notifyStatusChanged({rowIndex:[t]}))}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifyModifyMatchedStatus=function(t,e,i){try{for(var o=[],r=this.getDataLength(),a=0;a<r;a++){var n=this.getColumnID(t),l=this.dataList.getRealRowIndex(a);if(this.dataList._getCellData(l,n)+""==e+"")i!=this.dataList._setRowStatus(l,i)&&o.push(a),this._drawRowStatus(a-this.rowIndex,a),this.displayNoResultMessage()}this.notifyStatusChanged({rowIndex:o})}catch(t){s.Y.printStackTrace(t)}},h.prototype.notifySetColumnDefaultValue=function(t,e){try{this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySettedData=function(t){try{this.groupbyStatus.grouped&&this.clearGroupby(),this.loadCheck=[],t||this.options.focusOnSetData||this.removeFocusedCell()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySetRowXML=function(t,e){e?this.notifyRowChanged(t):this.notifyRowInserted(t)},h.prototype.notifyRowMoveUp=function(t){try{var e=this.extraData.row[t-1];this.extraData.row[t-1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t-1],this.extraData.cell[t-1]=this.extraData.cell[t],
this.extraData.cell[t]=e;var i=t-1,o=t;this._swapStyle(o,i),this._getFocusedRowIndex()==t&&this._setFocusedCell(t-1,this.getFocusedColumnIndex()),this.notifyRowChanged(t-1)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRowMoveDown=function(t){try{var e=this.extraData.row[t+1];this.extraData.row[t+1]=this.extraData.row[t],this.extraData.row[t]=e,e=this.extraData.cell[t+1],this.extraData.cell[t+1]=this.extraData.cell[t],this.extraData.cell[t]=e;var i=t+1,o=t;this._swapStyle(o,i),this._getFocusedRowIndex()==t&&this._setFocusedCell(t+1,this.getFocusedColumnIndex()),this.notifyRowChanged(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype._swapStyle=function(t,e){try{for(var i=this.getColCnt(),o=0;o<this.getColCnt();o++){this._swapArr(this.cellStyleArr,t*i+o,e*i+o),this._swapArr(this.cellReadOnlyArr,t*i+o,e*i+o),this._swapArr(this.cellDisabledArr,t*i+o,e*i+o),this._swapArr(this._cellSelectedIndex,t*i+o,e*i+o);var r=this.getCellClass(t,o),a=this.getCellClass(e,o);(r||a)&&(this.setCellClass(t,o,a),this.setCellClass(e,o,r))}this._swapArr(this.rowStyleArr,t,e),this._swapArr(this.rowReadOnlyArr,t,e),this._swapArr(this.rowDisabledArr,t,e),this._swapArr(this.rowStyleFixedArr,t,e),this._swapArr(this.rowStyleDataArr,t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRowModified=function(t){try{this.changeCount++,this.drawRowData(t-this.rowIndex,t),this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyStatusChanged=function(t){try{var e,i,o=!1;"object"==(0,l.A)(t.rowIndex)?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getDataLength()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var r=e;r<i;r++){var a;if(a=o?t.rowIndex[r]:r,null!=this.rowStatusColIDArr)for(var n=0;n<this.rowStatusColIDArr.length;n++){var h=this.getColumnIndex(this.rowStatusColIDArr[n]);this.drawCellData(a-this.rowIndex,a,h)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySaveFocusedCell=function(){try{this.focusedCellInfo.beforeFocusedCell=!(0==this.focusedCell.length),this.focusedCellInfo.beforeFocusedCell&&(this.focusedCellInfo.beforeFocusedCellRealRowIndex=this.dataList.getRealRowIndex(this.focusedCell[0].focusedRowIndex),this.focusedCellInfo.beforeFocusedCellRealColumnIndex=this.focusedCell[0].focusedColIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySetFocusedCell=function(t){try{var e=this.options.filterFocusMode,i=this.focusedCellInfo.beforeFocusedCellRealRowIndex;if("outfocus"!==e&&"infocus"!==e){if(this.focusedCellInfo.beforeFocusedCell)for(var o=0;o<this.getDataLength();o++)if(this.dataList.getRealRowIndex(o)==i){this._setFocusedCell(o,this.focusedCellInfo.beforeFocusedCellRealColumnIndex,!1,{isSort:t,dont_fixScroll:"fixScrollX"===e});break}}else"outfocus"==e&&this.outFocusedCell();this.focusedCellInfo={}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySettedFilter=function(t){try{var e=t&&t.isSort,i=t&&t.fiteredColID;if(this.notifySetFocusedCell({isSort:e}),e&&this.syncWithSortStatus(),this.groupbyStatus.grouped)for(var o in this.customFilterStatusObj)if(this.customFilterStatusObj[o]){this.rowNumArr=[];for(var r=0;r<this.getDataLength();r++)this.rowNumArr.push(r);break}1==this.isDrillDown&&this._linkedDataList&&(this.setCellInfo(),this.initDrilldown());var a=!t||!1!==t.keepTop,n=[];if(this.hiddenRowObj.init){for(var l in this.hiddenRowObj.row)!0===this.hiddenRowObj.row[l]&&n.push(l);this.clearRowVisible({noDraw:!0})}if(this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:a}),0==this.getDataLength()&&this.removeFocusedCell(),
!0!==(a&&!0===this._isHybridScroll())&&this.setScrollYHeight(),e&&!this.groupbyStatus.grouped&&this.drawHeaderSortImages(),i&&!e&&this.options.useFilterList){var h=this.bodyToHeaderRelation[i];if(h){var d=this.getElementById(this.id+"_"+h+"_filter");d&&WebSquare.style.addClass(d,"w2grid_customFilter_filter")}}for(r=0;r<n.length;r++)this.setRowVisible(n[r]);this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifySettedFilterByUser=function(t){try{if(this.options.useFilterListSync){var e=t.colID,i=JSON.parse(t.oldFilteredRowIndexArr),o=JSON.parse(t.newFilteredRowIndexArr);if(this.groupbyStatus.grouped);else if(this.options.useFilterList){this.customFilterList||this.createCustomFilterList(null,!0),this.customFilterList.filterHistory.column[0]!==e&&(this.customFilterList.filterHistory.column.unshift(e),this.customFilterList.filterHistory.filteredRowIndexArr.unshift(i));var r=this.dataList.getColData(e,o),a=this.getUniqueValueOfArray(r),n=this.changeItemValue("label",e,a);this.customFilterList.customFilterListFilterInfo||(this.customFilterList.customFilterListFilterInfo={}),this.customFilterList.customFilterListFilterInfo[e]=[];for(var l=0;l<n.length;l++){var h=n[l],d=this;"string"==typeof h&&(h=h.replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return d.replacechar(t)}))),this.customFilterList.customFilterListFilterInfo[e].push(h)}}}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeClearSort=function(){try{this.notifySaveFocusedCell(),this.clearHeaderSort()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyClearSortFilter=function(){try{var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex();this.syncWithSortStatus(),this.rowNumArr=null,this.applyFocusedCellOut(),this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),"infocus"==this.options.filterFocusMode&&this._setFocusedCell(t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeSettedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterSettedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox(),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeRemovedColumnFilter=function(){try{this.lastTopRowIndex=null,this.scrollEvent=!1,this.rowIndex=0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterRemovedColumnFilter=function(){try{var t=this.getElementById(this.id+"_scrollY_div"),e=t.scrollTop;this.bScrollTop=-1,this.scrollEvent=!0,t.scrollTop=e,this.options.groupbyFilterBox&&this.refreshGroupbyFilterBox(),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRemovedFilter=function(t){try{!0===t&&this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null,!0!==this._isHybridScroll()&&this.setScrollYHeight(),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyClearFilter=function(t){try{this.clearHeaderSort(),this.rowNumArr=null,this._mergeNotifyFilter(),t||(this.adjustDraw_keepTop=!0,this.notifyDataChanged({keepTop:!0}),this.adjustDraw_keepTop=null),0==this.getDataLength()&&this.removeFocusedCell(),this.lastTopRowIndex=null;var e={};for(var i in!0===t&&!0===this._isHybridScroll()&&(e.skipResize=!0),this.setScrollYHeight(e),this.headerInfoHash){var o=this.getElementById(this.id+"_"+i+"_filter");o&&WebSquare.style.removeClass(o,"w2grid_customFilter_filter")}this.itemValueObj={},this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.customFilterList&&(this.customFilterList.filterHistory={
column:[],filteredRowIndexArr:[]},this.customFilterList.customFilterListFilterInfo={}),this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyMultisort=function(){try{this.syncWithSortStatus(),this.drawHeaderSortImages()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBeforeInitDataList=function(){try{this.removeAllFinish=!0}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyAfterInitDataList=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj(),1==this.isDrillDown&&this.initDrilldown(),this.removeAllFinish=!1,this.initColumns(),this._autoFitRefreshNative()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRefresh=function(t){try{!this.startedDisplayNone&&this.rowIndex>=0&&(t&&this.setDataTable(),this._mergeRefresh(),this.drawData(this.rowIndex,0),t&&this.setScrollYHeight(),this.displayNoResultMessage(),this.displayFixedColumnLine())}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyRowPositionChanged=function(t){try{if(this.groupbyStatus.grouped)return;if("number"!=typeof t)return;if("style"!==this.options.syncRowPositionOption&&"focus"!==this.options.syncRowPositionOption)return;if(("cell"===this.options.focusMode||"row"===this.options.focusMode||"both"===this.options.focusMode)&&t<this.getRowCount()){var e,i=this.getLastFocusedCell();if("cell"===this.options.focusMode){if(!i)return;e=i.focusedColIndex}else e=i.focusedColIndex||0;this.applyFocusedCellOut(),this.focusedCell=[],this.isDrillDown&&this._dataList.options.depthColumn&&this.completed&&this.drillTo(t),!0!==this.hiddenRowObj.row[t]&&this.setFocusedCell(t,e,!1,{dataListRowPositionChanged:!0})}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.notifyBroadcast=function(t){try{t=t||{},this.isDrillDown&&!0!==t.skipInitDrilldown&&this.initDrilldown(),this.notifyDataChanged(t)}catch(t){s.Y.printStackTrace(t,null,this)}};var d,c=i(4980),u=i(2338),p=i(2256),g=i(3406),m=function(){};m.prototype.toHTML=function(){try{var t=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/mainZIndex/@value")||"10",e=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/xScrollZIndex/@value")||"20",i=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/yScrollZIndex/@value")||"15";if(this.uncompleted)return;var o=[],a="scroll"===this.options.overflowY,n=(this._isHybridScroll(),"overflow:hidden"),l=!0===this.options.scrollXNative?"display:none;":"",h=!0===this._isNativeScroll()?"visibility:hidden;":"",d=this.options.title?" title='"+this.options.title.wq_replaceAll("'","&#39;")+"'":"",c=this.options.moreButtonTitle?this.options.moreButtonTitle.wq_replaceAll("'","&#39;"):WebSquare.language.getMessage("Grid_more_Button")||"more",u=c?" title='"+c+"'":"",p="none"==this.options.focusMode||"linear"==this.options.focusFlow?"":" tabIndex='0'",g=this.options.scrollFocus?" tabIndex='0'":"",m=""==this.options.style?"style='"+n+";'":"style='"+this.options.style+";"+n+";'",f=this.options.readOnly?" w2grid_readonly_outer":"",b=function(t){return this._useRole()?" role='"+t+"' ":""};if(o.push("<div id='"+this.id+"' class='w2grid "+this.options.className+f+"' "+m+d+p+">"),this.options.senseReader&&this.options.useStartEndDiv){var y=WebSquare.language.getMessage("Grid_dom_start")||"Grid start";o.push("<div id='"+this.id+"_gridstart_div' class='w2grid_start_div' tabindex='0'>"+y+"</div>")}if(this.options.groupbyZone&&this.options.groupbyFilterBox&&"top"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='top:0px;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main'>"),
o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete" />'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+b.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),this.options.groupbyZone){var v="<div id='"+this.id+"_groupbyZone_div' class='w2grid_groupbyZone' style='width:0px; height:0px;'>",w="";this.options.groupbyZoneSearch&&(w="<div id='"+this.id+"_groupbyZone_search' class='w2grid_groupbyZone_search'></div>"),o.push(v+w+"</div>")}if(o.push("<div id='"+this.id+"_main_div' class='w2grid_main' style='z-index:"+t+";"+n+";position:absolute;left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; top:0px; bottom:"+this.scrollLayerWidthSize+"px;float:left;'>"),o.push(this.mainDataGridLayout()),this.options.useMoreButton&&o.push("<button id='"+this.id+"_grid_more_button' class='w2_grid_more_button'"+u+"></button>"),o.push("</div>"),this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"==this.options.groupbyFilterBoxLocation&&(o.push("<div id='"+this.id+"_groupbyFilterBox_div' class='w2grid_groupbyFilterBox' style='left:0px; right:"+(a?this.scrollLayerWidthSize:"0")+"px; bottom:0px;float:left;'>"),o.push("<div id='"+this.id+"_groupbyFilterBox_main' class='w2grid_groupbyFilterBox_main' >"),o.push("<div id='"+this.id+"_groupbyFilterBox_buttons' class='w2grid_groupbyFilterBox_buttons' >"),o.push('<input id="'+this.id+'_groupbyFilterBox_delete" type="button" value="X" class="w2grid_groupbyFilterBox_delete"/>'),o.push('<input id="'+this.id+'_groupbyFilterBox_apply" type="checkbox" class="w2grid_groupbyFilterBox_apply" />'),o.push("</div>"),o.push('<div id="'+this.id+'_groupbyFilterBox_select"'+b.call(this,"combobox")+'aria-labelledby="'+this.id+'_groupbyFilterBox_itemTable" aria-autocomplete="none" class="" tabindex="0">'),o.push("</div>"),o.push("</div>"),o.push("</div>")),o.push("<div id='"+this.id+"_scrollX_div' class='w2grid_scrollX' style='z-index:"+e+";overflow-x:hidden;overflow-y:hidden;position:absolute; height:0px; left:0px; right:"+(a?this.scrollWidthSize:"0")+"px; bottom:0px;"+l+"'>"),o.push(this.getScrollX()),o.push("</div>"),o.push("<div id='"+this.id+"_scrollY_div' class='w2grid_scrollY' style='z-index:"+i+";position:absolute; overflow-x:hidden;overflow-y:scroll;width:"+(a||!0===this._isNativeScroll()?this.scrollLayerWidthSize:"0")+"px; height: 100%;right:0px;"+h+"'"+g+">"),o.push(this.getScrollY()),o.push("</div>"),o.push("<div id='"+this.id+"_iScrollX' class='w2grid_iScrollX' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_iScrollY' class='w2grid_iScrollY' style='visibility:hidden;'></div>"),o.push("<div id='"+this.id+"_resize_line' class='w2grid_resize_line' style='display:none;position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px;'></div>"),this.options.useNoResultMessageURL?o.push("<div id='"+this.id+"_noresult' style='display:none;' class='w2grid_noresult'></div>"):o.push("<div id='"+this.id+"_noresult' style='display:none;position:absolute;"+this.options.noResultMessageStyle+"' class='"+this.options.noResultMessageClass+"'>"+this.options.noResultMessage+"</div>"),this.options.senseReader&&this.options.useStartEndDiv||1==this.options.moveKeyEditModeAll){var S=WebSquare.language.getMessage("Grid_dom_end")||"Grid end";o.push("<div id='"+this.id+"_gridend_div' class='w2grid_end_div' tabindex='0'>"+S+"</div>")}return o.push("</div>"),o.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getScrollY=function(){try{return"<div id='"+this.id+"_size_y' style='height:0px; position:absolute; top:0px; left:0px; width:18px;'></div>"
}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getScrollX=function(){try{for(var t=this.getFixedColumnLastIndex(),e=0,i=0;i<t;i++)this.hiddenList[i]||(e+=this.colWidthList[i]);var o=this.getFixedRightColumnLastIndex(),r=0;for(i=this.colWidthList.length-1;i>=o;i--)this.hiddenList[i]||(r+=this.colWidthList[i]);var a=this.options.scrollFocus?" tabIndex='0'":" tabIndex='-1'",n=[],l=this.options.fixedColumnScrollHidden?"hidden":"scroll";return n.push("<table id='"+this.id+"_scrollX_table' style='height:18px;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:100%'>"),n.push("<tr>"),n.push("<td id='"+this.id+"_scrollX_left' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+e+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:"+l+";overflow-y:hidden'></div>"),n.push("</td>"),n.push("<td style='border:0px solid orange;padding:0px 0px 0px 0px;height:18px;'>"),n.push("<div id='"+this.id+"_scrollX_right' style='height:18px;border:0px solid blue; overflow-x:scroll;overflow-y:hidden;padding:0px 0px 0px 0px;'"+a+">"),n.push("<div id='"+this.id+"_scroll_size' style='height:1px;width:"+parseInt(this.gridWidth-e-r)+"px'></div>"),n.push("</div>"),n.push("</td>"),n.push("<td id='"+this.id+"_scrollX_fixedRight' style='border:0px solid red;padding:0px 0px 0px 0px;height:"+this.scrollLayerWidthSize+"px;width:"+r+"px;vertical-align:bottom;'>"),n.push("<div style='height:"+this.scrollLayerWidthSize+"px;overflow-x:scroll;overflow-y:hidden'></div>"),n.push("</td>"),n.push("</tr>"),n.push("</table>"),n.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.mainDataGridLayout=function(){try{this.setTableStruct();var t=[];return t.push(this.getBodyTable()),t.push(this.getFooterTable()),this.setInitialCSS(),t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setColArr=function(){try{this.colGroupArr=[],this.setColWidth(),this.gridWidth=0;var t,e,i=-1;if(this.options.rowStatusVisible){var o=40;this.options.rowStatusWidth.length>0&&(this.options.rowStatusWidth.indexOf("*")>-1?(o=this.options.rowStatusWidth,i++):this.options.rowStatusWidth-0>-1&&(o=this.options.rowStatusWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(this.options.rowNumVisible){o=40;this.options.rowNumWidth.length>0&&(this.options.rowNumWidth.indexOf("*")>-1?(o=this.options.rowNumWidth,i++):this.options.rowNumWidth-0>-1&&(o=this.options.rowNumWidth-0)),this.colWidthList.unshift(o),this.hiddenList.unshift(!1),this.hiddenAdaptiveList.unshift(!1)}if(i>-1){this.autofitColumn=!0;for(var r=0;r<2;r++)this.colWidthList[r]&&"string"==typeof this.colWidthList[r]&&this.colWidthList[r].indexOf("*")>-1&&(this.autofitColumnIndexArr.push(r),this.autofitColumnWidthArr[r]=this.colWidthList[r])}if(this.isIE6or7){t=[],e=this.colIndexes.bodyColInfo.colSpanArr;var a=this.colIndexes.bodyColInfo.colIndexArr.length;for(r=0;r<a;r++)if(e[r])for(var n=0;n<e[r];n++)t[n]=!0}this.colGroupArr.push("<colgroup>");for(r=0;r<this.colWidthList.length;r++){null==this.colWidthList[r]&&(this.colWidthList[r]=70);var l=isNaN(this.colWidthList[r])?0:this.colWidthList[r];this.hiddenList[r]?l=0:(this.gridWidth+=l,this.isIE6or7&&(r<this.defaultColCnt||!t[r])&&(l--,r==this.defaultColCnt&&l--)),this.colGroupArr.push("<col id='colGroupID_"+r+"' style='width:"+l+"px;white-space:nowrap' />")}this.colGroupArr.push("</colgroup>")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setCss=function(){try{if(this.options.headerTableClass=this.struct.head.attr.class||"gridHeaderTableDefault",this.options.headerTrClass=this.struct.head.attr.rowClass||"gridHeaderTRDefault",this.options.headerTdClass=this.struct.head.attr.columnClass||"gridHeaderTDDefault",this.options.bodyTableClass=this.struct.body.attr.class||"gridBodyTableDefault",this.options.bodyTrClass=this.struct.body.attr.rowClass||"gridBodyTRDefault",
this.options.bodyTdClass=this.struct.body.attr.columnClass||"gridBodyDefault",a.Z.isIEAllVersion()&&!0===this._isNativeScroll()?this.options.gridNativeClass="gridNativeIE":this.options.gridNativeClass="gridNative",this.options.gridHybridClass="gridHybrid",this.hasFooter&&(this.options.footerTableClass=this.struct.foot.attr.class||"gridFooterTableDefault",this.options.footerTrClass=this.struct.foot.attr.rowClass||"gridFooterTRDefault",this.options.footerTdClass=this.struct.foot.attr.columnClass||"gridFooterTDDefault"),this.hasSubtotal){this.options.subtotalTrClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.rowClass||"gridSubtotalTRDefault",this.options.subtotalTdClass=this.struct.subtotalArr[this.struct.subtotalArr.length-1].attr.columnClass||"gridSubtotalDefault";for(var t=0;t<this.struct.subtotalArr.length;t++)if(this.struct.subtotalArr[t].attr.subtotalClass){this.subtotalClassList=[];break}if(this.subtotalClassList)for(t=0;t<this.struct.subtotalArr.length;t++){var e=this.struct.subtotalArr[t].attr.subtotalClass||"gridSubtotalDefault";this.subtotalClassList.push(e)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setInitialCSS=function(){try{this.options.oddEvenColorDisplay&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" .evenTd","background-color:"+this.options.evenRowBackgroundColor),WebSquare.cssStyleSheet.addRule("#"+this.id+" .oddTd","background-color:"+this.options.oddRowBackgroundColor)),this.rowStyleIndex=0,this.cellStyleIndex=0,this.readOnlyTdStyle="",this.readOnlyTdImg="",this.disabledTdStyle="",this.rowOverStyle="",""!=this.options.readOnlyBackgroundColor&&(this.readOnlyTdStyle="background-color:"+this.options.readOnlyBackgroundColor),""==this.options.readOnlyBackgroundImg&&""==this.options.readOnlyBackgroundImgCSS||(this.options.readOnlyBackgroundImgCSS?this.readOnlyTdImg=this.options.readOnlyBackgroundImgCSS:this.readOnlyTdImg="background:url("+this.options.readOnlyBackgroundImg+") no-repeat center center; background-size: cover"),""!=this.options.disabledBackgroundColor&&(this.disabledTdStyle="background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(this.disabledTdStyle=""!=this.disabledTdStyle?this.disabledTdStyle+";":"",this.disabledTdStyle+="color:"+this.options.disabledFontColor),""!=this.options.rowNumBackgroundColor&&WebSquare.cssStyleSheet.addRule("#"+this.id+" ."+this.options.bodyTdClass+"_rowNumber","background-color:"+this.options.rowNumBackgroundColor),this.options.rowMouseOver&&(this.rowOverStyle="background-color:"+this.options.rowMouseOverColor),-1!=this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultHeaderCellHeight+"px"),-1!=this.options.defaultCellHeight&&(WebSquare.cssStyleSheet.addRule("#"+this.id+" td."+this.options.bodyTdClass,"height:"+this.options.defaultCellHeight+"px"),-1==this.options.defaultHeaderCellHeight&&WebSquare.cssStyleSheet.addRule("#"+this.id+" th."+this.options.headerTdClass,"height:"+this.options.defaultCellHeight+"px"))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getGridClassName=function(t,e){try{return null==t||""==t?e:t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.grid2TableXml=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(this.element,t,r.I._XML_NAMESPACE.W2);return e.length>0?this.oneGrid2TableXml(e[0]):null}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.xml2JSON=function(t){try{var e={attr:{},rowArr:[],rowAttrArr:[]};e.attr=WebSquare.Parser.parseAttribute(t);for(var i=WebSquare.Elem.api.getElementsByTagName(t,"row",r.I._XML_NAMESPACE.W2),o=0;o<i.length;o++){e.rowAttrArr[o]=WebSquare.Parser.parseAttribute(i[o]);for(var a=WebSquare.Elem.api.getElementsByTagName(i[o],"column",r.I._XML_NAMESPACE.W2),n=[],l=0;l<a.length;l++){var h=WebSquare.Parser.parseAttribute(a[l]);h["@xml"]=a[l],n.push(h)}e.rowArr.push(n)}return e}catch(t){s.Y.printStackTrace(t,null,this)}},
m.prototype.oneGrid2TableXml=function(t){try{var e=WebSquare.xml.serialize(t),i=e.indexOf("w2:header")>=0?"th":"td";return e=(e=(e=(e=(e=e.wq_replaceAll("w2:header",this.options.fixPrint?"tbody":"thead")).wq_replaceAll("w2:gBody","tbody")).wq_replaceAll("w2:footer","tbody")).wq_replaceAll("w2:row","tr")).wq_replaceAll("w2:column",i),WebSquare.xml.parse(e)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setColWidth=function(){try{var t=this.getColCnt();this.colWidthList=[],this.autoFitColWidthList=null,this.hiddenList=[],this.hiddenAdaptiveList=[];for(var e=0;e<t;e++)this.colWidthList[e]=null,this.hiddenList[e]=!1,this.hiddenAdaptiveList[e]=!1;this.initializeTableInfo()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getColCnt=function(){try{for(var t=0,e=this.htmlInfo?this.htmlInfo.head.rowArr[0]:this.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.initializeTableInfo=function(){try{var t=this,e=function(e){if(null==e)return null;for(var i=[],o=[],s=[],r=[],a=[],n=e.rowArr,l=[],h=0;h<n.length;h++){for(var d=[],c=0;c<t.colWidthList.length;c++)d.push(!1);l.push(d)}var u=0;t.options.rowNumVisible&&(i.push(0),s.push(0),r.push(n.length),a.push([u++])),t.options.rowStatusVisible&&(i.push(!0===t.options.rowNumVisible?1:0),s.push(0),r.push(n.length),a.push([u++]));for(h=0;h<n.length;h++){var p=n[h],g=0;for(c=0;c<p.length;c++){for(var m=p[c],f=parseInt(m.colSpan||1),b=parseInt(m.rowSpan||1);void 0!==l[h][g]&&l[h][g];)g++;m.colIndex=g+t.defaultColCnt,i.push(g+t.defaultColCnt),s.push(h),r.push(b);var y=m.width||"";if(f>1){if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;for(var v=0;v<f;v++){var w=g+v;t.colWidthList[w]=y,t.autofitColumnWidthArr[w+t.defaultColCnt]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt)}}o[i.length-1]=f}if(1==f&&null==t.colWidthList[g])if("string"==typeof y&&y.indexOf("*")>-1){t.autofitColumn=!0;w=g;t.colWidthList[w]=y,t.autofitColumnIndexArr.push(w+t.defaultColCnt),t.autofitColumnWidthArr[w+t.defaultColCnt]=y}else t.colWidthList[g]=parseInt(y||0);for(var S=0;S<f;S++){a[g+t.defaultColCnt+S]||(a[g+t.defaultColCnt+S]=[]),a[g+t.defaultColCnt+S].push(u),l[h][g+S]=!0,"true"==m.hidden&&(t.hiddenList[g+S]=!0);for(var _=1;_<b;_++)l[h+_][g+S]=!0}u++,delete m.hidden}}return{colIndexArr:i,colSpanArr:o,trIndexArr:s,rowSpanArr:r,colIndexMatch:a}};if(this.colIndexes={headerColInfo:e(this.struct.head),bodyColInfo:e(this.struct.body),footerColInfo:e(this.struct.foot)},this.hasSubtotal){this.colIndexes.subtotalColInfo=[];for(var i=0;i<this.struct.subtotalArr.length;i++){var o=e(this.struct.subtotalArr[i]);this.colIndexes.subtotalColInfo.push(o),this.colIndexes.subtotalColInfo[this.struct.subtotalArr[i].attr.targetColumnID]=o}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getFooterTable=function(){try{if(!this.hasFooter)return"";this.hasFooter=!0;var t="";this.options.footerSummary?t=this.options.footerSummary?" summary='"+this.options.footerSummary.wq_replaceAll("'","&#39;")+"'":"":this.options.captionTitle&&this.options.footerSummaryAuto&&(t=" summary='"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"'"),"html5"==WebSquare.docType&&(t="");var e="";if(e="<table id='"+this.id+"_foot_table' class='"+this.options.footerTableClass+"' style='position:absolute; bottom:0px; table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px;'"+t+">",this.options.footerCaption?e+="<caption>"+this.options.footerCaption+"</caption>":this.options.captionTitle&&this.options.footerCaptionAuto&&(e+="<caption>"+this.options.captionTitle+WebSquare.language.getMessage("Grid_footer_caption")+"</caption>"),e+=this.getColGroup(this.id+"_col_footer"),a.Z.isSafari()||a.Z.isChrome()&&a.Z._getChromeVersion()<94)this._checkHeaderColSpan(this.htmlInfo.foot.rowArr)||(e+="<thead><tr></tr></thead>");else if(a.Z.isIE()){
for(var i="",o=0;o<this.getColCnt();o++)i+="<td></td>";e+="<thead style='visibility:collapse;'><tr>"+i+"</tr></thead>"}e+=this.getTableHtml(this.htmlInfo.foot,"tbody","td",this.options.footerTdClass),e+="</table>";var r=a.Z.getDataPrefix("or_wd="),n=a.Z.getDataPrefix("dis="),l=a.Z.getDataPrefix("width=");return e=(e=e.wq_replaceAll(l,r)).wq_replaceAll("disabled=",n)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getBodyTable=function(){try{var t="width:"+this.gridWidth+"px;'";this.isIE6or7&&(t="'");var e="";this.options.summary&&"html5"!=WebSquare.docType&&(e=" summary = '"+(this.element.getAttribute("summary")||"").wq_replaceAll("'","&#39;")+"' ");var i="",o=!0===this._isNativeScroll()?"auto":"hidden",r=!0===this.options.scrollXNative?"auto":"hidden",n="";!0===this._isNativeScroll()?n=" "+this.options.gridNativeClass:!0===this._isHybridScroll()&&(n=" "+this.options.gridNativeClass+" "+this.options.gridHybridClass);var l=!0===this._isBrowserScroll()?"":" border-collapse:collapse";if(this.options.fixedColumnLineDiv?(i="<div id='"+this.id+"_fixedColumnDiv' style='display:none;' class='w2grid_fixedcolumn_line_div' tabindex='-1'></div>",i+="<div id='"+this.id+"_fixedRightColumnDiv' style='display:none;' class='w2grid_fixedrightcolumn_line_div' tabindex='-1'></div>",i+="<div id='"+this.id+"_dataLayer' class='w2grid_dataLayer' style='position:absolute; width:100%; top:0px;bottom:0px;overflow-x:"+r+";overflow-y:"+o+";'>"):i="<div id='"+this.id+"_dataLayer' class='w2grid_dataLayer' style='position:absolute; width:100%; top:0px;bottom:0px;overflow-x:"+r+";overflow-y:"+o+";'>",!0===this.options.accessibility&&(i+="<span id='"+this.id+"_sort_info' class='w2grid_head_sort_info' role='alert'></span>"),i+=this.getGridHeaderFillerTable(this.headerXml,this.options.headerTdClass,this.options.headerTrClass,this.id+"_head_table",this.options.headerTableClass),i+="<table id='"+this.id+"_body_table' class='"+this.options.headerTableClass+n+"' style='position:absolute;left:0px;top:0px;table-layout:fixed;"+l+"; border-spacing:0px;"+t+e+">",this.captionXml){var h=WebSquare.xml.parse("<caption/>"),d=null,c=WebSquare.Parser.parseAttribute(this.captionXml);for(var u in c){if("id"==u){var p=c[u];p&&h.documentElement.setAttribute("id",this.id+"_"+p)}else h.documentElement.setAttribute(u,c[u]);"value"==u&&(d=c[u])}if(d)h.documentElement.appendChild(h.createTextNode(d)),h.documentElement.removeAttribute("value");else for(var g=this.captionXml.getChildNodes(),m=0;m<g.length;m++)if(3===g[m].getNodeType()){var f=h.createTextNode(g[m].getNodeValue());h.documentElement.appendChild(f)}i+=WebSquare.xml.noNameSpaceSerialize(h)}if(this.isWebKit){if(!this.captionXml){var b="transparent",y="0";try{for(m=0;m<document.styleSheets.length;m++){var v=document.styleSheets[m];try{v.cssRules}catch(t){continue}for(var w=0;v.cssRules&&w<v.cssRules.length;w++){var S=v.cssRules[w];if(S.selectorText=="."+this.options.headerTableClass){b=S.style["border-top-color"],y=parseInt(S.style["border-top-width"])/2,m=document.styleSheets.length;break}}}}catch(t){s.Y.printStackTrace(t,null,this)}i+="<caption style='height:"+y+"px;background-color:"+b+";'></caption>"}a.Z.isSafari()||a.Z.isChrome()&&a.Z._getChromeVersion()<94?(i+=this.getColGroup(this.id+"_col_body"),this._checkHeaderColSpan(this.htmlInfo.head.rowArr)||(i+="<thead><tr></tr></thead>")):i+=this.getColGroup(this.id+"_col_body")}else i+=this.getColGroup(this.id+"_col_body");i+=this.getTableHtml(this.htmlInfo.head,"thead","th",this.options.headerTdClass),n="",!0===this._isBrowserScroll()&&(n=" class='"+this.options.gridNativeClass+"'"),i+="<tbody id='"+this.id+"_body_tbody'"+n+"></tbody>",i+="</table>",i+="</div>";var _=a.Z.getDataPrefix("or_wd="),C=a.Z.getDataPrefix("width=");return i=i.wq_replaceAll(C,_)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._checkHeaderColSpan=function(t){try{var e=!0;if(1==t.length)for(var i=t[0],o=0;o<i.length;o++){if((parseInt(i[o].colspan)||parseInt(i[o].colSpan)||1)>1)return!1
}else e=!1;return e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getTableInfo=function(t,e,i){try{var r=o.q.extend({},t.attr),a=[],n=t.rowAttrArr||[{}],l=t.rowArr;r.id=this.id+"_"+e+"_tbody",r.style="";for(var h=0;h<l.length;h++){a.push([]);for(var d=0;d<l[h].length;d++){var c=o.q.extend({},l[h][d]);if(c.class=e+" "+e+"_data",this.isIE6or7){var u=parseInt(c.colSpan||"1"),p=parseInt(c.colIndex);if(u>1){for(var g=1;g<u;g++)0!=this.hgap[i+"_"+p]&&(this.hgap[i+"_"+(p+g)]=!0);this.hgap[i+"_"+p]=!0}else this.hgap[i+"_"+p]=!1}var m=c.textAlign,f=c.style?c.style+";":"";f=f+"text-align:"+(m||"center"),c.style=f,a[h].push(c)}}return{attr:r,rowArr:a,rowAttrArr:n}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getBodyHtmlInfo=function(){try{var t=this.options.bodyTdClass,e=this.options.bodyTrClass,i=this.getTableInfo(this.struct.body,t,e),o=i.attr,a=i.rowArr,n=i.rowAttrArr;this.oneRowLength=a.length,this.oneRowDataLength=0,this.tdIdList=[],this.bodyIdColIndexMap={},this._bodyIdMultiRowIndexMap={},this.colMoveIndexMap={};for(var l=0,h={},d=0;d<a.length;d++){n[d].trIndex=d,this.oneRowDataLength+=a[d].length;for(var c=0;c<a[d].length;c++){var u=a[d][c],g=u.style.split(";");if(g.length>0)for(var m=0;m<g.length;m++)if(g[m].indexOf(":")>-1){try{var f=g[m].split(":")[0].wq_trim(),b=g[m].split(":")[1].wq_trim();this.options.useDefaultStyle?this.setDefaultStyle(l,f,b):"text-align"!==f||u.textAlign?this.setColumnStyle(l,f,b):this._setInitStyle(l,f,b)}catch(t){s.Y.printStackTrace(t,null,this)}if(!this.options.applyAllColumnStyle)break}var y=this.options.adaptiveStyle||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/adaptiveStyle/@value");if("none"==this.options.adaptiveStyle&&(y=""),y=u.adaptiveStyle||y,"none"==u.adaptiveStyle&&(y=""),y){var v=y.split(";");if(v.length>0)for(var w=0;w<v.length;w++)if(v[w].indexOf(":")>-1)try{var S=v[w].split(":")[0].wq_trim(),_=v[w].split(":")[1].wq_trim();this.setAdaptiveColumnStyle(l,S,_)}catch(t){s.Y.printStackTrace(t,null,this)}}"textarea"==u.inputType&&"all"==u.displayType&&(u.style+=";word-break:break-all;white-space:normal;");var C=u.id;if(null==u.col_id?(u.col_id=C,u.id=this.id+"_"+C,u["@xml"]=u["@xml"].cloneNode(!0),u["@xml"].setAttribute("col_id",C),u["@xml"].setAttribute("id",this.id+"_"+C)):C=u.col_id,this._setCellInfo(C,u["@xml"]),this.bodyIdColIndexMap[C]=l,this._bodyIdMultiRowIndexMap[C]=d,0==d&&(this.colMoveIndexMap[C]=l),h[C]){var x=WebSquare.language.getMessage("E_comp_duplicated_Msg",C)||"id["+C+"] was used repeatedly. Check the source code.";$l(x)}else h[C]=C;this.tdIdList.push(C),""===C&&p.v.printLog("warning : The "+this.id+" column name for column index "+l+" is missing."),l++}}return{attr:o,rowArr:a,rowAttrArr:n}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getHeaderHtmlInfo=function(){try{var t=this.options.headerTdClass,e=this.options.headerTrClass,i=this.getTableInfo(this.struct.head,t,e),o=i.attr,r=i.rowArr,a=i.rowAttrArr,n=[];this.thIdList=[],this.colMoveHeaderIndexMap={},o.id=this.id+"_head_table",o.class=this.options.headerTableClass;var l=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.head.attr.style);l&&2==l.length&&(this.headerHeight=parseInt(l[1])),o.style=this.options.hideHeader?"display:none":"",this.headCellInfoHash={};for(var h=0;h<r.length;h++){n.push([]);for(var d=0;d<r[h].length;d++){var c=r[h][d],u=null,p=c.inputType,g=c.dataType,m=c.value;if(void 0!==m&&null!=m||void 0!==(m=c.defaultValue)&&null!=m||(m=""),"checkbox"==p)u="<input type='checkbox' style='border:0px solid blue;background-color:transprent;' />";else if("select"==p){var f="";if(this.options.chooseOption){if(f=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef)(y=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef))&&(f=y)}else if(this.options.allOption){f=WebSquare.language.getMessage("Grid_all")||"-all-"}else if("json"!==c["@xml"]._elementType){
var b=(WebSquare.xml.serialize(c["@xml"]).match(/label\s*>[^<]+<\//)||"").toString();""!==b&&(f=b.slice(b.toString().indexOf(">")+1,-2))}u="<div style='width:100%;height:20px;top:0px;left:0px;position:relative;background-color:#ffffff' class='w2selectbox "+this.options.headerTdClass+" "+this.options.headerTdClass+"_data'><span style='display:none'></span><table class='w2selectbox_table_main'><tr class='w2selectbox_row w2selectbox_row_main'><td class='w2selectbox_col_label'><div class='w2selectbox_label'>"+f+"</div></td><td class='w2selectbox_col_button'></td></tr></table></div>"}else if("text"==p&&"own"==g)u="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";else{var y;if(this.options.useLocale&&c.localeRef)(y=this.getLocaleValue(c.localeRef))&&(m=y);m=null!=m?m:"";var v="";"span"==this.options.dataTag&&(v="class='w2grid_span'"),u="<"+this.options.dataTag+" "+v+" style='padding-top:0px; padding-left:4px;padding-right:4px' >"+m+this.dataTagClose}n[h].push(u),this.thIdList.push(c.id),this.headCellInfoHash[c.id]=c["@xml"],this._setHeaderInfo(c.id,c["@xml"]),null==c.col_id&&(c.col_id=c.id)}}return{attr:o,rowArr:r,rowAttrArr:a,headerTdHtml:n}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getFooterHtmlInfo=function(){try{for(var t=this.options.footerTdClass,e=this.options.footerTrClass,i=this.getTableInfo(this.struct.foot,t,e),o=i.attr,r=i.rowArr,a=i.rowAttrArr,n=0;n<r.length;n++)a[n]["data-trindex"]=n;var l=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(this.struct.foot.attr.style);return l&&2==l.length&&(this.footerHeight=parseInt(l[1])),{attr:o,rowArr:r,rowAttrArr:a}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getSubtotalHtmlInfo=function(t){try{var e=this.options.subtotalTdClass;this.subtotalClassList&&(e=t.attr.subtotalClass||"gridSubtotalDefault");for(var i=this.options.subtotalTrClass,o=this.getTableInfo(t,e,i),r=o.attr,a=o.rowArr,n=o.rowAttrArr,l=0;l<a.length;l++){n[l].trIndex=l,n[l].targetColumnID=r.targetColumnID;for(var h=0;h<a[l].length;h++)a[l][h].class=a[l][h].class+" "+this.id+"_subtotal__column"+h,delete a[l][h].hidden}return{attr:r,rowArr:a,rowAttrArr:n}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getTableHtml=function(t,e,i,r){try{var n=t.attr,l=t.rowArr,h=t.rowAttrArr,d=[],c="";if(!0===this._isBrowserScroll()){var u={};o.q.extend(u,n);var p=this.options.gridNativeClass;!0===this._isHybridScroll()&&"string"==typeof e&&"thead"===e.toLowerCase()&&(p=this.options.gridHybridClass),u.class?u.class+=" "+p:u.class=p,c=this.getAttributesString(u)}else c=this.getAttributesString(n);d.push("<"+e+c+">");var g="",m="";l.length>=2&&(g=!1===this.options.rowNumRowSpan?" rowSpan='1'":" rowSpan='"+l.length+"'",m=!1===this.options.rowStatusRowSpan?" rowSpan='1'":" rowSpan='"+l.length+"'");var f="";!0===this._isBrowserScroll()&&t===this.htmlInfo.head&&(f=" "+this.options.gridNativeClass);for(var b=a.Z.getDataPrefix("colIndex"),y=a.Z.getDataPrefix("value"),v=0;v<l.length;v++){t==this.htmlInfo.head?d.push("<tr"+this.getAttributesString(h[v])+" class='gridHeaderStyle_"+v+f+"'>"):t==this.htmlInfo.foot?d.push("<tr"+this.getAttributesString(h[v])+" class='gridFooterStyle_"+v+"'>"):d.push("<tr"+this.getAttributesString(h[v])+">");var w="",S="";t==this.htmlInfo.head&&(S=r+"_background ",w=this.options.rowNumHeaderValue),0==this.options.rowNumRowSpan&&this.options.rowNumVisible?v===l.length-1?d.push("<"+i+g+" class='"+r+" "+r+"_rowNumber "+S+"' "+y+"='"+w+"' "+b+"='0' id='_headerRowNumber'></"+i+">"):d.push("<"+i+g+" class='"+r+" "+r+"_rowNumber "+S+"' "+y+"='' "+b+"='0' id='_headerRowNumber'></"+i+">"):0===v&&this.options.rowNumVisible&&d.push("<"+i+g+" class='"+r+" "+r+"_rowNumber "+S+"' "+y+"='"+w+"' "+b+"='0' id='_headerRowNumber'></"+i+">");var _="";if(!1===this.options.rowStatusRowSpan){if(v===l.length-1)t==this.htmlInfo.head&&(_=this.options.rowStatusHeaderValue),
this.options.rowStatusVisible&&d.push("<"+i+m+" class='"+r+" "+r+"_rowStatus "+S+"' "+y+"='"+_+"' "+b+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">");else if(this.options.rowStatusVisible)if(this.options.rowStatusColSpan&&0==v){var C=1;l[v][0].colSpan?C+=Number(l[v][0].colSpan):C++;var x=" colSpan='"+C+"'",I=l[v][0].value;d.push("<"+i+m+x+" class='"+r+" "+r+"_rowStatus "+S+"' "+y+"='"+I+"' "+b+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else d.push("<"+i+m+" class='"+r+" "+r+"_rowStatus "+S+"' "+y+"='' "+b+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">")}else 0==v&&(t==this.htmlInfo.head&&(_=this.options.rowStatusHeaderValue),this.options.rowStatusVisible&&d.push("<"+i+m+" class='"+r+" "+r+"_rowStatus "+S+"' "+y+"='"+_+"' "+b+"='"+(this.options.rowNumVisible?1:0)+"' id='_headerRowStatus'></"+i+">"));for(var T=0;T<l[v].length;T++){if(r!==this.options.subtotalTdClass&&r!==this.options.footerTdClass||null==l[v][T].columnClass)if(this.subtotalClassList&&l[v][T].columnClass){for(var k=0;k<this.subtotalClassList.length;k++)if(this.subtotalClassList[k]&&r===this.subtotalClassList[k]){L=l[v][T].class;l[v][T].class=l[v][T].columnClass+" "+l[v][T].class,d.push("<"+i+this.getAttributesString(l[v][T])+">"),l[v][T].class=L;break}}else l[v][T].class=l[v][T].class+" "+S,d.push("<"+i+this.getAttributesString(l[v][T])+">");else{var L=l[v][T].class;l[v][T].class=l[v][T].columnClass+" "+l[v][T].class,d.push("<"+i+this.getAttributesString(l[v][T])+">"),l[v][T].class=L}t.headerTdHtml&&t.headerTdHtml[v][T]&&d.push(t.headerTdHtml[v][T]),d.push("</"+i+">")}d.push("</tr>")}return d.push("</"+e+">"),d.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getGridHeaderFillerTable=function(t,e,i,o,r){try{if(!this.options.headFiller)return"";var a=[],n="";return this.options.hideHeader&&(n="display:none"),a.push("<table class='"+this.options.headerTableClass+"' style='z-index:-1;position:absolute;table-layout:fixed; border-collapse:collapse; border-spacing:0px; width:"+this.gridWidth+"px; '>"),a.push("<tbody id='"+this.id+"_"+e+"_tbody_tmp' style='"+n+"' class='"+r+"'>"),a.push("<tr class='"+i+"'>"),a.push("<td style='' id='"+this.id+"_header_bg_td' class='"+e+" "+e+"_rowNumber'>&nbsp;</td>"),a.push("</tr>"),a.push("</tbody>"),a.push("</table>"),a.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getColGroup=function(t){try{return this.colGroupArr.join("").wq_replaceAll("colGroupID",t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.initializeLayoutEvents=function(){try{if(!0!==this.options.scrollXNative&&this.event.addListener2(this.getElementById(this.id+"_scrollX_right"),"onscroll",this.handleScrollX,this),!0!==this._isBrowserScroll()&&(this.event.addListener2(this.render,"onmousewheel",this.handleWheel,this),this.event.addListener2(document.getElementById(this.id+"_scrollY_div"),"onscroll",this.handleScrollY,this)),!0===this._isHybridScroll())if(this.event.addListener2(document.getElementById(this.id+"_scrollY_div"),"onscroll",this.handleScrollYHybrid,this),a.Z.isMobile())this.event.addListener2(document.getElementById(this.id+"_main_div"),"ontouchstart",this.handleTouchStartHybrid,this),this.event.addListener2(document.getElementById(this.id+"_main_div"),"ontouchmove",this.handleTouchMoveHybrid,this);else{var t="onwheel"in window?"onwheel":"onmousewheel";this.event.addListener2(document.getElementById(this.id+"_main_div"),t,this.handleWheelHybrid,this)}this.options.groupbyZone&&(this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onclick",this.handleGroupbyZoneClick,this),this.event.addListener2(this.getElementById(this.id+"_groupbyZone_div"),"onmousedown",this.handleChangeGroupDepth,this)),this.options.resize&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousemove",this.event.bindAsEventListener(this,this.handleColumnResize)),
this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endColumnResize)),this.options.rowResize&&(this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousemove",this.event.bindAsEventListener(this,this.handleRowResize)),this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onmousedown",this.event.bindAsEventListener(this,this.doRowResize)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.endRowResize))),a.Z.isIE()&&r.I.browserVersion()<=8&&this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){(this.resizeStarted||this.options.rowResize&&this.rowResizeStarted||null!=this.columnMoveTarget)&&u.f.preventDefault(t)})))),this.options.resize&&a.Z.isTouchDevice()&&(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchmove",this.event.bindAsEventListener(this,this.handleColumnResize)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"ontouchstart",this.event.bindAsEventListener(this,this.doColumnResize)),this.event.addListener(document.documentElement,"ontouchend",this.event.bindAsEventListener(this,this.endColumnResize)))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleScrollX=function(t){try{var e=u.f.getTarget(t);e&&(this._scrollXPrev||(this._scrollXPrev={}),this._scrollXPrev.scrollLeft===e.scrollLeft&&this._scrollXPrev.scrollTop===e.scrollTop&&this._scrollXPrev.scrollWidth===e.scrollWidth&&this._scrollXPrev.scrollHeight===e.scrollHeight&&(this.scrollXPreventEndEdit=!0),this._scrollXPrev.scrollLeft=e.scrollLeft,this._scrollXPrev.scrollTop=e.scrollTop,this._scrollXPrev.scrollWidth=e.scrollWidth,this._scrollXPrev.scrollHeight=e.scrollHeight),r.I.clearTimer(this.id+"_completiveDrawData",!0),r.I.clearTimer(this.id+"_applyStyleOptions",!0),null==this.editedCell||this.scrollXPreventEndEdit||this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t]),this._handleScrollX(),this.scrollXPreventEndEdit&&this.editedCell&&this.editedCell.setPosition&&this.editedCell.setPosition(),this.scrollXPreventEndEdit=!1,u.f.fireEvent(this,"onscrollx",t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._handleScrollX=function(){try{this.body_table||(this.head_table=this.getElementById(this.id+"_head_table"),this.body_table=this.getElementById(this.id+"_body_table"),this.hasFooter&&(this.foot_table=this.getElementById(this.id+"_foot_table")),this.scrollX_right=this.getElementById(this.id+"_scrollX_right")),void 0!==this.colGroup&&null!=this.colGroup||(this.colGroup={},this.colGroup.bodyColList=this.body_table.getElementsByTagName("col"),this.hasFooter?this.colGroup.footerColList=this.foot_table.getElementsByTagName("col"):this.colGroup.footerColList=null);var t=0;if(this.options.scrollByColumn){var e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;e>1?t=1+Math.round(e):e<1&&(t=1+Math.round(1/e))}var i=this.getFixedColumnLastIndex(),o=this.scrollX_right.scrollLeft,r=this.gridWidth-o-t-this.fixedWidth-1-this.fixedWidthRight,n=r;r=r>0?r:0;var l=this.options.fixedRightColumn>0;if(!l){if(this.head_table.style.width=r+"px",this.isWebKit){for(var h=[],d=this.defaultColCnt;d<this.hiddenList.length;d++)1==this.hiddenList[d]&&h.push(d-this.defaultColCnt);(q=r-this.colGroup.bodyColList.length-h.length-1)<0&&(q=0),this.body_table.style.width=q+"px",this.hasFooter&&(this.foot_table.style.width=q+"px")}else this.body_table.style.width=r+"px",this.hasFooter&&(this.foot_table.style.width=r+"px");this.hasFooter&&(this.foot_table.style.width=r+"px")}var c=[],u=[],p=0,g=-1,m=0;if(l||this.options.scrollByColumn||a.Z.isIE(8)){var f=this._getScrollYWidth()-1
;if(p=(m=this.resizeObj&&this.resizeObj.clientWidth?this.resizeObj.clientWidth:this.render.clientWidth)-1-this.fixedWidth-this.fixedWidthRight,a.Z.isChrome()&&(p+=1),-1!=f&&(p-=f),l){this.options.scrollByColumn=!1;var b=m-1-f;b<this.gridWidth&&(this.head_table.style.width=m-1-f+"px",this.body_table.style.width=m-1-f+"px",this.hasFooter&&(this.foot_table.style.width=m-1-f+"px"))}}var y=this.getFixedRightColumnLastIndex(),v=l,w=-1;for(d=this.colWidthList.length-1;d>=y;d--)this.hiddenList[d]||(this.colGroup.bodyColList[d].style.width=this.colWidthList[d]+"px");for(d=y-1;d>=0;d--){var S=0,_=parseInt(this.colWidthList[d],10)||0;if(this.hiddenList[d]&&(_=0),l&&v)if(r>p+_)r-=_,_=0;else{var C=_;b<this.gridWidth&&(_-=r-p),r-=C,v=!1,w=d}else r>_?r-=_:(r>0&&n<=p&&(g=d,this.options.scrollByColumn&&(S=r)),_=r,r=0),d<i&&!this.hiddenList[d]&&(_=parseInt(this.colWidthList[d],10)||0);var x=0,I=0;if(this.isIE6or7&&0!=_&&(1==this.hgap[this.options.headerTrClass+"_"+d]?0:1,x=1==this.hgap[this.options.bodyTrClass+"_"+d]?0:1,this.hasFooter&&(I=1==this.hgap[this.options.footerTrClass+"_"+d]?0:1)),a.Z.isIE(8)&&0==this.defaultColCnt&&0==d&&0==_&&(_=1,g>=0&&(c[g]=c[g]-1,this.colGroup.bodyColList[g].style.width=c[g]+"px",this.hasFooter&&(u[g]=u[g]-1,this.colGroup.footerColList[g].style.width=u[g]+"px"))),this.options.scrollByColumn){var T=this.colWidthList[d];1==_&&a.Z.isIE(8)&&0==this.defaultColCnt&&0==d&&(T=1),0==_&&(T=0),S>0&&(T=S),w===d&&(T=0),(0==T||1==T||T==this.colWidthList[d]||S>0||w===d)&&(this.colGroup.bodyColList[d].style.width=T-x+"px",c[d]=T-x,this.hasFooter&&(this.colGroup.footerColList[d].style.width=T-I+"px",u[d]=T-I))}else this.hiddenList[d]&&(_=0),this.colGroup.bodyColList[d].style.width=_-x+"px",c[d]=_-x,this.hasFooter&&(this.colGroup.footerColList[d].style.width=_-I+"px",u[d]=_-I)}f=this._getScrollYWidth("offsetWidth");if(this.isWebKit&&-1==this.options.className.indexOf("w2gridViewItemTable")&&0===f&&"allColumn"===this.options.autoFit&&!this.options.autoFitMinWidth){var k=WebSquare.style.getSize(this.render,"outerwidth")-WebSquare.style.getSize(this.render,"width"),L=this.render.getBoundingClientRect().width-k,A=!0;this.head_table.getBoundingClientRect().width<=0&&(A=!1);for(d=y-1;d>=0;d--){var D=L-(A?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width),W=1;if(!(D>=0))break;if(!this.hiddenList[d]){if(D<2)break;var q=parseInt(this.colGroup.bodyColList[d].style.width);this.colGroup.bodyColList[d].style.width=q+W+"px",c[d]=q+W,(D=L-(A?this.head_table.getBoundingClientRect().width:this.body_table.getBoundingClientRect().width))<1&&(W=-1,this.colGroup.bodyColList[d].style.width=q+W+"px",c[d]=q+W),this.hasFooter&&(this.colGroup.footerColList[d].style.width=q+W+"px",u[d]=q+W)}}}this.setColIndexInfo(c,u),this._setGridBorder(),(this.groupbyZoneStatus.groupbyZoneRender||this.options.useFilterList)&&(this.resizeGroupbyZone(),this.resizeGridList()),this.options.fixedColumnLineDiv&&a.Z.setTimeout(this.displayFixedColumnLine,{key:this.id+"_displayFixedColumnLine",caller:this,delay:10})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.redrawTable=function(){try{if(this.isWebKit)if(!0===this._isBrowserScroll()){var t=this.colGroup.bodyColList[0],e=t.offsetWidth,i=t.id;t.style.width=e+1+"px",a.Z.setTimeout((function(){document.getElementById(i).style.width=e+"px"}),{key:this.id+"_redrawTable",delay:20})}else{null==this._redrawTable_transform&&(this._redrawTable_transform=this.body_table.style.webkitTransform),this.body_table.style.webkitTransform="rotateZ(0deg)";var o=this.uuid;a.Z.setTimeout((function(){var t=WebSquare.idCache[o];t.body_table.style.webkitTransform=t._redrawTable_transform,delete t._redrawTable_transform}),{key:this.id+"_redrawTable",delay:20})}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setColIndexInfo=function(t,e){try{if(void 0===this.colGroup||null==this.colGroup){this.colGroup={},
this.colGroup.bodyColList=this.getElementById(this.id+"_body_table").getElementsByTagName("col");var i=this.getElementById(this.id+"_foot_table");this.colGroup.footerColList=i?i.getElementsByTagName("col"):null}this.colIndexInfo={};var o=this.getVisibleColRange(this.colGroup.bodyColList,t),r=this.getVisibleTds(this.colIndexes.bodyColInfo,o);if(this.colIndexInfo.body={colInfo:this.colIndexes.bodyColInfo,visibleTds:r.visibleTds,invisibleTds:r.invisibleTds,visibilityArr:r.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.isIE6or7){var a=this.getVisibleTds(this.colIndexes.headerColInfo,o);if(this.colIndexInfo.header={colInfo:this.colIndexes.headerColInfo,visibleTds:a.visibleTds,invisibleTds:a.invisibleTds,visibilityArr:a.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex},this.hasFooter){var n=this.getVisibleColRange(this.colGroup.footerColList,e),l=this.getVisibleTds(this.colIndexes.footerColInfo,n);this.colIndexInfo.footer={colInfo:this.colIndexes.footerColInfo,visibleTds:l.visibleTds,invisibleTds:l.invisibleTds,visibilityArr:l.visibilityArr,firstCoveredColIndex:n.firstCoveredColIndex}}if(this.hasSubtotal)for(var h in this.colIndexInfo.subtotal={},this.subtotalRowHash){var d=this.getVisibleTds(this.colIndexes.subtotalColInfo[h],o);this.colIndexInfo.subtotal[h]={colInfo:this.colIndexes.subtotalColInfo[h],visibleTds:d.visibleTds,invisibleTds:d.invisibleTds,visibilityArr:d.visibilityArr,firstCoveredColIndex:o.firstCoveredColIndex}}}this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideInvisibleTds=(d=!0,function(){try{if(d){if(d=!1,this.groupbyStatus.grouped){this.options.lazyDrawHiddenColumn=!1;var t=WebSquare.language.getMessage("Grid_warning6",this.id)||this.id+" The groupby is enabled and the lazyDrawHiddenColumn is disabled.";return void $l(t)}for(var e=this.defaultColCnt;e<this.colIndexes.bodyColInfo.rowSpanArr.length;e++)if(this.colIndexes.bodyColInfo.rowSpanArr[e]>=2){this.options.lazyDrawHiddenColumn=!1;var i=WebSquare.language.getMessage("Grid_warning7",this.id)||this.id+" : rowSpan is enabled the lazyDrawHiddenColumn is disabled.";return void $l(i)}}var o=this.colIndexInfo.body.visibilityArr,r=[];for(e=0;e<this.drawedRowLength;e++)if("none"!=this.dataRowList[e].style.display)for(var a=0,n=0,l=this.defaultColCnt;l<o.length;l++){this.colIndexes.bodyColInfo.trIndexArr[l]>a&&(n=0,a++);var h=this._getColumnMoveIndex(l-this.defaultColCnt),c=this.data_td_list[h+e*this.oneRowDataLength],u=this.colIndexes.bodyColInfo.colSpanArr[l]||1;o[l]?(this.initVisibilityArr[l]||(this.drawCellData(e,e+this.rowIndex,h),this.applyCellStyleOptions(e+this.rowIndex,h),r[l]=!0),c.style.display="",u+n>1?(c.setAttribute("colSpan",u+n),c.setAttribute("data-lazydrawtd","true")):(c.removeAttribute("colSpan"),c.removeAttribute("data-lazydrawtd")),n=0):(c.style.display="none",n+=u)}for(e=0;e<r.length;e++)r[e]&&(this.initVisibilityArr[e]=!0)}catch(t){s.Y.printStackTrace(t,null,this)}}),m.prototype.getVisibleColRange=function(t,e){try{for(var i=this.render.clientWidth,o=[],r=0,a=-1,n=-1,l=e?e.length:t.length,h=0;h<l;h++){var d=e?e[h]:parseInt(t[h].style.width);if((r+=d)>i){a>=0?(d<3?o.push([a,h]):o.push([a,h+1]),n=h+1,a=-1):(o.push([h,h+1]),n=h+1);break}d<3?-1!=a&&(o.push([a,h]),a=-1):-1==a&&(a=h)}return-1!=a&&a<h&&o.push([a,h]),o.firstCoveredColIndex=-1!==n?n:l,-1==n&&(n=l),o}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getVisibleTds=function(t,e){try{for(var i=[],o=[],r=[],a=0;a<t.colIndexArr.length;a++){for(var n=t.colIndexArr[a],l=t.colSpanArr[a]||1,h=0;h<e.length;h++)if(e[h][0]<=n&&n<e[h][1]||e[h][0]<=n+l-1&&n+l-1<e[h][1]||n<=e[h][0]&&e[h][0]<n+l||n<=e[h][1]-1&&e[h][1]-1<n+l){i[i.length]=a,r[r.length]=!0;break}h==e.length&&(o[o.length]=a,r[r.length]=!1)}return{visibleTds:i,invisibleTds:o,visibilityArr:r}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setGridBorder=function(){try{var t=a.Z.getDataPrefix("colIndex");if(a.Z.isIE(8)){
if(0==this.defaultColCnt){var e=this.colGroup.bodyColList[0].style.width,i="1px"==e||"0px"==e?"0px":"";if(!this.leftMostTds){this.leftMostTds=[];for(var o=this.getElementById(this.id+"_head_table").getElementsByTagName("th"),r=this.hasFooter?this.getElementById(this.id+"_foot_table").getElementsByTagName("td"):[],n=0;n<o.length;n++)0==o[n].getAttribute(t)&&this.leftMostTds.push(o[n]);for(n=0;n<r.length;n++)0==r[n].getAttribute(t)&&this.leftMostTds.push(r[n])}for(n=0;n<this.leftMostTds.length;n++)this.leftMostTds[n].style.borderLeftWidth=i,this.leftMostTds[n].style.borderRightWidth=i;if(this.all_data_td_list.length>0){if(!this.leftMostIndexArr){this.leftMostIndexArr=[];for(n=0;n<this.oneRowDataLength;n++)0==this.all_data_td_list[n].getAttribute(t)&&this.leftMostIndexArr.push(n)}for(n=0;n<this.leftMostIndexArr.length;n++)for(var l=0;l<this.drawedRowLength;l++){(h=this.all_data_td_list[this.leftMostIndexArr[n]+l*this.oneRowDataLength]).style.borderLeftWidth=i,h.style.borderRightWidth=i}}if(this.hasSubtotal&&this.drawedSubtotal)for(n=0;n<this.drawedSubtotal.length;n++)for(l=0;l<this.drawedSubtotal[n].length;l++){var h;0==(h=this.drawedSubtotal[n][l].cells[0]).cellIndex&&(h.style.borderLeftWidth=i,h.style.borderRightWidth=i)}}if(!this._setGridBorderNoRefresh){var d=(u=this.getElementById(this.id+"_dataLayer")).style.display,c=document.activeElement;u.style.display="none",u.offsetHeight,u.style.display=d,document.activeElement!=c&&this.hasClass(c,this.options.bodyTdClass)&&c.focus()}}if(this.isIE6or7&&(this.colIndexInfo||this.setColIndexInfo(),this.colGroup&&(this._setBorderFolding(this.all_data_td_list,this.colIndexInfo.body,this.drawedRowLength),this.headerTds||(this.headerTds=this.getElementById(this.id+"_head_table").getElementsByTagName("th")),this._setBorderFolding(this.headerTds,this.colIndexInfo.header)),this.hasFooter&&(this.footerTds||(this.footerTds=this.getElementById(this.id+"_foot_table").getElementsByTagName("td")),this._setBorderFolding(this.footerTds,this.colIndexInfo.footer)),this.hasSubtotal&&this._setSubtotalBorder(),!this._setGridBorderNoRefresh)){var u,p=(u=this.getElementById(this.id+"_dataLayer")).style.filter;c=document.activeElement;u.style.filter="alpha(opacity=99)",u.style.filter=p,document.activeElement!=c&&this.hasClass(c,this.options.bodyTdClass)&&c.focus()}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setBorderFolding=function(t,e,i){try{if(this.groupbyStatus.grouped)return;if(!t||0==i)return;i=i||1;for(var o=e.firstCoveredColIndex,r=this.oneRowDataLength+this.defaultColCnt,a=0,n=e.visibilityArr.length;a<n;a++){var l=e.colInfo.colIndexArr[a],h=e.visibilityArr[a],d="0px"===t[a].style.borderWidth;if(i>1&&(d=d||"0px"===t[a+r].style.borderWidth),l<o&&!h&&!d)for(var c=0;c<i;c++)t[a+c*r].style.borderWidth="0px";else if((l>=o||h)&&d)for(c=0;c<i;c++)t[a+c*r].style.borderWidth="",t[a+c*r].style.borderStyle=""}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setSubtotalBorder=function(){try{if(!this.drawedSubtotal)return;for(var t={},e=0;e<this.drawedSubtotal.length;e++){var i=this.drawedSubtotal[e];if(!t[i.targetID]){t[i.targetID]=!0;for(var o=this.colIndexInfo.subtotal[i.targetID],r=o.firstCoveredColIndex,a=0,n=0;n<i.length;n++)for(var l=i[n],h=0;h<l.cells.length;h++,a++){var d=o.colInfo.colIndexArr[a],c=o.visibilityArr[a],u="0px"===l.cells[h].style.borderWidth;if(d<r&&!c&&!u)for(var p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="0px");else if((d>=r||c)&&u)for(p=e;p<this.drawedSubtotal.length;p++)this.drawedSubtotal[p].targetID==i.targetID&&(this.drawedSubtotal[p][n].cells[h].style.borderWidth="")}}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleWheel=function(t){try{
if(this.options.groupbyZone||this.options.useFilterList)for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone_scrollView")||e.match("w2grid_customFilter_scrollView"))return void u.f.stopPropagation(t);var i=u.f.getMouseWheelDelta(t),o=t.wheelDeltaY,r=t.wheelDeltaX,n=Math.floor(this.options.wheelRows*Math.abs(i));if(n=Math.max(n,this.options.wheelRows),"wheelDeltaX"in t&&Math.abs(r)>Math.abs(o))return this.getElementById(this.id+"_scrollX_right").scrollLeft-=r,void u.f.stopEvent(t);var l=this.getElementById(this.id+"_scrollY_div");if(this.scrollEvent=!0,i>0){if(0==l.scrollTop)return void(this.options.wheelStop&&u.f.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)-n)}else if(i<0){var h=this.getElementById(this.id+"_scrollY_div"),d=this._getEpsilon(),c=h.scrollHeight-h.clientHeight,p=Math.min(Math.round(h.scrollTop)+d,c);if(this.rowIndex<0||0==h.clientHeight||p==c)return void(this.options.wheelStop&&u.f.stopEvent(t));l.scrollTop=this.oneRowScrollHeight*(this._getScrollRowIndex(this.rowIndex)+n)}a.Z.isMobile()&&this.moveYScroll(0),this.hideTooltip(),u.f.stopEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleWheelHybrid=function(t){try{if(!0!==this._useHybridScroll())return;u.f.preventDefault(t);var e=0;if("wheel"===t.type)e=t.deltaY;else e=-100*u.f.getMouseWheelDelta(t);this._setHybridWheelDeltaY(e)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleTouchStartHybrid=function(t){try{this._hybridMobileStartX=t.touches[0].clientX,this._hybridMobileStartY=t.touches[0].clientY}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleTouchMoveHybrid=function(t){try{if(!0!==this._useHybridScroll())return;var e=this._hybridMobileStartX-t.touches[0].clientX,i=this._hybridMobileStartY-t.touches[0].clientY;Math.abs(e)>Math.abs(i)?this._setHybridWheelDeltaX(e):this._setHybridWheelDeltaY(i),u.f.preventDefault(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleColumnResize=function(t){try{if(2==t.button)return;var e,i,o,r,n,l,h=a.Z.getDataPrefix("colIndex"),d=a.Z.getDataPrefix("header_id");if("drag"!==this.resizeStatus){for(var c=this.event.getTargetIterator(t,this.render),p=null;c.next();){var g=c.getElement();if("TH"!=g.tagName&&"TD"!=g.tagName||(p=g),"NOBR"==g.tagName||"SPAN"==g.tagName&&g.className.indexOf("w2grid_span")>-1){p=null;break}}if(null!=p){e=u.f.getMouseX(t),i=WebSquare.style.getAbsoluteLeft(p),o=parseInt(p.getAttribute("colSpan")||1,10),r=parseInt(p.getAttribute(h),0),n=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;var m=WebSquare.style.getComputedStyle(document.body,"zoom");1==n&&m&&(n=parseFloat(m)),e/=n,l=i;var f=r,b=p.getAttribute(d);"_headerRowNumber"!=b&&"_headerRowStatus"!=b&&(f=this._getRealColIndex("head",b)+this.defaultColCnt),f=this._getMouseColumnIndex({colIndex:r,offsetX:e,offsetLeft:l,colSpan:o}),"col-resize"===this.resizeStatus&&!1===this.isColumnResizable(f)&&(this.resizeStatus="init")}}switch(this.resizeStatus){case"init":this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="";break;case"col-resize":this.getElementById(this.id+"_head_table").style.cursor="col-resize",this.getElementById(this.id+"_head_table").cursor="col-resize";break;case"drag":return this.resizeStatus="drag",this.handleResizeLine(t),void(a.Z.isMobile()&&u.f.stopEvent(t))}if(null!=this.columnMoveTarget)return;if(null==p)return void(this.resizeStatus="init");if(e-l<(v=.3*this.colWidthList[r]>10?10:parseInt(.3*this.colWidthList[r],10))&&0!=r){if("init"===this.resizeStatus||"col-resize"===this.resizeStatus)return void(this.isColumnResizable(r)&&(this.resizeStatus="col-resize"))}else this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus;if(b&&"_headerRowNumber"!=b&&"_headerRowStatus"!=b)for(var y=0;y<o;y++){if(1==this.options.columnMove){p.getAttribute(d);r=this._getRealColIndex("head",b)+this.defaultColCnt}
var v,w=parseInt(this.colGroup.bodyColList[r+y].style.width,10);if((l+=w)-(v=.3*w>10?10:parseInt(.3*w,10))<e&&e<l+v)return void("init"!==this.resizeStatus&&"col-resize"!==this.resizeStatus||this.isColumnResizable(r)&&(this.resizeStatus="col-resize"));this.resizeStatus="drag"!==this.resizeStatus?"init":this.resizeStatus}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.doColumnResize=function(t){try{if(2==t.button)return;if(a.Z.isMobile()&&this.handleColumnResize(t),!this.options.columnMove&&!this.options.groupbyZone&&"init"==this.resizeStatus||"drag"==this.resizeStatus)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_colIndex=null,this.resize_colId=null;e.next();)e.match(this.options.headerTdClass)&&(i=e.getElement());if(null==i)return;this.startResizeX=u.f.getScreenX(t);var o=a.Z.getDataPrefix("header_id"),r=a.Z.getDataPrefix("colindex"),n=a.Z.getDataPrefix("value"),l=i.getAttribute(o);if("col-resize"==this.resizeStatus){u.f.preventDefault(t),this.resizeStarted=!0,this.resizeStatus="drag";var h=u.f.getMouseX(t),d=WebSquare.style.getAbsoluteLeft(i),c=parseInt(i.getAttribute("colSpan")||1,10),p=this._getRealColIndex("head",l)+this.defaultColCnt;"_headerRowNumber"!=l&&"_headerRowStatus"!=l||(p=parseInt(i.getAttribute(r),10));var g=d;this.resizeColIndex=this._getMouseColumnIndex({colIndex:p,offsetX:h,offsetLeft:g,colSpan:c})}else if(this.options.columnMove&&(0===this.getHeaderRowIndex(l)||this.options.allColumnMove)){this.resizeStatus="drag";var m=null,f=this.htmlInfo.head.rowArr[0],b=!0;if(0!=parseInt(this.options.stopColumnMoveRow,10))for(var y=0;y<f.length;y++)if(f[y].id==l){b=!1;break}if(this.options.allColumnMove)for(y=1;y<this.htmlInfo.head.rowArr.length;y++)if(parseInt(this.options.stopColumnMoveRow,10)!=y)for(var v=0;v<this.htmlInfo.head.rowArr[y].length;v++)if(this.htmlInfo.head.rowArr[y][v].id==l){b=!1,m=l,l=this.htmlInfo.head.rowArr[0][v].id;break}if(b)return;this.resizeStauts="init","_headerRowNumber"!=l&&"_headerRowStatus"!=l&&(null!=m&&(this.realColumnMoveTarget=this.getHeaderIndex(m)),this.columnMoveTarget=this.getHeaderIndex(l),this.columnMoveTargetId=l,this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.Z.emptySelection())}else if(this.options.groupbyZone&&(this.resizeStatus="drag","_headerRowNumber"!=l&&"_headerRowStatus"!=l)){if(this.groupbyZoneStatus.clickedHeaderInfo={},this.groupbyZoneStatus.clickedHeaderInfo.index=this._getRealHeaderColIndex(l),this.groupbyZoneStatus.clickedHeaderInfo.value=i.getAttribute(n),this.groupbyZoneStatus.clickedHeaderInfo.headerID=l,null==this.groupbyStatus.sortIndexArr||null==this.groupbyStatus.sortOrderArr||this.options.groupbyFilterIcon)this.showGroupbyHeaderGhost(t,l);else{this.resizeStatus="init";var w=!1,S={};S.render=i,S.parentRender=this.render.getElementsByTagName("div")[0],S.headerID=i.getAttribute(o),S.headerIndex=this.getHeaderIndex(S.headerID);for(y=0;y<this.groupbyStatus.sortIndexArr.length;y++)if(S.headerIndex==this.groupbyStatus.sortIndexArr[y]){w=!0;break}w?this.groupbyFilterList?this.toggleGroupbyFilterList(S):this.createGroupbyFilterList(S):(this.hideGroupbyFilterList(),this.showGroupbyHeaderGhost(t,l))}this.getElementById(this.id+"_head_table").style.cursor="pointer",this.addClass("w2noselect"),a.Z.emptySelection()}this.handleResizeLine(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.endColumnResize=function(t){try{if(2==t.button)return;if("drag"!==this.resizeStatus&&(this.resizeStatus="init"),this.options.columnMove&&null!=this.columnMoveTarget){var e=this.event.getTargetIterator(t,this.render),i=null;if(this.event.isMe(t,this.render))for(;e.next();)e.match(this.options.headerTdClass)&&(e.match(this.options.headerTdClass+"_rowNumber")||e.match(this.options.headerTdClass+"_rowStatus")||(i=e.getElement()),e.stop());var o=this.resize_colId;if(null!=i){var r=a.Z.getDataPrefix("header_id");o=i.getAttribute(r)||this.resize_colId}
this.moveColumnByHeaderId(this.columnMoveTargetId,o),this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,this.realColumnMoveTarget=null,this.handleResizeLine(t),a.Z.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo){for(e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_groupbyZone")){e.getElement(),null==this.groupbyStatus.sortIndexArr&&(this.groupbyStatus.sortIndexArr=[]),null==this.groupbyStatus.sortOrderArr&&(this.groupbyStatus.sortOrderArr=[]);for(var n=0;n<this.groupbyStatus.sortIndexArr.length;n++)if(this.groupbyZoneStatus.clickedHeaderInfo.index==this.groupbyStatus.sortIndexArr[n])return this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<=this.groupbyStatus.sortIndexArr.length)return p.v.printLog("groupby max column count has been exceeded.["+this.id+"]"),this.groupbyZoneStatus.clickedHeaderInfo=null,void(this.resizeStarted=!1);this.groupbyStatus.sortIndexArr.push(this.groupbyZoneStatus.clickedHeaderInfo.index),this.groupbyStatus.sortOrderArr.push(1);var l={};if(l.sortIndex=this.groupbyStatus.sortIndexArr,l.sortOrder=this.groupbyStatus.sortOrderArr,null!=this.groupbyStatus.filter&&(l.filter=this.groupbyStatus.filter),!1===u.f.fireEvent(this,"ongroupby",l)){var h=this.getColCnt()+this.defaultColCnt,d=WebSquare.language.getMessage("Grid_cases")||"cases";l.rowNumHeader={colSpan:h,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' "+d+" ] ' ",align:"left"},l.footerVisible=!1,l.rowNumFooter={colSpan:h},this.groupby(l)}this.groupbyFilterList&&this.hideGroupbyFilterList();break}this.groupbyZoneStatus.clickedHeaderInfo=null,this.resizeStatus="init",this.handleResizeLine(t),a.Z.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}else if("drag"===this.resizeStatus){this.endResizeX=u.f.getScreenX(t);for(var c=this.resizeColIndex;1==this.hiddenList[c]&&!(--c<0););var g=this.colWidthList[c];if(c>=0&&this.isColumnResizable(c)){g=this.colWidthList[c];var m=this.getElementById(this.id+"_dataLayer").offsetWidth,f=g+this.endResizeX-this.startResizeX,b=0;if(this.options.fixedColumn>0){var y=this.getFixedColumnLastIndex();if(y>=c){for(n=0;n<y;n++)this.hiddenList[n]||(b+=n==c?f:this.colWidthList[n]);var v=30;null==this.colWidthList[y]&&(v=1),b>m-v&&(f=f-(b-m)-v-1)}}var w=this.cellInfoHash[this.getColumnID(this.columnOrder[c-this.defaultColCnt])];(f=w&&f<w.options.minWidth?w.options.minWidth:f)&&g&&this.resizeObj.width&&(this.resizeObj.width=this.resizeObj.width+f-g),0!=Math.abs(g-f)&&(this.setColumnWidth(c,f,!0),u.f.fireEvent(this,"onaftercolumnresize",c-this.defaultColCnt,g,f))}this.resizeStatus="init",this.resizeStarted=!1,this.columnMoveTarget=null,this.realColumnMoveTarget=null,this.handleResizeLine(t),a.Z.emptySelection(),!1===this.options.noSelect&&!1===this.options.preventCopy&&this.removeClass("w2noselect")}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");if(this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.options.columnMove&&null!=this.columnMoveTarget){for(var i=this.event.getTargetIterator(t,this.render),o=null;i.next();)i.match(this.options.headerTdClass)&&(o=i.getElement());if(null!=o){this.columnBlock||this.createBlockedHeaderInfo();var r=this.columnMoveTargetId,n=this.getHeaderColIndex(r);n=this.columnBlock.hash[n-this.defaultColCnt],
r=this.getHeaderColID(n+this.defaultColCnt);var l=a.Z.getDataPrefix("header_id"),h=o.getAttribute(l),d=this.getHeaderColIndex(h);d=this.columnBlock.hash[d-this.defaultColCnt],h=this.getHeaderColID(d+this.defaultColCnt);var c=this.getHeaderIndex(r),p=this.getHeaderIndex(h);if(c<p)for(var g=this.columnBlock.info[d],m=g.length-1;m>=0;m--){var f=this.getHeaderColID(g[m]+this.defaultColCnt,{firstRow:!0});if(f){h=f,p=this.getHeaderIndex(h);break}}var b=this._getRealColIndex("head",h),y=this.htmlInfo.head.rowArr[0],v=!0;for(m=0;m<y.length;m++)if(y[m].id==h){v=!1;break}if(this.options.allColumnMove)for(m=1;m<this.htmlInfo.head.rowArr.length;m++)for(var w=0;w<this.htmlInfo.head.rowArr[m].length;w++)if(this.htmlInfo.head.rowArr[m][w].id==h){v=!1,h=this.htmlInfo.head.rowArr[0][w].id,p=this.getHeaderIndex(h),b=this.colMoveHeaderIndexMap[h];break}if(v)return;if("_headerRowNumber"==h||"_headerRowStatus"==h||c==p)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else{if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>c+this.defaultColCnt||this.getFixedColumnLastIndex()>p+this.defaultColCnt))return e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",void(!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor=""));this.resize_colIndex=p,this.resize_colId=h;var S=null;for(m=0;m<this.htmlInfo.body.rowArr.length;m++){for(w=0;w<this.htmlInfo.body.rowArr[m].length;w++)if(this.htmlInfo.body.rowArr[m][w]["@col"]==b){S=this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[m][w].col_id];break}if(null!==S)break}var _=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),C=WebSquare.style.getAbsoluteTop(this.render),x=WebSquare.style.getAbsoluteLeft(this.render),I=_[p+this.defaultColCnt],T=I.offsetLeft,k=I.offsetWidth,L=T+(c<p?k:0);null!=this.realColumnMoveTarget?this.resize_ghost.innerHTML=_[this.realColumnMoveTarget+this.defaultColCnt].innerHTML:this.resize_ghost.innerHTML=_[this.columnMoveTarget+this.defaultColCnt].innerHTML,this.resize_ghost.style.display="block",this.resize_ghost.style.top=C+_[this.columnMoveTarget].offsetHeight+5+"px",this.resize_ghost.style.left=x+L+5+"px",!this.resize_ghost.firstChild||!this.resize_ghost.firstChild.tagName||"NOBR"===this.resize_ghost.firstChild.tagName.toUpperCase()||"SPAN"==this.resize_ghost.firstChild.tagName.toUpperCase()&&this.resize_ghost.firstChild.className.indexOf("w2grid_span")>-1?this.resize_ghost.style.width="auto":this.resize_ghost.style.width=k+"px",this.resize_arrow.style.display="block",this.resize_arrow.style.top=C-this.resize_arrow.offsetHeight+"px",this.resize_arrow.style.left=x+L-parseInt(this.resize_arrow.offsetWidth/2,10)+1+"px",e.style.display="block",e.style.zIndex=9999,e.style.border="1px solid #3a3f44",e.style.top=0,e.style.left=L+"px",e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px"),a.Z.emptySelection()}}}else if(null!=this.groupbyZoneStatus.clickedHeaderInfo)e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none";else if("drag"==this.resizeStatus&&this.resizeStarted&&this.isColumnResizable(this.resizeColIndex)){e.style.cssText="position:absolute;top:10px; bottom:0px;border:0px dashed #222222; border-left-width:1px; cursor:col-resize;",e.style.display="block",e.style.zIndex=100,e.style.top=0,e.style.height=this.render.offsetHeight+"px",this.getElementById(this.id+"foot_table")&&(e.style.height=this.render.offsetHeight-this.getElementById(this.id+"_foot_table").offsetHeight-this.getElementById(this.id+"_scrollX_div").offsetHeight+"px")
;var A=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,D=WebSquare.style.getComputedStyle(document.body,"zoom");1==A&&D&&(A=parseFloat(D)),e.style.left=(u.f.getMouseX(t)-WebSquare.style.getAbsoluteLeft(this.render)*A)/A+"px",this.resize_ghost.style.display="none"}else e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none",!1===this.isColumnResizable(this.resizeColIndex)&&(this.getElementById(this.id+"_head_table").style.cursor="",this.getElementById(this.id+"_head_table").cursor="")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return void(this.rowResizeTarget&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""));if(this.handleRowResizeLine(t),null!=this.rowMoveTarget)return;for(var e=this.event.getTargetIterator(t,this.render),i=null;e.next();){var o=e.getElement();if("TD"==o.tagName&&(i=o),"TH"==o.tagName){i=null;break}}if(null==i)return;i.style.cursor="",i.cursor="";var r=u.f.getMouseY(t),n=WebSquare.style.getAbsoluteTop(i),l=a.Z.getDataPrefix("tdIndex"),h=parseInt(i.getAttribute(l),0),d=parseInt(h/this.realRowDataLength)+this.rowIndex;if(r-n<10&&0!=d)return i.style.cursor="row-resize",i.cursor="row-resize",this.rowResizeTarget&&this.rowResizeTarget!=i&&(this.rowResizeTarget.style.cursor="",this.rowResizeTarget.cursor=""),void(this.rowResizeTarget=i)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.doRowResize=function(t){try{if("started"==WebSquare.dragdrop.gDragManager.status)return;var e=this.event.getTargetIterator(t,this.render),i=null;for(this.resize_rowIndex=null;e.next();)e.match(this.options.bodyTdClass)&&(i=e.getElement());if(null==i)return;if(this.startResizeY=u.f.getScreenY(t),"row-resize"==i.cursor){u.f.preventDefault(t),this.rowResizeStarted=!0,this.rowResizeTarget=i;var o=a.Z.getDataPrefix("tdIndex"),r=parseInt(i.getAttribute(o),0),n=parseInt(r/this.realRowDataLength)+this.rowIndex;this.resizeRowIndex=n-1}this.handleRowResizeLine(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.endRowResize=function(t){try{if(this.rowResizeStarted){this.endResizeY=u.f.getScreenY(t);var e=this.resizeRowIndex||0;if(e>=0){var i=this.rowResizeTarget.offsetHeight+this.endResizeY-this.startResizeY;i=i<20?20:i,this.rowStyleArr[e]="rowResizeStyle_"+e,this.rowStyleValueObj[this.rowStyleArr[e]]||(this.rowStyleValueObj[this.rowStyleArr[e]]={}),this.rowStyleValueObj[this.rowStyleArr[e]].style="height:"+i+"px;",this.applyRowStyleOptions(e),this.drawData(this.rowIndex,e+1,"async")}if(this.rowResizeStarted=!1,this.rowResized=!0,this.rowMoveTarget=null,this.handleRowResizeLine(t),window.getSelection)window.getSelection().removeAllRanges();else if(document.selection)try{document.selection.empty()}catch(t){s.Y.printStackTrace(t,null,this)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleRowResizeLine=function(t){try{var e=this.getElementById(this.id+"_resize_line");this.resize_ghost||(this.resize_ghost=document.createElement("div"),this.resize_ghost.className="w2grid_columnMove_ghost",this.resize_ghost.style.display="none",document.body.appendChild(this.resize_ghost),this.resize_arrow=document.createElement("div"),this.resize_arrow.className="w2grid_columnMove_arrow",this.resize_arrow.style.display="none",document.body.appendChild(this.resize_arrow)),this.rowResizeStarted?(e.style.cssText="position:absolute;left:10px;right:0px;border:0px dashed #222222; border-top-width:1px;",e.style.display="block",e.style.zIndex=100,e.style.top=u.f.getMouseY(t)-WebSquare.style.getAbsoluteTop(this.render)+"px",e.style.width=this.render.offsetWidth+"px",e.style.left=0,this.resize_ghost.style.display="none"):(e.style.display="none",this.resize_ghost.style.display="none",this.resize_arrow.style.display="none")}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setColumnWidth=function(t,e){try{if(this.autoFitColWidthList=null,
this.hiddenList[t])this.colWidthList[t]=e;else{var i=isNaN(this.colWidthList[t])?0:this.colWidthList[t];if(this.colWidthList[t]=e,this.gridWidth+=e-i,this.options.senseReader){var o=document.activeElement;if(o&&o.className.match("w2grid_embedded_input")){var r=this.getLastFocusedCell();r&&r.focusedTd&&o.blur()}}this.arrangeOverflowXScroll(),this.setOverflowX(),this.handleScrollX();var a=t-this.defaultColCnt;if(a>=0){var n=this.getCellInfo(a);if("textarea"==n.options.inputType)this.drawColumnData(a);else if(("text"==n.options.inputType||"secret"==n.options.inputType||"calendar"==n.options.inputType)&&n.options.embeddedInput&&!this.groupbyStatus.grouped)for(var l=this.struct.body.rowArr,h=0,d=0;d<l.length;d++){for(var c=0,u=0,p=0;p<l[d].length;p++){var g=l[d][p].id;if((c+=(n=this.getCellInfo(g)).options.colSpan-0)-1==a){u=this.getColumnIndex(g),h+=l[d].length;break}if(c-1>a){u=h+a;break}}this.embeddedWidthObj[u]&&(this.embeddedWidthObj[u].isChanged=!0),this.drawColumnData(u)}}this.handlerResize_drawInitializer()}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setColumnVisible=function(t,e){try{e=a.Z.getBoolean(e);var i=this.getCellInfo(t),o=(t=this.getColumnIndex(t),this.getColumnVisible(t)),n=a.Z.getDataPrefix("colindex");if(null==t)return;var l=this._getRealColIndex("body",i.options.col_id)+this.defaultColCnt,h=this._getRealColIndex("head",this.bodyToHeaderRelation[i.options.col_id])+this.defaultColCnt;if(this.hiddenList[l]!=e)return;for(var d=0;d<this.getColumnCount();d++){var c=this.getCellInfo(d);"textarea"==c.options.inputType&&"all"==c.options.displayType&&(this.setScrollTop(0),this.setScrollLeft(0))}if(this.options.fixedColumn>0&&e&&this.options.fixedColumn>t){var u=0,p=this.getFixedColumnLastIndex();for(d=0;d<p;d++)this.hiddenList[d]&&d-this.defaultColCnt!=t||(u+=this.colWidthList[d]);if(u>this.getElementById(this.id+"_dataLayer").offsetWidth-30)return void WebSquare.logger.printLog(this.id+" setColumnVisible error : not enough space to show the column.  ")}for(d=0;d<i.options.colSpan;d++)this.hiddenList[l+d]=!e;this.gridWidth=0;for(d=0;d<this.colWidthList.length;d++)this.hiddenList[d]||(this.gridWidth+=this.colWidthList[d]);if(0===this.render.offsetHeight&&0===this.render.offsetWidth&&(this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex})),o!==e){var g,m=this.head_table.querySelector("th["+n+'="'+h+'"]');if(m&&(g=this.options.accessibility?m:m.querySelector("div.w2grid_head_sort_div_main_outer")),g){var f=this.options.accessibility?m.querySelector("button.w2grid_head_sort_div_main_btn_accessibility"):g.querySelector("button.w2grid_head_sort_div_main_btn");f&&(1==e?f.removeAttribute("tabindex"):f.setAttribute("tabindex","-1"));var b=g.querySelector('input[type="checkbox"]');b&&(1==e?b.removeAttribute("tabindex"):b.setAttribute("tabindex","-1"))}var y=this.colIndexInfo.body.colInfo.colIndexArr;for(d=0;d<y.length;d++)if(y[d]==l)for(var v=0;v<=this.lastIndex;v++){var w,S,_=v+this.rowIndex,C=d-this.defaultColCnt,x=(this._getTrIndex(_),this._getTdElem(_,C));"number"==typeof C?(C,w=this.cellIdList[C]):(this.bodyIdColIndexMap[C],w=C),"custom"==(i=this.cellInfoHash[w]||{options:{}}).options.inputType&&(S=i.cellManagerHashByRowIndex[this.dataList.getRealRowIndex(this.rowIndex)]),("button"==i.options.inputType&&x.firstChild&&"BUTTON"==x.firstChild.tagName||S&&"button"==S.options.inputType)&&1==this.options.keyMoveEditMode&&(1==e?x.firstChild.removeAttribute("tabindex"):x.firstChild.setAttribute("tabindex","-1"))}}if(""!=this.options.hiddenClass||""!=i.options.hiddenClass){this.drawData(this.rowIndex,0);var I=this.getColumnID(t),T=this.options.hiddenClass;""!=i.options.hiddenClass&&(T=i.options.hiddenClass);var k=null!=this.bodyToHeaderRelation[I]?this.getHeaderLayer(this.bodyToHeaderRelation[I]):null;e?null!=k&&this.hasClass(k,T)&&this.removeClass(k,T):null==k||this.hasClass(k,T)||this.addClass(k,T)}
if(this.options.lazyDrawHiddenColumn&&e&&this.initVisibilityArr&&!this.initVisibilityArr[l]){for(y=this.colIndexInfo.body.colInfo.colIndexArr,d=0;d<y.length;d++)if(y[d]==l)for(v=0;v<=this.lastIndex;v++)this.drawCellData(v,v+this.rowIndex,d-this.defaultColCnt),this.applyCellStyleOptions(v+this.rowIndex,d-this.defaultColCnt);this.initVisibilityArr[l]=!0}"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&this.setAdaptiveColumnVisible(l,e),r.I.setTimer((function(){try{this.arrangeOverflowXScroll(),this.options.groupbyZone&&this.options.groupbyFilterBox?this.handlerResize_drawInitializer():this.setOverflowX(),this.handleScrollX(),(this.options.autoFit||this.autofitColumn)&&this._setAutoFit(),e&&this._setRedrawTextAreaColumn()}catch(t){s.Y.printStackTrace(t,null,this)}}),{key:this.id+"_setColumnVisible",caller:this})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setRowVisible=function(t,e,i){try{if((t=parseInt(t,10))<0||t>=this.getTotalRow()||isNaN(t))return void p.v.printLog(this.id+" setRowVisible error : invalid rowIndex "+t);var o=a.Z.getBoolean(e);if(this.hiddenRowObj.row[t]===!o||null==this.hiddenRowObj.row[t]&&!0===o)return;this.hiddenRowObj.row[t]=!o,this.hiddenRowObj.init=!0;var r=this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)});if(!1===o?(this.hiddenRowObj.length++,"all"===this.options.visibleRowNum||r||this.hiddenRowObj.extraRow<this.hiddenRowObj.length&&this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.length-1)):(delete this.hiddenRowObj.row[t],this.hiddenRowObj.length--),r)return;a.Z.setTimeout((function(){this.lastTopRowIndex=null,this.initHeightCompleted=!1;var t=this.getDataLength();if(t-this.hiddenRowObj.length<=this.lastIndex+1&&0!==this.rowIndex)return this.bScrollY=0,this.setScrollTop(0),void this.drawData(0);var e=t-this._getVisibleLastIndex(this.lastIndex+1);if(e<this.rowIndex){var i=this.getLastFocusedCell();return this.removeFocusedCell(),this.rowIndex=e,e<this.bScrollTop&&(this.bScrollTop=e),this.setScrollYHeight({restRowCnt:this._getScrollRowIndex(e),skipScrollEnd:!0}),this.drawData(e),void(i.focusedRowIndex>-1&&null!=i.focusedColIndex&&!0===this.getRowVisible(i.focusedRowIndex)&&this.setFocusedCell(i.focusedRowIndex,i.focusedColIndex))}this._applyRowVisible({applyStyle:!0,refreshColumn:!0}),this.setScrollYHeight(),this.dynamicMergeHTML(),this._setRedrawTextAreaColumn(!0)}),{key:this.id+"_setRowVisible",caller:this,delay:100})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setRowNumVisible=function(t){this.options.rowNumVisible&&0===Object.keys(this.groupbyStatus).length&&this._setRowNumStatusVisible("rowNum",t)},m.prototype.setRowStatusVisible=function(t){this.options.rowStatusVisible&&0===Object.keys(this.groupbyStatus).length&&this._setRowNumStatusVisible("rowStatus",t)},m.prototype._setRowNumStatusVisible=function(t,e){try{var i,o;if(null==t||"rowNum"!==t&&"rowStatus"!==t)return;this.options.rowNumVisible&&this.options.rowStatusVisible?(i="rowNum"===t?0:1,o="rowNum"===t?0:1):(this.options.rowNumVisible&&!this.options.rowStatusVisible||!this.options.rowNumVisible&&this.options.rowStatusVisible)&&(i=0,o=0);e=a.Z.getBoolean(e);var n=this.getCellInfo(i);if(this.hiddenList[o]!=e)return;for(var l=0;l<this.getColumnCount();l++){var h=this.getCellInfo(l);"textarea"==h.options.inputType&&"all"==h.options.displayType&&(this.setScrollTop(0),this.setScrollLeft(0))}if(this.options.fixedColumn>0&&e&&this.options.fixedColumn>i){var d=0,c=this.getFixedColumnLastIndex();for(l=0;l<c;l++)this.hiddenList[l]&&l-this.defaultColCnt!=i||(d+=this.colWidthList[l]);if(d>this.getElementById(this.id+"_dataLayer").offsetWidth-30)return void WebSquare.logger.printLog(this.id+" setColumnVisible error : not enough space to show the column.  ")}for(l=0;l<n.options.colSpan;l++)this.hiddenList[o+l]=!e;this.gridWidth=0;for(l=0;l<this.colWidthList.length;l++)this.hiddenList[l]||(this.gridWidth+=this.colWidthList[l])
;if(0===this.render.offsetHeight&&0===this.render.offsetWidth&&(this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex})),""!=this.options.hiddenClass||""!=n.options.hiddenClass){this.drawData(this.rowIndex,0);var u=this.getColumnID(i),p=this.options.hiddenClass;""!=n.options.hiddenClass&&(p=n.options.hiddenClass);var g=null!=this.bodyToHeaderRelation[u]?this.getHeaderLayer(this.bodyToHeaderRelation[u]):null;e?null!=g&&this.hasClass(g,p)&&this.removeClass(g,p):null==g||this.hasClass(g,p)||this.addClass(g,p)}if(this.options.lazyDrawHiddenColumn&&e&&this.initVisibilityArr&&!this.initVisibilityArr[o]){var m=this.colIndexInfo.body.colInfo.colIndexArr;for(l=0;l<m.length;l++)if(m[l]==o)for(var f=0;f<=this.lastIndex;f++)this.drawCellData(f,f+this.rowIndex,l-this.defaultColCnt),this.applyCellStyleOptions(f+this.rowIndex,l-this.defaultColCnt);this.initVisibilityArr[o]=!0}"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&this.setAdaptiveColumnVisible(o,e),r.I.setTimer((function(){try{this.arrangeOverflowXScroll(),this.options.groupbyZone&&this.options.groupbyFilterBox?this.handlerResize_drawInitializer():this.setOverflowX(),this.handleScrollX(),(this.options.autoFit||this.autofitColumn)&&this._setAutoFit(),e&&this._setRedrawTextAreaColumn()}catch(t){s.Y.printStackTrace(t,null,this)}}),{key:this.id+"_setRowNumStatusVisible",caller:this})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.clearRowVisible=function(t){try{var e=this.hiddenRowObj.extraRow;if(this.hiddenRowObj.init&&(this.lastTopRowIndex=null),this.hiddenRowObj={length:0,extraRow:e,row:{},init:!1},this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),t&&!0===t.noDraw)return;0!==this.rowIndex?(this.bScrollY=0,this.setScrollTop(0),this.drawData(0),this.setScrollYHeight()):(this.setScrollYHeight(),this.dynamicMergeHTML(),this.applyStyleOptions(this.lastIndex))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&!0!==this.hiddenRowObj.row[t]}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getRowVisible=function(t){try{return!(null==t||t<0||t>this.getTotalRow())&&(!(this.hiddenRowObj.length>0)||this.getRowVisible(this.dataList.getRealRowIndex(t)))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHiddenRowCount=function(t){try{var e=this.hiddenRowObj.length;if(this.isDrillDown&&isNaN(t)&&(t=0),this.hiddenRowObj.length>0&&(t||this.isDrillDown)){e=0;for(var i=this.getDataLength(),o=t;o<i;o++)this._getRowVisible(o)||e++}return e}catch(t){return s.Y.printStackTrace(t,null,this),0}},m.prototype._getVisibleRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;var e=this.getDataLength();if(t>=e)return e;for(var i=t,o=0;i>=0&&o<e;)this._getRowVisible(o)&&i--,i>=0&&o++;return o}catch(e){return s.Y.printStackTrace(e,null,this),t}},m.prototype._getVisibleTrRowIndex=function(t,e){try{if(this._getHiddenRowCount()<=0)return t;for(var i=this.getDataLength(),o=0,r=this.drawedRowLength+this.hiddenRowObj.extraRow-1,a=t,n=e;a>=0&&n<i&&r>o;n++)this._getRowVisible(n)&&a--,a>=0&&o++;return o}catch(e){return s.Y.printStackTrace(e,null,this),t}},m.prototype._getScrollRowIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;if(t<=0)return 0;for(var e=0,i=this._getScrollMaxRowIndex(),o=t-1;o>=0&&i>e;o--)this._getRowVisible(o)&&e++;return e}catch(e){return s.Y.printStackTrace(e,null,this),t}},m.prototype._getScrollMaxRowIndex=function(){try{var t=parseInt(document.getElementById(this.id+"_size_y").style.height,10)-document.getElementById(this.id+"_scrollY_div").offsetHeight;return Math.floor((t+this._getEpsilon())/this.oneRowScrollHeight)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getEpsilon=function(){try{
var t=Math.min(2,Math.round(this.oneRowScrollHeight/10)),e=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;return e<1&&(t=Math.min(Math.round(t/e),Math.round(this.oneRowScrollHeight/2.4))),t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getVisibleLastIndex=function(t){try{if(this._getHiddenRowCount()<=0)return t;for(var e=t,i=this.getDataLength(),o=0,r=i-1;r>=0&&e>0;r--)this._getRowVisible(r)&&e--,o++;return o}catch(e){return s.Y.printStackTrace(e,null,this),t}},m.prototype._getTrIndex=function(t){try{var e=t;return this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>t||this.options.lastFixedRow>0&&t>this.lastIndex-this.options.lastFixedRow||(e-=this.rowIndex)),e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getTdElem=function(t,e){try{for(var i=0,o=this.rowIndex;o<t&&this.hiddenRowObj.length>0;o++)this._getRowVisible(o)||i++;var r=this._getTrIndex(t);if(r<0||r-i>=this.drawedRowLength)return;return this.data_td_list[r*this.oneRowDataLength+e]}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._addHiddenRow=function(t){try{var e=[];0==this.drawedRowLength&&this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(-1)));for(var i=[],o=0;o<this.oneRowLength;o++){var r=this.tempTr.rows[o].cloneNode(!0);i[o]=r,e.push(r)}this.addBodyRow(t,i),this.hasSubtotal&&(e=e.concat(this.createSubtotalRows(t)));var a=this.getElementById(this.id+"_body_table"),n=this.getElementById(this.id+"_body_tbody");0==this.drawedRowLength?a.style.borderWidth="0px":a.style.borderWidth="";for(o=0;o<e.length;o++)n.appendChild(e[o]);this._setRowDisplay(t,"none"),this.hiddenRowObj.extraRow++}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._applyRowVisible=function(t){try{if(void 0!==t&&null!=t||(t={}),this.delayedDraw({rowIndex:Math.max(this.rowIndex,0)}))return;var e=0,i=!0,o=this._getLastSubtotalCount();t.subtotalDraw&&-1==this.options.initFixedHeightByRowNum&&(o=0);var r=this.getDataLength()+o,a=this.lastIndex;a=""===this.options.visibleRowNum?Math.min(this.drawedRowLength,r-this.rowIndex)-1:"all"===this.options.visibleRowNum?t.subtotalDraw?Math.min(this.drawedRowLength,this.getDataLength())-1:this.drawedRowLength:Math.min(parseInt(this.options.visibleRowNum,10),r)-1;var n=r-this._getVisibleLastIndex(a+1),l=this.rowIndex;this.subtotalHidden();for(var h=!1,d={skipSubtotal:!0,refreshColumn:t.refreshColumn},c=0,u=a,p=0;p<=a;p++){var g=p+this.rowIndex;if(!0===t.drawRow&&(this.options.fixedRow>0&&this.options.fixedRow>p?(g=p,this.fastDrawRowData(p,g,d)):this.options.lastFixedRow>0&&p>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(p,g,d)),this._getRowVisible(p+this.rowIndex)?(this._setRowDisplay(p,""),i=!1,h=!0):(this._setRowDisplay(p,"none"),e++,i&&l<n&&l++),this.hasSubtotal&&h)this.options.initFixedHeightByRowNum>-1&&(b={maxCount:a-p+e}),(y=this.drawSubtotalRow(p+1,g,b))>0&&(h=!1,this.options.initFixedHeightByRowNum>-1&&(p>=(a-=y)&&(e-=p-a),c+=y));u=p}var m=this.hiddenRowObj.extraRow+c,f=0;for(p=0;p<m&&a>=0;p++){var b,y,v=p+u+1;g=v+this.rowIndex;if(this._getRowVisible(g)&&e>0&&g<r?(this._setRowDisplay(v,""),this.fastDrawRowData(v,g,d),e--,i=!1,h=!0):(this._setRowDisplay(v,"none"),i&&l<n&&l++,e<=0&&(h=l>=n),!0===t.drawRow&&this.fastDrawRowData(v,g,d)),this.hasSubtotal&&v+this.rowIndex<r&&h)this.options.initFixedHeightByRowNum>-1&&(b={maxCount:e}),(y=this.drawSubtotalRow(v+1,g,b))>0&&(h=!1,this.options.initFixedHeightByRowNum>-1&&(f+=y,e-=y))}l!==this.rowIndex&&!0!==t.noDraw?this.drawData(l):""===this.options.visibleRowNum?(!0===t.applyStyle&&this.applyStyleOptions(a),this.cutGridBottom()):this.lastIndex=a-f}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setCellVisible=function(t,e,i){try{if(!0!==i&&!1!==i)return;e=this.getColumnIndex(e);var o,r=!0===this.hiddenCellObj[t+"_"+e],n=!1;if(!0===i&&r?(this.hiddenCellObj[t+"_"+e]=!1,o=!0,this.hiddenCellObj.length--):!1!==i||r||(this.hiddenCellObj[t+"_"+e]=!0,o=!0,this.hiddenCellObj.length++,
this.hiddenCellObj.init||(n=!0),this.hiddenCellObj.init=!0),!0===o){var l=this._getTdElem(t,e);null!=l&&(l.style.display=!0===i?"":"none")}n&&(""!==this.options.visibleRowNum&&!0!==this._isBrowserScroll()&&"all"!==this.options.visibleRowNum&&(this.options.visibleRowNum=""),this.setDataTable()),!0!==this._isBrowserScroll()&&"all"!==this.options.visibleRowNum&&a.Z.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:100})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setCellVisibleRefresh=function(){try{if(!0===this._isBrowserScroll()||"all"===this.options.visibleRowNum)return;this.lastTopRowIndex=null;var t=this.rowIndex,e=Math.max(this.getDataLength()-this.drawedRowLength,0);this.rowIndex=e,this.subtotalHidden();var i=this.completiveDrawData(0,{extraRowByCellHidden:!0});if(this.lastTopRowIndex=e+i,0===e&&0===i){0!==(o=this.getElementById(this.id+"_size_y")).offsetHeight&&(o.style.height="0px",this.handlerResize_drawInitializer())}else{var o=this.getElementById(this.id+"_size_y"),r=this.getElementById(this.id+"_scrollY_div"),a=o.offsetHeight;if(a<1e6&&(a=parseInt(o.style.height,10)),o.style.height=r.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",t=Math.min(t,this.lastTopRowIndex),this.hasSubtotal&&this.struct.subtotalArr&&this.struct.subtotalArr.length>0)this.lastTopRowIndex+=this.struct.subtotalArr.length,this.drawData(t);else{var n=this.oneRowScrollHeight*t;t!==this.rowIndex?this.drawData(t):r.scrollTop!==n&&(this.bScrollY=n,r.scrollTop=n),this.handlerResize_drawInitializer()}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getCellVisible=function(t,e){try{e=this.getColumnIndex(e);return!0!==this.hiddenCellObj[t+"_"+e]}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.clearCellVisible=function(t){try{for(var e in void 0!==t&&null!=t||(t={}),this.hiddenCellObj)if(!0===this.hiddenCellObj[e]){var i=e.split("_"),o=Number(i[0]),r=Number(i[1]),a=this._getTdElem(o,r);null!=a&&(a.style.display="")}this.hiddenCellObj={length:0,init:!1},!0!==t.skipDraw&&this.cutGridBottom(this.lastIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._moveCellVisible=function(t,e,i){try{if(!(this.hiddenCellObj.length>0))return;void 0!==i&&null!=i||(i={});var r=[];t.sort((function(t,e){return t-e}));for(var a={},n=0;n<t.length;n++)a[t[n]]=!0;var l=this.getRowCount();for(n=0;n<l;n++)!0===i.remove&&!0===a[n]||r.push(n);!0===i.insert&&(r=r.slice(0,e).concat(t).concat(r.slice(e)));var h={};for(n=0;n<r.length;n++)r[n]!==n&&(h[r[n]]=n);var d=o.q.extend({},this.hiddenCellObj),c=this.getColumnCount();for(var u in h){var p=Number(u),g=h[p];if(p!==g)for(var m=0;m<c;m++)this.setCellVisible(g,m,!d[p+"_"+m])}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._refreshRowVisible=function(t){try{this._applyRowVisible(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setScrollLeft=function(t){t=parseInt(t,10);try{this.getElementById(this.id+"_scrollX_right").scrollLeft=t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setScrollTop=function(t){t=parseInt(t,10);try{this.scrollEvent=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getScrollLeft=function(){try{return this.getElementById(this.id+"_scrollX_right").scrollLeft}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getScrollTop=function(){try{return this.getElementById(this.id+"_scrollY_div").scrollTop}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setGridStyle=function(t){try{if(!t)return;if("string"==typeof t){t=t.match(/"\s*N\s*"\s*:\s*"\s*w2:gridView\s*"/)?JSON.parse(t):WebSquare.xml.parse(t)}t instanceof WebSquare.Elem&&(t=t._element),!0===WebSquare.convertPageXML&&r.I.isXML(t)&&(t=WebSquare.xmljs.xml2json(t).E[0]),!0===r.I.isXML(t)&&9==t.nodeType&&(t=t.documentElement);var e=this.getParent()
;e&&e.parentControl&&("wframe"==e.parentControl.options.pluginName||"pageFrame"==e.parentControl.options.pluginName)&&(e=e.parentControl);var i,o=this.scope_obj,a=this.parentFrame;this.options.groupbyFilterBox&&this.options.customFilterBox&&this.groupbyFilterBox_history.length>0&&(i=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo),this.remove(),this.__removed_object__=!0;var n=WebSquare.controlFactory.create(null,null,t,o,a);n.options&&isNaN(n.options.fixedRightColumn)&&(n.options.fixedRightColumn=0),n.writeTo(e),n.activate(),n.onComplete(),n.options.groupbyFilterBox&&n.options.customFilterBox&&(n.refreshGroupbyFilterBox(),n.applyFilterHistory(),i?(n.customFilterList.customFilterListFilterInfo=JSON.parse(i,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:"object"===(0,l.A)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})),n.groupbyFilterBox_history[n.groupbyFilterBox_select.getSelectedIndex()].customFilterListFilterInfo=i):n.customFilterList&&(n.customFilterList.customFilterListFilterInfo={}));var h=n.options._sortStatus;if(h){for(var d=JSON.parse(h),c=[],u=[],p=[],g=0;g<d.length;g++){var m=d[g];c.push(m.colID),u.push(m.sortOrder),p.push(m.dataType)}n.dataList.setFilter({type:"sort",sortIndex:c.join(" "),sortOrder:u.join(" "),dataType:p.join(" "),focuseMode:n.options.filterFocusMode,ignoreEmptyStringOnSort:n.options.ignoreEmptyStringOnSort,setEmptyStringFirstOnSort:n.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:n.options.setEmptyStringSortableOnSort}),n.drawHeaderSortImages()}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getGridStyle=function(){try{return"json"===this.element._elementType?WebSquare.jsonUtil.serialize(this.element._element):WebSquare.xml.serialize(this.element._element)}catch(t){s.Y.printStackTrace(t)}},m.prototype.getCurrentGridStyle=function(){try{var t=this.element.cloneNode(!0);t.setAttribute("columnOrder",this.getColumnOrder()),t.setAttribute("fixedColumn",this.options.fixedColumn),t.setAttribute("fixedRow",this.options.fixedRow),t.setAttribute("fixedRightColumn",this.options.fixedRightColumn);for(var e=t.getChildNodes(),i=0;i<e.length;i++){if("w2:header"==e[i].getTagName())for(var o=e[i].getChildNodes(),r={},n=0,l=this.htmlInfo.head.rowAttrArr.length,h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){for(var d=o[h].getChildNodes(),c=[],u=0;u<d.length;u++)"w2:column"==d[u].getTagName()&&c.push(d[u]);for(var p=0,g=0,m={},f=0;f<c.length;f++){for(;null!=r[i]&&null!=r[i][f+p+g];)g+=r[i][f+p+g];m[f+p-0+g]=f;var b=parseInt(c[f].getAttribute("colSpan"),10)||1;if((x=parseInt(c[f].getAttribute("rowSpan"),10)||1)>1)for(var y=n;y<n+x-1;y++)null==r[y+1]&&(r[y+1]={}),null==r[y+1][f-0+p+g]?r[y+1][f-0+p+g]=b:r[y+1][f-0+p+g]+=b;b>1&&(p+=b-1)}if(n===l-1){var v=0,w=0;for(f=0;f<c.length;f++){for(;null!=r[n]&&null!=r[n][this.columnOrder[f+w+v]];)w+=r[n][this.columnOrder[f+w+v]];null==(C=m[[this.columnOrder[f-0+v+w]]])&&(C=0);var S=c[C];(b=parseInt(S.getAttribute("colSpan"),10))>1&&(v+=b-1),S.setAttribute("width",this.colWidthList[f+this.defaultColCnt+v+w]),this.hiddenList[f+this.defaultColCnt+v+w]?S.setAttribute("hidden","true"):S.setAttribute("hidden","false")}}else if(0===n){var _=0;for(u=0;u<c.length;u++){var C,x=parseInt(c[u].getAttribute("rowSpan"),10)||1;null==(C=m[[this.columnOrder[u-0+_]]])&&(C=0);S=c[C];(b=parseInt(S.getAttribute("colSpan"),10))>1&&(_+=b-1),x===l&&(S.setAttribute("width",this.colWidthList[u+this.defaultColCnt+_]),this.hiddenList[u+this.defaultColCnt+_]?S.setAttribute("hidden","true"):S.setAttribute("hidden","false"))}}n++}if("w2:gBody"==e[i].getTagName())for(o=e[i].getChildNodes(),h=0;h<o.length;h++)if("w2:row"===o[h].getTagName()){var I=o[h].getChildNodes(),T=[];for(u=0;u<I.length;u++)"w2:column"==I[u].getTagName()&&T.push(I[u]);for(p=0,m={},f=0;f<T.length;f++){m[f+p]=f,
(b=parseInt(T[f].getAttribute("colSpan"),10))>1&&(p+=b-1)}for(v=0,f=0;f<T.length;f++){S=T[m[[this.columnOrder[f+v]]]];(b=parseInt(S.getAttribute("colSpan"),10))>1&&(v+=b-1),S.setAttribute("width",this.colWidthList[f+this.defaultColCnt+v]),a.Z.isChrome()?S.setAttribute("hidden",this.hiddenList[f+this.defaultColCnt+v]):this.hiddenList[f+this.defaultColCnt+v]?S.setAttribute("hidden","true"):S.setAttribute("hidden","false");var k=S.getAttribute("col_id");k&&(S.setAttribute("id",k),S.removeAttribute("col_id"))}}}var L=this.getSortableStatus();return L&&L.length>0&&t.setAttribute("_sortStatus",JSON.stringify(L)),t.serialize()}catch(t){s.Y.printStackTrace(t)}},m.prototype.setTableStruct=function(){try{if(this.headerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"header",r.I._XML_NAMESPACE.W2)[0],this.bodyXml=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",r.I._XML_NAMESPACE.W2)[0],this.struct={head:this.xml2JSON(this.headerXml),body:this.xml2JSON(this.bodyXml)},this.updateStruct(this.struct.head.rowArr),this.updateStruct(this.struct.body.rowArr),this.changeRowID(this.struct.head.rowAttrArr),this.changeRowID(this.struct.body.rowAttrArr),this.footerXml=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0],this.footerXml&&(this.hasFooter=!0,this.struct.foot=this.xml2JSON(this.footerXml),this.updateStruct(this.struct.foot.rowArr)),this.subtotalXmlArr=WebSquare.Elem.api.getElementsByTagName(this.element,"subTotal",r.I._XML_NAMESPACE.W2),this.subtotalXmlArr.length>0){this.options.showLastRow=!1,this.hasSubtotal=!0,this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0,this.struct.subtotalArr=[];for(var t=0;t<this.subtotalXmlArr.length;t++){var e=this.xml2JSON(this.subtotalXmlArr[t]);this.struct.subtotalArr.push(e),this.struct.subtotalArr[e.attr.id]=e,this.updateStruct(e.rowArr)}}if(this.setCss(),this.setColArr(),this.htmlInfo={head:this.getHeaderHtmlInfo(),body:this.getBodyHtmlInfo()},this.footerXml&&(this.htmlInfo.foot=this.getFooterHtmlInfo()),this.subtotalXmlArr.length>0){this.htmlInfo.subtotalArr=[],this.subtotalStrList={};for(t=0;t<this.struct.subtotalArr.length;t++){e=this.getSubtotalHtmlInfo(this.struct.subtotalArr[t]);this.htmlInfo.subtotalArr.push(e),this.htmlInfo.subtotalArr[e.attr.id]=e,this.subtotalStrList[e.attr.targetColumnID]=e}}this.captionXml=WebSquare.Elem.api.getElementsByTagName(this.element,"caption",r.I._XML_NAMESPACE.W2)[0];var i=this.getColCnt();this.columnOrder=[];for(t=0;t<i;t++)this.columnOrder.push(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.updateStruct=function(t){try{for(var e=0,i=[],o=this.getColCnt(),r=0;r<t.length;r++){for(var a=[],n=0;n<o;n++)a.push(null);i.push(a)}for(r=0;r<t.length;r++)for(n=0;n<t[r].length;n++){var l;for(l=0;l<i[r].length&&null!==i[r][l];l++);var h=t[r][n];h["@col"]=l;for(var d=h.colSpan||h.colspan||1,c=h.rowSpan||h.rowspan||1,u=0;u<c;u++)for(var p=0;p<d;p++)i[r+u][l+p]=e;e++}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.changeRowID=function(t){try{for(var e=0;e<t.length;e++){var i=t[e];null!=i.id&&(i["data-tr-id"]=i.id,delete i.id)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getRealColIndex=function(t,e){try{for(var i=0;i<this.htmlInfo[t].rowArr.length;i++)for(var o=0;o<this.htmlInfo[t].rowArr[i].length;o++)if(this.htmlInfo[t].rowArr[i][o].col_id==e)return this.htmlInfo[t].rowArr[i][o]["@col"];return null}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getRealHeaderColIndex=function(t){try{return this.getColumnIndex(this.headerToBodyRelation[t])}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getDataColIndex=function(t){try{return this._dataList.getColumnIndex(this.getColumnID(t))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._moveColumn=function(t,e,i,o,r,a){try{e=e||"td";for(var n=[],l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&n.push(t[i].childNodes[l]);var h=n[o];h.parentNode.removeChild(h);var d=[]
;for(l=0;l<t[i].childNodes.length;l++)t[i].childNodes[l].nodeName.toLowerCase()==e&&d.push(t[i].childNodes[l]);if(a<d.length){var c=d[a];c.parentNode.insertBefore(h,c)}else t[r].appendChild(h)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveBodyColumn=function(t,e,i,o){try{var r=this.htmlInfo.body.rowArr[t].splice(e,1);this.htmlInfo.body.rowArr[i].splice(o,0,r[0]),this.updateStruct(this.htmlInfo.body.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_body_tbody"),n=0;this.hasSubtotal&&this.drawedSubtotal&&this.drawedSubtotal.length>0&&(n=this.drawedSubtotal[0].length);for(var l=0;l<this.drawedRowLength;l++){for(var h=[],d=0;d<this.oneRowLength;d++)h.push(a.rows[l*(this.oneRowLength+n)+d+n]);this._moveColumn(h,"td",t,e,i,o);for(d=0;d<n;d++)if(0===t&&0===i){var c=d>0?this.defaultColCnt:0;this._moveColumn([a.rows[l*(this.oneRowLength+n)+d]],"td",0,e-c,0,o-c)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveHeadColumn=function(t,e,i,o){try{var r=this.htmlInfo.head.rowArr[t].splice(e,1);this.htmlInfo.head.rowArr[i].splice(o,0,r[0]),this.updateStruct(this.htmlInfo.head.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=this.getElementById(this.id+"_head_table");this._moveColumn(a.rows,"th",t,e,i,o)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._moveFooterColumn=function(t,e,i,o){try{var r=this.htmlInfo.foot.rowArr[t].splice(e,1);this.htmlInfo.foot.rowArr[i].splice(o,0,r[0]),this.updateStruct(this.htmlInfo.foot.rowArr),e+=0==t?this.defaultColCnt:0,o+=0==i?this.defaultColCnt:0;var a=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumn(a.rows,"td",t,e,i,o)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveFooterColumn=function(t,e){try{var i,o,r=parseInt(t,10),a=[];"string"==typeof t&&isNaN(r)?(o="id",i=t):(o="@col",i=this.colIndexes.footerColInfo.colIndexArr[r+this.defaultColCnt]-this.defaultColCnt);for(var n=0;n<this.htmlInfo.foot.rowArr.length;n++)for(var l=0;l<this.htmlInfo.foot.rowArr[n].length;l++)this.htmlInfo.foot.rowArr[n][l][o]==i&&a.push({row:n,col:l});var h,d,c=parseInt(e,10);"string"==typeof e&&isNaN(c)?(d="id",h=e):(d="@col",h=this.colIndexes.footerColInfo.colIndexArr[c+this.defaultColCnt]-this.defaultColCnt);for(n=0;n<a.length;n++){var u=null;for(l=0;l<this.htmlInfo.foot.rowArr[a[n].row].length;l++)if(this.htmlInfo.foot.rowArr[a[n].row][l][d]==h){u=l;break}null!==u?this._moveFooterColumn(a[n].row,a[n].col,a[n].row,u):this._moveFooterColumn(a[n].row,a[n].col,a[n].row,c)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveColumnByHeaderId=function(t,e){try{if(!t||!e||t===e)return!1;var i=this.getHeaderColIndex(t),o=this.getHeaderColIndex(e);if(isNaN(i)||isNaN(o))return!1;var r=this.columnBlock.hash[i-this.defaultColCnt],a=this.columnBlock.hash[o-this.defaultColCnt];if(r===a)return!1;var n=this.getFixedColumnLastIndex();if(this.options.fixedColumnNoMove&&(n>r||n>a))return!1;for(var l=-1,h=-1,d=0;d<this.columnOrder.length;d++){var c=this.columnOrder[d];if(c===r&&(l=d),c===a&&(h=d),l>-1&&h>-1)break}var p=this.headerToBodyRelation[t],g=this.headerToBodyRelation[e];if(!1===u.f.fireEvent(this,"onbeforecolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}))return!1;this.columnBlock||this.createBlockedHeaderInfo();var m=this.getColumnOrder(),f=-1,b=-1;for(d=0;d<m.length;d++){var y=m[d];if(y===r?f=d:y===a&&(b=d),-1!==f&&-1!==b)break}var v=this.columnBlock.info[r],w=this.columnBlock.info[a],S=m.slice(0);S.splice(f,v.length);var _=b+(f<b?w.length-v.length:0),C=S.slice(0,_).concat(v).concat(S.slice(_)),x=this.setColumnOrder(C);return u.f.fireEvent(this,"onaftercolumnmove",{startColumnID:p,startColumnIndex:l,endColumnID:g,endColumnIndex:h}),x}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveColumn=function(t,e){try{if(t==e)return
;if(this.options.fixedColumnNoMove&&(this.getFixedColumnLastIndex()>t+this.defaultColCnt||this.getFixedColumnLastIndex()>e+this.defaultColCnt))return;var i=this.getHeaderID(t),o=this._getRealColIndex("head",i)+this.defaultColCnt,r=this.headerToBodyRelation[i];if(!r||this.colMoveBolockedHeaderObj[i])return;var a=this.colMoveIndexMap[r],n=this._getRealColIndex("body",r)+this.defaultColCnt,l=this.getHeaderID(e),h=this.headerToBodyRelation[l];if(!h||this.colMoveBolockedHeaderObj[l])return;var d=this._getRealColIndex("head",l)+this.defaultColCnt,c=this.colMoveIndexMap[h],p=this.colIndexes.bodyColInfo.colIndexArr[c+this.defaultColCnt];if(!1===u.f.fireEvent(this,"onbeforecolumnmove",{startColumnID:r,startColumnIndex:a,endColumnID:h,endColumnIndex:c}))return!1;for(var g=[],m=n-this.defaultColCnt,f=0;f<this.htmlInfo.body.rowArr.length;f++)for(var b=0;b<this.htmlInfo.body.rowArr[f].length;b++)this.htmlInfo.body.rowArr[f][b]["@col"]==m&&g.push({row:f,col:b});var y=p-this.defaultColCnt;for(f=0;f<g.length;f++){var v=null;for(b=0;b<this.htmlInfo.body.rowArr[g[f].row].length;b++)if(this.htmlInfo.body.rowArr[g[f].row][b]["@col"]==y){v=b;break}null!==v?this.moveBodyColumn(g[f].row,g[f].col,g[f].row,v):this.moveBodyColumn(g[f].row,g[f].col,g[f].row,c)}g=[];var w=o-this.defaultColCnt;for(f=0;f<this.htmlInfo.head.rowArr.length;f++)for(b=0;b<this.htmlInfo.head.rowArr[f].length;b++)this.htmlInfo.head.rowArr[f][b]["@col"]==w&&g.push({row:f,col:b});var S=d-this.defaultColCnt;for(f=0;f<g.length;f++){for(v=null,b=0;b<this.htmlInfo.head.rowArr[g[f].row].length;b++)if(this.htmlInfo.head.rowArr[g[f].row][b]["@col"]==S){v=b;break}null!==v?this.moveHeadColumn(g[f].row,g[f].col,g[f].row,v):this.moveHeadColumn(g[f].row,g[f].col,g[f].row,e)}this.hasFooter&&this.options.columnMoveWithFooter&&this.moveFooterColumn(t,e);var _=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};if(null!=this.initVisibilityArr)for(f=0;f<this.htmlInfo.body.rowArr.length;f++)_(this.initVisibilityArr,n+f*this.getColCnt(),p+f*this.getColCnt());for(var C in _(this.columnOrder,n-this.defaultColCnt,p-this.defaultColCnt),_(this.colIndexInfo.body.colInfo.colIndexMatch,n,p),_(this.colWidthList,n,p),_(this.hiddenList,o,d),this.colMoveIndexMap)this.colMoveIndexMap[C]==a?this.colMoveIndexMap[C]=c:a<c?a<this.colMoveIndexMap[C]&&this.colMoveIndexMap[C]<=c&&(this.colMoveIndexMap[C]-=1):a>c&&a>this.colMoveIndexMap[C]&&this.colMoveIndexMap[C]>=c&&(this.colMoveIndexMap[C]+=1);for(var C in this.colMoveHeaderIndexMap)this.colMoveHeaderIndexMap[C]==a?this.colMoveHeaderIndexMap[C]=c:a<c?a<this.colMoveHeaderIndexMap[C]&&this.colMoveHeaderIndexMap[C]<=c&&(this.colMoveHeaderIndexMap[C]-=1):a>c&&a>this.colMoveHeaderIndexMap[C]&&this.colMoveHeaderIndexMap[C]>=c&&(this.colMoveHeaderIndexMap[C]+=1);this.arrangeOverflowXScroll(),this._handleScrollX(),u.f.fireEvent(this,"onaftercolumnmove",{startColumnID:r,startColumnIndex:a,endColumnID:h,endColumnIndex:c})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.resetMoveColumn=function(){try{for(var t=this.getColCnt(),e=[],i=0;i<t;i++)e.push(i);this.setColumnOrder(e)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setColumnOrder=function(t){try{if(!a.Z.isEmptyObject(this.cellMergeInfo))return void p.v.printLog("warning : setColumnOrder refused due to mergeCells. ["+this.id+"]");t=t.slice();if(!this.render||0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0},this.setRedrawStatus("stop"),void this.delayedDraw({newColumnOrder:t});var e=this.getColCnt(),i=[];"string"==typeof t&&(t=t.split(","));for(var o=0;o<t.length;o++){if(null!=this.bodyIdColIndexMap[t[o]]&&(t[o]=this.bodyIdColIndexMap[t[o]]),t[o]=Number(t[o]),"number"!=typeof t[o])return void $l(this.id+".setColumnOrder : wrong column order array.");i[t[o]]=!0}if(e>t.length){for(o=0;o<t.length;o++)t[o]=this.colIndexes.headerColInfo.colIndexArr[t[o]+this.defaultColCnt]-this.defaultColCnt;for(o=0;o<t.length;o++){var r=this.getCellInfo(t[o]).options.colSpan
;if(r>1)for(var n=1;n<r;n++)t.splice(o+n,0,t[o]+n)}for(o=0;o<t.length;o++)i[t[o]]=!0}for(o=t.length-1;o>=0;o--)for(n=o-1;n>=0;n--)t[o]===t[n]&&t.splice(o,1);for(o=0;o<e;o++)i[o]||t.push(o);if(e!=t.length)return $l(this.id+".setColumnOrder : wrong column order array."),!1;var l=[];for(o=0;o<t.length;o++)for(n=0;n<this.columnOrder.length;n++)if(this.columnOrder[n]==t[o]){l[o]=n;break}if(!0===this.checkRefreshAdaptive()&&this.removeAdaptive(),this.columnOrder=l.slice(0),this.drawedRowLength<=0&&this.drawDataTable(),this._moveColumnByOrder(this.id+"_body_tbody",this.htmlInfo.body.rowArr),this._moveColumnByOrder(this.id+"_head_table",this.htmlInfo.head.rowArr),this.hasFooter&&this.options.columnMoveWithFooter){var h=document.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0];this._moveColumnByOrder(h.getAttribute("id"),this.htmlInfo.foot.rowArr)}if(null!=this.initVisibilityArr){var d=[];for(o=0;o<this.initVisibilityArr.length-this.defaultColCnt;o++){var c=Math.floor(o/this.columnOrder.length),u=o%this.columnOrder.length,g=c*this.columnOrder.length+this.columnOrder[u]+this.defaultColCnt;d.push(this.initVisibilityArr[g])}for(o=0;o<d.length;o++)this.initVisibilityArr[o+this.defaultColCnt]=d[o]}this._swapItem(this.colIndexInfo.body.colInfo.colIndexMatch,this.columnOrder,this.defaultColCnt),this._swapItem(this.colWidthList,this.columnOrder,this.defaultColCnt),this.initialColWidthList=this.colWidthList.slice(),this._swapItem(this.hiddenList,this.columnOrder,this.defaultColCnt),"allColumn"===this.options.autoFit&&this._swapItem(this.autoFitColWidthList,this.columnOrder,this.defaultColCnt);for(o=0;o<this.tdIdList.length;o++)for(n=0;n<t.length;n++)if(o==t[n]){this.colMoveIndexMap[this.tdIdList[o]]=n,this.colMoveHeaderIndexMap[this.thIdList[o]]=n;break}return this.columnOrder=t.slice(0),this.arrangeOverflowXScroll(),this._handleScrollX(),!0===this.checkRefreshAdaptive()&&this.addAdaptive(),!0}catch(t){return s.Y.printStackTrace(t,null,this),!1}},m.prototype._moveColumnByOrder=function(t,e){try{var i=document.getElementById(t),o=[],r={},n=e.length;(isNaN(n)||n<=0)&&(n=1);for(var l=0;l<n;l++){if(!(_=i.rows[l]))break;var h=0;0===l&&(h=this.defaultColCnt);for(var d={},c=0,u=0,p=h;p<_.childNodes.length;p++){for(;null!=r[l]&&null!=r[l][p+c+u];)u+=r[l][p+c+u];d[p+c-h+u]=p;var g=parseInt(_.childNodes[p].getAttribute("colSpan"),10)||1;this.options.lazyDrawHiddenColumn&&"true"==_.childNodes[p].getAttribute("data-lazydrawtd")&&(g=1);var m=parseInt(_.childNodes[p].getAttribute("rowSpan"),10)||1;if(m>1)for(var f=l;f<l+m-1;f++)null==r[f+1]&&(r[f+1]={}),null==r[f+1][p-h+c+u]?r[f+1][p-h+c+u]=g:r[f+1][p-h+c+u]+=g;g>1&&(c+=g-1)}var b=0,y=0;o[l]=[];for(p=h;p<_.childNodes.length;p++){for(;null!=r[l]&&null!=r[l][this.columnOrder[p+y+b]];)y+=r[l][this.columnOrder[p+y+b]];var v=d[[this.columnOrder[p-h+b+y]]];null==v&&(v=0),o[l].push(v-h);var w=_.childNodes[v];g=parseInt(w.getAttribute("colSpan"),10);this.options.lazyDrawHiddenColumn&&"true"==w.getAttribute("data-lazydrawtd")&&(g=1),g>1&&(b+=g-1)}}for(l=0;l<i.rows.length;l++){h=0;var S=l%n;0===S&&(h=this.defaultColCnt);var _=i.rows[l];a.Z.isIEAllVersion()&&"11"==a.Z.browserVersion()&&l>=(this.lastIndex+1)*this.oneRowLength&&(_.style.backgroundColor="");var C=[];for(p=0;p<o[S].length;p++)C.push(_.childNodes[o[S][p]+h]);for(p=0;p<C.length;p++)_.appendChild(C[p])}for(var x,I=n-o.length;I>0;)x||(x=this.columnOrder.slice(0)),o.push(x),I--;for(l=0;l<n;l++)this._swapItem(e[l],o[l],0);this.updateStruct(e)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._swapItem=function(t,e,i){try{for(var o=[],r=null==i?0:i,a=0;a<e.length;a++)o.push(t[e[a]+r]);for(a=0;a<o.length;a++)t[a+r]=o[a]}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getColumnOrder=function(t){try{if(t){for(var e=[],i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.defaultColCnt;o<i.length;o++){if(0==i[o].length)return void $l(this.id+".getColumnOrder : use getColumnOrder(false). cannot express column order by name.")
;for(var r=this.tdIdList[i[o][0]-this.defaultColCnt],a=!1,n=0;n<e.length;n++)if(e[n]===r){a=!0;break}a||e.push(r)}return e}return this.columnOrder.slice(0)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getDisplayColumnIndex=function(t){try{for(var e=parseInt(t,10),i=0;i<this.columnOrder.length;i++)if(e===this.columnOrder[i])return i;return t}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getColumnMoveIndex=function(t){try{if(t<0||isNaN(t))return t;for(var e=this.colIndexInfo.body.colInfo.colIndexArr[t+this.defaultColCnt],i=this.colIndexInfo.body.colInfo.trIndexArr[t+this.defaultColCnt],o=this.colIndexInfo.body.colInfo.colIndexMatch[e],r=0;r<o.length;r++){var a=o[r];if(a>=t+this.defaultColCnt)break;var n=this.colIndexInfo.body.colInfo.rowSpanArr[a];n>1&&(i=i-n+1)}return o[i]-this.defaultColCnt}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleGroupbyZoneClick=function(t){try{for(var e=a.Z.getDataPrefix("header_id"),i=a.Z.getDataPrefix("col_id"),o=this.event.getTargetIterator(t,this.render);o.next()&&(!this.options.groupbyZoneSearch||!o.match("w2grid_groupbyZone_search"));){if(o.match("w2grid_groupbyZone_column")){var r=o.getElement(),n={};n.render=r,n.parentRender=this.render.getElementsByTagName("div")[0],n.headerID=r.getAttribute(e);var l=this.headerToBodyRelation[n.headerID],h=this.getColumnIndex(l);n.headerIndex=this._getColumnMoveIndex(h),n.dataIndex=this._getDataColIndex(this._getRealHeaderColIndex(n.headerID)),this.toggleGroupbyFilterList(n),u.f.stopEvent(t);break}if(o.match("w2grid_groupbyZone_column_closeButtonImg")){r=o.getElement();this.hideGroupbyFilterList(),this.ungroupColumn(r.getAttribute(i));break}if(o.match("w2grid_groupbyZone")){this.hideGroupbyFilterList(),u.f.stopEvent(t);break}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.toggleGroupbyFilterList=function(t){try{var e=t.render.tagName,i=t.headerIndex;"number"==typeof this.groupbyZoneStatus.beforeOpenedColIndex?(this.groupbyFilterList.saveState(this.groupbyZoneStatus.beforeOpenedColIndex.toString()),i==this.groupbyZoneStatus.beforeOpenedColIndex&&e==this.groupbyZoneStatus.beforeOpenedColTagName?"block"==this.groupbyFilterList.render.style.display?this.hideGroupbyFilterList():this.showGroupbyFilterList(t,!0):this.showGroupbyFilterList(t,!0,!0)):this.createGroupbyFilterList(t)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.applyFilterListFormat=function(t,e){try{var i=this.headerToBodyRelation[e],o=this.getCellInfo(i);if(this.options.displayValueOnUseFilterList)for(var r=0;r<t.length;r++)null!=t[r].id3&&(this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(r,"id2",t[r].id3):this.customFilterList.setCellDataNM(r,"id2",t[r].id3));else if(this.options.useFilterListFormat&&!this.options.useFilterSearch&&!this.options.useSearchFilter&&!o.useCustomFormatter){var a=0,n=this.headerInfoHash[e];if(n&&n.options.hideCustomFilter&&(a=1),o.options.displayFormat||o.options.displayFormatter||o.options.ioFormat)for(r=2-a;r<t.length;r++){var l=o.formatter.format(t[r].id2);this.groupbyStatus.grouped?this.groupbyFilterList.setCellDataNM(r,"id2",l):this.customFilterList.setCellDataNM(r,"id2",l)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.createGroupbyFilterList=function(t){try{var e=t.render,i=t.parentRender,o=t.headerIndex,r=t.headerID;if(!this.groupbyFilterList){this.groupbyStatus.filter={};"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >","        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>",
"        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>","    </w2:listRow>","</w2:list>";var n=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_groupbyZone_list' virtualized='true' labelCheck='true'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_groupbyZone_list_listRow' check_id='id1' >        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_groupbyZone_list_listColumn_checkbox'/>        <w2:listColumn id='id2' check_id='id1' inputType='text' style='' class='w2grid_groupbyZone_list_listColumn_text'/>    </w2:listRow></w2:list>",!0).documentElement;this.groupbyFilterList=new WebSquare.uiplugin.list(this.id+"_groupbyZone_list","",n),this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]};var l=this;this.groupbyFilterList._handleClickEvent=this.groupbyFilterList.handleClickEvent,this.groupbyFilterList.handleClickEvent=function(t){try{u.f.stopPropagation(t);var e=u.f.getTarget(t),i=e;if((e.className.match("w2grid_groupbyZone_list_listColumn_checkbox")||e.className.match("w2grid_groupbyZone_list_listColumn_text"))&&(i=e.parentElement),!i.className.match("w2grid_groupbyZone_list_listRow"))return;var o=i.children[0],r=l.getHeaderID(this.headerIndex),n=l.getColumnID(this.headerIndex);0==this.isGroupbyColumn&&(r=this.currentHeaderID,n=l.headerToBodyRelation[r]);var h=a.Z.getDataPrefix("unique_id"),d=i.getAttribute(h),c=this.getAllData(),p=l.getCellInfo(n);if(this.options.useFilterSearch&&this.options.useFilterListFormat&&p.formatter&&(p.options.displayFormat||p.options.displayFormatter||p.options.ioFormat))for(var g=2;g<c.length;g++)c[g].id2=p.formatter.unformat(c[g].id2);c[0].customerFilter&&c[0][h]==d?e.className.match("w2grid_groupbyZone_list_listColumn_checkbox")&&this._handleClickEvent(t):this._handleClickEvent(t);var m=o.checked,f=!1,b=!1,y=!1;if(c[0].customerFilter&&c[0][h]==d){if(!e.className.match("w2grid_groupbyZone_list_listColumn_checkbox"))return l.firstOpenCustomFilter[r]||(l.firstOpenCustomFilter[r]=!0),void(l.options.groupbyFilterIcon?l._showCustomFilter(r):l.showCustomFilter(r));if(m)return l.firstOpenCustomFilter[r]?(l._dataList.filterManager.headerID=r,l._dataList.filterManager.targetColID=n,void l.setCustomFilterExpression()):(l.hideGroupbyFilterList(),l.firstOpenCustomFilter[r]||(l.firstOpenCustomFilter[r]=!0),void(l.options.groupbyFilterIcon?l._showCustomFilter(r):l.showCustomFilter(r)));for(var v in l.customFilterStatusObj[r]=!1,l.dataList.removeColumnFilter(n),l.customFilterStatusObj)if(l.customFilterStatusObj[v])return;f=!0,b=!0,y=!0;for(g=1;g<c.length;g++)c[g].id1=!0}else if(c[1].gridCheckedAll&&c[1][h]==d){b=!0,m&&(y=!0);for(g=2;g<c.length;g++)c[g].id1=m}if(!f&&!y&&c.length-2>0){l.groupbyStatus.filter[n]=[];for(g=2;g<c.length;g++)c[g].id1&&l.groupbyStatus.filter[n].push(c[g].id2);l.groupbyStatus.filter[n]=l.changeItemValue("value",n,l.groupbyStatus.filter[n]);var w=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(g=0;g<l.groupbyStatus.filter[n].length;g++){var S=l.groupbyStatus.filter[n][g];"string"==typeof S&&(l.groupbyStatus.filter[n][g]=S.replace(w,(function(t){return l.replacechar(t)})))}}if(b){if(y&&this.filterHistory.column[0]===n)this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),delete l.groupbyStatus.filter[n];else if(!y&&this.filterHistory.column[0]!==n&&c.length-2>0){for(g=1;g<this.filterHistory.column.length;g++)if(this.filterHistory.column[g]===n){l.dataList.removeColumnFilter(n,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(n),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else{var _=c.length-2;if(_>l.groupbyStatus.filter[n].length){if(c[1].id1=!1,this.filterHistory.column[0]!==n){
for(var g=1;g<this.filterHistory.column.length;g++)if(this.filterHistory.column[g]===n){l.dataList.removeColumnFilter(n,{noRefresh:!0,noRefreshAfter:!0});break}this.filterHistory.column.unshift(n),this.filterHistory.filteredRowIndexArr.unshift(l._dataList.filteredRowIndexArr.slice(0))}}else l.groupbyStatus.filter[n].length==_&&(c[1].id1=!0,delete l.groupbyStatus.filter[n],this.filterHistory.column[0]===n&&(this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift()))}this.setFirstRowIndex(this.firstListIndex,!0);var C={};if(C.sortIndex=l.groupbyStatus.sortIndexArr,C.sortOrder=l.groupbyStatus.sortOrderArr,null!=l.groupbyStatus.filter&&(C.filter=l.groupbyStatus.filter,l.groupbyStatus.filter[n]&&2*l.groupbyStatus.filter[n].length>c.length)){var x=[],I="*";for(g=2;g<c.length;g++)if(!c[g].id1){if(c[g].id2===l.filterEmptyStr||c[g].id2===l.filterNullStr){I="+";continue}x.push(c[g].id2)}((p=l.getCellInfo(n)).itemsetObj||p.itemArr)&&(x=l.changeItemValue("value",n,x));var T="^\\n*(?:(?!^";for(w=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,g=0;g<x.length;g++){var k=x[g];"string"==typeof k&&(k=k.replace(w,(function(t){return l.replacechar(t)}))),T+=k+="$)(?!^"}T+="$).)"+I+"\\n*$",C.filterRegExp={},C.filterRegExp[n]=new RegExp(T,"gi")}if(C.noRefreshAfter=!0,!1===u.f.fireEvent(l,"ongroupby",C)){var L=l.getColCnt()+l.defaultColCnt,A=WebSquare.language.getMessage("Grid_cases")||"cases";C.rowNumHeader={colSpan:L,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' "+A+" ] ' ",align:"left"},C.footerVisible=!1,C.rowNumFooter={colSpan:L},l.groupby(C)}l.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){s.Y.printStackTrace(t,null,this)}},this.groupbyFilterList.writeTo(this),this.groupbyFilterList.activate()}if(!0===t.noDraw)return;var h=e.clientWidth,d=WebSquare.style.getRelativeTop(e,i)+e.offsetHeight,c=WebSquare.style.getRelativeLeft(e,i);this.groupbyFilterList.setPosition(c,d),this.groupbyFilterList.render.style.width=h+"px";var p=this.render.offsetHeight-d;this.groupbyFilterList.options.visibleRowNum=Math.floor(p/21);var g=this.getGroupbyDepthInfo(t);if(this.groupbyFilterList.setJSON(g),this.applyFilterListFormat(g,r),this.groupbyFilterList.currentHeaderID=r,this.groupbyFilterList.headerIndex=o,this.groupbyFilterList.isGroupbyColumn=t.isGroupbyColumn,WebSquare.style.show(this.groupbyFilterList.render),a.Z.getBoolean(this.headerInfoHash[r].options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList)){var m=this.groupbyFilterList.getMaxItemWidth();m>h&&(this.groupbyFilterList.render.style.width=m+"px")}this.groupbyFilterList.focus(),this.groupbyZoneStatus.beforeOpenedColIndex=o,this.groupbyZoneStatus.beforeOpenedColTagName=e.tagName}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showGroupbyFilterList=function(t,e,i){try{var o=t.render,r=t.parentRender,n=t.headerIndex,l=t.headerID;if(this.groupbyFilterList.currentHeaderID=t.headerID,this.groupbyFilterList.headerIndex=n,this.groupbyZoneStatus.beforeOpenedColIndex=n,this.groupbyZoneStatus.beforeOpenedColTagName=o.tagName,WebSquare.style.show(this.groupbyFilterList.render),this.groupbyFilterList.focus(),e){var h,d=WebSquare.style.getRelativeTop(o,r)+o.offsetHeight,c=WebSquare.style.getRelativeLeft(o,r),u=this.render.offsetHeight-d;this.groupbyFilterList.options.visibleRowNum=Math.floor(u/21);var p=this.getGroupbyDepthInfo(t);this.groupbyFilterList.setJSON(p),!0===i&&this.groupbyFilterList.loadState(n),a.Z.getBoolean(this.headerInfoHash[l].options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList)?(h=this.groupbyFilterList.getMaxItemWidth(),o.clientWidth>h&&(h=o.clientWidth)):h=o.clientWidth,this.groupbyFilterList.setPosition(c,d),this.groupbyFilterList.render.style.width=h+"px",this.applyFilterListFormat(p,l)}else if(!0===i){this.groupbyFilterList.loadState(n);p=this.getGroupbyDepthInfo(t);this.applyFilterListFormat(p,l)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideGroupbyFilterList=function(){try{
this.groupbyFilterList&&(WebSquare.style.hide(this.groupbyFilterList.render),this.groupbyFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.groupbyFilterList.isChanged=!1))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getGroupbyDepthInfo=function(t){try{t.headerIndex;var e,i=t.headerID,o=this.headerToBodyRelation[i];0==t.isGroupbyColumn&&(o=this.headerToBodyRelation[i]),e=this.groupbyFilterList.filterHistory.column[0]===o?this.groupbyFilterList.filterHistory.filteredRowIndexArr[0]:this._dataList.filteredRowIndexArr;var r=this.dataList.getColData(o,e),a=this.getCellInfo(o),n=this.getUniqueValueOfArray(r),l=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];l.push("");var h,d,c=this.changeItemValue("label",o,n.slice(0)),u=this.customFilterStatusObj[i]||!1,p=WebSquare.language.getMessage("Grid_Customized_Filter")||"Customized Filter",g=WebSquare.language.getMessage("Grid_checked_all")||"choose all",m=[];m.push({id1:u,id2:p,customerFilter:!0}),m.push({id1:!u,id2:g,gridCheckedAll:!0}),!u&&this.groupbyStatus.filter&&o in this.groupbyStatus.filter&&(d=(h=this.groupbyStatus.filter[o]).slice(0));for(var f=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,b=this,y=0;y<c.length;y++){var v={};if(d){var w=!1,S=a.itemArr?a.itemHash[c[y]]:c[y];"string"==typeof S&&(S=S.replace(f,(function(t){return b.replacechar(t)})));for(var _=d.length-1;_>-1;_--){if(S==d[_]){w=!0,d.splice(_,1);break}if("string"==typeof d[_]){for(var C=!1,x=0;x<l.length;x++)if(l[x]==d[_]){C=!0;break}if(C&&(c[y]==this.options.useFilterEmptyMsg||c[y]==this.filterEmptyStr)){w=!0;break}}}v.id1=w}else v.id1=!u;v.id2=c[y],this.options.displayValueOnUseFilterList&&(v.id3=n[y]),m.push(v)}if(h){var I=!0,T=m;for(y=2;y<T.length;y++)if(!T[y].id1){I=!1;break}m[1].id1=!!I}return this._dataList.getDataLength()||(m[1].id1=!1),m}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(this.groupbyZoneStatus.groupbyZoneRender.offsetHeight>0)return;if(WebSquare.style.show(this.groupbyZoneStatus.groupbyZoneRender),this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){s.Y.printStackTrace(t,null,this)}this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideGroupbyZone=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.groupbyZoneStatus.groupbyZoneRender){if(0==this.groupbyZoneStatus.groupbyZoneRender.offsetHeight)return;if(this.dom[this.id+"_main_div"].style.top="0px",this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight+this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){s.Y.printStackTrace(t,null,this)}WebSquare.style.hide(this.groupbyZoneStatus.groupbyZoneRender),this.setDataTable(),this.drawData(this.rowIndex,0)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showGroupbyZoneMessage=function(){try{if((this.options.groupbyZone||this.clearGrouping)&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.show(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideGroupbyZoneMessage=function(){try{if(this.options.groupbyZone&&this.options.groupbyZoneMessage){var t=this.groupbyZoneStatus.groupbyZoneMessageRender;t&&WebSquare.style.hide(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.syncWithGroupbyZone=function(){try{if(this.groupbyStatus.grouped&&this.options.groupbyZone){this.clearGroupbyZone();for(var t=a.Z.getDataPrefix("header_id"),e=a.Z.getDataPrefix("col_id"),i=this.groupbyStatus.sortIndexArr,o=0;o<i.length;o++){
var r=i[o],n=this.getColumnID(r),l=this.bodyToHeaderRelation[n],h=document.createElement("div");h.setAttribute(t,l),h.className="w2grid_groupbyZone_column";var d=document.createElement("div");d.className="w2grid_groupbyZone_column_closeButtonDiv";var c=document.createElement("div");c.className="w2grid_groupbyZone_column_closeButtonImg",c.setAttribute(e,n);var u=document.createElement("div");u.className="w2grid_groupbyZone_column_labelDiv";var p=document.createElement("span"),g="textContent"in p?"textContent":"innerText";p[g]=this.getHeaderValue(l).replace(/<(\/)?br(\\s)*(\/)?>/gi," "),p.setAttribute("title",p[g]),u.appendChild(p),d.appendChild(c),h.appendChild(u),h.appendChild(d),this.groupbyZoneStatus.groupbyZoneRender.appendChild(h),p.className="w2grid_groupbyZone_column_value"}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.clearGroupbyZone=function(){try{if((this.groupbyStatus.grouped||this.clearGrouping)&&this.options.groupbyZone){for(var t=this.groupbyZoneStatus.groupbyZoneRender,e=t.childNodes,i=[],o=0;o<e.length;o++)null!=e[o].className.match("w2grid_groupbyZone_column")&&i.push(e[o]);for(o=0;o<i.length;o++)t.removeChild(i[o])}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.handleChangeGroupDepth=function(t){try{for(var e=a.Z.getDataPrefix("header_id"),i=this.event.getTargetIterator(t);i.next();)if(i.match("w2grid_groupbyZone_column")){this.addClass("w2noselect"),a.Z.emptySelection();var o=i.getElement().getAttribute(e),r=this.getHeaderIndex(o),n=this.getHeaderValue(o),l=this;return void WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_column_drag",contents:n,delay:15,applyMousePosition:!0,onDrop:function(t,i,o,s,a,n,h){var d,c=null;for(this.isMobile?(c=new WebSquare.targetIterator(document.elementFromPoint(h.changedTouches[0].clientX,h.changedTouches[0].clientY)),h.preventDefault()):c=l.event.getTargetIterator(h);c.next();){if(c.match("w2grid_groupbyZone_column")){d=l.getHeaderIndex(c.getElement().getAttribute(e));break}if(c.match("w2grid_groupbyZone")){var u=l.groupbyStatus.sortIndexArr;d=u[u.length-1];break}if(c.match(null,null,"body"))return}r!=d&&(!1===l.options.noSelect&&!1===l.options.preventCopy&&l.removeClass("w2noselect"),l.hideGroupbyFilterList(),l.changeGroupDepth(r,d))}})}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.createContextMenu=function(t,e){try{if("object"===(0,l.A)(e)&&!0===e.hideSystemMenu)return;var i="";!0===this.options.useAccessibleContextMenu?(i+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='ul' style='' class='w2grid_contextMenu_accessibility'>",i+="    <w2:listRow tagName='li' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>",i+="        <w2:listColumn id='col1' inputType='link' style='' class='w2grid_contextMenu_column'/>",i+="    </w2:listRow>",i+="</w2:list>"):(i+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2grid_contextMenu'>",i+="    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_contextMenu_row'>",i+="        <w2:listColumn id='col1' inputType='text' style='' class='w2grid_contextMenu_column'/>",i+="    </w2:listRow>",i+="</w2:list>");var o=WebSquare.xml.parse(i,!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",o),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate();var r=this;this.contextMenu.event.addListener(this.contextMenu.render,"onclick",(function(t){try{u.f.stopPropagation(t),r.contextMenu.clickFunc.call(r.contextMenu,t)}catch(t){s.Y.printStackTrace(t,null,this)}})),this.contextMenu.clickFunc=function(t){try{for(var e,i,o=r.event.getTargetIterator(t,this.render),a=r.contextMenu;o.next();){if(o.match("w2grid_contextMenu_column")){e=o.getElement().parentNode;break}if(o.match("w2grid_contextMenu_row")){e=o.getElement()
;break}if(o.match("w2grid_contextMenu")||o.match("w2grid_contextMenu_accessibility"))return}for(var n=0;n<a.getLength();n++)if(e==a.render.childNodes[n]){i=n;break}r.callSelectedAPI(a.getRowData(i).col1,a.info),r.hideContextMenu();var l=r.contextMenu.getAllData()[i],h={row:a.info.rowIndex,col:a.info.colIndex,focusedCell:a.info.focusedCell,userMenuId:l.userMenuId,isSystemMenu:l.isSystemMenu,systemMenu:l.systemMenu};a.info=null,u.f.fireEvent(r,"oncontextclick",h.row,h.col,h.userMenuId,h.isSystemMenu,h.systemMenu,h.focusedCell)}catch(t){s.Y.printStackTrace(t,null,this)}},!0===this.options.useAccessibleContextMenu&&(this.contextMenu.event.addListener(this.contextMenu.render,"onkeydown",(function(t){try{var e=r.contextMenu,i=e.getLength(),o=t.charCode?t.charCode:t.keyCode;if(27==o)return void r.hideContextMenu();38==o?(u.f.preventDefault(t),e.selectedIndex--,e.selectedIndex<0&&(e.selectedIndex=0),e._setSelectedIndex()):40==o?(u.f.preventDefault(t),e.selectedIndex++,e.selectedIndex>=i&&(e.selectedIndex=i-1),e._setSelectedIndex()):9==o&&(u.f.preventDefault(t),t.shiftKey?(e.selectedIndex--,e.selectedIndex<0&&(e.selectedIndex=i-1)):(e.selectedIndex++,e.selectedIndex>=i&&(e.selectedIndex=0)),e._setSelectedIndex())}catch(t){s.Y.printStackTrace(t,null,this)}})),setTimeout((function(){for(var t=r.contextMenu.getLength(),e=0;e<t;e++){var i=r.contextMenu.render.childNodes[e].firstChild;r.contextMenu.event.addListener(i,"onclick",(function(t){try{u.f.stopPropagation(t),r.contextMenu.clickFunc.call(r.contextMenu,t)}catch(t){s.Y.printStackTrace(t,null,this)}})),r.contextMenu.event.addListener(i,"onfocus",(function(t){try{for(var e,i=r.contextMenu,o=0;o<i.getLength();o++)if(this==i.render.childNodes[o].firstChild){e=o;break}i.selectedIndex=e,i._setSelectedIndex()}catch(t){s.Y.printStackTrace(t,null,this)}}))}}),0));var a=this.getContextMenuData(t);if(e&&e.hideSystemMenu&&"object"===(0,l.A)(e.hideSystemMenu)&&e.hideSystemMenu.indexOf)for(var n=0;n<a.length;n++){var h=a[n].systemMenu;e.hideSystemMenu.indexOf(h)>-1&&(a.splice(n,1),n--)}if(e&&e.appendMenu&&"object"===(0,l.A)(e.appendMenu)&&e.appendMenu.length)for(n=0;n<e.appendMenu.length;n++){var d=e.appendMenu[n];d.col1=d.label,d.isSystemMenu=!1,a.push(d)}if(a.length>0){this.showContextMenu(t,a);for(n=0;n<a.length;n++){var c=a[n];c.className&&(this.contextMenu.render.children[n].className=this.contextMenu.render.children[n].className+" "+c.className)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getContextMenuData=function(t){try{var e=[],i=!0;if(this.groupbyStatus.grouped)for(var o=WebSquare.language.getMessage("Grid_ungroup")||"Ungroup",r=0;r<this.groupbyStatus.sortIndexArr.length;r++)if(t.focusedCell&&t.focusedCell.length>1){for(var a=0;a<t.focusedCell.length;a++)if(this.groupbyStatus.sortIndexArr[r]==t.focusedCell[a].focusedColIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(!i)break}else if(this.groupbyStatus.sortIndexArr[r]==t.colIndex){e.push({col1:o,isSystemMenu:!0,systemMenu:"Ungroup"}),i=!1;break}if(i){var n=WebSquare.language.getMessage("Grid_group")||"Group";e.push({col1:n,isSystemMenu:!0,systemMenu:"Group"})}var l=WebSquare.language.getMessage("Grid_column_hide")||"Hide";if(e.push({col1:l,isSystemMenu:!0,systemMenu:"ColumnHide"}),0==this.options.fixedColumn||this.options.fixedColumn-1<t.colIndex){var h=WebSquare.language.getMessage("Grid_column_fix")||"Fix";e.push({col1:h,isSystemMenu:!0,systemMenu:"ColumnFix"})}if(this.options.fixedColumn>0){var d=WebSquare.language.getMessage("Grid_column_unfix")||"Unfix All Columns";e.push({col1:d,isSystemMenu:!0,systemMenu:"ColumnUnfixAll"})}var c=WebSquare.language.getMessage("Grid_column_adjustWidth")||"Adjust Width",u=WebSquare.language.getMessage("Grid_column_showAll")||"Show All Columns";e.push({col1:c,isSystemMenu:!0,systemMenu:"ColumnAdjustWidth"});for(r=0;r<this.hiddenList.length;r++)if(this.hiddenList[r]){e.push({col1:u,isSystemMenu:!0,systemMenu:"ColumnShowAll"});break}
var p=WebSquare.language.getMessage("Grid_column_adjustAuto")||"Adjust All Column Widths";e.push({col1:p,isSystemMenu:!0,systemMenu:"ColumnAdjustAuto"});var g=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"UnAdjust All Column Widths";if(e.push({col1:g,isSystemMenu:!0,systemMenu:"ColumnAdjustAutoNone"}),this.groupbyStatus.grouped){var m=WebSquare.language.getMessage("Grid_fold_all")||"Fold All",f=WebSquare.language.getMessage("Grid_unfold_all")||"Unfold All",b=WebSquare.language.getMessage("Grid_ungroup_all")||"Ungroup All";e.push({col1:m,isSystemMenu:!0,systemMenu:"FoldAll"}),e.push({col1:f,isSystemMenu:!0,systemMenu:"UnfoldAll"}),e.push({col1:b,isSystemMenu:!0,systemMenu:"UngroupAll"})}return e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showContextMenu=function(t,e){try{e||(e=this.getContextMenuData(t),this.contextMenu.setPosition(0,0));var i=e.length*(this.options.contextMenuRowHeight+1);this.contextMenu.show(),this.contextMenu.setSize(null,i),this.contextMenu.setJSON(e);var o=u.f.getMouseX(t.event),r=u.f.getMouseY(t.event),a=document.body.scrollTop;a<document.documentElement.scrollTop&&(a=document.documentElement.scrollTop);var n=(r-a)*WebSquare.style.getScale(),l=document.documentElement.clientHeight-n,h=Math.max(l,n),d=WebSquare.style.getSize(this.contextMenu.render,"outerheight");if((h<d&&e.length>0||l<d&&n>d)&&(r-=d),r<0&&(r=0),document.documentElement.clientWidth<o+this.contextMenu.render.offsetWidth&&(o-=this.contextMenu.render.offsetWidth)<0&&(o=WebSquare.style.getAbsoluteLeft(this.render)),this.contextMenu.setPosition(o,r),this.contextMenu.info=t,!0===this.options.useAccessibleContextMenu){this.contextMenu.render.setAttribute("tabindex","0");for(var c=this.contextMenu.getLength(),p=0;p<c;p++){var g=this.contextMenu.render.childNodes[p];g.setAttribute("aria-selected","false"),g.setAttribute("aria-setsize",c),g.setAttribute("aria-posinset",p+1)}this.contextMenu.selectedIndex=0,this.contextMenu._setSelectedIndex()}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideContextMenu=function(){try{if(this.contextMenu){var t,e=WebSquare.style.getStyle(this.contextMenu.render,"display")||"";if(this.contextMenu.hide(),!0===this.options.useAccessibleContextMenu&&"none"!=e)if(this.contextMenu.render.setAttribute("tabindex","-1"),this.contextMenu.selectedIndex=null,this.focusedCell[0]&&(t=this.focusedCell[0].focusedTd),t){var i=a.Z.getDataPrefix("col_id");this.getCellInfo(t.getAttribute(i)).options.embeddedInput?this.applyFocusedCellIn(t,!0):this.applyFocusedCellIn(t)}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.callSelectedAPI=function(t,e){try{var i=WebSquare.language.getMessage("Grid_column_hide")||"Hide",r=WebSquare.language.getMessage("Grid_column_showAll")||"Show All Columns",a=WebSquare.language.getMessage("Grid_column_fix")||"Fix",n=WebSquare.language.getMessage("Grid_column_unfix")||"Unfix All Columns",l=WebSquare.language.getMessage("Grid_column_adjustWidth")||"Adjust Width",h=WebSquare.language.getMessage("Grid_column_adjustAuto")||"Adjust All Column Widths",d=WebSquare.language.getMessage("Grid_column_adjustAuto_none")||"UnAdjust All Column Widths",c=WebSquare.language.getMessage("Grid_fold_all")||"Fold All",p=WebSquare.language.getMessage("Grid_unfold_all")||"Unfold All",m=WebSquare.language.getMessage("Grid_ungroup_all")||"Ungroup All",f=WebSquare.language.getMessage("Grid_ungroup")||"Ungroup",b=WebSquare.language.getMessage("Grid_group")||"Group",y=e.focusedCell||[],v=[];if(y.length>0){for(var w=0;w<e.focusedCell.length;w++)v.push(e.focusedCell[w].colIndex);v.sort((function(t,e){return t-e}));for(w=0;w<v.length-1;)v[w]===v[w+1]?v.splice(w,1):w++}switch(t){case i:if(-1===e.colIndex)break;if(v.length>1)for(w=0;w<v.length;w++)this.setColumnVisible(v[w],!1),this.groupbyStatus.grouped&&this.ungroupColumn(v[w]);else this.setColumnVisible(e.colIndex,!1),this.groupbyStatus.grouped&&this.ungroupColumn(e.colIndex);break;case r:
for(w=0;w<this.hiddenList.length;w++)this.hiddenList[w]&&this.setColumnVisible(this.columnOrder[w-this.defaultColCnt],!0);break;case a:if(-1===e.colIndex)break;if(v.length>1)for(w=0;w<v.length;w++)this.setFixedColumn(parseInt(v[w],10)+1);else this.setFixedColumn(parseInt(e.colIndex,10)+1);break;case n:if(-1===e.colIndex)break;this.setFixedColumn(0);break;case l:if(-1===e.colIndex)break;if(!this.autofitColumn){var S={type:"selectedColumn",colIndex:e.colIndex};this.setAutoFit(S)}break;case h:S={type:"allColumn"};this.setAutoFit(S);break;case d:this.clearAutoFit();break;case c:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.foldAll();break;case p:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.unfoldAll();break;case m:if(-1===e.colIndex)break;this.groupbyStatus.grouped&&this.clearGroupby();break;case f:if(-1===e.colIndex)break;if(v.length>1)for(w=0;w<v.length;w++)this.ungroupColumn(v[w]);else this.ungroupColumn(e.colIndex);break;case b:if(-1===e.colIndex)break;if(this.groupbyStatus.grouped){if((S={}).sortIndex=this.groupbyStatus.sortIndexArr,S.sortOrder=this.groupbyStatus.sortOrderArr,v.length>1)for(w=0;w<v.length;w++)S.sortIndex.push(v[w]),S.sortOrder.push(1);else S.sortIndex.push(e.colIndex),S.sortOrder.push(1);!1===u.f.fireEvent(this,"ongroupby",S)&&((S=o.q.extend({},this.groupbyDisplayOptions)).sortIndex=this.groupbyStatus.sortIndexArr,S.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(S,!0))}else{S={};if(v.length>1){S.sortIndex=v,S.sortOrder=[];for(w=0;w<v.length;w++)S.sortOrder.push(1)}else S.sortIndex=[e.colIndex],S.sortOrder=[1];if(!1===u.f.fireEvent(this,"ongroupby",S)){var _=this.getColCnt()+this.defaultColCnt,C=g.B.getMessage("Grid_groupby_count")||"items";S.rowNumHeader={colSpan:_,inputType:"expression",expression:" toggle() + depthStr() + ' [ ' + count() + ' "+C+" ] ' ",align:"left"},S.rowNumFooter={colSpan:_},this.groupby(S,!0)}}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.createCustomFilterList=function(t,e){try{var i;!0!==e&&(i=this.headerToBodyRelation[t]);var o=this.options.filterListRowHeight+1,r=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum,n=WebSquare.language.getMessage("Grid_filter_search")||"search",l=this.getElementById(this.id+"_head_table");this._dataLayerHeight=this.dataLayerHeight?this.dataLayerHeight:this.getElementById(this.id+"_body_table").parentNode.offsetHeight,this._dataLayerHeight=this._dataLayerHeight-l.offsetHeight;var h=0;this.options.useFilterSearch?(h=Math.min(parseInt(this._dataLayerHeight/o),r),this.customFilterScrollViewRenderHeight=h*o):this.customFilterScrollViewRenderHeight=r*o;"<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'>","</w2:scrollView>";var d=WebSquare.xml.parse("<w2:scrollView xmlns:w2=\"http://www.inswave.com/websquare\" style='position:absolute; z-index:11;' class='w2grid_customFilter_scrollView'></w2:scrollView>",!0).documentElement;WebSquare.xml.setAttribute(d,"bounce",!1),WebSquare.xml.setAttribute(d,"paging",!1),a.Z.isMobile()||(WebSquare.xml.setAttribute(d,"horizontalScroll",!1),WebSquare.xml.setAttribute(d,"scrollType","auto"),WebSquare.xml.setAttribute(d,"showHorizontalScroll",!1),WebSquare.xml.setAttribute(d,"showVerticalScroll",!1),WebSquare.xml.setAttribute(d,"verticalScroll",!1)),this.customFilterScrollView=new WebSquare.uiplugin.scrollView(this.id+"_customFilter_scrollView","",d);var c="";if(this.options.useFilterSearch)c+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list' placeholder='"+n+"' virtualized='true' visibleRowNum='"+(h-1)+"' useSearch='true' wheelRows='1' _listRowHeight='"+o+"'>";else{this.options.useSearchFilter&&(useSearchFilterStr=" useSearchFilter='true'"),
c+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='position:absolute; z-index:11; padding:0px; display:block;' class='w2grid_customFilter_list'>"}c+="    <w2:listRow tagName='div' style='height: "+this.options.filterListRowHeight+"px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2grid_customFilter_list_listRow'>",c+="        <w2:listColumn id='id1' inputType='checkbox' style='' class='w2grid_customFilter_list_listColumn_checkbox'/>",c+="        <w2:listColumn id='id2' inputType='text' style='' class='w2grid_customFilter_list_listColumn_text'/>",c+="        <w2:listColumn id='id3' inputType='text' style='display:none;'/>",c+="    </w2:listRow>",c+="</w2:list>";var p=WebSquare.xml.parse(c,!0).documentElement;if(this.customFilterList=new WebSquare.uiplugin.list(this.id+"_customFilter_list","",p),this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]},this.customFilterScrollView.addControl(this.customFilterList),this.customFilterScrollView.writeTo(this),this.customFilterScrollView.activate(),this.options.useSearchFilter){this.customFilterList.myhelper=new WebSquare.korHelper;var g=WebSquare.document.createElement("div");g.id=this.id+"_filter_Search_div",g.style.position="relative",g.style.backgroundColor="white",g.style.boxSizing="border-box",this._filter_searchInput=WebSquare.document.createElement("input"),this._filter_searchInput.id=this.id+"_filter_search_input",this._filter_searchInput.className="w2grid_filter_search_input",this._filter_searchInput.name=this.id+"_filter_search_input",this._filter_searchInput.style.height=o-3+"px",a.Z.isIEAllVersion(),this._filter_searchInput.placeholder=n,g.appendChild(this._filter_searchInput),this.customFilterScrollView.render.insertBefore(g,this.customFilterScrollView.render.firstChild);var m=this.uuid,f=this.id;u.f.addListener(g,"onkeydown",(function(t){u.f.stopPropagation(t),a.Z.setTimeout((function(){WebSquare.idCache[m].customFilterList.find()}),{key:f+"_customFilterList_search",delay:100})})),u.f.addListener(g,"onkeyup",(function(t){u.f.stopPropagation(t);var e=WebSquare.idCache[m],i=e.getHeaderDIV(e.customFilterList.currentHeaderID).getElementsByClassName("w2grid_customFilter_open")[0];if(13==t.keyCode){(e.options.useFilterSearch?this.dom.input.value:e._filter_searchInput.value)&&(e.hideCustomFilterList(),i&&i.focus())}else 27==t.keyCode&&(e.hideCustomFilterList(),i&&i.focus())})),this.customFilterScrollViewRenderHeight+=o}var b=this;if(this.customFilterScrollView.event.addListener(this.customFilterScrollView.render,"onclick",this.customFilterScrollView.event.bindAsEventListener(this.customFilterList,(function(t){try{u.f.stopPropagation(t);var e=u.f.getTarget(t);if(e.className.match("w2list_input")||e.className.match("w2list_scroll_thumb")||e.className.match("w2grid_filter_search_input")||e.className.match("w2grid_customFilter_scrollView"))return;var i,o=e.parentNode,r=0;if(this.options.virtualized?(i=this.getElementById(this.id+"_items_main").childNodes,r=this.firstListIndex):i=this.render.childNodes,e.className.match("w2grid_customFilter_list_listRow")){e=(o=e).firstChild;for(var a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+r,"id1",!e.checked);break}}if(e.className.match("w2grid_customFilter_list_listColumn_text")&&(i[0]!=o||this.options.virtualized&&r>0)){e=o.firstChild;for(a=0;a<this.getLength();a++)if(o==i[a]){this.setCellData(a+r,"id1",!e.checked);break}}var n=this.currentHeaderID,l=b.headerToBodyRelation[n],h=b._dataList.getColumnIndex(l),d=b.headerInfoHash[n],c=0;if(d&&d.options.hideCustomFilter&&(c=1),1!==c&&o==i[0]&&0===r){if(e.className.match("w2grid_customFilter_list_listColumn_checkbox")){if(e.checked){if(b.firstOpenCustomFilter[n]){b.headerID=n,b.targetColID=l,(b.options.useFilterSearch||b.options.useSearchFilter)&&b.setAutoCompleteItem(l,n),b.setCustomFilterExpression();for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!1)
;if(b.options.useFilterSearch||b.options.useSearchFilter){var p=b.getCustomFilterListJSON({colID:l,headerID:n});b._setFilterListHeight(n,p.length)}return}return b.hideCustomFilterList(),b.firstOpenCustomFilter[n]||(b.firstOpenCustomFilter[n]=!0),void b._showCustomFilter(n)}if(b.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],b.dataList.removeColumnFilter(l),b.options.useFilterSearch||b.options.useSearchFilter){(p=b.getCustomFilterListJSON({colID:l,headerID:n}))[0].id1=!1;for(a=1-c;a<p.length;a++)p[a].id1=!0}for(a=1;a<this.getLength();a++)this.setCellData(a,"id1",!0);b.options.useFilterSearch&&(this.setJSON(p),b._setFilterListHeight(n,p.length))}else if(e.className.match("w2grid_customFilter_list_listColumn_text"))return void b._showCustomFilter(n)}else if(1!==c&&this.setCellData(0,"id1",!1),b.customFilterStatusObj[n]=!1,delete this.customFilterListFilterInfo[l],o==i[1-c-r]){var g=e.checked;if(e.className.match("w2grid_customFilter_list_listColumn_text"))g=!i[1-c].firstChild.checked;for(a=1-c;a<this.getLength();a++)this.setCellData(a,"id1",g)}var m=[],f=[],y=[],v=this.getLength();for(a=2-c;a<v;a++)this.getCellData(a,"id1")?f.push(a):y.push(a);var w=f.length>y.length,S=(b._dataList.getFilterList(),this.getLength()-2+c),_=b.getCellInfo(l),C=w?y:f,x="*";for(a=0;a<C.length;a++){var I=this.getCellData(C[a],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&_.formatter&&(_.options.displayFormat||_.options.displayFormatter||_.options.ioFormat)&&(I=_.formatter.unformat(I)),b.options.useFilterListFormat&&_.useCustomFormatter&&""===(I=this.getCellData(C[a],"id3"))&&(x="+"),w&&I===b.filterEmptyStr?x="+":(I===b.filterNullStr&&(I="null"),m.push(I))}b.options.useFilterListFormat&&_.useCustomFormatter||(m=b.changeItemValue("value",l,m));var T=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(a=0;a<m.length;a++){var k=m[a];"string"==typeof k&&(m[a]=k.replace(T,(function(t){return b.replacechar(t)})))}var L="";0==f.length?L+="/^[a-z0-9_-]{3,16}$/":L+=w?"^\\n*(?:(?!^"+m.join("$)(?!^")+"$).)"+x+"\\n*$":"^"+m.join("$|^")+"$";var A,D="";if(_&&(D=b.getColumnOption(_.options.col_id,"dataType")),A="number"==D?new RegExp(L):new RegExp(L,"gi"),u.f.fireEvent(b._dataList,"onbeforecolumnfilterchange"),f.length<S&&(WebSquare.DataCollection.stopBroadCast=!0),b.dataList.removeColumnFilter(l,{noRefreshAfter:!0}),this.filterHistory.column[0]!==l&&(this.filterHistory.column.unshift(l),this.filterHistory.filteredRowIndexArr.unshift(b._dataList.filteredRowIndexArr.slice(0))),f.length<S){if(WebSquare.DataCollection.stopBroadCast=!1,w){this.customFilterListFilterInfo[l]=[];for(a=0;a<f.length;a++){I=this.getCellData(f[a],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&_.formatter&&(_.options.displayFormat||_.options.displayFormatter||_.options.ioFormat)&&(I=_.formatter.unformat(I)),b.options.useFilterListFormat&&_.useCustomFormatter&&(I=this.getCellData(f[a],"id3")),this.customFilterListFilterInfo[l].push(I)}(_.itemsetObj||_.itemArr)&&(b.options.useFilterListFormat&&_.useCustomFormatter||(this.customFilterListFilterInfo[l]=b.changeItemValue("value",l,this.customFilterListFilterInfo[l])));for(a=0;a<this.customFilterListFilterInfo[l].length;a++){var W=this.customFilterListFilterInfo[l][a];W===b.filterEmptyStr?this.customFilterListFilterInfo[l][a]="":W===b.filterNullStr?this.customFilterListFilterInfo[l][a]=null:"string"==typeof W&&(W=W.replace(T,(function(t){return b.replacechar(t)})),this.customFilterListFilterInfo[l][a]=W)}}else this.customFilterListFilterInfo[l]=m;b.dataList.setColumnFilter({type:"regExp",colIndex:h,key:A,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[l];var q=b.getElementById(b.id+"_"+n+"_filter");1!==c&&this.getCellData(0,"id1")||WebSquare.style.removeClass(q,"w2grid_customFilter_filter");var M=!0,E=(S=this.getLength()-2+c,this.getAllData());for(a=2-c;a<E.length;a++)if(!E[a].id1){M=!1;break}
M?(this.setCellData(1-c,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift()):(this.setCellData(1-c,"id1",!1),WebSquare.style.addClass(q,"w2grid_customFilter_filter")),u.f.fireEvent(b._dataList,"onaftercolumnfilterchange"),b.options.groupbyFilterBox&&(this.isChanged=!0)}catch(t){s.Y.printStackTrace(t,null,this)}}))),(this.options.useFilterSearch||this.options.useSearchFilter)&&(this.customFilterList.find=function(){this.search="contain";var t="";t=b.options.useFilterSearch?this.dom.input.value:b._filter_searchInput.value,!b.options.caseSensitive&&t&&(t=t.toLowerCase());var e=[],i=this.currentHeaderID,o=b.headerToBodyRelation[i],s=b._dataList.getColumnIndex(o),r=b.getCellInfo(o),a=b.headerInfoHash[i],n=0;a&&a.options.hideCustomFilter&&(n=1);for(var l=0;l<2-n;l++)e.push({id1:l-n==1,id2:y[l].id2});if(""!=t){b.itemValueObj={},b.customFilterStatusObj[i]=!1,b.firstOpenCustomFilter[i]=!1;var h=e.length;b.dataList.removeColumnFilter(o),delete this.customFilterListFilterInfo[o];for(N=b.getCustomFilterListJSON({colID:o,headerID:i,useFormat:!1}),l=2-n;l<N.length;l++){var d=!1,c=N[l].id2+"";if(b.options.caseSensitive||(c=c.toLowerCase()),"contain"==this.search?d=this.myhelper.containWith(c,t):"start"==this.search?d=this.myhelper.startWith(c,t):"none"==this.search&&(d=c==t),d){var p,g=N[l].id2;(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.format(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=N[l].id2,p=N[l].id3),e.push({id1:!0,id2:g,id3:p})}}h===e.length&&e.splice(1-n,1),this.setJSON(e),b._setFilterListHeight(i,N.length,e.length);var m=[],f=[],v=[],w=this.getLength();for(l=2-n;l<w;l++)this.getCellData(l,"id1")?f.push(l):v.push(l);if(0!=f.length||0!=v.length){var S=f.length>v.length;0===v.length&&(S=!1);var _=S?v:f,C="*";for(l=0;l<_.length;l++){g=this.getCellData(_[l],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.unformat(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=this.getCellData(_[l],"id3")),S&&g===b.filterEmptyStr?C="+":(g===b.filterNullStr&&(g="null"),m.push(g))}b.options.useFilterListFormat&&r.useCustomFormatter||(m=b.changeItemValue("value",o,m));var x=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g;for(l=0;l<m.length;l++){var I=m[l];"string"==typeof I&&(m[l]=I.replace(x,(function(t){return b.replacechar(t)})))}var T="";0==f.length?T+="/^[a-z0-9_-]{3,16}$/":T+=S?"^\\n*(?:(?!^"+m.join("$)(?!^")+"$).)"+C+"\\n*$":"^"+m.join("$|^")+"$";var k,L="";(r=b.getCellInfo(o))&&(L=b.getColumnOption(r.options.col_id,"dataType")),k="number"==L?new RegExp(T):new RegExp(T,"gi"),u.f.fireEvent(b._dataList,"onbeforecolumnfilterchange");var A=this.getLength()-2+n;if(f.length<A&&(WebSquare.DataCollection.stopBroadCast=!0),b.dataList.removeColumnFilter(o,{noRefreshAfter:!0}),this.filterHistory.column[0]!==o&&(this.filterHistory.column.unshift(o),this.filterHistory.filteredRowIndexArr.unshift(b._dataList.filteredRowIndexArr.slice(0))),f.length<=A){if(WebSquare.DataCollection.stopBroadCast=!1,S){this.customFilterListFilterInfo[o]=[];for(l=0;l<f.length;l++){g=this.getCellData(f[l],"id2");(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.formatter&&(r.options.displayFormat||r.options.displayFormatter||r.options.ioFormat)&&(g=r.formatter.unformat(g)),(b.options.useFilterSearch||b.options.useSearchFilter)&&b.options.useFilterListFormat&&r.useCustomFormatter&&(g=this.getCellData(f[0],"id3")),this.customFilterListFilterInfo[o].push(g)}(r.itemsetObj||r.itemArr)&&(this.customFilterListFilterInfo[o]=b.changeItemValue("value",o,this.customFilterListFilterInfo[o]))
;for(l=0;l<this.customFilterListFilterInfo[o].length;l++){var D=this.customFilterListFilterInfo[o][l];D===b.filterEmptyStr?this.customFilterListFilterInfo[o][l]="":D===b.filterNullStr?this.customFilterListFilterInfo[o][l]=null:"string"==typeof D&&(D=D.replace(x,(function(t){return b.replacechar(t)})),this.customFilterListFilterInfo[o][l]=D)}}else this.customFilterListFilterInfo[o]=m;b.dataList.setColumnFilter({type:"regExp",colIndex:s,key:k,condition:"and",columnfilterchangeFire:!1,noRefreshAfter:!0})}else delete this.customFilterListFilterInfo[o];R=b.getElementById(b.id+"_"+i+"_filter");1!==n&&this.getCellData(0,"id1")||WebSquare.style.removeClass(R,"w2grid_customFilter_filter");var W=!0,q=(A=this.getLength()-2+n,this.getAllData());for(l=2-n;l<q.length;l++)if(!q[l].id1){W=!1;break}W?(this.setCellData(1-n,"id1",!0),this.filterHistory.column.shift(),this.filterHistory.filteredRowIndexArr.shift(),this.listRowObjArr.length!==this.jsonData.length&&WebSquare.style.addClass(R,"w2grid_customFilter_filter")):(this.setCellData(1-n,"id1",!1),WebSquare.style.addClass(R,"w2grid_customFilter_filter")),u.f.fireEvent(b._dataList,"onaftercolumnfilterchange"),b.options.groupbyFilterBox&&(this.isChanged=!0)}}else{for(var M=b._dataList.getFilterList(),E=!1,l=0;l<M.length;l++)if(M[l]&&M[l].colIndex===s&&"func"!==M[l].type){E=!0;break}if(this.listRowObjArr.length!==this.jsonData.length&&E){b.itemValueObj={},b.customFilterStatusObj[i]=!1,delete this.customFilterListFilterInfo[o],b.firstOpenCustomFilter[i]=!1,b.dataList.removeColumnFilter(o);var R=b.getElementById(b.id+"_"+i+"_filter");1!==n&&this.getCellData(0,"id1")||WebSquare.style.removeClass(R,"w2grid_customFilter_filter");for(var N=b.getCustomFilterListJSON({colID:o,headerID:i}),l=2-n;l<N.length;l++)e.push({id1:!0,id2:N[l].id2});this.setJSON(e),b._setFilterListHeight(i,e.length)}else E||e.length-(2-n)!=0||(this.setJSON(this.jsonData),b._setFilterListHeight(i,this.jsonData.length))}},this.customFilterList._inputKeyDown=this.customFilterList.inputKeyDown,this.customFilterList.inputKeyDown=function(t,e){var i=this;this.mytime=setTimeout((function(t){i.find()}),100,t)}),!0===e)return;var y=this.getCustomFilterListJSON({colID:i,headerID:t});if(this.customFilterList.jsonData=y,this.customFilterList.setJSON(y),this.applyFilterListFormat(y,t),this._setFilterListSize({headerID:t,dataLen:y.length,type:"create"}),this.options.useFilterSearch){this.removeFocusedCell();var v=this.customFilterList.getElementById(this.customFilterList.id+"_input");WebSquare.style.getSize(v,"innerwidth"),WebSquare.style.getSize(v,"width");this.customFilterList.dom.input.focus()}else if(this.options.useSearchFilter){this.removeFocusedCell();v=this.customFilterScrollView.getElementById(this.id+"_filter_search_input"),WebSquare.style.getSize(v,"innerwidth"),WebSquare.style.getSize(v,"width");v.focus()}this.customFilterList.currentHeaderID=t,this.customFilterList.customFilterListFilterInfo={},this.customFilterList.customFilterListAction=!1,this.customFilterList.customUserFilterListAction=!1,WebSquare.style.show(this.customFilterScrollView.render)}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setFilterListSize=function(t){try{var e,i,o=t.headerID,r=t.dataLen,n=t.type,l=this.getElementById(this.id+"_"+o),h=this.options.filterListRowHeight+1,d=(this.options.useFilterSearch?r+1:r)*h-1,c=d;if("height"!=n){var u=this.options.filterListVisibleRowNum||this.options.customFilterListVisibleRowNum;if(this.options.useFilterSearch){var p=Math.min(parseInt(this._dataLayerHeight/h),u);this.customFilterScrollViewRenderHeight=p*h}else this.customFilterScrollViewRenderHeight=u*h}
var g=WebSquare.style.getSize(this.customFilterScrollView.render,"outerwidth")-WebSquare.style.getSize(this.customFilterScrollView.render,"width"),m=WebSquare.style.getSize(this.customFilterScrollView.render,"outerHeight")-WebSquare.style.getSize(this.customFilterScrollView.render,"height"),f=WebSquare.style.getRelativeTop(l,this.render)+l.offsetHeight+1,b=WebSquare.style.getRelativeLeft(l,this.render),y=0,v=this.getElementById(this.id+"_head_table"),w=this.dataLayerHeight?this.dataLayerHeight:this.getElementById(this.id+"_body_table").parentNode.offsetHeight;w-=v.offsetHeight,this.options.useSearchFilter&&(y=h);var S=Math.min(this.customFilterScrollViewRenderHeight+y,d+y,w-m),_=this.getElementById(this.id+"_customFilter_scrollView_container");this.options.useFilterSearch?d=S:WebSquare.style.setStyle(_,"overflow-x","auto");var C=this.getElementById(this.id+"_size_y").clientWidth,x=this.getElementById(this.id+"_body_table"),I=WebSquare.style.getSize(x,"outerwidth")-WebSquare.style.getSize(x,"width"),T=this.getElementById(this.id+"_dataLayer").clientWidth-l.offsetLeft-g-I,k=e=this.customFilterList.getMaxItemWidth();if(a.Z.getBoolean(this.headerInfoHash[o].options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList)){l.clientWidth>e&&(e=l.clientWidth);var L=document.getElementById(this.id+"_dataLayer"),A=L.clientWidth,D=WebSquare.style.getRelativeLeft(L,this.render);i=e+(S<d?C:0),this.options.useFilterSearch&&c>S&&(e+=C,i+=C),T<i?(A<i?(b=D,i=A):b=D+A-i-g,T=A):i=Math.min(T,i),this.options.useSearchFilter?e>k&&WebSquare.style.setStyle(_,"overflow-x","hidden"):this.options.useFilterSearch&&WebSquare.style.setStyle(_,"overflow-x","hidden")}else{var W=parseInt(this.headerInfoHash[o].options.filterListWidth);W>0?e<(i=W-g)&&(e=i):this.options.filterListWidth>0?e<(i=this.options.filterListWidth-g)&&(e=i):(i=l.clientWidth,l.clientWidth>e&&(e=l.clientWidth)),T<i&&(i=T),(this.options.useFilterSearch||e>k)&&WebSquare.style.setStyle(_,"overflow-x","hidden")}"height"!=n&&this.customFilterScrollView.setPosition(b,f-1);var q=0;if(this.options.useSearchFilter){var M=this.customFilterScrollView.getElementById(this.id+"_filter_search_input");q=M.offsetHeight,_.style.height=S-q+"px"}this.customFilterScrollView.setSize(i,S),this.customFilterList.setSize(e,d);var E,R,N=0;if(a.Z.getBoolean(this.headerInfoHash[o].options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList)||this.options.useFilterSearch||(_.clientWidth<k?(N=_.offsetHeight-_.clientHeight,this._dataLayerHeight>S+N&&(this.customFilterScrollView.setSize(null,S+N),this.options.useSearchFilter&&(_.style.height=_.offsetHeight+N+"px"))):WebSquare.style.setStyle(_,"overflow-x","hidden")),this.options.useResizeFilterList)this.customFilterScrollView.addClass("w2scrollView_resize"),a.Z.getBoolean(this.headerInfoHash[o].options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList)?(E=l.clientWidth,R=i):(E=i,R=Math.min(T,e)),this.customFilterScrollView.render.style.minWidth=E+"px",this.customFilterScrollView.render.style.maxWidth=R+"px",this.customFilterScrollView.render.style.minHeight=_.offsetHeight+q+"px",this.customFilterScrollView.render.style.maxHeight=Math.min(this._dataLayerHeight,d+q)+N+"px","create"==n&&(scrollViewObserver=new ResizeObserver((function(t){var e=t[0].contentRect.height-q;_.offsetHeight!=e&&(_.style.height=e+"px")})),scrollViewObserver.observe(this.customFilterScrollView.render))}catch(t){s.Y.printStackTrace(t)}},m.prototype._setFilterListHeight=function(t,e,i){try{var o=i||e;this._setFilterListSize({headerID:t,dataLen:o,type:"height"})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.toggleCustomFilterList=function(t){try{this.customFilterScrollView&&this.customFilterList&&("none"==this.customFilterScrollView.render.style.display||this.customFilterList.currentHeaderID!=t?this.moveCustomFilterList(t):this.hideCustomFilterList())}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showCustomFilterList=function(t,e){try{
if(this.customFilterScrollView&&this.customFilterList){if(e){WebSquare.style.show(this.customFilterScrollView.render),this.options.useResizeFilterList&&(this.customFilterScrollView.render.style.minWidth="",this.customFilterScrollView.render.style.maxWidth="",this.customFilterScrollView.render.style.minHeight="",this.customFilterScrollView.render.style.maxHeight="");var i=t.headerID,o=t.dataLength;this._setFilterListSize({headerID:i,dataLen:o})}var r=this.getElementById(this.id+"_customFilter_scrollView_container");if(this.customFilterList.currentHeaderID=i,r.scrollLeft=0,r.scrollTop=0,this.options.useFilterSearch){this.removeFocusedCell(),this.customFilterList.dom.input.value="";var a=this.customFilterList.getElementById(this.customFilterList.id+"_input");WebSquare.style.getSize(a,"innerwidth"),WebSquare.style.getSize(a,"width");this.customFilterList.dom.input.focus()}else if(this.options.useSearchFilter){this.removeFocusedCell();a=this.customFilterScrollView.getElementById(this.id+"_filter_search_input"),WebSquare.style.getSize(a,"innerwidth"),WebSquare.style.getSize(a,"width"),r.offsetWidth,r.clientWidth;WebSquare.style.getSize(a,"outerwidth")-WebSquare.style.getSize(a,"width"),a.value="",a.focus()}WebSquare.style.show(this.customFilterScrollView.render)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.moveCustomFilterList=function(t){try{if(this.customFilterScrollView&&this.customFilterList){var e=this.headerToBodyRelation[t];WebSquare.style.show(this.customFilterScrollView.render);var i=this.getCustomFilterListJSON({colID:e,headerID:t});this.customFilterList.jsonData=i,this.customFilterList.setJSON(i),this.applyFilterListFormat(i,t),this.customFilterList.currentHeaderID=t,this.showCustomFilterList({headerID:t,dataLength:i.length},!0)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.hideCustomFilterList=function(){try{this.customFilterScrollView&&this.customFilterList&&(WebSquare.style.hide(this.customFilterScrollView.render),this.customFilterList.isChanged&&this.options.groupbyFilterBox&&(this.refreshGroupbyFilterBox(),this.customFilterList.isChanged=!1))}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.getCustomFilterListJSON=function(t){try{var e;if(this.customFilterList.filterHistory.column[0]!==t.colID||this.options.showAllFilterList)if(this.options.useFilterSearch||this.options.useSearchFilter){var i=this._dataList.getFilterList();if(i.length>0){var o=!1;1==i.length&&this._dataList.getColumnID(i[0].colIndex)===t.colID&&(o=!0)}e=o?this._dataList.filterManager.allRowIndexArr:this._dataList.filteredRowIndexArr}else this.options.showAllFilterList?(this.customFilterList.customFilterListFilterInfo,e=this._dataList.filterManager.firstFiltering?this._dataList.filteredRowIndexArr:this._dataList.filterManager.allRowIndexArr):e=this._dataList.filteredRowIndexArr;else e=this.customFilterList.filterHistory.filteredRowIndexArr[0];var r=this.dataList.getColData(t.colID,e),a=this.getCellInfo(t.colID),n=this.getUniqueValueOfArray(r,a.options.dataType),l=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];l.push("");var h,d,c=("select"==a.options.inputType||"text"==a.options.inputType)&&this.options.useFilterListFormat&&a.useCustomFormatter?"customFormatted":"label",u=this.changeItemValue(c,t.colID,n.slice(0)),p=this.customFilterStatusObj[t.headerID]||!1,g=WebSquare.language.getMessage("Grid_Customized_Filter")||"Customized Filter",m=WebSquare.language.getMessage("Grid_checked_all")||"choose all",f=!p;if(!p)if(this.customFilterList.customFilterListFilterInfo&&Object.keys(this.customFilterList.customFilterListFilterInfo).length>0)t.colID in this.customFilterList.customFilterListFilterInfo&&(d=(h=this.customFilterList.customFilterListFilterInfo[t.colID]).slice(0));else if(this.options.showAllFilterList){var b=this._dataList.getFilteredColData(t.colID);d=this.getUniqueValueOfArray(b).slice(0),p||r.length==b.length||(f=!1)}for(var y=[{id1:p,id2:g},{id1:f,id2:m
}],v=/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,w=this,S=this._dataList.options.useNull,_=0;_<u.length;_++){var C={};if(d){var x,I=!1;"string"==typeof(x=a.useCustomFormatter&&a.mainGrid.options.useFilterListFormat?n[_]:a.itemArr?a.itemHash[u[_]]:u[_])&&(x=x.replace(v,(function(t){return w.replacechar(t)}))),S&&x===this.filterNullStr&&(x="null");for(var T=d.length-1;T>-1;T--){if(x==d[T]){I=!0,d.splice(T,1);break}if("string"==typeof d[T]){for(var k=!1,L=0;L<l.length;L++)if(l[L]==d[T]){k=!0;break}if(k&&(u[_]==this.options.useFilterEmptyMsg||u[_]==this.filterEmptyStr)){I=!0;break}}}C.id1=I}else C.id1=!p;var A=u[_],D=n[_];(this.options.useFilterSearch||this.options.useSearchFilter)&&this.options.useFilterListFormat&&a.useCustomFormatter&&(A=this._applyFormatter(a,D)),C.id2=A,(this.options.displayValueOnUseFilterList||this.options.useFilterListFormat&&a.useCustomFormatter)&&(C.id3=n[_]),y.push(C)}var W=0,q=this.headerInfoHash[t.headerID];if(q&&q.options.hideCustomFilter&&(y.shift(),W=1),h){var M=!0,E=y;for(_=2-W;_<E.length;_++)if(!E[_].id1){M=!1;break}y[1-W].id1=!!M}return this._dataList.getDataLength()||(y[1-W].id1=!1),y}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.changeItemValue=function(t,e,i,o){try{var r,n=[],l=!1,h=!1,d=this.getCellInfo(e),c=d.options.inputType;"custom"==c&&(d=d.cellManagerHashByRowIndex[d.editRowIndex]?d.cellManagerHashByRowIndex[d.editRowIndex]:d),d.itemHash={},!1===o||(r=d.options.filterDisplayMode?d.options.filterDisplayMode:"label");var u=this._dataList.options.useNull;if(d.itemsetObj&&""!=d.itemsetObj.nodeset&&d.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&(!d.itemArr||d.itemArr.length<1)){d.itemArr=[];var p=d.itemsetObj.nodeset.replace("data:",""),g=this.modelControl.getDataComp(p),m=function(t,e){var i=null===t?"":t,o=null===e?"":e,s=d.options.delimiter?d.options.delimiter:"";switch(r){case"value delim label":i=o+s+i;break;case"label delim value":i=i+s+o;break;case"value":i=o}return i};if(g&&WebSquare.idCache[g.uuid])switch(u=g.options&&!0===g.options.useNull,g.initializeType){case"linkedDataList":for(var f=[],b={},y=g.getAllNoFilteredData(),v=0;v<g._dataList.getDataLength();v++){var w=y[v*g.cellIdList.length+g.bodyIdColIndexMap[d.itemsetObj.label]],S=y[v*g.cellIdList.length+g.bodyIdColIndexMap[d.itemsetObj.value]];if(a.Z.isNumber(S)&&(S+=""),u&&null===S){if(null===b[w])continue}else if(b[w]==S)continue;b[w]=S,f.push({orgLabel:w,label:m(w,S),value:S})}d.itemArr=f;break;case"dataList":for(f=[],b={},v=0;v<g.getDataLength();v++){w=g.getCellData(v,d.itemsetObj.label),S=g.getCellData(v,d.itemsetObj.value);if(a.Z.isNumber(S)&&(S+=""),u&&null===S){if(null===b[w])continue}else if(b[w]==S)continue;b[w]=S,f.push({orgLabel:w,label:m(w,S),value:S})}d.itemArr=f;break;case"dataMap":for(f=[],b={},v=0;v<g.getCount();v++){w=g.get(d.itemsetObj.label),S=g.get(d.itemsetObj.value);if(a.Z.isNumber(S)&&(S+=""),u&&null===S){if(null===b[w])continue}else if(b[w]==S)continue;b[w]=S,f.push({orgLabel:w,label:m(w,S),value:S})}d.itemArr=f}}if(d.itemArr){if("customFormatted"==t){for(v=0;v<i.length;v++){var _=this._applyFormatter(d,i[v]);n.push(_),d.itemHash[_]=i[v]}return n}var C="label"==t?"value":"label";"label"==t&&!1===o&&d.itemArr.length>0&&d.itemArr[0].orgLabel&&(t="orgLabel");var x=d.itemArr.slice(0);for(v=0;v<i.length;v++){var I=i[v];if(a.Z.isNumber(I)&&(I+=""),"custom"==c)-1==this.modelControl.getDataComp(d.dataComp).dataArr.indexOf(i[v])&&n.push(i[v]);for(var T=x.length-1;T>-1;T--){var k=x[T];if(k[C]==I){n.push(k[t]),x.splice(T,1),"label"==t&&(d.itemHash[k[t]]=k[C]);break}if("label"==t||"orgLabel"==t){if(u&&null==I&&!h){h=!0,n.push(this.filterNullStr);break}if(!I||this.useFilterEmptyValueInfo[I]){l||(l=!0,n.push(this.filterEmptyStr));break}}else if("value"==t&&I==this.filterEmptyStr){for(var L in this.useFilterEmptyValueInfo)n.push(L);break}}}}else{if("customFormatted"==t){for(v=0;v<i.length;v++){_=this._applyFormatter(d,i[v]);n.push(_),d.itemHash[_]=i[v]}return n}for(v=0;v<i.length;v++){if("label"==t){
if(u&&null==i[v]&&!h){h=!0,n.push(this.filterNullStr);continue}if(!i[v]&&0!==i[v]||this.useFilterEmptyValueInfo[i[v]]){l||(l=!0,n.push(this.filterEmptyStr));continue}}else if("value"==t&&i[v]==this.filterEmptyStr){for(var L in this.useFilterEmptyValueInfo)n.push(L);continue}n.push(i[v]),d.itemHash[i[v]]=i[v]}}return n}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.resizeGridList=function(){try{var t,e;if(this.groupbyFilterList)return;if(!this.customFilterList)return;t=this.customFilterList,e=this.customFilterScrollView;var i=document.getElementById(this.id+"_"+t.currentHeaderID);if(i){var o,r=i.clientWidth,n=(this.options.useFilterSearch?t.listRowObjArr.length+1:t.listRowObjArr.length)*(this.options.filterListRowHeight+1)-1,l=e.render.clientHeight,h=WebSquare.style.getSize(this.customFilterScrollView.render,"outerwidth")-WebSquare.style.getSize(this.customFilterScrollView.render,"width"),d=WebSquare.style.getRelativeTop(i,this.render)+i.offsetHeight+1,u=WebSquare.style.getRelativeLeft(i,this.render),p=this.getElementById(this.id+"_customFilter_scrollView_container");this.options.useSearchFilter&&WebSquare.style.setStyle(p,"overflow-x","auto");var g=this.getElementById(this.id+"_size_y").clientWidth,m=this.getElementById(this.id+"_body_table"),f=WebSquare.style.getSize(m,"outerwidth")-WebSquare.style.getSize(m,"width"),b=this.getElementById(this.id+"_dataLayer").clientWidth-i.offsetLeft-h-f,y=r=this.customFilterList.getMaxItemWidth();if(a.Z.getBoolean(this.getHeaderInfo(t.currentHeaderID).options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList))if(this.customFilterList){i.clientWidth>r&&(r=i.clientWidth);var v=document.getElementById(this.id+"_dataLayer"),w=v.clientWidth,S=WebSquare.style.getRelativeLeft(v,this.render);o=r+(l<t.render.clientHeight?g:0),this.options.useFilterSearch&&n>l&&(r+=g,o+=g),b<o?((w=v.clientWidth)<o?(u=S,o=w):u=S+w-o-h,b=w):o=Math.min(b,o),this.options.useSearchFilter?r>y&&WebSquare.style.setStyle(p,"overflow-x","hidden"):this.options.useFilterSearch&&WebSquare.style.setStyle(p,"overflow-x","hidden")}else this.groupbyFilterList&&(o=r=y);else if(this.customFilterList){var _=parseInt(this.headerInfoHash[t.currentHeaderID].options.filterListWidth);_>0?r<(o=_-h)&&(r=o):this.options.filterListWidth>0?r<(o=this.options.filterListWidth-h)&&(r=o):(o=i.clientWidth,i.clientWidth>r&&(r=i.clientWidth)),b<o&&(o=b),(this.options.useFilterSearch||r>y)&&WebSquare.style.setStyle(p,"overflow-x","hidden")}if(e.setPosition(u,d-1),t.setSize(r,null),a.Z.getBoolean(this.getHeaderInfo(t.currentHeaderID).options.autoFitFilterList)||a.Z.getBoolean(this.options.autoFitFilterList))if(document.getElementById(this.id+"_scrollX_div").clientHeight>0){var C=document.getElementById(this.id+"_head_table"),x=v.offsetHeight-C.offsetHeight;x<l&&(this._saveScrollViewHeight=(0,c.A)({},i.id,l),l=x)}else if(this._saveScrollViewHeight&&i.id in this._saveScrollViewHeight){var I=this._saveScrollViewHeight[i.id];l!==I&&(l=I)}e.setSize(o,l)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.showGroupbyHeaderGhost=function(t,e){try{var i=this.getHeaderValue(e);WebSquare.dragdrop.gDragManager.activate(t,null,{id:this.id+"_drag",className:"w2grid_groupbyZone_header_drag",contents:i,delay:15,applyMousePosition:!0,onDrop:function(t,e,i,o,s,r,a){}})}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setAdaptiveColumnVisible=function(t,e){try{if(this.hiddenAdaptiveList[t]==!e||t>=this.hiddenAdaptiveList.length)return;var i=this,o=function t(e){var o=i.getColumnID(e),s=null!=i.bodyToHeaderRelation[o]?i.getHeaderLayer(i.bodyToHeaderRelation[o]):null;return null!=s?s:t(e-1)}(t),r=document.getElementsByClassName(this.id+"_columnstyle_"+(t-this.defaultColCnt)+"_"),n=this.getColumnStyleValue(t-this.defaultColCnt,"height");if(null==this.oldOptions.headerColBorder&&null!=o&&(this.oldOptions.headerColBorder=WebSquare.style.getStyle(o,"border-top")),
null==this.oldOptions.headerPaddingTop&&null!=o&&(this.oldOptions.headerPaddingTop=WebSquare.style.getStyle(o,"padding-top")),null==this.oldOptions.headerPaddingBottom&&null!=o&&(this.oldOptions.headerPaddingBottom=WebSquare.style.getStyle(o,"padding-bottom")),r.length>0&&""!=this.oldOptions.bodyColBorder&&(this.oldOptions.bodyColBorder=WebSquare.style.getStyle(r[0],"border-top")),this.hasSubtotal)for(var l=0,h=0,d=this.drawedSubtotal[0][0].childNodes,c=0;c<d.length&&((w=parseInt(d[c].getAttribute("colSpan")))||(w=1),!(h<=t&&t<h+w));c++)h+=w,l++;if(this.hasFooter){var u=0,p=0,g=this.htmlInfo.foot.rowArr;for(c=0;c<g.length;c++)for(var m=g[c],f=0;f<m.length;f++){var b=m[f];if((w=parseInt(b.colSpan))||(w=1),p<=t-this.defaultColCnt&&t-this.defaultColCnt<p+w)break;p+=w,u++}}if(e){o.style.height=n,o.style.removeProperty("padding"),o.style.borderTop=this.oldOptions.headerColBorder;for(c=0;c<r.length;c++)r[c].style.height=n,r[c].style.removeProperty("padding"),r[c].style.borderTop=this.oldOptions.bodyColBorder;if(this.setAdaptiveColumnStyle(t,"height",n),this.setAdaptiveColumnStyle(t,"padding",""),this.setAdaptiveColumnStyle(t,"border-top",this.oldOptions.bodyColBorder),this.hasFooter)for(c=0;c<g.length;c++){b=g[c][u];var y=parseInt(this.getFooterStyle(b.id,"height"))+parseInt(o.offsetHeight);!(w=parseInt(b.colSpan))||parseInt(this.getFooterStyle(b.id,"height"))<=0?(this.setFooterStyle(b.id,"height",o.style.height),this.setFooterStyle(b.id,"padding",o.style.padding),this.setFooterStyle(b.id,"borderTop",o.style.borderTop)):this.setFooterStyle(b.id,"height",y+"px")}if(this.hasSubtotal)for(c=0;c<this.drawedSubtotal.length;c++)for(f=0;f<this.drawedSubtotal[c].length;f++){var v=this.drawedSubtotal[c][f].childNodes;y=parseInt(v[l].style.height)+parseInt(o.offsetHeight);!(w=parseInt(v[l].getAttribute("colSpan")))||parseInt(v[l].style.height)<=0?(v[l].style.height=o.style.height,v[l].style.padding=o.style.padding,v[l].style.borderTop=o.style.borderTop):v[l].style.height=y+"px"}}else{if(this.hasFooter)for(c=0;c<g.length;c++){b=g[c][u],y=parseInt(this.getFooterStyle(b.id,"height"))-parseInt(o.offsetHeight);!(w=parseInt(b.colSpan))||y<=0?(this.setFooterStyle(b.id,"height","0px"),this.setFooterStyle(b.id,"padding","0px"),this.setFooterStyle(b.id,"borderTop","0px")):this.setFooterStyle(b.id,"height",y+"px")}if(this.hasSubtotal)for(c=0;c<this.drawedSubtotal.length;c++)for(f=0;f<this.drawedSubtotal[c].length;f++){var w;v=this.drawedSubtotal[c][f].childNodes,y=parseInt(v[l].style.height)-parseInt(o.offsetHeight);!(w=parseInt(v[l].getAttribute("colSpan")))||y<=0?(v[l].style.height="0px",v[l].style.padding="0px",v[l].style.borderTop="0px"):v[l].style.height=y+"px"}var S=parseInt(o.colSpan,10),_=!1;if(S>1)for(var C=a.Z.getDataPrefix("header_id"),x=this.headerToBodyRelation[o.getAttribute(C)],I=this.getColumnIndex(x),T=I;T<I+S;T++)this.hiddenList[T]||(_=!0);(S<2||!_)&&(o.style.height="0px",o.style.padding="0px",o.style.borderTop="0px");for(c=0;c<r.length;c++)r[c].style.height="0px",r[c].style.padding="0px",r[c].style.borderTop="0px";this.setAdaptiveColumnStyle(t,"height","0px"),this.setAdaptiveColumnStyle(t,"padding","0px"),this.setAdaptiveColumnStyle(t,"border-top","0px")}parseInt(o.colSpan,10)>1&&this.setAdaptiveGridHeaderHeight(),this.hiddenAdaptiveList[t]=!e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.applyFilterHistory=function(){try{if(this.getElementById(this.id+"_groupbyFilterBox_apply").checked=this.groupbyFilterBox_history.length>0,!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var t=this.groupbyFilterBox_select.getSelectedIndex(),e=this.groupbyFilterBox_history[t];if(e.groupbyOptions)this.groupby(JSON.parse(e.groupbyOptions,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:e}catch(t){return e}}))),this.customFilterList&&(this.customFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),
e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={};else{for(var i in this.groupbyStatus.grouped&&this.clearGroupby(),this._dataList.clearFilter(e.filterOption.length>0),this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],this.headerInfoHash){var o=this.getElementById(this.id+"_"+i+"_filter");o&&WebSquare.style.removeClass(o,"w2grid_customFilter_filter")}this.refreshCustomFilterHistory(t),this._dataList.broadcast({gridView:["clearHeaderSort"]}),this._dataList.broadcast({gridView:["notifyMultisort"]})}}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._refreshCustomFilterHistory=function(t,e,i){try{for(var o=t?JSON.parse(t,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:"object"===(0,l.A)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):[],r="",a="",n=0;n<o.length;n++){var h=o[n];h.noRefresh=n<o.length-1,h.keepTop=!1,h.internal=!0;var d="";for(var c in h.bodyIdColIndexMap)h.bodyIdColIndexMap[c]===h.colIndex&&(d=c);"sort"!==h.type&&(r=',"'+d+'"'+r,a=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+a),this._dataList.setFilter(h);var u=this.bodyToHeaderRelation[this._dataList.cellIdList[h.colIndex]],p=this.getElementById(this.id+"_"+u+"_filter");p&&WebSquare.style.addClass(p,"w2grid_customFilter_filter")}r=r.slice(1)+"],",a=a.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var g='{"column":['+r+'"filteredRowIndexArr":['+a;this.customFilterList.filterHistory=JSON.parse(g),this.customFilterList.customFilterListFilterInfo=e?JSON.parse(e,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:"object"===(0,l.A)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):{},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),this.customFilterStatusObj=i?JSON.parse(i):{},this.groupbyStatus.grouped||this.drawHeaderSortImages()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.refreshCustomFilterHistory=function(t){try{for(var e=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()],i="",o="",r=0;r<e.filterOption.length;r++){var a=e.filterOption[r];a.noRefresh=r<e.filterOption.length-1,a.keepTop=!1,a.internal=!0;var n="";for(var h in a.bodyIdColIndexMap)a.bodyIdColIndexMap[h]===a.colIndex&&(n=h);"sort"!==a.type&&(i=',"'+n+'"'+i,o=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+o),this._dataList.setFilter(a);var d=this.bodyToHeaderRelation[this._dataList.cellIdList[a.colIndex]],c=this.getElementById(this.id+"_"+d+"_filter");c&&WebSquare.style.addClass(c,"w2grid_customFilter_filter")}i=i.slice(1)+"],",o=o.slice(1)+"]}",this.customFilterList||this.createCustomFilterList(null,!0);var u='{"column":['+i+'"filteredRowIndexArr":['+o;this.customFilterList.filterHistory=JSON.parse(u),e.customFilterListFilterInfo?this.customFilterList.customFilterListFilterInfo=JSON.parse(e.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:"object"===(0,l.A)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}})):this.customFilterList.customFilterListFilterInfo={},this.groupbyFilterList&&(this.groupbyFilterList.filterHistory={column:[],filteredRowIndexArr:[]}),e.customFilterStatusObj?this.customFilterStatusObj=JSON.parse(e.customFilterStatusObj):this.customFilterStatusObj={}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.clearFilterHistory=function(){try{this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!1,this.groupbyFilterBox_history=[],this.groupbyFilterBox_select.removeAll(),
this.groupbyStatus.grouped?this.clearGroupby():this._dataList.clearFilter()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.refreshGroupbyFilterBox=function(){try{var t=this._dataList.getFilterList(),e="",i=!(!this.options.customFilterBox||!this.groupbyStatus.groupbyOptions),o=i?"[Groupby] ":"";if(!this.options.customFilterBox&&!this.groupbyStatus.groupbyOptions)return;e+=o,e+="(";for(var r,n=null,h="",d=!0,c=o,u=!1,p=this.options.groupbyFilterBoxLabelSize,g=this._dataList.options.useNull,m=0;m<t.length;m++){var f="regExp"===(k=t[m]).type,b="func"===k.type&&k.param;if(f||b){d||(e+=" "+k.condition+" ",c+=k.condition),e+="(";var y=this._dataList.cellIdList[k.colIndex],v=this.getHeaderValue(this.bodyToHeaderRelation[y])||y;if(f){var w=this.dataList.getColData(y,this._dataList.filteredRowIndexArr);if((D=this.getUniqueValueOfArray(w)).length<=0){if(a.Z.isNullReg(k.key)){n=y,h=v;break}continue}for(var S=0,_=0;_<D.length;_++){var C=D[_];g&&null==C?C=this.filterNullStr:this.useFilterEmptyValueInfo[C]&&(C=this.filterEmptyStr),S>0&&(S<p&&(e+=" OR "),c+="OR"),S<p&&(e+=v+" = "+C),c+=y+"="+C,S++}S>p&&(e+=" OR ... ("+(S-p)+" omitted)")}else if(b)for(_=0;_<k.param.length;_++){null!=(M=k.param[_]).radio&&(e+=1===M.radio?" OR ":" AND ",c+=1===M.radio?" OR ":" AND ");var x="string"==typeof M.auto?M.auto.replace(/[\\](?![\\])/g,""):M.auto;e+=v+" "+this.selectboxItemSet[M.select-1]+" "+x,c+=y+" "+this.selectboxItemSet[M.select-1]+" "+M.auto}e+=")",d=!1}}if(e+=")",n&&(e=o+"("+h+" = NULL)",c=o+n+"_NULL_"),"()"!==e&&e!==o+"()"||(e=o+"ALL",c=o+"_ALL_",u=!0),!u&&this.options.groupbyFilterBoxFormatter){var I=a.Z.getGlobalFunction(this.options.groupbyFilterBoxFormatter,this.scope_id);if("function"==typeof I){var T=[];if(c===o+n+"_NULL_")T.push({header:h,filter:[]});else for(m=0;m<t.length;m++){var k;f="regExp"===(k=t[m]).type,b="func"===k.type&&k.param;if(f||b){y=this._dataList.cellIdList[k.colIndex];var L=this.getHeaderValue(this.bodyToHeaderRelation[y])||y;if(f){var A={header:L,filter:[]},D=(w=this.dataList.getColData(y,this._dataList.filteredRowIndexArr),this.getUniqueValueOfArray(w)),W=[];for(_=0;_<D.length;_++){C=D[_];g&&null==C?C=this.filterNullStr:this.useFilterEmptyValueInfo[C]&&(C=this.filterEmptyStr),W.push(C)}var q=this.getCellInfo(y);A.filter.push({operator:"in",values:W,labels:q.itemsetObj||q.itemArr?this.changeItemValue("label",y,D.slice(0)):W}),T.push(A)}else if(b){for(A={header:L,filter:[]},_=0;_<k.param.length;_++){var M=k.param[_],E={};null!=M.radio&&(E.gate=1===M.radio?"or":"and"),E.operator=this.selectboxItemSet[M.select-1];x="string"==typeof M.auto?M.auto.replace(/[\\](?![\\])/g,""):M.auto;E.values=x;q=this.getCellInfo(y);E.labels=q.itemsetObj||q.itemArr?this.changeItemValue("label",y,[x])[0]:x,A.filter.push(E)}k.param.length>0&&T.push(A)}}}var R=I.call(this,T,i);null!=R&&!1!==R&&(e=R)}}if(!u&&!1===this.groupbyFilterBox_select.setValueNM(c))this.groupbyFilterBox_select.addItem(c,e),this.groupbyFilterBox_select.setValueNM(c),c===o+"_ALL_"?r={filterOption:[],customFilterStatusObj:"{}"}:(r={filterOption:t,customFilterStatusObj:JSON.stringify(this.customFilterStatusObj)},this.groupbyStatus.grouped&&this.groupbyStatus.filter?r.customFilterListFilterInfo=JSON.stringify(this.groupbyStatus.filter,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})):this.customFilterList&&this.customFilterList.customFilterListFilterInfo&&(r.customFilterListFilterInfo=JSON.stringify(this.customFilterList.customFilterListFilterInfo,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})))),this.groupbyStatus.groupbyOptions&&(r.groupbyOptions=this.groupbyStatus.groupbyOptions),this.groupbyFilterBox_history.push(r);this.getElementById(this.id+"_groupbyFilterBox_apply").checked=!u}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getMouseColumnIndex=function(t){try{var e=t.colIndex,i=t.offsetX,o=t.offsetLeft,r=t.colSpan
;if(i-o<(l=.3*this.colWidthList[e]>10?10:parseInt(.3*this.colWidthList[e],10))&&0!=e)e--;else{for(var a=e-1;a>=0&&!0===this.hiddenList[a];a--)r--;for(var n=0;n<r;n++){var l,h=parseInt(this.colGroup.bodyColList[e+n].style.width,10);if((o+=h)-(l=.3*h>10?10:parseInt(.3*h,10))<i&&i<o+l){e+=n;break}}}return e}catch(t){return s.Y.printStackTrace(t,null,this),e}},m.prototype._useRole=function(){try{return!a.Z.isMobile()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype.setAdaptive=function(){try{var t=this.options.adaptive,e=parseInt(this.options.adaptiveThreshold)||480;for(var i in this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=a.Z._getBrowserWidth()?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}"crosstab"==t&&(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10||(a.Z._getBrowserWidth()<=e?this.addAdaptive():this.removeAdaptive()))}catch(t){s.Y.printStackTrace(t)}},m.prototype.setAdaptiveFrame=function(t){try{var e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;for(var o in this.hideThresholdObj){parseInt(this.hideThresholdObj[o])>=a.Z._getBrowserWidth()?this.setColumnVisible(o,!1):this.setColumnVisible(o,!0)}"crosstab"==e&&(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10||(t&&0<t.newWidth&&t.newWidth<=i?this.addAdaptive():this.removeAdaptive()))}catch(t){s.Y.printStackTrace(t)}},m.prototype.addAdaptive=function(){try{var t,e=this.options.adaptive;for(var i in"crosstab"==e&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=a.Z._getBrowserWidth()?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}if(!this.hasClass(t)){this.oldOptions.visibleRowNum=this.options.visibleRowNum,this.oldOptions.drawType=this.options.drawType,this.options.visibleRowNum="all",this.options.drawType="virtual",this.adjustDraw(this.lastIndex),this.addClass(t),this.setAdaptiveGridBodyHeight(),this.setAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight(),this.options.autoScope&&this._setScope(!0);for(var o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}if(this.options.adaptiveSlideHeader){var r=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody");this.slideHeadObj||(this.slideHeadObj={},this.slideHeadObj.render=r,this.slideHeadObj.headTableWidth=r.offsetWidth,this.slideHeadObj.hidden=!1),"absolute"!=this.slideHeadObj.render.style.position?n.scrollWidth>n.clientWidth+this.slideHeadObj.headTableWidth&&(this.slideHeadObj.render.style.position="absolute",this.options.adaptiveSlideHeaderOnScroll||($(this.slideHeadObj.render.firstChild).animate({width:"hide"}),this.slideHeadObj.hidden=!0)):n.scrollWidth==n.clientWidth&&(a.Z.clearTimeout(this.id+"_adaptiveSlideHeader"),this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1)}}catch(t){s.Y.printStackTrace(t)}},m.prototype.removeAdaptive=function(){try{var t;if("crosstab"==this.options.adaptive&&(t=this.hasFooter?"w2grid_adaptive_crosstab w2grid_adaptive_crosstab_footer":"w2grid_adaptive_crosstab"),this.options.adaptiveSlideHeader&&this.slideHeadObj&&(this.slideHeadObj.render.style.position="",this.slideHeadObj.render.firstChild.style.display="",this.slideHeadObj.hidden=!1),this.hasClass(t)){this.options.visibleRowNum=this.oldOptions.visibleRowNum,this.options.drawType=this.oldOptions.drawType;for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);if(this.removeClass(t),this.removeAdaptiveGridBodyHeight(),this.removeAdaptiveGridHeaderHeight(),this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),
this.options.autoScope&&this._setScope(!1),this._isBrowserScroll()){if(this._refreshDataChanged(),this._isHybridScroll())document.getElementById(this.id+"_scrollY_div").scrollTop=0}else if(""!=this.options.visibleRowNum){this.focusedCell=[],this.initializeDrawController(),this.dataRowList=[],this.drawedRowLength=0,this.lastDisplayedRow=-1;for(var i=this.getElementById(this.id+"_body_tbody");i.firstChild;)i.removeChild(i.firstChild);if(this.options.senseReader){for(e=0;e<this.adaptiveEmbeddedInputIdList.length;e++)delete this.dom[this.adaptiveEmbeddedInputIdList[e]];this.adaptiveEmbeddedInputIdList=[]}this.drawDataTable(0)}this.event.removeEvent(this.id+"_body_tbody","onscroll")}}catch(t){s.Y.printStackTrace(t)}},m.prototype._setScope=function(t){try{for(var e=document.getElementById(this.id).getElementsByClassName(this.options.headerTdClass),i=0;i<e.length;i++){var o=e[i],r=o.getAttribute("scope");t&&"col"===r?o.setAttribute("scope","row"):t||"row"!=r||o.setAttribute("scope","col")}}catch(t){s.Y.printStackTrace(t)}},m.prototype.doAdaptive=function(){try{if(""!=this.options.adaptive)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="9999999",this.setAdaptive(),this.adaptiveDoneBy="doAdaptive"}catch(t){s.Y.printStackTrace(t)}},m.prototype.undoAdaptive=function(){try{if("doAdaptive"!=this.adaptiveDoneBy)return;this.options.adaptive="crosstab",this.options.adaptiveThreshold="1",this.setAdaptive(),this.options.adaptive="",this.options.adaptiveThreshold="",this.adaptiveDoneBy=""}catch(t){s.Y.printStackTrace(t)}},m.prototype.checkRefreshAdaptive=function(){try{var t=!1;if(!(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10)){var e=WebSquare.BootLoader.fullViewed||!1,i=a.Z.fullViewed||!1;if(!e&&!i&&this.checkAdaptiveGridType()&&(""!=this.options.adaptive||0!=Object.keys(this.hideThresholdObj).length)){var o=this.options.adaptive,n=parseInt(this.options.adaptiveThreshold)||480;"crosstab"==o&&a.Z._getBrowserWidth()<=n&&(t=!0)}}return t}catch(t){s.Y.printStackTrace(t)}},m.prototype.refreshAdaptive=function(t){try{if(!0===this.checkRefreshAdaptive())if(t&&!0===t.simple){for(var e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!0);for(var i in this.hasSubtotal&&this.removeAdaptiveGridSubtotalHeight(),this.hideThresholdObj){parseInt(this.hideThresholdObj[i])>=a.Z._getBrowserWidth()?this.setColumnVisible(i,!1):this.setColumnVisible(i,!0)}this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(e=this.defaultColCnt;e<this.hiddenList.length;e++)1==this.hiddenList[e]&&this.setAdaptiveColumnVisible(e,!1)}else this.removeAdaptive(),this.addAdaptive()}catch(t){s.Y.printStackTrace(t)}},m.prototype._applyFormatter=function(t,e){try{var i=a.Z.getGlobalFunction(t.options.customFormatter,this.scope_id),o=e,r=e;if("text"==t.options.inputType)(t.options.displayFormat||t.options.displayFormatter||t.options.ioFormat)&&(r=t.formatter.format(e));else if("select"==t.options.inputType)for(var n=t.itemArr.slice(0),l=0;l<=n.length-1;l++)if(n[l].value==e){r=n[l].label;break}"function"==typeof(i=a.Z.getGlobalFunction(t.options.customFormatter,this.scope_id))&&(o=i.call(t.mainGrid,o,r));var h=this._dataList.options.useNull,d=o;return h&&null==o?d=this.filterNullStr:""==o&&(d=this.filterEmptyStr),d}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getScrollYWidth=function(t){try{var e=0,i=document.getElementById(this.id+"_scrollY_div");if(!0!==this._isBrowserScroll()||this.options.autoFitFixYScroll)e="offsetWidth"===t?i.offsetWidth:this.options.autoFitFixYScroll?this.scrollLayerWidthSize:parseInt(i.style.width,10);else{var o=this.id+"_dataLayer",r=0;!0===this._isHybridScroll()&&(i.offsetWidth>this._getEpsilon()?(o=this.id+"_scrollY_div",r=1):o=this.id+"_main_div");var a=document.getElementById(o);e=a.offsetWidth-a.clientWidth+r}return e}catch(t){return s.Y.printStackTrace(t,null,this),0}},m.prototype._autoFitRefreshNative=function(){try{
if(!0===this._isNativeScroll())this._getScrollYWidth()!==this._bScrollYWidth&&this._setAutoFit()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._isBrowserScroll=function(){try{return"native"===this.options.drawType||"hybrid"===this.options.drawType}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._isNativeScroll=function(t){try{return"X"===t?!0===this.options.scrollXNative:"both"===t?"native"===this.options.drawType||!0===this.options.scrollXNative:"native"===this.options.drawType}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._isHybridScroll=function(){try{return"hybrid"===this.options.drawType}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridRowNum=function(){try{return Math.abs(this.options.hybridRowNum)||1}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridVisibleHeightInfo=function(t){try{if(t<=0)return{height:0,cnt:0};var e=document.getElementById(this.id+"_body_tbody").childNodes;isNaN(t)&&(t=this._getHybridRowNum(),this.oneRowLength>1&&(t*=this.oneRowLength));for(var i=0,o=0,r=0,a=0;a<e.length&&t>0;a++){var n=e[a].offsetHeight,l=n>0;if(l&&(i+=n),!this.hasSubtotal||null==e[a].getAttribute("data-subtotal")){if(--t<=0||a>=e.length-1)for(var h=0;h<e[a].childNodes.length;h++){var d=e[a].childNodes[h].clientHeight;if(d>0){o=n-d;break}}l||r++}}return{height:i,cnt:t+r,borderHeight:o}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setHybridVisibleHeight=function(t,e){try{null==t&&(t=this._hybridRowIndex);var i=this._getHybridLastIndex();null==e&&(e=this._getHybridVisibleHeightInfo());var o=e.height,r=this._hybridScrollHash[t];null==r&&(r=this._hybridScrollHeight),this._hybridScrollHash[t]=o;var a=this._hybridScrollDupHeight,n=0;t===i&&(this._hybridScrollDupHeight=this._getHybridDupHeight(),n=this._hybridScrollDupHeight-a);for(var l=0,h=!0,d=0,c=0;c<=i;c++){if(null==this._hybridScrollHash[c]){h=!1;break}d+=this._hybridScrollHash[c]}var u=document.getElementById(this.id+"_size_y"),p=this.getFooterHeight();if(!0!==this._hasHybridScroll()){var g=document.getElementById(this.id+"_body_table"),m=document.getElementById(this.id+"_main_div");l=Math.max(g.offsetHeight,m.offsetHeight-1)+p+this._getHybridScrollXHeight()-u.offsetHeight+1,this._hybridScrollLastTop=0}else if(!0===h){l=d+document.getElementById(this.id+"_head_table").offsetHeight-u.offsetHeight-this._hybridScrollDupHeight+p+this._getHybridScrollXHeight()+1,this._hybridScrollLastTop=d-this._hybridScrollHash[i]-this._getHybridLastSubtotalHeight()-e.borderHeight}else l=o-r-n;if(0!==l&&!0===this._useHybridScroll()){var f=u.offsetHeight+l;this._setHybridSizeY(f)}return l}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridVisibleTop=function(){try{var t=document.getElementById(this.id+"_scrollY_div"),e=1;return a.Z.isIEAllVersion()||(e=document.getElementById(this.id+"_head_table").offsetHeight),t.scrollTop-e-this._hybridScrollYPos}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._adjustHybridEditedPosition=function(t,e){try{isNaN(e)&&(e=3);var i=document.getElementById(t),o=document.getElementById(this.id+"_head_table").offsetHeight;if(i.offsetTop<o)i.style.top=o+"px";else if(i.offsetTop+i.offsetHeight>this.render.offsetHeight){var r=document.getElementById(this.id+"_scrollX_div").offsetHeight;i.style.top=Math.max(this.render.offsetHeight-i.offsetHeight-r-e,o)+"px"}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridLastIndex=function(){try{var t=this.getDataLength(),e=0,i=t;return this.oneRowLength>1&&(i*=this.oneRowLength),i>this._getHybridTrCount()&&(e=Math.max(Math.ceil(t/this._getHybridRowNum())-1,0)),e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._hasHybridScroll=function(){try{if(document.getElementById(this.id+"_body_tbody").offsetHeight<this._getEpsilon())return!1;var t=this.getDataLength(),e=this._getHybridTrCount(),i=this._getHybridRowNum();return this.oneRowLength>1&&(i*=this.oneRowLength,t*=this.oneRowLength),e>i&&t>e}catch(t){
s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridTrCount=function(){try{var t=document.getElementById(this.id+"_body_tbody").childNodes,e=t.length;if(this.hasSubtotal)for(var i=0;i<t.length;i++)null!=t[i].getAttribute("data-subtotal")&&e--;return e}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridDupHeight=function(){try{if(!0!==this._hasHybridScroll())return 0;var t=this._getHybridRowNum(),e=this.getDataLength(),i=e-Math.floor(e/t)*t,o=0;if(i>0){var r=t-i;this.oneRowLength>1&&(r*=this.oneRowLength),o=this._getHybridVisibleHeightInfo(r).height}return o}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridLastSubtotalHeight=function(){try{var t=0;if(this.hasSubtotal)for(var e=this.lastSubtotalRow;null!=e&&null!=e.getAttribute("data-subtotal");e=e.previousSibling)t+=e.offsetHeight;return t}catch(t){return s.Y.printStackTrace(t,null,this),0}},m.prototype._setHybridYPosition=function(t){try{if(isNaN(t))return;var e=a.Z.isIEAllVersion(),i=e?"_body_table":"_body_tbody",o=document.getElementById(this.id+i);if(!o||!o.style)return;if("relative"!=o.style.position&&(o.style.position="relative;"),o.style.transform="translate3d(0,"+-t+"px,0)",e)for(var r=o.getElementsByTagName("th"),n=0;n<r.length;n++){var l=r[n];"relative"!=l.style.position&&(l.style.position="relative"),l.style.transform="translate3d(0,"+t+"px,0)";var h=parseInt(l.style.zIndex);(h<10||isNaN(h))&&(l.style.zIndex=10)}}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._getHybridWheelDeltaY=function(t){try{var e=t;this._hybridWheelCntY>0?this._hybridWheelCntY++:this._hybridWheelCntY=1;var i=this._hybridWheelCntY/10,o=Math.min(i,1),r=Math.max(i,1);r>1&&a.Z.isMobile()&&(r=1+.1*r),r=Math.min(r,5),e=Math.round(e*(l=o,1-Math.pow(1-l,3))*r);var n=this.uuid;return a.Z.setTimeout((function(){WebSquare.idCache[n]._hybridWheelCntY=0}),{key:this.id+"_getHybridWheelDeltaY",delay:100}),e}catch(e){return s.Y.printStackTrace(e,null,this),t}var l},m.prototype._setHybridWheelDeltaY=function(t){try{var e=document.getElementById(this.id+"_scrollY_div"),i=e.scrollTop+this._getHybridWheelDeltaY(t);e.scrollTop=i}catch(e){return s.Y.printStackTrace(e,null,this),t}},m.prototype._setHybridWheelDeltaX=function(t){try{var e=document.getElementById(this.id+"_scrollX_right"),i=e.scrollLeft+t;e.scrollLeft=i}catch(t){return s.Y.printStackTrace(t,null,this),deltaY}},m.prototype._getHybridScrollXHeight=function(){try{var t=0,e=document.getElementById(this.id+"_scrollX_div");return null!=e&&(t=e.offsetHeight),t}catch(t){return s.Y.printStackTrace(t,null,this),0}},m.prototype._drawDataHybrid=function(t,e){try{if(!0!==this._isHybridScroll())return this.drawData(t);void 0!==e&&null!=e||(e={});var i=this._getHybridRowNum(),o=this.getDataLength(),r=Math.floor(t/i),a=t-r*i;if(this._hybridRowIndex===r&&!0!==e.redraw)return!1;this._hybridRowIndex=r;var n=Math.min(r*i,o-i);n=Math.max(n,0),this.drawData(n),!0===e.redraw&&this.setScrollYHeightHybrid(),this._setHybridVisibleHeight();for(var l=0,h=0;h<r;h++){l+=null==this._hybridScrollHash[r]?this._hybridScrollHeight:this._hybridScrollHash[r]}if(a>0){this._getHybridVisibleHeightInfo(a);this.oneRowLength>1&&(a*=this.oneRowLength),l+=this._getHybridVisibleHeightInfo(a).height}e={scrollTop:l,maxRepeat:5,skipEndEdit:!0};return document.getElementById(this.id+"_scrollY_div").scrollTop=l,this.handleScrollYHybrid({},e),!0}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._useHybridScroll=function(){try{var t=document.getElementById(this.id+"_main_div"),e=document.getElementById(this.id+"_body_table"),i=this.getFooterHeight();return t.offsetHeight<e.offsetHeight+i}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setHybridSizeY=function(t,e){try{if(!0===this._useHybridScroll()){this.setOverflowYScroll();var i=document.getElementById(this.id+"_size_y");i.offsetHeight!==t&&(i.style.height=t+"px")}else this.setOverflowYHidden()}catch(t){s.Y.printStackTrace(t,null,this)}},m.prototype._setHybridDataLayerTop=function(){try{
var t=document.getElementById(this.id+"_dataLayer");0!==t.scrollTop&&(t.scrollTop=0)}catch(t){s.Y.printStackTrace(t,null,this)}};var f=function(){};f.prototype.setTableLayout=function(){try{this.initializeHead(),this.initializeFooter(),this.setDataLayerPosition(),this.arrangeOverflowXScroll(),this.handlerResize_drawInitializer(),this.setTrRowTable(),this.setTrSubtotalRowTable(),this.initialColWidthList=this.colWidthList.slice(),this.initialGridWidth=this.gridWidth,this._setAutoFit(),this.realRowDataLength=this.oneRowDataLength+this.defaultColCnt,this.associateHeaderBody(),this.options.columnMove&&this.createBlockedHeaderInfo(),this.lastDisplayedRow=-1;for(var t=0;t<this.oneRowDataLength;t++){var e=this.cellInfoHash2[this.tdIdList[t]],i=new WebSquare.uiplugin.cellInfo(e,this);"textarea"==i.options.inputType&&(this.isExistTextarea=!0),i.options.colMerge&&(this.isColMerge=!0,a.Z.getBoolean(this.options.colMergeAnd)&&(this.isColMergeAnd=!0),i.options.upperColumn&&(this.upperToLowerColumnRelation[i.options.upperColumn]||(this.upperToLowerColumnRelation[i.options.upperColumn]=[]),this.upperToLowerColumnRelation[i.options.upperColumn].push(i.options.id))),null!=i.options.maxLength&&""!==i.options.maxLength&&(i.options.maxlength=i.options.maxLength),this.cellInfoHash[i.id]=i,this.cellIdList.push(i.id);var o=i.options.hideThreshold;void 0!==o&&(this.hideThresholdObj[i.id]=o)}this.drawFooter(),this.drawHeader();for(var r=0;r<this.thIdList.length;r++){var n=this.headerInfoHash2[this.thIdList[r]];if(n){var l=new WebSquare.uiplugin.headerInfo(n,this);this.headerInfoHash[l.id]=l,this.colMoveHeaderIndexMap[l.id]=r}}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setDataLayerPosition=function(){try{var t=this.getElementById(this.id+"_dataLayer");if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table").offsetHeight;e=0==e?this.footerHeight:e,t.style.bottom=e+"px"}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.arrangeOverflowXScroll=function(t){try{this.fixedWidth=0;for(var e=this.getFixedColumnLastIndex(),i=0;i<e;i++)this.hiddenList[i]||(this.fixedWidth+=this.colWidthList[i]);this.fixedWidth=parseInt(this.fixedWidth,10)||0,this.fixedWidthRight=0;var o=this.getFixedRightColumnLastIndex(),r=this.colWidthList.length;for(i=r-1;i>=o;i--)this.hiddenList[i]||(this.fixedWidthRight+=this.colWidthList[i]);if(this.fixedWidthRight=parseInt(this.fixedWidthRight,10)||0,e>this.defaultColCnt||o<r)for(var a=this.getColumnCount(),n=this.data_td_list.length/a,l=0;l<n+1;l++){if(e>this.defaultColCnt){var h=e-this.defaultColCnt;(c=this.data_td_list[l*a+(e-this.defaultColCnt)])&&this.addClass(c,"w2grid_fixedColumn");for(var d=0;d<h;d++){(g=this.data_td_list[l*a+d])&&this.addClass(g,"w2grid_fixedColumn_td")}}if(o<r){var c,u=o-this.defaultColCnt;(c=this.data_td_list[l*a+(o-this.defaultColCnt)])&&this.addClass(c,"w2grid_fixedRightColumn");for(var p=a-1;p>=u;p--){var g;(g=this.data_td_list[l*a+p])&&this.addClass(g,"w2grid_fixedRightColumn_td")}}}if(!0!==t){var m=this.getElementById(this.id+"_scrollX_div"),f=this.getElementById(this.id+"_scrollX_table"),b=0===m.offsetWidth?0:m.offsetWidth-f.offsetWidth,y=this.getElementById(this.id+"_scrollX_left"),v=this.getElementById(this.id+"_scroll_size"),w=this.getElementById(this.id+"_scrollX_fixedRight");y.style.width=this.fixedWidth+"px",v.style.width=this.gridWidth-this.fixedWidth-this.fixedWidthRight-b+"px",w.style.width=this.fixedWidthRight+"px"}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.handlerResize_drawInitializer=function(){try{if(0==this.render.offsetWidth||0==this.render.offsetHeight)return;if(this.setOverflowY(),this.setOverflowX(),this.setIE6Fix(),this.options.headFiller){var t=this.getElementById(this.id+"_header_bg_td"),e=this.getElementById(this.id+"_dataLayer").offsetWidth-1,i=this.getElementById(this.id+"_head_table").offsetHeight,o=e,r=i;for(t.style.width=e+"px";t.offsetWidth!=o;)t.offsetWidth>o?e--:e++,t.style.width=e+"px"
;for(t.style.height=i+"px";t.offsetHeight!=r;)t.offsetHeight>r?i--:i++,t.style.height=i+"px"}if(this.options.groupbyZone){var a=this.getElementById(this.id+"_main_div"),n=this.groupbyZoneStatus.groupbyZoneRender?this.groupbyZoneStatus.groupbyZoneRender.offsetHeight:0;if(this.isIE6or7&&(a.style.height=a.offsetHeight-n),this.options.groupbyFilterBox){var l=this.getElementById(this.id+"_groupbyFilterBox_div"),h=this.getElementById(this.id+"_groupbyFilterBox_buttons");if(this.isIE6or7){a.style.height=a.offsetHeight-(this.scrollLayerWidthSize+l.offsetHeight)-3+"px",h.style.left=-h.offsetWidth;var d=this.scrollLayerWidthSize+l.offsetHeight+n,c=Math.ceil(d/this.oneRowScrollHeight),u=this.getElementById(this.id+"_scrollY_div");this.lastIndex>-1&&this.lastIndex>c&&u.offsetHeight<u.scrollHeight&&this.cutGridBottom(this.lastIndex-c)}else"bottom"===this.options.groupbyFilterBoxLocation&&(a.style.bottom=this.scrollLayerWidthSize+l.offsetHeight+"px",a.style.height="")}else this.isIE6or7&&this.cutGridBottom(this.lastIndex-Math.ceil(n/this.oneRowScrollHeight))}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setIE6Fix=function(){try{var t=this.options.fixPrint&&(a.Z.isIE(9)||a.Z.isIE(10)||r.I.browserCheck.ieAllVersion&&"11"==document.documentMode||a.Z.isFF());if(this.isIE6or7||a.Z.isOpera()||t){var e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_main_div"),n=this.render.offsetHeight-e.offsetHeight,l=this.render.offsetWidth-i.offsetWidth+2;n=n<0?0:n,l=l<0?0:l,o.style.height=n+"px",o.style.width=l+"px";var h,d=0;if(this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d),""!==this.options.visibleRowNum){var c=this.getElementById(this.id+"_body_table");h=!this.defaultDataLayerHeight||c.offsetHeight>this.defaultDataLayerHeight?c.offsetHeight+d:this.defaultDataLayerHeight+d}else h=n-d-1;h=h<0?0:h;var u=this.getElementById(this.id+"_dataLayer");u.style.height=h+"px",this.dataLayerHeight=h;var p=this.getElementById(this.id+"_scrollX_right");p.style.width=p.parentNode.offsetWidth+"px",t&&(o.style.position="relative",o.style.bottom="",o.style.right="",u.style.position="relative",u.style.bottom="")}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype._setOverflowXNative=function(t){if(!0===this._isBrowserScroll()){var e=document.getElementById(this.id+"_scrollX_div"),i=document.getElementById(this.id+"_dataLayer");if(!1===t||this.options.fixedColumn<=0&&this.options.fixedRightColumn<=0)return e.style.visibility="hidden",void(i.style.overflowX="auto");!0===t&&(e.style.visibility="visible",i.style.overflowX="hidden")}},f.prototype.setOverflowX=function(t){var e=!0;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowX=t):e=!1,t=this.isMobile?"hidden":this.options.overflowX){case"auto":this.setOverflowXAuto();break;case"hidden":this.setOverflowXHidden();break;default:this.setOverflowXScroll()}this.isMobile&&this.setIScrollX(),e&&this.setIE6Fix()},f.prototype.setOverflowXAuto=function(){var t=this.getElementById(this.id+"_scrollX_div"),e=this.getElementById(this.id+"_scrollX_left"),i=this.getElementById(this.id+"_scrollX_right"),o=e.offsetWidth;if(this.options.fixedRightColumn){var s=this.getElementById(this.id+"_scrollX_fixedRight");s&&(o+=s.offsetWidth)}i.firstChild.offsetWidth>t.offsetWidth-o?this.setOverflowXScroll():this.setOverflowXHidden()},f.prototype.setOverflowXScroll=function(){try{var t=(l=this.getElementById(this.id+"_scrollX_div")).style.height;if(l.style.height=this.scrollLayerWidthSize+"px",this.options.scrollFocus){var e=this.getElementById(this.id+"_scrollX_right"),i=this.getElementById(this.id+"_scrollX_left");e.firstChild.offsetWidth>l.offsetWidth-i.offsetWidth?e.setAttribute("tabIndex","0"):e.setAttribute("tabIndex","-1")}var o=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation
;if(-1!==this.rowIndex&&"0px"===t&&!o&&!0!==this._isBrowserScroll())if(""!==this.options.visibleRowNum){var r=parseInt(this.render.style.height,10);this.setSize(null,r+this.scrollWidthSize)}else{this.dataLayerHeight-=this.scrollWidthSize;var a=this.dataRowList[(this.lastIndex+1)*this.oneRowLength-1];a&&a.offsetTop+a.offsetHeight>this.dataLayerHeight&&(this._setRowDisplay(this.lastIndex,"none"),this.lastIndex=this.lastIndex-1,this.maxRowLength=this.maxRowLength-1,this.lastDisplayedRow=this.lastIndex,this.lastTopRowIndex=null,this.setScrollYHeight({noDraw:!0}),this.setOverflowYAuto())}if(!this.isIE6or7){var n=this.getElementById(this.id+"_main_div"),l=this.getElementById(this.id+"_scrollX_div"),h=parseInt(l.style.height,10);if(n.style.bottom=h+"px",this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation){var d=this.getElementById(this.id+"_groupbyFilterBox_div");n.style.bottom=this.scrollLayerWidthSize+d.offsetHeight+"px"}}if(o)(d=this.getElementById(this.id+"_groupbyFilterBox_div")).style.bottom=this.scrollLayerWidthSize+"px"}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setOverflowXHidden=function(){try{var t=this.getElementById(this.id+"_scrollX_div"),e=t.style.height;if(t.style.height="0px",this.options.scrollFocus){var i=this.getElementById(this.id+"_scrollX_right"),o=this.getElementById(this.id+"_scrollX_left");i.firstChild.offsetWidth>t.offsetWidth-o.offsetWidth?i.setAttribute("tabIndex","0"):i.setAttribute("tabIndex","-1")}"0px"!=e&&this.handleScrollX();var r=this.options.groupbyZone&&this.options.groupbyFilterBox&&"bottom"===this.options.groupbyFilterBoxLocation;if(-1!==this.rowIndex&&"0px"!==e&&!r&&!0!==this._isBrowserScroll())if(""!==this.options.visibleRowNum){var a=parseInt(this.render.style.height,10);this.setSize(null,a-this.scrollWidthSize)}else{this.dataLayerHeight+=this.scrollWidthSize,this.maxRowLength=this.maxRowLength+1;var n=this.getDataLength();this.maxRowLength>=n&&(this.getElementById(this.id+"_size_y").style.height="0px"),this.setOverflowYAuto(),this.drawData(this.rowIndex,this.lastIndex);for(var l=0;l<this.tdIdList.length;l++){var h=this.cellInfoHash[this.tdIdList[l]];if(h.dataComp){var d=this.modelControl.getDataComp(h.dataComp);"linkedDataList"===d.initializeType&&d.syncWithParent()}}this.lastTopRowIndex=null}var c=this.getElementById(this.id+"_main_div");if(this.isIE6||(c.style.bottom="0px"),r)this.getElementById(this.id+"_groupbyFilterBox_div").style.bottom="0px"}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setOverflowY=function(t){if(!0!==this._isBrowserScroll()){var e=!0;switch(void 0!==t?("hidden"!=t&&"auto"!=t&&"scroll"!=t&&(t="auto"),this.options.overflowY=t):e=!1,t=this.isMobile?"hidden":this.options.overflowY){case"auto":this.setOverflowYAuto();break;case"hidden":this.setOverflowYHidden();break;default:this.setOverflowYScroll()}this.isMobile&&this.setIScrollY(),e&&this.setIE6Fix()}},f.prototype.setOverflowYAuto=function(){if(!0!==this._isBrowserScroll()){var t=this.getElementById(this.id+"_scrollY_div");t.offsetHeight<t.scrollHeight?this.setOverflowYScroll():this.setOverflowYHidden()}},f.prototype.setOverflowYScroll=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=this.getElementById(this.id+"_scrollX_div"),i=this.getElementById(this.id+"_main_div"),o=parseInt(t.style.width,10);if(t.style.width=this.scrollLayerWidthSize+"px",t.style.overflowY="scroll",this.isIE6){var s=this.render.offsetWidth-this.scrollWidthSize;e.style.width=(s>0?s:0)+"px",t.style.height=this.render.offsetHeight+"px"}else i.style.right=this.scrollWidthSize-1+"px",e.style.right=this.scrollWidthSize+"px";this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);0==o&&!0!==this._setOverflowYScrollFlag&&(this._setOverflowYScrollFlag=!0,this._setAutoFit(),this._setOverflowYScrollFlag=!1),
this.options.scrollFocus&&(t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1"))},f.prototype.setOverflowYHidden=function(){var t=this.getElementById(this.id+"_scrollY_div"),e=parseInt(t.style.width,10);t.style.width="0px",t.style.overflowY="hidden";var i=this.getElementById(this.id+"_main_div");this.isIE6||(i.style.right="0px",this.getElementById(this.id+"_scrollX_div").style.right="0px");this.options.groupbyZone&&this.options.groupbyFilterBox&&(this.getElementById(this.id+"_groupbyFilterBox_div").style.right=i.style.right);if(0!=e&&!0!==this._setOverflowYHiddenFlag&&(this._setOverflowYHiddenFlag=!0,this._setAutoFit(),this._setOverflowYHiddenFlag=!1),this.options.scrollFocus&&(t.offsetHeight<t.scrollHeight?t.setAttribute("tabIndex","0"):t.setAttribute("tabIndex","-1")),!0===this._isHybridScroll()){var o=document.getElementById(this.id+"_size_y"),s=t.offsetHeight;o.offsetHeight!==s&&(o.style.height=s+"px")}},f.prototype.setTrRowTable=function(){try{this.tempDiv=document.createElement("div"),this.tempDiv.style.width="0px",this.tempDiv.style.height="0px",this.tempDiv.style.overflow="hidden",this.tempDiv.innerHTML="<table id='tempTable' style='table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.htmlInfo.body,"tbody","td",this.options.bodyTdClass)+"</table>",this.tempTr=this.tempDiv.getElementsByTagName("table")[0];var t=this.tempTr.getElementsByTagName("td");this.aria_labelledby=[];for(var e=0;e<t.length;e++)this.aria_labelledby[e]=t[e].getAttribute("aria-labelledby"),t[e].innerHTML="";this.tempDiv.id=this.id,this.tempDiv.className=this.options.className+" w2grid",this.render.parentNode.appendChild(this.tempDiv);var i,o=this.tempDiv.getElementsByTagName("tbody")[0],r=o.getElementsByTagName("tr")[0];0==(i=r?r.offsetHeight:o.offsetHeight)?(i=-1!=this.options.defaultCellHeight?this.options.defaultCellHeight:20,this._visibleRowNumFixResetFlag=!0):this._visibleRowNumFixResetFlag=!1,this.oneRowHeight=i+(a.Z.isIE(6)||a.Z.isIE(7)?1:0),this.options.scrollRowHeight&&(this.oneRowScrollHeight=this.oneRowHeight),this.render.parentNode.removeChild(this.tempDiv)}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setTrSubtotalRowTable=function(){try{for(var t in this.subtotalTableList={},this.subtotalStrList){var e=document.createElement("div");e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",this.subtotalClassList&&this.subtotalStrList[t].attr?e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.subtotalStrList[t].attr.subtotalClass)+"</table>":e.innerHTML="<table id='tempTable' style='width:100%;table-layout:fixed; border-collapse:collapse; border-spacing:0px;'>"+this.getTableHtml(this.subtotalStrList[t],"tbody","td",this.options.subtotalTdClass)+"</table>";for(var i=e.getElementsByTagName("table")[0],o=i.getElementsByTagName("td"),r=a.Z.getDataPrefix("or_wd"),n=a.Z.getDataPrefix("width"),l=!0===this._isHybridScroll(),h=0;h<o.length;h++){var d=o[h],c=d.getAttribute(n);c&&(d.removeAttribute(n),d.setAttribute(r,c)),l&&this.defaultColCnt,this.setConfigOptions(d,"subtotal")}this.subtotalTableList[t]=i}}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype._setAutoFit=function(t){try{if(0==this.render.offsetWidth||0==this.render.offsetHeight)return;this.autofitDone=!0;var e=(t=t||{}).type?t.type:this.options.autoFit;"none"!==e&&e||(e="clear");var i=t.exceptCol,o=t.exceptWidth||0,r=this._getScrollYWidth();!0===this._isNativeScroll()&&(this._bScrollYWidth=r);var n=this.render.clientWidth;a.Z.isIEAllVersion()&&(n=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10)),this.autofit_clientWidth=n;for(var l=0,h=this.colWidthList.length-1;h>=0;h--)if(0==this.hiddenList[h]){l=h;break}if("selectedColumn"==e&&!this.autofitColumn){
if(this.gridWidth>=n)return;this.autofitColumn=!0;var d=this.defaultColCnt+t.colIndex;this.gridWidth-=this.colWidthList[d],this.autofitColumnIndexArr.push(d),this.colWidthList[d]="*",this.autofitColumnWidthArr[d]="*"}if(this.autofitColumn){var c=n,u=this.autofitColumnIndexArr.slice();r>0&&(c-=r);for(h=u.length-1;h>=0;h--){var p=u[h];1!=this.hiddenList[p]&&p!==i||u.splice(h,1)}var g=0,m=[];for(h=0;h<this.colWidthList.length;h++)if(1!=this.hiddenList[h])if(h===i)this._setColumnWidth(h,o),c-=o;else if(h<this.autofitColumnWidthArr.length&&this.autofitColumnWidthArr[h]){var f=this.autofitColumnWidthArr[h].substring(0,this.autofitColumnWidthArr[h].indexOf("*"));f.length>0?m.push(parseInt(f,10)):0==f.length&&m.push(1)}else c-=this.colWidthList[h];var b=function(t){if(!t.length)return 0;for(var e,i=t.length-1,o=t[i];i;)for(var s=t[--i];e=s%o;s=o,o=e);return o}(m);for(h=0;h<m.length;h++)m[h]=m[h]/b,g+=m[h];var y=Math.floor(c/g),v=c-y*g;for(h=0;h<u.length;h++){var w=this.options.autoFitMinWidth||0,S=y*m[h];m[h]=Math.max(S,w)}if(v>0)if(1==u.length)m=[c];else{var _=m.slice();for(h=v;h>0;h--){for(var C={},x=0;x<m.length;x++)if(1!=this.hiddenList[u[x]]){var I=Math.abs((_[x]-(m[x]+1))*(this.gridWidth/_[x]));(null==C.distortion||C.distortion>I)&&(C.distortion=I,C.index=x)}m[C.index]++}}for(var T=0;T<m.length;T++)this._setColumnWidth(u[T],m[T])}if("lastColumn"==e){this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth,this.orgLastWidth=this.colWidthList[l],this.orgLastVisibleCol=l),"number"==typeof i&&i!=l&&(this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o));var k=n-r-this.gridWidth+this.colWidthList[l];k>this.orgLastWidth?this._setColumnWidth(l,k):this._setColumnWidth(l,this.orgLastWidth)}else if("allColumn"==e){if(!this.autofitColumn){var L=this.autoFitColWidthList||this.colWidthList,A=n-r,D={},W=0;for(h=this.defaultColCnt;h<this.hiddenList.length;h++)1==this.hiddenList[h]&&W++;if(this.options.keepDefaultColumnWidth)for(h=0;h<this.defaultColCnt;h++)D[h]=!0;for(h=this.defaultColCnt;h<L.length;h++)!1===this.isColumnResizable(h)&&(D[h]=!0);var q=parseInt(this.options.autoFitCellMinWidth);if(!isNaN(q)&&q>0){w=q*(this.getColumnCount()-W);for(var M=0;M<this.defaultColCnt;M++)w+=this.colWidthList[M]}else w=parseInt(t.minWidth?t.minWidth:this.options.autoFitMinWidth,10);for(var E in!isNaN(w)&&w>A&&(A=w),A-=o,D)this.hiddenList[E]||(A-=this.colWidthList[E]);var R=0;for(h=0;h<L.length;h++)R+=this.hiddenList[h]||h===i||D[h]?0:L[h];var N=0,F=R?A/R:0,O=[];if(F){for(h=0;h<L.length;h++)if(h==i)this.colWidthList[h]=o;else if(D[h]);else{O[h]=F*L[h];var B=Math.round(O[h]);this.colWidthList[h]=B,N+=this.hiddenList[h]?0:B}var P=A-N,Y=P>0?1:-1;for(h=0;h<P*Y;h++){var V={};for(x=0;x<L.length;x++)if(!this.hiddenList[x]&&x!=i&&!D[x]){I=Math.abs(O[x]-(this.colWidthList[x]+Y))*(N/this.colWidthList[x]);(null==V.value||V.value>I)&&(V.value=I,V.index=x)}this.colWidthList[V.index]+=Y,N+=Y}if(this.hiddenList[0]&&a.Z.isIE(8))for(h=0;h<this.colWidthList.length;h++)if(!this.hiddenList[h]){this.colWidthList[h]=this.colWidthList[h]-2;break}}for(var E in this.autoFitColWidthList||(this.autoFitColWidthList=this.colWidthList.slice(0)),this.gridWidth=N+o,D)this.hiddenList[E]||(this.gridWidth+=this.colWidthList[E]);this.arrangeOverflowXScroll();var H="";this.options.autoFitMinWidth||this.options.autoFitCellMinWidth||(H="hidden"),this.setOverflowX(H),this.scrollXPreventEndEdit=!0,this.handleScrollX(),this.scrollXPreventEndEdit=!1,this.handlerResize_drawInitializer()}if(!this.groupbyStatus.grouped)for(h=0;h<this.oneRowDataLength;h++){var j=this.getCellInfo(h);"text"!=j.options.inputType&&"secret"!=j.options.inputType&&"calendar"!=j.options.inputType||!j.options.embeddedInput||!this.options.autoResizeEmbeddedInput&&"calendar"!=j.options.inputType||this.hiddenList[h]||(this.embeddedWidthObj[h]&&(this.embeddedWidthObj[h].isChanged=!0),this.drawColumnData(h))}}else"clear"==e&&"number"==typeof i&&(this.autoFitGridWidth||(this.autoFitGridWidth=this.gridWidth),
this.autoFitGridWidth+=o-this.colWidthList[i],this._setColumnWidth(i,o))}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setAutoFit=function(t){try{t&&(this.options.autoFit=t.type),this._setAutoFit(t)}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.clearAutoFit=function(t){try{this.options.autoFit="",-1===this.initialColWidthList.indexOf("*")&&(this.autofitColumn=!1,this.autofitColumnIndexArr=[],this.autofitColumnWidthArr=[],this.autoFitColWidthList=null,this.gridWidth=this.initialGridWidth,this.colWidthList=this.initialColWidthList.slice(),this.arrangeOverflowXScroll(),this.setOverflowX("auto"),this.handleScrollX())}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.autoFitFunc=function(){this.autofit_clientWidth===this.render.clientWidth?r.I.clearTimer(this.id+"_autofit"):r.I.setTimer(this._setAutoFit,{key:this.id+"_autofit",caller:this,delay:100})},f.prototype.setIScrollX=function(){try{if(!0===this.options.scrollXNative)return;var t=this.getElementById(this.id+"_iScrollX");if(!t)return;var e=this.getElementById(this.id+"_scrollX_right");if(e.offsetWidth>=e.firstChild.offsetWidth)return void(t.style.visibility="hidden");var i=this.getElementById(this.id+"_dataLayer"),o=parseInt(this.getElementById(this.id+"_scrollX_left").style.width,10),r=e.firstChild.offsetWidth-e.offsetWidth,a=parseInt(e.offsetWidth*e.offsetWidth/e.firstChild.offsetWidth,10);t.style.width=(a<30?30:a)+"px",t.style.left=o+e.scrollLeft/r*(i.offsetWidth-o-t.offsetWidth)+"px",t.style.visibility=""}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.setIScrollY=function(){try{if(!0===this._isBrowserScroll())return;var t=this.getElementById(this.id+"_iScrollY");if(!t)return;var e=this.getDataLength(),i=this.rowIndex,o=this.getElementById(this.id+"_size_y").parentNode.offsetHeight;if(0==o&&(o=parseInt(this.getStyleValue("height"))),-1==i||0==i&&i+this.lastIndex+1==e){var r=!this.hasSubtotal;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==e-1)"none"!=a[a.length-1].style.display&&(r=!0)}if(r)return void(t.style.visibility="hidden")}var n=this.getElementById(this.id+"_scrollY_div"),l=n.firstChild.offsetHeight,h=this.getElementById(this.id+"_dataLayer"),d=l-h.offsetHeight,c=parseInt(h.offsetHeight*h.offsetHeight/l,10);t.style.height=(c<30?30:c)+"px",t.style.top=n.scrollTop/d*(h.offsetHeight-t.offsetHeight)+"px",t.style.visibility=""}catch(t){s.Y.printStackTrace(t,null,this)}},f.prototype.createBlockedHeaderInfo=function(){try{this.columnBlock={info:{},hash:{}};for(var t=[],e=this.getColCnt(),i=0;i<e;i++)t.push(1);for(var o in this.struct){var r;if("subtotalArr"===o)r=this.struct[o][0].rowArr;else{if(!this.struct[o]||!this.struct[o].rowArr)continue;r=this.struct[o].rowArr}for(var a=0;a<r.length;a++)for(var n=0,l=0;l<r[a].length;l++){var h=parseInt(r[a][l].colSpan,10)||1;for(i=1;i<h;i++)t[n+i]=0;n+=h}}var d=0;for(i=0;i<t.length;i++){var c=t[i];1===c?(this.columnBlock.info[i]=[i],this.columnBlock.hash[i]=i,d=i):0===c&&(this.columnBlock.info[d].push(i),this.columnBlock.hash[i]=d)}}catch(t){s.Y.printStackTrace(t,null,this)}};var b=function(){};b.prototype.initializeEvent=function(){try{if(this.otherClickEvent(),this.checkResize(),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),a.Z.isIEAllVersion()){if(a.Z.isIEAllVersion()){if(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||u.f.preventDefault(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){this.options.preventCopy||this.editedCell||"native"===this.options.copyType||u.f.preventDefault(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){
this.options.preventPaste&&!this.editedCell&&"native"!==this.options.copyType&&u.f.preventDefault(t)}))),!0===this.options.noSelect)document.getElementById(this.id+"_main_div").onselectstart=function(t){if(a.Z.isIEAllVersion()&&t&&t.srcElement){var e=t.srcElement;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName)return!0}return!1};else!0===this.options.preventCopy&&(this.render.onselectstart=function(){return!1})}}else r.I.browserCheck.safari?(this.event.addListener(WebSquare.getBody().render,"onbeforecopy",this.event.bindAsEventListener(this,this.handleBeforeCopyEvent)),this.event.addListener(WebSquare.getBody().render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(WebSquare.getBody().render,"onbeforecut",this.event.bindAsEventListener(this,this.handleBeforeCutEvent)),this.event.addListener(WebSquare.getBody().render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent))):!1===a.Z.isExecCommandSupported()&&(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,this.handleCutEvent)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)));this.isMobile||(this.event.addListener(this.getElementById(this.id+"_head_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollX_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onmouseover",this.event.bindAsEventListener(this,this.gridDataLayerOut)),this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)),this.options.useMoreButton&&this.event.addListener(this.getElementById(this.id+"_grid_more_button"),"onclick",this.event.bindAsEventListener(this,(function(t){WebSquare.event.fireEvent(this,"onscrollend")}))),this.hasFooter&&this.event.addListener(this.getElementById(this.id+"_foot_table"),"onmouseover",this.event.bindAsEventListener(this,this.gridOver)));var t=this.isHammerEnabled();if(this.event.addListener(this.getElementById(this.id+"_dataLayer"),"oncontextmenu",this.event.bindAsEventListener(this,this.clickRightButtonCell)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,(function(t){WebSquare.event.fireEvent(this,"ongridmouseleave",t)}))),this.event.addListener(this.render,"onmouseenter",this.event.bindAsEventListener(this,(function(t){WebSquare.event.fireEvent(this,"ongridmouseenter",t)}))),t||(this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.gridOut)),this.event.addListener(this.getElementById(this.id+"_head_table"),"onmouseout",this.event.bindAsEventListener(this,this.gridHeaderOut))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpEvent)),a.Z.isOpera()&&this.event.addListener(this.render,"onkeypress",(function(t){9!=t.keyCode&&27!=t.keyCode||u.f.preventDefault(t)})),this.options.dataDragDrop||this.options.dataDragDropSelf||this.options.dataDragDropCell){if(1==this.isMobile){if(t){var e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));var i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.getElementById(o.id+"_dataLayer")),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){o.handleDragEvent(t)}))),o._bindPressEvent=!0}))}
}else this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0;this.options.dataDragDropOther||this.options.dataDragDropSelf||(this._useShiftKey=!0)}else this.options.dataDragDrop||this.options.dataDragDropSelf||this.options.dataDragDropCell||!this.options.dataDragSelect||this.isMobile||this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.handleDragSelectEvent));if(r.I.setTimer((function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.getBody().getLayerListener();if(e.layers[this.id]){for(var i=e.layers[this.id].component,o={};i.parentControl;)for(var s in i=i.parentControl,e.useOtherComponentId)e.useOtherComponentId[s]==i.id&&(o[s]=!0);WebSquare.getBody().getLayerListener().hideAll(o)}this.parentControl&&this.parentControl.options&&("gridItemTable"==this.parentControl.options.pluginName||"gridViewItemTable"==this.parentControl.options.pluginName)||u.f.stopPropagation(t)})))}),{key:this.id+"initializeEvent",caller:this,delay:100}),!0===this._isBrowserScroll()&&this.options.scrollXNative||(a.Z.isTouchDevice()&&!window.navigator.msPointerEnabled?(this.iScroll={},this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))):window.navigator.msPointerEnabled&&-1!=window.navigator.userAgent.toLowerCase().indexOf("touch")?(this.iScroll={},this.render.style.touchAction="none",this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleTouchEnd))):!0===this._isBrowserScroll()||(this.options.senseReader?(this.options.useStartEndDiv&&(this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onfocus",this.event.bindAsEventListener(this,this.handleStartDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridstart_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleStartDivKeyDown)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onfocus",this.event.bindAsEventListener(this,this.handleEndDivFocus)),this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeyup",this.event.bindAsEventListener(this,this.handleEndDivKeyUp))),this.options.scrollFocus?this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)):this.options.useStartEndDiv&&this.event.addListener(this.getElementById(this.id+"_gridend_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleEndDivKeyDown))):this.options.scrollFocus&&this.event.addListener(this.getElementById(this.id+"_scrollY_div"),"onkeydown",this.event.bindAsEventListener(this,this.handleScrollDivKeyDown)))),t&&!this._bindPressEvent)try{e=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(e=inquires("externalJS/hammer.min.js"));i=this.uuid;e.then((function(t,e){var o=WebSquare.idCache[i];o._manager=new Hammer.Manager(o.render),o._manager.add(new Hammer.Press({time:o.options.hammerPressTime})),o._manager.on("press",o.event.bindAsEventListener(o,(function(t){if(!o._bindPressEvent){for(var e,i=u.f.getTarget(t),s=-1;i&&"BODY"!=i.tagName;){if("TD"==i.tagName&&o.hasClass(i,o.options.bodyTdClass)){s=o.getElemRowIndex(i),e=i;break}i=i.parentNode}o.removeFocusedCell(),o._dataList.setRowPosition(s),e&&o.__setFocusedCell({},e,{editMode:"none"}),o.handleDblClickEvent(t),u.f.fireEvent(o,"ondblclick",t)}})))}))}catch(t){
s.Y.printStackTrace(t,null,this)}if(this._isNativeScroll("both")){var o=document.getElementById(this.id+"_dataLayer");i=this.uuid;o&&(o.onscroll=function(t){var e=WebSquare.idCache[i];e._endEdit();var o=document.getElementById(e.id+"_dataLayer"),s=o.scrollTop,r=o.offsetHeight,a=o.scrollLeft;e._nativeScrollInfo||(e._nativeScrollInfo={x:0,y:0});var n=a-e._nativeScrollInfo.x,l=s-e._nativeScrollInfo.y;if(Math.abs(l)>0&&!0===e._isNativeScroll()){if(WebSquare.util.isIEAllVersion())for(var h=document.getElementById(e.id+"_head_table").getElementsByTagName("th"),d=s+"px",c=0;c<h.length;c++){var p=h[c];"relative"!=p.style.position&&(p.style.position="relative"),p.style.top=d}r+s>=o.scrollHeight&&u.f.fireEvent(e,"onscrollend"),u.f.fireEvent(e,"onscrolly",t)}Math.abs(n)>0&&!0===e.options.scrollXNative&&u.f.fireEvent(e,"onscrollx",t),e._nativeScrollInfo={x:a,y:s}})}this.initializeLayoutEvents(),n.q.addCheckResize(this.uuid,"checkResize")}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleStartDivFocus=function(t){try{if(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[],"true"!==this.options.keepScrollForSenseReader&&!0!==this._isBrowserScroll()){var e=this.getElementById(this.id+"_scrollY_div"),i=this.getElementById(this.id+"_size_y");i&&i.offsetHeight>0&&(this.addGridScroll(0-this.rowIndex),0!=e.scrollTop&&this.addGridScroll(0-this.rowIndex)),this._dataList.setRowPosition(-1)}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleEndDivFocus=function(t){this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0,this.applyFocusedCellOut(),this.focusedCell=[]},b.prototype.handleScrollDivKeyDown=function(t){if(t.shiftKey&&9==t.keyCode){for(var e=this.getRowCount()-1,i=this.getRightMostFocusableColIndex(e);e>=0&&null==i;)e-=1,i=this.getRightMostFocusableColIndex(e);if(null!==i){var o=this.getCellInfo(i),s=0;if("radio"===o.options.inputType){var r=this.getCheckedIndex(o.colID)[0];r>0&&(s=r),this._setFocusedCell(s,i,!1,{tabDirection:"left"}),u.f.stopEvent(t)}else this.options.senseReader&&"link"===o.options.inputType&&(null==this.focusedCell||this.focusedCell&&0==this.focusedCell.length)&&(s=this.rowIndex+this._getVisibleLastIndex(this.lastIndex),this._setFocusedCell(s,i,!1,{tabDirection:"left"}),u.f.stopEvent(t))}}else switch(t.keyCode){case 38:case 40:case 9:u.f.stopPropagation(t)}},b.prototype.handleStartDivKeyDown=function(t){try{if("Tab"===t.key)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=a.Z.getPreTabbableComp(this.id);e&&e.focus(t),u.f.preventDefault(t)}}else t.shiftKey||9!=t.keyCode||this._lastHeaderElementId||this._setFirsCellFocus(t)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleEndDivKeyDown=function(t){try{if(9==t.keyCode)if(t.shiftKey){if("none"===this.options.focusMode)return;var e=this.getElementById(this.id+"_main_div").offsetHeight,i=parseInt(this.getElementById(this.id+"_size_y").style.height,10)-e,o=this.getElementById(this.id+"_scrollY_div").scrollTop,r=this._getEpsilon();if(o<i&&(o=Math.min(Math.round(o)+r,i)),i!=o){for(var n=0,l=0;l<this.getRowCount();l++)n+=this.getHasSubtotalCount(l);this.addGridScroll(this.getRowCount()-this.rowIndex-this.lastIndex-1+n)}for(var h=this.getRowCount()-1,d=this.getRightMostFocusableColIndex(h,{shiftTab:!0});h>=0&&null==d;)h-=1,d=this.getRightMostFocusableColIndex(h);null!=d&&(this._setFocusedCell(h,d,!1,{tabDirection:"left"}),u.f.stopEvent(t))}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var c=a.Z.getNextTabbableComp(this.id);c&&c.focus(t),u.f.preventDefault(t)}}catch(t){return s.Y.printStackTrace(t,null,this),!1}},b.prototype.handleEndDivKeyUp=function(t){try{38==t.keyCode&&"all"!=this.options.visibleRowNum&&(this.getElementById(this.id+"_scrollY_div").scrollTop=0)}catch(t){return s.Y.printStackTrace(t,null,this),!1}},b.prototype.handleTdFocus=function(t){
var e,i=u.f.getTarget(t),o=this.getLastFocusedCell(),s=a.Z.getDataPrefix("tdIndex"),r=a.Z.getDataPrefix("col_id");if("TD"==i.tagName&&o.focusedTd!=i&&!this.focusedByApi){var n,l,h,d,c,p,g=parseInt(i.getAttribute(s)),m=parseInt(g/this.realRowDataLength)+this.rowIndex,f=i.getAttribute(r);if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&(e=null!=this.editedCell)){var b=this.getCellInfo(this.editedCell.colID);n=b.editRowIndex,l=this._dataList.getColumnIndex(b.id),h=this.getColumnIndex(b.id),d=this.getRealRowIndex(n),c=this._dataList.dataArr[d*this._dataList.getColumnCount()+l],p=b.comp&&b.comp.selectedIndex}if(this._setFocusedCell(m,f),e){var y=this._dataList.dataArr[d*this._dataList.getColumnCount()+l];if(0===c&&(c="0"),0===y&&(y="0"),c!=y){var v={oldValue:c,newValue:y,rowIndex:n,colIndex:h,colId:this.getColumnID(h)};isNaN(p)||(v.oldSelectedIndex=p,v.newSelectedIndex=b&&b.comp&&b.comp.selectedIndex),u.f.fireEvent(this,"onviewchange",v)}}}this.focusedByApi=!1},b.prototype.handleDragSelectEvent=function(t){if(!this._bindDrag&&!1!==this.options.dataDragSelect)for(var e=this.body_table.offsetHeight,i=this.event.getTargetIterator(t);i.next();)if(i.match(this.options.bodyTdClass,null,"td")){var o=this,s=i.getElement();if(!0===this.getCellInfo(s).options.blockSelect)return;return void WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_dragSelect",delay:15,handleStart:function(t){a.Z.isIEAllVersion()&&(a.Z.emptySelection(),u.f.preventDefault(t));var e,i,r,n,l,h,d=null!=o.editedCell;if(d&&(e=o.editedCell.editRowIndex,i=o._dataList.getColumnIndex(o.editedCell.id),r=o.getColumnIndex(o.editedCell.id),n=o._grid.getRealRowIndex(e),l=o._dataList.dataArr[n*o._dataList.getColumnCount()+i]),o.__setFocusedCell(t,s,{editMode:!1}),d&&l!=(h=o._dataList.dataArr[n*o._dataList.getColumnCount()+i])){var c={oldValue:l,newValue:h,rowIndex:e,colIndex:r,colId:o.getColumnID(r)};u.f.fireEvent(o,"onviewchange",c)}},handleUpdate:function(t,i,s,r,a){for(var n=null,l=null,h=o.event.getTargetIterator(a);h.next();){if(h.match("w2grid")){n=h.getElement().id;break}h.match(o.options.bodyTdClass,null,"td")&&(l=h.getElement())}var d=o.focusedCell[0];o.options.dataDragSelectAutoScroll&&d.focusedColIndex>-1&&o.dragSelectAutoScroll(u.f.getMouseY(a),e,u.f.getMouseX(a)),null!=n&&null!=l&&o.id==n&&d.focusedColIndex>-1&&(l.className.indexOf("_rowNum")>=0||l.className.indexOf("_rowStatus")>=0||o.__setFocusedCell({shiftKey:!0},l,{editMode:!1}))},handleFinish:function(){o.dragSelectAutoScrollFinish()}})}},b.prototype.handleDragEvent=function(t){if((!this.options.rowResize||!this.rowResizeStarted)&&(!this.isDrillDown||this.drillDownDragDrop)&&!this.editedCell&&(0!=this.options.dataDragDrop||0!=this.options.dataDragDropSelf||0!=this.options.dataDragDropCell))for(var e=a.Z.getDataPrefix("tdIndex"),i=a.Z.getDataPrefix("col_id"),o=(a.Z.getDataPrefix("colindex"),a.Z.getDataPrefix("index")),s=this.event.getTargetIterator(t);s.next();){if(this.options.dataDragDropCell){if(s.match("gridBodyDefault_rowNumber")||s.match("gridBodyDefault_rowStatus"))return;if(!s.match("gridBodyDefault_data"))continue}else if(this.options.dataDragDrop&&!(s.match("gridBodyDefault_data")||s.match("gridBodyDefault_rowNumber")||s.match("gridBodyDefault_rowStatus")))continue;var n=s.getElement(),l=[],h=n.getAttribute(e),d=this.rowIndex+parseInt(parseInt(h)/(this.oneRowDataLength+this.defaultColCnt));""==this.options.dragDisplayColumn?l.push(n.getAttribute(i)):l=this.options.dragDisplayColumn.split(",");for(var c=[],p=0;p<l.length;p++){var g;g=null==l[p]||null==l[p]?(d+1).toString():this._getCellDisplayData(d,l[p].wq_trim()),c.push(g)}if(c=c.join(","),this.isMobile){for(var m=u.f.getTarget(t);m&&"TD"!=m.tagName&&"TH"!=m.tagName&&"DIV"!=m.tagName;)m=m.parentNode;this.__setFocusedCell(t,m)}var f=this,b={id:this.id+"_drag",component:f,className:"w2grid_drag",contents:c,delay:15,applyMousePosition:!0,showNoData:!0,handleStart:function(t){
f._useShiftKey&&(t.shiftKey?f.options.dataDragDropOther=!0:f.options.dataDragDropOther=!1),u.f.fireEvent(f,"ondatadragstart",d)},handleUpdate:function(t,e,i,o,s){var r=null;r=f.isMobile?new WebSquare.targetIterator(document.elementFromPoint(s.changedTouches[0].clientX,s.changedTouches[0].clientY)):f.event.getTargetIterator(s);for(var a=null;r.next()&&!f.options.dataDragDropCell;)if(f.options.dataDragDrop){if(!(r.match("gridBodyDefault_data")||r.match("gridBodyDefault_rowNumber")||r.match("gridBodyDefault_rowStatus")))continue;a=r.getElement()}var n=f.getElementById(f.id+"_resize_line");if(a&&!f.options.dataDragDropOther&&f.options.useDataDragDropGuideLine){var l=a.offsetHeight+a.offsetTop+"px";n.style.cssText="position:absolute;left:10px;right:0px;border:0px dashed #222222; border-top-width:1px;",n.style.display="block",n.style.zIndex=999,n.style.top=l,n.style.width=f.render.offsetWidth+"px",n.style.left=0,n.style.border="1px solid #3a3f44"}},handleFinish:function(){f.getElementById(f.id+"_resize_line").style.display="none"},onDragover:function(t,e,i,o,s,r,n){if(t&&e){var l=null;for(l=f.isMobile?new WebSquare.targetIterator(document.elementFromPoint(n.changedTouches[0].clientX,n.changedTouches[0].clientY)):f.event.getTargetIterator(n);l.next();)if(l.match("w2grid")||l.match("w2grid_tooltip")){if(l.match("w2grid_tooltip"))l.getElement().style.display="none",l=new WebSquare.targetIterator(document.elementFromPoint(u.f.getClientX(n),u.f.getClientY(n)));var h=a.Z.getComponentById(l.getElement().id);h&&f.id!=h.id&&u.f.fireEvent(h,"ondatadragover",f.id,d),l.stop()}}},onDrop:function(t,s,n,l,h,c,p){var g=null,m=null,b=null,y=null,v=null,w=null,S={},_=null,C=null;for(w=f.isMobile?new WebSquare.targetIterator(document.elementFromPoint(p.changedTouches[0].clientX,p.changedTouches[0].clientY)):f.event.getTargetIterator(p);w.next();){if(w.match(null,null,"body"))return;if(w.match("w2grid")){g=w.getElement().id;break}if(w.match("w2grid_tooltip"))w.getElement().style.display="none",w=new WebSquare.targetIterator(document.elementFromPoint(u.f.getClientX(p),u.f.getClientY(p)));if(w.match("w2treeview")||w.match("w2treeview_virtual")||w.match("w2input")||w.match("w2textarea")||f.options.dataDragDropClass&&w.match(f.options.dataDragDropClass)){_=w.getElement().id;break}if(w.match("w2treeview_node")||w.match("treeview_virtual_node"))C=w.getElement().getAttribute(o);else if(null==b){if(f.options.dataDragDropCell){if(w.match("gridBodyDefault_rowNumber")||w.match("gridBodyDefault_rowStatus"))return;if(!w.match("gridBodyDefault_data"))continue}else if(f.options.dataDragDrop&&!(w.match("gridBodyDefault_data")||w.match("gridBodyDefault_rowNumber")||w.match("gridBodyDefault_rowStatus")))continue;var x=w.getElement();b=parseInt(x.getAttribute(e),10),"string"!=typeof(y=x.getAttribute(i))&&(y=void 0)}}if((!f.options.dataDragDropSelf||f.id===g)&&(!f.options.dataDragDropOther||f.id!=g)&&(null!=g&&(m=(g=a.Z.getComponentById(g)).getDataLength(),null!=b&&(m=g.rowIndex+parseInt(b/(g.oneRowDataLength+g.defaultColCnt)))),null!=_&&(_=a.Z.getComponentById(_)),g||_)){var I,T,k,L=t.getAttribute(i),A=f.getColumnIndex(L);if(f.options.dataDragDropCell)if(I=[],f.focusedCell.length>1)for(var D=0;D<f.focusedCell.length;D++){var W=(R=f.focusedCell[D]).focusedColIndex,q={rowIndex:R.focusedRowIndex,colIndex:W,colId:f.getColumnID(W),data:f.dataList.getCellData(R.focusedRowIndex,W)};I.push(q)}else{q={rowIndex:d,colIndex:A,colId:L,data:f.dataList.getCellData(d,A)};I.push(q)}else if(f.options.dataDragDrop){var M=g&&""==g.options.dragEndFunction&&""==f.options.dragStartFunction;if(f.focusedCell.length>1&&(f.options.dataDragDropClass||M)){G=[],z=[];var E=[];for(D=0;D<f.focusedCell.length;D++){var R,N=(R=f.focusedCell[D]).focusedRowIndex;E.push(N)}z=E.filter((function(t,e,i){return i.indexOf(t)===e})),z.sort((function(t,e){return t-e}));for(D=0;D<z.length;D++)for(var F=f.dataList.getRowArray(z[D]).data,O=0;O<F.length;O++)G.push(F[O])}else T=f.dataList.getRowArray(d).data}
if(""!=f.options.dragStartFunction){var B=a.Z.getGlobalFunction(f.options.dragStartFunction,f.scope_id);if("function"==typeof B)if(f.drillDownDragDrop){var P,Y;f.getRowCount()<=m?(P=void 0,Y=void 0):(P=f.getRealRowIndex(m),Y=f.dataList.getRowData(m));var V=[U=f.getRealRowIndex(d)].concat(f.drilldown.getRecursiveRowIndex(U)),H=[];for(D=0;D<V.length;D++)H=H.concat(f.dataList.getRowData(f.getDisplayRowIndex(V[D])));if(!B.call(f,{parentRowIndex:P,parentRowData:Y,beforeRemoveData:H,beforeRemoveRowIndex:V}))return}else{var j={fromColumnId:L,fromColumnIndex:A,rowJSON:f.dataList.getRowJSON(d)};null==k&&(k=f.dataList.getRowXML(d)),k=B.call(f,d,k,j)}}else if(g&&f.id!==g.id&&f.drillDownDragDrop){var z=[U=f.getRealRowIndex(d)].concat(f.drilldown.getRecursiveRowIndex(U)),G=[];for(D=0;D<z.length;D++)G=G.concat(f.dataList.getRowData(f.getDisplayRowIndex(z[D])))}if(g&&""!=g.options.dragEndFunction){var Z=a.Z.getGlobalFunction(g.options.dragEndFunction,g.scope_id);if("function"==typeof Z)if(f.drillDownDragDrop){if(f.id==g.id){if(f.isDrillDown&&m!=d){var U=f.getRealRowIndex(d);if(f.getRowCount()<=m)f.drilldown.bodyDrop=!0,Q=(tt=f.getRealRowIndex(m-1))+f.drilldown.getRecursiveRowCount(tt);else Q=f.getRealRowIndex(m)+1;var X=[U].concat(f.drilldown.getRecursiveRowIndex(U)),K=f.drilldown.moveNode(U,Q),$=[K.insertedRowIndex].concat(f.drilldown.getRecursiveRowIndex(K.insertedRowIndex)),J=[];for(D=0;D<X.length;D++)J.push(f.dataList.getRowJSON(X[D]));S={removedData:K.detachedData,removedRowIndex:X,insertedData:K.insertedData,insertedRowIndex:$,fromRowIndex:U,toRowIndex:$[0],rowJSON:J},Z.call(f,Q,f.dataList.getRowXML(d),S)}}else if(g.drillDownDragDrop&&g.isDrillDown){var Q,tt;U=f.getRealRowIndex(d);if(g.getRowCount()<=m)g.drilldown.bodyDrop=!0,Q=(tt=g.getRealRowIndex(m-1))+g.drilldown.getRecursiveRowCount(tt);else Q=g.getRealRowIndex(m);for(V=[U].concat(f.drilldown.getRecursiveRowIndex(U)),H=[],D=0;D<V.length;D++)H=H.concat(f.dataList.getRowData(f.getDisplayRowIndex(V[D])));k=f.dataList.getRowXML(d);for(J=[],D=0;D<V.length;D++)J.push(f.dataList.getRowJSON(V[D]));S={removedData:H,removedRowIndex:V,fromRowIndex:U,toRowIndex:Q,rowJSON:J},Z.call(f,Q,k,S)&&f._dataList.removeRow(U)}}else{v="string"==typeof y?g.getColumnIndex(y):void 0;j={};if(f.options.dataDragDropCell){if(j={fromColumnId:L,fromColumnIndex:A,toColumnId:y,toColumnIndex:v,cellDataArray:I},Z.call(f,m,null,j)){f._setEmbeddedInputValue(g,d,A,!0);for(D=0;D<I.length;D++){var et=I[D];f._dataList.setCellData(et.rowIndex,et.colId,null)}}}else f.options.dataDragDrop&&(j={fromColumnId:L,fromColumnIndex:A,toColumnId:y,toColumnIndex:v,rowJSON:f.dataList.getRowJSON(d)},!0!==r.I.isXML(k)&&(k=f.dataList.getRowXML(d)),Z.call(f,m,k,j)&&(f._setEmbeddedInputValue(g,d,A,!0),f.dataList.removeRow(d)))}}else if(g){v="string"==typeof y?g.getColumnIndex(y):void 0;var it={_this:f,targetGrid:g,cellDataArray:I,rowsArray:G,rowsArrayIndex:z,rowIndex:d,rowXml:k,targetRowIndex:m,rowArray:T,fromColumnIndex:A,toColumnId:y,toColumnIndex:v};f._defaultDragEndHandler(it),f.removeFocusedCell(),f.id!=g.id?u.f.fireEvent(g,"ondatadrop",{fromId:f.id,fromRowIndex:d,toRowIndex:m}):u.f.fireEvent(g,"ondatadropself",{id:f.id,fromRowIndex:d,toRowIndex:m}),t.blur()}else if(_){var ot;null!=C&&(ot=_.tree.findNodeByIndex(C),C=parseInt(C,10)),u.f.fireEvent(_,"ondropfromgrid",{dataListId:f._dataList.id,fromId:f.id,fromRowIndex:d,value:this.contents,dropNode:ot,toRowIndex:C,rowIndexArr:z||[d]}),f.removeFocusedCell(),t.blur()}}}};return this.isMobile&&(b.passive=!1,b.showGhostOnActivate=!0,b.ghostRightTop=!0,b.delay=0),void WebSquare.dragdrop.gDragManager.activate(t,n,b)}},b.prototype._defaultDragEndHandler=function(t){try{var e=t._this,i=t.targetGrid,o=t.cellDataArray,a=t.rowsArray,n=t.rowsArrayIndex,l=t.rowIndex,h=t.rowXml,d=t.targetRowIndex,c=t.rowArray,u=t.fromColumnIndex,p=(t.toColumnId,t.toColumnIndex);if(e.isDrillDown)if(e.id==i.id&&d!=l){if(e.drillDownDragDrop){var g=e.getRealRowIndex(l);if(e.getRowCount()<=d)e.drilldown.bodyDrop=!0,
m=(f=e.getRealRowIndex(d-1))+e.drilldown.getRecursiveRowCount(f);else m=e.getRealRowIndex(d)+1;return void e.drilldown.moveNode(g,m)}}else if(i.drillDownDragDrop&&i.isDrillDown){var m,f;g=e.getRealRowIndex(l);if(i.getRowCount()<=d)i.drilldown.bodyDrop=!0,m=(f=i.getRealRowIndex(d-1))+i.drilldown.getRecursiveRowCount(f);else m=i.getRealRowIndex(d)+1;for(var b=[g].concat(e.drilldown.getRecursiveRowIndex(g)),y=[],v=b.length-1;v>=0;v--)y=y.concat(e.dataList.getRowData(e.getDisplayRowIndex(b[v])));return i.drilldown.appendNode(m,y),void e.dataList.removeRow(g)}var w=i._dataList.getBroadcast();if(i._dataList.setBroadcast(!1),e.options.dataDragDropCell&&o){if(void 0===p)return;e._setEmbeddedInputValue(i,l,u,!0);for(v=0;v<o.length;v++){var S=o[v];e._dataList.setCellData(S.rowIndex,S.colId,null)}var _=o[0].rowIndex,C=o[0].colIndex;for(v=1;v<o.length;v++)o[v].rowIndex<_&&(_=o[v].rowIndex),o[v].colIndex<C&&(C=o[v].colIndex);for(var x=i.getRowCount(),I=i.getColumnCount(),T=0;T<o.length;T++){var k=(S=o[T]).rowIndex-_,L=S.colIndex-C,A=d+k,D=p+L;if(!(A<0||A>=x||D<0||D>=I)){var W=D,q=i.tdIdList[W],M=i._dataList.getColumnIndex(q),E=S.data,R=i.getCellInfo(W);E=i._validateAndFormat(E,R,i,q,M,W),i._dataList.setCellData(A,M,E)}}}else if(e.options.dataDragDrop){if(a&&n){var N=-1;if(e.id==i.id)for(v=0;v<n.length;v++)n[v]<d&&N++;N=Math.max(0,N);var F=i.dataList.getRealRowIndex(d),O={};if(e.options.dataDragDropStatus)for(var B=0;B<n.length;B++)O[B]=e.dataList.getRowStatus(n[B]);e.dataList.removeRows(n),void 0===F&&(F=d,N=0);var P=F-N;e.id==i.id&&(P=Math.min(P,e.getRowCount())),i._dataList.insertData(P,a);var Y=0;if(e.options.dataDragDropStatus){for(var V in O){var H=P+Y,j=e._dataList.options.depthColumn?H:e._dataList.getRealRowIndex(H);e._dataList._setRowStatus(j,O[V]),Y++}e.setFocusedMultiCell(P,0,P+Y-1,0)}e.id===i.id?e._moveCellVisible(n,P,{remove:!0,insert:!0}):(e._moveCellVisible(n,P,{remove:!0}),i._moveCellVisible(n,P,{insert:!0}))}else{var z=e.dataList.getRowStatus(l);if(e.dataList.removeRow(l),!0===r.I.isXML(h)?i.dataList.setRowXML(d,h):i.dataList.setRowData(d,c),e.options.dataDragDropStatus){j=e._dataList.options.depthColumn?d:e._dataList.getRealRowIndex(d);e._dataList._setRowStatus(j,z),e.setFocusedCell(j,0)}e.id===i.id?e._moveCellVisible([l],d,{remove:!0,insert:!0}):(e._moveCellVisible(n,P,{remove:!0}),i._moveCellVisible(n,P,{insert:!0}))}e._setEmbeddedInputValue(i,l,u)}!1!==w&&i._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0}]})}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype._setEmbeddedInputValue=function(t,e,i,o){try{var r=t.cellInfoHash[t.tdIdList[i]];if(r.options.embeddedInput){var a=t.data_td_list[i+e*t.oneRowDataLength],n=t.dataList.getCellData(e,i);t.getInput(r,a,n).render.value=o?null:n}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.dragSelectAutoScroll=function(t,e,i){try{this._dragSelectAutoScrollStartTime=new Date,a.Z.setInterval((function(t,e,i){this._dragSelectAutoScroll(t,e,i)}),{key:this.id+"_dragSelectAutoScroll",caller:this,delay:this.options.dataDragSelectAutoScrollPeriod,args:[t,e,i]})}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype._dragSelectAutoScroll=function(t,e,i){try{var o=0,r=this.getRowCount(),n=null==this.lastTopRowIndex?r-this.lastIndex:this.lastTopRowIndex,l=WebSquare.style.getAbsoluteTop(this.render),h=l+e,d=1;if(t>h?o=t-h:l>t&&(o=l-t,d=-1),0!==o){var c=new Date-this._dragSelectAutoScrollStartTime,u=Math.floor(c/this.options.dataDragSelectAutoScrollLevel),p=Math.pow(2,u),g=Math.ceil(o*this.options.dataDragSelectAutoScrollDPI/100)*p*d,m=Math.max(Math.min(this.rowIndex+g,n-1),0);this.rowIndex!==m&&(this.scrollEvent=!1,this.checkScrollEnd=!0,this.rowIndex=m,this.fastDrawData(0,{scroll:!0}),this._dragSelectAutoScrollFlag=!0,document.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(m))}for(var f=0,b=WebSquare.style.getAbsoluteLeft(this.render),y=b+this.render.offsetWidth,v=0;v<this.defaultColCnt;v++)b+=this.colWidthList[v];d=1
;if(i>y?f=i-y:b>i&&(f=b-i,d=-1),0!==f){var w=a.Z.getDataPrefix("tdIndex"),S=this.focusedCell[0],_=this.getLastFocusedCell().focusedTd,C=parseInt(_.getAttribute(w)),x=parseInt(C/this.realRowDataLength),I=S.focusedRowIndex,T=S.focusedColIndex,k=x+this.rowIndex,L=C%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);L=d<0?Math.max(0,L-1):Math.min(this.oneRowDataLength-1,L+1),this._applyFocusedMultiCell(I,T,k,L),d<0?this.fixScrollLeftDirection():this.fixScrollRightDirection()}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.dragSelectAutoScrollFinish=function(){try{if(a.Z.clearInterval(this.id+"_dragSelectAutoScroll"),!0!==this._dragSelectAutoScrollFlag)return;this._dragSelectAutoScrollFlag=!1,this._dragSelectAutoScrollStartTime=0;var t=a.Z.getDataPrefix("tdIndex");r.I.setTimer((function(){var e=this.focusedCell[0],i=this.getLastFocusedCell().focusedTd,o=parseInt(i.getAttribute(t)),s=parseInt(o/this.realRowDataLength),r=e.focusedRowIndex,a=e.focusedColIndex,n=s+this.rowIndex,l=o%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),h=null==this.lastTopRowIndex?this.getRowCount()-this.lastIndex-1:this.lastTopRowIndex,d=r<=n?1:-1,c=Math.max(Math.min(this.rowIndex+d,h),0);this.drawData(c,0),this._applyFocusedMultiCell(r,a,n,l)}),{key:this.id+"__dragSelectAutoScroll_drawData",caller:this,delay:this.options.dataDragSelectAutoScrollDelay})}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.otherClickEvent=function(){try{this.isMobile?(this.event.addListener(document.documentElement,"ontouchstart",this.event.bindAsEventListener(this,this.handleClickEventDocument)),this.options.tooltipDisplay&&this.hideTooltip()):WebSquare.getBody().getLayerListener().addListener({component:this,event:{},otherClick:this.handleClickEventDocument,frameClick:this.handleClickEventFrame})}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleClickEventFrame=function(t){try{this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,!0]),this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),this.hideContextMenu(),this.groupbyFilterList&&this.hideGroupbyFilterList(),this.options.focusAutoRemove&&this.removeFocusedCell()}catch(t){s.Y.printStackTrace(t)}},b.prototype.handleClickEventDocument=function(t){this.lastEvent=t,this.isHammerEnabled()&&!t.srcElement.id==this.id+"_toGoButton"&&this.hideTooltip(),this.event.isMe(t,this.render)||this.isMine(t)?this.handleClickEventDocumentAfter(t):(this.editedCell?this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,!1,{otherClick:!0}],{beforeFunc:function(t,e){t.handleClickEventDocumentAfter(e);var i=WebSquare.getBody();i.layerListener.handleMouseDownEventDocument.call(i,e),i=null},beforeFuncArgs:[this,t]}):this.handleClickEventDocumentAfter(t),this.options.tooltipDisplay&&this.isMobile&&(!t.srcElement.id==this.id+"_toGoButton"&&this.hideTooltip(),t.srcElement.id==this.id+"_tooltip"&&u.f.stopEvent(t)))},b.prototype.handleClickEventDocumentAfter=function(t){if(this.contextMenu){var e=u.f.getTarget(t);e&&e.className.match("contextMenu")||this.hideContextMenu()}if(this.groupbyFilterList||this.customFilterScrollView){var i=this.event.getTargetIterator(t,this.render),o=!0;if(this.customFilterScrollView&&this.customFilterScrollView.render&&"none"==this.customFilterScrollView.render.style.display)o=!1;else for(;i.next();)if(i.match("gridHeaderTDDefault")||i.match("w2grid_groupbyZone_scrollView")||i.match("w2grid_groupbyZone_column")||i.match("w2grid_customFilter_scrollView")||i.match("w2grid_customFilter_column")){o=!1;break}o&&this.hideCustomFilterList()}if(this.options.groupbyZone&&this.options.groupbyFilterBox)for(i=this.event.getTargetIterator(t,this.render),o=!0;i.next();)if(i.match("w2grid_filterBox_select_tbody")||i.match("w2grid_filterBox_itemTable")){o=!1;break}if(this.groupbyFilterList){for(i=this.event.getTargetIterator(t,this.render),
o=!0;i.next();)if(i.match("w2grid_groupbyZone_list")||i.match("w2grid_groupbyZone_column")||i.match("gridHeaderTDDefault")){o=!1;break}o&&this.hideGroupbyFilterList()}this.options.focusAutoRemove&&this.removeFocusedCell()},b.prototype.isMine=function(t){try{for(var e=u.f.getTarget(t);null!=e;){if(e.id&&e.id.indexOf&&e.id.indexOf("G_"+this.id+"__")>=0)return!0;e=e.parentNode}return!1}catch(t){s.Y.printStackTrace(t)}},b.prototype.handleResize=function(t){try{var e=t||{},i=this.render.offsetWidth,o=this.render.offsetHeight;if(i>0&&o>0)if(this.delayedDrawObj)this.resizeObj={width:i,height:o,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.setRedrawStatus("draw");else{var n=i-this.resizeObj.width,l=o-this.resizeObj.height,h=!1,d=this.hiddenCellObj.length>0;if(!0===this._isHybridScroll()&&0!==l)this.setScrollYHeightHybrid();else if(l>0){if(this.options.adaptive){var c=parseInt(this.options.adaptiveThreshold)||480;if(!(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10)&&a.Z._getBrowserWidth()<=c)return}this._setGridHeightBefore(),h=!0;var u=this.getDataLength(),p=this.drawedRowLength;this.lastTopRowIndex=null,this.setDataTable(),this.setScrollYHeight();var g=this._getVisibleLastIndex(this.lastIndex+1);if(u<=0);else if(this.rowIndex+g-1+this.drawedRowLength-p<u){var m=u-this.drawedRowLength+1,f=this.rowIndex;this.rowIndex+1>m&&m>=-1&&(f=m>=0?m:0),d?(this.rowIndex=f,this._setCellVisibleRefresh()):this.drawData(f,0,null,null,{noApplyRealFocus:!0})}else{var b,y;if((f=u-this.drawedRowLength>0?u-this.drawedRowLength:0)==this.rowIndex)b=g-1;else this.scrollEvent=!1,this.checkScrollEnd=!0,this.getElementById(this.id+"_scrollY_div").scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(f);if(d)this.rowIndex=f,this._setCellVisibleRefresh();else e.startPoint&&(y=parseInt(e.startPoint),isNaN(y)||(b=y)),this.drawData(f,b,null,null,{noApplyRealFocus:!0})}this._setGridHeightAfter()}else if(l<0&&"all"!=this.options.visibleRowNum){this._setGridHeightBefore(),this._setGridHeightAfter(),h=!0;var v=this.getElementById(this.id+"_body_table");this.dataLayerHeight=v.parentNode.offsetHeight;var w=Number(this.options.visibleRowNum),S=this.getVisibleRowNum();d?this._setCellVisibleRefresh():(!isNaN(w)&&w>0&&w>=S||(this.lastTopRowIndex=null,this.cutGridBottom(this.lastIndex)),this.setScrollYHeight())}0!=n&&(h=!0,this.resizeObj.clientWidth=this.render.clientWidth,this.setScrollYHeight(),this.options.autoFit||this.setOverflowX(),this._handleScrollX(),this.options.autoFit&&this.autoFitFunc(),d&&this._setCellVisibleRefresh(),this.displayFixedColumnLine()),h&&this.groupbyZoneStatus.groupbyZoneRender&&this.resizeGroupbyZone()}else this.setRedrawStatus("stop");this.groupbyZoneStatus.groupbyZoneRender&&!this.adjustGroupbyZone&&(this.adjustGroupbyZone=!0,this.resizeGroupbyZone()),this.resizeObj={width:i,height:o,scrollLeft:this.resizeObj.scrollLeft,scrollTop:this.resizeObj.scrollTop,clientWidth:this.resizeObj.clientWidth},this.resizeObj.width>0&&this.resizeObj.height>0&&(this.resizeObj.scrollLeft=this.getElementById(this.id+"_scrollX_right").scrollLeft,this.resizeObj.scrollTop=this.getElementById(this.id+"_scrollY_div").scrollTop)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.resizeGroupbyZone=function(){if(this.groupbyZoneStatus.groupbyZoneRender){var t=this.resizeObj.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder,e=this.dom[this.id+"_scrollY_div"].offsetWidth;0!=e&&(t-=e),t+="px",this.groupbyZoneStatus.groupbyZoneRender.style.width!=t&&(this.groupbyZoneStatus.groupbyZoneRender.style.width=t)}},b.prototype.checkResize=function(){try{if(this.render){var t=!0;if(WebSquare.getBody().modalStack&&WebSquare.getBody().modalStack.length>0&&this.getDisabled()){for(var e=this.parentControl;e&&(!e.options||"floatingLayer"!=e.options.pluginName&&("wframe"!==e.options.pluginName&&"pageFrame"!==e.options.pluginName||!e._isWframePopup));)e=e.parentControl;null==e&&(t=!1)}
t&&!this.startedDisplayNone&&this.handleResize()}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match(this.options.bodyTdClass)||WebSquare.idToUUID[e.getElement().getAttribute("id")]){this.bodyDblClick(t,e.getElement());break}if(e.match(this.options.headerTdClass)){this.headerDdlClick(t,e.getElement());break}if(this.hasFooter&&e.match(this.options.footerTdClass)){this.footerDblClick(t,e.getElement());break}if(this.hasSubtotal){if(this.subtotalClassList){for(var i=!1,o=0;o<this.subtotalClassList.length;o++)if(this.subtotalClassList[o].length>0&&e.match(this.subtotalClassList[o])){this.subtotalDblClick(t,e.getElement()),i=!0;break}if(i)break}else if(e.match(this.options.subtotalTdClass)){this.subtotalDblClick(t,e.getElement());break}}else e.match("w2grid_customFilter_sortable_open")&&(u.f.stopEvent(t),e.stop())}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleClickEvent=function(t){try{if(this.lastEvent=t,u.f.fireEvent(this,"onclick",t),this.isMobile&&this.iScroll&&this.iScroll.moveDirection&&this.iScroll.moveDistance>10)return;var e,i,o,r,a,n,l,h=this.event.getTargetIterator(t,this.render),d=null!=this.editedCell,c=this.lastEvent;d&&(e=this.editedCell.editRowIndex,i=this._dataList.getColumnIndex(this.editedCell.id),l=this.getCellInfo(this.editedCell.id),o=this.getColumnIndex(this.editedCell.id),r=this._grid.getRealRowIndex(e),a=this._dataList.dataArr[r*this._dataList.getColumnCount()+i],n=l.comp&&l.comp.selectedIndex);for(var p=function(t,e){var i=!1;if(e.subtotalClassList)for(var o=0;o<e.subtotalClassList.length;o++)if(e.subtotalClassList[o].length>0&&t.match(e.subtotalClassList[o])){i=!0;break}return i},g=!1;h.next();){if(h.match(this.options.bodyTdClass)){g=!0,this.bodyClick(t,h.getElement(),{from_handleClickEvent:!0});break}if(h.match(this.options.headerTdClass)){g=!0,this.headerClick(t,h.getElement(),{from_handleClickEvent:!0}),d&&null==this.editedCell&&(e=this.getDisplayRowIndex(r));break}if(this.hasFooter&&h.match(this.options.footerTdClass)){g=!0,this.footerClick(t,h.getElement(),{from_handleClickEvent:!0});break}if(this.hasSubtotal&&(h.match(this.options.subtotalTdClass)||p(h,this))){g=!0,this.subtotalClick(t,h.getElement(),{from_handleClickEvent:!0});break}if(this.isMine(t));else{if(h.match(this.options.headerTableClass))break;if(h.getElement().getAttribute("id")==this.id+"_dataLayer"){g=!0,null!=this.editedCell&&this.editedCell.handleEndEdit(t,void 0,{from_handleClickEvent:!0}),u.f.fireEvent(this,"onblankclick",t);break}}}if(d){var m=this._dataList.dataArr[r*this._dataList.getColumnCount()+i];if(0===a&&(a="0"),0===m&&(m="0"),a!=m){var f={oldValue:a,newValue:m,rowIndex:e,colIndex:o,colId:this.getColumnID(o)};isNaN(n)||(f.oldSelectedIndex=n,f.newSelectedIndex=l&&l.comp&&l.comp.selectedIndex),u.f.fireEvent(this,"onviewchange",f)}var b=this._getGroupbyDisplayRowIndex(e);this.options.viewChangeAfterEdit&&g&&u.f.fireEvent(this,"onafteredit",b,o,m,c)}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.gridDataLayerOut=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},b.prototype.gridHeaderOver=function(t){this.overElem&&(this.options.rowMouseOver&&this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null)},b.prototype.gridOver=function(t){for(var e=a.Z.getDataPrefix("colIndex"),i=a.Z.getDataPrefix("col_id"),o=u.f.getTarget(t);o&&("TD"!=o.tagName||null==o.getAttribute(e)||!(this.hasClass(o,this.options.bodyTdClass)||this.hasClass(o,this.options.subtotalTdClass)||this.hasClass(o,this.options.footerTdClass)));){if("TD"==o.tagName&&null!=o.getAttribute(e)&&this.subtotalClassList){for(var s=!1,r=0;r<this.subtotalClassList.length;r++)if(this.subtotalClassList[r].length>0&&this.hasClass(o,this.subtotalClassList[r])){s=!0;break}if(s)break}
if(this.options.tooltipHeader&&"TH"==o.tagName&&null!=o.getAttribute(e))break;if("DIV"==o.tagName&&o.getAttribute("id")==this.id+"_dataLayer")break;if("TABLE"==o.tagName&&o.getAttribute("id")==this.id+"_foot_table")break;if("TH"==o.tagName&&this.hasClass(o,this.options.headerTdClass))break;o=o.parentNode}if(o.id==this.id+"_dataLayer")this.overElem&&(this.removeRowOverStyle(this.overElem.parentNode),this.bodyOut(t,this.overElem),this.overElem=null);else if(o.id==this.id+"_foot_table")this.overElem&&(this.bodyOut(t,this.overElem),this.overElem=null);else if(o&&"TD"==o.tagName){if(this.overElem!=o&&-1==o.className.indexOf(this.options.headerTdClass)){this.bodyOut(t,this.overElem),(this.options.tooltipDisplay||this.options.rowStatusTooltipDisplay)&&this.bodyOver(t,o),this.options.rowMouseOver&&(this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.hasClass(o,"w2grid_groupby")||this.addRowOverStyle(o.parentNode)),this.overElem=o;var n={};o.getAttribute(i)&&(n.rowIndex=this._getGroupbyDisplayRowIndex(this.getElemRowIndex(o)),n.colIndex=this.getColumnIndex(o.getAttribute(i))),u.f.fireEvent(this,"onbodymouseover",n)}}else if(o&&"TH"==o.tagName&&this.overElem!=o){this.bodyOut(t,this.overElem),(this.options.tooltipHeader||this.options.headerTooltipDisplay)&&this.headerOver(t,o),this.options.rowMouseOver&&this.overElem&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),this.overElem=o;n={};var l=a.Z.getDataPrefix("header_id"),h=this.overElem.getAttribute(i),d=this.overElem.getAttribute(l);if(d&&d===this._headerOverElemId)return;this.getHeaderInfo(h)&&(n.header_id=d,n.id=this.overElem.id,this._headerOverElemId=d),u.f.fireEvent(this,"onheadermouseover",n)}},b.prototype.gridOver1=function(t){var e=u.f.getTarget(t);("NOBR"==e.tagName||"SPAN"==e.tagName&&e.className.indexOf("w2grid_span")>-1)&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem&&this.removeRowOverStyle(this.overElem.parentNode),this.addRowOverStyle(e.parentNode)),this.overElem=e)},b.prototype.gridOver2=function(t){var e=u.f.getTarget(t);("NOBR"==e.tagName||"SPAN"==e.tagName&&e.className.indexOf("w2grid_span")>-1)&&(e=e.parentNode),void 0!==e.tagName&&"TD"==e.tagName&&(this.options.rowMouseOver&&(this.overElem,this.addRowOverStyle(e.parentNode)),this.overElem=e)},b.prototype.handlePasteEvent=function(t){try{var e=this.options.preventPasteColumn,i=e?e.split(","):[];if(this.options.preventPaste&&!this.editedCell||u.f.getTarget(t)&&u.f.getTarget(t).getAttribute("class")&&u.f.getTarget(t).getAttribute("class").indexOf("w2grid_head_input")>-1)return;if(!1===u.f.fireEvent(this,"oncustompaste",t))return;var o,n,l,h,d=a.Z.isIEAllVersion()?window.clipboardData:t.clipboardData;if("native"!==this.options.copyType&&!0===this.options.noUseCSVParser&&(o=d.getData("gridView")),o||(o=d.getData("Text")),1==this.options.ctrlShiftKey&&(n=d.getData("Nofocus")),"\r\n"==o.slice(-2)?o=o.slice(0,o.length-2):"\n"==o.slice(-1)&&(o=o.slice(0,o.length-1)),this.options.customPasteFormatter)if("string"==typeof this.options.customPasteFormatter){var c=a.Z.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id);if("function"==typeof c){var p=c.call(this,o);o=p||o}}else $l("The type of customPasteFormatter must be string.");if("native"===this.options.copyType?l=[[o]]:(1==this.options.ctrlShiftKey&&(h=Papa.parse(n,{delimiter:"\t"}).data),l=Papa.parse(o,{delimiter:"\t"}).data),a.Z.isIEAllVersion("6 7")&&'"'===o.slice(0,1)&&'"'===o.slice(-1)&&-1==o.slice(1,-1).indexOf("\t")&&(l=[[o.slice(1,o.length-1)]]),!l||null==l||"undefined"==l||0==l.length)return;if(this.focusedCell.length>0){for(var g,m=this.getColumnOrder(),f=this.htmlInfo.body.rowAttrArr.length,b=this.getDataLength()*f,y=0,v=m.length,w=0,S=null,_=0,C=0;C<this.focusedCell.length;C++){var x=this.focusedCell[C],I=x.focusedRowIndex,T=x.focusedColIndex,k=this.getLocationRowCol(I,T);I=k.rowIndex,T=k.colIndex,
_+=k.rowSize*k.colSize-1,b>I&&(b=I),y<I+k.rowSize-1&&(y=I+k.rowSize-1),v>T&&(v=T),w<T+k.colSize-1&&(w=T+k.colSize-1),b==I&&v==T&&(S=x)}"row"==this.options.focusMode&&1==this.options.rowCopy&&(v=0,w=m.length-1);var L=0;for(C=this.defaultColCnt+v;C<this.defaultColCnt+w;C++)1==this.hiddenList[C]&&(L+=1);if(this.focusedCell.length>1&&this.focusedCell.length+_!=(y-b+1)*(w-v-L+1))return;var A=!1;if(_>0&&(A=!0),g={focusedRange:{minRow:b,maxRow:y,minCol:v,maxCol:w},startCell:S},S.focusedRowIndex>=0&&S.focusedColIndex>=0){var D=S.focusedTd;if(D){var W=a.Z.getDataPrefix("col_id"),q=a.Z.getDataPrefix("colMerged"),M=D.getAttribute(W);if(null==M||""==M.wq_trim())return;if("1"==D.getAttribute(q))return}else{var E=this.getCellInfo(S.focusedColIndex);if(E&&(E.options.colMerge||E.options.colMergeAnd))return}var R=b,N=v,F=this.getOriginalRowCol(b,v),O=(T=F.colIndex,I=F.rowIndex,this.getTotalRow()),B=(this.getTotalCol(),O*f),P=m.length;if(this.options.checkBlankRowOnPaste)for(C=l.length-1;C>-1;C--){for(var Y=!0,V=0;V<l[0].length;V++)if(""!=l[C][V].wq_trim()){Y=!1;break}Y&&l.splice(C,1)}if(!1===u.f.fireEvent(this,"onbeforepaste",{rowIndex:this._getGroupbyDisplayRowIndex(I),colIndex:T,data:l.slice(0)}))return;this.isPaste=!0;var H,j=this,z=function(t){for(var e=j.defaultColCnt+t;e<j.hiddenList.length;e++)if(0==j.hiddenList[e])return e-j.defaultColCnt},G=this.uuid,Z=!1,U=function(t){var e=WebSquare.idCache[G],o=e.options.checkReadOnlyOnPasteEnable,s=o?o.split(","):[];if(R+l.length>B&&!a.Z.getBoolean(j.options.preventAddRowOnPaste)&&"focus"!==j.options.pasteOption){var r=Math.ceil((R+l.length-B)/f),n=Array(j._dataList.getTotalCol()*r);if(""!=j.depthColumn)for(var d=j._dataList.getCellInfo(j.depthColumn).options.defaultValue,c=0;c<r;c++)n[c*j._dataList.getTotalCol()+j._dataList.getColumnIndex(j.depthColumn)]=d;if(j.options.setDefaultValueOnPaste){var p=j._dataList.getTotalCol();for(c=0;c<p;c++)for(var g=j._dataList.getCellInfo(c).options.defaultValue,m=0;m<r;m++)n[m*p+j._dataList.getColumnIndex(c)]=g}if(j.options.checkReadOnlyOnPaste){var S=!0,_=!1;for(c=0;c<l.length;c++){var C=N,x=R+c;for(m=0;m<l[0].length&&!(null==C||C>=P);m++){var I=(D=j.getOriginalRowCol(x,C)).colIndex,T=D.rowIndex;_=!1;for(var k=0;k<s.length;k++)if(s[k]==e.getColumnID(I)){_=!0;break}if(!j.___getEditReadOnly(T,I)||j.___getEditReadOnly(T,I)&&_){S=!1;break}C=z(C+1)}}if(S)return}if(j.options.checkDisabledOnPaste){var L=!0;for(c=0;c<l.length;c++)for(C=N,x=R+c,m=0;m<l[0].length&&!(null==C||C>=P);m++){var D;I=(D=j.getOriginalRowCol(x,C)).colIndex,T=D.rowIndex;if(!j._getEditDisabled(T,I)){L=!1;break}C=z(C+1)}if(L)return}if(n.length>0){Z=!0,j._dataList.setData(n,!0);var W=[];W[r-1]=void 0;c=0;for(var q=r;c<q;c++)W[c]="C";H=W.length,j._dataList.rowStatusArr=j._dataList.rowStatusArr.slice(0,O).concat(W)}}var M=function(o,r,n){for(var d=function(t,e,i,o){var s=j.data_td_list[e+(t-j.rowIndex)*j.oneRowDataLength];if(t<j.rowIndex&&(s=null),!(j.groupbyStatus.grouped&&s&&j.hasClass(s,"w2grid_groupby"))){var r=j.getCellInfo(e),a=j._getRealColIndex("body",r.options.col_id)+j.defaultColCnt;if(!r.options.blockSelect&&!j.hiddenList[a]){if(1==j.options.ctrlShiftKey)if("true"!=(h[o].length>1?h[o][e]:h[o]))return;var n={focusedTd:s,focusedRowIndex:t,focusedColIndex:e};j.options.groupbyDisplayRowIndex&&(n.groupbyDisplayRowIndex=j._getGroupbyDisplayRowIndex(t)),i?j.focusedCell.push(n):j.focusedCell.unshift(n),null!=s&&j.applyFocusedCellIn(s,i)}}},c=o,p=0;p<l.length;p++){for(var g=r,m=0;m<l[p].length&&!(null==g||g>=P);m++){var b=j.getOriginalRowCol(c,g),y=b.colIndex,v=b.rowIndex;if(b.noLeftTop)b.leftCell&&(g=z(g+b.colSize));else{1==j.options.ctrlShiftKey?d(v,y,n,p):d(v,y,n);for(var w=!1,S=0;S<s.length;S++)if(s[S]==e.getColumnID(y)){w=!0;break}if(j.options.checkReadOnlyOnPaste&&j.___getEditReadOnly(v,y)&&!w)g=z(g+b.colSize);else if(j.options.checkDisabledOnPaste&&j._getEditDisabled(v,y))g=z(g+b.colSize);else{var _=!1;for(S=0;S<i.length;S++)if(i[S]==e.getColumnID(y)){g=z(g+b.colSize),_=!0;break}
if(!_&&!(a.Z.getBoolean(j.options.preventAddRowOnPaste)&&j.dataList.getRowCount()*f-1<v||"focus"===j.options.pasteOption&&(g>t.focusedRange.maxCol||g<t.focusedRange.minCol||c>t.focusedRange.maxRow||c<t.focusedRange.minRow))){var C,x=y,I=j.tdIdList[x],T=j._dataList.getColumnIndex(I),k=j._dataList.dataArr[j.getRealRowIndex(v)*j._dataList.getColumnCount()+T],L=l[p][m];1==j.options.ctrlShiftKey&&(C=h[p][m]);var A=j.getCellInfo(x),D=!(!j.isDrillDown||!j._dataList.options.depthColumn)?j.getRealRowIndex(v):v;if("number"!=A.options.dataType&&"float"!=A.options.dataType||"."!==(L=L.wq_trim())&&"-"!==L&&"+"!==L){if((A.options.selectedDataOnPaste||j.options.selectByLabel)&&("autoComplete"===A.options.inputType||"select"===A.options.inputType)){var W,q=A.getItemArray(),M=A.dataComp;if(A.existGridViewItemsetNode||"gridViewItemset"===A.options.itemTableType){var E=A.itemsetObj.nodeset;E.indexOf("data:")>=0&&(M=E.slice(5))}if(M&&(W=A.mainGrid.modelControl.getDataComp(M)),W&&(!q||0==q.length||1==q.length&&(!0===A.options.chooseOption||!0===A.option.allOption)||2==q.length&&!0===A.options.chooseOption&&!0===A.option.allOption)){var R=W.bodyIdColIndexMap[A.itemsetObj.label],N=W.bodyIdColIndexMap[A.itemsetObj.value],F=W.cellIdList.length,O=W.filteredRowIndexArr.length;if(q=[],W&&"linkedDataList"===W.initializeType&&null!=W.conditionInfo&&W.conditionInfo.filterInfo.useRef)for(var B=0;B<W._dataList.getDataLength();B++){(Y={}).label=W._dataList.dataArr[B*F+R],Y.value=W._dataList.dataArr[B*F+N],q[B]=Y}else for(S=0;S<O;S++){var Y={};"linkedDataList"!=W.initializeType&&W.dataArr?(Y.label=W.dataArr[W.filteredRowIndexArr[S]*F+R],Y.value=W.dataArr[W.filteredRowIndexArr[S]*F+N]):(Y.label=W._dataList.dataArr[W.filteredRowIndexArr[S]*F+R],Y.value=W._dataList.dataArr[W.filteredRowIndexArr[S]*F+N]),q[S]=Y}}var V=!1;if(A.options.selectedDataOnPaste)if(0===q.length)V=!0;else for(var G=0;G<q.length;G++){var U=q[G];switch(A.options.selectedDataOnPaste){case"true":case"both":U.value!==L&&U.label!==L||(V=!0);break;case"value":U.value===L&&(V=!0);break;case"label":U.label===L&&(V=!0);break;default:V=!0}if(V)break}if(!V&&A.options.selectedDataOnPaste){l.length<=H+p&&0===m&&Z&&j._drawRowStatus(D-j.rowIndex,D),g=z(g+b.colSize);continue}if(j.options.selectByLabel)for(G=0;G<q.length;G++){if((U=q[G]).label===L){L=U.value;break}}}var X=A.comp&&A.comp.selectedIndex;if("true"===j.options.unformatOnPaste||"true"===A.options.unformatOnPaste){if("calendar"==A.options.inputType&&"date"==A.options.dataType){var K=0;"yearMonthDate"==A.options.calendarValueType?K=8:"yearMonth"==A.options.calendarValueType?K=6:"yearMonthDateHour"==A.options.calendarValueType?K=10:"yearMonthDateTime"==A.options.calendarValueType?K=12:"yearMonthDateTimeSec"==A.options.calendarValueType?K=14:"year"==A.options.calendarValueType&&(K=4);var $=new WebSquare.validator.validateInvoker;$.addCommand(new WebSquare.validator.allowCharCommand("0-9")),$.addCommand(new WebSquare.validator.maxLengthCommand(K)),L=$.validateString(L)}var J=L,Q=A.formatter.masking,tt=A.formatter.type;L=J=void 0===tt||null==tt||"number"!=tt&&"float"!=tt?void 0!==tt&&null!=tt&&"date"==tt?WebSquare.text.unformatDate2(Q,J):void 0!==tt&&null!=tt&&"time"==tt?WebSquare.text.unformatTime(Q,J):WebSquare.text.unformatText(Q,J):WebSquare.text.unformatCurrency(Q,J)}if(L=j._validateAndFormat(L,A,j,I,T,x),1==j.options.ctrlShiftKey?"true"==C&&j._dataList.setCellData(D,T,L):j._dataList.setCellData(D,T,L),!L&&Z&&l.length<=H+p&&j._drawRowStatus(D-j.rowIndex,D),k!=L){if(1==j.options.ctrlShiftKey)var et={oldValue:k,newValue:"true"==C?L:k,rowIndex:v,colIndex:x,colId:j.getColumnID(x)};else et={oldValue:k,newValue:L,rowIndex:v,colIndex:x,colId:j.getColumnID(x)};isNaN(X)||(et.oldSelectedIndex=X,et.newSelectedIndex=A.comp&&A.comp.selectedIndex),u.f.fireEvent(j,"onviewchange",et)}g=z(g+b.colSize)}}}}}c+=1}},E=b,F=v;if(l.length>0&&!A)for(c=1;c<l.length;c++)if(l[c].length!==l[0].length){A=!0;break}if(j.applyFocusedCellOut(),j.focusedCell=[],
A)M(b,v,!1);else if(y-b+1>=l.length&&w-v+1>=l[0].length)for(;E<=y-l.length+1;){for(F=v;F<=w-l[0].length+1;){var Y=!0;E+l.length>y-l.length+1&&F+l[0].length>w-l[0].length+1&&(Y=!1),M(E,F,Y),F+=l[0].length}E+=l.length}else if(y-b+1>=l.length)for(;E<=y-l.length+1;){Y=!0;E+l.length>y-l.length+1&&(Y=!1),M(E,F,Y),E+=l.length}else if(w-v+1>=l[0].length)for(;F<=w-l[0].length+1;){Y=!0;F+l[0].length>w-l[0].length+1&&(Y=!1),M(E,F,Y),F+=l[0].length}else M(b,v,!1)};if("true"===this.options.showMessageOnPaste){var X=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/pasteMessage/@value");WebSquare.layer.pasteMessageLoaded=!1,WebSquare.layer.showProcessMessage(X,{type:"pasteMsg",scope:this.scope_id||""});!function t(){WebSquare.layer.pasteMessageLoaded?(a.Z.clearTimeout(j.id+"_pasteMessageLoaded"),U(),WebSquare.layer.hideProcessMessage({type:"pasteMsg",scope:this.scope_id||""}),u.f.fireEvent(j,"onafterpaste")):a.Z.setTimeout(t,{delay:500,key:j.id+"_pasteMessageLoaded"})}()}else U(g),u.f.fireEvent(this,"onafterpaste")}}this.isPaste=!1,u.f.preventDefault(t)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype._validateAndFormat=function(t,e,i,o,r,n){try{if(e.options.maxLength)if("float"==e.options.dataType)t=new WebSquare.validator.maxFloatLengthCommand(e.options.maxLength,e.options.decimalDelimiter,e.options.delimiter).executeValidateString(t);else if("number"==e.options.dataType||"bigDecimal"==e.options.dataType){t=new WebSquare.validator.maxLengthCommand(e.options.maxLength).executeValidateString(t)}else{var l=parseInt(e.options.maxLength);isNaN(l)||(t=t.slice(0,l))}else if(e.options.maxByteLength){if("number"==e.options.dataType||"bigDecimal"==e.options.dataType)t=new WebSquare.validator.maxByteLengthCommand(e.options.maxByteLength,e.options.byteCheckIgnoreChar).executeValidateString(t)}var h=e.options.allowChar;if(e.options.allowChar||"float"!=e.options.dataType&&"number"!=e.options.dataType&&"bigDecimal"!=e.options.dataType||(h="0-9+-"+e.options.decimalDelimiter),h&&void 0!==h&&null!=h&&""!=h){for(var d=new RegExp("["+h+"]"),c=!0,u=0;u<t.length;u++){if(null==t.charAt(u).match(d)){c=!1;break}}!1===c&&(t="")}if(e.options.ignoreChar)t=new WebSquare.validator.ignoreCharCommand(e.options.ignoreChar).executeValidateString(t);if((""!==e.options.escape?e.options.escape:i.options.escape)+""=="true"&&(t=WebSquare.xml.decode(t)),"radio"===e.options.inputType&&e.options.trueValue===t)for(var p=i.getCheckedIndex(n),g=0;g<p.length;g++)i._dataList.setCellData(p[g],r,e.options.falseValue);if("text"===e.options.inputType||"textImage"===e.options.inputType){var m=a.Z.getGlobalFunction(e.options.customModelFormatter,i.scope_id);"function"==typeof m?(i.useCustomModelFormatter=!0,t=m.call(i,t,t,e.editRowIndex,e.getColumnIndex(o))):i.useCustomModelFormatter=!1}return"text"===e.options.inputType&&"float"===e.options.dataType&&t.charAt(t.length-1)===e.options.decimalDelimiter&&(t=t.substr(0,t.length-1)),t}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype._doPaste=function(){try{if(a.Z.isIEAllVersion())this.handlePasteEvent({});else if(!a.Z.isIEAllVersion()&&(r.I.browserCheck.moz||r.I.browserCheck.chrome||r.I.browserCheck.safari)){var t=document.createElement("textarea"),e=this;t.style.opacity="0",t.onpaste=function(t){e.handlePasteEvent(t),i.removeChild(this)},t.textContent="temp";var i=document.getElementsByTagName("body")[0];i.appendChild(t),t.select();try{document.execCommand("paste")}catch(t){p.v.printLog(this.id+"_doPaste skip.")}}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleBeforeCopyEvent=function(t){u.f.preventDefault(t)},b.prototype.handleBeforeCutEvent=function(t){u.f.preventDefault(t)},b.prototype.handleCopyEvent=function(t,e){try{if(!1===u.f.fireEvent(this,"oncustomcopy",t))return;var i=this.options.preventCopyColumn,o=i?i.split(","):[];if(this.options.preventCopy||"native"===this.options.copyType)return;if(r.I.browserCheck.safari){for(var n=document.activeElement,l=!1;null!=n;)n.id&&n.id==this.id&&(l=!0),
n=n.parentNode;if(!l)return}var h=a.Z.isIEAllVersion()?window.clipboardData:t.clipboardData,d=this.options.copyAmount;if(d||(d="cell"),"cell"==d&&this.focusedCell.length>0){for(var c=[],p=[],g=this.getColumnOrder(),m=this.htmlInfo.body.rowAttrArr.length,f=this.getDataLength()*m,b=0,y=g.length,v=0,w=0,S=0;S<this.focusedCell.length;S++){var _=this.focusedCell[S],C=_.focusedRowIndex,x=_.focusedColIndex,I=this.getLocationRowCol(C,x);C=I.rowIndex,x=I.colIndex,w+=I.colSize*I.rowSize-1,f>C&&(f=C),b<C+I.rowSize-1&&(b=C+I.rowSize-1),y>x&&(y=x),v<x+I.colSize-1&&(v=x+I.colSize-1)}"row"==this.options.focusMode&&1==this.options.rowCopy&&(y=0,v=g.length-1);var T=0;for(S=this.defaultColCnt+y;S<v+this.defaultColCnt;S++)1==this.hiddenList[S]&&(T+=1);if(this.focusedCell.length+w==(b-f+1)*(v-y-T+1)||1==this.options.ctrlShiftKey||"row"==this.options.focusMode&&1==this.options.rowCopy&&this.focusedCell.length==b-f+1)if(this.isDrillDown){var k=this._dataList.getRealRowIndex(b),L=this.drilldown.getChildrenRowArr(k),A=this._dataList.getRealRowIndex(f),D=k;this.drilldown.isOpen(b)||function t(e){var i=e[e.length-1];D=D<i?i:D;for(var o=0;o<e.length;o++){var s=this.drilldown.getChildrenRowArr(e[o]);s.length>0&&t.call(this,s)}}.call(this,L);for(S=A;S<=D;S++){for(var W=[],q=[],M=y;M<=v;M++){var E=(j=this.getOriginalRowCol(S,M)).colIndex,R=j.rowIndex;if((!j.noLeftTop||j.leftCell)&&1!=this.hiddenList[M+this.defaultColCnt]){for(var N=this.getCellInfo(E),F=!1,O=0;O<o.length;O++)if(o[O]==N.colID){F=!0;break}if(!F){var B=""!==N.options.escape?N.options.escape:this.options.escape,P=this.drilldown.statusArr;if("display"==N.options.copyOption)U=!1===P[S]?this._getDisplayData(R,this.getColumnID(E)):this._getDisplayData(this.getRealRowIndex(R),this.getColumnID(E));else{var Y=this.getColumnID(E);U=this.dataList.getColData(Y)[R]}j.noLeftTop&&(U=""),X=B+""=="true"?WebSquare.xml._encode(U+""):U,(U||this.focusedCell.length>1)&&(W.push(X),q.push(U))}}}c.push(W),p.push(q)}}else{var V=[];for(S=f;S<=b;S++){W=[],q=[];var H=[];for(M=y;M<=v;M++){var j;E=(j=this.getOriginalRowCol(S,M)).colIndex,R=j.rowIndex;if((!j.noLeftTop||j.leftCell)&&1!=this.hiddenList[M+this.defaultColCnt]){for(N=this.getCellInfo(E),F=!1,O=0;O<o.length;O++)if(o[O]==N.colID){F=!0;break}if(!F){B=""!==N.options.escape?N.options.escape:this.options.escape;var z=!1;if(1==this.options.ctrlShiftKey){var G=this.getAllFocusedIndex();for(O=0;O<G.length;O++)if(R===G[O].row&&E===G[O].col){z=!0;break}H.push(z)}U="display"==N.options.copyOption?this._getDisplayData(this.getRealRowIndex(R),this.getColumnID(E)):this.dataList.getCellData(R,this.getColumnID(E)),j.noLeftTop&&(U=""),X=B+""=="true"?WebSquare.xml._encode(U+""):U,(U||this.focusedCell.length>1)&&(1==this.options.ctrlShiftKey?!0===z&&(W.push(X),q.push(U)):(W.push(X),q.push(U)))}}}c.push(W),p.push(q),1==this.options.ctrlShiftKey&&V.push(H)}}else{var Z=this.focusedCell[this.focusedCell.length-1];if(null!=Z){var U,X;for(B=""!==(N=this.getCellInfo(Z.focusedColIndex)).options.escape?N.options.escape:this.options.escape,S=0;S<o.length;S++)if(o[S]==N.colID)return;U="display"==N.options.copyOption?this._getDisplayData(this.getRealRowIndex(Z.focusedRowIndex),this.getColumnID(Z.focusedColIndex)):this.dataList._getCellData(Z.focusedRowIndex,this.getColumnID(Z.focusedColIndex)),X=B+""=="true"?WebSquare.xml._encode(U+""):U,c.push([X]),p.push([U])}}var K=Papa.unparse(c,{delimiter:"\t"});if(1==this.options.ctrlShiftKey){var $=Papa.unparse(V,{delimiter:"\t"});h.setData("noFocus",$)}for(var J="",Q=0;Q<p.length;Q++)0!=Q&&(J+="\n"),J+=p[Q].join("\t");if(this.options.noUseCSVParser)if(t.shiftKey||e){K=Papa.unparse(p,{delimiter:"\t"});h.setData("Text",K)}else h.setData("Text",J),h.setData("gridView",K);else h.setData("Text",K)}u.f.preventDefault(t)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleCutEvent=function(t,e,i){try{if(!e)if(!1===u.f.fireEvent(this,"oncustomcut",t))return;var o=this.options.preventCopyColumn,n=o?o.split(","):[];if(this.options.preventCopy)return
;if(r.I.browserCheck.safari){for(var l=document.activeElement,h=!1;null!=l;)l.id&&l.id==this.id&&(h=!0),l=l.parentNode;if(!h)return}var d=a.Z.isIEAllVersion()?window.clipboardData:t.clipboardData,c=this.options.copyAmount;if(c||(c="cell"),"cell"==c&&this.focusedCell.length>0){for(var p=[],g=[],m=this.getColumnOrder(),f=this.htmlInfo.body.rowAttrArr.length,b=this.getDataLength()*f,y=0,v=m.length,w=0,S=0,_=0;_<this.focusedCell.length;_++){var C=this.focusedCell[_],x=C.focusedRowIndex,I=C.focusedColIndex,T=this.getLocationRowCol(x,I);x=T.rowIndex,I=T.colIndex,S+=T.rowSize*T.colSize-1,b>x&&(b=x),y<x+T.rowSize-1&&(y=x+T.rowSize-1),v>I&&(v=I),w<I+T.colSize-1&&(w=I+T.colSize-1)}"row"==this.options.focusMode&&1==this.options.rowCopy&&(v=0,w=m.length-1);var k=0;for(_=this.defaultColCnt+v;_<w+this.defaultColCnt;_++)1==this.hiddenList[_]&&(k+=1);if(this.focusedCell.length+S==(y-b+1)*(w-v-k+1)||1==this.options.ctrlShiftKey||"row"==this.options.focusMode&&1==this.options.rowCopy&&this.focusedCell.length==y-b+1)for(_=b;_<=y;_++){for(var L=[],A=[],D=v;D<=w;D++){var W=this.getOriginalRowCol(_,D),q=W.colIndex,M=W.rowIndex,E=D+this.defaultColCnt;if(1!=this.hiddenList[E]&&!(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(M,q)||e&&this.___getEditReadOnly(M,q)||this.options.checkDisabledOnCut&&this._getEditDisabled(M,q)||e&&this._getEditDisabled(M,q))){for(var R=this.getCellInfo(q),N=!1,F=0;F<n.length;F++)if(n[F]==R.colID){N=!0;break}if(!N&&!W.noLeftTop){var O=""!==R.options.escape?R.options.escape:this.options.escape;if(j="display"==R.options.copyOption?this._getDisplayData(this.getRealRowIndex(M),this.getColumnID(q)):this.dataList.getCellData(M,this.getColumnID(q)),z=O+""=="true"?WebSquare.xml._encode(j+""):j,this.dataList.setCellData(M,this.getColumnID(q),""),""!==j){var B={oldValue:j,newValue:"",rowIndex:M,colIndex:q,colId:this.getColumnID(q)};u.f.fireEvent(this,"onviewchange",B)}L.push(z),A.push(j)}}}p.push(L),g.push(A)}else{var P=this.focusedCell[this.focusedCell.length-1],Y=P.focusedRowIndex,V=this.getColumnID(P.focusedColIndex),H=!1;if(this.options.checkReadOnlyOnCut&&this.___getEditReadOnly(Y,V)&&(H=!0),this.options.checkDisabledOnCut&&this._getEditDisabled(Y,V)&&(H=!0),null!=P&&!0!==H){var j,z;for(R=this.getCellInfo(V),_=0;_<n.length;_++)if(n[_]==R.colID)return;O=""!==R.options.escape?R.options.escape:this.options.escape;if(j="display"==R.options.copyOption?this._getDisplayData(this.getRealRowIndex(Y),V):this.dataList.getCellData(Y,V),z=O+""=="true"?WebSquare.xml._encode(j+""):j,this.dataList.setCellData(Y,V,""),""!==j){B={oldValue:j,newValue:"",rowIndex:Y,colIndex:P.focusedColIndex,colId:this.getColumnID(P.focusedColIndex)};u.f.fireEvent(this,"onviewchange",B)}p.push([z]),g.push([j])}}if(!e){for(var G=Papa.unparse(p,{delimiter:"\t"}),Z="",U=0;U<g.length;U++)0!=U&&(Z+="\n"),Z+=g[U].join("\t");if(this.options.noUseCSVParser)if(t.shiftKey||i){G=Papa.unparse(g,{delimiter:"\t"});d.setData("Text",G)}else d.setData("Text",Z),d.setData("gridView",G);else d.setData("Text",G)}}u.f.preventDefault(t)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.clickRightButtonCell=function(t){for(var e=a.Z.getDataPrefix("header_id"),i=a.Z.getDataPrefix("colIndex"),o=a.Z.getDataPrefix("tdIndex"),s=a.Z.getDataPrefix("rowIndex"),r=u.f.getTarget(t);r&&"TD"!=r.tagName&&"TH"!=r.tagName&&"DIV"!=r.tagName;)r=r.parentNode;var n=r&&this.hasClass(r,this.options.headerTdClass);if(r&&this.hasClass(r,this.options.bodyTdClass)&&(n=!1),n)"touch"===t.pointerType&&!1===this.options.contextMenu||u.f.preventDefault(t),u.f.fireEvent(this,"onheaderrightbuttonclick",r.getAttribute(e));else{for(var l=r;l;){if("TH"===l.tagName&&this.hasClass(l,this.options.headerTdClass)){n=!0;break}if("TD"===l.tagName&&this.hasClass(l,this.options.bodyTdClass)){n=!1;break}if("DIV"===l.tagName&&this.hasClass(l,"w2grid_dataLayer")&&0===this.getRowCount()){n=!1;break}l=l.parentNode}r=l}var h,d,c,p,g,m,f=null!=this.editedCell;if(!n&&f&&(h=this.editedCell.editRowIndex,
d=this._dataList.getColumnIndex(this.editedCell.id),_=this.getCellInfo(this.editedCell.id),c=this.getColumnIndex(this.editedCell.id),p=this._grid.getRealRowIndex(h),g=this._dataList.dataArr[p*this._dataList.getColumnCount()+d],m=_.comp&&_.comp.selectedIndex),n&&this.options.useHeaderContextMenu){var b=void 0,y=-1,v=parseInt(r.getAttribute(i),10)-this.defaultColCnt;(A={}).result=b,A.rowIndex=y,A.colIndex=v,A.event=t;var w=[];if(this.focusedCell)for(var S=0;S<this.focusedCell.length;S++)w.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[S].focusedRowIndex),colIndex:this.focusedCell[S].focusedColIndex});A.focusedCell=w,(L={isHeader:!0}).headerId=r.getAttribute(e),(D=u.f.fireEvent(this,"oncontextopen",y,v,w,L))?this.createContextMenu(A,D):this.contextMenu?this.showContextMenu(A):this.createContextMenu(A)}else if(r&&"TD"==r.tagName&&this.hasClass(r,this.options.bodyTdClass)){var _;if(!1===(b=!(!this.options.keepDataDragSelection||!this.options.dataDragSelect)||this.__setFocusedCell(t,r,{allowContextMenuMultiCell:this.options.allowContextMenuMultiCell}))){if(this.focusedCell.length>0)for(S=0;S<this.focusedCell.length;S++)this._applyFocusedCellOut(this.focusedCell[S]);var C=r.className,x=parseInt(r.getAttribute(o)),I=parseInt(x/this.realRowDataLength);null!=C.match("rowNum")?(y=I,v="rowNum"):null!=C.match("rowStatus")?(y=I,v="rowStatus"):null!=C.match("groupby")?(y="groupby",v=-1):null!=C.match("Subtotal")&&(y="subtotal",v="number"==typeof(v=parseInt(r.getAttribute(i),10))?v:-1)}else r&&(this.hasClass(r,"w2grid_textImage")||this.hasClass(r,"w2grid_textImage_image"))?(y=parseInt(r.getAttribute(s),10),v=parseInt(r.getAttribute(i),10),this._setFocusedCell(y,v)):n?(y=parseInt(r.getAttribute(s),10),v=parseInt(r.getAttribute(i),10)):(y=this.getFocusedRowIndex(),v=this.getFocusedColumnIndex());if(!n&&r&&f){var T=this._dataList.dataArr[p*this._dataList.getColumnCount()+d];if(g!=T){var k={oldValue:g,newValue:T,rowIndex:h,colIndex:c,colId:this.getColumnID(c)};isNaN(m)||(k.oldSelectedIndex=m,k.newSelectedIndex=_&&_.comp&&_.comp.selectedIndex),u.f.fireEvent(this,"onviewchange",k)}}if(this.options.senseReader)("text"!=(_=this.getCellInfo(v)).options.inputType&&"secret"!=_.options.inputType||this.___getEditReadOnly(y,v)||this.options.contextMenu)&&u.f.preventDefault(t);else"touch"===t.pointerType&&!1===this.options.contextMenu||u.f.preventDefault(t);if(u.f.fireEvent(this,"onrightbuttonclick",this._getGroupbyDisplayRowIndex(y),v,t),this.options.contextMenu){(A={}).result=b,A.rowIndex=y,A.colIndex=v;w=[];if(this.focusedCell)for(S=0;S<this.focusedCell.length;S++)w.push({rowIndex:this._getGroupbyDisplayRowIndex(this.focusedCell[S].focusedRowIndex),colIndex:this.focusedCell[S].focusedColIndex});A.focusedCell=w,A.event=t;var L={isHeader:!1};(D=u.f.fireEvent(this,"oncontextopen",this._getGroupbyDisplayRowIndex(y),v,w,L))?this.createContextMenu(A,D):this.contextMenu?this.showContextMenu(A):this.createContextMenu(A)}}else if(r&&"DIV"==r.tagName&&this.hasClass(r,"w2grid_dataLayer")&&0===this.getRowCount()&&(u.f.preventDefault(t),u.f.fireEvent(this,"onrightbuttonclick",-1,-1,t),this.options.contextMenu)){var A;(A={result:!1,rowIndex:-1,colIndex:-1,focusedCell:null}).event=t;var D;L={isHeader:!1};(D=u.f.fireEvent(this,"oncontextopen",-1,-1,null,L))?this.createContextMenu(A,D):this.contextMenu?this.showContextMenu(A):this.createContextMenu(A)}},b.prototype.fireImageClick=function(t,e){var i=this.getCellInfo(e),o=this._getEditDisabled(t,e);if(this.options.useImageClick||0==o){var s=a.Z.getGlobalFunction(i.options.imageClickFunction,this.scope_id);"function"==typeof s&&s.call(this,t,e,this.dataList._getCellData(t,e))}},b.prototype.gridHeaderOut=function(t){try{for(var e=u.f.getRelatedTarget(t);!this.hasClass(e,this.options.headerTdClass)&&null!=e&&e!=this.render&&e!=document.documentElement;)e=e.parentNode;if(!e)return;var i=a.Z.getDataPrefix("header_id"),o=e.getAttribute(i);if(o===this._headerOverElemId)return;var r={};r.newHeaderId=o
;for(var n=u.f.getTarget(t),l=!1,h=this.event.getTargetIterator(t,this.render);h.next();)h.match(this.options.headerTdClass)&&(n=h.getElement(),h.stop(),l=!0);r.oldHeaderId=l?n.getAttribute(i):null,r.header_id=r.oldHeaderId,r.id=n.id,this._headerOverElemId="",u.f.fireEvent(this,"onheadermouseout",r)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.gridOut=function(t){var e=u.f.getTarget(t);if(this.overElem&&(e.id==this.id+"_dataLayer"||e.id==this.overElem.id||""==e.id)){if(this.options.rowMouseOver&&"TD"==this.overElem.tagName&&this.removeRowOverStyle(this.overElem.parentNode),"TD"===this.overElem.tagName){var i=a.Z.getDataPrefix("col_id"),o={};this.overElem.getAttribute(i)&&(o.rowIndex=this.getElemRowIndex(this.overElem),o.colIndex=this.getColumnIndex(this.overElem.getAttribute(i))),u.f.fireEvent(this,"onbodymouseout",o)}this.bodyOut(t,this.overElem),this.overElem=null}},b.prototype.addRowOverStyle=function(t){for(var e=a.Z.getDataPrefix("trIndex"),i=a.Z.getDataPrefix("tdIndex"),o=a.Z.getDataPrefix("style_bak");null!=t&&(1!=t.nodeType||null==t.getAttribute(e));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var s=parseInt(t.getAttribute(e));s>0;)s--,t=a.Z.prev(t);var r=a.Z.first(t),n=parseInt(r.getAttribute(i));if(!isNaN(n)){n=parseInt(n/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var l=this.options.rowMouseOverColor.wq_trim(),h=""==this.options.selectedCellOverColor?"":this.options.selectedCellOverColor.wq_trim(),d=""==this.options.selectedRowOverColor?"":this.options.selectedRowOverColor.wq_trim(),c=0;c<this.realRowDataLength;c++){var u=this.all_data_td_list[n+c],p=l;if(!(""==d||"row"!=this.options.focusMode&&"both"!=this.options.focusMode||"row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&c<this.options.fixedColumn))for(var g=parseInt(u.getAttribute(i)),m=parseInt(g/this.realRowDataLength)+this.rowIndex,f=0;f<this.focusedCell.length;f++)if(m==this.focusedCell[f].focusedRowIndex){p=d;break}if(""!=h&&("cell"==this.options.focusMode||"both"==this.options.focusMode)){g=parseInt(u.getAttribute(i)),m=parseInt(g/this.realRowDataLength)+this.rowIndex;var b=g%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);for(f=0;f<this.focusedCell.length;f++)if(m==this.focusedCell[f].focusedRowIndex&&b==this.focusedCell[f].focusedColIndex){p=h;break}}if(!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&c<this.options.fixedColumn)){if(c<this.defaultColCnt){var y=u.className;((""===this.options.rowNumBackgroundColor||!0===this.options.rowNumRowMouseOverColor)&&y.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||y.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)&&(u.style.backgroundColor=p,a.Z.isIEAllVersion(11)&&this.__addClass(u,"w2BackgroundClip"))}else u.style.backgroundColor=p,a.Z.isIEAllVersion(11)&&this.__addClass(u,"w2BackgroundClip");this.options.rowMouseOverClass&&this.__addClass(u,this.options.rowMouseOverClass)}u.removeAttribute(o)}}}},b.prototype.removeRowOverStyle=function(t,e){if(!(this.options.tooltipHeader&&t&&t.getElementsByTagName("TH").length>0)){for(var i=a.Z.getDataPrefix("trIndex"),o=a.Z.getDataPrefix("tdIndex"),s=a.Z.getDataPrefix("or_bgColor"),r=a.Z.getDataPrefix("style_bak");null!=t&&(1!=t.nodeType||null==t.getAttribute(i));)if(null==(t=t.parentNode)||t.id==this.id+"_foot_table")return;if(null!=t){for(var n=parseInt(t.getAttribute(i));n>0;)n--,t=a.Z.prev(t);var l=a.Z.first(t),h=parseInt(l.getAttribute(o));if(!isNaN(h)){h=parseInt(h/(this.oneRowDataLength+this.defaultColCnt),10)*(this.oneRowDataLength+this.defaultColCnt);for(var d=0;d<this.realRowDataLength;d++){var c=this.all_data_td_list[h+d];if(d<this.defaultColCnt){var u=c.className;if((""===this.options.rowNumBackgroundColor||!0===this.options.rowNumRowMouseOverColor)&&u.indexOf(this.options.bodyTdClass+"_rowNumber")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){
for(var p=parseInt(c.getAttribute(o)),g=parseInt(p/this.realRowDataLength)+this.rowIndex,m=!1,f=0;f<this.focusedCell.length;f++)if(g==this.focusedCell[f].focusedRowIndex){m=!0;break}c.style.backgroundColor=m?this.options.selectedRowColor.wq_trim():""}else c.style.backgroundColor="";else if(u.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)if("row"==this.options.focusMode||"both"==this.options.focusMode){for(p=parseInt(c.getAttribute(o)),g=parseInt(p/this.realRowDataLength)+this.rowIndex,m=!1,f=0;f<this.focusedCell.length;f++)if(g==this.focusedCell[f].focusedRowIndex){m=!0;break}c.style.backgroundColor=m?this.options.selectedRowColor.wq_trim():""}else c.style.backgroundColor=""}else!0!==e&&(c.style.backgroundColor=c.getAttribute(s)||"");this.hasClass(c,"w2BackgroundClip")&&this.__removeClass(c,"w2BackgroundClip"),!0!==e&&c.removeAttribute(r),this.options.rowMouseOverClass&&this.hasClass(c,this.options.rowMouseOverClass)&&this.__removeClass(c,this.options.rowMouseOverClass)}}}}},b.prototype.handleKeyDownEvent=function(t){if(!(this.parentControl&&this.parentControl.options&&"gridViewItemTable"===this.parentControl.options.pluginName||"gridItemTable"===this.parentControl.options.pluginName)&&0!=u.f.fireEvent(this,"onkeydown",t)){this.lastEvent=t;var e=WebSquare.event.getTarget(t);if(this.headerFocus);else{var i,o;if(e&&(e.className.match("w2grid_head_sort_div_main_btn")||e.className.match("w2grid_customFilter_open")))for(var s=e;s;){if("TH"===s.tagName&&this.hasClass(s,this.options.headerTdClass)){var r=WebSquare.util.getDataPrefix("header_id");i=s.getAttribute(r),e.className.match("w2grid_head_sort_div_main_btn")?o="sort":e.className.match("w2grid_customFilter_open")&&(o="filter");break}s=s.parentNode}if(!t.shiftKey&&9==t.keyCode&&i&&this.options.senseReader&&i===this._lastHeaderElementId&&o===this._lastHeaderElementType)this._setFirsCellFocus(t);else{if(e&&e.className.match("w2grid_start_div")&&this.options.senseReader&&"none"===this.options.focusMode)return;this.handleBodyKeyDown(t)}}}},b.prototype.handleKeyUpEvent=function(t){try{if(0==u.f.fireEvent(this,"onkeyup",t))return;if(this.lastEvent=t,this.editedCell&&this.editedCell._getEditedValue){var e=this.editedCell.options.inputType;if("custom"===e&&!this.editedCell.internal&&this.editedCell.editRowIndex){var i=this.getRealRowIndex(this.editedCell.editRowIndex);e=this.editedCell.cellManagerHashByRowIndex[i].options.inputType}if("text"===e||"textarea"===e||"calendar"===e||"textImage"===e||"secret"===e){var o=t.charCode?t.charCode:t.keyCode,r={rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:e,keyCode:o};u.f.fireEvent(this,"oneditkeyup",r)}}else null!=this.beforeEditedCellInfo&&u.f.fireEvent(this,"oneditkeyup",this.beforeEditedCellInfo);if(this.beforeEditedCellInfo=null,!0===this.options.accessibility)for(var a=this.event.getTargetIterator(t,this.render);a.next();)a.match(this.options.bodyTdClass)&&a.stop(),a.match(this.options.headerTdClass)&&(this.removeFocusedCell(),a.stop())}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.headerOver=function(t,e){if(!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)){var i=e.offsetWidth;if(!(i<2)&&e.firstChild){var o,r=a.Z.getDataPrefix("col_id"),n=e.getAttribute(r),l=null;if(n){var h,d=this.getHeaderInfo(n);if(b=this.getHeaderInputType(n),o=d.options.embeddedInput,this.options.tooltipHeaderShowAlways&&(d.options.tooltipLocaleRef||d.options.tooltip)&&(h=d.options.tooltip,(this.options.useLocale||d.options.useLocale)&&d.options.tooltipLocaleRef)){var c=this.getLocaleValue(d.options.tooltipLocaleRef);c&&(h=c)}if(o&&"text"==b){var u=this.getElemRowIndex(e),g=this.getColumnIndex(e.getAttribute(r));o=!this._getEditDisabled(u,g)&&!this.___getEditReadOnly(u,g)}
if("textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==d.options.viewTypeIconImage)if("100%"==e.firstChild.style.width)l=e.getElementsByTagName("th")[0];else{var m=this.event.getTargetIterator(t),f="w2grid_textImage_image";for("true"===d.options.viewTypeIconImage&&("autoComplete"==b?f=this.options.bodyTdClass+"_autoComplete_img":"calendar"==b&&(f=this.options.bodyTdClass+"_calendar_div_img"));m.next();)if(m.match(null,null,"th")&&m.getElement().id){l=this.hasClass(e,f)?e.previousSibling:e,e=m.getElement();break}}}else var b="text";if("text"==b||"textarea"==b||"textImage"==b||"link"==b||"calendar"==b||"expression"==b||"select"==b&&!o||"drilldown"==b||"autoComplete"==b||"checkcombobox"==b||"button"==b||this.options.showImageTooltip&&"image"==b){var y;"textarea"==b?(y=e.cloneNode(!0)).firstChild.style.width="":y=l||e;var v=i,w=e.offsetHeight,S=WebSquare.style.getStyle(e,"text-overflow"),_=20,C=w+3;try{this.options.tooltipPositionX&&(_=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(v,w)),this.options.tooltipPositionY&&(C=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(v,w))}catch(t){p.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore options and apply default values. ["+this.id+"]"),s.Y.printStackTrace(t,null,this)}this.options.tooltipShowAlwaysColumns;var x="NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1;if(this.options.tooltipHeaderShowAlways){var I=WebSquare.style.getAbsoluteLeft(e)+_,T=WebSquare.style.getAbsoluteTop(e)+C,k="";if(h)k=h;else{if("text"==b&&o)k=y.firstChild.value;else if("link"==b)k=y.firstChild.innerHTML;else if("textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==d.options.viewTypeIconImage)k="NOBR"==l.firstChild.tagName||"SPAN"==l.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1?y.firstChild.innerHTML:y.innerHTML;else if("image"==b)k=y.firstChild.innerHTML;else if("drilldown"==b)k=x?e.firstChild.innerText.replace(/^\s*/,""):e.innerText;else{k=x||"BUTTON"==e.firstChild.tagName?y.firstChild.innerHTML:y.innerText.wq_trim();var L=a.Z.getDataPrefix("sort");"TABLE"==e.firstChild.tagName&&"sort"==e.firstChild.getAttribute(L)&&k.split("\t")&&k.split("\t").length>1&&(k=k.split("\t")[0])}if(this.options.tooltipFormatterHeader)try{if("function"==typeof(R=a.Z.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))k=R(e.getAttribute(r),k)}catch(t){s.Y.printStackTrace(t,null,this)}}""!=k&&this.showTooltip(I,T,k,C)}else if("ellipsis"==S){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=y.className,"text"==b&&o?(this.toolTipRuler.innerHTML="<div>"+y.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(y.firstChild,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(y.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(y.firstChild,"font-weight")):(this.toolTipRuler.innerHTML=y.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(y,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(y,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(y,"font-weight"));var A=this.toolTipRuler.firstChild.offsetWidth;if("textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==d.options.viewTypeIconImage)var D=l.clientWidth;else D=e.clientWidth;if(3!=y.firstChild.nodeType){var W=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),q=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");A-=parseInt(W||"0",10),A-=parseInt(q||"0",10),
"textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==d.options.viewTypeIconImage?(D-=parseInt(WebSquare.style.getStyle(l.firstChild,"padding-left"),10),D-=parseInt(WebSquare.style.getStyle(l.firstChild,"padding-right"),10),D-=parseInt(WebSquare.style.getStyle(l,"padding-left"),10),D-=parseInt(WebSquare.style.getStyle(l,"padding-right"),10)):(D-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),D-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),D-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),D-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(D<A||"image"==b||D==A&&e.clientWidth<e.scrollWidth){I=WebSquare.style.getAbsoluteLeft(e)+_,T=WebSquare.style.getAbsoluteTop(e)+C,k="";if(k="text"==b&&o?y.firstChild.value:"link"==b?y.firstChild.innerHTML:"textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==d.options.viewTypeIconImage?"NOBR"==l.firstChild.tagName||"SPAN"==l.firstChild.tagName&&l.firstChild.className.indexOf("w2grid_span")>-1?y.firstChild.innerHTML:y.innerHTML:"image"==b?y.firstChild.innerHTML:"drilldown"==b?x?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:x||"BUTTON"==e.firstChild.tagName?y.firstChild.innerHTML:y.innerText.wq_trim(),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatterHeader)try{if("function"==typeof(R=a.Z.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))k=R(e.getAttribute(r),k)}catch(t){s.Y.printStackTrace(t,null,this)}k.match('href=""')&&(k=k.wq_replaceAll('href=""',"")),this.showTooltip(I,T,k,C)}else this.render.removeChild(this.toolTipRuler)}else{var M=e.firstChild.offsetWidth;if(!0===this.options.showSortableImage){var E=e.firstChild.getElementsByTagName(this.options.dataTag)[0];E&&("NOBR"==E.tagName||"SPAN"==E.tagName&&E.className.indexOf("w2grid_span")>-1)&&(M=E.offsetWidth+parseInt(WebSquare.style.getStyle(e.firstChild,"margin-left"),10))}if(i+3<M){I=WebSquare.style.getAbsoluteLeft(e)+_,T=WebSquare.style.getAbsoluteTop(e)+C,k="";if(k="text"==b&&o?y.firstChild.value:"link"==b||"image"==b?y.firstChild.innerHTML:"drilldown"==b?x?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:x||"BUTTON"==e.firstChild.tagName?y.firstChild.innerHTML:y.innerText.wq_trim(),this.options.tooltipFormatterHeader)try{var R;if("function"==typeof(R=a.Z.getGlobalFunction(this.options.tooltipFormatterHeader,this.scope_id)))k=R(e.getAttribute(r),k)}catch(t){s.Y.printStackTrace(t,null,this)}this.showTooltip(I,T,k,C)}}}}}},b.prototype.bodyOver=function(t,e){try{var i=a.Z.getDataPrefix("col_id"),o=e.offsetWidth,r=o,n=e.offsetHeight,l=20,h=n+3;if(this.options.rowStatusTooltipDisplay&&e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0){var d="";try{this.options.tooltipPositionX&&(l=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(r,n)),this.options.tooltipPositionY&&(h=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(r,n))}catch(t){p.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore options and apply default values. ["+this.id+"]"),s.Y.printStackTrace(t,null,this)}var c=WebSquare.style.getAbsoluteLeft(e)+l,u=WebSquare.style.getAbsoluteTop(e)+h,g=this.getElemRowIndex(e);switch(this.getRowStatus(g)){case"C":d=WebSquare.language.getMessage("Grid_rowStatus_insert");break;case"R":d=WebSquare.language.getMessage("Grid_rowStatus_initialValue");break;case"U":d=WebSquare.language.getMessage("Grid_rowStatus_update");break;case"D":d=WebSquare.language.getMessage("Grid_rowStatus_delete");break;case"V":d=WebSquare.language.getMessage("Grid_rowStatus_D_After_C");break;default:return}this.options.tooltipFormatter&&(d=this._showTooltopFormatter(e.id,d,!0)),""!=d&&this.showTooltip(c,u,d,h)}else{if(!this.options.tooltipDisplay)return;if(e.className.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.bodyTdClass+"_rowStatus")>=0)return;if(o<2||!e.firstChild)return;var m=e.getAttribute(i)
;if(this.options.tooltipDisplayColumn&&m&&-1===this.options.tooltipDisplayColumn.indexOf(m))return;var f,b,y,v=null;if(m){var w=this.getCellInfo(m);if(f=w.options.escape,0==w.internal&&"custom"==w.options.inputType&&(g=this.getRealRowIndex(this.getElemRowIndex(e)),w=w.cellManagerHashByRowIndex[g]?w.cellManagerHashByRowIndex[g]:w),b=w.options.inputType,(y=w.options.embeddedInput)&&"text"==b){g=this.getElemRowIndex(e);var S=this.getColumnIndex(e.getAttribute(i));y=!this._getEditDisabled(g,S)&&!this.___getEditReadOnly(g,S)}if("textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==w.options.viewTypeIconImage){var _="w2grid_textImage";"autoComplete"==b?_=this.options.bodyTdClass+"_autoComplete_table":"calendar"==b&&(_=this.options.bodyTdClass+"_calendar_table"),(v=e.getElementsByClassName(_)[0])||(v=e)}}else b="text";if(this.options.tooltipHideInputType&&this.options.tooltipHideInputType.split(",").indexOf(b)>-1)return;if("checkbox"==b||"radio"==b||"text"==b||"textarea"==b||"textImage"==b||"link"==b||"calendar"==b||"expression"==b||"select"==b||"drilldown"==b||"autoComplete"==b||"checkcombobox"==b||"button"==b||this.options.showImageTooltip&&"image"==b){var C;"textarea"==b?(C=e.cloneNode(!0)).firstChild.style.width="":C=v?this._getWrapperCell(v,g):this._getWrapperCell(e,g),n=e.offsetHeight;var x=WebSquare.style.getStyle(e,"text-overflow");h=n+3;try{this.options.tooltipPositionX&&(l=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(r,n)),this.options.tooltipPositionY&&(h=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(r,n))}catch(t){p.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore options and apply default values. ["+this.id+"]"),s.Y.printStackTrace(t,null,this)}var I=this.options.tooltipShowAlwaysColumns.split(","),T="NOBR"==e.firstChild.tagName||"SPAN"==e.firstChild.tagName&&e.firstChild.className.indexOf("w2grid_span")>-1;if(this.options.tooltipShowAlways||I.indexOf(m)>-1){c=WebSquare.style.getAbsoluteLeft(e)+l,u=WebSquare.style.getAbsoluteTop(e)+h,d="";if("text"==b&&y)d=C.firstChild.value;else if("link"==b)d=T?C.firstChild.firstChild.innerHTML:C.firstChild.innerHTML;else if("textImage"==b)if(y){var k=C.firstChild.getElementsByClassName("w2grid_textImage_div_input")[0];d=k?k.firstChild.value:C.innerHTML}else d="NOBR"==v.firstChild.tagName||"SPAN"==v.firstChild.tagName&&v.firstChild.className.indexOf("w2grid_span")>-1?C.firstChild.innerHTML:"DIV"==v.firstChild.tagName&&v.firstChild.className.indexOf("w2grid_textImage_div")>-1?C.firstChild.innerText:C.innerHTML;else if("autoComplete"!=b&&"calendar"!=b||"true"!=w.options.viewTypeIconImage)if("image"==b)d=C.firstChild.src;else if("drilldown"==b)d=T?e.firstChild.innerText.replace(/^\s*/,""):e.innerText;else if("select"==b&&"ul"===w.options.tableRender)d=C.innerText.wq_trim();else if("select"==b&&y)d=e.querySelector("select").value;else if("checkbox"==b||"radio"==b){(A=C.getElementsByTagName("label")[0])&&(d=A.innerText)}else d=T||"BUTTON"==e.firstChild.tagName?C.firstChild.innerHTML:C.innerText.wq_trim();else d="NOBR"==v.firstChild.tagName||"SPAN"==v.firstChild.tagName&&v.firstChild.className.indexOf("w2grid_span")>-1?C.firstChild.innerHTML:C.innerHTML;if(this.options.tooltipFormatter){var L=o<e.scrollWidth;d=this._showTooltopFormatter(e.id,d,L)}""!=d&&this.showTooltip(c,u,d,h,f)}else if("ellipsis"==x){var A,D;if(("checkbox"==b||"radio"==b)&&!(A=C.getElementsByTagName("label")[0]))return;if(this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),this.render.appendChild(this.toolTipRuler),this.toolTipRuler.className=C.className,"text"==b&&y)this.toolTipRuler.innerHTML="<div>"+C.firstChild.value+"</div>",this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(C.firstChild,"font-size"),
this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(C.firstChild,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(C.firstChild,"font-weight");else{if("drilldown"==b&&"line"==w.options.depthType){var W,q=this.options.dataTag.toUpperCase();"NOBR"===q?"NOBR"==(W=C.getElementsByTagName(this.options.dataTag)[0]).tagName&&(this.toolTipRuler.innerHTML=W.outerHTML):"SPAN"===q&&"SPAN"==(W=C.getElementsByClassName("w2grid_span")[0]).tagName&&W.className.indexOf("w2grid_span")>-1&&(this.toolTipRuler.innerHTML=W.outerHTML)}else if("checkbox"==b||"radio"==b)this.toolTipRuler.innerHTML=A.outerHTML;else if("select"==b&&y){for(var M=this.event.getTargetIterator(t),E=null;M.next();)if(M.match(this.options.bodyTdClass,null,"td")&&M.getElement().id){E=M.getElement();break}if(null!=E){var R=this.getInput(w,E).dom.select,N=document.createElement("div"),F=document.createElement("select");F.className=R.className;var O=document.createElement("option");O.value=R.value,O.text=R.value,F.add(O),N.appendChild(F),this.toolTipRuler.innerHTML=N.innerHTML,D=R.value}}else this.toolTipRuler.innerHTML=C.innerHTML;this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(C,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(C,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(C,"font-weight")}var B,P=this.toolTipRuler.firstChild.offsetWidth;if(null!=e.getBoundingClientRect&&(P=this.toolTipRuler.firstChild.getBoundingClientRect().width),"textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==w.options.viewTypeIconImage)B=v.clientWidth,null!=e.getBoundingClientRect&&(B=v.getBoundingClientRect().width);else{if(B=e.clientWidth,null!=e.getBoundingClientRect){var Y=(WebSquare.style.getSize(e,"outerwidth")-WebSquare.style.getSize(e,"width"))/2;B=e.getBoundingClientRect().width-Y}"drilldown"==b&&"line"==w.options.depthType?B=e.clientWidth-e.firstChild.clientWidth:"checkbox"!=b&&"radio"!=b||(B=e.clientWidth-WebSquare.style.getSize(e.firstChild,"outerMarginWidth"))}if(3!=C.firstChild.nodeType){var V=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),H=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");P-=parseInt(V||"0",10),P-=parseInt(H||"0",10),"textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==w.options.viewTypeIconImage?(B-=parseInt(WebSquare.style.getStyle(v.firstChild,"padding-left"),10),B-=parseInt(WebSquare.style.getStyle(v.firstChild,"padding-right"),10),B-=parseInt(WebSquare.style.getStyle(v,"padding-left"),10),B-=parseInt(WebSquare.style.getStyle(v,"padding-right"),10)):(B-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-left"),10),B-=parseInt(WebSquare.style.getStyle(e.firstChild,"padding-right"),10),B-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),B-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10))}if(B<P||"image"==b||B==P&&e.clientWidth<e.scrollWidth){c=WebSquare.style.getAbsoluteLeft(e)+l,u=WebSquare.style.getAbsoluteTop(e)+h,d="";d=D||("text"==b&&y?C.firstChild.value:"link"==b?T?C.firstChild.firstChild.innerHTML:C.firstChild.innerHTML:"textImage"==b||("autoComplete"==b||"calendar"==b)&&"true"==w.options.viewTypeIconImage?"NOBR"==v.firstChild.tagName||"SPAN"==v.firstChild.tagName&&v.firstChild.className.indexOf("w2grid_span")>-1?C.firstChild.innerHTML:C.innerHTML:"image"==b?C.firstChild.src:"drilldown"==b?T?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:T||"BUTTON"==e.firstChild.tagName?C.firstChild.innerHTML:C.innerText.wq_trim()),this.render.removeChild(this.toolTipRuler),this.options.tooltipFormatter&&(d=this._showTooltopFormatter(e.id,d,!0)),d.match('href=""')&&(d=d.wq_replaceAll('href=""',"")),this.showTooltip(c,u,d,h,f)}else this.render.removeChild(this.toolTipRuler)}else{if(o+3<e.firstChild.offsetWidth){c=WebSquare.style.getAbsoluteLeft(e)+l,u=WebSquare.style.getAbsoluteTop(e)+h,d=""
;d="text"==b&&y?C.firstChild.value:"link"==b?T?C.firstChild.firstChild.innerHTML:C.firstChild.innerHTML:"image"==b?C.firstChild.src:"drilldown"==b?T?e.firstChild.innerText.replace(/^\s*/,""):e.innerText:T||"BUTTON"==e.firstChild.tagName?C.firstChild.innerHTML:C.innerText.wq_trim(),this.options.tooltipFormatter&&(d=this._showTooltopFormatter(e.id,d,!0)),this.showTooltip(c,u,d,h,f)}}}}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype._showTooltopFormatter=function(t,e,i){try{var o=document.getElementById(t),r=a.Z.getDataPrefix("col_id"),n=a.Z.getDataPrefix("colindex"),l=a.Z.getDataPrefix("trindex"),h=a.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if("function"==typeof h){var d,c,u="body";this.hasClass(o,this.options.subtotalTdClass)?(u="subtotal",d=parseInt(o.parentNode.getAttribute(l),10),c=parseInt(o.getAttribute(n),10)):this.hasClass(o,this.options.footerTdClass)?(u="footer",d=parseInt(o.parentNode.getAttribute("data-trindex"),10),c=parseInt(o.getAttribute(n),10)):(d=this.getElemRowIndex(o),c=this.getColumnIndex(o.getAttribute(r))),e=h(d,c,e,i,u)}return e}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.bodyOut=function(t,e){var i=this;(i.options.tooltipDisplay||i.options.headerTooltipDisplay||this.options.tooltipHeader||i.options.rowStatusTooltipDisplay)&&e&&i.hideTooltip()},b.prototype.showTooltip=function(t,e,i,o,n){if(null==this.editedCell){try{var l=r.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(l){var h=a.Z.getGlobalFunction(l,this.scope_id),d=!0;if("function"==typeof h&&(d=h(this)),!d)return}}catch(t){s.Y.printStackTrace(t)}var c=document.body.scrollWidth,p=this.options.useMobileTooltip&&this.isMobile?"w2grid_mobileTooltip":"";this.tooltip||(this.tooltip=new WebSquare.uiplugin.output(this.id+"_tooltip",{className:"w2grid_tooltip "+this.options.tooltipClass+p,style:"position:absolute;"+this.options.tooltipStyle}),this.tooltip.parentFrame=this.parentFrame,this.tooltip.writeTo(WebSquare.getBody()),this.tooltip.activate(),"click"===this.options.tooltipHide?this.tooltip.render.onclick=function(){this.style.display="none"}:this.tooltip.render.onmouseover=function(){this.style.display="none"}),"click"===this.options.tooltipHide&&(1==WebSquare.getBody().hasClass("w2drag_activate")?(this.tooltip.render.onclick=null,this.tooltip.render.onmouseover=function(){this.style.display="none"}):(this.tooltip.render.onclick=function(){this.style.display="none"},this.tooltip.render.onmouseover=null)),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip");var g=n?WebSquare.xml._encode(i):i,m=this,f=this.getCellInfo(this.getFocusedColumnIndex()).options.inputType;if(this.options.useMobileTooltip&&(a.Z.isMobile()||this.isHammerEnabled())){var b="",y="<button type='button' id='"+this.id+"_mobileTooltipCloseButton' onclick='' class='w2grid_mobileTooltipClose_button'>X</button>";if("link"==f){b="<p id='"+this.id+"_toGoButton'><a href class='w2grid_mobileTooltip_anchor' onClick='event.returnValue=false; return false;'>"+g+"</a></p>";b+=y,this.tooltip.render.innerHTML=b,this.tooltip.event.addListener(this.tooltip.render.querySelector(".w2grid_mobileTooltip_anchor"),"onclick",(function(t){try{var e=m.getFocusedColumnIndex();u.f.fireEvent(m,"oncellclick",m._getGroupbyDisplayRowIndex(m._getFocusedRowIndex()),e,m.getFocusedColumnID())}catch(t){s.Y.printStackTrace(t,null,this)}}))}else"text"==f&&(b="<p>"+g+"</p>"+y,this.tooltip.render.innerHTML=b)}else this.tooltip.render.innerHTML=g;u.f.fireEvent(this,"ontooltipshow");var v=this.tooltip.render.offsetTop+this.tooltip.render.offsetHeight+20,w=document.body.scrollHeight;if(null!=WebSquare.BootLoader.fullViewRatio&&(w=document.body.clientHeight+Math.abs(document.body.getBoundingClientRect().top)),v>w){var S=e-(o+this.tooltip.render.offsetHeight);S<0&&(S=0),this.tooltip.setStyle("top",S+"px")}if(document.body.scrollWidth>c){
var _=t-(document.body.scrollWidth-c);_<0&&(_=0),this.tooltip.setStyle("left",_+"px")}this.options.tooltipDisplayTime>0&&r.I.setTimer(this.hideTooltip,{key:this.id+"_tooltip_hide_timer",caller:this,delay:this.options.tooltipDisplayTime})}},b.prototype.hideTooltip=function(){this.tooltip&&(this.options.tooltipDisplayTime>0&&r.I.clearTimer(this.id+"_tooltip_hide_timer"),u.f.fireEvent(this,"ontooltiphide"),this.tooltip.setStyle("display","none"))},b.prototype.bodyClick=function(t,e,i){try{var r=this.getLastFocusedCell().focusedTd;this.options.rowMouseOver&&this.removeRowOverStyle(this.lastOverSrc,"grid_body_row_over","grid_body_row");var n=a.Z.getDataPrefix("tdIndex"),l=a.Z.getDataPrefix("col_id"),h=a.Z.getDataPrefix("colIndex"),d=this.rowIndex,c=parseInt(e.getAttribute(n)),p=(R=parseInt(c/this.realRowDataLength))+this.rowIndex,g=e.getAttribute(l),m=this._dataList.getRowPosition(),f=this.getColumnIndex(this._dataList.getColumnPosition()),b=R+d,y=c%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(g&&(K=this.getCellInfo(g)),"number"!=typeof(O=this.dataList.getRealRowIndex(p)))return void(O&&"header"==O.type&&this.toggleGroup(O.groupId));if(this.options.focusDefaultColumn){var v=e.getAttribute("id")||"",w="_headerRowNumber"===v.slice(0,16),S="_headerRowStatus"===v.slice(0,16);if(w||S)return this.__setFocusedCell(t,e,{editMode:!1}),void(S?u.f.fireEvent(this,"onrowstatusclick",b):u.f.fireEvent(this,"onrownumclick",b))}if(null==g)return;this.moveDirection=null;var _=f-y,C=m-b;0==_&&0==C?this.moveDirection="none":(_>0||_<0)&&(C>0||C<0)?this.moveDirection="both":_>0||_<0?this.moveDirection="column":(C>0||C<0)&&(this.moveDirection="row");var x=a.Z.getDataPrefix("editModeEvent"),I=e.getAttribute(x)||"",T=!1;if(""!=I&&"onsecondclick"==I.toLowerCase()||""==I&&"onsecondclick"==this.options.editModeEvent.toLowerCase())for(var k=0;k<this.focusedCell.length;k++)this.focusedCell[k].focusedRowIndex==b&&this.focusedCell[k].focusedColIndex==y&&(T=!0);K=this.getCellInfo(e);var L,A="";"custom"===K.options.inputType&&(A=(L=K.cellManagerHashByRowIndex[this.getRealRowIndex(b)]?K.cellManagerHashByRowIndex[this.getRealRowIndex(b)]:K).options.inputType);var D,W=!0,q=u.f.getTarget(t);if(!K.options.blockSelect&&("button"!==K.options.inputType&&"button"!==A||("button"===K.options.inputType||"button"===A)&&q&&"TD"===q.tagName)){var M,E=!0;if(this.options.preventDuplicateFocusedCell&&"linear"===this.options.focusFlow&&"link"!==K.options.inputType&&(E=!1),this.options.preventMultipleClick&&"checkbox"===K.options.inputType&&q&&"LABEL"===q.tagName&&(E=!1),E){if("enter"===this.options.drilldownToggle&&this.isMobile&&this.isHammerEnabled())if(1==this.focusedCell.length)if((K=this.getCellInfo(this.focusedCell[0].focusedColIndex))&&"drilldown"==K.options.inputType){c=parseInt(e.getAttribute(n));var R=parseInt(c/this.realRowDataLength),N=(g=parseInt(e.getAttribute(h)),b=this._getGroupbyDisplayRowIndex(R+d),y=c%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),this.focusedCell[0].focusedColIndex),F=this.focusedCell[0].focusedRowIndex;if(b===F&&y===N){var O=this.dataList.getRealRowIndex(F);this.toggle(O)}}var B={editMode:"none"==K.options.focusMode,dont_fixScroll:this.options.CellClickFixScrollX};o.q.extend(B,i),M=this.__setFocusedCell(t,e,B)}"multiCell"===M&&(W=!1),K.options.embeddedInput&&(this.focusedByApi=!1)}if(t.altKey&&!0===this.options.contextMenuAltClick)return void this.clickRightButtonCell(t);var P=!0;D=a.Z.isIE()?t.srcElement:t.target;var Y=!1;switch(K.options.inputType){case"radio":case"checkbox":if("INPUT"!=D.tagName)if(!this.options.checkOnCellClick||"LABEL"==D.tagName||this._getEditDisabled(b,y)||this.___getEditReadOnly(b,y))P=!1;else{var V=e.getElementsByTagName("input")[0];!V||"checkbox"!=K.options.inputType&&V.checked||(V.checked=!V.checked,Y=!0)}break;case"drilldown":this.options.ignoreToggleOnDisabled&&this._getEditDisabled(p,g)&&(P=!1)}var H,j=!1,z=this.isHammerEnabled()
;if(P)if(H=this.setCellClickEdit(e))Y&&u.f.fireEvent(this,"oncellclick",b,y,U);else{I=e.getAttribute(x)||K.options.editModeEvent||"";var G=null!=r&&r===e,Z=""!=I&&"onclick"==I.toLowerCase()||""==I&&"onclick"==this.options.editModeEvent.toLowerCase()||T;if((!z||G)&&Z){if(!this._getEditDisabled(p,g)){c=parseInt(e.getAttribute(n)),R=parseInt(c/this.realRowDataLength),g=parseInt(e.getAttribute(h));var U=e.getAttribute(l);b=this._getGroupbyDisplayRowIndex(R+d),y=c%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.hideTooltip(),!("button"===(K=this.getCellInfo(y)).options.inputType||!K.options.embeddedInput&&("checkbox"===K.options.inputType||"radio"===K.options.inputType)&&this.options.preventMultipleClick)){var X=!1;if(0==K.internal&&"custom"==K.options.inputType)("button"===L.options.inputType||!L.options.embeddedInput&&("checkbox"===L.options.inputType||"radio"===L.options.inputType)&&this.options.preventMultipleClick)&&(X=!0);X||"drilldown"==K.options.inputType&&this.options.ignoreCellClick&&H||u.f.fireEvent(this,"oncellclick",b,y,U)}j=!0}W&&this.setEditMode(e)}}if(!j&&!this._getEditDisabled(p,g)){var K;c=parseInt(e.getAttribute(n)),R=parseInt(c/this.realRowDataLength),g=parseInt(e.getAttribute(h)),U=e.getAttribute(l),b=R+d,y=c%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(z||this.options.tooltipDisplay&&this.isMobile?this.bodyOver(t,e):this.hideTooltip(),!("button"===(K=this.getCellInfo(y)).options.inputType||!K.options.embeddedInput&&("checkbox"===K.options.inputType||"radio"===K.options.inputType&&this.options.preventDuplicateFocusedCell)&&this.options.preventMultipleClick&&!(this.options.checkOnCellClick&&"LABEL"!=D.tagName))){if(0==K.internal&&"custom"==K.options.inputType)if("button"===L.options.inputType||!L.options.embeddedInput&&"checkbox"===L.options.inputType&&this.options.preventMultipleClick)return;b=this._getGroupbyDisplayRowIndex(b),"drilldown"==K.options.inputType&&this.options.ignoreCellClick?H||u.f.fireEvent(this,"oncellclick",b,y,U):("radio"===K.options.inputType||"checkbox"===K.options.inputType)&&("LABEL"===D.tagName||"TD"===D.tagName)||"link"===K.options.inputType&&this.options.contentCellClick&&"A"!==D.tagName||"link"===K.options.inputType&&this.options.useMobileTooltip&&(z||this.options.tooltipDisplay&&this.isMobile)||"image"===K.options.inputType&&this.options.contentCellClick&&"IMG"!==D.tagName||u.f.fireEvent(this,"oncellclick",b,y,U)}}}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.bodyDblClick=function(t,e){var i=a.Z.getDataPrefix("tdIndex"),o=a.Z.getDataPrefix("col_id"),s=a.Z.getDataPrefix("editModeEvent");if("INPUT"==e.tagName)var r=this.getLastFocusedCell(),n=r.focusedRowIndex,l=r.focusedColIndex;else{var h=parseInt(e.getAttribute(i));n=parseInt(h/this.realRowDataLength)+this.rowIndex,l=e.getAttribute(o)}if(null!=l){var d=e.getAttribute(s)||"";if((""!=d&&"ondblclick"==d.toLowerCase()||""==d&&"ondblclick"==this.options.editModeEvent.toLowerCase())&&this.setEditMode(e),!this._getEditDisabled(n,l)){this.rollbackCommitFlag=!1;var c=this.isHammerEnabled(),p=this.getCellInfo(l);if(c||p.options.blockSelect)u.f.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(n),this.getColumnIndex(l),this.getColumnID(l));else{var g=this.getFocusedColumnIndex();u.f.fireEvent(this,"oncelldblclick",this._getGroupbyDisplayRowIndex(this._getFocusedRowIndex()),g,this.getColumnID(g))}this.rollbackCommitFlag=!0}}},b.prototype.headerClick=function(t,e,i){this.focusedByApi=!1,this.options.tooltipHeader&&this.hideTooltip();var o=a.Z.getDataPrefix("header_id"),s=e.getAttribute(o);if((this.options.preventMultipleClick||this.options.senseReader)&&this.headerInfoHash[s]&&this.headerInfoHash[s].options&&"checkbox"===this.headerInfoHash[s].options.inputType||1!=this._getHeaderDisabled(s)&&u.f.fireEvent(this,"onheaderclick",s),null!=this.editedCell&&this.editedCell.handleEndEdit(t,void 0,i),
1==this.noevent);else if(this.getDataLength()>0&&"onclick"==this.options.sortEvent&&this._checkSortable(e)&&!this.groupbyStatus.grouped&&(this.fireSortEvent(t,e),this.options.sortHeaderDiv)){var r=e.getElementsByTagName("button");if(r.length>0){var n=r[r.length-1];if(!0!==this.options.accessibility){var l=this.getElementById(this.id+"_scrollX_div");if(l.offsetHeight){for(var h=this.getElementById(this.id+"_scrollX_right").scrollLeft,d=parseInt(e.getAttribute("colSpan"))||1,c=this.headerToBodyRelation[s],p=this._getRealColIndex("body",c)+this.defaultColCnt,g=e.offsetWidth,m=this.colWidthList[p],f=1;f<d;f++)m+=this.colWidthList[p+f];var b=this._getRealColIndex("body",c)+this.defaultColCnt+d-1,y=0;for(f=0;f<=b;f++)!0!==this.hiddenList[f]&&(y+=this.colWidthList[f]);var v=y-(h+l.offsetWidth);v>0?this.setScrollLeft(h+v):g<m&&this.setScrollLeft(h-(m-g))}}a.Z.requestAnimationFrame((function(){n.focus()})),1==this.options.senseReader&&this.addGridScroll(0-this.rowIndex)}}this.noevent=!1},b.prototype.headerDdlClick=function(t,e){var i=a.Z.getDataPrefix("header_id");u.f.fireEvent(this,"onheaderdblclick",e.getAttribute(i));var o=this._checkSortable(e);this.getDataLength()>0&&"ondblclick"==this.options.sortEvent&&o&&!this.groupbyStatus.grouped&&this.fireSortEvent(t,e),this.groupbyStatus.grouped&&o||(this.noevent=!1)},b.prototype.fireGroupByRangeSortEvent=function(t,e){try{return}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.recursiveRangeSort=function(t,e,i){try{return}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.fireSortEvent=function(t,e){if(!e.disabled&&!(e.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||e.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0)&&this._checkSortable(e)){var i=a.Z.getDataPrefix("header_id"),o=e.getAttribute(i),s=this.headerToBodyRelation[o],r=a.Z.getDataPrefix("orderByColumn"),n=e.getAttribute(r);n&&this.bodyIdColIndexMap[n]&&(s=n);var l=this.options.useCtrlOnMultisort?t.ctrlKey||t.metaKey:!(t.ctrlKey||t.metaKey);this.options.preventMultisort&&(l=!1);var h=this.cellInfoHash[s];if("gridView"!=this.initializeType||("expression"!=h.options.inputType||"true"==h.options.expressionSort)&&"drilldown"!=h.options.inputType){if(null==this.headerSortStatusArr&&(this.headerSortStatusArr=[]),this.headerSortStatusArr[s]){if(this.options.noSortInit?-1==this.headerSortStatusArr[s].sortOrder?this.headerSortStatusArr[s].sortOrder=1:this.headerSortStatusArr[s].sortOrder=-1:this.options.sortOrderReverse?this.headerSortStatusArr[s].sortOrder=(this.headerSortStatusArr[s].sortOrder+3)%3-1:this.headerSortStatusArr[s].sortOrder=(this.headerSortStatusArr[s].sortOrder-3)%3+1,!l){var d=this.headerSortStatusArr[s];this.clearHeaderSort(),this.headerSortStatusArr.push(d),this.headerSortStatusArr[s]=this.headerSortStatusArr[0]}}else{if(this.headerSortStatusArr.length>0&&l){if(isNaN(this._grid._dataList.getColumnIndex(s)))return void p.v.printLog("fake columns do not supported multiple sort.["+this.id+"]");for(var c=0;c<this.headerSortStatusArr.length;c++)if(isNaN(this._grid._dataList.getColumnIndex(this.headerSortStatusArr[c].colID)))return void p.v.printLog("fake columns do not supported multiple sort.["+this.id+"]")}(d={}).headerId=o,d.colID=s,this.options.sortOrderReverse?d.sortOrder=-1:d.sortOrder=1;h=this.getCellInfo(s);var g=this.getColumnOption(h.options.col_id,"dataType"),m=this._dataList.getCellInfo(s).options.dataType;d.dataType="number"==g||"bigDecimal"===g||"float"==g?g:m,l?(this.headerSortStatusArr.push(d),this.headerSortStatusArr[s]=this.headerSortStatusArr[this.headerSortStatusArr.length-1]):(this.clearHeaderSort(),this.headerSortStatusArr.push(d),this.headerSortStatusArr[s]=this.headerSortStatusArr[0])}if(!0===this.options.accessibility&&!l){var f=this.getElementById(this.id+"_sort_info");if(0===(v=d.sortOrder))f.innerText="";else{
var b=1===v?WebSquare.language.getMessage("Grid_sort_asc_info",this.getHeaderValue(o)):WebSquare.language.getMessage("Grid_sort_desc_info",this.getHeaderValue(o));f.innerText=b}}var y=[],v=[],w=(g=[],{});if(w.headerId=o,w.bodyColId=s,w.sortOrder=this.headerSortStatusArr[s].sortOrder,0==this.headerSortStatusArr.length)this.dataList.clearSortFilter();else{for(c=this.headerSortStatusArr.length-1;c>=0;c--)if(0==this.headerSortStatusArr[c].sortOrder){var S=this.headerSortStatusArr[c].colID;if(this.setHeaderSortImage(o,0,0),this.headerSortStatusArr.splice(c,1),delete this.headerSortStatusArr[S],0==this.headerSortStatusArr.length)return u.f.fireEvent(this,"onbeforesort",w),this.dataList.clearSort(),void u.f.fireEvent(this,"onsort",w)}else y.push(this.headerSortStatusArr[c].colID),v.push(this.headerSortStatusArr[c].sortOrder),g.push(this.headerSortStatusArr[c].dataType);if(y.reverse(),v.reverse(),g.reverse(),0==u.f.fireEvent(this,"onbeforesort",w))return;this.dataList.setFilter({type:"sort",sortIndex:y.join(" "),sortOrder:v.join(" "),dataType:g.join(" "),focuseMode:this.options.filterFocusMode,ignoreEmptyStringOnSort:this.options.ignoreEmptyStringOnSort,setEmptyStringFirstOnSort:this.options.setEmptyStringFirstOnSort,setEmptyStringSortableOnSort:this.options.setEmptyStringSortableOnSort})}this.drawHeaderSortImages(),u.f.fireEvent(this,"onsort",w)}}},b.prototype.footerClick=function(t,e,i){var o=a.Z.getDataPrefix("footer_id");u.f.fireEvent(this,"onfooterclick",e.getAttribute(o)),null!=this.editedCell&&this.editedCell.handleEndEdit(t,void 0,i)},b.prototype.footerDblClick=function(t,e,i){var o=a.Z.getDataPrefix("footer_id");u.f.fireEvent(this,"onfooterdblclick",e.getAttribute(o)),null!=this.editedCell&&this.editedCell.handleEndEdit(t,void 0,i)},b.prototype.subtotalClick=function(t,e,i){try{for(var o=e.getAttribute("id"),r=a.Z.getDataPrefix("targetcolumnid"),n=e.parentNode.getAttribute(r),l=0,h=-1,d=0;d<this.subtotalRowHash[n].length;d++)if(this.subtotalRowHash[n][d]===e.parentNode){h=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(h>-1){var c=this._dataList.getCellData(h,n);for(l=h-1;this._dataList.getCellData(l,n)==c&&l>=0;l--);l++}var p={colID:o,startRowIndex:l,endRowIndex:h,element:e};u.f.fireEvent(this,"onsubtotalclick",p),null!=this.editedCell&&this.editedCell.handleEndEdit(t,void 0,i)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.subtotalDblClick=function(t,e){try{for(var i=e.getAttribute("id"),o=a.Z.getDataPrefix("targetcolumnid"),r=e.parentNode.getAttribute(o),n=0,l=-1,h=0;h<this.subtotalRowHash[r].length;h++)if(this.subtotalRowHash[r][h]===e.parentNode){l=parseInt(e.parentNode.getAttribute("data-subtotalrowindex"),10);break}if(l>-1){var d=this._dataList.getCellData(l,r);for(n=l-1;this._dataList.getCellData(n,r)==d&&n>=0;n--);n++}var c={colID:i,startRowIndex:n,endRowIndex:l,element:e};u.f.fireEvent(this,"onsubtotaldblclick",c)}catch(t){s.Y.printStackTrace(t,null,this)}},b.prototype.handleTouchStart=function(t){!this.isHammerEnabled()&&this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip(),r.I.clearTimer(this.id+"_iScroll_slideX");var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScrollAddMoveClass(),this.iScroll.moveDirection=null,this.iScroll.propagation=null,this.iScroll.prevTouches=[{x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY}],r.I.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime}))},b.prototype.handleTouchMove=function(t){if("pass"!=this.iScroll.propagation){this.iScroll.addMoveClass&&(this.iScrollAddMoveClass(),this.iScroll.addMoveClass=!1);var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o=this.scrollX_right,s=this.getElementById(this.id+"_scrollY_div");this.iScroll.prevTouches.push({
x:e?t.touches[0].pageX:t.pageX,y:e?t.touches[0].pageY:t.pageY});var a=this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2);if(a.length<2)return;var n=a[0].x-a[1].x,l=a[0].y-a[1].y,h=this.iScroll.moveDirection;if(h||(h=this.iScroll.moveDirection=Math.abs(l)>=Math.abs(n)?"Y":"X",this.iScroll.moveDistance=Math.abs(l)>=Math.abs(n)?Math.abs(l):Math.abs(n)),this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===h)return void u.f.stopEvent(t);var d=this.hasSubtotal&&this.lastSubtotalRow&&"none"==this.lastSubtotalRow.style.display;if("X"==h&&n<0&&0==o.scrollLeft||"X"==h&&n>0&&o.scrollLeft>=o.firstChild.offsetWidth-o.offsetWidth||"Y"==h&&l<0&&0==s.scrollTop||"Y"==h&&l>0&&this.rowIndex+this.lastIndex+1==this.getDataLength()&&!d||"Y"==h&&this.hasClass("w2grid_adaptive_crosstab")||"Y"==h&&0===this.getDataLength())return void("stop"==this.iScroll.propagation?u.f.stopEvent(t):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[],this.iScroll.propagation="pass"));"X"==h?this.moveXScroll(n):!0!==this._isBrowserScroll()&&this.moveYScroll(l),this.iScroll.propagation="stop",!0===this._isBrowserScroll()&&"X"!=h||u.f.stopEvent(t),r.I.setTimer((function(){this.iScrollRemoveMoveClass(),this.iScroll.addMoveClass=!0}),{key:this.id+"_iScroll",caller:this,delay:this.options.iScrollMoveEffectTime})}}},b.prototype.handleTouchEnd=function(t){if(this.isMobile||window.navigator.msPointerEnabled&&this.iScroll.prevTouches&&"touch"==t.pointerType){r.I.clearTimer(this.id+"_iScroll"),this.iScroll.prevTouches=this.iScroll.prevTouches.splice(-2);var e=this.iScroll.prevTouches;if(e.length>=2){var i=e[0].x-e[1].x;if(this.options.scrollByColumnAdaptive&&this.event.hasEvent(this.id+"_body_tbody","onscroll")&&"X"===this.iScroll.moveDirection){var o=this.getElementById(this.id+"_body_tbody"),s=o.firstChild.offsetWidth,a=0;return i>0?a=Math.ceil(i/s)*s:i<0&&(a=Math.floor(i/s)*s),void(o.scrollLeft=Math.floor((o.scrollLeft+a)/s)*s)}var n=new Date;this.slideX(i,n)}else this.iScrollRemoveMoveClass()}},b.prototype.iScrollAddMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__addClass(t,"w2grid_iScrollX_move"),this.__addClass(e,"w2grid_iScrollY_move")},b.prototype.iScrollRemoveMoveClass=function(){var t=this.getElementById(this.id+"_iScrollX"),e=this.getElementById(this.id+"_iScrollY");this.__removeClass(t,"w2grid_iScrollX_move"),this.__removeClass(e,"w2grid_iScrollY_move")},b.prototype.moveXScroll=function(t){var e=this.getElementById(this.id+"_iScrollX"),i=this.getElementById(this.id+"_dataLayer"),o=this.getElementById(this.id+"_scrollX_left"),s=this.scrollX_right;s.scrollLeft+=t;var r=parseInt(o.style.width,10),a=s.firstChild.offsetWidth-s.offsetWidth,n=parseInt(s.offsetWidth*s.offsetWidth/s.firstChild.offsetWidth,10);e.style.width=(n<30?30:n)+"px",e.style.left=r+s.scrollLeft/a*(i.offsetWidth-r-e.offsetWidth)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},b.prototype.slideX=function(t,e){var i=new Date,o=parseInt(t/3,10);this.moveXScroll(o),t-=o,Math.abs(t)>=0&&i-e<this.options.iScrollSlideTime?(r.I.clearTimer(this.id+"_iScroll_slideX"),r.I.setTimer(this.slideX,{key:this.id+"_iScroll_slideX",caller:this,delay:this.options.iScrollSlidePeriod,args:[t,e]})):this.iScrollRemoveMoveClass()},b.prototype.moveYScroll=function(t){t*=parseInt(this.options.touchScrollDelta,10)||5;var e=this.getElementById(this.id+"_iScrollY"),i=this.getElementById(this.id+"_scrollY_div");i.scrollTop+=t;var o=i.firstChild.offsetHeight,s=this.getElementById(this.id+"_dataLayer"),r=o-s.offsetHeight,a=parseInt(s.offsetHeight*s.offsetHeight/o,10);e.style.height=(a<30?30:a)+"px",e.style.top=i.scrollTop/r*(s.offsetHeight-e.offsetHeight)+"px",this.options.tooltipDisplay&&this.isMobile&&this.hideTooltip()},b.prototype.tbodyMoveXScroll=function(t){if(this.editedCell&&this.editedCell.handleEndEdit(),!this.mobile&&this.options.scrollByColumnAdaptive,
this.options.adaptiveSlideHeader){var e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==e&&!(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10)&&a.Z._getBrowserWidth()<=i&&this.slideHeadObj&&"absolute"==this.slideHeadObj.render.style.position){this.slideHeadObj.hidden&&($(this.slideHeadObj.render.firstChild).animate({width:"show"}),this.slideHeadObj.hidden=!1);var o=this;!function t(){a.Z.setTimeout((function(){null!=WebSquare.userTimerHash[o.id+"_adaptiveSlideHeader"]?(a.Z.clearTimeout(o.id+"_adaptiveSlideHeader"),t()):o.slideHeadObj.hidden||($(o.slideHeadObj.render.firstChild).animate({width:"hide"}),o.slideHeadObj.hidden=!0)}),{delay:1e3,key:o.id+"_adaptiveSlideHeader"})}()}}};var y=function(){};y.prototype.nonCharKeys={4:"insert",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",9:"tab",13:"enter",46:"del",16:"shift",17:"ctrl",18:"alt",21:"hanyoung",25:"hanja",91:"window",20:"capslock",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"numlock",145:"scrolllock"},y.prototype.handleBodyKeyDown=function(t){this.isKeyPressed=!0;for(var e=this.event.getTargetIterator(t,this.render),i=!1;e.next()&&e.element;)e.match(this.options.bodyTdClass)?(i=!1,e.stop()):e.match(this.options.headerTdClass)&&(i=!0,e.stop());if(this.editMode){var o=this.editedCell.options.inputType;switch("text"!==o&&"textarea"!==o&&"calendar"!==o&&"textImage"!==o&&"secret"!==o||(this.beforeEditedCellInfo={rowIndex:this.editedCell.editRowIndex,colIndex:this.getColumnIndex(this.editedCell.id),colID:this.getColumnID(this.editedCell.id),oldValue:this.editedCell.beforeEditValue||"",newValue:this.editedCell._getEditedValue(),inputType:o,keyCode:t.charCode?t.charCode:t.keyCode}),q=t.keyCode){case 9:if(u.f.stopEvent(t),"down"==this.options.tabKeyMove){if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;c=!1,"calendar"===o&&(c=this.options.keyMoveEditMode&&"down"==this.options.tabKeyMove);var n=this.editedCell.id}if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t,c],{checkFunc:function(t){return t+""!="false"}})){var l=!1;if("down"===this.options.tabKeyMove){var h=this.getLastFocusedCell().focusedColIndex;l=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,n);var d=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===l?(this._fireOnviewchange(n,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(n))]),this.focusNextTabOrder()):(!l||h!==d&&null!=h&&null!=d)&&this._fireOnviewchange(n,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(n))])}else l=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);l||this._setFocusedCell(this.editMode)}break;case 13:if("textarea"==this.editedCell.options.inputType&&!t.ctrlKey)break;if(0==this.editedCell.internal&&"custom"==this.editedCell.options.inputType&&"textarea"==(this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]?this.editedCell.cellManagerHashByRowIndex[this.editedCell.editRowIndex]:this.editedCell).options.inputType)break;var c=!1;a.Z.isIEAllVersion()&&"calendar"===o&&(c=this.options.keyMoveEditMode&&"right"!=this.options.enterKeyMove&&"none"!=this.options.enterKeyMove);n=this.editedCell.id;if(!1!==this._fireOnviewchange(this.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}}))if(c){A=this;setTimeout((function(){var e=!1;if("right"==A.options.enterKeyMove||"editRight"==A.options.enterKeyMove)e=A.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=A.options.enterKeyMove&&"edit"!=A.options.enterKeyMove){
var i=A.getLastFocusedCell().focusedColIndex;e=A.moveVertical(t,t.shiftKey?"up":"down",A.options.keyMoveEditMode,n);var o=A.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===e?(A._fireOnviewchange(n,"_handleEndEdit_focus",[A.getInput(A.getCellInfo(n))]),A.focusNextTabOrder()):(!e||i!==o&&null!=i&&null!=o)&&A._fireOnviewchange(n,"_handleEndEdit_focus",[A.getInput(A.getCellInfo(n))])}e||A._setFocusedCell(A.editMode)}),1)}else{l=!1;if("right"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove)l=this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode);else if("none"!=this.options.enterKeyMove&&"edit"!=this.options.enterKeyMove){h=this.getLastFocusedCell().focusedColIndex;l=this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode,n);d=this.getLastFocusedCell().focusedColIndex;"focusNextTabOrder"===l?(this._fireOnviewchange(n,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(n))]),this.focusNextTabOrder()):(!l||h!==d&&null!=h&&null!=d)&&this._fireOnviewchange(n,"_handleEndEdit_focus",[this.getInput(this.getCellInfo(n))])}l||this._setFocusedCell(this.editMode)}break;case 27:this.editedCell.handleCancelEdit(t),this._setFocusedCell(),u.f.stopEvent(t);break;case 86:if(t.ctrlKey||t.metaKey){if(this.options.preventPaste&&!this.editedCell){u.f.stopEvent(t);break}this.options.checkEditOnPaste&&this._doPaste()}default:var p={};p.rowIndex=this.editedCell.editRowIndex,p.colIndex=this._dataList.getColumnIndex(this.editedCell.id),p.colID=this.editedCell.id,p.keyCode=t.charCode?t.charCode:t.keyCode,this.editedCell._getEditedValue&&(this.editedCell.beforeEditValue=this.editedCell._getEditedValue()),u.f.fireEvent(this,"oneditkeydown",p)}}else{if(i){if(35===t.keyCode&&t.ctrlKey)return void this.focusToEnd();if(36===t.keyCode&&t.ctrlKey)return void this.focusToStart();this.removeFocusedCell()}if(this.options.ignoreKeyCheckFunction){var g=null,m=!1;try{if("function"==typeof this.options.ignoreKeyCheckFunction?g=this.options.ignoreKeyCheckFunction:"function"==typeof(g=a.Z.getGlobalFunction(this.options.ignoreKeyCheckFunction,this.scope_id))&&(this.options.ignoreKeyCheckFunction=g),"function"==typeof g&&(m=g.call(this,t)),m)return void u.f.preventDefault(t)}catch(t){g=null}}var f=a.Z.getDataPrefix("tdIndex"),b=a.Z.getDataPrefix("colIndex"),y=a.Z.getDataPrefix("col_id"),v=a.Z.getDataPrefix("directItemChoice");if("none"!=this.options.focusMode&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){if(13==t.keyCode&&document.activeElement==this.render&&(this._setFocusedCell(),u.f.stopEvent(t)),"A"!=u.f.getTarget(t).tagName)return;e=this.event.getTargetIterator(t,this.render);for(var w=!1;e.next();)if(e.match(this.options.bodyTdClass)){w=!0;var S=e.getElement(),_=parseInt(S.getAttribute(f)),C=parseInt(_/this.realRowDataLength),x=S.getAttribute(y),I=this.getColumnIndex(x);this.focusedCell.push({focusedTd:S,focusedRowIndex:C,focusedColIndex:I});var T=S.getElementsByTagName("a");if(-1==this.focusedCellLinkIndex)for(var k=0;k<T.length;k++)document.activeElement==T[k]&&(this.focusedCellLinkIndex=k);this.focusedCellLinkLength=T.length;break}if(!w)return}var L=!1;if(r.I.browserCheck.safari&&(t.ctrlKey||t.metaKey)){this.tempEditableCell=document.activeElement,this.tempEditableCell.contentEditable="true",this.tempEditableCell.style.textShadow="0 0 0 "+WebSquare.style.getStyle(this.tempEditableCell,"color"),this.tempEditableCell.style.color="transparent";var A=this;r.I.setTimer((function(){A.tempEditableCell.contentEditable="inherit",this.tempEditableCell.style.color="",this.tempEditableCell.style.textShadow=""}),{key:this.id+"_tempEditableCell_contentEditable",caller:this,delay:500})}switch(t.keyCode){case 37:case 39:if(this.options.moveKeyEditMode){var D=37==t.keyCode?"left":"right";return this.moveHorizontal({byApi:!0},D,this.options.moveKeyEditModeAll),void u.f.stopEvent(t)}case 38:case 40:if(this.skipScrollEndEvent=!1,this.skipScrollStartEvent=!1,this.options.moveKeyEditMode){
D=38==t.keyCode?"up":"down";return this.moveVertical({},D,!0),void u.f.stopEvent(t)}case 33:case 34:case 35:case 36:case 9:L=!0;break;case 13:if(this.options.senseReader&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex)if((N=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"image"==N.options.inputType)for(e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2grid_image")){var W=a.Z.getGlobalFunction(N.options.imageClickFunction,this.scope_id);"function"==typeof W&&W.call(this,this.getLastFocusedCell().focusedRowIndex,N.id,this.dataList.getCellData(this.getLastFocusedCell().focusedRowIndex,N.id))}if(this.options.senseReader&&null!=this.getLastFocusedCell().focusedColIndex)if((N=this.getCellInfo(this.getLastFocusedCell().focusedColIndex))&&"select"==N.options.inputType&&"ul"==N.options.tableRender)return this.setEditHtml(t),void u.f.stopEvent(t);L=!0;break;default:L=!1}if(1==L){var q=t.charCode?t.charCode:t.keyCode;if("false"==this.options.focusMove){if(!this.options.senseReader)return;if(9!=q){if(38!=q&&40!=q||!this.options.focusMoveByUpDownKey){if(35===q&&t.ctrlKey)return void this.focusToEnd();if(36===q&&t.ctrlKey)return void this.focusToStart();if(13==q){N=this.getCellInfo(this.focusedCell[0].focusedColIndex);if("enter"===this.options.drilldownToggle&&1==this.focusedCell.length&&N&&"drilldown"==N.options.inputType){var M=this.focusedCell[0].focusedRowIndex,E=this.dataList.getRealRowIndex(M);this.toggle(E)}}return}for(S=u.f.getTarget(t);S&&("TD"!=S.tagName||null==S.getAttribute(b));)S=S.parentNode;if(S){x=S.getAttribute(y);if("radio"!=(N=this.getCellInfo(x)).options.inputType)return}}}else if("true"==this.options.focusMove){var R=document.activeElement;if(R&&R.id===this.id+"_scrollX_right")return}}if(this.F2Mode)switch(t.keyCode){case 8:case 46:case 35:case 36:case 37:case 38:case 39:case 40:return}switch(t.keyCode){case 4:break;case 46:this.removeCellData(t),u.f.stopEvent(t);break;case 32:this.doDefaultAction(t);break;case 33:this.movePageUp(t),u.f.stopEvent(t);break;case 34:this.movePageDown(t),u.f.stopEvent(t);break;case 35:this.moveHorizontal(t,"end"),u.f.stopEvent(t);break;case 36:this.moveHorizontal(t,"home"),u.f.stopEvent(t);break;case 37:this.moveHorizontal(t,"left"),u.f.stopEvent(t);break;case 38:this.moveVertical(t,"up"),u.f.stopEvent(t);break;case 39:this.moveHorizontal(t,"right"),u.f.stopEvent(t);break;case 40:this.moveVertical(t,"down"),u.f.stopEvent(t);break;case 9:var N=this.getCellInfo(this.getLastFocusedCell().focusedColIndex);if(this.options.senseReader&&N&&"image"==N.options.inputType&&this.options.focusImage&&this.getLastFocusedCell().focusedColIndex){u.f.stopPropagation(t);for(e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2grid_image"))if(u.f.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else(this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)||"linear"!=this.options.focusFlow)&&u.f.stopEvent(t)}}else if(u.f.getTarget(t)==this.render)this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1);else{(("down"==this.options.tabKeyMove?this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode):"none"==this.options.tabKeyMove||this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode))||"linear"!=this.options.focusFlow)&&u.f.stopEvent(t)}break;case 13:N=this.getCellInfo(this.focusedCell[0].focusedColIndex);var F=this.focusedCell[0].focusedRowIndex,O=this.focusedCell[0].focusedColIndex,B=!0===this.options.senseReader&&WebSquare.util.isIEAllVersion()&&(this.___getEditReadOnly(F,O)||this._getEditDisabled(F,O));if("enter"===this.options.drilldownToggle&&1==this.focusedCell.length&&N&&"drilldown"==N.options.inputType){M=this.focusedCell[0].focusedRowIndex,E=this.dataList.getRealRowIndex(M);this.toggle(E);break}
if(this.editMode||"autoComplete"!==N.options.inputType&&"select"!==N.options.inputType||!N.options.directOpen)if("edit"==this.options.enterKeyMove||"editRight"==this.options.enterKeyMove||"editDown"==this.options.enterKeyMove)this.setEditHtml(t);else if("none"==this.options.enterKeyMove);else if("right"==this.options.enterKeyMove){if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===N.options.inputType)if(!B)(P=this.getInput(N,this.focusedCell[0].focusedTd))&&P.blur();B||this.moveHorizontal(t,t.shiftKey?"left":"right",this.options.keyMoveEditMode)}else{var P;if(!0===this.options.senseReader)if(1==this.focusedCell.length)if("text"===N.options.inputType)if(!B)(P=this.getInput(N,this.focusedCell[0].focusedTd))&&P.blur();B||this.moveVertical(t,t.shiftKey?"up":"down",this.options.keyMoveEditMode)}else"autoComplete"===N.options.inputType&&(N.autoCompleteImageClicked=!0),this.setEditHtml(t);u.f.stopEvent(t);break;case 67:if("native"===this.options.copyType)break;if(t.ctrlKey||t.metaKey){if(a.Z.isIEAllVersion())this.handleCopyEvent({});else if(!a.Z.isIEAllVersion()&&(r.I.browserCheck.moz||r.I.browserCheck.chrome&&!this.options.preventCopy)&&a.Z.isExecCommandSupported()){var Y=document.activeElement,V=document.createElement("textarea"),A=this,H=document.getElementsByTagName("body")[0],j=!!t&&t.shiftKey;V.oncopy=function(t){A.handleCopyEvent(t,j),H.removeChild(this),document.activeElement!=Y&&Y.focus()},V.textContent="temp",H.appendChild(V),V.select();try{document.execCommand("copy")}catch(t){s.Y.printStackTrace(t,null,this)}}}else a.Z.getBoolean(t.srcElement.getAttribute(v))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 88:if(t.ctrlKey||t.metaKey){if(a.Z.isIEAllVersion())this.handleCutEvent({});else if(!a.Z.isIEAllVersion()&&(r.I.browserCheck.moz||r.I.browserCheck.chrome)&&a.Z.isExecCommandSupported()){V=document.createElement("textarea"),A=this,H=document.getElementsByTagName("body")[0],j=!!t&&t.shiftKey;V.oncut=function(t){A.handleCutEvent(t,!1,j),H.removeChild(this)},V.textContent="temp",H.appendChild(V),V.select();try{document.execCommand("cut")}catch(t){s.Y.printStackTrace(t,null,this)}}}else a.Z.getBoolean(t.srcElement.getAttribute(v))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 86:if(t.ctrlKey||t.metaKey){if(this.options.preventPaste&&!this.editedCell){u.f.stopEvent(t);break}this._doPaste()}else{a.Z.getBoolean(t.srcElement.getAttribute(v))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}break;case 90:if(t.ctrlKey);else a.Z.getBoolean(t.srcElement.getAttribute(v))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t);break;case 27:"none"!=this.options.focusMode&&"linear"!=this.options.focusFlow&&(this.getLastFocusedCell().focusedTd.setAttribute("tabIndex",-1),this.render.focus());break;case 16:case 17:case 18:case 21:case 229:case 25:case 91:case 20:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:break;case 65:if(this.options.useSelectAll&&t.ctrlKey){this.setFocusedMultiCell(0,0,this.getRowCount()-1,this.getColumnCount()-1);break}default:if(!t.ctrlKey&&!t.metaKey&&!t.altKey)a.Z.getBoolean(t.srcElement.getAttribute(v))&&(this.directItemChoiceKeyObj.select=t.keyCode),this.setEditHtml(t),this.options.directEdit&&this._directEdit(t)}}this.isKeyPressed=!1},y.prototype.handleOnfocus=function(t){if(this.getDataLength()>0&&(-1==this._getFocusedRowIndex()||null==this.getFocusedColumnIndex())){for(var e=null,i=this.colIndexInfo.body.colInfo.colIndexMatch,o=this.colIndexes.bodyColInfo.trIndexArr,s=o[this.defaultColCnt],r=0;r<i.length;r++){var a=i[r];if(!this.hiddenList[r]){for(var n=a.length-1;n>=0;n--){var l=a[n]-this.defaultColCnt;if(o[a[n]]<=s){
if(this.options.readOnlyTabIgnore&&this.___getEditReadOnly(0,l))break;if(this.options.ignoreNonEditableCell&&(this.___getEditReadOnly(0,l)||this._getEditDisabled(0,l)))break;e=l;break}}if(null!==e)break}}null!==e&&this._setFocusedCell(0,e)}},y.prototype.removeCellData=function(t){this.handleCutEvent(t,!0)},y.prototype.doDefaultAction=function(t){if("none"==this.options.focusMode){for(var e=u.f.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;e&&this.getCellInfo(e).doDefaultAction(t)}else this.getCellInfo(this.getLastFocusedCell().focusedColIndex).doDefaultAction(t)},y.prototype.setEditHtml=function(t){var e=u.f.getTarget(t);if(this.options.fastEditMode||"INPUT"==e.tagName||u.f.stopEvent(t),this.focusedCell.length>0){var i=this.focusedCell[this.focusedCell.length-1];null!=i.focusedTd&&this.setEditMode(i.focusedTd)}},y.prototype.getFirstTdTrIndex=function(t){for(var e=t.parentNode,i=a.Z.getDataPrefix("trIndex");"0"!=e.getAttribute(i);)e=a.Z.prev(e);return e},y.prototype.fixScrollRightDirection=function(){if(!0!==this.options.scrollXNative){var t=this.getLastFocusedCell(),e=this.getElementById(this.id+"_dataLayer").offsetWidth,i=this.getElementById(this.id+"_scrollX_right");if(t&&t.focusedTd){var o=t.focusedTd.offsetLeft,s=t.focusedTd.offsetWidth+1;a.Z.isFF()&&(s-=1),a.Z.isOpera()&&(s+=2);var r=o+s-e;if(this.options.lazyDrawHiddenColumn){var n=this.focusedCell[0].focusedTd;if("none"==n.style.display||r>0)if(this.options.scrollByColumn){for(var l=e-this.fixedWidth,h=0;h<this.columnOrder.length;h++)if(this.columnOrder[h]==t.focusedColIndex){f=h+this.defaultColCnt;break}var d=-1,c=0;a.Z.isOpera()&&(c=2);for(var u=f;u>=0;u--)if(!this.hiddenList[u]&&(l-=this.colWidthList[u])<0){d=u;break}u=0;for(this.fixedWidth>0&&(u=this.getFixedColumnLastIndex());u<=d;u++)this.hiddenList[u]||(c+=this.colWidthList[u]);this.scrollXPreventEndEdit=!0,i.scrollLeft=c,this._handleScrollX()}else{var p=a.Z.getDataPrefix("colIndex"),g=parseInt(n.getAttribute(p),10),m=0;a.Z.isOpera()&&(m=2);for(h=0;h<=g;h++)this.hiddenList[h]||(m+=this.colWidthList[h]);this.scrollXPreventEndEdit=!0,i.scrollLeft=m-e,this._handleScrollX()}}else if(r>0)if(this.options.scrollByColumn){l=e-this.fixedWidth;var f,b=t.focusedColIndex%this.columnOrder.length;for(h=0;h<this.columnOrder.length;h++)if(this.columnOrder[h]==b){f=h+this.defaultColCnt;break}for(d=-1,c=0,u=f;u>=0;u--)if(!this.hiddenList[u])if(0!=this.colIndexes.bodyColInfo.colSpanArr.length){if((l-=this.colWidthList[u]*(this.colIndexes.bodyColInfo.colSpanArr[u]?this.colIndexes.bodyColInfo.colSpanArr[u]:1))<0){d=u;break}}else if((l-=this.colWidthList[u])<0){d=u;break}u=0;for(this.fixedWidth>0&&(u=this.getFixedColumnLastIndex());u<=d;u++)this.hiddenList[u]||(0!=this.colIndexes.bodyColInfo.colSpanArr.length?c+=this.colWidthList[u]*(this.colIndexes.bodyColInfo.colSpanArr[u]?this.colIndexes.bodyColInfo.colSpanArr[u]:1):c+=this.colWidthList[u]);this.scrollXPreventEndEdit=!0,i.scrollLeft=c,this._handleScrollX()}else this.scrollXPreventEndEdit=!0,i.scrollLeft=i.scrollLeft+r,this._handleScrollX()}}},y.prototype.fixScrollLeftDirection=function(){if(!0!==this.options.scrollXNative){var t=this.getLastFocusedCell();if(t&&t.focusedTd){for(var e=a.Z.getDataPrefix("col_id"),i=t.focusedTd.getAttribute(e),o=this._getRealColIndex("body",i)+this.defaultColCnt,s=this.getElementById(this.id+"_scrollX_right"),r=0,n=this.getFixedColumnLastIndex();n<o;n++){if(!this.hiddenList[n])r+=this.colWidthList[n]}s.scrollLeft>r&&(this.scrollXPreventEndEdit=!0,s.scrollLeft=r,this._handleScrollX())}}},y.prototype.getLeftMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.dataList.getRowCount()||t<0)return i;for(var o=0;o<e.length-this.defaultColCnt;o++){var s=!1,r=this.getCellInfo(o);if(!0!==r.options.skipKeyMove){if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),
this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}var n;if("custom"==r.options.inputType&&(n=r.cellManagerHashByRowIndex[this.dataList.getRealRowIndex(t)]),(this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))&&("user"==r.options.inputType||"link"==r.options.inputType||n&&"link"==n.options.inputType)){var l=this.data_td_list[o+(t-this.rowIndex)*this.oneRowDataLength];if(l){var h=l.getElementsByTagName("a");0==h.length&&(h=l.getElementsByTagName("input")),0!=h.length&&(s=!1)}else s=!1}if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var d=this.dataList.getCellData(t-1,o),c=this.upperGroupingTest(t,o);d==this.dataList.getCellData(t,o)&&c&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o]&&!s){i=o;break}}}return i},y.prototype.getRightMostFocusableColIndex=function(t){var e=this.colIndexInfo.body.colInfo.colIndexArr,i=null;if(t>=this.getRowCount()||t<0)return i;for(var o=e.length-1-this.defaultColCnt;o>=0;o--){var s=!1,r=this.getCellInfo(o);if(!0!==r.options.skipKeyMove){if(this.options.readOnlyTabIgnore&&(s=this.___getEditReadOnly(t,o)),(this.options.ignoreNonEditableCell||this.options.senseReader)&&(s=this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o)),this.options.senseReader&&"radio"==r.options.inputType&&this.getCellData(t,o)!=r.options.trueValue){var a=this.getCheckedIndex(r.colID);a?s=a[0]!==t:0!=t&&(s=!0)}var n;if("custom"==r.options.inputType&&(n=r.cellManagerHashByRowIndex[this.dataList.getRealRowIndex(t)]),(this.options.senseReader&&this.___getEditReadOnly(t,o)||this._getEditDisabled(t,o))&&("user"==r.options.inputType||"link"==r.options.inputType||n&&"link"==n.options.inputType))if(t<this.rowIndex)s=!0;else{var l=this.data_td_list[o+(t>=this.rowIndex?t-this.rowIndex:t)*this.oneRowDataLength],h=l.getElementsByTagName("a");0==h.length&&(h=l.getElementsByTagName("input")),s=0==h.length}if(this.isColMerge&&this.cellInfoHash[this.tdIdList[o]].options.colMerge){var d=this._dataList.getCellData(t-1,o),c=this.upperGroupingTest(t,o);d==this._dataList.getCellData(t,o)&&c&&(s=!0)}if(this.hiddenRowObj.length>0&&!this._getRowVisible(t)&&(s=!0),this.getMerged(t,o)&&!this.cellMergeInfo[t+"_"+o]&&(s=!0),!this.hiddenList[o+this.defaultColCnt]&&!s){i=o;break}}}return i},y.prototype.moveHorizontal=function(t,e,i,o){if("false"==this.options.focusMove||"vertical"==this.options.focusMove){o=t.charCode?t.charCode:t.keyCode;if(!this.options.senseReader)return!1;if(9!=o)return!1}var s,r=this.getLastFocusedCell(),n=r.focusedRowIndex,l=r.focusedColIndex,h=(this.colIndexInfo.body.colInfo.colIndexArr,this._getRealColIndex("body",this.tdIdList[l])+this.defaultColCnt),d=this.colIndexInfo.body.colInfo.colIndexMatch,c=this.columnOrder,p=this.colIndexes.bodyColInfo.trIndexArr,g=p[l+this.defaultColCnt],m=!!t&&9==t.keyCode,f=!!t&&(9==t.keyCode||13==t.keyCode),b=!!t&&t.shiftKey,y=(e=e||"right",0==t||t&&!0===t.byApi);s=1==this.options.moveKeyEditModeAll&&y?!!o&&(37==o||39==o):!!t&&(37<=t.keyCode&&t.keyCode<=40),r.bTrIndex&&(g=r.bTrIndex);var v=null,w=n;if(this.options.focusMultiRow){if("left"==e)var S=h-1,_=this.defaultColCnt-1,C=-1;else if("right"==e)S=h+1,_=d.length,C=1;else if("home"==e)S=this.defaultColCnt,_=d.length,C=1;else S=d.length-1,_=this.defaultColCnt-1,C=-1;for(var x=S;x!=_;x+=C){var I=d[x];if(!this.hiddenList[x]){for(var T=I.length-1;T>=0;T--){var k=I[T]-this.defaultColCnt;if(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))if(!this.getMerged(n,k)||this.cellMergeInfo[n+"_"+k])if(!0!==(D=this.getCellInfo(k)).options.skipKeyMove)if(p[I[T]]<=g&&("left"!=e&&"right"!=e||k!=l)){if((this.options.readOnlyTabIgnore||this.options.senseReader)&&this.___getEditReadOnly(n,k))break
;if(f&&(this.options.ignoreNonEditableCell||this.options.senseReader)&&(this.___getEditReadOnly(n,k)||this._getEditDisabled(n,k)))break;if(this.isColMerge&&this.cellInfoHash[this.tdIdList[k]].options.colMerge){var L=this.dataList.getCellData(n-1,k),A=this.upperGroupingTest(n,k);if(L==(H=this.dataList.getCellData(n,k))&&A)break}v=k;break}}if(null!==v)break}}}else{var D=this.getCellInfo(l),W=!1;this.options.senseReader&&"user"==D.options.inputType&&this.___getEditReadOnly(n,l)?W=!0:(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0);var q=this.getLocationRowCol(n,l),M=q.rowIndex,E=q.colIndex,R=this.htmlInfo.body.rowAttrArr.length;r.bMovedRow&&(M=r.bMovedRow);var N=M%R;if("left"==e)if(W&&this.focusedCellLinkIndex>0)S=E,_=c.length,C=1;else S=E-1,_=-1,C=-1;else if("right"==e)if(W&&this.focusedCellLinkIndex+1<this.focusedCellLinkLength)S=E,_=c.length,C=1;else{this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0;S=E+q.colSize,_=c.length,C=1}else if("home"==e){S=0,_=c.length,C=1;M-=N}else{S=c.length-1,_=0,C=-1;M=M+R-N-1}for(x=S;;x+=C){if(x==_)if("left"==e&&N>0)x=c.length-1,N--,M--;else{if(!("right"==e&&N<R-1))break;x=0,N++,M++}var F=this.getOriginalRowCol(M,x);if(!F.noLeftTop){C>0&&(C=F.colSize);k=F.colIndex;if(!this.hiddenList[x+this.defaultColCnt])if(!(this.hiddenRowObj.length>0)||this._getRowVisible(n))if(!this.getMerged(n,k)||this.cellMergeInfo[n+"_"+k])if(!(D=this.getCellInfo(k)).options.blockSelect&&!0!==D.options.skipKeyMove){if(this.options.senseReader&&"radio"==D.options.inputType&&this.getCellData(n,k)!=D.options.trueValue&&0!=n){if(this.getCheckedIndex(D.colID))continue;if(0!=n)continue}var O;if("custom"==D.options.inputType&&(O=D.cellManagerHashByRowIndex[this.dataList.getRealRowIndex(n)]),"left"!=e&&"right"!=e||(W||k!=l)){var B=!1;if(this.options.senseReader&&("user"==D.options.inputType||"link"==D.options.inputType||O&&"link"==O.options.inputType)){var P=this.data_td_list[k+(w-this.rowIndex)*this.oneRowDataLength],Y=P.getElementsByTagName("a");if(0==Y.length&&(Y=P.getElementsByTagName("input")),"right"==e)for(var V=0;V<Y.length;V++){if(document.activeElement==Y[V]){this.focusedCellLinkIndex=V;break}this.focusedCellLinkIndex=-1}else if("left"==e)for(V=Y.length-1;V>-1;V--){if(document.activeElement==Y[V]){this.focusedCellLinkIndex=V;break}this.focusedCellLinkIndex=-1}Y[0]&&("right"==e&&this.focusedCellLinkIndex!=Y.length-1||"left"==e&&0!=this.focusedCellLinkIndex)&&(B=!0)}if(m&&this.___getEditReadOnly(n,k)&&(this.options.readOnlyTabIgnore||this.options.senseReader)){if(!("user"==D.options.inputType||"link"==D.options.inputType||O&&"link"==O.options.inputType)||!this.options.senseReader){if(!this.options.senseReader||"a"!==D._realInputType&&"button"!==D._realInputType)continue;v=k;break}if(!1===Y)continue}if(this.___getEditReadOnly(n,k)||this._getEditDisabled(n,k))if(f&&(this.options.ignoreNonEditableCell||this.options.senseReader)){if(!m||1!=B)continue}else if(s&&(this.options.ignoreNonEditableCell||this.options.senseReader)){b=t&&t.shiftKey;if(!1===B&&!1===b)continue}if(this.isColMerge&&this.cellInfoHash[this.tdIdList[k]].options.colMerge){var H;L=this.dataList.getCellData(n-1,k),A=this.upperGroupingTest(n,k);if(L==(H=this.dataList.getCellData(n,k))&&A&&""!==L&&""!==H)continue}v=k;break}if(null!==v)break}}}}null===v&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0);var j=!1;if(t&&t.shiftKey&&s&&(j=!0),null!==v){if(i&&(this.___getEditReadOnly(w,v)||this._getEditDisabled(w,v))&&(i=!1),i&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){D=this.getCellInfo(v);a.Z.getBoolean(D.options.skipKeyMoveEditMode)&&(i=!1)}return this._setFocusedCell(n,v,i,{tabDirection:e,shifted:j}),(r=this.getLastFocusedCell()).bTrIndex=g,r.bMovedRow=M,!0}if("linear"==this.options.focusFlow){if(n>0&&b&&!s){var z=this.getRightMostFocusableColIndex(n-1);if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&null==z)for(;n>=0&&null==z;){this._setGridBorderNoRefresh=!0
;var G=-1;this.hasSubtotal&&(G-=this.getHasSubtotalCount(n-1)),"true"!==this.options.keepScrollForSenseReader&&!0!==this._isBrowserScroll()&&this.addGridScroll(G),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(z=this.getRightMostFocusableColIndex(n-1)),null==z&&(n-=1)}else for(;n>=0&&null==z;)n-=1,z=this.getRightMostFocusableColIndex(n-1);if(null==z)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),n-1<this.rowIndex){this._setGridBorderNoRefresh=!0;G=-1;this.hasSubtotal&&(G-=this.getHasSubtotalCount(n-1)),!0!==this._isBrowserScroll()&&this.addGridScroll(G),this._setGridBorderNoRefresh=!1,1==this.options.senseReader&&null!=z&&"all"!=this.options.visibleRowNum&&(z=this.getRightMostFocusableColIndex(n-1))}return"custom"==(D=this.getCellInfo(z)).options.inputType&&n-1>=0&&(w=n-1),i&&(this.___getEditReadOnly(w,z)||this._getEditDisabled(w,z))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)&&a.Z.getBoolean(D.options.skipKeyMoveEditMode)&&(i=!1),this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,z,i,{tabDirection:e,shifted:j}),this._setGridBorderNoRefresh=!1,!0}if("left"==e&&n>0&&!b){for(var Z=this.getRightMostFocusableColIndex(n-1);n>0&&null==Z;)n-=1,Z=this.getRightMostFocusableColIndex(n-1);if(null==Z)return this.editedCell&&this.editedCell.handleEndEdit(t),!1;if(n-1>0&&n==this.rowIndex){this._setGridBorderNoRefresh=!0;G=-1;!0!==this._isBrowserScroll()&&this.addGridScroll(G),this._setGridBorderNoRefresh=!1}if(i&&(this.___getEditReadOnly(w,Z)||this._getEditDisabled(w,Z))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){D=this.getCellInfo(Z);a.Z.getBoolean(D.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n-1,Z,i,{tabDirection:e,shifted:j}),this._setGridBorderNoRefresh=!1,!0}if("right"!=e||b){if("left"===e&&0===n&&m&&l-1==0){!0===(D=this.getCellInfo(l-1)).options.skipKeyMove&&u.f.preventDefault(t)}}else{if(n<this.getDataLength()-this._getVisibleLastIndex(1)){for(Z=this.getLeftMostFocusableColIndex(n+1);n!=this.dataList.getRowCount()&&null==Z;)n+=1,Z=this.getLeftMostFocusableColIndex(n+1);if(null==Z)return this.editedCell&&this.editedCell.handleEndEdit(t),1==this.options.moveKeyEditModeAll&&n==this.dataList.getRowCount()&&document.getElementById(this.id+"_gridend_div").focus(),!1;var U=this._getVisibleLastIndex(this.lastIndex+1);if(n+1>this.rowIndex+U-1){this._setGridBorderNoRefresh=!0;G=1;this.hasSubtotal&&(G+=this.getHasSubtotalCount(n+1)),1==this.options.senseReader&&"all"!=this.options.visibleRowNum&&(G+=n-(this.rowIndex+U-1),this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),!0!==this._isBrowserScroll()&&this.addGridScroll(G),this._setGridBorderNoRefresh=!1}if(i)"custom"==(D=this.getCellInfo(Z)).options.inputType&&(w=n+1),(this.___getEditReadOnly(w,Z)||this._getEditDisabled(w,Z))&&(i=!1);if(i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){var D=this.getCellInfo(Z);a.Z.getBoolean(D.options.skipKeyMoveEditMode)&&(i=!1)}return this._setGridBorderNoRefresh=!0,this._setFocusedCell(n+1,Z,i,{tabDirection:e,shifted:j}),this._setGridBorderNoRefresh=!1,!0}m&&!0===(D=this.getCellInfo(l+1)).options.skipKeyMove&&u.f.preventDefault(t)}}if(m&&null!=WebSquare.tabOrder[this.id])if(0===h&&0===n&&"left"==e){if(this.options.senseReader&&this.options.useStartEndDiv);else if(null!=WebSquare.tabOrder[this.id].preTabID&&(X=a.Z.getPreTabbableComp(this.id)))return X.focus(t),!0}else if(h===d.length-1&&n===this.getDataLength()-this._getVisibleLastIndex(1)&&"right"==e){var X
;if(this.options.senseReader&&this.options.useStartEndDiv);else if(null!=WebSquare.tabOrder[this.id].nextTabID)if(X=a.Z.getNextTabbableComp(this.id))return X.focus(t),!0}return this.editedCell?(this._setGridBorderNoRefresh=!0,this.editedCell.handleEndEdit(t),this._setGridBorderNoRefresh=!1):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(n,l,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!1},y.prototype.moveVertical=function(t,e,i){this.moveDirection="row";var o=this.getLastFocusedCell(),s=o.focusedRowIndex,r=o.focusedColIndex,n=this.getCellInfo(r).options.inputType,l=this.options.focusMoveByUpDownKey&&this.options.senseReader&&"radio"==n&&(38==t.keyCode||40==t.keyCode);if(("false"==this.options.focusMove||"horizontal"==this.options.focusMove)&&!l)return!1;var h,d=this.defaultColCnt,c=this.colIndexInfo.body.colInfo.colIndexArr,p=this.colIndexInfo.body.colInfo.colIndexMatch,g=this.colIndexes.bodyColInfo.trIndexArr,m=this.colIndexes.bodyColInfo.colSpanArr,f=this.colIndexes.bodyColInfo.rowSpanArr,b=c[r+d],y=g[r+d],v=m[r+d],w=f[r+d],S=r,_=s,C=(!!t&&t.keyCode,!!t&&9==t.keyCode);h=!!t&&(37<=t.keyCode&&t.keyCode<=40);var x=this.getDataLength()-this._getVisibleLastIndex(1),I=!1,T=!!(this.oneRowLength>1&&this.options.skipMultiRowMove);if(v&&o.bColIndex&&(b=o.bColIndex),"up"==e)var k=0==y?this.oneRowDataLength-1:r-1,L=-1,A=-1;else k=y+w==this.oneRowLength?0:r+1,L=this.oneRowDataLength,A=1;if(T){for(var D=f[0],W=(D=f[this.defaultColCnt],this.defaultColCnt+1);W<f.length;W++)if(D!=f[W]){T=!1;break}T&&(k=r)}var q=!1,M=!1;t&&t.shiftKey&&h&&(M=!0);for(W=k;W!=L;W+=A){var E=c[W+d],R=E+(m[W+d]?m[W+d]:1)-1,N=this._getArrayIndexOf(this.columnOrder,c[W+d]-d)+d;if(E<=b&&b<=R&&(!this.hiddenList[N]||q)){if(S=W,N=this._getArrayIndexOf(this.columnOrder,c[S]+1)+this.defaultColCnt,_==x&&"down"==e&&this.hiddenList[N]){q=!0,b++;continue}if(N=this._getArrayIndexOf(this.columnOrder,c[S]-1)+this.defaultColCnt,0==_&&"up"==e&&this.hiddenList[N]){q=!0,b--;continue}if("up"==e){for(var F=s;F>=0;F--)if(_=0==y?F-1:F,T&&(_=0==y?_:_-1),(!(this.hiddenRowObj.length>0)||this._getRowVisible(_))&&(!this.getMerged(_,S)||this.cellMergeInfo[_+"_"+S])){if(this.hiddenCellObj.length>0&&!1===this.getCellVisible(_,S))for(;!1===this.getCellVisible(_,S);){if(0===(Y=g[S+this.defaultColCnt])&&_>0){_--;for(var O=!1,B=S+1+d;B<c.length;B++)if(c[B]===r+d&&g[B]===this.oneRowLength-1){S=B-d,O=!0;break}if(!O)break}else if(Y>0){for(O=!1,B=S+d;B>=0;B--)if(c[B]===r+d&&g[B]===Y-1){S=B-d,O=!0;break}if(!O)break}}if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S))break;if(!this.options.ignoreNonEditableCell||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S))break;if(this.oneRowLength>1&&!T){var P=y;for(W=0;W<p[b].length;W++){if(0>--P&&(P=p[b].length-1,0!==y&&_--),S=p[b][P],_<0){G=!0;break}if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S)){G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}}}if(G){G=!1;break}}}else for(F=s;F<=x;F++)if(_=y+w==this.oneRowLength?F+1:F,T&&(_=y+w==this.oneRowLength?_:_+1),(!(this.hiddenRowObj.length>0)||this._getRowVisible(_))&&(!this.getMerged(_,S)||this.cellMergeInfo[_+"_"+S])){if(this.hiddenCellObj.length>0)for(;!1===this.getCellVisible(_,S);){var Y;if((Y=g[S+this.defaultColCnt])>=this.oneRowLength-1&&_<=x){_++;for(O=!1,B=d;B<c.length;B++)if(c[B]===r+d&&0===g[B]){S=B-d,O=!0;break}if(!O)break}else if(Y<this.oneRowLength-1){for(O=!1,B=S+1+d;B<c.length;B++)if(c[B]===r+d&&g[B]===Y+1){S=B-d,O=!0;break}if(!O)break}}if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S))break;if(M)break
;if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S))break;if(this.oneRowLength>1&&!T)for(P=y,W=0;W<p[b].length;W++){if(P++,p[b].length<=P&&(P=0,y+w!==this.oneRowLength&&_++),S=p[b][P],_>x){G=!0;break}if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}}if(G){G=!1;break}}break}}if(0<=_&&_<=x&&(s!=_||r!=S)){if(u.f.stopEvent(t),i&&(this.___getEditReadOnly(_,S)||this._getEditDisabled(_,S))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){var V=this.getCellInfo(S);a.Z.getBoolean(V.options.skipKeyMoveEditMode)&&(i=!1)}if(this.setFocusedCell2(_,S,i,{tabDirection:e,shifted:M})){if((o=this.getLastFocusedCell()).bColIndex=b,l){var H=this.tdIdList.length;this.data_td_list[(_-this.rowIndex)*H+S].firstChild.click()}return!0}return!1}if("linear"==this.options.focusFlow){var j=!1;if((-1==_&&"up"==e&&0==r||_==x+1&&"down"==e&&null==c[r+d+1]||-1==_&&"up"==e&&-1!==p[0].indexOf(r)&&T||_==x+1&&"down"==e&&-1!==p[this.columnOrder.length-1].indexOf(r)&&T)&&(j=!0),!j&&(-1==_||_==x+1)){var z=this.getLastFocusedCell().focusedTd;if("text"!=(V=this.getCellInfo(z)).options.inputType||!V.options.embeddedInput||t.shiftKey&&h){var G=!1;if("up"==e&&-1==_&&S-1>-1){for(var Z=S-1;null!=c[Z+d]&&(!T||-1===p[c[c.length-1]].indexOf(Z));Z--)if(N=this._getArrayIndexOf(this.columnOrder,Z)+this.defaultColCnt,!this.hiddenList[N]){for(var U=x;U>-1;U--){if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(U,Z)&&!this._getEditDisabled(U,Z)){_=U,S=Z,G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(U,Z)&&!this._getEditDisabled(U,Z)){_=U,S=Z,G=!0;break}if(this.oneRowLength>1&&!T){_=U,S=Z;var X=c[Z+d];for(P=y,W=0;W<p[X].length;W++){if(0>--P&&(P=p[X].length-1),S=p[X][P],_<0){G=!0;break}if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}}}if(G)break}if(G)break}}else if("down"==e&&_==x+1)for(Z=S+1;null!=c[Z+d]&&(!T||-1===p[c[d]].indexOf(Z));Z++)if(N=this._getArrayIndexOf(this.columnOrder,Z)+this.defaultColCnt,!this.hiddenList[N]){for(U=0;U<=x;U++){if(h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(U,Z)&&!this._getEditDisabled(U,Z)){_=U,S=Z,G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(U,Z)&&!this._getEditDisabled(U,Z)){_=U,S=Z,G=!0;break}if(this.oneRowLength>1&&!T){_=U,S=Z;for(X=c[Z+d],P=y,W=0;W<p[X].length;W++){if(P++,p[X].length<=P&&(P=0),S=p[X][P],h&&this.options.ignoreNonEditableCell&&this.options.ignoreNonEditableCellTabEnter&&this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}if(!this.options.ignoreNonEditableCell&&!this.options.senseReader||!this.___getEditReadOnly(_,S)&&!this._getEditDisabled(_,S)){G=!0;break}}}if(G)break}if(G)break}if(G){if(u.f.stopEvent(t),i&&(this.___getEditReadOnly(_,S)||this._getEditDisabled(_,S))&&(i=!1),i&&this.isKeyPressed&&(this.options.keyMoveEditMode||this.options.moveKeyEditMode||this.options.moveKeyEditModeAll)){V=this.getCellInfo(S);a.Z.getBoolean(V.options.skipKeyMoveEditMode)&&(i=!1)}return!!this.setFocusedCell2(_,S,i,{tabDirection:e,shifted:M})&&((o=this.getLastFocusedCell()).bColIndex=b,!0)}C&&WebSquare.tabOrder[this.id]&&WebSquare.tabOrder[this.id].nextTabID&&(I=!0)}else{var K=this.getInput(V,z);this.showFakeInput(K),this.fakeInput.setValue(K.getValue()),this.F2Mode=!1,
K.select()}}}return this.editedCell?this.editedCell.handleEndEdit(t):this.options.moveKeyEditMode&&(this._setGridBorderNoRefresh=!0,this._setFocusedCell(s,r,!1),this._setGridBorderNoRefresh=!1),this.moveDirection=null,!0===I&&"focusNextTabOrder"},y.prototype.moveEnd=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(var e=a.Z.getDataPrefix("colIndex");this._moveRight(t););for(var i=!1;!i;){for(var o=!0,s=this.getLastFocusedCell(),r=parseInt(s.focusedTd.getAttribute(e)),n=parseInt(s.focusedTd.getAttribute("colSpan")||1),l=0;l<n;l++)if(0==this.hiddenList[r+l]){o=!1;break}1==o?this._moveLeft(t):i=!0}this.fixScrollRightDirection()}},y.prototype.moveHome=function(t){if("false"!=this.options.focusMove&&"vertical"!=this.options.focusMove){for(var e=a.Z.getDataPrefix("colIndex");this._moveLeft(t););for(var i=!1;!i;){for(var o=!0,s=this.getLastFocusedCell(),r=parseInt(s.focusedTd.getAttribute(e)),n=parseInt(s.focusedTd.getAttribute("colSpan")||1),l=0;l<n;l++)if(0==this.hiddenList[r+l]){o=!1;break}1==o?this._moveRight(t):i=!0}this.fixScrollLeftDirection()}},y.prototype.movePageUp=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(this.rowIndex<=0)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e),this.focusedCell&&this.focusedCell.pop();var s,r=this._getScrollRowIndex(this.rowIndex);return(s=r<this.lastIndex?-1:this._getVisibleRowIndex(r-this.lastIndex))>=0?(this.setTopRowIndex(s),this._setFocusedCell(i+this.rowIndex,o)):(this.setTopRowIndex(0),this._setFocusedCell(0,o)),!0}}},y.prototype.movePageDown=function(t){if("false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove&&!(null!=this.lastTopRowIndex&&this.rowIndex>=this.lastTopRowIndex)){var e=this.getLastFocusedCell(),i=e.focusedRowIndex;if(!(i<0)){i-=this.rowIndex;var o=e.focusedColIndex;this._applyFocusedCellOut(e);var s=this.rowIndex+this.lastIndex,r=this.getDataLength(),a=r-this._getVisibleLastIndex(1),n=r-this._getVisibleLastIndex(this.lastIndex+1);return s<=n?(this.setTopRowIndex(s),this._setFocusedCell(Math.min(i+this.rowIndex,a),o)):(this.setTopRowIndex(n),this._setFocusedCell(a,o)),!0}}},y.prototype.findTd=function(t,e,i){for(var o=0,s=a.Z.getDataPrefix("colIndex");null!=t;){for(var r=a.Z.first(t);null!=r;){var n=parseInt(r.getAttribute(s));if(n<=e&&e<=n+r.colSpan-1&&o<=i&&i<=o+r.rowSpan-1)return r;if(n>e)break;r=a.Z.next(r)}if(t=a.Z.next(t),o>i)break;o++}},y.prototype.pasteFromClipboard=function(){for(var t=this.parseClipboardExcel(),e=this._getFocusedRowIndex(),i=this.getFocusedColumnIndex(),o=[],r=0;r<t.length;r++){o.push([]);for(var a=0;a<t[0].length;a++)o[r][a]=this.dataList._getCellData(r+e,this.getColumnID(a+i))}for(r=0;r<t.length;r++)for(a=0;a<t[0].length;a++){var n=t[r][a];try{n=n.wq_trim();var l=this.getCellInfo(a+i),h=this.mainGrid.getColumnOption(l.options.col_id,"dataType");"number"==h&&(n=n.replace(/[^(\-0-9)]/g,""))}catch(t){s.Y.printStackTrace(t,null,this)}1!=this.___getEditReadOnly(r+e,a+i)&&1!=this._getEditDisabled(r+e,a+i,!0)&&this.dataList.__setCellData(r+e,this.getColumnID(a+i),n)}var d=this;WebSquare.historyManager.set("grid","grid1",{focusRowIndex:e,focusColIndex:i,data2d:o},{onRestore:function(t){for(var o=t.data2d,s=0;s<o.length;s++)for(var r=0;r<o[0].length;r++){var a=o[s][r];d.dataList.__setCellData(s+e,this.getColumnID(r+i),a)}}})},y.prototype.parseClipboardExcel=function(){for(var t=[],e=window.clipboardData.getData("Text").split("\n"),i=0;i<e.length-1;i++){var o=e[i].split("\t");t.push(o)}return t},y.prototype.copyToClipboard=function(){var t=this.options.copyAmount;if(t||("cell"==this.options.focusMode?t="cell":"both"!=this.options.focusMode&&"row"!=this.options.focusMode||(t="row")),"cell"==t){for(var e=this.getDataLength(),i=this.getTotalCol(),o=[],s=0;s<this.focusedCell.length;s++){var r=(c=this.focusedCell[s]).focusedRowIndex,a=c.focusedColIndex;null==o[r]&&(o[r]=[]),
o[r][a]=c,e>r&&(e=r),i>a&&(i=a)}var n=[];for(s=e;s<o.length;s++){var l=[];if(void 0!==(u=o[s]))for(var h=i;h<u.length;h++){o[s][h]?l.push(this.dataList._getCellData(s,this.getColumnID(h))):l.push("")}n.push(l.join("\t"))}window.clipboardData.setData("Text",n.join("\n"))}else if("row"==t){var d=[];for(s=0;s<this.focusedCell.length;s++){var c;d[(c=this.focusedCell[s]).focusedRowIndex]=1}var u=[];for(var r in d)u.push(r);u.sort((function(t,e){return parseInt(t)>parseInt(e)?1:-1}));for(o=[],s=0;s<u.length;s++){r=u[s];var p=this.getRowData(r);o.push(p.join("\t"))}window.clipboardData.setData("Text",o.join("\n"))}},y.prototype.getEditCursorEnable=function(t,e){try{if(!t)return!1;var i=u.f.getTarget(t);if(!i)return!1;var o=i.tagName.toUpperCase();if(("INPUT"==o||"TEXTAREA"==o)&&null!=i.value){if(a.Z.isIEAllVersion("6 7 8")){var r=document.selection.createRange();if(r.text.length>0)return!0;r.moveStart("character",-i.value.length);var n=r.text.length;if("left"===e){if(n>0)return!0}else if("right"===e&&n<i.value.length)return!0;return!1}if(null!=i.selectionStart&&i.selectionStart!=i.selectionEnd)return!0;if("left"===e){if(i.selectionEnd>0)return!0}else if("right"===e&&i.selectionEnd<i.value.length)return!0}return!1}catch(t){return s.Y.printStackTrace(t,null,this),!1}},y.prototype._moveKeyEdit=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),!(this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.moveKeyEditMode))return;var o=this.uuid,r=WebSquare.idCache[t];r["_"+e]=r[e];var a=i.itemTable,n=i.skipVertical,l=i.skipHorizontal,h=this.options.moveKeyEditModeAll||!0===i.oldMode&&this.options.arrowMove;r[e]=function(t,i){this["_"+e]&&this["_"+e](t,i);var s=WebSquare.idCache[o],r=!1;if(s&&s.editedCell){var d=s.getCellInfo(s.editedCell.colID);(s.options.keyMoveEditMode||s.options.moveKeyEditMode||s.options.moveKeyEditModeAll)&&d.options.skipKeyMoveEditMode&&(r=!0);var c=!1;!r||"select"!=d.options.inputType&&"autoComplete"!=d.options.inputType&&"checkcombobox"!=d.options.inputType||(c=!0)}var p={37:"left",38:"up",39:"right",40:"down"}[t.keyCode];if(p)switch(p){case"left":case"right":if(!0!==l&&(a||0==this.getValue().length||h&&!s.getEditCursorEnable(t,p)))s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"&&s.moveHorizontal({byApi:!0},p,!0,t.keyCode),u.f.stopEvent(t);break;case"up":case"down":if(!0!==c&&!0!==n&&(!a||0==this.getItemCount()||this._keyIndex<0||this._keyIndex===this.getItemCount())){if(s._fireOnviewchange(s.editedCell.id,"handleEndEdit",[t],{checkFunc:function(t){return t+""!="false"}})+""!="false"){var g=!0!==r;s.moveVertical({},p,g,t.keyCode)}u.f.stopEvent(t)}}}}catch(t){s.Y.printStackTrace(t,null,this)}},y.prototype._directEdit=function(t){var e=this.focusedCell[this.focusedCell.length-1],i=this.getCellInfo(e.focusedTd);if("textarea"!==i.options.inputType||!this._getEditDisabled(e.focusedRowIndex,e.focusedColIndex)&&!this.___getEditReadOnly(e.focusedRowIndex,e.focusedColIndex)){var o,s=i.comp,r=this.getInput(i);r&&(r.reFocus=!0,r._focusStatus="cancel");var a=s.render.tagName.toLowerCase();(o="input"===a||"textarea"===a?s.render:s.render.getElementsByTagName("input")[0])&&WebSquare.text.setCaretPos(o,o.value.length);var n=t.keyCode,l=null;t.key&&1===t.key.length?l=t.key:!t.shiftKey&&65<=n&&n<=90?(n+=32,l=String.fromCharCode(n)):l=n>=96||n<65?{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"}[n+""]||"":String.fromCharCode(n),"autoComplete"===i.options.inputType?(s.dom.input.value=l,s.inputKeyDown(t)):r&&r.setValueNM(l)}};var v=i(467),w=i(4756),S=i.n(w),_=i(1304),C=function(t){};C.prototype.initializeDrawController=function(){this.data_td_list=[],this.data_num_td_list=[],this.data_status_td_list=[],this.all_data_td_list=[]},C.prototype.showAllBodyTR=function(t){t=t||"";for(var e=0;e<this.drawedRowLength;e++)this._setRowDisplay(e,t)
;this.lastDisplayedRow="none"===t?-1:this.drawedRowLength-1},C.prototype._setRowDisplay=function(t,e){for(var i=null,o=0;o<this.oneRowLength;o++)(i=this.dataRowList[this.oneRowLength*t+o])&&(i.style.display=e,"none"==e?this.__addClass(i,"w2grid_hidedRow"):this.__removeClass(i,"w2grid_hidedRow"));return i},C.prototype.drawColumnData=function(t,e){var i=this._dataList.rowPosition,o=!1;t=this.getColumnIndex(t);var s=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex,r=this.getCellInfo(t);if(r.dataComp){var a=this.modelControl.getDataComp(r.dataComp);null!=a&&"linkedDataList"===a.initializeType&&null!=a.conditionInfo&&a.conditionInfo.filterInfo.useRef&&"number"==typeof i&&(o=!0)}for(var n=0;n<=s;n++){var l=n+this.rowIndex;e&&r.select&&r.hasRef&&(r.select.itemArr=r.getRefItemArr(l),r.select.setSelectOptions(),r.select.setValueNM(r.mainGrid._dataList._getData(l,t))||r.mainGrid._dataList._setData(l,t,"")),o&&n===i||this.drawCellData(n,l,t)}o&&this.drawCellData(i,i+this.rowIndex,t)},C.prototype._setMouseOverTr=function(t,e){this.setOverClass(e,"overTd",!0)},C.prototype._setMouseOutTr=function(t,e){this.setOverClass(e,"overTd",!1)},C.prototype.setOverClass=function(t,e,i){for(var o=t.parentNode,s=a.Z.getDataPrefix("trIndex"),r=a.Z.getDataPrefix("row_out_style"),n=parseInt(o.getAttribute(s));n>0;)n--,o=a.Z.prev(o);do{for(var l=a.Z.first(o);null!=l&&!(l.offsetLeft>this.render.offsetWidth);)l.offsetWidth>0&&(i?(l.setAttribute(r,l.style.cssText),l.style.cssText=l.style.cssText+";background-color:"+this.options.rowMouseOverColor):l.style.cssText=l.getAttribute(r)),l=a.Z.next(l);o=a.Z.next(o)}while(null!=o&&"0"!=o.getAttribute(s))},C.prototype.changeFocusedCellPosition=function(t,e,i,o){try{if(0==this.focusedCell.length)return;o=o||{};this.applyFocusedCellOut();for(var r=0;r<this.focusedCell.length;r++){var a=this.focusedCell[r].focusedRowIndex-t,n=this.focusedCell[r].focusedColIndex,l=null;if(this.options.focusDefaultColumn&&n<0&&this.defaultColCnt&&("row"===this.options.focusMode||"both"===this.options.focusMode))l=this.all_data_td_list[this.defaultColCnt+n+a*(this.oneRowDataLength+this.defaultColCnt)];else if(this.options.fixedRow>0&&this.options.fixedRow>this.focusedCell[r].focusedRowIndex||this.options.lastFixedRow>0&&this.focusedCell[r].focusedRowIndex>this.lastIndex-this.options.lastFixedRow)l=this.data_td_list[n+this.focusedCell[r].focusedRowIndex*this.oneRowDataLength],this.applyFocusedCellIn(l,e);else if(a<0||a>this.maxRowLength+this.hiddenRowObj.extraRow)l=null;else if(l=this.data_td_list[n+a*this.oneRowDataLength]){var h=this.getCellInfo(n);i&&h.options.embeddedInput&&(e=!1),this.applyFocusedCellIn(l,e,o)}this.focusedCell[r].focusedTd=l}}catch(t){s.Y.printStackTrace(t)}},C.prototype.setTRClass=function(t,e,i){for(var o=t.parentNode,s=a.Z.getDataPrefix("trIndex"),r=parseInt(o.getAttribute(s));r>0;)r--,o=a.Z.prev(o);do{for(var n=a.Z.first(o);null!=n;)i?this.addClass(n,e):this.removeClass(n,e),n=a.Z.next(n);o=a.Z.next(o)}while(null!=o&&"0"!=o.getAttribute(s))},C.prototype.setEditMode=function(t){try{var e=a.Z.getDataPrefix("tdIndex"),i=a.Z.getDataPrefix("col_id"),o=a.Z.getDataPrefix("colMerged"),n=t.getAttribute(i);if(null==n||""==n.wq_trim())return;var l,h=parseInt(t.getAttribute(e)),d=parseInt(h/this.realRowDataLength);if(this.options.fixedRow>0&&this.options.fixedRow>d)l=d;else if(this.options.lastFixedRow>0&&d>this.lastIndex-this.options.lastFixedRow){l=this.getDataLength()-1-(this.lastIndex-d)}else l=d+this.rowIndex;var c=a.Z.getBoolean(r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/colIdToColIndex/@value"))?this.getColumnIndex(t.getAttribute(i)):t.getAttribute(i),p=this.getCellInfo(c);if(!p.options.colMergeEdit&&"1"==t.getAttribute(o))return;if(p.options.embeddedInput||this.groupbyStatus.grouped)return;if("custom"===p.options.inputType&&!p.internal){var g=this.getRealRowIndex(l);if((f=p.cellManagerHashByRowIndex[g])&&f.options.embeddedInput)return}var m=this.__getEditReadOnly(t,l)
;if(m)return this.editMode=!1,void(p.options.showReadOnly&&(this.editMode=!0,p.showReadonly(t,l)));if(this._getEditDisabled(l,c))return this.editMode=!1,void(p.options.showReadOnly&&(this.editMode=!0,p.showReadonly(t,l)));if(0!=u.f.fireEvent(this,"onbeforeedit",l,c,this.dataList._getCellData(l,this.getColumnID(c)))&&null==this.editedCell)if(this.editMode=!0,this.setCellEditMode(t,l),p.comp)p.comp.setReadOnly(m);else if("custom"===p.options.inputType&&!p.internal){var f;g=this.getRealRowIndex(l);(f=p.cellManagerHashByRowIndex[g]).comp&&f.comp.setReadOnly(m)}}catch(t){s.Y.printStackTrace(t)}},C.prototype.getEditReadOnly=function(t,e){var i=a.Z.getDataPrefix("col_id"),o=t.getAttribute(i);return this._getEditReadOnly(e,o)},C.prototype.getReadOnly=function(){var t=a.Z.getBoolean,e=arguments[0];if("grid"==e||0==arguments.length)return t(this.options.readOnly);if("row"==e)return t(this.getRowReadOnly(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnReadOnly(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellReadOnly(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this._getEditReadOnly(o,i)}},C.prototype.setReadOnly=function(){try{var t=arguments[0];if(1==arguments.length||"grid"==t){var e=arguments[arguments.length-1],i=this.options.readOnly,o=a.Z.getBoolean(e);if("clear"==e?(this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],2===arguments.length?(o=!1,this.options.readOnly=o):3===arguments.length&&(o=a.Z.getBoolean(arguments[arguments.length-2]),this.options.readOnly=o)):this.options.readOnly=o,0!=this.getDataLength()&&(i!==o||"clear"===e)){var r=this.options.showLastRow&&!this.hasSubtotal?this.lastIndex+1:this.lastIndex;for(var n in this.cellInfoHash){"clear"===e&&(this.cellInfoHash[n].options.readOnly="");var l=this.getColumnIndex(n);if(!isNaN(l)){for(var h=0;h<=r;h++)this.drawCellData(h,h+this.rowIndex,l);this.applyColumnStyleOptions(l)}}}this.options.readOnly?this.addClass(" w2grid_readonly_outer"):this.removeClass("w2grid_readonly_outer")}else"row"==t?this.setRowReadOnly(arguments[1],arguments[2]):"column"==t?this.setColumnReadOnly(arguments[1],arguments[2]):"cell"==t&&this.setCellReadOnly(arguments[1],arguments[2],arguments[3])}catch(t){s.Y.printStackTrace(t)}},C.prototype._getEditReadOnly=function(t,e,i){try{e=this.getColumnID(e);var o=this.getCellReadOnly(t,e,i),r=this.cellInfoHash[e];if(null==r)return;var n=a.Z.getBoolean;if(o+""!="")return n(o);var l=this.options.readOnlyPriority,h=r.options.readOnly,d=this.getRowReadOnly(t,i);return"column"==l&&""!==h?n(h):"row"==l&&""!==d?n(d):h+""=="true"||d+""=="true"||h+""!="false"&&d+""!="false"&&(this.options.readOnly+""!=""&&n(this.options.readOnly))}catch(t){s.Y.printStackTrace(t)}},C.prototype.__getEditReadOnly=function(t,e){var i=a.Z.getDataPrefix("col_id"),o=t.getAttribute(i);return this.___getEditReadOnly(e,o)},C.prototype.___getEditReadOnly=function(t,e,i){var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)?this.dataList.getRealRowIndex(t):this._getGroupbyDisplayRowIndex(t);return this._getEditReadOnly(o,e,i)},C.prototype.getDisabled=function(){var t=a.Z.getBoolean,e=arguments[0];if("grid"==e||null==e)return t(this.options.disabled);if("row"==e)return t(this.getRowDisabled(arguments[1]));if("column"==e){var i=this.getColumnID(arguments[1]);return t(this.getColumnDisabled(i))}if("cell"==e){var o=arguments[1];i=this.getColumnID(arguments[2]);return t(this.getCellDisabled(o,i))}if("all"==e){o=arguments[1],i=this.getColumnID(arguments[2]);return this.getEditDisabled(o,i)}},C.prototype.setDisabled=function(t,e,i,o){try{for(var r=[t,e,i,o];r.length>0&&null==r[r.length-1];)r.pop();var n=r[0],l=1==r.length||"grid"==n,h=2==r.length&&"boolean"==typeof r[0]&&"boolean"==typeof r[1],d=a.Z.getDataPrefix("header_id");if(l||h){var c=l?r[r.length-1]:r[0];if((c=a.Z.getBoolean(c))!=this.options.disabled){this.options.disabled=c;var u=this.getElementById(this.id+"_dataLayer")
;!l&&c||(u.disabled=c),(h||!c&&u.disabledW2)&&(u.disabledW2=c),c?(this.addClass(u,"w2grid_disabled"),this.addClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowXHidden(),this.setOverflowYHidden())):(this.removeClass(u,"w2grid_disabled"),this.removeClass("w2grid_disabled_outer"),this.options.disabledScrollHidden&&(this.setOverflowX(),!0===this._isHybridScroll()?this.setScrollYHeightHybrid():this.setOverflowY()));for(var p=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),g=0;g<p.length;g++){var m=p[g].getAttribute(d),f=this.headerObj[m];f?f.setDisabled?f.setDisabled(c):f.render?f.render.disabled=c:f.disabled=c:p[g].disabled=c}for(var b in this.cellInfoHash){var y=this.cellInfoHash[b];y&&"checkbox"===y.options.inputType&&(""===y.options.disabled?(y._oriDisabled=y.options.disabled,y.options.disabled=c):""===y._oriDisabled&&(y.options.disabled=c));var v=this.getColumnIndex(b);this.drawColumnData(v),this.applyColumnStyleOptions(v)}}return c}"row"==n?this.setRowDisabled(r[1],r[2]):"column"==n?this.setColumnDisabled(r[1],r[2]):"cell"==n&&this.setCellDisabled(r[1],r[2],r[3])}catch(t){s.Y.printStackTrace(t)}},C.prototype.getEditDisabled=function(t,e,i){return this._getEditDisabled(this._getGroupbyGroupedRowIndex(t),e,i)},C.prototype._getEditDisabled=function(t,e,i){try{var o=-1,r="";"number"==typeof e?(o=e,r=this.cellIdList[e]):(o=this.bodyIdColIndexMap[e],r=e);var a=-1;if(!0===i)a=t;else if(this._linkedDataList)a=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var n=!0;for(var l in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[l]){a=this._dataList.filteredRowIndexArr[t],n=!1;break}n&&(a=this.groupbyStatus.groupedRowIndexArr[t])}else a=this._dataList.filteredRowIndexArr[t];var h=this.cellInfoHash[r]||{options:{}},d=this.cellDisabledArr[a*this.oneRowDataLength+o];if(!0!==d&&!1!==d){var c=h.options.disabled,u=this.rowDisabledArr[a],p=this.options.disabledPriority;!0!==u&&!1!==u&&(u=""),d="column"===p&&""!==c?c:"row"===p&&""!==u?u:c+""=="true"||u+""=="true"||c+""!="false"&&u+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}return d}catch(t){s.Y.printStackTrace(t)}},C.prototype.getElemRowIndex=function(t){var e=a.Z.getDataPrefix("tdIndex"),i=parseInt(t.getAttribute(e));return parseInt(i/this.realRowDataLength)+this.rowIndex},C.prototype.notifyDataChanged=function(t){try{if("active"!=this.activeStatus)return;void 0!==t&&null!=t||(t={}),this.initHeightCompleted=!1,this.checkResize();var e=t&&t.append||!1,i=t&&t.keepTop||!1,o=t&&t.refreshScroll||!1,r=t&&t.refreshInstance||!1,a=i&&this.rowIndex>=0?this.rowIndex:0,n=t&&!0===t.gridData,l={sortIcon:this.options.hideSortIconOnNoData};if(this.delayedDraw({rowIndex:a}))return!0===r&&this._refreshInstance(void 0,e),void this.changeCount++;if(this._mergeRefresh(),!0===this._isBrowserScroll())return t.sync=!i,this.changeCount++,this._refreshDataChanged(t);var h=this._setGridBorderNoRefresh||!1;if(this._setGridBorderNoRefresh=!0,this.options.senseReader&&this.rowIndex<=0)return this.changeCount++,this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),o&&"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.drawFooter(),this.drawHeader(void 0,l),this.senseReaderMode=!1,this.displayNoResultMessage(),this.displayFixedColumnLine(),this._setGridBorderNoRefresh=h,!0===r&&this._refreshInstance(void 0,e),void this.refreshAdaptive({simple:!0});if(e&&!this.loadFlag)return this.drawFooter(),this.drawHeader(void 0,l),void(!0===r&&this._refreshInstance(void 0,e));if(this.changeCount++,!0===e&&"true"===this.options.keepScrollForSenseReader&&!0===this.options.senseReader&&this.options.visibleRowNum>0)var d=this.drawDataTable(0,{keepScrollTop:!0});else d=this.drawDataTable(0);for(var c in o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),0==d&&(e&&!o&&(this.lastTopRowIndex=null,this.setScrollYHeight()),
this.hiddenCellObj.length>0?(this.rowIndex=a,!0!==n&&this._setCellVisibleRefresh()):this.drawData(a)),this.displayNoResultMessage(),this.displayFixedColumnLine(),this.drawFooter(),this.drawHeader(void 0,l),this._setGridBorderNoRefresh=h,this.refreshAdaptive({simple:!0}),this.cellInfoHash)this.cellInfoHash[c].refreshCell();if(this.hasCustomInputType)for(var u=0;u<this.cellIdList.length;u++){var p=this.cellInfoHash[this.cellIdList[u]];p&&p.options&&"custom"===p.options.inputType&&p.options.typeGetter&&p.refreshCellManagerHash()}!0===r&&this._refreshInstance(void 0,e)}catch(t){s.Y.printStackTrace(t)}},C.prototype.notifyCellChanged=function(t,e,i,o){if(this.changeCount++,!this.delayedDraw({})){var s=this._getTrRowIndex(t);if(e=this.getColumnIndex(e),this._drawRowStatus(s,t),this._drawCellStatus(s,t,e),!0!==i&&(this.drawCellData(s,t,e),this.groupbyStatus.grouped&&this.options.groupbyDisplayRowIndex)){for(var r=t+1,n=s+1;"number"==typeof this.groupbyStatus.groupedRowIndexArr[r]&&r<this.groupbyStatus.groupedRowIndexArr.length;)r++,n++;if("object"===(0,l.A)(this.groupbyStatus.groupedRowIndexArr[r])&&"footer"===this.groupbyStatus.groupedRowIndexArr[r].type){var h=this.dataList.getRealRowIndex(r);if(null!=h){var d=this.all_data_td_list[n*this.realRowDataLength];d&&this.drawGroupData(d,h,n)}}}var c=this.getColumnID(e);this._refreshExpression(t,c);var u=this.labelColumnAssArr[c];if(null!=u)for(var p=0;p<u.length;p++){var g=this.getColumnIndex(u[p]);this.drawCellData(s,t,g)}this.displayNoResultMessage(),this.hasSubtotal&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex)),this.drawFooter(c),this.drawHeader(c),o||this._setCheckboxHead(c),"never"!==this.options.mergeCellsFixedCols&&a.Z.setTimeout((function(){var t={fixedCols:!0,fixedRows:!1};this._mergeCells(this.options.mergeCellsFixedCols,t,{type:"mergeCellsFixedCols"})}),{key:this.id+"notifyCellChanged_mergeRefresh",caller:this,delay:200})}},C.prototype._getTrRowIndex=function(t){try{var e=t;if(this.rowIndex>=0){var i=this.getDataLength();this.options.fixedRow>0&&this.options.fixedRow>t||(this.options.lastFixedRow>0&&e>=i-this.options.lastFixedRow?e=this.lastIndex-(i-1-e):e-=this.rowIndex)}return e}catch(t){s.Y.printStackTrace(t)}},C.prototype._refreshExpression=function(t,e){try{var i=this._getTrRowIndex(t),o=this.expressionAssArr[e];if(null!=o){var r=this.searchExpression(o);for(var a in r){var n=this.getColumnIndex(a);this.drawCellData(i,t,n),this.drawFooter(n),this.drawHeader(n)}}}catch(t){s.Y.printStackTrace(t)}},C.prototype.searchExpression=function(t){for(var e={},i=[t];i.length>0;)for(var o=i.pop(),s=0;s<o.length;s++)if(e[o[s]]=!0,this.expressionAssArr[o[s]]){var r=this.expressionAssArr[o[s]];if(r.length>1)i.push(r);else null!=this.expressionAssArr[r]&&i.push(r),e[r]=!0}return e},C.prototype.notifyRowChanged=function(t,e){if(this.changeCount++,!this.delayedDraw({rowIndex:t})){if(!0===this._isBrowserScroll())return this._refreshDataChanged(e);var i={sortIcon:this.options.hideSortIconOnNoData};if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),this.drawFooter(),this.drawHeader(void 0,i),this.senseReaderMode=!1,this.displayNoResultMessage(),this.displayFixedColumnLine(),void this.refreshAdaptive({simple:!0});if(-1==this.rowIndex)this.drawDataTable(0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(e&&!0===e.keepScrollTop)this.lastTopRowIndex=null,this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0});else{this.lastTopRowIndex=null;var o=this._dataList.options.depthColumn?this.getDrawCount()+this.rowIndex:this.getDataLength(),s=(t=t||this.rowIndex)-this.rowIndex,r=this.rowIndex;if(0<=s&&s<=this.lastIndex&&(this.rowIndex<=0||this.rowIndex+this.lastIndex<o))if(this.isDrillDown&&!this.drilldown.isOpen(t)){
var n=("linkedDataList"===this.drilldown.mode?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr).length-(t+1),l=this.lastIndex-s-n;r=h=l<=0?this.rowIndex:(h=this.rowIndex-l)>0?h:0}else r=this.rowIndex;else if(0<=s&&s<=this.lastIndex||s<0){var h;(h=this.rowIndex-1)+this.lastIndex>=o&&(h=o-this.lastIndex-1),r=h=h>0?h:0}this.hiddenCellObj.length>0?(this.rowIndex=r,a.Z.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200})):this.drawData(r,0)}this.displayNoResultMessage(),this.displayFixedColumnLine(),this.hasSubtotal&&this.refreshSubtotalRow(t),this.drawFooter(),this.drawHeader(void 0,i),this.refreshAdaptive({simple:!0})}},C.prototype.notifyRowInserted=function(t){if(t=parseInt(t,10),this.changeCount++,!this.delayedDraw({rowIndex:t})){if(!0===this._isBrowserScroll())return this._refreshDataChanged();var e={sortIcon:this.options.hideSortIconOnNoData};if(this.options.senseReader&&this.rowIndex<=0)return this.senseReaderMode=!0,this.setDataTable(),this.drawData(0),"all"!==this.options.visibleRowNum&&(this.lastTopRowIndex=null,this.setScrollYHeight()),this.drawFooter(),this.drawHeader(void 0,e),this.senseReaderMode=!1,this.displayNoResultMessage(),this.displayFixedColumnLine(),void this.refreshAdaptive({simple:!0});if(this.lastTopRowIndex=null,-1==this.rowIndex)0==this.drawDataTable(0)&&this.drawData(0,0),(this.options.fixedColumn>0||this.options.fixedRightColumn>0)&&this.arrangeOverflowXScroll(!0);else if(""!==this.options.visibleRowNum||this.options.initFixedHeightByRowNum>0)this.setDataTable(),this.drawData(0);else{var i=t-this.rowIndex,o=this.getElementById(this.id+"_scrollY_div");if(i<0){var s=this.getElementById(this.id+"_scrollY_div");this.scrollEvent=!1,s.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0)}else(o.offsetHeight>=o.scrollHeight||i<=this.lastIndex)&&(this.hasSubtotal&&(i=0),this.drawData(this.rowIndex,i))}0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight();var r=this._getVisibleLastIndex(this.lastIndex+1);if(this.rowIndex+r-1<t){this.scrollEvent=!1,(s=this.getElementById(this.id+"_scrollY_div")).scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t);var n=this._getEpsilon(),l=Math.round(s.scrollTop)+n,h=this._getVisibleRowIndex(parseInt(l/this.oneRowScrollHeight));this.hiddenCellObj.length>0?(this.rowIndex=h,a.Z.setTimeout(this._setCellVisibleRefresh,{key:this.id+"_setCellVisibleRefresh",caller:this,delay:200}),this.lastTopRowIndex=null):this.drawData(h)}this.displayNoResultMessage(),this.displayFixedColumnLine(),this.drawFooter(),this.drawHeader(void 0,e),this.refreshAdaptive({simple:!0})}},C.prototype.makeNoResultMessage=(0,v.A)(S().mark((function t(){var e,i,o,r,a,n,l;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=document.getElementById(this.id+"_noresult"),i=this.options.noResultMessageURL,o=this.getOriginalID(),r=o+"_noResultMessageFrame",WebSquare.util.getComponentById(r,this.scope_id)){t.next=15;break}return a=this.options._scope_obj_uuid,!0,n={className:"noResultDiv",scope:"true",pluginName:"wframe",src:i,preload:!0},l=_.o.create(r,n,null,this.scope_obj,a,true),t.next=12,_.o.initAsync();case 12:l.writeTo(e),l.activate(),this.addControl(l);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),s.Y.printStackTrace(t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])}))),C.prototype.calculateBottomFilterBoxHeight=function(t){try{var e=document.getElementById(this.id+"_foot_table"),i=t?t.offsetHeight:0,o=document.getElementById(this.id+"_main_div");if(e){if(!t||"function"!=typeof t.getBoundingClientRect||!o||"function"!=typeof o.getBoundingClientRect)return i;i+=(t.getBoundingClientRect().top||0)-(o.getBoundingClientRect().bottom||0)}return i}catch(t){s.Y.printStackTrace(t)}},C.prototype.createWrapperDiv=function(t,e){try{var i=document.createElement("div"),o=this.id+"_noresult_wrapper",r=document.getElementById(this.id+"_noresult");t=t||0,
e=e||0;var a=this._groupbyFilterBoxObj(t,e);return t=a.topHeight,e=a.bottomHeight,i.style.top=t+"px",i.style.bottom=e+"px",i.id=o,i.classList.add("w2grid_noresult_wrapper"),r.parentNode.insertBefore(i,r),i.appendChild(r),i}catch(t){s.Y.printStackTrace(t)}},C.prototype._getGroupZoneHeight=function(){try{var t=0;return this.options.groupbyZone&&this.groupbyZoneStatus.groupbyZoneRender&&(t=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),t}catch(t){s.Y.printStackTrace(t)}},C.prototype._groupbyFilterBoxObj=function(t,e){try{var i={topHeight:t,bottomHeight:e},o=document.getElementById(this.id+"_groupbyFilterBox_div");if(o&&this.options.groupbyFilterBox&&this.options.groupbyFilterBoxLocation){var r=o.offsetHeight;"top"===this.options.groupbyFilterBoxLocation?i.topHeight+=r-2:"bottom"===this.options.groupbyFilterBoxLocation&&(i.bottomHeight+=this.calculateBottomFilterBoxHeight(o))}return i}catch(t){s.Y.printStackTrace(t)}},C.prototype.displayNoResultMessage=function(){try{var t="removed"!==this.options.noResultMessageExclude||0==this.removed,e=document.getElementById(this.id+"_noresult");if(e&&this.options.noResultMessageVisible&&t&&0==this.initFlag&&0==this.getDataLength()){var i=document.getElementById(this.id+"_main_div"),o=i.offsetHeight,r=document.getElementById(this.id+"_body_table"),a=this.options.noResultMessageCenter||this.options.useNoResultMessageURL?r.offsetHeight:r.offsetHeight+3,n=document.getElementById(this.id+"_foot_table"),l=0;n&&(l=n.offsetHeight);var h=o-a-l;if(!0!==this.options.useNoResultMessageURL){var d=document.getElementById(this.id+"_noresult");e.innerHTML=this.options.noResultMessage,e.style.display="block";var c=parseInt(WebSquare.style.getStyle(d,"margin-top"),10)||0,u=parseInt(WebSquare.style.getStyle(d,"margin-bottom"),10)||0,p=d.offsetHeight+c+u,g=document.getElementById(this.id+"_scrollX_div").offsetHeight;if(h<=0);else if(h<=p)d.style.top=a+c+"px",this.setSize(i,a+l+p+g+c+u);else{var m=document.getElementById(this.id+"_head_table"),f=0;if(m&&m.childNodes)for(var b=0;b<m.childNodes.length;b++)"string"==typeof m.childNodes[b].tagName&&"TR"===m.childNodes[b].tagName.toUpperCase()&&f++;if(this.options.noResultMessageCenter){var y=this._getGroupZoneHeight(),v=this.id+"_noresult_wrapper",w=document.getElementById(v);if(!w){var S=a+y,_=l+g;w=this.createWrapperDiv(S,_)}this.options.noResultMessageStylePriority||d.classList.add("w2grid_noresult_message_default")}else if((f>1||this.options.groupbyZone)&&!this.options.noResultMessageStylePriority){var C;C=this._noResultMessageDivTop.indexOf("px")>0?o-parseInt(this._noResultMessageDivTop):o*parseInt(this._noResultMessageDivTop)/100;y=0;this.options.groupbyZone&&this.groupbyZoneStatus.groupbyZoneRender&&(y=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),d.style.top=parseInt(f*this.oneRowHeight/2+C)+y+"px"}}}else{var x=this.makeNoResultMessage(),I=this.id+"_noresult";x.then(function(t){if(0===this.getDataLength()){var e=document.getElementById(I);if(e)if(document.getElementById(this.id+"_main_div").offsetHeight>0){var i=document.getElementById(this.id+"_body_table"),o=this.options.noResultMessageCenter||this.options.useNoResultMessageURL?i.offsetHeight:i.offsetHeight+3,s=document.getElementById(this.id+"_foot_table"),r=s?s.offsetHeight:0;o+=this._getGroupZoneHeight();var a=this._groupbyFilterBoxObj(o,r);o=a.topHeight,r=a.bottomHeight,e.style.top=o+"px",e.style.bottom=r+"px",e.style.display=""}}}.bind(this))}}else e.style.display="none";this.removed=!1,this.delayedDrawObj||this.removeAllFinish||(this.initFlag=!1)}catch(t){s.Y.printStackTrace(t)}},C.prototype.displayFixedColumnLine=function(){try{if(!this.options.fixedColumnLineDiv)return;var t,e=this.getElementById(this.id+"_body_table"),i=this.getElementById(this.id+"_dataLayer"),o=this.getElementById(this.id+"_head_table").offsetHeight,r=this.getRowCount(),n=this.getElementById(this.id+"_fixedColumnDiv"),l=Math.min(e.offsetHeight,i.offsetHeight);if(this.options.fixedColumn>0){
var h=this.getElementById(this.id+"_scrollX_left"),d=parseInt(a.Z.getStyleProperty(n,"border-right-width"),10)||0;"tbody"===this.options.fixedColumnLineDivStart?(t=0==r?0:l-o,n.style.top=o+"px"):t=0==r?o:l;var c=h.offsetWidth;n.style.left=c-(d-1)/2+"px",n.style.height=t+"px",n.style.display="block"}else n.style.display="none";var u=this.getElementById(this.id+"_fixedRightColumnDiv");if(this.options.fixedRightColumn>0){var p=this.getElementById(this.id+"_scrollX_fixedRight");d=parseInt(a.Z.getStyleProperty(u,"border-right-width"),10)||0;"tbody"===this.options.fixedColumnLineDivStart?(t=0==r?0:l-o,u.style.top=o+"px"):t=0==r?o:l;c=e.offsetWidth-p.offsetWidth;u.style.left=c-(d-1)/2-1+"px",u.style.height=t+"px",u.style.display="block"}else u.style.display="none"}catch(t){s.Y.printStackTrace(t)}},C.prototype.delayedDraw=function(t){return(0==this.resizeObj.width||0==this.resizeObj.height)&&(this.delayedDrawObj||(this.delayedDrawObj={}),this.delayedDrawObj.redraw=!0,t.hasOwnProperty("rowIndex")?this.delayedDrawObj.rowIndex=t.rowIndex:t.hasOwnProperty("subTotalVisible")?this.delayedDrawObj.subTotalVisible=t.subTotalVisible:t.hasOwnProperty("newColumnOrder")?this.delayedDrawObj.newColumnOrder=t.newColumnOrder:t.hasOwnProperty("columnNodeset")&&(this.delayedDrawObj.columnNodeset={colIndex:t.columnNodeset.colIndex,nodeset:t.columnNodeset.nodeset,label:t.columnNodeset.label,value:t.columnNodeset.value}),!0)},C.prototype.delayedAction=function(){this.startedDisplayNone=!1,this.setPreAction(),this.getRowCount&&this.getRowCount()>0&&this.notifyDataChanged(),this.options.focusOnSetData&&this._setFocusedCell(0,0);var t=WebSquare.BootLoader.fullViewed||!1,e=a.Z.fullViewed||!1;t||e||this.checkAdaptiveGridType()&&(""==this.options.adaptive&&0==Object.keys(this.hideThresholdObj).length||(this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive(),a.Z.isMobile()&&this.options.fixAdaptive||this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)))),this.delayedDrawObj=null,this.initFlag=!1},C.prototype.setRedrawStatus=function(t){if(!this.startedDisplayNone||"stop"!=t)if("stop"==t)this.delayedDrawObj||(this.delayedDrawObj={});else{this.setDataLayerPosition(),this.scrollX_right.scrollLeft=this.resizeObj.scrollLeft,this.getElementById(this.id+"_scrollY_div").scrollTop=this.resizeObj.scrollTop,this.handlerResize_drawInitializer(),this._handleScrollX();for(var e=!1,i=0;i<this.colWidthList.length;i++)if(this.colWidthList[i].toString().indexOf("*")>-1){e=!0;break}if((this.options.autoFit||e)&&this.autoFitFunc(),this.delayedDrawObj.redraw){this.lastTopRowIndex=null,this.setDataTable(),this.setTrRowTable(),this.setColIndexInfo();var o=this.delayedDrawObj.rowIndex||0,s=o,r=this.getDataLength();if(r-this.drawedRowLength<s&&(s=r-this.drawedRowLength)<0&&(s=0),"all"!==this.options.visibleRowNum)for(;this.hiddenRowObj.extraRow<this.hiddenRowObj.length;)this._addHiddenRow(this.drawedRowLength+this.hiddenRowObj.extraRow);if(!0===this._isHybridScroll())this._drawDataHybrid(s,{redraw:!0}),null!=this.delayedDrawObj.subTotalVisible&&this.delayedDrawObj.subTotalVisible!==this.hasSubtotal&&this.setSubtotalVisible(this.delayedDrawObj.subTotalVisible);else{this.drawData(s),null!=this.delayedDrawObj.subTotalVisible&&this.delayedDrawObj.subTotalVisible!==this.hasSubtotal?this.setSubtotalVisible(this.delayedDrawObj.subTotalVisible):this.setScrollYHeight();var a=this.rowIndex+this.lastIndex,n=this._getScrollRowIndex(o);if(a<o||n<o){this.scrollEvent=!1;var l=this.getElementById(this.id+"_scrollY_div");l.scrollTop=this.oneRowScrollHeight*n;var h=this._getVisibleRowIndex(parseInt(l.scrollTop/this.oneRowScrollHeight));this.drawData(h)}}this.drawFooter(),this.drawHeader(),this.displayNoResultMessage(),this.displayFixedColumnLine();var d="never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols;for(var c in d||(this._mergeRefresh(),
this.dynamicMergeHTML()),this.cellInfoHash)this.cellInfoHash[c].refreshCell();if(this._drawGroupbyZone(),void 0!==this.delayedDrawObj.newColumnOrder&&this.delayedDrawObj.newColumnOrder.length>0&&this.setColumnOrder(this.delayedDrawObj.newColumnOrder),void 0!==this.delayedDrawObj.columnNodeset){var u=this.delayedDrawObj.columnNodeset;this.setColumnNodeSet(u.colIndex,u.nodeset,u.label,u.value)}}this._setVisibleRowNumFix(),this.delayedDrawObj=null,this.initFlag=!1,0===this.getDataLength()&&this.displayNoResultMessage()}},C.prototype._refreshDataChanged=function(t){try{void 0!==t&&null!=t||(t={}),this._hybridRefreshCnt++;var e={sortIcon:this.options.hideSortIconOnNoData};this.setDataTable();var i=t.keepTop||t.keepScrollTop||!0===this._isHybridScroll();if(!0!==i&&this.drawData(0),this.drawFooter(),this.drawHeader(void 0,e),this.displayNoResultMessage(),t.refreshInstance&&this._refreshInstance(void 0,t.append),!0===i){var o=this.uuid;!0===t.sync||this._hybridRefreshCnt<this._hybridRefreshMax?(!0===t.sync?this._hybridRefreshCnt=0:(this._hybridRefreshCnt++,a.Z.setTimeout((function(){WebSquare.idCache[o]._hybridRefreshCnt=0}),{key:this.id+"_refreshDataChanged_reset",delay:100})),this._refreshScrollYHybrid(t)):a.Z.setTimeout((function(t){var e=WebSquare.idCache[o];e._refreshScrollYHybrid(t),e._hybridRefreshCnt=0}),{key:this.id+"_refreshDataChanged",delay:50,args:[t]})}else this._autoFitRefreshNative();return void this.refreshAdaptive({simple:!0})}catch(t){s.Y.printStackTrace(t)}};var x=function(){};x.prototype.setScrollYHeight=function(t){if(!0!==this._isNativeScroll()){if(!0===this._isHybridScroll())return this.setScrollYHeightHybrid(t);void 0!==t&&null!=t||(t={});var e=this.getDataLength(),i=this.rowIndex,o=!0===t.noDraw,s=!0===t.keepScrollTop,n=this.getElementById(this.id+"_size_y"),l=this.getElementById(this.id+"_scrollY_div"),h=n.parentNode.offsetHeight;0==h&&(h=parseInt(this.getStyle("height")));var d=this._getScrollRowIndex(i);if(-1==i||0==d&&d+this._getVisibleLastIndex(this.lastIndex+1)==e){var c=!0;if(this.hasSubtotal&&this.drawedSubtotal.length>0){var u=this.drawedSubtotal[this.drawedSubtotal.length-1];u.length>0&&(u.rowIndex+1!=e||"none"===u[u.length-1].style.display||this._getLastSubtotalCount()>this.drawedSubtotal.length)&&(c=!1)}else this.hasSubtotal&&0==this.drawedSubtotal.length&&this.lastSubtotalRow&&e>0&&(c=!1);if(c)return"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),void(0!==n.offsetHeight&&(n.style.height="0px",this.handlerResize_drawInitializer()))}var p=l.scrollTop;if(!0!==t.skipResize){var g;if("number"==typeof t.restRowCnt)g=t.restRowCnt;else if(""!==this.options.visibleRowNum)this.options.senseReader&&"all"===this.options.visibleRowNum||this.isDrillDown?g=e-(this.lastIndex+1):(g=e-this.drawedRowLength,this._dynamicVisibleRowNum>0&&(g=e-this._dynamicVisibleRowNum),this.options.initFixedHeightByRowNum>-1&&(g+=this._getLastSubtotalCount())),g<0&&(g=0),g=Math.max(0,g-this._getHiddenRowCount());else if(this.lastTopRowIndex&&this.lastTopRowIndex>0)g=this._getScrollRowIndex(Math.ceil(this.lastTopRowIndex));else{var m=this.getElementById(this.id+"_head_table"),f=this.dataLayerHeight-m.offsetHeight,b=parseInt(f/this.oneRowHeight),y=this.drawedRowLength;this.oneRowLength>1&&(y=Math.ceil(this.drawedRowLength/this.oneRowLength)),b+(this.isMobile?0:1)<y&&(y=b+(this.isMobile?0:1)),g=this.options.fixHeight||this.hasSubtotal?0===i?e-(this.lastIndex+1)>0?e-(this.lastIndex+1):1:e-b>1?e-b:1:this.options.senseReader?e-(this.lastIndex+1)>0?e-(this.lastIndex+1):1:e-y+1>1?e-y+(this.isMobile?0:1):1,g=Math.max(0,g-this._getHiddenRowCount())}var v=h+this.oneRowScrollHeight*g;if(v>r.I.domMaxHeight&&this.oneRowScrollHeight>1&&(this.oneRowScrollHeight=Math.max(Math.floor((r.I.domMaxHeight-h)/g),1),v=h+this.oneRowScrollHeight*g),h=l.offsetHeight,
v<=1e6&&"table"!=n.tagName.toLowerCase())n.style.height=v+"px";else if(v<=1e6)l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,(n=this.getElementById(this.id+"_size_y")).style.height=v+"px";else if(r.I.browserCheck.ieAllVersion&&!this.isIE6or7||a.Z.isSpartan()){var w=[];for(w.push("<table id='"+this.id+"_size_y' style='border-collapse:collapse; border-spacing:0px;height:0px; position:absolute; top:0px; left:0px; width:18px'><tbody>");v>1e6;)w.push("<tr style='height:1000000px'><td></td></tr>"),v-=1e6;w.push("<tr style='height:"+v+"px'><td></td></tr></tbody></table>"),l.innerHTML=w.join(""),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")}else"table"==n.tagName.toLowerCase()&&(l.innerHTML=this.getScrollY(),this.dom[this.id+"_size_y"]=null,n=this.getElementById(this.id+"_size_y")),r.I.browserCheck.moz?n.style.height=v+1+"px":n.style.height=v+"px"}else h=l.offsetHeight;if(!0!==t.skipScrollEnd){var S=n.offsetHeight;S<1e6&&(S=parseInt(n.style.height,10));var _=S-h,C=this._getEpsilon(),x=Math.min(Math.round(p)+C,_),I=this._getScrollMaxRowIndex();if(I>e-this._getHiddenRowCount())this._applyScrollEnd(I,{noDraw:!0});else{var T=this.options.syncWithScrollTrack?Math.ceil:Math.floor;if(_>=0&&T.call(this,x/this.oneRowScrollHeight)!=this._getScrollRowIndex(i)){this.lastTopRowIndex&&this.lastTopRowIndex==i&&(i=this.lastTopRowIndex+1);var k=this._getScrollRowIndex(i);o&&l.scrollTop!=this.oneRowScrollHeight*k&&(this.scrollEvent=!1),x=Math.min(this.oneRowScrollHeight*k,_),l.scrollTop=x;var L=this._getVisibleRowIndex(parseInt(x/this.oneRowScrollHeight));this.bScrollTop=L,this.rowIndex=L}!s&&_>0&&_==x&&this._applyScrollEnd(this.rowIndex),this.lastScrollYTop=l.scrollTop,!0!==t.skipResize&&this.handlerResize_drawInitializer(),this.isMobile&&this.setIScrollY()}}else this.handlerResize_drawInitializer()}},x.prototype.setScrollYHeightHybrid=function(t){try{if(void 0!==t&&null!=t||(t={}),!0===t.skipResize)return;var e,i,o,r,a,n=document.getElementById(this.id+"_main_div"),l=this.getFooterHeight(),h=!0===this._hasHybridScroll();if(h&&(e=this._getHybridVisibleHeightInfo(),o=this.getDataLength(),a=r=this._getHybridRowNum(),this.oneRowLength>1&&(a*=this.oneRowLength),h=(a-=e.cnt)>=1),h){var d=Math.floor(o/r),c=e.height;e.cnt>0&&(c=Math.round(c*(a+e.cnt)/a));var u=o-d*r,p=0;if(u>0){var g=r-u;this.oneRowLength>1&&(g*=this.oneRowLength);var m=this._getHybridVisibleHeightInfo(g);p=m.height,m.cnt>0&&(p=Math.round(p*g/(g-m.cnt))),d++}var f=document.getElementById(this.id+"_head_table").offsetHeight,b=0,y=!1;if(!0===t.keepHybridHash){y=!0;for(var v=0;v<d;v++)"number"==typeof this._hybridScrollHash[v]?b+=this._hybridScrollHash[v]:"number"==typeof this._hybridScrollHeight?b+=this._hybridScrollHeight:(b+=c,y=!1)}else b=c*d;i=b-p+f+l+this._getHybridScrollXHeight()+1,this._hybridScrollLastTop=NaN,this._hybridScrollDupHeight=p,!0!==y&&(this._hybridScrollHeight=c),e.cnt>0&&(this._hybridScrollHeight=Math.round(e.height*(a+e.cnt)/a))}else{var w=document.getElementById(this.id+"_body_table");i=Math.max(w.offsetHeight,n.offsetHeight-1)+l+this._getHybridScrollXHeight()+1,this._hybridScrollHeight=i,this._hybridScrollLastTop=i,this._hybridScrollDupHeight=0}document.getElementById(this.id+"_size_y").offsetHeight!==i&&!0!==t.keepHybridHash&&(this._hybridScrollHash={}),this._setHybridSizeY(i,t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._checkScrollEnd=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=t.offsetHeight;o<1e6&&(o=parseInt(t.style.height,10));var r=o-i,a=this._getEpsilon(),n=e.scrollTop,l=Math.min(Math.round(n)+a,r);return r>0&&r===l}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._checkScrollEnd2=function(){try{var t=this.getElementById(this.id+"_size_y"),e=this.getElementById(this.id+"_scrollY_div"),i=e.offsetHeight,o=parseInt(t.style.height,10)-i,r=this._getEpsilon(),a=e.scrollTop,n=Math.min(Math.round(a)+r,o)
;return o<=0?-1:n<3?1:n<o?0:2}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._applyScrollEnd=function(t,e){try{if(""!==this.options.visibleRowNum||this.lastTopRowIndex>0||0===this.lastTopRowIndex||this.groupbyStatus.grouped)return 0;if(this.hiddenCellObj.length>0)return 0;if(isNaN(t)&&(t=this.rowIndex),void 0!==e&&null!=e||(e={}),this._applyScrollEndCnt){if(this._applyScrollEndCnt>4)return;this._applyScrollEndCnt++}else this._applyScrollEndCnt=0;var i=0,o=this.getDataLength(),r=!1;if(this.hasSubtotal){if(this.drawedSubtotal.length>0){var a=this.drawedSubtotal[this.drawedSubtotal.length-1];if(a.rowIndex==o-1)"none"!=a[a.length-1].style.display&&(r=!0)}}else r=!0;var n=this.lastIndex+1,l=this._getVisibleLastIndex(n);if(t+l==o&&r)!0!==this._onSetHeight&&(this.lastTopRowIndex=t);else{var h=o-l;i=this._getScrollRowIndex(h)-this._getScrollRowIndex(t);var d=this.getElementById(this.id+"_size_y");if(this.hasSubtotal&&!r&&!0!==this._onSetHeight)if(this.struct.subtotalArr.length>1&&""===this.options.visibleRowNum&&!0!==e.noDraw){var c=this._getDrawedRowCount();if(c>0)return this.options.initFixedHeightByRowNum=c,this.options.visibleRowNum=c,this.drawedRowLength=c,this.lastTopRowIndex=null,this.drawedRowLength=this.options.initFixedHeightByRowNum,void this.drawData(this.rowIndex,0);i+=this.struct.subtotalArr.length}else i+=this.struct.subtotalArr.length;if(0!==i){this.lastTopRowIndex=null;var u=d.offsetHeight;u<1e6&&(u=parseInt(d.style.height,10)),d.style.height=u+this.oneRowScrollHeight*i+"px",!0!==e.noDraw&&this.drawData(Math.max(t+i,0)),this.handlerResize_drawInitializer()}}return this._applyScrollEndCnt=0,i}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.addGridScroll=function(t){try{var e=this.rowIndex+t;e=(e=e<0?0:e)>=this.getDataLength()-this.lastIndex?this.getDataLength()-this.lastIndex:e,this.scrollEvent=!1,this.checkScrollEnd=!0,this.drawData(e,0)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.handleScrollY=function(t,e){try{if(!0===this._isBrowserScroll())return;var i=this.getElementById(this.id+"_scrollY_div").scrollTop;if(i==this.bScrollY)return;if(this.bScrollY=i,0===this.getElementById(this.id+"_size_y").offsetHeight)return;var o=this._getEpsilon(),r=Math.round(i)+o,n=this._getVisibleRowIndex(parseInt(r/this.oneRowScrollHeight)),l=this.getDataLength(),h=this._checkScrollEnd();if(this.scrollEvent&&(null!=this.editedCell&&this._fireOnviewchange(this.editedCell.id,"handleScrollY",[t]),this.bScrollTop!=n||this.rowIndex!=n)){this.hasClass(document.activeElement,this.options.bodyTdClass)&&document.activeElement.blur&&document.activeElement.blur();var d="async",c=e&&!0===e.changedHeight;(c||h)&&(d="sync",c||this.handleResize()),this.drawData(n,null,d)}this.bScrollTop=n;var p=this._getVisibleLastIndex(this.lastIndex+1);if(0==i&&this.checkScrollStart&&(this.skipScrollStartEvent||(this.scrollEvent=!0,this.checkScrollStart=this.options.alwaysTriggerScrollStart,u.f.stopEvent(t),a.Z.setTimeout((function(){u.f.fireEvent(this,"onscrollstart")}),{key:this.id+"_scrollstart",caller:this,delay:150}))),(this.scrollEvent||this.checkScrollEnd)&&this.options.loadCount>0&&this.loadFlag){var g=n+p-1;l-this.options.loadCount-1<=g&&null==this.loadCheck[l]&&(this.skipScrollEndEvent||(this.loadCheck[l]=!0,this.scrollEvent=!0,this.loadFlag=!1,u.f.stopEvent(t),a.Z.setTimeout((function(){u.f.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150})))}else(this.scrollEvent||this.checkScrollEnd)&&0==this.options.loadCount&&!0===h&&(!this.scrollEvent||this._applyScrollEnd(this.rowIndex)<=0)&&(u.f.stopEvent(t),a.Z.setTimeout((function(){u.f.fireEvent(this,"onscrollend")}),{key:this.id+"_scrollend",caller:this,delay:150}));if(this.skipScrollStartEvent=!1,this.skipScrollEndEvent=!1,this.scrollEvent=!0,this.checkScrollEnd=!1,1==this.options.syncScroll&&this.options.syncScrollId)for(var m=this.options.syncScrollId.split(","),f=0;f<m.length;f++){var b=a.Z.getComponentById(m[f],this.scope_id)
;b&&this.getRowCount()==b.getRowCount()&&b.setScrollTop(i)}u.f.fireEvent(this,"onscrolly",t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.handleScrollYHybrid=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"number"==typeof e.maxRepeat&&e.maxRepeat<=0)return;!0!==e.skipEndEdit&&this._endEdit();var i=this._getHybridVisibleHeightInfo();this._setHybridVisibleHeight(this._hybridRowIndex,i);var o=document.getElementById(this.id+"_scrollY_div"),r=document.getElementById(this.id+"_size_y"),a=this.getDataLength(),n=a;this.oneRowLength>1&&(n*=this.oneRowLength);var l=this._getHybridTrCount(),h=this.getFooterHeight(),d=document.getElementById(this.id+"_body_table");if(n<=l){this._setHybridYPosition(o.scrollTop),this._hybridScrollYPos=0;var c=o.scrollHeight-o.offsetHeight;return void(c>0&&o.scrollTop>=c&&u.f.fireEvent(this,"onscrollend"))}var p=o.scrollTop;"number"==typeof e.scrollTop&&(p=e.scrollTop);var g=0,m=p,f=this._getHybridLastIndex(),b=this._hybridScrollDupHeight;if(m>0&&m>=this._hybridScrollLastTop)g=f,m=p-this._hybridScrollLastTop+this._hybridScrollDupHeight;else{for(;m>0&&g<f;){var y=null==this._hybridScrollHash[g]?this._hybridScrollHeight:this._hybridScrollHash[g];if(!(m>=y))break;m-=y,g++}g===f&&(m+=b+this._getHybridLastSubtotalHeight()+i.borderHeight)}var v=p-m,w=p-v;if(this._setHybridYPosition(w),g!==this._hybridRowIndex){var S=this._getHybridRowNum(),_=Math.min(g*S,a-S);this.drawData(_),this._hybridRowIndex=g;var C=null==this._hybridScrollHash[g]?this._hybridScrollHeight:this._hybridScrollHash[g];if(this._setHybridVisibleHeight(),C!==this._hybridScrollHash[g])return"number"==typeof e.maxRepeat?e.maxRepeat--:e.maxRepeat=10,e.scrollEvent=!0,this.handleScrollYHybrid({},e)}var x=0;0!==(x=g===f?r.offsetHeight-d.offsetHeight-v-h-this._getHybridScrollXHeight()-1:b-this._hybridScrollDupHeight)&&(v+=x,this._setHybridYPosition(w-x)),this._hybridScrollYPos=v,"scroll"!==t.type&&"onscroll"!==t.type&&!0!==e.scrollEvent||(u.f.fireEvent(this,"onscrolly",t),o.scrollTop>=o.scrollHeight-o.offsetHeight&&u.f.fireEvent(this,"onscrollend")),this._setHybridDataLayerTop()}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._refreshScrollYHybrid=function(t){try{var e=this._getHybridRowNum(),i=this.getDataLength(),o=Math.max(i-e,0),r=Math.min(this._hybridRowIndex*e,o);this._hybridRowIndex=Math.ceil(r/e),this.drawData(r),this.setScrollYHeightHybrid(t),this._autoFitRefreshNative();this.handleScrollYHybrid({},t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.drawDataTable=function(t,e){try{null==t&&(t=this.rowIndex),-1==t&&(t=0);var i=this.drawedRowLength;return this.setDataTable(),this.headerTds=null,this.footerTds=null,this.drawedRowLength!=i&&(this.setColIndexInfo(),e&&e.keepScrollTop?this.drawData(this.rowIndex,0,null,null,{keepScrollTop:!0}):this.drawData(t,0)),this.drawedRowLength-i}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.drawData=function(t,e,i,o,a){try{r.I.clearTimer(this.id+"_drawData"),r.I.clearTimer(this.id+"_completiveDrawData"),r.I.clearTimer(this.id+"_adjustDraw");i=i||"sync";var n=!0;this.options.senseReader&&(n=!1);var l=this.getDataLength();t=Math.min(t,l),l>0&&(t=Math.max(0,t));var h=a?a.noApplyRealFocus:void 0;this.changeFocusedCellPosition(t,n,!0,{linkNoFocus:!0});var d=this.maxRowLength;if(this.rowIndex=t,null!=this.editedCell&&this.editedCell.handleEndEdit(null,o),this.subtotalHidden(e?{startRowIndex:e+this.rowIndex}:null),-1!=this.rowIndex&&"sync"!=i&&"all"!==this.options.visibleRowNum||this.startedDisplayNone)e=this.fastDrawData(e,{scroll:!0}),r.I.setTimer((function(e){r.I.setTimer(this.completiveDrawData,{key:this.id+"_completiveDrawData",caller:this,delay:120,args:[e],callback:function(e){r.I.setTimer((function(){this.startedDisplayNone||(this.adjustDraw(e),this._setGridBorder(),this._setCheckboxHead()),d!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}),{key:this.id+"_adjustDraw",caller:this})}})}),{key:this.id+"_drawData",caller:this,delay:1,args:[e]});else{
var c=this.completiveDrawData(e,{noApplyRealFocus:h});this.adjustDraw(c,a),this._setGridBorder(),this._setCheckboxHead(),d!=this.maxRowLength&&this.changeFocusedCellPosition(t,n)}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.fastDrawData=function(t,e){try{var i=this.options.initFixedHeightByRowNum>-1;i&&(void 0===e||null==e?e={skipSubtotal:!0}:e.skipSubtotal=!0),this.options.measureTime&&r.I.measureTime((function(t){var e=t.aver,i=parseInt(1e3/e*10,10)/10;p.v.printLog("Id : "+this.id+", time : "+e+"ms   ,fps : "+i)}),{key:this.id+"_measureDrawTime",caller:this});var o=this.rowIndex,a=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var n=this._getVisibleTrRowIndex(t,o),h=this.hiddenCellObj.length>0;if(a>0){0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);new Date;var d,c=1;h?(d=a,c=a):""===this.options.visibleRowNum?d=this._getVisibleTrRowIndex(this.drawedRowLength,o):("all"===this.options.visibleRowNum||(c=parseInt(this.options.visibleRowNum,10)-t),d=a);for(this._getVisibleTrRowIndex(this.options.drawLimitRow,o);n<d&&n+o<a&&c>0;n++){var u=!this.hiddenRowObj.length>0||this._getRowVisible(n+o);u&&!0===this.hiddenRowObj.init&&this._setRowDisplay(n,""),this.options.fixedRow>0&&this.options.fixedRow>n?this.fastDrawRowData(n,n,e):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.fastDrawRowData(n,n+o,e);var g=this.options.backgroundColorMode.toLowerCase();if("always"==g?"object"!=(0,l.A)(this.dataList.getRealRowIndex())&&(this.options.fixedRow>0&&this.options.fixedRow>n?this.applyRowStyleOptions(n):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||this.applyRowStyleOptions(o+n)):"full"==g&&"object"!=(0,l.A)(this.dataList.getRealRowIndex())&&(this.options.fixedRow>0&&this.options.fixedRow>n?(this.applyRowStyleOptions(n),this.setEvenOddBackground(n,n)):this.options.lastFixedRow>0&&n>this.lastIndex-this.options.lastFixedRow||(this.applyRowStyleOptions(o+n),this.setEvenOddBackground(n,o+n))),u?this.lastDisplayedRow<n&&!0!==this.hiddenRowObj.init&&(this._setRowDisplay(n,""),h||(this.lastDisplayedRow=n)):this._setRowDisplay(n,"none"),u&&""!==this.options.visibleRowNum)if(c--,i&&this.hasSubtotal&&c>=1)c-=this.drawSubtotalRow(n+1,n+o,{maxCount:c});if(h)for(var m=0;m<this.oneRowDataLength;m++){var f=n+o,b=this._getTdElem(n+o,m);if(b){var y=!0===this.hiddenCellObj[f+"_"+m];b.style.display=y?"none":""}}}}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),null!==this.lastTopRowIndex&&o>=this.lastTopRowIndex&&!0!==this.hiddenRowObj.init&&!h){for(m=n;m<=this.lastDisplayedRow;m++)this._setRowDisplay(m,"none");this.lastDisplayedRow=n-1}return this.options.mergeRefreshAlways&&this.dynamicMergeHTML(),!0===this.hiddenRowObj.init?t:n}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.completiveDrawData=function(t,e){try{!this.autofitDone&&this.options.autoFit&&this._setAutoFit();var i=this.getDataLength();t=t||0;!0===this.hiddenRowObj.init&&(t=0);var o=this.rowIndex,r=t-1,n=this.dataLayerHeight,l=this.hiddenCellObj.length>0;if(i>0){if(o=Math.max(0,o),this.rowIndex=o,!0===this.hiddenRowObj.init)this._applyRowVisible({applyStyle:!0,drawRow:!0}),r=this.lastIndex;else{var h=this.options.initFixedHeightByRowNum>-1;0==t&&o!=this.lastTopRowIndex&&""===this.options.visibleRowNum&&this.drawSubtotalRow(0,o-1);var d,c=this.drawedRowLength;this._dynamicVisibleRowNum>0&&(c=this._dynamicVisibleRowNum),h&&this.hasSubtotal&&this.drawedSubtotal&&(c-=this.drawedSubtotal.drawedRowLength),h&&(d={skipSubtotal:!0});for(var u=t;u<c&&u+o<i;u++){var p=u+this.rowIndex;if(this.options.fixedRow>0&&this.options.fixedRow>u?this.fastDrawRowData(u,u,d):this.fastDrawRowData(u,p,d),r=u,h&&this.hasSubtotal&&u<c-1)c-=this.drawSubtotalRow(u+1,p,{maxCount:c-u-1})}if(h&&this.hasSubtotal&&c>r+1&&(c-=this.drawSubtotalRow(0,o-1,{maxCount:c-r-1})),this.options.rowResize&&this.rowResized){var g=n-this.getElementById(this.id+"_head_table").offsetHeight,m=0
;for(u=0;u<this.dataRowList.length;u++){if(!(m<g)){r=u;break}m+=this.dataRowList[u].offsetHeight}}if("native"==this.options.drawType&&0!=t&&(r=this.getDataLength()-1),l){for(u=r+1;u<this.drawedRowLength+this.hiddenRowObj.extraRow;u++)this._setRowDisplay(u,"none");for(u=0;u<=r;u++)this._setRowDisplay(u,"")}else{for(u=r+1;u<=this.lastDisplayedRow+this.hiddenRowObj.extraRow;u++)this._setRowDisplay(u,"none");for(u=this.lastDisplayedRow+1;u<=r;u++)this._setRowDisplay(u,"")}var f=l||!l&&"native"===this.options.drawType||""===this.options.visibleRowNum&&-1==this.options.initFixedHeightByRowNum||this.options.accessibility;if(f){var b=0,y=this.options.backgroundColorMode.toLowerCase();if("always"!==y&&"full"!==y||(b=t),this.defaultColCnt)for(u=0;u<this.dataRowList.length;u++)this.removeRowOverStyle(this.dataRowList[u],!0);for(u=b;u<=r;u++)this.options.fixedRow>0&&this.options.fixedRow>u?this.applyRowStyleOptions(u):this.applyRowStyleOptions(o+u);this.options.autoResizeEmbeddedInput&&this.firstEmbeddedInputResize&&(this.setAutoResizeEmbeddedInput(),this.firstEmbeddedInputResize=!1)}this.lastDisplayedRow=r,f&&"all"!==this.options.visibleRowNum&&!0!==this._isBrowserScroll()&&(r=this.cutGridBottom(r,e)),!0===this._isBrowserScroll()&&(this.lastIndex=r)}for(u=0;u<=r;u++)this.options.fixedRow>0&&this.options.fixedRow>u?this.setEvenOddBackground(u,u):this.setEvenOddBackground(u,o+u);if(this.options.lastFixedRow>0)for(u=0;u<this.options.lastFixedRow;u++)this.options.lastFixedRowStartIndex>0?(this.fastDrawRowData(r-u,this.options.lastFixedRowStartIndex+1-u),f&&this.applyRowStyleOptions(r-u),this.setEvenOddBackground(r-u,this.options.lastFixedRowStartIndex+1-u)):(this.fastDrawRowData(r-u,i-1-u),f&&this.applyRowStyleOptions(r-u),this.setEvenOddBackground(r-u,i-1-u));if(!0!==this.hiddenRowObj.init&&!l){var v=this._getVisibleLastIndex(r+1);r+1<this.drawedRowLength&&(this._setRowDisplay(v,""),this.setEvenOddBackground(v,o+v),this.applyRowStyleOptions(o+v),this.options.showLastRow&&!this.hasSubtotal?this.getDataLength()<=o+v&&this._setRowDisplay(v,"none"):this._setRowDisplay(v,"none"))}}else{var w=this.options.showLastRow&&!this.hasSubtotal?1:0,S=this.lastDisplayedRow+w;!0===this.hiddenRowObj.init&&(S=this.drawedRowLength+this.hiddenRowObj.extraRow-1);for(u=0;u<=S;u++)this._setRowDisplay(u,"none");r=this.lastDisplayedRow=-1}if(this.hideDataLayer&&(this.hideDataLayer.style.display="none"),this.focusedCell.length>0&&!this.editedCell){var _,C=this.focusedCell[this.focusedCell.length-1].focusedRowIndex-this.rowIndex,x=this.focusedCell[this.focusedCell.length-1].focusedColIndex;if(0<=C&&C<=r)if(_=this.options.focusDefaultColumn&&x<0&&this.defaultColCnt&&("row"===this.options.focusMode||"both"===this.options.focusMode)?this.all_data_td_list[this.defaultColCnt+x+C*(this.oneRowDataLength+this.defaultColCnt)]:this.data_td_list[x+C*this.oneRowDataLength]){var I=e?e.noApplyRealFocus:void 0;this.applyFocusedCellIn(_,I,{noApplyRealFocus:I})}}var T=WebSquare.BootLoader.fullViewed||!1,k=a.Z.fullViewed||!1;if(!T&&!k&&"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")){this.hasSubtotal&&this.setAdaptiveGridSubtotalHeight();for(u=this.defaultColCnt;u<this.hiddenList.length;u++)1==this.hiddenList[u]&&this.setAdaptiveColumnVisible(u,!1)}return r}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.adjustDraw=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.rowIndex;this.dataLayerHeight;if(this.options.lazyDrawHiddenColumn)this.initVisibilityArr=this.colIndexInfo.body.visibilityArr.slice(0),this.hideInvisibleTds();else{this.rollbackCommitFlag=!1;var o=this.lastDisplayedRow;!0===this.hiddenRowObj.init&&(o=this.drawedRowLength+this.hiddenRowObj.extraRow-1);for(var r=0;r<=o-this.options.lastFixedRow;r++)this.groupbyStatus.grouped&&"object"==(0,
l.A)(this.dataList.getRealRowIndex(r+i))||(!0!==this.hiddenRowObj.init||this._getRowVisible(r+i))&&(this.options.fixedRow>0&&r<=this.options.fixedRow-1?this.lazyDrawRowData(r,r):this.lazyDrawRowData(r,r+i));this.rollbackCommitFlag=!0}t=this.options.initFixedHeightByRowNum>-1?this.adjustInitFixedByRowNum(t):""!==this.options.visibleRowNum?this.adjustVisibleRowNum(t):this.adjustDefault(t),this.maxRowLength=t,!this.isIE6or7||1==this.options.senseReader&&""==this.options.visibleRowNum||(this._setRowDisplay(t+1,""),this.dataRowList[(t+1)*this.oneRowLength]&&this.dataRowList[(t+1)*this.oneRowLength].offsetHeight,this._setRowDisplay(t+1,"none")),this.dynamicMergeHTML()}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.adjustVisibleRowNum=function(t){try{if(""===this.options.visibleRowNum||!0===this._isBrowserScroll())return t;var e=this.rowIndex,i=this.getDataLength();this.setDataTable();var o={noDraw:!0,skipResize:null!=this.lastTopRowIndex};this.setScrollYHeight(o),!0===this.hiddenRowObj.init&&this.applyStyleOptions(t);var r,n=this.getElementById(this.id+"_scrollX_div"),l=parseInt(n.style.height,10),h=this.getElementById(this.id+"_body_table"),d=0;if(!0===this.hiddenRowObj.init)this.lastDisplayedRow=t,this.lastIndex=t,r=h.offsetHeight,a.Z.isIE(9)&&(r=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d);else{var c="all"==this.options.visibleRowNum?i:c=parseInt(this.options.visibleRowNum,10);this.options.initFixedHeightByRowNum>-1&&this.hasSubtotal&&this.drawedSubtotal&&(c-=this.drawedSubtotal.drawedRowLength);for(var u=t+1;u+e<i&&u<c;u++)this.drawRowData(u,u+e),t++;for(u=this.lastDisplayedRow+1;u<=t;u++)this._setRowDisplay(u,"");this.applyStyleOptions(t);for(u=t+1;u<=this.lastDisplayedRow;u++)this._setRowDisplay(u,"none");this.lastDisplayedRow=t,this.lastIndex=t,r=h.offsetHeight,a.Z.isIE(9)&&(r=h.getBoundingClientRect().height),this.hasFooter&&(d=0==(d=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:d)}this.options.initFixedHeightByRowNum>-1&&i>this.options.initFixedHeightByRowNum||!(r<this.defaultDataLayerHeight)||!0===this.options.isItemTable||this._dynamicVisibleRowNum>0||(r=this.defaultDataLayerHeight);var p=0;""!==this.options.visibleRowNum&&this.options.groupbyZone&&this.groupbyZoneStatus.groupbyZoneRender&&(p=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight,this.options.groupbyFilterBox&&(p+=this.groupbyZoneStatus.groupbyFilterBoxRender.offsetHeight));var g=this.getSize("height"),m=r+l+d+p,f=!0!==this._isBrowserScroll();if(this.options.visibleRowNumFix){var b=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(!isNaN(b)){var y=this.getElementById(this.id+"_head_table").offsetHeight;m<this.oneRowHeight*b+y+l+d+1&&(f=!1)}}if((i>0||"all"==this.options.visibleRowNum)&&g!=m&&(f&&this.setSize(null,m),null!=this.lastTopRowIndex)){var v=this._getScrollRowIndex(this.lastTopRowIndex);v!==this._getScrollMaxRowIndex()&&(o.skipResize=!1,o.restRowCnt=v,this.lastTopRowIndex=null)}if(this.options.autoFit&&this._setAutoFit(),this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight,clientWidth:this.render.clientWidth},this.dataLayerHeight=h.parentNode.offsetHeight,this.setScrollYHeight(o),null==this.lastTopRowIndex){var w=this._getVisibleRowIndex(this._getScrollMaxRowIndex()),S=this._getVisibleLastIndex(this.lastIndex+1);this.rowIndex===w&&this.rowIndex+S===i&&(this.lastTopRowIndex=this.rowIndex)}return t}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.adjustInitFixedByRowNum=function(t){try{return this.adjustVisibleRowNum(t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.adjustDefault=function(t){try{return""!==this.options.visibleRowNum||(this.adjustDraw_keepTop?this.adjustDraw_keepTop=null:this.setScrollYHeight({skipResize:!0})),t}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.drawBottomData=function(t){try{
if(this.rowIndex<0||0==this.rowIndex&&t<=this.lastIndex||this.rowIndex>=0&&this.rowIndex+this.lastIndex==t||isNaN(Number(t)))return;if(!0===this._isNativeScroll())return void this.drawData(0);if(!0===this._isHybridScroll()){var e=Math.max(drawedRowLength-this._getHybridRowNum(),0),i=Math.min(t-e,0);return void this._drawDataHybrid(i)}var o=this.getDataLength();t>=o&&(t=o-1);var r=0;this.lastIndex>-1&&(r=Math.max(t-this.lastIndex,0)),this.rowIndex!==r&&this.drawData(r);var a=this.rowIndex+this.lastIndex-t,n={};n[this.rowIndex]=a;for(var l=5;Math.abs(a)>0&&null==n[this.rowIndex-a]&&l>0;)this.drawData(this.rowIndex-a),a=this.rowIndex+this.lastIndex-t,n[this.rowIndex]=a,l--}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.cutGridBottom=function(t,e){try{if(!0===this._isBrowserScroll())return;var i=this.rowIndex,o=this.dataLayerHeight,r=this.getElementById(this.id+"_head_table"),n=this.getElementById(this.id+"_body_tbody"),l=WebSquare.style.getStyle(r,"border-top-width");l="thin"==l?a.Z.isIE(6)||a.Z.isIE(7)?2:1:"medium"==l?a.Z.isIE(6)||a.Z.isIE(7)?4:3:"thick"==l?a.Z.isIE(6)||a.Z.isIE(7)||a.Z.isOpera()?6:5:parseInt(l,10);var h=parseInt(l/2,10)-r.offsetTop;if(n.getBoundingClientRect){var d=n.getBoundingClientRect(),c=d.bottom-d.top;h+=c-parseInt(c,10)>0?1:0}for(var u=o-h,p=this.getElementById(this.id+"_body_tbody").childNodes,g=(t=-1,!0),m=this.getDataLength(),f=this.oneRowLength*m-1,b=i*this.oneRowLength,y=this.hiddenCellObj.length>0,v={row:[],cnt:0},w=0;w<p.length;w++){var S=p[w],_=!1,C=!1;if(0!==S.offsetHeight){v.row[w]="visible",v.cnt++,this.hasClass(S,"grid_body_row")?(g&&b+t<f?t++:(S.style.display="none",this.addClass(S,"w2grid_hidedRow")),_=!0):S.getAttribute("data-subtotal")&&(g||this._subtotalHidden([S]),C=!0);var x=S.offsetTop+S.offsetHeight-u;if(g&&x>0){if(g=!1,_){var I=t%this.oneRowLength;if(y){var T=this.oneRowHeight/this.oneRowLength;I=Math.floor(x/T)}for(var k=0;k<=I&&w>=k;k++){var L=p[w-k];L.style.display="none",this.addClass(L,"w2grid_hidedRow"),t--}}C&&this._subtotalHidden([S])}}else v.row[w]="hidden"}if(v.cnt-=t+1,y){var A=-1,D=-1;for(w=0;w<v.row.length&&D<t;w+=this.oneRowLength){var W=!1;for(k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===W&&(A++,W=!0),D++)}t=A}else if(t=Math.floor(t/this.oneRowLength),!this.senseReaderMode){if(!0!==this.hiddenRowObj.init)for(w=t+1;w<=this.drawedRowLength;w++)this._setRowDisplay(w,"none");this.lastDisplayedRow=t}var q=this.options.showLastRow&&!this.hasSubtotal,M=!(1==this.options.senseReader&&"all"!==this.options.visibleRowNum);if(q&&(!this.senseReaderMode||M)){m=this.getDataLength();var E=y?Math.floor(t/this.oneRowLength):t,R=this._getVisibleRowIndex(this._getScrollRowIndex(this.rowIndex)+E+1);if(m>0){for(;!this._getRowVisible(R)&&R<m;)R++;R<m&&this._getRowVisible(R)&&(this._setRowDisplay(R-this.rowIndex,""),this.lazyDrawRowData(R-this.rowIndex,R))}}this.lastIndex=t,!0===this.hiddenRowObj.init&&(this.lastDisplayedRow=t);var N=t;if(e&&!0===e.extraRowByCellHidden){var F=0;for(w=0;w<v.row.length&&v.cnt>0;w+=this.oneRowLength)for(W=!1,k=0;k<this.oneRowLength;k++)"visible"===v.row[w+k]&&(!1===W&&(F++,W=!0),v.cnt--);N=F}return N}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.getLastIndex=function(t){try{var e=this.dataLayerHeight;if(t<0)return this.lastDisplayedRow=-1,-1;for(;;){var i=this.dataRowList[(t+1)*this.oneRowLength-1];if(!(t>0&&i.offsetTop+i.offsetHeight>e))break;t--}return t}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.lazyDrawRowData=function(t,e){try{for(var i=0;i<this.colIndexInfo.body.invisibleTds.length;i++){var o=this.colIndexInfo.body.invisibleTds[i]-this.defaultColCnt,r=this._getColumnMoveIndex(o);r>=0&&this.drawCellData(t,e,r,!0)}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.fastDrawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),r=this.all_data_td_list[t*this.realRowDataLength],a=0;if("number"==typeof o){
if((this.groupbyStatus.grouped||this.clearGrouping)&&this.defaultColCnt>0)for(var n=r,h=!0,d=0;d<this.defaultColCnt;d++){var c=this.colIndexes.bodyColInfo.colSpanArr[d]||1;n.setAttribute("colSpan",c),n.style.display="",n.innerText="",n.textContent="",n.className.match("w2grid_groupby")&&(n.className=r.className.split(" ").splice(0,1),this.options.rowNumVisible&&h?(n.className+=" gridBodyDefault_rowNumber",h=!1):n.className+=" gridBodyDefault_rowStatus"),n=n.nextSibling}if(this.options.rowMerge){var u={rowMergeStartPoint:[],rowMergeSameDataLength:[]},p=this.getRowData(e),g=!1,m=0;for(d=0;d<p.length;d++)p[d]==p[d+1]?(g||u.rowMergeStartPoint.push(d),m++,g=!0):(g&&(m++,u.rowMergeSameDataLength.push(m)),g=!1,m=0)}this._drawRowNumData(t,e,i),this._drawRowStatus(t,e,i);var f=this.colIndexInfo.body.visibleTds,b=f.length;i&&!0===i.refreshColumn&&(b=this.oneRowDataLength);for(d=0;d<b;d++){var y;if(i&&!0===i.refreshColumn)y=d;else{var v=f[d]-this.defaultColCnt;y=this._getColumnMoveIndex(v)}if(y>=0)if(this.options.rowMerge){c=null;for(var w=0;w<u.rowMergeStartPoint.length;w++)y==u.rowMergeStartPoint[w]?c=u.rowMergeSameDataLength[w]:u.rowMergeStartPoint[w]<y&&y<u.rowMergeStartPoint[w]+u.rowMergeSameDataLength[w]&&(c=-1);this.drawCellData(t,e,y,null,c,i)}else this.drawCellData(t,e,y,null,null,i)}i&&!0===i.skipSubtotal||(a=this.drawSubtotalRow(t+1,e))}else"object"==(0,l.A)(o)&&this.drawGroupData(r,o,t);return a}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.clearGroupedRow=function(t,e){try{if(this.defaultColCnt>0)for(var i=this.all_data_td_list[t*this.realRowDataLength],o=i,r=!0,a=0;a<this.defaultColCnt;a++){var n=this.colIndexes.bodyColInfo.colSpanArr[a]||1;o.setAttribute("colSpan",n),o.style.display="",o.innerText="",o.textContent="",o.className.match("w2grid_groupby")&&(o.className=i.className.split(" ").splice(0,1),this.options.rowNumVisible&&r?(o.className+=" gridBodyDefault_rowNumber",r=!1):o.className+=" gridBodyDefault_rowStatus"),o=o.nextSibling}for(a=0;a<this.oneRowDataLength;a++){var l=a,h=this._getColumnMoveIndex(l);h>=0&&this.drawCellData(t,e,h)}this.drawSubtotalRow(t+1,e)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.drawRowData=function(t,e,i){try{var o=this.dataList.getRealRowIndex(this.rowIndex+t),r=0;if(null==o)return r;var n=a.Z.getDataPrefix("colMerged"),l=this.all_data_td_list[t*this.realRowDataLength];if("number"==typeof o){this._drawRowNumData(t,e),this._drawRowStatus(t,e);for(var h=0;h<this.oneRowDataLength;h++){var d=h,c=this.getCellInfo(d);if(this.drawCellData(t,e,d),c&&c.options.colMerge&&!this.groupbyStatus.grouped)for(var u=this._dataList.getColumnIndex(this.getColumnID(d)),p=this._dataList.dataArr[e*this._dataList.oneRowDataLength+u],g=0;g<=this.maxRowLength-t;g++){var m=this.data_td_list[(t+g)*this.oneRowDataLength+d];if(m){var f=p==this.dataList.getCellData(t+g+1,d)?"1":"0";m.setAttribute(n,f),this.drawCellData(t+g,e+g,d)}}}i&&!0===i.skipSubtotal||(r=this.drawSubtotalRow(t+1,e))}else this.drawGroupData(l,o,t);return r}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.hideNochangeDataLayer=function(t){if(null==this.hideDataLayer){this.hideDataLayer=document.createElement("div"),this.hideDataLayer.className="w2grid_fastScroll_layer";var e=document.createElement("div");e.innerHTML=this.options.scrollMsg,e.className="w2grid_fastScroll_msg",this.hideDataLayer.appendChild(e),this.getElementById(this.id+"_dataLayer").appendChild(this.hideDataLayer)}var i=this.all_data_td_list[(t-1)*this.realRowDataLength],o=i.offsetHeight;0!=o?(this.hideDataLayer.style.display="block",this.hideDataLayer.style.top=i.offsetTop+o+1+"px"):this.hideDataLayer.style.display="none"},x.prototype.setEvenOddBackground=function(t,e){if(this.options.oddEvenColorDisplay){var i=this.data_td_list[t*this.oneRowDataLength],o=null;if(i){var s=a.Z.getDataPrefix("trIndex");o=i.parentNode;do{o.style.backgroundColor=e%2==1?this.options.evenRowBackgroundColor:this.options.oddRowBackgroundColor,o=a.Z.next(o)
}while(null!=o&&"0"!=o.getAttribute(s))}}},x.prototype._drawRowNumData=function(t,e,i){try{if(this.options.rowNumVisible){var o=this.data_num_td_list[t],r="";r=o&&null!=o.textContent?"textContent":o&&null!=o.innerText?"innerText":"innerHTML";var a=this.startRowNumber;this.rowNumArr?"number"==typeof this.rowNumArr[e]&&(a=1+this.rowNumArr[e]):o&&(a=1+e+this.startRowNumber),a>this.startRowNumber&&("span"===this.options.dataTag?o.innerHTML=this.dataTagOpen+a+this.dataTagClose:o[r]=a)}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._drawRowStatus=function(t,e,i){if(this.options.rowStatusVisible){var o=this.data_status_td_list[t];if(o){var s,r=this._linkedDataList||this._dataList;s="linkedDataList"==r.initializeType?r.getRowStatusValue(e):this._dataList.options.depthColumn||this.groupbyStatus.grouped?r._getRowStatusValue(this.getRealRowIndex(e)):r.getRowStatusValue(e),this._drawStatus(s,o,"w2grid_rowStatus_")}}},x.prototype._drawCellStatus=function(t,e,i,o){if(this.options.cellStatusVisible){var s=this.data_td_list[i+t*this.oneRowDataLength];if(s){var r,a=this.getColumnID(i),n=this._linkedDataList||this._dataList;r="linkedDataList"==n.initializeType?n.getCellStatusValue(e,a):this._dataList.options.depthColumn||this.groupbyStatus.grouped?n._getCellStatusValue(this.getRealRowIndex(e),a):n.getCellStatusValue(e,a),this._drawStatus(r,s,"w2grid_cellStatus_","_"+this.options.cellStatusIconPosition,!0)}}},x.prototype._drawStatus=function(t,e,i,o,r){try{var n="",l="";switch("string"!=typeof o&&(o=""),t){case 0:n="R",l=WebSquare.language.getMessage("Grid_rowStatus_initialValue")||"initial value";break;case 1:n="U",l=WebSquare.language.getMessage("Grid_rowStatus_update")||"updated";break;case 2:n="C",l=WebSquare.language.getMessage("Grid_rowStatus_insert")||"inserted";break;case 3:n="D",l=WebSquare.language.getMessage("Grid_rowStatus_delete")||"deleted";break;case 4:n="V",l=WebSquare.language.getMessage("Grid_rowStatus_D_After_C")||"deleted after insertion"}var h=a.Z.getDataPrefix("imageName"),d=e.getAttribute(h)||"";if((d!=n||this.clearGrouping)&&(this.removeClass(e,i+(d||"R")+o),""!=n&&this.addClass(e,i+n+o),"imageName"===h&&(e.imageName=n),e.setAttribute(h,n),!0===this.options.accessibility)){var c=e.id+"_altspan",u=document.getElementById(c);if(!u){(u=document.createElement("span")).id=c;var p=i+"span";!0===r&&(p="w2blind "+p),u.className=p,e.appendChild(u)}u.textContent=l}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.drawCellData=function(t,e,i,o,r,n){try{o||null==this.editedCell||this.editedCell.options.colIndex+""!=i+""||this.editedCell.handleCancelEdit();var l=this.data_td_list[i+t*this.oneRowDataLength];if(l){var h=this.cellInfoHash[this.tdIdList[i]];if(this.groupbyStatus.grouped||this.clearGrouping){var d=this.colIndexes.bodyColInfo.colSpanArr[i+this.defaultColCnt]||1;l.setAttribute("colSpan",d),l.style.display="",l.style.textAlign=h.options.textAlign}if(this.options.rowMerge)if(null==r)l.setAttribute("colSpan",""),l.style.display="",l.style.textAlign="";else if(r>0){d=r;l.setAttribute("colSpan",d),l.style.display="",l.style.textAlign=h.options.textAlign}else-1==r&&(l.style.display="none");!h.options.embeddedInput&&this.groupbyStatus.grouped&&(l.textContent=""),(this.groupbyStatus.grouped||this.clearGrouping)&&this.hasClass(l,"w2grid_groupby")&&(l.className="gridBodyDefault");var c=this.aria_labelledby[i];if(c){var u=t+e+1;l.setAttribute("aria-labelledby",c+" r"+u)}if(h.options.headers&&this.options.applyScopeHeaders){var p=this.scope_id?this.scope_id+"_":"",g=a.Z.getDataPrefix("headers");l.setAttribute(g,p+h.options.headers)}this.isColMerge&&h.options.colMerge&&!this.groupbyStatus.grouped?this.setColMergeCellData(t,e,i,n):this.setInnerHTML(l,e,i,n),this._drawCellStatus(t,e,i)}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.setColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.setColMergeAndCellData(t,e,i,o);var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e)
;if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);var n=this.getColumnID(i),l=this.dataList._getCellData(e-1,n),h=this.data_td_list[i+(t-1)*this.oneRowDataLength],d=this.upperGroupingTest(e,i,t),c=this.dataList._getCellData(e,n),u=this._getWrapperCell(s,e);if(l==c&&d){this.options.readOnly&&this.options.readOnlyBackgroundColor?(h.style.borderBottomColor=s.style.backgroundColor,s.style.borderTopColor=s.style.backgroundColor,s.style.borderBottomColor=s.style.backgroundColor):(h.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px"),u.innerHTML="";var p=a.Z.getDataPrefix("viewType"),g=a.Z.getDataPrefix("inputType");if("icon"==s.getAttribute(p)){var m=s.getAttribute(g);this.removeClass(s,this.options.bodyTdClass+"_"+m)}if(this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(h.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px"),null!=h)return this.applyCellStyleOptions(e,i,!1),"mergeCellBackgroundColor"}else{var f=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==f&&!this.groupbyStatus.grouped&&(f="1px"),this.options.readOnly&&this.options.readOnlyBackgroundColor?s.style.borderTopColor=s.style.backgroundColor:s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=f}},x.prototype.setColMergeAndCellData=function(t,e,i,o){var s=this.data_td_list[i+t*this.oneRowDataLength],r=this.getHasSubtotalCount(e);if(0==t)return 0!=r&&(s.style.borderBottomWidth="1px"),void this.setInnerHTML(s,e,i,o);this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]};var a=this.getColumnID(i);if(null==this.colMergeObj.colArr[i]){var n=this.dataList._getCellData(e-1,a),l=this.dataList._getCellData(e,a);if(this.colMergeObj.colArr[i]=n==l,this.colMergeObj.colArr[i])for(var h=0;h<this.oneRowDataLength;h++){if(null==this.colMergeObj.colArr[h])if(this.getCellInfo(h).options.colMerge){var d=this.getColumnID(h),c=this.dataList._getCellData(e-1,d),u=this.dataList._getCellData(e,d);this.colMergeObj.colArr[h]=c==u}else this.colMergeObj.colArr[h]=!0}}var p=!0;for(h=0;h<this.colMergeObj.colArr.length;h++)if(!this.colMergeObj.colArr[h]){p=!1;break}var g=this.data_td_list[i+(t-1)*this.oneRowDataLength];if(p){g.style.borderBottomWidth="0px",s.style.borderTopWidth="0px",s.style.borderBottomWidth="0px",this._getWrapperCell(s,e).innerHTML="",this.options.senseReader&&(0==r&&t!=this.lastDisplayedRow&&t!=this.lastIndex||(s.style.borderBottomWidth="1px"),t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(g.style.borderBottomWidth="1px")),0!=r&&(s.style.borderBottomWidth="1px")}else{var m=s.style.borderTopWidth;this.getCellInfo(i).options.colMergeEdit&&"0px"==m&&(m="1px"),s.style.borderTopWidth="0px",this.setInnerHTML(s,e,i,o),s.style.borderTopWidth=m}},x.prototype.drawColMergeCellData=function(t,e,i,o){if(this.isColMergeAnd)return this.drawColMergeAndCellData(t,e,i,o);var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(this.options.readOnly&&this.options.readOnlyBackgroundColor||(r.style.borderBottomWidth="0px"),0!=t||o){var n=this.getHasSubtotalCount(e);0==n&&(this.options.readOnly&&this.options.readOnlyBackgroundColor||(r.style.borderBottomWidth="0px"));var l=this.dataList._getCellData(e-1,s),h=this.data_td_list[i+(t-1)*this.oneRowDataLength];this.options.readOnly&&this.options.readOnlyBackgroundColor||(r.style.borderTopWidth="0px");var d=this.upperGroupingTest(e,i,t),c=this.dataList._getCellData(e,i),u=WebSquare.style.getComputedStyle(h,"border-right-width"),p=WebSquare.style.getComputedStyle(h,"border-left-width"),g="";if("0px"!=u?g=WebSquare.style.getComputedStyle(h,"border-right-color"):"0px"!=p&&(g=WebSquare.style.getComputedStyle(h,"border-left-color")),l==c&&d){
null!=h&&(this.options.readOnly&&this.options.readOnlyBackgroundColor?h.style.borderBottomColor=r.style.backgroundColor:h.style.borderBottomWidth="0px");var m=a.Z.getDataPrefix("colMerged"),f=a.Z.getDataPrefix("viewType"),b=a.Z.getDataPrefix("inputType");if(this.options.readOnly&&this.options.readOnlyBackgroundColor?(r.style.borderTopColor=r.style.backgroundColor,r.style.borderBottomColor=r.style.backgroundColor,t-1!=this.lastDisplayedRow&&t-1!=this.lastIndex||(h.style.borderBottomColor=g)):(r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px"),r.setAttribute(m,"1"),this._getWrapperCell(r,e).innerHTML="",0!=n&&(r.style.borderBottomWidth="1px"),"icon"===r.getAttribute(f)){var y=r.getAttribute(b);this.removeClass(r,this.options.bodyTdClass+"_"+y)}if(null!=h&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else this.options.readOnly&&this.options.readOnlyBackgroundColor?h.style.borderBottomColor=g:r.style.borderTopWidth="1px"}},x.prototype.drawColMergeAndCellData=function(t,e,i,o){var s=this.getColumnID(i),r=this.data_td_list[i+t*this.oneRowDataLength];if(r.style.borderBottomWidth="0px",0!=t||o){var n=this.getHasSubtotalCount(e);if(0==n&&(r.style.borderBottomWidth="0px"),this.colMergeObj?this.colMergeObj.displayRowIndex!=e&&(this.colMergeObj={displayRowIndex:e,colArr:[]}):this.colMergeObj={displayRowIndex:e,colArr:[]},null==this.colMergeObj.colArr[i]){var l=this.dataList._getCellData(e-1,s),h=this.dataList._getCellData(e,s);if(this.colMergeObj.colArr[i]=l==h,this.colMergeObj.colArr[i])for(var d=0;d<this.oneRowDataLength;d++){if(null==this.colMergeObj.colArr[d])if(this.getCellInfo(d).options.colMerge){var c=this.getColumnID(d),u=this.dataList._getCellData(e-1,c),p=this.dataList._getCellData(e,c);this.colMergeObj.colArr[d]=u==p}else this.colMergeObj.colArr[d]=!0}}var g=!0;for(d=0;d<this.colMergeObj.colArr.length;d++)if(!this.colMergeObj.colArr[d]){g=!1;break}if(g){var m=this.data_td_list[i+(t-1)*this.oneRowDataLength];null!=m&&(m.style.borderBottomWidth="0px");var f=a.Z.getDataPrefix("colMerged");if(r.style.borderTopWidth="0px",r.style.borderBottomWidth="0px",r.setAttribute(f,"1"),this._getWrapperCell(r,e).innerHTML="",0!=n&&(r.style.borderBottomWidth="1px"),null!=m&&this.options.oddEvenColorDisplay&&!this.options.oddEvenColorMerged)return"mergeCellBackgroundColor"}else r.style.borderTopWidth="1px"}},x.prototype.upperGroupingTest=function(t,e,i){try{var o=this.getCellInfo(e),r=o.options.upperColumn;if(this.hasSubtotal&&this.hasUpperSubtotalRow(t))return!1;if(""!=r){if(i){var n=a.Z.getDataPrefix("colMerged"),l=this.getColumnIndex(r),h=this.data_td_list[l+i*this.oneRowDataLength],d=this.getCellInfo(l);if(h&&""==h.style.width&&(""==d.options.upperColumn||d.options.upperColumn&&"1"!=h.getAttribute(n))&&"1"!=h.getAttribute(n)&&1==d.options.colMerge&&!this.groupbyStatus.grouped)return!1}if(this.dataList._getCellData(t,r)!=this.dataList._getCellData(t-1,r))return!1;var c=this.getCellInfo(r);if(c.options.upperColumn&&""!=c.options.upperColumn&&c.options.upperColumn!=o.id)return this.upperGroupingTest(t,r,i)}else{if(this.dataList._getCellData(t,e)!=this.dataList._getCellData(t-1,e))return!1}return!0}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.setDataTable=function(){try{var t=this.getElementById(this.id+"_head_table"),e=this.getElementById(this.id+"_body_table"),i=this.getElementById(this.id+"_body_tbody");if(this.dataLayerHeight=e.parentNode.offsetHeight,""===this.options.visibleRowNum&&0==this.dataLayerHeight)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({rowIndex:-1==this.rowIndex?0:this.rowIndex});this.defaultDataLayerHeight||(this.isIE6or7||a.Z.isOpera()?this.defaultDataLayerHeight=this.getElementById(this.id+"_main_div").offsetHeight:this.defaultDataLayerHeight=this.dataLayerHeight);var o=0,r=this.getDataLength();if(!0===this._isHybridScroll()){
var n=Math.ceil((this.render.offsetHeight-t.offsetHeight)/this.oneRowHeight),l=Math.min(this._getHybridRowNum()+n,r);o=Math.max(l,1)}else if(this.options.senseReader&&"all"===this.options.visibleRowNum)o=r;else if(""===this.options.visibleRowNum)if(this.options.initFixedHeightByRowNum>-1)o=parseInt(this.options.initFixedHeightByRowNum,10)+1;else{var h=this.oneRowHeight;this.hiddenCellObj.length>0&&(h=this.oneRowHeight/this.oneRowLength),o=parseInt((this.dataLayerHeight-t.offsetHeight)/h)+1}else o="all"===this.options.visibleRowNum?r:parseInt(this.options.visibleRowNum,10);if(0==this.drawedRowLength&&(this.tdCellClassArr=[],this.tdCellClassArr[o*this.oneRowLength-1]=this.tdCellClassArr),o>this.drawedRowLength){var d=this.drawedRowLength;this.drawedRowLength=o;var c=[],u=!!(this.subtotalStrList&&Object.keys(this.subtotalStrList).length>0);0==d&&u&&(c=c.concat(this.createSubtotalRows(-1)));for(var p=d;p<this.drawedRowLength;p++){var g=[];this.trRowClassArr.push(null);for(var m=0;m<this.oneRowLength;m++){var f=this.tempTr.rows[m].cloneNode(!0);g[m]=f,c.push(f),this.tdCellClassArr.push(null)}this.addBodyRow(p,g),u&&(c=c.concat(this.createSubtotalRows(p)))}0==this.drawedRowLength?e.style.borderWidth="0px":e.style.borderWidth="";for(m=0;m<c.length;m++)i.appendChild(c[m]);for(p=d+this.hiddenRowObj.extraRow;p<this.drawedRowLength+this.hiddenRowObj.extraRow;p++)this._setRowDisplay(p,"none")}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.applyStyleOptions=function(t){try{for(var e=this.rowIndex>=0?this.rowIndex:0,i=0;i<=t+1+this.hiddenRowObj.extraRow&&i<this.drawedRowLength+this.hiddenRowObj.extraRow;i++)"object"!=(0,l.A)(this.dataList.getRealRowIndex(i+e))&&(this.options.fixedRow>0&&i<=this.options.fixedRow-1||this.options.lastFixedRow>0&&i>t-this.options.lastFixedRow?this.applyRowStyleOptions(i):(!this.hiddenRowObj.length>0||this._getRowVisible(i+e))&&this.applyRowStyleOptions(i+e))}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._setCheckboxHead=function(t){try{if(t)if(1==this.htmlInfo.head.rowArr.length)this.checkHeader(this.bodyToHeaderRelation[t]);else for(var e in this.headerToBodyRelation)this.headerToBodyRelation[e]==t&&this.checkHeader(e);else for(var e in this.headerInfoHash)this.checkHeader(e)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.applyColumnStyleOptions=function(t){try{t=this.getColumnIndex(t);for(var e=0;e<this.drawedRowLength;e++)this.applyCellStyleOptions(e+this.rowIndex,t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.applyRowStyleOptions=function(t,e){try{var i=this._getTrIndex(t);e&&(i=this._getTrIndex(this.getDisplayRowIndex(t)));for(var o=0,r=this.rowIndex;r<t&&this.hiddenRowObj.length>0;r++)this._getRowVisible(r)||o++;if(i<0||i-o>=this.drawedRowLength)return;var a=this.dataRowList[this.oneRowLength*i];if(!a&&!e)return;if(a&&"none"==a.style.display&&!e)return;if(this.options.fixedRow>0&&i==this.options.fixedRow-1){var n=this.dataRowList[this.oneRowLength*(i+1)-1];this.addClass(n,"w2grid_fixedRow")}if(this.options.lastFixedRow>0&&i==this.lastIndex-this.options.lastFixedRow+1){n=this.dataRowList[this.oneRowLength*(i-1)];this.addClass(n,"w2grid_lastFixedRow")}if(this.options.lazyDrawHiddenColumn){var l=this.colIndexInfo.body.visibleTds,h=i*this.oneRowDataLength;for(r=this.defaultColCnt;r<l.length;r++){var d=l[r]-this.defaultColCnt;this.all_data_td_list[h+d]&&(e?this.applyCellStyleOptions(this.getDisplayRowIndex(t),d):this.applyCellStyleOptions(t,d))}}else for(r=0;r<this.oneRowDataLength;r++){h=i*this.oneRowDataLength;this.data_td_list[h+r]&&(e?this.applyCellStyleOptions(this.getDisplayRowIndex(t),r):this.applyCellStyleOptions(t,r))}var c=!0===this._isHybridScroll(),u=a,p="w2grid_lastRow_hybrid";if(this.hasSubtotal&&this.lastSubtotalRow?(u=this.lastSubtotalRow,p="w2grid_lastRow_subtotal_hybrid"):this.oneRowLength>1&&(u=this.dataRowList[this.oneRowLength*(i+1)-1]),t===this.getRowCount()-1?(this.__addClass(a,"w2grid_lastRow"),
c&&this.__addClass(u,p)):this.hasClass(a,"w2grid_lastRow")&&(this.__removeClass(a,"w2grid_lastRow"),c&&this.__removeClass(u,p)),this.hasSubtotal&&!0===this._isBrowserScroll()){var g="w2grid_firstRow_subtotal_native";0===t?this.__addClass(a,g):this.hasClass(a,g)&&this.__removeClass(a,g)}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.setAutoResizeEmbeddedInput=function(){try{for(var t=this.data_td_list,e="",i=null,o=null,r=0,n=0,l=!1,h=a.Z.getDataPrefix("inputType"),d=a.Z.getDataPrefix("colindex"),c=a.Z.getDataPrefix("col_id"),u=a.Z.getDataPrefix("rowindex"),p=0;p<t.length;p++){var g=this._getWrapperCell(t[p],t[p].getAttribute(u));if("text"==t[p].getAttribute(h)||"secret"==t[p].getAttribute(h)){e=t[p].getAttribute(c),o=this.cellInfoHash[e];var m=!1;if((this.dom[o.mainGridId+o.id]||this.dom[t[p].getAttribute("id")+"_"+t[p].getAttribute(h)])&&(m=!0),1==o.options.embeddedInput&&m){i=this.getInput(o,t[p]),null==this._getWrapperTD(i.render.parentNode)&&(g.innerHTML="",g.appendChild(i.render)),"none"==t[p].parentNode.style.display&&(t[p].parentNode.style.display="",l=!0);var f=parseInt(t[p].getAttribute(d),10);this.embeddedStyleObj||(this.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t[p],"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t[p],"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t[p],"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t[p],"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(i.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(i.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(i.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(i.render,"padding-right"),10)});var b=parseInt(WebSquare.style.getStyle(i.render,"border-top-width"),10),y=parseInt(WebSquare.style.getStyle(i.render,"border-bottom-width"),10),v=parseInt(WebSquare.style.getStyle(i.render,"border-left-width"),10),w=parseInt(WebSquare.style.getStyle(i.render,"border-right-width"),10);r=t[p].offsetHeight-parseInt(WebSquare.style.getStyle(t[p],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[p],"border-bottom-width"),10),r-=this.embeddedStyleObj.top+this.embeddedStyleObj.bottom,r-=b+y,this.embeddedWidthObj[f]&&!this.embeddedWidthObj[f].isChanged||(this.embeddedWidthObj[f]={isChanged:!1,width:t[p].clientWidth}),n=this.embeddedWidthObj[f].width,n-=this.embeddedStyleObj.left+this.embeddedStyleObj.right,n-=v+w,n-=this.embeddedStyleObj.inputLeft+this.embeddedStyleObj.inputRight,a.Z.isOpera()&&(r+=2),l?t[p].parentNode.style.display="none":a.Z.isIE("6 7")&&(r-=2),i.setSize(n-2,r-(this.embeddedStyleObj.inputTop+this.embeddedStyleObj.inputBottom)),i.setStyle("lineHeight",r+"px")}}else if("calendar"==t[p].getAttribute(h)){e=t[p].getAttribute(c),o=this.cellInfoHash[e];var S=null;if(1==o.options.embeddedInput){S=this.getInput(o,t[p]),null==this._getWrapperTD(S.render.parentNode)&&(g.innerHTML="",g.appendChild(S.render)),"none"==t[p].parentNode.style.display&&(t[p].parentNode.style.display="",l=!0),r=t[p].offsetHeight-parseInt(WebSquare.style.getStyle(t[p],"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t[p],"border-bottom-width"),10),r-=this.embeddedCalendarStyleObj.top+this.embeddedCalendarStyleObj.bottom;f=parseInt(t[p].getAttribute(d),10);this.embeddedWidthObj[f]&&!this.embeddedWidthObj[f].isChanged||(this.embeddedWidthObj[f]={isChanged:!1,width:t[p].clientWidth}),n=this.embeddedWidthObj[f].width,n-=this.embeddedCalendarStyleObj.left+this.embeddedCalendarStyleObj.right,l?t[p].parentNode.style.display="none":a.Z.isIE("6 7")&&(r-=2),S.setSize(n-2,r)}}}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.applyCellStyleOptions=function(t,e,i,o){try{var r=this._getTrIndex(t),n=this._getTdElem(t,e);if(n){var l,h,d,c=[],u=!1;if("number"==typeof e?(l=e,h=this.cellIdList[e]):(l=this.bodyIdColIndexMap[e],h=e),this._linkedDataList)d=this._linkedDataList.filteredRowIndexArr[t];else if(this.groupbyStatus.grouped){var p=!0
;for(var g in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[g]){d=this._dataList.filteredRowIndexArr[t],p=!1;break}p&&(d=this.groupbyStatus.groupedRowIndexArr[t])}else d=this._dataList.filteredRowIndexArr[t];var m=this.cellInfoHash[h]||{options:{}};if("custom"==m.options.inputType&&(m=m.cellManagerHashByRowIndex[d]?m.cellManagerHashByRowIndex[d]:m),"crosstab"==this.options.adaptive&&this.hasClass("w2grid_adaptive_crosstab")&&"true"==m.options.hidden)return;null!=this.initStyleValueObj[l]&&c.push(this.initStyleValueObj[l].style),""!=m.options.textAlign&&c.push("text-align:"+m.options.textAlign),this.options.adjustAlign&&"left"==m.options.textAlign&&c.push("padding-left:"+this.options.adjustAlign+"px"),null!=this.defaultStyleValueObj[l]&&c.push(this.defaultStyleValueObj[l].style);var f=null,b=null,y=null,v=null,w=null,S=null,_=!1;(t<this.options.fixedRow||l<this.options.fixedColumn||l>=this.tdIdList.length-this.options.fixedRightColumn)&&(_=!0),null!=d?(f="number"==typeof d?this.rowStyleArr[d]:this.rowStyleArr[d.type+"_"+d.groupId],b="number"==typeof d?this.rowStyleFixedArr[d]:this.rowStyleFixedArr[d.type+"_"+d.groupId],y="number"==typeof d?this.rowStyleDataArr[d]:this.rowStyleDataArr[d.type+"_"+d.groupId],w="number"==typeof d?this.cellStyleArr[d*this.oneRowDataLength+l]:this.cellStyleArr[d.type+"_"+d.groupId+"_"+l],S=this.cellClassArr[d*this.oneRowDataLength+l],v="number"==typeof d?this.rowClassArr[d]:this.rowClassArr[d.type+"_"+d.groupId]):(S=this.cellClassArr[t*this.oneRowDataLength+l],v=this.rowClassArr[t]),null!=f&&c.push(this.rowStyleValueObj[f].style),null!=b&&_&&c.push(this.rowStyleFixedValueObj[b].style),null==y||_||c.push(this.rowStyleDataValueObj[y].style);var C=this.columnStyleValueObj[l],x=this.columnStyleFixedValueObj[l],I=this.columnStyleDataValueObj[l];null!=C&&c.push(this.columnStyleValueObj[l].style),null!=x&&_&&c.push(this.columnStyleFixedValueObj[l].style),null==I||_||c.push(this.columnStyleDataValueObj[l].style),null!=this.adaptiveColumnStyleValueObj[l]&&!0===this.checkRefreshAdaptive()&&c.push(this.adaptiveColumnStyleValueObj[l].style),null!=w&&c.push(this.cellStyleValueObj[w].style),f=="rowResizeStyle_"+t&&c.push(this.rowStyleValueObj[f].style);var T=this.___getEditReadOnly(t,e),k=this.cellDisabledArr[d*this.oneRowDataLength+l],L=k;if(!0!==k&&!1!==k){var A=m.options.disabled,D=this.rowDisabledArr[d],W=this.options.disabledPriority;!0!==D&&!1!==D&&(D=""),k="column"===W&&""!==A?A:"row"===W&&""!==D?D:A+""=="true"||D+""=="true"||A+""!="false"&&D+""!="false"&&(""!==this.options.disabled&&this.options.disabled)}var q=!0===k||"true"===k;""!=this.options.readOnlyBackgroundColor&&"number"==typeof d&&(1==T?(c.push(this.readOnlyTdStyle),n.readOnly=!0,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||(q?n.setAttribute("tabIndex",-1):n.setAttribute("tabIndex",0)))),""==this.options.readOnlyBackgroundImg&&""==this.options.readOnlyBackgroundImgCSS||(1==T?(c.push(this.readOnlyTdImg),this.options.readOnlyBackgroundImgCSS||(a.Z.isIE(8)||a.Z.isIE(6)||a.Z.isIE(7))&&(c.push("filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\""),c.push("-ms-filter: \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', src='"+this.options.readOnlyBackgroundImg+"', sizingMethod='scale')\"")),n.readOnly=!0,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):(n.readOnly=!1,"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||(q?n.setAttribute("tabIndex",-1):n.setAttribute("tabIndex",0)))),n.disabled=!1,n.removeAttribute("disabled"),q&&(c.push(this.disabledTdStyle),
this.disabledCellStyleObj&&this.disabledCellStyleObj[t+"_"+e]&&this.disabledCellStyleObj[t+"_"+e].style&&c.push(this.disabledCellStyleObj[t+"_"+e].style));var M=this.options.focusMode;if(o&&(M="cell"),!i&&"transparent"!=this.options.selectedRowColor&&("row"==M||"both"==M))for(var E=0;E<this.focusedCell.length;E++)if(t==this.focusedCell[E].focusedRowIndex&&!("row"==this.options.focusMode&&1==this.options.fixedColumnNoBGColor&&e<this.options.fixedColumn)){c.push("background-color:"+this.options.selectedRowColor),u=!0;break}if(!i&&"transparent"!=this.options.selectedCellColor&&("cell"==M||"both"==M))for(E=0;E<this.focusedCell.length;E++)if(t==this.focusedCell[E].focusedRowIndex&&e==this.focusedCell[E].focusedColIndex){c.push("background-color:"+this.options.selectedCellColor),u=!0;break}("none"!=n.style.display||this.hiddenCellObj.length>0)&&!0!==this.hiddenCellObj[t+"_"+e]||c.push("display:none");var R=!1;this.hiddenCellObj.length>0&&(!0===this.hiddenCellObj[t+"_"+e]&&"none"!==n.style.display||!0!==this.hiddenCellObj[t+"_"+e]&&"none"===n.style.display)&&(R=!0);var N=c.join(";"),F=a.Z.getDataPrefix("style_bak"),O=a.Z.getDataPrefix("colMerged"),B=a.Z.getDataPrefix("or_bgColor"),P=n.style.borderBottomWidth;(N!=n.getAttribute(F)||this.groupbyStatus.grouped||R)&&(n.style.cssText=N);var Y=this.cellStyleValueObj[w];if(Y&&Y["background-repeat"]?n.style.backgroundRepeat=Y["background-repeat"]:Y&&Y["background-size"]?n.style.backgroundSize=Y["background-size"]:Y&&Y["background-position"]&&(n.style.backgroundPosition=Y["background-position"]),this.isColMerge&&m.options.colMerge&&!this.groupbyStatus.grouped){n.setAttribute(O,"0");var V=this.drawColMergeCellData(r,t,e);if(this.options.senseReader&&P&&-1!=P.indexOf("px")&&(n.style.borderBottomWidth=P),"mergeCellBackgroundColor"===V&&!u){var H,j=this.getCellStyleValue(t-1,h,"background-color",!0)||this.getColumnStyleValue(e,"background-color"),z=!0;n.readOnly||this.__getEditReadOnly(n,t)?(H=j,this.options.readOnlyBackgroundColor?H=this.options.readOnlyBackgroundColor:(m.options.readOnlyClass||this.options.readOnlyClass)&&(z=!1)):(H=""!=j?j:t%2?this.options.oddRowBackgroundColor:this.options.evenRowBackgroundColor,this.options.disabledClass&&q&&(z=!1)),z&&(n.style.backgroundColor=H,this._setMergeCellBackground(t,h,H)),""!=m.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,m.options.readOnlyClass):this.removeClass(n,m.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.__getEditReadOnly(n,t)?this.addClass(n,this.options.readOnlyClass):this.removeClass(n,this.options.readOnlyClass))}}if(n.setAttribute(F,N),n.setAttribute(B,n.style.backgroundColor),this.cellReadOnlyArr[d*this.oneRowDataLength+e]||T?(n.setAttribute("readonly","true"),this.options.senseReader&&!m.options.embeddedInput?"linear"===this.options.focusFlow&&"button"!=m.options.inputType&&n.setAttribute("tabIndex",-1):"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||n.setAttribute("tabIndex",-1)):!1===this.cellReadOnlyArr[d*this.oneRowDataLength+e]||!1===T?(n.setAttribute("readonly","false"),this.options.senseReader&&!m.options.embeddedInput?"linear"===this.options.focusFlow&&(q?n.setAttribute("tabIndex",-1):n.setAttribute("tabIndex",0)):"linear"!==this.options.focusFlow||!0!==this.options.readOnlyTabIgnore||m.options.embeddedInput||(q?n.setAttribute("tabIndex",-1):n.setAttribute("tabIndex",0))):n.removeAttribute("readonly"),null!=S){var G=r*this.oneRowDataLength+e;this.tdCellClassArr[G]&&this.tdCellClassArr[G]!=S&&this.removeClass(n,this.tdCellClassArr[G]),this.tdCellClassArr[G]=S,this.addClass(n,S)}else{G=r*this.oneRowDataLength+e;this.tdCellClassArr[G]&&(this.removeClass(n,this.tdCellClassArr[G]),this.tdCellClassArr[G]=void 0)}if(null!=v){G=r;this.trRowClassArr[r]&&this.trRowClassArr[r]!=v&&this.removeClass(n.parentNode,this.trRowClassArr[r]),this.trRowClassArr[r]=v,this.addClass(n.parentNode,v)
}else this.trRowClassArr[r]&&(this.removeClass(n.parentNode,this.trRowClassArr[r]),this.trRowClassArr[r]=void 0);if(""!=m.options.disabledClass&&(q?this.addClass(n,m.options.disabledClass):this.removeClass(n,m.options.disabledClass)),!0!==L&&"true"!==L||(""!=this.options.disabledClass?this.addClass(n,this.options.disabledClass):this.removeClass(n,this.options.disabledClass)),""!=this.options.hiddenClass||""!=m.options.hiddenClass){var Z=this.options.hiddenClass;""!=m.options.hiddenClass&&(Z=m.options.hiddenClass);var U=this._getRealColIndex("body",m.options.col_id)+this.defaultColCnt;this.hiddenList[U]?this.addClass(n,Z):this.removeClass(n,Z)}}}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.dynamicMergeHTML=function(){try{for(var t in this.tdMergeInfo){var e=this.data_td_list[t];this.tdMergeInfo[t].orgColSpan>1?e.setAttribute("colSpan",this.tdMergeInfo[t].orgColSpan):e.removeAttribute("colSpan"),this.tdMergeInfo[t].orgRowSpan>1?e.setAttribute("rowSpan",this.tdMergeInfo[t].orgRowSpan):e.removeAttribute("rowSpan"),e.style.display=this.tdMergeInfo[t].display,delete this.tdMergeInfo[t]}var i=this.getRowCount(),o=!0===this._isBrowserScroll()?i:Math.min(this.lastIndex+2,i),r=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=!1;for(var l in this.cellMergeInfo){var h=l.split("_"),d=Number(h[0]),c=d;if(!(r&&(d=this.getDisplayRowIndex(d),isNaN(d)||d<0))){var u=Number(h[1]),p=d;this.rowIndex>=0&&(this.options.fixedRow>0&&this.options.fixedRow>d||this.options.lastFixedRow>0&&d>this.lastIndex-this.options.lastFixedRow||(p-=this.rowIndex));var g=this.cellMergeInfo[l].rowSpan,m=this.cellMergeInfo[l].colSpan;if(r){for(var f=g,b=0;b<f;b++)0==this.drilldown.statusArr[c+b]&&g--;g=Math.max(g,1)}var y=0;if(this.hiddenRowObj.length>0)for(b=this.rowIndex;b<d;b++)this._getRowVisible(b)||y++;if(!(p<0&&p+g<=0||p-y>=o||(p<this.options.fixedRow&&p+g>this.options.fixedRow&&(g=p+g-this.options.fixedRow-y,p=this.options.fixedRow),p<this.options.fixedRow&&d>=this.options.fixedRow))){var v=0,w=0;if(this.hiddenRowObj.length>0)for(b=0;b<g;b++)this._getRowVisible(p+b+this.rowIndex)||(w++,b===v&&v++);p+(g-=w)>o+y&&(g=o-p+y);var S=g,_=this.oneRowLength;for(b=0;b<S;b++){for(var C=!1,x=0;x<m;x++){t=(p+b)*this.oneRowDataLength+(u+x);if(null!=(e=this.data_td_list[t]))if(this.hiddenRowObj.length>0&&!this._getRowVisible(p+b+this.rowIndex))e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),C=!0;else if(this.tdMergeInfo[t]={orgColSpan:e.getAttribute("colSpan"),orgRowSpan:e.getAttribute("rowSpan"),display:e.style.display},b===v&&0===x){m>1?(e.setAttribute("colSpan",m),n=!0):e.removeAttribute("colSpan");var I=g*_;if(I>1)if(_>1){var T=parseInt(e.getAttribute("rowSpan"),10);!isNaN(T)&&T>1&&(e.setAttribute("rowSpan",I),n=!0)}else e.setAttribute("rowSpan",g),n=!0;else e.removeAttribute("rowSpan");e.style.display=""}else e.removeAttribute("colSpan"),e.removeAttribute("rowSpan"),e.style.display="none"}!0===C&&S++}}}}!0===n&&this.isWebKit&&a.Z.setTimeout(this.redrawTable,{key:this.id+"_dynamicMergeHTML",delay:50,caller:this})}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.createSubtotalRows=function(t){var e=[];for(var i in this.subtotalTableList){var o=this.subtotalRowHash[i];null==o&&(o=[]);for(var s=this.subtotalTableList[i],r=0;r<s.rows.length;r++){var a=s.rows[r].cloneNode(!0);if(a.style.display="none",this.options.rowNumStatusUniqueId)for(var n=a.getElementsByTagName("td"),l=0;l<this.defaultColCnt;l++){var h=n[l].getAttribute("id");"_headerRowNumber"!==h&&"_headerRowStatus"!==h||n[l].setAttribute("id",h+"_subtotal_"+t)}a.setAttribute("data-subtotal",i+"_"+r),o.push(a),e.push(a)}this.subtotalRowHash[i]=o}return e},x.prototype.addBodyRow=function(t,e){var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=0,n=0,l="grid_body_row"
;!0===this._isBrowserScroll()&&(l+=" "+this.options.gridNativeClass);for(var h=a.Z.getDataPrefix("tdIndex"),d=a.Z.getDataPrefix("or_wd"),c=a.Z.getDataPrefix("col_id"),u=a.Z.getDataPrefix("width"),p=0;p<e.length;p++){this.dataRowList.push(e[p]),e[p].className=l;for(var g=e[p].getElementsByTagName("td"),m=0;m<g.length;m++){var f=g[m],b=f.className;f.setAttribute(h,t*this.realRowDataLength+r),f.removeAttribute("title");var y=f.getAttribute(u);if(y&&(f.removeAttribute(u),f.setAttribute(d,y)),this.options.rowNumStatusUniqueId){var v=f.getAttribute("id");"_headerRowNumber"!==v&&"_headerRowStatus"!==v||f.setAttribute("id",v+"_bodyRow_"+t)}if(r++,this.all_data_td_list.push(f),i.test(b))this.data_num_td_list.push(f);else if(o.test(b))this.data_status_td_list.push(f);else if(!this.hasSubtotal||s.test(b)){this.data_td_list.push(f);var w=this.id+"_columnstyle_"+n+"_";this.addClass(f,w);var S=f.getAttribute(c),_=this.getCellInfo(S);if(this.addClass(f,_.options.className),f.style.cssText=""==_.options.textAlign?"":"text-align:"+_.options.textAlign+";",f.setAttribute("id",this.id+"_cell_"+t+"_"+n),this.options.fixedColumn>0){var C=this.getFixedColumnLastIndex();C==m&&this.addClass(f,"w2grid_fixedColumn"),C>m&&this.addClass(f,"w2grid_fixedColumn_td")}if(this.options.fixedRightColumn>0){var x=this.getFixedRightColumnLastIndex();x==m&&this.addClass(f,"w2grid_fixedRightColumn"),x<=m&&this.addClass(f,"w2grid_fixedRightColumn_td")}n++,"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(_.options.embeddedInput||"custom"==_.options.inputType&&1==this.options.senseReader||("link"!=_.options.inputType&&"button"!=_.options.inputType&&"image"!=_.options.inputType&&"user"!=_.options.inputType&&"ul"!=_.options.tableRender&&("expression"==_.options.inputType&&1==this.options.senseReader||f.setAttribute("tabIndex","0")),this.event.addListener(f,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}!0===this._isBrowserScroll()&&this.addClass(f,this.options.gridNativeClass)}}var I=[];if(!this.options.duplicateColumnId){for(p=0;p<e.length;p++){g=e[p].getElementsByTagName("td");var T=[];for(m=0;m<g.length;m++)T[m]=g[m];for(m=0;m<T.length;m++){b=T[m].className;i.test(b)||o.test(b)||I.push(T[m].parentNode.removeChild(T[m]))}}for(p=0;p<this.htmlInfo.body.rowArr.length;p++)for(m=0;m<this.htmlInfo.body.rowArr[p].length;m++)for(var k=this.htmlInfo.body.rowArr[p][m].col_id,L=0;L<I.length;L++)if(I[L].getAttribute(c)==k){e[p].appendChild(I[L]);break}}},x.prototype.addBodyRow2=function(t,e){for(var i=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowNumber(\\s|$)"),o=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_rowStatus(\\s|$)"),s=new RegExp("(^|\\s)"+this.options.bodyTdClass+"_data(\\s|$)"),r=[],n=a.Z.getDataPrefix("tdIndex"),l=a.Z.getDataPrefix("or_wd"),h=a.Z.getDataPrefix("col_id"),d=a.Z.getDataPrefix("width"),c=0;c<e.length;c++){this.dataRowList.push(e[c]),e[c].className="grid_body_row";for(var u=e[c].getElementsByTagName("td"),p=0;p<u.length;p++){var g=u[p],m=g.className,f=parseInt(g.getAttribute(n),10)%this.realRowDataLength;g.setAttribute(n,t*this.realRowDataLength+f),g.removeAttribute("title");var b=g.getAttribute(d);if(b&&(g.removeAttribute(d),g.setAttribute(l,b)),this.options.rowNumStatusUniqueId){var y=g.getAttribute("id");"_headerRowNumber"!==y&&"_headerRowStatus"!==y||g.setAttribute("id",y+"_bodyRow_"+t)}if(i.test(m))this.data_num_td_list.push(g),this.all_data_td_list.push(g);else if(o.test(m))this.data_status_td_list.push(g),this.all_data_td_list.push(g);else if(!this.hasSubtotal||s.test(m)){var v=f-this.defaultColCnt;r[v]=g;var w=this.id+"_columnstyle_"+v+"_";this.addClass(g,w);var S=g.getAttribute(h),_=this.getCellInfo(S);this.addClass(g,_.options.className),g.style.cssText=""==_.options.textAlign?"":"text-align:"+_.options.textAlign+";",g.setAttribute("id",this.id+"_cell_"+t+"_"+v),
"linear"==this.options.focusFlow&&"none"!=this.options.focusMode&&(_.options.embeddedInput||("link"!=_.options.inputType&&"button"!=_.options.inputType&&"image"!=_.options.inputType&&g.setAttribute("tabIndex","0"),this.event.addListener(g,"onfocus",this.event.bindAsEventListener(this,this.handleTdFocus))))}}}[].push.apply(this.all_data_td_list,r),[].push.apply(this.data_td_list,r)},x.prototype.addRows=function(t){for(var e=this.drawedRowLength,i=[],o=0;o<t;o++){for(var s=0;s<this.oneRowLength;s++){var r=this.tempTr.rows[s].cloneNode(!0);i.push(r)}this.addBodyRow(e+o,[]),this.hasSubtotal&&(i=i.concat(this.createSubtotalRows(e+o)))}var a=this.getElementById(this.id+"_body_tbody");for(o=0;o<i.length;o++)a.appendChild(i[o])},x.prototype.notifyStatusChanged=function(t){var e,i,o=!1;"object"==(0,l.A)(t.rowIndex)?(e=0,i=t.rowIndex.length,o=!0):"all"==t.rowIndex?(e=0,i=this.getRowCount()):"number"==typeof t.startIndex&&"number"==typeof t.endIndex&&(e=t.startIndex,i=t.endIndex);for(var s=e;s<i;s++){var r;if(r=o?t.rowIndex[s]:s,null!=this.rowStatusColIDArr)for(var a=0;a<this.rowStatusColIDArr.length;a++){var n=this.getColumnIndex(this.rowStatusColIDArr[a]);this.drawCellData(r-this.rowIndex,r,n)}}this.hasFooter&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&this.drawFooter(),this.hasSubtotal&&(this.options.excludeDeletedRows||this.options.excludeModifiedRows)&&(this.subtotalHidden({startRowIndex:0}),this.refreshSubtotalRow(this.rowIndex))},x.prototype.refreshColumn=function(t){try{t=this.getColumnIndex(t),this.redrawColumn(t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.refreshRow=function(t){try{var e=t-this.rowIndex;this.drawRowData(e,t)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype.refreshCell=function(t,e){try{e=this.getColumnIndex(e);var i=t-this.rowIndex;this.drawCellData(i,t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._setVisibleRowNumFix=function(){try{if(!this.options.visibleRowNumFix)return;var t=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(isNaN(t)||t<0||""==t)return;!0===this._visibleRowNumFixResetFlag&&this.setTrRowTable();var e=this._getVisibleRowNumHeight(!0);this.setSize(null,e)}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._getVisibleRowNumHeight=function(t){try{var e=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;if(isNaN(e))return 0;!0===t&&this.oneRowLength>1&&(e*=this.oneRowLength);var i=this.getElementById(this.id+"_scrollX_div"),o=parseInt(i.style.height,10),r=0;this.hasFooter&&(r=0==(r=this.getElementById(this.id+"_foot_table").offsetHeight)?this.footerHeight:r);var a=this.getElementById(this.id+"_head_table").offsetHeight;return this.oneRowHeight*e+a+o+r+1}catch(t){s.Y.printStackTrace(t,null,this)}},x.prototype._getDrawedRowCount=function(){try{for(var t=0,e=this.getElementById(this.id+"_body_tbody").childNodes,i=0;i<e.length;i++){e[i].offsetHeight>0&&t++}}catch(e){s.Y.printStackTrace(e,null,this),t=this.drawedRowLength}return t};var I=function(){};I.prototype.setCellInfo=function(){for(var t=a.Z.getDataPrefix("inputType"),e=a.Z.getDataPrefix("depthColumn"),i=a.Z.getDataPrefix("showDepth"),o=this.tempDiv.getElementsByTagName("td"),s=0;s<o.length;s++){"drilldown"==o[s].getAttribute(t)&&(this.isDrillDown=!0,this.depthColumn=o[s].getAttribute(e),this.showDepth=o[s].getAttribute(i),this._dataList.options.depthColumn||"grid"==this.options.pluginName&&!this.options.drilldownRealRowIndex||(this._dataList.options.depthColumn=this.depthColumn))}},I.prototype.setDataListCellInfo=function(){if(this.successBinding)for(var t=this.getColCnt(),e=0;e<t;e++){var i=this.getColumnID(e),o=this.getCellInfo(i);if(o&&o.options&&o.options.importExp){var s=this._dataList.getCellInfo(i);s&&s.options&&!s.options.importExp&&(s.options.importExp=o.options.importExp)}}},I.prototype.setInnerHTML=function(t,e,i,o){
var s=this.getColumnID(i),r=this.dataList._getCellData(e,s),a=this.cellInfoHash[this.tdIdList[i]];""===r&&(r=a.options.groupName?this.dataList._getCellData(e,a.options.groupName)==a.options.groupValue?a.options.trueValue:a.options.falseValue:a.options.defaultValue);if(a.setInnerHTML(t,r,e,i,o),""!=a.options.disabledClass&&(this._getEditDisabled(e,i)?this.addClass(t,a.options.disabledClass):this.removeClass(t,a.options.disabledClass)),""!=this.options.disabledClass&&!1===this.options.disabled&&(this._getEditDisabled(e,i)?this.addClass(t,this.options.disabledClass):this.removeClass(t,this.options.disabledClass)),""!=a.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,a.options.readOnlyClass):this.removeClass(t,a.options.readOnlyClass)),""!=this.options.readOnlyClass&&(this.___getEditReadOnly(e,s)?this.addClass(t,this.options.readOnlyClass):this.removeClass(t,this.options.readOnlyClass)),""!=this.options.hiddenClass||""!=a.options.hiddenClass){var n=this.options.hiddenClass;""!=a.options.hiddenClass&&(n=a.options.hiddenClass);var l=this._getRealColIndex("body",s)+this.defaultColCnt;this.hiddenList[l]?this.addClass(t,n):this.removeClass(t,n)}},I.prototype.getCellInfo=function(t){try{var e=a.Z.getDataPrefix("col_id"),i="";return i="string"==typeof t?t:"number"==typeof t?this.tdIdList?this.tdIdList[t]:"":t?t.getAttribute(e):null,this.cellInfoHash[i]||{options:{}}}catch(t){s.Y.printStackTrace(t,null,this)}},I.prototype._endEdit=function(){null!=this.editedCell&&this.editedCell.handleEndEdit()},I.prototype.initColumns=function(){for(var t in this.cellInfoHash){var e=this.cellInfoHash[t];if("select"==e.options.inputType&&(e.initializeCellInfo(e.element),e.style="",e.comp=null),this.options.initColumns)for(var i in e.dynamicAttrInfo){var o=e.dynamicAttrInfo[i];o&&(e.options[i]=o.originalValue,"displayFormat"!=i&&"displayFormatter"!=i||e.initFormatter())}}},I.prototype.initHeaders=function(){for(var t in this.headerInfoHash){"checkbox"==this.headerInfoHash[t].options.inputType&&this.setHeaderValue(t,!1)}},I.prototype._setCellInfo=function(t,e){this.cellInfoHash2[t]=e},I.prototype.getColumnCount=function(){return this.tdIdList.length},I.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[t];return e||null},I.prototype.getMovedColumnID=function(t){if("string"==typeof t)return t;var e=this.tdIdList[this.columnOrder[t]];return e||null},I.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},I.prototype.getDisplayColumnIndex=function(t){return"number"==typeof t?t:this.colMoveIndexMap[t]},I.prototype.setExpressionAssociation=function(t,e){try{null==this.expressionAssArr[t]&&(this.expressionAssArr[t]=[]),this.expressionAssArr[t].push(e)}catch(t){s.Y.printStackTrace(t,null,this)}},I.prototype.setLabelColumnAssociation=function(t,e){try{null==this.labelColumnAssArr[t]&&(this.labelColumnAssArr[t]=[]),this.labelColumnAssArr[t].push(e)}catch(t){s.Y.printStackTrace(t,null,this)}},I.prototype.setCellEditMode=function(t,e){this.hideTooltip();var i=this.getCellInfo(t);this.editedCell=i,this.rollbackCommitFlag=!1;var o=this.render.offsetWidth,s=this.render.offsetHeight;i.setEditMode(t,e),o===this.render.offsetWidth&&s===this.render.offsetHeight||(this.handleResize(),i.setEditMode(t,e)),this.rollbackCommitFlag=!0},I.prototype.setCellClickEdit=function(t){var e=this.getElemRowIndex(t),i=this.getCellInfo(t);if("custom"==i.options.inputType&&!i.internal){var o=e;this.isDrillDown&&this._dataList.options.depthColumn&&(o=this.getRealRowIndex(e)),i=i.cellManagerHashByRowIndex[o]?i.cellManagerHashByRowIndex[o]:i}var s=!1;switch(i.options.inputType){case"checkbox":case"radio":case"drilldown":s=i.handleClick(t,e)}return s},I.prototype.getInput=function(t,e,i){var n=t.options.inputType||"text",l=t.options.embeddedInput,h=this.getColumnOption(t.id,"dataType");"text"===n&&"number"===h&&"true"===this.options.floatNumber&&(h="float",t.options.dataType="float")
;var d,c="bigDecimal"==h,g=this;if(this.options.titleFormatter&&e)try{if("function"!=typeof this.options.titleFormatter){var m=a.Z.getGlobalFunction(this.options.titleFormatter,this.scope_id);"function"==typeof m&&(this.options.titleFormatter=m,d=m.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i))}else d=this.options.titleFormatter.call(this,this.getElemRowIndex(e),this.getColumnIndex(t.id),i)}catch(t){s.Y.printStackTrace(t,null,this)}var f,b=a.Z.getDataPrefix("col_id"),y=a.Z.getDataPrefix("rowIndex"),v=a.Z.getDataPrefix("rowindex");if(e&&e instanceof HTMLElement&&(f=this._getWrapperCell(e,e.getAttribute(v))),l){if("custom"==t.options.inputType&&!t.internal){var w=this.getElemRowIndex(e);this.isDrillDown&&this._dataList.options.depthColumn&&(w=this.getRealRowIndex(w)),t=t.cellManagerHashByRowIndex[w]?t.cellManagerHashByRowIndex[w]:t}t.parentColumnInfo?S=this.id+"_"+t.id:e?S=e.getAttribute("id")+"_"+n:"calendar"===n&&(S=this.id+"_cell_0_0_"+n),this.fakeInput||"text"!=n&&"secret"!=n&&"calendar"!=n&&"textImage"!=n||(this.makeFakeInput=function(){this.fakeInput=new WebSquare.uiplugin.input(this.id+"_fakeInput",{style:"visibility:hidden;position:absolute;z-index:100;background-color:"+this.options.selectedCellColor,className:"w2grid_embedded_input",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",useKeyupBlur:!1,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){g.lastEvent=t,u.f.stopEvent(t);var e=this;setTimeout((function(){e.lastInput.focus()}),1)}}},{name:"oncontextmenu",action:"script",param:{handler:function(t){g.lastEvent=t}}},{name:"ondblclick",action:"script",param:{handler:function(t){g.lastEvent=t,g.hideFakeInput(this),u.f.stopPropagation(t),g.F2Mode=!0,WebSquare.text.setCaretPos(this.lastInput.render,this.lastInput.render.value.length)}}}]}),this.fakeInput.setAction=function(){},this.fakeInput.writeTo(this.render),this.fakeInput.activate(),this.fakeInput.render.parentNode.removeChild(this.fakeInput.render);var t=null;this.showFakeInput=function(e){var i=this._getWrapperTD(e.render.parentNode);if(this.render.appendChild(this.fakeInput.render),!t){var o=this.all_data_td_list[0];t=1-o.offsetLeft}var s=this.getElementById(this.id+"_dataLayer");this.fakeInput.setPosition(i.offsetLeft+t-s.scrollLeft,i.offsetTop+t-s.scrollTop),this.fakeInput.setSize(i.clientWidth,i.clientHeight),a.Z.isIE()&&this.fakeInput.setVerticalAlign(),this.fakeInput.lastInput=e;var r=e.getStyle("text-align");r?this.fakeInput.setStyle("text-align",r):this.fakeInput.setStyle("text-align","")},this.hideFakeInput=function(t){this.fakeInput.render.parentNode&&this.fakeInput.render.parentNode.removeChild(this.fakeInput.render)}})}else var S=t.mainGridId+t.id;var _=!!(V=this.dom[S]);V&&(V.render?"select"!=n||!l||V.render.parentElement||this.groupbyStatus.grouped||(_=!1):V.ownerDocument&&!V.parentNode&&(_=!1)),_&&""!==d&&null!=d&&("text"==n?V.render.setAttribute("title",d):V.setAttribute("title",d));a.Z.getDataPrefix("dateValidCheck");if(_){if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){D=this.getElemRowIndex(e),W=this._getGroupbyDisplayRowIndex(D),q=(A=t.mainGridId+"_checkbox_"+t.id)+"_"+D,M=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(E=t.options.checkboxLabelColumn.split(","),R="",N=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",F=0;F<E.length;F++){O=this.bodyToHeaderRelation[E[F]];if(F===E.length-1)this.options.showCheckboxLabelUserFormat?R+=" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0}):R+=this._getCellDisplayData(D,E[F],{removeTag:!0});else if(this.options.showCheckboxLabelUserFormat){B=WebSquare.language.getMessage("Grid_row")||"row";R+=(0===F?D+1+B+N:"")+" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0})+N}else R+=this._getCellDisplayData(D,E[F],{removeTag:!0})+N}M=M?R+N+M:R}
if(t.options.checkboxLabelFormatter)try{"function"==typeof(P=a.Z.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(M=P.call(this,W,this.getColumnIndex(t.colID),M))}catch(e){p.v.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}t.getEscape()&&(M=WebSquare.xml._encode(M+"")),(C=e.getElementsByTagName("label")[0])&&(C.innerHTML=M)}}else if("radio"==n&&l){if(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter){var C;D=this.getElemRowIndex(e),W=this._getGroupbyDisplayRowIndex(D),z=(j=t.mainGridId+"_radio_"+t.id)+"_"+D,G=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(E=t.options.radioLabelColumn.split(","),R="",N=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",F=0;F<E.length;F++){O=this.bodyToHeaderRelation[E[F]];if(F===E.length-1)this.options.showRadioLabelUserFormat?R+=" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0}):R+=this._getCellDisplayData(D,E[F],{removeTag:!0});else if(this.options.showRadioLabelUserFormat){B=WebSquare.language.getMessage("Grid_row")||"row";R+=(0===F?D+1+B+N:"")+" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0})+N}else R+=this._getCellDisplayData(D,E[F],{removeTag:!0})+N}G=G?R+N+G:R}if(t.options.radioLabelFormatter)try{"function"==typeof(Z=a.Z.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(G=Z.call(this,W,this.getColumnIndex(t.colID),G))}catch(e){p.v.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}t.getEscape()&&(G=WebSquare.xml._encode(G+"")),(C=e.getElementsByTagName("label")[0])&&(C.innerHTML=G)}}else if("text"==n&&l){if(!(U=d||t.options.title||"")){I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";this.options.titleAuto&&(U=""==i||null==i?I:I+" "+i,V.render.title=U)}}this.options.titleFormatter&&l&&d&&V.title!==d&&(V.title=d)}else{if("text"!=n&&"secret"!=n&&"textImage"!=n||!l){if("select"==n&&l){var x=d||t.options.title||"";if(this.options.titleAuto&&!x){var I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";x=""!==i&&null!=i?I+" "+(this.changeItemValue("label",t.id,[i])[0]||i):I+WebSquare.language.getMessage("Grid_select")}V=new WebSquare.uiplugin.selectbox_native(S,{className:"w2grid_embedded_select",style:"$blank",pluginName:"selectbox",renderType:"native",title:x,emptyItem:t.options.emptyItem,chooseOption:t.options.chooseOption,chooseOptionLabel:t.options.chooseOptionLabel,_scope_obj_uuid:t.options._scope_obj_uuid,accessibility:this.options.accessibility,xmlEvents:[{name:"onmousedown",action:"script",param:{handler:function(t){var e=this.render.parentNode.getAttribute(b);g.getCellInfo(e).options.noDisabledOnReadOnly&&this.getReadOnly()?u.f.preventDefault(t):u.f.stopPropagation(t)}}},{name:"onkeydown",action:"script",param:{handler:function(t){switch(t.keyCode){case 38:case 40:case 27:return void u.f.stopPropagation(t)}}}}]},t.xml),f.innerHTML=V.toHTML();var T=WebSquare.uiplugin.selectbox_native.prototype.handleOnchange;V.handleOnchange=function(t){var e=g._getWrapperTD(this.render.parentNode).getAttribute(b),i=parseInt(this.render.getAttribute(v),10),o=g._getGroupbyDisplayRowIndex(i),s=g.getColumnIndex(e),r=this.selectedIndex,a=this.getValue();if(T.call(this,t),g.dataList.__setCellData(i,e,this.getValue()),g._dataList.setRowPosition(i),r!=this.selectedIndex){var n={oldValue:a,newValue:this.getValue(),oldSelectedIndex:r,newSelectedIndex:this.selectedIndex,rowIndex:i,colIndex:s,colId:g.getColumnID(s)};u.f.fireEvent(g,"onviewchange",n)}u.f.fireEvent(g,"onafteredit",o,s,this.getValue(),t)};var k=WebSquare.uiplugin.selectbox.prototype.refreshItemset;V.refreshItemset=function(t){var e=g._getWrapperTD(this.render.parentNode).getAttribute(b),i=parseInt(this.render.getAttribute(v),10);k.call(this,t);var o=g._dataList.getCellData(i,e);this.setValueNM(o)},V.activate();var L=V.uuid;V.event.addListener2(V.dom.select,"onfocus",(function(t){g.lastEvent=t;var e=WebSquare.idCache[L]
;g.getLastFocusedCell().focusedTd==g._getWrapperTD(e.render.parentNode)||g.focusedByApi||g._setFocusedCell(e.render.getAttribute(v),g._getWrapperTD(e.render.parentNode).getAttribute(b)),g.focusedByApi=!1}))}else if("checkbox"==n&&l){if(t.options.checkboxLabel||t.options.checkboxLabelColumn||t.options.checkboxLabelFormatter){var A,D=this.getElemRowIndex(e),W=this._getGroupbyDisplayRowIndex(D),q=(A=t.mainGridId+"_checkbox_"+t.id)+"_"+D,M=t.options.checkboxLabel||"";if(t.options.checkboxLabelColumn){for(var E=t.options.checkboxLabelColumn.split(","),R="",N=t.options.checkboxLabelDelimiter||this.options.labelDelimiter||" ",F=0;F<E.length;F++){var O=this.bodyToHeaderRelation[E[F]];if(F===E.length-1)this.options.showCheckboxLabelUserFormat?R+=" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0}):R+=this._getCellDisplayData(D,E[F],{removeTag:!0});else if(this.options.showCheckboxLabelUserFormat){var B=WebSquare.language.getMessage("Grid_row")||"row";R+=(0===F?D+1+B+N:"")+" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0})+N}else R+=this._getCellDisplayData(D,E[F],{removeTag:!0})+N}M=M?R+N+M:R}if(t.options.checkboxLabelFormatter)try{var P;"function"==typeof(P=a.Z.getGlobalFunction(t.options.checkboxLabelFormatter,t.scope_id))&&(M=P.call(this,W,this.getColumnIndex(t.colID),M))}catch(e){p.v.printLog(this.id+"_"+t.id+" checkboxLabelFormatter error : "+e.message)}H="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check'  id='"+q+"' name='"+A+"'/>",t.getEscape()&&(M=WebSquare.xml._encode(M+""));var Y="<label class='w2checkbox_label ' for='"+q+"'>"+M+"</label>";"left"===t.options.checkboxLabelPosition?H=Y+H:H+=Y,f.innerHTML=H;var V=f.getElementsByTagName("input")[0]}else{H="<INPUT style='border-width:0px;' type='checkbox' class='w2grid_embedded_check' />",f.innerHTML=H;V=f.getElementsByTagName("input")[0];if(d)V.title=d;else if(t.options.title)V.title=t.options.title;else if(this.options.titleAuto){I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";V.title=i?I+WebSquare.language.getMessage("Grid_title"):I+WebSquare.language.getMessage("Grid_title_not_choose"),M&&(V.title=V.title+M)}}if(this.event.addListener(V,"onclick",this.event.bindAsEventListener(this,(function(t){var e=u.f.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);if(!0===this.options.useShiftKeyCheck&&t.shiftKey){var l={td:o,rowIndex:s,checked:e.checked};this._ShiftKeyMultiCheck(this,l,o)}!0===this.options.useShiftKeyCheck&&(this.beforeChecked={td:o,rowIndex:s,checked:e.checked}),i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&u.f.preventDefault(t)}))),t.options.noDisabledOnReadOnly){var D=this.getElemRowIndex(e);this._getEditReadOnly(D,t.id)?this.addClass(V,this.options.readOnlyClass+"_nodisabled"):this.removeClass(V,this.options.readOnlyClass+"_nodisabled")}}else if("radio"==n&&l){var H;if(t.options.radioLabel||t.options.radioLabelColumn||t.options.radioLabelFormatter){var j,D=this.getElemRowIndex(e),W=this._getGroupbyDisplayRowIndex(D),z=(j=t.mainGridId+"_radio_"+t.id)+"_"+D,G=t.options.radioLabel||"";if(t.options.radioLabelColumn){for(var E=t.options.radioLabelColumn.split(","),R="",N=t.options.radioLabelDelimiter||this.options.labelDelimiter||" ",F=0;F<E.length;F++){var O=this.bodyToHeaderRelation[E[F]];if(F===E.length-1)this.options.showRadioLabelUserFormat?R+=" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0}):R+=this._getCellDisplayData(D,E[F],{removeTag:!0});else if(this.options.showRadioLabelUserFormat){var B=WebSquare.language.getMessage("Grid_row")||"row";R+=(0===F?D+1+B+N:"")+" "+this.getHeaderValue(O)+" "+this._getCellDisplayData(D,E[F],{removeTag:!0})+N}else R+=this._getCellDisplayData(D,E[F],{removeTag:!0})+N}G=G?R+N+G:R}
if(t.options.radioLabelFormatter)try{var Z;"function"==typeof(Z=a.Z.getGlobalFunction(t.options.radioLabelFormatter,t.scope_id))&&(G=Z.call(this,W,this.getColumnIndex(t.colID),G))}catch(e){p.v.printLog(this.id+"_"+t.id+" radioLabelFormatter error : "+e.message)}H="<INPUT style='border-width:0px;' type='radio' class='w2grid_embedded_radio'  id='"+z+"' name='"+j+"'/>",t.getEscape()&&(G=WebSquare.xml._encode(G+""));Y="<label class='w2radio_label ' for='"+z+"'>"+G+"</label>";"left"===t.options.radioLabelPosition?H=Y+H:H+=Y,f.innerHTML=H;V=f.firstChild}else{H="<INPUT style='border-width:0px;' type='radio' name='"+(t.mainGridId+"_radio_"+t.id)+"' class='w2grid_embedded_radio' />",f.innerHTML=H;V=f.firstChild;if(d)V.title=d;else if(t.options.title)V.title=t.options.title;else if(this.options.titleAuto){I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";V.title=i?I+WebSquare.language.getMessage("Grid_title"):I+WebSquare.language.getMessage("Grid_title_not_choose"),G&&(V.title=V.title+G)}}if(this.event.addListener(V,"onclick",this.event.bindAsEventListener(this,(function(t){var e=u.f.getTarget(t);this.lastEvent=t;var i=this.getLastFocusedCell(),o=e.parentNode,s=this.getElemRowIndex(o),r=this.getCellInfo(o),a=r.id,n=this.getColumnIndex(a);i.focusedTd==e.parentNode||this.focusedByApi||this._setFocusedCell(s,a),this.focusedByApi=!1,r.options.noDisabledOnReadOnly&&this._getEditReadOnly(s,n)&&u.f.preventDefault(t)}))),t.options.noDisabledOnReadOnly){D=this.getElemRowIndex(e);this._getEditReadOnly(D,t.id)?this.addClass(V,this.options.readOnlyClass+"_nodisabled"):this.removeClass(V,this.options.readOnlyClass+"_nodisabled")}}else if("calendar"==n&&l){var U=d||t.options.title||"";if(this.options.titleAuto&&!U){I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";U=""!==i?I+" "+i:I+WebSquare.language.getMessage("Grid_calendar")}var X=t.options.ioFormat,K={style:"width:0px; height:0px;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:X,ioFormatter:"$blank",displayFormat:t.options.displayFormat||X,displayFormatter:t.options.displayFormatter,displayFormatFunc:t.options.displayFormatFunc,calendarDisplayFormatFunc:t.options.calendarDisplayFormatFunc,footerDiv:!0,renderDiv:!0,keepFocusSelect:!0,focusOnOuterDiv:!0,renderType:"native",readOnly:"$blank",disabled:"$blank",title:U,validCheck:!1,_scope_obj_uuid:t.options._scope_obj_uuid,senseReader:t.options.senseReader,accessibility:this.options.accessibility,disableAfterDate:t.options.disableAfterDate,disableBeforeDate:t.options.disableBeforeDate,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(y),10),i=g._getWrapperTD(this.render.parentNode).getAttribute(b),o=g.getColumnIndex(i);u.f.fireEvent(g,"oncellclick",e,o,i),u.f.stopPropagation(t)}}},{name:"onafterviewchange",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(v),10),i=g._getGroupbyDisplayRowIndex(e),o=g.getColumnIndex(g._getWrapperTD(this.render.parentNode).getAttribute(b));t.oldValue!=t.newValue&&u.f.fireEvent(g,"onviewchange",{oldValue:t.oldValue,newValue:t.newValue,rowIndex:i,colIndex:o,colId:g.getColumnID(o)})}}},{name:"ondateselect",action:"script",param:{handler:function(t,e){this.options.senseReader||this.dom.input.blur();var i=this.render.getAttribute(v),o=g._getWrapperTD(this.render.parentNode).getAttribute(b),s=this.getValue();g.dataList.__setCellData(i,o,s),i=parseInt(i,10);var r=g.getColumnIndex(o);u.f.fireEvent(g,"ondateselect",i,r,t,e)}}},{name:"onconfirm",action:"script",param:{handler:function(){this.options.senseReader||this.dom.input.blur();var t=this.render.getAttribute(v),e=g._getWrapperTD(this.render.parentNode).getAttribute(b),i=V.validator.validateString(this.getValue());g.dataList.__setCellData(t,e,i)}}},{name:"onyearselect",action:"script",param:{handler:function(t){
var e=parseInt(this.render.getAttribute(v),10),i=g.getColumnIndex(g._getWrapperTD(this.render.parentNode).getAttribute(b));u.f.fireEvent(g,"onyearselect",e,i,{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onmonthselect",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(v),10),i=g.getColumnIndex(g._getWrapperTD(this.render.parentNode).getAttribute(b));u.f.fireEvent(g,"onmonthselect",e,i,{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onbeforepaste",action:"script",param:{handler:function(t){var e={rowIndex:parseInt(this.render.getAttribute(v),10),colIndex:g.getColumnIndex(this.render.parentNode.getAttribute(b)),data:[[t]]};return u.f.fireEvent(g,"onbeforepaste",e)}}}]};V=new WebSquare.uiplugin.inputCalendar(S,K,t.element);try{t.element&&!t.element.getAttribute("dateValidCheck")&&(V.options.dateValidCheck=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false")}catch(t){s.Y.printStackTrace(t,null,this)}if(l&&!e)return V;f.innerHTML="",V.writeTo(f),V.parentControl||this.addControl(V),X!=V.options.ioFormat&&(t.options.ioFormat=V.options.ioFormat,t.initFormatter()),V.setVerticalAlign=function(){},V.handleKeyupEvent=function(){};var $=WebSquare.uiplugin.inputCalendar.prototype.handleFocusEvent;V.handleFocusEvent=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return u.f.stopEvent(t),!1;var e=this.render.getAttribute(v),i=g._getGroupbyDisplayRowIndex(e),o=g._getWrapperTD(this.render.parentNode).getAttribute(b);if(g.lastEvent=t,g.getLastFocusedCell().focusedTd==g._getWrapperTD(this.render.parentNode)||g.focusedByApi||g._setFocusedCell(e,o),$.call(this,t),g.focusedByApi=!1,!this.reFocus&&(g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),this.select(),this.focus(),g.fakeInput.render.parentNode)){var s=g.getColumnIndex(o);u.f.fireEvent(g,"onbeforeedit",i,s,g._dataList.getCellData(e,s))}g.F2Mode=!1,this.reFocus=!1};var J=WebSquare.uiplugin.inputCalendar.prototype.handleKeyEvent;V.handleKeyEvent=function(t){g.lastEvent=t,J.call(this,t);var e=this.dom[V.id+"_input"];switch(t.keyCode){case 46:return void u.f.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void u.f.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(e,e.value.length),g.hideFakeInput(this),void u.f.stopPropagation(t);case 9:for(var i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2inputCalendar_divInput")){u.f.stopPropagation(t);break}if(i.match("w2inputCalendar_button")&&t.shiftKey){u.f.stopPropagation(t);break}}return}var o=t.which||t.keyCode;g.nonCharKeys[o]||(32!=o?(g.fakeInput.render.parentNode&&g.hideFakeInput(this),u.f.stopPropagation(t)):u.f.stopPropagation(t))};var Q=WebSquare.uiplugin.inputCalendar.prototype.handleBlurEvent;V.handleBlurEvent=function(t){var e,i=this.render.getAttribute(v),o=g._getGroupbyDisplayRowIndex(i),s=g._getWrapperTD(this.render.parentNode).getAttribute(b),r=g.getColumnIndex(s),a=V.validator.validateString(this.getValue()),n=WebSquare.historyManager.get(this.options.pluginName,this.id);if(n&&(e=n.value),this.options.disableDateValidSet&&this.disableValidate(a))return null!=n.value&&this._setValue(n.value,{skipValidate:!0}),!1;if(!1===this.validate(a)&&""!=a){if(this.options.dateValidSet&&this.options.dateValidSetCustom);else if(this.options.dateValidSet&&null!=n.value&&this._setValue(n.value,{skipValidate:!0}),"false"!==this.options.displaymessage){var l=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"Invalid date format";this.options.invalidMessageFunc||alert(l)}return!1}if(u.f.fireEvent(g,"oneditend",o,r,a,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=g._getWrapperTD(this.render.parentNode)&&g._setFocusedCell(i,s),u.f.stopEvent(t),!1;g.editEndFlag=!1,
Q.call(this,t);g.getCellInfo(s);g.dataList.__setCellData(i,s,a),a=g._dataList.getCellData(i,s);var h=V.sub_validator.validateString(a);this._setValue(h,{skipValidate:!0}),u.f.fireEvent(this,"onafterviewchange",{oldValue:e,newValue:a});u.f.fireEvent(g,"onafteredit",i,r,a,g.lastEvent);g.F2Mode=!1},V.setStyle("z-index","10"),V.activate(),this.fakeInput||this.makeFakeInput()}else if("text"==n||"textImage"==n||"drilldown"==n||"secret"==n){st=t.options.type?t.options.type:"text",U=d||"";"secret"==n&&(st="password"),c&&(h="bigDecimal");at={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;z-index:10;",ioFormat:"$blank",ioFormatter:"$blank",displayFormat:"all"==t.options.applyFormat?"":"$blank",displayFormatter:"$blank",readOnly:"$blank",disabled:"$blank",title:U,type:st,dataType:h,editType:t.options.editType,byteCheckIgnoreChar:t.options.byteCheckIgnoreChar,maxlength:t.options.maxLength||t.options.maxlength||-1,maskFormat:t.options.maskFormat,maskFormatModelNumber:t.options.maskFormatModelNumber,customModelFormatter:t.options.customModelFormatter,customModelUnformatter:t.options.customModelUnformatter,customPasteFormatter:this.options.customPasteFormatter,useMaxLength:t.options.useMaxLength,adjustMaxLength:t.options.adjustMaxLength,useKeyupBlur:!1,inputMode:t.options.inputMode||"",_scope_obj_uuid:t.options._scope_obj_uuid,xmlEvents:[{name:"ondblclick",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.f.fireEvent(g,"oneditdblclick",i,o,t.id)}}}]};t.options.maskFormat&&"display"==t.options.applyFormat&&(at.displayFormat=t.options.displayFormat),t.internal&&(at=o.q.extend(o.q.extend(at,t.initializeInfo.options))),"float"===t.options.dataType&&(at.dataType=t.options.dataType),(V=new WebSquare.uiplugin.input(S,at,t.element)).writeTo(this),this.options.editInputClass&&"text"==n&&this.addClass(V.render,this.options.editInputClass),V.event.addListener(V.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),V.event.addListener(V.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),V.activate(),"number"==t.options.dataType?""==t.options.displayFormat?V.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):t.options.maskFormat&&t.options.displayFormat||V.validator.addCommand(new WebSquare.validator.numberCommand):"euro"==t.options.dataType?V.validator.addCommand(new WebSquare.validator.euroCommand(V.options.delimiter,V.options.decimalDelimiter)):"text"==t.options.dataType&&(t.options.maskFormat&&t.options.displayFormat||(t.options.applyFormat="display")),V.setVerticalAlign=function(){},this._moveKeyEdit(V.uuid,"handleKeydownEvent",{oldMode:!0})}else if("textarea"==n){if(l){var tt,et,it;e&&(D=this.getElemRowIndex(e),tt=this.getColumnIndex(e.getAttribute(b)),et=this._getEditDisabled(D,tt),it=this.___getEditReadOnly(D,tt));var ot="position:relative;display:none;width:150px;height:60px;resize:none;";!0!==this.options.accessibility&&(ot+="z-index:1000;"),V=new WebSquare.uiplugin.textarea(S,{style:ot,className:"$blank",readOnly:!0===it?it:"$blank",disabled:!0===et?et:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid,accessibility:this.options.accessibility,xmlEvents:[{name:"onkeydown",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode;9!==e&&35!==e&&36!==e&&u.f.stopPropagation(t)}}}]},t.element);Q=WebSquare.uiplugin.textarea.prototype.handleBlurEvent;V.handleBlurEvent=function(t){Q.call(this,t);var e=parseInt(this.render.getAttribute(v),10),i=g._getWrapperTD(this.render.parentNode).getAttribute(b),o=g.getCellInfo(i),s=this.getValue();"number"==o.mainGrid.getColumnOption(o.options.col_id,"dataType")&&""!=s&&(s=Number(s)),o.mainGrid.dataList.__setCellData(e,i,s)}}else{K={style:"position:absolute;display:none;width:150px;height:60px;z-index:1000;resize:none;",className:"$blank",readOnly:"$blank",
disabled:"$blank",maxlength:t.options.maxLength||-1,_scope_obj_uuid:t.options._scope_obj_uuid};!0===t.options.keepCellClass&&(K.className=""),t.internal&&(K=o.q.extend(o.q.extend(K,t.initializeInfo.options))),V=new WebSquare.uiplugin.textarea(S,K,t.element)}V.writeTo(this),V.event.addListener(V.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),V.event.addListener(V.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),this._moveKeyEdit(V.uuid,"handleKeydownEvent"),V.activate()}else if("calendar"==n){X=t.options.ioFormat,K={style:"position:absolute;display:none;border:1px solid "+this.options.selectedCellColor+";outline:none;",delimiter:"$blank",calendarValueType:t.options.calendarValueType,calendarClass:t.options.calendarClass||"class1",ioFormat:X,ioFormatter:"$blank",displayFormat:t.options.displayFormat||X,applyFormat:t.options.applyFormat||"display",displayFormatter:"$blank",holidayRef:t.options.holidayRef||"",keepFocusSelect:!0,focusOnOuterDiv:!0,footerDiv:t.options.footerDiv,_scope_obj_uuid:t.options._scope_obj_uuid,readOnly:"$blank",disabled:"$blank",validCheck:!1,renderDiv:!0,inputReadOnly:t.options.inputReadOnly,unformatOnPaste:t.options.unformatOnPaste,pickerType:t.options.pickerType,fixPickerStatus:t.options.fixPickerStatus,xmlEvents:[{name:"ondateselect",action:"script",param:{handler:function(e,i){var o=t.editRowIndex,s=g.getColumnIndex(t.id);u.f.fireEvent(g,"ondateselect",o,s,e,i)}}},{name:"onmonthselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.f.fireEvent(g,"onmonthselect",i,o,{oldValue:e.oldValue,newValue:e.newValue})}}},{name:"onyearselect",action:"script",param:{handler:function(e){var i=t.editRowIndex,o=g.getColumnIndex(t.id);u.f.fireEvent(g,"onyearselect",i,o,{oldValue:e.oldValue,newValue:e.newValue})}}},{name:"onbeforepaste",action:"script",param:{handler:function(e){var i={rowIndex:t.editRowIndex,colIndex:g.getColumnIndex(t.id),data:[[e]]};return u.f.fireEvent(g,"onbeforepaste",i)}}}]};t.internal&&(K=o.q.extend(o.q.extend(K,t.initializeInfo.options)));V=new WebSquare.uiplugin.inputCalendar(S,K,t.element);try{0==t.internal?t.element&&!t.element.getAttribute("dateValidCheck")&&(V.options.dateValidCheck=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="calendar"]/dateValidCheck/@value')||"false"):1!=t.options.dateValidCheck&&"true"!=t.options.dateValidCheck||(V.options.dateValidCheck="true")}catch(t){s.Y.printStackTrace(t,null,this)}V.writeTo(this),V.event.addListener(V.render,"oncopy",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),V.event.addListener(V.render,"onpaste",this.event.bindAsEventListener(this,(function(t){u.f.stopPropagation(t)}))),X!=V.options.ioFormat&&(t.options.ioFormat=V.options.ioFormat,t.initFormatter()),this._moveKeyEdit(V.uuid,"handleKeyEvent"),V.activate(),V.setVerticalAlign=function(){},"display"===t.options.applyFormat&&(V.handleKeyupEvent=function(){}),V.setStyle("z-index","10"),V.options.dateValidSet&&V.options.dateValidSetCustom&&(V._skipDateValidSet=!0)}else if("autoComplete"==n&&l){(K={}).titleStr=d,K.input_id=S,K.dataRowIndex=y,K.dataCol_id=b,V=t.getInput(t,e,i,K)}}else{var U=d||t.options.title||"",I=this.getHeaderValue(this.bodyToHeaderRelation[t.id])||"";U||this.options.titleAuto&&("text"==n&&""!==i?U=I+" "+i:("text"==n&&""==i||"secret"==n)&&(U=I));var st=t.options.type?t.options.type:"text",rt="w2grid_embedded_input";"secret"==n&&(st="password",a.Z.isIEAllVersion()?rt+=" w2grid_secret":rt="w2grid_embedded_secret");var at={className:rt,style:"$blank",ioFormat:"$blank",ioFormatter:"$blank",readOnly:"$blank",disabled:"$blank",hidden:"$blank",title:U,type:st,adjustMaxLength:t.options.adjustMaxLength,useMaxLength:t.options.useMaxLength,useKeyupBlur:!1,accessibility:this.options.accessibility,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){
var e=parseInt(this.render.getAttribute(y),10),i=g._getWrapperTD(this.render.parentNode).getAttribute(b),o=g.getColumnIndex(i);u.f.fireEvent(g,"oncellclick",e,o,i),u.f.stopPropagation(t)}}},{name:"oncopy",action:"script",param:{handler:function(t){u.f.stopPropagation(t)}}},{name:"onpaste",action:"script",param:{handler:function(t){u.f.stopPropagation(t)}}},{name:"oncut",action:"script",param:{handler:function(t){u.f.stopPropagation(t)}}},{name:"onkeydown",action:"script",param:{handler:function(t){this._SenSeReaderBeforeEditValue=null;var e={},i=g._getWrapperTD(this.render.parentNode).getAttribute(b);e.rowIndex=parseInt(this.render.getAttribute(y),10),e.colIndex=g.getColumnIndex(i),e.colID=i,e.keyCode=t.charCode?t.charCode:t.keyCode,this._SenSeReaderBeforeEditValue=this.render.value,e.oldValue=this.render.value,u.f.fireEvent(g,"oneditkeydown",e)}}},{name:"onkeyup",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode,i=g._getWrapperTD(this.render.parentNode).getAttribute(b),o={rowIndex:parseInt(this.render.getAttribute(y),10),colIndex:g.getColumnIndex(i),colID:i,oldValue:this._SenSeReaderBeforeEditValue||"",newValue:this.render.value,inputType:"text",keyCode:e};this._SenSeReaderBeforeEditValue=null,u.f.fireEvent(g,"oneditkeyup",o)}}}]};if(!0!==this._isBrowserScroll()&&at.xmlEvents.unshift({name:"onmousedown",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(y),10),i=g._getWrapperTD(this.render.parentNode).getAttribute(b);if(e-g.rowIndex>=g.lastIndex+1)return u.f.stopEvent(t),g.addGridScroll(1),void g._setFocusedCell(e,i,!0)}}}),"float"===t.options.dataType&&(at.dataType=t.options.dataType),t.options.delimiter="",V=new WebSquare.uiplugin.input(S,o.q.extend(o.q.extend({},t.options),at)),"textImage"===n){var nt=e.getElementsByClassName("w2grid_textImage_div_input")[0];V.writeTo(nt)}else f.innerHTML="",V.writeTo(f);"number"==t.options.dataType&&(""==t.options.displayFormat?V.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9")):V.validator.addCommand(new WebSquare.validator.numberCommand)),a.Z.isIE()&&V.setVerticalAlign(),V.setVerticalAlign=function(){};var lt=WebSquare.uiplugin.input.prototype.handleBlurEventBasic,ht=this.uuid;V.handleBlurEventBasic=function(t){var e=parseInt(this.render.getAttribute(v),10),i=g._getGroupbyDisplayRowIndex(e),o=this.render.parentNode;"textImage"==n&&(o=this.render.parentNode.parentNode);var s=g._getWrapperTD(o).getAttribute(b),r=g._dataList.getColumnIndex(s),l=g.getColumnIndex(s),h=V.validator.validateString(this.getValue());if(u.f.fireEvent(g,"oneditend",i,l,h,t)+""=="false")return g.editEndFlag=!0,this.reFocus=!0,g.fakeInput.lastInput==this&&this.focus(),g.getLastFocusedCell().focusedTd!=g._getWrapperTD(this.render.parentNode)&&g._setFocusedCell(e,s),u.f.stopEvent(t),!1;g.editEndFlag=!1,lt.call(this,t,{skipEditEnd:!0});var d=g.getCellInfo(s),c=g.getColumnOption(d.id,"dataType");if(this._isNumberType(c)){var p=h.wq_trim();"."!==p&&"-"!==p&&"+"!==p&&","!==p&&p!=="+"+d.options.decimalDelimiter&&p!=="-"+d.options.decimalDelimiter||(h="")}var m=!(!g.isDrillDown||!g._dataList.options.depthColumn),f=e,y=g._dataList.getRealRowIndex(f);m&&(f=y);var w=g._dataList.dataArr[y*g._dataList.getColumnCount()+r];if(g.dataList.__setCellData(e,s,h),h=g._dataList.getCellData(f,s),"all"==d.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||d._changeDisplayFormat||(h=d.getDisplayData(h)),this.setValue(h),WebSquare.idCache[ht].options.senseReader&&this.options.customFormatter){var S=null;try{"function"==typeof this.options.customFormatter?S=this.options.customFormatter:"function"==typeof(S=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=S)}catch(t){S=null}var _=h,C=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&C&&(_=this.formatter.format(h)),"function"==typeof S){this.useCustomFormatter=!0
;var x=S.call(this.mainGrid,h,_,i,r);this.render.value=x}}u.f.fireEvent(g,"onafteredit",i,l,h,g.lastEvent);w!=h&&u.f.fireEvent(g,"onviewchange",{oldValue:w,newValue:h,rowIndex:i,colIndex:l,colId:g.getColumnID(l)}),g.hideFakeInput(V),g.F2Mode=!1};var dt=WebSquare.uiplugin.input.prototype.handleFocusValueEventAdv;V.handleFocusValueEventAdv=function(t){if(g.editEndFlag&&g.fakeInput.lastInput!=this)return u.f.stopEvent(t),!1;var e=parseInt(this.render.getAttribute(v),10),i=g._getGroupbyDisplayRowIndex(e),o=g._getWrapperTD(this.render.parentNode).getAttribute(b);g.lastEvent=t;var s,r=g.getLastFocusedCell();if(!(!g.isDrillDown||!g._dataList.options.depthColumn)&&(e=g._dataList.getRealRowIndex(e)),r.focusedTd!=g._getWrapperTD(this.render.parentNode)&&(s=!g.focusedByApi||r.focusedRowIndex===e&&r.focusedColIndex===g.getColumnIndex(o)?g._setFocusedCell(e,o):g._setFocusedCell(e,o,!1)),!1!==s){var a=this.reFocus;if(dt.call(this,t),this.reFocus=a,g.focusedByApi=!1,!this.reFocus){var n=g._dataList.getCellData(e,o);if(n!==this.getValue()&&(this.formatter&&"all"===this.options.applyFormat&&(n=this.formatter.format(n)),this.setValue(n)),g.showFakeInput(this),g.fakeInput.setValue(this.getValue()),"select"===this.options.editType&&this.select(),this.focus(),g.fakeInput.render.parentNode){var l=g.getColumnIndex(o);u.f.fireEvent(g,"onbeforeedit",i,l,g._dataList.getCellData(e,l))}}g.F2Mode=!1,this.reFocus=!1}};var ct=WebSquare.uiplugin.input.prototype.handleKeydownEvent;V.handleKeydownEvent=function(t){switch(g.lastEvent=t,ct.call(this,t),t.keyCode){case 46:return void u.f.stopPropagation(t);case 27:return g.F2Mode=!1,g.showFakeInput(this),this.setValue(g.dataList.getCellData(g._getFocusedRowIndex(),g.getFocusedColumnIndex())),this.select(),void u.f.stopPropagation(t);case 113:return g.F2Mode=!0,WebSquare.text.setCaretPos(this.render,this.render.value.length),g.hideFakeInput(this),void u.f.stopPropagation(t);case 9:for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_divInput")){u.f.stopPropagation(t);break}return}var i=t.which||t.keyCode;if(!g.nonCharKeys[i])if(32!=i){if(g.fakeInput.render.parentNode){var o=this.render.getAttribute(v),s=g._getGroupbyDisplayRowIndex(o),r=g._getWrapperTD(this.render.parentNode).getAttribute(b),a=g.getColumnIndex(r);u.f.fireEvent(g,"onbeforeedit",s,a,g.dataList._getCellData(o,a)),g.hideFakeInput(this)}u.f.stopPropagation(t)}else u.f.stopPropagation(t)},V.activate(),this.fakeInput||this.makeFakeInput()}this.dom[S]=V,l&&this.adaptiveEmbeddedInputIdList.push(S)}return V},I.prototype.getTemporaryDataCollectionItemArr=function(t){try{var e=[],i=this.modelControl.getDataComp(t.dataCompID);if(i)switch(i.initializeType){case"linkedDataList":for(var o={},r=0;r<i.filteredRowIndexArr.length;r++){var a=i.getRealRowIndex(r),n=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[a*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataList":for(o={},r=0;r<i.filteredRowIndexArr.length;r++){n=i.dataArr[i.filteredRowIndexArr[r]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.label]],l=i.dataArr[i.filteredRowIndexArr[r]*i.cellIdList.length+i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}break;case"dataMap":for(o={},r=0;r<i._dataList.oneRowDataLength;r++){n=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.label]],l=i._dataList.dataArr[i.bodyIdColIndexMap[t.itemsetObj.value]];o[n]!=l&&(o[n]=l,e.push({label:n,value:l}))}}return e}catch(t){s.Y.printStackTrace(t)}},I.prototype._getWrapperCell=function(t,e){try{if(!t)return t;var i=t;if(this.options.wrapperCell&&this.options.wrapperCellElem){if(!t.firstChild||t.firstChild.tagName!==this.options.wrapperCellElem.toUpperCase()){var o=document.createElement(this.options.wrapperCellElem);o.id=this.id+"_wrapperCell_"+this.getCellInfo(t).colID+"_"+e,o.className="w2grid_wrapperCell",t.appendChild(o)}
i=t.firstChild}return i}catch(e){return s.Y.printStackTrace(e),t}},I.prototype._getWrapperTD=function(t){try{if(!t)return t;var e=t;return this.options.wrapperCell&&this.options.wrapperCellElem&&t.tagName===this.options.wrapperCellElem.toUpperCase()&&(e=t.parentNode),e}catch(e){return s.Y.printStackTrace(e),t}};var T=function(){};T.prototype.initializeHead=function(){try{this.headerObj={},this.headerConfigOptions={};for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=[],i={},o=0;o<t.length;o++){if(i[t[o].id]){var r=WebSquare.language.getMessage("E_comp_duplicated_Msg",t[o].id)||"id["+t[o].id+"] is duplicated. Check the source code.";$l(r)}else i[t[o].id]=t[o].id;e.push(t[o])}var n=a.Z.getDataPrefix("header_id"),l=a.Z.getDataPrefix("inputType"),h=a.Z.getDataPrefix("dataType"),d=a.Z.getDataPrefix("value"),c=a.Z.getDataPrefix("useLocale"),u=a.Z.getDataPrefix("localeRef");for(a.Z.getDataPrefix("toolTip"),o=0;o<e.length;o++){var p=e[o];if(!p.getAttribute(n)){var g=p.getAttribute(l),m=p.getAttribute(h),f=p.getAttribute(d),b=null;if(this.setConfigOptions(p,"header"),"checkbox"==g)p.innerHTML="",(b=this.setCheckboxHead(p,f)).headInputType="checkbox";else if("select"==g)(b=this.setSelectboxHead(p,f)).headInputType="select";else if("text"==g&&"own"==m)(b=this.setInputHead(p,f)).headInputType="input";else if("checkcombobox"==g)(b=this.setCheckcomboboxHead(p,f)).headInputType="checkcombobox";else if("textImage"==g)(b=this.setTextImageHead(p,f)).headInputType="textImage";else{var y=p.getAttribute(d),v=p.getAttribute(c);if("true"===v||this.options.useLocale&&!v){var w=p.getAttribute(u);if(w){(_=this.getLocaleValue(w))&&(y=_)}else{var S=p.getAttribute("id");if(null!=S&&S.match("RowNumber")&&this.options.rowNumLocaleRef)(_=this.getLocaleValue(this.options.rowNumLocaleRef))&&(y=_);else if(null!=S&&S.match("RowStatus")&&this.options.rowStatusLocaleRef){var _;(_=this.getLocaleValue(this.options.rowStatusLocaleRef))&&(y=_)}}}y=null!=y?y:"",p.innerHTML=this.dataTagOpen+y+this.dataTagClose}var C=p.getAttribute("id");p.setAttribute(n,C);var x=p.className;if(!0===this._isBrowserScroll()&&(x+=" "+this.options.gridNativeClass,this.struct.head.rowArr.length>1&&(x+=" "+this.options.gridNativeClass+"MultiHeader")),x+=" "+this.id+"_header__column"+o,this.headCellInfoHash[C]){var I=this.headCellInfoHash[C].getAttribute("class");I&&(x+=" "+I)}if(p.className=x,p.setAttribute("id",this.id+"_"+C),this.options.autoScope&&p.setAttribute("scope","col"),this._checkUseFilter(p)){var T="width:100%;height:100%;",k="";this.options.filterShowAlways&&(T+="table-layout:fixed;",k="overflow:hidden;");var L=document.createElement("table");L.style.cssText=T;var A=document.createElement("tr"),D=document.createElement("td");D.style.cssText="width:100%;"+k;for(var W=p.childNodes.length,q=0;p.childNodes.length>0&&q<W;q++)D.appendChild(p.childNodes[0]);A.appendChild(D);var M=document.createElement("td"),E=WebSquare.language.getMessage("Grid_filter_button");if(M.innerHTML="<input type='button' id='"+this.id+"_"+C+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+C+"\");' title='"+E+"'/>",A.appendChild(M),L.appendChild(A),p.appendChild(L),this.options.filterShowAlways){var R=document.getElementById(this.id+"_"+C+"_filter");R&&R.parentNode&&(R.parentNode.style.width=R.offsetWidth+2+"px")}}if(this._checkSortable(p)&&(p.className+=" w2grid_head_sortable"),this.headerObj[C]=b,p.disabled=!1,!1===this.options.tooltipHeader){var N=p.getAttribute("tooltip"),F=p.getAttribute("toolTipLocaleRef");N&&WebSquare.getBody().setToolTip(p,N,F)}}}this.clearHeaderSort()}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.associateHeaderBody=function(){try{for(var t=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),e=0,i=-1,o="",r=a.Z.getDataPrefix("colIndex"),n=a.Z.getDataPrefix("header_id"),l=a.Z.getDataPrefix("col_id"),h=0;h<t.length;h++){var d=t[h]
;if(d.className.indexOf(this.options.headerTdClass+"_rowNumber")>=0||d.className.indexOf(this.options.headerTdClass+"_rowStatus")>=0);else{var c=d.getAttribute(r);parseInt(c)<=i&&e++,i=parseInt(c);var u=e;u+1>this.tempTr.rows.length&&(u=this.tempTr.rows.length-1);for(var p=null;u>=0;){for(var g=this.tempTr.rows[u],m=a.Z.first(g);m;){if(c==m.getAttribute(r)){p=m;break}m=a.Z.next(m)}if(p)break;u--}if(p){var f=d.getAttribute(n),b=p.getAttribute(l);o=b,this.headerToBodyRelation[f]=b,this.bodyToHeaderRelation[b]=f}else{f=d.getAttribute(n);this.passiveColSpanRelation[f]=o}}}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderConfigValue=function(t,e,i,o){try{var r=a.Z.getDataPrefix("col_id"),n=t.getAttribute(r),l=t&&(t.getAttribute(i)||t.getAttribute(i.toLowerCase())),h=this.headerConfigOptions[n]&&this.headerConfigOptions[n][o];return l||h||""}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setCheckboxHead=function(t,e){try{var i=a.Z.getDataPrefix("col_id"),o=a.Z.getDataPrefix("onChangeFunction"),n=a.Z.getDataPrefix("onchangeFunction"),l=a.Z.getDataPrefix("localeRef"),h=a.Z.getDataPrefix("checkboxLabel"),d=a.Z.getDataPrefix("checkboxLabelPosition"),c=a.Z.getDataPrefix("colId"),p=t.getAttribute(i),g=t.getAttribute(o)||t.getAttribute(n),m="<INPUT type='checkbox' />",f=this.getHeaderConfigValue(t,e,h,"checkboxLabel");if(this.options.useLocale){var b=t.getAttribute(l);if(b){var y=this.getLocaleValue(b);y&&(f=y)}}if(f){var v=this.uuid+"_header__"+p+"_checkboxLabel_",w=v+"_id",S=" for='"+w+"'";!1===this.options.useHeaderCheckboxLabelFor&&(S=""),m="left"===this.getHeaderConfigValue(t,e,d,"checkboxLabelPosition")?"<label class='w2checkbox_label'"+S+">"+f+"</label><INPUT type='checkbox' name='"+v+"' id='"+w+"'/>":"<INPUT type='checkbox' name='"+v+"' id='"+w+"'/><label class='w2checkbox_label'"+S+">"+f+"</label>",t.getAttribute(h)||t.setAttribute(h,f)}t.innerHTML=m;var _=t.getElementsByTagName("input")[0];0==this.getHeaderColumnVisible(p)&&_.setAttribute("tabIndex","-1"),_.setAttribute(c,e),("true"==t.getAttribute("disabled")||a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<9&&"true"==this.headCellInfoHash[p].getAttribute("disabled"))&&_.setAttribute("disabled","disabled");var C=t.getAttribute("title");C&&_.setAttribute("title",C);var x=this;u.f.addListener(_,"onkeydown",(function(t){u.f.fireEvent(x,"onkeydown",t),"32"==(t.charCode?t.charCode:t.keyCode)&&u.f.stopPropagation(t)})),u.f.addListener(_,"ondblclick",(function(t){u.f.stopPropagation(t)})),u.f.addListener(_,"onfocus",(function(t){var e=x.headerToBodyRelation[p];x.getCellInfo(e).options.keepFocusOnCheckHeaderClick||(x.removeFocusedCell(),1==x.options.senseReader&&x.rowIndex>0&&x.addGridScroll(0-x.rowIndex))}));var I=this.uuid;return null!=g&&""!=g?u.f.addListener(_,"onclick",(function(t){if(!WebSquare.idCache[I].options.checkHeaderOnly){x.noevent=!0;var i=a.Z.getGlobalFunction(g,x.scope_id);if("function"==typeof i)try{i.call(this,this.checked,e)}catch(t){s.Y.printStackTrace(t,null,this)}(x.options.preventMultipleClick||x.options.senseReader)&&u.f.fireEvent(x,"onheaderclick",p)}})):u.f.addListener(_,"onclick",(function(t){if(!WebSquare.idCache[I].options.checkHeaderOnly){x.noevent=!0;var e,i,o,r,a,n,l,h=x.headerToBodyRelation[p],d=x.getCellInfo(h),c=d,g=d.options.trueValue,m=d.options.falseValue,f=!(!x.isDrillDown||!x._dataList.options.depthColumn),b=!("checkbox"!==d.options.inputType||!x.options.ref);if(!0===b){var y=x._dataList._getXPath({colID:h,skipValueNode:!0});b=(e=WebSquare.ModelUtil.findInstanceNodes(y,null,x.scope_id)).length>=x.getTotalRow()}if("checkbox"===d.options.inputType||"custom"===d.options.inputType||"radio"===d.options.inputType){if(x.editedCell)try{a=x.editedCell.editRowIndex,n=x.getColumnIndex(x.editedCell.id);var v=x._dataList.getColumnIndex(x.editedCell.id);r=x._grid.getRealRowIndex(a)*x._dataList.getColumnCount()+v,o=x._dataList.dataArr[r]}catch(t){s.Y.printStackTrace(t,null,this)}if(this.checked){
for(var w=x.getUnCheckedIndex(h),S=0;S<w.length;S++)if("custom"==d.options.inputType&&0==d.internal&&(c=d.cellManagerHashByRowIndex[w[S]])&&(g=c.options.trueValue,m=c.options.falseValue),c.options.checkAlways||!x.___getEditReadOnly(w[S],h,f)&&!x._getEditDisabled(w[S],h,f)){var _=w[S];f?x._dataList._setCellData(_,h,g,!0,!0,null,null,b):x.dataList.setCellData(_,h,g,!0,!0,null,null,b),i=g;var C=_;f&&(C=x._dataList.getFilteredRowIndex(C)),null!=C&&x._dataList.broadcast({gridView:["notifyCellChanged",[C,h,null,!0]]}),c.options.checkHeaderOnViewchange&&u.f.fireEvent(x,"onviewchange",{oldValue:m,newValue:g,rowIndex:_,colIndex:x.getColumnIndex(h),colId:x.getColumnID(x.getColumnIndex(h))})}}else{var T=x.getCheckedIndex(h);for(S=0;S<T.length;S++)if("custom"==d.options.inputType&&0==d.internal&&(c=d.cellManagerHashByRowIndex[T[S]])&&(g=c.options.trueValue,m=c.options.falseValue),c.options.checkAlways||!x.___getEditReadOnly(T[S],h,f)&&!x._getEditDisabled(T[S],h,f)){_=T[S];f?x._dataList._setCellData(_,h,m,!0,!0,null,null,b):x.dataList.setCellData(_,h,m,!0,!0,null,null,b),i=m;C=_;f&&(C=x._dataList.getFilteredRowIndex(C)),null!=C&&x._dataList.broadcast({gridView:["notifyCellChanged",[C,h,null,!0]]}),c.options.checkHeaderOnViewchange&&u.f.fireEvent(x,"onviewchange",{oldValue:m,newValue:g,rowIndex:_,colIndex:x.getColumnIndex(h),colId:x.getColumnID(x.getColumnIndex(h))})}}if(x.checkHeader(p),!0===b)for(S=0;S<e.length;S++){var k=e[S];(c.options.checkAlways||!x.___getEditReadOnly(S,h,f)&&!x._getEditDisabled(S,h,f))&&(x._dataList.valueNode?k.setAttribute(x._dataList.valueNode,i):WebSquare.xml.setTextNodeValue(k,i))}x._dataList.broadcast({linkedDataList:["notifyRowChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}else if(x.options.titleAuto){var L=!0===this.checked?WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose");this.setAttribute("title",L)}if(x.options.senseReader&&x.rowIndex<=0&&(x.senseReaderMode=!0,x._setGridBorderNoRefresh=!0),x.options.senseReader&&x.rowIndex<=0&&(x.senseReaderMode=!1,x._setGridBorderNoRefresh=!1),x.drawFooter(),x.drawHeader(),(x.options.preventMultipleClick||x.options.senseReader)&&u.f.fireEvent(x,"onheaderclick",p),null!=r)try{var A=x._dataList.dataArr[r];l=x.getColumnID(n),o!=A&&u.f.fireEvent(x,"onviewchange",{oldValue:o,newValue:A,rowIndex:a,colIndex:n,colId:l})}catch(t){s.Y.printStackTrace(t,null,this)}}})),_}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.checkHeader=function(t){try{if(this.headerObj){var e=this.headerObj[t],i=this.headerToBodyRelation[t],o=this.headerInfoHash[t];if(e&&o&&o.options&&"checkbox"==o.options.inputType){var r=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=this.getCellInfo(i),l=r?this.getTotalRow():this.getRowCount();if("checkbox"!==n.options.inputType&&"custom"!==n.options.inputType&&"radio"!==n.options.inputType){if(this.options.titleAuto){var h=!0===e.checked?WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose");e.setAttribute("title",h)}return}if(this.hasCustomInputType&&0==n.internal&&"custom"==n.options.inputType){for(var d=l,c=0;c<d;c++){var u=r?c:this.dataList.getRealRowIndex(c),p=n.cellManagerHashByRowIndex[u]?n.cellManagerHashByRowIndex[u]:n;"checkbox"!=p.options.inputType&&"radio"!=p.options.inputType&&l--}if(0===l)return}var g="exclude"===this.options.checkAllType?this.getCheckedIndex(i,!0):this.getCheckedIndex(i),m=g.length;if(0==l)e.checked=!1,e.indeterminate=!1;else if(l==m)e.checked=!0,e.indeterminate=!1;else if(m>0){var f=!1;if(n.options.checkAlways)n.options.usePartialCheck&&"uncheck"===n.options.partialCheckNextClick&&(f=!0);else{for(c=0;c<g.length;c++)if(!this.___getEditReadOnly(g[c],i,r)&&!this._getEditDisabled(g[c],i,r)){(n.options.usePartialCheck||a.Z.isIEAllVersion())&&(f=!0);break}
n.options.usePartialCheck&&"check"===n.options.partialCheckNextClick&&f&&(f=!1)}a.Z.isIEAllVersion()?e.checked=!f:e.checked=f,n.options.usePartialCheck&&(e.indeterminate=!0)}else l-m==l&&(e.checked=!1,e.indeterminate=!1);if(this.options.titleAuto)h=e.checked?n.options.usePartialCheck&&e.indeterminate?WebSquare.language.getMessage("Grid_title_partial"):WebSquare.language.getMessage("Grid_title"):WebSquare.language.getMessage("Grid_title_not_choose"),e.setAttribute("title",h)}}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setSelectboxHead=function(t,e){try{var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n];if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:select",i.A&&(i.A.style="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff");else{this.tmpSelectbox||(this.tmpSelectbox=new WebSquare.uiplugin.selectbox("___tmp_selectbox__"+this.id,{},null));var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",r.I._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var c in i=WebSquare.xml.parse('<w2:select xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:select>",!0).documentElement,this.tmpSelectbox.options){var u=t.getAttribute(c);null!=u&&""!=u&&("style"==c&&(u="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(c,u))}a.Z.isIE(8)&&"true"==this.headCellInfoHash[n].getAttribute("disabled")&&i.setAttribute("disabled","true")}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_selectbox_"+t.getAttribute("id"),{pluginType:"uiplugin.selectbox",pluginName:"selectbox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value);var g=a.Z.getDataPrefix("onChangeFunction"),m=a.Z.getDataPrefix("onchangeFunction"),f=t.getAttribute(g)||t.getAttribute(m);return p.changeFuncName=f,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){var e=a.Z.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){s.Y.printStackTrace(t,null,this)}})),p.addEvent("onclick",(function(t){o.noevent=!0})),this.addControl(p),p}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setInputHead=function(t,e){try{t.innerHTML="<input type='text' class='w2grid_head_input' style='width:95%; height:18px;' />";var i=a.Z.first(t),o=this,r=a.Z.getDataPrefix("onChangeFunction"),n=a.Z.getDataPrefix("onchangeFunction"),l=a.Z.getDataPrefix("changeFuncName"),h=a.Z.getDataPrefix("colId"),d=a.Z.getDataPrefix("col_id"),c=t.getAttribute(r)||t.getAttribute(n);i.setAttribute(l,c),i.setAttribute(h,e),i.scope_id=this.scope_id,i.headerId=t.getAttribute(d);var p=this.getHeaderInfo(i.headerId).options,g=t.getAttribute("title")||p.title;g&&(i.setAttribute("title",g),t.removeAttribute("title"));var m=WebSquare.idCache[this.uuid];return u.f.addListener(i,"onfocus",(function(){o.noevent=!0,o.headerFocus=!0})),u.f.addListener(i,"onblur",(function(t){o.headerFocus=!1;var e=a.Z.getGlobalFunction(this.getAttribute(l),this.scope_id);if("function"==typeof e)try{e.call(this,this.value,this.getAttribute(h),this.headerId)}catch(t){s.Y.printStackTrace(t,null,this)}})),u.f.addListener(i,"onclick",(function(t){o.noevent=!0})),u.f.addListener(i,"onkeyup",(function(t){13==t.keyCode&&this.blur()})),u.f.addListener(i,"onpaste",(function(t){m.options.preventPaste?u.f.preventDefault(t):13==t.keyCode&&this.blur()})),i}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setCheckcomboboxHead=function(t,e){try{var i,o=this,n=t.getAttribute("id"),l=this.headCellInfoHash[n];if("json"===l._elementType)(i=l.cloneNode(!0)._element).N="w2:checkcombobox",i.A={style:"width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"};else{this.tmpCheckcombobox||(this.tmpCheckcombobox=new WebSquare.uiplugin.checkcombobox("___tmp_checkcombobox__"+this.id,{},null))
;var h=WebSquare.Elem.api.getElementsByTagName(l,"choices",r.I._XML_NAMESPACE.W2)[0],d=WebSquare.xml.serialize(h);for(var c in i=WebSquare.xml.parse('<w2:checkcombobox xmlns:w2="http://www.inswave.com/websquare">'+d+"</w2:checkcombobox>",!0).documentElement,this.tmpCheckcombobox.options){var u=t.getAttribute(c);null!=u&&""!=u&&("style"==c&&(u="width:100%; height:20px;top:0px;left:0px;position:relative;background-color:#ffffff"),i.setAttribute(c,u))}}t.style.position="static",t.innerHTML="";var p=WebSquare.controlFactory.createControl(this.id+"_head_checkcombobox_"+t.getAttribute("id"),{pluginType:"uiplugin.checkcombobox",pluginName:"checkcombobox"},i,this.scope_obj,!0,this.parentFrame);p.writeTo(t),window[p.id]=p,p.activate(),p.itemArr.length>0&&p.setValueNM(p.itemArr[0].value);var g=a.Z.getDataPrefix("onChangeFunction"),m=a.Z.getDataPrefix("onchangeFunction"),f=t.getAttribute(g)||t.getAttribute(m);return p.changeFuncName=f,p.colId=e,p.headerId=n,p.addEvent("onchange",(function(t){var e=a.Z.getGlobalFunction(this.changeFuncName,this.scope_id);if("function"==typeof e)try{e.call(this,this.getValue(),this.colId,this.headerId)}catch(t){s.Y.printStackTrace(t,null,this)}})),p.addEvent("onclick",(function(t){o.noevent=!0})),p}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setTextImageHead=function(t,e){try{var i,o=t.getAttribute("id"),r=this.headCellInfoHash[o];"json"===r._elementType&&(i=r.cloneNode(!0)._element.A);var n=i.viewType?i.viewType:"default",l=i.imageSrc?i.imageSrc:"",h=null!=i.value?i.value:"",d=i.imageStyle?'style="'+i.imageStyle+'"':"",c=i.imageAlign?i.imageAlign:"right";if(t.innerHTML="","icon"==n){t.innerHTML=["<div class='headerTextImageAlign'>"].join("");var p=t.querySelector(".headerTextImageAlign");"left"===c?p.innerHTML=["<img src='"+l+"' "+d+"/>",this.dataTagOpen+h+this.dataTagClose].join(""):"right"===c&&(p.innerHTML=[this.dataTagOpen+h+this.dataTagClose,"<img src='"+l+"' "+d+"/>"].join(""));var g=this,m=t.getElementsByTagName("img")[0];u.f.addListener(m,"onclick",(function(t){u.f.stopPropagation(t),g._getHeaderDisabled(o)||u.f.fireEvent(g,"onheadertextimageclick",o,h)}))}else"default"==n&&(t.innerHTML=this.dataTagOpen+h+this.dataTagClose);var f=a.Z.first(t),b=a.Z.getDataPrefix("colId"),y=a.Z.getDataPrefix("col_id");return f.setAttribute(b,e),f.scope_id=this.scope_id,f.headerId=t.getAttribute(y),f}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderDIV=function(t){return this.getHeaderLayer(t)},T.prototype.getHeaderLayer=function(t){try{for(var e=WebSquare.util.getDataPrefix("header_id"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=this.getElementById(this.id+"_head_table").getElementsByTagName("th"),r=0;r<i.length;r++){var a=i[r],n=a.getAttribute(e);if("number"==typeof t)t=o[t+this.defaultColCnt].getAttribute(e);if(null!=n&&null!=t&&t.toLowerCase()==n.toLowerCase())return a}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderInfo=function(t){try{return this.headerInfoHash[t]||{options:{}}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getTotalHeaderCol=function(t){try{for(var e=0,i=this.htmlInfo.head.headerTdHtml,o=0,r=i.length;o<r;o++)e+=i[o].length;return t&&t.defaultColumn&&(e+=this.defaultColCnt),e}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderColumnVisible=function(t){var e=this.getHeaderInfo(t),i=this._getRealColIndex("head",t),o=i+this.defaultColCnt,s=!this.hiddenList[o];if(e&&(0===i||i)){for(var r=0;r<e.options.colSpan;r++)s=!this.hiddenList[o+r]||s;return s}p.v.printLog("[getHeaderColumnVisible] Invalid headerId provided.")},T.prototype.setHeaderValue=function(t,e,i){var o=this.getHeaderLayer(t);if(o)if("function"==typeof e)e(o);else{var r=this.headerObj[t],n=e;i&&(e=this.getFormattedHeaderValue(t,e));var l=a.Z.getDataPrefix("value");if(r)if("select"==r.headInputType||"checkcombobox"==r.headInputType)r.setValue(e);else if("checkbox"==r.headInputType)r.checked!=a.Z.getBoolean(e)&&(r.click(),
r.checked=a.Z.getBoolean(e));else if("input"==r.headInputType){if(r.value!=e){r.value=e;var h=a.Z.getGlobalFunction(r.getAttribute("changeFuncName"),this.scope_id);if("function"==typeof h)try{h.call(r,r.value,r.getAttribute("colId"))}catch(t){s.Y.printStackTrace(t,null,this)}}}else"user"==r.headerInputType&&r.setValue(e);else{this.headerDataObj&&t&&(this.headerDataObj[t].value=n);var d=o.getElementsByTagName(this.options.dataTag)[0];d?("NOBR"==d.tagName||"SPAN"==d.tagName&&d.className.indexOf("w2grid_span")>-1)&&(d.innerHTML=e):o.innerHTML=this.dataTagOpen+e+this.dataTagClose}o.setAttribute(l,e);for(var c=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],u=WebSquare.Elem.api.getElementsByTagName(c,"w2:column"),p=0;p<u.length;p++){var g=u[p];if(t==g.getAttribute("id")){g.setAttribute("value",e);break}}}},T.prototype.setHeaderNodeSet=function(t,e,i,o){if(this.getHeaderLayer(t)){var s=this.headerObj[t];s&&("select"!=s.headInputType&&"checkcombobox"!=s.headInputType||s.setNodeSet(e,i,o))}},T.prototype.setHeaderUserObject=function(t,e){this.headerObj[t]=e,e.headerInputType="user";var i=this.getHeaderLayer(t);i.innerHTML="",i.appendChild(e.getContent())},T.prototype._getHeaderValue=function(t){var e="";if(t&&(e=this.getHeaderLayer(t)),e){var i=this.headerObj[t];if(i){var o="";if("select"==i.headInputType||"checkcombobox"==i.headInputType)o=i.getValue();else if("checkbox"==i.headInputType){o=!i.indeterminate&&i.checked;var s=this.headerToBodyRelation[t];if(this.options.returnTrueFalseValue&&s){var r=this.getCellInfo(s),n=r.options.trueValue,l=r.options.falseValue;o&&n?o=n:l&&(o=l)}}else"input"==i.headInputType?o=i.value:"user"==i.headerInputType&&(o=i.getValue());return o}var h=a.Z.first(e),d=h.getElementsByTagName(this.options.dataTag.toUpperCase())[0];if(d)h=d;else for(d=h;d&&"NOBR"!=d.tagName&&!("SPAN"==d.tagName&&d.className.indexOf("w2grid_span")>-1);){if("TD"==d.tagName){h=a.Z.first(d);break}d=a.Z.first(d)}return h?h.innerHTML:""}},T.prototype.getHeaderValue2=function(t){return this._getHeaderValue(t)},T.prototype.getHeaderValue=function(t){var e="";if(t&&(e=this.getHeaderLayer(t)),e){var i=a.Z.getDataPrefix("inputtype");if(!this.options.titleAuto||"text"!=e.getAttribute(i))return this._getHeaderValue(t);var o=e.getElementsByTagName(this.options.dataTag.toUpperCase())[0];if(o&&("NOBR"==o.tagName||"SPAN"==o.tagName&&o.className.indexOf("w2grid_span")>-1))return null!=o.textContent?o.textContent:o.innerHTML||""}},T.prototype.getFormattedHeaderValue=function(t,e){var i=this.getHeaderLayer(t);if(i){var o=a.Z.getDataPrefix("header_id");return this.headerDataObj[i.getAttribute(o)]&&(e=this.headerDataObj[i.getAttribute(o)].formatter.format(e)),e}},T.prototype.getHeaderValueList=function(t){for(var e=[],i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=a.Z.getDataPrefix("header_id"),s=a.Z.getDataPrefix("inputtype"),r=0;r<i.length;r++)if(null==this.hiddenList[r]||1==t||1!=this.hiddenList[r]){var n=i[r],l=n.getAttribute(o);if(null!=l&&n)if(this.options.captionAuto||this.options.summaryOnlyAuto){if("text"!=n.getAttribute(s))continue;var h=n.getElementsByTagName(this.options.dataTag.toUpperCase())[0];(h&&"NOBR"==h.tagName||"SPAN"==h.tagName&&h.className.indexOf("w2grid_span")>-1)&&(null!=h.innerText&&""!=h.innerText&&"\n"!=h.innerText?e.push(h.innerText):null!=h.textContent&&""!=h.textContent?e.push(h.textContent):null!=h.innerHTML&&""!=h.innerHTML?e.push(h.innerHTML):e.push(""))}else{var d,c=this.headerObj[l];c&&("select"==c.headInputType||"checkcombobox"==c.headInputType?d=c.getValue():"checkbox"==c.headInputType?d=c.checked:"input"==c.headInputType?d=c.value:"user"==c.headerInputType&&(d=c.getValue()),e.push(d));for(var u=a.Z.first(n),p=u;p&&"NOBR"!=p.tagName&&!("SPAN"==p.tagName&&p.className.indexOf("w2grid_span")>-1);){if("TD"==p.tagName){u=a.Z.first(p);break}p=a.Z.first(p)}u?e.push(u.innerHTML):e.push("")}}return e},T.prototype.getHeaderSpan=function(t,e){
for(var i=0;i<this.htmlInfo.head.rowArr.length;i++)for(var o=0;o<this.htmlInfo.head.rowArr[i].length;o++)if(this.htmlInfo.head.rowArr[i][o].id===t){if("row"===e)return this.htmlInfo.head.rowArr[i][o].rowSpan;if("col"===e)return this.htmlInfo.head.rowArr[i][o].colSpan}},T.prototype.getHeaderInputType=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].inputType},T.prototype.getSortableArr=function(){for(var t=[],e=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),i=0;i<e.length;i++){var o=this._checkSortable(e[i]);t.push(o)}return t},T.prototype.getSortableStatus=function(){return this.headerSortStatusArr.slice(0)},T.prototype.setSortable=function(t,e,i){try{i=i||{};var o=this.getElementById(this.id+"_"+t);if(null==o)return void p.v.printLog("["+this.id+"] Unable to find headerId : "+t);if(!0!==e&&!1!==e)return;var r=a.Z.getDataPrefix("sortable");if(this._checkSortable(o)!==e&&(o.setAttribute(r,e),!0!==i.keepSortImage)){for(var n,l=0;l<this.headerSortStatusArr.length;l++){var h=this.headerToBodyRelation[t];if(h===this.headerSortStatusArr[l].colID){n=h;break}}n?!1===e?this.setHeaderSortImage(t,0,0):this.setHeaderSortImage(t,this.headerSortStatusArr[n].sortOrder,0):this.options.showSortableImage&&!0===e&&this.setHeaderSortImage(t,0,0)}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.clearHeaderSort=function(){this.headerSortStatusArr=[];for(var t=a.Z.getDataPrefix("sortable"),e=a.Z.getDataPrefix("header_id"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table")),o=this.htmlInfo.head.rowArr,s=0;s<i.length;s++){if("_headerRowNumber"!==(c=i[s].getAttribute(e))&&"_headerRowStatus"!==c&&("false"!==i[s].getAttribute(t)||!0===this.options.showSortableImage)){if(o.length>1&&"top"==this.options.sortedImagePosition)for(var r=this.headerToBodyRelation[c],n=this.getColumnIndex(r),l=o[0],h=0;h<l.length;h++)if(l[h]["@col"]==n){c=l[h].id;break}var d=this.headerObj[c];d&&"user"==d.headerInputType||this.setHeaderSortImage(c,0,0)}}for(s=0;s<i.length;s++){var c="";i[s].getElementsByClassName("w2grid_customFilter_open").length>0?(c=i[s].getAttribute(e),this._lastHeaderElementType="filter"):i[s].getElementsByClassName("w2grid_head_sort_div_main_btn").length>0&&(c=i[s].getAttribute(e),this._lastHeaderElementType="sort"),c&&(this._lastHeaderElementId=c)}},T.prototype.drawHeaderSortImages=function(){for(var t=this.htmlInfo.head.rowArr,e=0;e<this.headerSortStatusArr.length;e++){var i="";if(t.length>1&&"top"==this.options.sortedImagePosition){for(var o=this.headerSortStatusArr[e].colID,s=this.getColumnIndex(o),r=t[0],a=0;a<r.length;a++)if(r[a]["@col"]==s){i=r[a].id;break}}else if(!(i=this.bodyToHeaderRelation[this.headerSortStatusArr[e].colID])){var n=this.headerSortStatusArr[e].colID,l=this.getColumnIndex(n);for(l--;l>=0&&(n=this.getColumnID(l),!(i=this.bodyToHeaderRelation[n]));)l--}i&&this.setHeaderSortImage(i,this.headerSortStatusArr[e].sortOrder,e+1)}},T.prototype.setHeaderSortImage=function(t,e,i){var o=this.getElementById(this.id+"_"+t);if(null!=o){e=parseInt(e,10),i=parseInt(i,10);isNaN(i)||i<=0||this.headerSortStatusArr.length<2?i="":i+="",this._clearHeaderSortImage(o,"table"),this._clearHeaderSortImage(o,"div");var n="",l=this.options.showSortableImage;this.options.showSortableImage&&(l=!!(n=this._checkSortable(o)));var h=this._checkUseFilter(o),d=!1,c=!1;if(0===this.getDataLength()&&this.options.hideSortIconOnNoData&&(c=!0),0===this.getDataLength()&&this.options.hideFilterIconOnNoData&&(d=!0),h){var u=d?"none":"",g=o.getElementsByTagName("input");g&&g[0]&&(g[0].style.display=u)}if(!0!==this.options.showSortableImage){var m;if(0!==e){m=a.Z.first(o);var f=null,b=null,y=null;try{this._useCheckboxLabel(t)&&(b=document.createElement("div"),f=a.Z.next(m),b.appendChild(f))}catch(t){s.Y.printStackTrace(t,null,this)}
"nobr"==m.nodeName.toLowerCase()||"span"==m.nodeName.toLowerCase()&&m.className.indexOf("w2grid_span")>-1?(m=o.innerHTML,o.innerHTML=""):m=o.removeChild(m),this.headerObjArr[t]=m;var v=1==e?"w2grid_head_sort_asc":"w2grid_head_sort_desc",w=0,S="w2grid_head_sort_table_main",_="w2grid_head_sort_td",C="<table "+(P=a.Z.getDataPrefix("sort"))+"='sort' class='"+S+"'><tr><td></td><td class='"+_+" "+v+"'>"+i+"</td></tr></table>";"left"===this.options.sortedIconPosition&&(w=1,C="<table "+P+"='sort' class='"+S+"'><tr><td class='"+_+" "+v+"'>"+i+"</td><td></td></tr></table>"),o.innerHTML=C;var x=o.getElementsByTagName("td");"string"==typeof m?x[w].innerHTML=m:(x[w].appendChild(m),f&&b&&(x[w].appendChild(b.removeChild(f)),b=null))}}else{var I=a.Z.getDataPrefix("checkboxLabelPosition"),T=this.headerObj[t];if(T)T.render&&(T=T.render);else{var k=o.getElementsByTagName(this.options.dataTag)[0];(k&&"NOBR"==k.tagName||"SPAN"==k.tagName&&k.className.indexOf("w2grid_span")>-1)&&(T=k)}f=null;var L=null;try{this._useCheckboxLabel(t)&&("left"===this.headerInfoHash2[t].getAttribute(I)?(L="left",b=document.createElement("div"),f=a.Z.prev(T),b.appendChild(f)):(b=document.createElement("div"),f=a.Z.next(T),b.appendChild(f)))}catch(t){s.Y.printStackTrace(t,null,this)}try{h&&this.options.showSortableUseFilter&&(y=o.getElementsByTagName("input")[0])}catch(t){s.Y.printStackTrace(t,null,this)}T.parentNode.removeChild(T);v="";var A="";switch(e){case 0:!1!==l||n?(v="w2grid_head_sort_none",A=WebSquare.language.getMessage("Grid_sort_asc")):(v="w2grid_head_sort_image_none",A="");break;case 1:v="w2grid_head_sort_asc",A=WebSquare.language.getMessage("Grid_sort_desc");break;case-1:v="w2grid_head_sort_desc",A=WebSquare.language.getMessage("Grid_sort_none");break;default:v="w2grid_head_sort_none",A=WebSquare.language.getMessage("Grid_sort_asc")}if(this.options.sortHeaderDiv)if(!0===this.options.accessibility){v+="_btn";var D="_accessibility",W="w2grid_head_sort_div_main_btn";"left"===this.options.sortedIconPosition&&(v+="_left"),W+=D,v+=D;var q,M=c?"style = 'display:none'":"";P=a.Z.getDataPrefix("sort");if(n){var E="";!1===this.getHeaderColumnVisible(t)&&(E=" tabIndex='-1'"),o.innerHTML="<button "+P+"='sort' class='"+W+" "+v+"' "+M+E+"></button>",q=o.getElementsByTagName("button")[0]}else o.innerHTML="",q=o;if(q.appendChild(T),f&&b)this._useCheckboxLabel(t)&&"left"!==this.headerInfoHash2[t].getAttribute(I)?q.appendChild(b.removeChild(f)):q.insertBefore(b.removeChild(f),T),b=null;else if(h&&this.options.showSortableUseFilter){var R=n?q:T;V=R.parentElement;(Y=document.createElement("div")).appendChild(R),Y.appendChild(y),this.addClass(Y,"w2grid_head_sort_div_main_outer_box"),V.appendChild(Y),this.addClass(y,"w2grid_customFilter_sortable_open"),a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<8?this.addClass(R,"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(R,"w2grid_head_sort_usefilter_div_main")}}else{v+="_btn";W="w2grid_head_sort_div_main_btn",M=c?"style = 'display:none'":"",P=a.Z.getDataPrefix("sort");var N="";0==this.getHeaderColumnVisible(t)&&(N=" tabIndex='-1'"),o.innerHTML="<div "+P+"='sort' class='w2grid_head_sort_div_main_outer'><button class='"+W+" "+v+"'"+M+N+" >"+A+"</button></div>";x=o.getElementsByTagName("div");var F=o.getElementsByTagName("button")[0];if(x[0].insertBefore(T,F),f&&b)this._useCheckboxLabel(t)&&"left"!==this.headerInfoHash2[t].getAttribute(I)?x[0].insertBefore(b.removeChild(f),F):x[0].insertBefore(b.removeChild(f),T),b=null;else if(h&&this.options.showSortableUseFilter){V=x[0].parentElement;(Y=document.createElement("div")).appendChild(x[0]),Y.appendChild(y),this.addClass(Y,"w2grid_head_sort_div_main_outer_box"),V.appendChild(Y),this.addClass(y,"w2grid_customFilter_sortable_open"),a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<8?this.addClass(x[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(x[1],"w2grid_head_sort_usefilter_div_main")}}else{var O="w2grid_head_sort_div_main",B="w2grid_head_sort_div_sub"
;"left"===this.options.sortedIconPosition&&(O="w2grid_head_sort_div_main_left"),!0===this.options.showSortableImage&&(B="left"===this.options.sortedIconPosition?"w2grid_head_sort_div_sub_sortable_image_left":"w2grid_head_sort_div_sub_sortable_image"),c&&(v="");var P=a.Z.getDataPrefix("sort");if(o.innerHTML="<div "+P+"='sort' class = '"+O+" "+v+"'><div class = '"+B+"'>"+i+"</div></div>",(x=o.getElementsByTagName("div"))[0].appendChild(T),f&&b)"left"===L?x[0].insertBefore(b.removeChild(f),T):x[0].appendChild(b.removeChild(f)),b=null;else if(h&&this.options.showSortableUseFilter){var Y,V=x[0].parentElement;(Y=document.createElement("div")).appendChild(x[0]),Y.appendChild(y),this.addClass(Y,"w2grid_head_sort_div_main_outer_box"),V.appendChild(Y),this.addClass(y,"w2grid_customFilter_sortable_open"),a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<8?this.addClass(x[1],"w2grid_head_sort_usefilter_div_main_ie"):this.addClass(x[1],"w2grid_head_sort_usefilter_div_main")}}}if(n){var H="other";switch(e){case 0:H="other";break;case 1:H="ascending";break;case-1:H="descending";break;default:H="other"}o.setAttribute("aria-sort",H)}}else p.v.printLog("["+this.id+"] Unable to find headerId : "+t)},T.prototype._clearHeaderSortImage=function(t,e){var i=t.getElementsByTagName(e),o=a.Z.getDataPrefix("sort"),r=a.Z.getDataPrefix("header_id");if(i.length>0&&"sort"==i[0].getAttribute(o)){var n=t.getAttribute(r),l=this.headerObjArr[n];if(l)if("string"==typeof l)t.innerHTML=l;else{var h=null,d=null;try{this._useCheckboxLabel(n)&&(d=document.createElement("div"),h=a.Z.next(l),d.appendChild(h))}catch(t){s.Y.printStackTrace(t,null,this)}l=t.appendChild(l),h&&d&&(t.appendChild(d.removeChild(h)),d=null),t.removeChild(l.previousSibling)}}},T.prototype.getColIdByHeaderId=function(t){return this.headerToBodyRelation[t]},T.prototype.setHeaderHide=function(t){if(t=a.Z.getBoolean(t),this.options.hideHeader!=t){this.options.hideHeader=t;var e=this.getElementById(this.id+"_head_table"),i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));if(t){e.style.display="none";for(var o=0;o<i.length;o++){var s=i[o].getAttribute("class");null!=s&&(i[o].setAttribute("data-bkclass",s),i[o].removeAttribute("class"))}}else{e.style.display="";for(o=0;o<i.length;o++){var r=i[o].getAttribute("data-bkclass");null!=r&&(i[o].setAttribute("class",r),i[o].removeAttribute("data-bkclass"))}}this.refresh(),this.setScrollYHeight()}},T.prototype.setHeaderDisabled=function(t,e){try{e=a.Z.getBoolean(e);var i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?(o.setDisabled?o.setDisabled(e):o.render?o.render.disabled=e:o.disabled=e,i.disabled=e):i.disabled=e}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype._getHeaderDisabled=function(t){try{var e=!1,i=this.getHeaderLayer(t);if(i){var o=this.headerObj[t];o?o.getDisabled?e=o.getDisabled():o.render?e=o.render.disabled:o.disabled&&(e=o.disabled):i.disabled&&(e=i.disabled)}return e}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderID=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null;for(var i=t+=this.defaultColCnt,o=0,r=0;r<e.children.length;r++){var a=e.children[r].children;if((o+=a.length)>t){var n=a[i];return n?n.id.replace(this.id+"_",""):null}i-=a.length}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderIDArr=function(t){try{if("string"==typeof t)return t;var e=this.head_table;if(!e)return null;for(var i=t+=this.defaultColCnt,o=0,r=[],a=0;a<e.children.length;a++){var n=e.children[a].children;if((o+=n.length)>t){var l=n[i];l&&r.push(l.id.replace(this.id+"_",""))}else i-=n.length}return r}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderIndex=function(t){try{if("number"==typeof t)return t;var e=this.head_table;e||(e=this.getElementById(this.id+"_head_table"));for(var i=0,o=0;o<e.children.length;o++){for(var r=e.children[o].children,a=0;a<r.length;a++){if(r[a].id.replace(this.id+"_","")==t)return i+a-this.defaultColCnt}i+=r.length}
}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderRowIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return e},T.prototype.getHeaderColIndex=function(t){for(var e=0;e<this.htmlInfo.head.rowArr.length;e++)for(var i=0;i<this.htmlInfo.head.rowArr[e].length;i++)if(this.htmlInfo.head.rowArr[e][i].id===t)return this.htmlInfo.head.rowArr[e][i].colIndex},T.prototype.getHeaderColID=function(t,e){try{void 0!==e&&null!=e||(e={});for(var i="",o=this.struct.head.rowArr,r=!0===e.firstRow?1:o.length,a=0;a<r;a++){for(var n=o[a],l=0;l<n.length;l++)if(n[l].colIndex===t){i=n[l].id;break}if(i)break}return i}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setHeaderStyle=function(t,e,i){try{var o,r=a.Z.getDataPrefix("header_id"),n=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("number"==typeof t)t=(o=n[t+this.defaultColCnt]).getAttribute(r);else"$rownum"==t.wq_trim().toLowerCase()?t="_headerRowNumber":"$rowstatus"==t.wq_trim().toLowerCase()&&(t="_headerRowStatus");for(var l=0;l<n.length;l++)(o=n[l]).getAttribute(r)==t&&WebSquare.style.setStyle(o,e,i)}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.setHeaderClass=function(t,e){try{var i,o=a.Z.getDataPrefix("header_id"),r=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("number"==typeof t)t=(i=r[t+this.defaultColCnt]).getAttribute(o);else"$rownum"==t.wq_trim().toLowerCase()?t="_headerRowNumber":"$rowstatus"==t.wq_trim().toLowerCase()&&(t="_headerRowStatus");for(var n=0;n<r.length;n++)(i=r[n]).getAttribute(o)==t&&(this.addClass(i,e),this.headerCellClassObj[t]=e)}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.getHeaderClass=function(t){try{var e=a.Z.getDataPrefix("header_id"),i=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("number"==typeof t)t=i[t+this.defaultColCnt].getAttribute(e);"$rownum"==t.wq_trim().toLowerCase()?t="_headerRowNumber":"$rowstatus"==t.wq_trim().toLowerCase()&&(t="_headerRowStatus");for(var o=0;o<i.length;o++)if(i[o].getAttribute(e)==t)return this.headerCellClassObj[t]}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.removeHeaderClass=function(t,e){try{var i,o=a.Z.getDataPrefix("header_id"),r=this.getElementById(this.id+"_head_table").getElementsByTagName("th");if("number"==typeof t)t=(i=r[t+this.defaultColCnt]).getAttribute(o);else"$rownum"==t.wq_trim().toLowerCase()?t="_headerRowNumber":"$rowstatus"==t.wq_trim().toLowerCase()&&(t="_headerRowStatus");for(var n=0;n<r.length;n++)(i=r[n]).getAttribute(o)==t&&(this.removeClass(i,e),delete this.headerCellClassObj[t])}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.drawHeader=function(t,e){try{if(!this.head_table)return;null==this.headerDataObj&&this.initHeaderDataObj();var i=this.head_table.getElementsByTagName("th");this.headerTempSum=[];var o=a.Z.getDataPrefix("header_id");if(t){t=this.getColumnID(t);for(var r=0;r<i.length;r++){if(d=(h=i[r]).getAttribute(o))if(c=this.headerDataObj[d])if("expression"==c.inputType){var n=c.expression.match(/headercol(sum|avg|max|min)\s*\([^\)]*/g);if(n)for(var l=0;l<n.length;l++)n[l].split("(")[1].wq_replaceAll("'","").wq_replaceAll('"',"").wq_trim()==t&&(c.value=new Function("_this","return "+c.expression)(this),isNaN(c.value)&&"NaN"!=c.NaNFormat&&(c.value=c.NaNFormat),h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}else""===c.displayFormat||"number"!=c.dataType||"text"!=c.inputType&&"textarea"!=c.inputType&&"button"!=c.inputType&&"textImage"!=c.inputType||(h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}}else for(r=0;r<i.length;r++){var h,d,c;if(d=(h=i[r]).getAttribute(o))if(c=this.headerDataObj[d])if("expression"==c.inputType){try{c.value=new Function("_this","return "+c.expression)(this),isNaN(c.value)&&"NaN"!=c.NaNFormat&&(c.value=c.NaNFormat)}catch(t){s.Y.printStackTrace(t,null,this)}
h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose}else""===c.displayFormat||"number"!=c.dataType||"text"!=c.inputType&&"textarea"!=c.inputType&&"button"!=c.inputType&&"textImage"!=c.inputType||(h.innerHTML=this.dataTagOpen+c.formatter.format(c.value)+this.dataTagClose)}!e||!e.sortIcon||this.headerSortStatusArr&&0!==this.headerSortStatusArr.length||this.clearHeaderSort()}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.initHeaderDataObj=function(){try{var t=this.head_table.getElementsByTagName("th");this.headerDataObj={};for(var e=a.Z.getDataPrefix("header_id"),i=a.Z.getDataPrefix("expression"),o=a.Z.getDataPrefix("value"),n=a.Z.getDataPrefix("localeRef"),l=a.Z.getDataPrefix("inputType"),h=a.Z.getDataPrefix("dataType"),d=a.Z.getDataPrefix("displayFormat"),c=a.Z.getDataPrefix("displayFormatter"),u=a.Z.getDataPrefix("NaNFormat"),p=0;p<t.length;p++){var g=t[p],m={};m.id=g.getAttribute(e);var f=g.getAttribute(i)||"";if(""!=f&&(f=(f=(f=(f=f.replace(/[sS][uU][mM][\s]*[(]/g,"_this.headercolsum( ")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.headercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.headercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.headercolmin( ")),m.value=g.getAttribute(o)||"",this.options.useLocale){var b=g.getAttribute(n);if(b){var y=this.getLocaleValue(b);y&&(m.value=y)}}m.inputType=g.getAttribute(l),m.dataType=g.getAttribute(h)||"text",m.expression=f,m.displayFormat=g.getAttribute(d)||"",m.displayFormatter=g.getAttribute(c)||"",m.formatter=WebSquare.format.createFormatter(m.dataType,m.displayFormat,m.displayFormatter,null,null,null,this.scope_id,this.id),m.NaNFormat=g.getAttribute(u)||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||"NaN","$blank"==m.NaNFormat&&(m.NaNFormat=""),this.headerDataObj[m.id]=m}}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype.headercolsum=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].sum){var e="";if(this.groupbyStatus.grouped);else{var i=this.getColumnAllDataArray(t);e=a.Z.sum(i)}this.headerTempSum[t].sum=e}return a.Z.setPrecision(this.headerTempSum[t].sum)},T.prototype.headercolavg=function(t){var e=this.getColumnAllDataArray(t);this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={});var i="";if(this.groupbyStatus.grouped)return i;if(void 0===this.headerTempSum[t].sum){if(e.length>0){for(var o=0;o<e.length;o++)""==e[o].replace(/^\s+|\s+$/g,"")&&(e[o]="0");i=a.Z.sum(e)}this.headerTempSum[t].sum=i}return""==this.headerTempSum[t].sum?"":this.headerTempSum[t].sum/e.length},T.prototype.headercolmax=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}e=null==e?"":e,e=a.Z.setPrecision(e)}this.headerTempSum[t].max=e}return this.headerTempSum[t].max},T.prototype.headercolmin=function(t){if(this.headerTempSum||(this.headerTempSum=[]),this.headerTempSum[t]||(this.headerTempSum[t]={}),void 0===this.headerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped);else{for(var i=this.getColumnAllDataArray(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}e=null==e?"":e,e=a.Z.setPrecision(e)}this.headerTempSum[t].min=e}return this.headerTempSum[t].min},T.prototype._getMatchedHeaderId=function(t){try{return this.bodyToHeaderRelation[t]}catch(t){s.Y.printStackTrace(t,null,this)}};var k=function(t,e){try{this.options={id:"",value:"",inputType:"text",useFilter:!1,textAlign:""},this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),this.id=this.options.id}catch(t){s.Y.printStackTrace(t,null,this)}};T.prototype._setHeaderInfo=function(t,e){this.headerInfoHash2[t]=e},
T.prototype.setCheckboxHeader=function(t){try{"function"==typeof this.cellInfoHash[t].checkHeader&&this.cellInfoHash[t].checkHeader()}catch(t){s.Y.printStackTrace(t,null,this)}},k.prototype.setOptions=function(t){this.options.useFilter=a.Z.getBoolean(r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/header/column/useFilter/@value")),this.options.hideCustomFilter=a.Z.getBoolean(r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/header/column/hideCustomFilter/@value"));var e=[];for(var i in this.options)e[i.toLowerCase()]=i;var o=this.mainGrid.headerConfigOptions[t.getAttribute("id")]||{};for(var i in o)this.options[i]=o[i];var s=WebSquare.Parser.parseAttribute(t);for(var n in s){var l=s[n];"class"==n?this.options.className=l:""!=String(l).wq_trim()&&(e[n]&&(n=e[n]),"boolean"==typeof this.options[n]?l=a.Z.getBoolean(l):"number"==typeof this.options[n]&&(l=a.Z.getNumber(l)),this.options[n]=l)}},T.prototype._useCheckboxLabel=function(t){try{var e=a.Z.getDataPrefix("inputType"),i=a.Z.getDataPrefix("checkboxLabel"),o=a.Z.getDataPrefix("checkboxlabel"),r=this.getHeaderLayer(t);return"checkbox"===r.getAttribute(e)&&(r.getAttribute(i)||r.getAttribute(o))}catch(t){s.Y.printStackTrace(t,null,this)}},T.prototype._checkUseFilter=function(t){try{if(!t)return!1;if("string"==typeof t&&!(t=this.getHeaderLayer(t)))return!1;var e=a.Z.getDataPrefix("useFilter"),i=t.getAttribute(e);if(i&&"string"==typeof i){var o=i.toLowerCase();if("true"===o)return!0;if("false"===o)return!1}var n=a.Z.getDataPrefix("header_id"),l=t.getAttribute(n);if(!l||"_headerRowNumber"===l||"_headerRowStatus"===l)return!1;var h=a.Z.getDataPrefix("inputType"),d=t.getAttribute(h),c="/WebSquare/"+this.options.pluginName+"/header/column[@inputType='"+d+"']/useFilter/@value",u=r.I.getConfiguration(c),p=(this.headerConfigOptions[l]||{}).useFilter;return a.Z.getBoolean(u)||a.Z.getBoolean(p)}catch(t){return s.Y.printStackTrace(t,null,this),!1}},T.prototype._checkSortable=function(t){try{if(!t)return!1;if("string"==typeof t&&!(t=this.getHeaderLayer(t)))return!1;var e=a.Z.getDataPrefix("sortable"),i=t.getAttribute(e);if(i&&"string"==typeof i){var o=i.toLowerCase();if("true"===o)return!0;if("false"===o)return!1}if(this.options.sortable)return!0;var r=a.Z.getDataPrefix("header_id"),n=t.getAttribute(r);if(!n||"_headerRowNumber"===n||"_headerRowStatus"===n)return!1;var l=(this.headerConfigOptions[n]||{}).sortable;return a.Z.getBoolean(l)}catch(t){return s.Y.printStackTrace(t,null,this),!1}};var L=function(){};L.prototype.getLastFocusedCell=function(){if(this.focusedCell.length>0)return this.focusedCell[this.focusedCell.length-1];var t={focusedRowIndex:-1,focusedColIndex:null};return this.options.groupbyDisplayRowIndex&&(t.groupbyDisplayRowIndex=-1),t},L.prototype.getFocusedRowIndex=function(){return this._getFocusedRowIndex(this.options.groupbyDisplayRowIndex)},L.prototype._getFocusedRowIndex=function(t){return this.getLastFocusedCell()[!0===t&&this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex"]},L.prototype.getFocusedRealRowIndex=function(){return this.getLastFocusedCell().focusedRealRowIndex},L.prototype.getAllFocusedIndex=function(){for(var t=this.focusedCell,e=[],i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<t.length;o++){var s={};s.col=t[o].focusedColIndex,s.row=t[o][i],e.push(s)}return e},L.prototype.getAllFocusedRowIndex=function(){for(var t=[],e={},i=this.options.groupbyDisplayRowIndex?"groupbyDisplayRowIndex":"focusedRowIndex",o=0;o<this.focusedCell.length;o++){e[this.focusedCell[o][i]]=!0}for(var s in e)t.push(parseInt(s,10));return t},L.prototype.getFocusedColumnIndex=function(){return this.getLastFocusedCell().focusedColIndex},L.prototype.getFocusedColumnID=function(){return this.getColumnID(this.getFocusedColumnIndex())},L.prototype.getFocusedRowStatus=function(){var t=this._getFocusedRowIndex(!0);return-1==t?null:this.dataList.getRowStatus(t)},
L.prototype.setFocusedCell2=function(t,e,i,o){try{o=o||{};i=a.Z.getBoolean(i),e=this.getColumnIndex(e);var r=!1;try{r=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){r=!1}var n=this.getLastFocusedCell(),l=i&&n.focusedColIndex==e;if((this.___getEditReadOnly(t,e)||this._getEditDisabled(t,e))&&(l=!1),this.editedCell&&!this.editedCell.handleEndEdit(null,l))return!1;if(r||!0===this._isBrowserScroll()){if(!0===this._isHybridScroll()){!0===this._drawDataHybrid(t)&&(o.hybridAsync=!0),b=t-(this.rowIndex>0?this.rowIndex:0)}}else{var h=this._getVisibleLastIndex(this.lastIndex+1),d=this.getDataLength(),c=this.rowIndex+this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex);!0===this.hiddenRowObj.init&&this.rowIndex===d-h&&(c=d-this._getVisibleLastIndex(1));var u=this.rowIndex,p=this.hiddenCellObj.length>0;if(p&&t===c&&(c=Math.max(c-1,0)),t<u||t>c){var g=t<u?t-u:t-c;if(t>c&&this.hasSubtotal){for(var m in this.rollbackCommitFlag=!1,this.subtotalTableList){if(c<d-1)this.dataList._getCellData(c,m)!=this.dataList._getCellData(c+1,m)&&g++}this.rollbackCommitFlag=!0}var f=this.rowIndex+g;f=(f=f<0?0:f)>d-h?d-h:f,p&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(f=Math.min(f,this.lastTopRowIndex)),f!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!0,f=Math.max(0,f),isNaN(this.lastTopRowIndex)||null==this.lastTopRowIndex||(f=Math.min(f,this.lastTopRowIndex)),this.drawData(f,0,"keymove",l),!0===this.hiddenRowObj.init||p||(this.lastIndex=this.getLastIndex(this.lastDisplayedRow)))}}var b=t-(this.rowIndex>0?this.rowIndex:0),y=this.data_td_list[e+b*this.oneRowDataLength];return!!y&&("rollback"==this.__setFocusedCell({ctrl:!1},y,{editMode:i,dont_hide:l,dont_fixScroll:!0,tabDirection:o.tabDirection,shifted:o.shifted})&&this._setFocusedCell(n.focusedRowIndex,n.focusedColIndex,!0,{tabDirection:o.tabDirection}),!0)}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.setFocusedCell=function(t,e,i,o){try{(o=o||{}).groupbyDisplayRowIndex=this.options.groupbyDisplayRowIndex;var r=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),a=t;if(r&&(a=this.getDisplayRowIndex(t)),!isNaN(a)){if(!0===o.keepFocusedCell)for(var n=this.getColumnIndex(e),l=0;l<this.focusedCell.length;l++)if(this.focusedCell[l].focusedRowIndex===t&&this.focusedCell[l].focusedColIndex===n)return;return this._setFocusedCell(a,e,i,o)}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype._setFocusedCell=function(t,e,i,o){try{if(o=o||{},"none"==this.options.focusMode)return;if(!0===o.groupbyDisplayRowIndex&&(t=this._getGroupbyGroupedRowIndex(t,!0)),0==arguments.length||1==arguments.length){i=0!=arguments.length&&arguments[0];var r=this.colIndexInfo.body.colInfo.colIndexMatch;if(this.focusedCell.length>0)t=this.focusedCell[this.focusedCell.length-1].focusedRowIndex,e=this.focusedCell[this.focusedCell.length-1].focusedColIndex;else if(this.lastFocusedCell&&null!=this.lastFocusedCell.focusedColIndex&&this.lastFocusedCell.focusedRowIndex>=0)t=this.lastFocusedCell.focusedRowIndex,e=this.lastFocusedCell.focusedColIndex;else{var n=this.getLastFocusedCell();t=n.focusedRowIndex;if(null==(e=n.focusedColIndex)||-1==t)return this.focusedCell=[{focusedRowIndex:0,focusedColIndex:r.length-this.defaultColCnt-1}],this.moveHorizontal(null,"home"),void(i&&this._setFocusedCell(!0))}}var l=this.getDataLength(),h=this.getDataLength()-this._getVisibleLastIndex(1);if(e=this.getColumnIndex(e),t<0||t>h||e<0||e>=this.oneRowDataLength)return;var d=!1;try{d=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){d=!1}if(i=a.Z.getBoolean(i),this.delayedDraw({rowIndex:t}))return this.focusedCell=[{focusedRowIndex:t,focusedColIndex:e}],this._linkedDataList?this._linkedDataList.setRowPosition(t):this._dataList.setRowPosition(t),void this._dataList.setColumnPosition(this.getColumnID(e))
;var c=this.getElementById(this.id+"_scrollY_div");!0!==this._isBrowserScroll()&&c&&0==c.scrollTop&&this.rowIndex>0&&(c.scrollTop=this.lastScrollYTop);var u=t-(this.rowIndex>0?this.rowIndex:0);if(d||!0===this._isBrowserScroll()){if(!0===this._isHybridScroll()){!0===this._drawDataHybrid(t)&&(o.hybridAsync=!0),u=t-(this.rowIndex>0?this.rowIndex:0)}}else if(u<0)this.scrollEvent=!1,c.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t),this.drawData(t,0),u=0;else if(this.options.showLastRow&&u-this.lastIndex==1&&""===this.options.visibleRowNum);else if(u>this._getVisibleTrRowIndex(this.lastIndex,this.rowIndex)){var p=this._getVisibleLastIndex(this.lastIndex+1);this.hiddenCellObj.length>0&&!isNaN(this.lastTopRowIndex)&&null!=this.lastTopRowIndex&&(p=l-this.lastTopRowIndex);var g=t+p>l?l-p:t;this.hiddenCellObj.length>0&&(g=Math.max(0,g)),g!==this.rowIndex&&(this.scrollEvent=!1,this.checkScrollEnd=!o.isSort||"string"!=typeof this.options.filterFocusMode||"followfocus"!==this.options.filterFocusMode.toLowerCase(),c.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(g),g>this.rowIndex+p-1&&(this.adjustDraw_keepTop=!0),this.drawData(g,0),u=t-this.rowIndex)}var m=this.data_td_list[e+u*this.oneRowDataLength];if(m){for(var f=5;!0!==this._isBrowserScroll()&&this.hiddenCellObj.length>0&&0===m.offsetHeight&&f>0;){this.lastTopRowIndex++;var b=this.getElementById(this.id+"_size_y"),y=(c=this.getElementById(this.id+"_scrollY_div"),b.offsetHeight);y<1e6&&(y=parseInt(b.style.height,10)),b.style.height=c.offsetHeight+this.oneRowScrollHeight*this.lastTopRowIndex+"px",this.drawData(this.lastTopRowIndex,0),u--,m=this.data_td_list[e+u*this.oneRowDataLength],f--}return o.editMode=i,this.__setFocusedCell({ctrl:!1},m,o)}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.removeFocusedCell=function(){try{this.lastFocusedCell=this.getLastFocusedCell(),this.applyFocusedCellOut(),this.focusedCell=[],this._dataList.setRowPosition(null)}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.applyFocusedCell=function(t,e){if(e||(this.applyFocusedCellOut(),this.focusedCell=[]),null!=t){this.applyFocusedCellIn(t);var i={};i.focusedTd=t,this.focusedCell.push(i)}},L.prototype.__setFocusedCell=function(t,e,i){try{i=i||{};var r=t.ctrlKey||i.ctrled,n=t.shiftKey||i.shifted,l=e.className,h="";if(this.options.focusDefaultColumn){if(l.indexOf("_groupby")>=0||l.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1}else if(l.indexOf("_rowNum")>=0||l.indexOf("_rowStatus")>=0||l.indexOf("_groupby")>=0||l.indexOf("Subtotal")>=0)return null!=this.editedCell&&this.editedCell.handleEndEdit(),!1;var d=a.Z.getDataPrefix("tdIndex"),c=a.Z.getDataPrefix("colIndex"),p=parseInt(e.getAttribute(d)),g=parseInt(p/this.realRowDataLength),m=parseInt(e.getAttribute(c)),f=g+this.rowIndex,b=this._getGroupbyDisplayRowIndex(f),y=f;this.isDrillDown&&this._dataList.options.depthColumn&&(y=this.getRealRowIndex(f));var v=p%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),w=this.getColumnID(v),S=!0,_=this.getLastFocusedCell();this.focusedCell.length>0&&_.focusedTd==e&&(S=!1);var C,x={focuseChanged:S};if(o.q.extend(x,i),S&&this.editedCell&&!this.editedCell.handleEndEdit(t,!!i.dont_hide,x))return!1;C=this._linkedDataList?this._linkedDataList.setRowPosition(b):this.groupbyStatus.grouped&&this.options.groupbyDisplayRowIndex?this._dataList.setRowPosition(b):this._dataList.setRowPosition(y);var I=this._dataList.setColumnPosition(w);if(!1===C||!1===I)return this.options.senseReader&&_&&_.focusedTd&&_.focusedTd.focus(),!1;var T=this._getFocusedRowIndex(),k=this.getFocusedColumnIndex(),L=!(a.Z.getBoolean(this.options.useCtrlKey)&&r||a.Z.getBoolean(this.options.useShiftKey)&&n||i.keepFocusedCell||i.keepFocusedMultiCell),A=!1;if(L&&a.Z.getBoolean(i.allowContextMenuMultiCell)&&(L=!1,A=!0,this.focusedCell)){for(var D=!1,W=0;W<this.focusedCell.length;W++)if(this.focusedCell[W].focusedTd==e){D=!0;break}D||(L=!0,A=!1)}
if(L&&(this.applyFocusedCellOut(),this.focusedCell=[]),i.keepFocusedMultiCell&&this.focusedCell.length>0)for(W=0;W<this.focusedCell.length;W++){if(f===(Y=this.focusedCell[W]).focusedRowIndex&&v===Y.focusedColIndex){this._applyFocusedCellOut(Y),this.focusedCell.splice(W,1);break}}if(i.tabDirection||(this.focusedCellLinkIndex=-1,this.focusedCellLinkLength=0),this.focusedCell.length>0&&a.Z.getBoolean(this.options.useShiftKey)&&n){var q,M=(q=!0===this.options.ctrlShiftKey||!0===i.keepFocusedMultiCell?this.focusedCell[this.focusedCell.length-1]:this.focusedCell[0]).focusedRowIndex,E=q.focusedColIndex,R=!1;if((this.options.focusDefaultColumn&&q.focusedColIndex<0&&v<0&&this.hasClass(e,"gridBodyDefault_rowNumber")&&this.hasClass(q.focusedTd,"gridBodyDefault_rowStatus")||this.hasClass(q.focusedTd,"gridBodyDefault_rowNumber")&&this.hasClass(e,"gridBodyDefault_rowStatus")||this.hasClass(e,"gridBodyDefault_rowNumber")&&this.hasClass(q.focusedTd,"gridBodyDefault_rowNumber")||this.hasClass(e,"gridBodyDefault_rowStatus")&&this.hasClass(q.focusedTd,"gridBodyDefault_rowStatus"))&&(R=!0),R)return this.applyFocusedCellOut(),this.focusedCell=[],void this.__setFocusedCell(t,e);h="multiCell",this._applyFocusedMultiCell(M,E,f,v,i.ignoreFocusMode,i),i.dont_fixScroll||(m>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds()}else if(!A){var N;if(this.getCellInfo(e).options.blockSelect)return;var F={focusedTd:e,focusedRealRowIndex:y,focusedRowIndex:N=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>f-this.rowIndex||this.options.lastFixedRow>0&&f-this.rowIndex>this.lastIndex-this.options.lastFixedRow?f-this.rowIndex:f,focusedColIndex:v};this.options.groupbyDisplayRowIndex&&(F.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(N)),this.focusedCell.push(F),i.dont_fixScroll||(m>=this.getFixedColumnLastIndex()&&this.fixScrollLeftDirection(),this.fixScrollRightDirection()),this.options.lazyDrawHiddenColumn&&this.hideInvisibleTds();var O=!0!==this._isBrowserScroll()&&!!i.editMode;if(this.applyFocusedCellIn(e,O,{tabDirection:i.tabDirection,ignoreFocusMode:i.ignoreFocusMode,dataListRowPositionChanged:i.dataListRowPositionChanged,customRowIndex:f}),"linear"===this.options.focusFlow&&!0===i.editMode&&(this.focusedByApi=!1),_=this.getLastFocusedCell(),i.ignoreFocusMode||"cell"==this.options.focusMode){for(W=this.focusedCell.length-2;W>=0;W--)if(this.focusedCell[W].focusedTd==_.focusedTd){this._applyFocusedCellOut(this.focusedCell[W]),this.focusedCell.pop(),this.focusedCell.splice(W,1);break}}else if("both"==this.options.focusMode){for(W=this.focusedCell.length-2;W>=0;W--)if(this.focusedCell[W].focusedTd==_.focusedTd){this._applyFocusedCellOut(this.focusedCell[W]),this.focusedCell.pop(),this.focusedCell.splice(W,1),this.changeFocusedCellPosition(this.rowIndex);break}}else if("row"==this.options.focusMode){var B=a.Z.getDataPrefix("trIndex"),P=_.focusedTd?_.focusedTd.parentNode:null;for(W=this.focusedCell.length-2;W>=0;W--){var Y;if(null!=(Y=this.focusedCell[W]).focusedTd){var V=Y.focusedTd.parentNode;for(g=parseInt(V.getAttribute(B));g>0;)g--,V=a.Z.prev(V);do{if(V==P){this._applyFocusedCellOut(this.focusedCell[W]),this.focusedCell.pop(),this.focusedCell.splice(W,1),this.changeFocusedCellPosition(this.rowIndex,!0);break}if(!(V=a.Z.next(V)))break}while("0"!=V.getAttribute(B))}}}}var H=this.getCellInfo(v);if("custom"==H.options.inputType&&(H=H.cellManagerHashByRowIndex[f]),(T=this._getGroupbyDisplayRowIndex(T))==(f=this._getGroupbyDisplayRowIndex(f))&&k==v||u.f.fireEvent(this,"oncellindexchange",f,v,T,k),T!=f&&u.f.fireEvent(this,"onrowindexchange",f,T),k!=v&&u.f.fireEvent(this,"oncolumnindexchange",v,k),!0===this._isHybridScroll()&&!0!==i.hybridAsync){
var j=document.getElementById(this.id+"_main_div"),z=document.getElementById(this.id+"_scrollY_div"),G=Math.round(z.scrollTop),Z=this.getFooterHeight(),U=document.getElementById(this.id+"_head_table").offsetHeight,X=j.offsetHeight,K=e.offsetHeight,$=X-U-Z,J=G-this._hybridScrollYPos-e.offsetTop;a.Z.isIEAllVersion()&&(J+=U);var Q=K-J-$;if(J>0){var tt=G-J;z.scrollTop=tt}else if(Q>0){tt=G+Q;z.scrollTop=tt}}if(i.editMode){var et=this.uuid,it=e.id;if(!0===this._isNativeScroll()){var ot=e.parentNode,st=this.id+"_dataLayer",rt=document.getElementById(st),at=(U=this.head_table.offsetHeight,ot.offsetHeight*this.oneRowLength);tt=ot.offsetTop-rt.offsetHeight+at+2;a.Z.requestAnimationFrame((function(){var t,e=document.getElementById(st);e.scrollTop<tt?e.scrollTop=tt:e.scrollTop>(t=tt+e.offsetHeight-U-at)&&(e.scrollTop=Math.max(t,0)),a.Z.requestAnimationFrame((function(){var t=WebSquare.idCache[et],e=document.getElementById(it);t.setEditMode(e)}))}))}else!0===this._isHybridScroll()?a.Z.requestAnimationFrame((function(){var t=WebSquare.idCache[et],e=document.getElementById(it);t.setEditMode(e)})):this.setEditMode(e)}return h}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.applyFocusedCellOut=function(){if(this.focusedCell.length>0)for(var t=0;t<this.focusedCell.length;t++){var e=this.focusedCell[t];this._applyFocusedCellOut(e)}},L.prototype._applyFocusedCellOut=function(t){if("row"==this.options.focusMode||"both"==this.options.focusMode){if(null==(o=t.focusedTd)&&this.options.showLastRow){var e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&this.removeFocusRowStyle(o)}if("cell"==this.options.focusMode||"both"==this.options.focusMode){var o;if(null==(o=t.focusedTd)&&this.options.showLastRow){e=t.focusedRowIndex,i=t.focusedColIndex;o=this.data_td_list[i+e*this.oneRowDataLength]}null!=o&&("linear"!=this.options.focusFlow&&o.setAttribute("tabIndex",-1),this.removeClass(o,"focusedTd"),(!this.options.focusDefaultColumn||t.focusedColIndex>=0)&&(this.options.fixedRow>0&&t.focusedRowIndex-this.rowIndex>=0&&this.options.fixedRow>t.focusedRowIndex-this.rowIndex||this.options.lastFixedRow>0&&t.focusedRowIndex-this.rowIndex>this.lastIndex-this.options.lastFixedRow?this.applyCellStyleOptions(t.focusedRowIndex-this.rowIndex,t.focusedColIndex,!0):this.applyCellStyleOptions(t.focusedRowIndex,t.focusedColIndex,!0)),this.options.rowMouseOver&&this.addRowOverStyle(this.overElem))}},L.prototype.removeFocusRowStyle=function(t){try{if(null==t)return;for(var e=a.Z.getDataPrefix("trIndex"),i=a.Z.getDataPrefix("tdIndex"),o=a.Z.getDataPrefix("style_bak"),r=t.parentNode,n=parseInt(r.getAttribute(e));n>0;)n--,r=a.Z.prev(r);var l=a.Z.first(r),h=parseInt(l.getAttribute(i));n=parseInt(h/this.realRowDataLength);for(var d=0;d<this.realRowDataLength;d++){var c=d;d>=this.defaultColCnt&&(c=Math.floor((d-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(d-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var u=n*this.realRowDataLength+c,p=this.all_data_td_list[u];if(this.removeClass(p,"focusedTr"),d<this.defaultColCnt){var g=p.className;g.indexOf(this.options.bodyTdClass+"_rowNumber")>=0||g.indexOf("w2grid_groupby_depth_0")>=0?""!=this.options.rowNumBackgroundColor&&!0!==this.options.rowNumRowMouseOverColor||(p.style.backgroundColor="",p.removeAttribute(o)):g.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(p.style.backgroundColor="",p.removeAttribute(o))}else{var m=parseInt(p.getAttribute(i)),f=n+this.rowIndex,b=m%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(f,b,!0)}}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.applyFocusedCellIn=function(t,e,i){try{if("none"==this.options.focusMode)return;var o=(i=i||{}).tabDirection,r=i.ignoreFocusMode,n=i.linkNoFocus,l=a.Z.getDataPrefix("col_id"),h=a.Z.getDataPrefix("tdIndex"),d=this.getCellInfo(t.getAttribute(l)),c=d.options.inputType||"text",u=!1
;"custom"==d.options.inputType&&"undefined"!==i.customRowIndex&&(c=(d=d.cellManagerHashByRowIndex[i.customRowIndex]?d.cellManagerHashByRowIndex[i.customRowIndex]:d).options.inputType||"text"),this.options.useTextMultiLink&&this.options.senseReader&&"user"===c&&d.options.customFormatter&&(u=!0);var p,g=!0;if(i.dataListRowPositionChanged&&"sytle"===this.options.syncRowPositionOption&&(g=!1),!0===i.shifted&&this.options.senseReader&&(e=!0),g)if(this.focusedByApi=!0,d._realInputType&&(p=t.getElementsByTagName(d._realInputType)[0]),p instanceof HTMLElement)p.focus();else if(d.options.embeddedInput&&!1===u){var m=this.getElemRowIndex(t);if(e)if("text"!=c&&"link"!=c||!this._getEditDisabled(m,d.id)&&!this.__getEditReadOnly(t,m))this.getInput(d,t).focus();else!0===i.shifted&&this.options.senseReader&&t.setAttribute("tabIndex",0),t.focus();else if(o)if(this._getEditDisabled(m,d.id)||this.__getEditReadOnly(t,m))t.focus();else this.getInput(d,t).focus();else this.__getEditReadOnly(t,m)&&!0!==this.options.readOnlyTabIgnore&&(t.setAttribute("tabIndex",0),t.focus())}else{var f=!1;try{var b=this.focusedCell[this.focusedCell.length-1].focusedRealRowIndex-this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&b>=0&&this.options.fixedRow>b||this.options.lastFixedRow>0&&b-this.rowIndex>this.lastIndex-this.options.lastFixedRow)&&(f=!0)}catch(t){s.Y.printStackTrace(t,null,this)}if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum||this.___getEditReadOnly(b,t.getAttribute(l))&&!0===this.options.readOnlyTabIgnore||t.setAttribute("tabIndex",0),"custom"==c&&this.options.senseReader){m=this.getElemRowIndex(t);var y=d.cellManagerHashByRowIndex[m];c=y?y.options.inputType:"text"}if(e&&("text"==c||"secret"==c||"textarea"==c||"textImage"==c||"calendar"==c)||f||i.noApplyRealFocus);else if("button"==c&&this.options.senseReader){var v=t.getElementsByTagName("button");(v=v[0]).focus()}else if("link"==c&&this.options.senseReader){_=(_=t.getElementsByTagName("a"))[0],this.hasClass(document.activeElement,"w2grid_scrollY")?o&&_.focus():_.focus()}else if("checkbox"==c&&this.options.senseReader){t.getElementsByTagName("input")[0].focus()}else if("user"==c&&this.options.senseReader){var w;if(0==(_=t.getElementsByTagName("a")).length&&(_=t.getElementsByTagName("input")),-1!=this.focusedCellLinkIndex)if("right"==o){for(var S=0;S<_.length;S++)document.activeElement==_[S]&&(this.focusedCellLinkIndex=S);w=this.focusedCellLinkIndex+1}else w=this.focusedCellLinkIndex-1;else{if("right"==o)w=0;else if(null==o){if(w=0,document.activeElement)for(S=0;S<_.length;S++)document.activeElement==_[S]&&(w=S)}else w=_.length-1;this.focusedCellLinkLength=_.length}_=_[w],this.focusedCellLinkIndex=w,_?o&&_.focus():this._getEditDisabled(m,d.id)||this.__getEditReadOnly(t,m)?t.blur():t.focus()}else if("select"!=c||1!=this.options.senseReader||"ul"!=d.options.tableRender||this.isVirtualCursor())a.Z.isIE(8)?"none"!=t.parentElement.style.display&&t.focus():n||t.focus();else{var _;(_=(_=t.getElementsByTagName("a"))[0]).focus()}}var C=!1;try{C=this.lastEvent&&void 0!==this.lastEvent.type&&"unknown"!=typeof this.lastEvent.type&&("focus"==this.lastEvent.type||"focusin"==this.lastEvent.type)}catch(t){C=!1}if(!0===this._isHybridScroll())this._setHybridDataLayerTop();else if(!C&&!e){var x=this.getElementById(this.id+"_dataLayer"),I=this.getElemRowIndex(t),T=this.getLastFocusedCell().focusedRowIndex;if(!0===this._isNativeScroll("both")){for(var k=0;k<this.focusedCell.length;k++)if(0!==this.focusedCell[k].focusedRowIndex){!1;break}0===I&&0===T&&0!=x.scrollTop&&(x.scrollTop=0)}else x.scrollLeft=0,x.scrollTop=0}var L=this.options.focusMode;if(r&&(L="cell"),"row"!=L&&"both"!=L||this.setFocusRowStyle(t),"cell"==L||"both"==L){this.addClass(t,"focusedTd");var A=parseInt(t.getAttribute(h)),D=parseInt(A/this.realRowDataLength),W=D+this.rowIndex;(this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>D||this.options.lastFixedRow>0&&D>this.lastIndex-this.options.lastFixedRow)&&(W=D)
;var q=A%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);if(this.options.focusDefaultColumn&&q<0)return;this.applyCellStyleOptions(W,q,null,r)}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.setFocusRowStyle=function(t){try{if(null==t)return;for(var e=a.Z.getDataPrefix("trIndex"),i=a.Z.getDataPrefix("tdIndex"),o=a.Z.getDataPrefix("style_bak"),r=t.parentNode,n=parseInt(r.getAttribute(e));n>0;)n--,r=a.Z.prev(r);var l=a.Z.first(r),h=parseInt(l.getAttribute(i));n=parseInt(h/this.realRowDataLength);for(var d=0;d<this.realRowDataLength;d++){var c=d;d>=this.defaultColCnt&&(c=Math.floor((d-this.defaultColCnt)/this.columnOrder.length)*this.columnOrder.length+this.columnOrder[(d-this.defaultColCnt)%this.columnOrder.length]+this.defaultColCnt);var u=n*this.realRowDataLength+c,p=this.all_data_td_list[u];if(this.addClass(p,"focusedTr"),d<this.defaultColCnt){var g=p.className;g.indexOf(this.options.bodyTdClass+"_rowNumber")>=0?""!=this.options.rowNumBackgroundColor&&!0!==this.options.rowNumRowMouseOverColor||(p.style.backgroundColor=this.options.selectedRowColor.wq_trim(),p.removeAttribute(o)):g.indexOf(this.options.bodyTdClass+"_rowStatus")>=0&&(p.style.backgroundColor=this.options.selectedRowColor.wq_trim(),p.removeAttribute(o))}else{var m=parseInt(p.getAttribute(i)),f=n+this.rowIndex,b=m%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.applyCellStyleOptions(f,b)}}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.outFocusedCell=function(){this.removeFocusedCell()},L.prototype.getFocusedCellData=function(){var t=this._getFocusedRowIndex(),e=this.getFocusedColumnIndex(),i=this.getColumnID(e);return t>-1?this.dataList._getCellData(t,i):null},L.prototype.getFocusedRowData=function(){var t=this._getFocusedRowIndex();return t>-1?this.dataList.getRowData(t):null},L.prototype.getFocusedRowXML=function(){var t=this._getFocusedRowIndex(!0);return t>-1?this.dataList.getRowXML(t):null},L.prototype.removeRowFocus=function(t){for(var e=[],i=0;i<this.focusedCell.length;i++)t!=this.focusedCell[i].focusedRowIndex?e.push(this.focusedCell[i]):this._applyFocusedCellOut(this.focusedCell[i]);this.focusedCell=e},L.prototype.setFocusedHeaderObj=function(t){if(this.getHeaderLayer(t)){var e=this.headerObj[t];if(e)switch(e.headInputType){case"checkcombobox":case"select":case"checkbox":case"input":e.focus()}}},L.prototype.focus=function(t){try{if(this.options.senseReader&&this.options.useStartEndDiv){var e=this.getElementById(this.id+"_gridstart_div"),i=this.getElementById(this.id+"_gridend_div");t&&"object"===(0,l.A)(t)&&(t.shiftKey?i.focus():e.focus())}else{var o=this.getLastFocusedCell(),r=-1!=o.focusedRowIndex?o.focusedRowIndex:0,a=null!=o.focusedColIndex?o.focusedColIndex:0;this._setFocusedCell(r,a,!1)}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.setFocusedMultiCell=function(t,e,i,o,r){try{r=r||{};var a=this.options.useShiftKey;this.options.useShiftKey=!0;var n=Number(t),l=Number(e),h=Number(i),d=Number(o);isNaN(n)||isNaN(l)||this._setFocusedCell(n,l,null,{ignoreFocusMode:r.ignoreFocusMode,keepFocusedMultiCell:r.keepFocusedMultiCell}),isNaN(h)||isNaN(d)||this._setFocusedCell(h,d,!1,{shifted:!0,ignoreFocusMode:r.ignoreFocusMode,keepFocusedMultiCell:r.keepFocusedMultiCell}),this.options.useShiftKey=a}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype._setMultiFocus=function(t,e){try{if(!t)return!1;var i={keepFocusedMultiCell:!0};if("single"===e){var o=Number(t.row),r=Number(t.col);if(isNaN(o)||isNaN(r))return!1;this._setFocusedCell(o,r,!1,{ctrled:!0,keepFocusedMultiCell:i.keepFocusedMultiCell})}else if("multi"===e){var a=Number(t.startRow),n=Number(t.startCol),l=Number(t.endRow),h=Number(t.endCol);if(isNaN(a)||isNaN(n)||isNaN(l)||isNaN(h))return!1;this.setFocusedMultiCell(a,n,l,h,i)}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.setMultiFocus=function(t){try{if(!Array.isArray(t))return;for(var e=0;e<t.length;e++){var i=t[e],o="",r=i&&"object"===(0,
l.A)(i)&&"row"in i&&"col"in i,a=i&&"object"===(0,l.A)(i)&&"startRow"in i&&"startCol"in i&&"endRow"in i&&"endCol"in i;if(!0===r)o="single";else{if(!0!==a)return;o="multi"}if(!1===this._setMultiFocus(i,o))return}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype._removeMultiFocus=function(t){try{for(var e={},i=function(t){for(var i=t.endRow-t.startRow+1,o=t.endCol-t.startCol+1,s=i*o,r=0;r<s;r++){var a=Math.floor(r/o)+t.startRow,n=r%o+t.startCol;a=Number(a),n=Number(n),e[a+","+n]=!0}},o=0;o<t.length;o++){var r=t[o],a=r&&"object"===(0,l.A)(r)&&"row"in r&&"col"in r,n=r&&"object"===(0,l.A)(r)&&"startRow"in r&&"startCol"in r&&"endRow"in r&&"endCol"in r;if(!0===a){var h=Number(r.row),d=Number(r.col);if(isNaN(h)||isNaN(d))return!1;e[h+","+d]=!0}else if(!0===n){var c=Number(r.startRow),u=Number(r.startCol),p=Number(r.endRow),g=Number(r.endCol);if(isNaN(c)||isNaN(u)||isNaN(p)||isNaN(g))return!1;i(r)}}return e}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.removeMultiFocus=function(t){try{if(!Array.isArray(t))return;var e=this._removeMultiFocus(t);if(!0!==a.Z.isEmptyObject(e))for(var i=this.focusedCell.length-1;i>=0;i--){var o=this.focusedCell[i];e[o.focusedRowIndex+","+o.focusedColIndex]&&(this._applyFocusedCellOut(o),this.focusedCell.splice(i,1))}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.removeFocusedMultiCell=function(t,e,i,o){try{for(var r="focusedColIndex",a="focusedRowIndex",n=this.focusedCell.length-1;n>=0;n--){var l=this.focusedCell[n];l[a]>=t&&l[a]<=i&&l[r]>=e&&l[r]<=o&&(this._applyFocusedCellOut(l),this.focusedCell.splice(n,1))}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype._applyFocusedMultiCell=function(t,e,i,o,r,a){try{(a=a||{})&&!0===a.keepFocusedMultiCell&&this.focusedCell.length>0?this.removeFocusedMultiCell(t,e,i,o):!0!==this.options.ctrlShiftKey&&(this.applyFocusedCellOut(),this.focusedCell=[]);var n=this.getLocationRowCol(t,e);t=n.rowIndex,e=n.colIndex;var l=t,h=e;"row"===this.options.focusMode&&!0!==r&&(o=this.getColumnCount()-1);var d=this.getLocationRowCol(i,o);i=d.rowIndex,o=d.colIndex;for(var c=i,u=o,p=t>i,g=e>o,m=this.htmlInfo.body.rowAttrArr.length,f=p?i:t,b=p?t:i,y=g?o:e,v=g?e:o,w=!0;w;){w=!1;var S=b,_=0;for(var C in this.cellMergeInfo)this.cellMergeInfo.hasOwnProperty(C)&&_++;b-f>m&&_<1&&(S=f+m);for(var x=y,I=f;I<=S;I++){var T=this.getOriginalRowCol(I,y);T.colSize>1&&x>(T=this.getLocationRowCol(T.rowIndex,T.colIndex)).colIndex&&(x=T.colIndex,w=!0),y=x}var k=v;for(I=f;I<=S;I++){var L=this.getOriginalRowCol(I,v);L.colSize>1&&k<(L=this.getLocationRowCol(L.rowIndex,L.colIndex)).colIndex+L.colSize-1&&(k=L.colIndex+L.colSize-1,w=!0),v=k}for(var A=f,D=y;D<=v;D++){var W=this.getOriginalRowCol(f,D);W.rowSize>1&&A>(W=this.getLocationRowCol(W.rowIndex,W.colIndex)).rowIndex&&(A=W.rowIndex,w=!0),f=A}var q=b;for(D=y;D<=v;D++){var M=this.getOriginalRowCol(b,D);M.rowSize>1&&q<(M=this.getLocationRowCol(M.rowIndex,M.colIndex)).rowIndex+M.rowSize-1&&(q=M.rowIndex+M.rowSize-1,w=!0),b=q}}i=p?f:b,e=g?v:y,o=g?y:v;for(I=t=p?b:f;p?I>=i:I<=i;p?I--:I++)for(D=e;g?D>=o:D<=o;g?D--:D++){var E=this.getOriginalRowCol(I,D),R=E.colIndex,N=E.rowIndex;if(!E.noLeftTop){var F=this.data_td_list[R+(N-this.rowIndex)*this.oneRowDataLength];if(N<this.rowIndex&&(F=null),!(this.groupbyStatus.grouped&&F&&this.hasClass(F,"w2grid_groupby"))){var O=this.getCellInfo(R),B=this._getRealColIndex("body",O.options.col_id)+this.defaultColCnt;if(!O.options.blockSelect&&!this.hiddenList[B]){var P={focusedTd:F,focusedRowIndex:N,focusedColIndex:R};if(this.options.groupbyDisplayRowIndex&&(P.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(N)),I==l&&D==h?this.focusedCell.unshift(P):this.focusedCell.push(P),null!=F){var Y=!0;(O.options.embeddedInput||D==u&&I==c)&&(Y=!1),this.applyFocusedCellIn(F,Y,{ignoreFocusMode:r,shifted:a.shifted})}
(""==O.options.inputType||"text"==O.options.inputType&&!O.options.embeddedInput||"textImage"==O.options.inputType||"calendar"==O.options.inputType)&&(this.getInput(O).options.editType=O.options.editType?O.options.editType:this.options.editType)}}}}}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype._addFocus=function(t){try{var e=a.Z.getDataPrefix("tdIndex"),i=parseInt(t.getAttribute(e)),o=parseInt(i/this.realRowDataLength)+this.rowIndex,r=o;this.isDrillDown&&this._dataList.options.depthColumn&&(r=this.getRealRowIndex(o));var n,l=i%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength),h={focusedTd:t,focusedRealRowIndex:r,focusedRowIndex:n=this.rowIndex>0&&this.options.fixedRow>0&&this.options.fixedRow>o-this.rowIndex||this.options.lastFixedRow>0&&o-this.rowIndex>this.lastIndex-this.options.lastFixedRow?o-this.rowIndex:o,focusedColIndex:l};this.options.groupbyDisplayRowIndex&&(h.groupbyDisplayRowIndex=this._getGroupbyDisplayRowIndex(n)),this.focusedCell.push(h)}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.focusToStart=function(){try{var t=document.getElementById(this.id+"_head_table").getElementsByTagName("button")[0];if(t)return this.removeFocusedCell(),void t.focus();for(var e=0,i=0,o=!1,r=this.getDataLength(),a=this.getColumnCount();e<r;){for(;i<a;){var n=this.getCellInfo(i);if(!this.___getEditReadOnly(e,i)&&!this._getEditDisabled(e,i)&&"radio"!==n.options.inputType){o=!0;break}i++}if(o)break;e++}this._setFocusedCell(e,i,this.options.keyMoveEditMode,{tabDirection:"left"})}catch(t){s.Y.printStackTrace(t,null,this)}},L.prototype.focusToEnd=function(){try{for(var t=this.getDataLength()-1,e=this.getColumnCount()-1,i=!1;t>=0;){for(;e>=0;){var o=this.getCellInfo(e);if(!this.___getEditReadOnly(t,e)&&!this._getEditDisabled(t,e)&&"radio"!==o.options.inputType){i=!0;break}e--}if(i)break;t--}if(t<0){var r=document.getElementById(this.id+"_head_table").getElementsByTagName("button");r.length>0&&r[r.length-1].focus()}else this._setFocusedCell(t,e,this.options.keyMoveEditMode,{tabDirection:"right"})}catch(t){s.Y.printStackTrace(t,null,this)}};var A=function(t){};A.prototype._subtotalHidden=function(t){try{for(var e=0;e<t.length;e++){if(this.isIE6or7)for(var i=t[e].getElementsByTagName("td"),o=0;o<i.length;o++)i[o].style.borderWidth="0px";"none"!==t[e].style.display&&(this.drawedSubtotal&&this.drawedSubtotal.drawedRowLength--,t[e].style.display="none")}}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalHidden=function(t){try{if(!this.hasSubtotal)return;if(t){if("number"==typeof t.index)for(var e=this.drawedSubtotal.splice(t.index,1),i=0;i<e.length;i++)this._subtotalHidden(e[i]);if("number"==typeof t.rowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex==t.rowIndex){e=this.drawedSubtotal.splice(i,1);for(var o=0;o<e.length;o++)this._subtotalHidden(e[o])}if("number"==typeof t.startRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex>=t.startRowIndex)for(e=this.drawedSubtotal.splice(i,1),o=0;o<e.length;o++)this._subtotalHidden(e[o]);if("number"==typeof t.endRowIndex)for(i=this.drawedSubtotal.length-1;i>=0;i--)if(this.drawedSubtotal[i].rowIndex<=t.endRowIndex)for(e=this.drawedSubtotal.splice(i,1),o=0;o<e.length;o++)this._subtotalHidden(e[o])}else{for(var r in this.subtotalTableList){var a=this.subtotalRowHash[r];a&&this._subtotalHidden(a)}this.drawedSubtotal=[],this.drawedSubtotal.drawedRowLength=0}}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.refreshSubtotalRow=function(t){try{for(var e=t-this.rowIndex,i=!0===this._isBrowserScroll()?this.getRowCount()-1:this.lastIndex,o=e;o<=i;o++)this.drawSubtotalRow(o+1,o+this.rowIndex);var n=WebSquare.BootLoader.fullViewed||!1,l=a.Z.fullViewed||!1;if(!n&&!l){var h=this.options.adaptive,d=parseInt(this.options.adaptiveThreshold)||480;if("crosstab"==h&&!(a.Z.isIE()&&parseInt(r.I.browserVersion(),10)<10)&&a.Z._getBrowserWidth()<=d){
for(o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!0);this.removeAdaptiveGridSubtotalHeight(),this.setAdaptiveGridSubtotalHeight();for(o=this.defaultColCnt;o<this.hiddenList.length;o++)1==this.hiddenList[o]&&this.setAdaptiveColumnVisible(o,!1);this.event.hasEvent(this.id+"_body_tbody","onscroll")||this.event.addListener(this.getElementById(this.id+"_body_tbody"),"onscroll",this.event.bindAsEventListener(this,this.tbodyMoveXScroll))}}}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.drawSubtotalRow=function(t,e,i){try{var o=0;if(!this.hasSubtotal||e<0||e>=this.getDataLength())return o;var r=NaN;if(i&&!isNaN(i.maxCount)&&(r=i.maxCount),r<=0)return o;for(var a in this.subtotalTableList){var n=this.dataList._getCellData(e,a),l=n+"_12";if(e<this.getDataLength()-1)l=this.dataList._getCellData(e+1,a);if(n!=l){var h=this.subtotalRowHash[a],d=this.subtotalTableList[a],c=d.rows.length,u=[];u.rowIndex=e,u.targetID=a;for(var p=0;p<c;p++){var g=h?h[t*c+p]:void 0;if(g){if(this.isIE6or7)for(var m=g.getElementsByTagName("td"),f=0;f<m.length;f++)m[f].style.borderWidth="";o>=r?g.style.display="none":(g.style.display="",o++),g.setAttribute("data-subtotalrowindex",e),u.push(g),this.lastSubtotalRow=g}}if(this.drawedSubtotal.push(u),this.drawedSubtotal.drawedRowLength+=o,this.setSubtotalData(d,a,n,e,u,i),o>=r)break}}return o}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.hasUpperSubtotalRow=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return!1;for(var e in this.subtotalTableList){var i=this.dataList._getCellData(t,e),o=i;if(t<this.getDataLength())o=this.dataList._getCellData(t-1,e);if(i!=o)return!0}return!1}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.getHasSubtotalCount=function(t){try{if(!this.hasSubtotal||t<0||t>=this.getDataLength())return 0;var e=0;for(var i in this.subtotalTableList){var o=this.dataList._getCellData(t,i),r=o;t+1<this.getDataLength()?r=this.dataList._getCellData(t+1,i):t+1==this.getDataLength()&&e++,o!=r&&e++}return e}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.setSubtotalData=function(t,e,i,o,r,n){try{var l,h=this.subtotalDataArr[e+"_"+i];if(null==h&&(h=this.getSubtotalData(t,e,i,o)),this.options.subtotalStyleFormatter)try{"function"==typeof this.options.subtotalStyleFormatter?l=this.options.subtotalStyleFormatter:null!=(l=a.Z.getGlobalFunction(this.options.subtotalStyleFormatter,this.scope_id))&&(this.options.subtotalStyleFormatter=l)}catch(t){l=null}for(var d=a.Z.getDataPrefix("inputType"),c=a.Z.getDataPrefix("NaNFormat"),u=a.Z.getDataPrefix("colMerge"),p=a.Z.getDataPrefix("value"),g=a.Z.getDataPrefix("useLocale"),m=a.Z.getDataPrefix("localeRef"),f=0;f<r.length;f++)for(var b=r[f].getElementsByTagName("td"),y=0;y<b.length;y++){var v=b[y],w=v.getAttribute("id"),S=this.subtotalConfigOptions[w]||{};if(null!=h[w]){var _=h[w];if("expression"==v.getAttribute(d)&&isNaN(_)){var C=v.getAttribute(c)||S.NaNFormat;null!=C&&"NaN"!=C&&(_=C)}if(v.innerHTML=this.dataTagOpen+_+this.dataTagClose,"function"==typeof l){var x=h[w+"_org"];null==x&&(x=_);var I=l(x,_,v.id);if(v&&I){var T=v.getAttribute("data-bkclassname");null==T&&(T=v.className,v.setAttribute("data-bkclassname",T)),v.className=v.getAttribute("data-bkclassname")+" "+I}}}else if("true"!=v.getAttribute(u)||this.groupbyStatus.grouped){var k=v.getAttribute(p),L=v.getAttribute(g),A=v.getAttribute(d);if("true"===L||this.options.useLocale&&!L||"false"!==L&&S.useLocale){var D=v.getAttribute(m)||S.localeRef;if(D&&"expression"!==A){var W=this.getLocaleValue(D);W&&(k=W)}}k=null!=k?k:"",v.innerHTML=this.dataTagOpen+k+this.dataTagClose}else v.style.borderTopWidth="0px",v.style.borderBottomWidth="0px"}}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.getSubtotalData=function(t,e,i,o){try{var r=e,n=this.subtotalObj[e];if(null==n){n={}
;for(var l=a.Z.getDataPrefix("inputType"),h=a.Z.getDataPrefix("expression"),d=a.Z.getDataPrefix("colindex"),c=a.Z.getDataPrefix("dataType"),u=a.Z.getDataPrefix("displayFormat"),p=a.Z.getDataPrefix("displayFormatter"),g=0;g<t.rows.length;g++)for(var m=t.rows[g].getElementsByTagName("td"),f=0;f<m.length;f++){var b=m[f],y=this.subtotalConfigOptions[b.id]||{};if("expression"==b.getAttribute(l)){(W={}).id=b.getAttribute("id");var v,w=b.getAttribute(h)||"";if(!w&&y.expression&&(w=y.expression),""!=w){var S="";this.options.groupbyStatus||(w.toLowerCase().indexOf("sumifs")>-1?S="sumifs":w.toLowerCase().indexOf("sumif")>-1&&(S="sumif")),v=S?w.substring(w.indexOf("(")+1,w.indexOf(",")):w.substring(w.indexOf("(")+1,w.indexOf(")")),w=w.replace(/[sS][uU][mM][\s]*[(]/g,"this.subtotalcolsum( obfuscator_st, obfuscator_en ,"),this.options.groupbyStatus||(w=(w=w.replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"this.subtotalcolsumif( obfuscator_st, obfuscator_en ,")).replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"this.subtotalcolsumifs( obfuscator_st, obfuscator_en ,")),w=(w=(w=(w=(w=(w=(w=w.replace(/[aA][vV][gG][\s]*[(]/g,"this.subtotalcolavg( obfuscator_st, obfuscator_en ,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.subtotalcolmax( obfuscator_st, obfuscator_en ,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.subtotalcolmin( obfuscator_st, obfuscator_en ,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"this.subtotalcolcnt( obfuscator_st, obfuscator_en ,")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][vV][aA][lL][uU][eE][\s]*[(]/g,"this.dataList._getCellData( obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][cC][oO][lL][lL][aA][bB][eE][lL][\s]*[(]/g,"this.subtotaltargetcollabel( obfuscator_st, obfuscator_en, obfuscator_targetID")).replace(/[tT][aA][rR][gG][eE][tT][fF][oO][oO][tT][eE][rR][vV][aA][lL][uU][eE][\s]*[(]/g,"this.subtotaltargetfootervalue( obfuscator_st, obfuscator_en,")}var _="text",C=parseInt(b.getAttribute(d))-this.defaultColCnt;if(C>=0&&(_=this._dataList.getCellInfo(C).options.dataType),"true"===this.options.useCurrency?W.dataType=b.getAttribute(c):W.dataType=b.getAttribute(c)||_,!W.dataType&&y.dataType&&(W.dataType=y.dataType),W.expression=w,!W.dataType){var x=this.getCellInfo(v),I=x&&x.options&&x.options.dataType;v&&"true"===this.options.useCurrency?(W.dataType=I,"function"==typeof x.options.customModelUnformatter?W.customModelUnformatter=x.options.customModelUnformatter:W.customModelUnformatter=a.Z.getGlobalFunction(x.options.customModelUnformatter,this.scope_id)):W.dataType=_}W.displayFormat=b.getAttribute(u)||y.displayFormat||"",W.displayFormatter=b.getAttribute(p)||y.displayFormatter||"","true"!==this.options.useCurrency||W.displayFormatter||(W.displayFormat=x.options.displayFormat||b.getAttribute(u)||"",W.displayFormatter=x.options.displayFormatter||""),W.formatter=WebSquare.format.createFormatter(W.dataType,W.displayFormat,W.displayFormatter,null,null,null,this.scope_id,this.id),n[W.id]=W}}this.subtotalObj[e]=n}for(var T=o;T>0&&i==this.dataList._getCellData(T-1,e);)T--;var k=T,L=o,A={};for(var D in n){var W=n[D],q=a.Z.scopingFuncBody(W.expression,this.scope_id);this._subtotalDisplayFormat=W.displayFormat||"";var M=Function("obfuscator_st","obfuscator_en","obfuscator_targetID",q).call(this,k,L,r);W.customModelUnformatter&&(M=W.customModelUnformatter.call(this,M));var E=W.formatter.format(M);A[D]=E,this.options.subtotalStyleFormatter&&M!==E&&(A[D+"_org"]=M)}return this._subtotalDisplayFormat="",A}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.getSubtotalRowList=function(t){try{var e=[];t&&"object"===t.returnType&&(e={});var i=this.getDataLength();for(var o in this.subtotalStrList)for(var r=1;r<i;r++){this.dataList._getCellData(r-1,o)!=this.dataList._getCellData(r,o)&&(t&&"object"===t.returnType?e[r]=!0:e.push(r))}return e}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolsumif=function(t,e,i,o,r){try{var a=[],n=[],l=[];if(o){var h=this._getOperator(o);if(!h.operator||!h.value)return
;return n.push(h.operator),l.push(h.value),a?a.push(r):a.push(i),this._subtotalcolsum(t,e,i,a,n,l)}}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolsumifs=function(t,e,i){try{for(var o=[],r=[],a=[],n=(arguments.length-3)/2,l=0;l<n;l++){var h=this._getOperator(arguments[2*l+3]),d=arguments[2*l+4];h.operator&&h.value&&(r.push(h.operator),a.push(h.value)),o.push(d)}return this._subtotalcolsum(t,e,i,o,r,a)}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolsum=function(t,e,i){try{try{return this._subtotalcolsum(t,e,i)}catch(t){s.Y.printStackTrace(t,null,this)}}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},A.prototype._subtotalcolsum=function(t,e,i,o,r,n){try{var l={};!this.options.groupbyStatus&&o&&(l={conditionColumn:o,targetOperator:r,conditionValue:n,blank:!1});var h,d=this.getColumnSubtotalRangeDataArray(t,e,i,l),c="";if(d.length>0)if(h=this.getColumnOption(i,"dataType"),c=0,"bigDecimal"===h)for(var u=0;u<d.length;u++)c=WebSquare.bigDecimal(c+"").plus(d[u]);else if("time"===h)for(u=0;u<d.length;u++){var p=WebSquare.text.fillZero(c,4);c=WebSquare.date.dateTimeAdd(p,d[u],"hour","time")}else c=a.Z.sum(d,{displayFormat:this._subtotalDisplayFormat});return a.Z.setPrecision(c)}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolavg=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),r="",a=this.getColumnOption(i,"dataType");if(o.length>0)if("bigDecimal"===a){for(var n in r="0",o)r=WebSquare.bigDecimal(r).plus(o[n]);r=r.divide(WebSquare.bigDecimal(o.length))}else r=WebSquare.util.sum(o,{displayFormat:this._subtotalDisplayFormat})/o.length;return r}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolmax=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),r=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===r)for(var l in o)n=null==n?o[l]:n.compare(o[l]);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n<h)&&(n=h)}return n=null==n?"":n,a.Z.setPrecision(n)}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolmin=function(t,e,i){try{var o=this.getColumnSubtotalRangeDataArray(t,e,i),r=this.getColumnOption(i,"dataType"),n=null;if("bigDecimal"===r)for(var l in o)n=null==n?o[l]:n.compare(o[l],!0);else for(l=0;l<o.length;l++){var h=parseFloat(o[l]);isNaN(h)||(null==n||n>h)&&(n=h)}return n=null==n?"":n,a.Z.setPrecision(n)}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotalcolcnt=function(t,e,i,o){try{o=o||{};return(this.getColumnSubtotalRangeDataArray(t,e,i,o)||[]).length}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.subtotaltargetcollabel=function(t,e,i,o){var r="";try{r=this.dataList._getCellData(e,i);var a=this.getCellInfo(i),n=a.options.inputType;"select"!==n&&"autoComplete"!==n&&"checkcombobox"!==n||(r=a.getData(r,e))}catch(t){s.Y.printStackTrace(t,null,this)}return r},A.prototype.subtotaltargetfootervalue=function(t,e,i,o){var r;try{this.hasFooter&&this.footerTempSum&&this.footerTempSum[i]&&(r=this.footerTempSum[i].sum)}catch(t){s.Y.printStackTrace(t,null,this)}return r},A.prototype.getColumnSubtotalRangeDataArray=function(t,e,i,o){try{for(var r,a=[],n=this.getColumnID(i),h=this.getColumnOption(n,"dataType"),d=this.dataList.getDeletedIndex(),c=this.dataList.getModifiedIndex(),u=t;u<=e;u++){if(this.options.excludeDeletedRows){for(var p=!1,g=0;g<d.length;g++)if(d[g]===u){p=!0;break}if(p)continue}if(this.options.excludeModifiedRows){for(p=!1,g=0;g<c.length;g++)if(c[g]===u){p=!0;break}if(p)continue}if("object"===(0,l.A)(o)&&o.conditionColumn&&o.conditionColumn.length>0){var m=!0;for(g=0;g<o.conditionColumn.length;g++){var f=this.dataList.getCellData(u,o.conditionColumn[g]),b=o.targetOperator[g],y=o.conditionValue[g],v=this.getColumnOption(o.conditionColumn[g],"dataType");if(0==(m=this._isMatched(y,f,b,v)))break}if(0==m)continue}"bigDecimal"===h?r=WebSquare.bigDecimal(this.dataList._getCellData(u,i)):(r=this.dataList._getCellData(u,i),r+=""),
void 0===r||""==r?(r="0","object"===(0,l.A)(o)&&!1!==o.blank&&a.push(r)):a.push(r)}return a}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype._getLastSubtotalCount=function(){try{if(!this.hasSubtotal)return 0;for(var t=0,e=this.getDataLength(),i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength),0),o=0,r=e-1;r>=i;r--){for(var a=0;a<this.struct.subtotalArr.length;a++){var n=this.struct.subtotalArr[a],l=n.attr.targetColumnID,h=this.dataList._getCellData(r,l),d=h+"_12";if(r<e-1)d=this.dataList._getCellData(r+1,l);if(h!=d&&(t+=n.rowArr.length,this.options.initFixedHeightByRowNum>-1)){if(o+t>=this.options.initFixedHeightByRowNum){i=r+1;break}i=Math.max(e-this._getVisibleLastIndex(this.drawedRowLength-t),0)}}o++}return t}catch(t){s.Y.printStackTrace(t,null,this)}},A.prototype.setSubtotalVisible=function(t){try{if(0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0,scrollLeft:0,scrollTop:0,clientWidth:0},this.setRedrawStatus("stop"),void this.delayedDraw({subTotalVisible:t});!0!==t||this.hasSubtotal?!1===t&&this.hasSubtotal&&(this.subtotalHidden(),this.lastTopRowIndex=null,this.hasSubtotal=!1,this.setScrollYHeight()):(this.hasSubtotal=!0,this.lastTopRowIndex=null,this._applyRowVisible({subtotalDraw:!0}),this.setScrollYHeight())}catch(t){s.Y.printStackTrace(t,null,this)}};var D=function(t){};D.prototype.initializeFooter=function(){try{if(!this.hasFooter)return;for(var t=a.Z.getDataPrefix("footer_id"),e=a.Z.getDataPrefix("inputType"),i=a.Z.getDataPrefix("value"),o=a.Z.getDataPrefix("useLocale"),r=a.Z.getDataPrefix("localeRef"),n=this.getDomList("foot_tds","td",this.getElementById(this.id+"_foot_table")),l=0;l<n.length;l++){var h=n[l],d=h.getAttribute("id");if(d&&!h.getAttribute(t)){for(var c=d,u="",p=0;p<this.struct.foot.rowArr.length;p++)for(var g=0;g<this.struct.foot.rowArr[p].length;g++)if(this.struct.foot.rowArr[p][g].id==d&&(this.struct.foot.rowArr[p][g].class||this.struct.foot.rowArr[p][g].className)){u=this.struct.foot.rowArr[p][g].class||this.struct.foot.rowArr[p][g].className;break}if(this.setConfigOptions(h,"footer"),"_headerRowNumber"!==d&&"_headerRowStatus"!==d||(d+="_footer"),h.setAttribute(t,d),h.setAttribute("id",this.id+"_"+d),h.setAttribute("class",h.getAttribute("class")+" "+this.id+"_footer__column"+l+" "+u),"expression"!=h.getAttribute(e)){var m=h.getAttribute(i),f=h.getAttribute(o),b=this.footerConfigOptions[c]||{};if("true"===f||this.options.useLocale&&!f||"false"!==f&&b.useLocale){var y=h.getAttribute(r)||b.localeRef;if(y){var v=this.getLocaleValue(y);v&&(m=v)}}m=null!=m?m:"",h.innerHTML=this.dataTagOpen+m+this.dataTagClose}}}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.drawFooter=function(t){try{if(!this.hasFooter||!this.drawFooterStatus)return;null==this.footerDataObj&&this.initFooterDataObj();var e=a.Z.getDataPrefix("footer_id"),i=a.Z.getDataPrefix("colindex"),o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td");this.footerTempSum=[];var r=!1;if(this._sumifColumnRelation||this._sumifsColumnRelation){if(this._sumifColumnRelation&&Object.keys(this._sumifColumnRelation).length>0)for(var n in this._sumifColumnRelation)if(this._sumifColumnRelation[n]===t){r=!0;break}if(this._sumifsColumnRelation&&!1===r&&Object.keys(this._sumifsColumnRelation).length>0)for(var n in this._sumifsColumnRelation)for(var l=0;l<this._sumifsColumnRelation[n].length;l++)if(this._sumifsColumnRelation[n][h]===t){r=!0;break}}if(t&&!r){t=this.getColumnID(t);for(var h=0;h<o.length;h++){var d=(b=o[h]).getAttribute(e),c=parseInt(b.getAttribute(i))-this.defaultColCnt;if(d)if("expression"==(y=this.footerDataObj[d]).inputType){var u=y.expression.match(/footercol(sum|avg|max|min|custom)\s*\([^\)]*/g);if(u){for(var g=0;g<u.length;g++)if(u[g].indexOf(t)>=0){var m=a.Z.scopingFuncBody(y.expression,this.scope_id);y.value=Function("_this",m).call(this,this),
isNaN(y.value)?"NaN"!=y.NaNFormat&&(y.value=y.NaNFormat):"number"===y.dataType&&0===Number(y.value)&&(y.value=0);var f=y.value;y.customModelUnformatter&&(f=y.customModelUnformatter.call(this,f)),b.innerHTML=this.dataTagOpen+y.formatter.format(f)+this.dataTagClose}}else if(t==this.getCellInfo(c).id){try{m=a.Z.scopingFuncBody(y.expression,this.scope_id);y.value=Function("_this",m).call(this,this),isNaN(y.value)&&"NaN"!=y.NaNFormat&&(y.value=y.NaNFormat)}catch(t){s.Y.printStackTrace(t,null,this)}f=y.value;y.customModelUnformatter&&(f=y.customModelUnformatter.call(this,f)),b.innerHTML=this.dataTagOpen+y.formatter.format(f)+this.dataTagClose}}}}else for(h=0;h<o.length;h++){var b;if(d=(b=o[h]).getAttribute(e)){var y;if("expression"==(y=this.footerDataObj[d]).inputType)try{m=a.Z.scopingFuncBody(y.expression,this.scope_id);y.value=Function("_this",m).call(this,this),isNaN(y.value)?"NaN"!=y.NaNFormat&&(y.value=y.NaNFormat):"number"===y.dataType&&0===Number(y.value)&&(y.value=0)}catch(t){p.v.printLog("[Warning]:"+t.message)}f=y.value;y.customModelUnformatter&&(f=y.customModelUnformatter.call(this,f)),b.innerHTML=this.dataTagOpen+y.formatter.format(f)+this.dataTagClose}}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.initFooterDataObj=function(t){try{var e=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),i=-1,n=!1;t?(i=this.getColumnIndex(t),n=!0):this.footerDataObj={};for(var l=a.Z.getDataPrefix("footer_id"),h=a.Z.getDataPrefix("colindex"),d=a.Z.getDataPrefix("value"),c=a.Z.getDataPrefix("useLocale"),u=a.Z.getDataPrefix("localeRef"),p=a.Z.getDataPrefix("inputType"),g=a.Z.getDataPrefix("dataType"),m=a.Z.getDataPrefix("displayFormat"),f=a.Z.getDataPrefix("displayFormatter"),b=a.Z.getDataPrefix("NaNFormat"),y=a.Z.getDataPrefix("expression"),v=0;v<e.length;v++){var w=e[v],S=w.getAttribute(l);S||(S="f_"+o.q.safeRandom().toString(),w.setAttribute(l,S));var _=parseInt(w.getAttribute(h))-this.defaultColCnt;if(!(i>=0&&i!==_)){var C=this.footerConfigOptions[S]||{},x={};x.id=S;var I=w.getAttribute(y)||"";!I&&C.expression&&(I=C.expression);var T="";""!=I&&(this.options.groupbyStatus||(I.toLowerCase().indexOf("sumifs")>-1?T="sumifs":I.toLowerCase().indexOf("sumif")>-1&&(T="sumif")),I=I.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( "),this.options.groupbyStatus||(I=(I=I.replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"_this.footercolsumif( ")).replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"_this.footercolsumifs( ")),I=(I=(I=(I=(I=I.replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( ")),x.value=w.getAttribute(d),!x.value&&C.value&&(x.value=C.value);var k,L,A=w.getAttribute(c);if("true"===A||this.options.useLocale&&!A||"false"!==A&&C.useLocale){var D=w.getAttribute(u)||C.localeRef;if(D){var W=this.getLocaleValue(D);W&&(x.value=W)}}if(x.inputType=w.getAttribute(p),x.dataType=w.getAttribute(g),!x.dataType&&C.dataType&&(x.dataType=C.dataType),x.col_id=this.getColumnID(_),!x.dataType)try{if(x.dataType=this.getColumnOption(x.col_id,"dataType"),"true"===this.options.useCurrency){var q=this.getCellInfo(x.col_id);q&&(k=q.options.displayFormat,L=q.options.displayFormatter,q.options.customModelUnformatter&&("function"==typeof q.options.customModelUnformatter?x.customModelUnformatter=q.options.customModelUnformatter:x.customModelUnformatter=a.Z.getGlobalFunction(q.options.customModelUnformatter,this.scope_id)))}else if("expression"===x.inputType)x.col_id=T?new Function("_this","return "+I.substring(I.indexOf("(")+1,I.indexOf(",")))(this):new Function("_this","return "+I.substring(I.indexOf("(")+1,I.indexOf(")")))(this),x.dataType=this._dataList.getCellInfo(x.col_id).options.dataType||"text";else{var M="text",E=_;E>=0&&(M=this._dataList.getCellInfo(E).options.dataType),x.dataType=M}
}catch(t){x.dataType="text"}x.expression=I,x.displayFormat=w.getAttribute(m)||C.displayFormat||"",x.displayFormatter=w.getAttribute(f)||C.displayFormatter||"","true"!==this.options.useCurrency||x.displayFormatter||(x.displayFormat=k||w.getAttribute(m)||"",x.displayFormatter=L||""),x.formatter=this._initFooterFormatter(x.col_id,x.dataType,x.displayFormat,x.displayFormatter,this.scope_id,this.id,n),x.NaNFormat=w.getAttribute(b)||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/column[@inputType='expression']/NaNFormat/@value")||C.NaNFormat||"NaN","$blank"==x.NaNFormat&&(x.NaNFormat=""),this.footerDataObj[x.id]=x}}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype._initFooterFormatter=function(t,e,i,o,a,n,l){try{if(t){var h=this.getCellInfo(t),d=e||h.options.dataType,c=i;return"euro"==d?(i||(c=this.options.euroMask||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/euroMask/@value')||""),".",","):"rupee"==d?(i||(c=this.options.rupeeMask||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/rupeeMask/@value')||""),",","."):"tenge"==d?(i||(c=this.options.tengeMask||r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+d+'"]/tengeMask/@value')||"")," ",","):!l||"number"!==d&&"float"!==d&&"bigDecimal"!==d||(i||(c=this.options.numberMask||r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+d+'"]/numberMask/@value')||""),",","."),WebSquare.format.createFormatter(e,c,o,null,null,null,a,n)}return WebSquare.format.createFormatter(e,i,o,null,null,null,a,n)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolsumif=function(t,e,i){try{var o=[],r=[],a=[];if(e){var n=this._getOperator(e);if(!n.operator||!n.value)return;return r.push(n.operator),a.push(n.value),o?o.push(i):o.push(t),this._sumifColumnRelation||(this._sumifColumnRelation={}),this._sumifColumnRelation[t]=i,this._footercolsum(t,o,r,a)}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolsumifs=function(t){try{var e=[],i=[],o=[],r=(arguments.length-1)/2;this._sumifsColumnRelation||(this._sumifsColumnRelation={}),this._sumifsColumnRelation[t]||(this._sumifsColumnRelation[t]=[]);for(var a=0;a<r;a++){var n=this._getOperator(arguments[2*a+1]),l=arguments[2*a+2];n.operator&&n.value&&(i.push(n.operator),o.push(n.value)),this._sumifsColumnRelation[t].push(l),e.push(l)}return this._footercolsum(t,e,i,o)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolsum=function(t,e,i,o){try{return this._footercolsum(t)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype._footercolsum=function(t,e,i,o){try{this.footerTempSum||(this.footerTempSum=[]);var r=t;if(!this.options.groupbyStatus&&e&&e.length>0&&o&&o.length>0&&(r=t+"_"+o.join()),this.footerTempSum[r]||(this.footerTempSum[r]={}),void 0===this.footerTempSum[r].sum||""===this.footerTempSum[r].sum){var n="",l=5e3;if(this.groupbyStatus.grouped)n=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"SUM('"+t+"')");else{var h={};this.options.groupbyStatus||(h={conditionColumn:e,operator:i,conditionValue:o,blank:!1});var d=this.getColumnAllDataArray(t,h),c=this.getColumnOption(t,"dataType"),u=!1;if("bigDecimal"!==c&&"euro"!==c&&"tenge"!==c&&"rupee"!=c||(u=!0),d.length>0&&u||"true"===this.options.useCurrency){for(var p=WebSquare.bigDecimal("0"),g=0;g<d.length;g++)""==d[g].replace(/^\s+|\s+$/g,"")&&(d[g]="0");for(var m=0;m<d.length;m++)d[m]=WebSquare.bigDecimal(d[m]),p=p.plus(d[m]);n=p.toString()}else if(d.length>0)if(d.length>l){var f,b=Math.ceil(d.length/l),y=0;n=0;for(g=0;g<b;g++){for(var v=d.slice(y,l*(g+1)),w=0;w<v.length;w++)""==v[w].replace(/^\s+|\s+$/g,"")&&(v[w]="0"),v[w]=v[w]-0+"";f=a.Z.sum(v),y=parseInt(y,10)+parseInt(v.length,10),n=parseFloat(n,10)+parseFloat(f,10)}}else n=a.Z.sum(d)}this.footerTempSum[r].sum=n}
return a.Z.setPrecision(this.footerTempSum[r].sum)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolavg=function(t){try{var e=this.getColumnAllDataArray(t);this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={});var i="",o=5e3;if(this.groupbyStatus.grouped)return i=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"AVG('"+t+"')");if(void 0===this.footerTempSum[t].sum||""===this.footerTempSum[t].sum){var r=this.getColumnOption(t,"dataType");if(e.length>0&&("bigDecimal"==r||"true"===this.options.useCurrency)){for(var n=WebSquare.bigDecimal("0"),l=0;l<e.length;l++)""==e[l].replace(/^\s+|\s+$/g,"")&&(e[l]="0");for(var h in e)e[h]=WebSquare.bigDecimal(e[h]),n=n.plus(e[h]);return n.divide(WebSquare.bigDecimal(e.length)).toString()}if(e.length>0)if(e.length>o){var d,c=Math.ceil(e.length/o),u=0;i=0;for(l=0;l<c;l++){for(var p=e.slice(u,o*(l+1)),g=0;g<p.length;g++)""==p[g].replace(/^\s+|\s+$/g,"")&&(p[g]="0");d=a.Z.sum(p),u=parseInt(u,10)+parseInt(p.length,10),i=parseFloat(i,10)+parseFloat(d,10)}}else i=a.Z.sum(e);this.footerTempSum[t].sum=i}return""===this.footerTempSum[t].sum?"":i=this.cellInfoHash[t]&&"bigDecimal"==this.cellInfoHash[t].options.dataType?WebSquare.bigDecimal(this.footerTempSum[t].sum).divide(WebSquare.bigDecimal(e.length)).toString():this.footerTempSum[t].sum/e.length}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolmax=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].max||""===this.footerTempSum[t].max){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MAX('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&("bigDecimal"==o||"true"===this.options.useCurrency)){for(var r,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),r=null==r?i[l]:r.compare(i[l],!1);e=r.toString()}else{for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e<h)&&(e=h)}e=null==e?"":e,e=a.Z.setPrecision(e)}this.footerTempSum[t].max=e}}return this.footerTempSum[t].max}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolmin=function(t){try{if(this.footerTempSum||(this.footerTempSum=[]),this.footerTempSum[t]||(this.footerTempSum[t]={}),void 0===this.footerTempSum[t].min||""===this.footerTempSum[t].min){var e=null;if(this.groupbyStatus.grouped)e=this.groupExpression(this._dataList.filteredRowIndexArr,0,this._dataList.filteredRowIndexArr.length-1,"MIN('"+t+"')");else{var i=this.getColumnAllDataArray(t),o=this.getColumnOption(t,"dataType");if(i.length>0&&("bigDecimal"==o||"true"===this.options.useCurrency)){for(var r,n=0;n<i.length;n++)""==i[n].replace(/^\s+|\s+$/g,"")&&(i[n]="0");for(var l in i)i[l]=WebSquare.bigDecimal(i[l]),r=null==r?i[l]:r.compare(i[l],!0);e=r.toString()}else{for(n=0;n<i.length;n++){var h=parseFloat(i[n]);isNaN(h)||(null==e||e>h)&&(e=h)}e=null==e?"":e,e=a.Z.setPrecision(e)}this.footerTempSum[t].min=e}}return this.footerTempSum[t].min}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolcnt=function(t,e){try{e=e||{};return(this.getColumnAllDataArray(t,e)||[]).length}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getColumnAllDataArray=function(t,e){try{var i=[],o=this.getColumnID(t),r=this.dataList.getDeletedIndex(),n=this.dataList.getModifiedIndex();if(null!==o){for(var h=this.isDrillDown&&a.Z.getBoolean(this.options.drilldownFooterExpressionAllData)?this.getTotalRow():this.getDataLength(),d=0;d<h;d++){if(this.options.excludeDeletedRows){for(var c=!1,u=0;u<r.length;u++)if(r[u]===d){c=!0;break}if(c)continue}if(this.options.excludeModifiedRows){for(c=!1,u=0;u<n.length;u++)if(n[u]===d){c=!0;break}if(c)continue}var g
;if(this.isDrillDown&&a.Z.getBoolean(this.options.drilldownFooterExpressionAllData)){if("object"===(0,l.A)(e)&&e.conditionColumn&&e.conditionColumn.length>0){var m=!0;for(u=0;u<e.conditionColumn.length;u++){var f=this._dataList.getCellData(d,e.conditionColumn[u]),b=e.operator[u],y=e.conditionValue[u],v=this.getColumnOption(e.conditionColumn[u],"dataType");if(0==(m=this._isMatched(y,f,b,v)))break}if(0==m)continue}g=this._dataList.getCellData(d,o)}else{if("object"===(0,l.A)(e)&&e.conditionColumn&&e.conditionColumn.length>0){for(m=!0,u=0;u<e.conditionColumn.length;u++){f=this.dataList.getCellData(d,e.conditionColumn[u]),b=e.operator[u],y=e.conditionValue[u],v=this.getColumnOption(e.conditionColumn[u],"dataType");if(0==(m=this._isMatched(y,f,b,v)))break}if(0==m)continue}g=this.dataList._getCellData(d,o)}void 0===(g+="")||""==g?(g="0","object"===(0,l.A)(e)&&!1!==e.blank&&i.push(g)):i.push(g)}return i}p.v.printLog("[Warning] Invalid colIndex("+t+"). ["+this.id+"] getColumnAllDataArray.")}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getFooterData=function(t,e){try{var i=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),o=a.Z.getDataPrefix("footer_id");if("number"==typeof t){t=i[t+this.defaultColCnt].getAttribute(o);var r=(h=this.footerDataObj[t]).value;if("expression"==h.inputType){var n=a.Z.scopingFuncBody(h.expression,this.scope_id);r=Function("_this",n).call(this,this)}return"displayData"!=e?r:h.formatter.format(r)}for(var l=0;l<i.length;l++)if(i[l].getAttribute(o)==t){var h;r=(h=this.footerDataObj[t]).value;if("expression"==h.inputType){n=a.Z.scopingFuncBody(h.expression,this.scope_id);r=Function("_this",n).call(this,this)}return"displayData"!=e?r:h.formatter.format(r)}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.setFooterValue=function(t,e){this.setFooterData(t,e)},D.prototype.setFooterData=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td"),r=a.Z.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(r);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(r)==t){var l=this.footerDataObj[t];"text"==l.inputType&&(l.value=e,i.innerHTML=this.dataTagOpen+l.formatter.format(l.value)+this.dataTagClose)}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.setFooterDisplayFormat=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),r=a.Z.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(r);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(r)==t){var l=this.footerDataObj[t];l.displayFormat=e,l.formatter=WebSquare.format.createFormatter(l.dataType,l.displayFormat,l.displayFormatter,null,null,null,this.scope_id,this.id),"number"==l.dataType&&(i.innerHTML=this.dataTagOpen+l.formatter.format(l.value)+this.dataTagClose)}var h=this.footerXml;if(h)for(var d=WebSquare.xml.getElementsByTagName(h,"w2:row"),c=0;c<d.length;c++){var u=WebSquare.xml.getElementsByTagName(d[c],"w2:column");for(n=0;n<u.length;n++){var p=u[n];if(p.getAttribute("id")==t){p.setAttribute("displayFormat",e);break}}}}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getFooterStyle=function(t,e){try{var i,o=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),r=a.Z.getDataPrefix("footer_id");if("number"==typeof t)t=(i=o[t+this.defaultColCnt]).getAttribute(r);for(var n=0;n<o.length;n++)if((i=o[n]).getAttribute(r)==t)return WebSquare.style.getStyle(i,e)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.setFooterStyle=function(t,e,i){try{var o,r=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),n=a.Z.getDataPrefix("footer_id");if("$rownum"==t.wq_trim().toLowerCase())t="_headerRowNumber_footer";else if("$rowstatus"==t.wq_trim().toLowerCase())t="_headerRowStatus_footer";else if("number"==typeof t){t=(o=r[t+this.defaultColCnt]).getAttribute(n)}
for(var l=0;l<r.length;l++)(o=r[l]).getAttribute(n)==t&&WebSquare.style.setStyle(o,e,i)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getExcelAllFooterXML=function(t,e){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var i=[];i.push("<array><![CDATA["),i.push('["'),this.footerDataObj||this.initFooterDataObj();for(var o="",n=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0].getChildNodes(),l=0;l<n.length;l++){var h=n[l];if(1==h.nodeType)for(var d=h.getChildNodes(),c=0;c<d.length;c++){var u=d[c];if(1==u.nodeType){var p=!1;if(e)for(var g=0;g<e.length;g++)if(e[g]==c){p=!0;break}var m=u.getAttribute("id"),f=this.footerDataObj[m];if("expression"!=f.inputType)o=f.value;else{var b=a.Z.scopingFuncBody(f.expression,this.scope_id);o=Function("_this",b).call(this,this)}!1===p&&(o=f.formatter.format(o)),i.push(o),i.push('"'+t+'"')}}}return i[i.length-1]='"]',i.push("]]></array>"),i.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getExcelAllFooterXMLDisplay=function(t,e,i){try{if(t||(t=","),void 0===i&&(i=!0),!this.hasFooter)return"<array><![CDATA[[]]]></array>";var o=a.Z.getDataPrefix("footer_id"),n=[];n.push("<array><![CDATA["),n.push('["');var l=this.getElementById(this.id+"_foot_table").getElementsByTagName("tbody")[0].getElementsByTagName("td");if(this.groupbyStatus.grouped){this.footerDataObj||this.initFooterDataObj();var h=0;if(this.options.rowNumVisible){var d=(v=this.footerDataObj[l[h].getAttribute(o)]).value||"";n.push(d),n.push('"'+t+'"'),h++}if(this.options.rowStatusVisible){d=(v=this.footerDataObj[l[h].getAttribute(o)]).value||"";n.push(d),n.push('"'+t+'"')}}this.footerDataObj||this.initFooterDataObj();d="";for(var c=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0].getChildNodes(),u=0;u<c.length;u++){var p=c[u];if(1==p.nodeType)for(var g=p.getChildNodes(),m=0;m<g.length;m++){var f=g[m];if(1==f.nodeType){var b=!1;if(e)for(var y=0;y<e.length;y++)if(e[y]==m){b=!0;break}var v,w=f.getAttribute("id");if("expression"!=(v=this.footerDataObj[w]).inputType)d=v.value;else{var S=a.Z.scopingFuncBody(v.expression,this.scope_id);d=Function("_this",S).call(this,this)}(!0===i&&!1===b||!1===i&&!0===b)&&(d=v.formatter.format(d)),n.push(d),n.push('"'+t+'"')}}}return n[n.length-1]='"]',n.push("]]></array>"),n.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getExcelAllFooterXMLRaw=function(t,e){try{if(t||(t=","),!this.hasFooter)return"<array><![CDATA[[]]]></array>";this.footerDataObj||this.initFooterDataObj();for(var i=[],o="",a=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0].getChildNodes(),n=0;n<a.length;n++){var l=a[n];if(1==l.nodeType)for(var h=l.getChildNodes(),d=0;d<h.length;d++){var c=h[d];if(1==c.nodeType){var u=!1;if(e)for(var p=0;p<e.length;p++)if(e[p]==d){u=!0;break}var g=c.getAttribute("id"),m=this.footerDataObj[g];o=m.value,!1===u&&(o=m.formatter.format(o)),i[i.length]=o}}}return i[0]='<array><![CDATA[["'+i[0],i[i.length-1]+='"]]]></array>',i.join('"'+t+'"')}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.getExpressionValue=function(t){try{return this.hasFooter||(this.footerTempSum=[]),t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.footercolsum( "),this.options.groupbyStatus||(t=(t=t.replace(/[sS][uU][mM][iI][fF][sS][\s]*[(]/g,"_this.footercolsumifs( ")).replace(/[sS][uU][mM][iI][fF][\s]*[(]/g,"_this.footercolsumif( ")),t=(t=(t=(t=(t=t.replace(/[aA][vV][gG][\s]*[(]/g,"_this.footercolavg( ")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.footercolmax( ")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.footercolmin( ")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.footercolcnt( ")).replace(/[cC][uU][sS][tT][oO][mM][\s]*[(]/g,"_this.footercolcustom( "),new Function("_this","return "+t)(this)}catch(t){s.Y.printStackTrace(t,null,this)}},D.prototype.footercolcustom=function(t,e){try{var i=a.Z.getGlobalFunction(t,this.scope_id),o=""
;return"function"==typeof i&&(o=i(this.getColumnAllDataArray(e),this.getColumnOption(e,"dataType"))),o}catch(e){p.v.printLog("[Warning] "+t+" is not valid function.["+this.id+"]")}},D.prototype.getFooterHeight=function(){try{var t=0;if(this.hasFooter){var e=document.getElementById(this.id+"_foot_table");e&&(t=e.offsetHeight)}return t}catch(t){return s.Y.printStackTrace(t,null,this),0}};var W=i(4640),q=function(t){};q.prototype.setStartRowNumber=function(t){this.startRowNumber=t;for(var e=0;e<=this.lastIndex;e++)this._drawRowNumData(e,e+this.rowIndex)},q.prototype.setNoResultMessage=function(t){this.options.noResultMessage=t,this.displayNoResultMessage()},q.prototype.setNoResultMessageVisible=function(t){this.options.noResultMessageVisible=t,this.displayNoResultMessage()},q.prototype.checkAll=function(t,e){var i=!1,o=this.getCellInfo(t),s=o.id;if("checkbox"!=o.options.inputType){if("custom"!=o.options.inputType){var r=WebSquare.language.getMessage("Grid_warning1")||"The selected column is not a checkbox.";return void $l(r)}i=!0}var a=o.options.trueValue,n=o.options.falseValue;this.drawFooterStatus=!1;var l,h=!(!this.isDrillDown||!this._dataList.options.depthColumn),d=h?this.getTotalRow():this.getDataLength(),c=!1,u=!1;if(this._linkedDataList){(u=this._linkedDataList.getBroadcast())&&this._linkedDataList.setBroadcast(!1);for(var p=0;p<d;p++){var g=this._linkedDataList.initialRowIndexArr[p],m=h?g:this._dataList.getFilteredRowIndex(g);if(i){if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{var f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}else{(c=this._dataList.getBroadcast())&&this._dataList.setBroadcast(!1);for(m=0;m<d;m++){if(i){var b;g=this.dataList.getRealRowIndex(m);if("checkbox"!=(b=o.cellManagerHashByRowIndex[g]?o.cellManagerHashByRowIndex[g]:o).options.inputType)continue;a=b.options.trueValue,n=b.options.falseValue}if(l=this._dataList.getCellData(m,s),1==e||1==e||e==a)l!=a&&this._dataList.setCellData(m,s,a);else if(0==e||0==e||e==n)l!=n&&this._dataList.setCellData(m,s,n);else{f=l==a?n:a;this._dataList.setCellData(m,s,f)}}}u&&this._linkedDataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1}]});var y=!!h;c&&this._dataList.setBroadcast(!0,!0,{gridView:[{keepTop:!0,refreshInstance:!1,skipInitDrilldown:y}]}),this.drawFooterStatus=!0,this.drawFooter(),this.drawHeader()},q.prototype.getColumnType=function(t){return this.getCellInfo(t).options.inputType},q.prototype.getColumnNodeSet=function(t){return this.getCellInfo(t).itemsetObj},q.prototype.getDefaultStyle=function(){return this.options.style},q.prototype.setCellChecked=function(t,e,i){if("boolean"==typeof i){var o=this.getCellInfo(e),s=o.id,r=!1;if(0==o.internal&&"custom"==o.options.inputType){var a=this.dataList.getRealRowIndex(t);o=o.cellManagerHashByRowIndex[a]?o.cellManagerHashByRowIndex[a]:o,r=!0}if("checkbox"==o.options.inputType||"radio"==o.options.inputType){if("radio"==o.options.inputType&&0!=i){var n=!(!this.isDrillDown||!this._dataList.options.depthColumn),l=n?this.getTotalRow():this.getDataLength();if(this._linkedDataList)if(r);else for(var h=0;h<l;h++){a=this._linkedDataList.initialRowIndexArr[h];var d=n?a:this._dataList.getFilteredRowIndex(a);this._dataList.setCellData(d,s,o.options.falseValue)}else if(r);else for(d=0;d<l;d++)this._dataList.setCellData(d,s,o.options.falseValue);this.drawColumnData(e)}i=1==i?o.options.trueValue:o.options.falseValue,this._dataList.setCellData(t,s,i)}else{var c=WebSquare.language.getMessage("Grid_warning3")||"inputType is neither a checkbox nor a radio button.";alert(c)}}else{var u=WebSquare.language.getMessage("Grid_warning2")||"Invalid data format encountered. Expected 'true' or 'false', please re-enter.";alert(u)}},
q.prototype.getGridHTML=function(){p.v.printLog("getGridHTML function not yet available.")},q.prototype.redrawColumn=function(t,e){try{var i=void 0===e||e;this.drawColumnData(t,i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getDrawCount=function(){return this.getVisibleRowNum()},q.prototype.getVisibleRowNum=function(){return this.rowIndex>=0?this.lastIndex+1:0},q.prototype.getTopRowIndex=function(){return this.rowIndex},q.prototype.setTopRowIndex=function(t,e,i){if(!0!==this._isNativeScroll())if(!0!==this._isHybridScroll()){var o=this.getElementById(this.id+"_scrollY_div");if(t<=0&&(t=0),null!==this.lastTopRowIndex)t>this.lastTopRowIndex&&(t=parseInt(this.lastTopRowIndex+.5,10));else if(o.offsetHeight<o.scrollHeight){if(this.rowIndex<t){var s=this._getVisibleLastIndex(this.lastIndex+1);(t=t+s>this.getDataLength()?this.getDataLength()-s:t)>this.rowIndex+s-1&&(this.adjustDraw_keepTop=!0)}}else t=0;if(this.rowIndex!=t){if(this.delayedDraw({rowIndex:t}))return;this.scrollEvent=!1,this.checkScrollEnd=!e,this.drawData(t),i&&this.setFocusedCell2(t,0,!1),o.scrollTop=this.oneRowScrollHeight*this._getScrollRowIndex(t)}}else this._drawDataHybrid(t);else this.drawData(0)},q.prototype.getBottomRowIndex=function(){return this.rowIndex>=0?this.rowIndex+this.lastIndex:-1},q.prototype.setBottomRowIndex=function(t){this.drawBottomData(t)},q.prototype.getCellPosition=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=this.data_td_list[e+t*this.oneRowDataLength];if(!o){var s=t-this.rowIndex;o=this.data_td_list[e+s*this.oneRowDataLength]}if(o){if("top"==i)return o.offsetTop;if("left"==i)return o.offsetLeft}return null},q.prototype.getCellSize=function(t,e,i){e=this.getColumnIndex(e),i=(i||"").toLowerCase();var o=t-this.rowIndex,s=this.data_td_list[e+o*this.oneRowDataLength];return"width"==i?s.clientWidth:"height"==i?s.clientHeight:null},q.prototype.getHeaderPosition=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);if("top"==e){var o=i.offsetTop;return this.options.groupbyZone&&(o+=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight),o}return"left"==e?i.offsetLeft:null},q.prototype.getHeaderSize=function(t,e){e=(e||"").toLowerCase();var i=this.getHeaderLayer(t);return"width"==e?i.clientWidth:"height"==e?i.clientHeight:null},q.prototype.setSummary=function(t){!0!==a.Z.isHTML5()&&this.getElementById(this.id+"_body_table").setAttribute("summary",t)},q.prototype.setFooterSummary=function(t){this.hasFooter&&this.getElementById(this.id+"_foot_table").setAttribute("summary",t)},q.prototype.setCaption=function(t){var e=this.getElementById(this.id+"_body_table").getElementsByTagName("caption")[0];if(e)e.innerHTML=t;else{(e=document.createElement("caption")).innerHTML=t;var i=this.render.getElementsByTagName("colgroup")[0];i.parentNode.insertBefore(e,i)}var o=e.className;e.className=o&&""!=o?o+" setcaption":"setcaption"},q.prototype.setCaptionAuto=function(t){for(var e=this.getHeaderValueList(),i="",o="",s=0;s<e.length;s++)i.length>0&&(o=","),i=i+o+e[s];t&&(this.options.captionTitle=t),this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+i+WebSquare.language.getMessage("Grid_caption")):this.setCaption(i+WebSquare.language.getMessage("Grid_caption"))},q.prototype.setFooterCaption=function(t){if(this.hasFooter){var e=this.getElementById(this.id+"_foot_table"),i=e.getElementsByTagName("caption")[0];if(i)i.innerHTML=t;else{(i=document.createElement("caption")).innerHTML=t;var o=e.getElementsByTagName("colgroup")[0];o.parentNode.insertBefore(i,o)}}},q.prototype.groupby=function(t){try{this.hideCustomFilterList(),this._clearMergeCellBackground(),this.clearSearchData({clearValue:!0});var e="string"==typeof(t=t||{}).sortIndex?t.sortIndex.split(" "):t.sortIndex,i="string"==typeof t.sortOrder?t.sortOrder.split(" "):t.sortOrder,r=e.length
;if(-1!=this.options.groupbyMaxCount&&this.options.groupbyMaxCount<r)return void p.v.printLog("groupby max column count has been exceeded.["+this.id+"]");for(var n=0;n<r;n++){var h=parseInt(e[n],10);e[n]=isNaN(h)?this.getColumnIndex(e[n]):h}if(!t.filter&&!this.groupbyStatus.grouped&&this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var d=this.groupbyFilterBox_history[this.groupbyFilterBox_select.getSelectedIndex()];if(!d.groupbyOptions&&d.customFilterListFilterInfo){t.filter=JSON.parse(d.customFilterListFilterInfo,(function(t,e){try{var i=new Function("return "+e)();return"function"==typeof i||"object"===(0,l.A)(i)&&i.constructor===RegExp?i:"object"===(0,l.A)(i)&&"func"===i.type&&"string"==typeof i.key?(i.key=new Function("return "+i.key)(),i):e}catch(t){return e}}));var c=e.length-1,u=!1;for(var g in t.filter){var m=!1;for(n=c;n>=0;n--)if(this.tdIdList[e[n]]===g){m=!0;break}m||(e.push(this.bodyIdColIndexMap[g]),i.push(i[i.length-1]),u=!0)}u&&(t.sortIndexArr=e,t.sortOrderArr=i),this.groupbyFilterList||this.createGroupbyFilterList({noDraw:!0}),this.groupbyStatus.filter=t.filter,this._dataList.sortStatusInfo={},this._dataList.sortStatusArr=[],r=e.length}}this.removeFocusedCell(),this._dataList.clearFilter(!0),this.clearHeaderSort(),this.headerSortStatusArr=[],this.groupbyStatus.groupbyOptions=JSON.stringify(t,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e}));var f={};if(t.filter){var b="",y="";for(var g in t.filter){var v,w=t.filter[g];b=',"'+g+'"'+b,y=",["+this._dataList.filteredRowIndexArr.join(",")+"]"+y,"func"===w.type?(w.noRefresh=!0,w.noRefreshAfter=!0,f[this.bodyToHeaderRelation[w.colIndex]]=!0,this.dataList.setColumnFilter(w)):(w.constructor===/a/.constructor?v=w:t.filterRegExp&&t.filterRegExp[g]&&t.filterRegExp[g].constructor===/a/.constructor?v=t.filterRegExp[g]:"object"===(0,l.A)(w)&&(w=0==w.length?"/^[a-z0-9_-]{3,16}$/":"^"+w.join("$|^")+"$",v=new RegExp(w,"gi")),v&&this.dataList.setColumnFilter({type:"regExp",colIndex:g,key:v,condition:"and",noRefresh:!0,noRefreshAfter:!0}))}if(this.groupbyFilterList){var S='{"column":['+(b=b.slice(1)+"],")+'"filteredRowIndexArr":['+(y=y.slice(1)+"]}");if(this.groupbyFilterList.filterHistory=JSON.parse(S),this.getRowCount()<=0)for(;this.groupbyFilterList.filterHistory.filteredRowIndexArr.length>0&&this.groupbyFilterList.filterHistory.filteredRowIndexArr[0].length<=0;)this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift()}t.noRefreshAfter||this._dataList.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}if(t.sortIndex){var _=o.q.extend({},t);_.noRefresh=!0,_.sortIndex=[];for(n=0;n<e.length;n++)_.sortIndex.push(this.getColumnID(e[n]));if(t.sortFunc)if(_.sortFuncArr=[],"string"==typeof t.sortFunc)(C=a.Z.getGlobalFunction(t.sortFunc,this.scope_id))&&_.sortFuncArr.push(C);else if(t.sortFunc.constructor==Array)for(n=0;n<t.sortFunc.length;n++){var C;(C=a.Z.getGlobalFunction(t.sortFunc[n],this.scope_id))&&_.sortFuncArr.push(C)}this.dataList.multisort(_)}this.groupbyInfo={},this.statusArr=[];var x=this._linkedDataList?this._linkedDataList.filteredRowIndexArr:this._dataList.filteredRowIndexArr,I=[],T=[],k=0,L=[],A=[];for(var D in this.groupbyStatus.groupedRowIndexArr=[],this.groupbyStatus.groupbyRowIndexArr=x.slice(),this.groupbyStatus.groupbyDepthDelimiter="||",this.customFilterStatusObj={},f)this.customFilterStatusObj[D]=!0;this.groupbyStatus.grouped=!0,this.groupbyStatus.filter=t.filter||{},this.groupbyStatus.sortIndexArr=e,this.groupbyStatus.sortOrderArr=i,this.groupbyStatus.headerValueObj={},this.groupbyStatus.footerValueObj={},t.keepDisplayOptions||(this.groupbyDisplayOptions={},this.groupbyDisplayOptions.rowNumHeader=t.rowNumHeader||{},this.groupbyDisplayOptions.rowStatusHeader=t.rowStatusHeader||{},
this.groupbyDisplayOptions.groupbyHeader=t.groupbyHeader||[],this.groupbyDisplayOptions.rowNumFooter=t.rowNumFooter||{},this.groupbyDisplayOptions.rowStatusFooter=t.rowStatusFooter||{},this.groupbyDisplayOptions.groupbyFooter=t.groupbyFooter||[],this.groupbyDisplayOptions.closeGroup=t.closeGroup||!1,this.groupbyDisplayOptions.showDisplayData=t.showDisplayData||!1,this.groupbyDisplayOptions.showOnlyLastDepth=t.showOnlyLastDepth||!1,this.groupbyDisplayOptions.hideHeader=t.hideHeader||!1,this.groupbyDisplayOptions.hideFooter=t.hideFooter||!1);for(n=0;n<x.length;n++){L=A,A=[];for(var W=x[n],q=W*this._dataList.cellIdList.length,M=0;M<r;M++){var E=this.tdIdList[e[M]],R=this.cellInfoHash[E];R&&"expression"==R.options.inputType?A[M]=R.getExpressionValue(W):A[M]=this._dataList.dataArr[q+this._dataList.bodyIdColIndexMap[E]]||""}if(n>0){var N=!1,F=[];for(M=0;M<r;M++)if(N||L[M]!==A[M]){var O=L.slice(0,M+1).join(this.groupbyStatus.groupbyDepthDelimiter);N=!0;var B={type:"footer",groupId:O,depth:M,status:"open",index:""};this.groupbyInfo[O]=this.groupbyInfo[O]?this.groupbyInfo[O]:{},this.groupbyInfo[O].footer=B,F.push(B)}for(M=F.length-1;M>=0;M--)F[M].index=I.length,this.groupbyDisplayOptions.hideFooter||(I.push(F[M]),T.push("footer"))}var P=!1;for(M=0;M<r;M++)if(P||0==n||L[M]!==A[M]){O=A.slice(0,M+1).join(this.groupbyStatus.groupbyDepthDelimiter);P=!0;B={type:"header",groupId:O,depth:M,status:"open",index:I.length};this.groupbyInfo[O]={header:B},this.groupbyDisplayOptions.hideHeader||(I.push(B),T.push("header"))}I.push(x[n]),T.push(k++)}if(T.length>0)for(n=r-1;n>=0;n--){B={type:"footer",groupId:O=A.slice(0,n+1).join(this.groupbyStatus.groupbyDepthDelimiter),depth:n,status:"open",index:I.length};this.groupbyInfo[O]=this.groupbyInfo[O]?this.groupbyInfo[O]:{},this.groupbyInfo[O].footer=B,this.groupbyDisplayOptions.hideFooter||(I.push(B),T.push("footer"))}if(this.groupbyStatus.groupedRowIndexArr=I,this.rowNumArr=T,this.options.foldAll)for(var O in this.groupbyInfo){"open"==(V=this.groupbyInfo[O].header).status&&0==V.depth&&this._foldRow(V)}else if(this.groupbyDisplayOptions.closeGroup&&T.length>0)for(var Y in this.groupbyInfo){var V;r==(V=this.groupbyInfo[Y].header).groupId.split(this.groupbyStatus.groupbyDepthDelimiter).length&&"number"!=typeof V&&this.groupbyStatus.groupedRowIndexArr[V.index]==V&&this._foldRow(V)}this.lastTopRowIndex=null,this.rowIndex=0,this.setScrollYHeight(),t.sortIndex?(this._dataList.broadcast({gridView:["notifyMultisort"]}),this._dataList.broadcast({gridView:["notifySettedFilter",[{isSort:!0,keepTop:t.keepTop}]],generalComp:"both"})):this.notifyDataChanged(),this.options.groupbyZoneMessage&&this.hideGroupbyZoneMessage(),this.options.groupbyZone&&this.syncWithGroupbyZone();var H=e.length;if(this.groupbyStatus.beforeSortIndexLength=H,a.Z.isIE("8")&&this.drawData(0,null,"async"),this.groupbyStatus.grouped&&!this.options.groupbyFilterIcon){var j=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(n=0;n<j.length;n++){var z=j[n],G=z.getAttribute("id");if(this._checkUseFilter(z)){var Z=this.getElementById(G+"_filter");Z&&(Z.style.display="none")}}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.clearGroupby=function(){try{this.clearGrouping=!0,this.groupbyStatus={},this.groupbyZoneStatus.beforeOpenedColIndex=null,this.groupbyZoneStatus.beforeOpenedColTagName=null,this.groupbyZoneStatus.clickedHeaderInfo=null,this.groupbyDisplayOptions=null,this.rowIndex=0,this.removeFocusedCell(),this.dataList.clearFilter(),this.clearHeaderSort(),this.clearGroupbyZone(),a.Z.isIE("8"),this.options.groupbyZoneMessage&&this.showGroupbyZoneMessage(),this.groupbyFilterList&&this.hideGroupbyFilterList();var t=this.getDataLength();if(t<this.rowIndex+this.drawedRowLength)for(var e=t-this.rowIndex;e<this.drawedRowLength;e++)this.clearGroupedRow(e,e+this.rowIndex);this.clearGrouping=!1;var i=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(e=0;e<i.length;e++){
var o=i[e],r=o.getAttribute("id");if(this._checkUseFilter(o)){var n=document.getElementById(r+"_filter");n&&(n.style.display="")}}if(this.options.customFilterBox&&this.groupbyFilterBox_history&&this.groupbyFilterBox_history.length>0&&!0===this.getElementById(this.id+"_groupbyFilterBox_apply").checked){var l=this.groupbyFilterBox_select.getSelectedIndex();this.groupbyFilterBox_history[l].groupbyOptions&&(this.notifyBeforeSettedColumnFilter(),this.refreshCustomFilterHistory(l),this.notifyAfterSettedColumnFilter())}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.toggleGroup=function(t){if(this.groupbyInfo[t]){var e=this.groupbyInfo[t].header;"number"!=typeof e&&this.dataList.getRealRowIndex(e.index)==e&&("open"==e.status?this._foldRow(e):this._unfoldRow(e),this.lastTopRowIndex=null,this.setScrollYHeight(),"open"==e.status?this.notifyRowInserted(e.index):this.notifyRowChanged(e.index),this.removeFocusedCell(),this.drawFooter())}},q.prototype._foldRow=function(t){if("open"==t.status){if(t.status="closed",this.groupbyDisplayOptions.hideFooter){for(var e,i=t.index+1;i<this.rowNumArr.length&&!("header"==this.rowNumArr[i]&&this.groupbyStatus.groupedRowIndexArr[i].depth<=t.depth);i++)e=i;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,e-t.index)}else{var o=this.groupbyInfo[t.groupId].footer;t.closedChildArr=this.groupbyStatus.groupedRowIndexArr.splice(t.index+1,o.index-t.index-1)}var s=[],r=t.closedChildArr.slice(0).sort();for(i=0;i<this.groupbyStatus.groupbyRowIndexArr.length;i++){for(var a=!1,n=0,l=r.length-1,h=0,d=this.groupbyStatus.groupbyRowIndexArr[i];n<=l;){if(d==r[h=Math.floor((n+l)/2)]){a=!0;break}d<r[h]?l=h-1:n=h+1}a||s.push(this.groupbyStatus.groupbyRowIndexArr[i])}this.groupbyStatus.groupbyRowIndexArr=s;var c=this.groupbyStatus.groupedRowIndexArr.length,u=0;this.rowNumArr=[];for(i=0;i<c;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?this.rowNumArr.push(u++):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},q.prototype._unfoldRow=function(t){if("closed"==t.status){t.status="open",t.closedChildArr.unshift(t.index+1,0),[].splice.apply(this.groupbyStatus.groupedRowIndexArr,t.closedChildArr),t.closedChildArr=[];var e=0;this.rowNumArr=[],this.groupbyStatus.groupbyRowIndexArr=[];for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++)"number"==typeof this.groupbyStatus.groupedRowIndexArr[i]?(this.rowNumArr.push(e++),this.groupbyStatus.groupbyRowIndexArr.push(this.groupbyStatus.groupedRowIndexArr[i])):(this.groupbyInfo[this.groupbyStatus.groupedRowIndexArr[i].groupId][this.groupbyStatus.groupedRowIndexArr[i].type].index=this.rowNumArr.length,this.rowNumArr.push(this.groupbyStatus.groupedRowIndexArr[i].type))}},q.prototype.foldAll=function(){for(var t in this.groupbyInfo){var e=this.groupbyInfo[t].header;"open"==e.status&&0==e.depth&&this._foldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},q.prototype.unfoldAll=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++){var e=this.groupbyStatus.groupedRowIndexArr[t];"number"!=typeof e&&"header"==e.type&&"closed"==e.status&&this._unfoldRow(e)}this.lastTopRowIndex=null,this.notifyDataChanged({keepTop:!0}),0==this.getDataLength()&&this.removeFocusedCell(),this.setScrollYHeight(),this.drawFooter(),this.drawHeader()},q.prototype.drawGroupData=function(t,e,i){var o,s,r,a=t,n=i*this.realRowDataLength,h=this.realRowDataLength;if("header"==e.type)o=this.groupbyDisplayOptions.rowNumHeader,s=this.groupbyDisplayOptions.rowStatusHeader,r=this.groupbyDisplayOptions.groupbyHeader;else{if("footer"!=e.type)return void(t.innerHTML="");o=this.groupbyDisplayOptions.rowNumFooter,s=this.groupbyDisplayOptions.rowStatusFooter,
r=this.groupbyDisplayOptions.groupbyFooter}this.options.rowNumVisible&&(this._drawGroupData(a,e,o),o.hidden||(h-=o.colSpan||1),n++,a=this.all_data_td_list[n]),this.options.rowStatusVisible&&(this._drawGroupData(a,e,s),s.hidden||(h-=s.colSpan||1),n++,a=this.all_data_td_list[n]);for(var d={},c=0;c<h;c++)if(!d["domIndex_"+n]){n++;var u={};if(r instanceof Array?u=r[c]||{}:r instanceof Object&&"object"==(0,l.A)(r)&&(u=r["depth_"+e.depth][c]||{}),Number(u.targetIndex)>-1){var p=i*this.realRowDataLength+u.targetIndex;d["domIndex_"+p]=!0,this._drawGroupData(this.all_data_td_list[p],e,u)}else this._drawGroupData(a,e,u);a=this.all_data_td_list[n]}},q.prototype._drawGroupData=function(t,e,i){try{var o=i.className||"",r="gridBodyDefault w2grid_groupby w2grid_groupby_depth_"+e.depth+" "+o;t.className=r,t.innerHTML="";var n,l=i.colSpan,h=i.value||"",d=i.inputType||"",c=i.depthVisible||!1,u=i.align||"",p=i.expression||"",g=(l=i.colSpan||1,i.hidden?"none":""),m=i.displayFormatType||"text",f=i.displayFormat||"",b=i.displayFormatter||null;if(t.setAttribute("colSpan",l),t.style.align="",t.style.textAlign="",t.style.display=g,t.style.borderTopWidth="1px",t.style.borderBottomWidth="1px",d){var y=a.Z.getDataPrefix("col_id");switch((f||b)&&(n=new WebSquare.format.createFormatter(m,f,b,null,null,null,this.scope_id,this.id)),d){case"toggleButton":var v="<span class='"+("open"==e.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block;"+(u?"float:"+u+";":"")+" margin-left:"+20*e.depth+"px;'></span>";t.innerHTML+=v;break;case"expression":if(p){var w=this.groupbyInfo[e.groupId].header;w.colID=t.getAttribute(y);var S=0;if("open"==w.status){for(var _,C=!0,x=0,I=w.index;I<this.groupbyStatus.groupedRowIndexArr.length;I++){var T=this.groupbyStatus.groupedRowIndexArr[I];if(this.groupbyDisplayOptions.hideFooter&&C){C=!1;for(var k=I+1;k<this.groupbyStatus.groupedRowIndexArr.length;k++){var L=this.groupbyStatus.groupedRowIndexArr[k];if("header"==L.type&&T.depth>=L.depth)break;x=k}}if(this.groupbyDisplayOptions.hideFooter){if(I>=x){_=I;break}}else if("footer"==T.type&&T.depth==w.depth){_=T.index;break}}S=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,w.index,_,p,w)}else S=this.groupExpression(w.closedChildArr,0,w.closedChildArr.length-1,p,w);n&&(S=n.format(S));var A="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"''>"+S+"</span>";t.innerHTML+=A}}}if(c){var D="";"toggleButton"!=d&&(D="margin-left: "+20*e.depth+"px"),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+" "+(D||"")+"'>"+e.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - ")+"</span>"}h&&(n&&(h=n.format(h)),t.innerHTML+="<span style='display:inline-block;"+(u?"float:"+u+";":"")+"'>"+h+"</span>")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.groupExpression=function(t,e,i,o,r){try{var a=o;return a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace(/[sS][uU][mM][\s]*[(]/g,"_this.groupbySum(arr, startIndex, endIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.groupbyAvg(arr, startIndex, endIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.groupbyMax(arr, startIndex, endIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.groupbyMin(arr, startIndex, endIndex,")).replace(/[cC][oO][uU][nN][tT][\s]*[(]/g,"_this.groupbyCount(arr, startIndex, endIndex,")).replace(/[dD][eE][pP][tT][hH][\s]*[(]/g,"_this.groupbyDepth(header")).replace(/[tT][oO][gG][gG][lL][eE][\s]*[(]/g,"_this.groupbyToggle(header")).replace(/[dD][eE][pP][tT][hH][sS][tT][rR][\s]*[(]/g,"_this.groupbyDepthStr(header")).replace("endIndex,)","endIndex)"),a=new Function("_this","arr","startIndex","endIndex","expression","header","return "+a)(this,t,e,i,o,r)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.groupbySum=function(t,e,i,o){
for(var s=this.getColumnIndex(o),r=0,a=e;a<=i;a++)"number"==typeof t[a]?r+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0:"header"==t[a].type&&"closed"==t[a].status&&(r+=this.groupbySum(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o));return r},q.prototype.groupbyAvg=function(t,e,i,o){var s=this._groupbyAvg(t,e,i,o);return s.sum/s.number},q.prototype._groupbyAvg=function(t,e,i,o){for(var s=this.getColumnIndex(o),r={sum:0,number:0},a=e;a<=i;a++)if("number"==typeof t[a])r.sum+=parseFloat(this.dataList._getCellData(t[a],this.getColumnID(s),3))||0,r.number++;else if("header"==t[a].type&&"closed"==t[a].status){var n=this._groupbyAvg(t[a].closedChildArr,0,t[a].closedChildArr.length-1,o);r.sum+=n.sum,r.number+=n.number}return r},q.prototype.groupbyMax=function(t,e,i,o){for(var s=this.getColumnIndex(o),r=0,a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?r=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(s),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(r=this.groupbyMax(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(a=n=r),n&&a<r&&(a=r);return a},q.prototype.groupbyMin=function(t,e,i,o){for(var s,r=this.getColumnIndex(o),a=0,n=!1,l=e;l<=i;l++)"number"==typeof t[l]?a=parseFloat(this.dataList._getCellData(t[l],this.getColumnID(r),3))||0:"header"==t[l].type&&"closed"==t[l].status&&(a=this.groupbyMin(t[l].closedChildArr,0,t[l].closedChildArr.length-1,o)),n||(s=n=a),n&&s>a&&(s=a);return s},q.prototype.groupbyToggle=function(t){return"<span class='"+("open"==t.status?"w2grid_minus":"w2grid_plus")+"' style='display:inline-block; margin-left:"+20*t.depth+"px;'></span>"},q.prototype.groupbyDepth=function(t){return t.depth},q.prototype.groupbyDepthStr=function(t){try{for(var e=t.groupId.wq_replaceAll(this.groupbyStatus.groupbyDepthDelimiter," - "),i=!1,o=e.split(" - "),r=0;r<this.groupbyStatus.sortIndexArr.length;r++){if("true"==(g=this.getCellInfo(this.groupbyStatus.sortIndexArr[r])).options.groupbyDepthStrLabel)try{i=!0;var n=o[r];if(g.dataComp){var l=a.Z.getComponentById(g.dataComp,g.scope_id);if(l){var h,d;g.itemsetObj&&(h=g.itemsetObj.label||"label",d=g.itemsetObj.value||"value"),g.element&&(h=g.element.getValue("w2:label","ref"),d=g.element.getValue("w2:value","ref"));for(var c=l.getAllJSON(),u=0;u<c.length;u++){var p=c[u];if(n==p[d]){o[r]=!0!==this.groupbyDisplayOptions.showDisplayData?p[h]:g.getDisplayData(p[h]);break}}}}else for(u=0;u<g.itemArr.length;u++)if(n==g.itemArr[u].value){o[r]=!0!==this.groupbyDisplayOptions.showDisplayData?g.itemArr[u].label:g.getDisplayData(g.itemArr[u].label);break}}catch(t){break}}if(i&&(e=o.join(" - ")),1==this.groupbyDisplayOptions.showDisplayData&&!i){for(r=0;r<o.length;r++){var g=this.getCellInfo(this.groupbyStatus.sortIndexArr[r]);o[r]=g.getDisplayData(o[r])}e=o.join(" - ")}if(1==this.groupbyDisplayOptions.showOnlyLastDepth){var m=e.split(" - ");e=m[m.length-1]}return e}catch(t){s.Y.printStackTrace(t)}},q.prototype.groupbyCount=function(t,e,i){for(var o=0,s=e;s<=i&&s<t.length;s++)"number"==typeof t[s]?o++:"header"==t[s].type&&"closed"==t[s].status&&(o+=this.groupbyCount(t[s].closedChildArr,0,t[s].closedChildArr.length-1));return o},q.prototype._drawGroupbyZone=function(){try{var t=this.uuid;if(this.options.groupbyZone){this.groupbyZoneStatus.groupbyZoneRender=this.dom[this.id+"_groupbyZone_div"];var e=null!=this.options.groupbyZoneHeight.match("%"),i=parseInt(this.options.groupbyZoneHeight),o=i+"px";this.groupbyZoneStatus.groupbyZoneRender.style.height=o,e&&(this.groupbyZoneStatus.groupbyZoneRender.style.height=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px");var r=this.getElementById(this.id+"_main_div"),n=WebSquare.style.getStyle(this.groupbyZoneStatus.groupbyZoneRender,"border-left-width").replace("px","");if(this.groupbyZoneStatus.groupbyZoneBorder=2*n,this.groupbyZoneStatus.groupbyZoneRender.style.width=r.clientWidth-this.groupbyZoneStatus.groupbyZoneBorder+"px",
this.dom[this.id+"_main_div"]&&(this.dom[this.id+"_main_div"].style.top=this.groupbyZoneStatus.groupbyZoneRender.offsetHeight+"px"),this.isIE6)try{this.dom[this.id+"_main_div"].style.height=this.dom[this.id+"_main_div"].offsetHeight-this.groupbyZoneStatus.groupbyZoneRender.offsetHeight}catch(t){s.Y.printStackTrace(t,null,this)}if(this.dom[this.id+"_scrollY_div"].style.top="0px",this.options.groupbyZoneMessage){var l=document.createElement("div");l.innerHTML+=this.options.groupbyZoneMessage,l.className+=" w2grid_groupbyZone_message ",this.groupbyZoneStatus.groupbyZoneRender.appendChild(l),l.style.marginTop=-l.offsetHeight/2+"px",l.style.marginLeft=-l.offsetWidth/2+"px",this.groupbyZoneStatus.groupbyZoneMessageRender=l}if(this.options.groupbyZoneSearch){var h=document.getElementById(this.id+"_groupbyZone_search");this.groupbyZone_searchinput=new WebSquare.uiplugin.input(this.id+"_groupbyZone_searchinput",{className:"w2grid_groupbyZone_searchinput"}),requires("uiplugin.trigger"),this.groupbyZone_searchbtn=new WebSquare.uiplugin.trigger(this.id+"_groupbyZone_searchbtn",{className:"w2grid_groupbyZone_searchbtn"}),this.addControl(this.groupbyZone_searchinput),this.addControl(this.groupbyZone_searchbtn),h.innerHTML=this.groupbyZone_searchinput.toHTML()+this.groupbyZone_searchbtn.toHTML(),this.groupbyZone_searchbtn.activate(),this.groupbyZone_searchinput.activate();var d=this.groupbyZone_searchinput.uuid;this.groupbyZone_searchbtn.bind("onclick",(function(){WebSquare.idCache[d].show()}));var c=this.id;this.groupbyZone_searchinput.bind("onkeydown",(function(e){u.f.stopPropagation(e),a.Z.setTimeout((function(){var e=WebSquare.idCache[t];e._groupbyZoneSearch(),e.groupbyZone_searchinput.focus()}),{key:c+"_groupbyZone_search",delay:50})})),this.groupbyZone_searchinput.hide()}}if(this.options.groupbyZone&&this.options.groupbyFilterBox){this.groupbyZoneStatus.groupbyFilterBoxRender=this.dom[this.id+"_groupbyFilterBox_div"];var p=this.getElementById(this.id+"_groupbyFilterBox_select");this.groupbyFilterBox_select=new WebSquare.uiplugin.selectbox(this.id+"_groupbyFilterBox_select",{className:"w2grid_groupbyFilterBox_select",labelWidthAuto:!1,readOnly:!0,direction:"top"===this.options.groupbyFilterBoxLocation?"down":"up",visibleRowNum:this.options.filterBoxvisibleRowNum}),this.addControl(this.groupbyFilterBox_select),p.innerHTML=this.groupbyFilterBox_select.toHTML(),this.groupbyFilterBox_select.activate(),this.groupbyFilterBox_select.bind("onclick",(function(t){this.handleClickEvent()})),this.groupbyFilterBox_select.bind("onchange",(function(){WebSquare.idCache[t].applyFilterHistory()}));var g=this.getElementById(this.id+"_groupbyFilterBox_div");"bottom"===this.options.groupbyFilterBoxLocation?this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+g.offsetHeight+"px":"top"===this.options.groupbyFilterBoxLocation&&(this.dom[this.id+"_main_div"].style.top=i+g.offsetHeight+"px",this.dom[this.id+"_main_div"].style.bottom=this.scrollLayerWidthSize+"px",this.groupbyZoneStatus.groupbyZoneRender.style.top=g.offsetHeight+"px");var m=this.getElementById(this.id+"_groupbyFilterBox_main"),f=this.getElementById(this.id+"_groupbyFilterBox_buttons");m.style.paddingLeft=f.offsetWidth+"px";var b=this.getElementById(this.id+"_groupbyFilterBox_apply"),y=this.getElementById(this.id+"_groupbyFilterBox_delete");b.onclick=function(){var e=WebSquare.idCache[t];this.checked?e.applyFilterHistory():e.groupbyStatus.grouped?e.clearGroupby():e._dataList.clearFilter()},y.onclick=function(){WebSquare.idCache[t].clearFilterHistory()},this.handlerResize_drawInitializer()}}catch(t){s.Y.printStackTrace(t)}},q.prototype.getCellInputType=function(t,e){try{var i=this.getCellInfo(e);if("custom"==i.options.inputType){var o=this.getRealRowIndex(t);return i.cellManagerHashByRowIndex[o].options.inputType}return i.options.inputType}catch(t){s.Y.printStackTrace(t)}},q.prototype.setCellOption=function(t,e,i,o){var s=this.getColumnIndex(e),r=this.getExtraDataObj("cell",t,s)
;if("viewType"===i)r.key=o,this.rowIndex>=0&&this.drawCellData(t-this.rowIndex,t,s);else{var a=WebSquare.language.getMessage("Grid_warning4",this.id,i)||"["+this.id+"] Changing setting "+i+" is not currently supported.";$l(a)}},q.prototype.getCellOption=function(t,e,i){var o=this.getColumnIndex(e),s=this.getCellInfo(e);if("custom"!=s.options.inputType){var r=this.getExtraDataObj("cell",t,o);return null==r.key?s.options[i]:r.key}var a=s.cellManagerHashByRowIndex[t];if(a)return a.options[i]},q.prototype.getCustomCellOptions=function(t,e){try{var i=this.getCellInfo(e),o={};if("custom"==i.options.inputType){var r=this.getRealRowIndex(t),a=i.cellManagerHashByRowIndex[r];for(var n in a.initializeInfo)"id"!=n&&"displayRowIndex"!=n&&"realRowIndex"!=n&&(o[n]=a.initializeInfo[n])}return o}catch(t){s.Y.printStackTrace(t)}},q.prototype.ungroupColumn=function(t){try{if(this.groupbyStatus.grouped){var e;"string"==typeof t?e=this.getColumnIndex(t):"number"==typeof t&&(e=t);for(var i=!0,o=this.groupbyStatus.sortIndexArr.length-1;o>=0;o--)if(this.groupbyStatus.sortIndexArr[o]==e){this.groupbyStatus.sortIndexArr.splice(o,1),this.groupbyStatus.sortOrderArr.splice(o,1),delete this.groupbyStatus.filter[this.getColumnID(e)],i=!1;break}if(i)return;if(this.groupbyFilterList&&this.groupbyFilterList.filterHistory.column.length>0)if(this.groupbyFilterList.filterHistory.column[0]===this.getColumnID(e))this.groupbyFilterList.filterHistory.column.shift(),this.groupbyFilterList.filterHistory.filteredRowIndexArr.shift();else{var r=this.groupbyFilterList.filterHistory.column.length,a=this.groupbyFilterList.filterHistory.filteredRowIndexArr[r-1].slice(0),n=0;for(o=0;o<r;o++)if(this.groupbyFilterList.filterHistory.column[o]===this.getColumnID(e)){this.groupbyFilterList.filterHistory.column.splice(o,1),this.groupbyFilterList.filterHistory.filteredRowIndexArr.splice(o,1),n=1;break}for(o=0;o<r-n;o++)this.groupbyFilterList.filterHistory.filteredRowIndexArr[o]=a}if(this.clearSearchData({clearValue:!0}),0==this.groupbyStatus.sortIndexArr.length)this.clearGroupby();else{var l=this.groupbyDisplayOptions;l.filter=this.groupbyStatus.filter,l.sortIndex=this.groupbyStatus.sortIndexArr,l.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(l)}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.changeGroupDepth=function(t,e){try{if(this.groupbyStatus.grouped){var i,o,r,a;"string"==typeof t?i=this.getColumnIndex(t):"number"==typeof t&&(i=t),"string"==typeof e?o=this.getColumnIndex(e):"number"==typeof e&&(o=e);for(var n=0;n<this.groupbyStatus.sortIndexArr.length;n++)this.groupbyStatus.sortIndexArr[n]==i&&(a=n),this.groupbyStatus.sortIndexArr[n]==o&&(r=n);if("number"!=typeof a||"number"!=typeof r||a==r)return;this.groupbyStatus.sortIndexArr.splice(a,1),this.groupbyStatus.sortIndexArr.splice(r,0,i);var l=this.groupbyStatus.sortOrderArr.splice(a,1);this.groupbyStatus.sortOrderArr.splice(r,0,l);var h=this.groupbyDisplayOptions;h.filter=this.groupbyStatus.filter,h.sortIndex=this.groupbyStatus.sortIndexArr,h.sortOrder=this.groupbyStatus.sortOrderArr,this.groupby(h)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.removeGroupbyFilterList=function(){try{this.groupbyFilterList&&this.groupbyFilterList.remove()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getGroupbyDisplayRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyDisplayRowIndex(t,e):t}catch(e){return s.Y.printStackTrace(e,null,this),t}},q.prototype.__getGroupbyDisplayRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;var i=this._dataList.getFilteredRowIndex(this.getRealRowIndex(t));return null==i&&!0!==e&&(i=t),i}catch(e){return s.Y.printStackTrace(e,null,this),t}},q.prototype._getGroupbyGroupedRowIndex=function(t,e){try{return this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped?this.__getGroupbyGroupedRowIndex(t,e):t}catch(e){return s.Y.printStackTrace(e,null,this),t}},
q.prototype.__getGroupbyGroupedRowIndex=function(t,e){try{if(!this.groupbyStatus.grouped)return t;for(var i,o=this._dataList.getRealRowIndex(t),r=0;r<this.groupbyStatus.groupedRowIndexArr.length;r++)if(o===this.groupbyStatus.groupedRowIndexArr[r]){i=r;break}return null==i&&!0!==e&&(i=t),i}catch(e){return s.Y.printStackTrace(e,null,this),t}},q.prototype.isEditing=function(){try{return!!this.editedCell}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.readExcelFile=function(t,e,i,o,s,r,a,n){this.readFile(t,e,i,o,s,"excel",null,r,a,n)},q.prototype.readFile=function(t,e,i,o,s,r,a,n,l,h){o=void 0===o||"string"!=typeof o?this.options.excelUploadPopupURL:this.getURL(o),void 0!==s&&"string"==typeof s||(s="top=280,height=80,left=160,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no"),o+=1==(t=parseInt(t,10))?"?header=true":"?header=false",o+=1==(e=parseInt(e,10))?"&append=true":"&append=false",o+=1==n?"&fillHidden=true":"&fillHidden=false",o+=1==(i=parseInt(i,10))?"&hidden=true":"&hidden=false",o+=1==(h=h||0)?"&type=true":"&type=false",a&&(o+="&"+a),o+="&action="+this.options.excelUploadURL,o+="&gridID="+this.id;for(var d=[],c=this.defaultColCnt;c<this.hiddenList.length;c++)1==this.hiddenList[c]&&d.push(c-this.defaultColCnt);o+="&columnNum="+this.getTotalCol(),o+="&expressionColumns="+this.getExpressionColumnArr().join(","),o+="&hiddenColumns="+d.join(","),o+="&headerRows="+this.getElementById(this.id+"_head_table").rows.length,o+=l?"&gridStartRow="+l:"&gridStartRow=1",WebSquare.domain&&(o+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain)),window.open(o,"fileupWindow",s)},q.prototype.getExpressionColumnArr=function(t){var e,i=[];e=t&&"1"==t.ignoreSpan?this.getColCnt():this.getTotalCol();for(var o=0;o<e;o++)"expression"==this.getCellInfo(o).options.inputType?i.push("true"):i.push("false");return i},q.prototype.saveExcelFile=function(t,e,i,o,s,r,a,n){var l={};l.fileName=t,l.hidden=e,l.checkButton=i,l.type=o,l.hiddenExpand=s,l.saveList=r,l.useEuroLocale=a,l.httpReadOnly=n,this.saveExcel(l)},q.prototype.saveExcel=function(t){var e=t.processMsg;e&&e.length>0?WebSquare.layer.showProcessMessage(e,{scope:this.scope_id||""}):WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""});for(var i=t.fileName||"default",o=t.hidden||0,s=t.checkButton||0,a=t.type+""||"0",n=t.hiddenExpand||0,l=t.saveList||[],h=t.useEuroLocale||"false",d=t.password||"",c=new W.r.Hashtable,u=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],p=WebSquare.Elem.api.getElementsByTagName(u,"w2:column"),g=0;g<p.length;g++){var m=p[g],f=m.getAttribute("id");m.setAttribute("value",this.getHeaderValue(f))}if(c.put("style",WebSquare.xml.serialize(this.element._element)),"0"==a||""==a)c.put("data",this.getExcelAllXML()),c.put("footer_data",this.getExcelAllFooterXML());else if("2"==a){var b=this.getExcelAllXMLRaw();c.put("data",b),c.put("footer_data",this.getExcelAllFooterXMLRaw())}else{b=this.getExcelAllXMLDisplay(a);c.put("data",b),c.put("footer_data",this.getExcelAllFooterXMLDisplay())}var y=[];for(g=0;g<this.getTotalCol();g++){var v=this.getCellInfo(g).options.inputType;"checkbox"!=v&&"radio"!=v&&"button"!=v||y.push('"'+g+'"')}c.put("hiddenArr",this.getHiddenColumnArr()),c.put("fileName",i),c.put("hidden",o),c.put("checkButton",s),c.put("type",a),c.put("rowNumVisible",this.options.rowNumVisible+"");var w=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var S=this.getLocaleValue(this.options.rowNumLocaleRef);S&&(w=S)}c.put("rowNumHeaderValue",w),c.put("hiddenExpand",n),c.put("checkButtonArr","<array><![CDATA[["+y.join(",")+"]]]></array>"),c.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),c.put("useEuroLocale",h),c.put("password",d),t.scopeId=this.scope_id||"",r.I.excelDownload(this.options.excelDownloadURL,c.toString(),"post",t)},q.prototype.saveExcelFile2=function(t,e,i,o,s,r){var a={};if(a.fileName=t,a.type=o,e+""=="0"){
for(var n=[],l=this.defaultColCnt;l<this.hiddenList.length;l++)this.hiddenList[l]&&n.push(l-this.defaultColCnt);a.removeColumns=n.join(",")}var h=[];if(i+""=="0")for(l=0;l<this.getTotalCol();l++){var d=this.getCellInfo(l).options.inputType;"checkbox"!=d&&"radio"!=d&&"button"!=d||h.push(this.getCellInfo(l).options.colIndex-this.defaultColCnt)}for(l=this.defaultColCnt;l<this.hiddenList.length;l++)e+""=="1"&&s+""=="0"&&1==this.hiddenList[l]&&h.push(l-this.defaultColCnt);a.foldColumns=h.join(","),this.advancedExcelDownload(a)},q.prototype.getHiddenColumnArr=function(){for(var t=[],e=this.defaultColCnt;e<this.hiddenList.length;e++)t.push(this.hiddenList[e]);return'<array><![CDATA[["'+t.join('","')+'"]]]></array>'},q.prototype.fireFileReadEnd=function(t){var e=this;setTimeout((function(){u.f.fireEvent(e,"onfilereadend",t)}),10)},q.prototype.readCSV=function(t){var e={};t=t||{};e.wframe=t.wframe||!1;var i=t.type||"1",s=t.delim||",",n=t.escapeChar||"",h=t.header||"1",d=t.footer||"1",c=t.startRowIndex||"0",u=t.startColumnIndex||"0",p=t.append||"0",g=t.hidden||"0",m=t.advancedHidden||"0",f=t.fillHidden||"0",b=t.skipSpace||"0",y=t.removeColumns||"",v=t.optionParam||"",w=document.location.protocol+"//"+document.location.host+"/",S=t.popupUrl?w+t.popupUrl:o.q.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.js"),_=t.popupUrl||this.options.csvUploadPopupURL;_+="?";var C,x=t.processMsg||"",I="";if(e.name=t.name||"FILE UPLOAD",this.options.dataList){var T=this.modelControl.getDataComp(this.options.dataList);null!=T&&(I=T.id)}var k=t.status||"R",L=t.expression||"1",A=t.ignoreSpan||"0",D=t.maxFileSize||-1,W=t.csvUploadURL||t.action||"",q=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",M=t.columnOrder||"",E=t.useModalDisable||"false",R=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false",N=t.filePath||"",F=t.trim||"0";if(t.useDialog=t.useDialog+""!="false",e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,void 0===t.features||"string"!=typeof t.features)C="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else if(1==t.wframe){for(var O=t.features.split(","),B={},P=0;P<O.length;P++)0!=O[P].toLowerCase().indexOf("top")?0!=O[P].toLowerCase().indexOf("left")?0!=O[P].toLowerCase().indexOf("height")?0!=O[P].toLowerCase().indexOf("width")||(B.width=parseInt(O[P].split("=")[1])):B.height=parseInt(O[P].split("=")[1]):B.left=parseInt(O[P].split("=")[1]):B.top=parseInt(O[P].split("=")[1]);C=B}else C=t.features;e.sFeatures=C,h=parseInt(h,10),p=parseInt(p,10),g=parseInt(g,10),i=i||0,e.type=1==i?"true":"false",e.uploadType=i,e.delim=s,e.escapeChar=n,e.header=1==h?"true":"false",e.footer=1==d?"true":"false",e.append=1==p?"true":"false",e.hidden=1==g?"true":"false",1==m?(_+="&advancedHidden=true",e.advancedHidden="true"):(_+="&advancedHidden=false",e.advancedHidden="false"),e.fillHidden=1==f?"true":"false",e.skipSpace=1==b?"true":"false",e.removeColumns=y,e.optionParam=v,_+="&gridID="+this.id,e.gridID=this.id;var Y=[];for(P=this.defaultColCnt;P<this.hiddenList.length;P++)1==this.hiddenList[P]&&Y.push(P-this.defaultColCnt);var V=this.getExpressionColumnArr(t);e.expressionColumns=V.join(","),e.columnNum=V.length,e.hiddenColumns=Y.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=c||"1",e.gridStartCol=u||"1",WebSquare.domain?(_+="&domain="+WebSquare.text.URLEncoder(WebSquare.domain),e.domain=WebSquare.text.URLEncoder(WebSquare.domain)):e.domain="";var H,j=t.msaName||this._getMsaName()||"";if(""!=j){var z="";""!=W&&(z=W),W=r.I.getServletURL(this,j,"csvToXML.wq",z),q=!0}if(""==W&&(W=this.options.csvUploadURL),e.msaName=j,e.action=W,e.processMsg=WebSquare.text.BASE64URLEncoder(x),e.dataList=I,1==A){var G=[],Z={},U=0;for(P=0;P<this.cellIdList.length;P++){
for(var X=this.cellInfoHash[this.cellIdList[P]],K=parseInt(X.options.rowSpan)||1,$=parseInt(X.options.colSpan)||1,J=U,Q=0;Q<this.getRowCount()*this.getColCnt()&&G[J+Q];Q++)U++;for(var tt=0;tt<$;tt++){var et=U;G[et]=X.id,Z[et]=!0;for(Q=1;Q<K;Q++){var it=U+Q*this.getColCnt();G[it]=X.id,Z[it]=!0}U+=1}}H=G.join(",")}else H=this.cellIdList.join(",");e.columnIds=H,e.expression=1==L?"false":"true",e.status=k,e.maxFileSize=D,e.postMsg=q,e.columnOrder=M,e.useModalDisable=E,e.useXHR=R,e.filePath=N,e.useDialog=t.useDialog,e.trim=1==F?"true":"false";var ot=a.Z.getBoolean(e.wframe);if(this._csvUploadInfo=JSON.stringify(e),0==t.useDialog){var st=new FormData;st.append("type",e.type),st.append("uploadType",e.uploadType),st.append("delim",e.delim),st.append("escapeChar",e.escapeChar),st.append("header",e.header),st.append("footer",e.footer),st.append("append",e.append),st.append("hidden",e.hidden),st.append("fillHidden",e.fillHidden),st.append("advancedHidden",e.advancedHidden),st.append("skipSpace",e.skipSpace),st.append("removeColumns",e.removeColumns),st.append("action",e.action),st.append("gridID",e.gridID),st.append("columnNum",e.columnNum),st.append("expressionColumns",e.expressionColumns),st.append("hiddenColumns",e.hiddenColumns),st.append("headerRows",e.headerRows);var rt=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody"),at=WebSquare.Elem.api.getElementsByTagName(rt[0],"w2:row");st.append("bodyRows",at.length),st.append("headerRows",e.headerRows),st.append("gridStartRow",e.gridStartRow);var nt="";nt="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),st.append("gridStyle",nt),st.append("columnIds",e.columnIds),st.append("dataList",e.dataList),st.append("expression",e.expression),st.append("status",e.status),st.append("optionParam",e.optionParam),st.append("columnOrder",e.columnOrder),st.append("useXHR",e.useXHR),st.append("filePath",e.filePath),st.append("useDialog",e.useDialog),x&&x.length>0?WebSquare.layer.showProcessMessage(x,t):WebSquare.layer.showProcessMessage("upload...",t);var lt=this,ht=new XMLHttpRequest;ht.onreadystatechange=function(){if(4==ht.readyState)if(200==ht.status)try{var i=ht.responseText,o=WebSquare.xml.parse(i),s=o.getElementsByTagName("Exception");if(s.length>0){var r,n=o.getElementsByTagName("deniedCodeList")[0],l="";if("102"==(l=void 0===n||null==l||void 0===(l=n.firstChild)||null==l||""==l?"":l.nodeValue))h=Upload_msg2;else{var h=o.getElementsByTagName("message")[0].firstChild;h=WebSquare.language.getMessage("Upload_msg3")}(r=t.onFailureCallback||null)&&r(e.action,h)}else{var d=o.getElementsByTagName("array")[0].firstChild.nodeValue;"string"==typeof e.append&&(e.append=a.Z.getBoolean(e.append));var c="",u={columnInfo:e.columnIds.split(","),data:d};if(""!=e.dataList){c=e.dataList;var p=a.Z.getComponentById(c),g=p.getRowCount();if(1==e.uploadType||2==e.uploadType?p.setArrayFile(u,e.append,e.gridID,e.uploadType):p.setArray(u,e.append),"C"==e.status){var m=p.getRowCount();e.append?p.modifyRangeStatus(g,m,"C"):p.modifyRangeStatus(0,m,"C")}}else{c=e.gridID;g=this.getRowCount();if(1==e.uploadType||2==e.uploadType?this.setDataFile(d,e.append,u.columnInfo,e.gridID,e.uploadType):this.setData(d,e.append),"C"==e.status){m=this.getRowCount();e.append?this.modifyRangeStatus(g,m,"C"):this.modifyRangeStatus(0,m,"C")}}var f=t.onSuccessCallback||null;f&&f(e.action);var b=N.split("\\");lt.fireFileReadEnd(b[b.length-1])}}catch(t){s.printStackTrace(t)}finally{WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}else(r=t.onFailureCallback||null)&&r(e.action),WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})},ht.open("POST",e.action,!0),ht.send(st)}else if(!0===ot){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,
-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.Z.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.Z.isIE(7)||a.Z.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.Z.isIE(9)||a.Z.isIE(10)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.Z.isIEAllVersion(11)?(e.sizeInfo.height=197,e.sizeInfo.width=455):a.Z.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.Z.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=198,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=200,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=200,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=197,e.sizeInfo.width=454):a.Z.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.Z.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.Z.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==(0,l.A)(e.sFeatures)&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var dt={type:"json",name:"csvPopupParam",data:e},ct={id:this.id+"_csvPop",type:"wframePopup",dataObject:dt,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:S,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&(ct.scope_uuid=this.scope_obj.uuid),a.Z.openPopup(ct.popupUrl,ct)}else _=WebSquare.BootLoader.getEngineUri(_),window.open(_,"csvupWindow",e.sFeatures)},q.prototype.saveCSV=function(t){var e=t.maxCellCount||-1;if(-1!=(e=parseInt(e,10))&&e<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){var i=WebSquare.language.getMessage("Grid_warning8",e)||"The cell count has exceeded the limit.\n The current limit is : "+e;return void alert(i)}var o=t.maxRowCount||-1;if(-1!=(o=parseInt(o,10))&&o<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){i=WebSquare.language.getMessage("Grid_warning10",o)||"The row count has exceeded the limit.\n The current limit is : "+o;return void alert(i)}WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var s=(t=t||{}).fileName||"csvfile.csv",n=t.type||"1",l=t.delim||";",h=t.displayDelim||"true",d=t.removeColumns||"",c=t.header||"1",u=t.hidden||"0",p=t.checkButton||"1",g=t.removeQuotation||"1",m=t.removeNewLine||"1",f=t.saveList||"",b=this.options.rowNumHeaderValue||"";this.options.useLocale&&this.options.rowNumLocaleRef&&((V=this.getLocaleValue(this.options.rowNumLocaleRef))&&(b=V));var y="";"1"!=t.rowNumVisible&&"true"!=t.rowNumVisible&&1!=t.rowNumVisible||(y=this.options.rowNumVisible||"false");var v=t.textTable||"false",w=t.textTableAlign||"right",S=t.useFooter||"false",_=t.columnMove+""=="true",C=t.columnOrder||"",x=t.optionParam||"",I=t.aposPrefixOnNum||"0",T=t.aposPrefixOnText||"0",k=t.ignoreSpan||"0",L=t.maxDataSize||-1;L=parseInt(L,10);var A=t.csvDownloadURL||t.action||"",D=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=D+""=="true"
;for(var q=t.openFile||"false",M=t.sameSite||"",E=t.useHeaderCheckBoxLabel+""=="true",R=t.opencsv+""=="true",N=t.msaName||"",F=t.trim||"0",O=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],B=WebSquare.Elem.api.getElementsByTagName(O,"w2:column"),P=0;P<B.length;P++){var Y=B[P];if("checkbox"===Y.getAttribute("inputType")&&!0===E){var V,H=Y.getAttribute("checkboxLabel")||Y.getAttribute("value"),j=Y.getAttribute("localeRef");if(this.options.useLocale&&j)(V=this.getLocaleValue(j))&&(H=V);Y.setAttribute("value",H+"")}else{var z=Y.getAttribute("id");Y.setAttribute("value",this.getHeaderValue(z)+"")}}var G=new W.r.Hashtable,Z="",U=(Z="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element)).indexOf("<w2:gridView");if(Z.indexOf("xmlns:w2")<0&&U>=0){var X=" xmlns:w2='"+WebSquare.core._XML_NAMESPACE.W2+"' ";U+=12,Z=Z.slice(0,U)+X+Z.slice(U)}G.put("style",Z),"0"==n?(G.put("data",this.getExcelAllXML()),"true"==S?G.put("footer_data",this.getExcelAllFooterXML()):G.put("footer_data","<array><![CDATA[[]]]></array>")):(G.put("data",this.getExcelAllXMLDisplay(n)),"true"==S?G.put("footer_data",this.getExcelAllFooterXMLDisplay()):G.put("footer_data","<array><![CDATA[[]]]></array>"));var K,$=[];for(P=0;P<this.getTotalCol();P++){var J=this.getCellInfo(P).options.inputType;"checkbox"!=J&&"radio"!=J&&"button"!=J||$.push('"'+P+'"')}_&&(K=""==C?this.getColumnOrder()||"":C.split(","));var Q=[];if(""!=d){var tt=(d+="").split(",");if(_)for(P=0;P<tt.length;P++)for(var et=0;et<K.length;et++)tt[P]==K[et]&&Q.push(et);else Q=tt;Q.sort((function(t,e){return 1*t-1*e})),d=Q.join(",")}var it=d;it='"'+it.wq_replaceAll(",",'","')+'"',G.put("hiddenArr",this.getHiddenColumnArr()),G.put("fileName",s),G.put("hidden",u),G.put("checkButton",p),G.put("type",n),G.put("rowNumVisible",y),G.put("rowNumHeaderValue",b),G.put("removeQuotation",g),G.put("delim",l),G.put("displayDelim",h),G.put("header",c),G.put("textTable",v),G.put("textTableAlign",w),G.put("useFooter",S),G.put("columnMove",_),G.put("columnOrder",K),G.put("optionParam",x),G.put("aposPrefixOnNum",I),G.put("aposPrefixOnText",T),G.put("ignoreSpan",k),G.put("removeNewLine",m),G.put("checkButtonArr","<array><![CDATA[["+$.join(",")+"]]]></array>"),""!=f&&G.put("saveList",'<array><![CDATA[["'+f.join('","')+'"]]]></array>'),G.put("removeColumns","<array><![CDATA[["+it+"]]]></array>"),G.put("openFile",q),""!=M&&G.put("sameSite",M),G.put("opencsv",R),""!=(N=N||this._getMsaName()||"")&&(D="true"),G.put("useXHR",D),G.put("msaName",N),G.put("trim",F);var ot=G.toString();if(-1!=L&&L<a.Z.getByteLengthUtf8(ot)){i=WebSquare.language.getMessage("Grid_warning9",L)||"he data size has exceeded the limit.\n The current limit is : "+e+" byte";return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(i)}if(""!=N){var st="";""!=A&&(st=A),A=r.I.getServletURL(this,N,"xmlToCSV.wq",st),t.useXHR=!0}""==A&&(A=this.options.csvDownloadURL),t.scopeId=this.scope_id||"",r.I.excelDownload(A,ot,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0))},q.prototype.saveCSVFile=function(t,e,i,o,s,a,n,l,h){WebSquare.layer.showProcessMessage("download...",{scope:this.scope_id||""}),n+="";var d=new W.r.Hashtable,c="";c="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),d.put("style",c),"0"==n||""==n?(d.put("data",this.getExcelAllXML()),d.put("footer_data",this.getExcelAllFooterXML())):(d.put("data",this.getExcelAllXMLDisplay(n)),
d.put("footer_data",this.getExcelAllFooterXMLDisplay()));for(var u=[],p=0;p<this.getTotalCol();p++){var g=this.getCellInfo(p).options.inputType;"checkbox"!=g&&"radio"!=g&&"button"!=g||u.push('"'+p+'"')}var m=h||"";m='"'+m.wq_replaceAll(",",'","')+'"',d.put("hiddenArr",this.getHiddenColumnArr()),d.put("fileName",t),d.put("hidden",o),d.put("checkButton","1"),d.put("type",n),d.put("rowNumVisible",this.options.rowNumVisible);var f=this.options.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef){var b=this.getLocaleValue(this.options.rowNumLocaleRef);b&&(f=b)}d.put("rowNumHeaderValue",f),d.put("removeQuotation",a),d.put("delim",e),d.put("header",i),d.put("checkButtonArr","<array><![CDATA[["+u.join(",")+"]]]></array>"),void 0!==l&&l&&d.put("saveList",'<array><![CDATA[["'+l.join('","')+'"]]]></array>'),d.put("removeColumns","<array><![CDATA[["+m+"]]]></array>"),r.I.excelDownload(this.options.csvDownloadURL,d.toString(),"post",{scopeId:this.scope_id||""})},q.prototype.getExcelUploadInfo=function(t){var e={},i=(t=t||{}).type||"0",o=t.removeColumns||"",s=t.startRowIndex||"0",a=t.startColumnIndex||"0",n=t.endColumnIndex||"-1",l=t.ignoreStartRowIndexInSAX+""||"1",h=t.ignoreStartColumnIndexInSAX+""||"1",d=t.sheetNo||"0",c=t.sheetName||"",u=t.activeSheet||!1,p=t.headerExist||"0";0===t.footerExist&&(t.footerExist="0");var g=t.footerExist||"1",m=t.append||"0",f=t.hidden||"0",b=t.fillHidden||"0",y=t.optionParam||"",v=t.skipSpace||"0",w=t.readUntilEmptyRow||"0",S=t.insertColumns||[],_=t.processMsg||"",C="";if(this.options.dataList){var x=this.modelControl.getDataComp(this.options.dataList);null!=x&&(C=x.id)}var I=t.status||"R",T=t.delim||",",k="",L="",A="",D=t.pwd||"",W=t.loadingMode||"",q=t.maxFileSize||"-1",M=t.cellDataConvertor||"",E=t.decimal||"4",R=t.applyDecimal||"0",N=t.useModalDisable||"false",F="false",O="";t.frameModal&&(F=!0,O=!0===t.frameModal||"frame"===t.frameModal?this.scope_id:t.frameModal);var B=t.useMaxByteLength||"false",P=1==this.options.postMsg?this.options.postMsg:t.postMsg||"false",Y=t.dateFormat||"yyyy-MM-dd",V=t.byteCheckEncoding||"EUC-KR",H=t.columnOrder||"",j=t.columnMove+""=="true",z=t.chunkNum||0,G=t.trim||0,Z=t.useXHR+""=="true",U=t.filePath||"";t.useDialog=t.useDialog+""!="false";for(var X=t.countSkipRow||"",K=0;K<S.length;K++){var $=S[K],J=$.columnIndex+""||"",Q=$.columnValue+""||"";""!=J&&(k=k+L+J+","+Q,L="|")}if(void 0===t.features||"string"!=typeof t.features)A="top=280,height=137,left=160,width=446,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no";else{var tt=t.features.split(","),et={};for(K=0;K<tt.length;K++)0!=tt[K].toLowerCase().indexOf("top")?0!=tt[K].toLowerCase().indexOf("left")?0!=tt[K].toLowerCase().indexOf("height")?0!=tt[K].toLowerCase().indexOf("width")||(et.width=parseInt(tt[K].split("=")[1])):et.height=parseInt(tt[K].split("=")[1]):et.left=parseInt(tt[K].split("=")[1]):et.top=parseInt(tt[K].split("=")[1]);1==t.wframe?A=et:(A=t.features,e.userFeatures=et)}e.sFeatures=A,p=parseInt(p,10),m=parseInt(m,10),f=parseInt(f,10),g=parseInt(g,10),e.header=1==p?"true":"false",e.footer=1==g?"true":"false",e.append=1==m?"true":"false",e.removeColumns=o,e.fillHidden=1==b?"true":"false",e.hidden=1==f?"true":"false",e.type=1==i?"true":"false",e.uploadType=i,e.skipSpace=1==v?"true":"false",e.readUntilEmptyRow=1==w?"true":"false",e.insertColumns=k,e.optionParam=y;var it=t.advancedExcelUploadURL||t.action||"";e.action=it||this.options.advancedExcelUploadURL;var ot=t.msaName||this._getMsaName()||"";if(""!=ot){var st="";it&&(st=it),e.action=r.I.getServletURL(this,ot,"excelToGrid2.wq",st),P=!0}e.gridID=this.id;var rt=[];for(K=this.defaultColCnt;K<this.hiddenList.length;K++)1==this.hiddenList[K]&&rt.push(K-this.defaultColCnt);if(e.columnNum=this.getTotalCol(),e.expressionColumns=this.getExpressionColumnArr().join(","),e.hiddenColumns=rt.join(","),e.headerRows=this.getElementById(this.id+"_head_table").rows.length,e.gridStartRow=s||"1",
e.gridStartCol=a||"1",e.gridEndCol=n,e.ignoreStartRowIndexInSAX="0"==l?"true":"false",e.ignoreStartColumnIndexInSAX="0"==h?"true":"false",e.gridSheetNo=d||"0",e.gridSheetName=c,e.activeSheet=u,e.applyDecimal="0"==R?"false":"true",WebSquare.domain&&(e.domain=WebSquare.text.URLEncoder(WebSquare.domain)),e.processMsg=WebSquare.text.BASE64URLEncoder(_),e.delim=T,e.dataList=C,!0===j){var at=this.htmlInfo.body.rowAttrArr.length,nt=this.getColumnOrder(),lt=nt.length,ht=[];ht[lt-1]=void 0;for(K=0;K<at;K++)for(var dt=0;dt<lt;dt++)ht[lt*K+dt]=this.getColumnID(lt*K+nt[dt]);e.columnIds=ht.join(",")}else e.columnIds=this.cellIdList.join(",");return e.trim=1==G,e.countSkipRow=1==X,e.status=I,e.pwd=D,e.loadingMode=W,e.maxFileSize=q,e.cellDataConvertor=M,e.decimal=E,e.useModalDisable=N+"",e.frameId=O,e.frameModal=F+"",e.useMaxByteLength=B+"",e.postMsg=P+"",e.dateFormat=Y,e.byteCheckEncoding=V,e.columnOrder=H,e.wframe=t.wframe||!1,e.name=t.name||"FILE UPLOAD",e.className=t.className||"",e.resizable=0!=t.resizable||t.resizable,e.windowDragMove=t.windowDragMove||!1,e.chunkNum=parseInt(z,10),e.useXHR=Z,e.filePath=U,e.useDialog=t.useDialog,e.msaName=ot,t.convertIndex&&(t.convertIndex=t.convertIndex.wq_replaceAll(" ",""),e.convertIndexArr=t.convertIndex.split(",")),"grid"==this.initializeType&&this.options.ref&&t.instanceBind&&(e.instanceBind=t.instanceBind),e},q.prototype.advancedExcelUpload=function(t){var e=this.getExcelUploadInfo(t),i=t.popupUrl||this.options.advancedExcelUploadPopupURL,s=document.location.protocol+"//"+document.location.host+"/",r=t.popupUrl?s+t.popupUrl:o.q.baseURI+WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.js"),n=t.advancedHidden||"0",h="";i+="?gridID="+e.gridID,WebSquare.domain&&(i+="&domain="+e.domain),1==n?(i+="&advancedHidden=true",e.advancedHidden="true"):(i+="&advancedHidden=false",e.advancedHidden="false"),""!=e.pwd&&(h=WebSquare.text.BASE64Encoder(e.pwd)),e.pwd=h;var d=a.Z.getBoolean(e.wframe);if(this._excelUploadInfo=JSON.stringify(e),0==t.useDialog){var c=new FormData;c.append("header",e.header),c.append("footer",e.footer),c.append("append",e.append),c.append("hidden",e.hidden),c.append("columnNum",e.columnNum),c.append("hiddenColumns",e.hiddenColumns),c.append("removeColumns",e.removeColumns),c.append("headerRows",e.headerRows);var u=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody"),p=WebSquare.Elem.api.getElementsByTagName(u[0],"w2:row");c.append("bodyRows",p.length),c.append("delim",e.delim),c.append("fillHidden",e.fillHidden),c.append("gridStartRow",e.gridStartRow),c.append("gridStartCol",e.gridStartCol),c.append("gridEndCol",e.gridEndCol),c.append("gridEndCol",e.gridEndCol),c.append("gridSheetNo",e.gridSheetNo),c.append("gridSheetName",e.gridSheetName),c.append("activeSheet",e.activeSheet),c.append("expressionColumns",e.expressionColumns);var g="";g="json"===this.element._elementType?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),c.append("gridStyle",g),c.append("type",e.type),c.append("uploadType",e.uploadType),c.append("skipSpace",e.skipSpace),c.append("insertColumns",e.insertColumns),c.append("dataList",e.dataList),c.append("instanceBind",e.instanceBind),c.append("columnIds",e.columnIds),c.append("status",e.status),c.append("pwd",e.pwd),c.append("loadingMode",e.loadingMode),c.append("optionParam",e.optionParam),c.append("cellDataConvertor",e.cellDataConvertor),c.append("decimal",e.decimal),c.append("applyDecimal",e.applyDecimal),c.append("useMaxByteLength",e.useMaxByteLength),c.append("dateFormat",e.dateFormat),c.append("byteCheckEncoding",e.byteCheckEncoding),c.append("columnOrder",e.columnOrder),c.append("chunkNum",e.chunkNum||0),c.append("trim",e.trim),c.append("useXHR",e.useXHR),c.append("filePath",e.filePath),c.append("useDialog",e.useDialog),c.append("countSkipRow",e.countSkipRow);var m=WebSquare.text.BASE64URLDecoder(e.processMsg)
;m&&m.length>0?WebSquare.layer.showProcessMessage(m,t):WebSquare.layer.showProcessMessage("upload...",t);var f=this,b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState)if(200==b.status){var i=b.responseText;try{var o=WebSquare.xml.parse(i),s=o.getElementsByTagName("Exception");if(s.length>0){var r=o.getElementsByTagName("deniedCodeList")[0],n="";if(void 0===r?n="":void 0!==(n=WebSquare.xml.getTextNodeValue(r))&&null!=n&&""!=n||(n=""),"102"==n)l=WebSquare.language.getMessage("Upload_msg2");else if("101"==n)l=WebSquare.language.getMessage("Upload_msg9");else if("200"==n)l=WebSquare.language.getMessage("Upload_msg10");else if("201"==n)l=WebSquare.language.getMessage("Upload_msg11");else if("202"==n)l=WebSquare.language.getMessage("Upload_msg8");else if("203"==n)l=WebSquare.language.getMessage("Upload_msg12");else if("204"==n)l=WebSquare.language.getMessage("Upload_msg13");else if("205"==n)l=WebSquare.language.getMessage("Upload_msg14");else if("206"==n)l=WebSquare.language.getMessage("Upload_msg15");else if("207"==n)l=WebSquare.language.getMessage("Upload_msg16");else if("208"==n)l=WebSquare.language.getMessage("Upload_msg17");else{var l=WebSquare.xml.getTextNodeValue(o.getElementsByTagName("message")[0]);void 0!==l&&null!=l&&""!=l||(l=WebSquare.language.getMessage("Upload_msg3"))}(y=t.onFailureCallback||null)&&y(e.action,l)}else{var h=o.getElementsByTagName("array")[0].firstChild.nodeValue;"string"==typeof e.append&&(e.append=a.Z.getBoolean(e.append));var d={columnInfo:e.columnIds.split(","),data:h};if(""!=e.dataList){var c=a.Z.getComponentById(e.dataList);d.data=d.data.replaceAll("\\n","\n");var u=c.getRowCount();if(1==e.uploadType||2==e.uploadType?","!=e.delim?c.setArrayFile(d,e.append,e.gridID,e.uploadType,e.delim):c.setArrayFile(d,e.append,e.gridID,e.uploadType):0==e.uploadType&&(","!=e.delim?c.setArray(d,e.append,null,null,e.delim):c.setArray(d,e.append)),"C"==e.status){var p=c.getRowCount();e.append?c.modifyRangeStatus(u,p,"C"):c.modifyRangeStatus(0,p,"C")}}else{u=this.getRowCount();if(!this.options.ref||1!=e.instanceBind&&"true"!=e.instanceBind?1==e.uploadType||2==e.uploadType?this.setDataFile(h,e.append):0==uploadType&&this.setData(h,e.append):(this.options.instanceBindBySetData=!0,1==e.uploadType||2==e.uploadType?this.setDataFile(h,e.append):0==e.uploadType&&this.setData(h,e.append),this.options.instanceBindBySetData=!1),"C"==e.status){p=this.getRowCount();e.append?this.modifyRangeStatus(u,p,"C"):this.modifyRangeStatus(0,p,"C")}}var g=t.onSuccessCallback||null;g&&g(e.action);var m=t.filePath.split("\\");f.fireFileReadEnd(m[m.length-1])}}catch(t){s.printStackTrace(t)}finally{WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}}else{var y;(y=t.onFailureCallback||null)&&y(e.action),WebSquare.layer.hideProcessMessage({scope:this.scope_id||""})}},b.open("POST",e.action,!0),b.send(c)}else if(!0===d){e.sizeInfo={},e.osName="",e.sizeInfo.top=e.sFeatures.top?e.sFeatures.top:160,e.sizeInfo.left=e.sFeatures.left?e.sFeatures.left:280,-1!=navigator.userAgent.indexOf("Windows")?e.osName="window":-1!=navigator.userAgent.indexOf("Macintosh")&&(e.osName="mac"),a.Z.isIE(6)?(e.sizeInfo.height=212,e.sizeInfo.width=456):a.Z.isIE(7)||a.Z.isIE(8)?(e.sizeInfo.height=218,e.sizeInfo.width=457):a.Z.isIE(9)?(e.sizeInfo.height=204,e.sizeInfo.width=446):a.Z.isIE(10)?(e.sizeInfo.height=162,e.sizeInfo.width=455):a.Z.isIEAllVersion(11)?(e.sizeInfo.height=198,e.sizeInfo.width=455):a.Z.isSpartan()?(e.sizeInfo.height=178,e.sizeInfo.width=446):a.Z.isChrome()?-1!=navigator.userAgent.indexOf("OPR")?"window"==e.osName?(e.sizeInfo.height=164,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):"window"==e.osName?(e.sizeInfo.height=200,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=197,e.sizeInfo.width=454):a.Z.isFF()?"window"==e.osName?(e.sizeInfo.height=163,e.sizeInfo.width=454):"mac"==e.osName&&(e.sizeInfo.height=160,
e.sizeInfo.width=454):a.Z.isSafari()?"window"==e.osName?(e.sizeInfo.height=160,e.sizeInfo.width=470):"mac"==e.osName&&(e.sizeInfo.height=160,e.sizeInfo.width=454):a.Z.isOpera()&&("window"==e.osName?(e.sizeInfo.height=189,e.sizeInfo.width=446):"mac"==e.osName&&(e.sizeInfo.height=233,e.sizeInfo.width=460)),"object"==(0,l.A)(e.sFeatures)&&(e.sizeInfo.height=e.sFeatures.height?e.sFeatures.height:e.sizeInfo.height,e.sizeInfo.width=e.sFeatures.width?e.sFeatures.width:e.sizeInfo.width);var y={type:"json",name:"popupParam",data:e},v={id:this.id+"_excelPop",type:"wframePopup",dataObject:y,popupName:e.name,style:"",useIFrame:!1,className:e.className,modal:!0,useModalStack:!0,frameModal:t.frameModal,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:r,left:e.sizeInfo.left,top:e.sizeInfo.top,width:e.sizeInfo.width,height:e.sizeInfo.height,resizable:e.resizable,status:!1,menubar:!1,scrollbars:!1,title:!0,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:e.windowDragMove,processMsgFrame:!0};t.frameModal&&this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]&&(v.scope_uuid=this.scope_obj.uuid),a.Z.openPopup(v.popupUrl,v)}else i=WebSquare.BootLoader.getEngineUri(i),window.open(i,"fileupWindow",e.sFeatures)},q.prototype.advancedExcelDownload=function(t,e){try{var i=t.maxCellCount||-1;if(-1!=(i=parseInt(i,10)))if(i<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()*this.getColCnt()){var o=WebSquare.language.getMessage("Grid_warning8",i)||"The cell count has exceeded the limit.\n The current limit is : "+i;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}var r=t.maxRowCount||-1;if(-1!=(r=parseInt(r,10)))if(r<(this.htmlInfo.body.rowAttrArr.length||1)*this.getRowCount()){o=WebSquare.language.getMessage("Grid_warning10",r)||"The row count has exceeded the limit.\n The current limit is : "+r;return WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(o)}this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.orgStatusArr=this.drilldown.statusArr,this.orgFilteredRowIndexArr=this._dataList.filteredRowIndexArr,this.orgShowDepth=this.showDepth,this.showDepth="9999",this.initDrilldown());var a=parseInt(t.rowsByN);switch(t.rowsByN=a>100?a:100,t.dataLength=this.getDataLength(),t.multiexcel=!1,t.dataProvider=t.dataProvider||"",t.splitProvider=t.splitProvider||"",t.scope=this.scope_id||"",t.type+""){case"":case"0":t.type=0;break;case"2":t.type=2;break;default:t.type=1}if(!1===t.showProcess)WebSquare.getBody().showModal("w2modal_gridDownload");else if(!0===t.showConfirm)t.massStorage=!0,window.downloadGridId=this.id,WebSquare.getBody().showModal(),this.showSendExcelLayer();else{var n=t.processMsg;n&&n.length>0?WebSquare.layer.showProcessMessage(n,t):WebSquare.layer.showProcessMessage("download...",t)}if(0===t.type||1===t.type||2==t.type){t.cellInfo=[],t.isPlainDataCol=[],t.isSelectCol=[],t.isBasicCol=[],t.isExpCol=[],t.isCustomCol=[],t.isCustomModelCol=[],t.isCustomType=[],t.isEscapeFormatter=[];for(var l=this.oneRowDataLength,h=0;h<l;h++){var d=this.getCellInfo(h),c=d.options.inputType;t.cellInfo[h]=d,t.isCustomType[h]="custom"===c,t.isPlainDataCol[h]="checkbox"===c||"image"===c||"radio"===c,t.isSelectCol[h]="select"===c||"checkcombobox"===c||"autoComplete"===c,t.isExpCol[h]="expression"===c,t.isCustomCol[h]=d.useCustomFormatter,t.isCustomModelCol[h]=d.useCustomModelFormatter,t.isEscapeFormatter[h]=d.useEscapeFormatter,t.isBasicCol[h]=!(t.isPlainDataCol[h]||t.isSelectCol[h]||t.isExpCol[h]||t.isCustomCol[h]||t.isCustomModelCol[h]||t.isCustomType[h]||t.isEscapeFormatter[h])}}if(t.dataHandler=t.dataHandler||"",""!=t.dataHandler){this.sendExcelData(t,e,"")}else this.makeExcelData(0,[],t,e)}catch(t){WebSquare.layer.hideProcessMessage(),s.Y.printStackTrace(t,null,this)}},q.prototype.showSendExcelLayer=function(){if(void 0!==window.gridExceldownloadIframe){
window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.style.display="block";var t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.visibility="visible",window.gridExceldownloadIframe.contentWindow.initialize()}else{window.gridExceldownloadIframe=document.createElement("iframe"),window.gridExceldownloadIframe.style.visibility="hidden",window.gridExceldownloadIframe.setAttribute("id","gridDownLoadLayer"),window.gridExceldownloadIframe.setAttribute("src",this.options.advancedExcelDownloadPopupURL),window.gridExceldownloadIframe.setAttribute("frameBorder","0"),window.gridExceldownloadIframe.className="w2grid_downloadIframe",window.gridExceldownloadIframe.style.width="300px",window.gridExceldownloadIframe.style.overflow="hidden",document.body.appendChild(window.gridExceldownloadIframe);t=document.documentElement.scrollTop+document.documentElement.clientHeight/2-parseInt(window.gridExceldownloadIframe.offsetHeight)/2,e=document.documentElement.scrollLeft+document.documentElement.clientWidth/2-parseInt(window.gridExceldownloadIframe.offsetWidth)/2;window.gridExceldownloadIframe.style.left=e+"px",window.gridExceldownloadIframe.style.top=t+"px",window.gridExceldownloadIframe.style.position="absolute",window.gridExceldownloadIframe.style.visibility="visible"}},q.prototype.checkUpload=function(){var t=this;setTimeout((function(){1==t.downloadInit?window.gridExceldownloadIframe.contentWindow.checkUpload("end"):t.checkUpload()}),10)},q.prototype.sendExcelData=function(t,e,i){try{"boolean"==typeof t.useFooter&&(t.useFooter=t.useFooter+"");var o=WebSquare.xml.encode(t.fileName)||"excel",s=t.extension||"";-1==o.indexOf(".")&&""!=s&&(o=o+"."+s);var n=t.sheetName||"sheet",h=t.type||"0",d=void 0===t.footerType?"1":t.footerType+"",c="false";if(1==t.multiexcel){var u=t.multipleSheet;void 0===t.multipleSheet&&(u=""),c=u+""=="true"||u+""==""?"true":"false"}else c="false";var p=t.removeColumns||"",g=t.removeHeaderRows||"",m=t.foldColumns||"",f=t.startRowIndex||"0",b=t.startColumnIndex||"0",y=t.headerColor||"",v=t.headerFontName||"",w=t.headerFontSize||"",S=t.headerFontColor||"",_=t.headerFontBold||"",C=t.bodyColor||"",x=t.bodyFontName||"",I=t.bodyFontSize||"",T=t.bodyFontColor||"",k=t.bodyFontBold||"",L=t.footerColor||"",A=t.footerFontName||"",D=t.footerFontSize||"",W=t.footerFontColor||"",q=t.footerFontBold||"",M=t.subTotalColor||"",E=t.subTotalFontName||"",R=t.subTotalFontSize||"",N=t.subTotalFontColor||"",F=t.subTotalFontBold||"",O=t.rowNumHeaderColor||"",B=t.rowNumHeaderFontName||"",P=t.rowNumHeaderFontSize||"",Y=t.rowNumHeaderFontColor||"",V=t.rowNumBodyColor||"",H=t.rowNumBodyFontName||"",j=t.rowNumBodyFontSize||"",z=t.rowNumBodyFontColor||"",G=t.rowNumFooterColor||"",Z=t.rowNumFooterFontName||"",U=t.rowNumFooterFontSize||"",X=t.rowNumFooterFontColor||"",K=t.rowNumSubTotalColor||"",$=t.rowNumSubTotalFontName||"",J=t.rowNumSubTotalFontSize||"",Q=t.rowNumSubTotalFontColor||"",tt=t.groupbyColor||"";t.groupbyColor=tt;var et=t.groupbyFontName||"";t.groupbyFontName=et;var it=t.groupbyFontSize||"";t.groupbyFontSize=it;var ot=t.groupbyFontColor||"";t.groupbyFontColor=ot;var st=t.dataProvider||"",rt=t.footerDataProvider||"",at=t.splitProvider||"",nt=t.providerRequestXml||"",lt=t.userDataXml||"",ht=t.optionParam||"",dt=t.bodyWordwrap||"",ct=t.subtotalWordwrap||"",ut=t.footerWordwrap||"",pt=t.useEuroLocale||"false",gt=t.numberLocale||"",mt=t.useHeader||"true",ft=t.useSubTotal||"false",bt=t.useFooter||"true";t.printSet=t.printSet||{}
;var yt=t.printSet.fitToPage||"false",vt=t.printSet.landScape||"false",wt=t.printSet.fitWidth||"1",St=t.printSet.fitHeight||"1",_t=t.printSet.scale||"100",Ct=t.printSet.pageSize||"A4",xt=t.separator||",",It=t.subTotalScale||-1,Tt=t.subTotalRoundingMode||"",kt=t.footerScale||-1,Lt=t.footerRoundingMode||"",At=t.useStyle+""=="true",Dt=t.useClass+""=="true";t.useClass=Dt;var Wt=t.setFontSize+""=="true",qt=t.freezePane||"",Mt=t.autoSizeColumn||"false",Et=t.autoSizeAdjustWith||512,Rt=t.displayGridlines||"",Nt=t.colMerge||"false",Ft=t.colMergeValue||"false",Ot=t.colMergeTextAlign||"center",Bt=t.useDataFormat||"false",Pt=t.useHeaderDataFormat||"",Yt=t.applyDataFormat||"false",Vt=t.customToDataType||"false",Ht=t.useSubTotalData+""=="true",jt=t.useFooterData+""=="true",zt=t.calcFooter+""=="true",Gt=t.columnMove+""=="true",Zt=t.columnOrder||"";zt&&(Gt=!1);var Ut=t.columnMoveWithSubTotal||"",Xt=t.columnMoveWithFooter||"",Kt=t.oddRowBackgroundColor||"",$t=t.evenRowBackgroundColor||"",Jt=t.indent||"0",Qt=WebSquare.xml.encode(this.options.rowNumHeaderValue)||t.rowNumHeaderValue||"";if(this.options.useLocale&&this.options.rowNumLocaleRef)(bi=this.getLocaleValue(this.options.rowNumLocaleRef))&&(Qt=bi);var te=t.rowNumVisible+""=="true",ee=this.options.startRowNumber||"1",ie=t.bodyNumberDefaultValue||"",oe=t.numberToText||"false",se=t.rowHeight||"-1",re=t.headerRowHeight||"-1",ae=t.maxDataSize||-1;ae=parseInt(ae,10);var ne=t.pwd||"",le=t.useImage||"false",he=t.headerAutoFilter||"false",de=t.filterRowIndex||"-1",ce=t.mergeCell+""=="true",ue=t.noMerge+""=="true";t.httpReadOnly=t.httpReadOnly+""=="true";var pe=t.advancedExcelDownloadURL||t.action||"",ge=1==this.options.useXHR?this.options.useXHR:t.useXHR||"false";t.useXHR=ge+""=="true";var me,fe=t.openFile||"false",be=t.macroFileName||"",ye=t.useMacro||"false",ve=t.showDialog||"false",we=t.dialogFilter||"",Se=t.keepType||"false",_e=t.useHeaderCheckBoxLabel+""=="true",Ce=t.lazyInfoArr||"false",xe=t.decimal||"",Ie=t.sameSite||"",Te=t.customProvider||"",ke=t.customProviderIndex||"",Le=t.rowAccessWindowSize||"",Ae=t.trim||"",De=t.desc||"",We=t.footerTop||"",qe=t.msaName||"",Me=t.innerBorder+""=="false"?"false":"",Ee=t.chart||{};if(Ee.chartName)var Re=Ee.chartName||"line",Ne=Ee.chartType||"",Fe=Ee.title||"",Oe=Ee.xTitle||"",Be=Ee.yTitle||"",Pe=Ee.startRowIndex||0,Ye=Ee.startColIndex||0,Ve=Ee.endRowIndex||0,He=Ee.endColIndex||0,je=Ee.serAxis||"true",ze=Ee.catAxis||"true",Ge=Ee.catAxisRange||{},Ze=Ge.startColIndex||0,Ue=Ge.startRowIndex||0,Xe=Ge.endColIndex||0,Ke=Ge.endRowIndex||0,$e=Ee.serAxisRange||{},Je=$e.startColIndex||0,Qe=$e.startRowIndex||0,ti=$e.endColIndex||0,ei=$e.endRowIndex||0,ii=Ee.dataAxisRange||{},oi=ii.startColIndex||0,si=ii.startRowIndex||0,ri=ii.endColIndex||0,ai=ii.endRowIndex||0,ni=Ee.catGridLines||"true",li=Ee.serGridLines||"true",hi=Ee.legend||"true",di=Ee.legendPosition||"bottom";Gt&&(me=""==Zt?this.getColumnOrder()||"":Zt.split(","));var ci=[];if(""!=p){var ui=(p+="").split(",");if(Gt)for(var pi=0;pi<ui.length;pi++)for(var gi=0;gi<me.length;gi++)ui[pi]==me[gi]&&ci.push(gi);else ci=ui;ci.sort((function(t,e){return 1*t-1*e})),p=ci.join(",")}var mi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],fi=WebSquare.Elem.api.getElementsByTagName(mi,"w2:column");for(pi=0;pi<fi.length;pi++){if("checkbox"===(zi=fi[pi]).getAttribute("inputType")&&!0===_e){var bi,yi=zi.getAttribute("checkboxLabel")||zi.getAttribute("value"),vi=zi.getAttribute("localeRef");if(this.options.useLocale&&vi)(bi=this.getLocaleValue(vi))&&(yi=bi);zi.setAttribute("value",yi+"")}else{var wi=zi.getAttribute("id");zi.setAttribute("value",this.getHeaderValue2(wi)+"")}if("definedFormat"==(Li=zi.getAttribute("excelCellType"))){var Si="definedFormat"+this._getDefinedFormatIndex(zi.getAttribute("excelFormat"));zi.setAttribute("excelCellType",Si)}}var _i=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:gBody"),Ci=t.toTextIgnoreFormat,xi=!1;if(_i.length>0){
var Ii=_i[0],Ti=WebSquare.Elem.api.getElementsByTagName(Ii,"w2:row");for(pi=0;pi<Ti.length;pi++)for(fi=WebSquare.Elem.api.getElementsByTagName(Ti[pi],"w2:column"),gi=0;gi<fi.length;gi++){wi=(zi=fi[gi]).getAttribute("id");var ki=this.getCellInfo(wi);ki.options.displayFormat&&zi.setAttribute("displayFormat",ki.options.displayFormat);var Li=zi.getAttribute("excelCellType"),Ai="";if(xi=!1,Ci&&Ci.hasOwnProperty("colID"))xi=-1!==Ci.colID.split(",").indexOf(wi);xi&&zi.setAttribute("displayFormat",""),null==Li||""==Li||void 0===Li?(Ai=this._dataList.getColumnOption(wi,"dataType"),xi&&(Ai="text")):Ai=Li,Ai?zi.setAttribute("dataType",Ai):zi.setAttribute("dataType","text");var Di=zi.getAttribute("excelFormatter");if(Zi=a.Z.getGlobalFunction(Di,this.scope_id)){var Wi=Zi.call(this,wi);zi.setAttribute("excelFormat",Wi)}if("definedFormat"==Li){Si="definedFormat"+this._getDefinedFormatIndex(zi.getAttribute("excelFormat"));zi.setAttribute("excelCellType",Si)}}}var qi,Mi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:subTotal"),Ei=a.Z.getDataPrefix("dataType"),Ri=a.Z.getDataPrefix("displayFormat");for(pi=0;pi<Mi.length;pi++){Ti=WebSquare.Elem.api.getElementsByTagName(Mi[pi],"w2:row"),qi=this.subtotalTableList[Mi[pi].getAttribute("targetColumnID")];for(gi=0;gi<Ti.length;gi++){fi=WebSquare.Elem.api.getElementsByTagName(Ti[gi],"w2:column");for(var Ni=qi?qi.rows[gi].getElementsByTagName("td"):"",Fi=0;Fi<fi.length;Fi++){wi=(zi=fi[Fi]).getAttribute("id");for(var Oi="",Bi=0;Bi<Ni.length;Bi++)Ni[Bi].id===wi&&(Oi=Ni[Bi]);if(xi=!1,Ci&&Ci.hasOwnProperty("subtotalColID"))xi=-1!==Ci.subtotalColID.split(",").indexOf(wi);xi?(zi.setAttribute("displayFormat",""),zi.setAttribute("dataType","text")):Oi&&(Oi.getAttribute(Ri)&&Oi.getAttribute(Ri)!=zi.getAttribute("displayFormat")&&zi.setAttribute("displayFormat",Oi.getAttribute(Ri)),Oi.getAttribute(Ei)&&"number"==Oi.getAttribute(Ei)&&Oi.getAttribute(Ei)!=zi.getAttribute("dataType")&&zi.setAttribute("dataType",Oi.getAttribute(Ei)));Di=zi.getAttribute("excelFormatter");if(Zi=a.Z.getGlobalFunction(Di,this.scope_id)){Wi=Zi.call(this,wi);zi.setAttribute("excelFormat",Wi)}if("definedFormat"==(Li=zi.getAttribute("excelCellType"))){Si="definedFormat"+this._getDefinedFormatIndex(zi.getAttribute("excelFormat"));zi.setAttribute("excelCellType",Si)}}}}var Pi=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:footer"),Yi=this.getElementById(this.id+"_foot_table");if(Pi.length>0){var Vi=Pi[0];Ti=WebSquare.Elem.api.getElementsByTagName(Vi,"w2:row");for(pi=0;pi<Ti.length;pi++){fi=WebSquare.Elem.api.getElementsByTagName(Ti[pi],"w2:column");var Hi=Yi.rows[pi].getElementsByTagName("td"),ji=a.Z.getDataPrefix("footer_id");for(gi=0;gi<fi.length;gi++){wi=(zi=fi[gi]).getAttribute("id");var zi,Gi="";for(Bi=0;Bi<Hi.length;Bi++)Hi[Bi].getAttribute(ji)===wi&&(Gi=Hi[Bi]);if(xi=!1,Ci&&Ci.hasOwnProperty("footerColID"))xi=-1!==Ci.footerColID.split(",").indexOf(wi);xi?(zi.setAttribute("displayFormat",""),zi.setAttribute("dataType","text")):Gi&&(Gi.getAttribute(Ri)&&Gi.getAttribute(Ri)!=zi.getAttribute("displayFormat")&&zi.setAttribute("displayFormat",Gi.getAttribute(Ri)),Gi.getAttribute(Ei)&&"number"==Gi.getAttribute(Ei)&&Gi.getAttribute(Ei)!=zi.getAttribute("dataType")&&zi.setAttribute("dataType",Gi.getAttribute(Ei)));var Zi;Di=zi.getAttribute("excelFormatter");if(Zi=a.Z.getGlobalFunction(Di,this.scope_id)){Wi=Zi.call(this,wi);zi.setAttribute("excelFormat",Wi)}if("definedFormat"==(Li=zi.getAttribute("excelCellType"))){Si="definedFormat"+this._getDefinedFormatIndex(zi.getAttribute("excelFormat"));zi.setAttribute("excelCellType",Si)}}}}var Ui=[];Ui.push("<vector result='1'>"),Ui.push("<data vectorkey='0'><hashtable>");var Xi=this.element._elementType,Ki="";if(Ki="json"===Xi?WebSquare.xmljs.json2xml(this.element._element,{changeKey:{"w2:select":"w2:column"}}):WebSquare.xml.serialize(this.element._element),Ui.push("<data hashkey='style'>"+Ki+"</data>"),t.dataHandler=t.dataHandler||"",""!=t.dataHandler){
var $i=WebSquare.util.getGlobalFunction(t.dataHandler,this.scope_id);if("function"==typeof $i){var Ji=$i.call(this,this.id);xt=t.separator||",";i='<array><![CDATA[["'+Ji.join('"'+xt+'"')+'"]]]></array>'}}Ui.push("<data hashkey='data'>"+i+"</data>"),(this.startedDisplayNone||0==this.resizeObj.width||0==this.resizeObj.height)&&this.drawFooter(),Ui.push("<data hashkey='groupby' value='"+this.groupbyStatus.grouped+"'/>"),this.groupbyStatus.grouped?(Ui.push("<data hashkey='groupbyStyle'>"+this.getExcelGroupbyStyle()+"</data>"),Ui.push("<data hashkey='groupbyHeaderValue'>"+this.getExcelGroupbyHeaderValue(xt)+"</data>"),Ui.push("<data hashkey='groupbyFooterValue'>"+this.getExcelGroupbyFooterValue(xt)+"</data>"),Ui.push("<data hashkey='groupbyStatusValue'>"+this.getExcelGroupbyStatusValue(xt)+"</data>"),Ui.push("<data hashkey='groupbyStyleData'>"+this.getExcelGroupbyStyleData(t)+"</data>"),Ui.push("<data hashkey='rowNumVisible' value='"+this.options.rowNumVisible+"'/>"),Ui.push("<data hashkey='rowStatusVisible' value='"+this.options.rowStatusVisible+"'/>"),""!=tt&&Ui.push("<data hashkey='groupbyColor' value='"+tt+"'/>"),""!=et&&Ui.push("<data hashkey='groupbyFontName' value='"+et+"'/>"),""!=it&&Ui.push("<data hashkey='groupbyFontSize' value='"+it+"'/>"),""!=ot&&Ui.push("<data hashkey='groupbyFontColor' value='"+ot+"'/>"),a.Z.isEmptyObject(this.groupbyDisplayOptions.rowNumHeader)&&a.Z.isEmptyObject(this.groupbyDisplayOptions.rowStatusHeader)||Ui.push("<data hashkey='rowNone' value='true'/>")):Ui.push("<data hashkey='rowNumVisible' value='"+te+"'/>"),Ui.push("<data hashkey='footer_data'>"+this._getExcelFooterData(xt,d,h,t.footerConvertIndex)+"</data>"),Ui.push("<data hashkey='fileName' value='"+o+"'/>"),Ui.push("<data hashkey='sheetName' value='"+n+"'/>"),Ui.push("<data hashkey='multipleSheet' value='"+c+"'/>"),Ui.push("<data hashkey='stRowIndex' value='"+f+"'/>"),Ui.push("<data hashkey='stColIndex' value='"+b+"'/>"),Ui.push("<data hashkey='removeColumns' value='"+p+"'/>"),Ui.push("<data hashkey='removeHeaderRows' value='"+g+"'/>"),Ui.push("<data hashkey='foldColumns' value='"+m+"'/>"),Ui.push("<data hashkey='headerColor' value='"+y+"'/>"),Ui.push("<data hashkey='headerFontName' value='"+v+"'/>"),Ui.push("<data hashkey='headerFontSize' value='"+w+"'/>"),Ui.push("<data hashkey='headerFontColor' value='"+S+"'/>"),Ui.push("<data hashkey='headerFontBold' value='"+_+"'/>"),Ui.push("<data hashkey='bodyColor' value='"+C+"'/>"),Ui.push("<data hashkey='bodyFontName' value='"+x+"'/>"),Ui.push("<data hashkey='bodyFontSize' value='"+I+"'/>"),Ui.push("<data hashkey='bodyFontColor' value='"+T+"'/>"),""!=k&&Ui.push("<data hashkey='bodyFontBold' value='"+k+"'/>"),Ui.push("<data hashkey='footerColor' value='"+L+"'/>"),Ui.push("<data hashkey='footerFontName' value='"+A+"'/>"),Ui.push("<data hashkey='footerFontSize' value='"+D+"'/>"),Ui.push("<data hashkey='footerFontColor' value='"+W+"'/>"),""!=q&&Ui.push("<data hashkey='footerFontBold' value='"+q+"'/>"),Ui.push("<data hashkey='subTotalColor' value='"+M+"'/>"),Ui.push("<data hashkey='subTotalFontName' value='"+E+"'/>"),Ui.push("<data hashkey='subTotalFontSize' value='"+R+"'/>"),Ui.push("<data hashkey='subTotalFontColor' value='"+N+"'/>"),""!=F&&Ui.push("<data hashkey='subTotalFontBold' value='"+F+"'/>"),te&&(Ui.push("<data hashkey='rowNumHeaderColor' value='"+O+"'/>"),Ui.push("<data hashkey='rowNumHeaderFontName' value='"+B+"'/>"),Ui.push("<data hashkey='rowNumHeaderFontSize' value='"+P+"'/>"),Ui.push("<data hashkey='rowNumHeaderFontColor' value='"+Y+"'/>"),Ui.push("<data hashkey='rowNumBodyColor' value='"+V+"'/>"),Ui.push("<data hashkey='rowNumBodyFontName' value='"+H+"'/>"),Ui.push("<data hashkey='rowNumBodyFontSize' value='"+j+"'/>"),Ui.push("<data hashkey='rowNumBodyFontColor' value='"+z+"'/>"),Ui.push("<data hashkey='rowNumFooterColor' value='"+G+"'/>"),Ui.push("<data hashkey='rowNumFooterFontName' value='"+Z+"'/>"),Ui.push("<data hashkey='rowNumFooterFontSize' value='"+U+"'/>"),
Ui.push("<data hashkey='rowNumFooterFontColor' value='"+X+"'/>"),Ui.push("<data hashkey='rowNumSubTotalColor' value='"+K+"'/>"),Ui.push("<data hashkey='rowNumSubTotalFontName' value='"+$+"'/>"),Ui.push("<data hashkey='rowNumSubTotalFontSize' value='"+J+"'/>"),Ui.push("<data hashkey='rowNumSubTotalFontColor' value='"+Q+"'/>")),Ui.push("<data hashkey='footerDataProvider' value='"+rt+"'/>"),Ui.push("<data hashkey='dataProvider' value='"+st+"'/>"),Ui.push("<data hashkey='userDataXml' value=''>"+lt+"</data>"),Ui.push("<data hashkey='optionParam' value='"+ht+"'/>"),""!=dt&&Ui.push("<data hashkey='bodyWordwrap' value='"+dt+"'/>"),""!=ct&&Ui.push("<data hashkey='subtotalWordwrap' value='"+ct+"'/>"),""!=ut&&Ui.push("<data hashkey='footerWordwrap' value='"+ut+"'/>"),Ui.push("<data hashkey='useEuroLocale' value='"+pt+"'/>"),Ui.push("<data hashkey='numberLocale' value='"+gt+"'/>"),Ui.push("<data hashkey='useHeader' value='"+mt+"'/>"),Ui.push("<data hashkey='useSubTotal' value='"+ft+"'/>"),Ui.push("<data hashkey='useFooter' value='"+bt+"'/>"),Ui.push("<data hashkey='fitToPage' value='"+yt+"'/>"),Ui.push("<data hashkey='landScape' value='"+vt+"'/>"),Ui.push("<data hashkey='fitWidth' value='"+wt+"'/>"),Ui.push("<data hashkey='fitHeight' value='"+St+"'/>"),Ui.push("<data hashkey='scale' value='"+_t+"'/>"),Ui.push("<data hashkey='pageSize' value='"+Ct+"'/>"),Ui.push("<data hashkey='separator' value='"+xt+"'/>"),Ui.push("<data hashkey='subTotalScale' value='"+It+"'/>"),Ui.push("<data hashkey='subTotalRoundingMode' value='"+Tt+"'/>"),Ui.push("<data hashkey='footerScale' value='"+kt+"'/>"),Ui.push("<data hashkey='footerRoundingMode' value='"+Lt+"'/>"),Ui.push("<data hashkey='useStyle' value='"+At+"'/>"),1==Wt&&Ui.push("<data hashkey='setFontSize' value='"+At+"'/>"),Ui.push("<data hashkey='freezePane' value='"+qt+"'/>"),Ui.push("<data hashkey='autoSizeColumn' value='"+Mt+"'/>"),Ui.push("<data hashkey='autoSizeAdjustWith' value='"+Et+"'/>"),Ui.push("<data hashkey='displayGridlines' value='"+Rt+"'/>"),Ui.push("<data hashkey='colMerge' value='"+Nt+"'/>"),Ui.push("<data hashkey='colMergeValue' value='"+Ft+"'/>"),Ui.push("<data hashkey='colMergeTextAlign' value='"+Ot+"'/>"),Ui.push("<data hashkey='useDataFormat' value='"+Bt+"'/>"),""!=Pt&&Ui.push("<data hashkey='useHeaderDataFormat' value='"+Pt+"'/>"),Ui.push("<data hashkey='customToDataType' value='"+Vt+"'/>"),Ui.push("<data hashkey='applyDataFormat' value='"+Yt+"'/>"),Ui.push("<data hashkey='useSubTotalData' value='"+Ht+"'/>"),Ui.push("<data hashkey='useFooterData' value='"+jt+"'/>"),Ui.push("<data hashkey='calcFooter' value='"+zt+"'/>"),Ui.push("<data hashkey='columnMove' value='"+Gt+"'/>"),Ui.push("<data hashkey='columnOrder' value='"+me+"'/>"),""!=Ut&&Ui.push("<data hashkey='columnMoveWithSubTotal' value='"+Ut+"'/>"),""!=Xt&&Ui.push("<data hashkey='columnMoveWithFooter' value='"+Xt+"'/>"),Ui.push("<data hashkey='oddRowBgColor' value='"+Kt+"'/>"),Ui.push("<data hashkey='evenRowBgColor' value='"+$t+"'/>"),Ui.push("<data hashkey='indent' value='"+Jt+"'/>"),Ui.push("<data hashkey='rowNumHeaderValue' value='"+Qt+"'/>"),Ui.push("<data hashkey='startRowNumber' value='"+ee+"'/>"),Ui.push("<data hashkey='bodyNumberDefaultValue' value='"+ie+"'/>"),Ui.push("<data hashkey='numberToText' value='"+oe+"'/>"),Ui.push("<data hashkey='rowHeight' value='"+se+"'/>"),re&&"object"==(0,l.A)(re)&&(re=JSON.stringify(re)),Ui.push("<data hashkey='headerRowHeight' value='"+re+"'/>"),Ui.push("<data hashkey='pwd' value='"+ne+"'/>"),Ui.push("<data hashkey='useImage' value='"+le+"'/>"),Ui.push("<data hashkey='headerAutoFilter' value='"+he+"'/>"),Ui.push("<data hashkey='filterRowIndex' value='"+de+"'/>"),Ui.push("<data hashkey='mergeCell' value='"+ce+"'/>"),Ui.push("<data hashkey='noMerge' value='"+ue+"'/>"),At&&Ui.push("<data hashkey='styleData'><array><![CDATA[["+this._getExcelStyle(t)+"]]]></array></data>"),Ht&&Ui.push("<data hashkey='subtotalData'><array><![CDATA[["+this._getExcelSubtotalData(xt)+"]]]></array></data>")
;var Qi="",to=t.mergeCellHeaderInfo||"";ce&&(ft=a.Z.getBoolean(ft),Qi=this.getMergeAll(p,ft)),Ui.push("<data hashkey='mergeCellInfo'><array><![CDATA[["+Qi+"]]]></array></data>"),Ui.push("<data hashkey='mergeCellHeaderInfo'><array><![CDATA[["+to+"]]]></array></data>"),Ui.push("<data hashkey='openFile' value='"+fe+"'/>"),Ui.push("<data hashkey='macroFileName' value='"+be+"'/>"),Ui.push("<data hashkey='useMacro' value='"+ye+"'/>"),Ui.push("<data hashkey='showDialog' value='"+ve+"'/>"),Ui.push("<data hashkey='dialogFilter' value='"+we+"'/>"),Ui.push("<data hashkey='keepType' value='"+Se+"'/>"),Ui.push("<data hashkey='lazyInfoArr' value='"+Ce+"'/>"),Ui.push("<data hashkey='decimal' value='"+xe+"'/>"),""!=Ie&&Ui.push("<data hashkey='sameSite' value='"+Ie+"'/>"),Ui.push("<data hashkey='customProvider' value='"+Te+"'/>"),Ui.push("<data hashkey='customProviderIndex' value='"+ke+"'/>"),Ui.push("<data hashkey='rowAccessWindowSize' value='"+Le+"'/>"),Ui.push("<data hashkey='trim' value='"+Ae+"'/>"),""!=Me&&Ui.push("<data hashkey='innerBorder' value='"+Me+"'/>"),""!=(qe=qe||this._getMsaName()||"")&&(ge="true"),Ui.push("<data hashkey='useXHR' value='"+ge+"'/>"),Ui.push("<data hashkey='desc' value='"+De+"'/>"),""!=We&&Ui.push("<data hashkey='footerTop' value='"+We+"'/>"),""!=qe&&Ui.push("<data hashkey='msaName' value='"+qe+"'/>"),Ee.chartName&&(Ui.push("<data hashkey='c_chartName' value='"+Re+"'/>"),Ui.push("<data hashkey='c_chartType' value='"+Ne+"'/>"),Ui.push("<data hashkey='c_title' value='"+Fe+"'/>"),Ui.push("<data hashkey='c_xTitle' value='"+Oe+"'/>"),Ui.push("<data hashkey='c_yTitle' value='"+Be+"'/>"),Ui.push("<data hashkey='c_startRowIndex' value='"+Pe+"'/>"),Ui.push("<data hashkey='c_startColIndex' value='"+Ye+"'/>"),Ui.push("<data hashkey='c_endRowIndex' value='"+Ve+"'/>"),Ui.push("<data hashkey='c_endColIndex' value='"+He+"'/>"),Ui.push("<data hashkey='c_serAxis' value='"+je+"'/>"),Ui.push("<data hashkey='c_catAxis' value='"+ze+"'/>"),Ui.push("<data hashkey='c_catAxisStartX' value='"+Ze+"'/>"),Ui.push("<data hashkey='c_catAxisStartY' value='"+Ue+"'/>"),Ui.push("<data hashkey='c_catAxisEndX' value='"+Xe+"'/>"),Ui.push("<data hashkey='c_catAxisEndY' value='"+Ke+"'/>"),Ui.push("<data hashkey='c_serAxisStartX' value='"+Je+"'/>"),Ui.push("<data hashkey='c_serAxisStartY' value='"+Qe+"'/>"),Ui.push("<data hashkey='c_serAxisEndX' value='"+ti+"'/>"),Ui.push("<data hashkey='c_serAxisEndY' value='"+ei+"'/>"),Ui.push("<data hashkey='c_dataAxisStartX' value='"+oi+"'/>"),Ui.push("<data hashkey='c_dataAxisStartY' value='"+si+"'/>"),Ui.push("<data hashkey='c_dataAxisEndX' value='"+ri+"'/>"),Ui.push("<data hashkey='c_dataAxisEndY' value='"+ai+"'/>"),Ui.push("<data hashkey='c_catGridLines' value='"+ni+"'/>"),Ui.push("<data hashkey='c_serGridLines' value='"+li+"'/>"),Ui.push("<data hashkey='c_legend' value='"+hi+"'/>"),Ui.push("<data hashkey='c_legendPosition' value='"+di+"'/>")),null!=e&&void 0!==e||(e=[]),Ui.push("<data hashkey='information'><vector result='"+e.length+"'>");for(pi=0;pi<e.length;pi++){var eo=e[pi];for(var io in Ui.push("<data vectorkey='"+pi+"'><hashtable>"),eo)"text"==io?Ui.push("<data hashkey='"+io+"' value='"+WebSquare.xml.encode(eo[io])+"'/>"):Ui.push("<data hashkey='"+io+"' value='"+eo[io]+"'/>");Ui.push("</hashtable></data>")}if(Ui.push("</vector></data>"),0!=t.multiexcel)return Ui.push("<data hashkey='splitProvider' value='"+at+"'/>"),Ui.push("<data hashkey='providerRequestXml' value=''>"+nt+"</data>"),Ui.push("</hashtable></data>"),Ui.push("</vector>"),Ui;Ui.push("<data hashkey='splitProvider' value='"+at+"'/>"),Ui.push("<data hashkey='providerRequestXml' value=''>"+nt+"</data>"),Ui.push("</hashtable></data>"),Ui.push("</vector>");var oo=Ui.join("");if(-1!=ae&&ae<a.Z.getByteLengthUtf8(oo)){var so=WebSquare.language.getMessage("Grid_warning9",ae)||"The data size has exceeded the limit.\n The current limit is : "+ae+" byte"
;return!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm?this.hideDownloadLayer():WebSquare.layer.hideProcessMessage({scope:this.scope_id||""}),void alert(so)}if(""!=qe){var ro="";""!=pe&&(ro=pe),pe=r.I.getServletURL(this,qe,"xmlToExcel2.wq",ro),t.useXHR=!0,t.userExcel=!0}""==pe&&(pe=this.options.advancedExcelDownloadURL),t.scopeId=this.scope_id||"",r.I.excelDownload(pe,oo,"post",t),this._dataList.options.depthColumn&&"true"==t.spanAll&&(this.drilldown.statusArr=this.orgStatusArr,this._dataList.filteredRowIndexArr=this.orgFilteredRowIndexArr,this.showDepth=this.orgShowDepth,this.orgStatusArr=null,this.orgFilteredRowIndexArr=null,this.orgShowDepth=null,this.drawData(this.rowIndex,0)),this.xmlData=null,!1===t.showProcess?WebSquare.getBody().hideModal(!0):!0===t.showConfirm&&this.hideDownloadLayer()}catch(t){throw t}},q.prototype.saveFile=function(t){var e=t.type||"xml",i=t.fileName||"gridView",o=t.extension||"xml",s=t.sameSite||"",a=[];a.push("<vector result='1'>"),a.push("<data vectorkey='0'><hashtable>"),a.push("<data hashkey='type' value='"+e+"'/>"),a.push("<data hashkey='fileName' value='"+i+"'/>"),a.push("<data hashkey='extension' value='"+o+"'/>"),a.push("<data hashkey='sameSite' value='"+s+"'/>"),a.push("</hashtable></data>"),a.push("</vector>");var n=a.join("");n+="\x3c!----VALUESTR----!>",n+=WebSquare.xml.serialize(this.getAllXML());var l=t.action||WebSquare.baseServletURI+"gridToFile.wq";r.I.excelDownload(l,n,"post",t)},q.prototype.getExcelExpression=function(t){var e,i="";return void 0!==t.type&&void 0!==t.id&&void 0!==t.attr&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",r.I._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",r.I._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0]),void 0!==e&&(i=this._getAttribute(e,t))),i},q.prototype.setExcelExpression=function(t){var e;void 0!==t.type&&void 0!==t.id&&void 0!==t.excelExpression&&("header"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"header",r.I._XML_NAMESPACE.W2)[0]:"body"==t.type?e=WebSquare.Elem.api.getElementsByTagName(this.element,"gBody",r.I._XML_NAMESPACE.W2)[0]:"footer"==t.type&&(e=WebSquare.Elem.api.getElementsByTagName(this.element,"footer",r.I._XML_NAMESPACE.W2)[0]),void 0!==e&&this._setAttribute(e,t))},q.prototype._getAttribute=function(t,e){for(var i="",o=WebSquare.Elem.api.getElementsByTagName(t,"w2:row"),s=0;s<o.length;s++)for(var r=WebSquare.Elem.api.getElementsByTagName(o[s],"w2:column"),a=0;a<r.length;a++){var n=r[a];if(n.getAttribute("id")==e.id){i=n.getAttribute("excelExpression");break}}return i},q.prototype._setAttribute=function(t,e){for(var i=WebSquare.Elem.api.getElementsByTagName(t,"w2:row"),o=0;o<i.length;o++)for(var s=WebSquare.Elem.api.getElementsByTagName(i[o],"w2:column"),r=0;r<s.length;r++){var a=s[r];if(a.getAttribute("id")==e.id){a.setAttribute("excelExpression",e.excelExpression);break}}},q.prototype.cancleDownload=function(){clearTimeout(this.excelTime),this.hideDownloadLayer()},q.prototype.hideDownloadLayer=function(){window.gridExceldownloadIframe.style.display="none",this.excelOptions=null,this.excelInfoArr=null,this.excelFinalStr=null,window.downloadGridId=null,WebSquare.getBody().hideModal(!0)},q.prototype.saveBigExcelFile=function(t,e,i){i&&(t.rowsByN=i),t.massStorage=!0,this.advancedExcelDownload(t,e)},q.prototype._getExcelStyle=function(t){try{var e={},i={},o={},r={},n={},l=this.getColumnCount();if(1==t.useClass)for(var h=0;h<l;h++){var d=(v=this.getCellInfo(h)).options.className;if(d){var c=document.querySelector("."+d);if(c){
var u=WebSquare.style.getComputedStyle(c,"text-align"),p=WebSquare.style.getComputedStyle(c,"background-color"),g=WebSquare.style.getComputedStyle(c,"color"),m=WebSquare.style.getComputedStyle(c,"font-weight"),f=WebSquare.style.getComputedStyle(c,"font-family"),b=WebSquare.style.getComputedStyle(c,"font-size"),y=a.Z.getStyleFromCssStr(d,["backgroundColor"]);y&&y.backgroundColor||c.style.backgroundColor||(p=p.replace("rgba(0, 0, 0, 0)","")),void 0===e[h]&&(e[h]={}),""!=u&&(e[h]["text-align"]=u),""!=p&&(e[h]["background-color"]=p),""!=g&&(e[h].color=g),""!=m&&(e[h]["font-weight"]=m),""!=f&&(e[h]["font-family"]=f),""!=b&&(e[h]["font-size"]=b),"underline"!=(B=WebSquare.style.getComputedStyle(c,"text-decoration"))&&"line-through"!=B||(e[h]["text-decoration"]=B)}}}for(var h in this.columnStyleValueObj){var v,w={};for(var S in this.columnStyleValueObj[h])"style"!=S&&(w[S]=this.columnStyleValueObj[h][S]);if(v=this.getCellInfo(parseInt(h,10)))"underline"!=(B=this.getColumnStyleValue(parseInt(h,10),"text-decoration"))&&"line-through"!=B||(w["text-decoration"]=B);if(v&&v.options.textAlign){var _="";""==(_=this.getColumnStyleValue(parseInt(h,10),"text-align"))&&""==(_=v.options.textAlign)&&(_="center"),w["text-align"]=_}if(void 0===e[h])e[h]=w;else for(var S in w)e[h][S]=w[S]}for(h=0;h<this.rowStyleArr.length;h++)if(this.rowStyleArr[h]){w={};for(var S in this.rowStyleValueObj[this.rowStyleArr[h]])"style"!=S&&(w[S]=this.rowStyleValueObj[this.rowStyleArr[h]][S]);var C=this.getDisplayRowIndex(h);isNaN(C)||(i[C]=w)}for(var x in this.cellStyleArr)if(this.cellStyleArr[x]&&!isNaN(x)){w={};var I=parseInt(x/this.oneRowDataLength,10),T=(C=this.getDisplayRowIndex(I),x%this.oneRowDataLength);for(var S in this.cellStyleValueObj[this.cellStyleArr[x]])"style"!=S&&this.cellStyleValueObj[this.cellStyleArr[x]][S]&&(w[S]=this.cellStyleValueObj[this.cellStyleArr[x]][S]);o[C+","+T]=w}var k=function(t,e){t.backgroundColor&&(e["background-color"]=t.backgroundColor),t.color&&(e.color=t.color),t.textAlign&&(e["text-align"]=t.textAlign),t.fontSize&&(e["font-size"]=t.fontSize),t.fontWeight&&(e["font-weight"]=t.fontWeight),t.fontFamily&&(e["font-family"]=t.fontFamily),"underline"!=t["text-decoration"]&&"line-through"!=t["text-decoration"]||(e["text-decoration"]=t["text-decoration"]),t.borderLeft&&(e["border-left"]=t.borderLeft),t.borderRight&&(e["border-right"]=t.borderRight)};if(1==t.useClass){for(h=0;h<this.cellClassArr.length;h++)if(this.cellClassArr[h]){w={},I=parseInt(h/this.oneRowDataLength,10),C=this.getDisplayRowIndex(I),T=h%this.oneRowDataLength;var L=WebSquare.util.getStyleFromCssStr(this.cellClassArr[h],["backgroundColor","color","textAlign","fontSize","fontWeight","fontFamily","text-decoration","borderLeft","borderRight"]);o[C+","+T]&&(w=o[C+","+T]),L&&k(L,w),0!==Object.keys(w).length&&(o[C+","+T]=w)}for(h=0;h<this.rowClassArr.length;h++)if(this.rowClassArr[h]){w={},C=this.getDisplayRowIndex(h),L=WebSquare.util.getStyleFromCssStr(this.rowClassArr[h],["backgroundColor","color","textAlign","fontSize","fontWeight","fontFamily","text-decoration","borderLeft","borderRight"]);i[C]&&(w=i[C]),L&&k(L,w),0!==Object.keys(w).length&&(i[C]=w)}}if(this.options.disabledBackgroundColor||this.options.disabledFontColor){w={};this.options.disabledBackgroundColor&&(w["background-color"]=this.options.disabledBackgroundColor),this.options.disabledFontColor&&(w.color=this.options.disabledFontColor);l=this.getColumnCount();var A=this.getRowCount(),D=!(!this.isDrillDown||!this._dataList.options.depthColumn);for(h=0;h<l;h++)for(S=0;S<A;S++)this._getEditDisabled(h,S,D)&&(o[h+","+S]?(this.options.disabledBackgroundColor&&(o[h+","+S]["background-color"]=this.options.disabledBackgroundColor),this.options.disabledFontColor&&(o[h+","+S].color=this.options.disabledFontColor)):o[h+","+S]=w)}var W=a.Z.getDataPrefix("header_id"),q="",M=this.getDomList("head_tds","th",this.getElementById(this.id+"_head_table"));for(h=this.defaultColCnt;h<M.length;h++){
var E="",R=M[h].id.replace(this.id+"_",""),N=this.headerCellStyleValueObj[R];q=N&&N["background-color"]?N["background-color"]:t.headerColor?t.headerColor:WebSquare.style.getStyle(M[h],"background-color"),E+="color:"+WebSquare.style.getStyle(M[h],"color")+";",E+="background-color:"+q+";",E+="font-weight:"+WebSquare.style.getStyle(M[h],"font-weight")+";",E+="font-family:"+WebSquare.style.getStyle(M[h],"font-family")+";",E+="text-align:"+WebSquare.style.getStyle(M[h],"text-align")+";","underline"!=(B=WebSquare.style.getStyle(M[h],"text-decoration"))&&"line-through"!=B||(E+="text-decoration:underline;"),r[M[h].getAttribute(W)]=E}if(this.hasFooter){var F=a.Z.getDataPrefix("footer_id"),O=this.getDomList("foot_tds","th",this.getElementById(this.id+"_foot_table"));for(h=this.defaultColCnt;h<O.length;h++){var B;E="";E+="color:"+WebSquare.style.getStyle(O[h],"color")+";",E+="background-color:"+WebSquare.style.getStyle(O[h],"background-color")+";",E+="font-weight:"+WebSquare.style.getStyle(O[h],"font-weight")+";",E+="font-family:"+WebSquare.style.getStyle(O[h],"font-family")+";",E+="text-align:"+WebSquare.style.getStyle(O[h],"text-align")+";","underline"!=(B=WebSquare.style.getStyle(O[h],"text-decoration"))&&"line-through"!=B||(E+="text-decoration:underline;"),n[O[h].getAttribute(F)]=E}}return JSON.stringify({row:i,col:e,cell:o,header:r,footer:n})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getExcelSubtotalData=function(t){t||(t=",");var e=[];e.push('"');for(var i=a.Z.getDataPrefix("colMerge"),o=a.Z.getDataPrefix("value"),s=this.getDataLength(),r=0;r<s;r++){var n=r;for(var l in this.subtotalTableList){var h=this.dataList._getCellData(n,l),d=h+"_12";if(n<s-1)d=this.dataList._getCellData(n+1,l);if(h!=d){var c=this.subtotalTableList[l],u=this.subtotalDataArr[l+"_"+h];null==u&&(u=this.getSubtotalData(c,l,h,n));for(var p="",g=c.getElementsByTagName("td"),m=0;m<g.length;m++){var f=g[m],b=f.getAttribute("id");if(!b.startsWith("_headerRowNumber")&&!b.startsWith("_headerRowStatus")){if(null!=u[b])p=u[b];else if("true"==f.getAttribute(i))p="";else{p=null!=(p=f.getAttribute(o))?p:""}e.push(p),e.push('"'+t+'"')}}}}}return e[e.length-1]='"',e.join("")},q.prototype.getExcelGroupbyStyle=function(){try{if(this.groupbyStatus.grouped){var t={rowNumHeader:{type:"H",index:2},rowNumFooter:{type:"F",index:2},rowStatusHeader:{type:"H",index:3},rowStatusFooter:{type:"F",index:3},groupbyHeader:{type:"H",index:-1},groupbyFooter:{type:"F",index:-1}},e=4,i=4,o=!1,r=!1,a=[],n=[],l=[],h={};a.push("<w2:groupby>"),n.push("<w2:groupbyHeader>"),l.push("<w2:groupbyFooter>"),n.push("<w2:row>"),l.push("<w2:row>");var d=this.defaultColCnt+this.getColCnt(),c=0,u=0;this.options.rowNumVisible&&(this.groupbyDisplayOptions.rowNumHeader&&(this.groupbyDisplayOptions.rowNumHeader.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowNumHeader.colSpan,10)||1)<=d&&(h.rowNumHeader=this.groupbyDisplayOptions.rowNumHeader)),this.groupbyDisplayOptions.rowNumFooter&&(this.groupbyDisplayOptions.rowNumFooter.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowNumFooter.colSpan,10)||1)<=d&&(h.rowNumFooter=this.groupbyDisplayOptions.rowNumFooter))),this.options.rowStatusVisible&&(this.groupbyDisplayOptions.rowStatusHeader&&(this.groupbyDisplayOptions.rowStatusHeader.hidden||(u+=parseInt(this.groupbyDisplayOptions.rowStatusHeader.colSpan,10)||1)<=d&&(h.rowStatusHeader=this.groupbyDisplayOptions.rowStatusHeader)),this.groupbyDisplayOptions.rowStatusFooter&&(this.groupbyDisplayOptions.rowStatusFooter.hidden||(c+=parseInt(this.groupbyDisplayOptions.rowStatusFooter.colSpan,10)||1)<=d&&(h.rowStatusFooter=this.groupbyDisplayOptions.rowStatusFooter))),h.groupbyHeader=[],h.groupbyFooter=[];for(var p=this.groupbyDisplayOptions.groupbyHeader,g=0;g<p.length;g++)p[g].hidden||(u+=parseInt(p[g].colSpan,10)||1,h.groupbyHeader[g]=p[g]);var m=this.groupbyDisplayOptions.groupbyFooter;for(g=0;g<m.length;g++)m[g].hidden||(c+=parseInt(m[g].colSpan,10)||1,h.groupbyFooter[g]=m[g]);if(e<d){var f=d-u
;for(g=0;g<f;g++)h.groupbyHeader.push({temp:!0})}if(i<d)for(f=d-c,g=0;g<f;g++)h.groupbyFooter.push({temp:!0});for(var b in this.groupbyStatus.excelDisplayOptions=h,h){var y,v=[];switch(b){case"rowNumHeader":case"rowNumFooter":case"rowStatusHeader":case"rowStatusFooter":v.push("<w2:column");var w=h[b],S=!1;for(var _ in w)if("align"==_||"hidden"==_||"colSpan"==_){if("hidden"==_){S=!0;break}v.push(" "+_+'="'+w[_]+'"'),"rowNumHeader"!=b&&"rowNumFooter"!=b||"colspan"==_.toLowerCase()&&w[_]>=this.defaultColCnt+this.getColCnt()&&("rowNumHeader"==b?o=!0:r=!0)}if(S)break;if("rowStatusHeader"==b&&o)break;if("rowStatusFooter"==b&&r)break;b.match("rowNum")?v.push(' type="rowNum"'):b.match("rowStatus")&&v.push(' type="rowStatus"'),v.push("/>"),y=t[b];break;case"groupbyHeader":case"groupbyFooter":S=!1;var C=h[b];if(C.length>0){var x=0,I=0,T=0,k=0,L=this.htmlInfo?this.htmlInfo.body.rowArr:this.struct.body.rowArr;for(g=0;g<L.length;g++){for(var A=L[g],D=0;D<A.length;D++){var W=A[D];x+=parseInt(W.colSpan,10)||1}I<x&&(I=x),x=0}var q;(q=[])[I-1]=void 0;for(g=0;g<C.length;g++){var M=[];for(var _ in M.push("<w2:column"),C[g])if("align"==_||"hidden"==_||"colSpan"==_||"rowSpan"==_||"displayFormat"==_){if("hidden"==_){M.pop();break}M.push(" "+_+'="'+C[g][_]+'"')}M.push("/>"),v.push(M.join(""));var E=parseInt(C[g].colSpan,10)||1,R=parseInt(C[g].rowSpan,10)||1;if(0===k){if(void 0===q[T])if(E>1)for(var N=0;N<E;N++)q[T+N]=R;else q[T]=R}else{q[T]>1?q[T]-=1:q[T]=R;for(var F=T+1;1!==q[F]&&F<I;)q[F]-=1,T+=1,F+=1}I<=(T+=E)&&g!=C.length-1&&(v.push("</w2:row><w2:row>"),T=0,k+=1)}}y=t[b]}y&&("H"==y.type?-1==y.index?(n[e]=v.join(""),e++):n[y.index]=v.join(""):"F"==y.type&&(-1==y.index?(l[i]=v.join(""),i++):l[y.index]=v.join(""))),y=null}return n.push("</w2:row>"),l.push("</w2:row>"),n.push("</w2:groupbyHeader>"),l.push("</w2:groupbyFooter>"),a.push(n.join("")),a.push(l.join("")),a.push("</w2:groupby>"),a.join("")}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getExcelGroupbyHeaderValue=function(t){this.groupbyStatus.headerValueObj={},this.getAllGroupbyHeaderValueObj();var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("header"==o.type){for(var s=this.groupbyStatus.headerValueObj[o.groupId],r=0;r<s.length;r++)null!=s[r]&&(e.push('"'+s[r]+'"'),r<s.length-1&&e.push(t));s.length>0&&e.push(t)}}return e.pop(),e.push("]"),e.push("]]></array>"),e.join("")},q.prototype.getExcelGroupbyFooterValue=function(t){this.groupbyStatus.footerValueObj={},this.getAllGroupbyFooterValueObj();var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("footer"==o.type){for(var s=this.groupbyStatus.footerValueObj[o.groupId],r=0;r<s.length;r++)null!=s[r]&&(e.push('"'+s[r]+'"'),r<s.length-1&&e.push(t));s.length>0&&e.push(t)}}return e.pop(),e.push("]"),e.push("]]></array>"),e.join("")},q.prototype.getExcelGroupbyStatusValue=function(t){var e=[];e.push("<array><![CDATA["),e.push("[");for(var i=0;i<this.groupbyStatus.groupedRowIndexArr.length;i++){var o=this.groupbyStatus.groupedRowIndexArr[i];if("number"==typeof o)e.push('"0B"');else{switch(o.type){case"header":var s='"'+o.depth+'H"';break;case"footer":s='"'+o.depth+'F"'}e.push(s)}i<this.groupbyStatus.groupedRowIndexArr.length-1&&e.push(t)}return e.push("]"),e.push("]]></array>"),e.join("")},q.prototype.getExcelGroupbyStyleData=function(t){var e=this.getElementById(this.id+"_body_tbody").childNodes,i=[];i.push("<array><![CDATA["),i.push("[");for(var o=0;o<this.groupbyStatus.groupedRowIndexArr.length;o++){var s=this.groupbyStatus.groupedRowIndexArr[o];if("number"!=typeof s){var r=e[s.index];if(!i[s.depth+2]){var a,n='"';for(var l in 0!=o&&(n=',"'),this.groupbyStatus.excelDisplayOptions){var h=!1;switch(l){case"rowNumHeader":h=!0,a=0;break;case"rowStatusHeader":h=!0,a=this.defaultColCnt-1;break;case"groupbyHeader":h=!0,
a=this.defaultColCnt}if(h)break}var d=r.getElementsByTagName("TD")[a];""==t.groupbyColor&&(n+="background-color:"+WebSquare.style.getStyle(d,"background-color")+";"),""==t.groupbyFontSize&&(n+="font-size:"+WebSquare.style.getStyle(d,"font-size")+";"),""==t.groupbyFontColor&&(n+="color:"+WebSquare.style.getStyle(d,"color")+";"),n+="font-weight:"+WebSquare.style.getStyle(d,"font-weight")+";",""==t.groupbyFontName&&(n+="font-family:"+WebSquare.style.getStyle(d,"font-family")+";"),n+='"',i[s.depth+2]=n}}}return i.push("]"),i.push("]]></array>"),i.join("")},q.prototype.getAllGroupbyHeaderValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumHeader),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusHeader),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyHeader.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyHeader[o]),i++}},q.prototype.getAllGroupbyFooterValueObj=function(){for(var t=0;t<this.groupbyStatus.groupedRowIndexArr.length;t++)if("number"!=typeof this.groupbyStatus.groupedRowIndexArr[t]){var e=this.groupbyStatus.groupedRowIndexArr[t],i=0;this.options.rowNumVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowNumFooter),i++),this.options.rowStatusVisible&&(this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.rowStatusFooter),i++);for(var o=0;o<this.groupbyStatus.excelDisplayOptions.groupbyFooter.length;o++)this.setGroupbyData(e,i,this.groupbyStatus.excelDisplayOptions.groupbyFooter[o]),i++}},q.prototype.getGroupbyData=function(t){try{if(this.options.groupbyZone&&this.groupbyStatus&&this.groupbyStatus.grouped)return!1===t?this.groupbyStatus.groupbyOptions:JSON.parse(this.groupbyStatus.groupbyOptions)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setGroupbyData=function(t,e,i){try{var o,r,a=(i=i||{}).value||"",n=i.inputType||"",l=i.depthVisible||!1,h=i.expression||"",d=i.hidden?"none":"",c=i.displayFormatType||"text",u=i.displayFormat||"",p=i.displayFormatter||null;if(n)switch((u||p)&&(o=new WebSquare.format.createFormatter(c,u,p,null,null,null,this.scope_id,this.id)),n){case"toggleButton":r="open"==t.status?"-":"+";break;case"expression":if(h){var g=this.groupbyInfo[t.groupId].header;g.colIndex=e;var m=0;if("open"==g.status){for(var f,b=g.index;b<this.groupbyStatus.groupedRowIndexArr.length;b++){if("footer"==(y=this.groupbyStatus.groupedRowIndexArr[b]).type&&y.depth==g.depth){f=y.index;break}}if(!f){for(b=g.index+1;b<this.groupbyStatus.groupedRowIndexArr.length;b++){var y;if("header"==(y=this.groupbyStatus.groupedRowIndexArr[b]).type&&y.depth==g.depth){f=y.index;break}}f||(f=this.groupbyStatus.groupedRowIndexArr.length-1)}m=this.groupExpression(this.groupbyStatus.groupedRowIndexArr,g.index,f,h,g)}else m=this.groupExpression(g.closedChildArr,0,g.closedChildArr.length-1,h,g);if(o&&(m=o.format(m)),"string"==typeof(r=m)&&(r.match("w2grid_minus")||r.match("w2grid_plus"))){var v=r.lastIndexOf("</span>");v>-1&&(v+=7,r=r.slice(v),"open"==t.status?r="-||"+r:"closed"==t.status&&(r="+||"+r))}}}if(l&&(r=t.groupId),a&&(o&&(a=o.format(a)),r=a),!r){r="";b=0;for(var w in i)b++;0==b&&(d="none")}"none"!=d&&("header"==t.type?(this.groupbyStatus.headerValueObj[t.groupId]||(this.groupbyStatus.headerValueObj[t.groupId]=[]),this.groupbyStatus.headerValueObj[t.groupId][e]=r):"footer"==t.type&&(this.groupbyStatus.footerValueObj[t.groupId]||(this.groupbyStatus.footerValueObj[t.groupId]=[]),this.groupbyStatus.footerValueObj[t.groupId][e]=r))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getTotalRow=function(){return this.dataList.getTotalRow()},q.prototype.getTotalCol=function(){return this.oneRowDataLength},q.prototype.editEndBeforeGetData=function(){
this.editedCell&&this.rollbackCommitFlag&&1==this.options.rollbackCommit&&(1==this.options.moveKeyEditModeAll&&1==this.checkScrollEnd||(this.rollbackCommitFlag=!1,this.editedCell.handleEndEdit(),this.rollbackCommitFlag=!0))},q.prototype.getExtraDataObj=function(t,e,i){var o=this.extraData;return"grid"==t?o.grid:"row"==t?(o.row[e]||(o.row[e]={}),o.row[e]):"col"==t?(o.col[e]||(o.col[e]={}),o.col[e]):"cell"==t?(o.cell[e]||(o.cell[e]=[]),o.cell[e][i]||(o.cell[e][i]={}),o.cell[e][i]):null},q.prototype.finalize=function(){try{for(var t in null!=this.tempDiv&&null!=this.tempDiv.parentNode&&(this.tempDiv.innerHTML=""),null!=this.tempTr&&null!=this.tempTr.parentNode&&(this.tempTr.innerHTML=""),n.q.removeCheckResize(this.uuid),a.Z.clearInterval(this.id+"_dragSelectAutoScroll"),r.I.clearTimer(this.id+"initializeEvent"),r.I.clearTimer(this.id+"_autofit"),a.Z.clearTimeout(this.id+"_displayFixedColumnLine"),this.dom)this._removeDom(t);for(var e in this._dataList&&this._dataList.childCompHash&&delete this._dataList.childCompHash[this.id],null!=this._manager&&this._manager.destroy(),null!=this.customFilter&&this.customFilter.remove(),this.cellInfoHash){var i=this.cellInfoHash[e];i&&i.comp&&"function"==typeof i.comp.remove&&i.comp.remove()}this.orgSubtotalHeightArr=[]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setFixedColumn=function(t){try{t=parseInt(t,10),t=isNaN(t)?0:t;var e=0;if(!(t<this.getColumnCount()))return;if(t>0){this.getFixedColumnLastIndex();for(var i=0;i<=t+this.defaultColCnt;i++)this.hiddenList[i]||(e+=this.colWidthList[i])}if(e>this.getElementById(this.id+"_dataLayer").offsetWidth)return;if(this.options.fixedColumn>0){var o=this.getColumnCount();for(i=0;i<this.lastIndex+1;i++){var r=this.data_td_list[i*o+this.options.fixedColumn];r&&this.removeClass(r,"w2grid_fixedColumn");var a=parseInt(this.options.fixedColumn);if(t<a)for(var n=t;n<a;n++){var l=this.data_td_list[i*o+n];l&&this.removeClass(l,"w2grid_fixedColumn_td")}}}this.options.fixedColumn=t,this.options.fixedColumnScrollReset&&this.setScrollLeft(0),this.arrangeOverflowXScroll(),this.displayFixedColumnLine()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setFixedRightColumn=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRightColumn>0)for(var e=this.getColumnCount(),i=this.getFixedRightColumnLastIndex()-this.defaultColCnt,o=0;o<this.lastIndex+1;o++){var r=this.data_td_list[o*e+i];if(r&&this.removeClass(r,"w2grid_fixedRightColumn"),i<e-t)for(var a=e-t-1;a>=i;a--){var n=this.data_td_list[o*e+a];n&&this.removeClass(n,"w2grid_fixedRightColumn_td")}}this.options.fixedRightColumn=t,this.arrangeOverflowXScroll(),this._handleScrollX()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.fixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.options.fixedRow-1)];e&&this.removeClass(e,"w2grid_fixedRow")}this.options.fixedRow=t,this.applyRowStyleOptions(t-1)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setLastFixedRow=function(t){try{if(t=parseInt(t,10),t=isNaN(t)?0:t,this.options.lastFixedRow>0){var e=this.dataRowList[this.oneRowLength*(this.lastIndex-this.options.lastFixedRow)];e&&this.removeClass(e,"w2grid_lastFixedRow")}this.options.lastFixedRow=t,this.drawData(this.rowIndex,this.lastIndex-t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getOverflowX=function(){return this.options.overflowX},q.prototype.getOverflowY=function(){return this.options.overflowY},q.prototype.getColumnVisible=function(t){try{var e=t,i=(t=this.getColumnIndex(t),r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/getColumnVisible/@useRealColIndex"));if(a.Z.getBoolean(i)){if("number"!=typeof e){for(var o=this.getCellInfo(e),n=this._getRealColIndex("body",e),l=n+this.defaultColCnt,h=!this.hiddenList[l],d=0;d<o.options.colSpan;d++)h=!this.hiddenList[l+d]||h;return 0===n||n?h:void p.v.printLog("[getColumnVisible] Invalid column index provided.")}
t=e%this.columnOrder.length;for(var c=0;c<this.columnOrder.length;c++)if(this.columnOrder[c]==t){t=c;break}if(e>this.columnOrder.length||c===this.columnOrder.length)return void p.v.printLog("[getColumnVisible] Invalid column index provided.")}return!this.hiddenList[this.defaultColCnt+t]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getColumnWidth=function(t,e){try{var i=e?this.defaultColCnt:0;if(t=this.getColumnIndex(t)+i,this.colWidthList[t])return this.colWidthList[t]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnWidth=function(t,e,i){try{if(!this.render)return void p.v.printLog("[setColumnWidth] "+this.options.pluginName+" is not initialized yet");if(0===this.render.offsetHeight&&0===this.render.offsetWidth){var o=!1;if("string"==typeof t&&(o=!0,t=this.getDisplayColumnIndex(t)),this.delayedDrawObj.newColumnOrder)for(var r=0;r<this.delayedDrawObj.newColumnOrder.length;r++)if(this.delayedDrawObj.newColumnOrder[r]==t){t=o?this.delayedDrawObj.newColumnOrder[r]:r;break}}else t=this.getDisplayColumnIndex(t);var a=this.colWidthList[t],n=!0===i?0:this.defaultColCnt;if(this.colWidthList[t]){this.__bResizeObj&&(this.__bResizeObj.isColumnResizing=!0),this.options.autoFit&&!this.hiddenList[t+n]?(this.autoFitColWidthList=null,this._setAutoFit({exceptCol:n+t,exceptWidth:e})):this._setColumnWidth(n+t,e),this.__bResizeObj&&(this.__bResizeObj.isColumnResizing=!1);var l=WebSquare.Elem.api.getElementsByTagName(this.element,"w2:header")[0],h=WebSquare.Elem.api.getElementsByTagName(l,"w2:column");for(r=0;r<h.length;r++){var d=h[r],c=d.getAttribute("id");if(this.getHeaderIndex(c)+n==t+n){d.setAttribute("width",e+"");break}}}i&&(t-=this.defaultColCnt),u.f.fireEvent(this,"oncolumnwidthchange",{columnIndex:t,columnID:this.getColumnID(t),oldWidth:a,newWidth:e})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.isColumnResizable=function(t){try{if(t<this.defaultColCnt)return!0===this.options.rowNumStatusResize;if(void 0===t||""===t)return!1;if(isNaN(t)&&(t=this.getColumnIndex(t)+this.defaultColCnt),isNaN(t)||t>=this.getColumnCount()+this.defaultColCnt)return!0;for(var e,i=!0,o=0;o<this.htmlInfo.head.rowArr.length;o++)for(var r=this.htmlInfo.head.rowArr[o],n=0;n<r.length;n++)if(r[n].colIndex==this.columnOrder[t]&&"string"==typeof r[n].fixColumnWidth&&"true"===r[n].fixColumnWidth.toLowerCase()){i=!1;break}if(!this.cellInfoHash||a.Z.isEmptyObject(this.cellInfoHash))(e=this.cellInfoHash2[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&!0===a.Z.getBoolean(e.getAttribute("fixColumnWidth"))&&(i=!1);else(e=this.cellInfoHash[this.getColumnID(this.columnOrder[t-this.defaultColCnt])])&&e.options.fixColumnWidth&&(i=!1);return i}catch(t){return s.Y.printStackTrace(t,null,this),!0}},q.prototype.setColumnDisableEdit=function(t,e){try{var i=this.getCellInfo(t);"autoComplete"==i.options.inputType&&i.setColumnDisableEdit(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnNodeSet=function(t,e,i,o){try{if(!this.render||0===this.render.offsetHeight&&0===this.render.offsetWidth)return this.resizeObj={width:0,height:0},this.setRedrawStatus("stop"),void this.delayedDraw({columnNodeset:{colIndex:t,nodeset:e,label:i,value:o}});var r=this.getCellInfo(t),a=r.options.inputType;if("select"!=a&&"autoComplete"!=a&&"checkcombobox"!=a)return;r.setColumnNodeSet(e,i,o),r.hasRef&&(r.refHash=[]),r.itemsetObj&&r.mainGrid.refresh()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnGridItemset=function(t,e){try{var i=this.getCellInfo(t);("select"==i.options.inputType||"autoComplete"==i.options.inputType||"checkcombobox"==i.options.inputType)&&i.setColumnGridItemset(e),i.hasRef&&(i.refHash=[]),i.itemsetObj&&i.mainGrid.refresh()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);if(i.options.displayFormat=e,i._changeDisplayFormat=!0,
i.options.embeddedInput)for(var o=WebSquare.format.createFormatter(i.options.dataType,i.options.displayFormat,i.options.displayFormatter,i.options.ioFormat,null,null,i.mainGrid.scope_id,i.mainGrid.id),r=0;r<i.mainGrid.getDataLength();r++){var a=i.mainGrid.dataList._getCellData(r,t);t=i.mainGrid.getColumnIndex(t);var n=i.mainGrid.data_td_list[t+r*i.mainGrid.oneRowDataLength],l=i.mainGrid.getInput(i,n,a);l&&(l.formatter=o)}return i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnIoFormat=function(t,e,i){try{"object"===(0,l.A)(arguments[0])?this._setColumnIoFormat(arguments[0]):this._setColumnIoFormat({colIndex:t,ioFormat:e,dateMask:i})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setColumnIoFormat=function(t){try{var e=t.colIndex,i=t.ioFormat,o=t.dateMask,r=t.useMonthYearFormat,a=t.calendarDisplayFormat,n=this.getCellInfo(e);if(!n||"custom"===n.options.inputType||"date"!==n.options.dataType)return;var l=!1,h=n.options.ioFormat;if("string"==typeof i&&(l=i!==h,n.options.ioFormat=i),"string"==typeof o&&(n.options.displayFormat=o),"calendar"===n.options.inputType&&(n.options.useMonthYearFormat=r,"string"==typeof a&&(n.options.calendarDisplayFormat=a)),n.initFormatter(),!0===l){for(var d=n.options.embeddedInput?this.getRowCount():1,c=0;c<d;c++){var u=this.dataList._getCellData(c,e),p=this.data_td_list[e+c*this.oneRowDataLength],g=n.mainGrid.getInput(n,p,u);if(g&&"function"==typeof g.setIoFormat){t={ioFormat:i,displayFormat:o,useMonthYearFormat:r,calendarDisplayFormat:a};g.setIoFormat(t)}}if(n.options.useMonthYearFormat)this.drawColumnData(e);else for(var m=WebSquare.format.createFormatter(n.options.dataType,i,"",h,null,null,this.scope_id,this.id),f=0;f<this.getRowCount();f++){var b=this.dataList._getCellData(f,n.colID),y=m.format(b);this.dataList.__setCellData(f,n.colID,y)}}else this.drawColumnData(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnEditFormat=function(t,e){try{t=this.getColumnIndex(t);var i=this.getCellInfo(t),o=i.id,r=i.options.inputType;if("text"!=r&&"input"!=r)return $l("Invalid cell input type."),!1;var a=this.getInput(i);if(a&&a.options&&"input"===a.options.pluginName){i.options.editFormat=e,a.setEditFormat(e);for(var n=this.getTotalRow(),l=0;l<n;l++){var h=this.dataList.getCellData(l,o),d=WebSquare.text.dynamicMask(h,a._editFormat,a._editTokens);this.dataList.setCellData(l,o,d.orgValue)}this.drawColumnData(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnChooseOption=function(t,e,i){try{var o=this.getCellInfo(t);"select"==o.options.inputType&&o.setColumnChooseOption(e,i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnVisibleColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setVisibleColumn&&o[o.options.inputType].setVisibleColumn(e,i))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnEnableColumn=function(t,e,i){try{var o=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[o.options.inputType]&&(null==o[o.options.inputType]&&o._createComponent(0),o[o.options.inputType]&&"function"==typeof o[o.options.inputType].setEnableColumn&&o[o.options.inputType].setEnableColumn(e,i))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDisplayMode=function(t,e){try{if("label"==e||"value"==e||"value delim label"==e||"label delim value"==e){var i=this.getCellInfo(t);if(!0==={select:!0,checkcombobox:!0,autoComplete:!0}[i.options.inputType]){var o=i.options.displayMode;i.options.displayMode=e,i._initDisplayMode(),
o!=i.options.displayMode&&(i[i.options.inputType]&&i[i.options.inputType].setDisplayMode(e),i.resetMatchInfo=!0,this.drawColumnData(t))}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDelimiter=function(t,e){try{var i=this.getCellInfo(t);!0==={select:!0,checkcombobox:!0,autoComplete:!0}[i.options.inputType]&&i.options.delimiter!=e&&(i.options.delimiter=e||"\t","0"!=i.options.displayMode&&"3"!=i.options.displayMode&&(i[i.options.inputType]&&i[i.options.inputType].setDelimiter(e),i.resetMatchInfo=!0,this.drawColumnData(t)))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.showChooseOption=function(t,e){try{var i=this.getCellInfo(t);"select"==i.options.inputType&&i.showChooseOption(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setRowNumColumnWidth=function(t){this.options.rowNumVisible&&!isNaN(Number(t))&&this._setColumnWidth(0,t)},q.prototype.setRowStatusColumnWidth=function(t){var e=0;this.options.rowNumVisible&&(e=1),this.options.rowStatusVisible&&(this.options.autoFit&&!this.hiddenList[e]?(this.autoFitColWidthList=null,this._setColumnWidth(e,t),this._setAutoFit()):this._setColumnWidth(e,t))},q.prototype.setGridHeight=function(t){try{parseInt(t)+""==t&&(t+="px"),this._setGridHeightBefore(),this.setStyle("height",t);var e=document.getElementById(this.id+"_dataLayer");this.dataLayerHeight=e.offsetHeight,this.handleScrollY({},{changedHeight:!0}),this.handleResize(),this._setGridHeightAfter()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setGridHeightBefore=function(t){try{this._onSetHeight=!0,this.lastTopRowIndex=null,-1!==this.options.initFixedHeightByRowNum&&(this.options.initFixedHeightByRowNum=-1,!0!==this._isNativeScroll()&&(this.options.visibleRowNum=""))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setGridHeightAfter=function(t){try{this._onSetHeight=!1}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setGridWidth=function(t){parseInt(t)+""==t&&(t+="px"),this.setStyle("width",t),this.handlerResize_drawInitializer()},q.prototype.setGridSize=function(t,e){var i=parseInt(t),o=parseInt(e);i>=0&&o>=0?(this.setGridWidth(t),this.setGridHeight(e)):p.v.printLog("[Warning] Number of Entered in the width and height must be a valid integer greater than 0.["+this.id+"]")},q.prototype.setGridReadOnly=function(t){try{t=a.Z.getBoolean(t),this.options.readOnly=t,this.notifyDataChanged()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getGridReadOnly=function(){try{return this.options.readOnly}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.initGrid=function(){try{this.loadCheck=[],this.initFlag=!0,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0,this.removeAllFinish=!0,this.lastIndex=-1,this.lastTopRowIndex=null,this.bScrollTop=-1;var t=this.hiddenRowObj.extraRow;this.hiddenRowObj={length:0,extraRow:t,row:{},init:!1},this.clearCellVisible({skipDraw:!0}),this.initHeightCompleted=!1,this.hasFooter&&this.initFooterDataObj(),this.initHeaderDataObj();var e=this.dataList.removeAll();return this.removeAllFinish=!1,this.dataList.clearFilter(),this.initColumns(),e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setInitValue=function(){try{this.initGrid()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDisplayFormat=function(t,e){try{var i=this.getCellInfo(t);return i.element&&i.element.setAttribute("displayFormat",e),i.options.displayFormat=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDisplayFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.displayFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setFormat=function(t,e){try{var i=this.getCellInfo(t);if(e.ioFormat){var o=i.mainGridId+i.id,r=this.dom[o];r&&r.setFormat({ioFormat:e.ioFormat,displayFormat:e.ioFormat})
;for(var a=WebSquare.format.createFormatter("date",e.ioFormat,"",i.options.ioFormat,null,null,this.scope_id,this.id),n=0;n<this.getDataLength();n++){var l=this.getColumnID(t),h=this.dataList._getCellData(n,l),d=a.format(h);this.dataList.__setCellData(n,l,d)}}return i.options.ioFormat=e.ioFormat||i.options.ioFormat,i.options.displayFormat=e.displayFormat||i.options.displayFormat,i.options.displayFormatter=e.displayFormatter||i.options.displayFormatter,i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCustomFormatter=function(t,e){try{var i=this.getCellInfo(t);return i.options.customFormatter=e,i.initFormatter(),void this.drawColumnData(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setAllowChar=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o)return $l("Invalid cell input type."),!1;var r=this.getInput(i);return i.options.allowChar=e,void(r&&r.options&&("input"===r.options.pluginName||"textarea"===r.options.pluginName)&&r.setAllowChar(e))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setIgnoreChar=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o)return $l("Invalid cell input type."),!1;var r=this.getInput(i);return i.options.ignoreChar=e,void(r&&r.options&&("input"===r.options.pluginName||"textarea"===r.options.pluginName)&&r.setIgnoreChar(e))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.changeCurrency=function(t,e,i,o,r,a,n){try{return 1===arguments.length&&"object"===(0,l.A)(arguments[0])?this._changeCurrency(arguments[0]):this._changeCurrency({colID:t,type:e,format:i,delimiter:o,decimalDelimiter:r,customModelFormatter:a,customModelUnformatter:n})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._changeCurrency=function(t){try{var e=t.colID||"",i=t.type||"",o=t.format,n=t.delimiter||"",l=t.decimalDelimiter||"",h=t.subtotalColID||"",d=t.footerColID||"",c=t.customModelFormatter,u=t.customModelUnformatter,p=WebSquare.util.getDataPrefix("dataType"),g=WebSquare.util.getDataPrefix("displayFormat"),m=this.getColumnIndex(e),f=this.getCellInfo(m);if(!i||"float"!==i&&"number"!==i&&"euro"!==i&&"rupee"!==i&&"tenge"!==i)return;"number"===i&&"true"===this.options.floatNumber&&(i="float");var b=i;switch(i){case"number":case"float":case"bigDecimal":b="number",o||(this.options.numberMask||(this.options.numberMask=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/numberMask/@value')||""),o=this.options.numberMask),f.options.delimiter=n||",",f.options.decimalDelimiter=l||".";break;case"euro":o||(this.options.euroMask||(this.options.euroMask=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/euroMask/@value')||""),o=this.options.euroMask),f.options.delimiter=n||".",f.options.decimalDelimiter=l||",";break;case"rupee":o||(this.options.rupeeMask||(this.options.rupeeMask=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/rupeeMask/@value')||""),o=this.options.rupeeMask),f.options.delimiter=n||",",f.options.decimalDelimiter=l||".";break;case"tenge":o||(this.options.tengeMask||(this.options.tengeMask=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/tengeMask/@value')||""),o=this.options.tengeMask),f.options.delimiter=n||" ",f.options.decimalDelimiter=l||","}if(!o)return;if(f.options.dataType=i,f.options.displayFormat=o,void 0!==c?f.options.customModelFormatter=c:f.options.customModelFormatter||(f.options.customModelFormatter=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/customModelFormatter/@value')||""),
void 0!==u?f.options.customModelUnformatter=u:f.options.customModelUnformatter||(f.options.customModelUnformatter=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+b+'"]/customModelUnformatter/@value')||""),f.initFormatter(),this.drawColumnData(m),this.hasSubtotal){this.subtotalObj={};var y=h.split(",");if(y.length>0)for(var v=0;v<y.length;v++){var w=y[v];for(var S in this.subtotalTableList)for(var _=this.subtotalTableList[S],C=!1,x=0;x<_.rows.length;x++){for(var I=_.rows[x].getElementsByTagName("td"),T=0;T<I.length;T++){var k=I[T];if(k.getAttribute("id")===w&&(k.setAttribute(p,i),k.setAttribute(g,o),C=!0),C)break}if(C)break}}this.refreshSubtotalRow(0)}if(this.hasFooter){var L=d.split(",");if(L.length>0)for(v=0;v<L.length;v++){var A=L[v],D=this.getElementById(this.id+"_foot_table").getElementsByTagName("td"),W=a.Z.getDataPrefix("footer_id");for(x=0;x<D.length;x++){var q=D[x];if(q.getAttribute(W)===A){q.setAttribute(p,i),q.setAttribute(g,o);break}}}this.initFooterDataObj(),this.drawFooter(m)}var M=f.mainGridId+f.id;delete this.dom[M]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDataType=function(t,e,i){try{if(!e||"number"!=e&&"text"!=e&&"float"!=e&&"date"!=e)return;var o=this.getCellInfo(t);if(o.options.dataType==e)return;o.options.dataType;o.options.dataType=e;var r=this.getColumnID(t);this.setColumnOption(r,"dataType",e);var a=o.mainGrid.getElementById(o.mainGridId+r);if(o.options.displayFormat="",a){switch(a.validator.clearCommand(),e){case"number":a.validator.addCommand(new WebSquare.validator.allowCharCommand("+\\-.0-9"));break;case"float":a.validator.addCommand(new WebSquare.validator.floatCommand(a.options.delimiter,a.options.decimalDelimiter,a.options.applyFormat))}var n=a.options.maxlength&&parseInt(a.options.maxlength)>-1?a.options.maxlength:null;n||(n=a.options.maxLength&&parseInt(a.options.maxLength)>-1?a.options.maxLength:null),n&&("float"==e?(o.setFloatMaxLength(n),a.render&&"input"==a.render.tagName.toLowerCase()&&a.render.removeAttribute("maxLength")):o.setMaxLength(n))}o.initFormatter(),o._changeDisplayFormat=!0,i&&i.displayFormat&&this.setColumnDisplayFormat(t,i.displayFormat),o.mainGrid.refreshColumn(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDefaultDate=function(t,e){try{var i=this.getCellInfo(t);if("calendar"!==i.options.inputType)return $l("Invalid cell input type."),!1;var o=this.getInput(i);i.options.defaultDate=e,o&&o.setDefaultDate(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.disableBeforeDate=function(t,e){this.setDisableBeforeDate(t,e)},q.prototype.setDisableBeforeDate=function(t,e){try{var i,o=this.getCellInfo(t);if("calendar"!==o.options.inputType)return $l(WebSquare.language.getMessage("Grid_incorrect_inputType")),!1;if(o.options.embeddedInput)for(var r=0;r<this.drawedRowLength;r++){var a=this.data_td_list[t+r*this.oneRowDataLength];a&&(i=this.getInput(o,a))&&i.setDisableBeforeDate(e)}else(i=this.getInput(o))&&i.setDisableBeforeDate(e);o.options.disableBeforeDate=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.disableAfterDate=function(t,e){this.setDisableAfterDate(t,e)},q.prototype.setDisableAfterDate=function(t,e){try{var i,o=this.getCellInfo(t);if("calendar"!==o.options.inputType)return $l(WebSquare.language.getMessage("Grid_incorrect_inputType")),!1;if(o.options.embeddedInput)for(var r=0;r<this.drawedRowLength;r++){var a=this.data_td_list[t+r*this.oneRowDataLength];a&&(i=this.getInput(o,a))&&i.setDisableAfterDate(e)}else(i=this.getInput(o))&&i.setDisableAfterDate(e);o.options.disableAfterDate=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDisableBeforeMonth=function(t,e){try{var i,o=this.getCellInfo(t);if("calendar"!==o.options.inputType)return $l(WebSquare.language.getMessage("Grid_incorrect_inputType")),!1;if(o.options.embeddedInput)for(var r=0;r<this.drawedRowLength;r++){var a=this.data_td_list[t+r*this.oneRowDataLength]
;a&&(i=this.getInput(o,a))&&i.setDisableBeforeMonth(e)}else(i=this.getInput(o))&&i.setDisableBeforeMonth(e);o.options.disableBeforeMonth=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDisableAfterMonth=function(t,e){try{var i,o=this.getCellInfo(t);if("calendar"!==o.options.inputType)return $l(WebSquare.language.getMessage("Grid_incorrect_inputType")),!1;if(o.options.embeddedInput)for(var r=0;r<this.drawedRowLength;r++){var a=this.data_td_list[t+r*this.oneRowDataLength];a&&(i=this.getInput(o,a))&&i.setDisableAfterMonth(e)}else(i=this.getInput(o))&&i.setDisableAfterMonth(e);o.options.disableAfterMonth=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setMaxLength=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if("text"!=o&&"textarea"!=o&&"input"!=o&&"textImage"!=o&&"secret"!=o&&"autoComplete"!=o)return;"text"==o&&"float"==i.options.dataType?i.setFloatMaxLength(e):i.setMaxLength(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getMaxLength=function(t){try{var e=this.getCellInfo(t),i=e.options.inputType;if("text"!=i&&"textarea"!=i&&"input"!=i&&"textImage"!=i&&"secret"!=i)return;return e.options.maxLength}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.spanAll=function(t){try{"number"==typeof t?this.showDepth=t+"":(t=a.Z.getBoolean(t),this.showDepth=1==t?"9999":"1"),this.initDrilldown(),this.rowIndex=-1,this.lastIndex=-1,this.lastTopRowIndex=null,this.drawData(0,0),this.setScrollYHeight({noDraw:!0}),this.drawFooter(),this.displayNoResultMessage(),this.displayFixedColumnLine()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCellDisplayData=function(t,e){try{var i=(this._linkedDataList||this._dataList).getRealRowIndex(t);return this._getDisplayData(i,e)}catch(t){s.Y.printStackTrace(t)}},q.prototype._getCellDisplayData=function(t,e,i){try{i=i||{},"string"==typeof e&&(e=e.trim());var o=this.getRealRowIndex(t);return this._getDisplayData(o,e,i)}catch(t){s.Y.printStackTrace(t)}},q.prototype._getDisplayData=function(t,e,i){try{i=i||{},this.editEndBeforeGetData();e=this.getColumnID(e);var o=this.getColumnIndex(e),r=this.cellInfoHash[e];0==r.internal&&"custom"==r.options.inputType&&r.cellManagerHashByRowIndex[t]&&(r=r.cellManagerHashByRowIndex[t]);var n=this.dataList._getData(t,e),l=this.getDisplayRowIndex(t),h=this._getGroupbyDisplayRowIndex(l);if(r.options.customModelUnformatter){var d=a.Z.getGlobalFunction(r.options.customModelUnformatter,this.scope_id);"function"==typeof d&&(n=d.call(this,n,h,o))}if(r.options.maskFormat&&r.options.displayFormat&&(n=this.getInput(r[o]).maskFormatModelUnFormat(n)),r.useEscapeFormatter){var c=a.Z.getGlobalFunction(r.options.escapeFormatter,this.scope_id);"function"==typeof c&&(n=c.call(this,n,h,o))}if(r.useCustomFormatter&&1!=this.options.keepBeforeDisplayData){var u="true"===r.getEscape()?r.getDisplayData(WebSquare.xml._encode(n+""),t):r.getDisplayData(n,t),p=a.Z.getGlobalFunction(r.options.customFormatter,this.scope_id);"function"==typeof p&&(n=this.options.customFormatterRealRowIndex?p.call(this,n,u,t,o):p.call(this,n,u,h,o))}else 0==r.internal&&"custom"==r.options.inputType&&(r=r.cellManagerHashByRowIndex[t]?r.cellManagerHashByRowIndex[t]:r),n=r.getDisplayData(n,t,i);if(!0===i.removeTag){var g=document.createElement("div");g.innerHTML=n,n=g.innerText}return null==n&&(n=""),n}catch(t){s.Y.printStackTrace(t)}},q.prototype.initPasteDrilldown=function(){try{var t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""};"string"==typeof t.depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.pasteDrilldownInitialize(this,t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.initDrilldown=function(t){try{"string"==typeof(t={showDepth:this.showDepth,depthColumn:this.depthColumn,dataColumn:""
}).depthColumn&&(null==this.bodyIdColIndexMap[t.depthColumn]?(t.dataColumn="dataList",t.depthColumn=this._dataList.bodyIdColIndexMap[t.depthColumn]):(t.dataColumn="gridview",t.depthColumn=this.bodyIdColIndexMap[t.depthColumn])),this.drilldown.initialize(this,t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getRealRowIndex=function(t){return this.dataList.getRealRowIndex(t)},q.prototype.toggle=function(t){try{if("number"!=typeof t)return!1;var e=t;if(this.options.drilldownRealRowIndexAll&&"number"!=typeof(e=this.getDisplayRowIndex(t)))return!1;this._toggle(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._toggle=function(t){try{t=parseInt(t),this.drilldown.toggle(t);var e={};this.options.drilldownToggleScrollFix&&(e.keepScrollTop=!0),this.lastTopRowIndex=null,!0===this._isHybridScroll()?this.hasSubtotal&&(e.keepHybridHash=!0):this.setScrollYHeight(e),this.notifyRowChanged(t,e),this.options.autoFit&&this.autoFitFunc()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.toggles=function(t){try{if("object"!=(0,l.A)(t)||t.constructor!=Array)return!1;for(var e=0;e<t.length;e++){var i=t[e];this.options.drilldownRealRowIndexAll&&"number"!=typeof(i=this.getDisplayRowIndex(i))||(i=parseInt(i),this.drilldown.toggle(i))}this.refresh()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.drillTo=function(t){try{var e=this.drilldown.drillTo(t),i=this.options.drilldownToggleScrollFix?{keepScrollTop:!0}:null;this.setScrollYHeight(i),this.notifyRowChanged(e,i),this.options.autoFit&&this.autoFitFunc()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getParentRowIndex=function(t){return t=parseInt(t),this.drilldown.getParentRowIndex(t)},q.prototype.getChildrenRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildrenRowArr(t)},q.prototype.getAncestorRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getAncestorRowArr(t)},q.prototype.getDescendantRowIndexArray=function(t){return t=parseInt(t),this.drilldown.getChildRowArr(t,!0)},q.prototype.getOpenStatus=function(t){var e=t=parseInt(t);return(!this.options.drilldownRealRowIndexAll||"number"==typeof(e=this.getDisplayRowIndex(t)))&&this.drilldown.isOpen(e)},q.prototype.getDataLength=function(){var t;if(this.successBinding)if(this.groupbyStatus.grouped){for(var e in this.customFilterStatusObj)if(this.customFilterStatusObj[e])return this._dataList.getDataLength();t=this.groupbyStatus.groupedRowIndexArr.length}else t=this._dataList.getDataLength();else t=0;return t},q.prototype.focusedRowMoveUp=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveUp(t)},q.prototype.focusedRowMoveDown=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveDown(t)},q.prototype.focusedRowMoveUpFiltered=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveUpFiltered(t)},q.prototype.focusedRowMoveDownFiltered=function(){var t=this._getFocusedRowIndex();this.dataList.rowMoveDownFiltered(t)},q.prototype.initStyleArr=function(t){t<=0&&(this.rowStyleArr=[],this.rowReadOnlyArr=[],this.rowDisabledArr=[]);var e=this.getTotalRow(),i=e*this.oneRowDataLength;this.rowStyleArr[e-1]=void 0,this.rowStyleFixedArr[e-1]=void 0,this.rowStyleDataArr[e-1]=void 0,this.rowReadOnlyArr[e-1]=void 0,this.rowDisabledArr[e-1]=void 0,this.rowClassArr[e-1]=void 0,this.cellStyleArr[i-1]=void 0,this.cellClassArr[i-1]=void 0,this.cellReadOnlyArr[i-1]=void 0,this.cellDisabledArr[i-1]=void 0,this._cellSelectedIndex[i-1]=void 0},q.prototype.modifyCheckedStatus=function(t,e){try{var i=this.getCheckedIndex(t);if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){for(var o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else p.v.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.modifyUncheckStatus=function(t,e){try{if("R"==(e=e.toUpperCase())||"U"==e||"V"==e||"D"==e||"C"==e){
for(var i=this.getUnCheckedIndex(t),o=0;o<i.length;o++)this.dataList.modifyRowStatus(i[o],e),this._drawRowStatus(o-this.rowIndex,o),this.displayNoResultMessage();this.notifyStatusChanged({rowIndex:i})}else p.v.printLog("[Warning] Is not exist status Value!["+this.id+"]")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getVisibleColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=this.getDataLength(),s=0;s<o;s++)e.push(this.dataList._getCellData(s,i));return e},q.prototype.getCheckedIndex=function(t,e){try{var i,o=[],r=[],a=0,n=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==n.options.inputType||"radio"==n.options.inputType||"custom"==n.options.inputType){i=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var h=n,d=0;d<i.length;d++){if(0==n.internal&&"custom"==n.options.inputType){var c=this.dataList.getRealRowIndex(d);if("checkbox"!=(h=n.cellManagerHashByRowIndex[c]?n.cellManagerHashByRowIndex[c]:n).options.inputType&&"radio"!=h.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==(0,l.A)(this.dataList.getRealRowIndex(d)))continue;if(e){r.push(d);var u=!(!this.isDrillDown||!this._dataList.options.depthColumn);this.___getEditReadOnly(d,t,u)||this._getEditDisabled(d,t,u)?a++:i[d]==h.options.trueValue&&o.push(d)}else i[d]==h.options.trueValue&&o.push(d)}}return e&&a!==r.length&&a+o.length==r.length?r:o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getUnCheckedIndex=function(t){return this.getUncheckedIndex(t)},q.prototype.getUncheckedIndex=function(t){try{var e=[],i=this.cellInfoHash[this.getColumnID(t)];if("checkbox"==i.options.inputType||"radio"==i.options.inputType||"custom"==i.options.inputType){var o=[];o=this.isDrillDown&&this._dataList.options.depthColumn?this.dataList.getColData(t):this.getVisibleColData(t);for(var r=i,a=0;a<o.length;a++){if(0==i.internal&&"custom"==i.options.inputType){var n=this.dataList.getRealRowIndex(a);if("checkbox"!=(r=i.cellManagerHashByRowIndex[n]?i.cellManagerHashByRowIndex[n]:i).options.inputType&&"radio"!=r.options.inputType)continue}else if(this.groupbyStatus.grouped&&"object"==(0,l.A)(this.dataList.getRealRowIndex(a)))continue;o[a]!=r.options.trueValue&&e.push(a)}}return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getAllDisplayData=function(){try{var t=this._linkedDataList||this._dataList;if(t.getTotalRow()==t.getDataLength())return this.getAllVisibleData("displayData");this._endEdit();for(var e=this.getTotalRow(),i=this.getColumnCount(),o=[],r=0;r<e;r++)for(var a=0;a<i;a++)o.push(this._getDisplayData(r,a));return o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getAllDisplayJSON=function(t){try{t||(t={emptyValue:"$$_blank_"});var e=this._linkedDataList||this._dataList;if(e.getTotalRow()==e.getDataLength())return this.getAllVisibleJSON(t);this._endEdit();for(var i=this.getTotalRow(),o=this.getColumnCount(),r=[],a=0;a<i;a++){for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._getDisplayData(a,l,t);r.push(n)}return r}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getAllVisibleJSON=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),r=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a]){for(var n={},l=0;l<o;l++)n[this.tdIdList[l]]=this._grid._getCellDisplayData(a,l,t);r.push(n)}return r}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getAllDisplayXML=function(){try{var t=this._linkedDataList||this._dataList;return t.getTotalRow()==t.getDataLength()?this.getAllVisibleXML("displayData"):(this._endEdit(),this.getAllArrXML("displayData",this.id))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getAllVisibleXML=function(t){try{this._endEdit()
;for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=[],r=0;r<i;r++)e&&"number"!=typeof this.groupbyStatus.groupedRowIndexArr[r]||o.push(r);return this.getArrXML(o,t,e)}catch(t){s.Y.printStackTrace(t)}},q.prototype.getAllVisibleData=function(t){try{this._endEdit();for(var e=this.options.groupbyDisplayRowIndex&&this.groupbyStatus.grouped,i=e?this.groupbyStatus.groupedRowIndexArr.length:this.getDataLength(),o=this.getColumnCount(),r=[],a=0;a<i;a++)if(!e||"number"==typeof this.groupbyStatus.groupedRowIndexArr[a])for(var n=0;n<o;n++)"displayData"===t?r.push(this._getCellDisplayData(a,n)):r.push(this.dataList.getCellData(a,n));return r}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.changeToRealRowIndexArr=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getCheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCheckedXML=function(t){try{this._endEdit();var e=this.getCheckedIndex(t);return this.getArrXML(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getUncheckedData=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this.dataList.getRowData(i[o]));return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getUncheckedJSON=function(t){try{this._endEdit();for(var e=[],i=this.getUncheckedIndex(t),o=0;o<i.length;o++)e.push(this._dataList.getRowJSON(i[o]));return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getUncheckedXML=function(t){try{this._endEdit();var e=this.getUncheckedIndex(t);return this.getArrXML(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCellChecked=function(t,e){try{var i=this.cellInfoHash[this.getColumnID(e)],o=i.id;if(0==i.internal&&"custom"==i.options.inputType){var r=this.dataList.getRealRowIndex(t);i=i.cellManagerHashByRowIndex[r]?i.cellManagerHashByRowIndex[r]:i}if("checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)return!1;var a=this.dataList._getCellData(t,o);return a=a==i.options.trueValue}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.hasChild=function(t){return this.drilldown.hasChild(t)},q.prototype.comparator=function(t,e){return parseInt(e)==parseInt(t)?0:parseInt(e)>parseInt(t)?1:-1},q.prototype.getExcelAllXML=function(t){try{var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=0;i<this.getDataLength();i++)for(var o=0;o<this.getTotalCol();o++)e.push(this.dataList._getCellData(i,this.getColumnID(o))),e.push('","');return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getExcelAllXMLDisplay=function(t){try{null==t&&(t=1);var e=new Array;e.push("<array><![CDATA["),e.push('["');for(var i=this.getDataLength(),o=this.getColumnCount(),r=0;r<i;r++)for(var a=0;a<o;a++){var n,l=this.getCellInfo(a);if("custom"==l.options.inputType){var h=this.dataList.getRealRowIndex(r);l.cellManagerHashByRowIndex[h]||(this.drawData(r),l=l.cellManagerHashByRowIndex[h]||l)}(n=l.useCustomFormatter||"custom"==l.options.inputType?this._getDisplayData(this.dataList.getRealRowIndex(r),a):1==t?l.getDisplayData(this.dataList._getCellData(r,this.getColumnID(a)),r):this.dataList._getCellData(r,this.getColumnID(a))+"").indexOf("javascript:")>-1&&(n=n.wq_replaceAll("javascript:","")),e.push(n),e.push('","')}return e[e.length-1]='"]',e.push("]]></array>"),e.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getExcelAllXMLRaw=function(t){try{var e=this.dataArr.length,i=this.dataArr[0],o=this.dataArr[e-1]
;this.dataArr[0]='<array><![CDATA[["'+i,this.dataArr[e-1]=o+'"]]]></array>';var r=this.dataArr.join('","');return this.dataArr[0]=i,this.dataArr[e-1]=o,r}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.makeExcelData=function(t,e,i,o){try{var n=e.length,l=t+i.rowsByN;l=l<i.dataLength?l:i.dataLength;var h,d=this.oneRowDataLength,c=i.separator||",";if(i.convertIndex&&(h=i.convertIndex.split(",")),""==i.dataProvider&&""==i.splitProvider)if(0===i.type)for(var u=t;u<l;u++){if("number"==typeof(y=this.dataList.getRealRowIndex(u)))for(var p=0;p<d;p++){var g=!1;if(h)for(var m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelDisplayData(y,p,e,i,u)).length:(e=this._getExcelRealData(y,p,e,i)).length}}else if(1===i.type||2==i.type)for(u=t;u<l;u++){if("number"==typeof(y=this.dataList.getRealRowIndex(u)))for(p=0;p<d;p++){g=!1;if(h)for(m=0;m<h.length;m++)if(h[m]==p.toString()){g=!0;break}n=g?(e=this._getExcelRealData(y,p,e,i)).length:(e=this._getExcelDisplayData(y,p,e,i,u)).length}}else l=i.dataLength,n=(e=this.dataList.getAllData()).length;var f=this;if(l<i.dataLength&&""==i.dataProvider&&""==i.splitProvider)if(!1!==i.massStorage)this.excelTime=setTimeout((function(){try{!0===i.showConfirm&&window.gridExceldownloadIframe.contentWindow.checkUpload(e.length/f.dataArr.length)}catch(t){s.Y.printStackTrace(t,null,this)}if(0!=i.multiexcel)return f.makeExcelData(l,e,i,o);f.makeExcelData(l,e,i,o)}),10);else{if(0!=i.multiexcel)return this.makeExcelData(l,e,i,o);this.makeExcelData(l,e,i,o)}else{var b;if(""==i.dataProvider&&""==i.splitProvider)if(e.length>=2){if(i.groupby&&this.groupbyStatus.grouped&&this.defaultColCnt>0){var y=1,v=this.oneRowDataLength,w=[];for(u=0;u<e.length;u++){if((u%v==0||0==u)&&(y=parseInt(u/v,10),this.options.rowNumVisible&&w.push(y+1),this.options.rowStatusVisible)){var S=this.getRowStatus(y);w.push(S)}w.push(e[u])}n=(e=w).length}if(n>0){var _=e[0],C=e[n-1];e[0]='<array><![CDATA[["'+_,e[n-1]=C+'"]]]></array>',b=e.join('"'+c+'"'),e[0]=_,e[n-1]=C}else b="<array><![CDATA[["+e+"]]]></array>"}else{b="<array><![CDATA[["+(1===e.length?'"'+e[0]+'"':"")+"]]]></array>"}else b="<array><![CDATA[[ ]]]></array>";if(!0===i.showConfirm)this.excelOptions=i,this.excelInfoArr=o,this.excelFinalStr=b,this.checkUpload();else{if(0!=i.multiexcel)return this.sendExcelData(i,o,b);this.sendExcelData(i,o,b)}}}catch(t){var x=r.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/excel/download/errorHandler/@value"),I=a.Z.getGlobalFunction(x,this.scope_id);"function"==typeof I&&I.call(this,this.id),s.Y.printStackTrace(t,null,this)}},q.prototype._getExcelRealData=function(t,e,i,o){try{var r=o.cellInfo,a=o.isExpCol,n=i;if(a[e])n.push(r[e].getExpressionValue(t));else{var l=this.dataList._getData(t,e);n.push(null!=l?l:"")}return n}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getExcelDisplayData=function(t,e,i,o,r){try{var a,n=o.cellInfo,l=o.isSelectCol,h=o.isBasicCol,d=o.isExpCol,c=o.isCustomCol,u=o.isCustomModelCol,p=o.isCustomType,g=o.isEscapeFormatter,m=i;if(d[e]&&(a=n[e].getExpressionValue(t)),c[e]||u[e]||g[e]?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),n[e].options.useMonthYearFormat&&"calendar"===n[e].options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n[e].options.ioFormat,n[e].options.calendarValueType)),a=null!=a?a:""),h[e]||d[e])n[e].options.maskFormat&&n[e].options.displayFormat&&(a=this.getInput(n[e]).maskFormatModelUnFormat(a)),a=n[e].formatter?n[e].formatter.format(a):a;else if(!l[e]||c[e]||u[e]){if(p[e]){x=null;var f,b=n[e].cellManagerHashByRowIndex[r];b?f=(n=b).options.inputType:(n=n[e],f="text");var y=n.useCustomFormatter,v=n.useCustomModelFormatter,w=n.useEscapeFormatter,S="select"===f||"checkcombobox"===f||"autoComplete"===f,_="expression"===f,C=!("checkbox"===f||"image"===f||"radio"===f||S||_||y||v||w);if(y||v||w?a=this._getDisplayData(t,e):(a=this.dataList._getData(t,e),
n.options.useMonthYearFormat&&"calendar"===n.options.inputType&&(a=WebSquare.date.getIOFormatDate(a,n.options.ioFormat,n.options.calendarValueType)),a=null!=a?a:""),C||_)n.options.maskFormat&&n.options.displayFormat&&(a=this.getInput(n).maskFormatModelUnFormat(a)),a=n.formatter?n.formatter.format(a):a;else if(S&&!y&&!v){x=null;null==(x=2==o.type?this.dataList._getData(t,e):n.getData(a,t))&&(x=""),a=x}}}else{var x=null;if(2==o.type)x=this.dataList._getData(t,e);else{var I=n[e].dataComp,T=t;if(I){var k=this.modelControl.getDataComp(I);k&&"linkedDataList"===k.initializeType&&(T=r)}x=n[e].getData(a,T)}null==x&&(x=""),a=x}return"string"==typeof a&&a.indexOf("javascript:")>-1&&(a=a.wq_replaceAll("javascript:","")),m.push(a),m}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getStyleRowIndex=function(t){try{var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);return null==e?e=null:"number"!=typeof e&&(e=e.type+"_"+e.groupId),e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getRowStyleClassName=function(t,e){try{var i=e?t:this._getStyleRowIndex(t);return null==i?null:this.rowStyleArr[i]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setRowStyleClassName=function(t,e,i){try{var o=i?t:this._getStyleRowIndex(t);if(null==o)return;this.rowStyleArr[o]=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCellStyleClassName=function(t,e,i){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var o=i?t:this._getStyleRowIndex(t);return null==o?void 0:"number"==typeof o?this.cellStyleArr[o*this.oneRowDataLength+e]:this.cellStyleArr[o+"_"+e]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellStyleClassName=function(t,e,i,o){try{e=this.getColumnIndex(e);var r=o?t:this._getStyleRowIndex(t);if(null==r)return;"number"==typeof r?this.cellStyleArr[r*this.oneRowDataLength+e]=i:this.cellStyleArr[r+"_"+e]=i}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getCellClass=function(t,e){try{"number"!=typeof e&&(e=this.bodyIdColIndexMap[e]);var i=this._getStyleRowIndex(t);return null==i?void 0:"number"==typeof i?this.cellClassArr[i*this.oneRowDataLength+e]:this.cellClassArr[i+"_"+e]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellDefaultStyleClassName=function(t,e,i){try{e=this.getColumnIndex(e);var o=this.getCellStyleClassName(t,e,i);return null==o&&(this.cellStyleIndex++,o=this.id+"_cellstyle_"+this.cellStyleIndex+"_",this.setCellStyleClassName(t,e,o,i)),null==this.cellStyleValueObj[o]&&(this.cellStyleValueObj[o]={}),o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellClass=function(t,e,i,o){try{var r,a;e=this.getColumnIndex(e);var n,l=!(!this.isDrillDown||!this._dataList.options.depthColumn);if(o?(r=t,a=this.getDisplayRowIndex(t)-this.rowIndex):(r=this._getStyleRowIndex(t),a=l?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex),a>=0&&(n=this.data_td_list[a*this.oneRowDataLength+e]),null==r)return;if("number"==typeof r){var h=this.tdCellClassArr[a*this.oneRowDataLength+e];h&&this.removeClass(n,h),this.cellClassArr[r*this.oneRowDataLength+e]=i}else this.cellClassArr[r+"_"+e]=i;n&&(this.tdCellClassArr[a*this.oneRowDataLength+e]=i,this.addClass(n,i))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.removeCellClass=function(t,e,i){try{e=this.getColumnIndex(e);var o,r=this._getStyleRowIndex(t);if(o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex,null==r)return;"number"==typeof r?this.cellClassArr[r*this.oneRowDataLength+e]=void 0:this.cellClassArr[r+"_"+e]=void 0;var a=this.data_td_list[o*this.oneRowDataLength+e];a&&(i||(i=this.tdCellClassArr[o*this.oneRowDataLength+e]),this.tdCellClassArr[o*this.oneRowDataLength+e]=void 0,this.removeClass(a,i))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._removeAllTDCellClass=function(){try{for(var t=this.tdCellClassArr.length,e=0;e<t;e++){var i=this.tdCellClassArr[e],o=this.data_td_list[e]
;o&&i&&this.removeClass(o,i)}this.tdCellClassArr=[]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setColumnClass=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnClassObj[i]){var o=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim();this.columnClassObj[i]=o+" "+e}else this.columnClassObj[i]=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._setColumnClass(t,i[o]);for(o=this.getColumnIndex(t);o<this.data_td_list.length;o+=this.oneRowDataLength){var r=this.data_td_list[o];r&&this.addClass(r,e)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._removeColumnClass=function(t,e){try{var i=this.getColumnIndex(t);this.columnClassObj[i]=this.columnClassObj[i].replace(new RegExp(e,"g"),"").wq_trim(),this.columnClassObj[i]||delete this.columnClassObj[i];for(var o=i;o<this.data_td_list.length;o+=this.oneRowDataLength){var r=this.data_td_list[o];r&&this.removeClass(r,e)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.removeColumnClass=function(t,e){try{if("string"!=typeof e)return;for(var i=e.split(" "),o=0;o<i.length;o++)this._removeColumnClass(t,i[o])}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getColumnClass=function(t){try{var e=this.getColumnIndex(t);return this.columnClassObj[e]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._refreshColumnClass=function(){try{for(var t in this.columnClassObj)this.setColumnClass(this.columnClassObj[t])}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setRowClass=function(t,e,i){try{var o,r,a,n=!(!this.isDrillDown||!this._dataList.options.depthColumn);if(i?(o=t,r=this.getDisplayRowIndex(t)-this.rowIndex):(o=this._getStyleRowIndex(t),r=n?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex),r>=0&&(a=this.data_td_list[r*this.oneRowDataLength]),e){var l=e.split(" ").filter((function(t){return t}));l.length>1&&(e=l.join(" "))}if(null==o)return;if("number"==typeof o){var h=this.trRowClassArr[r];h&&this.removeClass(a.parentNode,h),this.rowClassArr[o]=e}else this.rowClassArr[o]=e;a&&(this.trRowClassArr[r]=e,this.addClass(a.parentNode,e))}catch(t){$l("setRowClass :"+t.message),s.Y.printStackTrace(t,null,this)}},q.prototype.removeRowClass=function(t,e){try{var i,o,r=this._getStyleRowIndex(t),a=this.rowClassArr[r];if(!a)return;if(i=!(!this.isDrillDown||!this._dataList.options.depthColumn)?this.getDisplayRowIndex(t)-this.rowIndex:t-this.rowIndex,e&&(o=e.split(" ").filter((function(t){return t})),a=this._removeClassName(a,o)),null==r)return;this.rowClassArr[r]=e?a:void 0;var n=this.data_td_list[i*this.oneRowDataLength];if(n)if(this.trRowClassArr[i]=e?a:void 0,o)for(var l=0;l<o.length;l++)this.removeClass(n.parentNode,o[l]);else this.removeClass(n.parentNode,a)}catch(t){$l("removeRowClass :"+t.message),s.Y.printStackTrace(t,null,this)}},q.prototype._removeClassName=function(t,e){try{for(var i=t.split(" ").filter((function(t){return t})),o=[],r=0;r<i.length;r++)e.indexOf(i[r])<0&&o.push(i[r]);return o.join(" ")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._removeAllTRClass=function(){try{for(var t=this.trRowClassArr.length,e=0;e<t;e++){var i=this.trRowClassArr[e],o=this.data_td_list[e*this.oneRowDataLength];o&&i&&this.removeClass(o,i)}this.trRowClassArr=[]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getRowStyleFixedClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleFixedArr[e]}catch(t){$l("getRowStyleFixedClassName :"+t.message),s.Y.printStackTrace(t,null,this)}},q.prototype.setRowStyleFixedClassName=function(t,e){try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleFixedArr[i]=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getRowStyleDataClassName=function(t){try{var e=this._getStyleRowIndex(t);return null==e?null:this.rowStyleDataArr[e]}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setRowStyleDataClassName=function(t,e){
try{var i=this._getStyleRowIndex(t);if(null==i)return;this.rowStyleDataArr[i]=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.refreshColumnItemset=function(t){try{var e=this.getCellInfo(t);if(e.resetMatchInfo=!0,e.options.embeddedInput){t=this.getColumnIndex(e.options.col_id);for(var i=0;i<this.drawedRowLength;i++){var o=this.data_td_list[t+i*this.oneRowDataLength];if(o){var r=this.dom[o.getAttribute("id")+"_select"];r&&r.refreshItemset()}}}else"select"==e.options.inputType?(e.hasRef&&(e.refHash=[]),e.select&&e.select.refreshItemset(),e.itemsetObj&&e.mainGrid.refresh()):"checkcombobox"==e.options.inputType&&(e.refreshItemArr(),e.checkcombobox)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.refreshRadioGroup=function(t){try{for(var e={},i=[],o=0;o<this.oneRowDataLength;o++){"radio"==(l=this.getCellInfo(o)).options.inputType&&l.options.groupName==t&&(l.options.groupRef&&(l.options.groupValue=WebSquare.ModelUtil.getInstanceValue(l.options.groupRef,null,this.scope_id)),e[l.options.groupValue]=l,i.push(l))}if(0==i.length)return;var r=this.getDataLength();for(o=0;o<r;o++){var a=e[this.dataList._getCellData(o,t)];if(a)this.dataList.__setCellData(o,a.id,a.options.trueValue);else{for(var n=0;n<i.length;n++){var l=i[n];this.dataList.__setCellData(o,l.id,l.options.defaultValue)}var h=this.getCellInfo(t);h&&this.dataList.__setCellData(o,t,h.options.defaultValue)}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.resetRadioGroup=function(t,e){return this._resetRadioGroup.call(this,t,e,!0)},q.prototype._resetRadioGroup=function(t,e,i){try{for(var o=[],r=0;r<this.oneRowDataLength;r++){"radio"==(h=this.getCellInfo(r)).options.inputType&&h.options.groupName==e&&o.push(h)}if(0==o.length)return;if("number"==typeof t)var a=t,n=t+1;else a=0,n=this.getDataLength();for(r=a;r<n;r++){for(var l=0;l<o.length;l++){var h=o[l];this.dataList.__setCellData(r,h.id,h.options.defaultValue)}if(i){var d=this.getCellInfo(e);d&&this.dataList.__setCellData(r,e,d.options.defaultValue)}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.xmlData2ArrData=function(t,e,i){try{if(null==t)return;if(9==t.nodeType)r=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else if(o=i&&i.baseNode?i.baseNode:this.options.baseNode,i&&i.isRepeatNode)r=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+i.repeatNode);else if(o.startsWith(t.tagName))var o=o.replace(t.tagName,"."),r=t.selectNodes(o+"/"+this.options.repeatNode);else t=WebSquare.xml.parse(WebSquare.xml.serialize(t)),r=1==e?t.selectNodes("/"+this.options.repeatNode):t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);for(var n=[],l=this.options.valueNode,h=null==l||""==l,d=a.Z.getTextNodeValue,c=r.length,u=this.tdIdList.length,p=[],g=[],m=[],f=0;f<u;f++){p[f]=this.getCellInfo(this.tdIdList[f]);var b=p[f].options;null!=b.importFormatter&&""!=b.importFormatter&&(g[f]=!0),null!=b.importExp&&""!=b.importExp&&(m[f]=!0)}for(f=0;f<c;f++){for(var y=f,v=r[f],w=n.length,S=0;S<u;S++){var _=r[f].selectSingleNode(this.tdIdList[S]);n[w+S]=null!=_?h?d(_):_.getAttribute(l):p[S].options.defaultValue}for(S=0;S<u;S++)if(g[S])try{var C=a.Z.getGlobalFunction(p[S].options.importFormatter,this.scope_id);"function"==typeof C&&(n[w+S]=C.call(this,v,y))}catch(t){n[w+S]=p[S].options.defaultValue,s.Y.printStackTrace(t,null,this)}for(S=0;S<u;S++)if(m[S])try{var x=new Function("_this","obfuscator_rowXml","return "+p[S].options.importExp)(this,v);n[w+S]=x}catch(t){n[w+S]=p[S].options.defaultValue,s.Y.printStackTrace(t,null,this)}for(S=0;S<u;S++){if("radio"==p[S].options.inputType&&p[S].options.groupName&&this.cellInfoHash[p[S].options.groupName]){var I=p[S].options.trueValue,T=p[S].options.falseValue;switch(p[S].options.valueType){case"binary":I="1",T="0";break;case"boolean":I="true",T="false"}this.columnValue(v,p[S].options.groupName)==p[S].options.groupValue?n[w+S]=I:n[w+S]=T}
this.options.xmlEncode&&null!=n[w+S]&&(n[w+S]=WebSquare.xml.decode(n[w+S]))}}return n}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.jsonData2ArrData=function(t){try{if(null==t)return;for(var e=[],i=t.length,o=this.cellIdList.length,r=[],n=0;n<o;n++)r[n]=this.getCellInfo(this.cellIdList[n]);for(n=0;n<i;n++)for(var l=n,h=t[n],d=e.length,c=0;c<o;c++)if(r[c].options.importFormatter)try{var u=a.Z.getGlobalFunction(r[c].options.importFormatter,this.scope_id);"function"==typeof u&&(e[d+c]=u.call(this,h,l))}catch(t){e[d+c]=r[c].options.defaultValue,s.Y.printStackTrace(t,null,this)}else if(r[c].options.importExp)try{var p=new Function("_this","obfuscator_rowXml","return "+r[c].options.importExp)(this,h);e[d+c]=p}catch(t){e[d+c]=r[c].options.defaultValue,s.Y.printStackTrace(t,null,this)}else{var g=t[n][this.cellIdList[c]];e[d+c]=null!=g?g:r[c].options.defaultValue}return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue}catch(t){$l("xpath exeption"),s.Y.printStackTrace(t,null,this)}return""},q.prototype.getAllArrXML=function(t){try{var e=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var i=0;i<this.tagNmArr.length;i++)if(null!=this.tagNmArr[i]&&""!=this.tagNmArr[i].wq_trim())if(e)r.push(o.createElement(this.tagNmArr[i])),r[i-1].appendChild(r[i]);else{var o=WebSquare.xml.parse("<"+this.tagNmArr[i]+"/>"),r=[];r.push(o.documentElement),e=!0}var n=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),l=null;for(i=0;i<this.getTotalRow();i++){var h=i;l=[];for(var d=null,c=0;c<n.length;c++)if(""!=n[c]){var u=o.createElement(n[c]);l.push(u),0==c?r[r.length-1].appendChild(u):l[c-1].appendChild(l[c])}(d=l[n.length-1]).setAttribute("status",this.dataList._getRowStatusValue(h)),d.setAttribute("statusValue",this.dataList._getRowStatus(h)),d.setAttribute("id",h);for(var p=this.getColumnCount(),g=new Array(p),m=0;m<p;m++){var f="";f="displayData"!=t?this._dataList._getData(h,m):this._getDisplayData(h,m),this.options.xmlEncode&&(f=WebSquare.xml.encode(f));var b=this.getColumnID(m),y=this.getCellInfo(m);if(""!=y.options.exportFormatter)try{var v=a.Z.getGlobalFunction(y.options.exportFormatter,this.scope_id);"function"==typeof v&&v(d,f,h,b)}catch(t){s.Y.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(g[m]=o.createElement(this.getColumnID(m)),""==this._dataList.options.valueAttribute){var w=o.createTextNode(f);g[m].appendChild(w)}else g[m].setAttribute(this._dataList.options.valueAttribute,f);d.appendChild(g[m])}}}return o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getArrXML=function(t,e,i){try{if(t instanceof Array){var o=!1;this.tagNmArr=this._dataList.options.baseNode.replace(/\[[^\]]+\]/g,"").split("/");for(var r=0;r<this.tagNmArr.length;r++)if(null!=this.tagNmArr[r]&&""!=this.tagNmArr[r].wq_trim())if(o)l.push(n.createElement(this.tagNmArr[r])),l[r-1].appendChild(l[r]);else{var n=WebSquare.xml.parse("<"+this.tagNmArr[r]+"/>"),l=[];l.push(n.documentElement),o=!0}var h=this._dataList.options.repeatNode.replace(/\[[^\]]+\]/g,"").split("/"),d=null;for(r=0;r<t.length;r++){var c=t[r];d=[];for(var u=null,p=0;p<h.length;p++)if(""!=h[p]){var g=n.createElement(h[p]);d.push(g),0==p?l[l.length-1].appendChild(g):d[p-1].appendChild(d[p])}(u=d[h.length-1]).setAttribute("status",this.dataList.getRowStatusValue(c)),u.setAttribute("statusValue",this.dataList.getRowStatus(c)),!0===i?u.setAttribute("id",this._getGroupbyDisplayRowIndex(c)):u.setAttribute("id",c);for(var m=this.getColumnCount(),f=new Array(m),b=0;b<m;b++){var y="";"displayData"!=e?null==(y=this.dataList._getCellData(c,b))&&(y=""):null==(y=this._getCellDisplayData(c,b))&&(y=""),this.options.xmlEncode&&(y=WebSquare.xml.encode(y));var v=this.getColumnID(b),w=this.getCellInfo(b)
;if(""!=w.options.exportFormatter)try{var S=a.Z.getGlobalFunction(w.options.exportFormatter,this.scope_id);"function"==typeof S&&S(u,y,c,v)}catch(t){s.Y.printStackTrace(t,null,this),$l("xmlDtaGetter - tdObj.exportFormatter error")}else{if(f[b]=n.createElement(this.getColumnID(b)),""==this._dataList.options.valueAttribute){var _=n.createTextNode(y);f[b].appendChild(_)}else f[b].setAttribute(this._dataList.options.valueAttribute,y);u.appendChild(f[b])}}}return n}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getDisplayRowIndex=function(t){try{return(this._linkedDataList||this._dataList).getFilteredRowIndex(t)}catch(t){s.Y.printStackTrace(t)}},q.prototype.getOption=function(t){try{return this.options[t]}catch(t){s.Y.printStackTrace(t)}},q.prototype.getDataList=function(){try{var t=this._linkedDataList||this._dataList;return t?t.id:null}catch(t){s.Y.printStackTrace(t)}},q.prototype.getRowNumVisible=function(){try{return this.options.rowNumVisible}catch(t){s.Y.printStackTrace(t)}},q.prototype.makeCustomFilter=function(t){try{null!=this.customFilter&&this.customFilter.remove(),this.customFilter=new WebSquare.uiplugin.floatingLayer(this.id+"_customFilter",{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter",useModal:!0,useModalStack:!0,frameModal:this.options.customFilterFrameModal+"",headerLeftClass:"w2grid_customFilter_HL",headerRightClass:"w2grid_customFilter_HR",headerCenterClass:"w2grid_customFilter_HC",bodyLeftClass:"w2grid_customFilter_BL",bodyRightClass:"w2grid_customFilter_BR",bodyCenterClass:"w2grid_customFilter_BC",bodyLeftBottomClass:"w2grid_customFilter_FL",bodyRightBottomClass:"w2grid_customFilter_FR",bodyBottomClass:"w2grid_customFilter_FC",closeButtonClass:"w2grid_customFilter_btnClose",_scope_obj_uuid:this.options._scope_obj_uuid,title:WebSquare.language.getMessage("Grid_filter_title")||"Custom Filter",titleClass:"w2grid_customFilter_title"});var e=new WebSquare.uiplugin.textbox(this.id+"_text1_"+this.headerID,{style:"position:absolute; margin:10px;",className:"w2grid_customFilter_text",label:WebSquare.language.getMessage("Grid_filter_search_label")||"Search criteria"});this.customFilter.addControl(e),this.selectboxItemSet=["=","<>",">",">=","<","<=",WebSquare.language.getMessage("Grid_filter_condition7")||"= (Metacharacter)",WebSquare.language.getMessage("Grid_filter_condition1")||"Starting character",WebSquare.language.getMessage("Grid_filter_condition2")||"Starting character to be excluded",WebSquare.language.getMessage("Grid_filter_condition3")||"Ending characters",WebSquare.language.getMessage("Grid_filter_condition4")||"Ending character to be excluded",WebSquare.language.getMessage("Grid_filter_condition5")||"Include",WebSquare.language.getMessage("Grid_filter_condition6")||"Exclude"],this._selectboxIgnoreOperatorItemSet=[">",">=","<","<="],this.customFilterItemCnt=0,this.groupList=[];var i=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute; width:100%; height:22px; margin-bottom:5px; background-color:transparent;"});this.customFilter.addControl(i),this.groupList.push(i);var o=this,r=new WebSquare.uiplugin.selectbox(i.id+"_selectbox_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",wheelRows:1,xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var t=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(t.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? matches any single character."),e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* matches matches zero or more characters."),o.setChildrenPosition(),o.customFilterMetacharPos|=1):(o.customFilterMetacharPos&=-2,o.customFilterMetacharPos<=0&&(t.setLabel(""),e.setLabel(""),o.setChildrenPosition()))}}}]});i.addControl(r)
;var n=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",l=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",d=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",c=new WebSquare.uiplugin.autoComplete(i.id+"_autocomplete_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,wheelRows:1,submenuSize:n,displayMode:l,searchTarget:d,delimiter:h});if(c.__setSelectedIndex1=c.setSelectedIndex1,c.setSelectedIndex1=function(t,e){c.__setSelectedIndex1(t,e);var i=c.getValue(),s=this.parentControl.id;if(s)var r=a.Z.getComponentById(s+"_selectbox_"+o.headerID);if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},i.addControl(c),"label"==l||"value delim label"==l||"label delim value"==l)for(var p=this.changeItemValue("label",this.targetColID,this.colDataList,!1),g=0;g<this.colDataList.length;g++){var m=void 0!==p[g]?p[g]:this.colDataList[g];c.addItem(m,this.colDataList[g])}else if(this.colDataList)for(g=0;g<this.colDataList.length;g++)c.addItem(this.colDataList[g],this.colDataList[g]);for(var f=this.headCellInfoHash[this.headerID].getAttribute("customFilterItemCnt")||2,b=0;b<f-1;b++)this.addCustomFilterItem(b);var y=new WebSquare.uiplugin.textbox(this.id+"_text2_"+this.headerID,{style:"position:absolute; margin-left:10px; margin-top:5px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(y);var v=new WebSquare.uiplugin.textbox(this.id+"_text3_"+this.headerID,{style:"position:absolute; margin:5px; margin-bottom:10px; margin-left:10px;",className:"w2grid_customFilter_text"});this.customFilter.addControl(v);var w=new WebSquare.uiplugin.group(this.id+"_buttonGroup_"+this.headerID,{style:"position:absolute;",className:"w2grid_customFilter_buttonGroup"});if(this.customFilter.addControl(w),this.options.showCustomFilterReset){var S=new WebSquare.uiplugin.textbox(this.id+"_btnReset_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",label:WebSquare.language.getMessage("Grid_filter_reset")||"Reset",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.groupbyStatus&&o.groupbyStatus.grouped&&o.options.groupbyFilterBox;for(var e=0;e<o.groupList.length;e++)for(var i=o.groupList[e].getChildren(),s=0;s<i.length;s++){var r=i[s];if(-1!=r.id.indexOf("_selectbox")){var a=o.itemValueObj[o.targetColID]["select"+e];r.setSelectedIndex(a||0)}else if(-1!=r.id.indexOf("_autocomplete")){var n=o.itemValueObj[o.targetColID]["auto"+e];r.setValue(n||"")}else if(-1!=r.id.indexOf("_radio")){var l=o.itemValueObj[o.targetColID]["radio"+e];r.setSelectedIndex(l||0)}}}}}]});w.addControl(S),S.addEvent("onmousedown",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),S.addEvent("onmouseup",(function(){S.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),S.addEvent("onmouseout",(function(){S.toggleClass("w2grid_customFilter_button_selected")}))}var _=new WebSquare.uiplugin.textbox(this.id+"_btnConform_"+this.headerID,{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_confirm")||"OK",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.setCustomFilterExpression()}}},{name:"onkeydown",action:"script",param:{handler:function(t){13==(t.charCode?t.charCode:t.keyCode)&&(o.setCustomFilterExpression(),o.hideCustomFilterList())}}}]});w.addControl(_),
_.addEvent("onmousedown",(function(){_.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!0})),_.addEvent("onmouseup",(function(){_.toggleClass("w2grid_customFilter_button_selected"),this.customFilterBtnSelected=!1})),_.addEvent("onmouseout",(function(){_.toggleClass("w2grid_customFilter_button_selected")}));var C=new WebSquare.uiplugin.textbox(this.id+"_btnCancel",{style:"position:absolute; border-width:1px;",className:"w2grid_customFilter_button",tabIndex:"0",label:WebSquare.language.getMessage("Grid_filter_cancel")||"Cancel",xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide()}}},{name:"onkeydown",action:"script",param:{handler:function(t){var e=t.charCode?t.charCode:t.keyCode;9==e?(C.tabOrderMoveStart=!1,t.shiftKey||(C.tabOrderMoveStart=!0,u.f.preventDefault(t))):13==e&&(o.options.groupbyZone&&o.firstOpenCustomFilter[o.headerID]&&(o.firstOpenCustomFilter[o.headerID]=!1),o.customFilter.hide(),o.hideCustomFilterList())}}},{name:"onkeyup",action:"script",param:{handler:function(t){9==(t.charCode?t.charCode:t.keyCode)&&(t.shiftKey||C.tabOrderMoveStart&&(C.tabOrderMoveStart=!1,o.customFilter.render.getElementsByClassName("w2floatingLayer_close_button")[0].focus()))}}}]});w.addControl(C),C.addEvent("onmousedown",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseup",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),C.addEvent("onmouseout",(function(){C.toggleClass("w2grid_customFilter_button_selected")})),this.customFilter.writeTo(WebSquare.getBody()),this.customFilter.activate(),this.customFilter.dom.closeButton.addEventListener("keydown",(function(t){9==(t.charCode?t.charCode:t.keyCode)&&t.shiftKey&&C.focus()})),this.setChildrenPosition(),this.setDefaultValue(t),C.render.style.left=w.render.offsetWidth-C.render.offsetWidth-10+"px",_.render.style.left=parseInt(C.render.style.left,10)-_.render.offsetWidth-5+"px",this.options.showCustomFilterReset&&(S.render.style.left=parseInt(_.render.style.left,10)-C.render.offsetWidth-17+"px"),this.customFilter.hide()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setDefaultValue=function(t){for(var e=0;e<this.groupList.length;e++)for(var i=this.groupList[e].getChildren(),o=0;o<i.length;o++){var s,r=i[o];if(-1!=r.id.indexOf("_selectbox")){s=r;for(var a=0;a<this.selectboxItemSet.length;a++)">"===this.selectboxItemSet[a]||">="===this.selectboxItemSet[a]||"<"===this.selectboxItemSet[a]||"<="===this.selectboxItemSet[a]?r.addItemArr(this.selectboxItemSet[a],this.selectboxItemSet[a],!1):r.addItemArr(this.selectboxItemSet[a],this.selectboxItemSet[a]);var n=this.itemValueObj[this.targetColID]["select"+e];r.setSelectedIndex(n||0)}else if(-1!=r.id.indexOf("_autocomplete")){var l=this.itemValueObj[this.targetColID]["auto"+e];r.setValue(l||"");var h=r.getValue();if(s){if(isNaN(h))for(a=0;a<s.itemArr.length;a++)void 0!==s.itemArr[a]._hidden&&(s.itemArr[a]._hidden=!0);else for(a=0;a<s.itemArr.length;a++)!0===s.itemArr[a]._hidden&&(s.itemArr[a]._hidden=!1);s.setSelectOptions(s.itemArr)}s=null}else if(-1!=r.id.indexOf("_radio")){r.addItem("OR","OR","0"),r.addItem("AND","AND","0");var d=this.itemValueObj[this.targetColID]["radio"+e];r.setSelectedIndex(d||0)}}},q.prototype.getUniqueValueOfArray=function(t,e){try{if(this._isNumberType(e))if("bigDecimal"!==e||isNaN(WebSquare.bigDecimal("").big))t.sort((function(t,e){return parseFloat(t)-parseFloat(e)}));else{var i,o;t.sort((function(t,e){if(""===t&&""===e)return 0;i=WebSquare.bigDecimal(t),o=WebSquare.bigDecimal(e);var s=i.minus(o);return"0"===s.toString()?0:"0"!==s.compare("0")?1:-1}))}else t.sort();for(var r=[],a=!1,n=0;n<t.length;n++)null!==t[n]?(0===r.length||r[r.length-1]!==t[n]&&r[r.length-1]+""!=t[n]+"")&&r.push(t[n]):a=!0;return a&&r.unshift(null),r}catch(t){s.Y.printStackTrace(t,null,this)}},
q.prototype.setAutoCompleteItem=function(t,e){var i=[];if(this.options.useFilterSearch&&this.customFilterList&&this.customFilterList.filterHistory.column.length>0){var o=this.getCustomFilterListJSON({colID:t,headerID:e}),s=this.headerInfoHash[e],r=0;s&&s.options.hideCustomFilter&&(r=1);for(var n=2-r;n<o.length;n++)i.push(o[n].id2)}else i=this.dataList.getColData(t);for(var l in this.itemValueObj[this.targetColID])-1!=l.indexOf("auto")&&""!=this.itemValueObj[this.targetColID][l]&&i.push(this.itemValueObj[this.targetColID][l]);this.colDataList=this.getUniqueValueOfArray(i),this.colDataList.sort((function(t,e){var i=t-e;a.Z.isIE("6 7")&&(i=(t+"").localeCompare(e+""));return i}))},q.prototype.showFilterOptions=function(t){this.options.useFilterList?(this.options.searchFilter,this.customFilterList&&this.customFilterScrollView?this.toggleCustomFilterList(t):this.createCustomFilterList(t)):this.showCustomFilter(t)},q.prototype.showCustomFilter=function(t){if(this.noevent=!0,this.options.useFilterList)if(this.groupbyStatus.grouped)if(this.options.groupbyFilterIcon){var e=this.headerToBodyRelation[t];if(e){for(var i=!1,o=this.getColumnIndex(e),s=0;s<this.groupbyStatus.sortIndexArr.length;s++)if(this.groupbyStatus.sortIndexArr[s]==o){i=!0;break}var r={};r.render=this.getElementById(this.id+"_"+t),r.parentRender=this.render.getElementsByTagName("div")[0],r.headerID=t,r.headerIndex=this.getHeaderIndex(r.headerID),r.isGroupbyColumn=i,this.groupbyFilterList?this.toggleGroupbyFilterList(r):this.createGroupbyFilterList(r)}}else this._showCustomFilter(t);else this.showFilterOptions(t);else this._showCustomFilter(t)},q.prototype.showCustomFilter2=function(t){this.noevent=!0,this._showCustomFilter(t)},q.prototype._showCustomFilter=function(t){var e,i;(this.headerID=t,this.targetColID=this.getColIdByHeaderId(t),null==this.customFilter&&(this.itemValueObj={},this.customFilterStatusObj={}),this.itemValueObj[this.targetColID]||(this.itemValueObj[this.targetColID]={}),this.setAutoCompleteItem(this.targetColID,t),this.makeCustomFilter(this.targetColID,t),"BODY"==this.render.parentNode.tagName)?(e=this.render.offsetTop,i=this.render.offsetLeft):(e=WebSquare.style.getAbsoluteTop(this.render),i=WebSquare.style.getAbsoluteLeft(this.render),a.Z.isIEAllVersion("5 6 7")||(e-=WebSquare.style.getAbsoluteTop(document.body)));var o=this.getHeaderPosition(t,"top"),s=this.getHeaderPosition(t,"left"),r=this.getHeaderSize(t,"width"),n=this.getHeaderSize(t,"height"),l=0,h=0;"number"==typeof window.innerWidth?(l=window.innerWidth,h=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(l=document.documentElement.clientWidth,h=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(l=document.body.clientWidth,h=document.body.clientHeight);var d,c,u=parseInt(a.Z.getStyleProperty(this.customFilter.render,"width"),10),p=parseInt(a.Z.getStyleProperty(this.customFilter.render,"height"),10),g=0,m=0;a.Z.isIE("6 7 8")?(d=document.documentElement.scrollTop,c=document.documentElement.scrollLeft):(d=window.pageYOffset,c=window.pageXOffset),g=i+s+r+u<=l+c?i+s+r:i+s-u,m=e+o+n+p<=h+d?e+o+n:e+this.render.offsetHeight-p,g<c&&(g=(l-u)/2+c,(m=e+this.render.offsetHeight)+p>h+d&&(m=e-p)),m<d&&(m=(h-p)/2+d),this.customFilter.render.style.left=g+"px",this.customFilter.render.style.top=m+"px",this.customFilter.show();var f=a.Z.getComponentById(this.id+"_item_0_selectbox_"+this.headerID);f&&f.focus()},q.prototype.addCustomFilterItem=function(t){this.customFilterItemCnt++;var e=new WebSquare.uiplugin.group(this.id+"_item_"+this.customFilterItemCnt,{style:"position:absolute;",className:"w2grid_customFilter_item"});this.customFilter.addControl(e),this.groupList.push(e);var i=new WebSquare.uiplugin.radio(e.id+"_radio",{style:"position:absolute; left:50px; height:20px;",className:"w2grid_customFilter_radio",selectedIndex:0,cols:2,rows:1});e.addControl(i)
;var o=this,s=new WebSquare.uiplugin.selectbox(e.id+"_selectbox",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_selectbox",textAlign:"left",chooseOption:!0,visibleColumn:"true",xmlEvents:[{name:"onchange",action:"script",param:{handler:function(){var e=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-2],i=o.customFilter.getChildren()[o.customFilter.getChildrenCount()-3];7==this.getSelectedIndex()?(e.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label1")||"? matches any single character."),i.setLabel(WebSquare.language.getMessage("Grid_filter_info_Label2")||"* matches matches zero or more characters."),o.setChildrenPosition(),o.customFilterMetacharPos|=1<<t+1):(o.customFilterMetacharPos&=~(1<<t+1),o.customFilterMetacharPos<=0&&(e.setLabel(""),i.setLabel(""),o.setChildrenPosition()))}}}]});e.addControl(s);var r=this.headerInfoHash[this.headerID].options.filterSubmenuSize||"",n=this.getCellInfo(this.targetColID).options.filterDisplayMode||"label",l=this.getCellInfo(this.targetColID).options.filterSearchTarget||"label",h=this.getCellInfo(this.targetColID).options.delimiter||" ",d=new WebSquare.uiplugin.autoComplete(e.id+"_autocomplete",{style:"position:absolute; top:25px;",className:"w2grid_customFilter_autocomplete",noResult:"useData",ignoreBlankOnNoResult:!0,chooseOption:!0,caseSensitive:this.options.caseSensitive,submenuSize:r,displayMode:n,searchTarget:l,delimiter:h});if(d.__setSelectedIndex1=d.setSelectedIndex1,d.setSelectedIndex1=function(t,e){d.__setSelectedIndex1(t,e);var i=d.getValue(),s=this.parentControl.id;if(s)var r=a.Z.getComponentById(s+"_selectbox");if(r){if(isNaN(i)){for(var n=0;n<r.itemArr.length;n++)void 0!==r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!0);for(var l=r.getValue(),h=0;h<o._selectboxIgnoreOperatorItemSet.length;h++)l===o._selectboxIgnoreOperatorItemSet[h]&&r.setSelectedIndex(0)}else for(n=0;n<r.itemArr.length;n++)!0===r.itemArr[n]._hidden&&(r.itemArr[n]._hidden=!1);r.setSelectOptions(r.itemArr)}},e.addControl(d),"label"==n||"value delim label"==n||"label delim value"==n)for(var c=this.changeItemValue("label",this.targetColID,this.colDataList,!1),u=0;u<this.colDataList.length;u++)d.addItem(c[u],this.colDataList[u]);else if(this.colDataList)for(u=0;u<this.colDataList.length;u++)d.addItem(this.colDataList[u],this.colDataList[u])},q.prototype.setChildrenPosition=function(){for(var t=this.customFilter.getChildren(),e=1;e<=t.length;e++){var i=WebSquare.style.getStyle(t[e-1].render,"top");if(i="auto"===i?"0":i,e===t.length)break;var o=WebSquare.style.getStyle(t[e-1].render,"margin-bottom");o="auto"===o?"0":o,t[e].render.style.top=t[e-1].render.offsetHeight+5+parseInt(i||"0",10)+parseInt(o||"0",10)+"px"}var s=this.customFilter.dom.closeButton.parentNode.offsetHeight,r=t[e-1].render.offsetHeight+10+parseInt(i||"0",10);this.customFilter.setSize(this.customFilter.render.offsetWidth,s+r+6)},q.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"*"==t||"?"==t||"\\"==t?"\\"+t:void 0},q.prototype.setCustomFilterExpression=function(){try{this.dataList.removeColumnFilter(this.targetColID,{noRefreshAfter:!0});for(var t=!0,e=[],i=0;i<this.groupList.length;i++){for(var o={},r=this.groupList[i].getChildren(),a=0;a<r.length;a++){var n=r[a];if(-1!=n.id.indexOf("_selectbox"))o.select=n.getSelectedIndex(),this.itemValueObj[this.targetColID]["select"+i]=n.getSelectedIndex(),t=t&&0==n.getSelectedIndex(),o.dataType=this.getDataType(this.targetColID);else if(-1!=n.id.indexOf("_autocomplete")){var h=this;o.auto=n.getValue()!=n.options.chooseOptionLabel?(n.getValue()+"").replace(/[\^\$\.\[\]\{\}\+\(\)\|\*\\\?]/g,(function(t){return h.replacechar(t)})):"",this.itemValueObj[this.targetColID]["auto"+i]=n.getValue(),t=t&&n.getValue()==n.options.chooseOptionLabel}else-1!=n.id.indexOf("_radio")&&(o.radio=n.getSelectedIndex(),this.itemValueObj[this.targetColID]["radio"+i]=n.getSelectedIndex())}o.select&&e.push(o)}
var d=this.getCellInfo(this.targetColID);"select"!==d.options.inputType&&"checkcombobox"!==d.options.inputType&&"autoComplete"!==d.options.inputType||(e.itemArr=d.getItemArray(),e.isSelectCol=!0),this.customFilterStatusObj[this.headerID]=!0;var c={type:"func",colIndex:this.targetColID,key:this.customFilterOperator,condition:"and",columnfilterchangeFire:!1,param:e},p=!1;if(this.customFilterList&&this.customFilterList.customFilterListFilterInfo){var g=this.customFilterList.customFilterListFilterInfo[this.targetColID];this.customFilterList.customFilterListFilterInfo[this.targetColID]=JSON.stringify(c,(function(t,e){return"function"==typeof e||"object"===(0,l.A)(e)&&e.constructor===RegExp?e.toString():e})),g!==this.customFilterList.customFilterListFilterInfo[this.targetColID]&&(p=!0,u.f.fireEvent(this._dataList,"onbeforecolumnfilterchange"))}this.dataList.setColumnFilter(c),p&&u.f.fireEvent(this._dataList,"onaftercolumnfilterchange");var m=this.getElementById(this.id+"_"+this.headerID+"_filter");t||0==e.length?WebSquare.style.removeClass(m,"w2grid_customFilter_filter"):WebSquare.style.addClass(m,"w2grid_customFilter_filter"),this.customFilter.hide()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.customFilterOperator=function(t,e,i){try{for(var o=!0,r=0;r<e.length;r++){var a,n=!0,l=e[r].dataType,h=e[r].select,d=e[r].auto,c=e[r].auto.replace(".*","~~").replace(".","~"),u=c;if(!0===e.isSelectCol&&e.itemArr&&e.itemArr.length){for(var p=!1,g=0;g<e.itemArr.length;g++)if(e.itemArr[g].value===d){p=!0;break}if(!1===p)for(var m=0;m<e.itemArr.length;m++)if(e.itemArr[m].value===t){t=e.itemArr[m].label;break}}var f=t;if(h>=3&&h<=6)if("bigDecimal"===l){c=d.replace("\\.",".");var b=WebSquare.bigDecimal(c);"NaN"===b.big?!1:(u=b,f=WebSquare.bigDecimal(t))}else"number"!==l&&"float"!==l||(u=(c=d.replace("\\.",".")).toString().indexOf(".")>-1?parseFloat(c):parseInt(c,10));switch(e[r].select){case 1:(a=new RegExp(d,"g")).lastIndex=0,n=t==a.exec(t);break;case 2:(a=new RegExp(d,"g")).lastIndex=0,n=t!=a.exec(t);break;case 3:n="bigDecimal"===l?f.minus(u)>0:f>u;break;case 4:n="bigDecimal"===l?f.minus(u)>=0:f>=u;break;case 5:n="bigDecimal"===l?f.minus(u)<0:f<u;break;case 6:n="bigDecimal"===l?f.minus(u)<=0:f<=u;break;case 7:d=(d=d.replace(/\\\*/g,".*")).replace(/\\\?/g,".");var y=(a=new RegExp(d,"g")).exec(t);n=t==y||d==y;break;case 8:n=""==d?t==d:!!(a=new RegExp("^("+d+")","g")).test(t);break;case 9:n=!!(a=new RegExp("^[^("+d+")]","g")).test(t);break;case 10:n=""==d?t==d:!!(a=new RegExp("("+d+")$","g")).test(t);break;case 11:n=!!(a=new RegExp("[^("+d+")]$","g")).test(t);break;case 12:n=""==d?t==d:!!(a=new RegExp(d,"g")).test(t);break;case 13:n=""==d?t!=d:!!(a=new RegExp("^(?!.*"+d+").*","g")).test(t);break;default:n=t==d}if(1===e.length){o=n;break}0!==r?o=0==e[r].radio?o&&n:o||n:o=n}return o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.syncWithSortStatus=function(){try{this.headerSortStatusArr=[];for(var t=this._linkedDataList||this._dataList,e=0;e<t.sortStatusArr.length;e++){var i=t.sortStatusArr[e];"number"==typeof this.getColumnIndex(i.colID)&&(this.headerSortStatusArr.push(i),this.headerSortStatusArr[i.colID]=i)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getFixedColumnLastIndex=function(t){try{if(!this.options.rowNumStatusFixed&&0===this.options.fixedColumn||!1===t)var e=this.options.fixedColumn;else e=this.options.fixedColumn+this.defaultColCnt;if(e<1)return 0;if(!this.options.fixedColumnWithHidden)for(var i=0,o=0;o<this.hiddenList.length;o++)if(this.hiddenList[o]||i++,i==e)return o+1;return e}catch(t){return s.Y.printStackTrace(t,null,this),this.options.fixedColumn+this.defaultColCnt}},q.prototype.getFixedRightColumnLastIndex=function(){try{var t=this.colWidthList.length-this.options.fixedRightColumn,e=0;if(this.colWidthList.length!=t)for(var i=this.hiddenList.length-1;i>=0;i--)if(this.hiddenList[i])t--;else if(e++,this.options.fixedRightColumn==e)break;return t}catch(t){return s.Y.printStackTrace(t,null,this),
this.colWidthList.length-this.options.fixedRightColumn}},q.prototype.columnValue=function(t,e){try{return e=this.getColumnID(e),null!=t.nodeType&&void 0!==t.selectSingleNode?null==this.options.valueNode||""==this.options.valueNode?a.Z.getTextNodeValue(t.selectSingleNode(e)):t.selectSingleNode(e).getAttribute(this.options.valueNode):t[e]}catch(t){s.Y.printStackTrace(t,null,this)}return""},q.prototype.rowIndexValue=function(t){return t},q.prototype.getColumnOption=function(t,e){try{var i="";if(this.successBinding){var o=this.cellInfoHash[t];if("dataType"==e)if(o){var r=o.options.dataType;i=r||this._dataList.getColumnOption(t,e)}else(i=this._dataList.getColumnOption(t,e))||(i="text");else i=o.options[e]||"";return i}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnOption=function(t,e,i){try{this.successBinding&&this._dataList.setColumnOption(t,e,i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getColumnDataListInfo=function(t){try{var e=this.getCellInfo(t);return"select"==e.options.inputType||"autoComplete"==e.options.inputType||"checkcombobox"==e.options.inputType?e.getColumnDataListInfo():null}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setInitStyle=function(t){if(WebSquare.initStyle[this.id]){for(var e,i=/([\w-]*)\s*:\s*([^;]*)/g,o={};e=i.exec(WebSquare.initStyle[this.id].style);)o[e[1]]=e[2].wq_trim();var s=o[t]?t:"";if(s){var r=s.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()})),a=o[s]?o[s]:o[s.toUpperCase()];document.getElementById(this.id).style[r]=a}else document.getElementById(this.id).style.cssText=WebSquare.initStyle[this.id].style,this.rowStyleArr=[],this.colStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.columnClassObj={},this._cellSelectedIndex=[],this._removeAllTDCellClass(),this._removeAllTRClass(),this.applyStyleOptions(this.getTotalRow());document.getElementById(this.id).className=WebSquare.initStyle[this.id].className}},q.prototype.refresh=function(t){try{this._dataList.broadcast({gridView:["notifyRefresh",[t]]})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.checkAdaptiveGridType=function(){try{if(this.options.groupbyZone){var t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] Adaptive mode not supported for this grid.";return!1}if(!this.render)return!1;var e=this.htmlInfo.head.rowAttrArr.length,i=this.htmlInfo.body.rowAttrArr.length,o=0;if(this.hasSubtotal)for(var r=this.htmlInfo.subtotalArr,n=0;n<r.length;n++)o+=r[n].rowAttrArr.length;if(1==e&&1==i&&(this.adaptiveGridType=1),1==e&&2==i?this.adaptiveGridType=2:2==e&&1==i?this.adaptiveGridType=3:2==e&&2==i?this.adaptiveGridType=4:3==e&&1==i&&(this.adaptiveGridType=5),e>3||i>2||o>3){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] Adaptive mode not supported for this grid.";return $l(t),!1}if(e+(i>o?i:o)>4){t=WebSquare.language.getMessage("Grid_warning5",this.id)||"["+this.id+"] Adaptive mode not supported for this grid.";return $l(t),!1}return!(a.Z.isIE(6)||a.Z.isIE(7)||a.Z.isIE(8)||a.Z.isIE(9))}catch(t){s.Y.printStackTrace(t)}},q.prototype.setAdaptiveGridBodyHeight=function(){try{for(var t=function(t){var e=this.getColumnIndex(t),i=parseInt(this.getAdaptiveColumnStyleValue(e,"height"),10);isNaN(i)||(this.orgBodyHeightObj[t]=this.getColumnStyleValue(e,"height"),this.setColumnStyle(t,"height",i+"px"))},e=this.htmlInfo.head.rowArr,i=0;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++){var a=o[r],n=parseInt(a.colSpan,10),l=a.id,h=this.headerToBodyRelation[l],d=this.getColumnIndex(h);if(!isNaN(n)&&n>1)for(var c=0;c<n;c++)t.call(this,this.getColumnID(d+c));else t.call(this,h)}}catch(t){s.Y.printStackTrace(t)}},q.prototype.removeAdaptiveGridBodyHeight=function(){try{for(var t in this.orgBodyHeightObj)this.setColumnStyle(t,"height",this.orgBodyHeightObj[t])}catch(t){s.Y.printStackTrace(t)}},q.prototype.setAdaptiveGridHeaderHeight=function(){try{
var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"),10),i=parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"),10);0===e&&null!=this.oldOptions.headerPaddingTop&&(e=parseInt(this.oldOptions.headerPaddingTop,10)),0===i&&null!=this.oldOptions.headerPaddingBottom&&(i=parseInt(this.oldOptions.headerPaddingBottom,10));for(var o=e+i,r=this.htmlInfo.head.rowArr,a=0;a<r.length;a++)for(var n=r[a],l=0;l<n.length;l++){var h=n[l],d=parseInt(h.colSpan,10),c=h.id,u=this.headerToBodyRelation[c],p=this.getColumnIndex(u),g=parseInt(this.getCellInfo(p).options.colSpan,10),m=0,f=0,b=this.headerInfoHash[c];if(b&&b.options&&"string"==typeof b.options.style)for(var y=b.options.style.split(";"),v=0;v<y.length;v++){if("height"==(_=y[v].split(":"))[0]){f=parseInt(_[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(c,"height"),10);if(null!=p)if(d>0){var w=d;for(v=p;v<p+d;v++)this.hiddenList[v]?w--:(m+=parseInt(this.getColumnStyleValue(v,"height"),10),m+=o);f!=(m-=o-(w-1))&&(null==this.orgHeaderHeightObj[c]&&(this.orgHeaderHeightObj[c]=f+"px"),w>0&&this.setHeaderStyle(c,"height",m+"px"))}else if(m=parseInt(this.getColumnStyleValue(p,"height"),10),g>1){m-=(o+1)*(g-1);var S=Math.round(m/g);for(v=l;v<l+g;v++){if(c=(h=n[v]).id,this.headerInfoHash[c])for(y=this.headerInfoHash[c].options.style.split(";"),v=0;v<y.length;v++){var _;if("height"==(_=y[v].split(":"))[0]){f=parseInt(_[1],10);break}}else f=parseInt(this.getHeaderCellStyleValue(c,"height"),10);v==l+g-1?(this.orgHeaderHeightObj[c]=f+"px",this.setHeaderStyle(c,"height",m+"px")):(this.orgHeaderHeightObj[c]=f+"px",this.setHeaderStyle(c,"height",S+"px"),m-=S)}}else f!=m&&(null==this.orgHeaderHeightObj[c]&&(this.orgHeaderHeightObj[c]=f+"px"),this.hiddenList[p]||this.setHeaderStyle(c,"height",m+"px"))}if(this.hasFooter){var C=this.htmlInfo.foot.rowArr;for(a=0;a<C.length;a++){var x=C[a];for(l=0;l<x.length;l++){var I=x[l],T=parseInt(I.colSpan),k=I.id,L=(p=l,m=0,parseInt(this.getFooterStyle(k,"height")));if(T>0){for(v=p;v<p+T;v++)m+=parseInt(this.getColumnStyleValue(v,"height")),m+=o;m-=o-(T-1)}else m=parseInt(this.getColumnStyleValue(p,"height"));L!=m&&(this.orgFooterHeightObj[k]=L+"px",this.setFooterStyle(k,"height",m+"px"))}}}}catch(t){s.Y.printStackTrace(t)}},q.prototype.removeAdaptiveGridHeaderHeight=function(){try{for(var t in this.orgHeaderHeightObj)this.setHeaderStyle(t,"height",this.orgHeaderHeightObj[t]);for(var t in this.orgFooterHeightObj)this.setFooterStyle(t,"height",this.orgFooterHeightObj[t])}catch(t){s.Y.printStackTrace(t)}},q.prototype.setAdaptiveGridSubtotalHeight=function(){try{var t=this.getHeaderID(0),e=parseInt(this.getHeaderCellStyleValue(t,"padding-top"))+parseInt(this.getHeaderCellStyleValue(t,"padding-bottom"));if(0==this.orgSubtotalHeightArr.length)for(var i=0;i<this.drawedSubtotal.length;i++)for(var o=0;o<this.drawedSubtotal[i].length;o++)for(var r=this.drawedSubtotal[i][o].childNodes,a=this.defaultColCnt;a<r.length;a++){var n=parseInt(r[a].getAttribute("colSpan")),l=0,h=r[a].style.height;if(null!=n&&n>0){for(var d=a;d<a+n;d++)l+=parseInt(this.getColumnStyleValue(d-this.defaultColCnt,"height")),l+=e;l-=e-(n-1)}else l=h;h!=l&&(this.orgSubtotalHeightArr.push({height:h,elem:r[a]}),r[a].style.height=l+"px")}}catch(t){s.Y.printStackTrace(t)}},q.prototype.removeAdaptiveGridSubtotalHeight=function(){try{for(var t=0;t<this.orgSubtotalHeightArr.length;t++){var e=this.orgSubtotalHeightArr[t];e.elem.style.height=e.height}this.orgSubtotalHeightArr=[]}catch(t){s.Y.printStackTrace(t)}},q.prototype.setDrillDownDragDrop=function(t){try{this.drillDownDragDrop=a.Z.getBoolean(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getDataListInfo=function(){try{if(this.successBinding){var t={};return t.id=this.options.dataList,t}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getInputType=function(t){try{return this.getCellInfo(t).options.inputType}catch(t){s.Y.printStackTrace(t)}},q.prototype.getDataType=function(t){try{
return this.getCellInfo(t).options.dataType||this._dataList.getCellInfo(t).options.dataType}catch(t){s.Y.printStackTrace(t)}},q.prototype.getFakeExpressionArr=function(){try{for(var t=[],e=[],i=0;i<this.dataList.getRowCount();i++)(t=this._dataList.getRowData(i)).push(""),e=e.concat(t);return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setUseFilterList=function(t){try{this.options.useFilterList=a.Z.getBoolean(t),this.options.sortable&&this.options.showSortableImage&&(this.options.showSortableUseFilter=!0)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setUseFilter=function(t,e){try{var i=t,o=this.headerInfoHash[i];if(null==o&&(i=this.bodyToHeaderRelation[i],null==(o=this.headerInfoHash[i])))return!1;var r=o.options.useFilter,n=a.Z.getBoolean(e);if(r===n)return!1;o.options.useFilter=n;var l,h=this.getHeaderLayer(i);if(this._clearHeaderSortImage(h,"table"),this._clearHeaderSortImage(h,"div"),!0===r)null!=(l=document.getElementById(this.id+"_"+i+"_filter"))&&(l.style.display="none");else if(null!=(l=document.getElementById(this.id+"_"+i+"_filter")))l.style.display="";else{var d=this.headerObj[i],c=h.innerHTML,u=h.getElementsByTagName("td");d&&(c=""),h.innerHTML="<table style='width:100%;height:100%;'><tr><td style='width:100%;'>"+c+"</td><td><input type='button' id='"+this.id+"_"+i+"_filter' class='w2trigger w2grid_customFilter_open' onclick='"+this.id+'.showCustomFilter("'+i+"\");'/></td></tr></table>",d&&(d.render?u[0].appendChild(d.render):u[0].appendChild(d))}var p=a.Z.getDataPrefix("useFilter");return n?h.setAttribute(p,n):h.removeAttribute(p),this.drawHeaderSortImages(),!0}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getFixedRow=function(){var t=parseInt(this.options.fixedRow,10);return t=isNaN(t)?0:t},q.prototype.getLastFixedRow=function(){var t=parseInt(this.options.lastFixedRow,10);return t=isNaN(t)?0:t},q.prototype.isVirtualCursor=function(){try{if(1==this.options.senseReader&&"all"!=this.options.visibleRowNum)if(this.getLastFocusedCell().focusedRowIndex>this.lastIndex&&0==this.getElementById(this.id+"_scrollY_div").scrollTop)return!0;return!1}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeCell=function(t){try{if(null==t||null==t.rowIndex||null==t.colIndex)return void p.v.printLog("gridView mergeCell error : invalid argument ["+this.id+"]");null==t.rowSpan&&(t.rowSpan=1),null==t.colSpan&&(t.colSpan=1);var e=parseInt(t.rowIndex,10),i=parseInt(t.colIndex,10),o=parseInt(t.rowSpan,10),r=parseInt(t.colSpan,10),n=this.getRealRowIndex(e);o>1||r>1?(this.cellMergeInfo[e+"_"+i]={rowSpan:o,colSpan:r},this.cellMergeRealInfo[e+"_"+i]=n):null!=this.cellMergeInfo[e+"_"+i]&&(delete this.cellMergeInfo[e+"_"+i],delete this.cellMergeRealInfo[e+"_"+i]);for(var l=!(!this.isDrillDown||!this._dataList.options.depthColumn),h=l?e:n,d=this.dataList._getCellData(h,i,"3"),c=0;c<o;c++)for(var u=0;u<r;u++)if(0!==c||0!==u){var g={filteredRowIndex:e+c,colID:i+u,data:d,useRealRowIndex:l};this.dataList._setCellData(g),this.cellMergeInfo[e+c+"_"+(i+u)]&&delete this.cellMergeInfo[e+c+"_"+(i+u)]}this.dynamicMergeHTML(),this.options.oddEvenColorDisplay&&!0===this._isBrowserScroll()&&a.Z.setTimeout(this.redrawTable,{key:this.id+"_mergeCell",delay:100,caller:this})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeFocusedCell=function(){try{if(this.focusedCell.length>1){var t=this.focusedCell.length-1;this.mergeCell({rowIndex:this.focusedCell[0].focusedRowIndex,colIndex:this.focusedCell[0].focusedColIndex,rowSpan:this.focusedCell[t].focusedRowIndex-this.focusedCell[0].focusedRowIndex+1,colSpan:this.focusedCell[t].focusedColIndex-this.focusedCell[0].focusedColIndex+1})}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeSplitFocusedCell=function(){try{for(var t=0;t<this.focusedCell.length;t++)this.mergeCell({rowIndex:this.focusedCell[t].focusedRowIndex,colIndex:this.focusedCell[t].focusedColIndex,rowSpan:1,colSpan:1})}catch(t){s.Y.printStackTrace(t,null,this)}},
q.prototype.mergeClear=function(t){try{void 0!==t&&null!=t||(t={}),this.cellMergeInfo={},this.cellMergeRealInfo={},this.options.mergeCells="never",this.options.mergeCellsFixedCols="never",this.options.mergeCellsFixedRows="never",!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeNotifyRowChanged=function(t,e){try{var i="removeRow"===t?-1:1,o={};for(var r in this.cellMergeInfo){var a=r.split("_"),n=parseInt(a[0],10),l=parseInt(a[1],10),h=this.cellMergeInfo[r];if(n<=e&&e<n+h.rowSpan)if(-1===i){if(h.rowSpan--,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}else if(n<e){var d=h.rowSpan-(e-n);if((d>1||1==d&&h.colSpan>1)&&(o[e+1+"_"+l]={rowSpan:d,colSpan:h.colSpan}),h.rowSpan-=d,h.rowSpan<=0||1==h.rowSpan&&h.colSpan<=1)continue}(n>e||n==e&&-1!==i)&&(n+=i),o[n+"_"+l]=h}this.cellMergeInfo=o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeNotifyFilter=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols){var t={};for(var e in this.cellMergeRealInfo._hidden){var i=e.split("_"),o=parseInt(i[0],10),r=parseInt(i[1],10),a=this.getDisplayRowIndex(o);isNaN(a)||(t[a+"_"+r]=this.cellMergeRealInfo._hidden[e],delete this.cellMergeRealInfo._hidden[e],this.cellMergeRealInfo[a+"_"+r]=o)}for(var n in this.cellMergeInfo){var l=n.split("_"),h=(r=parseInt(l[1],10),this.cellMergeInfo[n]);o=this.cellMergeRealInfo[n],a=this.getDisplayRowIndex(o);isNaN(a)?(this.cellMergeRealInfo._hidden||(this.cellMergeRealInfo._hidden={}),this.cellMergeRealInfo._hidden[o+"_"+r]=h,delete this.cellMergeRealInfo[n]):(t[a+"_"+r]=h,delete this.cellMergeRealInfo[n],this.cellMergeRealInfo[a+"_"+r]=o)}this.cellMergeInfo=t}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByFree=function(t,e,i,o){try{return this.mergeCell({rowIndex:t,colIndex:e,rowSpan:i-t+1,colSpan:o-e+1})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.unmergeByFree=function(t,e){try{return this.mergeCell({rowIndex:t,colIndex:e,rowSpan:1,colSpan:1})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeCells=function(t,e){try{this._mergeCells(t,e,{type:"mergeCells"})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByCol=function(t){try{this._mergeCells("bycol",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByRow=function(t){try{this._mergeCells("byrow",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByColRec=function(t){try{this._mergeCells("bycolrec",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByRowRec=function(t){try{this._mergeCells("byrowrec",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByRestricCol=function(t){try{this._mergeCells("byrestriccol",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeByRestricRow=function(t){try{this._mergeCells("byrestricrow",t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeCells=function(t,e,i){try{var o=this.options.rollbackCommit;this.options.rollbackCommit=!1;var r=t.toLowerCase();switch(void 0!==i&&null!=i||(i={type:"mergeCells"}),this.options[i.type]=r,r){case"never":this.cellMergeInfo={},this.cellMergeRealInfo={},e&&!0===e.noDraw||this.dynamicMergeHTML();break;case"bycol":this._mergeByCol(e);break;case"byrow":this._mergeByRow(e);break;case"bycolrec":this._mergeByColRec(e);break;case"byrowrec":this._mergeByRowRec(e);break;case"byrestriccol":this._mergeByRestricCol(e);break;case"byrestricrow":this._mergeByRestricRow(e)}this.options.rollbackCommit=o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeRefresh=function(){try{if("never"===this.options.mergeCells&&"never"===this.options.mergeCellsFixedRows&&"never"===this.options.mergeCellsFixedCols)return;var t={noDraw:!0};this.cellMergeInfo={},this.cellMergeRealInfo={},"never"!==this.options.mergeCells&&this.mergeCells(this.options.mergeCells,t),
this.options.mergeCellsFixedColsFirst?("never"!==this.options.mergeCellsFixedCols&&this.mergeCellsFixedCols(this.options.mergeCellsFixedCols,t),"never"!==this.options.mergeCellsFixedRows&&this.mergeCellsFixedRows(this.options.mergeCellsFixedRows,t)):("never"!==this.options.mergeCellsFixedRows&&this.mergeCellsFixedRows(this.options.mergeCellsFixedRows,t),"never"!==this.options.mergeCellsFixedCols&&this.mergeCellsFixedCols(this.options.mergeCellsFixedCols,t))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByCol=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,r=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={},h=this.getSubtotalRowList({returnType:"object"});!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},this.cellMergeRealInfo={});var d={};!0===t.keepMerge&&(d=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,r=0,a=i);var c=!1;!0===t.fixedCols&&(0==this.options.fixedColumn?(r=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(r=0,a=this.options.fixedColumn):(r=0,a=i,c=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var u=!(!this.isDrillDown||!this._dataList.options.depthColumn),p=r;p<a;p++){if(t.mergeCol){if(!1===t.mergeCol[p])continue}else if(!1===this.mergeColObj[p])continue;if(!(c&&p>=this.options.fixedColumn&&p<a-this.options.fixedRightColumn)&&!(this.htmlInfo.body.rowAttrArr.length>1&&1==this.colIndexInfo.body.colInfo.rowSpanArr[p+this.defaultColCnt]))for(var g=this.tdIdList[p],m=o;m<n;m++){var f=u?this.getRealRowIndex(m):m,b=this.dataList._getCellData(m,g),y=1;if(!0===t.keepMerge&&(y=0),!0===t.upperColumn&&(l[m]=!0),t.mergeRow){if(!1===t.mergeRow[f])continue}else if(!1===this.mergeRowObj[f])continue;for(;y<n-m&&!this._isExcludeValue(b);){var v=u?this.getRealRowIndex(m+y):m+y;if(t.mergeRow){if(!1===t.mergeRow[v])break}else if(!1===this.mergeRowObj[v])break;if(m+y>n)break;if(b!=(0===y?b:this.dataList._getCellData(m+y,g)))break;if(!0===t.keepMerge&&!0===d[v+"_"+p])break;if(!0===t.upperColumn&&!0===l[m+y])break;if(!0===h[m+y])break;y++}y>1&&(this.cellMergeInfo[f+"_"+p]={rowSpan:y,colSpan:1},m=m+y-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByRow=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getRowCount(),i=this.getColumnCount(),o=this.options.fixedRow,r=this.options.fixedColumn,a=i-this.options.fixedRightColumn,n=e,l={};!0!==t.keepMerge&&!0!==t.fixedRows&&!0!==t.fixedCols&&(this.cellMergeInfo={},this.cellMergeRealInfo={});var h={};!0===t.keepMerge&&(h=this.getMergedCells()),!0===t.fixedRows&&(o=0,n=this.options.fixedRow,r=0,a=i);var d=!1;!0===t.fixedCols&&(0==this.options.fixedColumn?(r=i-this.options.fixedRightColumn,a=i):0==this.options.fixedRightColumn?(r=0,a=this.options.fixedColumn):(r=0,a=i,d=!0),!1===t.fixedRows?(o=this.options.fixedRow,n=e):(o=0,n=e));for(var c=!(!this.isDrillDown||!this._dataList.options.depthColumn),u=o;u<n;u++){var p=c?this.getRealRowIndex(u):u;if(t.mergeRow){if(!1===t.mergeRow[p])continue}else if(!1===this.mergeRowObj[p])continue;for(var g=r;g<a;g++)if(!(d&&g>=this.options.fixedColumn&&g<a-this.options.fixedRightColumn)){var m=this.dataList._getCellData(u,this.tdIdList[g]),f=1;if(!0===t.keepMerge&&(f=0),!0===t.upperRow&&(l[g]=!0),t.mergeCol){if(!1===t.mergeCol[g])continue}else if(!1===this.mergeColObj[g])continue;for(;f<a-g&&!this._isExcludeValue(m);){if(t.mergeCol){if(!1===t.mergeCol[g+f])break}else if(!1===this.mergeColObj[g+f])break;if(d){if(g+f>=this.options.fixedColumn&&g+f<a-this.options.fixedRightColumn)break}else if(g+f>a)break;if(m!=(0===f?m:this.dataList._getCellData(u,this.tdIdList[g+f])))break;if(!0===t.keepMerge&&!0===h[p+"_"+(g+f)])break;if(!0===t.upperRow&&!0===l[g+f])break;f++}f>1&&(this.cellMergeInfo[p+"_"+g]={rowSpan:1,colSpan:f},g=g+f-1)}}l=void 0,!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){
s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByColRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.q.extend({},t),i=o.q.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByCol(e),this._mergeByRow(i),this._mergeAdjacentCell("col"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByRowRec=function(t){try{void 0!==t&&null!=t||(t={});var e=o.q.extend({},t),i=o.q.extend({},t);e.noDraw=!0,i.keepMerge=!0,i.noDraw=!0,this._mergeByRow(e),this._mergeByCol(i),this._mergeAdjacentCell("row"),!0!==t.noDraw&&this.dynamicMergeHTML()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeAdjacentCell=function(t){try{var e="row"===t?[0,1]:"col"===t?[1,0]:null;if(null==e)return;var i={},o={},r=this.getSubtotalRowList({returnType:"object"});for(var a in this.cellMergeInfo){var n=a.split("_"),l=parseInt(n[e[0]],10),h=parseInt(n[e[1]],10),d=0===e[0]?this.cellMergeInfo[a].colSpan:this.cellMergeInfo[a].rowSpan,c=0===e[0]?this.cellMergeInfo[a].rowSpan:this.cellMergeInfo[a].colSpan;null!=i[h+"_"+d]?(null==o[h+"_"+d]&&(o[h+"_"+d]=[i[h+"_"+d]]),o[h+"_"+d].push({row:l,rowSpan:c})):i[h+"_"+d]={row:l,rowSpan:c}}for(var a in o){var u=parseInt(a.split("_")[0]),p=0===e[0]?"rowSpan":"colSpan";o[a].sort((function(t,e){return t.row>e.row}));for(var g=o[a].length-1;g>=1;g--){var m=!0===r[o[a][g].row];if(o[a][g-1].row+o[a][g-1].rowSpan>=o[a][g].row&&!m)if((0===e[0]?this.dataList._getCellData(o[a][g-1].row,u):this.dataList.getCellData(u,o[a][g-1].row))===(0===e[0]?this.dataList._getCellData(o[a][g].row,u):this.dataList.getCellData(u,o[a][g].row))){o[a][g-1].rowSpan=o[a][g].row+o[a][g].rowSpan-o[a][g-1].row;var f=0===e[0]?o[a][g].row+"_"+u:u+"_"+o[a][g].row;delete this.cellMergeInfo[f];var b=0===e[0]?o[a][g-1].row+"_"+u:u+"_"+o[a][g-1].row;this.cellMergeInfo[b][p]=o[a][g-1].rowSpan}}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByRestricCol=function(t){try{void 0!==t&&null!=t||(t={});var e=o.q.extend({},t);e.upperColumn=!0,this._mergeByCol(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._mergeByRestricRow=function(t){try{void 0!==t&&null!=t||(t={});var e=o.q.extend({},t);e.upperRow=!0,this._mergeByRow(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeCellsFixedRows=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedRows){var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedRows=!0,e.fixedCols=!1,this._mergeCells(t,e,{type:"mergeCellsFixedRows"})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeCellsFixedCols=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"never"!==this.options.mergeCellsFixedCols){var i=this.options.mergeCells;this.mergeClear(e),"never"!==i&&this.mergeCells(i,{noDraw:!0})}e.fixedCols=!0,e.fixedRows=!1,this._mergeCells(t,e,{type:"mergeCellsFixedCols"})}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeCol=function(t,e){try{t=this.getColumnIndex(t);isNaN(t)||(this.mergeColObj[t]=e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.mergeRow=function(t,e){try{this.mergeRowObj[t]=e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getMerged=function(t,e){try{if(this.cellMergeInfo[t+"_"+e])return!0;for(var i in this.cellMergeInfo){var o=i.split("_"),r=this.cellMergeInfo[i],a=parseInt(o[0],10),n=parseInt(o[1],10);if(a<=t&&n<=e&&a+r.rowSpan-1>=t&&n+r.colSpan-1>=e)return!0}}catch(t){s.Y.printStackTrace(t,null,this)}return!1},q.prototype.getMergedInfo=function(t,e){try{var i={merged:!1};if(this.cellMergeInfo[t+"_"+e])i.merged=!0,i.startRowIndex=t,i.startColIndex=e;else for(var o in this.cellMergeInfo){var r=o.split("_"),a=this.cellMergeInfo[o],n=parseInt(r[0],10),l=parseInt(r[1],10);n<=t&&l<=e&&n+a.rowSpan-1>=t&&l+a.colSpan-1>=e&&(i.merged=!0,i.startRowIndex=n,i.startColIndex=l,i.endRowIndex=n+a.rowSpan-1,i.endColIndex=l+a.colSpan-1)}}catch(t){s.Y.printStackTrace(t,null,this)}return i},
q.prototype.getMergeAll=function(t,e){try{for(var i,o=[],r=[],a=t.split(","),n=0;n<a.length;n++)o[n]=parseInt(a[n],10);for(var l in!0===e&&this.hasSubtotal&&(i=this.getSubtotalRowList().sort((function(t,e){return t-e}))),this.cellMergeInfo){var h=l.split("_"),d=this.cellMergeInfo[l],c=parseInt(h[0],10),u=parseInt(h[1],10),p=d.rowSpan,g=d.colSpan,m=u+g-1,f=0,b=0,y=0,v=0;if(!0===e&&this.hasSubtotal){for(var w=0;w<i.length&&c>=i[w];w++)v++;var S=1;for(var _ in this.subtotalTableList)S=this.subtotalTableList[_].rows.length;c+=v*S}if(""!=t){o=o.sort();for(n=0;n<o.length;n++)u>(f=o[n])?y++:u<=f&&f<=m&&(u==f&&1==g?g=-1:b++);g-=b,u-=y}-1!=g&&(g>1||p>1)&&r.push({x:u,y:c,r:p,c:g})}return JSON.stringify(r)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getMergedCells=function(){try{var t={};for(var e in this.cellMergeInfo){var i=e.split("_"),o=this.cellMergeInfo[e],r=parseInt(i[0],10),a=parseInt(i[1],10),n=o.rowSpan||1,l=o.colSpan||1;if(l>1||n>1)for(var h=0;h<n;h++)for(var d=0;d<l;d++)t[r+h+"_"+(a+d)]=!0}return t}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setMergedCellData=function(t,e,i){try{var o=t+"_"+e;if(null!=this.cellMergeInfo[o])for(var r=this.cellMergeInfo[o].rowSpan,a=this.cellMergeInfo[o].colSpan,n=0;n<r;n++)for(var l=0;l<a;l++)0===n&&0===l||this.dataList.__setCellData(t+n,e+l,i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._isExcludeValue=function(t){try{if(this.options.mergeExcludeValue)for(var e=this.options.mergeExcludeValue.split(","),i=0;i<e.length;i++){if(t.constructor==Number&&(t+=""),e[i]==t)return!0;if("$blank"==e[i]&&""===t)return!0}return!1}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.refreshGrid=function(t){try{var e=null,i=t.op;this.hiddenRowObj.length>0&&"setInstanceValue"!=i&&(e=JSON.stringify(this.hiddenRowObj),this.clearRowVisible());var o,r,a=t.xpath;if("setInstanceValue"==i){o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.options.repeatNode,null,this.scope_id);var n,l=(p=a.split("/"))[p.length-1],h=this.getColumnIndex(l);if(h>=0){n=this.getCellInfo(l),p.pop();var d=WebSquare.ModelUtil.findInstanceNode(p.join("/"),null,this.scope_id);r=this.getInstanceIndex(o,d);var c=this._dataList.getFilteredRowIndex(r);"radio"==n.options.inputType&&t.value+""==n.options.trueValue&&n.resetOthers(c,!0),c>=0?this._dataList.setCellData(c,h,t.value):this._dataList._setData(r,h,t.value)}}else if("setInstanceNode"==i){if(!(f=this.options.ref==t.replacexpath&&"replace"==t.type?this.xmlData2ArrData(t.replaceNode,!0):this.xmlData2ArrData(t.node,!0)).length)return;this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type?this.insertRow(null,{insertData:f}):"insertBeforeSibling"==t.type?(r=this.getInstanceIndex(o,t.node),this.insertRow(r,{insertData:f})):"replace"==t.type&&this._dataList.setData(f),this.insertRowByInstance=!1}else if("setInstanceChildNodes"==i){if(this.options.ref==t.replacexpath&&"replace"==t.type)f=this.xmlData2ArrData(t.replaceNode,!0);else t.baseNode&&t.baseNode!=this.options.baseNode&&(m=t.baseNode),f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if(!f.length&&"append"==t.type)return;var u=this.getTotalCol();if(this.insertRowByInstance=!0,o=WebSquare.ModelUtil.findInstanceNodes(this.options.ref+"/"+this.repeatNodeTagName[0],null,this.scope_id),"append"==t.type)for(;f.length>0;)b=f.splice(0,u),this.insertRow(null,{insertData:b});else"replace"==t.type&&this._dataList.setData(f);this.insertRowByInstance=!1}else if("setInstanceLastNodeChildNodes"==i||"copyLastNodeChildrenNodes"==i){if(!(f=this.xmlData2ArrData(t.node,!0,{repeatNode:t.repeatNode,isRepeatNode:!0})).length)return;this.insertRowByInstance=!0,"replace"!=t.type&&"replaceAll"!=t.type&&"append"!=t.type||this.setRowData(parseInt(t.changeIndex)-1,f,!0),this.insertRowByInstance=!1}else if("removeInstanceNode"==i)this.removeRowByInstance=!0,r=t.deleteIndex,this.removeRow(r),
this.removeRowByInstance=!1;else if("removeInstanceNodeAll"==i)this.removeRowByInstance=!0,this.dataList.removeAll(),this.removeRowByInstance=!1;else if("copyChildrenNodes"==i){var p,g,m;t.copiedXPath&&(g=(p=t.copiedXPath.split("/"))[p.length-1]),t.baseNode&&g!=this.options.baseNode&&(m=g);var f=this.xmlData2ArrData(t.node,!0,{baseNode:m});if("replaceAll"==t.type)this.setData(f);else if("append"==t.type){var b;u=this.getTotalCol();for(this.insertRowByInstance=!0;f.length>0;)b=f.splice(0,u),this.insertRow(null,{insertData:b});this.insertRowByInstance=!1}}e&&"setInstanceValue"!=i&&(this.hiddenRowObj=JSON.parse(e),this._refreshRowVisible({lastIndex:this.lastIndex,noDraw:!0}),this.setScrollYHeight(),this._mergeRefresh(),this.applyStyleOptions(this.lastIndex))}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getInstanceIndex=function(t,e){try{if(!Array.prototype.indexOf||a.Z.isIEAllVersion()&&parseInt(r.I.browserVersion(),10)>8){for(var i=t.length;i--;)if(t[i]===e)return i;return}return t.indexOf(e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getArrayIndexOf=function(t,e){try{if(Array.prototype.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]==e)return i;return}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setRef=function(t){try{if(t&&t.ref){this.options.ref=t.ref,t.baseNode&&(this.options.baseNode=t.baseNode),t.repeatNode&&(this.options.repeatNode=t.repeatNode);var e=null==t.aliasDataCollection?this.scope_id:t.aliasDataCollection,i=WebSquare.ModelUtil.findInstanceNode(this.options.ref,null,e);this.setXML(i,null,{ref:this.options.ref,aliasDataCollection:e})}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setRef=function(t,e){try{this.filteredRepeatNode=!1,this.repeatNodeChildTagName=[],this.repeatNodeTagName=this.options.repeatNode.split("/"),this.filteredRepeatNodeTagName=[];this.options.ref;for(var i=0;i<this.repeatNodeTagName.length;i++){var o=this.repeatNodeTagName[i];i==this.repeatNodeTagName.length-1&&o.indexOf("[")>=0&&(o.indexOf("[@")>=0||(this.repeatNodeTagNameFilter=!0,o=o.split("[")[0])),1==this.repeatNodeTagNameFilter?this.filteredRepeatNodeTagName.push(o):this.filteredRepeatNodeTagName.push(this.repeatNodeTagName[i]),i!=this.repeatNodeTagName.length-1&&"/"+this.repeatNodeTagName[i]}for(var r=0;r<WebSquare.WebSquaredoc.instanceRefElement.length;r++){var a=WebSquare.WebSquaredoc.instanceRefElement[r].id;try{a==this.id&&WebSquare.WebSquaredoc.instanceRefElement.splice(r,1)}catch(t){s.Y.printStackTrace(t,null,this)}}var n=this.options.aliasDataCollection?this.options.aliasDataCollection:this.scope_id;for(var l in WebSquare.WebSquaredoc.instanceRefElement.push(new WebSquare.ModelUtil.createInstanceRefElement(this.options.ref,this.id,this.options.baseNode,this.repeatNodeTagName,this.cellIdList,n)),this.cellInfoHash)this.repeatNodeChildTagName.push(l)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setImageSrc=function(t,e){try{var i=this.getCellInfo(t),o=i.options.inputType;if(!e||"textImage"!=o)return;i.options.imageSrc=e,this.refreshColumn(t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setSyncScroll=function(t,e){try{this.options.syncScroll=t,null!=e&&(this.options.syncScrollId=e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.resetExpressionFunc=function(){try{if(this.useExpression)for(var t=this.getTotalCol(),e=0;e<t;e++){var i=this.getCellInfo(e);if(i&&i.options&&"expression"==i.options.inputType)for(var o=this.drawedRowLength,r=0;r<o;r++)i.options.expressionFunc&&i.options.expressionFunc[r]&&i.options.expressionFunc[r].changeCount&&(i.options.expressionFunc[r]={})}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellDataType=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e),a=r.id;if(0!=r.internal||"custom"!=r.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);r=r.cellManagerHashByRowIndex[n]?r.cellManagerHashByRowIndex[n]:r,!0;var l=r.options.inputType
;if("text"!=l&&"textarea"!=l&&"input"!=l&&"secret"!=l)return $l("Invalid cell input type."),!1;var h=this.getInput(r);h.setValue(this._dataList.getCellData(o,a));var d=h.getValue();h.setDataType(i),r.options.dataType="float";var c=h.formatter.unformat(d),u=h.validator.validateString(c);h.setValueNM(u),d!==u&&this._dataList.setCellData(o,a,u)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellAllowChar=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e),a=r.id;if(0!=r.internal||"custom"!=r.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);r=r.cellManagerHashByRowIndex[n]?r.cellManagerHashByRowIndex[n]:r,!0;var l=r.options.inputType;if("text"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("Invalid cell input type."),!1;var h=this.getInput(r);if(h&&h.options&&("input"===h.options.pluginName||"textarea"===h.options.pluginName)){h.setValue(this._dataList.getCellData(o,a)),h.setAllowChar(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellDisplayFormat=function(t,e,i){try{e=this.getColumnIndex(e);var o,r=t,a=this.getCellInfo(e);if(0==a.internal&&"custom"==a.options.inputType){var n=this.dataList.getRealRowIndex(r);o=a.getCellManager({element:a.element,rowIndex:r,realRowIndex:n})}if(!o)return!1;var l=o.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("Invalid cell input type."),!1;if(o.options.displayFormat=i,o.initFormatter(),o.options.embeddedInput){var h=this.data_td_list[e+(r-this.rowIndex)*this.oneRowDataLength];if(h){var d=this.getInput(o,h);d&&"function"==typeof d.setDisplayFormat&&d.setDisplayFormat(i)}}this.refreshCell(r,e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellDisplayFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e);if(0!=r.internal||"custom"!=r.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);r=r.cellManagerHashByRowIndex[a]?r.cellManagerHashByRowIndex[a]:r,!0;var n=r.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("Invalid cell input type."),!1;r.options.displayFormatter=i,r.initFormatter(),this.refreshCell(o,e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellMaxLength=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e),a=r.id;if(0!=r.internal||"custom"!=r.options.inputType)return!1;var n=this.dataList.getRealRowIndex(o);r=r.cellManagerHashByRowIndex[n]?r.cellManagerHashByRowIndex[n]:r,!0;var l=r.options.inputType;if("text"!=l&&"textarea"!=l&&"input"!=l&&"textImage"!=l&&"secret"!=l)return $l("Invalid cell input type."),!1;var h=this.getInput(r);h.setValue(this._dataList.getCellData(o,a)),"float"===r.options.dataType?r.setFloatMaxLength(i.toString()):r.setMaxLength(i);var d=h.getValue();this._dataList.setCellData(o,a,d)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellCustomFormatter=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e);if(0!=r.internal||"custom"!=r.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);r=r.cellManagerHashByRowIndex[a]?r.cellManagerHashByRowIndex[a]:r,!0;var n=r.options.inputType;if("text"!=n&&"textarea"!=n&&"input"!=n&&"textImage"!=n&&"secret"!=n)return $l("Invalid cell input type."),!1;r.options.customFormatter=i,r.initFormatter(),this.refreshCell(o,e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setCellDisableEdit=function(t,e,i){try{e=this.getColumnIndex(e);var o=t,r=this.getCellInfo(e);if("custom"!=r.options.inputType)return!1;var a=this.dataList.getRealRowIndex(o);if("autoComplete"!=(r=r.cellManagerHashByRowIndex[a]?r.cellManagerHashByRowIndex[a]:r).options.inputType)return $l("Invalid cell input type."),!1;r.options.disableEdit=i,r.autoComplete&&(r.autoComplete.options.disableEdit=i),this.refreshCell(o,e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._removeDom=function(t){try{
var e=this.dom[t];if(e){var i=WebSquare.idCache[e.uuid];i&&"function"==typeof i.remove&&i.remove(),delete this.dom[t]}}catch(t){s.Y.printStackTrace(t)}},q.prototype.setCellInputType=function(t,e,i){try{if(i&&i.inputType){if("drilldown"===i.inputType)return;if(e=this.getColumnID(e)){if(this._linkedDataList){var o=this._linkedDataList.filteredRowIndexArr[t];"number"!=typeof(t=this._dataList.getFilteredRowIndex(o))&&(t=o)}var r={};for(var a in i)r[a]=i[a];this._setCellInputType(t,e,null,r)}}}catch(t){s.Y.printStackTrace(t)}},q.prototype._setCellInputType=function(t,e,i,o){try{null==i&&(i=""),null==this.editedCell||this.getCellOption(t,e,"embeddedInput")||this.editedCell.handleCancelEdit();var r=this._dataList.getTotalRow();this.groupbyStatus&&this.groupbyStatus.grouped&&(r=this._dataList.filteredRowIndexArr.length);this._dataList.getTotalCol();var a,n=!0;a=this.options&&"grid"===this.options.pluginName&&this.isDrillDown&&this.options.drilldownRealRowIndex||o&&!0===o.useRealRowIndex?t:this.dataList.getRealRowIndex(t);var l=this.getDisplayRowIndex(a);(isNaN(l)||l<0)&&(n=!1);var h=t,d=(e=this.getColumnID(e),this.getColumnIndex(e));this._dataList.getColumnIndex(e);if(t>=0&&t<r){var c=this.cellInfoHash[this.tdIdList[d]];if("custom"==c.options.inputType&&!c.options.embeddedInput){var u;u=!0===o.useRealRowIndex?l-(this.rowIndex>0?this.rowIndex:0):t-(this.rowIndex>0?this.rowIndex:0);var p,g=this.data_td_list[d+u*this.oneRowDataLength];if(g&&n)!1===(p=c.getCellManager({element:c.element,rowIndex:h,realRowIndex:a,options:o,td:g,dynamicInputType:!0}))?g.innerHTML=this.dataTagOpen+o.value+this.dataTagClose:(c.clearStyle(p,g),null==o.value||!0===p.existGridViewItemsetNode?i=this.dataList._getCellData(h,e):(i=o.value,this.dataList.setCellData(h,e,i,null,!0,!0)),this.isColMerge&&c.options.colMerge&&!this.groupbyStatus.grouped?this.setColMergeCellData(u,h,d):p.setInnerHTML(g,i,h,d));else(p=c.getCellManager({element:c.element,rowIndex:h,realRowIndex:a,options:o,dynamicInputType:!0}))&&(null!=p.customValue?(i=p.customValue,this.dataList.setCellData(h,e,i,null,!0,!0)):null==o.value||!0===p.existGridViewItemsetNode?i=this.dataList._getCellData(h,e):(i=o.value,this.dataList.setCellData(h,e,i,null,!0,!0)))}}}catch(t){s.Y.printStackTrace(t)}},q.prototype.setDataDragDrop=function(t){this._setDataDragOption("Drop",t)},q.prototype.setDataDragDropSelf=function(t){this._setDataDragOption("DropSelf",t)},q.prototype.setDataDragDropOther=function(t){this._setDataDragOption("DropOther",t)},q.prototype.setDataDragDropCell=function(t){this._setDataDragOption("DropCell",t)},q.prototype.setDataDragSelect=function(t){this._setDataDragOption("Select",t)},q.prototype.setDataDragSelectAutoScroll=function(t){this._setDataDragOption("SelectAutoScroll",t)},q.prototype.getDataDragDrop=function(){return this.options.dataDragDrop},q.prototype.getDataDragDropSelf=function(t){return this.options.dataDragDropSelf},q.prototype.getDataDragDropOther=function(t){return this.options.dataDragDropOther},q.prototype.getDataDragDropCell=function(t){return this.options.dataDragDropCell},q.prototype.getDataDragSelect=function(t){return this.options.dataDragSelect},q.prototype.getDataDragSelectAutoScroll=function(t){return this.options.dataDragSelectAutoScroll},q.prototype._setDataDragOption=function(t,e){try{var i="dataDrag"+t,o=this.options[i];if("boolean"==typeof e&&o!==e){if(this.options[i]=e,"dataDragSelectAutoScroll"===i)return;if("dataDragSelect"===i)!0===e&&(this.isMobile||this.event.addListener(this.getElementById(this.id+"_dataLayer"),"onmousedown",this.event.bindAsEventListener(this,this.handleDragSelectEvent)));else if("dataDragDropOther"!==i&&"dataDragDropSelf"!==i||(this._useShiftKey=!1),!0===e)if(1==this.isMobile){if(this.isHammerEnabled()){var r=Promise.resolve();"undefined"!=typeof Hammer&&null!=Hammer||(r=inquires("externalJS/hammer.min.js"));var a=this.uuid;r.then((function(t,e){var i=WebSquare.idCache[a]
;i._manager=new Hammer.Manager(i.getElementById(i.id+"_dataLayer")),i._manager.add(new Hammer.Press({time:i.options.hammerPressTime})),i._manager.on("press",i.event.bindAsEventListener(i,(function(t){i.handleDragEvent(t)}))),i._bindPressEvent=!0}))}}else!1===this._bindDrag&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent)),this._bindDrag=!0);else this._bindDrag=!1}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setUseShiftKey=function(t){"boolean"==typeof t&&this.options.useShiftKey!==t&&(this.options.useShiftKey=t)},q.prototype.dragFinish=function(){try{this.options.dataDragDrop||this.options.dataDragDropSelf||!this.options.dataDragSelect||this.isMobile||WebSquare.dragdrop.gDragManager&&WebSquare.dragdrop.gDragManager.options&&(WebSquare.dragdrop.gDragManager.options.id===this.id+"_dragSelect"||WebSquare.dragdrop.gDragManager.options.id===this.id+"_drag")&&WebSquare.dragdrop.gDragManager.finish()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._fireOnviewchange=function(t,e,i,r){try{r=r||{};var a,n=this.getCellInfo(t),l=n.editRowIndex,h=this._dataList.getColumnIndex(n.id),d=this.getColumnIndex(n.id),c=this.getRealRowIndex(l),p=this._dataList.dataArr[c*this._dataList.getColumnCount()+h],g=n.comp&&n.comp.selectedIndex,m=this.lastEvent;r.beforeFunc&&r.beforeFunc.apply(r.beforeFunc,r.beforeFuncArgs);var f=!1;if(e)if("handleEndEdit"!=e&&"_handleEndEdit_focus"!=e&&"handleScrollY"!=e||i[2]&&i[2].otherClick)a=n[e].apply(n,i);else{f=!0;var b=i.slice(0);b[2]={from_fireOnviewchange:!0},o.q.extend(b[2],i[2]),a=n[e].apply(n,b)}if(r&&r.checkFunc&&!1===r.checkFunc(a))return!1;var y=this._dataList.dataArr[c*this._dataList.getColumnCount()+h];if(0===p&&(p="0"),0===y&&(y="0"),p!=y){var v={oldValue:p,newValue:y,rowIndex:l,colIndex:d,colId:this.getColumnID(d)};isNaN(g)||(v.oldSelectedIndex=g,v.newSelectedIndex=n.comp&&n.comp.selectedIndex),u.f.fireEvent(this,"onviewchange",v)}var w=this._getGroupbyDisplayRowIndex(l);return this.options.viewChangeAfterEdit&&1==f&&u.f.fireEvent(this,"onafteredit",w,d,y,m),!0}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._refreshInstance=function(t,e){try{if(!this.options.ref)return;e||WebSquare.ModelUtil.removeInstanceNodes({xpath:this.options.ref+"/"+this.repeatNodeTagName[0],scopeId:this.scope_id,gridNoRefresh:!0}),t||(t=this._dataList.dataArr);var i,o=t.length/this.oneRowDataLength,r=[],a=this.repeatNodeTagName[0],n=WebSquare.xml.parse("<"+a+"></"+a+">").documentElement,l=this._dataList.getBroadcast();this._dataList.setBroadcast(!1);for(var h=0;h<o;h++)if(this.repeatNodeChildTagName&&this.repeatNodeChildTagName.length>0){if(0==h){var d,c=n,u=a;this.repeatNodeTagName.length>1&&(u=this.repeatNodeTagName.slice(1,this.repeatNodeTagName.length).join("/"));for(var p=1;p<this.repeatNodeTagName.length;p++)c=WebSquare.xml.createNode(c,this.repeatNodeTagName[p],!1);i=this.repeatNodeTagName.length>1?WebSquare.xml.findNode(n,u):n;for(p=0;p<this.repeatNodeChildTagName.length;p++){if(d=WebSquare.xml.createNode(i,this.repeatNodeChildTagName[p],!1),r.push(d),m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){var g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}}else for(p=0;p<this.repeatNodeChildTagName.length;p++){var m;if(d=r[p],m=void 0===(m=t[h*this.oneRowDataLength+p])||null==m?"":m+"",this.options.valueNode.length)d.setAttribute(this.options.valueNode,m);else if(null==d.firstChild){g=d.ownerDocument.createTextNode(m);WebSquare.xml.appendChild(d,g)}else d.firstChild.nodeValue=m}WebSquare.ModelUtil.setInstanceNode(n,this.options.ref,null,"append",!1,this.scope_id)}this._dataList.setBroadcast(l)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.isHammerEnabled=function(){try{return(this.isMobile||a.Z.isTouchDevice())&&this.options.hammerEnabled}catch(t){
s.Y.printStackTrace(t,null,this)}},q.prototype.endEdit=function(){try{this._endEdit()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getColumnIdListMultiRow=function(){try{for(var t=[],e=this.colIndexes.bodyColInfo.colIndexMatch,i={},o=this.defaultColCnt;o<e.length;o++)for(var r=e[o],a=0;a<r.length;a++){null==t[a]&&(t[a]=[]);var n=this.getColumnID(r[a]-this.defaultColCnt);null==i[n]&&(t[a].push(n),i[n]=!0)}return t}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getLocationRowCol=function(t,e){try{var i,o,r=this.struct.body.rowAttrArr.length,a=this.getColumnOrder(),n=[];for(var l in a)n[a[l]]=parseInt(l,10);var h,d=this.cellMergeInfo;for(var c in d){var u=c.split("_"),p=parseInt(u[0]),g=parseInt(u[1]),m=d[c].rowSpan,f=d[c].colSpan;if(t>=p&&t<p+m&&e>=g&&e<g+f){i=m,o=f;break}}for(var b=0,y=e;y>=0;)h=y,y-=this.struct.body.rowArr[b].length,b++;if(b--,this.options.focusDefaultColumn&&b<0)o=1,i=1,v=t,h=e;else{o=o||parseInt(this.struct.body.rowArr[b][h].colSpan||1),i=i||parseInt(this.struct.body.rowArr[b][h].rowSpan||1),h=this.struct.body.rowArr[b][h]["@col"];var v=t*r+b;h=n[h]}return{rowIndex:v,colIndex:h,rowSize:i,colSize:o}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.getOriginalRowCol=function(t,e){try{for(var i=this.htmlInfo.body.rowAttrArr.length,o=(this.getColumnOrder(),!1),r=!0,a=t%i,n=1,l=1,h=[],d=0;d<i;d++){for(var c=[],u=0;u<this.htmlInfo.body.rowArr[d].length;u++)c.push({colSpan:parseInt(this.htmlInfo.body.rowArr[d][u].colSpan||1),rowSpan:parseInt(this.htmlInfo.body.rowArr[d][u].rowSpan||1),oriColIndex:parseInt(this.bodyIdColIndexMap[this.htmlInfo.body.rowArr[d][u].col_id]),positionCalColIndex:parseInt(this.htmlInfo.body.rowArr[d][u]["@col"])});h.push(c)}for(d=0;d<i;d++){var p=0;for(u=0;u<h[d].length;u++){if(h[d][u].rowSpan>1)for(var g=1;g<h[d][u].rowSpan;g++)if(d+g<i){var m={oriRowAttrNum:d,rowIndex:d+g,oriColIndex:h[d][u].oriColIndex,colIndex:p,rowSpan:1,colSpan:h[d][u].colSpan,oriRowSpan:h[d][u].rowSpan,positionCalColIndex:h[d][u].positionCalColIndex};h[d+g].splice(h[d][u].positionCalColIndex||p,0,m)}p+=h[d][u].colSpan}}for(d=0;d<i;d++)h[d].sort((function(t,e){return t.positionCalColIndex-e.positionCalColIndex}));var f,b=h[a],y=0;for(u=0;u<b.length;u++){var v=parseInt(b[u].colSpan);if((y+=v)>e){e!==y-v&&(e=y-v,o=!0,r=!1),l=v,f=u;break}}n=b[f].rowSpan,void 0!==b[f].oriRowAttrNum&&(a+=b[f].oriRowAttrNum-b[f].rowIndex,n=b[f].oriRowSpan,o=!0),f=b[f].oriColIndex;var w=Math.floor(t/i),S=this.cellMergeInfo;for(var _ in S){var C=_.split("_"),x=(c=parseInt(C[0]),parseInt(C[1])),I=S[_].rowSpan,T=S[_].colSpan;if(w>=c&&w<c+I&&f>=x&&f<x+T){if(w==c&&f==x){n=I,l=T;break}f!=x&&(r=!1),w=c,f=x,n=I,l=T,o=!0;break}}return{rowIndex:w,colIndex:f,rowSize:n,colSize:l,noLeftTop:o,leftCell:r}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setImeMode=function(t,e){try{var i=this.getCellInfo(t);"text"!=i.options.inputType&&"textImage"!=i.options.inputType&&"textArea"!=i.options.inputType&&"drilldown"!=i.options.inputType||(i.options.imeMode=e)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._isGridViewItemTable=function(){try{return!(!this.parentControl||!this.parentControl.options||"gridItemTable"!==this.parentControl.options.pluginName&&"gridViewItemTable"!==this.parentControl.options.pluginName)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.searchData=function(t){try{void 0!==t&&null!=t||(t={}),this.clearSearchData({noRefresh:!0});var e=t.column;e=e?e.split(","):this.tdIdList.slice(0);for(var i=this.getRowCount(),o=[],r=[],a=0;a<i;a++){for(var n=!1,h=this.__getGroupbyGroupedRowIndex(a),d=this.getRealRowIndex(h),c=0;c<e.length;c++){var u=this.getColumnIndex(e[c]);this.getCellDisplayData(a,u).indexOf(t.data)>=0&&(n=!0,r.unshift([d,u]))}n&&o.push(d)}if(this.groupbyStatus.grouped){var p={};for(a=0;a<o.length;a++)p[o[a]+""]=!0;this.groupbyStatus.groupbyRowIndexArr=o.slice(0);var g=this.groupbyStatus.groupedRowIndexArr;this._beforeSearch={groupbyRowIndexArr:o.slice(0),
groupedRowIndexArr:g.slice(0)};var m=[];for(a=0;a<g.length;a++)if("object"===(0,l.A)(g[a])){if(0===g[a].depth&&m.length>0&&"object"===(0,l.A)(m[m.length-1]))for(;m.length>0&&"object"===(0,l.A)(m[m.length-1]);)m.pop();m.push(g[a])}else!0===p[g[a]+""]&&m.push(g[a]);for(;m.length>0&&"object"===(0,l.A)(m[m.length-1]);)m.pop();this.groupbyStatus.groupedRowIndexArr=m}var f={type:"direct",key:o,filterId:this.id+"_searchData"};this.dataList.setFilter(f);for(a=0;a<r.length;a++){var b=this.getDisplayRowIndex(r[a][0]),y=this.__getGroupbyGroupedRowIndex(b);this.setFocusedCell(y,r[a][1],!1,{ctrled:!0})}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.clearSearchData=function(t){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;void 0!==t&&null!=t||(t={});var e={filterId:this.id+"_searchData",noRefresh:t.noRefresh};this.groupbyStatus.grouped&&this._beforeSearch&&(this.groupbyStatus.groupbyRowIndexArr=this._beforeSearch.groupbyRowIndexArr.slice(0),this.groupbyStatus.groupedRowIndexArr=this._beforeSearch.groupedRowIndexArr.slice(0)),this._beforeSearch=null,this.dataList.removeFilter(e),this.removeFocusedCell(),!0===t.clearValue&&this.groupbyZone_searchinput.setValue("")}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._groupbyZoneSearch=function(){try{if(!this.options.groupbyZoneSearch||!this.groupbyZone_searchinput)return;var t=this.groupbyZone_searchinput.getValue();if(""===t)this.clearSearchData();else{var e={};e.data=t,this.searchData(e)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setBlockSelect=function(t,e){try{if(!0!==e&&!1!==e)return;var i=this.getCellInfo(t);if(i&&i.options.blockSelect!==e){var o=this.getColumnIndex(t);i.options.blockSelect=e;for(var r=0;r<this.focusedCell.length;r++)if(this.focusedCell[r].focusedColIndex===o){var a=this.focusedCell[r];this._applyFocusedCellOut(a)}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setVisibleRowNum=function(t){try{if(t=parseInt(t,10),isNaN(t)||t<=0)return!1;this.options.initFixedHeightByRowNum>-1&&(this.options.initFixedHeightByRowNum=t);for(var e=this.options.visibleRowNum,i=this.getColumnOrder(),o=this.getColCnt(),r=[],a=0;a<o;a++)r.push(a);var n=!1,l=!0;("all"==e||""==e||parseInt(e,10))&&(n=!0);for(a=0;a<i.length;a++)if(i[a]!==r[a]){l=!1;break}this.options.visibleRowNum=t,this._dynamicVisibleRowNum=t,!l&&n&&this.setColumnOrder(r);var h=this._getVisibleRowNumHeight(!0);this.setTrRowTable(),this.getScrollTop()>0?(this.setSize(null,h),this.handleResize({startPoint:"0"}),this.scrollEvent=!1,this.skipScrollEndEvent=!0,this.skipScrollStartEvent=!0):this.setSize(null,h),!l&&n&&this.setColumnOrder(i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.enableAllDate=function(t){try{var e=this.getCellInfo(t);if("calendar"!=e.options.inputType)return $l("Invalid cell input type."),!1;var i=this.getInput(e);e.options.disableBeforeDate="",e.options.disableAfterDate="",i&&i.enableAllDate()}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setEditModeEvent=function(t,e){try{if(t&&(this.options.editModeEvent=t,e))for(var i=0;i<this.getColumnCount();i++){var o=this.getCellInfo(i);o.options.editModeEvent&&(o.options.editModeEvent=t,this.refreshColumn(o.colID))}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setColumnEditModeEvent=function(t,e){try{if(e){var i=this.getCellInfo(t);if(bRefreshColumn)for(var o=0;o<this.getColumnCount();o++){(i=this.getCellInfo(o)).options.editModeEvent&&(i.options.editModeEvent=e,this.refreshColumn(i.colID))}}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setFocusMode=function(t){try{if(this.options.focusMode===t||"cell"!==t&&"row"!==t&&"both"!==t)return;this.removeFocusedCell(),this.options.focusMode=t}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setRedrawTextAreaColumn=function(t){try{for(var e=!1,i=0;i<this.getColumnCount();i++){var o=this.getCellInfo(i);"textarea"==o.options.inputType&&"all"==o.options.displayType&&(e=!0,t||this.redrawColumn(i))}
if(t&&e&&"all"===this.options.visibleRowNum&&!0!==this._isBrowserScroll()&&this.getRowCount()>0){var r=document.getElementById(this.id+"_body_table").offsetHeight;this.render.offsetHeight!=r&&this.setSize(null,r)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getSelectedIndex=function(t,e){try{var i=-1,o=this.getCellInfo(e);if("custom"==o.options.inputType){var r=this.dataList.getRealRowIndex(t);o=o.cellManagerHashByRowIndex[r]?o.cellManagerHashByRowIndex[r]:o}if(o&&"select"==o.options.inputType){var a=this.getColumnIndex(e);null!=(r=this._getStyleRowIndex(t))&&"number"==typeof r&&void 0===(i=this._cellSelectedIndex[r*this.oneRowDataLength+a])&&(this._cellSelectedIndex[r*this.oneRowDataLength+a]=-1,i=-1)}return i}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setSelectedIndex=function(t,e,i){try{e=this.getColumnIndex(e);var o=this._getStyleRowIndex(t);if(null==o)return;"number"==typeof o&&(this._cellSelectedIndex[o*this.oneRowDataLength+e]=i)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._setFirsCellFocus=function(t){try{for(var e=0,i=this.getRowCount()-1,o=this.getLeftMostFocusableColIndex(e);e<i&&null==o;)e+=1,o=this.getRightMostFocusableColIndex(e);var r=this.getCellInfo(o);if("button"===r.options.inputType||"radio"===r.options.inputType||"checkbox"===r.options.inputType||"user"===r.options.inputType){var a=0,n=this.getCheckedIndex(r.colID)[0];n>0&&(a=n),this._setFocusedCell(a,o,!1,{tabDirection:"right"}),WebSquare.event.stopEvent(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._isNumberType=function(t){try{return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getOperator=function(t){try{var e,i;return 0==t.indexOf(">=")?(i=t.replace(">=",""),e=">="):0==t.indexOf(">")?(i=t.replace(">",""),e=">"):0==t.indexOf("<=")?(i=t.replace("<=",""),e="<="):0==t.indexOf("<")?(i=t.replace("<",""),e="<"):0==t.indexOf("==")?(i=t.replace("==",""),e="=="):0==t.indexOf("!=")?(i=t.replace("!=",""),e="!="):t&&(e="==",i=t),{operator:e,value:i}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._isMatched=function(t,e,i,o){try{var r=!0,a=t,n=e;return this._isNumberType(o)&&(a=parseFloat(a),n=parseFloat(n),isNaN(Number(n))&&(n=0)),">"==i?n>a||(r=!1):">="==i?n>=a||(r=!1):"<"==i?n<a||(r=!1):"<="==i?n<=a||(r=!1):"!="==i?n==a&&(r=!1):"=="==i&&n!=a&&(r=!1),r}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._ShiftKeyMultiCheck=function(t,e,i){try{var o=this.getCellInfo(i),r=o.id,a=this.getColumnIndex(r);if(t.beforeChecked){for(var n=parseInt(t.beforeChecked.rowIndex),l=parseInt(e.rowIndex),h=Math.min(n,l),d=Math.max(n,l),c=0;c<t.getDataLength()&&!(c>d);c++)h<=c&&c<=d&&t._dataList.setCellData(c,r,o.options.trueValue);o.options.blockSelect||(t.applyFocusedCellOut(),t.focusedCell=[],t._applyFocusedMultiCell(n,a,l,a)),!0!==e.checked&&(i.getElementsByTagName("input")[0].checked=!0)}}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.setConfigOptions=function(t,e){try{var i,o;if("header"===e)i=this.headerConfigOptions,o="h";else if("footer"===e)i=this.footerConfigOptions,o="f";else{if("subtotal"!==e)return;i=this.subtotalConfigOptions,o="s"}if(!t||!t.id)return;var n=a.Z.getDataPrefix("inputType"),l=this.options.pluginName,h=t.getAttribute(n),d=r.I.getConfig(l+"/"+e+"[@inputType='"+h+"']"),c=r.I.getConfigurationJSON("/WebSquare/"+l+"/"+o+"column",{type:"array"})||[],u=!1;c instanceof Array||(c=[c],u=!0);for(var p=0;p<c.length;p++){var g=c[p],m=g["@inputType"];if(g&&(u||!m||m===h))for(var f in g)if("@inputType"!==f){var b=g[f];if(b&&null==d.item){var y=b["@value"];if("number"==typeof y||"string"==typeof y||"boolean"==typeof y){if("string"==typeof y){var v=y.toLocaleLowerCase().wq_trim();"true"===v||"false"===v?y=a.Z.getBoolean(y):"$blank"===v&&(y="")}d[f]=y}}}}i[t.id]=d}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype.show=function(t){try{WebSquare.xfControl.prototype.show.call(this,t),
0===this._dataList.getDataLength()&&(this.displayNoResultMessage(),this.setScrollYHeight())}catch(t){s.Y.printStackTrace(t)}},q.prototype._swapArr=function(t,e,i){try{var o=t[e];t[e]=t[i],t[i]=o}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getDefinedFormatIndex=function(t){try{var e;if("yyyy/MM/dd"===t)e=55;return e}catch(t){s.Y.printStackTrace(t,null,this)}},q.prototype._getExcelFooterData=function(t,e,i,o){try{var r=[];if(o)for(var a=o.split(","),n=0;n<a.length;n++){var l=parseInt(a[n],10);isNaN(l)||r.push(l)}return"0"==e?this.getExcelAllFooterXMLDisplay(t,r,!1):0==i?this.getExcelAllFooterXML(t,r):1==i?this.getExcelAllFooterXMLDisplay(t,r):this.getExcelAllFooterXMLRaw(t,r)}catch(t){s.Y.printStackTrace(t,null,this)}};var M=function(){};M.prototype.getColumnReadOnly=function(t){var e=this.getCellInfo(t);return""!=e.options.readOnly?a.Z.getBoolean(e.options.readOnly):""},M.prototype.setColumnReadOnly=function(t,e){try{var i=this.getCellInfo(t);""!=e&&(e=a.Z.getBoolean(e));var o=i.options.readOnly;if(i.options.readOnly=e,o!==e){if(null!=this.editedCell){var r=a.Z.getDataPrefix("tdindex"),n=parseInt(this.editedCell.editTd.getAttribute(r))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=n==t}else this.rollbackCommitFlag=!1;this.drawColumnData(t),this.applyStyleOptions(this.lastIndex)}}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getRowReadOnly=function(t,e){try{var i=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===e?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),o=this.rowReadOnlyArr[i];return 1!=o&&0!=o?"":o}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setRowReadOnly=function(t,e,i){try{var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),r=o||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));""!=e&&(e=a.Z.getBoolean(e));var n=o||!0===i?this.getDisplayRowIndex(r):this._getGroupbyGroupedRowIndex(t),l=this.rowReadOnlyArr[r];this.rowReadOnlyArr[r]=e,l!==e&&(null!=this.editedCell&&this.editedCell.editRowIndex==r?this.rollbackCommitFlag=!0:this.rollbackCommitFlag=!1,n>=0&&(this.drawRowData(n-this.rowIndex,n,!0),this.applyRowStyleOptions(n)))}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getCellReadOnly=function(t,e,i){try{e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll)||!0===i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),r=this.cellReadOnlyArr[o*this.oneRowDataLength+e];return 1!=r&&0!=r?"":r}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setCellReadOnly=function(t,e,i){try{if(""!=i&&(i=a.Z.getBoolean(i)),(e=this.getColumnIndex(e))>=this.getColumnCount())return;var o=!(!this.isDrillDown||!this.options.drilldownRealRowIndexAll),r=o?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),n=o?this.getDisplayRowIndex(r):this._getGroupbyGroupedRowIndex(t),l=this.cellReadOnlyArr[r*this.oneRowDataLength+e];if(this.cellReadOnlyArr[r*this.oneRowDataLength+e]=i,l!==i){var h=this.rollbackCommitFlag;if(null!=this.editedCell&&this.editedCell.editRowIndex==r){var d=a.Z.getDataPrefix("tdindex"),c=parseInt(this.editedCell.editTd.getAttribute(d))%this.realRowDataLength-(this.realRowDataLength-this.oneRowDataLength);this.rollbackCommitFlag=c==e}else this.rollbackCommitFlag=!1;n>=0&&(this.notifyCellChanged(n,e),this.rollbackCommitFlag=h,this.applyCellStyleOptions(n,e))}}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getColumnDisabled=function(t){var e=this.getCellInfo(t);return a.Z.getBoolean(e.options.disabled)},M.prototype.setColumnDisabled=function(t,e){try{e=a.Z.getBoolean(e);var i=this.getCellInfo(t),o=i.options.disabled;i.options.disabled=e,o!==e&&(this.drawColumnData(t),this.applyColumnStyleOptions(t))}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getRowDisabled=function(t){try{
var e=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));return a.Z.getBoolean(this.rowDisabledArr[e])}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setRowDisabled=function(t,e){try{e=a.Z.getBoolean(e);var i=!(!this.isDrillDown||!this._dataList.options.depthColumn),o=i?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),r=i?this.getDisplayRowIndex(o):this._getGroupbyGroupedRowIndex(t),n=this.rowDisabledArr[o];this.rowDisabledArr[o]=e,n!==e&&r>=0&&(this.drawRowData(r-this.rowIndex,r,!0),this.applyRowStyleOptions(r))}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getCellDisabled=function(t,e,i){try{e=this.getColumnIndex(e);var o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t));i&&(o=t);var r=this.cellDisabledArr[o*this.oneRowDataLength+e];return 1!=r&&0!=r?"":r}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setCellDisabled=function(t,e,i,o){try{i=a.Z.getBoolean(i);e=this.getColumnIndex(e);var r=!(!this.isDrillDown||!this._dataList.options.depthColumn),n=r?t:this.dataList.getRealRowIndex(this._getGroupbyGroupedRowIndex(t)),l=r?this.getDisplayRowIndex(n):this._getGroupbyGroupedRowIndex(t);o&&(n=t,l=this.getDisplayRowIndex(t));var h=this.cellDisabledArr[n*this.oneRowDataLength+e];this.cellDisabledArr[n*this.oneRowDataLength+e]=i,h!==i&&l>=0&&(this.notifyCellChanged(l,e),this.applyCellStyleOptions(l,e))}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setTDStyle=function(t,e,i,o,s){""!=this.options.readOnlyBackgroundColor&&this.___getEditReadOnly(e,i)&&(s="background-color:"+this.options.readOnlyBackgroundColor+";"+s),this._getEditDisabled(e,i)?(t.disabled=!0,""!=this.options.disabledBackgroundColor&&(s+=";background-color:"+this.options.disabledBackgroundColor),""!=this.options.disabledFontColor&&(s+=";color:"+this.options.disabledFontColor)):t.disabled=!1,t.style.cssText=o+";"+s},M.prototype.setStyleAll=function(t){try{var e=t.type,i=e.charAt(0).toUpperCase()+e.slice(1),o=t.target||"";"all"!==o&&"default"!==e&&"init"!==e||(o=""),"cell"!==e&&"disabledCell"!==e||(o="");var r=o?o.charAt(0).toUpperCase()+o.slice(1):"",a=t.styleName,n=t.styleValue,l=t.noRefresh,h=t.rowIndex,d=t.useRealRowIndex;d||(h=this._getGroupbyGroupedRowIndex(h));var c,u=t.colIndex;if("column"===e||"cell"===e||"default"===e||"init"===e){if(u=this.getColumnIndex(u),!this.getColumnID(u)&&!this.successBinding)return;if(!this.getColumnID(u)&&!this._dataList.getColumnID(u))return void p.v.printLog("[Warning] Invalid colIndex("+u+").["+this.id+"] set"+i+"Style"+r)}var g="ValueObj";"column"===e||"adaptiveColumn"===e||"default"===e||"init"===e?(c=u,i="Column"):"disabledCell"===e?(c=h+"_"+u,i="Cell",g="Obj"):null==(c=null==u?this["get"+i+"Style"+r+"ClassName"](h,d):this["get"+i+"Style"+r+"ClassName"](h,u,d))&&(this[e+"Style"+r+"Index"]++,c=this.id+"_"+e+"style"+o+"_"+this[e+"Style"+r+"Index"]+"_",null==u?this["set"+i+"Style"+r+"ClassName"](h,c,d):this["set"+i+"Style"+r+"ClassName"](h,u,c)),null==(t=this[e+"Style"+r+g][c])&&(t={}),t[a]=n;var m=[];for(var a in t){var f=t[a];"style"!=a&&""!=f&&m.push(a+":"+f)}if(t.style=m.join(";"),this[e+"Style"+r+g][c]=t,!0!==l)if(null==h)this["apply"+i+"StyleOptions"](u);else!(!this.isDrillDown||!this._dataList.options.depthColumn)&&!d&&(h=this.getDisplayRowIndex(h)),!d||"cell"!=e&&"row"!=e?this["apply"+i+"StyleOptions"](h,u):"cell"==e?this["apply"+i+"StyleOptions"](h,u,void 0,void 0,d):this["apply"+i+"StyleOptions"](h,d)}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setRowBackgroundColor=function(t,e,i){this.setRowStyle(t,"background-color",e,i)},M.prototype.setRowColor=function(t,e,i){this.setRowStyle(t,"color",e,i)},M.prototype.setRowStyle=function(t,e,i,o){this.setStyleAll({type:"row",rowIndex:t,styleName:e,styleValue:i,useRealRowIndex:o})},M.prototype.getRowBackgroundColor=function(t){
return this.getRowStyleValue(t,"background-color")},M.prototype.getRowColor=function(t){return this.getRowStyleValue(t,"color")},M.prototype.getRowStyleValue=function(t,e){t=this._getGroupbyGroupedRowIndex(t);var i=this.getRowStyleClassName(t);return null==i?"":this.rowStyleValueObj[i][e]||""},M.prototype._getRowStyleStr=function(t){return this.rowStyleValueObj[t].style},M.prototype.setColumnBackgroundColor=function(t,e){this.setColumnStyle(t,"background-color",e)},M.prototype.setColumnColor=function(t,e){this.setColumnStyle(t,"color",e)},M.prototype.setColumnStyle=function(t,e,i){this.setStyleAll({type:"column",colIndex:t,styleName:e,styleValue:i})},M.prototype.setDefaultStyle=function(t,e,i){this.setStyleAll({type:"default",colIndex:t,styleName:e,styleValue:i})},M.prototype._setInitStyle=function(t,e,i){this.setStyleAll({type:"init",colIndex:t,styleName:e,styleValue:i})},M.prototype.setAdaptiveColumnStyle=function(t,e,i){this.setStyleAll({type:"adaptiveColumn",colIndex:t,styleName:e,styleValue:i,noRefresh:!0})},M.prototype.getColumnBackgroundColor=function(t){return this.getColumnStyleValue(t,"background-color")},M.prototype.getColumnColor=function(t){return this.getColumnStyleValue(t,"color")},M.prototype.getColumnStyleValue=function(t,e){var i=this.columnStyleValueObj[t];return null==i?this.getDefaultStyleValue(t,e):i[e]||this.getDefaultStyleValue(t,e)},M.prototype._getColumnStyleStr=function(t){return this.columnStyleValueObj[t].style},M.prototype.getDefaultStyleValue=function(t,e){var i=this.defaultStyleValueObj[t];return null==i?"":i[e]||""},M.prototype._getInitStyleValue=function(t,e){var i=this.initStyleValueObj[t];return null==i?"":i[e]||""},M.prototype._getDefaultStyleStr=function(t){return this.defaultStyleValueObj[t].style},M.prototype.getAdaptiveColumnStyleValue=function(t,e){var i=this.adaptiveColumnStyleValueObj[t];return null==i?"":i[e]||""},M.prototype.setCellBackgroundColor=function(t,e,i,o){this.setCellStyle(t,e,"background-color",i,void 0,o)},M.prototype.setCellColor=function(t,e,i,o){this.setCellStyle(t,e,"color",i,void 0,o)},M.prototype.setCellStyle=function(t,e,i,o,s,r){var a=this.getColumnID(e);if(this.mergeCellBkStatus&&this.mergeCellBkStatus[a]){var n=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t);this.mergeCellBkStatus[a][n]=null,delete this.mergeCellBkStatus[a][n]}this.setStyleAll({type:"cell",rowIndex:t,colIndex:e,styleName:i,styleValue:o,noRefresh:s,useRealRowIndex:r})},M.prototype._refreshCellStyle=function(t){var e=[],i=this.cellStyleValueObj[t];for(var o in i){var s=i[o];"style"!=o&&""!=s&&e.push(o+":"+s)}i.style=e.join(";"),this.cellStyleValueObj[t]=i},M.prototype.setDisabledCellStyle=function(t,e,i,o){e=this.getColumnIndex(e);this._getEditDisabled(t,e)&&this.setStyleAll({type:"disabledCell",rowIndex:t,colIndex:e,styleName:i,styleValue:o})},M.prototype.getCellBackgroundColor=function(t,e){return this.getCellStyleValue(t,e,"background-color")},M.prototype.getCellColor=function(t,e){return this.getCellStyleValue(t,e,"color")},M.prototype.getCellStyleValue=function(t,e,i,o){try{t=this._getGroupbyGroupedRowIndex(t);var r=this.getCellStyleClassName(t,e);return null==r?(!0!==o&&p.v.printLog("[Warning] Is not exist cell!["+this.id+"]"),""):this.cellStyleValueObj[r][i]||""}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype._getCellStyleStr=function(t){return this.cellStyleValueObj[t].style},M.prototype.setHeaderCellStyle=function(t,e,i){try{var o=this.getHeaderLayer(t);WebSquare.style.setStyle(o,e,i)}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setHeaderBackgroundColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"background-color",e),this.headerCellStyleValueObj[t]={"background-color":e}}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.setHeaderColor=function(t,e){try{var i=this.getHeaderLayer(t);WebSquare.style.setStyle(i,"color",e)}catch(t){s.Y.printStackTrace(t,null,this)}},
M.prototype.getHeaderCellStyleValue=function(t,e){try{var i=this.getHeaderLayer(t);return WebSquare.style.getStyle(i,e)}catch(t){s.Y.printStackTrace(t,null,this)}},M.prototype.getHeaderBackgroundColor=function(t){return this.getHeaderCellStyleValue(t,"background-color")},M.prototype.getHeaderColor=function(t){return this.getHeaderCellStyleValue(t,"color")},M.prototype._setMergeCellBackground=function(t,e,i){var o=!(!this.isDrillDown||!this._dataList.options.depthColumn)?t:this.dataList.getRealRowIndex(t),s=this.getColumnID(e),r=this.getColumnIndex(e);if(this.options.groupbyZone&&(this.mergeCellBkStatus||(this.mergeCellBkStatus={}),this.mergeCellBkStatus[s]||(this.mergeCellBkStatus[s]={}),null==this.mergeCellBkStatus[s][o])){var a=this.getCellStyleValue(t,s,"background-color",!0)||this.getColumnStyleValue(r,"background-color");this.mergeCellBkStatus[s][o]=a}var n=this.setCellDefaultStyleClassName(o,r,!0);this.cellStyleValueObj[n]["background-color"]=i,this._refreshCellStyle(n)},M.prototype._clearMergeCellBackground=function(){if(this.mergeCellBkStatus){for(var t in this.mergeCellBkStatus)for(var e in this.mergeCellBkStatus[t]){var i=parseInt(e,10),o=this.mergeCellBkStatus[t][e],s=this.setCellDefaultStyleClassName(i,t,!0);this.cellStyleValueObj[s]["background-color"]=o,this._refreshCellStyle(s),o||delete this.cellStyleValueObj[s]["background-color"]}delete this.mergeCellBkStatus}};var E=function(t){this.statusArr=[],this.mainGrid=null,this.options=null,this.mode=null};E.prototype.initialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.q.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(p.v.printLog("Warning: Filters not applicable in drilldown mode. All previously applied filters have been removed.["+this.id+"]"),t._linkedDataList.clearFilter()),t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=!0,a=parseInt(this.options.showDepth,10),n=0;n<s;n++){var l=t._linkedDataList.initialRowIndexArr[n];this.statusArr[l]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(l,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(l,this.mainGrid.getColumnID(i))))<=a&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(l),this.statusArr[l]=!0,r=!1)}if(!0===r)for(l=0;l<s;l++)this.mainGrid._linkedDataList.filteredRowIndexArr.push(l),this.statusArr[l]=!0}else{t._dataList.filteredRowIndexArr=[],this.statusArr=[],this.options=o.q.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),r=!0,a=parseInt(this.options.showDepth,10),l=0;l<s;l++){this.statusArr[l]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(l,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(l,this.mainGrid.getColumnID(i))))<=a&&(this.mainGrid._dataList.filteredRowIndexArr.push(l),this.statusArr[l]=!0,r=!1)}if(!0===r)for(l=0;l<s;l++)this.mainGrid._dataList.filteredRowIndexArr.push(l),this.statusArr[l]=!0}},E.prototype.getDepth=function(t){return"dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(t,this.mainGrid._dataList.getColumnID(this.options.depthColumn))):parseInt(this.mainGrid.dataList._getData(t,this.mainGrid.getColumnID(this.options.depthColumn)))},E.prototype.isOpen=function(t){var e=this.getDepth(this.mainGrid.getRealRowIndex(t)),i=0;i="linkedDataList"===this.mode?this.mainGrid._linkedDataList.filteredRowIndexArr[t+1]:this.mainGrid._dataList.filteredRowIndexArr[t+1];var o=this.getDepth(i);return!isNaN(e)&&!isNaN(o)&&e<o},E.prototype.hasChild=function(t){if("linkedDataList"===this.mode){
var e=this.mainGrid._linkedDataList.filteredRowIndexArr[t],i=this.mainGrid._linkedDataList.getLinkedRowIndex(t),o=this.mainGrid._linkedDataList.initialRowIndexArr[i+1],s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));var r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)}o=(e=this.mainGrid.getRealRowIndex(t))+1,s=this.mainGrid.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(this.options.depthColumn));r=parseInt(this.mainGrid.dataList._getData(e,s)),a=parseInt(this.mainGrid.dataList._getData(o,s));return r<(a=isNaN(a)?0:a)},E.prototype.getOriginalRowIndex=function(t){return this.openRowIndexArr[t]},E.prototype.getDisplayRowIndex=function(t){if("linkedDataList"===this.mode){if(this.mainGrid._linkedDataList.filteredRowIndexArr)for(var e=0;e<this.mainGrid._linkedDataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid._linkedDataList.filteredRowIndexArr[e])return e}else if(this.mainGrid._dataList.filteredRowIndexArr)for(e=0;e<this.mainGrid._dataList.filteredRowIndexArr.length;e++)if(parseInt(t,10)===this.mainGrid.getRealRowIndex(e))return e;return t},E.prototype.getChildRowArr=function(t,e){var i=t,o=this.getDepth(t),s=this.mainGrid.getTotalRow(),r=[],a=this.options.depthColumn,n=this.mainGrid.getColumnID(a);if("dataList"==this.options.dataColumn&&(n=this.mainGrid._dataList.getColumnID(a)),"linkedDataList"===this.mode)for(var l=i+1;l<s;l++){var h=this.mainGrid._linkedDataList.initialRowIndexArr[l];if(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),this.mainGrid.dataList._getData(h,n)<=o)break}else for(h=i+1;h<s&&(this.mainGrid.dataList._getData(h,n)==o+1&&r.push(h),e&&this.mainGrid.dataList._getData(h,n)>o+1&&r.push(h),!(this.mainGrid.dataList._getData(h,n)<=o));h++);return r},E.prototype.pasteDrilldownInitialize=function(t,e){if(this.mainGrid=t,t._linkedDataList?this.mode="linkedDataList":this.mode="dataList","linkedDataList"===this.mode){this.statusArr=[],this.options=o.q.extend({showDepth:-1,depthColumn:-1},e||{}),t._linkedDataList.initialRowIndexArr.length!==t._linkedDataList.filteredRowIndexArr.length&&(p.v.printLog("Warning: Filters not applicable in drilldown mode. All previously applied filters have been removed.["+this.id+"]"),t._linkedDataList.clearFilter()),t._linkedDataList.filteredRowIndexArr=[];for(var i=this.options.depthColumn,s=t._linkedDataList.initialRowIndexArr.length,r=0;r<s;r++){var a=t._linkedDataList.initialRowIndexArr[r];this.statusArr[a]=!1;("dataList"==this.options.dataColumn?parseInt(this.mainGrid.dataList._getData(a,this.mainGrid._dataList.getColumnID(i))):parseInt(this.mainGrid.dataList._getData(a,this.mainGrid.getColumnID(i))))<=parseInt(this.options.showDepth,10)&&(this.mainGrid._linkedDataList.filteredRowIndexArr.push(a),this.statusArr[a]=!0)}}else{this.statusArr=[],this.options=o.q.extend({showDepth:-1,depthColumn:-1},e||{});for(i=this.options.depthColumn,s=this.mainGrid.getTotalRow(),a=0;a<s;a++)this.statusArr[a]=!0}},E.prototype.getChildrenRowArr=function(t){var e=[];if(this.mainGrid){var i=this.mainGrid.getTotalRow(),o=this.options.depthColumn,s=this.mainGrid.getColumnID(o);if("dataList"==this.options.dataColumn&&(s=this.mainGrid._dataList.getColumnID(o)),"linkedDataList"===this.mode){var r=this.mainGrid._linkedDataList.initialRowIndexArr[t+1],a=parseInt(this.mainGrid.dataList._getData(this.mainGrid._linkedDataList.initialRowIndexArr[t],s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);var n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(var h=t+2;h<i;h++){r=this.mainGrid._linkedDataList.initialRowIndexArr[h];if(this.mainGrid.dataList._getData(r,s)<a+1)break;this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),
n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}else{r=t+1,a=parseInt(this.mainGrid.dataList._getData(t,s),10);if(r<i&&this.mainGrid.dataList._getData(r,s)>a){e.push(r);n=parseInt(this.mainGrid.dataList._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this.mainGrid.dataList._getData(r,s)<a+1);r++)this.mainGrid.dataList._getData(r,s)<n+1&&(e.push(r),n=parseInt(this.mainGrid.dataList._getData(r,s),10))}}return e},E.prototype.getParentRowIndex=function(t){if(this.mainGrid){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=parseInt(this.mainGrid.dataList._getData(t,i));if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t-1;r>=0;r--)if(this.mainGrid.dataList._getData(r,i)<o)return r}return-1},E.prototype.makeOpenRowIndexArr=function(){if("linkedDataList"===this.mode){this.mainGrid._linkedDataList.filteredRowIndexArr=[];for(var t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._linkedDataList.filteredRowIndexArr.push(t)}else{this.mainGrid._dataList.filteredRowIndexArr=[];for(t=0;t<this.statusArr.length;t++)1==this.statusArr[t]&&this.mainGrid._dataList.filteredRowIndexArr.push(t)}},E.prototype.toggle=function(t){var e=this.isOpen(t),i=[];t="linkedDataList"===this.mode?this.mainGrid._linkedDataList.getLinkedRealRowIndex(t):this.mainGrid.getRealRowIndex(t),i=e?this.getChildRowArr(t,!0):this.getChildrenRowArr(t);for(var o=0;o<i.length;o++)this.statusArr[i[o]]=!e;this.makeOpenRowIndexArr(),u.f.fireEvent(this.mainGrid,"ontoggleclick",e,t)},E.prototype.getAncestorRowArr=function(t){if("number"!=typeof t)return!1;for(var e=[],i=t;i>=0;)e.push(i),i=this.getParentRowIndex(i);return e.shift(),e},E.prototype.drillTo=function(t){if("number"!=typeof t)return!1;var e=this.getAncestorRowArr(t);e.unshift(t);for(var i=0;i<e.length;i++){var o=e[i];if(this.statusArr[o]=!0,0!=i)for(var s=this.getChildrenRowArr(o),r=0;r<s.length;r++)this.statusArr[s[r]]=!0}return this.makeOpenRowIndexArr(),this.getDisplayRowIndex(e[e.length-1])},E.prototype.isLastChild=function(t){var e=this.options.depthColumn,i=this.mainGrid.getColumnID(e);"dataList"==this.options.dataColumn&&(i=this.mainGrid._dataList.getColumnID(e));var o=this.mainGrid.dataList._getData(t,i);if("linkedDataList"===this.mode)for(var s=this.mainGrid._linkedDataList.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.mainGrid._linkedDataList.initialRowIndexArr[s];if(this.mainGrid.dataList._getData(r,i)<o)return r}else for(r=t+1;r<this.mainGrid.getTotalRow();r++){if(this.mainGrid.dataList._getData(r,i)==o)return!1;if(this.mainGrid.dataList._getData(r,i)<o)return!0}return!0},E.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var r=i[o];e.push(r),e=e.concat(this.getRecursiveRowIndex(r))}return e}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.getRecursiveRowCount=function(t){try{for(var e=0,i=this.getChildrenRowArr(t),o=0;o<i.length;o++)e+=this.getRecursiveRowCount(i[o]),e++;return e}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.appendChild=function(t,e){try{if(e){var i=t+this.getRecursiveRowCount(t);return this.mainGrid._toggle(this.getDisplayRowIndex(t)),this.mainGrid.dataList.setRowData(i+1,e)}$l("data is null. check data.["+this.id+"]")}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.moveNode=function(t,e){try{var i;if(t<e){if(!this.bodyDrop)i=e-(this.getRecursiveRowCount(t)+1)}else(t>e||t==e)&&(i=e);var o=this.detachNode(t),r=this.appendNode(i,o);return"number"!=typeof i&&(i=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1)),this.bodyDrop=!1,{detachedData:o,insertedData:r,insertedRowIndex:i}}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.appendNode=function(t,e){try{
var i,o,r,a=this.mainGrid._dataList.getColumnCount(),n=e.length/a,l=this.mainGrid._dataList.getColumnID(this.options.depthColumn);if(this.options.depthColumn=parseInt(this.options.depthColumn,10),this.bodyDrop){this.bodyDrop=!1;var h=this,d=this.mainGrid.getRealRowIndex(this.mainGrid.getRowCount()-1),c=this.getDisplayRowIndex(function t(e){var i=h.getParentRowIndex(e);return i=i>-1?t(i):e}(d));i=parseInt(this.mainGrid.dataList.getCellData(c,l),10),o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10),t=d+this.getRecursiveRowCount(d)+1,r=i-o}else{c=this.getDisplayRowIndex(t-1);r=(i=parseInt(this.mainGrid.dataList.getCellData(c,l),10))-(o=parseInt(e[a*(n-1)+parseInt(this.options.depthColumn)],10))+1}for(var u=[],p=0;p<n;p++)for(var g=0;g<a;g++){var m=e[a*p+g];g==this.options.depthColumn&&(m-=0,m+=r),u.push(m)}this.mainGrid.dataList._insertData(t,u,-1);var f=this.getDisplayRowIndex(t);return this.isOpen(f)&&this.mainGrid._toggle(f),u}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.detachNode=function(t){try{for(var e=[],i=this.mainGrid.dataList.removeRow(t,{skipNotify:!0}),o=0;o<i.length;o++)e=e.concat(i[o]);return e}catch(t){s.Y.printStackTrace(t,null,this)}},E.prototype.insertNextSibling=function(t,e){try{this.options.depthColumn=parseInt(this.options.depthColumn,10);var i=this.mainGrid.dataList.getColumnCount(),o=e.length/this.mainGrid.dataList.getColumnCount(),r=this.mainGrid.getDisplayRowIndex(t),a=parseInt(this.mainGrid.dataList.getCellData(r,this.options.depthColumn),10)-parseInt(e[i*(o-1)+parseInt(this.options.depthColumn)],10),n=[];t+=this.getRecursiveRowCount(t)+1;for(var l=0;l<o;l++)for(var h=0;h<i;h++){var d=e[i*l+h];h==this.options.depthColumn&&(d-=0,d+=a),n.push(d)}if(this.mainGrid.dataList._insertData(t,n,-1),this.mainGrid.options.closeDrillDownSibling)for(l=0;l<o;l++){var c=this.getDisplayRowIndex(t+l);this.isOpen(c)&&this.mainGrid._toggle(c)}return n}catch(t){s.Y.printStackTrace(t,null,this)}};var R=i(3925),N=function(t){this._linkedDataList._grid=t};N.prototype.getLinkedRowIndex=function(t){return this._linkedDataList.getLinkedRowIndex(t)},N.prototype.getRealRowIndex=function(t){return this._linkedDataList.filteredRowIndexArr[t]},N.prototype.getFilteredRowIndex=function(t){return this._linkedDataList.getFilteredRowIndex(t)},N.prototype.getTotalRow=function(){try{return this._linkedDataList.initialRowIndexArr.length}catch(t){s.Y.printStackTrace(t)}},N.prototype.getTotalCol=function(){try{return this._linkedDataList._dataList.getTotalCol()}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRowCount=function(){try{return this._linkedDataList.getDataLength()}catch(t){s.Y.printStackTrace(t)}},N.prototype.getCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getCellData(i,e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getOriginalCellData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getOriginalCellData(i,e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDataLength=function(){return this._linkedDataList.filteredRowIndexArr.length},N.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){s.Y.printStackTrace(t,null,this)}},N.prototype.getRowPosition=function(){try{return this._linkedDataList._dataList.getRowPosition()}catch(t){s.Y.printStackTrace(t,null,this)}},N.prototype.getColData=function(t){try{for(var e=[],i=0;i<this._linkedDataList.initialRowIndexArr.length;i++)e.push(this._linkedDataList.getCellData(i,t));return e}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRowData=function(t){try{var e=this._linkedDataList.getRealRowIndex(t);return this._linkedDataList._dataList.getRowData(e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDataRow=function(t){try{var e=this._linkedDataList.getRealRowIndex(t)
;return this._linkedDataList._dataList.getDataRow(e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getMatchedData=function(t,e,i,o,r){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getMatchedIndex(t,e,i,o,r),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUnmatchedData=function(t,e,i,o,r){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var a=[],n=this._linkedDataList.getUnmatchedIndex(t,e,i,o,r),l=0;l<n.length;l++)a.push(this._linkedDataList.getRowData(n[l]));return a}catch(t){s.Y.printStackTrace(t)}},N.prototype.getMatchedColumnData=function(t,e,i,o,r,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getMatchedIndex(t,e,o,r,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUnmatchedColumnData=function(t,e,i,o,r,a){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var n=[],l=this._linkedDataList.getUnmatchedIndex(t,e,o,r,a),h=0;h<l.length;h++)n.push(this._linkedDataList.getCellData(l[h],i));return n}catch(t){s.Y.printStackTrace(t)}},N.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++)e.push(this._linkedDataList.getCellData(this._linkedDataList.filteredRowIndexArr[i],t));return e},N.prototype.getMatchedIndex=function(t,e,i,o,r){try{i=void 0===i||null==i||i,0!=(i=a.Z.getBoolean(i))&&(i=!0);var n=this._linkedDataList._dataList.getColumnIndex(t),l=this._linkedDataList.getFilteredColData(n),h=[];"number"!=typeof o&&(o=0),"number"!=typeof r&&(r=l.length),r>l.length&&(r=l.length);for(var d=o;d<r;d++){var c=l[d],u=this._linkedDataList.getRealRowIndex(d);1==i?c===e&&h.push(u):c.indexOf(e)>-1&&h.push(u)}return h}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUnmatchedIndex=function(t,e,i,o,r){try{0!=i&&(i=!0);var a=this._linkedDataList._dataList.getColumnIndex(t),n=this._linkedDataList.getFilteredColData(a),l=[];"number"!=typeof o&&(o=0),"number"!=typeof r&&(r=n.length),r>n.length&&(r=n.length);for(var h=o;h<r;h++){var d=n[h],c=this._linkedDataList.getRealRowIndex(h);1==i?d!==e&&l.push(c):d.indexOf(e)<=-1&&l.push(c)}return l}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this._linkedDataList.getDataLength()&&(e=this._linkedDataList.getDataLength());for(var r=t;r<e;r++){var a=this._linkedDataList.getRealRowIndex(r);i=i.concat(this._linkedDataList.getRowData(a))}return i}catch(t){s.Y.printStackTrace(t)}},N.prototype.getAllData=function(){try{return this._linkedDataList._dataList.getAllFilteredData()}catch(t){s.Y.printStackTrace(t)}},N.prototype.getAllFilteredData=function(){this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=0;e<this._linkedDataList.getDataLength();e++)t=t.concat(this._linkedDataList.getRowData(e));return t},N.prototype.getColumnDistinctDataArray=function(t){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._linkedDataList._dataList.bodyIdColIndexMap[t]);for(var o=this._linkedDataList._dataList.getCellInfo(t),r=this._linkedDataList.getColData(t),a=0;a<r.length;a++){i[r[a]]=1}for(var n in i)e.push(n);return"text"==o.options.dataType?e.sort():e.sort(this._linkedDataList.comparator),e}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRangeXML=function(t,e){try{return this._linkedDataList.getRangeXML(t,e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getMatchedXML=function(t,e,i,o,r){try{return this._linkedDataList.getMatchedXML(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUnmatchedXML=function(t,e,i,o,r){try{return this._linkedDataList.getUnmatchedXML(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRowXML=function(t){try{return this._linkedDataList.getRowXML(t)}catch(t){s.Y.printStackTrace(t)}},
N.prototype.getAllXML=function(t){try{return this._linkedDataList.getAllXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getAllFilteredXML=function(t){return this._linkedDataList.getAllFilteredXML(t)},N.prototype.getRowJSON=function(t,e){try{return this._linkedDataList.getRowJSON(t,e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getAllJSON=function(t){try{return this._linkedDataList.getAllJSON(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getRangeJSON=function(t,e,i){try{return this._linkedDataList.getRangeJSON(t,e,i)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getMatchedJSON=function(t,e,i,o,r){try{return this._linkedDataList.getMatchedJSON(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUnmatchedJSON=function(t,e,i,o,r){try{return this._linkedDataList.getUnmatchedJSON(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getFusionChartData=function(t,e,i,o){return this._linkedDataList.getFusionChartData(t,e,i,o)},N.prototype.getRowStatusValue=function(t){try{return this._linkedDataList.getRowStatusValue(t)}catch(t){s.Y.printStackTrace(t,null,this)}},N.prototype.getRowStatus=function(t){try{return this._linkedDataList.getRowStatus(t)}catch(t){s.Y.printStackTrace(t,null,this)}},N.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this._linkedDataList.getDataLength();i++){var o=this._linkedDataList.getRealRowIndex(i);t.indexOf(this._linkedDataList._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){s.Y.printStackTrace(t)}},N.prototype.getInsertedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("C")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUpdatedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("U")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("DV")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getOnlyDeletedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("D")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getVoidIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("V")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getModifiedIndex=function(){try{return this._linkedDataList.getRowIndexByStatus("CUD")}catch(t){s.Y.printStackTrace(t)}},N.prototype.getInsertedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getInsertedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getInsertedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getInsertedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getInsertedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getVoidData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t
}catch(t){s.Y.printStackTrace(t)}},N.prototype.getVoidXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getVoidIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getVoidJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getVoidIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getOnlyDeletedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getOnlyDeletedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getOnlyDeletedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getOnlyDeletedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getOnlyDeletedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUpdatedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUpdatedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getUpdatedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getUpdatedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getModifiedData=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowData(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.getModifiedXML=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});var t=this._linkedDataList.getModifiedIndex();return this._linkedDataList._dataList.getArrXML(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.getModifiedJSON=function(){try{this._linkedDataList.broadcast({gridView:["_endEdit"]});for(var t=[],e=this._linkedDataList.getModifiedIndex(),i=0;i<e.length;i++)t.push(this._linkedDataList.getRowJSON(e[i]));return t}catch(t){s.Y.printStackTrace(t)}},N.prototype.setColumnFilter=function(t,e,i,o){return"object"!==(0,l.A)(t)||a.Z.isString(t)||(t.internal=!0),this._linkedDataList.setColumnFilter(t,e,i,o)},N.prototype.removeColumnFilter=function(t){return this._linkedDataList.removeColumnFilter(t,{internal:!0})},N.prototype.clearSortFilter=function(){return this._linkedDataList.clearSortFilter()},N.prototype.removeColumnFilterAll=function(){return this._linkedDataList.removeColumnFilterAll()},N.prototype.setFilter=function(t){return t&&(t.internal=!0),this._linkedDataList.setFilter(t)},N.prototype.removeFilter=function(t,e){return t&&(t.internal=!0),this._linkedDataList.removeFilter(t,e)},N.prototype.clearFilter=function(){return this._linkedDataList.clearFilter()},N.prototype.sort=function(t,e){return this._linkedDataList.sort(t,e)},N.prototype.clearSort=function(){return this._linkedDataList.clearSort()},N.prototype.multisort=function(t){return this._linkedDataList.multisort(t)},N.prototype.getRowArray=function(t){try{return this._linkedDataList.getRowArray(t)}catch(t){s.Y.printStackTrace(t)}},N.prototype.removeRow=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);return this._grid._dataList.removeRow(i,e)}catch(t){
s.Y.printStackTrace(t)}},N.prototype.removeRows=function(t){try{for(var e=[],i=0;i<t.length;i++)e.push(this._linkedDataList.getRealRowIndex(t[i]));return this._grid._dataList.removeRows(e)}catch(t){s.Y.printStackTrace(t)}},N.prototype.setRowData=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowData(o,e,i)}catch(t){s.Y.printStackTrace(t)}},N.prototype.setRowXML=function(t,e,i){try{var o=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.setRowXML(o,e,i)}catch(t){s.Y.printStackTrace(t)}},N.prototype.insertData=function(t,e){try{var i=this._linkedDataList.getRealRowIndex(t);this._grid._dataList.insertData(i,e)}catch(t){s.Y.printStackTrace(t)}};var F=i(7455),O=function(t,e,i){var o;this.options=this._getDefaultOptionsMinimum(),t&&(o=t.getAttribute("escape")),!o&&e.element&&(o=e.element.getAttribute("escape"));var s=a.Z.getEscape(o,e.options.pluginName);this.options.escape=s?a.Z.getBoolean(s):this.options.escape,this.internal=!1,(i||"TD"==t.getTagName().toUpperCase())&&(this.internal=!0),this.mainGrid=e,this.mainGridId="G_"+this.mainGrid.id+"__",t&&this.setOptions(t),null!=this.mainGrid.scope_obj&&(this.options._scope_obj_uuid=this.mainGrid.scope_obj.uuid,this.scope_id=this.mainGrid.scope_obj.id),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.colID=this.options.col_id,this.id=this.options.col_id,this.options.id=this.options.col_id,this.setController(),this.initFormatter(t),this.initializeCellInfo(t,i),this.expressionStr=null,this.style="",this.heightGap=0;var n=r.I.browserVersion();if(r.I.browserCheck.ie&&"8"!=n&&(this.heightGap=2),""!=this.options.importExp&&(this.options.importExp=this.options.importExp.replace(/[cC][oO][lL][\s]*[(]/g,"_this.columnValue(obfuscator_rowXml, "),this.options.importExp=this.options.importExp.replace(/[xX][pP][aA][tT][hH][\s]*[(]/g,"_this.xpathValue(obfuscator_rowXml, "),this.options.importExp=this.options.importExp.replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.rowIndexValue(obfuscator_i")),(0==this.options.colSpan||isNaN(this.options.colSpan))&&(this.options.colSpan=1),(0==this.options.rowSpan||isNaN(this.options.rowSpan))&&(this.options.rowSpan=1),t){var l=!this.options.groupName||!this.options.groupValue,h=this.options.inputType;if(l&&("button"!=h&&"image"!=h)&&this.mainGrid.successBinding){var d=e._dataList.getCellInfo(this.id);!(!d||!d.element&&d.id!==this.id)||(this.options.readOnly=!0)}}"radio"==this.options.inputType&&this.options.groupName&&(this.mainGrid.radioGroupRepChk[this.options.groupName]=!0),"$blank"==this.options.NaNFormat&&(this.options.NaNFormat=""),this.changedCellHeight=0,this.dynamicAttrInfo={},"custom"==this.options.inputType&&(this.mainGrid.hasCustomInputType=!0),"expression"===this.options.inputType&&"true"!==this.options.expressionSort&&(this.mainGrid.expressionHeaderInfo[this.mainGrid.bodyToHeaderRelation[this.id]]=!0),"string"==typeof this.options.useItemLocale&&(this.options.useItemLocale=WebSquare.util.getBoolean(this.options.useItemLocale))};for(var B in O.prototype.defaultOptions={id:"",col_id:"",colIndex:"",colSpan:0,rowSpan:0,defaultValue:"",value:"",inputType:"text",useFilter:!1,blockSelect:!1,dataType:"",valueType:"binary",viewType:"",trueValue:null,falseValue:null,editType:"",applyFormat:"display",displayFormat:"",displayFormatter:"",chooseOptionLabel:"",chooseOptionValue:"",chooseOption:!1,allOption:!1,title:"",voidNull:!1,adjustMaxLength:!1,useMaxLength:!1,depthColumn:"",showDepth:0,importExp:"",importFormatter:"",expression:"",colMerge:!1,colMergeEdit:!1,upperColumn:"",readOnly:"",imageWidth:"",imageHeight:"",imageClickFunction:"",imageSrc:"",imageSrcDisabled:"",imageSrcReadOnly:"",useImageClick:!1,alt:"",calendarValueType:"yearMonthDate",disabled:"",textAlign:"",exportFormatter:"",imeMode:"",selectSetter:"",ignoreStatus:!1,
dateValidCheck:"",embeddedInput:"",groupName:"",escape:"false"!==r.I.getConfiguration("/WebSquare/escape/@value"),setRecursive:!1,showReadOnly:!1,customFormatter:"",escapeFormatter:"",depthType:"nbsp",moveFocusByChoice:"",directItemChoice:"",directOpen:!1,focusOutOnCheckHeaderClick:!0,keepFocusOnCheckHeaderClick:!1,usePartialCheck:!0,partialCheckNextClick:"",footerDiv:!1,displayRowIndex:!1,NaNFormat:"NaN",disabledClass:"",hiddenClass:"",displayMode:"0",delimiter:"\t",skipKeyMoveEditMode:!1,skipKeyMove:!1,checkboxLabel:"",checkboxLabelPosition:"right",checkboxLabelColumn:"",checkboxLabelFormatter:"",radioLabel:"",radioLabelPosition:"right",radioLabelColumn:"",radioLabelFormatter:"",checkAlways:!1,fixColumnWidth:!1,sortLabel:!1,useIOFormatLength:!1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",tooltipTime:1,minWidth:20,eventPriority:"onviewchange",customModelFormatter:"",customModelUnformatter:"",useMonthYearFormat:!1,editModeEventIcon:"",keepCellClass:!1,inputReadOnly:!1,keyMoveListSync:!1,tableRender:"",copyOption:"",invalidMessageFunc:"",dateValidSetCustom:!1,checkcomboboxUseDrag:!1,checkcomboboxUseEdit:!1,checkcomboboxRangeSeparator:"",checkcomboboxValidateOnInput:!1,checkcomboboxVisibleRowNum:0,checkcomboboxVisibleColNum:1,checkcomboboxVisibleColMax:1,placeholder:"",selectedData:!0,selectedDataDisplay:!0,refInitSync:!1,eventPropagation:!1,autoDecimalPoint:!1,useLocale:!1,noDisabledOnReadOnly:!1},O.prototype._getDefaultOptionsMinimum=function(){return{id:O.prototype.defaultOptions.id,col_id:O.prototype.defaultOptions.col_id,colIndex:O.prototype.defaultOptions.colIndex,value:O.prototype.defaultOptions.value,defaultValue:O.prototype.defaultOptions.defaultValue,inputType:O.prototype.defaultOptions.inputType,valueType:O.prototype.defaultOptions.valueType,viewType:O.prototype.defaultOptions.viewType,applyFormat:O.prototype.defaultOptions.applyFormat,displayFormat:O.prototype.defaultOptions.displayFormat,chooseOptionLabel:O.prototype.defaultOptions.chooseOptionLabel,chooseOptionValue:O.prototype.defaultOptions.chooseOptionValue,chooseOption:O.prototype.defaultOptions.chooseOption,title:O.prototype.defaultOptions.title,selectedData:O.prototype.defaultOptions.selectedData,selectedDataDisplay:O.prototype.defaultOptions.selectedDataDisplay,depthColumn:O.prototype.defaultOptions.depthColumn,showDepth:O.prototype.defaultOptions.showDepth,importExp:O.prototype.defaultOptions.importExp,expression:O.prototype.defaultOptions.expression,upperColumn:O.prototype.defaultOptions.upperColumn,readOnly:O.prototype.defaultOptions.readOnly,imageWidth:O.prototype.defaultOptions.imageWidth,imageHeight:O.prototype.defaultOptions.imageHeight,alt:O.prototype.defaultOptions.alt,calendarValueType:O.prototype.defaultOptions.calendarValueType,disabled:O.prototype.defaultOptions.disabled,textAlign:O.prototype.defaultOptions.textAlign,exportFormatter:O.prototype.defaultOptions.exportFormatter,imeMode:O.prototype.defaultOptions.imeMode,selectSetter:O.prototype.defaultOptions.selectSetter,dateValidCheck:O.prototype.defaultOptions.dateValidCheck,escape:O.prototype.defaultOptions.escape,depthType:O.prototype.defaultOptions.depthType,NaNFormat:O.prototype.defaultOptions.NaNFormat,disabledClass:O.prototype.defaultOptions.disabledClass,hiddenClass:O.prototype.defaultOptions.hiddenClass,displayMode:O.prototype.defaultOptions.displayMode,delimiter:O.prototype.defaultOptions.delimiter,skipKeyMove:O.prototype.defaultOptions.skipKeyMove,minWidth:O.prototype.defaultOptions.minWidth,keepCellClass:O.prototype.defaultOptions.keepCellClass,usePartialCheck:O.prototype.defaultOptions.usePartialCheck}},O.prototype._defaultOptionsKeyLowerCase={},O.prototype.defaultOptions)O.prototype._defaultOptionsKeyLowerCase[B.toLowerCase()]=B;O.prototype.setOptions=function(t,e){try{var i=this.mainGrid.options.pluginName,n=t.getAttribute("calendarValueType")||this.options.calendarValueType,l=t.getAttribute("inputType")||"text"
;this.configOptions=o.q.extend({},r.I.getConfig(i+"/column[@inputType='"+l+"']"));var h=t.getAttribute("dataType")||"text";this.configOptions2=o.q.extend({},r.I.getConfig(i+"/column[@dataType='"+h+"']")),"calendar"==l&&"grid"==i?this.configOptions.displayFormat=r.I.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat[@valueType="'+n+'"]/@value')||r.I.getConfiguration('/WebSquare/grid/column[@inputType="calendar"]/displayFormat/@value'):"calendar"==l&&"gridView"==i&&(this.configOptions.displayFormat=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+n+'"]/@value')||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat/@value')||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/displayFormat[@valueType="'+n+'"]/@defaultValue')),"textarea"===l&&(this.configOptions.keepCellClass=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/keepCellClass/@value')),this.options=o.q.extendKeepingType(o.q.extendKeepingType(this.options,this.configOptions2),this.configOptions);var d=WebSquare.Parser.parseAttribute(t);for(var c in d){var u=d[c];"class"==c?this.options.className=u:""!=String(u).wq_trim()&&(this._defaultOptionsKeyLowerCase[c]&&(c=this._defaultOptionsKeyLowerCase[c]),"boolean"==typeof this.defaultOptions[c]?u=a.Z.getBoolean(u):"number"==typeof this.defaultOptions[c]&&(u=a.Z.getNumber(u)),this.options[c]=u)}if(!(h=this.options.dataType)&&this.mainGrid.successBinding&&(h=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"==h&&!this.options.displayFormat){if("calendar"===this.options.inputType&&this.options.displayFormatFunc){var p=a.Z.getGlobalFunction(this.options.displayFormatFunc,this.mainGrid.scope_id);"function"==typeof p&&(this.options.displayFormat=p.call(this,this.options.calendarValueType))}this.options.displayFormat||(this.options.displayFormat=r.I.getConfiguration("/WebSquare/"+i+"/dataType/date/@displayFormat"))}if("date"==h&&this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var g=a.Z.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.mainGrid.scope_id);"function"==typeof g&&(this.options.calendarDisplayFormat=g.call(this,this.options.calendarValueType))}if("time"!=h||this.options.displayFormat||(this.options.displayFormat="HH:mm"),this.mainGrid.options.senseReader&&"false"!==this.options.embeddedInput){var m=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textImage"]/embeddedInput/@value');switch(this.options.inputType||"text"){case"secret":case"text":case"textImage":"none"==this.mainGrid.options.focusMode&&"false"!=this.options.readOnly&&(this.options.readOnly=!0);case"select":case"checkbox":case"radio":case"calendar":"textImage"===this.options.inputType?a.Z.getBoolean(m)&&(this.options.embeddedInput=!0):this.options.embeddedInput=!0}}else this.options.embeddedInput=a.Z.getBoolean(this.options.embeddedInput);if("textarea"==this.options.inputType&&(this.options.showReadOnly=!0),this.element=t,"expression"==this.options.inputType){var f=this.options.expression;""!=f&&(f=f.replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(")).match("rowStatus")&&this.mainGrid.rowStatusColIDArr.push(this.options.col_id)}this.options.editModeEventIcon||(this.options.editModeEventIcon=this.mainGrid.options.editModeEventIcon);if(!0!=={onclick:!0,ondblclick:!0}[this.options.editModeEventIcon]&&(this.options.editModeEventIcon="onclick"),this.options.copyOption||(this.options.copyOption=this.mainGrid.options.copyOption),
this.options.chooseOptionLabel||("autoComplete"===this.options.inputType?this.options.chooseOptionLabel=WebSquare.language.getMessage("AutoComplete_choose")||"-choose-":"checkcombobox"===this.options.inputType?this.options.chooseOptionLabel=WebSquare.language.getMessage("CheckCombobox_choose")||"-choose-":this.options.chooseOptionLabel=WebSquare.language.getMessage("SelectBox_choose")||"-choose-"),this.options.embeddedInput&&"text"===this.options.inputType&&a.Z.getBoolean(this.options.readOnly)&&this.options.displayFormatter){var b=a.Z.getGlobalFunction(this.options.displayFormatter,this.mainGrid.scope_id);if("function"==typeof b){var y=b.toString(),v=y.match(/return\s+["'`].*?<.*>.*?["'`]/);if(v&&v.length>0){var w=v[0],S=w.match(/<\s*([A-Za-z]+)\s+/);S&&S.length>1&&(this._realInputType=S[1])}}}!this.element.getAttribute("minWidth")&&this.mainGrid.options.minWidth&&(this.options.minWidth=this.mainGrid.options.minWidth)}catch(t){s.Y.printStackTrace(t,null,this)}},O.prototype.setController=function(){switch(this.mainGrid.options.useTextMultiLink&&"text"===this.options.inputType&&this.options.customFormatter&&(this.options.inputType="user"),this.options.inputType){case"text":default:o.q.extend(this,WebSquare.uiplugin.cellInfo.text.prototype);break;case"link":o.q.extend(this,WebSquare.uiplugin.cellInfo.link.prototype);break;case"checkbox":o.q.extend(this,WebSquare.uiplugin.cellInfo.checkbox.prototype);break;case"button":o.q.extend(this,WebSquare.uiplugin.cellInfo.button.prototype);break;case"image":o.q.extend(this,WebSquare.uiplugin.cellInfo.image.prototype);break;case"radio":o.q.extend(this,WebSquare.uiplugin.cellInfo.radio.prototype);break;case"select":o.q.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(this,WebSquare.uiplugin.cellInfo.select.prototype);break;case"calendar":o.q.extend(this,WebSquare.uiplugin.cellInfo.calendar.prototype);break;case"textarea":o.q.extend(this,WebSquare.uiplugin.cellInfo.textarea.prototype);break;case"expression":o.q.extend(this,WebSquare.uiplugin.cellInfo.expression.prototype);break;case"drilldown":o.q.extend(this,WebSquare.uiplugin.cellInfo.text.prototype),o.q.extend(this,WebSquare.uiplugin.cellInfo.drilldown.prototype);break;case"textImage":o.q.extend(this,WebSquare.uiplugin.cellInfo.textImage.prototype);break;case"checkcombobox":o.q.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(this,WebSquare.uiplugin.cellInfo.checkcombobox.prototype);break;case"autoComplete":o.q.extend(this,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(this,WebSquare.uiplugin.cellInfo.autoComplete.prototype);break;case"spinner":o.q.extend(this,WebSquare.uiplugin.cellInfo.spinner.prototype);break;case"custom":o.q.extend(this,WebSquare.uiplugin.cellInfo.custom.prototype);break;case"user":o.q.extend(this,WebSquare.uiplugin.cellInfo.user.prototype)}},O.prototype.setInnerHTML=function(t,e,i,o,s){this.mainGrid._getWrapperCell(t,i).innerHTML=this.mainGrid.dataTagOpen+this.getDisplayData(e)+this.mainGrid.dataTagClose},O.prototype.setEditMode=function(t,e){this.mainGrid.editedCell=null,this.mainGrid.editMode=!1},O.prototype.initFormatter=function(t){try{var e=this.options.dataType;if(!e&&this.mainGrid.successBinding&&(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),!e&&this.options.expression){var i=this.options.expression;(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/[sS][uU][mM][\s]*[(]/g,"NUMBER(")).replace(/[aA][vV][gG][\s]*[(]/g,"NUMBER(")).replace(/[mM][aA][xX][\s]*[(]/g,"NUMBER(")).replace(/[mM][iI][nN][\s]*[(]/g,"NUMBER(")).replace(/rowStatus[\s]*[(]/gi,"NUMBER(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"STRING(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"STRING(")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"STRING(")).indexOf("NUMBER(")>-1?e="number":i.indexOf("STRING(")>-1&&(e="text")}var o=e,a=this.mainGrid._isNumberType(e);a&&"\t"===this.options.delimiter&&(this.options.delimiter="")
;var n,l,h=this.options.displayFormat;if("text"==this.options.inputType&&!h)if(a)"euro"==e?(h||(h=this.mainGrid.options.euroMask||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/euroMask/@value')||""),n=".",l=","):"rupee"==e?(h||(h=this.mainGrid.options.rupeeMask||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),n=",",l="."):"tenge"==e?(h||(h=this.mainGrid.options.tengeMask||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),n=" ",l=","):"number"!=e&&"float"!=e&&"bigDecimal"!=e||(h||(h=this.mainGrid.options.numberMask||r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/numberMask/@value')||""),n=",",l="."),this.options.displayFormat=h,this.options.delimiter||(this.options.delimiter=n),this.options.decimalDelimiter||(this.options.decimalDelimiter=l),this.options.customModelFormatter||(this.options.customModelFormatter=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="text"]/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||"");"date"!=o||"calendar"!=this.options.inputType||this.options.ioFormat||(this.options.ioFormat=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="calendar"]/ioFormat[@valueType="'+this.options.calendarValueType+'"]/@defaultValue'),this.options.ioFormat||("yearMonthDate"==this.options.calendarValueType?this.options.ioFormat="yyyyMMdd":"yearMonth"==this.options.calendarValueType?this.options.ioFormat="yyyyMM":"yearMonthDateTime"==this.options.calendarValueType?this.options.ioFormat="yyyyMMddHHmm":"yearMonthDateTimeSec"==this.options.calendarValueType&&(this.options.ioFormat="yyyyMMddHHmmSS"))),"default"==this.options.maskFormat&&this.options.displayFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this.options.maskFormat&&this.options.displayFormat?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):this.formatter="float"===o||"bigDecimal"===o?WebSquare.format.createFormatter(o,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.mainGrid.scope_id,this.mainGrid.id):WebSquare.format.createFormatter(o,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.mainGrid.scope_id,this.mainGrid.id),this.emptyFormatter=WebSquare.format.createFormatter(o,"",null,null,null,null,this.mainGrid.scope_id,this.mainGrid.id)
}catch(t){s.Y.printStackTrace(t)}},O.prototype.getDisplayData=function(t){return this.formatter&&(t=this.formatter.format(t)),"secret"==this.options.inputType&&(t=t.replace(/./gi,"")),t},O.prototype.getLocaleValue=function(t){try{var e;if(t)t===this.options.chooseOptionLabel?this.options.chooseOptionLabelLocaleRef&&(e=this.mainGrid.getLocaleValue(this.options.chooseOptionLabelLocaleRef)):(!0===this.options.useItemLocale||void 0===this.options.useItemLocale&&!0===this.mainGrid.useItemLocale)&&(e=this.mainGrid.getLocaleValue(t)),e&&(t=e);return t}catch(t){s.Y.printStackTrace(t,null,this)}},O.prototype.initializeCellInfo=function(){},O.prototype.handleEndEdit=function(t,e,i){try{if(t=t||{},i=i||{},this.options.embeddedInput)return!0;if(this.mainGrid.rollbackCommitFlag=!1,this.mainGrid.editedCell&&0==this.mainGrid.editMode&&(this.mainGrid.editMode=!0),this.mainGrid.editMode){var o=this.mainGrid.editedCell;if(o._getEditedValue){var a=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),n=this.editRowIndex,l=this.mainGrid._getGroupbyDisplayRowIndex(n),h=o._getEditedValue();if(!0===this._editendCalled)return;if(this._editendCalled=!0,d=u.f.fireEvent(this.mainGrid,"oneditend",l,a,h,t),this._editendCalled=!1,d+""=="false")return this.mainGrid.getInput(this).focus(),u.f.stopEvent(t),!1}if(!o.validate())return u.f.stopEvent(t),!1;if(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,!i.otherClick){p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),this._handleEndEdit(t,e,i));var d=this._afterEndEdit(o,p,i);return o=null,d}var c=null,p=null;null!=this.editTd&&(p=this.mainGrid.dataList.getCellData(this.editRowIndex,o.options.id),c=this._handleEndEdit(t,e,i)),r.I.setTimer((function(t,e){null!=this.editTd&&this._handleEndEdit_focus(e),this._afterEndEdit(t,p,i),t=null,e=null}),{key:this.id+"_handleClickEventDocument",caller:this,args:[o,c]}),c=null,o=null}}catch(t){s.Y.printStackTrace(t,null,this)}},O.prototype._afterEndEdit=function(t,e,i){i=i||{};var o,s=this.mainGrid.dataList._getCellData(this.editRowIndex,t.options.id),r=this.editRowIndex,n=t.options.id,l=r,h=this.mainGrid.getColumnIndex(n);if(this.editTd){var d=a.Z.getDataPrefix("colMerged");o=this.editTd.getAttribute(d)}if("0"==o&&!t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped){var c=function(t,i,o,s){for(var r=t;t+1<this.mainGrid.getDataLength();){t+=1;var a=this.mainGrid.upperGroupingTest(t,i),n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}this.mainGrid.dataList.__setCellData(t,i,s)}for(t=r;t-1>=0;){a=this.mainGrid.upperGroupingTest(t,i);t-=1;n=this.mainGrid.dataList._getCellData(t,i);if(!a){l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}if(n!=e){var h,l=this.mainGrid.tdIdList.length;(h=this.mainGrid.data_td_list[(t-this.mainGrid.rowIndex)*l+o])&&this.setInnerHTML(h,n,t,this.id);break}this.mainGrid.dataList.__setCellData(t,i,s)}i=this.mainGrid.getColumnIndex(i);this.mainGrid.applyColumnStyleOptions(i)};c.call(this,r,n,h,s);var p=this.mainGrid.upperToLowerColumnRelation[n];if(p)for(var g=0;g<p.length;g++){var m=p[g],f=this.mainGrid.dataList._getCellData(r,m),b=this.mainGrid.getColumnIndex(m),y=this.mainGrid.getCellInfo(m);c.call(y,r,m,b,f)}}t.options.colMergeEdit&&!this.mainGrid.groupbyStatus.grouped&&this.mainGrid.setColMergeCellData(l-this.mainGrid.rowIndex,l,h);var v=this.mainGrid.dataList._getCellData(l,h);this.mainGrid.setMergedCellData(l,h,v);Math.abs(this.changedCellHeight)>3&&this.mainGrid.notifyRowChanged(l);var w=this.mainGrid._getGroupbyDisplayRowIndex(l)
;if(!this.mainGrid.options.viewChangeAfterEdit||!i.from_fireOnviewchange&&!i.from_handleClickEvent)var S=u.f.fireEvent(this.mainGrid,"onafteredit",w,h,v,this.mainGrid.lastEvent);return this.mainGrid.lastEvent=null,S=0!=S,this.mainGrid.rollbackCommitFlag=!0,S},O.prototype.handleScrollY=function(t,e,i){return this.validate()?this.handleEndEdit(t,void 0,i):this.handleCancelEdit(t)},O.prototype.validate=function(){return!0},O.prototype._handleEndEdit=function(t,e,i){var o=this._handleEndEdit_common(t);if((i=i||{}).otherClick)return o;this._handleEndEdit_focus(o,e,i.focuseChanged)},O.prototype._handleEndEdit_common=function(t,e){return null},O.prototype._handleEndEdit_focus=function(t){return null},O.prototype.handleCancelEdit=function(t){this.options.embeddedInput||(this.mainGrid.editedCell=null,this.mainGrid.editMode=!1,this._handleCancelEdit(t))},O.prototype._handleCancelEdit=function(t){},O.prototype.removeCellData=function(t,e){},O.prototype.doDefaultAction=function(t){},O.prototype.setMergedCol=function(t,e,i,o){var s=t,r=new Array;for(r[t]=!0;t<this.mainGrid.getDataLength();){if(t+=1,!(a=this.mainGrid.upperGroupingTest(t,e)))break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}for(t=s;t>0;){var a=this.mainGrid.upperGroupingTest(t,e);if(t-=1,!a)break;if(this.mainGrid.dataList._getCellData(t,e)!=i)break;this.mainGrid.dataList.__setCellData(t,e,o),r[t]=!0}e=this.mainGrid.getColumnIndex(e);return this.mainGrid.applyColumnStyleOptions(e),r},O.prototype.getEscape=function(){var t=""!==this.options.escape?this.options.escape:this.mainGrid.options.escape;return t=WebSquare.util.getBoolean(t)},O.prototype.getColumnIndex=function(t){return t||(t=this.colID),this.mainGrid.getColumnIndex(t)},O.prototype.setMaxLength=function(t){try{if(this.options.maxlength=this.options.maxLength=t,"autoComplete"==this.options.inputType)this.autoComplete&&this.autoComplete.setMaxLength(t);else if("text"!==this.options.inputType&&"secret"!==this.options.inputType||1!=this.options.embeddedInput){this.mainGrid.getInput(this).setMaxLength(t)}else for(var e=this.mainGrid.tdIdList.length,i=this.mainGrid.getColumnIndex(this.options.id),o=this.mainGrid.getRowCount(),r=0;r<o;r++)this.mainGrid.getInput(this,this.mainGrid.data_td_list[r*e+i]).setMaxLength(t)}catch(t){s.Y.printStackTrace(t,null,this)}},O.prototype.setFloatMaxLength=function(t){try{this.options.maxlength=this.options.maxLength="-1",this.mainGrid.getInput(this).setFloatMaxLength(t)}catch(t){s.Y.printStackTrace(t,null,this)}},O.prototype.refreshCell=function(){},O.prototype._checkFastScroll=function(t,e,i,o){try{var r="string"!=typeof t||!1===this.mainGrid._regDetectDOM.test(t);return e&&null!=e.textContent&&this.mainGrid.hasClass(e,i)&&r&&!0===o}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl=function(){},O.itemsetControl.prototype.initializeCellInfo=function(t){try{if(this.internal&&this.initializeInfo?this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.initializeInfo.rowIndex+"_"+this.colID+"_"+this.id:this.compID=this.mainGridId+"_"+this.options.inputType+"_"+this.colID,"select"===this.options.inputType&&""!=this.options.selectSetter)this.selectSetted=!1,this.resetMatchInfo=!0;else{var e="";if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var i=(e=a.Z.isIE("6 7")&&this.internal&&t._element.outerHTML?WebSquare.xml.nodeWellFormed(t._element.outerHTML):WebSquare.xml.serialize(t._element)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"",r=this.options.inputType;e=(e=e.wq_replaceAll("<w2:column","<w2:"+r+i)).wq_replaceAll("</w2:column","</w2:"+r);var n=WebSquare.xml.parse(e,!0);this.xml=new WebSquare.Elem(n.documentElement)}o.q.extend(this,F.t.prototype),this.hasRef=!1,
"checkcombobox"!==this.options.inputType&&("select"===this.options.inputType?this.options.selectedIndex&&(this.selectedIndex=parseInt(this.options.selectedIndex,10)):this.selectedIndex=void 0===this.options.selectedIndex?-1:parseInt(this.options.selectedIndex,10)),this.options.selectedDataDisplay||(this.options.selectedData=!1),this.internal?this.itemsetObj=this.initializeInfo.itemSet?this.initializeInfo.itemSet:{nodeset:"",label:"",value:""}:this.itemsetObj=WebSquare.WebSquareparser.parseItemset(this.xml),this.resetMatchInfo=!0;var l=this.itemsetObj.nodeset.wq_replaceAll(" ","");if(this.internal&&"gridViewItemset"==this.options.itemTableType?this.existGridViewItemsetNode=!0:(this.existGridViewItemsetNode=WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:gridViewItemset")[0],this.existGridViewItemsetNode&&this.options.embeddedInput&&(p.v.printLog("not support embeddedInput in gridViewItemset ["+this.mainGrid.id+"."+this.id+"]"),this.options.embeddedInput=!1)),""!=this.itemsetObj.nodeset&&l.indexOf("ref(")>=0){this.hasRef=!0;var h=this.itemsetObj.nodeset;this.refStr='"'+this.refReplace(h)+'"';for(var d=h.match(/ref\('([^']*)'\)/g),c=0;c<d.length;c++){var u=d[c].slice(5,-2),g=this.mainGrid.getCellInfo(u);g.refArr||(g.refArr=[]),g.refArr.push(this.colID)}if(this.refHash=[],this.refItemArr=[],"select"===this.options.inputType&&this.options.embeddedInput)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset","")}else if(""!=this.itemsetObj.nodeset&&l.indexOf("data:")>=0){var m=this.itemsetObj.nodeset.replace("data:","").split(".");this.dataComp=m[0]}else this.matchInfo=this.setMatchInfo()}this.refArr||(this.refArr=[]),this._initializeCellInfo()}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.getItemText=function(t){try{var e="";if(t>-1&&t<this.itemArr.length){e=this.itemArr[t].orgLabel||this.itemArr[t].label;var i=this.options.delimiter;switch(!0!==a.Z.getBoolean(this.options.hideDelimiter)||this.itemArr[t].value&&e||(i=""),this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}switch(this.options.displayMode){case"0":break;case"1":e=this.itemArr[t].value+i+e;break;case"2":e=e+i+this.itemArr[t].value;break;case"3":e=this.itemArr[t].value}}return e}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype._initDisplayMode=function(t){try{switch(this.options.displayMode){case"0":case"1":case"2":case"3":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;case"value":this.options.displayMode="3";break;default:this.options.displayMode="0"}}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.setColumnNodeSet=function(t,e,i,o){try{if(this.internal)this.itemsetObj.nodeset=t,this.itemsetObj.label=e,this.itemsetObj.value=i;else{if("json"===this.xml._elementType){var a=[];a.push({N:"w2:label",T:1,A:{ref:e}}),a.push({N:"w2:value",T:1,A:{ref:i}});var n=WebSquare.Elem.api.getElementsByTagName(this.xml,"itemset",r.I._XML_NAMESPACE.W2)[0];n?(n._element.A.nodeset=t,n._element.E=a):this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:itemset",A:{nodeset:t},E:a}]}]}else{var l=WebSquare.xml.findNode(this.xml,"*['choices'=local-name()]['"+r.I._XML_NAMESPACE.W2+"'=namespace-uri()]");for(null==l&&(l=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,l));l&&l.firstChild;)l.removeChild(l.firstChild);var h="<w2:itemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+t+"'><w2:label ref='"+e+"'></w2:label><w2:value ref='"+i+"'></w2:value></w2:itemset>",d=WebSquare.xml.parse(h,!0).documentElement;WebSquare.xml.appendChild(l,d)}this.itemArr=[],this.initializeCellInfo(this.xml)}var c=this.options.inputType;if(1==this.options.embeddedInput){
var u=this.mainGrid.tdIdList.length,p=this.mainGrid.getColumnIndex(this.options.id);if(isNaN(o))for(var g=this.mainGrid.getRowCount(),m=this.mainGrid.rowIndex;m<g;m++){(f=this.mainGrid.data_td_list[(m-this.mainGrid.rowIndex)*u+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}else{var f,b=o-this.mainGrid.rowIndex;if(b>=0)(f=this.mainGrid.data_td_list[b*u+p])&&this.mainGrid.getInput(this,f).setNodeSet(t,e,i)}}else this[c]&&this[c].setNodeSet(t,e,i);t.indexOf("data:")>=0&&(this.dataComp=t.slice(5))}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.setColumnGridItemset=function(t){try{if("select"!==this.options.inputType&&"autoComplete"!==this.options.inputType)return;var e=t.nodeset,i=t.label,o=t.value;if(this.internal)this.itemsetObj.nodeset=e,this.itemsetObj.label=i,this.itemsetObj.value=o;else{if("json"===this.xml._elementType){var a=[],n={};for(var h in t)"object"!==(0,l.A)(t[h])&&"function"!=typeof t[h]&&null!=t[h]&&(n[h]=t[h]);for(var d=0;d<t.item.length;d++)a.push({N:"w2:item",T:1,A:t.item[d]});var c=WebSquare.Elem.api.getElementsByTagName(this.xml,"gridViewItemset",r.I._XML_NAMESPACE.W2)[0];if(c){for(var h in n)c._element.A[h]=n[h];c._element.E=a}else this.xml._element.E=[{T:1,N:"w2:choices",E:[{T:1,N:"w2:gridViewItemset",A:n,E:a}]}]}else{var u=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",r.I._XML_NAMESPACE.W2);for(null==u&&(u=WebSquare.xml.createNode(this.xml,"w2:choices"),WebSquare.xml.appendChild(this.xml,u));u&&u.firstChild;)u.removeChild(u.firstChild);if(r.I.isXML(t))WebSquare.xml.appendChild(u,t);else{var p="<w2:gridViewItemset xmlns:w2='http://www.inswave.com/websquare' nodeset='"+e+"'></w2:gridViewItemset>",g=WebSquare.xml.parse(p,!0),m=g.documentElement;for(var f in t)if("item"===f)for(d=0;d<t.item.length;d++){var b=WebSquare.xml.createElement(g,"w2:item"),y=t.item[d];for(var v in y)b.setAttribute(v,y[v]);WebSquare.xml.appendChild(m,b)}else"nodeset"!==f&&m.setAttribute(f,t[f]);WebSquare.xml.appendChild(u,m)}}this.initializeCellInfo(this.xml)}if("select"===this.options.inputType&&1==this.options.embeddedInput){var w=this.mainGrid.tdIdList.length,S=this.mainGrid.getColumnIndex(this.options.id),_=this.mainGrid.getRowCount();for(d=0;d<_;d++)this.mainGrid.getInput(this,this.mainGrid.data_td_list[d*w+S]).setGridItemset(t)}this[this.options.inputType]&&this[this.options.inputType].setGridItemset(t),e.indexOf("data:")>=0&&(this.dataComp=e.slice(5))}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.getColumnDataListInfo=function(){try{if(this[this.options.inputType])return this[this.options.inputType].getDataListInfo();var t=WebSquare.Elem.api.getElementsByTagName(this.xml,"choices",r.I._XML_NAMESPACE.W2)[0];if(t){var e=WebSquare.WebSquareparser.parseItemset(t),i={};return e&&""!==e.nodeset?(e.nodeset.match("data:")?(i.nodeset=e.nodeset.slice(0),i.id=i.nodeset.wq_replaceAll("data:",""),i.value=e.value,i.label=e.label):(i.nodeset=e.nodeset.slice(0),i.value=e.value,i.label=e.label),i):null}return null}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.getDisplayData=function(t,e,i){var o=this.getData(t,e,i);return null==o&&(o=""),i&&i.emptyValue&&o===i.emptyValue?o="":o!=t&&""==o&&(o=t),o},O.itemsetControl.prototype.setMatchInfo=function(t){this.modelControl=new WebSquare.modelControl(this.colID,this.options.model,this.options.ref,this.options.bind,this.options._scope_obj_uuid),this.existGridViewItemsetNode?this.initializeGridViewItemArr(this.xml):this.initializeItemArr(this.xml),0==this.itemArr.length?this.resetMatchInfo=!0:this.resetMatchInfo=!1;for(var e=0;e<this.itemArr.length;e++)this.itemArr[e].label=this.getItemText(e);var i={};if(1==this.options.allOption){var o=WebSquare.language.getMessage("Grid_all")||"-all-";this.itemArr=[{label:o,value:WebSquare.allValue}].concat(this.itemArr)}if(1==this.options.chooseOption&&"checkcombobox"!==this.options.inputType){var s=this.options.chooseOptionLabel;"$blank"==s&&(s=""),this.itemArr=[{label:s,
value:this.options.chooseOptionValue}].concat(this.itemArr)}this.hasRef&&(this.refItemArr[this.itemsetObj.nodeset]=this.itemArr);var r=this.options.inputType.toUpperCase();for(e=0;e<this.itemArr.length;e++){var a=this.itemArr[e];i[r+"_"+a.value]=a.label}return i},O.itemsetControl.prototype.getMatchInfo=function(t){var e=[];return"select"===this.options.inputType&&""!=this.options.selectSetter?e=this.matchInfo:this.hasRef?e=this.getRefMatchInfo(t):this.hasRef||(this.resetMatchInfo&&(this.matchInfo=this.setMatchInfo(t)),e=this.matchInfo),e},O.itemsetControl.prototype.getRefMatchInfo=function(t){this.targetRowIndex=t;var e=new Function("_this","return "+this.refStr)(this);if(null==this.refHash[e]||this.resetMatchInfo){this.itemsetObj.nodeset=e,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",e);var i=this.setMatchInfo(t);return this.refHash[e]=i,i}return this.refHash[e]},O.itemsetControl.prototype.getRefItemArr=function(t){this.getRefMatchInfo(t);var e=new Function("_this","return "+this.refStr)(this);return this.refItemArr[e]},O.itemsetControl.prototype.getRefValue=function(t){return'"'+this.mainGrid.dataList._getCellData(this.targetRowIndex,t)+'"'},O.itemsetControl.prototype.refReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"\"+_this.getRefValue('$1')+\"");return e!=t?this.refReplace(e):e}catch(t){s.Y.printStackTrace(t,null,this)}},O.itemsetControl.prototype.refXmlReplace=function(t){try{var e=t.replace(/ref\('([^']*)'\)/,"'+_this.getRefValue('$1')+'");return e!=t?this.refXmlReplace(e):e}catch(t){s.Y.printStackTrace(t,null,this)}},O.text=function(){},O.text.prototype.getDisplayData=function(t){(this.formatter&&(t=this.formatter.format(t)),"text"==this.options.inputType&&this.options.editFormat&&""!=t)&&(t=WebSquare.text.dynamicMask(t,this._editFormat,this._editTokens).value);return"secret"==this.options.inputType&&(t=t.replace(/./gi,"")),t},O.text.prototype.setInnerHTML=function(t,e,i,o,n){var l=this.mainGrid._getGroupbyDisplayRowIndex(i),h=this.mainGrid._getWrapperCell(t,i);if(!this.options.embeddedInput||this.mainGrid._getEditDisabled(i,o)||this.mainGrid.___getEditReadOnly(i,o)||this.mainGrid.groupbyStatus.grouped){if(this.mainGrid.options.titleFormatter)try{var d;if("function"!=typeof this.mainGrid.options.titleFormatter){var c=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof c&&(this.mainGrid.options.titleFormatter=c,d=c.call(this,i,o,e))}else d=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",d)}catch(t){s.Y.printStackTrace(t,null,this)}else if(this.options.title)t.setAttribute("title",this.options.title);else if(this.mainGrid.options.titleAuto){var u=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"";t.setAttribute("title",u)}var p=WebSquare.util.getDataPrefix("editModeEvent");"onclick"===this.options.editModeEvent||"ondblclick"===this.options.editModeEvent||"onsecondclick"===this.options.editModeEvent?t.setAttribute(p,this.options.editModeEvent):t.setAttribute(p,"");var g=null;if(this.options.escapeFormatter)try{"function"==typeof this.options.escapeFormatter?g=this.options.escapeFormatter:"function"==typeof(g=a.Z.getGlobalFunction(this.options.escapeFormatter,this.scope_id))&&(this.options.escapeFormatter=g)}catch(t){g=null}H=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?H=this.options.customFormatter:"function"==typeof(H=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=H)}catch(t){H=null}var m=null;if(this.options.customModelUnformatter)try{"function"==typeof this.options.customModelUnformatter?m=this.options.customModelUnformatter:"function"==typeof(m=a.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(this.options.customModelUnformatter=m)}catch(t){m=null}var f=e;if(m&&this.options.customModelUnformatter?(this.useCustomModelFormatter=!0,
f=m.call(this.mainGrid,e,l,o)):this.useCustomModelFormatter=!1,this.options.maskFormat&&this.options.displayFormat&&(f=this.mainGrid.getInput(this,t,e).maskFormatModelUnFormat(f)),"function"==typeof g?(this.useEscapeFormatter=!0,f=g.call(this.mainGrid,e,l,o)):this.useEscapeFormatter=!1,this.getEscape()&&(f=this.useCustomModelFormatter||this.options.maskFormat&&this.options.displayFormat?WebSquare.xml._encode(f+""):WebSquare.xml._encode(e+"")),this.options.maskFormat){f=this.maskFormatModelFormat(f);Z=this.mainGrid._dataList.getColumnIndex(this.colID),U=this.mainGrid._grid.getRealRowIndex(i);this.mainGrid._dataList.dataArr[U*this.mainGrid._dataList.getColumnCount()+Z]=f}j=f;if(this.options.editFormat&&this.options.editFormat.length>0){var b={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"!":{escape:!0}},y=this.options.editFormat.split("||").sort((function(t,e){return t.replace(/[^a-z^A-Z^0-9]/g,"").length-e.replace(/[^a-z^A-Z^0-9]/g,"").length}));j=WebSquare.text.dynamicMask(j,y,b).value,this._editFormat=y,this._editTokens=b}z=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat||this._changeDisplayFormat;if(this.formatter&&z&&(j=this.formatter.format(f)),"secret"==this.options.inputType&&(j=j.replace(/./gi,"")),"function"==typeof H?(this.useCustomFormatter=!0,X=H.call(this.mainGrid,e,j,l,o)):(this.useCustomFormatter=!1,X=j),this.mainGrid.options.plainText&&!1===this.useCustomFormatter&&!this.options.displayFormatter&&h.firstChild&&h.firstChild.firstChild)h.firstChild.firstChild.data=X;else{var v=this.mainGrid.___getEditReadOnly(i,o),w=this.mainGrid._getEditDisabled(i,o),S="",_=[];_.push("w2grid_input"),this.mainGrid.options.checkEditableInputClass&&(v||w)&&(_=[]),"secret"==this.options.inputType&&r.I.browserCheck.ieAllVersion&&_.push("w2grid_secret"),v&&_.push("w2grid_input_readonly"),w&&_.push("w2grid_input_disabled");var C=h.firstChild,x=this._checkFastScroll(X,C,"w2grid_input",n&&!0===n.scroll);if(C&&(!w&&C.className.indexOf("w2grid_input_disabled")>-1||w&&-1===C.className.indexOf("w2grid_input_disabled")||!v&&C.className.indexOf("w2grid_input_readonly")>-1||v&&-1===C.className.indexOf("w2grid_input_readonly"))&&(x=!1),x&&this.getEscape()){var I="string"==typeof X?WebSquare.xml.__decode2(X):X;C.textContent=I}else{"span"==this.mainGrid.options.dataTag&&_.push("w2grid_span"),S=" class='",S+=_.join(" "),S+="'";var T=!1,k=h.firstChild;this.getEscape()&&k&&("NOBR"===k.tagName||"SPAN"===k.tagName&&k.className.indexOf("w2grid_span")>-1)&&" class='"+k.getAttribute("class")+"'"===S&&1===k.attributes.length&&(T=!0),T?h.firstChild.innerHTML=X:h.innerHTML="<"+this.mainGrid.options.dataTag+" "+S+">"+X+this.mainGrid.dataTagClose}this.mainGrid.hasClass(t,"w2grid_input_table")||(t.className="w2grid_input_table "+t.className)}}else{var L=this.mainGrid.getInput(this,t,e);null==this.mainGrid._getWrapperTD(L.render.parentNode)&&(h.innerHTML="",h.appendChild(L.render)),L.blur();var A=a.Z.getDataPrefix("rowindex");L.render.setAttribute(A,i);var D=!1;if(this.mainGrid.options.autoResizeEmbeddedInput){var W=!1;this.mainGrid.__bResizeObj?(W=this.mainGrid.__bResizeObj.width!==this.mainGrid.resizeObj.width||this.mainGrid.__bResizeObj.height!==this.mainGrid.resizeObj.height,this.mainGrid.__bResizeObj.width=this.mainGrid.resizeObj.width,this.mainGrid.__bResizeObj.height=this.mainGrid.resizeObj.height):this.mainGrid.__bResizeObj={width:this.mainGrid.resizeObj.width,height:this.mainGrid.resizeObj.height},D=!0!==L._autoResizeEmbeddedInput&&!1===W||this.mainGrid.__bResizeObj.isColumnResizing}if(!0===D){var q=0,M=0,E=!1,R=(this.mainGrid.oneRowLength,this.mainGrid._bodyIdMultiRowIndexMap[this.colID]);if("none"==t.parentNode.style.display){for(var N=R,F=t.parentNode;N>0;)"none"==F.previousElementSibling.style.display&&(F.previousElementSibling.style.display=""),F=F.previousElementSibling,N--;t.parentNode.style.display="",E=!0}null==this.mainGrid._getWrapperTD(L.render.parentNode)&&(h.innerHTML="",
h.appendChild(L.render)),this.mainGrid.embeddedStyleObj||(this.mainGrid.embeddedStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10),inputTop:parseInt(WebSquare.style.getStyle(L.render,"padding-top"),10),inputBottom:parseInt(WebSquare.style.getStyle(L.render,"padding-bottom"),10),inputLeft:parseInt(WebSquare.style.getStyle(L.render,"padding-left"),10),inputRight:parseInt(WebSquare.style.getStyle(L.render,"padding-right"),10)});var O=parseInt(WebSquare.style.getStyle(L.render,"border-top-width"),10),B=parseInt(WebSquare.style.getStyle(L.render,"border-bottom-width"),10),P=parseInt(WebSquare.style.getStyle(L.render,"border-left-width"),10),Y=parseInt(WebSquare.style.getStyle(L.render,"border-right-width"),10);q=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),q-=this.mainGrid.embeddedStyleObj.top+this.mainGrid.embeddedStyleObj.bottom,q-=O+B;var V=o;if(this.mainGrid.embeddedWidthObj[V]&&!this.mainGrid.embeddedWidthObj[V].isChanged||(this.mainGrid.embeddedWidthObj[V]={isChanged:!1,width:t.clientWidth}),M=this.mainGrid.embeddedWidthObj[o].width,M-=this.mainGrid.embeddedStyleObj.left+this.mainGrid.embeddedStyleObj.right,M-=P+Y,M-=this.mainGrid.embeddedStyleObj.inputLeft+this.mainGrid.embeddedStyleObj.inputRight,E){for(N=R,F=t.parentNode;N>0;)F.previousElementSibling.style.display="none",F=F.previousElementSibling,N--;t.parentNode.style.display="none"}else(a.Z.isIE("6 7")||a.Z.isSpartan())&&(q-=2);a.Z.isOpera()&&(q+=2),L.setSize(M-2,q-(this.mainGrid.embeddedStyleObj.inputTop+this.mainGrid.embeddedStyleObj.inputBottom)),L.setStyle("lineHeight",q+"px"),L._autoResizeEmbeddedInput=!0}else null==this.mainGrid._getWrapperTD(L.render.parentNode)&&(h.innerHTML="",h.appendChild(L.render));"all"==this.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(e=this.getDisplayData(e));var H=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?H=this.options.customFormatter:"function"==typeof(H=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=H)}catch(t){H=null}var j=e,z=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.options.maskFormat){var G=j;this.options.displayFormat&&(G=L.maskFormatModelUnFormat(G)),G=this.maskFormatModelFormat(G);var Z=this.mainGrid._dataList.getColumnIndex(this.colID),U=this.mainGrid._grid.getRealRowIndex(i);this.mainGrid._dataList.dataArr[U*this.mainGrid._dataList.getColumnCount()+Z]=G}if(this.formatter&&z&&(j=this.formatter.format(j)),L.setValue(e),"function"==typeof H){this.useCustomFormatter=!0;var X=H.call(this.mainGrid,e,j,l,o);L.render.value=X}this.options.textAlign?L.setStyle("text-align",this.options.textAlign):L.setStyle("text-align",""),t.removeAttribute("tabIndex"),t.removeAttribute("title")}},O.text.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);this.comp=i,this.options.maskFormat&&this.options.displayFormat||(i.formatter="all"==this.options.applyFormat||!0===this._changeDisplayFormat||"date"==this.options.dataType?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat);var o=this.mainGrid.dataList._getCellData(e,this.colID);if("all"===this.options.applyFormat&&this.options.displayFormat&&"text"!=this.options.dataType&&"date"!=this.options.dataType&&"time"!=this.options.dataType){var r=this.options.decimalDelimeter||".",n=(o+"").split(r);n[1]&&0==parseInt(n[1])&&(o=n[0])}i.setValue(o),document.activeElement!=i.render&&i.focus(),
!0!==this.mainGrid._isBrowserScroll()&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType?i.select():"focus"==i.options.editType&&(a.Z.isIEAllVersion()||a.Z.isFF()||a.Z.isSpartan())&&WebSquare.text.setCaretPos(i.render,i.render.value.length)}catch(t){s.Y.printStackTrace(t,null,this)}},O.text.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.Z.isFF()?t={top:-1,left:0,width:0,height:0}:a.Z.isOpera()?t={top:0,left:0,width:0,height:1}:a.Z.isIEAllVersion("9 10 11")?t={top:-1,left:-1,width:0,height:0}:a.Z.isSpartan()&&(t={top:0,left:-1,width:0,height:0}),!0===this.mainGrid._isNativeScroll("both")){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}!0===this.mainGrid._isHybridScroll()&&(t.top-=this.mainGrid._getHybridVisibleTop());var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}this.mainGrid.hasClass("w2grid_adaptive_crosstab")&&(s-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,l.render.style.lineHeight=n+"px");l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.Z.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign,!0===this.mainGrid._isHybridScroll()&&this.mainGrid._adjustHybridEditedPosition(l.render.id,3)},O.text.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},O.text.prototype._handleEndEdit_common=function(t){try{if(!this.options.embeddedInput){var e=this.mainGrid.getInput(this);return this.setEditData(e),e}}catch(t){s.Y.printStackTrace(t,null,this)}},O.text.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t&&t.hide()},O.text.prototype._getEditedValue=function(t){return"bigDecimal"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")?WebSquare.bigDecimal(this.mainGrid.getInput(this).getValue()).toString():this.mainGrid.getInput(this).getValue()},O.text.prototype._handleCancelEdit=function(t){try{var e,i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide(),e=window.getSelection?window.getSelection():document.selection;var o=document.createRange();o.selectNodeContents(this.editTd),e.removeAllRanges(),e.addRange(o),e.collapseToStart()}catch(t){s.Y.printStackTrace(t,null,this)}},O.text.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.text.prototype.setEditData=function(t){try{var e=t.getValue();if("number"==(o=this.mainGrid.getColumnOption(this.id,"dataType"))||"float"==o){var i=e.wq_trim();"."!==i&&"-"!==i&&"+"!==i||(e="")}e=t.validator.validateString(e),t.setValueNM(e,!0),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var o=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==o&&""!=e&&(e=Number(e));var r={};r[this.mainGrid.id]=!0;var n=a.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof n){this.useCustomModelFormatter=!0;var l=this.getDisplayData(e);e=n.call(this.mainGrid,e,l,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1
;if(e=this.maskFormatModelFormat(e),"float"===o&&e[e.length-1]===t.options.decimalDelimiter){var h=e.split(t.options.decimalDelimiter);e=h[0]}this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,r)}catch(t){s.Y.printStackTrace(t,null,this)}},O.text.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this.options.maskFormat&&this.options.displayFormat)if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),o=0;o<t.length;o++){for(var r=!1,a=0;a<i.length;a++)if(t[o]==i[a]){r=!0;break}r||(e+=t[o])}else e=t;else e=t;return e}catch(t){s.Y.printStackTrace(t,null,this)}},O.link=function(){},O.link.prototype.setInnerHTML=function(t,e,i,o,r){var n=this.mainGrid._getWrapperCell(t,i),l=" tabIndex='-1' ";"none"==this.mainGrid.options.focusMode?l=" tabIndex='0' ":1==this.mainGrid.options.keyMoveEditMode&&(l=""),this.getEscape()&&(e=WebSquare.xml._encode(e+""));var h,d,c=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id),u=this.getDisplayData(e);if("function"==typeof c?(this.useCustomFormatter=!0,h=c.call(this.mainGrid,e,u,i,o)):(this.useCustomFormatter=!1,h=u),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var p=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof p&&(this.mainGrid.options.titleFormatter=p,d=p.call(this,i,o,e))}else d=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){s.Y.printStackTrace(t,null,this)}var g="";(d?g=" title='"+d+"'":this.options.title&&(g=" title='"+this.options.title+"'"),g)||this.mainGrid.options.titleAuto&&(g=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"")+"'");var m=this.options.voidNull?"javascript:void(null);":"",f="";1==this.mainGrid.options.accessibility&&(f="id='"+this.mainGrid.id+"_link_"+i+"_"+o+"'"),n.innerHTML=h||g?this.mainGrid.dataTagOpen+"<a "+f+" href='"+m+"' onclick='event.returnValue=false; return false;'"+l+" "+g+">"+h+"</a>"+this.mainGrid.dataTagClose:this.mainGrid.dataTagOpen+this.mainGrid.dataTagClose},O.link.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.f.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.Z.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||u.f.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)},O.checkbox=function(){},O.checkbox.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":"$blank"==this.options.trueValue&&(this.options.trueValue=""),"$blank"==this.options.falseValue&&(this.options.falseValue=""),this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.embeddedInput&&(this.mainGrid.options.preventMultipleClick=!1),this.options.checkboxLabelColumn)for(var e=this.options.checkboxLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}void 0!==this.options.focusOutOnCheckHeaderClick&&(this.options.keepFocusOnCheckHeaderClick=!this.options.focusOutOnCheckHeaderClick)},O.checkbox.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},O.checkbox.prototype.setInnerHTML=function(t,e,i){var o,r=this.mainGrid._getWrapperCell(t,i),n=e+""==this.options.trueValue,l=a.Z.getDataPrefix("col_id"),h=a.Z.getDataPrefix("rowindex")
;if(o=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute(l)):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute(l)),this.options.embeddedInput){var d=this.mainGrid.getInput(this,t,n);d.setAttribute(h,i),d.checked=n,d.disabled=o}else{var c,g;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var m=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof m&&(this.mainGrid.options.titleFormatter=m,g=this.mainGrid.getColumnIndex(this.options.id),c=m.call(this,i,g,e))}else c=this.mainGrid.options.titleFormatter.call(this,i,g,e)}catch(t){s.Y.printStackTrace(t,null,this)}var f=c||this.options.title||"";if(f)f=" title='"+f+"'";else if(this.mainGrid.options.titleAuto){var b=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"";f=n?" title='"+b+WebSquare.language.getMessage("Grid_title")+"'":" title='"+b+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}var y="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",v=n?" checked":"",w=o?" disabled='true'":"",S=this.options.visibleFunc,_="";if(this.options.checkboxLabel||this.options.checkboxLabelColumn||this.options.checkboxLabelFormatter){var C=this.mainGridId+"_checkbox_"+this.id,x=C+"_"+i,I=this.options.checkboxLabel||"";if(this.options.checkboxLabelColumn){for(var T=this.options.checkboxLabelColumn.split(","),k="",L=this.options.checkboxLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",A=0;A<T.length;A++){var D=this.mainGrid.bodyToHeaderRelation[T[A]];if(A===T.length-1)this.mainGrid.options.showCheckboxLabelUserFormat?k+=" "+this.mainGrid.getHeaderValue(D)+" "+this.mainGrid._getCellDisplayData(i,T[A],{removeTag:!0}):k+=this.mainGrid._getCellDisplayData(i,T[A],{removeTag:!0});else if(this.mainGrid.options.showCheckboxLabelUserFormat){var W=WebSquare.language.getMessage("Grid_row")||"row";k+=(0===A?i+1+W+L:"")+" "+this.mainGrid.getHeaderValue(D)+" "+this.mainGrid._getCellDisplayData(i,T[A],{removeTag:!0})+L}else k+=this.mainGrid._getCellDisplayData(i,T[A],{removeTag:!0})+L}I=I?k+L+I:k}if(this.options.checkboxLabelFormatter)try{var q=a.Z.getGlobalFunction(this.options.checkboxLabelFormatter,this.scope_id);"function"==typeof q&&(I=q.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),I))}catch(t){p.v.printLog(this.mainGrid.id+"_"+this.id+" checkboxLabelFormatter error : "+t.message)}I&&this.mainGrid.options.titleAuto&&!this.options.title&&(f=f.substring(0,f.length-1)+" "+I+"'"),_="<INPUT type='checkbox' "+f+y+v+w+" id='"+x+"' name='"+C+"'/>",this.getEscape()&&(I=WebSquare.xml._encode(I+""));var M="<label class='w2checkbox_label ' for='"+x+"'>"+I+"</label>";"left"===this.options.checkboxLabelPosition?_=M+_:_+=M}else _="<INPUT type='checkbox' "+f+y+v+w+" />";if(S){var E,R=a.Z.getGlobalFunction(S,this.scope_id);"function"==typeof R&&(E=R(i)),r.innerHTML=E?_:""}else r.innerHTML=_;if(this.options.noDisabledOnReadOnly)(N=r.getElementsByTagName("input")[0])&&(u.f.addListener(N,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&u.f.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(N,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(N,this.mainGrid.options.readOnlyClass+"_nodisabled"));if(this.mainGrid.options.preventMultipleClick){var N=r.getElementsByTagName("input")[0],F=r.getElementsByTagName("label")[0];this.labelClicked=!1,N&&u.f.addListener(N,"onclick",function(t,e,i){return function(o){t.options.eventPropagation||u.f.stopPropagation(o);var s=!1,r=t.colID;t.mainGrid.getColumnIndex(r);if(!0===t.mainGrid.options.useShiftKeyCheck&&o.shiftKey){var a={td:e[1],rowIndex:e[0],checked:this.checked};t.mainGrid._ShiftKeyMultiCheck(t.mainGrid,a,e[1]),s=!0}e[2]=o.detail,e[3]=s,i.apply(t,e,o)}
}(this,[i,t],(function(t,e,i,o){i=this.labelClicked?0:1,this.labelClicked=!1;var s,r,a,n,l,h,d,c=null!=this.mainGrid.editedCell;c&&(s=this.mainGrid.editedCell.editRowIndex,r=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),d=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),a=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),n=this.mainGrid._grid.getRealRowIndex(s),l=this.mainGrid._dataList.dataArr[n*this.mainGrid._dataList.getColumnCount()+r],h=d.comp&&d.comp.selectedIndex);var p,m,f,b=e.getElementsByTagName("input")[0];if(b&&(p=b.checked,m=this.options.falseValue,p&&(m=this.options.trueValue),""!=(f=this.mainGrid.dataList._getCellData(t,this.colID))||p||(m=f)),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):!0!==o&&this.mainGrid._addFocus(e)),this.handleClick(e,t,!0),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):!0!==o&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),!0===this.mainGrid.options.useShiftKeyCheck&&(this.mainGrid.beforeChecked={td:e,rowIndex:t,checked:b.checked}),t=this.mainGrid._getGroupbyDisplayRowIndex(t),b&&f!=m){var y=this.mainGrid.getColumnIndex(this.options.id),v={oldValue:f,newValue:m,rowIndex:t,colIndex:y,colId:this.mainGrid.getColumnID(y)};u.f.fireEvent(this.mainGrid,"onviewchange",v)}if(this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,g)&&u.f.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:p}),c){var w=this.mainGrid._dataList.dataArr[n*this.mainGrid._dataList.getColumnCount()+r];if(l!=w){var S={oldValue:l,newValue:w,rowIndex:s,colIndex:a,colId:this.mainGrid.getColumnID(a)};isNaN(h)||(S.oldSelectedIndex=h,S.newSelectedIndex=d&&d.comp&&d.comp.selectedIndex),u.f.fireEvent(this.mainGrid,"onviewchange",S)}}}))),F&&u.f.addListener(F,"onclick",function(t,e,i){return function(o){i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}},O.checkbox.prototype.getDisplayData=function(t){return t},O.checkbox.prototype.handleClick=function(t,e,i){var o=a.Z.getDataPrefix("col_id");if(this.mainGrid.__getEditReadOnly(t,e)||this.mainGrid._getEditDisabled(e,t.getAttribute(o))||!this.options.embeddedInput&&this.mainGrid.options.preventMultipleClick&&!i&&!this.mainGrid.options.checkOnCellClick)return!0;null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var s=t.getElementsByTagName("input")[0];if(s){var r=s.checked,n=this.options.falseValue;r&&(n=this.options.trueValue);var l=this.mainGrid.dataList._getCellData(e,this.colID);""!=l||r||(n=l);var h=null;(h={})[this.mainGrid.id]=!0,this.mainGrid._isGridViewItemTable()||this.mainGrid.dataList.__setCellData(e,this.colID,n,null,null,null,h);var d=a.Z.getDataPrefix("colMerged");"0"==t.getAttribute(d)&&this.setMergedCol(e,this.colID,l,n);var c=this.mainGrid.getColumnIndex(this.colID);if(this.mainGrid.setMergedCellData(e,c,n),l!=n&&!i){var p={oldValue:l,newValue:n,rowIndex:e,colIndex:c,colId:this.mainGrid.getColumnID(c)};u.f.fireEvent(this.mainGrid,"onviewchange",p)}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}return!0},O.checkbox.prototype.checkHeader=function(){try{return this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID])}catch(t){s.Y.printStackTrace(t,null,this)}},O.checkbox.prototype.doDefaultAction=function(t){if(!this.options.embeddedInput){var e=u.f.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(e.focus();e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID
}else i=this.mainGrid.getLastFocusedCell().focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=this.colID;var r=!1;if(!this.mainGrid._getEditDisabled(i,s)&&!this.mainGrid.___getEditReadOnly(i,s)){var a,n,l=e.getElementsByTagName("input")[0];if(l&&(l.checked?(a=this.options.falseValue,l.checked=!1):(a=this.options.trueValue,l.checked=!0),n=this.mainGrid.dataList._getCellData(i,s)),this.handleClick(e,i,!0),a!=n){var h=this.mainGrid.getColumnIndex(s);u.f.fireEvent(this.mainGrid,"onviewchange",{oldValue:n,newValue:a,rowIndex:o,colIndex:h,colId:this.mainGrid.getColumnID(h)})}r=!0}this.mainGrid.checkHeader(this.mainGrid.bodyToHeaderRelation[this.colID]),this.mainGrid.options.preventMultipleClick&&r&&u.f.fireEvent(this.mainGrid,"oncellclick",i,this.mainGrid.getColumnIndex(s),this.options.id,{checked:l.checked})}},O.checkbox.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.button=function(){},O.button.prototype.setInnerHTML=function(t,e,i){try{var o=a.Z.getDataPrefix("col_id"),r=this.mainGrid._getEditDisabled(i,t.getAttribute(o)),n="";r&&(n=" disabled ");var l,h=this.mainGrid._getWrapperCell(t,i),d=this.mainGrid.getColumnIndex(t.getAttribute(o)),c=" tabIndex='-1'";if(this.mainGrid.___getEditReadOnly(i,d)||r?c=" tabIndex='-1'":"none"==this.mainGrid.options.focusMode?c=" tabIndex='0'":1==this.mainGrid.options.keyMoveEditMode&&(c="",c=0==this.mainGrid.getColumnVisible(d)?" tabIndex='-1'":""),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var p=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof p&&(this.mainGrid.options.titleFormatter=p,l=p.call(this,i,d,e))}else l=this.mainGrid.options.titleFormatter.call(this,i,d,e)}catch(t){s.Y.printStackTrace(t,null,this)}var g=l||this.options.title||"";if(g)g=" title='"+g+"'";else if(this.mainGrid.options.titleAuto)g=" title='"+(this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"")+"'";this.getEscape()&&(e=WebSquare.xml._encode(e+""));var m="id='"+this.mainGrid.id+"_button_"+i+"_"+d+"'";if(h.innerHTML="<button type='button' "+m+" style='width:100%;height:100%' "+n+c+g+">"+this.getDisplayData(e)+"</button>",1==this.internal){var f=h.childNodes[0];if(0==f.clientHeight){var b=t.clientHeight-2;WebSquare.style.setSize(f,"height",b)}}this._listener=(y=this,v=[i,d,t],w=function(t,e,i,o){null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit(),(!0===this.mainGrid.options.readOnlyButtonFocusAllow?!this.mainGrid._getEditDisabled(e,i):!this.mainGrid._getEditDisabled(e,i)&&!this.mainGrid.___getEditReadOnly(e,i))&&(this.options.blockSelect||this.mainGrid.__setFocusedCell(t,o,{editMode:"none"==this.options.focusMode})),this.mainGrid._getEditDisabled(e,i)||u.f.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(e),i,this.options.id)},function(t){w.apply(y,[t||window.event].concat(v))}),u.f.addListener(h.getElementsByTagName("button")[0],"onclick",this._listener)}catch(t){s.Y.printStackTrace(t,null,this)}var y,v,w},O.button.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.f.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.Z.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||u.f.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)},O.image=function(){},
O.image.prototype.setInnerHTML=function(t,e,i,o,r){var n=this.mainGrid._getWrapperCell(t,i),l="";""!=this.options.imageWidth&&(l+=";width:"+parseInt(this.options.imageWidth)+"px"),""!=this.options.imageHeight&&(l+=";height:"+parseInt(this.options.imageHeight)+"px"),t.removeAttribute("alt");var h="";""!=this.options.alt&&(h="alt='"+this.options.alt+"' ");var d=a.Z.getDataPrefix("col_id"),c=this.mainGrid._getEditDisabled(i,t.getAttribute(d)),p="";c&&(p=" disabled='true' "),null==e||""==e?e=this.options.imageSrc?this.options.imageSrc.startsWith("javascript:void")?this.options.imageSrc:this.mainGrid.getImageURL(this.options.imageSrc):"":"string"!=typeof e||e.startsWith("javascript:void")||(e=this.mainGrid.getImageURL(e));var g="";try{this.options.onerror&&(g=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){s.Y.printStackTrace(t,null,this)}var m,f=this.options.imageTabIndex?" tabIndex='"+this.options.imageTabIndex+"'":"";if(this.mainGrid.options.senseReader&&this.mainGrid.options.focusImage?n.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(c?" w2grid_image_disabled":"")+"' style='"+l+"' "+h+p+g+f+"tabIndex='0' />":n.innerHTML="<IMG src='"+e+"' class='w2grid_image"+(c?" w2grid_image_disabled":"")+"' style='"+l+"' "+h+p+g+f+" />",this.options.imageClickFunction&&(m=this.mainGrid._getEditDisabled(i,o)),this.options.imageClickFunction&&(this.options.useImageClick||0==m)){var b=n.firstChild,y=function(t,e,i){return function(o){u.f.stopPropagation(o),t._setFocusedCell(e,i),t.fireImageClick(e,i)}}(this.mainGrid,i,this.colID);u.f.addListener(b,"onclick",y)}if(this.mainGrid.options.titleFormatter)try{var v;o=this.mainGrid.getColumnIndex(t.getAttribute(d));if("function"!=typeof this.mainGrid.options.titleFormatter){var w=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof w&&(this.mainGrid.options.titleFormatter=w,v=w.call(this,i,o,e))}else v=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",v)}catch(t){s.Y.printStackTrace(t,null,this)}},O.image.prototype.getDisplayData=function(t){return t},O.radio=function(){},O.radio.prototype.initializeCellInfo=function(t){switch(this.options.valueType){case"binary":this.setBooleanValue("1","0");break;case"boolean":this.setBooleanValue("true","false");break;case"other":this.setBooleanValue(this.options.trueValue,this.options.falseValue)}if(this.options.groupRef&&(this.options.groupValue=WebSquare.ModelUtil.getInstanceValue(this.options.groupRef,null,this.scope_id)),this.options.radioLabelColumn)for(var e=this.options.radioLabelColumn.split(","),i=0;i<e.length;i++){var o=e[i];this.mainGrid.getColumnIndex(o)&&this.mainGrid.setLabelColumnAssociation(e[i],this.id)}},O.radio.prototype.setBooleanValue=function(t,e){this.options.trueValue=t+"",this.options.falseValue=e+""},O.radio.prototype.setInnerHTML=function(t,e,i){try{var o=this.mainGrid._getWrapperCell(t,i),r=this.getColumnIndex(this.colID);if(this.mainGrid.getMerged(i,r)&&!this.mainGrid.cellMergeInfo[i+"_"+r])return;var n=a.Z.getDataPrefix("col_id"),l=a.Z.getDataPrefix("rowindex"),h=this.mainGridId+"_radio_"+(this.options.groupName?this.options.groupName+"_"+i:this.colID);this.options.cellGroupName&&(h=this.mainGridId+"_radio_"+this.options.cellGroupName);var d,c=e+""==this.options.trueValue;if(d=this.options.noDisabledOnReadOnly?this.mainGrid._getEditDisabled(i,t.getAttribute(n)):this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,t.getAttribute(n)),this.options.embeddedInput){var g=this.mainGrid.getInput(this,t,c);g.setAttribute(l,i),g.checked=!1,g.name=h,g.checked=c,g.disabled=d}else{var m;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var f=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof f&&(this.mainGrid.options.titleFormatter=f,r=this.mainGrid.getColumnIndex(this.options.id),m=f.call(this,i,r,e))
}else m=this.mainGrid.options.titleFormatter.call(this,i,r,e)}catch(t){s.Y.printStackTrace(t,null,this)}var b=m||this.options.title||"";if(b)b=" title='"+b+"'";else if(this.mainGrid.options.titleAuto){var y=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"";b=c?" title='"+y+WebSquare.language.getMessage("Grid_title")+"'":" title='"+y+WebSquare.language.getMessage("Grid_title_not_choose")+"'"}var v="none"==this.mainGrid.options.focusMode?"":" tabIndex='-1'",w=c?" checked":"",S=d?" disabled='true'":"",_="";if(this.options.radioLabel||this.options.radioLabelColumn||this.options.radioLabelFormatter){var C=this.mainGridId+"_radio_"+this.id+"_"+i,x=this.options.radioLabel||"";if(this.options.radioLabelColumn){for(var I=this.options.radioLabelColumn.split(","),T="",k=this.options.radioLabelDelimiter||this.mainGrid.options.labelDelimiter||" ",L=0;L<I.length;L++){var A=this.mainGrid.bodyToHeaderRelation[I[L]];if(L===I.length-1)this.mainGrid.options.showRadioLabelUserFormat?T+=" "+this.mainGrid.getHeaderValue(A)+" "+this.mainGrid._getCellDisplayData(i,I[L],{removeTag:!0}):T+=this.mainGrid._getCellDisplayData(i,I[L],{removeTag:!0});else if(this.mainGrid.options.showRadioLabelUserFormat){var D=WebSquare.language.getMessage("Grid_row")||"row";T+=(0===L?i+1+D+k:"")+" "+this.mainGrid.getHeaderValue(A)+" "+this.mainGrid._getCellDisplayData(i,I[L],{removeTag:!0})+k}else T+=this.mainGrid._getCellDisplayData(i,I[L],{removeTag:!0})+k}x=x?T+k+x:T}if(this.options.radioLabelFormatter)try{var W=a.Z.getGlobalFunction(this.options.radioLabelFormatter,this.scope_id);"function"==typeof W&&(x=W.call(this.mainGrid,i,this.mainGrid.getColumnIndex(this.colID),x))}catch(t){p.v.printLog(this.mainGrid.id+"_"+this.id+" radioLabelFormatter error : "+t.message)}x&&this.mainGrid.options.titleAuto&&!this.options.title&&(b=b.substring(0,b.length-1)+" "+x+"'"),_="<INPUT type='radio' "+b+v+w+S+" id='"+C+"' name='"+h+"'/>",this.getEscape()&&(x=WebSquare.xml._encode(x+""));var q="<label class='w2radio_label ' for='"+C+"'>"+x+"</label>";"left"===this.options.radioLabelPosition?_=q+_:_+=q}else _="<INPUT type='radio' name='"+h+"'"+b+v+w+S+" />";o.innerHTML=_;var M=o.getElementsByTagName("input")[0];if(this.options.noDisabledOnReadOnly&&M&&(u.f.addListener(M,"onclick",function(t,e,i){return function(o){t.options.noDisabledOnReadOnly&&t.mainGrid._getEditReadOnly(e,i)&&u.f.preventDefault(o)}}(this,i,this.getColumnIndex(this.options.id))),this.mainGrid._getEditReadOnly(i,this.options.id)?this.mainGrid.addClass(M,this.mainGrid.options.readOnlyClass+"_nodisabled"):this.mainGrid.removeClass(M,this.mainGrid.options.readOnlyClass+"_nodisabled")),this.mainGrid.options.preventDuplicateFocusedCell&&this.mainGrid.options.preventMultipleClick){var E=o.getElementsByTagName("label")[0];this.labelClicked=!1,M&&u.f.addListener(M,"onclick",(R=this,N=[i,t],F=function(t,e,i){i=this.labelClicked?0:1,this.labelClicked=!1;var o,s,a,n,l,h,d,p=null!=this.mainGrid.editedCell;if(p&&(o=this.mainGrid.editedCell.editRowIndex,s=this.mainGrid._dataList.getColumnIndex(this.mainGrid.editedCell.id),d=this.mainGrid.getCellInfo(this.mainGrid.editedCell.id),a=this.mainGrid.getColumnIndex(this.mainGrid.editedCell.id),n=this.mainGrid._grid.getRealRowIndex(o),l=this.mainGrid._dataList.dataArr[n*this.mainGrid._dataList.getColumnCount()+s],h=d.comp&&d.comp.selectedIndex),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&this.mainGrid._addFocus(e):this.mainGrid._addFocus(e)),this.handleClick(e,t),this.options.blockSelect||(this.mainGrid.options.preventDuplicateFocusedCell&&"linear"===this.mainGrid.options.focusFlow?1==i&&(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode})):(this.mainGrid.focusedCell.pop(),this.mainGrid.__setFocusedCell({},e,{editMode:"none"==this.options.focusMode}))),
this.mainGrid.options.preventMultipleClick&&!this.mainGrid._getEditDisabled(t,r)&&u.f.fireEvent(this.mainGrid,"oncellclick",this.mainGrid._getGroupbyDisplayRowIndex(t),this.mainGrid.getColumnIndex(this.options.id),this.options.id,{checked:c}),p){var g=this.mainGrid._dataList.dataArr[n*this.mainGrid._dataList.getColumnCount()+s];if(l!=g){var m={oldValue:l,newValue:g,rowIndex:o,colIndex:a,colId:this.mainGrid.getColumnID(a)};isNaN(h)||(m.oldSelectedIndex=h,m.newSelectedIndex=d&&d.comp&&d.comp.selectedIndex),u.f.fireEvent(this.mainGrid,"onviewchange",m)}}},function(t){R.options.eventPropagation||u.f.stopPropagation(t),N[2]=t.detail,F.apply(R,N,t)})),E&&u.f.addListener(E,"onclick",function(t,e,i){return function(o){i.apply(t,e,o)}}(this,[i,t],(function(t,e){this.labelClicked=!0})))}}}catch(t){s.Y.printStackTrace(t,null,this)}var R,N,F},O.radio.prototype.getDisplayData=function(t){return t},O.radio.prototype.handleClick=function(t,e){try{var i=t.getElementsByTagName("input")[0];if(!i)return!0;if(this.options.noDisabledOnReadOnly&&this.mainGrid._getEditReadOnly(e,this.colID))return!0;this.mainGrid.options.preventDuplicateFocusedCell&&null!=this.mainGrid.editedCell&&this.mainGrid.editedCell.handleEndEdit();var o=this.mainGrid.dataList._getCellData(e,this.colID),r=o;if(o==this.options.trueValue)return!0;i.checked&&(r=this.options.trueValue,this.resetOthers(e),this.options.groupName&&this.mainGrid.radioGroupRepChk[this.options.groupName]&&this.mainGrid.dataList.__setCellData(e,this.options.groupName,this.options.groupValue)),this.mainGrid.dataList.__setCellData(e,this.colID,r);var n=a.Z.getDataPrefix("colMerged");"0"!=t.getAttribute(n)||this.mainGrid.groupbyStatus.grouped||this.setMergedCol(e,this.colID,o,r);var l=this.getColumnIndex(this.colID);if(this.mainGrid.setMergedCellData(e,l,r),o!=r){var h={oldValue:o,newValue:r,colIndex:l,rowIndex:e,colId:this.mainGrid.getColumnID(l)};u.f.fireEvent(this.mainGrid,"onviewchange",h)}return!0}catch(t){s.Y.printStackTrace(t,null,this)}},O.radio.prototype.resetOthers=function(t){if(this.options.groupName)for(var e=this.mainGrid.getColumnCount(),i=0;i<e;i++){"custom"==(s=this.mainGrid.getCellInfo(i)).options.inputType&&(s=s.cellManagerHashByRowIndex[this.mainGrid.dataList.getRealRowIndex(t)]),s!=this&&"radio"==s.options.inputType&&s.options.groupName==this.options.groupName&&this.mainGrid.dataList.__setCellData(t,i,s.options.falseValue)}else if(this.options.cellGroupName)for(var o=0;o<this.mainGrid.getDataLength();o++){var s;"custom"==(s=this.mainGrid.getCellInfo(this.getColumnIndex(this.colID))).options.inputType&&(s=s.cellManagerHashByRowIndex[this.mainGrid.dataList.getRealRowIndex(o)]);"radio"==s.options.inputType&&s.options.cellGroupName==this.options.cellGroupName&&this.mainGrid.dataList._getCellData(o,this.colID)+""==s.options.trueValue&&this.mainGrid.dataList.__setCellData(o,this.colID,s.options.falseValue)}else if(this.mainGrid.isDrillDown&&this.mainGrid._dataList.options.depthColumn)for(o=0;o<this.mainGrid.getTotalRow();o++)this.mainGrid._dataList.getCellData(o,this.colID)+""==this.options.trueValue&&this.mainGrid._dataList.setCellData(o,this.colID,this.options.falseValue);else for(o=0;o<this.mainGrid.getDataLength();o++)this.mainGrid.dataList._getCellData(o,this.colID)+""==this.options.trueValue&&this.mainGrid.dataList.__setCellData(o,this.colID,this.options.falseValue)},O.radio.prototype.doDefaultAction=function(t){var e=u.f.getTarget(t);if("none"==this.mainGrid.options.focusMode){for(;e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=a.Z.getDataPrefix("col_id"),s=this.mainGrid.getColumnIndex(e.getAttribute(o))}else{var r=this.mainGrid.getLastFocusedCell();i=r.focusedRowIndex,s=r.focusedColIndex;this.options.embeddedInput&&"INPUT"==e.tagName.toUpperCase()&&(e=r.focusedTd)}if(!this.mainGrid._getEditDisabled(i,s)&&!this.mainGrid.___getEditReadOnly(i,s)){var n=this.mainGrid.dataList._getCellData(i,this.colID)
;("INPUT"==e.tagName.toUpperCase()?e:e.getElementsByTagName("input")[0]).checked=n==this.options.trueValue?this.options.falseValue:this.options.trueValue,this.handleClick(e,i)}},O.radio.prototype.refreshCell=function(){try{if(!this.options.refInitSync||"other"!==this.options.valueType)return;for(var t=this.mainGrid._dataList.getRowCount(),e=0;e<t;e++){this.mainGrid._dataList.getCellData(e,this.colID)!=this.options.trueValue&&this.mainGrid._dataList.setCellData(e,this.colID,this.options.falseValue)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.select=function(){},O.select.prototype._initializeCellInfo=function(){try{this.col_index=this.mainGrid.getColumnIndex(this.colID),"auto"===this.options.renderType&&a.Z.isMobile()&&!0!==this.options.embeddedInput&&(this.options.embeddedInput=!0)}catch(t){s.Y.printStackTrace(t,null,this)}},O.select.prototype._createComponent=function(t){try{if(this.comp)return;var e=this;if(this.xml.setAttribute("class",this.mainGridId+"_select_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("chooseOptionValue",this.options.chooseOptionValue),this.xml.setAttribute("allOption",this.options.allOption+""),this.xml.setAttribute("tableRender",this.options.tableRender),this.xml.setAttribute("submenuSize",this.options.submenuSize?this.options.submenuSize:"auto"),this.xml.setAttribute("direction","auto"),this.xml.setAttribute("style",this.style),this.setFirst=!0,this.hasRef&&!this.useLinkedDataList)WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.setFirst=!1,this.configOptions.chooseOption=this.options.chooseOption,this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel,this.configOptions.labelWidthAuto=!1,this.configOptions.displayMode=this.options.displayMode,this.configOptions.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay,this.configOptions.itemTooltipFormatter=this.options.itemTooltipFormatter,this.options.itemTooltipFormatter&&(this.configOptions._rowIndex=t,this.configOptions._colIndex=this.mainGrid.getColumnIndex(this.colID)),this.configOptions.tooltipTime=this.options.tooltipTime,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.configOptions.tableRender=this.options.tableRender,this.internal&&(this.options.visibleRowNum&&(this.configOptions.visibleRowNum=this.options.visibleRowNum),this.options.textAlign&&(this.configOptions.textAlign=this.options.textAlign),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions));var i=this.internal?this.mainGridId+"_selectbox_"+t+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;this.internal&&this.options.emptyItem&&(this.configOptions.emptyItem=this.options.emptyItem),this.select=new WebSquare.uiplugin.selectbox(i,this.configOptions,this.xml),this.mainGrid.dom[this.select.id]=this.select,this.comp=this.select,this.select.setSelectedIndex1=function(t,i){void 0!==i&&null!=i||(i={});var o=this.selectedIndex,s=this.getValue(),r=e.mainGrid.getColumnIndex(e.mainGrid.editedCell.id);if(this.setSelectedIndex(t),e.mainGrid._setSelectedIndex(e.editRowIndex,r,t),"oneditend"===e.options.eventPriority){if(!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit()),o!=this.selectedIndex){var a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r,colId:e.mainGrid.getColumnID(r)};u.f.fireEvent(e.mainGrid,"onviewchange",n)}}else{if(o!=this.selectedIndex){a=e.editRowIndex,n={oldValue:s,newValue:this.getValue(),
oldSelectedIndex:o,newSelectedIndex:this.selectedIndex,rowIndex:a,colIndex:r,colId:e.mainGrid.getColumnID(r)};u.f.fireEvent(e.mainGrid,"onviewchange",n)}!0!==i.skipClose&&(this.closeSubLayer(),e.handleEndEdit())}},this.existGridViewItemsetNode&&(this.select._setSubLayer=this.select.setSubLayer,this.select.setSubLayer=function(t){this._setSubLayer(t),this.itemTable.addKeyDownEventListener((function(t){if(27===t.keyCode)e.handleCancelEdit(t)}))}),this.select.__openSubLayer=this.select.openSubLayer,this.select.openSubLayer=function(){this.__openSubLayer()},this.select.__closeSubLayer=this.select.closeSubLayer,this.select.closeSubLayer=function(t){this.__closeSubLayer(t),e.mainGrid._setFocusedCell()},this.select._handleClickEvent=this.select.handleClickEvent,this.select.handleClickEvent=function(t){this._handleClickEvent(t),u.f.stopEvent(t),e.handleEndEdit()},this.select._refreshItemset=this.select.refreshItemset,this.select.refreshItemset=function(t){e.resetMatchInfo=!0,!0!==this.refreshStopItemTable&&this._refreshItemset(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.select.prototype.createSelectbox=function(t,e){var i=this.mainGrid._getWrapperCell(t,e);this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this._createComponent(e),i.innerHTML=this.select.toHTML();try{!this.select.modelControl.isBinded()&&-1===this.select.selectedIndex&&this.select.getItemCount()>0&&!this.select.options.chooseOption&&this.select.options.allOption}catch(t){s.Y.printStackTrace(t,null,this)}if(this.select.activate(),this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),""!=this.options.selectSetter)for(var o=0;o<this.itemArr.length;o++)this.select.addItem(this.itemArr[o].value,this.itemArr[o].label);this._setSize(t),this.select.render.style.border="1px solid "+this.mainGrid.options.selectedCellColor},O.select.prototype._setSize=function(t){try{var e={top:0,left:0,bottom:0,right:0};if(a.Z.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(e.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),e.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),e.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),e.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else{var i=WebSquare.style.getComputedStyle(t);i&&(i.padding||i.paddingTop||i.paddingBottom||i.paddingLeft||i.paddingRight)&&(e.left=parseInt(i.paddingLeft,10),e.right=parseInt(i.paddingRight,10),e.top=parseInt(i.paddingTop,10),e.bottom=parseInt(i.paddingBottom,10))}this.select.setSize(t.clientWidth-(2+e.left+e.right),t.clientHeight-(2+e.top+e.bottom))}catch(t){s.Y.printStackTrace(t,null,this)}},O.select.prototype.createItemTable=function(t,e){var i=this;this.existGridViewItemsetNode&&this.select._openOtherLayer(),this.select.setSubLayer();var o=this.select.itemTable;o.addClickEventListener((function(t,e){i.select.setSelectedIndex1(e);var o=i.mainGrid.getLastFocusedCell();if(i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell(),i.options.moveEditModeByChoice){var s=!0,r=i.options.moveEditModeByChoice;switch(r){case"down":i.mainGrid.moveVertical({},r,s);break;case"right":i.mainGrid.moveHorizontal({byApi:!0},r,s)}}})),this.existGridViewItemsetNode?o.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t);var e=i.mainGrid.getLastFocusedCell();i.editRowIndex==e.focusedRowIndex&&i.col_index==e.focusedColIndex&&("down"==i.mainGrid.options.tabKeyMove?i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode):"none"==i.mainGrid.options.tabKeyMove||i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode));break;case 27:i.handleCancelEdit(t)}
})):o.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:if("ul"==this.options.tableRender){var e=this.getSelectedIndex();e=parseInt(e),this.endReached&&(this.endReached=!1,i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid._setFocusedCell())}else{this.fireClick(t);var o=i.mainGrid.getLastFocusedCell();i.editRowIndex==o.focusedRowIndex&&i.col_index==o.focusedColIndex&&("down"==i.mainGrid.options.tabKeyMove?i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode):"none"==i.mainGrid.options.tabKeyMove||i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode))}break;case 13:o=i.mainGrid.getLastFocusedCell();i.editRowIndex!=o.focusedRowIndex||i.col_index!=o.focusedColIndex||i.options.moveEditModeByChoice||(i.mainGrid.options.fastEditMode?"none"==i.mainGrid.options.enterKeyMove||("right"==i.mainGrid.options.enterKeyMove?i.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",i.mainGrid.options.keyMoveEditMode):i.mainGrid.moveVertical(t,t.shiftKey?"up":"down",i.mainGrid.options.keyMoveEditMode)):i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell());break;case 27:i.mainGrid.editedCell.handleCancelEdit(t),i.mainGrid.isVirtualCursor()||i.mainGrid._setFocusedCell()}})),a.Z.isOpera()&&o.event.addListener(o.render,"onkeypress",(function(t){9!=t.keyCode&&27!=t.keyCode||u.f.preventDefault(t)})),this.mainGrid._moveKeyEdit(o.uuid,"keyDownFunc",{itemTable:!0}),WebSquare.WebSquaredoc.itemsetElement.length>0&&WebSquare.WebSquaredoc.itemsetElement[WebSquare.WebSquaredoc.itemsetElement.length-1].id==this.mainGridId+"_selectbox_"+this.colID&&WebSquare.WebSquaredoc.itemsetElement.pop()},O.select.prototype.setInnerHTML=function(t,e,i,o,r){var n=this.mainGrid._getWrapperCell(t,i),l=a.Z.getDataPrefix("col_id"),h=a.Z.getDataPrefix("rowindex"),d=this.mainGrid._getGroupbyDisplayRowIndex(i);if(this.options.embeddedInput&&!this.mainGrid.groupbyStatus.grouped){var c=this.mainGrid.getInput(this,t,e);if(c.render.setAttribute(h,i),""==this.options.selectSetter||this.dataComp||(this.initSelectSetter(),c.itemArr=this.itemArr,c.setSelectOptions()),this.hasRef&&!this.dataComp){var p=this.mainGrid.getElemRowIndex(t);c.itemArr=this.getRefItemArr(p),c.setSelectOptions()}if(this.dataComp){var g=this.mainGrid.modelControl.getDataComp(this.dataComp);if("linkedDataList"===g.initializeType&&null!=g.conditionInfo&&g.conditionInfo.filterInfo.useRef){var m=g.conditionInfo.targetInfo,f={};for(var b in m){var y=this.mainGrid.modelControl.getDataComp(b);if(y&&null!=y.initializeType&&"dataMap"!==y.initializeType){var v=y.getRowPosition();v!=i&&(f[b]=v,"linkedDataList"===y.initializeType?y._dataList.rowPosition=y.filteredRowIndexArr[i]:y.rowPosition=i)}}for(var w in c.stopRefreshItemTable(!0),g.syncWithParent(),c.stopRefreshItemTable(!1),f){var S=this.mainGrid.modelControl.getDataComp(w);"linkedDataList"===S.initializeType?S._dataList.rowPosition=S.filteredRowIndexArr[f[w]]:S.rowPosition=f[w]}for(var _=g.getAllJSON(),C=[],x=0;x<_.length;x++)C.push({label:_[x][this.itemsetObj.label],value:_[x][this.itemsetObj.value]});if(c.setNodeSet("",this.itemsetObj.label,this.itemsetObj.value),c.itemArr=C,1==c.options.allOption&&(c.itemArr=[{label:c.defaultAllOptionLabel,value:WebSquare.allValue}].concat(c.itemArr)),1==c.options.chooseOption){var I=c._getChooseOptionLabel();I=WebSquare.xml.decode(I).replace("&nbsp;"," "),c.itemArr=[{label:I,value:c.options.chooseOptionValue}].concat(c.itemArr)}c.setSelectOptions()}}c.setValue(e);var T=c.getValue();if(!c.setValueNM(e)&&!this.dataComp||""===e&&T!==e){var k={};k[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(c.render.getAttribute(h),o,T,null,null,null,k)}var L=!1;this.mainGrid._getEditDisabled(i,o)?(c.setDisabled(!0),L=!0):c.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?(c.setReadOnly(!0),!0===this.options.noDisabledOnReadOnly?this.mainGrid.addClass(t,this.mainGrid.options.readOnlyClass+"_nodisabled"):L=!0):(c.setReadOnly(!1),
!0===this.options.noDisabledOnReadOnly&&this.mainGrid.removeClass(t,this.mainGrid.options.readOnlyClass+"_nodisabled")),c.dom.select.disabled=!!L,t.removeAttribute("tabIndex")}else{this.initSelectSetter();p=i;null==e&&(e="");var A,D=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);if("function"==typeof D){this.useCustomFormatter=!0;I=this.getDisplayData(e,p);this.getEscape()&&(I=WebSquare.xml._encode(I+"")),A=D.call(this.mainGrid,e,I,d,o)}else this.useCustomFormatter=!1,A=this.getData(e,p),this.getEscape()&&(A=WebSquare.xml._encode(A+""));var W,q=this.internal?this.mainGridId+"_selectbox_"+i+"_"+this.colID+"_"+this.id:this.mainGridId+"_selectbox_"+this.colID;if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var M=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof M&&(this.mainGrid.options.titleFormatter=M,W=M.call(this,i,o,e))}else W=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){s.Y.printStackTrace(t,null,this)}var E=W||this.options.title||"";if(E)t.setAttribute("title",E);else if(this.mainGrid.options.titleAuto){var R=this.mainGrid.getHeaderValue(this.mainGrid.bodyToHeaderRelation[this.colID])||"";E=""!==e?" title='"+R+" "+e+"'":" title='"+R+WebSquare.language.getMessage("Grid_select")+"'"}if(a.Z.isSafari()&&-1!=navigator.userAgent.indexOf("Windows"))if(this.mainGrid.options.plainText&&n.firstChild&&n.firstChild.firstChild)n.firstChild.firstChild.data=A;else{n.innerHTML="";var N=document.createElement(this.mainGrid.options.dataTag);"span"==this.mainGrid.options.dataTag&&(N.className="w2grid_span"),N.style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:100%;","ul"==this.options.tableRender?N.innerHTML="<a href='#"+q+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+E+">"+A+"</a>":N.textContent=A,n.appendChild(N)}else if(this.mainGrid.options.plainText&&n.firstChild&&n.firstChild.firstChild)n.firstChild.firstChild.data=A;else if("icon"==this.options.viewType){n.innerHTML="";N=document.createElement(this.mainGrid.options.dataTag);"span"==this.mainGrid.options.dataTag&&(N.className="w2grid_span"),N.style.cssText="overflow : hidden; text-overflow:ellipsis; display:block; width:auto;","ul"==this.options.tableRender?N.innerHTML="<a href='#"+q+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main'"+E+">"+A+"</a>":N.innerHTML=A,n.appendChild(N)}else{var F="";if("span"==this.mainGrid.options.dataTag&&(F=" w2grid_span"),"ul"==this.options.tableRender)n.innerHTML="<"+this.mainGrid.options.dataTag+"style='overflow : hidden; text-overflow:ellipsis; display:block; width:auto;'><a href='#"+q+"_itemTable' onclick='event.returnValue=false; return false;' class='w2selectbox_ul_table_main"+F+"'"+E+">"+A+"</a>"+this.mainGrid.dataTagClose;else{var O=n.firstChild,B="w2grid_select"+F;if(this._checkFastScroll(A,O,B,r&&!0===r.scroll)){var P="string"==typeof A?WebSquare.xml.__decode(A):A;O.textContent=P}else n.innerHTML="<"+this.mainGrid.options.dataTag+" class='"+B+"'>"+A+this.mainGrid.dataTagClose}}var Y=this.mainGrid.dataList.getRealRowIndex(i),V=this.mainGrid.getCellOption(Y,o,"viewType"),H=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),j=a.Z.getDataPrefix("editModeEvent");if("icon"==V||""==V&&"own"==H?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute(j,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent||"ondblclick"==this.options.editModeEvent||"onsecondclick"==this.options.editModeEvent?t.setAttribute(j,this.options.editModeEvent):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_select"),t.setAttribute(j,"")),"ul"==this.options.tableRender){var z=this;this.mainGrid.event.addListener(t,"onfocus",this.mainGrid.event.bindAsEventListener(this.mainGrid,(function(t){var e=u.f.getTarget(t);z.mainGrid.lastEvent=t
;var o=z.mainGrid.getLastFocusedCell();if((0!=o.focusedColIndex||0!=o.focusedRowIndex)&&(!a.Z.isIEAllVersion()||!o.focusedRowIndex||o.focusedRowIndex==i)&&(o.focusedTd==e||z.mainGrid.focusedByApi||z.mainGrid._setFocusedCell(i,e.getAttribute(l)),z.mainGrid.focusedByApi=!1,e.childNodes[0]&&e.childNodes[0].childNodes[0])){var s=e.childNodes[0].childNodes[0];"A"==s.tagName&&s.focus()}})))}}},O.select.prototype.setColumnChooseOption=function(t,e){this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.select&&this.select.changeChooseOption(t,e)},O.select.prototype.showChooseOption=function(t){if(this.options.chooseOption=t,this.matchInfo=this.setMatchInfo(),this.select&&t)this.select.showChooseOption(t);else if(this.select&&!t){this.select.showChooseOption(t),this.select.itemArr.length>1&&0!=this.select.selectedIndex?this.select.selectedIndex-=1:this.select.selectedIndex=0,this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).innerHTML=this.mainGrid.dataTagOpen+this.getData(this.select.getValue(),this.select.selectedIndex)+this.mainGrid.dataTagClose}},O.select.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice(5))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var c in h){var u=this.mainGrid.modelControl.getDataComp(c);if(u&&null!=u.initializeType&&"dataMap"!==u.initializeType){var p=u.getRowPosition();p!=e&&(d[c]=p,"linkedDataList"===u.initializeType?u._dataList.rowPosition=u.filteredRowIndexArr[e]:u.rowPosition=e)}}for(var g in this.select&&this.select.stopRefreshItemTable(!0),o.syncWithParent(),this.select&&this.select.stopRefreshItemTable(!1),d){var m=this.mainGrid.modelControl.getDataComp(g);"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}var S=!1;if("linkedDataList"===o.initializeType&&this.select){var _=this.select.getItemCount(),C=this.select.itemArr;0===_?S=!0:1!=_||C[0].label!==this.select._getChooseOptionLabel()&&C[0].label!==this.select.defaultAllOptionLabel?2==_&&C[0].label===this.select._getChooseOptionLabel()&&C[1].label===this.select.defaultAllOptionLabel&&(S=!0):S=!0}if((!this.select||S)&&null!=f)try{var x,I;a="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)x=this.itemsetObj.label,I=this.itemsetObj.value;else{var T=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",r.I._XML_NAMESPACE.W2),k=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",r.I._XML_NAMESPACE.W2);T.length>0&&k.length>0&&(x=WebSquare.Elem.api.getAttribute(T[0],"ref"),I=WebSquare.Elem.api.getAttribute(k[0],"ref"))}var L=null!=x?f.bodyIdColIndexMap[x]:f.bodyIdColIndexMap[this.itemsetObj.label],A=null!=I?f.bodyIdColIndexMap[I]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var D=b[w]*f.cellIdList.length;if(t==f.dataArr[D+A])return a=f.dataArr[D+L],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a=this.getLocaleValue(a)}
var W=this.mainGrid._dataList.bodyIdColIndexMap[this.colID],q=this.selectedIndex||this.mainGrid._getSelectedIndex(e,W);if(q>=0&&q<y.length&&!this.options.chooseOption){a=f.dataArr[y[q]*f.cellIdList.length+L],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);D=0;D=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var M=this.mainGrid._dataList.cellIdList.length,E=(W=this.mainGrid._dataList.bodyIdColIndexMap[this.colID],f.dataArr[b[q]*f.cellIdList.length+A]);this.mainGrid._dataList.dataArr[D*M+W]=E}else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-all-"}else if(this.options.chooseOption&&t==this.options.chooseOptionValue)a=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)a="";else{D=0;D=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];M=this.mainGrid._dataList.cellIdList.length,W=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[D*M+W]="",a=""}else a=this.options.selectedDataDisplay?t:"";return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a=this.getLocaleValue(a)}catch(e){return s.Y.printStackTrace(e,null,this),a=this.getLocaleValue(t)}var R=!1;for(w=0;w<this.select.itemArr.length;w++)if((t||-1!=N)&&this.select.itemArr[w].value==t){R=!0,a=this.select.itemArr[w].label;break}var N=this.mainGrid._getSelectedIndex(e,this.mainGrid._dataList.bodyIdColIndexMap[this.colID]);if(!R&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.select.allItemArr.length;w++)if(this.select.allItemArr[w].value==t){R=!0,a=this.select.allItemArr[w].label;break}if(!R)if(""!=t||-1==N||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-all-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=this.options.selectedDataDisplay?t:"");else this.select.itemArr.length>0?(a=this.select.itemArr[N].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)):a=t}else{var F=this.getMatchInfo(e);N=this.mainGrid._getSelectedIndex(e,this.mainGrid.bodyIdColIndexMap[this.colID]);""!=t||-1==N||this.options.chooseOption?a=F["SELECT_"+t]:(this.mainGrid.dataList.__setCellData(e,t),a=F["SELECT_"+this.itemArr[N].label])}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a=this.getLocaleValue(a)}catch(t){s.Y.printStackTrace(t,null,this)}},O.select.prototype.initSelectSetter=function(){if(0==this.selectSetted&&""!=this.options.selectSetter&&!this.dataComp){this.selectSetted=!0;var t=[];try{this.options.selectSetter=this.options.selectSetter.wq_trim(),this.options.selectSetter.indexOf("(")<0&&(this.options.selectSetter+="()"),t=new Function("return "+this.options.selectSetter)()}catch(t){s.Y.printStackTrace(t)}this.itemArr=t,this.matchInfo=[];for(var e=0;e<t.length;e++){var i=t[e];null==i.value&&(i.value=""),this.matchInfo["SELECT_"+i.value]=i.label}}},O.select.prototype.setEditMode=function(t,e){if(!this.options.embeddedInput){var i=this.mainGrid._getWrapperCell(t,e);if(this.dataComp){var o=this.mainGrid.modelControl.getDataComp(this.dataComp);o&&"linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef&&o.syncWithParent()}if(!0!==this._init?(this.createSelectbox(t,e),this._init=!0):(i.innerHTML="",this.mainGrid.cellMergeInfo&&this._setSize(t),i.appendChild(this.select.render),this.options.itemTooltipFormatter&&(this.select.options._rowIndex=e)),this.mainGrid.directItemChoiceKeyObj.select){
this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID));var s=this.select.findItemStartedWithKeyChar(this.mainGrid.directItemChoiceKeyObj.select);if(this.mainGrid.dataList.__setCellData(e,this.colID,this.select.getValue()),this.mainGrid.directItemChoiceKeyObj.select=null,this.options.moveFocusByChoice&&s&&this.moveFocus(this.editRowIndex,this.colID),s)return;this.mainGrid.editedCell=this.mainGrid.getCellInfo(t),i.innerHTML="",i.appendChild(this.select.render)}if(this.select.itemTable||this.mainGrid.directItemChoiceKeyObj.select||(this.existGridViewItemsetNode&&(this.editTd=t),this.createItemTable(t,e)),this.hasRef&&!this.dataComp){var r=this.mainGrid.getElemRowIndex(t);this.select.itemArr=this.getRefItemArr(r),this.select.itemTable.show(),this.select.setSelectOptions()}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.select.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),0==this.select.getItemCount()&&(this.select.selectedIndex=-1,this.select.dom.label.innerHTML=""),this.existGridViewItemsetNode&&this.select.gridViewOptions.width)this.select.openSubLayer();else{var n=t.clientWidth-2,l={top:0,left:0,bottom:0,right:0};if(a.Z.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(l.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),l.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),l.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),l.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(u=WebSquare.style.getComputedStyle(t))&&(u.padding||u.paddingTop||u.paddingBottom||u.paddingLeft||u.paddingRight)&&(l.left=parseInt(u.paddingLeft,10),l.right=parseInt(u.paddingRight,10),l.top=parseInt(u.paddingTop,10),l.bottom=parseInt(u.paddingBottom,10));this.select.setSize(t.clientWidth-(2+l.left+l.right),t.clientHeight-(2+l.top+l.bottom)),this.select.itemTable.setStyle("width",t.clientWidth-4+"px"),this.select.openSubLayer();var h=this.mainGrid.render.offsetWidth,d=this.select.itemTable.render.offsetWidth,c=this.select.itemTable.render.firstChild.offsetWidth;if(d-2>n&&(n=d-2),this.select.itemTable.render.clientHeight>=this.select.itemTable.render.scrollHeight||this.select.getItemCount()<=this.select.options.visibleRowNum)this.select.itemTable.render.firstChild.style.width=n+"px",h>d&&c<d&&this.select.itemTable.render.firstChild.firstChild&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=n&&this.select.itemTable.setStyle("width",n+"px");else{this.select.itemTable.render.firstChild.style.width=n-17+"px";var u;l={top:0,left:0,bottom:0,right:0};if(a.Z.isIEAllVersion("6 7 8"))WebSquare.style.getComputedStyle(t,"padding")&&(l.left=parseInt(WebSquare.style.getComputedStyle(t,"padding-left"),10),l.right=parseInt(WebSquare.style.getComputedStyle(t,"padding-right"),10),l.top=parseInt(WebSquare.style.getComputedStyle(t,"padding-top"),10),l.bottom=parseInt(WebSquare.style.getComputedStyle(t,"padding-bottom"),10));else(u=WebSquare.style.getComputedStyle(t))&&(u.padding||u.paddingTop||u.paddingBottom||u.paddingLeft||u.paddingRight)&&(l.left=parseInt(u.paddingLeft,10),l.right=parseInt(u.paddingRight,10),l.top=parseInt(u.paddingTop,10),l.bottom=parseInt(u.paddingBottom,10));this.select.setSize(t.clientWidth-(2+l.left+l.right),t.clientHeight-(2+l.top+l.bottom)),h>d&&c+17<=d-2&&this.select.itemTable.render.firstChild.firstChild.offsetWidth<=n&&this.select.itemTable.setStyle("width",n+"px")}}t.style.textOverflow="ellipsis"}},O.select.prototype._handleEndEdit_common=function(t){try{this.select.closeSubLayer();var e=this.select.getValue();try{if(this.mainGrid._getWrapperTD(this.select.render.parentNode))this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).removeChild(this.select.render)}catch(t){return}
this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.select.prototype._handleEndEdit_focus=function(){this.options.moveFocusByChoice&&this.moveFocus(this.editRowIndex,this.colID)},O.select.prototype._getEditedValue=function(t){return this.select.getValue()},O.select.prototype._handleCancelEdit=function(t){this.select.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).removeChild(this.select.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID))},O.select.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.select.prototype.moveFocus=function(t,e){if(this.options.moveFocusByChoice)switch(this.options.moveFocusByChoice){case"down":this.mainGrid._setFocusedCell(t+1,e,!1);break;case"right":var i=this.mainGrid.getColumnIndex(e)+1;this.mainGrid._setFocusedCell(t,i,!1)}},O.select.prototype.refreshCell=function(){try{if(!this.options.selectedData)return;if(!this.dataComp)return;var t=this.mainGrid.modelControl.getDataComp(this.dataComp);if(!t)return;var e,i=null,o=null;if("linkedDataList"===t.initializeType?(i=t._dataList,o=t.initialRowIndexArr):"dataList"===t.initializeType&&(o=(i=t).filteredRowIndexArr),null==i)return;if(this.internal)this.itemsetObj.label,e=this.itemsetObj.value;else{var a=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",r.I._XML_NAMESPACE.W2),n=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",r.I._XML_NAMESPACE.W2);a.length>0&&n.length>0&&(WebSquare.Elem.api.getAttribute(a[0],"ref"),e=WebSquare.Elem.api.getAttribute(n[0],"ref"))}var h,d=null!=e?i.bodyIdColIndexMap[e]:i.bodyIdColIndexMap[this.itemsetObj.value];h=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var c=this.mainGrid._dataList.cellIdList.length,u=this.mainGrid._dataList.bodyIdColIndexMap[this.id],p=0;p<h.length;p++){var g=h[p];if("object"!==(0,l.A)(g)){var m=this.mainGrid._dataList.dataArr[g*c+u];if(!(this.options.allOption&&m==WebSquare.allValue||this.options.chooseOption&&m==this.options.chooseOptionValue||!(""!==m||this.selectedIndex>=0))){var f=!1;if("linkedDataList"===t.initializeType&&null!=t.conditionInfo&&t.conditionInfo.filterInfo.useRef){var b=t.conditionInfo.targetInfo,y={};for(var v in b){var w=this.mainGrid.modelControl.getDataComp(v);if(null!=w.initializeType&&"dataMap"!=w.initializeType){var S=w.getRowPosition();S!=p&&(y[v]=S,"linkedDataList"===w.initializeType?w._dataList.rowPosition=w.filteredRowIndexArr[p]:w.rowPosition=p)}}var _=t.getBroadcast();for(var C in t.setBroadcast(!1),t.syncWithParent(),t.setBroadcast(_),y){var x=this.mainGrid.modelControl.getDataComp(C);"linkedDataList"===x.initializeType?x._dataList.rowPosition=x.filteredRowIndexArr[y[C]]:x.rowPosition=y[C]}o=t.initialRowIndexArr}for(var I=0;I<o.length;I++)if(m==i.dataArr[o[I]*i.cellIdList.length+d]){f=!0;break}if(!f){var T="";this.selectedIndex>=0&&this.selectedIndex<o.length&&!this.options.chooseOption&&(T=i.dataArr[o[this.selectedIndex]*i.cellIdList.length+d]),this.mainGrid._dataList.dataArr[g*c+u]=T}}}}}catch(t){s.Y.printStackTrace(t,null,this)}},O.checkcombobox=function(){},O.checkcombobox.prototype._initializeCellInfo=function(){try{this.separator=this.options.separator||" "}catch(t){s.Y.printStackTrace(t,null,this)}},O.checkcombobox.prototype.setInnerHTML=function(t,e,i,o,r){try{var n=this.mainGrid._getWrapperCell(t,i);null==e&&(e="");var l=this.getData(e,i);this.getEscape()&&(l=WebSquare.xml._encode(l+"")),n.innerHTML=this.mainGrid.dataTagOpen+l+this.mainGrid.dataTagClose
;var h,d=this.mainGrid.dataList.getRealRowIndex(i),c=this.mainGrid.getCellOption(d,o,"viewType"),u=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),p=a.Z.getDataPrefix("editModeEvent");if("icon"==c||""==c&&"own"==u?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute(p,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute(p,"onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_checkcombobox"),t.setAttribute(p,"")),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var g=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof g&&(this.mainGrid.options.titleFormatter=g,h=g.call(this,i,o,e))}else h=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",h)}catch(t){s.Y.printStackTrace(t,null,this)}}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},O.checkcombobox.prototype.getData=function(t,e,i){try{var o="";t=t.split(this.separator);var a,n,l=[],h=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var d=this.itemsetObj.nodeset;d.indexOf("data:")>=0&&(h=d.slice(5))}if(h&&(n=this.mainGrid.modelControl.getDataComp(h)),h&&n){if("linkedDataList"===n.initializeType&&null!=n.conditionInfo&&n.conditionInfo.filterInfo.useRef){var c=n.conditionInfo.targetInfo,u={};for(var p in c){var g=this.mainGrid.modelControl.getDataComp(p);if(null!=g.initializeType&&"dataMap"!=g.initializeType){var m=g.getRowPosition();m!=e&&(u[p]=m,"linkedDataList"===g.initializeType?g._dataList.rowPosition=g.filteredRowIndexArr[e]:g.rowPosition=e)}}for(var f in this.checkcombobox&&this.checkcombobox.stopRefreshItemTable(!0),n.syncWithParent(),this.checkcombobox&&this.checkcombobox.stopRefreshItemTable(!1),u){var b=this.mainGrid.modelControl.getDataComp(f);"linkedDataList"===b.initializeType?b._dataList.rowPosition=b.filteredRowIndexArr[u[f]]:b.rowPosition=u[f]}}var y=null,v=null;if("linkedDataList"===n.initializeType?(y=n._dataList,v=n.initialRowIndexArr):"dataList"===n.initializeType&&(v=(y=n).filteredRowIndexArr),!this.checkcombobox&&null!=y)try{var w,S;o="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)w=this.itemsetObj.label,S=this.itemsetObj.value;else{var _=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",r.I._XML_NAMESPACE.W2),C=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",r.I._XML_NAMESPACE.W2);0!=_.length&&0!=C.length&&(w=WebSquare.Elem.api.getAttribute(_[0],"ref"),S=WebSquare.Elem.api.getAttribute(C[0],"ref"))}for(var x=y.bodyIdColIndexMap[w],I=y.bodyIdColIndexMap[S],T=0;T<v.length;T++)for(var k=v[T]*y.cellIdList.length,L=0;L<t.length;L++)t[L]==y.dataArr[k+I]&&(o=y.dataArr[k+x],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?o=t[L]+this.options.delimiter+o:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?o=o+this.options.delimiter+t[L]:"value"!==this.options.displayMode&&3!=this.options.displayMode||(o=t[L]),i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),o=this.getLocaleValue(o),l.push(o));if(l.length>0)return l.join(this.separator);if(this.options.allOption&&t==WebSquare.allValue)o=WebSquare.language.getMessage("Grid_all")||"-all-";else if(this.options.chooseOption&&t==this.options.chooseOptionValue)o=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)o="";else{k=0;k=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var A=this.mainGrid._dataList.cellIdList.length,D=this.mainGrid._dataList.bodyIdColIndexMap[this.id];this.mainGrid._dataList.dataArr[k*A+D]="",o="",this.options.chooseOption&&!this.options.chooseOptionValue&&(o=this.options.chooseOptionLabel)}else o=t
;return i&&i.emptyValue&&(""===o||"$blank"==o)?o=i.emptyValue:void 0!==o&&"$blank"!=o||(o=""),o=this.getLocaleValue(o)}catch(e){return s.Y.printStackTrace(e,null,this),o=this.getLocaleValue(t)}var W=!1;a={};for(T=0;T<this.checkcombobox.itemArr.length;T++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[T].value==t[L]&&(l.push(this.checkcombobox.itemArr[T].label),a[T+"_"]=!0,W=!0);W||(""==l&&1==this.options.chooseOption?(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,o=WebSquare.xml.decode(o).replace("&nbsp;"," ")):this.options.selectedData||(o=t),o=this.getLocaleValue(o),l.push(o),a=null),o=l.join(this.separator)}else{var q=this.getMatchInfo(e);for(W=!1,T=0;T<t.length;T++)void 0!==(o=q["CHECKCOMBOBOX_"+t[T]])&&(o=this.getLocaleValue(o),l.push(o),W=!0);if(W){if(this.options.checkcomboboxRangeSeparator&&this.checkcombobox){a={};for(T=0;T<this.checkcombobox.itemArr.length;T++)for(L=0;L<t.length;L++)this.checkcombobox.itemArr[T].value==t[L]&&(a[T+"_"]=!0)}}else""==l&&1==this.options.chooseOption?(o=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,o=WebSquare.xml.decode(o).replace("&nbsp;"," ")):this.options.selectedData||(o=t),o=this.getLocaleValue(o),l.push(o);o=l.join(this.separator)}if(i&&i.emptyValue&&(""===o||"$blank"==o))o=i.emptyValue;else if(void 0===o||"$blank"==o)return"";return this.options.checkcomboboxRangeSeparator&&this.checkcombobox&&a?this.checkcombobox._getRangeText(this.checkcombobox.itemArr,this.checkcombobox.itemArr.length,this.separator,a):o}catch(t){s.Y.printStackTrace(t,null,this)}},O.checkcombobox.prototype._createComponent=function(t){try{if(this.comp)return;this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_checkcombobox_"+this.colID),this.xml.setAttribute("chooseOption",this.options.chooseOption+""),this.xml.setAttribute("chooseOptionLabel",this.options.chooseOptionLabel),this.xml.setAttribute("allOption",this.options.allOption+""),"column"===this.options.submenuSize?this.xml.setAttribute("submenuSize","column"):this.xml.setAttribute("submenuSize","auto"),this.xml.setAttribute("style",this.style),this.xml.setAttribute("disabled",this.mainGrid.getDisabled("cell",this.mainGrid._getGroupbyDisplayRowIndex(t),this.colID)),this.xml.setAttribute("useDrag",this.options.checkcomboboxUseDrag),this.xml.setAttribute("useEdit",this.options.checkcomboboxUseEdit),this.xml.setAttribute("rangeSeparator",this.options.checkcomboboxRangeSeparator),this.xml.setAttribute("validateOnInput",this.options.checkcomboboxValidateOnInput),this.options.checkcomboboxVisibleRowNum>1&&this.xml.setAttribute("visibleRowNum",this.options.checkcomboboxVisibleRowNum),this.options.checkcomboboxVisibleColNum>1&&this.xml.setAttribute("visibleColNum",this.options.checkcomboboxVisibleColNum),this.options.checkcomboboxVisibleColMax>1&&this.xml.setAttribute("visibleColMax",this.options.checkcomboboxVisibleColMax),this.configOptions.separator=this.separator,this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.internal&&(this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions)),this.configOptions.accessibility=this.mainGrid.options.accessibility,this.checkcombobox=new WebSquare.uiplugin.checkcombobox(this.mainGridId+"_checkcombobox_"+this.id,this.configOptions,this.xml),this.comp=this.checkcombobox;var e=this;this.checkcombobox.__closeSubLayer=this.checkcombobox.closeSubLayer,this.checkcombobox.closeSubLayer=function(){this.__closeSubLayer(),e.handleEndEdit()},this.checkcombobox.toggle=function(){if(this.isOpen){var i=this.getValue(),o=this.getInfoArray()
;this.__closeSubLayer();var s=this.getValue(),r=e.mainGrid.getColumnIndex(e.options.id);if(i!=s){var a={oldInfo:o,newInfo:this.getInfoArray(),oldValue:i,newValue:s,rowIndex:t,colIndex:r,colId:e.mainGrid.getColumnID(r)};u.f.fireEvent(e.mainGrid,"onviewchange",a)}e.handleEndEdit()}else this.openSubLayer()},this.checkcombobox._parent_uuid=this.mainGrid.uuid}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.checkcombobox.prototype.setEditMode=function(t,e){try{var i=this.mainGrid._getWrapperCell(t,e);if(this.dataComp){var o=this.mainGrid.modelControl.getDataComp(this.dataComp);o&&"linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef&&o.syncWithParent()}if(!0!==this._init){if(this._createComponent(e),i.innerHTML=this.checkcombobox.toHTML(),this.checkcombobox.activate(),this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setNodeSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setSubLayer(),!this.existGridViewItemsetNode){var r=this.checkcombobox.itemTable,a=this;r.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:a.checkcombobox.closeSubLayer(),a.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",a.mainGrid.options.keyMoveEditMode);break;case 13:a.mainGrid.options.fastEditMode?"none"==a.mainGrid.options.enterKeyMove||("right"==a.mainGrid.options.enterKeyMove?a.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",a.mainGrid.options.keyMoveEditMode):a.mainGrid.moveVertical(t,t.shiftKey?"up":"down",a.mainGrid.options.keyMoveEditMode)):a.checkcombobox.closeSubLayer();break;case 27:a.mainGrid.editedCell.handleCancelEdit(t)}})),this.mainGrid._moveKeyEdit(r.uuid,"keyDownFunc",{itemTable:!0})}this._init=!0}else i.innerHTML="",this.mainGrid.cellMergeInfo&&this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),i.appendChild(this.checkcombobox.render);if(this.hasRef&&!this.dataComp){var n=this.mainGrid.getElemRowIndex(t);this.checkcombobox.itemArr=this.getRefItemArr(n),this.checkcombobox.setSelectOptions()}this.existGridViewItemsetNode?(this.checkcombobox.openSubLayer(),this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID))):(this.checkcombobox.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),this.checkcombobox.openSubLayer()),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t);var l=this.checkcombobox.itemTable.render.firstChild.clientWidth;l<t.clientWidth-2&&(l=t.clientWidth-2),l<this.checkcombobox.itemTable.render.offsetWidth-2&&(l=this.checkcombobox.itemTable.render.offsetWidth-2),this.checkcombobox.setSize(t.clientWidth-2,t.clientHeight-2),this.checkcombobox.setItemTable(),t.style.textOverflow="ellipsis"}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.checkcombobox.prototype._handleEndEdit_common=function(t){try{this.checkcombobox.__closeSubLayer&&this.checkcombobox.__closeSubLayer();var e=this.checkcombobox.getValue();try{this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).removeChild(this.checkcombobox.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i)}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.checkcombobox.prototype._handleEndEdit_focus=function(){this.mainGrid._setFocusedCell()},O.checkcombobox.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.checkcombobox.prototype._handleCancelEdit=function(t){this.checkcombobox.__closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},O.checkcombobox.prototype._getEditedValue=function(t){
return this.checkcombobox.getValue()},O.checkcombobox.prototype.refreshItemArr=function(t){var e=WebSquare.WebSquareparser.parseChoices(this.xml,"");if(e.length>0?this.itemArr=e:this.itemArr=this.modelControl.getItemsetData(),1==this.options.allOption){var i=WebSquare.language.getMessage("Grid_all")||"-all-";this.itemArr=[{label:i,value:WebSquare.allValue}].concat(this.itemArr)}},O.autoComplete=function(){},O.autoComplete.prototype.setInnerHTML=function(t,e,i,o,r){try{var n,l=this.mainGrid._getWrapperCell(t,i);null==e&&(e="");var h=this.mainGrid._getGroupbyDisplayRowIndex(i),d=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);if("function"==typeof d){this.useCustomFormatter=!0;var c=this.getDisplayData(e,i);this.getEscape()&&(c=WebSquare.xml._encode(c+"")),n=d.call(this.mainGrid,e,c,h,o)}else{this.useCustomFormatter=!1,n=this.getData(e,i),this.getEscape()&&(n=WebSquare.xml._encode(n+""));var p=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;n&&this.formatter&&p&&(n=this.formatter.format(n))}var g=this.mainGrid.dataList.getRealRowIndex(i),m=this.mainGrid.getCellOption(g,o,"viewType"),f=a.Z.getDataPrefix("col_id"),b=a.Z.getDataPrefix("rowIndex"),y=a.Z.getDataPrefix("colIndex");if(this.options.embeddedInput){var v=this.mainGrid.getInput(this,t,e),w=0,S=0,_=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",_=!0),this.mainGrid.embeddedAutoCompleteStyleObj||(this.mainGrid.embeddedAutoCompleteStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10)}),w=t.offsetHeight-parseInt(WebSquare.style.getStyle(t,"border-top-width"),10)-parseInt(WebSquare.style.getStyle(t,"border-bottom-width"),10),w-=this.mainGrid.embeddedAutoCompleteStyleObj.top+this.mainGrid.embeddedAutoCompleteStyleObj.bottom,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),S=this.mainGrid.embeddedWidthObj[o].width,S-=this.mainGrid.embeddedAutoCompleteStyleObj.left+this.mainGrid.embeddedAutoCompleteStyleObj.right,_?t.parentNode.style.display="none":WebSquare.util.isIE("6 7")&&(w-=2),v._setSize(S-2,w),v.render.setAttribute(b,i),v.setValue(e),""!==n&&(v.dom.label.innerHTML=n),this.mainGrid._getEditDisabled(i,o)?v.setDisabled(!0):v.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?v.setReadOnly(!0):v.setReadOnly(!1),t.removeAttribute("tabIndex")}else if("icon"==m&&"true"==this.options.viewTypeIconImage){l.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td "+f+"='"+this.colID+"' "+b+"='"+i+"' "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose,"</td>","<td "+f+"='"+this.colID+"' "+b+"='"+i+"'  "+y+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_autoComplete_div_img' />","</td>","</table>"].join("");var C=this,x=t,I=l.getElementsByTagName("div")[0];u.f.addListener(I,"onclick",(function(t){C.mainGrid._getEditDisabled(i,o)||C.mainGrid.___getEditReadOnly(i,o)||(C.autoCompleteImageClicked=!0,C.options.directOpen&&(C.mainGrid.__setFocusedCell(t,x),C.mainGrid.setEditMode(x)))}))}else{l.innerHTML=this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose;var T,k=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),L=a.Z.getDataPrefix("editModeEvent");if("icon"==m||""==m&&"own"==k?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),
t.setAttribute(L,this.options.editModeEventIcon)):"onclick"==this.options.editModeEvent?t.setAttribute(L,"onclick"):(this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_autoComplete"),t.setAttribute(L,"")),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var A=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof A&&(this.mainGrid.options.titleFormatter=A,T=A.call(this,i,o,e))}else T=this.mainGrid.options.titleFormatter.call(this,i,o,n);t.setAttribute("title",T)}catch(t){s.Y.printStackTrace(t,null,this)}}}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype.getInput=function(t,e,i,o){try{var r=o.titleStr,a=o.input_id,n=o.dataRowIndex,l=o.dataCol_id,h=t.mainGrid,d=r||t.options.title||"";if(h.options.titleAuto&&!d){var c=h.getHeaderValue(h.bodyToHeaderRelation[t.id])||"";d=""!==i&&null!=i?c+" "+(h.changeItemValue("label",t.id,[i])[0]||i):c+WebSquare.language.getMessage("Grid_autoComplete")}var p=new WebSquare.uiplugin.autoComplete(a,{className:"w2grid_embedded_select",style:"$blank",pluginName:"autoComplete",renderType:"native",title:d,chooseOption:t.options.chooseOption,chooseOptionLabel:t.options.chooseOptionLabel,_scope_obj_uuid:t.options._scope_obj_uuid,accessibility:this.mainGrid.options.accessibility,xmlEvents:[{name:"onclick",action:"script",param:{handler:function(t){var e=parseInt(this.render.getAttribute(n),10),i=h._getWrapperTD(this.render.parentNode).getAttribute(l),o=h.getColumnIndex(i);WebSquare.event.fireEvent(h,"oncellclick",e,o,i)}}},{name:"onkeydown",action:"script",param:{handler:function(t){switch(t.keyCode){case 38:case 40:case 27:case 13:return void u.f.stopPropagation(t)}}}}]},t.xml);this.mainGrid._getWrapperCell(e,e.getAttribute(n)).innerHTML=p.toHTML();var g=WebSquare.uiplugin.autoComplete.prototype.setSelectedIndex1;if(p.setSelectedIndex1=function(t,e,i){var o=h._getWrapperTD(this.render.parentNode).getAttribute(l),s=parseInt(this.render.getAttribute(n),10),r=h._getGroupbyDisplayRowIndex(s),a=h.getColumnIndex(o),d=this.selectedIndex,c=this.getValue();if(g.call(this,t,e,i),h.dataList.__setCellData(s,o,this.getValue()),h._dataList.setRowPosition(s),d!=this.selectedIndex){var p={oldValue:c,newValue:this.getValue(),oldSelectedIndex:d,newSelectedIndex:this.selectedIndex,rowIndex:s,colIndex:a,colId:h.getColumnID(a)};u.f.fireEvent(h,"onviewchange",p)}u.f.fireEvent(h,"onafteredit",r,a,this.getValue())},p.activate(),!0!==this.mainGrid.options.accessibility){var m=p.uuid;p.event.addListener2(p.dom.input,"onfocus",(function(t){h.lastEvent=t;var e=WebSquare.idCache[m];h.getLastFocusedCell().focusedTd==h._getWrapperTD(e.render.parentNode)||h.focusedByApi||h._setFocusedCell(e.render.getAttribute(n),h._getWrapperTD(e.render.parentNode).getAttribute(l)),h.focusedByApi=!1}))}return p}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype._initializeCellInfo=function(t){try{"useData"==this.options.noResult&&(this.useDataInfo={}),this.internal&&!0===this.options.viewTypeIconImage&&(this.options.viewTypeIconImage="true")}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype.getData=function(t,e,i){try{var o,a="",n=this.dataComp;if(this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType){var l=this.itemsetObj.nodeset;l.indexOf("data:")>=0&&(n=l.slice(5))}if(n&&(o=this.mainGrid.modelControl.getDataComp(n)),n&&o){if("linkedDataList"===o.initializeType&&null!=o.conditionInfo&&o.conditionInfo.filterInfo.useRef){var h=o.conditionInfo.targetInfo,d={};for(var c in h){var u=this.mainGrid.modelControl.getDataComp(c);if(null!=u.initializeType&&"dataMap"!=u.initializeType){var p=u.getRowPosition();p!=e&&(d[c]=p,"linkedDataList"===u.initializeType?u._dataList.rowPosition=u.filteredRowIndexArr[e]:u.rowPosition=e)}}for(var g in o.syncWithParent(),d){var m=this.mainGrid.modelControl.getDataComp(g)
;"linkedDataList"===m.initializeType?m._dataList.rowPosition=m.filteredRowIndexArr[d[g]]:m.rowPosition=d[g]}}var f=null,b=null,y=null;if("linkedDataList"===o.initializeType)f=o._dataList,b=o.initialRowIndexArr,y=o.initialRowIndexArr;else if("dataList"===o.initializeType){if(f=o,o.options&&o.options.validateAllItemsetData){var v=f.getTotalRow();b=[];for(var w=0;w<v;w++)b.push(w)}else b=f.filteredRowIndexArr;y=f.filteredRowIndexArr}if(!this.autoComplete&&null!=f)try{var S,_;a="";if(this.internal||this.existGridViewItemsetNode||"gridViewItemset"===this.options.itemTableType)S=this.itemsetObj.label,_=this.itemsetObj.value;else{var C=WebSquare.Elem.api.getElementsByTagName(this.xml,"label",r.I._XML_NAMESPACE.W2),x=WebSquare.Elem.api.getElementsByTagName(this.xml,"value",r.I._XML_NAMESPACE.W2);C.length>0&&x.length>0&&(S=WebSquare.Elem.api.getAttribute(C[0],"ref"),_=WebSquare.Elem.api.getAttribute(x[0],"ref"))}var I=null!=S?f.bodyIdColIndexMap[S]:f.bodyIdColIndexMap[this.itemsetObj.label],T=null!=_?f.bodyIdColIndexMap[_]:f.bodyIdColIndexMap[this.itemsetObj.value];for(w=0;w<b.length;w++){var k=b[w]*f.cellIdList.length;if(t==f.dataArr[k+T])return a=f.dataArr[k+I],"value delim label"===this.options.displayMode||1==this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||2==this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&3!=this.options.displayMode||(a=t),i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a=this.getLocaleValue(a)}if(this.selectedIndex>=0&&this.selectedIndex<y.length&&!this.options.chooseOption)a=f.dataArr[y[this.selectedIndex]*f.cellIdList.length+I],"value delim label"===this.options.displayMode||"1"===this.options.displayMode?a=t+this.options.delimiter+a:"label delim value"===this.options.displayMode||"2"===this.options.displayMode?a=a+this.options.delimiter+t:"value"!==this.options.displayMode&&"3"!==this.options.displayMode||(a=t);else if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-all-"}else if(this.options.chooseOption&&t==this.options.chooseOptionValue)a=this.options.chooseOptionLabel;else if(this.options.selectedData)if(""==t)a="";else{k=0;k=this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr[e]:this.mainGrid._dataList.filteredRowIndexArr[e];var L=this.mainGrid._dataList.cellIdList.length,A=this.mainGrid._dataList.bodyIdColIndexMap[this.colID];this.mainGrid._dataList.dataArr[k*L+A]="",a=""}else a=t;return i&&i.emptyValue&&(""===a||"$blank"==a)?a=i.emptyValue:void 0!==a&&"$blank"!=a||(a=""),a=this.getLocaleValue(a)}catch(e){return s.Y.printStackTrace(e,null,this),a=this.getLocaleValue(t)}var D=!1;for(w=0;w<this.autoComplete.itemArr.length;w++)if(this.autoComplete.itemArr[w].value==t){D=!0,a=this.autoComplete.itemArr[w].label;break}if(!D&&o.options&&o.options.validateAllItemsetData)for(w=0;w<this.autoComplete.allItemArr.length;w++)if(this.autoComplete.allItemArr[w].value==t){D=!0,a=this.autoComplete.allItemArr[w].label;break}if(!D)if(""!=t||-1==this.selectedIndex||this.options.chooseOption)if(this.options.allOption&&t==WebSquare.allValue){a=WebSquare.language.getMessage("Grid_all")||"-all-"}else this.options.chooseOption&&t==this.options.chooseOptionValue?a=this.options.chooseOptionLabel:this.options.selectedData||(a=t);else a=this.autoComplete.itemArr[this.selectedIndex].label,this.mainGrid.dataList.__setCellData(e,this.colID,a)}else{var W=this.getMatchInfo(e);"useData"==this.options.noResult&&(this.useDataInfo["AUTOCOMPLETE_"+t]||(this.useDataInfo["AUTOCOMPLETE_"+t]=t),W["AUTOCOMPLETE_"+t]||(this.matchInfo["AUTOCOMPLETE_"+t]=t,this.itemArr=[{label:t,value:""}].concat(this.itemArr))),a=W["AUTOCOMPLETE_"+t]}if(i&&i.emptyValue&&(""===a||"$blank"==a))a=i.emptyValue;else if(void 0===a||"$blank"==a)return"";return a=this.getLocaleValue(a)}catch(t){s.Y.printStackTrace(t,null,this)}return t},
O.autoComplete.prototype._createComponent=function(t){try{if(this.comp)return;if(this.options.disableEdit?this.style="position:relative;left:0px;top:0px;":this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_autoComplete_"+this.colID),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.interactionMode&&(this.configOptions.interactionMode=this.options.interactionMode),this.options.submission&&(this.configOptions.submission=this.options.submission),this.options.sortOption&&(this.configOptions.sortOption=this.options.sortOption),this.options.displayMode&&(this.configOptions.displayMode=this.options.displayMode),this.options.search&&(this.configOptions.search=this.options.search),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.submenuSize&&(this.configOptions.submenuSize=this.options.submenuSize),this.options.searchTarget&&(this.configOptions.searchTarget=this.options.searchTarget),this.options.useKeywordHighlight&&(this.configOptions.useKeywordHighlight=this.options.useKeywordHighlight),this.options.allOption&&(this.configOptions.allOption=this.options.allOption),this.options.chooseOptionLabel&&(this.configOptions.chooseOptionLabel=this.options.chooseOptionLabel),this.options.noResult&&(this.configOptions.noResult=this.options.noResult),this.options.disableEdit&&(this.configOptions.disableEdit=this.options.disableEdit),this.options.findItemFirstKey&&(this.configOptions.findItemFirstKey=this.options.findItemFirstKey),this.options.findItemKor&&(this.configOptions.findItemKor=this.options.findItemKor),this.options.maxlength&&(this.configOptions.maxlength=this.options.maxlength),a.Z.isIEAllVersion()&&this.xml.removeAttribute("readOnly"),this.internal&&(this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.itemTableType&&(this.configOptions.itemTableType=this.options.itemTableType),this.options.itemSet&&(this.configOptions.itemSet=this.options.itemSet),this.options.item&&(this.configOptions.item=this.options.item),this.options.gridViewOptions&&(this.configOptions.gridViewOptions=this.options.gridViewOptions),this.options.caseSensitive&&(this.configOptions.caseSensitive=this.options.caseSensitive)),this.existGridViewItemsetNode&&!this.configOptions.submenuSize&&(this.configOptions.submenuSize="auto"),this.hasRef)this.targetRowIndex=t,WebSquare.Elem.api.getElementsByTagName(this.xml,"w2:itemset")[0].setAttribute("nodeset",new Function("_this","return "+this.refStr)(this));this.configOptions._scope_obj_uuid=this.options._scope_obj_uuid,this.autoComplete=new WebSquare.uiplugin.autoComplete(this.mainGridId+"_autoComplete_"+t+"_"+this.colID+"_"+this.id,this.configOptions,this.xml),this.autoComplete.options.disabled=!1,this.comp=this.autoComplete,this.internal&&"gridViewItemset"!==this.options.itemTableType&&this.comp.setItemSet(this.initializeInfo.itemSet.nodeset,this.initializeInfo.itemSet.label,this.initializeInfo.itemSet.value);var e=this;this.autoComplete._handleClickEvent=this.autoComplete.handleClickEvent,this.autoComplete.handleClickEvent=function(t){this._handleClickEvent(t),u.f.stopEvent(t)},this.existGridViewItemsetNode?(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete._parentGridUUID=this.mainGrid.uuid,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),"down"==e.mainGrid.options.tabKeyMove?e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode):"none"==e.mainGrid.options.tabKeyMove||e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 27:e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){
e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit()}))}):(this.autoComplete._setSubLayer=this.autoComplete.setSubLayer,this.autoComplete.setSubLayer=function(t){this._setSubLayer(t);var i=this.itemTable;i.addKeyDownEventListener((function(t){switch(t.keyCode){case 9:this.fireClick(t),"down"==e.mainGrid.options.tabKeyMove?e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode):"none"==e.mainGrid.options.tabKeyMove||e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode);break;case 13:e.mainGrid.options.fastEditMode&&("none"==e.mainGrid.options.enterKeyMove||("right"==e.mainGrid.options.enterKeyMove?e.mainGrid.moveHorizontal(t,t.shiftKey?"left":"right",e.mainGrid.options.keyMoveEditMode):e.mainGrid.moveVertical(t,t.shiftKey?"up":"down",e.mainGrid.options.keyMoveEditMode)));break;case 27:e.handleCancelEdit(t)}})),i.addClickEventListener((function(t,i){e.autoComplete.dom.input.value=e.autoComplete.viewArr[i].label,e.autoComplete.selectedText=e.autoComplete.viewArr[i].orgLabel,e.autoComplete.selectedValue=e.autoComplete.viewArr[i].value;var o=e.autoComplete.selectedText+"|"+e.autoComplete.selectedValue;i=e.autoComplete.findinItemArr(o,"all");e.autoComplete.setSelectedIndex1(i),e.autoComplete.editmode=!1,e.handleEndEdit(),e.options.directOpen&&e.mainGrid._setFocusedCell()})),i.addMouseUpEventListener((function(t){e.mainGrid._setFocusedCell()})),e.mainGrid._moveKeyEdit(i.uuid,"keyDownFunc",{itemTable:!0})}),this.autoComplete.showEditMode=function(t){try{t?(this.dom.label.style.display="none",this.dom.label.style.visibility="hidden",this.dom.input.style.display="block",this.dom.input.style.visibility="visible"):(this.dom.input.style.display="none",this.dom.input.style.visibility="hidden",this.dom.label.style.display="block",this.dom.label.style.visibility="visible")}catch(t){s.Y.printStackTrace(t,null,this)}},this.autoComplete._inputKeyDown=this.autoComplete.inputKeyDown,this.autoComplete.inputKeyDown=function(t,i){27==t.keyCode||(e.autoComplete._inputKeyDown(t,i),13===t.keyCode&&e.options.directOpen&&(e.mainGrid._setFocusedCell(),u.f.stopPropagation(t)))},this.mainGrid._moveKeyEdit(this.autoComplete.uuid,"_inputKeyDown",{skipVertical:!0}),this.autoComplete.setSelectedIndex1=function(t){var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s=e.mainGrid.getColumnIndex(e.options.id),r=e.editRowIndex,a={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex,rowIndex:r,colIndex:s,colId:e.mainGrid.getColumnID(s)};u.f.fireEvent(e.mainGrid,"onviewchange",a)}this.closeSubLayer(),e.editTd&&e.handleEndEdit(),e.existGridViewItemsetNode&&e.options.directOpen&&e.mainGrid._setFocusedCell()},this.autoComplete._refreshItemset=this.autoComplete.refreshItemset,this.autoComplete.refreshItemset=function(t){"gridViewItemset"!==this.options.itemTableType&&(e.matchInfo=e.setMatchInfo()),this._refreshItemset(t)},this.autoComplete.options.handleOtherClick=!1}catch(t){s.Y.printStackTrace(t,null,this)}},O.autoComplete.prototype.setEditMode=function(t,e){try{var i=this.mainGrid._getWrapperCell(t,e);if(!0!==this._init?(this._createComponent(e),i.innerHTML=this.autoComplete.toHTML(),this.autoComplete.activate(),this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this._init=!0,this.options.placeholder&&this.autoComplete.dom.input.setAttribute("placeholder",this.options.placeholder)):(i.innerHTML="",this.mainGrid.cellMergeInfo&&this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),i.appendChild(this.autoComplete.render)),
this.autoComplete.setSize(t.clientWidth-2+"px",t.clientHeight-2+"px"),this.hasRef){var o=this.mainGrid.getElemRowIndex(t);this.autoComplete.itemArr=this.getRefItemArr(o)}if(this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.autoComplete.itemArr.length>0||this.autoComplete.allItemArr.length>0){var r=this.mainGrid.dataList._getCellData(e,this.colID);if(this.autoComplete.setValue(r),!0===this.autoComplete.options.disableEdit||!0===this.autoCompleteImageClicked){if(this.autoCompleteImageClicked&&this.options.directOpen)if(this.autoComplete.viewArr=[],this.existGridViewItemsetNode);else for(var a=0;a<this.autoComplete.itemArr.length;a++)this.autoComplete.viewArr.push({label:this.autoComplete.itemArr[a].label,value:this.autoComplete.itemArr[a].value,orgLabel:this.autoComplete.itemArr[a].orgLabel,index:a,_hidden:this.autoComplete.itemArr[a]._hidden});this.autoComplete.openSubLayer(),this.autoCompleteImageClicked=!1}else this.autoComplete.setInputFocus()}else this.autoComplete.options.disableEdit||this.autoComplete.setInputFocus(),this.autoComplete.dom.input.value="";0==this.autoComplete.getItemCount()&&(this.autoComplete.selectedIndex=-1,this.autoComplete.dom.label.innerHTML="")}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype.setColumnDisableEdit=function(t){try{this.options.disableEdit=!0,this.autoComplete&&this.autoComplete.disableEdit(t)}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype._handleEndEdit_common=function(t){try{this.autoComplete.endEdit({noEvent:!0}),this.autoComplete.closeSubLayer();var e=this.autoComplete.getValue();try{this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).removeChild(this.autoComplete.render)}catch(t){return}this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i={};i[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,i),this.options.directOpen&&(this.autoComplete.editmode=!1)}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.autoComplete.prototype._handleEndEdit_focus=function(t,e,i){!1===i&&this.mainGrid._setFocusedCell()},O.autoComplete.prototype._handleCancelEdit=function(t){this.autoComplete.closeSubLayer();var e=this.mainGrid.dataList._getCellData(this.mainGrid.getRealRowIndex(this.editRowIndex),this.colID);this.mainGrid._getWrapperCell(this.editTd,this.editRowIndex).removeChild(this.autoComplete.render),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid._setFocusedCell()},O.autoComplete.prototype._getEditedValue=function(t){return this.autoComplete.getValue()},O.autoComplete.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.calendar=function(){},O.calendar.prototype.initializeCellInfo=function(t){try{this.options.useIOFormatLength&&this.refreshDataArr(),this.internal&&!0===this.options.viewTypeIconImage&&(this.options.viewTypeIconImage="true")}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype.setInnerHTML=function(t,e,i,o,r){try{var n,l=this.mainGrid._getWrapperCell(t,i);if(this.options.embeddedInput){var h=this.mainGrid.getInput(this,t,e);h.render&&null==this.mainGrid._getWrapperTD(h.render.parentNode)&&(l.innerHTML="",l.appendChild(h.render));var d=0,c=0,p=!1;"none"==t.parentNode.style.display&&(t.parentNode.style.display="",p=!0),this.mainGrid.embeddedCalendarStyleObj||(this.mainGrid.embeddedCalendarStyleObj={top:parseInt(WebSquare.style.getStyle(t,"padding-top"),10),bottom:parseInt(WebSquare.style.getStyle(t,"padding-bottom"),10),left:parseInt(WebSquare.style.getStyle(t,"padding-left"),10),right:parseInt(WebSquare.style.getStyle(t,"padding-right"),10)}),d=t.getBoundingClientRect().height-parseFloat(WebSquare.style.getStyle(t,"border-top-width"))-parseFloat(WebSquare.style.getStyle(t,"border-bottom-width")),
d-=this.mainGrid.embeddedCalendarStyleObj.top+this.mainGrid.embeddedCalendarStyleObj.bottom,this.mainGrid.embeddedWidthObj[o]&&!this.mainGrid.embeddedWidthObj[o].isChanged||(this.mainGrid.embeddedWidthObj[o]={isChanged:!1,width:t.clientWidth}),c=this.mainGrid.embeddedWidthObj[o].width,c-=this.mainGrid.embeddedCalendarStyleObj.left+this.mainGrid.embeddedCalendarStyleObj.right,p?t.parentNode.style.display="none":a.Z.isIE("6 7")&&(d-=2);var g=a.Z.getDataPrefix("rowindex");h.setSize(c-2,d),h.render.setAttribute(g,i),h._setValue(e,{skipValidate:!0}),this.mainGrid.__getEditReadOnly(t,i)||this.mainGrid._getEditDisabled(i,o)?h.setDisabled(!0):h.setDisabled(!1),t.removeAttribute("tabIndex")}else{this.getEscape()&&(e=WebSquare.xml._encode(e+"")),this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType));var m=this.getDisplayData(e),f=this.mainGrid._dataList.filteredRowIndexArr[i],b=this.mainGrid.getCellOption(f,o,"viewType"),y=a.Z.getDataPrefix("rowIndex"),v=a.Z.getDataPrefix("colIndex"),w=a.Z.getDataPrefix("col_id");if("icon"==b&&"true"==this.options.viewTypeIconImage){l.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<td "+w+"='"+this.colID+"' "+y+"='"+i+"' "+v+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_table' style='width:90%; overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+m+this.mainGrid.dataTagClose,"</td>","<td "+w+"='"+this.colID+"' "+y+"='"+i+"'  "+v+"='"+o+"' class='"+this.mainGrid.options.bodyTdClass+"_calendar_img'>","<div class='"+this.mainGrid.options.bodyTdClass+"_calendar_div_img' />","</td>","</table>"].join("");var S=this,_=l.getElementsByTagName("div")[0];u.f.addListener(_,"onclick",(function(t){S.mainGrid._getEditDisabled(i,o)||S.mainGrid.___getEditReadOnly(i,o)||(S.calendarImageClicked=!0)}))}else{var C=a.Z.getDataPrefix("editModeEvent");l.innerHTML=this.mainGrid.dataTagOpen+m+this.mainGrid.dataTagClose,"icon"==b||""==b&&"own"==this.options.dataType?(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_calendar"),t.setAttribute(C,this.options.editModeEventIcon)):this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar")}}if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var x=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof x&&(this.mainGrid.options.titleFormatter=x,n=x.call(this,i,o,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,o,e)}catch(t){s.Y.printStackTrace(t,null,this)}var I=n||this.options.title||"";I&&t.setAttribute("title",I)}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;var i=this.mainGrid._getWrapperCell(t,e);if("true"==this.options.viewTypeIconImage){var o=i.getElementsByTagName("div")[0];this.mainGrid.removeClass(o,this.mainGrid.options.bodyTdClass+"_calendar_div_img")}else this.mainGrid.removeClass(t,this.mainGrid.options.bodyTdClass+"_calendar");this.editTd=t,this.editRowIndex=e,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var r=this.mainGrid.getInput(this);this.comp=r;for(var a=i.firstChild;null!=a;a=a.nextSibling)if("NOBR"==a.nodeName.toUpperCase()||"SPAN"==a.nodeName.toUpperCase()&&a.className.indexOf("w2grid_span")>-1){WebSquare.style.setStyle(a,"visibility","hidden");break}if(1==r.options.renderDiv||"true"==r.options.renderDiv){
var n=document.getElementById(this.mainGridId+this.id),l=t.offsetWidth-6,h=t.offsetHeight,d=document.getElementById(this.mainGridId+this.id+"_div_input"),c=l-18-5,u=h-3,p=document.getElementById(this.mainGridId+this.id+"_input"),g=c-(parseInt(WebSquare.style.getStyle(p,"border-right-width"),10)+parseInt(WebSquare.style.getStyle(p,"border-left-width"),10)+parseInt(WebSquare.style.getStyle(p,"padding-right"),10)+parseInt(WebSquare.style.getStyle(p,"padding-left"),10)),m=u-2,f=document.getElementById(this.mainGridId+this.id+"_img"),b=u/2-f.offsetHeight/2;if(1==this.options.useAnchor||"true"==this.options.useAnchor){var y=document.getElementById(this.mainGridId+this.id+"_a");WebSquare.style.setStyle(y,"top",b+"px")}else WebSquare.style.setStyle(f,"top",b+"px");WebSquare.style.setStyle(n,"width",Math.max(l,0)+"px"),WebSquare.style.setStyle(d,"width",Math.max(c,0)+"px"),WebSquare.style.setStyle(p,"width",Math.max(g,0)+"px"),WebSquare.style.setStyle(n,"height",Math.max(h-3,0)+"px"),WebSquare.style.setStyle(d,"height",Math.max(u,0)+"px"),WebSquare.style.setStyle(p,"height",Math.max(m,0)+"px")}var v=this.mainGrid.dataList._getCellData(e,this.colID);this.options.useMonthYearFormat&&(v=WebSquare.date.getIOFormatDate(v,this.options.ioFormat,this.options.calendarValueType)),r._setValue(v,{noFormat:!0,skipValidate:!0}),"icon"==this.options.viewType&&"true"==this.options.viewTypeIconImage&&1==this.calendarImageClicked?(this.calendarImageClicked=!1,r.toggle()):(r.focus(),"select"==r.options.editType&&r.select()),!0!==this.mainGrid._isBrowserScroll()&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0)}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};if(a.Z.isIE(8)?t={top:1,left:0,width:0,height:0}:a.Z.isFF()?t={top:0,left:-1,width:0,height:0}:a.Z.isChrome()||a.Z.isSafari()?t={top:1,left:0,width:0,height:0}:a.Z.isOpera()&&(t={top:1,left:0,width:0,height:1}),!0===this.mainGrid._isNativeScroll("both")){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}!0===this.mainGrid._isHybridScroll()&&(t.top-=this.mainGrid._getHybridVisibleTop());var i=this.editTd,o=i.offsetTop+t.top,r=i.offsetLeft+1+t.left,n=i.clientWidth-5+t.width,l=i.clientHeight-3+t.height,h=l-1;if(this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))r-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;var c=this.mainGrid.getInput(this);c.show(),c.render.style.top=o+"px",c.render.style.left=r+"px",c.render.style.width=n+"px",c.render.style.height=l+"px",c.render.firstChild.style.height=l+"px",c.dom.input.style.height=h+"px",c.dom.input.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign,a.Z.isIE()&&(c.dom.input.style.lineHeight=l+"px"),!0===this.mainGrid._isHybridScroll()&&this.mainGrid._adjustHybridEditedPosition(c.render.id,3)}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},O.calendar.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);e.hideCalendar();var i=e.getValue();i=e.validator.validateString(i),this.options.useIOFormatLength||(i=e.sub_validator.validateString(i)),this.options.useMonthYearFormat&&(i=WebSquare.date.getIOUnFormatDate(i,e.options.ioFormat,e.options.calendarValueType)),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};return o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){s.Y.printStackTrace(t,null,this)}},
O.calendar.prototype._handleEndEdit_focus=function(t,e){!0!==e&&t.hide()},O.calendar.prototype.validate=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue(),o=WebSquare.historyManager.get(e.options.pluginName,e.id);if(this.options.disableDateValidSet&&e.disableValidate(i))null!=o.value&&e._setValue(o.value,{skipValidate:!0}),this.mainGrid.getInput(this).blur();else{if(e.validate())return!0;if(""==i)return!0;if(this.options.dateValidSet&&(e._skipDateValidSet=!0),this.options.dateValidSet&&this.options.dateValidSetCustom)this.mainGrid.getInput(this).blur();else if(this.options.dateValidSet&&null!=o.value&&e._setValue(o.value,{skipValidate:!0}),this.mainGrid.getInput(this).blur(),"false"!==this.options.displaymessage){var r=WebSquare.language.getMessage("IC_invalidCalendarSelect")||"Invalid date format.";e.options.invalidMessageFunc||alert(r)}}return this.mainGrid.getInput(this).focus(),!1}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},O.calendar.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide()}catch(t){s.Y.printStackTrace(t,null,this)}},O.calendar.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.calendar.prototype.refreshDataArr=function(){try{var t;t=this.mainGrid.groupbyStatus.grouped?this.mainGrid.groupbyStatus.groupbyRowIndexArr:this.mainGrid._linkedDataList?this.mainGrid._linkedDataList.filteredRowIndexArr:this.mainGrid._dataList.filteredRowIndexArr;for(var e=this.mainGrid._dataList.cellIdList.length,i=this.mainGrid._dataList.bodyIdColIndexMap[this.id],o=this.mainGrid.getInput(this),r=0;r<t.length;r++){var a=t[r],n=this.mainGrid._dataList.dataArr[a*e+i],l=o.sub_validator.validateString(n);this.mainGrid._dataList.dataArr[a*e+i]=l}}catch(t){s.Y.printStackTrace(t,null,this)}},O.expression=function(){},O.expression.prototype.initializeCellInfo=function(){var t=this.options.expression;if(this.mainGrid.useExpression=!0,this.expIdArr=[],""!=t){var e=t.match(/(sum|avg|max|min|display|rowindex|rowstatus|datalist)[\s]*[(][\S\s]*?[)]/gi);if(null!=e){t="";for(var i=0;i<e.length;i++)t+=e[i],i<e.length-1&&(t+="+")}t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/[sS][uU][mM][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.getCalcExpressionTarget(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getExpressionTarget(")).replace(/rowStatus[\s]*[(]/gi,"_this.getExpressionTarget(")}try{new Function("_this",t)(this)}catch(t){s.Y.printStackTrace(t,null,this)}},O.expression.prototype.getExpressionTarget=function(){for(var t=0;t<arguments.length;t++)null==this.expIdArr[arguments[t]]&&(this.expIdArr[arguments[t]]=arguments[t],this.mainGrid.setExpressionAssociation(arguments[t],this.colID));return 1},O.expression.prototype.getCalcExpressionTarget=function(t){var e=t.wq_replaceAll("(",",").wq_replaceAll(")",",").wq_replaceAll("+",",").wq_replaceAll("-",",").wq_replaceAll("*",",").wq_replaceAll("/",",").wq_replaceAll("%",",").wq_replaceAll(" ","");e=e.split(",");for(var i=0;i<e.length;i++)""!==e[i]&&null==this.expIdArr[e[i]]&&(this.expIdArr[e[i]]=e[i],this.mainGrid.setExpressionAssociation(e[i],this.colID));return 1},O.expression.prototype.setInnerHTML=function(t,e,i,o,r){try{
var n,l=this.mainGrid._getWrapperCell(t,i),h=this.mainGrid.dataList.getRealRowIndex(i),d=this.mainGrid._getGroupbyDisplayRowIndex(i),c=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id),u=this.getDisplayData(null,h);"function"==typeof c?(this.useCustomFormatter=!0,n=c.call(this.mainGrid,e,u,d,o)):(this.useCustomFormatter=!1,n=u);var p=l.innerHTML.replace(/\r(\n)?/,"\n"),g=this.mainGrid.dataTagOpen+n+this.mainGrid.dataTagClose;p!==g&&(l.innerHTML=g.replace("NaN",this.options.NaNFormat),this.mainGrid.drawFooter(this.colID))}catch(t){s.Y.printStackTrace(t,null,this)}},O.expression.prototype.getDisplayData=function(t,e,i){return t=this.getExpressionValue(e),this.formatter&&!0!==i?this.formatter.format(t):t},O.expression.prototype.getExpressionValue=function(t){if(this.rowIndex=t,!this.options.expressionFunc){var e=this.options.expression;""!=e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"this.colsum(rowIndex,")).replace(/[aA][vV][gG][\s]*[(]/g,"this.colavg(rowIndex,")).replace(/[mM][aA][xX][\s]*[(]/g,"this.colmax(rowIndex,")).replace(/[mM][iI][nN][\s]*[(]/g,"this.colmin(rowIndex,")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"this.colcalc(rowIndex,")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"this.display(rowIndex,")).replace(/[dD][aA][tT][aA][lL][iI][sS][tT][\s]*[(]/g,"this.datalist(rowIndex,")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"this.getRowIndex(rowIndex")).replace(/rowStatus[\s]*[(]/gi,"this.rowStatus(rowIndex"),e=a.Z.scopingFuncBody(e,this.scope_id)),this.options.expressionFunc=Function("rowIndex",e),this.options.expressionFunc.changeCount=0}var i=this.mainGrid.changeCount,o="";return this.options.expressionFunc[t]&&i==this.options.expressionFunc[t].changeCount?o=this.options.expressionFunc[t].oldValue:(this.options.expressionFunc[t]||(this.options.expressionFunc[t]={}),this.options.expressionFunc[t].changeCount=i,o=this.options.expressionFunc.call(this,t),this.options.expressionFunc[t].oldValue=o),o},O.expression.prototype.colsum=function(){for(var t=arguments[0],e=0,i=1;i<arguments.length;i++){var o=this.mainGrid.getColumnIndex(arguments[i]),s=this.options.dataType;"gridView"==this.mainGrid.options.pluginName&&(s=this.mainGrid._dataList.getCellInfo(this.options.col_id).options.dataType),"bigDecimal"===s?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,o)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,o))||0}return e},O.expression.prototype.colavg=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);"bigDecimal"===i?e=WebSquare.bigDecimal(e).plus(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0:e+=parseFloat(this.mainGrid.dataList._getData(t,s))||0}return"bigDecimal"===i?e=WebSquare.bigDecimal(e).divide(WebSquare.bigDecimal(arguments.length-1)).toString():e/=arguments.length-1,e},O.expression.prototype.colmax=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)))||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;r>e&&(e=r)}}return e},O.expression.prototype.colmin=function(){for(var t=arguments[0],e=0,i=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),o=1;o<arguments.length;o++){var s=this.mainGrid.getColumnIndex(arguments[o]);if("bigDecimal"===i)e="0"===WebSquare.bigDecimal(e).toString()?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)):WebSquare.bigDecimal(e),e=WebSquare.bigDecimal(e).compare(WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,s)),!0)||0;else{var r=parseFloat(this.mainGrid.dataList._getData(t,s))||0;(1==o||r<e)&&(e=r)}}return e},O.expression.prototype.colcalc=function(t,e){function i(t,e){t[t.length]=e}
function o(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function r(t){return!a(t)&&"("!=t&&")"!=t}function a(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function n(t){return t[t.length-1]}function l(t){return 0==t.length}function h(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){s.Y.printStackTrace(t)}}var c=function(t,e,s){e=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i="",o=new Array,s=0,n=0;n<e.length;n++)r(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(a(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[s]=i,s++),i="",o[s]=e[n],s++),n==e.length-1&&""!=i&&(o[s]=i);return o}(t);for(var u=0;u<t.length;u++){if(r(t[u])&&(e[c]=t[u],c++),a(t[u])){if("^"!=t[u])for(;!l(d)&&h(t[u])<=h(n(d));)e[c]=n(d),o(d),c++;else for(;!l(d)&&h(t[u])<h(n(d));)e[c]=n(d),o(d),c++;i(d,t[u])}if("("==t[u]&&i(d,t[u]),")"==t[u]){for(;"("!=n(d);)e[c]=o(d),c++;o(d)}}for(;!l(d);)"("==n(d)?o(d):e[e.length]=o(d);var p="";for(u=0;u<e.length;u++)p+=e[u];return 0==s?p:e}(e);for(var u in c){var p=this.mainGrid.getColumnIndex(c[u]);c[u]=null!=p?WebSquare.bigDecimal(this.mainGrid.dataList._getData(t,p)):c[u]}return function(t){for(var e,s,a=new Array,l=0;l<t.length;l++)if(r(t[l]))i(a,t[l]);else{(e=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(e=WebSquare.bigDecimal(e)),o(a),(s=new Function("return "+n(a))()).constructor!=WebSquare.bigDecimalObj&&(s=WebSquare.bigDecimal(s));var h=d(s,e,t[l]);o(a),i(a,h)}return n(a)}(c)},O.expression.prototype.display=function(){var t=arguments[0],e=this.mainGrid.getColumnIndex(arguments[1]);return this.mainGrid.dataList._getData(t,e)},O.expression.prototype.datalist=function(t,e){return e=this.mainGrid._dataList.getColumnIndex(e),this.mainGrid._dataList._getCellData(t,e,!0)},O.expression.prototype.getRowIndex=function(){var t=arguments[0];return this.mainGrid.getDisplayRowIndex(t)},O.expression.prototype.rowStatus=function(){var t=arguments[0];switch(this.mainGrid.dataList.getRowStatusValue(t)){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},O.textarea=function(){},O.textarea.prototype.initializeCellInfo=function(t){try{if(t){var e=t.getAttribute("showReadOnly");if(e)this.options.showReadOnly=a.Z.getBoolean(e);else{var i=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+'/column[@inputType="textarea"]/showReadOnly/@value')||"true";this.options.showReadOnly=a.Z.getBoolean(i)}}}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype.setInnerHTML=function(t,e,i,o,r){try{var n,l=this.mainGrid._getWrapperCell(t,i);if(this.options.embeddedInput){var h=this.mainGrid.getInput(this,t);h.show(),l.innerHTML="",l.appendChild(h.render);var d=a.Z.getDataPrefix("rowindex");h.render.setAttribute(d,i),h.render.style.top="0",h.render.style.left="0",h.render.style.width="100%",h.render.style.height="100%",h.render.style.imeMode=this.options.imeMode,this.options.placeholder&&(h.render.placeholder=this.options.placeholder),h.setValue(this.mainGrid.dataList._getCellData(i,this.id)),this.mainGrid._getEditDisabled(i,o)?h.setDisabled(!0):h.setDisabled(!1),this.mainGrid.__getEditReadOnly(t,i)?h.setReadOnly(!0):h.setReadOnly(!1)}else{var c;!0!==this.mainGrid._isBrowserScroll()?(c=t.clientWidth-8)<0&&(c=this.mainGrid.getColumnWidth(o,!0)-8):c=this.mainGrid.getColumnWidth(o,!0);var u=c>=0?" width:"+c+"px; ":" ",p=this.getDisplayData(e),g=this.mainGrid._getGroupbyDisplayRowIndex(i),m=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id),f=p,b=this.options.textAlign?"text-align:"+this.options.textAlign+";":"",y="pre-wrap";a.Z.isIEAllVersion("6 7")&&(y="normal");var v="all"===this.options.displayType?"word-break:break-all;white-space:"+y+";":"";"function"==typeof m?(this.useCustomFormatter=!0,
f=m.call(this.mainGrid,e,p,g,o)):this.useCustomFormatter=!1,l.innerHTML="<div class='w2grid_textarea' style='"+b+u+v+"' >"+(this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(f+"")):this.getDisplayData(f))+"</div>"}if(this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var w=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof w&&(this.mainGrid.options.titleFormatter=w,n=w.call(this,i,o,e))}else n=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",n)}catch(t){s.Y.printStackTrace(t,null,this)}if("all"===this.options.displayType&&"all"===this.mainGrid.options.visibleRowNum&&!0!==this.mainGrid._isBrowserScroll()&&this.mainGrid.getRowCount()>0){var S=this.mainGrid.getElementById(this.mainGrid.id+"_body_table"),_=this.mainGrid.getElementById(this.mainGrid.id+"_foot_table"),C=S.offsetHeight;_&&(C+=_.offsetHeight),this.mainGrid.render.offsetHeight!=C&&this.mainGrid.setSize(null,C)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype.setEditMode=function(t,e){try{if(this.options.embeddedInput)return;this._setEditMode(t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype._setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);if(i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),!this.options.disabled){var o=document.getElementById(this.mainGrid.id+"_dataLayer");t.offsetHeight>=o.offsetHeight?i.render.focus({preventScroll:!0}):i.focus()}!0!==this.mainGrid._isBrowserScroll()&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),this.options.disabled||"select"!=this.options.editType&&"select"!=this.mainGrid.options.editType||i.select()}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0};a.Z.isIE(8)?t={top:-1,left:-1,width:0,height:0}:a.Z.isFF()?t={top:-2,left:0,width:0,height:0}:a.Z.isOpera()?t={top:0,left:0,width:0,height:1}:a.Z.isChrome()&&(t={top:0,left:0,width:0,height:0});var e=this.editTd;if(!0===this.mainGrid._isNativeScroll("both")){var i=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=i.scrollTop,t.left-=i.scrollLeft}!0===this.mainGrid._isHybridScroll()&&(t.top-=this.mainGrid._getHybridVisibleTop());var o=e.offsetTop+1+t.top,r=e.offsetLeft+1+t.left,n=e.clientWidth>150?e.clientWidth-5+t.width:150,l=e.clientHeight>60?e.clientHeight-2+t.height:60;if(this.mainGrid.options.groupbyZone){var h=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(h=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=h}if(this.mainGrid.gridWidth<r+n){var d=(e.clientWidth>150?0:5+t.width)-2;r=e.offsetLeft-n+e.clientWidth-d}var c=this.mainGrid.scrollX_right;if(!0!==this.mainGrid._isBrowserScroll()&&this.mainGrid.render.offsetHeight-c.offsetHeight<o+l){var u=e.clientHeight>60?0:2-t.top;(o-=o+l-(e.offsetTop+e.clientHeight)+u)<0&&(o=1+t.top),l>this.mainGrid.render.offsetHeight&&(l=this.mainGrid.render.offsetHeight-6+t.height)}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))r-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft;r=r<0?0:r,o=o<0?0:o;var p=document.getElementById(this.mainGrid.id+"_scrollY_div");this.mainGrid.render.offsetWidth-p.offsetWidth<r+n&&(r=this.mainGrid.render.offsetWidth-p.offsetWidth-n-3);var g=this.mainGrid.getInput(this);if(this.comp=g,g.show(),g.render.style.top=o+"px",g.render.style.left=r+"px",g.render.style.width=n+"px",g.render.style.height=l+"px",g.render.style.imeMode=this.options.imeMode,
(!0===this.mainGrid._isHybridScroll()||!0===this.mainGrid._isNativeScroll())&&(this.mainGrid._adjustHybridEditedPosition(g.render.id,3),"all"===this.options.displayType)){var m=document.getElementById(this.mainGrid.id+"_head_table"),f=document.getElementById(this.mainGrid.id+"_scrollX_div");g.render.style.overflowY="auto",g.render.style.maxHeight=this.mainGrid.render.offsetHeight-m.offsetHeight-f.offsetHeight-3+"px"}}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},O.textarea.prototype.showReadonly=function(t,e){this.mainGrid._endEdit();var i=this.mainGrid.getInput(this),o=a.Z.getDataPrefix("col_id"),s=t.getAttribute(o);(this.options.disabled||this.mainGrid._getEditDisabled(e,s))&&i.setDisabled(!0),(this.options.readOnly||this.mainGrid.___getEditReadOnly(e,s))&&i.setReadOnly(!0),this._setEditMode(t,e),this.mainGrid.editedCell=this},O.textarea.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue();"number"==this.mainGrid.getColumnOption(this.options.col_id,"dataType")&&""!=i&&(i=Number(i));var o=this.editTd.offsetHeight;this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var r=this.editTd.offsetHeight;this.changedCellHeight=r-o;var a={};return a[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,a),e}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype._handleEndEdit_focus=function(t){t.hide(),t.setDisabled(!1),t.setReadOnly(!1)},O.textarea.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},O.textarea.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getInput(this);i.hide(),i.setDisabled(!1),i.setReadOnly(!1)}catch(t){s.Y.printStackTrace(t,null,this)}},O.textarea.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.drilldown=function(){},O.drilldown.prototype.setInnerHTML=function(t,e,i){var o=i,s=100,r=this.options.depthColumn;if("linkedDataList"===this.mode){if(null!=this.mainGrid._linkedDataList.filteredRowIndexArr&&this.mainGrid._linkedDataList.filteredRowIndexArr.length>0){o=this.mainGrid._linkedDataList.filteredRowIndexArr[i];var n=this.mainGrid._linkedDataList.filteredRowIndexArr.length-1;s=o<this.mainGrid._linkedDataList.filteredRowIndexArr[n]?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null}}else null!=this.mainGrid._dataList.filteredRowIndexArr&&this.mainGrid._dataList.filteredRowIndexArr.length>0&&(s=(o=this.mainGrid.dataList.getRealRowIndex(i))<this.mainGrid.dataList.getRealRowIndex(this.mainGrid.getDataLength()-1)?parseInt(this.mainGrid.dataList._getCellData(i+1,r),10):null);for(var l=parseInt(this.mainGrid.dataList._getCellData(i,r),10),h="",d=o,c=1;c<l;c++)"div"==this.options.depthType?h+="<div class='w2grid_depthBlank'></div>":"line"==this.options.depthType?(h="<div class='w2grid_depth"+(1===c?this.mainGrid.drilldown.isLastChild(d)?"_line_L":"_line_T":this.mainGrid.drilldown.isLastChild(d)?"Blank":"_line_I")+"'></div>"+h,d=this.mainGrid.drilldown.getParentRowIndex(d)):"none"==this.options.depthType?h+="":h+="&nbsp;&nbsp;";var u=0,p="w2grid_plus";null!=s&&l<s?(u=1,p="w2grid_minus"):this.mainGrid.hasChild(i)||(u=2,p="w2grid_leaf"),1==l&&(p+=" w2grid_root");var g="",m=a.Z.getDataPrefix("openStatus");g=a.Z.isMobile()?"<span class='"+p+"' style='display:inline-block;' "+m+"='"+u+"' ontouchstart='this.clicked=true'></span>":"<span class='"+p+"' style='display:inline-block;' "+m+"='"+u+"' onclick='this.clicked=true'></span>";var f="<div class='w2grid_depthBlank";"1"==l&&(f+=" w2grid_depthBlank_root"),2===u&&(f+=" w2grid_depthBlank_leaf"),f+="'>"
;var b=this.options.escape+""=="true"?this.getDisplayData(WebSquare.xml._encode(e+"")):this.getDisplayData(e),y="";"span"==this.mainGrid.options.dataTag&&(y=" w2grid_span"),"div"==this.options.depthType?(g=f+g+"</div>",t.innerHTML="<"+this.mainGrid.options.dataTag+" class='w2grid_drilldown_nobr"+y+"'>"+h+g+b+this.mainGrid.dataTagClose):"line"==this.options.depthType?(g=f+g+"</div>",t.innerHTML=h+g+"<"+this.mainGrid.options.dataTag+" class='w2grid_drilldown_nobr"+y+"'>"+b+this.mainGrid.dataTagClose):(this.options.depthType,t.innerHTML=this.mainGrid.dataTagOpen+h+g+b+this.mainGrid.dataTagClose)},O.drilldown.prototype.handleClick=function(t,e){for(var i,o=t.getElementsByTagName("span"),s=0;s<o.length;s++)if(-1==o[s].className.indexOf("w2grid_span")){i=o[s];break}if(1==i.clicked){i.clicked=!1;var r=a.Z.getDataPrefix("openStatus");if("2"!=i.getAttribute(r)){if(!1===u.f.fireEvent(this.mainGrid,"onbeforetoggleclick",e))return!1;this.mainGrid._toggle(e,!0)}return!0}return!1},O.drilldown.prototype.setEditMode=function(t,e){try{this.editRowIndex=e,this.editTd=t,this.setPosition();var i=this.mainGrid.getInput(this);i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat,i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),document.activeElement!=i.render&&i.focus(),!0!==this.mainGrid._isBrowserScroll()&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType&&i.select()}catch(t){s.Y.printStackTrace(t,null,this)}},O.drilldown.prototype.setPosition=function(){var t={top:0,left:0,width:0,height:0};if(a.Z.isFF()?t={top:-1,left:-1,width:0,height:0}:a.Z.isOpera()?t={top:0,left:0,width:0,height:1}:a.Z.isIE(9)&&(t={top:-1,left:-1,width:0,height:0}),!0===this.mainGrid._isNativeScroll("both")){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}!0===this.mainGrid._isHybridScroll()&&(t.top-=this.mainGrid._getHybridVisibleTop());var i=this.editTd,o=i.offsetTop+1+t.top,s=i.offsetLeft+1+t.left,r=i.clientWidth-6+t.width,n=i.clientHeight-2+t.height,l=this.mainGrid.getInput(this);if(""!=this.options.imeMode)l.render.style.imeMode=this.options.imeMode;else{var h=this.mainGrid.getColumnOption(this.options.col_id,"dataType");l.render.style.imeMode="number"==h?"disabled":""}if(l.show(),this.mainGrid.options.groupbyZone){var d=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(d=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),o+=d}l.render.style.top=o+"px",l.render.style.left=s+"px",l.render.style.width=r+"px",l.render.style.height=n+"px",a.Z.isIE()&&(l.render.style.lineHeight=n+"px"),l.render.style.textAlign=""==i.style.textAlign?"center":i.style.textAlign,!0===this.mainGrid._isHybridScroll()&&this.mainGrid._adjustHybridEditedPosition(l.render.id,3)},O.drilldown.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},O.drilldown.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this);return this.setEditData(e),e}catch(t){s.Y.printStackTrace(t,null,this)}},O.drilldown.prototype._handleEndEdit_focus=function(t,e){!this.mainGrid.isMobile&&e||t.hide()},O.drilldown.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},O.drilldown.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID)),this.mainGrid.getInput(this).hide()}catch(t){s.Y.printStackTrace(t,null,this)}},O.drilldown.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.drilldown.prototype.setEditData=function(t){try{var e=t.getValue();e=t.validator.validateString(e),t.setValueNM(e,!0),
this.setInnerHTML(this.editTd,e,this.editRowIndex,this.getColumnIndex(this.colID));var i=this.mainGrid.getColumnOption(this.options.col_id,"dataType");this.mainGrid.options.numberCasting&&"number"==i&&""!=e&&(e=Number(e));var o={};o[this.mainGrid.id]=!0,this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e,null,null,null,o)}catch(t){s.Y.printStackTrace(t,null,this)}},O.textImage=function(){},O.textImage.prototype.setInnerHTML=function(t,e,i,o,r){try{var n=this.mainGrid._getGroupbyDisplayRowIndex(i),l=this.mainGrid._getWrapperCell(t,i),h=a.Z.getDataPrefix("col_id"),d=a.Z.getDataPrefix("rowindex"),c=this.options.imageSrc?this.mainGrid.getImageURL(this.options.imageSrc):"",p=!1,g=!1;this.mainGrid._getEditDisabled(i,o)?(p=!0,this.options.imageSrcDisabled&&(c=this.mainGrid.getImageURL(this.options.imageSrcDisabled))):this.mainGrid.___getEditReadOnly(i,o)&&(g=!0,this.options.imageSrcReadOnly&&(c=this.mainGrid.getImageURL(this.options.imageSrcReadOnly)));var m=this.options.imageAlign?this.options.imageAlign:"right";if(!this.options.embeddedInput||this.mainGrid._getEditDisabled(i,o)||this.mainGrid.___getEditReadOnly(i,o)||this.mainGrid.groupbyStatus.grouped){var f=this.mainGrid.getElemRowIndex(t),b=this.mainGrid.dataList.getRealRowIndex(f),y=this.mainGrid.getColumnIndex(this.colID),v=this.mainGrid.getCellOption(b,y,"viewType"),w=(this.mainGrid.getColumnID(o),e),S=(G=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id),a.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id));"function"==typeof S&&(w=S.call(this.mainGrid,e,n,o)),this.getEscape()&&(w=WebSquare.xml._encode(w+""));var _;Z=this.getDisplayData(w);if("function"==typeof G?(this.useCustomFormatter=!0,X=G.call(this.mainGrid,e,Z,n,o)):(this.useCustomFormatter=!1,X=Z),this.mainGrid.options.titleFormatter)try{if("function"!=typeof this.mainGrid.options.titleFormatter){var C=a.Z.getGlobalFunction(this.mainGrid.options.titleFormatter,this.scope_id);"function"==typeof C&&(this.mainGrid.options.titleFormatter=C,_=C.call(this,i,o,e))}else _=this.mainGrid.options.titleFormatter.call(this,i,o,e);t.setAttribute("title",_)}catch(t){s.Y.printStackTrace(t,null,this)}if("icon"==v||""==v&&"own"==this.options.dataType||r&&!0===r.visibleIcon){var x="";try{this.options.onerror&&(x=' onerror="('+this.options.onerror+').call(this,event);" ')}catch(t){s.Y.printStackTrace(t,null,this)}var I="w2grid_textImage_image";"div"===this.options.textImageRenderType&&(I="w2grid_textImage_button"),p?I+=" w2grid_textImage_disabled":g&&(I+=" w2grid_textImage_readonly");var T=a.Z.getDataPrefix("tdIndex"),k=a.Z.getDataPrefix("rowIndex"),L=a.Z.getDataPrefix("colIndex"),A=t.getAttribute(T);t.removeAttribute("alt");var D="";if(""!=this.options.alt&&(D=" alt='"+this.options.alt+"' "),"div"===this.options.textImageRenderType){O=""!=this.options.imageWidth?" width:"+parseInt(this.options.imageWidth)+"px;":"",B="<div class='w2grid_textImage_div' "+h+"='"+this.colID+"' "+k+"='"+i+"'  "+L+"='"+o+"'>",P="<div class='w2grid_textImage_div_input'>"+this.mainGrid.dataTagOpen+X+this.mainGrid.dataTagClose,Y="<button type='button' class='"+I+"' style='background-image:url("+c+"); "+O+"'></button>",V="</div>";N="left"===m?[B,Y,P,V,V]:[B,P,V,Y,V],l.innerHTML=N.join("")}else{l.innerHTML=["<table style='border-collapse:collapse; border-spacing:0px; width:100%; table-layout:fixed;'>","<tr class='bodyTextImageAlign'>","</tr>","</table>"].join("");var W=l.querySelector(".bodyTextImageAlign")
;"left"===m?W.innerHTML=["<td "+h+"='"+this.colID+"' "+k+"='"+i+"'  "+L+"='"+o+"' class='"+I+"' style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'>","<img src='"+c+"' "+x+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'"+D+" />","</td>","<td "+h+"='"+this.colID+"' "+k+"='"+i+"' "+L+"='"+o+"' tdIndex='"+A+"' class='w2grid_textImage' style='overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+X+this.mainGrid.dataTagClose,"</td>"].join(""):"right"===m&&(W.innerHTML=["<td "+h+"='"+this.colID+"' "+k+"='"+i+"' "+L+"='"+o+"' tdIndex='"+A+"' class='w2grid_textImage' style='overflow:hidden; text-overflow:ellipsis;'>",this.mainGrid.dataTagOpen+X+this.mainGrid.dataTagClose,"</td>","<td "+h+"='"+this.colID+"' "+k+"='"+i+"'  "+L+"='"+o+"' class='"+I+"' style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'>","<img src='"+c+"' "+x+"style='",""!=this.options.imageWidth?"width:"+parseInt(this.options.imageWidth)+"px;":"",""!=this.options.imageHeight?"height:"+parseInt(this.options.imageHeight)+"px;":"","'"+D+" />","</td>"].join(""))}var q=this,M="div"===this.options.textImageRenderType?l.getElementsByTagName("button")[0]:l.getElementsByTagName("img")[0],E=a.Z.getGlobalFunction(this.options.imageClickFunction,this.scope_id);p||g||"function"!=typeof E||(M.style.cursor="pointer");var R=this.options.imageClickEvent?this.options.imageClickEvent:"onclick";"onclick"!==R&&"ondblclick"!==R&&(R="onclick"),u.f.addListener(M,R,(function(t){u.f.stopPropagation(t);var s=q.mainGrid._getEditDisabled(i,o);if(q.options.useImageClick||0==s){var r="";if(q.mainGrid.editedCell){var a=q.mainGrid._getGroupbyDisplayRowIndex(q.mainGrid.editedCell.editRowIndex),l=q.mainGrid.editedCell.colID,h=q.mainGrid._dataList.getCellData(a,l);q.mainGrid.editedCell.handleEndEdit();var d=q.mainGrid._dataList.getCellData(a,l),c=q.mainGrid.getColumnIndex(l);d!=h&&u.f.fireEvent(q.mainGrid,"onviewchange",{oldValue:h,newValue:d,rowIndex:a,colIndex:c,colId:q.mainGrid.getColumnID(c)}),r=q.getDisplayData(d)}else r=q.getDisplayData(e);u.f.fireEvent(q.mainGrid,"ontextimageclick",i,o),q.mainGrid._setFocusedCell(i,o),"function"==typeof E&&(M.style.cursor="pointer",q.options.displayRowIndex?E.call(q.mainGrid,n,q.colID,r):E.call(q.mainGrid,b,q.colID,r))}}))}else l.innerHTML=this.mainGrid.dataTagOpen+X+this.mainGrid.dataTagClose}else{if(!l.getElementsByClassName("w2grid_textImage_div_input")[0]){var N,F=this.mainGrid.id+"_textImage_"+i+"_"+o,O=""!=this.options.imageWidth?" width:"+parseInt(this.options.imageWidth)+"px;":"",B="<div class='w2grid_textImage_div' "+h+"='"+this.colID+"' "+k+"='"+i+"'  "+L+"='"+o+"'>",P="<div class='w2grid_textImage_div_input'>",Y="<button type='button' class='w2grid_textImage_button' style='background-image:url("+c+"); "+O+"'></button>",V="</div>";N="left"===m?[B,Y,P,V,V]:[B,P,V,Y,V],l.innerHTML=N.join("")}var H=this.mainGrid.getInput(this,t,e,{id:F});this.mainGrid._getWrapperTD(H.render.parentNode),H.blur(),H.render.setAttribute(d,i);var j=!1;if(this.mainGrid.options.autoResizeEmbeddedInput){var z=!1;this.mainGrid.__bResizeObj?(z=this.mainGrid.__bResizeObj.width!==this.mainGrid.resizeObj.width||this.mainGrid.__bResizeObj.height!==this.mainGrid.resizeObj.height,this.mainGrid.__bResizeObj.width=this.mainGrid.resizeObj.width,this.mainGrid.__bResizeObj.height=this.mainGrid.resizeObj.height):this.mainGrid.__bResizeObj={width:this.mainGrid.resizeObj.width,height:this.mainGrid.resizeObj.height},j=!0!==H._autoResizeEmbeddedInput&&!1===z||this.mainGrid.__bResizeObj.isColumnResizing}!0===j||null==this.mainGrid._getWrapperTD(H.render.parentNode)&&(l.innerHTML="",l.appendChild(H.render)),
"all"==this.options.applyFormat||this.options.displayFormat||this.options.displayFormatter||(e=this.getDisplayData(e));var G=null;if(this.options.customFormatter)try{"function"==typeof this.options.customFormatter?G=this.options.customFormatter:"function"==typeof(G=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=G)}catch(t){G=null}var Z=e,U=this.options.displayFormat||this.options.displayFormatter||this.options.ioFormat;if(this.formatter&&U&&(Z=this.formatter.format(Z)),H.setValue(e),"function"==typeof G){this.useCustomFormatter=!0;var X=G.call(this.mainGrid,e,Z,n,o);H.render.value=X}this.options.textAlign?H.setStyle("text-align",this.options.textAlign):H.setStyle("text-align",""),t.removeAttribute("tabIndex"),t.removeAttribute("title")}}catch(t){s.Y.printStackTrace(t,null,this)}},O.textImage.prototype.setEditMode=function(t,e){try{try{this.options.onerror&&' onerror="('+this.options.onerror+').call(this,event);" '}catch(t){s.Y.printStackTrace(t,null,this)}if(this.editRowIndex=e,this.editTd=t,"icon"!=this.options.viewType&&(""!=this.options.viewType||"own"!=this.options.dataType)){this.setInnerHTML(this.editTd,null,this.editRowIndex,this.getColumnIndex(this.colID),{visibleIcon:!0})}this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.setPosition();var i=this.mainGrid.getInput(this);this.comp=i,i.formatter="all"==this.options.applyFormat?this.formatter:this.emptyFormatter,i.options.applyFormat=this.options.applyFormat,i.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),i.focus(),!0!==this.mainGrid._isBrowserScroll()&&(this.mainGrid.render.scrollLeft=0,this.mainGrid.render.scrollTop=0),"select"==i.options.editType?i.select():"focus"==i.options.editType&&(a.Z.isIE()||a.Z.isFF())&&WebSquare.text.setCaretPos(i.render,i.render.value.length)}catch(t){s.Y.printStackTrace(t,null,this)}},O.textImage.prototype.setPosition=function(){try{var t={top:0,left:0,width:0,height:0,tdWidth:0};if(a.Z.isFF()?t={top:-1,left:-1,width:0,height:0,tdWidth:0}:a.Z.isOpera()&&(t={top:0,left:0,width:0,height:1,tdWidth:0}),!0===this.mainGrid._isNativeScroll("both")){var e=document.getElementById(this.mainGrid.id+"_dataLayer");t.top-=e.scrollTop,t.left-=e.scrollLeft}!0===this.mainGrid._isHybridScroll()&&(t.top-=this.mainGrid._getHybridVisibleTop());var i,o,r=this.editTd,n=this.options.imageAlign?this.options.imageAlign:"right";"div"===this.options.textImageRenderType?o=(i=r.getElementsByTagName("button"))[0]:(i=r.getElementsByTagName("td"),o="right"===n?i[1].firstChild:i[0].firstChild);var l=r.clientWidth-o.offsetWidth-1+t.tdWidth,h=r.offsetTop+1+t.top,d=r.offsetLeft+1+t.left+("right"===n?0:o.offsetWidth),c=r.clientWidth-o.offsetWidth-6+t.width,u=r.clientHeight-2+t.height;if(this.mainGrid.options.groupbyZone){var p=this.mainGrid.groupbyZoneStatus.groupbyZoneRender.offsetHeight;this.mainGrid.options.groupbyFilterBox&&"top"===this.mainGrid.options.groupbyFilterBoxLocation&&(p=parseInt(this.mainGrid.options.groupbyZoneHeight,10)+document.getElementById(this.mainGrid.id+"_groupbyFilterBox_div").offsetHeight),h+=p}if("div"!==this.options.textImageRenderType)("right"===n?i[0]:i[1]).style.width=l+"px";var g=this.mainGrid.getInput(this);if(""!=this.options.imeMode)g.render.style.imeMode=this.options.imeMode;else{var m=this.mainGrid.getColumnOption(this.options.col_id,"dataType");g.render.style.imeMode="number"==m?"disabled":""}if(this.mainGrid.hasClass("w2grid_adaptive_crosstab"))h-=document.getElementById(this.mainGrid.id+"_body_tbody").scrollLeft,g.render.style.lineHeight=u+"px";g.show(),g.render.style.top=h+"px",g.render.style.left=d+"px",g.render.style.width=c+"px",g.render.style.height=u+"px",g.render.style.lineHeight=u+"px",g.render.style.textAlign=""==r.style.textAlign?"center":r.style.textAlign,!0===this.mainGrid._isHybridScroll()&&this.mainGrid._adjustHybridEditedPosition(g.render.id,3)}catch(t){s.Y.printStackTrace(t,null,this)}},
O.textImage.prototype.removeCellData=function(t,e){this.mainGrid.dataList.__setCellData(t,e,"")},O.textImage.prototype._handleEndEdit_common=function(t){try{var e=this.mainGrid.getInput(this),i=e.getValue();i=e.validator.validateString(i),this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID));var o={};o[this.mainGrid.id]=!0;var r=a.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);if("function"==typeof r){this.useCustomModelFormatter=!0;var n=this.getDisplayData(i);i=r.call(this.mainGrid,i,n,this.editRowIndex,this.getColumnIndex(this.colID))}else this.useCustomModelFormatter=!1;return this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,i,null,null,null,o),e}catch(t){s.Y.printStackTrace(t,null,this)}},O.textImage.prototype._handleEndEdit_focus=function(t){t.setDisabled(!1),t.setReadOnly(!1),t.hide()},O.textImage.prototype._getEditedValue=function(t){return this.mainGrid.getInput(this).getValue()},O.textImage.prototype._handleCancelEdit=function(t){try{var e=this.mainGrid.getInput(this),i=this.mainGrid.dataList._getCellData(this.editRowIndex,this.colID);this.setInnerHTML(this.editTd,i,this.editRowIndex,this.getColumnIndex(this.colID)),e.hide()}catch(t){s.Y.printStackTrace(t,null,this)}},O.textImage.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.textImage.prototype.showReadonly=function(t,e){this.setEditMode(t,e);var i=this.mainGrid.getInput(this);i.setDisabled(!0),i.setReadOnly(!0),this.mainGrid.editedCell=this},O.prototype.setDataListCellRefresh=function(t){try{if(t){this.initFormatter(t);var e=this.options.dataType;e||(e=this.mainGrid._dataList.getColumnOption(this.options.col_id,"dataType")),"date"!=e||this.options.displayFormat||(this.options.displayFormat=r.I.getConfiguration("/WebSquare/"+this.mainGrid.options.pluginName+"/dataType/date/@displayFormat")),"time"!=e||this.options.displayFormat||(this.options.displayFormat="HH:mm");var i=!this.options.groupName||!this.options.groupValue,o=this.options.inputType;if(i&&("button"!=o&&"image"!=o)){var a=this.mainGrid._dataList.getCellInfo(this.colID),n=!(!a||!a.element&&a.id!==this.id);this.options.readOnly=!n||t.getAttribute("readOnly")}}}catch(t){s.Y.printStackTrace(t,null,this)}},O.spinner=function(){},O.spinner.prototype.initializeCellInfo=function(t){try{if(!this.xml)if("json"===t._elementType)t._element.N="w2:"+this.options.inputType,this.xml=t;else{var e="",i=(e=a.Z.isIE("6 7")&&this.internal?WebSquare.xml.nodeWellFormed(t.outerHTML):WebSquare.xml.serialize(t)).indexOf("xmlns:w2")<0?' xmlns:w2="http://www.inswave.com/websquare"':"";e=(e=e.wq_replaceAll("<w2:column","<w2:spinner"+i)).wq_replaceAll("</w2:column","</w2:spinner");var o=WebSquare.xml.parse(e,!0);this.xml=o.documentElement}}catch(t){s.Y.printStackTrace(t,null,this)}},O.spinner.prototype.setInnerHTML=function(t,e,i,o,s){null==e&&(e="");var r=this.mainGrid._getWrapperCell(t,i);this.spinner&&this.spinner.render&&r.firstChild==this.spinner.render&&r.removeChild(this.spinner.render),r.innerHTML=this.mainGrid.dataTagOpen+this.getDisplayData(e,i)+this.mainGrid.dataTagClose;var n=this.mainGrid.dataList.getRealRowIndex(i),l=this.mainGrid.getCellOption(n,o,"viewType"),h=this.mainGrid.getColumnOption(this.options.col_id,"dataType"),d=a.Z.getDataPrefix("editModeEvent");("icon"==l||""==l&&"own"==h)&&(this.mainGrid.addClass(t,this.mainGrid.options.bodyTdClass+"_spinner"),t.setAttribute(d,this.options.editModeEventIcon))},O.spinner.prototype.setEditMode=function(t,e){try{var i=this.mainGrid._getWrapperCell(t,e);if(""==this.style){var o=a.Z.getDataPrefix("tdindex");this.style="position:relative;left:0px;top:0px;background-color:#ffffff;",this.xml.setAttribute("class",this.mainGridId+"_spinner_"+this.id),this.xml.setAttribute("style",this.style),this.configOptions={},this.options.dataType&&(this.configOptions.dataType=this.options.dataType),this.options.buttonSize&&(this.configOptions.buttonSize=this.options.buttonSize),
this.options.dateIncrementType&&(this.configOptions.dateIncrementType=this.options.dateIncrementType),this.options.displayFormat&&(this.configOptions.displayFormat=this.options.displayFormat),this.options.displayFormatter&&(this.configOptions.displayFormatter=this.options.displayFormatter),this.options.increment&&(this.configOptions.increment=this.options.increment),this.options.min&&(this.configOptions.min=this.options.min),this.options.max&&(this.configOptions.max=this.options.max),this.options.editType&&(this.configOptions.editType=this.options.editType);var r=t.getAttribute(o);this.mainGrid._getEditDisabled(e,r)?this.configOptions.disabled=!0:this.configOptions.disabled=!1,this.configOptions.xmlEvents=[{name:"ondblclick",action:"script",param:{handler:function(t){u.f.stopPropagation(t)}}}],this.spinner=new WebSquare.uiplugin.spinner(this.mainGridId+"_spinner_"+this.id,this.configOptions,this.xml),this.spinner.isGridCellComponent=!0;var n=this;this.spinner._handleClickEvent=this.spinner.handleClickEvent,this.spinner.handleClickEvent=function(t){var e=n.mainGrid.getElemRowIndex(this.render.parentElement),i=n.mainGrid._getGroupbyDisplayRowIndex(e),s=this.render.parentElement.getAttribute(o);if(this.options.customFormatter){try{var r=null,l={};if("function"==typeof(r=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)))for(var h in l=r(i,s))this.options.hasOwnProperty(h)&&(this.options[h]=l[h])}catch(t){r=null}this._handleClickEvent(t)}else this._handleClickEvent(t);u.f.stopEvent(t)},this.spinner._inputKeyDown=this.spinner.inputKeyDown,this.spinner.inputKeyDown=function(t,e){27==t.keyCode||n.spinner._inputKeyDown(t,e)},i.innerHTML=this.spinner.toHTML(),this.spinner.activate(),this.spinner.setSize(t.clientWidth-2,t.clientHeight-2)}else i.innerHTML="",i.appendChild(this.spinner.render),this.spinner.show();this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),this.editColIndex=this.mainGrid.getColumnIndex(this.id),this.editRowIndex=e,this.editTd=t,this.internal&&(this.parentColumnInfo.editRowIndex=e,this.parentColumnInfo.editTd=t),this.spinner.setValue(this.mainGrid.dataList._getCellData(e,this.colID)),"select"!=this.options.editType&&"focus"!=this.options.editType||this.spinner.focus()}catch(t){s.Y.printStackTrace(t,null,this.mainGrid)}},O.spinner.prototype._handleEndEdit_common=function(t){try{var e=this.spinner.getValue();if("number"==this.spinner.options.dataType){Number(e);this.options.customFormatter?(this.spinner.options.maxValue&&(this.maxValue=Number(this.spinner.options.maxValue)),this.spinner.options.minValue&&(this.minValue=Number(this.spinner.options.minValue)),!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)):!isNaN(this.maxValue)&&e>this.maxValue?e=this.maxValue+"":!isNaN(this.minValue)&&this.minValue>e&&(e=this.minValue)}else this.spinner.options.dataType;this.mainGrid.dataList.__setCellData(this.editRowIndex,this.colID,e),this.setInnerHTML(this.editTd,e,this.editRowIndex,this.colID),this.spinner.hide()}catch(t){s.Y.printStackTrace(t,null,this)}},O.spinner.prototype._handleCancelEdit=function(t){},O.spinner.prototype._handleEndEdit_focus=function(){try{return null}catch(t){s.Y.printStackTrace(t,null,this)}},O.spinner.prototype.doDefaultAction=function(t){t.ctrlKey||this.mainGrid.setEditHtml(t)},O.custom=function(){},O.custom.prototype.initializeCellInfo=function(t,e){try{this.parseTypeGetter(),this.isValidTypeGetter?(this.cellManagerHashByID={},this.cellManagerHashByRowIndex={},this.cellManagerIDByRowIndex={}):(this.cellManagerHashByRowIndex=[],this.cellManagerIDByRowIndex=[],this.cellManagerInfoByRowIndex=[])}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.initializeCellManager=function(t,e){try{var i=e.inputType?e.inputType:e.tagName;if(t.id=e.id,t.colID=this.id,t._position={
colIndex:this.mainGrid.getColumnIndex(this.colID),colID:this.id,realRowIndex:e.realRowIndex,displayRowIndex:e.displayRowIndex},t.parentColumnInfo=this,t.options.inputType=i,t.initializeInputType=this.getTagName(i),t.initializeInfo=e,"gridViewItemset"===e.itemTableType&&!e.itemSet)for(var o in t.initializeInfo.itemSet={nodeset:e.nodeset,label:e.label,value:e.value},t.options.itemSet=t.initializeInfo.itemSet,t.options.item=e.item,t.options.gridViewOptions={},t.options.itemTableType="gridViewItemset",e)t.options.gridViewOptions[o]=e[o];for(var o in e.options)t.options[o]=e.options[o];t.initFormatter()}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.getMapping=function(t,e){try{switch(t){case"text":default:return o.q.extend(e,WebSquare.uiplugin.cellInfo.text.prototype),!0;case"link":return o.q.extend(e,WebSquare.uiplugin.cellInfo.link.prototype),!0;case"checkbox":return o.q.extend(e,WebSquare.uiplugin.cellInfo.checkbox.prototype),!0;case"button":return o.q.extend(e,WebSquare.uiplugin.cellInfo.button.prototype),!0;case"image":return o.q.extend(e,WebSquare.uiplugin.cellInfo.image.prototype),!0;case"radio":return o.q.extend(e,WebSquare.uiplugin.cellInfo.radio.prototype),!0;case"select":return o.q.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(e,WebSquare.uiplugin.cellInfo.select.prototype),!0;case"calendar":return o.q.extend(e,WebSquare.uiplugin.cellInfo.calendar.prototype),!0;case"textarea":return o.q.extend(e,WebSquare.uiplugin.cellInfo.textarea.prototype),!0;case"expression":return o.q.extend(e,WebSquare.uiplugin.cellInfo.expression.prototype),!0;case"textImage":return o.q.extend(e,WebSquare.uiplugin.cellInfo.textImage.prototype),!0;case"checkcombobox":return o.q.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(e,WebSquare.uiplugin.cellInfo.checkcombobox.prototype),!0;case"autoComplete":return o.q.extend(e,WebSquare.uiplugin.cellInfo.itemsetControl.prototype),o.q.extend(e,WebSquare.uiplugin.cellInfo.autoComplete.prototype),!0;case"spinner":return o.q.extend(e,WebSquare.uiplugin.cellInfo.spinner.prototype),!0}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.getTagName=function(t){try{switch(t){case"text":return"input";case"link":return"anchor";case"button":return"trigger";case"select":return"selectbox";default:return t}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.parseTypeGetter=function(){try{this.options.typeGetter?(this.typeGetter=a.Z.getGlobalFunction(this.options.typeGetter,this.scope_id),this.isValidTypeGetter=!0):(this.isValidTypeGetter=!1,0==this.mainGrid.options.setCellInputTypeCustom&&$l("An error occurred while creating a custom type grid. property typeGetter is undefined.  gridView ["+this.mainGrid.id+"] column:["+this.id+"]"))}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.updateCellManagerHash=function(t,e,i,o,r){try{this.isValidTypeGetter?(this.cellManagerHashByID[t]=i,this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t):(this.cellManagerInfoByRowIndex[e]=r,this.cellManagerHashByRowIndex[e]=i,this.cellManagerIDByRowIndex[e]=t),o&&i.itemsetObj&&o.nodeset!==i.itemsetObj.nodeset&&i.setColumnNodeSet(o.nodeset,o.label,o.value)}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.createCellManager=function(t,e){try{var i=e.id,r=e.realRowIndex,a=o.q.extend({},this);if(a.internal=!0,a.options=o.q.extend({},this.options),a.options["data-col_id"]&&(a.options.col_id=a.options["data-col_id"]),a.initializeCellInfo=function(){},this.mainGrid.options.senseReader&&"false"!==a.options.embeddedInput&&("secret"!=e.inputType&&"text"!=e.inputType&&"select"!=e.inputType&&"checkbox"!=e.inputType&&"radio"!=e.inputType&&"calendar"!=e.inputType||(a.options.embeddedInput=!0,e.options&&(e.options.embeddedInput=!0))),e&&"radio"==e.inputType&&e.options&&e.options.groupName&&e.options.groupValue&&(this.mainGrid.radioGroupRepChk[e.options.groupName]=!0,
this.options.readOnly&&!e.options.readOnly&&e.td&&(this.options.readOnly=!1,this.options.readOnlyClass&&this.mainGrid.removeClass(e.td,this.options.readOnlyClass),this.mainGrid.options.readOnlyClass&&this.mainGrid.removeClass(e.td,this.mainGrid.options.readOnlyClass))),this.getMapping(e.inputType,a)){if(this.initializeCellManager(a,e),a.initializeCellInfo(t,e.options),a.isLocked=!0,this.updateCellManagerHash(i,r,a,null,e),!0===a.options.embeddedInput){var n=e.itemSet;n&&"function"==typeof a.setColumnNodeSet&&a.setColumnNodeSet(n.nodeset,n.label,n.value,e.displayRowIndex)}return this.cellManagerHashByRowIndex[r]}var l=this.options.id,h=this.mainGrid.getColumnIndex(l);return $l("An error occurred while creating a custom type grid. gridView ["+this.mainGrid.id+"] column:["+this.id+"] inputType:["+e.inputType+"] realRowIndex:["+r+"] colIndex["+h+"]"),!1}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.getCellManager=function(t){try{var e=t.managerID,i=t.element,o=t.rowIndex,r=t.realRowIndex,a=this.options.id,n=this.mainGrid.getColumnIndex(a),l=this.mainGrid.dataList.getCellData(o,n),h={colID:a,colIndex:n,rowIndex:o,displayRowIndex:t.rowIndex,realRowIndex:t.realRowIndex,value:l};try{var d,c;if(1!=this.mainGrid.options.setCellInputTypeCustom||this.isValidTypeGetter){if(this.cellManagerHashByID&&this.cellManagerHashByID[e])return this.cellManagerHashByID[e];if(this.isValidTypeGetter){var u=!1;if((c=this.typeGetter(h))&&"drilldown"===c.inputType)return;c&&c.options&&null!=c.options.readOnly&&this.mainGrid.setCellReadOnly(r,this.id,c.options.readOnly),c&&c.options&&null!=c.options.disabled&&this.mainGrid.setCellDisabled(r,this.id,c.options.disabled);f=this.cellManagerIDByRowIndex[r];if((m=this.cellManagerHashByRowIndex[r])&&m.options.embeddedInput&&t.td){var p=this.mainGrid._getWrapperCell(t.td,r);p.firstChild?p.firstChild&&p.firstChild.id!==this.mainGrid.id+"_"+f&&(u=!0):u=!0}if(!c||f!==c.id||u)if(f)g=!0===m.options.embeddedInput?this.mainGridId+"_"+f:this.mainGridId+f,this.mainGrid._removeDom(g),delete this.cellManagerHashByID[f],delete this.cellManagerHashByRowIndex[r],delete this.cellManagerIDByRowIndex[r]}else if(this.parseTypeGetter(),this.isValidTypeGetter&&(c=this.typeGetter(h)),c&&"drilldown"===c.inputType)return}else if(1==t.dynamicInputType){if((c=t.options).id="dynamic_"+c.inputType+"_"+o+"_"+n,c.td=t.td,c.dynamicInputType=!0,this.cellManagerHashByRowIndex[r]){var g,m=this.cellManagerHashByRowIndex[r],f=this.cellManagerIDByRowIndex[r];g=!0===m.options.embeddedInput?this.mainGrid.id+"_"+f:this.mainGridId+f,this.mainGrid._removeDom(g),delete this.cellManagerIDByRowIndex[r],delete this.cellManagerHashByRowIndex[r]}}else if(this.cellManagerHashByRowIndex[r]&&!t.dynamicInputType)return this.cellManagerHashByRowIndex[r];return c?(c.isUDC||((d=1==this.mainGrid.options.setCellInputTypeCustom?this.cellManagerHashByRowIndex[r]:this.cellManagerHashByID[c.id])?(this.updateCellManagerHash(c.id,r,d,c.itemSet),d.isLocked):(c.realRowIndex=r,c.rowIndex=o,c.displayRowIndex=o,d=this.createCellManager(i,c))),1!=this.mainGrid.options.setCellInputTypeCustom&&(d.customValue=c.value)):d=this.createCellManager(i,{id:this.colID+"_"+r+"__default",inputType:"text",td:t.td,realRowIndex:r}),d}catch(t){return $l("An error occurred while creating a custom type grid. gridView ["+this.mainGrid.id+"] column:["+this.id+"] realRowIndex:["+r+"] colIndex["+n+"]"),!1}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.setInnerHTML=function(t,e,i,o,r){try{var a=this.mainGrid.getRealRowIndex(i),n=this.mainGrid._getWrapperCell(t,a);if(this.mainGrid.options.setCellInputTypeCustom&&!this.isValidTypeGetter&&this.mainGrid.options.senseReader){this.cellManagerInfoByRowIndex[a];if(this.cellManagerIDByRowIndex&&!this.cellManagerIDByRowIndex[a]&&this.cellManagerInfoByRowIndex[a])return void this.mainGrid._setCellInputType(i,o,null,this.cellManagerInfoByRowIndex[a]);var l=this.cellManagerHashByRowIndex[a];if(l&&l.options.embeddedInput){
var h=this.cellManagerIDByRowIndex[a],d=this.mainGrid.id+"_"+h;if(!n.firstChild||n.firstChild&&n.firstChild.id!=d)return this.mainGrid._removeDom(d),this.cellManagerHashByRowIndex[a]=null,this.cellManagerIDByRowIndex[a]=null,void this.mainGrid._setCellInputType(i,o,null,this.cellManagerInfoByRowIndex[a])}}var c=this.getCellManager({element:this.element,rowIndex:i,realRowIndex:a,td:t});if(!1===c)n.innerHTML=this.mainGrid.dataTagOpen+e+this.mainGrid.dataTagClose;else{this.clearStyle(c,t);var u="class";!0===this.isValidTypeGetter&&c.options[u]&&this.mainGrid.addClass(t,c.options[u]),c.setInnerHTML(t,e,i,o),null!=c.customValue&&(e=c.customValue,this.mainGrid.dataList.__setCellData(i,this.colID,e)),this.useCustomFormatter=c.useCustomFormatter,this.useCustomModelFormatter=c.useCustomModelFormatter,this.useEscapeFormatter=c.useEscapeFormatter}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.setEditMode=function(t,e){try{if(!this.internal){var i=this.mainGrid.getRealRowIndex(e),o=this.cellManagerHashByRowIndex[i];o&&o.setEditMode(t,e)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.setPosition=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];e&&e.setPosition()}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype._handleEndEdit_common=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e];if(i)return i._handleEndEdit_common(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype._handleEndEdit_focus=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex)||this.editRowIndex,i=this.cellManagerHashByRowIndex[e];i&&i._handleEndEdit_focus(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype._handleCancelEdit=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i._handleCancelEdit()}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.doDefaultAction=function(t){try{if(!this.internal){var e=this.mainGrid.getRealRowIndex(this.editRowIndex),i=this.cellManagerHashByRowIndex[e];i&&i.doDefaultAction()}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.clearStyle=function(t,e){try{var i=a.Z.getDataPrefix("editModeEvent");"calendar"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_calendar")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_calendar"),e.setAttribute(i,"")),"select"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_select")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_select"),e.setAttribute(i,"")),"autoComplete"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_autoComplete"),e.setAttribute(i,"")),"checkcombobox"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_checkcombobox"),e.setAttribute(i,"")),"spinner"!=t.initializeInputType&&this.mainGrid.hasClass(e,this.mainGrid.options.bodyTdClass+"_spinner")&&(WebSquare.style.removeClass(e,this.mainGrid.options.bodyTdClass+"_spinner"),e.setAttribute(i,""))}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype.validate=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];return!e||("calendar"!==e.options.inputType||e.validate())}}catch(t){s.Y.printStackTrace(t,null,this)}},O.custom.prototype._getEditedValue=function(){try{if(!this.internal){var t=this.mainGrid.getRealRowIndex(this.editRowIndex),e=this.cellManagerHashByRowIndex[t];if(e&&e._getEditedValue)return e._getEditedValue()}return""}catch(t){
s.Y.printStackTrace(t,null,this)}},O.custom.prototype.refreshCellManagerHash=function(){try{for(var t=this.mainGrid.getRowCount(),e=0;e<t;e++)this.getCellManager({element:this.element,rowIndex:e,realRowIndex:this.mainGrid.getRealRowIndex(e)})}catch(t){s.Y.printStackTrace(t,null,this)}},O.user=function(){},O.user.prototype.setInnerHTML=function(t,e,i,o,s){var r,n=this.mainGrid._getWrapperCell(t,i),l=a.Z.getGlobalFunction(this.options.customFormatter,this.scope_id),h=this.mainGrid._getGroupbyDisplayRowIndex(i),d=this.getDisplayData(e);"function"==typeof l?(this.useCustomFormatter=!0,r=l.call(this.mainGrid,e,d,h,o)):(this.useCustomFormatter=!1,r=d),n.innerHTML=this.mainGrid.dataTagOpen+r+this.mainGrid.dataTagClose},O.user.prototype.doDefaultAction=function(t){if("none"==this.mainGrid.options.focusMode){for(var e=u.f.getTarget(t);e&&"TD"!=e.tagName;)e=e.parentNode;if(!e)return;var i=this.mainGrid.getElemRowIndex(e),o=this.mainGrid._getGroupbyDisplayRowIndex(i),s=a.Z.getDataPrefix("col_id"),r=this.mainGrid.getColumnIndex(e.getAttribute(s))}else{var n=this.mainGrid.getLastFocusedCell();i=n.focusedRowIndex,o=this.mainGrid._getGroupbyDisplayRowIndex(i),r=n.focusedColIndex}this.mainGrid._getEditDisabled(i,r)||this.mainGrid.___getEditReadOnly(i,r)||u.f.fireEvent(this.mainGrid,"oncellclick",o,r,this.options.id)};var P=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(P.prototype,n.q.prototype),P.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.gridView",pluginName:"gridView",serializable:!0,userEvents:["oncellclick","oncelldblclick","onrightbuttonclick","ontextimageclick","ondateselect","oneditdblclick","oncellindexchange","onrowindexchange","oncolumnindexchange","onfilereadend","onscrollend","onscrollstart","onbeforeedit","oneditend","oneditkeydown","onafteredit","onscrolly","onscrollx","onsort","onbeforesort","onheaderclick","onheaderrightbuttonclick","onheaderdblclick","onheadermouseover","onheadermouseout","onheadertextimageclick","onfooterclick","onsubtotalclick","onsubtotaldblclick","onbodymouseover","onbodymouseout","ongroupby","onbeforetoggleclick","ontoggleclick","onclick","onblankclick","onkeydown","onkeyup","onviewchange","onbeforepaste","onafterpaste","oncolumnwidthchange","onbeforecolumnmove","onaftercolumnmove","onaftercolumnresize","ondatadragstart","ondatadragover","ondatadrop","oncontextopen","oncontextclick","oneditkeyup","ongridmouseleave","ongridmouseenter"],rowNumVisible:!1,rowNumRowSpan:!0,rowNumHeaderValue:"",rowNumLocaleRef:"",rowNumBackgroundColor:"",rowNumRowMouseOverColor:!1,rowNumStatusResize:!1,cellStatusVisible:!1,cellStatusIconPosition:"right",rowStatusVisible:!1,rowStatusRowSpan:!0,rowStatusColSpan:!1,rowStatusHeaderValue:"",rowStatusLocaleRef:"",overflowX:"auto",overflowY:"auto",fixedColumn:0,fixedColumnWithHidden:!0,fixedColumnNoBGColor:!1,fixedColumnScrollHidden:!1,fixedColumnNoMove:!1,fixedColumnScrollReset:!0,fixedColumnLineDiv:!1,fixedColumnLineDivStart:"tbody",rowNumStatusFixed:!0,fixedRightColumn:0,fixedRow:0,lastFixedRow:0,lastFixedRowStartIndex:0,resize:!0,rowResize:!1,baseNode:"vector",repeatNode:"data/INFO",valueNode:"",focusMode:"cell",selectedCellColor:"#FCA73C",selectedRowColor:"#FCA73C",oddEvenColorDisplay:!1,oddRowBackgroundColor:"#EFF7FF",evenRowBackgroundColor:"#FFFFFF",rowMouseOver:!1,rowMouseOverColor:"#ffff80",selectedCellOverColor:"",selectedRowOverColor:"",editModeEvent:"ondblclick",editModeEventIcon:"onclick",keyMoveEditMode:!1,enterKeyMove:"down",skipMultiRowMove:!1,sortable:!1,sortHeaderDiv:!1,sortOrderReverse:!1,noSortInit:!1,showSortableImage:!1,preventMultisort:!1,useCtrlOnMultisort:!0,useCtrlKey:!0,sortedImagePosition:"",sortedIconPosition:"",sortEvent:"ondblclick",headerTooltipDisplay:!1,rowStatusTooltipDisplay:!1,tabKeyMove:"right",tooltipDisplay:!1,tooltipDisplayTime:0,tooltipClass:"",tooltipStyle:"",tooltipHide:"click",tooltipShowAlways:!1,tooltipShowAlwaysColumns:"",tooltipHideInputType:"",tooltipHeaderShowAlways:!1,tooltipFormatter:"",
tooltipFormatterHeader:"",tooltipPositionX:"20",tooltipPositionY:"3+cellHeight",tooltipDisplayColumn:"",tooltipHeader:!1,showImageTooltip:!1,captionTitle:"",captionAuto:!1,noResultMessageVisibleAlways:!1,noResultMessageVisible:!1,noResultMessageExclude:"",noResultMessage:"",noResultMessageClass:"",noResultMessageStyle:"",noResultMessageStylePriority:!1,useNoResultMessageURL:!1,noResultMessageURL:"",noResultMessageCenter:!1,hiddenClass:"",readOnly:"",readOnlyPriority:"",readOnlyBackgroundColor:"",readOnlyBackgroundImg:"",readOnlyBackgroundImgCSS:"",readOnlyTabIgnore:!1,ignoreNonEditableCell:!1,ignoreNonEditableCellTabEnter:!1,disabledPriority:"",disabledBackgroundColor:"",disabledFontColor:"",summary:"",footerCaption:"",footerCaptionAuto:!1,footerSummary:"",footerSummaryAuto:!1,drawLimitTime:70,drawLimitRow:4,loadCount:0,minWidth:0,autoFit:"",autoFitMinWidth:"",autoFitCellMinWidth:"",autoFitFixYScroll:!1,fastScroll:"",lazyDrawHiddenColumn:!1,defaultCellHeight:-1,defaultHeaderCellHeight:-1,hideHeader:!1,dataDragDropCell:!1,dataDragDrop:!1,dataDragDropOther:!1,dataDragDropSelf:!1,dataDragDropStatus:!1,keepDataDragSelection:!1,dataDragSelect:!1,dataDragSelectAutoScroll:!1,dataDragSelectAutoScrollDPI:5,dataDragSelectAutoScrollPeriod:70,dataDragSelectAutoScrollDelay:50,dataDragSelectAutoScrollLevel:1300,dragDisplayColumn:"",dragStartFunction:"",dragEndFunction:"",headFiller:!1,focusMove:"true",focusFlow:"default",scrollMsg:"",visibleRowNum:"",visibleRowNumFix:!1,fixHeight:!1,fastEditMode:!1,iScrollMoveEffectTime:500,iScrollSlideTime:800,iScrollSlidePeriod:100,rollbackCommit:!0,numberCasting:!1,backgroundColorMode:"lazy",senseReader:!1,senseReaderLinkFocus:!1,useStartEndDiv:!0,showLastRow:!1,autoScope:!1,autoResizeEmbeddedInput:!1,servletPopup:!1,excelUploadPopupURL:"",advancedExcelUploadPopupURL:"",advancedExcelMultiUploadPopupURL:"",advancedExcelDownloadPopupURL:"",excelUploadURL:"",excelDownloadURL:"",csvDownloadURL:"",csvUploadPopupURL:"",csvUploadURL:"",advancedExcelUploadURL:"",advancedExcelDownloadURL:"",excelFileNameEncode:!1,drilldownRealRowIndex:!0,drilldownRealRowIndexAll:!1,drilldownToggleScrollFix:!1,escape:!0,fixPrint:!1,xmlEncode:!1,wheelRows:3,wheelStop:!1,scrollByColumn:!1,scrollByColumnAdaptive:!1,rowNumWidth:"",rowStatusWidth:"",keepDefaultColumnWidth:!1,columnMove:!1,columnMoveWithFooter:!1,columnOrder:"",copyAmount:"",copyOption:"",copyType:"default",pasteOption:"",rowCopy:!1,noUseCSVParser:!1,customPasteFormatter:"",checkReadOnlyOnPaste:!1,checkDisabledOnPaste:!1,checkReadOnlyOnCut:!0,checkDisabledOnCut:!0,checkBlankRowOnPaste:!1,checkEditableInputClass:!1,checkEditOnPaste:!1,checkOnCellClick:!1,setDefaultValueOnPaste:!1,preventAddRowOnPaste:!1,preventCopy:!1,preventPaste:!1,groupbyZone:!1,groupbyZoneSearch:!1,groupbyListVisibleRowNum:10,groupbyZoneMessage:"",groupbyZoneHeight:"50",groupbyMaxCount:-1,groupbyDisplayRowIndex:!1,groupbyFilterIcon:!1,plainText:!1,hideDeletedRow:!1,excludeDeletedRows:!1,excludeModifiedRows:!1,initFixedHeightByRowNum:-1,moveKeyEditMode:!1,moveKeyEditModeAll:!1,keepBeforeDisplayData:!1,touchScrollDelta:5,dataList:"",useFilterSearch:!1,useSearchFilter:!1,useFilterList:!1,useFilterListSync:!1,useFilterListFormat:!1,useResizeFilterList:!1,filterListRowHeight:20,filterListVisibleRowNum:0,filterListWidth:0,caseSensitive:!1,displayValueOnUseFilterList:!1,customFilterListVisibleRowNum:10,showAllFilterList:!1,useFilterEmptyMsg:"",useFilterNullMsg:"",filterDisplayMode:"label",filterSearchTarget:"label",filterShowAlways:!1,duplicateColumnId:!1,filterFocusMode:"",focusOnSetData:!1,focusDefaultColumn:!1,focusAutoRemove:!1,scrollFix:!1,scrollRowHeight:!1,applyAllColumnStyle:!1,disabledScrollHidden:!1,hammerEnabled:!1,hammerPressTime:351,dynamic:!1,ignoreCellClick:!1,ignoreToggleOnDisabled:!1,adaptive:"",autoFitFilterList:!1,summaryAuto:!1,summaryOnlyAuto:!1,arrowMove:!1,filterBoxvisibleRowNum:4,groupbyFilterBox:!1,groupbyFilterBoxLocation:"bottom",groupbyFilterBoxLabelSize:3,customFilterBox:!1,
customFilterFrameModal:!1,fixAdaptive:!1,groupbyFilterBoxFormatter:"",showSortableUseFilter:!1,customFormatterRealRowIndex:!1,oddEvenColorMerged:!1,showCustomFilterReset:!1,setCellInputTypeCustom:!1,useHeaderCheckboxLabelFor:!0,returnTrueFalseValue:!1,keepEditMode:!1,initStyle:!1,mergeCol:"",mergeRow:"",mergeCells:"never",noImageTooltip:!1,mergeCellsFixedCols:"never",mergeCellsFixedRows:"never",mergeExcludeValue:"",rowNumStatusUniqueId:!1,checkHeaderOnly:!1,checkAllType:"include",useDefaultStyle:!1,foldAll:!1,contextMenu:!1,useHeaderContextMenu:!1,contextMenuRowHeight:20,contextMenuAltClick:!1,useAccessibleContextMenu:!1,titleAuto:!1,syncScroll:!1,disabledClass:"w2grid_default_disabled",readOnlyClass:"w2grid_default_readonly",selectByLabel:!1,syncWithScrollTrack:!1,aliasDataCollection:"",editInputClass:"",directEdit:!1,numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",useMaxLength:!1,noSelect:!1,scrollFocus:!1,postMsg:!1,useXHR:!1,preventDuplicateFocusedCell:!1,alwaysTriggerScrollStart:!1,CellClickFixScrollX:!1,drawType:"virtual",mergeRefreshAlways:!0,subtotalStyleFormatter:"",mergeCellsFixedColsFirst:!1,useImageClick:!1,hideSortIconOnNoData:!1,hideFilterIconOnNoData:!1,showCheckboxLabelUserFormat:!1,showRadioLabelUserFormat:!1,useMoreButton:!1,moreButtonTitle:"",useTextMultiLink:!1,dataTag:"nobr",ctrlShiftKey:!1,scrollXNative:!1,scrollXNativeMobile:"",accessibility:!1,contentCellClick:!1,useDataDragDropGuideLine:!1,viewChangeAfterEdit:!1,hybridRowNum:50,useMobileTooltip:!1,useShiftKeyCheck:!1,focusMoveByUpDownKey:!1,rowMouseOverClass:"",syncRowPositionOption:"",wrapperCell:!1,wrapperCellElem:"div",readOnlyButtonFocusAllow:!1},P.prototype.initialize=function(t){if(this.initializeType="gridView",isNaN(parseInt(this.options.visibleRowNum,10))||(this.options.initFixedHeightByRowNum=-1),this.options.initFixedHeightByRowNum>0&&""===this.options.visibleRowNum&&(this.options.visibleRowNum=this.options.initFixedHeightByRowNum),this.firstEmbeddedInputResize=!0,"none"===this.options.autoFit&&(this.options.autoFit=""),this._isNativeScroll()&&(this.options.visibleRowNum="all"),"native"===this.options.copyType&&(this.options.noSelect=!1),t){for(var e=!1,i=!1,s=t.getChildNodes(),r=0;r<s.length;r++)"w2:header"!=s[r].getTagName()?"w2:gBody"!=s[r].getTagName()||(e=!0):i=!0;if(!e||!i)return this.uncompleted=!0,void(this.options.dynamic||$l(" gridView error : cannot find <w2:header> or <w2:gBody>.["+this.id+"]"))}if(this.options.dataList=this.options.dataList.wq_replaceAll("data:",""),this._dataList=null,this.options.dataList&&(this._dataList=this.modelControl.getDataComp(this.options.dataList,{type:"aliasDataCollection"})),this._dataList)switch(this._grid=this,this._dataList.addChild(this),this._dataList=WebSquare.DataCollection.api.getObj(this._dataList),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.q.extend(this,WebSquare.uiplugin.linkedMappingController.prototype),o.q.extend(this.dataList,WebSquare.uiplugin.linkedMappingController.prototype),this.dataList._linkedDataList=this._linkedDataList):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}else $l(" gridView error : invalid dataList("+this.options.dataList+").["+this.id+"]"),this.successBinding=!1,this._dataList={};this.skipPreActivate=!0;var n=this.options.dataList;null!=this.scope_obj&&(n=this.scope_obj.id+"_"+this.options.dataList),WebSquare.DataCollection.api.addRelation(this.id,n,!1),this.skipPreActivate=!1,this.myhelper=new WebSquare.korHelper,(a.Z.isIEAllVersion()||a.Z.isSpartan())&&(this.options.useResizeFilterList=!1),(this.options.useSearchFilter||this.options.useResizeFilterList)&&(this.options.useFilterSearch=!1),
this.options.useNoResultMessageURL&&(this.options.noResultMessageStyle="",this.options.noResultMessageClass="",this.options.noResultMessageExclude="",this.options.noResultMessageVisibleAlways=!1,this.options.noResultMessage="",this.options.noResultMessageStylePriority=!1,this.options.noResultMessageVisible=!0,this.options.noResultMessageURL||(this.options.noResultMessageURL=o.q._resourceURI+"message/noResultMessage/gridView_noResultMessage.xml")),!0===this.options.hideDeletedRow&&(this.options.excludeDeletedRows=!0),this.options.noResultMessageCenter&&!this.options.noResultMessageStylePriority&&(this.options.noResultMessageStyle="",this.options.noResultMessageClass=""),this._initialize()},P.prototype._initialize=function(t){if(this.focusedCellInfo={},this.extraData={grid:{},row:[],col:[],cell:[]},this.drilldown=new WebSquare.uiplugin.drilldown,"false"!=this.options.focusMove&&"horizontal"!=this.options.focusMove||(this.options.enterKeyMove="none"),this.options.groupbyFilterBox&&(this.groupbyFilterBox_select=null,this.groupbyFilterBox_history=[]),!0===this.options.accessibility){this.options.senseReader=!0,this.options.focusMove="false",this.options.keyMoveEditMode=!0,this.options.autoResizeEmbeddedInput=!0,this.options.scrollFocus=!0,this.options.titleAuto=!0,this.options.sortHeaderDiv=!0,this.options.drawType="native";var e=this.options.initFixedHeightByRowNum>-1?this.options.initFixedHeightByRowNum:this.options.visibleRowNum;e>0&&(this.options.initFixedHeightByRowNum=e,this.options.visibleRowNumFix=!0),this.options.visibleRowNum="all"}this.date=new Date,this.isDrillDown=!1,this.depthColumn="",this.showDepth="",this.removed=!1,this.useExpression=!1,this.colWidthList=[],this.gridWidth=0,this.resizeStarted=!1,this.headerHeight=0,this.footerHeight=0,this.hgap=[],this.autofitColumn=!1,this.autofitColumnIndexArr=[],this.autofitColumnWidthArr=[],this.autofitDone=!1,this.resizeStatus="init",this.scrollWidthSize=18,this.scrollLayerWidthSize=18,this.hiddenList=[],this.headerFocus=!1,this.headerObjArr=[],this.tmpSelectbox=null,this.noevent=!1,this.rowIndex=-1,this.lastIndex=-1,this.oelIndex=-1,this.initializeDrawController(),this.drawedRowLength=0,this.maxRowLength=0,this.drawSizeChanged=!1,this.drawSizeAdded=!1,this.isExistTextarea=!1,this.bodyHeight=0,this.scrollEvent=!0,this.isColMerge=!1,this.isColMergeAnd=!1,this.upperToLowerColumnRelation={},this.hasSubtotal=!1,this.startRowNumber=0,this.dataRowList=[],this.subtotalRowHash={},this.subtotalDataArr={},this.subtotalObj={},this.drawSetTimeoutKey=[],this.overElem=null,this.outElem=null,this.hasFooter=!1,this.footerDataObj=null,this.drawFooterStatus=!0,this.bScrollTop=-1,this.bScrollY=0,this.drawedTime=0,this.defaultColCnt=0,this.options.rowNumVisible&&this.defaultColCnt++,this.options.rowStatusVisible&&this.defaultColCnt++,this.loadCheck=[],this.beforeDataLength=-1,this.beforeMaxRowLength=-1,this.checkScrollStart=!0,this.editEnd=!1,this.lastOverSrc=null,this.headerInfoHash={},this.headerInfoHash2={},this.cellInfoHash={},this.cellInfoHash2={},this.expressionAssArr=[],this.labelColumnAssArr=[],this.rowStyleValueObj={},this.columnStyleValueObj={},this.cellStyleValueObj={},this.defaultStyleValueObj={},this.initStyleValueObj={},this.adaptiveColumnStyleValueObj={},this.rowStyleFixedValueObj={},this.rowStyleDataValueObj={},this.columnStyleFixedValueObj={},this.columnStyleDataValueObj={},this.disabledCellStyleObj={},this.headerCellStyleValueObj={},this.headerCellClassObj={},this.rowStyleIndex=0,this.cellStyleIndex=0,this.rowStyleFixedIndex=0,this.rowStyleDataIndex=0,this.rowStyleArr=[],this.cellStyleArr=[],this.cellClassArr=[],this.rowClassArr=[],this.tdCellClassArr=[],this.trRowClassArr=[],this._cellSelectedIndex=[],this.columnClassObj={},this.rowStyleFixedArr=[],this.rowStyleDataArr=[],this.columnStyleFixedArr=[],this.columnStyleDataArr=[],this.rowReadOnlyArr=[],this.cellReadOnlyArr=[],this.rowDisabledArr=[],this.cellDisabledArr=[],this.focusedCell=[],this.focusedRow=[],
this.headerToBodyRelation={},this.bodyToHeaderRelation={},this.passiveColSpanRelation={},this.colMoveBolockedHeaderObj={},this.backupHeaderHTML={},this.expressionHeaderInfo={},this.columnOrder=[],this.isIE6=a.Z.isIE("6"),"BackCompat"==document.compatMode&&(this.isIE6=!0),this.isIE7=a.Z.isIE("7"),this.isIE6or7=this.isIE6||this.isIE7,this.isMobile=a.Z.isMobile(),this.isWebKit=/webkit/.test(navigator.userAgent.toLowerCase()),this.tmpCnt=0,this.initFlag=!1,this.options.rowNumBackgroundColor=this.options.rowNumBackgroundColor.wq_trim(),this.options.selectedCellColor=this.options.selectedCellColor.wq_trim(),this.options.selectedRowColor=this.options.selectedRowColor.wq_trim(),this.options.oddRowBackgroundColor=this.options.oddRowBackgroundColor.wq_trim(),this.options.evenRowBackgroundColor=this.options.evenRowBackgroundColor.wq_trim(),this.options.rowMouseOverColor=this.options.rowMouseOverColor.wq_trim(),this.options.readOnlyBackgroundColor=this.options.readOnlyBackgroundColor.wq_trim(),this.options.disabledBackgroundColor=this.options.disabledBackgroundColor.wq_trim(),this.options.disabledFontColor=this.options.disabledFontColor.wq_trim(),a.Z.getBoolean(this.options.focusOnSetData)&&(this.options.focusOnSetData=!0),this.options.senseReader&&(this.options.focusFlow="linear","all"===this.options.visibleRowNum&&(this.options.showLastRow=!0),this.element&&"false"!=this.element.getAttribute("autoScope")&&(this.options.autoScope=!0),this.senseReaderMode=!0),this.embeddedWidthObj={},this.options.sortable&&this.options.sortHeaderDiv&&(this.options.showSortableImage=!0,this.options.sortEvent="onclick"),this.radioGroupRepChk={},this.options.excelUploadPopupURL=this.options.excelUploadPopupURL||(this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/fileUpload.jsp"),{baseURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/fileUpload.html"),{baseURI:!0})),this.options.advancedExcelUploadPopupURL=this.options.advancedExcelUploadPopupURL||(this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/advancedfileUpload.jsp"),{baseURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedfileUpload.html"),{baseURI:!0})),this.options.advancedExcelMultiUploadPopupURL=this.options.advancedExcelMultiUploadPopupURL||(this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/advancedMultiUpload.jsp"),{baseURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/advancedMultiUpload.html"),{baseURI:!0})),this.options.advancedExcelDownloadPopupURL=this.options.advancedExcelDownloadPopupURL||this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/download/advancedfileDownload.html"),{baseURI:!0}),this.options.excelUploadURL=this.options.excelUploadURL||WebSquare.baseServletURI+"excelToGrid.wq",this.options.excelDownloadURL=this.options.excelDownloadURL||WebSquare.baseServletURI+"xmlToExcel.wq",this.options.csvDownloadURL=this.options.csvDownloadURL||WebSquare.baseServletURI+"xmlToCSV.wq",this.options.csvUploadURL=this.options.csvUploadURL||WebSquare.baseServletURI+"csvToXML.wq",this.options.csvUploadPopupURL=this.options.csvUploadPopupURL||(this.options.servletPopup?this.getURL(WebSquare.BootLoader.inquiresPath("engine/servlet/csvfileUpload.jsp"),{baseURI:!0}):this.getURL(WebSquare.BootLoader.inquiresPath("uiplugin/grid/upload/csvfileUpload.html"),{baseURI:!0})),this.options.advancedExcelUploadURL=this.options.advancedExcelUploadURL||WebSquare.baseServletURI+"excelToGrid2.wq",this.options.advancedExcelDownloadURL=this.options.advancedExcelDownloadURL||WebSquare.baseServletURI+"xmlToExcel2.wq",this.groupbyStatus={},this.groupbyZoneStatus={},this.groupbyDisplayOptions={},this.directItemChoiceKeyObj={},this.rowStatusColIDArr=[],this.cellIdList=[],this.firstOpenCustomFilter={},this.customFilterStatusObj={},this.beforeEditedCellInfo=null,this.hiddenAdaptiveList=[],
this.adaptiveEmbeddedInputIdList=[],this.hideThresholdObj={},this.orgBodyHeightObj={},this.orgHeaderHeightObj={},this.orgFooterHeightObj={},this.orgSubtotalHeightArr=[],this.oldOptions={},this.adaptiveGridType=0,this.tooltipPositionParse=!1,this.oneRowScrollHeight=20,this._manager=null,this.beforeEditedCellInfo=null,this.options.noResultMessage=this.options.noResultMessage||WebSquare.language.getMessage("Grid_noResultMessage")||"No search result.",this.options.scrollMsg=this.options.scrollMsg||WebSquare.language.getMessage("Grid_scrollMsg")||"Updating...",this.cellMergeInfo={},this.cellMergeRealInfo={},this.tdMergeInfo={},this.mergeColObj={},this.mergeRowObj={},this.hiddenRowObj={length:0,extraRow:0,row:{},init:!1},this.hiddenCellObj={length:0,init:!1},!0===this.options.moveKeyEditModeAll&&(this.options.moveKeyEditMode=!0),this.filterEmptyStr=this.options.useFilterEmptyMsg||WebSquare.language.getMessage("GRID_useFilterEmptyMsg"),this.filterNullStr=this.options.useFilterNullMsg||WebSquare.language.getMessage("GRID_useFilterNullMsg")||"Null",this.useFilterEmptyValueInfo={"":!0};var i=this.options.useFilterEmptyValue?this.options.useFilterEmptyValue.split(","):[];i.push("");for(var o=0;o<i.length;o++)i[o]=i[o].trim(),this.useFilterEmptyValueInfo[i[o]]=!0;this._regDetectDOM=new RegExp("<[^<]+>","i"),this._regRemoveDOM=new RegExp("<[/]{0,1}[^></]+[/]{0,1}>","g"),this._bindDrag=!1,this._subtotalDisplayFormat="",this._dynamicVisibleRowNum=-1,"span"==this.options.dataTag?(this.dataTagOpen="<span class='w2grid_span'>",this.dataTagClose="</span>"):(this.dataTagOpen="<"+this.options.dataTag+">",this.dataTagClose="</"+this.options.dataTag+">"),WebSquare.util.isMobile()&&this.options.scrollXNativeMobile&&(this.options.scrollXNative=a.Z.getBoolean(this.options.scrollXNativeMobile)),this._setOverflowYScrollFlag=!1,this._setOverflowYHiddenFlag=!1,this._editendCalled=!1,this._hybridScrollYPos=0,this._hybridRowIndex=0,this._hybridScrollHeight=20,this._hybridScrollDupHeight=0,this._hybridScrollLastTop=NaN,this._hybridScrollHash={},this._hybridWheelCntX=0,this._hybridWheelCntY=0,this._hybridMobileStartX=0,this._hybridMobileStartY=0,this._hybridRefreshCnt=0,this._hybridRefreshMax=2,!0===this._isHybridScroll()&&(this.options.initFixedHeightByRowNum=-1),this.headerConfigOptions={},this.footerConfigOptions={},this.subtotalConfigOptions={},this._headerOverElemId=""},P.prototype.setPreAction=function(){try{var t=this.render.offsetWidth,e=this.render.offsetHeight;this.resizeObj={width:t,height:e,scrollLeft:0,scrollTop:0,clientWidth:this.render.clientWidth};var i=this.getElementById(this.id+"_head_table").getElementsByTagName("tr"),o=i[i.length-1],r=this.getElementById(this.id+"_body_table");this.gridLastTrBottomFix=r.offsetHeight-o.offsetTop-o.offsetHeight,this.setTableLayout(),this._handleScrollX(),this.setCellInfo(),this.setDataListCellInfo(),1==this.isDrillDown&&this.initDrilldown(),!0!==this.options.preventCopy&&!0!==this.options.noSelect||this.addClass("w2noselect")}catch(t){s.Y.printStackTrace(t,null,this)}},P.prototype._findParentControl=function(){try{for(var t,e=this.scope_obj;null!=e&&e!==e.scope_obj;e=e.scope_obj)if(e.options.adaptiveFrame){t=e;break}return t}catch(t){s.Y.printStackTrace(t)}},P.prototype.setAction=function(){try{if(this.initializeEvent(),this.options.columnOrder&&this.setColumnOrder(this.options.columnOrder),this.options.mergeCol){for(var t=this.getColumnCount(),e=0;e<t;e++)this.mergeColObj[e]=!1;var i=this.options.mergeCol.split(",");for(e=0;e<i.length;e++){var o=i[e];isNaN(o)||(o=Number(o)),this.mergeCol(i[e],!0)}}this._noResultMessageDivTop=WebSquare.util.getStyleProperty(this.getElementById(this.id+"_noresult"),"top");for(e=0;e<this.oneRowDataLength;e++){var r=this.getColumnID(e),n=this.getCellInfo(e);if(""!=this.options.hiddenClass||""!=n.options.hiddenClass){var l=this.options.hiddenClass;""!=n.options.hiddenClass&&(l=n.options.hiddenClass)
;var h=this._getRealColIndex("body",r)+this.defaultColCnt,d=null!=this.bodyToHeaderRelation[r]?this.getHeaderLayer(this.bodyToHeaderRelation[r]):null;this.hiddenList[h]?null==d||this.hasClass(d,l)||this.addClass(d,l):null!=d&&this.hasClass(d,l)&&this.removeClass(d,l)}}!this.startedDisplayNone&&this.getRowCount&&this.getRowCount()>0?this.notifyDataChanged({refreshScroll:!0}):!0===this._isHybridScroll()&&this.setScrollYHeightHybrid(),!this.startedDisplayNone&&this.options.focusOnSetData&&this._setFocusedCell(0,0),this.successBinding&&this._dataList&&this._dataList.options.initRowPosition&&this._dataList.broadcast({linkedDataList:["notifyRowPositionChanged"]});var c=WebSquare.BootLoader.fullViewed||!1,u=a.Z.fullViewed||!1;if(!c&&!u&&!this.startedDisplayNone&&this.checkAdaptiveGridType()&&(""!=this.options.adaptive||0!=Object.keys(this.hideThresholdObj).length)){this.oldOptions.headerColBorder="",this.oldOptions.bodyColBorder="",this.setAdaptive();var p=this._findParentControl();p?p._resizeChildComp.push(this.uuid):this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive))}if(1==this.options.summaryAuto&&!0!==a.Z.isHTML5()){var g=this.getHeaderValueList(),m="",f="";for(e=0;e<g.length;e++)m.length>0&&(f=","),m=m+f+g[e];this.setSummary(m)}if(this.changeCount=0,a.Z.getBoolean(this.options.captionAuto)){for(g=this.getHeaderValueList(),m="",f="",e=0;e<g.length;e++)m.length>0&&(f=","),m=m+f+g[e];var b=this.options.accessibility?". "+WebSquare.language.getMessage("Grid_caption_shortcut"):"";this.options.captionTitle?this.setCaption(this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+m+WebSquare.language.getMessage("Grid_caption")+b):this.setCaption(m+WebSquare.language.getMessage("Grid_caption")+b)}if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var y=document.getElementById(this.id).style.cssText,v=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:y,className:v}}if(this.startedDisplayNone||this._setVisibleRowNumFix(),this.options.noResultMessageVisibleAlways&&this.displayNoResultMessage(),this.options.groupbyZone){if(this.delayedDraw({}))return;this._drawGroupbyZone()}}catch(t){s.Y.printStackTrace(t,null,this)}},P.prototype.setDataList=function(){try{if(!this.successBinding&&(this._dataList=this.modelControl.getDataComp(this.options.dataList),this._dataList)){switch(this._grid=this,this._dataList.addChild(this),this.successBinding=!0,this._dataList.initializeType){case"linkedDataList":this._linkedDataList=this._dataList,this._dataList=this._linkedDataList._dataList,this._dataList?(this.dataList=new WebSquare.uiplugin.mappingController(this),o.q.extend(this,WebSquare.uiplugin.linkedMappingController.prototype)):(this.successBinding=!1,this._dataList={});break;case"dataList":this.dataList=new WebSquare.uiplugin.mappingController(this),this.dataList.mappingCommonAPI()}for(var t=0;t<this.oneRowDataLength;t++)this.getCellInfo(t).setDataListCellRefresh(this.getCellInfo(t).element);this.render&&this.notifyDataChanged({refreshScroll:!0})}}catch(t){s.Y.printStackTrace(t,null,this)}},P.prototype.resetDataList=function(){try{this.successBinding=!1,this.setDataList()}catch(t){s.Y.printStackTrace(t,null,this)}},P.prototype.serialize=function(){return this.focusedCell},P.prototype.restore=function(t){try{for(var e=0,i=t.length;e<i;e++)this._setFocusedCell(t[e].focusedRowIndex,t[e].focusedColIndex,null,{useShiftKey:!0})}catch(t){return s.Y.printStackTrace(t),!1}return!0},P.prototype.onComplete=function(){this.uncompleted||(this._setRedrawTextAreaColumn(),this.displayFixedColumnLine(),n.q.prototype.onComplete.call(this))},o.q.extend(P.prototype,h.prototype),o.q.extend(P.prototype,m.prototype),o.q.extend(P.prototype,f.prototype),o.q.extend(P.prototype,b.prototype),o.q.extend(P.prototype,y.prototype),o.q.extend(P.prototype,C.prototype),o.q.extend(P.prototype,x.prototype),
o.q.extend(P.prototype,I.prototype),o.q.extend(P.prototype,T.prototype),o.q.extend(P.prototype,L.prototype),o.q.extend(P.prototype,A.prototype),o.q.extend(P.prototype,D.prototype),o.q.extend(P.prototype,q.prototype),o.q.extend(P.prototype,M.prototype)},3925:function(t,e,i){"use strict";i.d(e,{b:function(){return l}});var o=i(2284),s=(i(5461),i(8971)),r=i(2338),a=i(1204),n=i(2256),l=function(t){this._grid=t};l.prototype.getRealRowIndex=function(t){try{var e;if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var i in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[i])return this._grid._dataList.getRealRowIndex(t);e=this._grid.groupbyStatus.groupedRowIndexArr[t]}else e=this._grid._dataList.getRealRowIndex(t);return e}catch(t){s.Y.printStackTrace(t)}},l.prototype.getTotalRow=function(){try{return this._grid._dataList.getTotalRow()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getTotalCol=function(){try{return this._grid.oneRowDataLength}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowCount=function(){try{return this._grid._dataList.getDataLength()}catch(t){s.Y.printStackTrace(t)}},l.prototype._getData=function(t,e){try{e=this._grid.getColumnID(e);var i=this._grid.cellInfoHash[e]||{options:{}};if((1!=this._grid.options.moveKeyEditModeAll||"checkbox"!=i.options.inputType&&"radio"!=i.options.inputType)&&this._grid.editEndBeforeGetData(),i&&"expression"==i.options.inputType)return i.getExpressionValue(t);var o=this._grid._dataList._getData(t,e);return null==o&&(o=""),o}catch(t){s.Y.printStackTrace(t)}},l.prototype.getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);return"2"==(i=null==i||void 0===i?"0":i+"")?this._getCellData(t,e,i):this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?this._getCellData(t,e,"0"===i?3:i):this._getCellData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype._getCellData=function(t,e,i){try{e=this._grid.getColumnID(e);if("2"==(i=null==i||void 0===i?"0":i+""))return this._grid._getCellDisplayData(t,e);var o=this._grid.getRealRowIndex(t);return"3"!=i&&null!=o&&(t=o),this._getData(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOriginalCellData=function(t,e){try{e=this._grid.getColumnID(e);return this._grid._dataList.getOriginalCellData(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getColCnt=function(){try{for(var t=0,e=this._grid.htmlInfo?this._grid.htmlInfo.head.rowArr[0]:this._grid.struct.head.rowArr[0],i=0;i<e.length;i++){var o=e[i];t+=parseInt(o.colSpan,10)||1}return t}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getColData=function(t,e){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColData(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowData=function(t,e){try{for(var i=[],o=0;o<this._grid.getColumnCount();o++)"displayData"!=e?i.push(this.getCellData(t,o)):i.push(this._grid._getCellDisplayData(t,o));return i}catch(t){s.Y.printStackTrace(t)}},l.prototype._getRowData=function(t,e){try{for(var i=[],o=0;o<this._grid.getColumnCount();o++)"displayData"!=e?i.push(this._getData(t,o)):i.push(this._grid._getDisplayData(t,o));return i}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDataRow=function(t){try{return this._grid._dataList.getDataRow(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getMatchedData=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedData(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedData=function(t,e,i,o,r){try{return this._grid._dataList.getUnmatchedData(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getMatchedColumnData=function(t,e,i,o,r,a){try{return this._grid._dataList.getMatchedColumnData(t,e,i,o,r,a)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedColumnData=function(t,e,i,o,r,a){try{return this._grid._dataList.getUnmatchedColumnData(t,e,i,o,r,a)}catch(t){s.Y.printStackTrace(t)}},
l.prototype.getMatchedIndex=function(t,e,i,o,r){try{return this._grid._dataList.getMatchedIndex(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedIndex=function(t,e,i,o,r){try{return this._grid._dataList.getUnmatchedIndex(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRangeData=function(t,e,i){try{var o=[];if(t>e){var r=e;e=t,t=r}t<0&&(t=0),e>this._grid.getDataLength()&&(e=this._grid.getDataLength());for(var a=t;a<e;a++)o=o.concat(this.getRowData(a,i));return o}catch(t){s.Y.printStackTrace(t)}},l.prototype.getAllData=function(){try{return this._grid._dataList.getAllData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getColumnDistinctDataArray=function(t){try{t=this._grid.getColumnID(t);return this._grid._dataList.getColumnDistinctDataArray(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRangeXML=function(t,e){try{return this._grid._dataList.getRangeXML(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getMatchedXML=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedXML(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedXML=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedXML(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowXML=function(t){try{return this._grid._dataList.getRowXML(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getAllXML=function(){try{return this._grid._dataList.getAllXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowJSON=function(t){try{return this._grid._dataList.getRowJSON(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getAllJSON=function(){try{return this._grid._dataList.getAllJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRangeJSON=function(t,e){try{return this._grid._dataList.getRangeJSON(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getMatchedJSON=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedJSON(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedJSON=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedJSON(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowArray=function(t){try{return this._grid._dataList.getRowArray(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getAllArray=function(){try{return this._grid._dataList.getAllArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRangeArray=function(t,e){try{return this._grid._dataList.getRangeArray(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getMatchedArray=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getMatchedArray(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUnmatchedArray=function(t,e,i,o,r){try{t=this._grid.getColumnID(t);return this._grid._dataList.getUnmatchedArray(t,e,i,o,r)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setCellData=function(t,e,i,o,r,a,n,l){try{e=this._grid.getColumnID(e);if(this._grid._linkedDataList){var h=this._grid._linkedDataList.filteredRowIndexArr[t];"number"!=typeof t&&(t=h)}this._setCellData(t,e,i,null,o,r,a,n,l)}catch(t){s.Y.printStackTrace(t)}},l.prototype._setCellData=function(t,e,i,a,n,l,h,d,c){try{var u=!1;if("object"==(0,o.A)(t)&&null!=t){e=t.colID,i=t.data,a=t.noDraw,n=t.direction,l=t.skipBroadCast,h=t.noEvent,d=t.excludeId,c=t.skipInstance,u=t.useRealRowIndex;var p=t.filteredRowIndex;t=null,t=p}null==i&&(i=""),null==this._grid.editedCell||this._grid.getCellOption(t,e,"embeddedInput")||this._grid.editedCell.handleCancelEdit();var g,m=this._grid._dataList.getTotalRow(),f=this._grid._dataList.getTotalCol();g=!0===u||this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList?t:this._grid.getRealRowIndex(t);var b=t,y="",v=(e=this._grid.getColumnID(e),
this._grid.getColumnIndex(e)),w=this._grid._dataList.getColumnIndex(e),S=this._grid._linkedDataList||this._grid.groupbyStatus.grouped?g:t;if(this._grid.isDrillDown&&this._grid._dataList.options.depthColumn?y=this.getCellData(g,e,"3"):S>=0&&S<m&&w>=0&&w<f&&(y=this.getCellData(t,e)),S>=0&&S<m&&w>=0&&w<f){var _=this._grid.cellInfoHash[this._grid.tdIdList[v]]||{options:{}},C=_.options.inputType||"text";if(("text"==C||"textImage"==C||"drilldown"==C)&&"all"==_.options.applyFormat&&!_.options.embeddedInput){var x=this._grid.getInput(_);y=_.formatter.format(y),y=x.validator.validateString(y)}var I=this._grid.getColumnOption(_.options.col_id,"dataType");if("bigDecimal"==I&&"string"==typeof i?i=WebSquare.bigDecimal(i).toString():"bigDecimal"==I&&($l("If dataType is bigDecimal, data must be entered to String.["+this.id+"]"),i=WebSquare.bigDecimal(i).toString()),i.toString().replace(/\r(\n)?/,"\n")!==y.toString().replace(/\r(\n)?/,"\n")){var T=t;if((this._grid._linkedDataList||this._grid.isDrillDown&&this._grid._dataList.options.depthColumn)&&(T=g),this._grid.groupbyStatus.grouped?this._grid._dataList._setCellData({filteredRowIndex:g,colID:e,value:i,direction:n,skipBroadCast:l,noEvent:h,excludeId:d,realRowIndex:!0,notifyRowIndex:t,skipInstance:c}):this._grid._dataList._setCellData(T,e,i,n,l,h,d,c),null==this._grid._dataList.getColumnID(e)&&this._grid.notifyCellChanged(b,v),r.f.fireEvent(this._grid,"onchange",t,v,i,y),"radio"==_.options.inputType&&_.options.groupName&&_.options.trueValue==i&&(_.resetOthers(t),this._grid.radioGroupRepChk[_.options.groupName]&&this.setCellData(t,_.options.groupName,_.options.groupValue)),this._grid.radioGroupRepChk[_.options.id]){for(var k=this._grid.getColumnCount(),L=0;L<k;L++){var A=this._grid.cellInfoHash[this._grid.tdIdList[L]]||{options:{}};if("radio"==A.options.inputType&&A.options.groupName==_.options.id&&A.options.groupValue==i){this.setCellData(t,L,A.options.trueValue,n,l,h,d,c);break}}L==k&&this._grid._resetRadioGroup(t,_.id,!1)}if(this._grid.isDrillDown)if(this._grid.drilldown.options.depthColumn==v)this._grid.notifyDataChanged({keepTop:!0}),0==this._grid.getDataLength()&&this._grid.removeFocusedCell(),this._grid.setScrollYHeight();else if("checkbox"==_.options.inputType&&_.options.setRecursive)for(var D=this._grid.drilldown.getChildRowArr(t,!0),W=0;W<D.length;W++)this._getData(D[W],v)!=i&&this._setCellData(D[W],v,i,a,n,l,h,d,c)}else null==this._grid.editedCell||a||this._grid.notifyCellChanged(b,v)}}catch(t){s.Y.printStackTrace(t)}},l.prototype.__setCellData=function(t,e,i,o,r,a,n){try{var l;e=this._grid.getColumnID(e);this._grid._linkedDataList?(l=this._grid._linkedDataList.filteredRowIndexArr[t],"number"!=typeof t&&(t=l)):l=this._grid.dataList.getRealRowIndex(t),this._grid.options&&"grid"===this._grid.options.pluginName&&this._grid.isDrillDown&&this._grid.options.drilldownRealRowIndex&&!this._grid._linkedDataList&&(t=l),this._setCellData(t,e,i,null,o,r,a,n)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList.setOriginalCellData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype._setOriginalCellData=function(t,e,i){try{e=this._grid.getColumnID(e);this._grid._dataList._setOriginalCellData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setColumnDefaultValue=function(t,e){try{t=this._grid.getColumnID(t);this._grid._dataList.setColumnDefaultValue(t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setRowData=function(t,e,i){try{this._grid._dataList.setRowData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setDataFile=function(t,e){try{t=this._grid._dataList.toArray(t);for(var i,o=[],r=0;r<this._grid.oneRowDataLength;r++){"expression"==(n=this._grid.getCellInfo(r)).options.inputType&&o.push(r)}i=t.length/this._grid.oneRowDataLength;for(r=0;r<o.length;r++)for(var a=0;a<i;a++){t[c=a*this._grid.oneRowDataLength+parseInt(o[r],10)]=""}for(r=0;r<this._grid.oneRowDataLength;r++){
var n,l=(n=this._grid.getCellInfo(r)).options.dataType;if("select"==n.options.inputType){var h=[];for(a=0;a<n.itemArr.length;a++){h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){t[c=a*this._grid.oneRowDataLength+r]=h[t[c]]}}else if("checkcombobox"==n.options.inputType){for(h=[],a=0;a<n.itemArr.length;a++){var d;h[(d=n.itemArr[a]).label]=d.value}for(a=0;a<i;a++){for(var c=a*this._grid.oneRowDataLength+r,u=[],p=t[c].split(n.separator),g=0;g<p.length;g++)u.push(h[p[g]]);t[c]=u.join(n.separator)}}if(""!=n.options.displayFormat)for(a=0;a<i;a++){var m,f=t[c=a*this._grid.oneRowDataLength+r],b=n.options.displayFormat;m="number"==l||"bigDecimal"==l?WebSquare.text.unformatCurrency(b,f):"date"==l?WebSquare.text.unformatDate(b,f):"time"==l?WebSquare.text.unformatTime(b,f):WebSquare.text.unformatText(b,f),t[c]=m}}this._grid._dataList.setData(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setData=function(t,e,i){try{this._grid._dataList.setData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.insertData=function(t,e){try{this._grid._dataList.insertData(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype._insertData=function(t,e,i){try{this._grid._dataList._insertData(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDataLength=function(){try{var t;if(this._grid.successBinding)if(this._grid.groupbyStatus&&this._grid.groupbyStatus.grouped){for(var e in this._grid.customFilterStatusObj)if(this._grid.customFilterStatusObj[e])return this._grid._dataList.getDataLength();t=this._grid.groupbyStatus.groupedRowIndexArr.length}else t=this._grid._dataList.getDataLength();else t=0;return t}catch(t){s.Y.printStackTrace(t)}},l.prototype.setRowXML=function(t,e,i){try{this._grid._dataList.setRowXML(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setXML=function(t,e,i){try{if("grid"==this._grid.initializeType&&i&&i.ref&&(this._grid.options.ref=i.ref,this._grid._dataList.options.ref=i.ref,i.baseNode&&(this._grid.options.baseNode=i.baseNode,this._grid._dataList.options.baseNode=i.baseNode),i.repeatNode&&(this._grid.options.repeatNode=i.repeatNode,this._grid._dataList.options.repeatNode=i.repeatNode),i.aliasDataCollection&&(this._grid.options.aliasDataCollection=i.aliasDataCollection,this._grid._dataList.options.aliasDataCollection=i.aliasDataCollection),this._grid._setRef(),this._grid._dataList.repeatNodeTagName=this.repeatNodeTagName),null==t)return void n.v.printLog("[WebSquare.uiplugin.mappingController.setXML] XML is null["+this.id+"]");var o=this._grid.xmlData2ArrData(t);if(void 0===o)return void n.v.printLog("[WebSquare.uiplugin.mappingController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");this.setData(o,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.insertXML=function(t,e){try{this._grid._dataList.insertXML(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setJSON=function(t,e){try{if(null==t)return void n.v.printLog("[WebSquare.uiplugin.mappingController.setJSON] JSON is null["+this.id+"]");var i=this._grid.jsonData2ArrData(t);if(void 0===i)return void n.v.printLog("[WebSquare.uiplugin.mappingController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.setData(i,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setRowJSON=function(t,e,i){try{this._grid._dataList.setRowJSON(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.insertJSON=function(t,e){try{this._grid._dataList.insertJSON(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.rowMoveUp=function(t){try{this._grid._dataList.rowMoveUp(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.rowMoveDown=function(t){try{this._grid._dataList.rowMoveDown(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.rowMoveUpFiltered=function(t){try{this._grid._dataList.rowMoveUpFiltered(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.rowMoveDownFiltered=function(t){try{this._grid._dataList.rowMoveDownFiltered(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.insertRow=function(t,e){try{e=e||{}
;return this._grid.options.insertIntoSortedRow&&(e.insertIntoSortedRow=this.options.insertIntoSortedRow),"grid"==this.initializeType&&this.options.ref&&1==this.repeatNodeTagNameFilter&&(t=null),this._grid._dataList.insertRow(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeRow=function(t,e){try{return this._grid._dataList.removeRow(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeRows=function(t){try{return this._grid._dataList.removeRows(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeAll=function(){try{return this._grid._dataList.removeAll()}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeRange=function(t,e){try{return this._grid._dataList.removeRange(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.reform=function(){try{this._grid._dataList.reform()}catch(t){s.Y.printStackTrace(t)}},l.prototype.undoRow=function(t){try{this._grid._dataList.undoRow(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype._undoRow=function(t){try{this._grid._dataList._undoRow(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.undoAll=function(){try{this._grid._dataList.undoAll()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowStatusValue=function(t){try{var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatusValue(e)}catch(t){s.Y.printStackTrace(t)}},l.prototype._getRowStatusValue=function(t){try{return this._grid._dataList._getRowStatusValue(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowStatus=function(t){try{var e=this._grid._getGroupbyDisplayRowIndex(t);return this._grid._dataList.getRowStatus(e)}catch(t){s.Y.printStackTrace(t)}},l.prototype._getRowStatus=function(t){try{return this._grid._dataList._getRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRowIndexByStatus=function(t){try{return this._grid._dataList.getRowIndexByStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInsertedData=function(){try{return this._grid._dataList.getInsertedData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInsertedXML=function(){try{return this._grid._dataList.getInsertedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInsertedJSON=function(){try{return this._grid._dataList.getInsertedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getInsertedArray=function(){try{return this._grid._dataList.getInsertedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDeletedData=function(){try{return this._grid._dataList.getDeletedData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDeletedXML=function(){try{return this._grid._dataList.getDeletedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDeletedJSON=function(){try{return this._grid._dataList.getDeletedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getDeletedArray=function(){try{return this._grid._dataList.getDeletedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRemovedXML=function(){try{return this._grid._dataList.getRemovedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRemovedJSON=function(){try{return this._grid._dataList.getRemovedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getRemovedArray=function(){try{return this._grid._dataList.getRemovedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getVoidData=function(){try{return this._grid._dataList.getVoidData()}catch(t){s.Y.printStackTrace(t)
}},l.prototype.getVoidXML=function(){try{return this._grid._dataList.getVoidXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getVoidJSON=function(){try{return this._grid._dataList.getVoidJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getVoidArray=function(){try{return this._grid._dataList.getVoidArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOnlyDeletedData=function(){try{return this._grid._dataList.getOnlyDeletedData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOnlyDeletedXML=function(){try{return this._grid._dataList.getOnlyDeletedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOnlyDeletedJSON=function(){try{return this._grid._dataList.getOnlyDeletedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getOnlyDeletedArray=function(){try{return this._grid._dataList.getOnlyDeletedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUpdatedData=function(){try{return this._grid._dataList.getUpdatedData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUpdatedXML=function(){try{return this._grid._dataList.getUpdatedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUpdatedJSON=function(){try{return this._grid._dataList.getUpdatedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getUpdatedArray=function(){try{return this._grid._dataList.getUpdatedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getModifiedData=function(){try{return this._grid._dataList.getModifiedData()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getModifiedXML=function(){try{return this._grid._dataList.getModifiedXML()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getModifiedJSON=function(){try{return this._grid._dataList.getModifiedJSON()}catch(t){s.Y.printStackTrace(t)}},l.prototype.getModifiedArray=function(){try{return this._grid._dataList.getModifiedArray()}catch(t){s.Y.printStackTrace(t)}},l.prototype._setRowStatus=function(t,e){try{return this._grid._dataList._setRowStatus(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype._initRowStatus=function(t){try{this._grid._dataList._initRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.initRowStatus=function(t){try{this._grid._dataList.initRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype._createRowStatus=function(t){try{this._grid._dataList._createRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype._updateRowStatus=function(t){try{this._grid._dataList._updateRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.removeRowStatus=function(t){try{return this._grid._dataList.removeRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.deleteRow=function(t){try{this._grid._dataList.deleteRow(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype._deleteRowStatus=function(t){try{this._grid._dataList._deleteRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.undeleteRow=function(t){try{this._grid._dataList.undeleteRow(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype._undeleteRowStatus=function(t){try{this._grid._dataList._undeleteRowStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.modifyAllStatus=function(t){try{this._grid._dataList.modifyAllStatus(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.modifyRangeStatus=function(t,e,i){try{var o=[],a=this.getDataLength()+1;if(0<=t&&e<a)for(var n=t;n<e;n++){var l=this.getRealRowIndex(n),h=this._setRowStatus(l,i);i!=h&&o.push({rowIndex:n,newRowStatus:i,oldRowStatus:h})}r.f.fireEvent(this,"onrowstatuschange",o),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){s.Y.printStackTrace(t)}},l.prototype.modifyMatchedStatus=function(t,e,i){try{this._grid._dataList.modifyMatchedStatus(t,e,i)}catch(t){s.Y.printStackTrace(t)}},l.prototype.modifyRowStatus=function(t,e){try{this._grid._dataList.modifyRowStatus(t,e)}catch(t){s.Y.printStackTrace(t)}},l.prototype.setColumnFilter=function(t,e,i,r){try{"object"!==(0,o.A)(t)||a.Z.isString(t)||(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.setColumnFilter(t,e,i,r):this._grid._dataList.setColumnFilter(t,e,i,r)
}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.removeColumnFilter=function(t){try{t=this._grid.getColumnID(t);this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilter(t,{internal:!0}):this._grid._dataList.removeColumnFilter(t,{internal:!0})}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.clearSortFilter=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSortFilter():this._grid._dataList.clearSortFilter()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.removeColumnFilterAll=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.removeColumnFilterAll():this._grid._dataList.removeColumnFilterAll()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setFilter=function(t){try{if(this._grid._linkedDataList)t.internal=!0,this._grid._linkedDataList.setFilter(t);else{if(t){var e=this._grid.getColumnID(t.sortIndex),i=this._grid.cellInfoHash[e]||{options:{}};if(t.isExpressionArr=[],t.cellInfoArr=[],t.gridId=this._grid.id,i&&"expression"==i.options.inputType&&"gridView"==this._grid.initializeType&&isNaN(this._grid._dataList.getColumnIndex(t.sortIndex))&&(t.fakeExpressionArr=this._grid.getFakeExpressionArr()),e){var o=e.split(" "),r=[];t.isCustomCol=[],t.sortLabel=[];for(var a=0;a<o.length;a++){i=this._grid.cellInfoHash[o[a]];var n=!1;if("custom"!=i.options.inputType||i.internal?"expression"==i.options.inputType?(t.isExpression=!0,t.isExpressionArr.push(!0)):t.isExpressionArr.push(!1):(n=!0,t.isExpressionArr.push(!1)),t.cellInfoArr.push(o[a]),n)if(t.isCustomCol.push(!0),t.customSortItemsetIdObj=[],i.options.sortLabel){for(var l=this.getTotalRow(),h={},d={},c=0;c<l;c++){var u=i.cellManagerHashByRowIndex[c]?i.cellManagerHashByRowIndex[c]:i;if("select"==u.options.inputType||"autoComplete"==u.options.inputType){var p=u.dataComp;if(p&&!h[p])"linkedDataList"==(g=this._grid.modelControl.getDataComp(p)).initializeType?h[p]=g._dataList.getAllJSON():h[p]=g.getAllJSON();d[c]=p,t.customSortItemsetIdObj[c]={label:u.itemsetObj.label,value:u.itemsetObj.value}}else d[c]=""}t.customCellDataListInfo=d,t.customDataListInfoHash=h,t.sortLabel.push(!0)}else r[a]=[],t.sortLabel.push(!1);else if(t.isCustomCol.push(!1),!i.options.sortLabel||"select"!=i.options.inputType&&"autoComplete"!=i.options.inputType)r[a]=[],t.sortLabel.push(!1);else{var g;if(i.dataComp)"linkedDataList"==(g=this._grid.modelControl.getDataComp(i.dataComp)).initializeType?r[a]=g._dataList.getAllJSON():r[a]=g.getAllJSON();else r[a]=i.getItemArray();t.sortItemsetIdObj={label:i.itemsetObj.label,value:i.itemsetObj.value},t.sortLabel.push(!0)}}r.length>0&&(t.sortItemArr=r)}}t.internal=!0,this._grid._dataList.setFilter(t),"outfocus"==t.focuseMode&&this._grid.setScrollTop(0)}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.removeFilter=function(t,e){try{t&&(t.internal=!0),this._grid._linkedDataList?this._grid._linkedDataList.removeFilter(t,e):this._grid._dataList.removeFilter(t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.clearFilter=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.clearFilter(t):this._grid._dataList.clearFilter(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.sort=function(t,e){try{this._grid._linkedDataList?this._grid._linkedDataList.sort(t,e):this._grid._dataList.sort(t,e)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.clearSort=function(){try{this._grid._linkedDataList?this._grid._linkedDataList.clearSort():(this._grid._dataList.clearSort(),"outfocus"==this._grid.options.filterFocusMode&&this._grid.setScrollTop(0))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.multisort=function(t){try{this._grid._linkedDataList?this._grid._linkedDataList.multisort(t):this._grid._dataList.multisort(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setMatchIgnoreCase=function(t){try{return this._grid._dataList.setMatchIgnoreCase(t)}catch(t){s.Y.printStackTrace(t)}},l.prototype.mappingCommonAPI=function(){try{
this._grid._getData=this._getData,this._grid._getRowData=this._getRowData,this._grid._setCellData=this._setCellData,this._grid._setOriginalCellData=this._setOriginalCellData,this._grid._insertData=this._insertData,this._grid._undoRow=this._undoRow,this._grid._getRowStatusValue=this._getRowStatusValue,this._grid._getRowStatus=this._getRowStatus,this._grid._setRowStatus=this._setRowStatus,this._grid._createRowStatus=this._createRowStatus,this._grid._updateRowStatus=this._updateRowStatus,this._grid._deleteRowStatus=this._deleteRowStatus,this._grid._undeleteRowStatus=this._undeleteRowStatus,this._grid.getRowJSON=this.getRowJSON,this._grid.getRowCount=this.getRowCount,this._grid.getCellData=this.getCellData,this._grid._getCellData=this._getCellData,this._grid.getOriginalCellData=this.getOriginalCellData,this._grid.getColData=this.getColData,this._grid.getRowData=this.getRowData,this._grid.getDataRow=this.getDataRow,this._grid.getMatchedData=this.getMatchedData,this._grid.getUnmatchedData=this.getUnmatchedData,this._grid.getMatchedColumnData=this.getMatchedColumnData,this._grid.getUnmatchedColumnData=this.getUnmatchedColumnData,this._grid.getMatchedIndex=this.getMatchedIndex,this._grid.getUnmatchedIndex=this.getUnmatchedIndex,this._grid.getRangeData=this.getRangeData,this._grid.getAllData=this.getAllData,this._grid.getColumnDistinctDataArray=this.getColumnDistinctDataArray,this._grid.getRangeXML=this.getRangeXML,this._grid.getMatchedXML=this.getMatchedXML,this._grid.getUnmatchedXML=this.getUnmatchedXML,this._grid.getRowXML=this.getRowXML,this._grid.getAllXML=this.getAllXML,this._grid.getRowJSON=this.getRowJSON,this._grid.getAllJSON=this.getAllJSON,this._grid.getRangeJSON=this.getRangeJSON,this._grid.getMatchedJSON=this.getMatchedJSON,this._grid.getUnmatchedJSON=this.getUnmatchedJSON,this._grid.getRowStatusValue=this.getRowStatusValue,this._grid.getRowStatus=this.getRowStatus,this._grid.getRowIndexByStatus=this.getRowIndexByStatus,this._grid.getInsertedIndex=this.getInsertedIndex,this._grid.getUpdatedIndex=this.getUpdatedIndex,this._grid.getDeletedIndex=this.getDeletedIndex,this._grid.getModifiedIndex=this.getModifiedIndex,this._grid.getInsertedData=this.getInsertedData,this._grid.getInsertedXML=this.getInsertedXML,this._grid.getInsertedJSON=this.getInsertedJSON,this._grid.getDeletedData=this.getDeletedData,this._grid.getDeletedXML=this.getDeletedXML,this._grid.getDeletedJSON=this.getDeletedJSON,this._grid.getVoidData=this.getVoidData,this._grid.getVoidXML=this.getVoidXML,this._grid.getVoidJSON=this.getVoidJSON,this._grid.getOnlyDeletedData=this.getOnlyDeletedData,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedXML=this.getOnlyDeletedXML,this._grid.getOnlyDeletedJSON=this.getOnlyDeletedJSON,this._grid.getUpdatedData=this.getUpdatedData,this._grid.getUpdatedXML=this.getUpdatedXML,this._grid.getUpdatedJSON=this.getUpdatedJSON,this._grid.getModifiedData=this.getModifiedData,this._grid.getModifiedXML=this.getModifiedXML,this._grid.getModifiedJSON=this.getModifiedJSON,this._grid.setMatchIgnoreCase=this.setMatchIgnoreCase}catch(t){s.Y.printStackTrace(t,null,this)}}},3058:function(t,e,i){"use strict";i.r(e),i.d(e,{group:function(){return c}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2256),h=i(2406),d=i(541),c=function(t,e,i){h.q.call(this,t,e,i)};o.q.extend(c.prototype,h.q.prototype),o.q.extend(c.prototype,d.v.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.group",pluginName:"group",userEvents:["ondragstart","ondrag","ondragend","ondragenter","ondragover","ondragleave","ondrop","ontooltipshow","ontooltiphide"],systemEvents:["onblur","onclick","ondblclick","onfocus","onmousedown","onmouseout","onmouseover","onmouseup","onmousemove","onmouseleave","onmouseenter"],parseChild:!0,parseAttributes:!0,tagname:"div",text:"",lazyDraw:!1,role:"",initStyle:!1,keepDisabled:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,tooltipPositionX:"",tooltipPositionY:"",ignoreDisabled:!1},
c.prototype.initialize=function(t){this.bindDrag=!1,this.bindDrop=!1,this.tooltipPositionParse=!1,this.isTableLayout=!1},c.html5={article:"div",aside:"div",bdi:"div",details:"div",dialog:"div",figcaption:"div",figure:"div",footer:"div",header:"div",main:"div",mark:"div",menuitem:"div",meter:"div",nav:"div",progress:"div",rp:"div",rt:"div",ruby:"div",section:"div",summary:"div",time:"div",wbr:"div"},c.prototype.toHTML=function(){try{var t=[],e=""!=this.options.role?"role='"+this.options.role+"'":"",i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",a=this.options.tagname,l=this.options.headers?" headers='"+this.options.headers+"'":"";if(s.I.browserCheck.ie){var h=s.I.browserVersion();"6"!=h&&"7"!=h&&"8"!=h||WebSquare.uiplugin.group.html5[a]&&(a=WebSquare.uiplugin.group.html5[a])}if(l&&n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/applyScopeHeaders/@value")))l=" headers='"+(this.scope_id?this.scope_id+"_":"")+this.options.headers+"'";if(t.push("<"+a+" id='"+this.id+"' "+i+" class='w2group "+this.options.className+"' "+e+" "+l+" "+this.getAttributesString()+o+">"),!this.options.lazyDraw){var d=!1,c=this.getChildren();if(c.length<=1){var u=s.I.getConfiguration("/WebSquare/group/NotapplyUseLocaleTagName/@value"),p=!0;if(u)for(var g=u.split(","),m=0;m<g.length;m++)if(g[m].toLowerCase()==a.toLowerCase()){p=!1;break}p&&this.options.useLocale&&this.options.localeRef?(t.push(this.getLocaleValue(this.options.localeRef)),d=!0):1===c.length&&(t.push(c[0].toHTML()),c[0].element&&3==c[0].element.nodeType&&(d=!0))}else for(m=0;m<c.length;m++)t.push(c[m].toHTML()),c[m].element&&3==c[m].element.nodeType&&(d=!0);d||t.push(this.options.text)}return t.push("</"+a+">"),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._findParentControl=function(){try{for(var t,e=this.scope_obj;null!=e&&e!==e.scope_obj;e=e.scope_obj)if(e.options.adaptiveFrame){t=e;break}return t}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAction=function(){if(this.setDragDrop(),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}var i,o=WebSquare.BootLoader.fullViewed||!1,l=n.Z.fullViewed||!1;if(this.isTableLayout=!("table"!=this.options.tagname||!this.hasClass("w2tb")),this.element&&!this.element.getAttribute("adaptive")&&this.isTableLayout&&s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")&&(i=s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")),!(o||l||"table"!=this.options.tagname||"crosstab"!=this.options.adaptive&&"layout"!=this.options.adaptive&&"crosstab"!=i&&"layout"!=i)){for(var h=this.getElementById(this.id).getElementsByTagName("tr"),d=0;d<h.length;d++){var c=h[d].className;c.indexOf("w2group")>-1&&-1==c.indexOf("w2tb_tr")&&(h[d].className=c+" w2tb_tr")}this.setAdaptive();var u=this._findParentControl();u?u._resizeChildComp.push(this.uuid):this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive)),this.invoke("setSetting","")}if("td"==this.options.tagname&&!(n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10)){var p,g=this.element&&null!=this.element.previousElementSibling&&"w2:attributes"!=this.element.previousElementSibling.tagName,m=null!=this.render.previousSibling;if(g&&"TH"===this.render.previousElementSibling.tagName||m&&"TH"===this.render.previousSibling.tagName)p=g?null!=this.render.previousElementSibling.textContent?this.render.previousElementSibling.textContent:this.render.previousElementSibling.innerText||"":null!=this.render.previousSibling.textContent?this.render.previousSibling.textContent:this.render.previousSibling.innerText||"",n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?this.render.setAttribute("data-title",p.wq_trim()):this.render.setAttribute("data-title",p);else this.addClass("w2tb_noTH")}
if("a"==this.options.tagname){var f=this.uuid;if(!n.Z.isIEAllVersion()){var b=this.getAttributeNode("disabled");"true"!==b&&"disabled"!==b||this.addClass(this.render,"w2anchor_disabled")}n.Z.isIE()&&n.Z.browserVersion()<10&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){var e=WebSquare.idCache[f];e.getDisabled()&&a.f.preventDefault(t);try{e.render&&null!=e.render.getAttribute("href").toString().toLowerCase().match(/javascript[\s]*:[\s]*void/)&&a.f.preventDefault(t)}catch(t){r.Y.printStackTrace(t,null,this)}})))}this.options.tooltipDisplay&&!this.options.tooltipFormatter&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)));var y=n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/captionAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.Z.getBoolean(s.I.getConfiguration("/WebSquare/tableLayout/captionAuto/@value")),v=n.Z.getBoolean(this.options.captionAuto),w=n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/summaryOnlyAuto/@value"))||"table"==this.options.tagname&&this.hasClass("w2tb")&&n.Z.getBoolean(s.I.getConfiguration("/WebSquare/tableLayout/summaryOnlyAuto/@value")),S=n.Z.getBoolean(this.options.summaryOnlyAuto),_="table"==this.options.tagname&&(y&&v||y&&null==this.options.captionAuto||1==v),C="table"==this.options.tagname&&(w&&S||w&&null==this.options.summaryOnlyAuto||1==S);if(_){var x=this._getHeaderTitleList(this.render);this.options.captionTitle?this._setCaption(this.render,this.options.captionTitle+WebSquare.language.getMessage("Grid_caption2")+x+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle):this._setCaption(this.render,x+WebSquare.language.getMessage("Grid_caption"),this.options.captionTitle)}if(C){x=this._getHeaderTitleList(this.render);this._setSummary(this.render,x)}"table"!=this.options.tagname||this.render.getAttribute("summary")||this.render.removeAttribute("summary")},c.prototype.draw=function(){try{var t=[],e=this.getChildren();if(e.length>0&&e[0].render)return;for(var i=0;i<e.length;i++)t.push(e[i].toHTML());this.render.innerHTML=t.join("");for(i=0;i<e.length;i++)e[i].activate(),e[i].onComplete()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{this.init(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.init=function(t){try{t=o.q.extend({excludePlugin:"",excludeId:"",fireEvent:!1,recursive:!1},t||{});for(var e=this.getChildren().slice(0).reverse();e.length>0;){var i=e.pop();if(i.setInitValue&&-1==(" "+t.excludePlugin+" ").indexOf(" "+i.options.pluginName+" ")&&-1==(" "+t.excludeId+" ").indexOf(" "+i.id+" ")&&i.setInitValue(t),t.recursive)for(var s=0;s<i.childControlList.length;s++)e.push(i.childControlList[s])}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.invoke=function(t,e,i,o){try{return h.q.prototype.invoke.call(this,t,e,i,o)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t,e){try{if(t=n.Z.getBoolean(t),!0!==this.options.ignoreDisabled&&!0!==n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/ignoreDisabled/@value"))&&(h.q.prototype.setDisabled.call(this,t),"a"==this.options.tagname&&(t?this.addClass(this.render,"w2anchor_disabled"):this.removeClass(this.render,"w2anchor_disabled"))),this.options.keepDisabled){if(t){this.disabledComps=[];l=0;for(var i=this.childControlList.length;l<i;l++){(d=this.childControlList[l]).getDisabled&&!0===d.getDisabled()&&this.disabledComps.push(d)}}for(l=0;l<this.childControlList.length;l++){d=this.childControlList[l];for(var o=!1,a=0;a<this.disabledComps.length;a++)if(d===this.disabledComps[a]){o=!0;break}o||d.setDisabled(t,e)}}else for(var l=0;l<this.childControlList.length;l++){var d;(d=this.childControlList[l]).setDisabled&&"stop"!=d.activeStatus&&d.setDisabled(t,e)}}catch(t){r.Y.printStackTrace(t)}return t},
c.prototype.getDisabled=function(){try{return this.options&&this.options.disabled}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getAttributeNode=function(t){try{return h.q.attributes.getAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAttributeNode=function(t,e){try{h.q.attributes.setAttributeNode.call(this,t,e)}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeAttributeNode=function(t){try{h.q.attributes.removeAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAdaptive=function(){try{var t=parseInt(this.options.adaptiveThreshold)||480;this.element&&!this.element.getAttribute("adaptiveThreshold")&&this.isTableLayout&&s.I.getConfiguration("/WebSquare/tableLayout/adaptiveThreshold/@value")&&(t=s.I.getConfiguration("/WebSquare/tableLayout/adaptiveThreshold/@value"),t=parseInt(t)||480),n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10||(n.Z._getBrowserWidth()<=t?this.addAdaptive():this.removeAdaptive())}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAdaptiveFrame=function(t){try{var e=parseInt(this.options.adaptiveThreshold)||480;this.element&&!this.element.getAttribute("adaptiveThreshold")&&this.isTableLayout&&s.I.getConfiguration("/WebSquare/tableLayout/adaptiveThreshold/@value")&&(e=s.I.getConfiguration("/WebSquare/tableLayout/adaptiveThreshold/@value"),e=parseInt(e)||480),n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10||(t&&0<t.newWidth&&t.newWidth<=e?this.addAdaptive():this.removeAdaptive())}catch(t){r.Y.printStackTrace(t)}},c.prototype.addAdaptive=function(){try{if(!(n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10)){var t,e=this.options.adaptive;if(this.element&&!this.element.getAttribute("adaptive")&&this.isTableLayout&&s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")&&(e=s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")),"layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),!this.checkAdaptiveValid(e))return;this.setAdaptiveText(),this.hasClass(t)||this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e),"w2tb_adaptive_crosstab"==t&&this._setScope(!0)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeAdaptive=function(){try{if(!(n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10)){var t,e=this.options.adaptive;this.element&&!this.element.getAttribute("adaptive")&&this.isTableLayout&&s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")&&(e=s.I.getConfiguration("/WebSquare/tableLayout/adaptive/@value")),"layout"==e?t="w2tb_adaptive_layout":"crosstab"==e&&(t="w2tb_adaptive_crosstab"),this.hasClass(t)&&this.removeClass(t),this.removeAdaptiveHeight(e),"w2tb_adaptive_crosstab"==t&&this._setScope(!1)}}catch(t){r.Y.printStackTrace(t)}},c.prototype._setScope=function(t){try{for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=0;i<e.length;i++){var o=e[i],s=o.getAttribute("scope");t&&"row"===s?o.setAttribute("scope","col"):t||"col"!=s||o.setAttribute("scope","row")}}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAdaptiveHeight=function(t){try{if("crosstab"==t){var e,i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr");document.getElementById(this.id).getElementsByTagName("thead")[0]&&(e=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var o=0,s=0;s<i.length;s++)for(var a=i[s].getElementsByClassName("w2tb_td"),l=0;l<a.length;l++){var h=a[l].offsetHeight;o=o>=h?o:h}for(s=0;s<i.length;s++){var d;a=i[s].getElementsByClassName("w2tb_td");d=e?e.length<=s?e[e.length-1].getElementsByClassName("w2tb_th"):e[s].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th");var c=parseInt(n.Z.getComponentById(d[0].id).getStyle("padding-top")),u=parseInt(n.Z.getComponentById(d[0].id).getStyle("padding-bottom"));for(l=0;l<d.length;l++){
var p=a[l],g=d[l],m=g.offsetHeight,f=parseInt(n.Z.getComponentById(p.id).getStyle("padding-top")),b=parseInt(n.Z.getComponentById(p.id).getStyle("padding-bottom"));m>o?n.Z.getComponentById(p.id).setSize("height",m-(f+b+1)):m<o&&(n.Z.getComponentById(g.id).setSize("height",o-(c+u+1)),n.Z.getComponentById(p.id).setSize("height",o-(c+u+1)))}}this.render.setAttribute("data-oldwidth",this.render.style.width),this.options.adaptiveWidth?this.render.style.width=this.options.adaptiveWidth:this.render.style.width=e?"100%":i.length*p.offsetWidth+"px"}else if("layout"==t)for(a=document.getElementById(this.id).getElementsByClassName("w2tb_td"),s=0;s<a.length;s++){var y=a[s].getAttribute("data-title");if(y){var v=n.Z.getRulerSpan();v.style.padding=window.getComputedStyle(a[s],":before").getPropertyValue("padding"),v.style["padding-top"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-top"),v.style["padding-right"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-right"),v.style["padding-bottom"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-bottom"),v.style["padding-left"]=window.getComputedStyle(a[s],":before").getPropertyValue("padding-left"),v.style.width=window.getComputedStyle(a[s],":before").getPropertyValue("width"),v.style["border-width"]=window.getComputedStyle(a[s],":before").getPropertyValue("border-width"),v.style["line-height"]=window.getComputedStyle(a[s],":before").getPropertyValue("line-height"),v.style["white-space"]=window.getComputedStyle(a[s],":before").getPropertyValue("white-space"),v.style["word-wrap"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-wrap"),v.style["word-break"]=window.getComputedStyle(a[s],":before").getPropertyValue("word-break"),v.style["font-weight"]=window.getComputedStyle(a[s],":before").getPropertyValue("font-weight"),v.innerHTML=y,v.offsetHeight>a[s].offsetHeight&&(a[s].style.height=parseInt(window.getComputedStyle(v).getPropertyValue("height"),10)+"px"),v.style.top="-10000px",v.style.left="-10000px",v.style.visibility="hidden"}}}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height");var a=this.render.getAttribute("data-oldwidth");a&&(this.render.style.width=a)}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){r.Y.printStackTrace(t)}},c.prototype.setAdaptiveLabel=function(t){try{if(!(n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10)){var e=this.render.nextSibling||this.render.nextElementSibling;null!=e&&"TD"==e.tagName&&null!=e.getAttribute("data-title")&&(e.setAttribute("data-title",t),this.render.innerHTML=t)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.checkAdaptiveValid=function(t){try{var e=!0;if("crosstab"===t){var i,o=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr");document.getElementById(this.id).getElementsByTagName("thead")[0]&&(i=document.getElementById(this.id).getElementsByTagName("thead")[0].getElementsByClassName("w2tb_tr"));for(var s=0;s<o.length;s++){var a=o[s].getElementsByClassName("w2tb_td"),n=o[s].getElementsByClassName("w2tb_th");if(a.length!==n.length){e=!1;break}}if(!e&&i){e=!0;for(s=0;s<o.length;s++){a=o[s].getElementsByClassName("w2tb_td");if(n=i.length<=s?i[i.length-1].getElementsByClassName("w2tb_th"):i[s].getElementsByClassName("w2tb_th"),a.length!==n.length){e=!1;break}}}}return e||l.v.printLog("warning : tableLayout cannot support crosstab. ["+this.getOriginalID()+"]"),e}catch(t){r.Y.printStackTrace(t)}},c.prototype.setReadOnly=function(t){try{this.options.readOnly=t,this.invoke("setReadOnly",t)}catch(t){r.Y.printStackTrace(t)}},
c.prototype._setCaption=function(t,e,i){try{var o=t.getElementsByTagName("caption")[0];if(o&&o.parentNode==t)o.innerHTML=e;else{(o=document.createElement("caption")).innerHTML=e;var s=t.getElementsByTagName("colgroup")[0];s.parentNode.insertBefore(o,s)}if(i){var a=n.Z.getDataPrefix("captiontitle");o.setAttribute(a,i)}var l=o.className;l&&""!=l?this.addClass(o,"setcaption"):o.className="setcaption"}catch(t){r.Y.printStackTrace(t)}},c.prototype.setCaptionAuto=function(t){try{for(var e=this.render.getElementsByTagName("TABLE"),i=[],o=e.length,s=0;s<o;s++)i[s]=e[s];i[o]=this.render;var a=n.Z.getDataPrefix("captiontitle");for(s=0;s<o+1;s++){var l=this._getHeaderTitleList(i[s]),h="";t?h=t:i[s].caption&&(h=i[s].caption.getAttribute(a)),h?this._setCaption(i[s],h+WebSquare.language.getMessage("Grid_caption2")+l+WebSquare.language.getMessage("Grid_caption"),h):this._setCaption(i[s],l+WebSquare.language.getMessage("Grid_caption"))}}catch(t){r.Y.printStackTrace(t)}},c.prototype._getHeaderTitleList=function(t){try{var e=[],i="",o=[],s=[],a=[],n="",l=t.getElementsByTagName("tbody"),h=t.getElementsByTagName("thead"),d=0,c=0;if(l.length>1){for(var u=0;u<l.length;u++)if(l[u].parentNode==t)for(var p=l[u].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==l[u]&&(s[d++]=p[g])}else l[0]&&(s=l[0].getElementsByTagName("th"));if(h.length>1){for(u=0;u<h.length;u++)if(h[u].parentNode==t)for(p=h[u].getElementsByTagName("th"),g=0;g<p.length;g++)p[g].parentNode.parentNode==h[u]&&(a[c++]=p[g])}else h[0]&&(a=h[0].getElementsByTagName("th"));o=a;for(var m=0;m<o.length;m++){e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}o=s;for(m=0;m<o.length;m++){var f;e.length>0&&(n=","),null!=(f=o[m]).innerText&&""!=f.innerText?e[m]=f.innerText:null!=f.textContent&&""!=f.textContent?e[m]=f.textContent:e[m]=f.innerHTML,e[m]=e[m].replace(/(<([^>]+)>)/gi,"").trim(),""!=e[m]&&(i=i+n+e[m])}return i}catch(t){r.Y.printStackTrace(t)}},c.prototype._setSummary=function(t,e){try{t.setAttribute("summary",e)}catch(t){r.Y.printStackTrace(t)}},c.prototype.setSummaryOnlyAuto=function(){try{for(var t=[],e=this.render.getElementsByTagName("TABLE"),i=e.length,o=0;o<i;o++)t[o]=e[o];t[i]=this.render;for(o=0;o<i+1;o++){var s=this._getHeaderTitleList(t[o]);this._setSummary(t[o],s)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.hideTooltip=function(){try{n.Z.setTimeout((function(){this.tooltip&&this.tooltip.setStyle("display","none")}),{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{n.Z.clearTimeout(this.id+"_timeShowTooltip"),n.Z.clearTimeout(this.id+"_timeHideTooltip"),n.Z.setTimeout(this._showTooltip,{key:this.id+"_timeShowTooltip",delay:1e3*this.options.tooltipTime,caller:this,args:[t,e,i]})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.bind=function(t,e){try{h.q.prototype.bind.call(this,t,e),this.setDragDrop()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDragDrop=function(){var t=!1,e=!1;if(null!=this.options.xmlEvents){for(var i=0;i<this.userEventList.length;i++){switch(this.userEventList[i].name){case"ondragstart":case"ondrag":case"ondragend":t=!0;break;case"ondragenter":case"ondragover":case"ondragleave":case"ondrop":e=!0}}t&&!this.bindDrag&&(n.Z.isTouchDevice()&&(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),
this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd)),this.bindDrag=!0),e&&!this.bindDrop&&(WebSquare.dragdrop2.droppable[this.uuid]={over:!1},this.bindDrop=!0)}},c.prototype.finalize=function(){this.bindDrag=!1,this.bindDrop=!1,WebSquare.dragdrop2.droppable[this.uuid]=null,delete WebSquare.dragdrop2.droppable[this.uuid],this.options&&this.options.udcName&&a.f.fireEvent(this,"ondestroyed")},c.prototype.handleTouchStart=function(t){t.touches&&1!=t.touches.length||(this.setUserData("dragStatus","stop"),WebSquare.getBody().addClass("w2noselect"),n.Z.emptySelection())},c.prototype.handleTouchMove=function(t){if(!t.touches||1==t.touches.length){var e=this.getUserData("dragStatus");if("stop"!=e&&"move"!=e||!this.getUserData("draggable"))return;s.I.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:30,max:30}),a.f.preventDefault(t)}},c.prototype._handleTouchMove=function(t){var e=this.getUserData("dragStatus");if(("stop"==e||"move"==e)&&this.getUserData("draggable")){var i=t.touches?t.touches[0].pageX:t.clientX,o=t.touches?t.touches[0].pageY:t.clientY;if(i+=document.body.scrollLeft,o+=document.body.scrollTop,"stop"==e){var r=function(t){for(var e in t)if(null!=WebSquare.idCache[e]){var i=WebSquare.idCache[e].render,o=WebSquare.style.getAbsoluteTop(i),s=WebSquare.style.getAbsoluteLeft(i);t[e].position={top:o,left:s,bottom:o+i.offsetHeight,right:s+i.offsetWidth}}};r(WebSquare.dragdrop2.droppable),r(WebSquare.dragdrop2.scrollable),this.setUserData("dragStatus","move"),a.f.fireEvent(this,"ondragstart",i,o)}for(var n in a.f.fireEvent(this,"ondrag",i,o),WebSquare.dragdrop2.scrollable){var l=WebSquare.dragdrop2.scrollable[n],h=WebSquare.idCache[n];if(null!=h){var d,c,u=l.position,p=h.options.dragScrollSize;if(u.left<=i&&i<=u.right&&(u.top<=o&&o<=u.top+p?(d="up",c=h.render.clientHeight*(p-(o-u.top))/p+WebSquare.dragdrop2.scrollByDragSpeed):u.bottom-p<=o&&o<=u.bottom&&(d="down",c=h.render.clientHeight*(p-(u.bottom-o))/p+WebSquare.dragdrop2.scrollByDragSpeed)),null==d)l.scroll=!1,s.I.clearTimer(h.id+"_setSlideByDrag"),s.I.clearTimer(h.id+"_slideByDrag");else{var g=l.scroll?50:WebSquare.dragdrop2.scrollByDragDelay;s.I.setTimer((function(t,e,s){var r=WebSquare.idCache[s],n=r.getScrollTop(),l="up"==t?0:r.getMaxScrollTop();n!=l&&(r.scroll=!0,WebSquare.style.animate(r,(function(t){var e=parseInt(n+t*(l-n),10),s=e-this.getScrollTop();for(var r in this._scrollTo(null,e),WebSquare.dragdrop2.droppable){for(var h=WebSquare.idCache[r],d=!1;h=h.parentControl;)if(h==this){d=!0;break}d&&(WebSquare.dragdrop2.droppable[r].position.top-=s,WebSquare.dragdrop2.droppable[r].position.bottom-=s)}for(var c in WebSquare.dragdrop2.droppable){var u=WebSquare.dragdrop2.droppable[c],p=u.position;null!=WebSquare.idCache[c]&&(p.left<=i&&i<=p.right&&p.top<=o&&o<=p.bottom?(u.over||(u.over=!0,a.f.fireEvent(WebSquare.idCache[c],"ondragenter")),u.drop=!1===a.f.fireEvent(WebSquare.idCache[c],"ondragover")):u.over&&(u.over=!1,u.drop=!1,a.f.fireEvent(WebSquare.idCache[c],"ondragleave")))}}),{key:r.id+"_slideByDrag",easing:"linear",duration:1e3/e*Math.abs(l-n)}))}),{key:h.id+"_setSlideByDrag",delay:g,args:[d,c,n]})}}}for(var m in WebSquare.dragdrop2.droppable){var f=WebSquare.dragdrop2.droppable[m];u=f.position;null!=WebSquare.idCache[m]&&(u.left<=i&&i<=u.right&&u.top<=o&&o<=u.bottom?(f.over||(f.over=!0,a.f.fireEvent(WebSquare.idCache[m],"ondragenter")),f.drop=!1===a.f.fireEvent(WebSquare.idCache[m],"ondragover")):f.over&&(f.over=!1,f.drop=!1,a.f.fireEvent(WebSquare.idCache[m],"ondragleave")))}}},c.prototype.handleTouchEnd=function(t){var e=this.getUserData("dragStatus","move");WebSquare.getBody().removeClass("w2noselect");var i=!1;if(n.Z.isChrome()||n.Z.isOpera()){
var o=this.event.getTargetIterator(t,this.render);o.next()&&("INPUT"==o.getElement().tagName||o.match("w2input_focus"))&&(i=!0)}if(i||n.Z.emptySelection(),"pass"!=e){for(var r in WebSquare.dragdrop2.droppable)WebSquare.dragdrop2.droppable[r].over&&WebSquare.dragdrop2.droppable[r].drop&&null!=WebSquare.idCache[r]&&a.f.fireEvent(WebSquare.idCache[r],"ondrop",this),WebSquare.dragdrop2.droppable[r].over=!1,WebSquare.dragdrop2.droppable[r].drop=!1;for(var l in a.f.fireEvent(this,"ondragend"),this.render&&this.setUserData("dragStatus","pass"),WebSquare.dragdrop2.scrollable)WebSquare.dragdrop2.scrollable[l].scroll=!1,s.I.clearTimer(WebSquare.idCache[l].id+"_setSlideByDrag"),s.I.clearTimer(WebSquare.idCache[l].id+"_slideByDrag")}},c.prototype.handleMouseoverEvent=function(t){try{var e=a.f.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,n=e.offsetHeight,h=20,d=n;try{this.options.tooltipPositionX&&(h=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,n)),this.options.tooltipPositionY&&(d=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,n))}catch(t){l.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore options and apply default values. ["+this.id+"]"),r.Y.printStackTrace(t,null,this)}if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var c=this.toolTipRuler.offsetWidth,u=e.clientWidth;if(3!=i.nodeType){var p=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");c-=parseInt(p||"0",10),c-=parseInt(g||"0",10),u-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(u<c){var m=WebSquare.style.getAbsoluteLeft(e)+h,f=WebSquare.style.getAbsoluteTop(e)+d,b=i.innerText.wq_trim();document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(b=this.options.tooltipItemLabel),this.showTooltip(m,f,b)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),this.hideTooltip()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAdaptiveText=function(t){try{if("table"!==this.options.tagname)return;for(var e=this.render.getElementsByTagName("td"),i=0;i<e.length;i++){var o=e[i];if(o.previousSibling&&"TH"===o.previousSibling.tagName){var a=null!=o.previousSibling.textContent?o.previousSibling.textContent:o.previousSibling.innerText||"";n.Z.getBoolean(s.I.getConfiguration("/WebSquare/group/adaptive/trimText/@value"))?o.setAttribute("data-title",a.wq_trim()):o.setAttribute("data-title",a)}}}catch(t){r.Y.printStackTrace(t,null,this)}}},8862:function(t,e,i){"use strict";i.r(e),i.d(e,{image:function(){return h}});var o=i(5461),s=(i(5375),i(8971)),r=i(2338),a=i(1204),n=i(2256),l=i(2406),h=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.image",pluginName:"image",systemEvents:["onabort","onerror","onblur","onclick","ondblclick","onfocus","onmousedown","onmouseup","onmouseout","onmouseover","onmousemove"],src:"",alt:"",usemap:"",title:"",longdesc:"",msaName:"",tabIndex:"",accessibility:!1},h.prototype.initialize=function(t){},h.prototype.toHTML=function(){try{
var t=[],e=this.options.src?this.getImageURL(this.options.src):"",i=""==this.options.title?"":"title='"+this.options.title+"'",o=""==this.options.usemap?"":"usemap='"+this.options.usemap+"'",r=""==this.options.longdesc?"":"longdesc='"+this.options.longdesc+"'",a=""==this.options.style?"":"style='"+this.options.style+"'",n=this.options.accessibility||""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",l="";if("$empty"==this.options.alt)var h="alt=''";else h=""==this.options.alt?"":"alt='"+this.options.alt+"'";return this.options.onerror&&(l=' onerror="('+this.options.onerror+').call(this,event);" '),t.push("<img id='"+this.id+"' src='"+e+"' "+a+" "+n+" class='w2image "+this.options.className+"' "+h+" "+i+" "+o+" "+r+" "+l+" />"),t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{a.Z.isIE(6)||a.Z.isIE(7)||a.Z.isIE(8)||a.Z.isIE(9)||(this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,this.handleDragOverEvent)),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,this.handleDropEvent))),this.refresh()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setSrcNM(t)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSrc=function(t){try{var e="";t&&(e=this.getImageURL(t)),this.render.src=e}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSrcNM=function(t){try{return this.setSrc(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getSrc=function(){try{return this.render.src}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setLongdesc=function(t){try{this.render.longDesc=t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getLongdesc=function(){try{return this.render.longDesc}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setAlt=function(t){try{this.render.alt=t}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getAlt=function(){try{return this.render.alt}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)1==e?(this.setOpacity(.3),this.addClass(this.render,"w2image_disabled")):(this.setOpacity(1),this.removeClass(this.render,"w2image_disabled"))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleDropEvent=function(t){try{r.f.stopEvent(t);var e=t.dataTransfer.files[0],i=new FileReader,o=this;i?(i.onload=function(t){o.setSrc(t.target.result)},i.readAsDataURL(e)):n.v.printLog("NOT SUPPORT HTML5 FILE API["+this.id+"]")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleDragOverEvent=function(t){try{r.f.stopEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}}},1018:function(t,e,i){"use strict";i.r(e),i.d(e,{input:function(){return p}});var o=i(2284),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(2256),d=i(2406),c=i(4860),u=i(541),p=function(t,e,i){d.q.call(this,t,e,i)};s.q.extend(p.prototype,d.q.prototype),s.q.extend(p.prototype,c.G.prototype),s.q.extend(p.prototype,u.v.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.input",pluginName:"input",serializable:!0,parseAttributes:!0,userEvents:["onfocus","onblur","onbeforeedit","oneditend","onafteredit","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onkeydown","oninput","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,valueType:"",type:"text",editType:"",dataType:"text",ioFormat:"",ioFormatter:"",displayFormat:"",displayFormatter:"",formatArray:"",applyFormat:"display",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",
copyOnReadOnly:"",maskFormat:"",ltrim:!1,rtrim:!1,trim:!1,mandatory:!1,maxlength:"-1",maxLength:"-1",minlength:-1,adjustMaxLength:!1,useMaxLength:!1,allowChar:"",ignoreChar:"",byteCheckIgnoreChar:"",byteCheckIgnoreCharType:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validateOnCheckMaxByteLength:!1,validateOnInput:!1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,onFocusStyle:"",onFocusClass:"w2input_focus",readOnlyClass:"w2input_readonly",readOnlyFocusEvent:!1,refSyncKeyup:!1,initValue:"",title:"",name:"",useKeyupBlur:!0,preventCopyPaste:!1,delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",focusCalcSize:!0,enterBlur:!0,placeholder:"",autocomplete:"",useVerticalAlign:!0,escape:!0,autocorrect:"",autoCapitalize:"off",imeMode:"",autoFocus:!1,nextTabByEnter:!1,nextTabByKeyDown:!1,showPlaceHolderOnReadOnly:!1,refSync:!1,useMonthYearFormat:!1,customModelFormatter:"",customModelUnformatter:"",customPasteFormatter:"",inputMode:"",useBigDecimalFloat:!1,setValueHandler:"",getValueHandler:"",autoDecimalPoint:!1,editFormat:"",editFormatParticalMask:!1,maskFormatModelExcludeChar:"",maskFormatModelExcludeCharValue:!1,exceptValidKeydown:"",useLocale:!1,placeholderLocaleRef:"",skipValidate:!1,nextTabFocusPosition:0,checkMaxByteOnInput:!1},p.prototype.initialize=function(t){try{this.originalStyleObj=null,this.focusStyleObj=null,this.focusedSizeFlag=!1,this.realValue="",this.renderRealValue="",this.beforeBlockSelection={},this.supportPlaceholder=!1,this.supportAutocomplete=!1,this._focusStatus="init",this._getFocused=!1,this._changeApplyFormat=!1,this.originalHashValue={},this.options.maxlength="-1"!==this.options.maxLength?this.options.maxLength:this.options.maxlength,this.options.maxLength=this.options.maxlength,this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.decimalDelimiter=this.options.decimalDelimiter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,this.floatMaxlength="-1",this.options.parentEvent&&this.options.parentEvent.options&&"searchbox"===this.options.parentEvent.options.pluginName&&(this.scope_obj=this.options.parentEvent.scope_obj,this.scope_id=this.options.parentEvent.scope_id),"number"===this.options.dataType&&"true"===this.options.floatNumber&&(this.options.dataType="float");var e=this.options.dataType;this._getMaskFormat()||"all"!=this.options.applyFormat||""!=this.options.displayFormatter||"bigDecimal"===e||"number"===e||"float"===e||"euro"===e||"rupee"===e||"tenge"===e||(this._changeApplyFormat=!0,this.options.applyFormat="display"),this._getMaskFormat()&&(this.options.applyFormat="all","text"!=this.options.dataType||this.options.allowChar||(this.options.allowChar="0-9")),""!=this.options.displayFormat||"number"!=e&&"bigDecimal"!=e||(this.options.displayFormat=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/displayFormat/@defaultValue')||"",this.options.displayFormat&&(this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter="."))),"euro"==e&&(this.options.euroMask||(this.options.euroMask=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),this.options.customModelFormatter||(this.options.customModelFormatter=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""));var i=this.options.onFocusStyle;if(i){var o="w2input_userfocus",s="#"+this.id+"."+o;WebSquare.cssManager.addConvertedCSS(s,i),this.options.onFocusStyle="",this.options.onFocusClass=o}if(""==this.options.displayFormat)switch(this.options.dataType){
case"date":this.options.displayFormat=this.options.dateMask;break;case"float":case"bigDecimal":this.useBigDecimalFloat||(this.options.displayFormat=this.options.numberMask),this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}else switch(this.options.dataType){case"float":case"bigDecimal":case"number":this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}if(this.options.byteCheckIgnoreChar&&this.options.byteCheckIgnoreCharType){for(var n=this.options.byteCheckIgnoreCharType.split(","),l=!1,h=0;h<n.length;h++)n[h].wq_trim()==this.options.dataType&&(l=!0);l||(this.options.byteCheckIgnoreChar="")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var d=this.options.dataType;if("bigDecimal"==d&&(d=this.useBigDecimalFloat?"float":"number"),this.formatter=WebSquare.format.createFormatter(d,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar))),this.validator=new c.N.validateInvoker(this.id,this.options),"true"!==this.options.floatNumber||"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType)switch(this.options.dataType){case"date":
case"time":break;case"number":""==this.options.displayFormat?this.validator.addCommand(new c.N.allowCharCommand("+\\-.0-9")):this._getMaskFormat()?this.validator.addCommand(new c.N.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)):(this.validator.addCommand(new c.N.numberCommand),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"euro":this.validator.addCommand(new c.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new c.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new c.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"bigDecimal":if(!this.useBigDecimalFloat){this._getMaskFormat()&&this.validator.addCommand(new c.N.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)),""==this.options.displayFormat?this.validator.addCommand(new c.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new c.N.numberCommand),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")?(this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new c.N.maxFloatLengthCommand(this.options.maxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new c.N.maxLengthCommand(this.options.maxlength)),this.floatMaxlength=this.options.maxlength,this.options.maxlength="-1"):this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);break;case"text":this._getMaskFormat()&&this.validator.addCommand(new c.N.textMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat,this.options.allowChar))}else if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")){var u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new c.N.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new c.N.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"}else this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if(this.inputEvented=!1,this.options.placeholder&&WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.autocomplete&&WebSquare.uiplugin.input.autocomplete&&(this.supportAutocomplete=!0),this.beforeEditValue="",this.removeSignValue="",this._editTokens={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"*":{pattern:/[0-9a-zA-Z~!@#$%^&*()_+|\-=\\{}\[\]:";'<>?,./]/},"!":{escape:!0}},this.options.editFormat&&(this._preEditFormat(this.options.editFormat),this.linkedList=WebSquare.text.linkedList()),this._editValue="",this._oldValue="",this.floatMaxlength>0){u=this.floatMaxlength+"";var p=this.options.decimalDelimiter||".",g=u.split(p);this._integerMaxLength=parseInt(g[0]),this._fractionMaxLength=g[1]?parseInt(g[1]):0}this.inputTextInfo={}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._preEditFormat=function(t){try{this._editFormat=t.split("||").sort((function(t,e){return t.replace(/[^#^S^X^*]/g,"").length-e.replace(/[^#^S^X^*]/g,"").length}));var e=/^[#XS\*]/;if(this.removeSignToken={},this.__currentFormatTokens="",this._editFormat)for(var i=0;i<this._editFormat.length;i++){for(var o=this._editFormat[i],s="",r=[],n=0;n<o.length;n++)!1===e.test(o[n])?r[String(n)]=this._editFormat[i][n]:s+=o[n];this.removeSignToken[o]=s
;for(n=0;n<s.length;n++)-1===this.__currentFormatTokens.indexOf(s[n])&&(this.__currentFormatTokens+=s[n])}}catch(t){a.Y.printStackTrace(t,null,this)}},p.htmlStr=["<input id='",,"'",," class='w2input ",,"'",,"",," />"],p.placeholder="string"==typeof document.createElement("input").placeholder,p.autocomplete="string"==typeof document.createElement("input").autocomplete,p.prototype.toHTML=function(){try{var t,e=WebSquare.uiplugin.input.htmlStr,i="";"auto"==this.options.imeMode?i="ime-mode:auto;":"inactive"==this.options.imeMode?i="ime-mode:inactive;":"active"==this.options.imeMode?i="ime-mode:active;":"disabled"==this.options.imeMode&&(i="ime-mode:disabled;"),this.options.style&&";"!==this.options.style.slice(-1)&&(this.options.style+=";"),this.options.useLocale&&this.options.placeholderLocaleRef&&(t=this.getLocaleValue(this.options.placeholderLocaleRef));var o=t||(this.options.escape?WebSquare.xml._encode(this.options.placeholder):this.options.placeholder),s=this.options.escape?WebSquare.xml._encode(this.options.title):this.options.title;return e[1]=this.id,e[3]=""==this.options.style&&""==this.options.imeMode?"":" style='"+this.options.style+i+"'",e[5]=this.options.className+(this.options.readOnly?" "+this.options.readOnlyClass:""),e[7]=this.options.type?" type='"+this.options.type+"'":"",e[9]=this.options.title?" title='"+s+"'":"",e[9]+=this.options.name?" name='"+this.options.name+"'":"",e[9]+=this.options.maxlength>=0&&!this.options.useMaxLength?" maxLength='"+this.options.maxlength+"'":"",e[9]+=this.supportPlaceholder?" placeholder='"+o+"'":"",e[9]+=this.supportAutocomplete&&this.options.autocomplete?" autocomplete='"+this.options.autocomplete+"'":"",e[9]+=0!=WebSquare.hybridApp&&this.options.autocorrect?" autocorrect='"+this.options.autocorrect+"'":"",e[9]+=0==WebSquare.hybridApp?"":" autoCapitalize='"+this.options.autoCapitalize+"'",e[9]+=this.getAttributesString(),e[9]+=this.options.imeMode?" imeMode='"+this.options.imeMode+"'":"",e[9]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",e[9]+=this.options.inputMode?" inputMode='"+this.options.inputMode+"'":"",e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.useVerticalAlign&&this.setVerticalAlign(),this.options.initValue&&this._setValue(this.options.initValue),this.modelControl.isBinded()){var i=this.modelControl.getData(),o=l.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof o&&(i=o.call(this,i,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(i=WebSquare.date.getIOFormatDate(i,this.options.ioFormat)),this._getMaskFormat()&&(i=this.maskFormatModelUnFormat(i),this.modelControl.setData(i)),this.setValueNM(i)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),this._editFormat)return void this.setActionEditFormat();var s=this;this.addEvent("oneditend",(function(){var t="",e=s.render.value.wq_trim();("number"==s.options.dataType||"float"==s.options.dataType||s.useBigDecimalFloat||"euro"==s.options.dataType||"rupee"==s.options.dataType||"tenge"==s.options.dataType)&&("."!==e&&"-"!==e&&"+"!==e&&","!==e&&e!=="+"+this.options.decimalDelimiter&&e!=="-"+this.options.decimalDelimiter||(s.render.value="")),t="all"==s.options.applyFormat||s._editFormat?s._getMaskFormat()?s.render.value:s._getValue():s.render.value,t=s.validator.validateString(t),s.options.placeholder&&!this.supportPlaceholder&&0==s.realValue.length&&this.render.className.match("w2input_placeholder")||s.setValueNM(t,!0)})),
(l.Z.isIEAllVersion()||l.Z.isSpartan())&&(this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent)),this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdv,{eventonreadonly:!0})),1==this.getReadOnly()&&(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.validateOnInput&&(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),r.I.browserCheck.android&&r.I.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&!this.useBigDecimalFloat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),l.Z.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),"number"==this.options.dataType&&this.setStyle("imeMode","disabled")),l.Z.isIEAllVersion()?this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){document.activeElement!=this.render&&this.focus()}))):l.Z.isOpera()&&this.options.preventCopyPaste&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t),this.focus()}))),"noFormat"==this.options.copyOnReadOnly?l.Z.isIEAllVersion()?(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly&&n.f.preventDefault(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){67==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.handleCopyEvent({})})))):this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)):this.options.preventCopyPaste&&this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&n.f.preventDefault(t)}),{eventonreadonly:!0})),"color"!=this.options.type||l.Z.isIEAllVersion()||l.Z.isSpartan()||this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleColorChangeEvent)),this.options.maxlength>=0&&!this.options.useMaxLength&&(this.render.maxLength=this.options.maxlength,this.originalMaxLength=this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",l.Z.getBoolean(this.options.mandatory)),this.options.preventCopyPaste&&(this.options.readOnly||this.options.disabled)&&this.setStyle("pointerEvents","none")}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setActionEditFormat=function(){try{this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownDynamicMask)),this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleDynamicMask)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpDynamicMask)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurDynamicMask)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdvMask)),this.options.mandatory&&this.onPropertyChange("mandatory",l.Z.getBoolean(this.options.mandatory))
}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&!this.noRefresh){var t=this._getValue(),e=this.modelControl.getData(),i=l.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof i&&(e=i.call(this,e,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat)),this._getMaskFormat()&&(e=this.maskFormatModelUnFormat(e)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&n.f.fireEvent(this,"onchange",{oldValue:t,newValue:this._getValue()})}this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.commit=function(){try{var t=this._getValue();if(("bigDecimal"===this.options.dataType||"float"===this.options.dataType)&&t[t.length-1]===this.options.decimalDelimiter)return;this._setValue(t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setValue=function(t){try{var e,i=this.options.setValueHandler;if(i){var o=l.Z.getGlobalFunction(i,this.scope_id);"function"==typeof o&&(e=o.call(this,t))}else e=this._setValue(t);return this._oldValue=this._getValue(),e}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._setValue=function(t,e){try{if(l.Z.isNull(t))return;t=this._trim(t),this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength&&(t=this.adjustMaxLength(t));var i=this._getValue(),o=l.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof o&&(t=o.call(this,t,this.getDisplayValue())),this._getMaskFormat()&&(t=this.maskFormatModelUnFormat(t)),e&&!0===e.skipNM||this.setValueNM(t,!1,e),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat));var s=l.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id),r=t;"function"==typeof s&&(t=s.call(this,t,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(t)):r!==t?this.modelControl.setData(t,null,{orgValue:r}):this._editFormat?this.removeSignValue===t&&this.modelControl.setData(t):this.modelControl.setData(t),this._editFormat&&this.removeSignValue===t&&(this._editValue=t),i!=this._getValue()&&n.f.fireEvent(this,"onchange",{oldValue:i,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setValueNM=function(t,e,i){try{if(l.Z.isNull(t))return;if(t=this._trim(t),"bigDecimal"==this.getDataType()){var o=this.options.decimalDelimiter||".";if("number"==typeof t)if(h.v.printLog("Warning : BigDecimal Datatype, then you must enter a string instead of a number to get the exact data.["+this.id+"]"),this.useBigDecimalFloat){var s=(r=(t=t.toString()).split(o))[1]?r[1].length:0;t=Big(t.toString()).toFixed(s)}else t=Big(t.toString()).toFixed();else if(t.constructor==Big)t=t.toFixed();else if("string"==typeof t)try{if(""===t)t="";else if(!this._getMaskFormat())if(this.useBigDecimalFloat){var r;s=(r=t.split(o))[1]?r[1].length:0;t=Big(t).toFixed(s)}else t=Big(t).toFixed()}catch(t){h.v.printLog("Warning : You must enter the exact number of data.["+this.id+"]")}}else t=t.toString();var n="",d="",c=document.activeElement===this.render&&!e;if(this._getMaskFormat()||"all"!=this.options.applyFormat||e||this._editFormat)t=c||this._editFormat?t:this.formatter.format(t);else{d=this.formatter.executeFormat(t),d=this.validator.validateString(d);for(var u=0;u<d.length;u++)n+=d.charAt(u),this.formatter.format(n,!0);t=c?t:this.formatter.executeFormat(t)}if(this._editFormat){var p=!1;if(this.options.displayFormatter){var g=l.Z.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof g&&(t=g(t),p=!0)}if(!0!==p)if(""===t)!0!==this.linkedList.isEmpty()&&(this.removeSignValue=t,this.render.value=t,this.linkedList.clear());else{this._getValue()!==t&&this.linkedList.clear()
;var m=this._checkValueEditFormat(t),f=i&&i.eventType&&"blur"===i.eventType?this.removeSignValue:t,b=WebSquare.text.whichMask(f,this.removeSignToken);if(!0!==m)return;var y=WebSquare.text.maskit2(f,b,this._editTokens,this.linkedList);!0!==l.Z.isEmptyObject(y)&&(this.render.value=y.value,this._editValue=y.orgValue,this.renderRealValue=y.realValue,this.removeSignValue=y.orgValue,t=this.render.value)}}else e&&"all"==this.options.applyFormat?(t=this.validator.validateString(t),t=this.formatter.format(t)):this._getMaskFormat()&&"all"==this.options.applyFormat&&(t=this.formatter.format(t));this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2input_placeholder")||this.addClass("w2input_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2input_placeholder"),this.render.value!==t&&(this.render.value=t)):this.render.value!==t&&(this.render.value=t),this.realValue=t}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getValue=function(){try{var t,e=this.options.getValueHandler;if(!e){if(t=this._getValue(),!0===this.options.maskFormatModelExcludeCharValue&&(t=this.maskFormatModelFormat(t)),("euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&this.parentControl&&this.parentControl.options&&"gridView"!=this.parentControl.options.pluginName){var i=l.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof i&&(t=i.call(this,t))}return t}var o=l.Z.getGlobalFunction(e,this.scope_id);if("function"==typeof o)return o.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._getValue=function(){try{var t;return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value,this._getMaskFormat()&&"all"==this.options.applyFormat?t:this._editFormat?this._editValue:this.formatter.unformat(t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setFocusSize=function(t){try{if(1==this.options.focusCalcSize&&-1==this.getStyle("height").indexOf("%")&&-1==this.getStyle("width").indexOf("%")){var e=parseInt(this.getStyle("height")),i=parseInt(this.getStyle("width")),o=this.focusStyleObj.paddingLeft+this.focusStyleObj.paddingRight+this.focusStyleObj.borderLeftWidth+this.focusStyleObj.borderRightWidth-(this.originalStyleObj.paddingLeft+this.originalStyleObj.paddingRight+this.originalStyleObj.borderLeftWidth+this.originalStyleObj.borderRightWidth),s=this.focusStyleObj.paddingTop+this.focusStyleObj.paddingBottom+this.focusStyleObj.borderTopWidth+this.focusStyleObj.borderBottomWidth-(this.originalStyleObj.paddingTop+this.originalStyleObj.paddingBottom+this.originalStyleObj.borderTopWidth+this.originalStyleObj.borderBottomWidth);1==t&&0==this.focusedSizeFlag?(this.setStyle("height",e-s+"px"),this.setStyle("width",i-o+"px"),this.focusedSizeFlag=!0):0==t&&1==this.focusedSizeFlag&&(this.setStyle("height",e+s+"px"),this.setStyle("width",i+o+"px"),this.focusedSizeFlag=!1)}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setVerticalAlign=function(){try{if(l.Z.isIE()){var t=this.getSize("height")||parseInt(this.getStyle("height"));isNaN(t)||this.setStyle("lineHeight",t+"px")}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2input_disabled"):this.removeClass(this.render,"w2input_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":var i=this.options.parentEvent;i&&i.options&&"searchbox"===i.options.pluginName&&i.onPropertyChange(t,e),1==e?this.addClass(this.render,"w2input_mandatory"):this.removeClass(this.render,"w2input_mandatory")}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getFormattedValue=function(){try{
return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.validate=function(){try{if(!0===this.options.skipValidate&&0==this.realValue.length)return!0;var t=this.validator.validate(this._getValue());return t||this.focus(),t}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.validateObject=function(){try{if(!0===this.options.skipValidate&&0==this.realValue.length)return{};var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.adjustMaxLength=function(t){try{if(this.options.useMaxLength)return t;if(this.options.maxlength>0){var e=(t+="").substr(0,1),i=parseInt(this.originalMaxLength,10);"-"!=e&&"+"!=e||(i+=1),this.setMaxLength(i),this.render.maxLength=i}return t}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getDataType=function(){try{return this.options.dataType}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setDataType=function(t){try{if(!t||"euro"==t||"rupee"==t||"tenge"==t)return;this.options.dataType=t,this._refreshOption()}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._refreshOption=function(t){try{void 0!==t&&null!=t||(t={});var e=this.options.dataType;if("all"==this.options.applyFormat&&""==this.options.displayFormatter&&"bigDecimal"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e&&(this._changeApplyFormat=!0,this.options.applyFormat="display"),""==this.options.displayFormat||!0===t.refreshDisplayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"float":this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".");break;case"bigDecimal":case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var i=this.options.dataType;"bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number");var o=this._getValue();switch(this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id)),this.validator.clearCommand(),this.validator=new c.N.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"bigDecimal":case"number":""==this.options.displayFormat?this.validator.addCommand(new c.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new c.N.numberCommand),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"float":this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat));break;case"euro":this.validator.addCommand(new c.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new c.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new c.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter))}"string"==typeof t.refreshValue?this._setValue(t.refreshValue):this.setValueNM(o)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._setFormat=function(t,e){try{for(var i in t)i in this.options&&"string"==typeof t[i]&&(this.options[i]=t[i]);this._refreshOption(e)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t;var e=this._getValue();"number"===this.options.dataType&&("default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),""==this.options.displayFormat?(this.validator.removeCommand(new c.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),
this.validator.addCommand(new c.N.allowCharCommand("+\\-.0-9"))):(this.validator.removeCommand(new c.N.allowCharCommand("+\\-.0-9")),this.validator.addCommand(new c.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0))),this.formatter.setMasking(t),this.setValueNM(e)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setIoFormat=function(t,e){try{if("date"!==this.options.dataType)return;var i={};if("string"==typeof e&&e!==this.options.dateMask&&(i.refreshDisplayFormat=!0),"string"==typeof t&&t!==this.options.ioFormat){var o=WebSquare.format.createFormatter(this.options.dataType,t,"",this.options.ioFormat,null,null,this.scope_id,this.id);i.refreshValue=o.format(this._getValue())}this._setFormat({ioFormat:t,dateMask:e},i)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setEditFormat=function(t){try{if(this._editFormat||(this.event.removeEvent(this.render,"onblur"),this.event.removeEvent(this.render,"onkeyup"),this.event.removeEvent(this.render,"onkeydown"),this.event.removeEvent(this.render,"onkeypress"),this.event.removeEvent(this.render,"oninput"),this.event.removeEvent(this.render,"onpaste"),this.setActionEditFormat()),void 0!==t&&t.length>0&&this.options.editFormat!==t){this.options.editFormat=t;var e=this.getValue(),i=this._editFormat;this._preEditFormat(t);var o=this.removeSignToken[this._editFormat].length;if(e.length>o&&(e=e.substring(0,o-1)),i||this.linkedList||(this.linkedList=WebSquare.text.linkedList(),this.removeSignValue=e),e.length>0){var s;!0!==this._checkValueEditFormat(this.removeSignValue)&&(this._preEditFormat(i.join("||")),e=this.removeSignValue),s=WebSquare.text.whichMask(e,this.removeSignToken);var r=WebSquare.text.maskit2(e,s,this._editTokens,this.linkedList);!0!==l.Z.isEmptyObject(r)&&(this.render.value=r.value,this._editValue=r.orgValue,this.renderRealValue=r.realValue)}}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._checkValueEditFormat=function(t){try{var e="",i=!0;if(!0!==this.linkedList.isEmpty())t===this._getValue()&&this.linkedList.removeValues("sign");else{i=!1;var o=WebSquare.text.whichMask(t,this.removeSignToken),s=0;if(""===o)return!1;for(var r=0;r<o.key.length;r++)for(var n=s;n<t.length;n++){"#"===o.key[r]||"*"===o.key[r]||"X"===o.key[r]||"S"===o.key[r]?(this.linkedList.insertAt(r,t[n],"value"),s++):this.linkedList.insertAt(r,o.key[r],"sign");break}this.linkedList.removeValues("sign")}var l=WebSquare.text.insertValidationLength(this.removeSignToken,this._editFormat,this.linkedList.print().join(""));if(!0===l?!1===(l=WebSquare.text.insertCharValidationFormat(this.removeSignToken,this.linkedList.print().join(""),this._editTokens,this.linkedList))&&(e=" During the input process, the validation check for the input value has failed. "):e=" During the input process, the length validation check has failed. ",!0===l)return!0;if(!1===i&&(this.linkedList.clear(),""!==this.removeSignValue)){o=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken);WebSquare.text.maskit2(this.removeSignValue,o,this._editTokens,this.linkedList)}return h.v.printLog("Warning : Execution of setEditFormat failed."+e),!1}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.changeCurrency=function(t,e,i,s,r,n){try{return 1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._changeCurrency(arguments[0]):this._changeCurrency({type:t,format:e,delimiter:i,decimalDelimiter:s,customModelFormatter:r,customModelUnformatter:n})}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._changeCurrency=function(t){try{var e=t.type||"",i=t.format,o=t.delimiter||"",s=t.decimalDelimiter||"",n=t.customModelFormatter,h=t.customModelUnformatter;if(!e||"float"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e)return;this.options.decimalDelimiter;"number"===e&&"true"===this.options.floatNumber&&(e="float");var d=this.getValue(),u=e;switch(e){case"number":case"float":
case"bigDecimal":u="number",i||(this.options.numberMask||(this.options.numberMask=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/numberMask/@value')||""),i=this.options.numberMask),this.options.delimiter=o||",",this.options.decimalDelimiter=s||".";break;case"euro":i||(this.options.euroMask||(this.options.euroMask=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),i=this.options.euroMask),this.options.delimiter=o||".",this.options.decimalDelimiter=s||",";break;case"rupee":i||(this.options.rupeeMask||(this.options.rupeeMask=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),i=this.options.rupeeMask),this.options.delimiter=o||",",this.options.decimalDelimiter=s||".";break;case"tenge":i||(this.options.tengeMask||(this.options.tengeMask=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),i=this.options.tengeMask),this.options.delimiter=o||" ",this.options.decimalDelimiter=s||","}if(!i)return;if(this.options.dataType=e,this.options.displayFormat=i,void 0!==n?this.options.customModelFormatter=n:this.options.customModelFormatter||(this.options.customModelFormatter=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+u+'"]/customModelFormatter/@value')||""),void 0!==h?this.options.customModelUnformatter=h:this.options.customModelUnformatter||(this.options.customModelUnformatter=r.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+u+'"]/customModelUnformatter/@value')||""),this._changeApplyFormat&&(this.options.applyFormat="all"),this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.validator.clearCommand(),this.validator=new c.N.validateInvoker(this.id,this.options),"float"===this.options.dataType||this.useBigDecimalFloat)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){var p=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new c.N.maxFloatLengthCommand(p,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new c.N.maxLengthCommand(p)),this.floatMaxlength=p,this.options.maxlength="-1"}else this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if("number"===this.options.dataType)this.validator.addCommand(new c.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0);else if("euro"===this.options.dataType||"rupee"===this.options.dataType||"tenge"===this.options.dataType)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){p=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new c.N.maxFloatLengthCommand(p,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new c.N.maxLengthCommand(p)),this.floatMaxlength=p,this.options.maxlength="-1"}else this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);this.formatter.setMasking(i),"function"==typeof(h=l.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(d=h.call(this,d)),this.setValueNM(d)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){a.Y.printStackTrace(t,null,this)}},
p.prototype.setDisplayFormatter=function(t){try{var e=this._getValue();if(this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.displayFormat){var i;this.displayFormatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,"",this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),e=this.originalHashValue[e]||e,e=this.displayFormatter.format(e),i=this.displayFormatter.hash_format_to_original,this.originalHashValue=i}this.setValueNM(e)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getDisplayFormatter=function(){try{return this.options.displayFormatter}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getIOValue=function(){try{return this._getValue()}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getIOFormat=function(){try{return this.options.ioFormat}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.getIOFormatter=function(){try{return this.options.ioFormatter}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(this.options.initValue)):this.modelControl.setData(this.options.initValue),t&&t.fireEvent&&e!=this._getValue()&&n.f.fireEvent(this,"onchange",{oldValue:e,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setDefaultValue=function(t){try{"string"==typeof t&&(this.options.initValue=t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.checkMaxByteLength=function(t){void 0!==t&&null!=t||(t={});var e=!1;if(-1!=this.options.maxByteLength||this._isNumberType()&&this.options.maxLength>0){var i=this.render.value;if(this.options.validateOnCheckMaxByteLength){var o=this.validator.validateString(i);i!==o&&(e=!0),i=o,this.render.value=i,this.realValue=i}"all"!=this.options.applyFormat||this.options.maxByteLength&&this.options.checkMaxByteOnInput||(i=this.validator.validateString(i));var s=i;if(-1!=this.options.maxByteLength){if(this.options.maxByteLength&&this.options.checkMaxByteOnInput){if(l.Z.isKorean(i))s=this._checkKoreanOninput(i);var a=WebSquare.text.getSelection(this.render).start,h=i;this.inputTextInfo.nowSelectionStart=a,this.inputTextInfo.nowValue=h;var d={prevSelectionStart:this.inputTextInfo.prevSelectionStart,nowSelectionStart:a};s=l.Z.getStringByByteSize(s,this.options.maxByteLength,this.options.byteCheckIgnoreChar,d)}else s=l.Z.getStringByByteSize(i,this.options.maxByteLength,this.options.byteCheckIgnoreChar);i!=s&&(this.reFocus=!0,e=!0,this._focusStatus="cancel",this.setValueNM(""),this.blur(),this.render.focus(),"all"==this.options.applyFormat?this.setValueNM(s):(this.render.value=s,this.realValue=s),this.options.maxByteLength&&this.options.checkMaxByteOnInput&&(WebSquare.text.setCaretPos(this.render,d.prevSelectionStart),this.inputTextInfo.nowSelectionStart=d.prevSelectionStart,this.inputTextInfo.nowValue=s))}var c=s.charAt(s.length-1),u=!1;if(this.options.autoFocus&&!0!==l.Z.isKorean(c)&&!0!==t.ctrlKey)if(l.Z.getByteLength(s)==this.options.maxByteLength)u=!0;else if(this._isNumberType()&&this.options.maxLength>0){var p=this.options.decimalDelimiter||".",g=(i=i.toString()).split(p),m=g[0],f=g[1],b=this.options.maxLength.toString().split(p),y=b[1]?parseInt(b[1]):0,v=b[0]?parseInt(b[0]):0;f&&f.length>0?y>0&&f.length>=y&&(u=!0):m.length>0&&!y&&v>0&&m.length>=v&&(u=!0)}if(u){if("spinner"===this.options.pluginName&&this.parentControl)return void((w=l.Z.getNextTabbableComp(this.parentControl.id))&&w.focus(t.e))
;if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var w;(w=l.Z.getNextTabbableComp(this.id))&&(this._keyDownStart||e)&&w.focus(t.e)}else{var S=l.Z.getGlobalFunction(r.I.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof S&&S.call(this,this.id)}}this.options.validateOnInput||!0===t.skipFireEvent||!0===l.Z.isKorean(c)||l.Z.getByteLength(s)!=this.options.maxByteLength||n.f.fireEvent(this,"oneditfull")}},p.prototype.handlePasteEvent=function(t){var e,i;if("paste"==t.type){var o;if(t.clipboardData)o=t.clipboardData;else{if(!window.clipboardData)return;o=window.clipboardData}if(""!=(e=o.getData("Text"))){var s=this.formatter.masking,r=this.valueType;i=void 0!==r&&null!=r&&"number"==r?WebSquare.text.unformatCurrency(s,e):void 0!==r&&null!=r&&"date"==r?WebSquare.text.unformatDate(s,e):void 0!==r&&null!=r&&"time"==r?WebSquare.text.unformatTime(s,e):WebSquare.text.unformatText(s,e),o.setData("Text",i),n.f.stopPropagation(t)}}},p.prototype.handlePasteValidator=function(t){var e="";if("paste"==t.type){var i,o;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}if(e=i.getData("Text"),"function"==typeof this._customPasteFormatter){var s=this._customPasteFormatter.call(this,e);e=s||e}if("number"==this.options.dataType){var r=this.render.value.wq_trim();"."!==r&&"-"!==r&&"+"!==r||(this.render.value="")}var a=WebSquare.text.getSelection(this.render);o="all"==this.options.applyFormat?this._getValue():this.render.value;var l=WebSquare.text.getCaretPos(this.render),h=e.length;e=o.substring(0,a.start)+e+o.substring(a.end),e=this.validator.validateString(e),this.setValueNM(e,!1),WebSquare.text.setCaretPos(this.render,l+h),n.f.preventDefault(t)}},p.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.Y.printStackTrace(t)}},p.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.modelControl.unbindRef(),this.options.ref="",this.refresh())}catch(t){a.Y.printStackTrace(t)}},p.prototype.setPlaceholder=function(t){try{if(l.Z.isNull(t))return;if(WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.hasClass("w2input_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")):this.options.placeholder="")}catch(t){a.Y.printStackTrace(t)}},p.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.setAllowChar=function(t){this._setCharRule("allowChar",t)},p.prototype.setIgnoreChar=function(t){this._setCharRule("ignoreChar",t)},p.prototype._setCharRule=function(t,e){try{if(l.Z.isNull(e))return!1;if(this.options[t]!==e){var i=this._getValue();this.options[t]=e.wq_trim();var o=this.options.dataType;switch("bigDecimal"==o&&(o=!0===this.useBigDecimalFloat?"float":"number"),"default"==this._getMaskFormat()?o="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"numberMask":"textMask":"reverse"==this._getMaskFormat()&&(o="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"reverseNumberMask":"reverseTextMask"),this.formatter=WebSquare.format.createFormatter(o,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
this._getMaskFormat()&&("allowChar"===t?this.formatter.setAllowChar(this.options.allowChar):"ignoreChar"===t&&this.formatter.setIgnoreChar(this.options.ignoreChar)),this.validator=new c.N.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"euro":this.validator.addCommand(new c.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new c.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new c.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"number":case"bigDecimal":if("number"===this.options.dataType||!this.useBigDecimalFloat){""==this.options.displayFormat?this.validator.addCommand(new c.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new c.N.numberCommand),this.validator.addCommand(new c.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.floatMaxlength>=0?(this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new c.N.maxFloatLengthCommand(this.floatMaxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new c.N.maxLengthCommand(this.floatMaxlength)),this.options.maxlength="-1"):this.validator.addCommand(new c.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat))}var s=this.formatter.unformat(i),r=this.validator.validateString(s);this.setValueNM(r),this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(r=WebSquare.date.getIOUnFormatDate(r,this.options.ioFormat));var n=l.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);return"function"==typeof n&&(r=n.call(this,r,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(r)):this.modelControl.setData(r),this.noRefresh=!1,!0}}catch(t){a.Y.printStackTrace(t)}},p.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="",i=t;if(t=t.toString(),this._getMaskFormat())if(this.options.maskFormatModelExcludeChar)for(var o=this.options.maskFormatModelExcludeChar.split(""),s=0;s<t.length;s++){for(var r=!1,n=0;n<o.length;n++)if(t[s]==o[n]){r=!0;break}r||(e+=t[s])}else e=t;else e=t;return"number"!=typeof i||isNaN(e)||(e=Number(e)),e}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.maskFormatModelUnFormat=function(t){try{if(!t)return t;var e=t;if(this._getMaskFormat()&&this.options.maskFormatModelNumber&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType)&&(e=t.toString(),this.options.displayFormat&&this.options.displayFormat.indexOf(".")>0))for(var i=e.indexOf(".")<0?0:e.length-e.indexOf(".")-1,o=0;o<this.options.displayFormat.length-this.options.displayFormat.indexOf(".")-i-1;o++)0==o&&e.indexOf(".")<0&&(e=t+"."),e+="0";return e}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._checkKorean=function(t,e,i){try{var o=l.Z.isKorean(t);if(o||e){var s=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken),r=WebSquare.text.maskit2(this.removeSignValue,s,this._editTokens,this.linkedList);this.render.value=r.value;var n=o?i-1:i;this.render.setSelectionRange(n,n);return h.v.printLog("Warning : [korean] During the input process, the validation check for the input value has failed."),!1}return!0}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._checkKoreanOninput=function(t){try{return this.validator.validateKorean(t,this.options.dataType)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleBlurEventBasic=function(t,e){try{e=e||{};if(this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;!0!==e.skipEditEnd&&n.f.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass);var i=this._getValue(),o=!0
;"all"===this.options.applyFormat&&0===Math.abs(i)&&"-"===i.charAt(0)&&(i=i.slice(1),o=!1),this._editFormat&&(o=!1);var s={skipNM:o};this._editFormat&&(s.eventType=t.type),this._setValue(i,s);var r={value:this._oldValue};void 0===r.value&&(r.value=this.originalValue),r.value!=this._getValue()&&(n.f.fireEvent(this,"onchange",{oldValue:r.value,newValue:this._getValue()}),n.f.fireEvent(this,"onviewchange",{oldValue:r.value,newValue:this._getValue()})),n.f.fireEvent(this,"onblur",t),n.f.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),!0!==l.Z.isEmptyObject(this.beforeBlockSelection)&&(this.beforeBlockSelection={}),l.Z.isIEAllVersion()||l.Z.isOpera()||n.f.fireEvent(this,"onfocusout",t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleFocusinEvent=function(t){this.options.autoFocus&&(this._keyDownStart=!1),this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass);var e=this.render.value;"all"!=this.options.applyFormat&&(e=this.formatter.unformat(e)),e!=this.render.value&&(this.render.value=e);var i=this,o={};l.Z.isIEAllVersion("11")?(o.onRestore=function(t){document.execCommand("undo",!1,null)},o.stopEvent=!0):o.onRestore=function(t){i.render.value=t.value};var s=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:s},o),this._oldValue=s,this._focusStatus="focusin"},p.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},p.prototype.handleFocusValueEventAdv=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2input_placeholder")),n.f.fireEvent(this,"onbeforeedit"),this.originalValue=this._getValue(),!l.Z.isIEAllVersion()){var e=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{}),this._oldValue=e}this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass),this.focusStyleObj||(this.focusStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.reFocus?this.reFocus=null:"select"==this.options.editType&&(WebSquare.text.setCaretPos(this.render,0),this.select()),this.setFocusSize(!0),
0!=this.inputEvented||this._editFormat||(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),r.I.browserCheck.android&&r.I.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),(l.Z.isFF()||this.options.maxByteLength&&this.options.checkMaxByteOnInput)&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),this.options.validateOnInput?(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))):this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))):this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))):this.options.customPasteFormatter&&"string"==typeof this.options.customPasteFormatter&&(this._customPasteFormatter=l.Z.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id),"function"==typeof this._customPasteFormatter&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),"number"==this.options.dataType&&this.setStyle("imeMode","disabled"),this.options.preventCopyPaste&&(this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){n.f.stopEvent(t)})))));var i=this.render.value;if(this._editFormat){var o=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken);i=WebSquare.text.maskit2(this.removeSignValue,o,this._editTokens,this.linkedList).value}else"all"!=this.options.applyFormat&&(i=this.formatter.unformat(i));i!=this.render.value&&(this.render.value=i,"select"==this.options.editType&&this.selectFlag&&(this.select(),this.selectFlag=!1)),n.f.fireEvent(this,"onfocus",t),this._focusStatus="done"}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleKeydownEvent=function(t){try{this.options.refSync&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||(this.options.exceptValidKeydown.indexOf(t.keyCode)>-1?n.f.preventDefault(t):n.f.stopEvent(t)),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){this.blurHandler=!0;var o=n.f.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t))))
}else if(27==e)this.blurHandler=!0;else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(9==e){var s;o=n.f.fireEvent(this,"oneditenter",t);if(this.tabOrderMoveStart=!1,!1!==o)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if("true"==this.options.nextTabByKeyDown)(s=l.Z.getPreTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,s.focus(t)),n.f.preventDefault(t);else this.tabOrderMoveStart=!0,n.f.preventDefault(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if("true"==this.options.nextTabByKeyDown)(s=l.Z.getNextTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,s.focus(t)),n.f.preventDefault(t);else this.tabOrderMoveStart=!0,n.f.preventDefault(t)}else if(8==e){var h;if(h=r.I.browserCheck.android&&r.I.browserVersion()>=5,"all"==this.options.applyFormat&&!h){i=this.render.value;var d=WebSquare.text.getCaretPos(this.render),c=i.substring(d-1,d),u=WebSquare.text.getSelection(this.render);if(("float"===this.options.dataType||"bigDecimal"===this.options.dataType&&this.useBigDecimalFloat||"euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&c===this.options.decimalDelimiter)n.f.preventDefault(t),this.render.value=i.slice(0,d-1)+i.slice(d,i.length),WebSquare.text.setCaretPos(this.render,this.render.value.length+1);else if(isNaN(Number(c))&&u.start==u.end){var p=i.substring(d-2,d-1);(!isNaN(Number(p))&&""!=p||this._getMaskFormat()&&"text"==this.options.dataType&&""!=p&&new RegExp("["+this.options.allowChar+"]").test(p))&&new RegExp("[^"+this.options.allowChar+"]").test(c)&&(this.render.value=i.slice(0,d-2)+i.slice(d-1,i.length),WebSquare.text.setCaretPos(this.render,d-1))}}}else if(this.options.preventCopyPaste&&l.Z.isOpera()){if(t.ctrlKey&&(88===t.keyCode||67===t.keyCode||86===t.keyCode))return void n.f.stopEvent(t)}else this.options.autoFocus&&(this._keyDownStart=!0);if(this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength){d=WebSquare.text.getCaretPos(this.render);var g=this._getValue();this.adjustMaxLength(this.render.value),0==d&&g.length==this.options.maxlength&&(189==e||109==e?this.render.value="-"+g:(187==e&&t.shiftKey||107==e)&&(this.render.value="+"+g)),this.adjustMaxLength(this.render.value)}if(l.Z.isOpera()&&this.checkMaxByteLength({skipFireEvent:!0,e:t}),this.beforeEditValue=this._getValue(),this.options.maxByteLength&&this.options.checkMaxByteOnInput){u=WebSquare.text.getSelection(this.render);this.inputTextInfo.prevSelectionStart=u.start,this.inputTextInfo.prevValue=this.render.value}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleInputEvent=function(t){try{if("all"==this.options.applyFormat&&this.realValue.length-this.render.value.length==1){var e=this.realValue,i=this.render.value,o=WebSquare.text.getCaretPos(this.render);isNaN(Number(e.substring(o,o+1)))&&(this.render.value=i.slice(0,o-1)+i.slice(o,i.length),WebSquare.text.setCaretPos(this.render,o-1)),this.handleKeyupEvent({})}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleInputMask=function(t){try{if(this._getMaskFormat()&&"all"==this.options.applyFormat){var e,i=this.render.value,o=i,s=WebSquare.text.getCaretPos(this.render);if(t){var r=t.charCode?t.charCode:t.keyCode;e=r&&String.fromCharCode(r)||t.data}if(!e&&!(e=i[s-1]))return;"default"==this._getMaskFormat()&&i.length==s&&(i=i.substr(0,s));var n=!1;if("text"==this.options.dataType&&(i=this.validator.validateKeyInput(this.render,i,t).str,o.length!==i.length&&(n=!0)),"number"==this.options.dataType||"bigDecimal"==this.options.dataType?(2==i.toString().length&&"-"==i.toString()[0]&&(i=this.formatter.executeFormat(i)),i=this.validator.validateString(i)):i=this.formatter.unformat(i),i=this.formatter.format(i,!0),
"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("reverse"==this._getMaskFormat())i.substr(0,i.length-1)==o&&"0"!=e&&s==o.length&&(i="-"==i[0]?"-":"");else if("default"==this._getMaskFormat())if("-"==i[0]){if(i.substr(2,i.length-2)==o.substr(1,o.length-1)&&"0"!=e&&1==s)i="-";else if(this.options.displayFormat&&"#"==this.options.displayFormat.charAt(s-1)&&s==o.length)for(var l=1;"#"==this.options.displayFormat.charAt(s-l)&&"0"==o.charAt(s-l)&&s-l>=1;)i=i.concat("0"),l+=1}else if(i.substr(1,i.length-1)==o&&"0"!=e&&0==s)i="";else if(this.options.displayFormat&&"0"!=this.options.displayFormat.charAt(s-1)&&s==o.length){l=s-1;for(var h,d="";/[0\D]/g.test(o.charAt(l))&&"0"!=this.options.displayFormat.charAt(l)&&l>=0;)l-=1;for(h=l+=1;"0"!=this.options.displayFormat.charAt(l)&&/[0\D]/g.test(o.charAt(h))&&h<o.length&&!(this.options.displayFormat.length<l);)"#"!=this.options.displayFormat.charAt(l)&&"0"!=this.options.displayFormat.charAt(l)?(d=d.concat(this.options.displayFormat.charAt(l)),this.options.displayFormat.charAt(l)==o.charAt(h)&&(h+=1)):(d=d.concat("0"),h+=1),l+=1;for(l=d.length;/\D/g.test(d[l])&&l>=0;)l-=1;d=d.substr(0,l+1),i=i.concat(d)}if(this.render.value!=i&&(this.render.value=i),this.realValue=i,"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,s),/\d/g.test(e))if(s==o.length)if("0"===i[s-1])1==s||"-"==i[0]&&2==s?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else if("0"!==i[s]){for(;"0"!==i[s]&&s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s-1)}else"0"!=i[s]||/\d/g.test(i[s-1])?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s+1);else(/\D/g.test(i[s])||/\D/g.test(i[s-1]))&&WebSquare.text.setCaretPos(this.render,s+1);else e?"-"==e?WebSquare.text.setCaretPos(this.render,s):WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),/\d/g.test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length));else if("text"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,s),new RegExp("["+this.options.allowChar+"]").test(e))if(s==o.length){for(;s<=i.length;)s+=1;WebSquare.text.setCaretPos(this.render,s)}else new RegExp("[^"+this.options.allowChar+"]").test(i[s])||new RegExp("[^"+this.options.allowChar+"]").test(i[s-1])?WebSquare.text.setCaretPos(this.render,s+1):n&&i.length==this.options.displayFormat.length&&WebSquare.text.setCaretPos(this.render,s-1);else e?WebSquare.text.setCaretPos(this.render,s-1):WebSquare.text.setCaretPos(this.render,s);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,s-(o.length-i.length)),new RegExp("["+this.options.allowChar+"]").test(t.data)&&s==o.length&&WebSquare.text.setCaretPos(this.render,i.length))}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleInputValidator=function(t){try{var e=this.render.value,i=this.validator.validateKeyInput(this.render,e,t);if(i.valid){if(e!==i.str){var o=WebSquare.text.getCaretPos(this.render),s=WebSquare.text.getSelection(this.render),r=e.length,h=this.formatter.unformat(e);h=this.validator.validateString(h),"all"===this.options.applyFormat&&(h=this.formatter.format(h,!0));var d=h.length,c=this.render.id,u=h,p=this;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(c).value=u,s.start===s.end&&WebSquare.text.setCaretPos(p.render,Math.max(o+d-r,0))})):this.render.value=u,s.start===s.end&&WebSquare.text.setCaretPos(this.render,Math.max(o+d-r,0))}}else n.f.stopEvent(t);if(!this._getMaskFormat()){var g=""
;-1!=this.options.maxByteLength?g=l.Z.getStringByByteSize(this.render.value,this.options.maxByteLength,this.options.byteCheckIgnoreChar):-1!=this.options.maxLength&&this.options.maxLength.indexOf(this.options.decimalDelimiter)<0&&(g=this.render.value,"function"==typeof customModelFormatter&&(g=customModelFormatter.call(this,g)),g=(g=this.formatter.unformat(g)).split(this.options.delimiter).join(""));var m=g.charAt(g.length-1);if(g.length>0&&!0!==l.Z.isKorean(m)&&(l.Z.getByteLength(g)==this.options.maxByteLength||g.length==this.options.maxLength)){p=this;setTimeout((function(){n.f.fireEvent(p,"oneditfull")}),200)}}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(l.Z.isFF()&&t.ctrlKey&&e)return;if("all"==this.options.applyFormat&&!this._getMaskFormat()&&(i=this.formatter.unformat(i),"number"===this.options.dataType)){var o=this.options.delimiter||",";-1!=i.indexOf(o)&&(i=i.split(o).join(""))}if(!this.validator.validateKeyPress(this.render,i,t)){if(this._isNumberType()&&this.options.validateOnInput&&this.floatMaxlength>0&&this.options.autoDecimalPoint){var s=!1;if(this.render.value.indexOf(this.options.decimalDelimiter)>-1&&(s=!0),!s)return}if(1==this.options.autoPopupInvalidMessage&&e>46&&!(e>=112&&e<=123)&&alert(this.options.invalidMessage),!0===l.Z.getBoolean(this.options.fireEventOnInvalid)&&this.validator.obfuscator_invalidObject){var r={};r.callerId=this.validator.obfuscator_invalidObject.callerId,r.type=this.validator.obfuscator_invalidObject.getType(),r.value=this.validator.obfuscator_invalidObject.getValue(),r.detail=this.validator.obfuscator_invalidObject.getDetail(),n.f.fireEvent(this,"oninputinvalid",r)}n.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=t.ctrlKey&&86!==e||17===e;!0===this._bCtrlKeyup&&(86===e&&(this._keyDownStart=!0),this._bCtrlKeyup=!1);var o=!1,s=this.render.value;if(this._isNumberType()&&this.options.autoFocus&&!1===this.options.autoDecimalPoint&&(e>=48&&e<=57||e>=96&&e<=105||s.charAt(s.length-1)==this.options.decimalDelimiter)&&this.floatMaxlength>0){s=this.formatter.unformat(s);var r=this.options.delimiter||",";if(-1!=s.indexOf(r)&&(s=s.split(r).join("")),-1==s.indexOf(this.options.decimalDelimiter))this.beforeEditValue.length==this._integerMaxLength&&(o=!0,this.tabOrderMoveStart=!0);else if(this._fractionMaxLength>0){var h=s.split(this.options.decimalDelimiter),d=(h[0],h[1]);d&&d.length>0&&d.length>=this._fractionMaxLength&&(o=!0,this.tabOrderMoveStart=!0)}}if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var c=this._getValue(),u=this.modelControl.getData();this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(c=WebSquare.date.getIOUnFormatDate(c,this.options.ioFormat));var p=l.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof p&&(c=p.call(this,c,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(c)):this.modelControl.setData(c),this.noRefresh=!1,u!=c&&n.f.fireEvent(this,"onchange",{oldValue:u,newValue:c})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(g=l.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,g.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(g=l.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,g.focus(t))}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else if(9==e||o){var g
;if(null!=WebSquare.tabOrder[this.id]&&"true"!=this.options.nextTabByKeyDown)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(g=l.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,g.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(g=l.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,g.focus(t))}else{if("all"==this.options.applyFormat&&!this._getMaskFormat()){c="";if(90==e&&t.ctrlKey){var m=WebSquare.historyManager.get(this.options.pluginName,this.id);void 0===m.value&&(m.value=""),c=m.value}else c=this.render.value;var f,b,y=WebSquare.text.getCaretPos(this.render),v=WebSquare.text.getSelection(this.render);if(f=c.length,c=this.formatter.unformat(c),this.options.autoDecimalPoint&&-1==c.indexOf(this.options.decimalDelimiter)){var w=c.split(this.options.delimiter).join("");w.length>this._integerMaxLength&&(c=w.slice(0,this._integerMaxLength)+this.options.decimalDelimiter+w.slice(this._integerMaxLength,w.length))}c=this.validator.validateString(c),c=this.formatter.format(c,!0),c=this.validator.validateString(c),b=(c=this.formatter.format(c,!0)).length,this.render.value!=c&&(this.render.value=c),this.realValue=c,(l.Z.isIEAllVersion()||"number"!==this.options.type)&&v.start===v.end&&WebSquare.text.setCaretPos(this.render,Math.max(y+b-f,0))}this.checkMaxByteLength({ctrlKey:i,e:t})}this.options.autoFocus&&(this._keyDownStart=!1,17===e&&(this._bCtrlKeyup=!0));var S={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?n.f.fireEvent(this.parentControl,"oneditkeyup",S,t):n.f.fireEvent(this,"oneditkeyup",S,t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleBlurEvent=function(t){try{this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this._setValue(this._getValue());var e={value:this._oldValue};void 0===e.value&&(e.value=this.originalValue),e.value!=this._getValue()&&n.f.fireEvent(this,"onchange",{oldValue:e.value,newValue:this._getValue()}),n.f.fireEvent(this,"onblur",t),this._focusStatus="init"}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleCopyEvent=function(t){try{if(this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly){var e,i=this._getValue();if(l.Z.isIEAllVersion()){e=window.clipboardData;var o=this;r.I.setTimer((function(){e.setData("Text",i),r.I.clearTimer(o.id+"_handleCopyEvent")}),{key:o.id+"_handleCopyEvent",caller:o,delay:1})}else(e=t.clipboardData).setData("Text",i);n.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleColorChangeEvent=function(t){try{this.modelControl.isBinded()&&this.modelControl.setData(this.render.value)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleDynamicMask=function(t){try{var e,i,o=this.render.selectionStart,s=this.render.value,r="";if(""===this.beforeEditValue&&"insertFromPaste"===t.inputType&&(-1!==this.__currentFormatTokens.indexOf("*")?s=s.match(/[0-9a-zA-Z~!@#$%^&*()_+|\-=\\{}\[\]:";'<>?,./]/g).join(""):-1!==this.__currentFormatTokens.indexOf("X")||-1!==this.__currentFormatTokens.indexOf("S")&&-1!==this.__currentFormatTokens.indexOf("#")?s=s.match(/[0-9a-zA-Z]/g).join(""):-1!==this.__currentFormatTokens.indexOf("S")?s=s.match(/[a-zA-Z]/g).join(""):-1!==this.__currentFormatTokens.indexOf("#")&&(s=s.match(/\d+/g).join(""))),!1===this._checkKorean(s,null==t.data&&!1===t.isComposing&&"deleteContentBackward"===t.inputType,o))return;!0!==l.Z.isEmptyObject(this.beforeBlockSelection)&&this.linkedList.removeRange(this.beforeBlockSelection.beforeSelectionStart,this.beforeBlockSelection.beforeSelectionEnd-1);var n=this.linkedList.print().join(""),d="",c=s.length-1;if(n===s)return void(!0!==l.Z.isEmptyObject(this.beforeBlockSelection)&&(this.beforeBlockSelection={}));for(var u=s.length-n.length;d.length<u&&c>-1;)c<o&&(d=s.charAt(c)+d),c--;for(var p="",g=0,m=0;m<d.length;m++)" "!==(p=s[c+1+m])?this.linkedList.insertAt(c+1+m-g,p,"value"):g++
;o-=g;var f,b=(!0===(f=d.length===g)?c:c+1)-this.linkedList.countOneWayTarget(c,"sign","left"),y=this.removeSignValue;this.removeSignValue=this.linkedList.findExcluding("sign").join("");var v=WebSquare.text.insertValidationLength(this.removeSignToken,this._editFormat,this.removeSignValue);if(!0===v?!1===(v=WebSquare.text.insertCharValidationFormat(this.removeSignToken,this.removeSignValue,this._editTokens,this.linkedList))&&(r="Warning : During the input process, the validation check for the input value has failed. "):r="Warning : During the input process, the length validation check has failed. ",!1===v?(!0===l.Z.isEmptyObject(this.beforeBlockSelection)?this.linkedList.print().length>0&&(this.linkedList.removeRange(c+1,c+1+d.length-1-g),this.removeSignValue=this.linkedList.findExcluding("sign").join("")):(this.removeSignValue=y,this.linkedList.clear()),h.v.printLog(r)):(this.linkedList.removeValues("sign"),this.removeSignValue=this.linkedList.print().join("")),e=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken),v&&this.options.editFormatParticalMask)var w={nowInputCharIndex:b,notFormattingLastChar:1===d.length&&"insertText"===t.inputType&&0===g};i=WebSquare.text.maskit2(this.removeSignValue,e,this._editTokens,this.linkedList,w),this.render.value=i.value,this._editValue=i.orgValue,this.renderRealValue=i.realValue;var S=-1,_=-1,C=0,x=!1===v||!0===f?0:d.length-g-1;for(m=0;m<this.linkedList.print().length;m++)if("value"===this.linkedList.findNodeAt(m).marked){if(b+x===++_)S=m;else if(b+x<_)break}else S>-1&&!0!==f&&C++;if(!0!==l.Z.isEmptyObject(this.beforeBlockSelection)&&!1===v)this.render===document.activeElement&&this.render.setSelectionRange(this.beforeBlockSelection.beforeSelectionStart,this.beforeBlockSelection.beforeSelectionEnd);else{var I=!1===v||!0===f?o-(d.length-g):S+C+1;this.render===document.activeElement&&this.render.setSelectionRange(I,I)}this.beforeBlockSelection={}}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleKeyDownDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.beforeEditValue=this._getValue(),(8===t.keyCode||46===t.keyCode||88==t.keyCode&&(t.ctrlKey||t.metaKey))&&(WebSquare.text.deleteMaskChar2(t,this,this.render),(8==e||9==e||e>=37&&e<=40||46==e)&&!0!==l.Z.isEmptyObject(this.beforeBlockSelection)&&(this.beforeBlockSelection={})),this.validator.validateKeyDown(this.render,i,t)||n.f.stopEvent(t),13==e){this.blurHandler=!0;var o=n.f.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t))))}else if(9==e){o=n.f.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==o&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,n.f.preventDefault(t)))}this.options.editFormat&&t.target.selectionStart!==t.target.selectionEnd&&(this.beforeBlockSelection={beforeSelectionStart:t.target.selectionStart,beforeSelectionEnd:t.target.selectionEnd})}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleKeyUpDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode;this.render.value;if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var i=this._getValue(),o=this.modelControl.getData();this.noRefresh=!0;var s=l.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof s&&(i=s.call(this,i,this.getDisplayValue())),this.modelControl.setData(i),this.noRefresh=!1,o!=i&&n.f.fireEvent(this,"onchange",{oldValue:o,newValue:i})}
if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(r=l.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,r.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(r=l.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,r.focus(t))}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(9==e){var r;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(r=l.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,r.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(r=l.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,r.focus(t))}this.options.autoFocus&&(this._keyDownStart=!1);var h={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?n.f.fireEvent(this.parentControl,"oneditkeyup",h,t):n.f.fireEvent(this,"oneditkeyup",h,t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleBlurDynamicMask=function(t){try{this.handleBlurEventBasic(t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.handleFocusValueEventAdvMask=function(t){try{this.handleFocusValueEventAdv(t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype.focus=function(t){try{this.render.focus();var e=Number(this.options.nextTabFocusPosition);"select"==this.options.editType?this.render.select():e>=1&&t&&/^(on)*keydown$|^(on)*keyup$/.test(t.type)&&WebSquare.text.setCaretPos(this.render,e-1)}catch(t){a.Y.printStackTrace(t)}},p.prototype.select=function(t){try{this.selectFlag=!0,this.render.select()}catch(t){a.Y.printStackTrace(t)}},p.prototype.setDisabled=function(t){try{if(t=l.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t),this.options.preventCopyPaste&&this.setStyle("pointerEvents","none")}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.options.preventCopyPaste&&!this.options.readOnly&&this.setStyle("pointerEvents","")}catch(t){a.Y.printStackTrace(t)}return t},p.prototype.setReadOnly=function(t){try{if(t=l.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t),this.options.preventCopyPaste&&this.setStyle("pointerEvents","none")}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.options.preventCopyPaste&&!this.options.disabled&&this.setStyle("pointerEvents","")}catch(t){a.Y.printStackTrace(t,null,this)}return t},p.prototype.serialize=function(){return{value:this._getValue()}},p.prototype.restore=function(t){try{this._setValue(t.value)}catch(t){return a.Y.printStackTrace(t,null,this),!1}return!0},p.prototype._trim=function(t){try{var e=t+"";return this.options.trim?t=e.wq_trim():(this.options.ltrim&&(t=e.replace(/^\s+/,"")),this.options.rtrim&&(t=e.replace(/\s+$/,""))),t}catch(e){return a.Y.printStackTrace(e,null,this),t}},p.prototype.setImeMode=function(t){try{this.setStyle("imeMode",t)}catch(e){return a.Y.printStackTrace(e,null,this),t}},p.prototype.getFocusedComponentId=function(){try{var t=this.parentControl&&this.parentControl.options&&this.parentControl.options.pluginName
;if("grid"===t||"gridView"===t)return this.parentControl.id}catch(t){a.Y.printStackTrace(t,null,this)}return this.id},p.prototype._isNumberType=function(){try{var t=this.options.dataType;return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){a.Y.printStackTrace(t,null,this)}},p.prototype._getMaskFormat=function(){try{return"none"!==this.options.maskFormat&&this.options.maskFormat&&(this.options.maskFormat&&this.options.displayFormat)?this.options.maskFormat:""}catch(t){a.Y.printStackTrace(t,null,this)}}},4058:function(t,e,i){"use strict";i.r(e),i.d(e,{inputCalendar:function(){return u}});var o=i(2284),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(3406),d=i(2406),c=i(4860),u=function(t,e,i){this.defaultOptions.yearSuffix=h.B.getMessage("Calendar_yearsuffix"),d.q.call(this,t,e,i)};s.q.extend(u.prototype,d.q.prototype),s.q.extend(u.prototype,c.G.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.inputCalendar",pluginName:"inputCalendar",userEvents:["onfocus","onblur","onchange","oniconclick","ondateselect","onviewchange","onyearselect","onmonthselect"],systemEvents:["onclick","onkeydown","onkeyup","onkeypress"],serializable:!0,useConfig:!0,delimiter:"-",ioFormat:"",calendarDisplayFormat:"",calendarDisplayFormatFunc:"",displayFormat:"",displayFormatter:"",displayFormatFunc:"",applyFormat:"display",monthNames:"",monthNamesForYearMonthType:"",yearSuffix:"",calendarValueType:"yearMonthDate",calendarImage:"",calendarImageOver:"",calendarClass:"class1",chooseOption:!1,direction:"auto",holiday:"",holidayRef:"",validCheck:!1,dateValidCheck:"",dateValidSet:!1,dateValidSetCustom:!1,disableDateValidSet:!1,wmode:!1,readOnlyClass:"w2inputCalendar_readOnly",imageReadOnlyClass:"w2inputCalendar_img_readOnly",handleIconClick:null,pickerType:"selectbox",dynamicHeaderOrder:"month",fixPickerStatus:"default",pickerStatusRefresh:!1,setCurrentDate:!1,enabledDate:"*",disabledDate:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessageFunc:"",displaymessage:!1,keepFocusSelect:!1,innerHeight:"17px",inputReadOnly:!1,useUnlimitedYear:!0,defaultDate:"",initValue:"",cancleButtonShow:!1,cancelButtonShow:!1,cancelButtonHide:!1,resetButtonShow:!1,footerDiv:!1,renderDiv:!0,focusOnDateSelect:!1,title:"",summary:"",caption:"",focusOnOuterDiv:!1,focusOnLastYear:!1,alt:"",renderType:"component",useYearSelect:!0,useMonthSelect:!0,useAnchor:!1,useCalendarTabIndex:!0,maxYear:2030,serverSync:!1,serverSyncType:"once",minYear:1978,weekStartsOn:0,displayDayType:"image",fixedDate:"",rightAlign:!1,outsideClickEvent:!1,skipConfirm:!1,skipConfirmOnly:!1,topLayout:!1,visibleHourList:"",visibleMinList:"",visibleSecList:"",senseReader:!1,disableBeforeToday:!1,disableAfterToday:!1,disableBeforeDate:"",disableAfterDate:"",disableBeforeAfterDate:!1,enabledMonth:"*",disabledMonth:"",disableAfterMonth:"",disableBeforeMonth:"",buttonTitle:"",useMonthYearFormat:!1,keepFixedDate:!1,keepInvalidDate:!1,useButton:!1,placeholder:"",original_placeholder:"",autocomplete:"",showPlaceHolderOnReadOnly:!1,nextTabID:"",autoFocus:!1,validateRef:!1,unformatOnPaste:!1,type:"text",showToday:!0,showCalendarOnFocus:!1,visibleWeekNum:6,nextLastMonthDateSelect:!1,getValueHandler:"",setValueHandler:"",todaySelect:!1,useEditFormat:!1,dayMoveFixed:!1,dateMoveFixed:!1,validateOnInput:!1,validateOnInputMobile:!1,accessibility:!1,useLocale:!1,placeholderLocaleRef:"",placeholderAuto:!1,dateValidCheckType:"",nextTabFocusPosition:0,fixedMonth:!1,preventDeleteByESC:!1},u.prototype.initialize=function(t){try{if(this.options.cancleButtonShow=this.options.cancleButtonShow||this.options.cancelButtonShow,""==this.options.alt&&(this.options.alt=h.B.getMessage("Calendar_open")),this.calendar=null,this.evented=!1,this.formatter=null,this.validator=null,this.sub_validator=null,this._setFocused=!1,this.supportPlaceholder=!1,this.supportAutocomplete=!1,this.realValue="",
this._setSetting=!1,this.resizeObj={width:0,height:0},!0===this.options.accessibility&&(this.options.senseReader=!0,this.options.renderType="component",this.options.displayDayType="textNative",this.options.placeholderAuto=!0,this.options.renderDiv=!0,this.options.focusOnOuterDiv=!0,this.options.focusOnStart=!1,this.options.cancelButtonShow=!0,this.options.cancleButtonShow=!0),this.options.senseReader&&(this.options.renderDiv=!0,this.options.useAnchor=!1,this.options.focusOnOuterDiv=!0),!this.options.renderDiv){var e=this.options.style,i=r.I.makeStyle(e),o=[],s=[];for(var n in i)"position width height left top right bottom display visibility".indexOf(n.toLowerCase())>-1?o.push(n+":"+i[n]):s.push(n+":"+i[n]);WebSquare.cssManager.addConvertedCSS("#"+this.id+" input",s.join(";")),this.options.style=o.join(";")}this.options.autocomplete&&WebSquare.uiplugin.inputCalendar.autocomplete&&(this.supportAutocomplete=!0)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._initialize=function(){try{var t=this.options.calendarValueType;if(this.options.displayFormatFunc&&!this.options.displayFormat){var e=l.Z.getGlobalFunction(this.options.displayFormatFunc,this.scope_id);"function"==typeof e&&(this.options.displayFormat=e.call(this,this.options.calendarValueType))}if(this.options.calendarDisplayFormatFunc&&!this.options.calendarDisplayFormat){var i=l.Z.getGlobalFunction(this.options.calendarDisplayFormatFunc,this.scope_id);"function"==typeof i&&(this.options.calendarDisplayFormat=i.call(this,this.options.calendarValueType))}if(this.options.displayFormat||(this.options.displayFormat=r.I.getConfiguration('/WebSquare/inputCalendar/displayFormat[@valueType="'+t+'"]/@defaultValue')),this.options.calendarDisplayFormat||(this.options.calendarDisplayFormat=r.I.getConfiguration('/WebSquare/inputCalendar/calendarDisplayFormat[@valueType="'+t+'"]/@defaultValue')),this.options.ioFormat||(this.options.ioFormat=r.I.getConfiguration('/WebSquare/inputCalendar/ioFormat[@valueType="'+t+'"]/@defaultValue')),this.options.placeholder||(this.options.placeholder=r.I.getConfiguration('/WebSquare/inputCalendar/placeholder[@valueType="'+t+'"]/@defaultValue')),this.options.ioFormat&&(this.options.ioFormat=this.options.ioFormat.match(/([yMdHmS]+)/g).join("")),""==this.options.delimiter){var o=this.options.displayFormat.replace(/[a-zA-Z]/g,"");o.length>0?this.options.delimiter=o.charAt(0):this.options.delimiter="-"}var s="";if("yearMonthDate"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat||(this.options.ioFormat="yyyyMMdd"),s="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat||(this.options.ioFormat="yyyyMM"),s="yyyy"+this.options.delimiter+"MM"):"yearMonthDateHour"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHH"),s="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmm"),s="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==this.options.calendarValueType?(this.options.displayFormat=this.options.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat||(this.options.ioFormat="yyyyMMddHHmmSS"),s="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"):"year"==this.options.calendarValueType&&(this.options.displayFormat=this.options.displayFormat||"yyyy",
this.options.ioFormat||(this.options.ioFormat="yyyy"),s="yyyy"),1==this.options.useEditFormat){var n=s.replace(/[a-zA-Z]/g,"#");this._editFormat=n.split("||")}this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new c.N.validateInvoker(this.id,this.options),this.sub_validator=new c.N.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new c.N.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new c.N.allowCharCommand("0-9"));var d=0;"yearMonthDate"==this.options.calendarValueType?d=8:"yearMonth"==this.options.calendarValueType?d=6:"yearMonthDateHour"==this.options.calendarValueType?d=10:"yearMonthDateTime"==this.options.calendarValueType?d=12:"yearMonthDateTimeSec"==this.options.calendarValueType?d=14:"year"==this.options.calendarValueType&&(d=4),this.invalidMessage=h.B.getMessage("IC_invalidCalendarSelect")||"Invalid date format","all"==this.options.applyFormat&&this.options.displayFormat&&(d=this.options.ioFormat.length),this.options.maxlength=d,this.options.minlength=d,this.options.autoFocus&&(this.options.maxByteLength=d),this.sub_validator.addCommand(new c.N.maxLengthCommand(d)),this.sub_validator.addCommand(new c.N.minLengthCommand(d)),this.options.validCheck&&""===this.options.dateValidCheck?this.options.dateValidCheck="true":""===this.options.dateValidCheck&&(this.options.dateValidCheck="false"),!this.options.placeholder&&this.options.placeholderAuto&&(this.options.placeholder=s),this.options.placeholder&&(WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.options.original_placeholder=this.options.placeholder,this.setPlaceholder(this.options.placeholder)),this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!0),this._skipDateValidSet=!1,this._editTokens={"#":{pattern:/\d/}}}catch(t){a.Y.printStackTrace(t,null,this)}},u.placeholder="string"==typeof document.createElement("input").placeholder,u.autocomplete="string"==typeof document.createElement("input").autocomplete,u.prototype.toHTML=function(){try{var t="";(this.options.inputReadOnly||this.options.showCalendarOnFocus)&&(t=" readOnly ");var e,i=[],o=""==this.options.style?"":"style='"+this.options.style+"'",r=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",n=""==this.options.title?"":"title='"+this.options.title+"'",h=""==this.options.innerHeight?"":"style='height:"+this.options.innerHeight+"'",d=""==this.options.alt?"":"alt='"+this.options.alt+"'",c=this.options.buttonTitle?" title='"+this.options.buttonTitle+"'":"";this.options.useLocale&&this.options.placeholderLocaleRef&&(e=this.getLocaleValue(this.options.placeholderLocaleRef));var u=e||this.options.placeholder,p=""==u?"":" placeholder='"+u+"'",g=""==this.supportAutocomplete||""==this.options.autocomplete?"":" autocomplete='"+this.options.autocomplete+"'",m="text"==this.options.type?"":" type ='"+this.options.type+"'",f=this.options.className?" "+this.options.className:"",b=""==this.options.calendarImage?s.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;if(0==this.options.renderDiv)i.push("<div id='"+this.id+"' "+o+" class='w2inputCalendar w2inputCalendar_type_"+this.options.calendarValueType+"'>"),i.push("<table class='w2inputCalendar_table'><tr>"),i.push("<td class='w2inputCalendar_col_input'><input "+h+" id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_input"+f+"' "+t+" "+m+" "+n+" "+r+" "+p+" "+g+" /></td>"),i.push("<td class='w2inputCalendar_col_img'>"),1==this.options.useAnchor&&i.push("<a id='"+this.id+"_a' href='#' class='w2inputCalendar_a' role='button' aria-haspopup='true' aria-owns='"+this.id+"_calendar' >"),
i.push("<img id='"+this.id+"_img' class='w2inputCalendar_img'"+c+" src='"+b+"' "+d+" "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?r:"")+" />"),1==this.options.useAnchor&&i.push("</a>"),i.push("</td></tr></table>"),i.push("</div>");else if(1==this.options.renderDiv){if(b=""==this.options.calendarImage?"":" style='background-image:url("+b+")'",i.push("<div id='"+this.id+"' "+o+" class='w2inputCalendar_div"+f+" w2inputCalendar_type_"+this.options.calendarValueType+"'>"),i.push("<div id='"+this.id+"_div_input' class='w2inputCalendar_div_input' >"),i.push("<input id='"+this.id+"_input' name='"+this.id+"_input' class='w2inputCalendar_divInput ' "+t+" "+m+" "+n+" "+r+" "+p+" "+g+" />"),i.push("</div>"),i.push("<div id='"+this.id+"_div_img' class='w2inputCalendar_div_img' >"),this.options.senseReader){var y=l.Z.isMobile()?this.id+"_calendar_start":this.id+"_calendar";i.push("<a id='"+this.id+"_img'"+c+"role='button'"+b+"class='w2inputCalendar_button w2inputCalendar_button_native' href='#"+y+"' >"+this.options.alt+"</a>")}else i.push("<button type='button' id='"+this.id+"_img'"+c+b+" class='w2inputCalendar_button' "+(this.options.useCalendarTabIndex&&!this.options.useAnchor?r:"tabIndex='-1'")+" >"+this.options.alt+"</button>");i.push("</div>"),i.push("</div>")}return i.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSize=function(t,e){try{WebSquare.style.setSize.call(this,this.render,t,e),this.setSetting()}catch(t){a.Y.printStackTrace(t)}},u.prototype.setSetting=function(){try{if(this.render&&1==this.options.renderDiv){var t,e,i=WebSquare.style.getStyle(this.render,"width"),o=WebSquare.style.getStyle(this.dom.divImg,"width");if(o=o.lastIndexOf("px")>-1?Math.ceil(1*o.wq_replaceAll("px","")):0,(i="auto"==i?"100%":i).lastIndexOf("px")>-1)s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=parseInt(i.wq_replaceAll("px",""),10)-o-s;else if(i.lastIndexOf("%")>-1){if(C=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id)){var s,r=WebSquare.style.getStyle(C,"padding-left"),n=WebSquare.style.getStyle(C,"padding-right"),h=WebSquare.style.getStyle(C,"border-left-width"),d=WebSquare.style.getStyle(C,"border-right-width");r=r.lastIndexOf("px")>-1?parseInt(r,10):0,n=n.lastIndexOf("px")>-1?parseInt(n,10):0,h=h.lastIndexOf("px")>-1?parseInt(h,10):0,d=d.lastIndexOf("px")>-1?parseInt(d,10):0,s=(s=WebSquare.style.getStyle(this.dom.divInput,"padding-right")).lastIndexOf("px")>-1?parseInt(s,10):0,i=(C.offsetWidth-(r+n+h+d))*parseInt(i.wq_replaceAll("%",""),10)/100-o-s}}var c=WebSquare.style.getStyle(this.dom.input,"border-right-width");c=(c=1*c.wq_replaceAll("px",""))>1?parseInt(c,10):Math.ceil(c);var u=WebSquare.style.getStyle(this.dom.input,"border-left-width");u=(u=1*u.wq_replaceAll("px",""))>1?parseInt(u,10):Math.ceil(u);var p=WebSquare.style.getStyle(this.dom.input,"border-top-width");p=(p=1*p.wq_replaceAll("px",""))>1?parseInt(p,10):Math.ceil(p);var g=WebSquare.style.getStyle(this.dom.input,"border-bottom-width");g=(g=1*g.wq_replaceAll("px",""))>1?parseInt(g,10):Math.ceil(g);var m=WebSquare.style.getStyle(this.dom.input,"padding-right");m=(m=1*m.wq_replaceAll("px",""))>1?parseInt(m,10):Math.ceil(m);var f=WebSquare.style.getStyle(this.dom.input,"padding-left");f=(f=1*f.wq_replaceAll("px",""))>1?parseInt(f,10):Math.ceil(f);var b=WebSquare.style.getStyle(this.dom.input,"padding-top");b=(b=1*b.wq_replaceAll("px",""))>1?parseInt(b,10):Math.ceil(b);var y=WebSquare.style.getStyle(this.dom.input,"padding-bottom");y=(y=1*y.wq_replaceAll("px",""))>1?parseInt(y,10):Math.ceil(y),t=i-(c+u+m+f),WebSquare.style.setStyle(this.dom.divInput,"width",Math.max(i,0)+"px"),WebSquare.style.setStyle(this.dom.input,"width",Math.max(t,0)+"px");var v=WebSquare.style.getStyle(this.render,"height");if((v="auto"==v?this.render.offsetHeight+"px":v).lastIndexOf("px")>-1){var w=v.wq_replaceAll("px",""),S=parseInt(w,10),_=parseFloat(w);v=S,
_-S>.9&&(v=Math.ceil(w))}else if(v.lastIndexOf("%")>-1){var C;if(C=this.parentControl.render?this.parentControl.render:document.getElementById(this.parentControl.id))v=C.offsetHeight*parseInt(v.wq_replaceAll("%",""),10)/100}e=v-(p+g+b+y),(l.Z.isIE(6)||l.Z.isIE(7))&&(e-=2),WebSquare.style.setStyle(this.dom.divInput,"height",Math.max(v,0)+"px"),WebSquare.style.setStyle(this.dom.input,"height",Math.max(e,0)+"px")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{if(1==this.options.renderDiv){if(this.dom.divInput=this.getElementById(this.id+"_div_input"),this.dom.divImg=this.getElementById(this.id+"_div_img"),this.scope_obj&&this.scope_obj.uuid!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var t=this;this.scope_obj.bind("onsetsize",(function(){!1===t._setSetting&&(t.setSetting(),t._setSetting=!0)}))}d.q.addCheckResize(this.uuid,"checkResize")}this.dom.input=this.getElementById(this.id+"_input"),this.dom.img=this.getElementById(this.id+"_img"),this._initialize()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.setSetting(),this.setInputSize(),this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.useMonthYearFormat&&(t=WebSquare.date.getIOFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.options.validCheck&&(t=this.validator.validateString(t),t=this.sub_validator.validateString(t)),this.setValueNM(t)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass(this.dom.input,"w2inputCalendar_placeholder")),l.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0;break}e=null;var i=WebSquare.getBody().getLayerListener().layers[this.id].component,o={};i.id&&(o[i.id]=!0),WebSquare.getBody().getLayerListener().hideAll(o),n.f.stopPropagation(t)}))),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showCalendar,fnHide:this._hideCalendar,event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.options.inputReadOnly||(r.I.browserCheck.ieAllVersion?(this.event.addListener(this.dom.input,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusEvent)),"select"===this.options.editType&&this.event.addListener(this.dom.input,"onfocus",(function(t){this.select()}))):this.event.addListener(this.dom.input,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent))),this.options.unformatOnPaste&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),(this.options.validateOnInput||1==this.options.useEditFormat)&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),
this.options.setCurrentDate&&(this.options.useMonthYearFormat?"yearMonthDate"!=this.options.calendarValueType&&"yearMonth"!=this.options.calendarValueType&&"yearMonthDateHour"!=this.options.calendarValueType&&"yearMonthDateTime"!=this.options.calendarValueType&&"yearMonthDateTimeSec"!=this.options.calendarValueType&&"year"!=this.options.calendarValueType||this._setValue(WebSquare.date.getFormattedDate(new Date,this.options.ioFormat)):"yearMonthDate"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMdd")):"yearMonth"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMM")):"yearMonthDateHour"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHH")):"yearMonthDateTime"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmm")):"yearMonthDateTimeSec"==this.options.calendarValueType?this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyyMMddHHmmSS")):"year"==this.options.calendarValueType&&this._setValue(WebSquare.date.getFormattedDate(new Date,"yyyy"))),this.options.mandatory&&this.onPropertyChange("mandatory",l.Z.getBoolean(this.options.mandatory)),this.options.renderDiv&&this.options.senseReader&&this.options.focusOnOuterDiv)null!=document.getElementById(this.id+"_img")&&n.f.addListener(document.getElementById(this.id+"_img"),"onclick",(function(t){n.f.preventDefault(t)}))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.onComplete=function(){try{if(this.options.handleIconClick){var t=null;try{t=l.Z.getGlobalFunction(this.options.handleIconClick,this.scope_id)}catch(t){$l("no function for handleIconClick : "+this.options.handleIconClick+"["+this.id+"]")}"function"==typeof t&&this.addEvent("oniconclick",t)}d.q.prototype.onComplete.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this._getValue(),e=this.modelControl.getData();if(this.options.validateRef&&""!=e&&this.options.validCheck&&!l.Z.getBoolean(this.options.dateValidSet)){var i=this.validator.validate(e);if(i&&l.Z.getBoolean(this.options.dateValidCheck)){var o={dateValidCheckType:this.options.dateValidCheckType};i=this.sub_validator.validate(e,o)}if(!i)return alert(this.invalidMessage),this._setValue("",{skipValidate:!0}),void this.focus()}this.options.useMonthYearFormat&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat,this.options.calendarValueType)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&n.f.fireEvent(this,"onchange")}this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setInputSize=function(){try{var t=this.getStyle("height"),e={paddingTop:parseInt(l.Z.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(l.Z.getStyleProperty(this.dom.input,"padding-bottom"))||0,borderTopWidth:parseInt(l.Z.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(l.Z.getStyleProperty(this.dom.input,"border-bottom-width"))||0};if(t.indexOf("px")>-1&&1!=this.options.renderDiv){var i=(t=parseInt(t))-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth);this.dom.input.style.height=i+"px"}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSkin=function(t){try{this.options.calendarClass=t,this.calendar&&this.calendar.changeClass(this.calendar.render,"w2calendar_"+this.calendar.options.calendarClass,"w2calendar_"+t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setVerticalAlign=function(){try{if(r.I.browserCheck.ie){var t=parseInt(l.Z.getStyleProperty(this.dom.input,"height"))||0;this.dom.input.style.lineHeight=t+"px"}else r.I.browserCheck.moz}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setMinYear=function(t){try{if(t&&t>0&&(this.options.minYear=t,this.calendar)){var e=this.options.maxYear;this.calendar.updateYearSelect(t,e)}}catch(t){
a.Y.printStackTrace(t,null,this)}},u.prototype.setMaxYear=function(t){try{if(t&&t<1e4&&(this.options.maxYear=t,this.calendar)){var e=this.options.minYear;this.calendar.updateYearSelect(e,t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setValue=function(t){try{var e=this.options.setValueHandler;if(!e)return this._setValue(t);var i=l.Z.getGlobalFunction(e,this.scope_id);if("function"==typeof i)return i.call(this,t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setValueNM=function(t,e){try{if(l.Z.isNull(t))return;t=t.toString(),e&&!0===e.noFormat?this.dom.input.value=t:(t=document.activeElement==this.dom.input?t:this.formatter.format(t),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass(this.dom.input,"w2inputCalendar_placeholder")||this.addClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=this.options.placeholder):(this.removeClass(this.dom.input,"w2inputCalendar_placeholder"),this.dom.input.value=t):this.dom.input.value=t),this.realValue=t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._setValue=function(t,e){try{t=t.toString(),e&&!0===e.skipValidate||(t=this.validator.validateString(t),t=this.sub_validator.validateString(t));var i=this._getValue();if(""!=t&&this.options.validCheck&&!l.Z.getBoolean(this.options.dateValidSet)){var o=this.validator.validate(t);if(o&&l.Z.getBoolean(this.options.dateValidCheck)){e={dateValidCheckType:this.options.dateValidCheckType};o=this.sub_validator.validate(t,e)}if(!o){if(alert(this.invalidMessage),!1===this.options.keepInvalidDate&&this._setValue("",{skipValidate:!0}),!0===this.options.keepInvalidDate&&(l.Z.isChrome()||l.Z.isFF())){var s=this;setTimeout((function(){s._setFocused=!1,s.dom.input.focus()}),1)}else this.focus();return}}if(this.setValueNM(t,e),this.options.useMonthYearFormat&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat,this.options.calendarValueType)),this.modelControl.setData(t),i==this._getValue()||this.options.setCurrentDate||n.f.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]}),i!==t){var r=this.uuid;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:t},{onRestore:function(t){WebSquare.idCache[r]._setValue(t.value,{skipValidate:!0})}})}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getValue=function(){try{var t=this.options.getValueHandler;if(!t)return this._getValue();var e=l.Z.getGlobalFunction(t,this.scope_id);if("function"==typeof e)return e.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._getValue=function(){try{var t="";return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass(this.dom.input,"w2inputCalendar_placeholder")?"":this.dom.input.value,this.formatter.unformat(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getTitle=function(){return this.dom.input.getAttribute("title")},u.prototype.makeCalendar=function(){try{var t,e=this,i=this.uuid,o=this.options.ioFormat.match(/([yMdHmS]+)/g).join(""),s=this.org_id||this.id;t="yearMonth"==this.options.calendarValueType&&this.options.monthNamesForYearMonthType?this.options.monthNamesForYearMonthType:this.options.monthNames;var r={pluginName:"calendar",className:"w2inputCalendar_calendar",calendarClass:this.options.calendarClass,monthNames:t,yearSuffix:""===this.options.yearSuffix?"$blank":this.options.yearSuffix,calendarValueType:this.options.calendarValueType,chooseOption:this.options.chooseOption,holiday:this.options.holiday,holidayRef:this.options.holidayRef,wmode:this.options.wmode,delimiter:this.options.delimiter,dateFormat:o,displayFormat:this.options.calendarDisplayFormat,useUnlimitedYear:this.options.useUnlimitedYear,selectUnlimitedYear:this.options.selectUnlimitedYear,cancleButtonShow:this.options.cancleButtonShow,cancelButtonHide:this.options.cancelButtonHide,
resetButtonShow:this.options.resetButtonShow,footerDiv:this.options.footerDiv,focusOnOuterDiv:this.options.focusOnOuterDiv,renderType:this.options.renderType,mobileRenderType:this.options.mobileRenderType,summary:this.options.summary,caption:this.options.caption,title:this.options.title+" "+h.B.getMessage("Calendar_name"),backlink:1==this.options.useAnchor?this.id+"_input":"",useYearSelect:this.options.useYearSelect,useMonthSelect:this.options.useMonthSelect,maxYear:this.options.maxYear,minYear:this.options.minYear,weekStartsOn:this.options.weekStartsOn,displayDayType:this.options.displayDayType,keepFocusSelect:this.options.keepFocusSelect,outsideClickEvent:this.options.outsideClickEvent,skipConfirm:this.options.skipConfirm,skipConfirmOnly:this.options.skipConfirmOnly,serverSync:this.options.serverSync,serverSyncType:this.options.serverSyncType,topLayout:this.options.topLayout,showToday:this.options.showToday,visibleHourList:this.options.visibleHourList,visibleMinList:this.options.visibleMinList,visibleSecList:this.options.visibleSecList,disableBeforeToday:this.options.disableBeforeToday,disableAfterToday:this.options.disableAfterToday,disableBeforeDate:this.options.disableBeforeDate,disableAfterDate:this.options.disableAfterDate,disableBeforeAfterDate:this.options.disableBeforeAfterDate,disabledMonth:this.options.disabledMonth,disableBeforeMonth:6==this.options.disableBeforeMonth.length?this.options.disableBeforeMonth:"",disableAfterMonth:6==this.options.disableAfterMonth.length?this.options.disableAfterMonth:"",pickerType:this.options.pickerType,dynamicHeaderOrder:this.options.dynamicHeaderOrder,fixPickerStatus:this.options.fixPickerStatus,keepFixedDate:this.options.keepFixedDate,useMonthYearFormat:this.options.useMonthYearFormat,useButton:this.options.useButton,enabledDate:this.options.enabledDate,disabledDate:this.options.disabledDate,senseReader:!0===this.options.senseReader,visibleWeekNum:this.options.visibleWeekNum,nextLastMonthDateSelect:this.options.nextLastMonthDateSelect,ioFormat:this.options.ioFormat,todaySelect:this.options.todaySelect,dayMoveFixed:this.options.dayMoveFixed,dateMoveFixed:this.options.dateMoveFixed,accessibility:this.options.accessibility,fixedMonth:this.options.fixedMonth},l=WebSquare.controlFactory.createControl(s+"_calendar",r,null,this.scope_obj,!0,this.parentFrame);return l.options.xmlEvents=[{name:"ondateselect",action:"script",param:{handler:function(t){var i=e.options.skipConfirm||e.options.skipConfirmOnly,o="yearMonthDateHour"!=e.options.calendarValueType&&"yearMonthDateTime"!=e.options.calendarValueType&&"yearMonthDateTimeSec"!=e.options.calendarValueType;if(i||o){var s=e._getValue();e.endEdit();var r=e._getValue(),a=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(e,"ondateselect",this.getFormattedValue(),a),s!=r&&n.f.fireEvent(e,"onafterviewchange",{oldValue:s,newValue:r})}else{a=new Date(this.selectedDateHelper.getYear(),this.selectedDateHelper.getMonth()-1,this.selectedDateHelper.getDate());n.f.fireEvent(e,"ondateselect",this.getFormattedValue(),a)}}}},{name:"onyearselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"year"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];n.f.fireEvent(o,"onyearselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onmonthselect",action:"script",param:{handler:function(t){"dynamic"==e.options.pickerType&&"yearMonth"==e.options.calendarValueType&&e.endEdit();var o=WebSquare.idCache[i];n.f.fireEvent(o,"onmonthselect",{oldValue:t.oldValue,newValue:t.newValue})}}},{name:"onconfirm",action:"script",param:{handler:function(t){var i=this.getFormattedValue(),o=e._getValue(),s=this.options.disableBeforeDate,r=this.options.disableAfterDate;i&&(s&&parseInt(i.substr(0,8),10)<parseInt(s.substr(0,8),10)&&(i=s+i.substring(8)),r&&parseInt(i.substr(0,8),10)>parseInt(r.substr(0,8),10)&&(i=r+i.substring(8))),e._setValue(i,{
skipValidate:!0});var a=e._getValue();o!=a&&(n.f.fireEvent(e,"onconfirm"),n.f.fireEvent(e,"onviewchange",{oldValue:o,newValue:a}),n.f.fireEvent(e,"onafterviewchange",{oldValue:o,newValue:a})),e.hideCalendar(),e.dom.input.focus(),"select"==e.options.editType&&e.dom.input.select()}}},{name:"onoutsideclick",action:"script",param:{handler:function(t){var i=this.getFormattedValue();e._setValue(i,{skipValidate:!0})}}},{name:"oncancel",action:"script",param:{handler:function(t){e.hideCalendar(),(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus(),n.f.fireEvent(e,"oncancel")}}},{name:"onreset",action:"script",param:{handler:function(t){e.setValue(""),e.hideCalendar(),(document.getElementById(e.id+"_a")||document.getElementById(e.id+"_img")).focus()}}}],l.writeTo(WebSquare.getBody(),null,this.parentFrame),l.activate(),l.render&&(l.render.setAttribute("role","dialog"),this.event.addListener(l.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent))),this.addControl(l),l}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.showCalendar=function(){try{WebSquare.getBody().getLayerListener().show(this.id),"today"!=this.options.fixedDate||this.options.keepFixedDate||this.calendar.setInitValue(this._getValue()),n.f.fireEvent(this,"onafteropen")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._showCalendar=function(){try{if(this.calendar||(this.calendar=this.makeCalendar()),this.calendar){var t,e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight+5,o=document.documentElement.scrollLeft||document.body.scrollLeft,s=document.documentElement.scrollTop||document.body.scrollTop,r=parseInt(this.calendar.getStyle("width"))+parseInt(this.calendar.getStyle("border-right-width"))+parseInt(this.calendar.getStyle("border-left-width"));t="number"==typeof WebSquare.BootLoader.fullViewRatio&&1!==WebSquare.BootLoader.fullViewRatio?document.body.clientWidth||document.documentElement.clientWidth/WebSquare.BootLoader.fullViewRatio:document.documentElement.clientWidth||document.body.clientWidth,this.options.rightAlign||e+r>o+t&&(e=o+t-r-10),this.calendar.show("block",this.uuid);var n=(document.documentElement.scrollHeight||document.body.scrollHeight)-this.calendar.render.offsetHeight;i>n&&(i=n),this.options.rightAlign&&((e=e-(r-this.render.offsetWidth)-23)<0&&(e=WebSquare.style.getAbsoluteLeft(this.render)),e+r>o+t&&(e=o+t-r-23)),this.calendar.setPosition(e,i);var l=this.options.direction;if("auto"==l){var h=WebSquare.style.getAbsoluteTop(this.render)-s,d=document.documentElement.clientHeight-(h+this.render.offsetHeight),c=this.calendar.render.offsetHeight;d<c&&h>c&&(l="up")}"up"==l&&(i=WebSquare.style.getAbsoluteTop(this.render)-this.calendar.render.offsetHeight-5,this.calendar.setPosition(e,i)),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.calendar.render);var u=this._getValue(),p="";if(""!=u){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDate"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u);else if("yearMonth"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("year"==this.options.calendarValueType)p=WebSquare.text.unformatDate(this.options.ioFormat,u)+"01";else if("yearMonthDateHour"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,u);var g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);this.calendar.gotoTime(g)}else if("yearMonthDateTime"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,u);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2);var m=b.substr(2);this.calendar.gotoTime(g,m)}else if("yearMonthDateTimeSec"==this.options.calendarValueType){
p=WebSquare.text.unformatDate(this.options.ioFormat,u);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,u)).substr(0,2),m=b.substr(2,2);var f=b.substr(4);this.calendar.gotoTime(g,m,f)}this.calendar.gotoCalendar(p)}else if(""!==this.options.defaultDate){if(this.options.serverSync&&this.calendar.todayHelper.setToday(this.options.serverSync,this.scope_id,{serverSyncType:this.options.serverSyncType}),"yearMonthDateTimeSec"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=b.substr(2,2),f=b.substr(4);this.calendar.gotoTime(g,m,f)}else if("yearMonthDateTime"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2),m=b.substr(2);this.calendar.gotoTime(g,m)}else if("yearMonthDateHour"==this.options.calendarValueType){p=WebSquare.text.unformatDate(this.options.ioFormat,this.options.defaultDate);var b;g=(b=WebSquare.text.unformatTime(this.options.ioFormat,this.options.defaultDate)).substr(0,2);this.calendar.gotoTime(g)}this.calendar.gotoCalendar(this.options.defaultDate)}else this.calendar.gotoToday();this.options.focusOnOuterDiv&&(this.options.focusOnLastYear?this.calendar.getElementById(this.calendar.id+"_last_year").focus():this.calendar.render.focus()),this.calendar.render.setAttribute("aria-modal","true")}if(this.options.resetButtonShow){var y=this.calendar.render,v=y.getElementsByClassName("w2calendar_footer")[0],w=v.children,S=y.getElementsByClassName("w2calendar_wrap")[0].offsetWidth,_="yearMonthDate"==this.options.calendarValueType?"w2calendar_date_reset":"w2calendar_time_reset",C=y.getElementsByClassName(_)[0],x=v.offsetWidth;if(this.options.accessibility){x=0;for(var I=0;I<w.length;I++)x+=w[I].offsetWidth}x>S&&(C.style.display="none")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.hideCalendar=function(){try{WebSquare.getBody().getLayerListener().hide(this.id)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._hideCalendar=function(){try{this.calendar&&(!0===this.options.pickerStatusRefresh&&this.calendar._pickerStatusRefresh(),this.calendar.hide(),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.calendar.id),this.calendar.render.setAttribute("aria-modal","false"))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.toggle=function(){try{this.calendar&&"none"!=this.calendar.getStyle("display")?this.hideCalendar():this.showCalendar()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.focus=function(t){try{this._setFocused=!0,this.dom.input.focus();var e=Number(this.options.nextTabFocusPosition);e>=1&&t&&/^(on)*keydown$|^(on)*keyup$/.test(t.type)&&WebSquare.text.setCaretPos(this.dom.input,e-1)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.blur=function(){try{this.dom.input.blur()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.select=function(){try{this.dom.input.select()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.dom.input.setAttribute("disabled","disabled"):this.dom.input.removeAttribute("disabled");break;case"readOnly":1==e?(this.addClass(this.dom.input,this.options.readOnlyClass),this.addClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.setAttribute("readonly","readonly")):(this.removeClass(this.dom.input,this.options.readOnlyClass),this.removeClass(this.dom.img,this.options.imageReadOnlyClass),this.dom.input.removeAttribute("readonly"));break;case"mandatory":1==e?this.addClass(this.render,"w2inputCalendar_mandatory"):this.removeClass(this.render,"w2inputCalendar_mandatory")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.disableValidate=function(t){try{if(!t||8!==t.length)return
;var e=this.options.disableBeforeDate,i=this.options.disableAfterDate,o=!1;if(this.options.ioFormat&&this.options.ioFormat.length>=8&&"yyyyMMdd"!==this.options.ioFormat){var s=this.options.ioFormat;i&&(i=WebSquare.text.unformatDate(s.substr(0,8),i)),e&&(e=WebSquare.text.unformatDate(s.substr(0,8),e)),t=WebSquare.text.unformatDate(s.substr(0,8),t)}return t=parseInt(t),e=parseInt(e),i=parseInt(i),(""!==this.options.disableBeforeDate&&t<e||""!==this.options.disableAfterDate&&t>i)&&(o=!0),this.options.disabledDate.match(t)&&(o=o||!0),o}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.validate=function(){try{var t="";t=1==this.options.useEditFormat?this._editValue:this._getValue();var e=this.validator.validate(t);if(e&&""!=t&&(l.Z.getBoolean(this.options.dateValidCheck)||l.Z.getBoolean(this.options.dateValidSet))){var i={dateValidCheckType:this.options.dateValidCheckType};e=this.sub_validator.validate(t,i)}if(0==e&&!l.Z.getBoolean(this.options.dateValidSet))if(l.Z.isChrome()||l.Z.isFF()){var o=this;setTimeout((function(){o.focus()}),1)}else this.focus();return e}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.validateObject=function(){try{var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this._getValue()&&n.f.fireEvent(this,"onchange"),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setInputReadOnly=function(t){try{return l.Z.getBoolean(t)?(this.dom.input.readOnly=!0,!0):(this.dom.input.readOnly=!1,!1)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDisabled=function(t){try{if((t=l.Z.getBoolean(t))&&(this.options.placeholder||this.options.original_placeholder)){var e=this.options.placeholder||this.options.original_placeholder;this.setPlaceholder(""),this.options.original_placeholder=e}!0!==s.q.dataPrefix&&WebSquare.xfControl.prototype.setDisabled.call(this,t);var i=this.options.useAnchor&&!this.options.renderDiv?document.getElementById(this.id+"_a"):document.getElementById(this.id+"_img");t?(this.options.disabled=t,this.dom.input.setAttribute("disabled","disabled"),!0!==s.q.dataPrefix&&i.setAttribute("disabled","disabled"),this.addClass(this.dom.input,"w2input_disabled"),this.addClass(this.dom.img,"w2button_disabled"),this.dom.img.setAttribute("tabindex",-1)):(this.options.disabled=t,this.dom.input.removeAttribute("disabled"),!0!==s.q.dataPrefix&&i.removeAttribute("disabled"),this.removeClass(this.dom.input,"w2input_disabled"),this.removeClass(this.dom.img,"w2button_disabled"),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.dom.img.removeAttribute("tabindex"))}catch(t){a.Y.printStackTrace(t)}return t},u.prototype.setReadOnly=function(t){try{if(t=l.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,!0===s.q.dataPrefix?this.onPropertyChange("readOnly",l.Z.getBoolean(t)):this.setProperty("readOnly",t),(l.Z.isIE(6)||l.Z.isIE(7))&&this.setInputReadOnly(!0)}else this.options.readOnly=t,!0===s.q.dataPrefix?this.onPropertyChange("readOnly",l.Z.getBoolean(t)):this.setProperty("readOnly",t),!0===this.options.inputReadOnly?this.setInputReadOnly(!0):(l.Z.isIE(6)||l.Z.isIE(7))&&this.setInputReadOnly(!1),
(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){a.Y.printStackTrace(t,null,this)}return t},u.prototype.handleClickEventDocument=function(t){try{this.event&&!this.event.isMine(t,this.render)&&this.hideCalendar()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2inputCalendar_input")||e.match("w2inputCalendar_divInput")){this._setFocused=!0,"select"!==this.options.editType||r.I.browserCheck.ieAllVersion||e.getElement().select();break}if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_a")||e.match("w2inputCalendar_button")){if(0==n.f.fireEvent(this,"oniconclick"))continue;"native"==this.options.renderType?this.showCalendar():this.toggle(),1==this.options.useAnchor&&n.f.stopEvent(t);break}}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{n.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button")){this.addClass(e.getElement(),"w2inputCalendar_img_over");var i=""==this.options.calendarImageOver?s.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar_over.gif":this.options.calendarImageOver;e.match("w2inputCalendar_button")?this.options.calendarImage&&(e.getElement().style.backgroundImage="url("+i+")"):e.getElement().src=i}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{n.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2inputCalendar_img")||e.match("w2inputCalendar_button"))if(this.removeClass(e.getElement(),"w2inputCalendar_img_over"),e.match("w2inputCalendar_button"))""===this.options.calendarImage?e.getElement().style.backgroundImage="":e.getElement().style.backgroundImage="url("+this.options.calendarImage+")";else{var i=""==this.options.calendarImage?s.q._resourceURI+"uiplugin/inputCalendar/images/icon_calendar.gif":this.options.calendarImage;e.getElement().src=i}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),1==this.dom.input.readOnly)return this.options.showCalendarOnFocus&&(this._showCalendarOnFocus&&this.toggle(),this._showCalendarOnFocus=!0),void n.f.stopEvent(t);this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value="",this.removeClass(this.dom.input,"w2inputCalendar_placeholder")),0==this.evented&&(this.evented=!0,this.event.addListener(this.dom.input,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),0==this.options.useEditFormat&&this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),l.Z.isMobile()&&this.options.validateOnInputMobile?this.event.addListener(this.dom.input,"onkeyup",this.event.bindAsEventListener(this,this.validateOnInputMobile)):this.event.addListener(this.dom.input,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent))),this.addClass(this.dom.input,"w2inputCalendar_focus");var e=this._getValue();if("all"==this.options.applyFormat)this.dom.input.value=this.formatter.format(e,!0);else if(1==this.options.useEditFormat){var i=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=i.value}else this.dom.input.value=e,0==this._setFocused&&this.select(),this._setFocused=!1;var o=this,s=WebSquare.historyManager.get(this.options.pluginName,this.id);if(l.Z.getBoolean(this.options.dateValidSet)&&this.dom.input.value&&!this.validate()&&(e=s.value),this.options.disableDateValidSet){var r=this._getValue();this.disableValidate(r)||(e=r)}WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{onRestore:function(t){o._setValue(t.value,{skipValidate:!0})}}),n.f.fireEvent(this,"onfocus"),
"select"===this.options.editType&&this.select()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{this.removeClass(this.dom.input,"w2inputCalendar_focus");var e,i=WebSquare.historyManager.get(this.options.pluginName,this.id),o=this._getValue();if(e=this.parentControl&&this.parentControl.options&&("grid"===this.parentControl.options.pluginName||"gridView"===this.parentControl.options.pluginName)?o:this.validator.validateString(o),o!=(e=this.sub_validator.validateString(e))&&(1==this.options.useEditFormat?this.setValueNM(o,{noFormat:!0}):this.setValueNM(e)),this._setValue(e,{skipValidate:!0}),this.formatter.unformat(i.value)!=this._getValue()){n.f.fireEvent(this,"onchange");var s=this._getValue();n.f.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:s})}if(l.Z.getBoolean(this.options.dateValidSet)&&!0!==this._skipDateValidSet&&(this.validate()?this._setValue(e,{skipValidate:!0}):!0!==this.options.dateValidSetCustom&&null!=i.value&&this._setValue(i.value,{skipValidate:!0})),this.options.disableDateValidSet){var r=this._getValue();this.disableValidate(r)?null!=i.value&&this._setValue(i.value,{skipValidate:!0}):this._setValue(r,{skipValidate:!0})}this.hideCalendar(),n.f.fireEvent(this,"onblur"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleInputValidator=function(t){try{var e=this.dom.input.value;if(1==this.options.useEditFormat){for(var i=this.dom.input.selectionStart,o=0,s=0,r=i-1;r>=0;r--)0==/^[0-9a-zA-Z]/.test(e.charAt(r))&&o++;var l=WebSquare.text.dynamicMask(e,this._editFormat,this._editTokens);this.dom.input.value=l.value,this._editValue=l.orgValue;for(r=i;r>=0;r--)0==/^[0-9a-zA-Z]/.test(l.value.charAt(r))&&s++;var h=i+(s-o);this.dom.input===document.activeElement&&this.dom.input.setSelectionRange(h,h)}if(1==this.options.validateOnInput){var d=this.validator.validateKeyInput(this.dom.input,e,t);if(d.valid){var c=this.sub_validator.validateKeyInput(this.dom.input,d.str,t);if(c.valid){var u=c.str,p=this.dom.input.id;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(p).value=u})):this.dom.input.value=u}else n.f.stopEvent(t)}else n.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;var i=0;if("all"==this.options.applyFormat&&this.options.displayFormat?i=this.options.displayFormat.length:1==this.options.useEditFormat&&(i=this._editFormat[0].length),e==t.which||null==t.which){var o=this._getValue();this.validator.validateKeyPress(this.dom.input,o,t)&&this.sub_validator.validateKeyPress(this.dom.input,o,t,i)||n.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.validateOnInputMobile=function(t){try{var e=this.dom.input.value.length-1,i=this.dom.input.value.charCodeAt(e),o={charCode:i,keyCode:i},s=this._getValue(),r=0;"all"==this.options.applyFormat&&this.options.displayFormat?r=this.options.displayFormat.length:1==this.options.useEditFormat&&(r=this._editFormat[0].length),this.validator.validateKeyPress(this.dom.input,s,o)&&this.sub_validator.validateKeyPress(this.dom.input,s,o,r)||(this.dom.input.value=this.dom.input.value.slice(0,e))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeyupEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(9==e)return;if(!0===this._bCtrlKeyup&&(86===e&&(this._keyDownStart=!0),this._bCtrlKeyup=!1),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e||9==e);else if(27==e)!1===this.options.preventDeleteByESC&&(this.dom.input.value="");else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else{var i=this.dom.input.value;if("all"==this.options.applyFormat){i=this._getValue()
;var o,s,r=WebSquare.text.getCaretPos(this.dom.input);o=i.length,i=this.formatter.unformat(i),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),i=this.formatter.format(i,!0),i=this.validator.validateString(i),i=this.sub_validator.validateString(i),s=(i=this.formatter.format(i,!0)).length,this.dom.input.value=i,this.realValue=i,WebSquare.text.setCaretPos(this.dom.input,r+s-o)}t.ctrlKey&&86!==e||17===e||this.autoFocus(t)}this.options.autoFocus&&(this._keyDownStart=!1,17===e&&(this._bCtrlKeyup=!0))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.autoFocus=function(t){try{if(!this.options.autoFocus)return;var e=this.getValue();l.Z.getByteLength(e)===this.options.maxByteLength&&this._autoFocus(t)}catch(t){a.Y.printStackTrace(t)}},u.prototype._autoFocus=function(t){try{if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var e=l.Z.getNextTabbableComp(this.id);e&&this._keyDownStart&&e.focus(t)}else{var i=l.Z.getGlobalFunction(r.I.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof i&&i.call(this,this.id)}}catch(t){a.Y.printStackTrace(t)}},u.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(this.calendar&&"none"!=this.calendar.getStyle("display")){var i="dynamic"===this.options.pickerType&&("year"===this.options.calendarValueType||"yearMonth"===this.options.calendarValueType);if(37==e||38==e||39==e||40==e)n.f.preventDefault(t);else if(27==e)this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();else if(9==e&&1!=t.shiftKey){for(var o=this.event.getTargetIterator(t,this.calendar.render);o.next();){if(i&&o.match("w2calendar_picker_cell")){!0===this.options.accessibility?this.calendar.render.focus():this.hideCalendar();break}if("yearMonthDate"===this.options.calendarValueType&&0==this.options.cancleButtonShow&&o.match("w2calendar_go_today")||"yearMonthDate"===this.options.calendarValueType&&1==this.options.cancleButtonShow&&o.match("w2calendar_date_cancel")||"yearMonthDateTime"==this.options.calendarValueType&&o.match("w2calendar_time_cancel")||"yearMonthDateHour"==this.options.calendarValueType&&o.match("w2calendar_time_cancel")||"yearMonthDateTimeSec"==this.options.calendarValueType&&o.match("w2calendar_time_cancel")||"yearMonth"==this.options.calendarValueType&&o.match("w2calendar_header_btn_close")||"year"==this.options.calendarValueType&&o.match("w2calendar_header_btn_close_yearType")){n.f.preventDefault(t),!0===this.options.accessibility?this.calendar.render.focus():(this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus());break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}else if(9==e&&1==t.shiftKey){for(o=this.event.getTargetIterator(t,this.calendar.render);o.next();){if(i&&o.match("w2calendar_picker_header_last_entity")){this.hideCalendar();break}if(o.match("w2calendar_header_last_year")){n.f.stopEvent(t),this.hideCalendar(),(document.getElementById(this.id+"_a")||document.getElementById(this.id+"_img")).focus();break}}document.activeElement.id===this.id+"_img"&&this.hideCalendar()}}else if(13==e){for(o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("w2inputCalendar_img")){n.f.stopEvent(t),this.showCalendar();break}}else if(9==e)for(o=this.event.getTargetIterator(t,this.render);o.next();){if(o.match("w2inputCalendar_input")||o.match("w2inputCalendar_divInput")){if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(n.f.preventDefault(t),s=l.Z.getPreTabbableComp(this.id))return void s.focus(t)}else if(!1===this.options.useCalendarTabIndex)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.f.preventDefault(t),s=l.Z.getNextTabbableComp(this.id))return void s.focus(t)}else if(o.match("w2inputCalendar_img")||o.match("w2inputCalendar_a")||o.match("w2inputCalendar_button")){var s
;if(!t.shiftKey)if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(n.f.preventDefault(t),s=l.Z.getNextTabbableComp(this.id))return void s.focus(t)}}this.options.autoFocus&&(this._keyDownStart=!0),this.dom.input===document.activeElement&&this.options.useEditFormat&&WebSquare.text.deleteMaskChar(t,this,this.dom.input)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handlePasteEvent=function(t){var e="";if("paste"==t.type){var i;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}var o=i.getData("Text");e=o;l.Z.getBoolean(this.options.unformatOnPaste)&&(e=(e=e.wq_trim()).replace(/[a-zA-Z]+/g,""),e=WebSquare.text.unformatDate2(this.options.displayFormat,e,this.options.ioFormat));var s=n.f.fireEvent(this,"onbeforepaste",o);if(!1!==s){var r;null!=s&&(e=s);var a=WebSquare.text.getSelection(this.dom.input);e=(r="all"==this.options.applyFormat?this._getValue():this.dom.input.value).substring(0,a.start)+e+r.substring(a.end),e=this.validator.validateString(e),e=this.sub_validator.validateString(e),"all"==this.options.applyFormat?this.setValueNM(e):this.setValueNM(e,{noFormat:!0}),n.f.preventDefault(t)}}},u.prototype.setDisplayFormat=function(t){try{if(1==this.options.useEditFormat){var e=t.replace(/[a-zA-Z]/g,"#");this._editFormat=e.split("||")}this.options.displayFormat=t,this.formatter.setMasking(t),this.setValueNM(this._getValue())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getDefaultDate=function(){try{return this.options.defaultDate}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDefaultDate=function(t){try{if("string"!=typeof t)return;var e=8;if("yearMonthDateTimeSec"==this.options.calendarValueType?e=14:"yearMonthDateTime"==this.options.calendarValueType?e=12:"yearMonthDateHour"==this.options.calendarValueType&&(e=10),t.length!==e)return;this.hideCalendar(),this.options.defaultDate=t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getAccessibiltyId=function(){try{return this.id+"_input"}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setFormat=function(){try{if("object"==(0,o.A)(arguments[0])){var t=arguments[0].ioFormat||this.options.ioFormat,e=arguments[0].displayFormat||this.options.displayFormat,i=arguments[0].displayFormatter||this.options.displayFormatter;this.options.useMonthYearFormat=arguments[0].useMonthYearFormat||this.options.useMonthYearFormat,this.options.calendarDisplayFormat=arguments[0].calendarDisplayFormat||this.options.calendarDisplayFormat}else t=arguments[0]||this.options.ioFormat,e=arguments[1]||this.options.displayFormat,i=this.options.displayFormatter;if(this.options.displayFormat=e,this.options.displayFormatter=i,1==this.options.useEditFormat){var s=e.replace(/[a-zA-Z]/g,"#");this._editFormat=s.split("||")}if(t!=this.options.ioFormat){t=t.match(/([yMdHmS]+)/g).join("");var r=this.getFormattedValue(t);if(this.options.ioFormat=t,this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),l.Z.getBoolean(this.options.dateValidCheck)||l.Z.getBoolean(this.options.dateValidSet)){var n=new c.N.dateCommand(this.options.ioFormat);this.sub_validator.removeCommand(n),this.sub_validator.addCommand(n)}this._setValue(r,{skipValidate:!0}),this.calendar&&(this.calendar.remove(),delete this.calendar)}else{r=this._getValue();this.formatter=WebSquare.format.createFormatter("date",e,i,t,null,null,this.scope_id,this.id),this.setValueNM(r)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setIoFormat=function(t,e){try{"object"===(0,o.A)(t)?this.setFormat(t):this.setFormat({ioFormat:t,displayFormat:e})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setCalendarValueType=function(t,e){try{if(t==this.options.calendarValueType)return!1;this.removeClass("w2inputCalendar_type_"+this.options.calendarValueType),
this.addClass("w2inputCalendar_type_"+t),this.options.calendarValueType=t,(e=e||{}).ioFormat&&(e.ioFormat=e.ioFormat.match(/([yMdHmS]+)/g).join(""));var i="";if("yearMonthDate"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd",this.options.ioFormat=e.ioFormat||"yyyyMMdd",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd"):"yearMonth"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM",this.options.ioFormat=e.ioFormat||"yyyyMM",i="yyyy"+this.options.delimiter+"MM"):"year"==t?(this.options.displayFormat=e.displayFormat||"yyyy",this.options.ioFormat=e.ioFormat||"yyyy",i="yyyy"):"yearMonthDateHour"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH",this.options.ioFormat=e.ioFormat||"yyyyMMddHH",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH"):"yearMonthDateTime"==t?(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmm",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm"):"yearMonthDateTimeSec"==t&&(this.options.displayFormat=e.displayFormat||"yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS",this.options.ioFormat=e.ioFormat||"yyyyMMddHHmmSS",i="yyyy"+this.options.delimiter+"MM"+this.options.delimiter+"dd HH:mm:SS"),1==this.options.useEditFormat){var o=i.replace(/[a-zA-Z]/g,"#");this._editFormat=o.split("||")}this.calendar&&(this.calendar.remove(),delete this.calendar),this.formatter=null,this.validator=null,this.sub_validator=null,this.options.maxlength=this.options.minlength=-1,this.formatter=WebSquare.format.createFormatter("date",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.validator=new c.N.validateInvoker(this.id,this.options),this.sub_validator=new c.N.validateInvoker(this.id,{_scope_obj_uuid:this.options._scope_obj_uuid,invalidMessageFunc:this.options.invalidMessageFunc}),this.sub_validator.addCommand(new c.N.dateCommand(this.options.ioFormat)),this.sub_validator.addCommand(new c.N.allowCharCommand("0-9"));var s=0;return"yearMonthDate"==this.options.calendarValueType?s=8:"yearMonth"==this.options.calendarValueType?s=6:"year"==this.options.calendarValueType?s=4:"yearMonthDateHour"==this.options.calendarValueType?s=10:"yearMonthDateTime"==this.options.calendarValueType?s=12:"yearMonthDateTimeSec"==this.options.calendarValueType&&(s=14),"all"==this.options.applyFormat&&this.options.displayFormat&&(s=this.options.ioFormat.length),this.options.maxlength=s,this.options.minlength=s,this.sub_validator.addCommand(new c.N.maxLengthCommand(s)),this.sub_validator.addCommand(new c.N.minLengthCommand(s)),!0}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getIoFormat=function(){try{return this.options.ioFormat}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getFormattedValue=function(t){try{t=t||this.options.displayFormat;var e=this._getValue();return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2inputCalendar_placeholder")&&(e=""),WebSquare.format.createFormatter("date",t,"",this.options.ioFormat,null,null,this.scope_id,this.id).format(e)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.Y.printStackTrace(t)}},u.prototype.setPlaceholder=function(t){try{if(l.Z.isNull(t))return;WebSquare.uiplugin.inputCalendar.placeholder&&(this.supportPlaceholder=!0),this.dom.input.placeholder!=t&&(this.options.placeholder=t,this.options.original_placeholder=t,
this.supportPlaceholder?this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.dom.input.placeholder=this.options.placeholder:this.options.placeholder="":this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?0==this.realValue.length&&(this.hasClass("w2inputCalendar_placeholder")?this.dom.input.value=this.options.placeholder:(this.dom.input.value=this.options.placeholder,this.addClass("w2inputCalendar_placeholder"))):this.options.placeholder="")}catch(t){a.Y.printStackTrace(t)}},u.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){a.Y.printStackTrace(t)}},u.prototype.setHolidayRef=function(t){try{t&&(this.options.holidayRef=t,this.calendar&&(this.calendar.options.holidayRef=t,this.calendar.refresh()))}catch(t){a.Y.printStackTrace(t)}},u.prototype.setHoliday=function(t,e){try{t&&(this.options.holiday=e?t:this.options.holiday+" "+t),this.calendar&&(this.calendar.options.holiday=this.options.holiday,this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.removeHoliday=function(){try{this.options.holiday="",this.calendar&&(this.calendar.options.holiday="",this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setEnabledDate=function(t){try{this.options.enabledDate=this.options.enabledDate+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledDate=this.options.disabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.enableDate=function(t){this.setEnabledDate(t)},u.prototype.setDisabledDate=function(t){try{t&&(this.options.disabledDate=this.options.disabledDate+" "+t);for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.enabledDate=this.options.enabledDate.replace(new RegExp(o,"g"),"")}this.calendar&&(this.calendar.options.enabledDate=this.options.enabledDate,this.calendar.options.disabledDate=this.options.disabledDate,this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.disableDate=function(t){this.setDisabledDate(t)},u.prototype.setDisableBeforeDate=function(t){try{t&&(this.options.disableBeforeDate=t,this.calendar&&(this.calendar.options.disableBeforeDate=t,this.calendar.updateCalendar()))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.disableBeforeDate=function(t){this.setDisableBeforeDate(t)},u.prototype.setDisableAfterDate=function(t){try{t&&(this.options.disableAfterDate=t,this.calendar&&(this.calendar.options.disableAfterDate=t,this.calendar.updateCalendar()))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.disableAfterDate=function(t){this.setDisableAfterDate(t)},u.prototype.enableAllDate=function(t){try{this.options.disableBeforeDate="",this.options.disableAfterDate="",t&&(this.options.disabledDate=""),this.calendar&&(this.calendar.options.disableBeforeDate="",this.calendar.options.disableAfterDate="",t&&(this.calendar.options.disabledDate=""),this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setEnabledMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;this.options.enabledMonth=this.options.enabledMonth+" "+t;for(var e=(t||"").split(" "),i=0;i<e.length;i++){var o="*"===e[i]?"\\*":e[i];this.options.disabledMonth=this.options.disabledMonth.replace(new RegExp(o,"g"),"")}this.calendar&&(this.hideCalendar(),this.calendar.options.enabledMonth=this.options.enabledMonth,this.calendar.options.disabledMonth=this.options.disabledMonth,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDisabledMonth=function(t,e){try{
if("dynamic"!==this.options.pickerType)return;t&&(this.options.disabledMonth=!0===e?t:this.options.disabledMonth+" "+t);for(var i=(t||"").split(" "),o=0;o<i.length;o++){var s="*"===i[o]?"\\*":i[o];this.options.enabledMonth=this.options.enabledMonth.replace(new RegExp(s,"g"),"")}this.calendar&&(this.hideCalendar(),this.calendar.options.enabledMonth=this.options.enabledMonth,this.calendar.options.disabledMonth=this.options.disabledMonth,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDisableBeforeMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;"string"==typeof t&&6===t.length&&(this.options.disableBeforeMonth=t,this.calendar&&(this.hideCalendar(),this.calendar.options.disableBeforeMonth=t,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar()))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDisableAfterMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;"string"==typeof t&&6===t.length&&(this.options.disableAfterMonth=t,this.calendar&&(this.hideCalendar(),this.calendar.options.disableAfterMonth=t,this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar()))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.enableAllMonth=function(t){try{if("dynamic"!==this.options.pickerType)return;this.options.disableBeforeMonth="",this.options.disableAfterMonth="",t&&(this.options.disabledMonth=""),this.calendar&&(this.hideCalendar(),this.calendar.options.disableBeforeMonth="",this.calendar.options.disableAfterMonth="",t&&(this.calendar.options.disabledMonth=""),this.calendar._initDisabledMonthInfo(),this.calendar.updateCalendar())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.holidayRef=this.options.holidayRef,t.ref=this.options.ref,t):null}catch(t){a.Y.printStackTrace(t)}},u.prototype.setButtonTitle=function(t){try{var e=document.getElementById(this.id+"_img");null!=e&&e.setAttribute("title",t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getButtonTitle=function(){try{var t="",e=document.getElementById(this.id+"_img");return null!=e&&(t=e.getAttribute("title")),t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.serialize=function(){return{value:this._getValue()}},u.prototype.restore=function(t){try{return this._setValue(t.value,{skipValidate:!0}),!0}catch(t){return a.Y.printStackTrace(t,null,this),!1}},u.prototype.setInputStyle=function(t,e){try{var i=document.getElementById(this.id+"_input");null!=i&&WebSquare.style.setStyle(i,t,e)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.endEdit=function(){try{if(!this.calendar)return;var t=this.calendar.getFormattedValue(),e=this._getValue();this.toggle(),this._setValue(t,{skipValidate:!0});var i=this._getValue();e!=i&&n.f.fireEvent(this,"onviewchange",{oldValue:e,newValue:i}),this.hideCalendar(),l.Z.isMobile()&&!this.options.focusOnDateSelect||(this.options.showCalendarOnFocus&&(this._showCalendarOnFocus=!1),this.dom.input.focus(),"select"==this.options.editType&&this.dom.input.select())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setValueCancel=function(){try{var t=WebSquare.historyManager.get(this.options.pluginName,this.id);null!=t.value&&this._setValue(t.value,{skipValidate:!0}),this.focus()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.checkResize=function(){try{if(!this.render)return;var t=this.render.offsetWidth,e=this.render.offsetHeight;if(t>0&&e>0)if(0==this.resizeObj.width&&0==this.resizeObj.height);else{var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.setSetting()}this.resizeObj={width:t,height:e}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setFixedMonth=function(t){try{this.options.fixedMonth=t,this.calendar&&this.calendar.setFixedMonth.call(this.calendar,t)}catch(t){
a.Y.printStackTrace(t)}}},4984:function(t,e,i){"use strict";i.r(e),i.d(e,{list:function(){return c}});var o=i(2284),s=i(5461),r=i(8971),a=i(2338),n=i(1204),l=i(2256),h=i(2406),d=i(7455),c=function(t,e,i){h.q.call(this,t,e,i)};s.q.extend(c.prototype,h.q.prototype),s.q.extend(c.prototype,d.t.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.list",pluginName:"list",userEvents:["onrowclick"],tagName:"div",sortable:!1,virtualized:!1,visibleRowNum:10,useSearch:!1,_listRowHeight:0,wheelRows:0,placeholder:"",useCloseButton:!1,selectedCellColor:"#FCA73C"},c.prototype.initialize=function(t){if(this.uniqueIdSequence=0,this.listRowInfo=WebSquare.xml.getChildren(t.parentNode,"w2:list")[0],this.listColumnInfo=WebSquare.xml.getChildren(t,"w2:listRow"),this.options.nodeset&&(this.modelDataXMLArr=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id),this.modelControl.itemsetObj={nodeset:this.options.nodeset,label:"",value:""}),this.options.virtualized){this.options.rowHeight=21;for(var e=this.listRowInfo.style.split(";"),i=0;i<e.length;i++){var o=e[i];if(o.indexOf("height")>-1&&o.indexOf(":")>-1){var s=parseInt(o.split(":")[1].wq_trim().replaceAll("px",""));isNaN(s)||(this.options.rowHeight=s+1)}}}this.listRowObjArr=[],this.isIE67=n.Z.isIEAllVersion("6 7"),this.options.useSearch&&(this.myhelper=new WebSquare.korHelper)},c.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";if(t.push("<"+this.options.tagName+" id='"+this.id+"' "+e+" class='w2list w2noselect "+this.options.className+"' tabIndex='0'>"),this.options.virtualized){var i=this.isIE67?"position:relative;height:100%;background-color:white;":"position:relative;width:100%;height:100%;box-sizing:border-box;background-color:white;",o=this.isIE67?"position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%'":"";if(t.push("<div id='"+this.id+"_main' style='"+i+"'>"),this.options.useSearch){var s="height:"+(parseInt(this.options._listRowHeight)-3)+"px;";t.push("<input id='"+this.id+"_input' name='"+this.id+"_input' style='"+s+"'class='w2list_input' placeholder='"+this.options.placeholder+"'></input>")}t.push("<div id='"+this.id+"_items_main' style='"+o+"'>")}if(this.options.nodeset){var r=this.modelDataXMLArr.length;this.options.virtualized&&(r=Math.min(this.modelDataXMLArr.length,this.options.visibleRowNum));for(var a=0;a<r;a++){var l=""==this.listRowInfo.style?"":"style='"+this.listRowInfo.style+"'";t.push("<"+this.listRowInfo.tagName+" "+l+" class='w2list_listRow "+this.listRowInfo.class+"' >");for(var h=0;h<this.listColumnInfo.length;h++){var d=this.listColumnInfo[h],c=d.value,u=WebSquare.xml.getValue(this.modelDataXMLArr[a],d.ref);switch(""!=u&&(c=u),d.inputType){case"checkbox":var p=n.Z.getBoolean(c)?'checked="checked"':"",g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='checkbox' "+p),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_checkbox "+d.class+"' >"),t.push("</input>");break;case"text":g=""==d.style?"":" style='"+d.style+"' ";t.push("<span "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_text "+d.class+"' >"),t.push(c),t.push("</span>");break;case"button":g=""==d.style?"":" style='"+d.style+"' ";t.push("<input type='button'"),t.push(" value='"+c+"' "),t.push(g),t.push(" class='w2list_listColumn w2list_listColumn_button "+d.class+"' >"),t.push("</input>")}}t.push("</"+this.listRowInfo.tagName+">")}}return this.options.virtualized&&(t.push("</div>"),t.push("<div id='"+this.id+"_scroll_main' class='w2list_scroll_main' style='position:absolute;right:0;top:0;height:100%;padding:1px;background-color:#ccc;box-sizing:border-box;'>"),t.push("<div id='"+this.id+"_scroll_track' class='w2list_scroll_track' style='position:relative;width:100%;height:100%;background-color:#eee;box-sizing:border-box;'>"),
t.push("<div id='"+this.id+"_scroll_thumb' class='w2list_scroll_thumb' style='position:absolute;width:100%;height:100%;left:1px;width:8px;background-color:#bbb;border-radius:3px'>"),t.push("</div>"),t.push("</div>"),t.push("</div>"),t.push("</div>")),t.push("</"+this.options.tagName+">"),t.join("")},c.prototype.setPreAction=function(){try{this.options.useSearch&&(this.dom.input=this.getElementById(this.id+"_input"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){if(this.initializeListInfo(),this.options.virtualized){var t=this.getElementById(this.id+"_items_main");n.Z.isTouchDevice()?this.event.addListener(t,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent)):this.event.addListener(t,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(t,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(t,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),n.Z.isIE()?this.event.addListener(t,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)):this.event.addListener(t,"onwheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))}else n.Z.isTouchDevice()?this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent)):this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent));if(this.options.sortable&&(1==this.isMobile||this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleDragEvent))),this.options.virtualized){this.adjustRender();var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track");this.event.addListener(e,"onmouseenter",this.event.bindAsEventListener(this,(function(t){e.style.backgroundColor="#aaa"}))),this.event.addListener(e,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted||(e.style.backgroundColor="#bbb")}))),this.event.addListener(e,"onmousedown",this.event.bindAsEventListener(this,(function(t){this.listRowObjArr.length>0&&(this.scrollStarted=!0,this.scrollStartMouseEvent={},this.scrollStartMouseEvent.clientY=t.clientY,this.scrollStartMouseEvent.original_top=e.offsetTop,this.scrollStartMouseEvent.max_top=e.parentElement.offsetHeight-e.offsetHeight,e.style.backgroundColor="#999")}))),this.event.addListener(i,"onclick",this.event.bindAsEventListener(this,(function(t){if(!this.scrollStarted){if((n.Z.isIE()?t.srcElement:t.target)!=i)return;a.f.stopPropagation(t);var o=t.offsetY-e.offsetHeight/2;if(o<0&&(o=0),o>e.parentElement.offsetHeight-e.offsetHeight&&(o=e.parentElement.offsetHeight-e.offsetHeight),e.offsetTop!=o){e.style.top=o+"px";var s=this.listRowObjArr.length-this.options.visibleRowNum;if(s>0){var r=(i.offsetHeight-e.offsetHeight)/s,l=Math.floor(o/r);this.setFirstRowIndex(l,!0)}else this.setFirstRowIndex(0,!0)}}}))),this.event.addListener(this.parentControl.render,"onmouseup",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmouseleave",this.event.bindAsEventListener(this,(function(t){this.scrollStarted&&(this.scrollStarted=!1,e.style.backgroundColor="#bbb")}))),this.event.addListener(this.parentControl.render,"onmousemove",this.event.bindAsEventListener(this,(function(t){if(this.scrollStarted){var o=t.clientY-this.scrollStartMouseEvent.clientY,s=this.scrollStartMouseEvent.original_top+o;if(s<0&&(s=0),
s>this.scrollStartMouseEvent.max_top&&(s=this.scrollStartMouseEvent.max_top),e.offsetTop!=s){e.style.top=s+"px";var r=this.listRowObjArr.length-this.options.visibleRowNum;if(r>0){var a=(i.offsetHeight-e.offsetHeight)/r,n=Math.floor(s/a);this.setFirstRowIndex(n,!0)}else this.setFirstRowIndex(0,!0)}}})))}},c.prototype.setLayout=function(){},c.prototype.initializeListInfo=function(){try{if(this.options.nodeset){for(var t=n.Z.getDataPrefix("unique_id"),e=0;e<this.modelDataXMLArr.length;e++){var i,o,s,a=this.id+"_"+this.uniqueIdSequence;WebSquare.xml.setAttribute(this.modelDataXMLArr[e],t,a),this.render.childNodes[e].setAttribute(t,a);for(var l={},h=0;h<this.listColumnInfo.length;h++)o=(i=this.listColumnInfo[h]).value,""!=(s=WebSquare.xml.getValue(this.modelDataXMLArr[e],i.ref))&&(o=s),l[i.id]=o;l[t]=a,this.listRowObjArr.push(l),this.uniqueIdSequence++}this.onListRowObjArrChanged()}}catch(t){r.Y.printStackTrace(t)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=WebSquare.ModelUtil.findInstanceNodes(this.options.nodeset,null,this.scope_id);this.modelDataXMLArr=t;var e=this.listRowObjArr;this.listRowObjArr=[];for(var i=0;i<this.modelDataXMLArr.length;i++)this.listRowObjArr[i]=this.createObjByXML(this.modelDataXMLArr[i]);var o=n.Z.getDataPrefix("unique_id");for(i=0;i<e.length;i++)for(var s=0;s<this.listRowObjArr.length;s++)if(e[i][o]==this.listRowObjArr[s][o]){e[i].exist=!0;break}for(i=0;i<e.length;i++)if(1!=e[i].exist){var a=this.getRenderByUniqueId(e[i][o]);a.parentNode.removeChild(a)}for(i=0;i<this.listRowObjArr.length;i++){var l=this.listRowObjArr[i],h=this.getRenderByUniqueId(l[o]);if(h){for(s=0;s<e.length;s++){var d=e[s];if(d[o]==l[o])for(var c=0;c<this.listColumnInfo.length;c++){var u=l[this.listColumnInfo[c].id];if(d[this.listColumnInfo[c].id]!=u)switch(this.listColumnInfo[c].inputType){case"checkbox":h.childNodes[c].checked=n.Z.getBoolean(u);break;case"text":h.childNodes[c].innerHTML=u;break;case"button":h.childNodes[c].value=u}}}var p;for(s=0;s<this.getLength();s++){var g=this.render.childNodes[s];h.getAttribute(o)==g.getAttribute(o)&&(p=s)}this.moveRowRender(p,i)}else this.insertRowRender(i,this.listRowObjArr[i])}this.onListRowObjArrChanged()}}catch(t){r.Y.printStackTrace(t)}},c.prototype.refresh=function(){},c.prototype.insertInModel=function(t,e,i){try{switch(i){case"append":var o=this.options.nodeset.split("/");o.splice(o.length-1,1);var s=o;s=s.join("/"),WebSquare.ModelUtil.setInstanceNode(e,s,null,"append");break;case"insertBeforeSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+(t+1)+"]",null,"insertBeforeSibling");break;case"appendSibling":WebSquare.ModelUtil.setInstanceNode(e,this.options.nodeset+"["+t+"]",null,"appendSibling");break;default:return}}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeFromModel=function(t){try{WebSquare.ModelUtil.removeInstanceNode(this.options.nodeset+"["+(t+1)+"]")}catch(t){r.Y.printStackTrace(t)}},c.prototype.insertRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return;if(t>o&&(t=o),this.options.nodeset){var s=this.createXMLByObj(e);0==i.length?this.insertInModel(t,s,"append"):i.length>t&&t>=0?this.insertInModel(t,s,"insertBeforeSibling"):this.insertInModel(t,s,"appendSibling")}else this.insertRowNM(t,e)}catch(t){r.Y.printStackTrace(t)}},c.prototype.insertRowNM=function(t,e){try{var i=this.getLength();e[n.Z.getDataPrefix("unique_id")]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,i>t&&t>=0?this.listRowObjArr.splice(t,0,e):this.listRowObjArr.push(e),this.onListRowObjArrChanged(),this.insertRowRender(t,e)}catch(t){r.Y.printStackTrace(t)}},c.prototype.insertRenderStr=function(t){try{var e,i,o=n.Z.getDataPrefix("unique_id");t[o]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++,this.listRowObjArr.push(t),this.onListRowObjArrChanged()
;for(var s="<"+this.listRowInfo.tagName+" class='w2list_listRow "+this.listRowInfo.class+"' style='"+this.listRowInfo.style+"' "+o+"='"+t[o]+"'>",a=0;a<this.listColumnInfo.length;a++){var l=this.listColumnInfo[a].id;null!=t[l]||null!=t[l]?e=t[l]:(e=this.listColumnInfo[a].value,t[this.listColumnInfo[a].id]=this.listColumnInfo[a].value),i=this.listColumnInfo[a],s+=this.createItemNodeStr(i,e)}return s+="</"+this.listRowInfo.tagName+">"}catch(t){r.Y.printStackTrace(t)}},c.prototype.insertRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t<0)return;t>o&&(t=o);var s=this.createRenderByObj(e);i.length>t&&t>=0?this.render.insertBefore(s,i[t]):this.render.appendChild(s)}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeRow=function(t){try{this.getChildNodes().length>t&&t>=0&&(this.options.nodeset?this.removeFromModel(t):this.removeRowNM(t))}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeRowNM=function(t){try{this.removeRowRender(t),this.listRowObjArr.splice(t,1),this.onListRowObjArrChanged()}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeRowRender=function(t){try{var e=this.options.virtualized?this.getElementById(this.id+"_items_main"):this.getElementById(this.id),i=e.children;i.length>t&&t>=0&&e.removeChild(i[t])}catch(t){r.Y.printStackTrace(t)}},c.prototype.removeAll=function(){try{this.options.nodeset?WebSquare.ModelUtil.removeInstanceNodes(this.options.nodeset):(this.listRowObjArr=[],this.render.innerHTML=""),this.onListRowObjArrChanged()}catch(t){r.Y.printStackTrace(t)}},c.prototype.moveRow=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0)if(this.options.nodeset){var s=this.modelDataXMLArr[t];i.length-1>e&&e>=0?(this.removeFromModel(t),this.insertInModel(e,s,"insertBeforeSibling")):(this.removeFromModel(t),this.insertInModel(e,s,"appendSibling"))}else this.moveRowNM(t,e)}catch(t){r.Y.printStackTrace(t)}},c.prototype.moveRowNM=function(t,e){try{this.moveRowRender(t,e);var i=this.listRowObjArr.splice(t,1)[0];this.listRowObjArr.splice(e,0,i),this.onListRowObjArrChanged()}catch(t){r.Y.printStackTrace(t)}},c.prototype.moveRowRender=function(t,e){try{var i=this.getChildNodes(),o=i.length;if(t>o||e>o)return;if(t>=0&&e>=0){var s=i[t];if(i.length-1>e&&e>=0){var a=e>t?e+1:e;this.render.insertBefore(s,i[a])}else this.render.appendChild(s)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.getLength=function(){try{return this.options.virtualized?this.listRowObjArr?this.listRowObjArr.length:0:this.getChildNodes().length}catch(t){r.Y.printStackTrace(t)}},c.prototype.getChildNodes=function(){try{if("dl"==this.options.tagName||this.options.useCloseButton){for(var t=[],e=0;e<this.render.childNodes.length;e++){var i=this.render.childNodes[e];"3"!=i.nodeType&&t.push(i)}return t}return this.render.getElementsByTagName(this.listRowInfo.tagName)}catch(t){r.Y.printStackTrace(t)}},c.prototype.getRenderByUniqueId=function(t){try{for(var e=n.Z.getDataPrefix("unique_id"),i=0;i<this.getLength();i++){var o=this.render.childNodes[i];if(o.getAttribute(e)==t)return o}}catch(t){r.Y.printStackTrace(t)}},c.prototype.getCellData=function(t,e){try{var i,o=this.getLength();if("string"==typeof t||!(o>t&&t>=0))return;"string"==typeof e?i=e:"number"==typeof e&&(i=this.listColumnInfo[e].id);var s=this.listRowObjArr[t];return s?s[i]:""}catch(t){r.Y.printStackTrace(t)}},c.prototype.setCellData=function(t,e,i){try{var o,s,a,l=this.getLength();if("string"==typeof t||!(l>t&&t>=0))return;if("string"==typeof e){o=e;for(var h=0;h<this.listColumnInfo.length;h++)if(o==this.listColumnInfo[h].id){s=h;break}}else"number"==typeof e&&(s=e,o=this.listColumnInfo[e].id);if(a=this.getCellData(t,o),this.options.nodeset){var d,c;for(h=0;h<this.listColumnInfo.length;h++)if(o==(c=this.listColumnInfo[h]).id){d=c.ref;break}if(!d)return;WebSquare.ModelUtil.setInstanceValue(this.options.nodeset+"["+(t+1)+"]/"+d,i),a!==i&&this.fireOnchange()}else if(this.listRowObjArr[t][o]=i,
this.options.virtualized)this.setFirstRowIndex(this.firstListIndex);else{var u=this.getChildNodes()[t],p=this.listColumnInfo[s].inputType,g=u.childNodes[s];switch(p){case"checkbox":g.checked=n.Z.getBoolean(i);break;case"text":g.innerHTML=i;break;case"button":g.value=i}}}catch(t){r.Y.printStackTrace(t)}},c.prototype.getRowData=function(t){try{var e=this.getLength();if("string"==typeof t||!(e>t&&t>=0))return;var i={},o=this.listRowObjArr[t],s=n.Z.getDataPrefix("unique_id");for(var a in o)a!=s&&"render"!=a&&(i[a]=o[a]);return i}catch(t){r.Y.printStackTrace(t)}},c.prototype.setRowData=function(t,e,i){try{var s=this.getLength();if("string"==typeof t||!(s>=t&&t>=0)||"object"!=(0,o.A)(e))return;if(!i)return void(this.options.nodeset?this.insertRow(s,e):this.insertRowNM(s,e));e&&(this.options.nodeset?(this.removeRow(t),this.insertRow(t,e)):(this.removeRowNM(t),this.insertRowNM(t,e)))}catch(t){r.Y.printStackTrace(t)}},c.prototype.setXML=function(t,e){null!=t||l.v.printLog("[WebSquare.uiplugin.list.setXML] XML is null["+this.id+"]")},c.prototype.setJSON=function(t,e){try{if(null==t)return void l.v.printLog("[WebSquare.uiplugin.list.setJSON] data is null["+this.id+"]");if(e&&0==t.length)return;var i,o="";if(e||(this.listRowObjArr=[],this.options.virtualized&&(this.getElementById(this.id+"_items_main").innerHTML="")),this.options.virtualized)i=e?this.listRowObjArr.length:0,this.listRowObjArr=this.listRowObjArr.concat(t),this.adjustRender(),this.setFirstRowIndex(i);else{for(var s=0;s<t.length;s++)i=e?this.getLength+s:s,this.options.nodeset?this.insertRow(i,t[s]):e?this.insertRowNM(i,t[s]):o+=this.insertRenderStr(t[s]);e||(this.render.innerHTML=o)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.toggleCheckbox=function(t,e){try{var i=this.getLength();if("string"==typeof t||"number"==typeof e)return;if(i>t&&t>=0){var o=n.Z.getBoolean(this.getCellData(t,e));this.setCellData(t,e,!o)}}catch(t){r.Y.printStackTrace(t)}},c.prototype.createItemNode=function(t,e){try{if(t){var i,o=n.Z.getDataPrefix("check_id"),s=n.Z.getDataPrefix("itemid");switch(t.inputType){case"checkbox":(i=document.createElement("input")).setAttribute("type","checkbox"),i.setAttribute(s,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_checkbox "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_checkbox "+t.class),!0===(e=n.Z.getBoolean(e))&&i.setAttribute("checked","checked");break;case"text":(i=document.createElement("span")).setAttribute(s,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_text "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_text "+t.class),t.check_id&&i.setAttribute(o,t.check_id),null!=e&&null!=e&&(i.innerHTML=e.toString());break;case"button":(i=document.createElement("input")).setAttribute("type","button"),i.setAttribute(s,t.id),i.setAttribute("class","w2list_listColumn w2list_listColumn_button "+t.class),this.isIE67&&(i.className="w2list_listColumn w2list_listColumn_button "+t.class),e&&i.setAttribute("value",e)}return i&&t.style&&i.setAttribute("style",t.style),i}}catch(t){r.Y.printStackTrace(t)}},c.prototype.createItemNodeStr=function(t,e){try{if(t){var i,o=""==t.style?"":"style='"+t.style+"'";switch(t.inputType){case"checkbox":i="<input type='checkbox' class='w2list_listColumn w2list_listColumn_checkbox "+t["_class".slice(1)]+"' "+o,!0===(e=n.Z.getBoolean(e))&&(i+=" checked='checked'"),i+="/>";break;case"text":var s="w2list_listColumn_text";this.options.useCloseButton&&(s="w2list_listColumn_text_with_closeButton"),i="<span class='w2list_listColumn "+s+" "+t["_class".slice(1)]+"' "+o+">",null!=e&&null!=e&&(i+=WebSquare.xml.encode(e.toString())),i+="</span>",this.options.useCloseButton&&(i+="<div class='w2list_listColumn_close'></div>");break;case"button":i="<input type='button' class='w2list_listColumn w2list_listColumn_button "+t["_class".slice(1)]+"' "+o,(e=n.Z.getBoolean(e))&&(i+=" value='checked'"),i+="/>";break;case"link":
i="<a class='w2list_listColumn w2list_listColumn_link "+t["_class".slice(1)]+"' "+o+" href='javascript:void(null);'>",null!=e&&null!=e&&(i+=WebSquare.xml.encode(e.toString())),i+="</a>"}return i}}catch(t){r.Y.printStackTrace(t)}},c.prototype.getAllData=function(){try{if(this.options.virtualized)return this.listRowObjArr;for(var t=[],e=this.getLength(),i=0;i<e;i++){var o=this.getRowData(i);t.push(o)}return t}catch(t){r.Y.printStackTrace(t)}},c.prototype.createXMLByObj=function(t){try{var e=this.options.nodeset.split("/"),i=e[e.length-1],o=WebSquare.xml.parse("<"+i+" />").documentElement,s=n.Z.getDataPrefix("unique_id");t[s]?WebSquare.xml.setAttribute(o,s,t[s]):(WebSquare.xml.setAttribute(o,s,this.id+"_"+this.uniqueIdSequence),this.uniqueIdSequence++);for(var a=0;a<this.listColumnInfo.length;a++){var l=this.listColumnInfo[a].ref,h=l.lastIndexOf("/");if(h>0){var d=l.substring(0,h),c=l.substring(h+1);if(c.match(/[@'"()=]/i).length>0){var u=WebSquare.xml.createNode(o,d,!1);(p=t[this.listColumnInfo[a].id])||(p=this.listColumnInfo[a].value),c=c.replace(/[@'"()=]/i,""),WebSquare.xml.setAttribute(u,c,p)}else WebSquare.xml.createNode(o,l,!1)}else{var p,g=this.listColumnInfo[a].ref.replace(/[@'"()=]/i,"");(p=t[this.listColumnInfo[a].id])||(p=this.listColumnInfo[a].value),WebSquare.xml.setAttribute(o,g,p)}}return o}catch(t){r.Y.printStackTrace(t)}},c.prototype.createRenderByObj=function(t,e){try{if(t){var i=n.Z.getDataPrefix("unique_id"),o=n.Z.getDataPrefix("check_id");t[i]||(t[i]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++);var s,a,l,h=document.createElement(this.listRowInfo.tagName);h.setAttribute("class","w2list_listRow "+this.listRowInfo.class),h.setAttribute("style",this.listRowInfo.style),this.isIE67&&(h.className="w2list_listRow "+this.listRowInfo.class,h.style.cssText=this.listRowInfo.style),h.setAttribute(i,t[i]),this.listRowInfo.check_id&&h.setAttribute(o,this.listRowInfo.check_id);for(var d=[],c=0;c<this.listColumnInfo.length;c++){var u=this.listColumnInfo[c].id;null!=t[u]||null!=t[u]?s=t[u]:(s=this.listColumnInfo[c].value,t[this.listColumnInfo[c].id]=this.listColumnInfo[c].value),l=this.listColumnInfo[c],a=this.createItemNode(l,s),d[c]=a}if(0!=d.length)for(c=0;c<d.length;c++)d[c]&&h.appendChild(d[c]);this.options.virtualized&&(h.style.backgroundColor=e?this.options.selectedCellColor:"")}return h}catch(t){r.Y.printStackTrace(t)}},c.prototype.createObjByXML=function(t){try{for(var e,i,o,s={},a=0;a<this.listColumnInfo.length;a++)i=(e=this.listColumnInfo[a]).value,""!=(o=WebSquare.xml.getValue(t,e.ref))&&(i=o),s[e.id]=i;var l=n.Z.getDataPrefix("unique_id");return s[l]=t.getAttribute(l),s}catch(t){r.Y.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{var e=n.Z.getDataPrefix("unique_id"),i=n.Z.getDataPrefix("check_id"),o=n.Z.getDataPrefix("itemid");if(this.options.virtualized){for(var s,l,h,d="",c=this.getElementById(this.id+"_items_main"),u=this.event.getTargetIterator(t,this.render);u.next()&&!u.match(null,this.id)&&!u.match(null,c.id);){if(u.match("w2list_listRow")){""==d&&(d="w2list_listRow"),s=(g=u.getElement()).getAttribute(e),this.options.labelCheck&&(h=g.getAttribute(i));break}if(u.match("w2list_listColumn_checkbox"))d="w2list_listColumn_checkbox",l=(g=u.getElement()).getAttribute(o);else if(u.match("w2list_listColumn_text")){d="w2list_listColumn_text",l=(g=u.getElement()).getAttribute(o),this.options.labelCheck&&(h=g.getAttribute(i))}else if(u.match("w2list_listColumn_button")){d="w2list_listColumn_button",l=(g=u.getElement()).getAttribute(o)}}if(u=null,""!=d&&s)for(var p=0;p<this.listRowObjArr.length;p++)if(this.listRowObjArr[p][e]==s){switch(d){case"w2list_listRow":a.f.fireEvent(this,"onrowclick",p,{target:t.target||t.srcElement}),this.options.labelCheck&&this.toggleCheckbox(p,h);break;case"w2list_listColumn_text":this.options.labelCheck&&this.toggleCheckbox(p,h);break;case"w2list_listColumn_checkbox":this.toggleCheckbox(p,l)}this.selectedIndex=p;break}
this.setFirstRowIndex(this.firstListIndex,!0)}else{for(u=this.event.getTargetIterator(t,this.render);u.next()&&!u.match(null,this.id);){if(u.match("w2list_listRow")){var g=u.getElement();for(p=0;p<this.listRowObjArr.length;p++)if(this.getRenderByUniqueId(this.listRowObjArr[p][e])==g)return m=p,void a.f.fireEvent(this,"onrowclick",m,{target:t.target||t.srcElement})}if(u.match("w2list_listColumn_checkbox")){var m,f;for(g=u.getElement(),p=0;p<this.listRowObjArr.length;p++)for(var b=0;b<this.listColumnInfo.length;b++)if(this.getRenderByUniqueId(this.listRowObjArr[p][e])&&this.getRenderByUniqueId(this.listRowObjArr[p][e]).childNodes[b]==g)return m=p,f=this.listColumnInfo[b].id,void this.toggleCheckbox(m,f)}}u=null}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.f.fireEvent(this,"onchange")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.addClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next()&&!e.match(null,this.id);)e.match("w2list_listRow")&&this.removeClass(e.getElement(),"w2list_listRow_over");e=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMousewheelEvent=function(t){try{var e;a.f.stopEvent(t),this.options.wheelRows>0?(e=a.f.getMouseWheelDelta(t),e=-1*Math.round(this.options.wheelRows*e)):e=n.Z.isFF()?t.deltaY:n.Z.isIEAllVersion(11)?t.deltaY/40:t.wheelDelta/-40;var i=Math.floor(e),o=this.firstListIndex+i;this.setFirstRowIndex(o)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{if(this.options.useSearch&&this.event.isMe(t,this.dom.input)&&(this.editmode=!0,this.inputKeyDown(t,!1)),this.options.virtualized){var e=t.charCode?t.charCode:t.keyCode;if(38==e){var i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex--,this.selectedIndex<0&&(this.selectedIndex=0),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex)):i--,this.setFirstRowIndex(i)}else if(40==e){i=this.firstListIndex?this.firstListIndex:0;null!=this.selectedIndex?(this.selectedIndex++,this.selectedIndex>=this.listRowObjArr.length&&(this.selectedIndex=this.listRowObjArr.length-1),(this.selectedIndex<this.firstListIndex||this.selectedIndex>this.firstListIndex+(this.options.visibleRowNum-1))&&(i=this.selectedIndex-(this.options.visibleRowNum-1))):i++,this.setFirstRowIndex(i)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.inputKeyDown=function(t,e){},c.prototype.handleDragEvent=function(t){for(var e=this.event.getTargetIterator(t),i=n.Z.getDataPrefix("unique_id");e.next();)if(e.match("w2list_listRow")){if(!this.options.sortable)return;e.getElement().style.cursor="pointer",n.Z.emptySelection();for(var s,r=this.id,a=e.getElement(),l=this.getChildNodes(),h=0;h<l.length;h++)if(l[h]==a){s=h;break}var d=this;return void WebSquare.dragdrop.gDragManager.activate(t,a,{id:this.id+"_drag",className:"w2list w2list_listRow w2list_drag",contents:this.options.detachMessage||" detached item ",delay:15,detachIdx:s,detachListId:r,applyMousePosition:!0,onDrop:function(t,e,s,r,a,l,h){var c,u,p,g,m=!1,f=this.detachIdx,b=this.detachListId,y=d,v=null;for(this.isMobile?(v=new WebSquare.targetIterator(document.elementFromPoint(h.changedTouches[0].clientX,h.changedTouches[0].clientY)),h.preventDefault()):v=d.event.getTargetIterator(h);v.next();){if(v.match("w2list_listRow")){m=!0;for(var w=(g=v.getElement()).parentNode.childNodes,S=0;S<w.length;S++)if(w[S]==g){p=S;break}}if(v.match("w2list")){m=!0,u=v.getElement().id,c=n.Z.getComponentById(u);break}if(v.match(null,null,"body"))return}if(m){var _=!1;if("object"==(0,o.A)(g)&&"number"==typeof p||(_=!0,g=t,
p=c?0==c.getLength()?0:c.getLength():0),b==u)f!=(p=_?p-1:p)&&(y.options.nodeset?y.moveRow(f,p):y.moveRowNM(f,p));else{var C=y.listRowObjArr[f];if(y.options.nodeset?y.removeRow(f):y.removeRowNM(f),delete C[i],!c)return;c.options.nodeset?c.insertRow(p,C):c.insertRowNM(p,C)}}}})}},c.prototype.getMaxItemWidth=function(t){try{var e,i,o=0;e=this.options.virtualized?document.getElementById(this.id+"_items_main"):this.render;for(var s=0;s<e.childNodes.length;s++){for(var a=0,n=e.childNodes[s],l=0;l<n.childNodes.length;l++)a+=WebSquare.style.getSize(n.childNodes[l],"width");a>o&&(o=a),i=s}if(this.options.virtualized){for(l=i;l<this.listRowObjArr.length;l++){var h=this.listRowObjArr[l].id2,d=0;h&&(d=WebSquare.util.getWidth(h)),d>o&&(o=d)}var c=e.getElementsByTagName("input")[0];if(c&&"checkbox"===c.type){var u=WebSquare.style.getSize(c,"outerMarginWidth");u>0&&(o+=u)}return o}return o+10}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setFirstRowIndex=function(t,e){try{t=Math.max(0,Math.min(this.listRowObjArr.length-this.options.visibleRowNum,t)),this.firstListIndex=t;var i=this.getAllData();if(i.length>0){e||this.adjustScrollYThumb(t);for(var o=0;o<Math.min(this.options.visibleRowNum,this.listRowObjArr.length);o++){if(this.fastDrawRawData(o,t+o),this.isIE67)this.getElementById(this.id+"_items_main").getElementsByTagName("input")[o].checked=i[o].id1}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._setSelectedIndex=function(){try{for(var t=0;t<this.getLength();t++){var e=this.render.childNodes[t];t===this.selectedIndex?(this.addClass(e,"w2list_listRow_over"),e.setAttribute("aria-selected","true"),e.firstChild.focus()):(this.removeClass(e,"w2list_listRow_over"),e.setAttribute("aria-selected","false"))}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.adjustRender=function(){var t=this.options.rowHeight,e=this.options.useSearch?1:0;this.render.style.height=t*(Math.min(this.listRowObjArr.length,this.options.visibleRowNum)+e)+"px";var i=this.getElementById(this.id+"_main"),o=this.getElementById(this.id+"_scroll_main"),s=this.listRowObjArr.length>this.options.visibleRowNum;if(i&&o){var r=12;s?(r=12,i.style.paddingRight=this.isIE67?"0":"12px",o.style.width=r+"px",o.style.display="block"):(r=0,i.style.paddingRight="0",o.style.width=r+"px",o.style.display="none"),this.options.useSearch}this.onListRowObjArrChanged()},c.prototype.adjustScrollYThumb=function(t){if(this.options.virtualized){var e=this.getElementById(this.id+"_scroll_thumb"),i=this.getElementById(this.id+"_scroll_track"),o=this.listRowObjArr.length-this.options.visibleRowNum;if(t>o)e.style.top=i.offsetHeight-i.offsetHeight+"px";else{var s=(i.offsetHeight-e.offsetHeight)/o;isNaN(s)&&(s=0),e.style.top=t*s+"px"}}},c.prototype.fastDrawRawData=function(t,e){var i,o=this.getElementById(this.id+"_items_main");if(o.children.length>t){var s=n.Z.getDataPrefix("unique_id"),r=o.children[t];this.selectedIndex===e?r.style.backgroundColor=this.options.selectedCellColor:r.style.backgroundColor="";var a=this.listRowObjArr[e];a[s]||(a[s]=this.id+"_"+this.uniqueIdSequence,this.uniqueIdSequence++),o.children[t].setAttribute(s,a[s]);for(var l=0;l<this.listColumnInfo.length;l++){var h=this.listColumnInfo[l].id;null!=a[h]||null!=a[h]?(i=a[h],this.options.virtualized&&"id2"==h&&(i=a.formattedValue||i)):(i=this.listColumnInfo[l].value,a[this.listColumnInfo[l].id]=this.listColumnInfo[l].value);var d=this.listColumnInfo[l];this.updateItemNode(d,i,t,l)}}else{var c=this.createRenderByObj(this.listRowObjArr[e],this.selectedIndex===e);o.appendChild(c)}},c.prototype.updateItemNode=function(t,e,i,o){try{if(t){var s=this.getElementById(this.id+"_items_main").children[i].children[o];switch(t.inputType){case"checkbox":e=n.Z.getBoolean(e),s.checked=!0===e;break;case"text":null!=e&&null!=e&&(s.innerHTML=e.toString());break;case"button":e&&s.setAttribute("value",e)}}}catch(t){r.Y.printStackTrace(t)}},c.prototype.saveState=function(t){try{if(null==t)return;t=t.toString(),
this.state||(this.state={}),this.state[t]={selectedIndex:this.selectedIndex,firstListIndex:this.firstListIndex}}catch(t){r.Y.printStackTrace(t)}},c.prototype.loadState=function(t){try{if(null==t)return;t=t.toString(),this.state||(this.state={}),this.state[t]?(this.selectedIndex=this.state[t].selectedIndex,this.firstListIndex=this.state[t].firstListIndex):(this.selectedIndex=void 0,this.firstListIndex=0),this.setFirstRowIndex(this.firstListIndex)}catch(t){r.Y.printStackTrace(t)}},c.prototype.onListRowObjArrChanged=function(){try{if(this.options.virtualized){var t=this.getElementById(this.id+"_scroll_thumb"),e=this.getElementById(this.id+"_scroll_track");if(this.options.visibleRowNum>=this.listRowObjArr.length)t.style.height="100%";else{var i=e.offsetHeight*(this.options.visibleRowNum/this.listRowObjArr.length);i<28&&(i=28),i=i.toString()+"px",t.style.height=i}}}catch(t){r.Y.printStackTrace(t)}},c.prototype.setCellDataNM=function(t,e,i){try{var o,s,a=this.getLength();if("string"==typeof t||!(a>t&&t>=0))return;if("string"==typeof e){o=e;for(var l=0;l<this.listColumnInfo.length;l++)if(o==this.listColumnInfo[l].id){s=l;break}}else"number"==typeof e&&(s=e,o=this.listColumnInfo[e].id);if(this.options.virtualized){if(this.getElementById(this.id+"_items_main").children.length>t&&this.updateItemNode(this.listColumnInfo[s],i,t,s),"id2"==e&&this.listRowObjArr&&this.listRowObjArr[t])i!=this.listRowObjArr[t][e]&&(this.listRowObjArr[t].formattedValue=i)}else{var h=this.getChildNodes()[t],d=this.listColumnInfo[s].inputType,c=h.childNodes[s];switch(d){case"checkbox":c.checked=n.Z.getBoolean(i);break;case"text":c.innerHTML=i;break;case"button":c.value=i}}}catch(t){r.Y.printStackTrace(t)}}},6138:function(t,e,i){"use strict";i.r(e),i.d(e,{output:function(){return h}});var o=i(5461),s=i(5375),r=i(8971),a=i(1204),n=i(2406),l=i(541),h=function(t,e,i){n.q.call(this,t,e,i);var o,s=["div","label","h1","h2","h3","h4","h5","h6"];for(this.options.tagname=""!=this.options.for?"label":this.options.tagname,o=0;o<s.length&&s[o]!=this.options.tagname;o++);o>=s.length&&(this.options.tagname=s[0])};o.q.extend(h.prototype,n.q.prototype),o.q.extend(h.prototype,l.v.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.output",pluginName:"output",useConfig:!0,userEvents:[],systemEvents:["onfocus","onblur","onclick","ondblclick","onmouseup","onmousedown","onmouseout","onmouseover","onmousemove"],label:"",ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",localeRef:"",useLocale:!1,escape:!0,escapeFormatter:"",for:"",tagname:"div",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},h.prototype.initialize=function(t){try{if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}
if(this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.label=e.value,this.escapeLabel=e.value)}this.useEscapeFormatter=!1}catch(t){r.Y.printStackTrace(t,null,this)}},h.htmlStr=["<",null," id='",null,"'",null," class='w2output ",null,"'",null,">",null,"</",null,">"],h.prototype.toHTML=function(){try{s.I._scopeOption(this,"for");var t=WebSquare.uiplugin.output.htmlStr,e="";return this.options.escapeFormatter||(e=this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label)),t[1]=this.options.tagname,t[3]=this.id,t[5]=""==this.options.style?"":" style ='"+this.options.style+"'",t[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",t[7]=this.options.className,t[9]="label"==this.options.tagname?" for='"+this.options.for+"'":"",t[11]=e,t[13]=this.options.tagname,t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.setVerticalAlign(),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}if(this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;s.I._scopeOptionApply(this,"for")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onComplete=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=a.Z.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){r.Y.printStackTrace(t,null,this)}this.setValueNM(this.options.label)}n.q.prototype.onComplete.call(this)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setVerticalAlign=function(){try{var t="top",e=this.options.style.toLowerCase();if(e.match(/vertical-align[\s]*:[\s]*middle/)?t="middle":e.match(/vertical-align[\s]*:[\s]*bottom/)&&(t="bottom"),"top"==t);else{var i=this.getStyle("height");if(i.indexOf("px")>-1){i=parseInt(i);var o=parseInt(this.getStyle("padding-top"))||0,s=parseInt(this.getStyle("font-size"))||0,a=0;"middle"==t?a=Math.floor((i-s)/2):"bottom"==t&&(a=Math.floor(i-s)),a+o>0&&i-a>0&&(this.setStyle("paddingTop",a+o+"px"),this.setStyle("height",i-a+"px"))}}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setValue=function(t){try{this.setValueNM(t),this.modelControl.setData(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setValue1=function(t){try{this.setValue(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setValueNM=function(t){try{if(a.Z.isNull(t))return;t=t.toString(),this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.escapeLabel=t,this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setWidth=function(t){try{isNaN(parseInt(t))||(this.render.style.width=t+"px")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setHeight=function(t){try{t=parseInt(t,10),isNaN(t)||(this.render.style.height=t+"px")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setBackgroundImage=function(t){try{this.render.style.backgroundImage=void 0===t||null==t||""==t?"":this.getImageURL(t,!0)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getFormatValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setLabel=function(t){try{this.setValue(t)
}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{return this.formatter.format(this.escapeLabel)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)1==e?(this.addClass(this.render,"w2output_disabled"),this.setStyle("color","#c0c0c0")):(this.removeClass(this.render,"w2output_disabled"),this.setStyle("color",""))}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getRawValue=function(){try{return this.options.label}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValueNM(this.options.label)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.Y.printStackTrace(t)}},h.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}}},1218:function(t,e,i){"use strict";i.r(e),i.d(e,{pageFrame:function(){return u}});var o=i(467),s=i(4756),r=i.n(s),a=i(5461),n=i(5375),l=i(8971),h=(i(2338),i(1204),i(8926)),d=(i(2256),i(2406)),c=i(8736),u=function(t,e,i){d.q.call(this,t,e,i)};a.q.extend(u.prototype,c.wframe.prototype),u.prototype.defaultOptions=h.r.cloneNode(c.wframe.prototype.defaultOptions,!0,[],[],0,!0),u.prototype.defaultOptions.pluginType="uiplugin.pageFrame",u.prototype.defaultOptions.pluginName="pageFrame",u.prototype.defaultOptions.userEvents=["onpageframeload","onbeforepageframeunload","onpageframeunload"],u.prototype.initialize=function(t){try{this._initializeOptions(),c.wframe.prototype.initialize.call(this,t),this._udcFuncList=[]}catch(t){l.Y.printStackTrace(t,null,this)}},u.prototype._initializeOptions=function(){try{this.options.tagname="div",this.options.mode="async",this.options.scope=!0,this.options.preload=!0}catch(t){l.Y.printStackTrace(t,null,this)}},u.prototype.makeFrame=function(){var t=(0,o.A)(r().mark((function t(e,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.wframe.prototype.makeFrame.call(this,e,i);case 3:this.frameDoc&&this._pageFrameMapping(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),l.Y.printStackTrace(t.t0,null,this);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e,i){return t.apply(this,arguments)}}(),u.prototype._pageFrameMapping=(0,o.A)(r().mark((function t(){var e,i,o,s,a,h,d,c,u,p,g;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=this.options.cloneVariable.split(","),i={},o=0;o<e.length;o++)i[e[o]]=!0;if(s=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",n.I._XML_NAMESPACE.W2)[0])for(d in h=WebSquare.Parser.parseAttribute(s),a={method:{},submission:{},component:{}},h)for(c=h[d].split(","),o=0;o<c.length;o++)a[d][c[o].wq_trim()]=!0;t.t0=r().keys(this.scopeVariable);case 7:if((t.t1=t.t0()).done){t.next=22;break}if(d=t.t1.value,!0!==i[d]){t.next=11;break}return t.abrupt("continue",7);case 11:u=this.scopeVariable[d],t.t2=r().keys(u);case 13:if((t.t3=t.t2()).done){t.next=20;break}if((p=t.t3.value)!==this.options.scopeFunction&&void 0===this[p]){t.next=17;break}return t.abrupt("continue",13);case 17:a&&!0!==a.method[d+"."+p]||(this[p]=u[p],this._udcFuncList.push(p)),t.next=13;break;case 20:t.next=7;break
;case 22:t.t4=r().keys(this.scope);case 23:if((t.t5=t.t4()).done){t.next=31;break}if(d=t.t5.value,null!=(g=this.scope[d])){t.next=28;break}return t.abrupt("continue",23);case 28:a?(!0===a.component[d]&&g.uuid&&WebSquare.idCache[g.uuid]===g&&g.id!==g.uuid&&g.org_id!==g.uuid||!0===a.submission[d]&&"submission"===g._pluginName)&&(this[d]=g):this[d]=g,t.next=23;break;case 31:t.next=36;break;case 33:t.prev=33,t.t6=t.catch(0),l.Y.printStackTrace(t.t6,null,this);case 36:case"end":return t.stop()}}),t,this,[[0,33]])}))),u.prototype.setSrc=function(){var t=(0,o.A)(r().mark((function t(e,i){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.wframe.prototype.setSrc.call(this,e,i);case 3:this._pageFrameMapping(),t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(0),l.Y.printStackTrace(t.t0,null,this),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(e,i){return t.apply(this,arguments)}}(),u.prototype.finalize=function(t,e){try{c.wframe.prototype.finalize.call(this,t,e);for(var i=0;i<this._udcFuncList.length;i++){var o=this._udcFuncList[i];try{delete this[o]}catch(t){this[o]=void 0}}this._udcFuncList=[]}catch(t){return l.Y.printStackTrace(t,null,this),!1}}},3938:function(t,e,i){"use strict";i.r(e),i.d(e,{pageList:function(){return h}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2406),l=i(3406),h=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(h.prototype,n.q.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.pageList",pluginName:"pageList",userEvents:["onclick","onchange","onviewchange","oninputblur"],useConfig:!0,defaultClass:"w2pageList_label",selectedStyle:"",selectedClass:"w2pageList_label_selected",displayFormat:"#",useDelim:!1,delimiter:"",pageSize:10,pagingType:"1",buttonShowType:"1",naviType:"config",nativeTooltip:!0,leftPageBackImage:"",leftPageImage:"",rightPageImage:"",rightPageBackImage:"",deliImage:"",leftPageBackImageClass:"w2pageList_col_prevPage",leftPageImageClass:"",rightPageImageClass:"",rightPageBackImageClass:"w2pageList_col_nextPage",deliImageClass:"w2pageList_delimiter",leftPageBackImageStyle:"",leftPageImageStyle:"",rightPageImageStyle:"",rightPageBackImageStyle:"",deliImageStyle:"",indexWidth:-1,deliWidth:-1,shiftMoveButtonWidth:-1,oneMoveButtonWidth:-1,renderType:"table",href:"",displayButtonType:"display",displaySearchbox:!1,displaySelectedIndex:!1,iconType:"png",accessibility:!1,adaptive:"layout",adaptiveThreshold:1024},h.prototype.initialize=function(t){try{this.pageCount=0,1==this.options.displaySearchbox?(this.displayIndex=0,this.selectedIndex=0):(this.displayIndex=1,this.selectedIndex=-1),this.default_leftPageBackImage="pagination"===this.options.renderType?"":o.q._resourceURI+"uiplugin/pageList/images/b_first."+this.options.iconType,this.default_leftPageImage="pagination"===this.options.renderType?"":o.q._resourceURI+"uiplugin/pageList/images/b_prev."+this.options.iconType,this.default_rightPageImage="pagination"===this.options.renderType?"":o.q._resourceURI+"uiplugin/pageList/images/b_next."+this.options.iconType,this.default_rightPageBackImage="pagination"===this.options.renderType?"":o.q._resourceURI+"uiplugin/pageList/images/b_end."+this.options.iconType,this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.leftPageBackImage=this.options.leftPageBackImage?this.options.leftPageBackImage:this.default_leftPageBackImage,this.options.leftPageImage=this.options.leftPageImage?this.options.leftPageImage:this.default_leftPageImage,this.options.rightPageImage=this.options.rightPageImage?this.options.rightPageImage:this.default_rightPageImage,this.options.rightPageBackImage=this.options.rightPageBackImage?this.options.rightPageBackImage:this.default_rightPageBackImage,this.labelStyle="",-1!=this.options.indexWidth&&(this.labelStyle+="width:"+this.options.indexWidth+"px;"),
-1!=this.options.deliWidth&&(this.options.deliImageStyle+=this.getSeperator(this.options.deliImageStyle)+"width:"+this.options.deliWidth+"px;"),-1!=this.options.shiftMoveButtonWidth&&(this.options.leftPageBackImageStyle+=this.getSeperator(this.options.leftPageBackImageStyle)+"width:"+this.options.shiftMoveButtonWidth+"px;",this.options.rightPageBackImageStyle+=this.getSeperator(this.options.rightPageBackImageStyle)+"width:"+this.options.shiftMoveButtonWidth+"px;"),-1!=this.options.oneMoveButtonWidth&&(this.options.leftPageImageStyle+=this.getSeperator(this.options.rightPageBackImageStyle)+"width:"+this.options.oneMoveButtonWidth+"px;",this.options.rightPageImageStyle+=this.getSeperator(this.options.rightPageBackImageStyle)+"width:"+this.options.oneMoveButtonWidth+"px;"),""!=this.options.deliImage&&(this.options.deliImageStyle+=this.getSeperator(this.options.deliImageStyle)+"background-image:url("+this.options.deliImage+");"),"list"==this.options.renderType?(this.options.leftPageBackImageStyle+=this.getSeperator(this.options.leftPageBackImageStyle)+"background-image:none;",this.options.leftPageImageStyle+=this.getSeperator(this.options.leftPageImageStyle)+"background-image:none;",this.options.rightPageImageStyle+=this.getSeperator(this.options.rightPageImageStyle)+"background-image:none;",this.options.rightPageBackImageStyle+=this.getSeperator(this.options.rightPageBackImageStyle)+"background-image:none;"):(this.options.leftPageBackImage!=this.default_leftPageBackImage&&(this.options.leftPageBackImageStyle+=this.getSeperator(this.options.leftPageBackImageStyle)+"background-image:url("+this.options.leftPageBackImage+");"),this.options.leftPageImage!=this.default_leftPageImage&&(this.options.leftPageImageStyle+=this.getSeperator(this.options.leftPageImageStyle)+"background-image:url("+this.options.leftPageImage+");"),this.options.rightPageImage!=this.default_rightPageImage&&(this.options.rightPageImageStyle+=this.getSeperator(this.options.rightPageImageStyle)+"background-image:url("+this.options.rightPageImage+");"),this.options.rightPageBackImage!=this.default_rightPageBackImage&&(this.options.rightPageBackImageStyle+=this.getSeperator(this.options.rightPageBackImageStyle)+"background-image:url("+this.options.rightPageBackImage+");")),"3"==this.options.buttonShowType&&(this.options.pagingType="2"),"pagination"===this.options.renderType?(this.options.buttonShowType="2",this._pageRangeDisplayed=2,this.options.selectedClass="active",this.options.pagingType="1",this.options.leftPageImageClass=""===this.options.leftPageImageClass?"prev":this.options.leftPageImageClass,this.options.rightPageImageClass=""===this.options.rightPageImageClass?"next":this.options.rightPageImageClass):(this.options.leftPageImageClass=""===this.options.leftPageImageClass?"w2pageList_col_prev":this.options.leftPageImageClass,this.options.rightPageImageClass=""===this.options.rightPageImageClass?"w2pageList_col_next":this.options.rightPageImageClass)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{
var t=[],e=a.Z.getDataPrefix("index"),i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'",r=""==this.options.href?"":"href='"+this.options.href+"'",n=""==this.options.leftPageImageStyle?"":"style='"+this.options.leftPageImageStyle+"'",h=""==this.options.leftPageBackImageStyle?"":"style='"+this.options.leftPageBackImageStyle+"'",d=""==this.options.leftPageImage?"":"src='"+this.options.leftPageImage+"'",c=""==this.options.leftPageBackImage?"":"src='"+this.options.leftPageBackImage+"'",u=""==this.options.rightPageImageStyle?"":"style='"+this.options.rightPageImageStyle+"'",p=""==this.options.rightPageBackImageStyle?"":"style='"+this.options.rightPageBackImageStyle+"'",g=""==this.options.rightPageImage?"":"src='"+this.options.rightPageImage+"'",m=""==this.options.rightPageBackImage?"":"src='"+this.options.rightPageBackImage+"'",f=""==this.labelStyle?"":"style='"+this.labelStyle+"'",b=""==this.options.deliImageStyle?"":"style='"+this.options.deliImageStyle+"'";this.prevPageButtonId=this.id+"_prevPage_btn",this.nextPageButtonId=this.id+"_nextPage_btn",this.prevButtonId=this.id+"_prev_btn",this.nextButtonId=this.id+"_next_btn";var y,v=a.Z.getBoolean(this.options.displaySearchbox);if("pagination"==this.options.renderType?t.push("<div id='"+this.id+"' "+i+" class='w2pagination w2pageList_pagePrev_last w2pageList_prev_last "+this.options.className+"'>"):t.push("<div id='"+this.id+"' "+i+" class='w2pageList w2pageList_pagePrev_last w2pageList_prev_last "+this.options.className+"'>"),1==this.options.accessibility){t.push("<ul class='w2pageList_ul'>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev' "+h+"><button type='button' class='"+this.options.leftPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_previousList_page",this.options.pageSize)+"'></button></li>"):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev' "+h+"><button type='button' class='"+this.options.leftPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_first_page")+"'></button></li>"):t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev' "+h+"><button type='button' class='"+this.options.leftPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_previous_page")+"'></button></li>"),"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev' "+n+"><button type='button' class='"+this.options.leftPageImageClass+"' title='"+l.B.getMessage("Pagelist_previous_page")+"'></button></li>"):"3"==this.options.buttonShowType&&t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev' "+n+"><button type='button' class='"+this.options.leftPageImageClass+"' title='"+l.B.getMessage("Pagelist_previousList_page",this.options.pageSize)+"'></button></li>");var w=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1)
;if(v)t.push("<li class='w2pageList_li_label' "+f+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></li>");else for(var S=this.displayIndex;S<=w;S++)this.options.href?t.push("<li class='w2pageList_li_label' "+f+"><a id='"+this.id+"_page_"+S+"' "+r+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+S+"' role='button'>"+this.getLabel(S)+"</a></li>"):t.push("<li class='w2pageList_li_label' "+f+"><a id='"+this.id+"_page_"+S+"' href=#"+this.id+"_page_"+S+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+S+"' role='button'>"+this.getLabel(S)+"</a></li>"),1==this.options.useDelim&&S<w&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>");"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next' "+u+"><button type='button' class='"+this.options.rightPageImageClass+"' title='"+l.B.getMessage("Pagelist_next_page")+"'></button></li>"):"3"==this.options.buttonShowType&&t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next' "+u+"><button type='button' class='"+this.options.rightPageImageClass+"' title='"+l.B.getMessage("Pagelist_nextList_page",this.options.pageSize)+"'></button></li>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext' "+p+"><button type='button' class='"+this.options.rightPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_nextList_page",this.options.pageSize)+"'></button></li>"):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext' "+p+"'><button type='button' class='"+this.options.rightPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_last_page")+"'></button></li>"):t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext' "+p+"'><button type='button' class='"+this.options.rightPageBackImageClass+"' title='"+l.B.getMessage("Pagelist_next_page")+"'></button></li>"),t.push("</ul>")}else if("list"==this.options.renderType){t.push("<ul class='w2pageList_ul'>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previousList_page",this.options.pageSize):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+"><a href=#"+this.prevPageButtonId+" title='"+y+"'><img "+c+" alt='"+l.B.getMessage("Pagelist_previousList_page",this.options.pageSize)+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_first_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+"><a href=#"+this.prevPageButtonId+" title='"+y+"'><img "+c+" alt='"+l.B.getMessage("Pagelist_first_page")+"'/></a></li>")):(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previous_page"):"",t.push("<li id='"+this.prevPageButtonId+"' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+"><a href=#"+this.prevPageButtonId+" title='"+y+"'><img "+c+" alt='"+l.B.getMessage("Pagelist_previous_page")+"'/></a></li>")),"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previous_page"):"",
t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+"><a href=#"+this.prevButtonId+" title='"+y+"'><img "+d+" alt='"+l.B.getMessage("Pagelist_previous_page")+"'/></a></li>")):"3"==this.options.buttonShowType&&(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previousList_page",this.options.pageSize):"",t.push("<li id='"+this.prevButtonId+"' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+"><a href=#"+this.prevButtonId+" title='"+y+"'><img "+d+" alt='"+l.B.getMessage("Pagelist_previousList_page",this.options.pageSize)+"'/></a></li>"));w=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(v)t.push("<li class='w2pageList_li_label' "+f+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></li>");else for(S=this.displayIndex;S<=w;S++)y=this.options.nativeTooltip?this.getLabel(S):"",this.options.href?t.push("<li class='w2pageList_li_label' "+f+"><a id='"+this.id+"_page_"+S+"' "+r+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+S+"' role='button' title='"+y+"'>"+this.getLabel(S)+"</a></li>"):t.push("<li class='w2pageList_li_label' "+f+"><a id='"+this.id+"_page_"+S+"' href=#"+this.id+"_page_"+S+" class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+S+"' role='button' title='"+y+"'>"+this.getLabel(S)+"</a></li>"),1==this.options.useDelim&&S<w&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>");"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+u+"><a href=#"+this.nextButtonId+" title='"+y+"'><img "+g+" alt='"+l.B.getMessage("Pagelist_next_page")+"'/></a></li>")):"3"==this.options.buttonShowType&&(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_nextList_page",this.options.pageSize):"",t.push("<li id='"+this.nextButtonId+"' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+u+"><a href=#"+this.nextButtonId+" title='"+y+"'><img "+g+" alt='"+l.B.getMessage("Pagelist_nextList_page",this.options.pageSize)+"'/></a></li>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_nextList_page",this.options.pageSize):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+"><a href=#"+this.nextPageButtonId+" title='"+y+"'><img "+m+" alt='"+l.B.getMessage("Pagelist_nextList_page",this.options.pageSize)+"'/></a></li>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_last_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+"'><a href=#"+this.nextPageButtonId+" title='"+y+"'><img "+m+" alt='"+l.B.getMessage("Pagelist_last_page")+"'/></a></li>")):(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_next_page"):"",t.push("<li id='"+this.nextPageButtonId+"' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+"'><a href=#"+this.nextPageButtonId+" title='"+y+"'><img "+m+" alt='"+l.B.getMessage("Pagelist_next_page")+"'/></a></li>")),t.push("</ul>")}else if("pagination"==this.options.renderType){
"2"==this.options.buttonShowType&&t.push("<button type='button' tabindex='0' id='"+this.prevPageButtonId+"' class='w2page_navi w2pageList_control_pagePrev "+this.options.leftPageImageClass+"' "+n+" data-label='"+l.B.getMessage("Pagelist_previous")+"'>"+l.B.getMessage("Pagelist_previous")+"</button>"),t.push("<div class='w2page_links'>");var _=this.pageCount;if(v)t.push("<li class='w2pageList_li_label' "+f+"><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+_+"</span></li>");else if(_>0){var C=this.paginationInfo?this.paginationInfo.currentIndex:1,x=this.paginationInfo?this.paginationInfo.rangeStart:C-this._pageRangeDisplayed,I=this.paginationInfo?this.paginationInfo.rangeEnd:C+this._pageRangeDisplayed,T=1===this._pageRangeDisplayed?2:3;if(x<=T)for(S=1;S<x;S++)y=this.options.nativeTooltip?this.getLabel(S):"",t.push("<a id='"+this.id+"_page_"+S+"' href=#"+this.id+"_page_"+S+" class='w2pageList_control_label w2page_link "+this.options.defaultClass+"' "+e+"='"+S+"' title='"+y+"'>"+this.getLabel(S)+"</a>"),1==this.options.useDelim&&S<x&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>");else t.push("<a id='"+this.id+"_page_1' href=#"+this.id+"_page_1 class='w2pageList_control_label w2page_link "+this.options.defaultClass+"' "+e+"='1' title='"+y+"'>"+this.getLabel(1)+"</a>"),t.push("<span class='w2page_link link_dot '>"+l.B.getMessage("Pagelist_previous_ellipsisText")+"</span>");for(S=x;S<=I;S++)y=this.options.nativeTooltip?this.getLabel(S):"",t.push("<a id='"+this.id+"_page_"+S+"' href=#"+this.id+"_page_"+S+" class='w2pageList_control_label w2page_link "+this.options.defaultClass+"' "+e+"='"+S+"' title='"+y+"'>"+this.getLabel(S)+"</a>"),1==this.options.useDelim&&S<I&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>");if(I>=_-(T-1))for(I>=_-(T-1)&&1==this.options.useDelim&&S<_&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>"),S=I+1;S<=_;S++)y=this.options.nativeTooltip?this.getLabel(S):"",t.push("<a id='"+this.id+"_page_"+S+"' href=#"+this.id+"_page_"+S+" class='w2pageList_control_label w2page_link "+this.options.defaultClass+"' "+e+"='"+S+"' title='"+y+"'>"+this.getLabel(S)+"</a>"),1==this.options.useDelim&&S<_&&t.push("<li class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</li>");else t.push("<span class='w2page_link link_dot '>"+l.B.getMessage("Pagelist_next_ellipsisText")+"</span>"),y=this.options.nativeTooltip?this.getLabel(_):"",t.push("<a id='"+this.id+"_page_"+_+"' href=#"+this.id+"_page_"+_+" class='w2pageList_control_label w2page_link "+this.options.defaultClass+"' "+e+"='"+_+"' title='"+y+"'>"+this.getLabel(_)+"</a>")}t.push("</div>"),"2"==this.options.buttonShowType&&t.push("<button type='button' tabindex='0' id='"+this.nextPageButtonId+"' class='w2page_navi w2pageList_control_pageNext "+this.options.rightPageImageClass+"' "+u+" data-label='"+l.B.getMessage("Pagelist_next")+"'>"+l.B.getMessage("Pagelist_next")+"</button>")}else{t.push("<table class='w2pageList_table'><tr>"),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previousList_page",this.options.pageSize):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+" role='button' "+o+" title='"+y+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_first_page"):"",
t.push("<td  id='"+this.prevPageButtonId+"' role='button' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+" role='button' "+o+" title='"+y+"'></td>")):(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previous_page"):"",t.push("<td  id='"+this.prevPageButtonId+"' role='button' class='w2pageList_control_pagePrev "+this.options.leftPageBackImageClass+"' "+h+" role='button' "+o+" title='"+y+"'></td>")),"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previous_page"):"",t.push("<td id='"+this.prevButtonId+"' role='button' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+" role='button' "+o+" title='"+y+"'></td>")):"3"==this.options.buttonShowType&&(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_previousList_page",this.options.pageSize):"",t.push("<td id='"+this.prevButtonId+"' role='button' class='w2pageList_control_prev "+this.options.leftPageImageClass+"' "+n+" role='button' "+o+" title='"+y+"'></td>"));w=Math.min(this.pageCount,this.displayIndex+this.options.pageSize-1);if(v)t.push("<td class='w2pageList_col_label_input' "+f+"><div><input id='"+this.id+"_input' style='ime-mode:disabled' value ='"+this.displayIndex+"'class='w2pageList_input' onkeydown='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'onblur='window."+WebSquare.noConflict+".comp."+this.id+".onBlurEvent(event)'onkeypress='window."+WebSquare.noConflict+".comp."+this.id+".onInputKeyEventHandler(event)'/><span> /"+this.pageCount+"</span></div></td>");else for(S=this.displayIndex;S<=w;S++)y=this.options.nativeTooltip?this.getLabel(S):"",t.push("<td class='w2pageList_col_label' "+f+"><div id='"+this.id+"_page_"+S+"' class='w2pageList_control_label "+this.options.defaultClass+"' "+e+"='"+S+"' role='button' "+o+" title='"+y+"'>"+this.getLabel(S)+"</div></td>"),1==this.options.useDelim&&S<w&&t.push("<td class='w2pageList_col_delimiter "+this.options.deliImageClass+"' "+b+">"+this.options.delimiter+"</td>");"1"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_next_page"):"",t.push("<td id='"+this.nextButtonId+"' role='button' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+u+" "+o+" title='"+y+"'></td>")):"3"==this.options.buttonShowType&&(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_nextList_page",this.options.pageSize):"",t.push("<td id='"+this.nextButtonId+"' role='button' class='w2pageList_control_next "+this.options.rightPageImageClass+"' "+u+" "+o+" title='"+y+"'></td>")),"0"==this.options.buttonShowType||"1"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_nextList_page",this.options.pageSize):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+" "+o+" title='"+y+"'></td>")):"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_last_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+" "+o+" title='"+y+"'></td>")):(y=this.options.nativeTooltip?l.B.getMessage("Pagelist_next_page"):"",t.push("<td id='"+this.nextPageButtonId+"' role='button' class='w2pageList_control_pageNext "+this.options.rightPageBackImageClass+"' "+p+" "+o+" title='"+y+"'></td>")),t.push("</tr></table>")}return t.push("</div>"),t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),
this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),"layout"!==this.options.adaptive&&!0!==a.Z.getBoolean(this.options.adaptive)||n.q.addCheckResize(this.uuid,"checkResize")}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleKeydownEvent=function(t){try{if(13!=(t.charCode?t.charCode:t.keyCode))return;var e=t.srcElement||t.target;"a"==e.nodeName.toLowerCase()?null==e.getAttribute("href")&&this.handleClickEvent(t):this.handleClickEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getLabel=function(t){try{return WebSquare.text.formatCurrency(t,this.options.displayFormat)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getCount=function(){try{return this.pageCount}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setCount=function(t,e){try{var i=e||!1;if(e&&t<this.selectedIndex&&($l("range exception for "+this.id),i=!1),this.options.displaySearchbox)var o=parseInt(t,10)||0;else o="string"==typeof t?parseInt(t,10)||0:t;this.pageCount=o,(0==i||this.selectedIndex<1)&&(this.displayIndex=1),this.setPaginationInfo(this.displayIndex),this.redraw(),0==i||this.selectedIndex<1?this.setSelectedIndex(1):this.setSelectedIndex(this.selectedIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setPaginationInfo=function(t){try{var e=this.pageCount;if("pagination"!==this.options.renderType||e<=0)return;t=parseInt(t,10);var i=this._pageRangeDisplayed,o=t-i,r=t+i;r>e&&(r=e,o=(o=e-2*i)<1?1:o),o<=1&&(o=1,r=Math.min(2*i+1,e)),this.paginationInfo={rangeStart:o,rangeEnd:r,currentIndex:t}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setSelectedIndex=function(t){try{if(0==this.pageCount){if("auto"==this.options.displayButtonType||"autoOver"==this.options.displayButtonType){var e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden")}return}if(a.Z.isNull(t))return;if((t=parseInt(t,10))<1||t>this.pageCount||isNaN(t))return void $l("range exception for "+this.id);var l=this.selectedIndex;"pagination"===this.options.renderType&&this.setPaginationInfo(t),this.setDisplayIndex(t);var h=document.getElementById(this.id+"_page_"+this.selectedIndex);h&&(this.changeClass(h,this.options.selectedClass,this.options.defaultClass),h.removeAttribute("title")),this.selectedIndex=t,this.changeButtonCursor(t);var d=document.getElementById(this.id+"_page_"+t);d&&(this.changeClass(d,this.options.defaultClass,this.options.selectedClass),d.setAttribute("title",WebSquare.language.getMessage("Pagelist_selected",d.textContent||d.innerText))),l>0&&l!=this.selectedIndex&&r.f.fireEvent(this,"onchange",this.selectedIndex,l);var c=this.options.displayButtonType,u=this.options.pagingType;if("display"!=c){e=document.getElementById(this.prevPageButtonId),i=document.getElementById(this.prevButtonId),o=document.getElementById(this.nextButtonId),n=document.getElementById(this.nextPageButtonId);var p=!1,g=!1,m=!1;if("auto"==c||"autoOver"==c||"autoHidden"==c){if("autoHidden"==c)if("4"==this.options.buttonShowType)1==this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);else{var f=this.paginationInfo;if(f&&"pagination"===this.options.renderType){var b=1===this._pageRangeDisplayed?2:3,y=this.pageCount;f.rangeEnd>=y-(b-1)?p=!0:1===this.displayIndex&&(g=!0)}else if(this.options.pageSize>=this.pageCount)m=!0;else if("1"==u){var v=this.pageCount-this.options.pageSize+1;this.selectedIndex<=this.options.pageSize&&this.selectedIndex<v?g=!0:this.selectedIndex>=v&&(p=!0)}else if("2"==u){var w;w=0==parseInt(this.pageCount%this.options.pageSize)?this.pageCount-this.options.pageSize+1:this.pageCount-parseInt(this.pageCount%this.options.pageSize)+1,this.selectedIndex<=this.options.pageSize?g=!0:this.selectedIndex>=w&&(p=!0)}
}else 1===this.selectedIndex?g=!0:this.selectedIndex==this.pageCount&&(p=!0);g?(e&&(e.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display=""),n&&(n.style.display="")):p?(e&&(e.style.display=""),i&&(i.style.display=""),o&&(o.style.display="none"),n&&(n.style.display="none")):m?(e&&(e.style.display="none"),i&&(i.style.display="none"),o&&(o.style.display="none"),n&&(n.style.display="none")):(e&&(e.style.display=""),i&&(i.style.display=""),o&&(o.style.display=""),n&&(n.style.display=""))}("displayOver"==c||"autoOver"==c)&&this.options.pageSize>=this.pageCount&&"pagination"!==this.options.renderType&&(e&&(e.style.visibility="hidden"),i&&(i.style.visibility="hidden"),o&&(o.style.visibility="hidden"),n&&(n.style.visibility="hidden"))}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setFocus=function(t){try{if(0==this.pageCount)return;if(a.Z.isNull(t))return;if((t=t.toString())<1||t>this.pageCount)return void $l("range exception for "+this.id);var e=document.getElementById(this.id+"_page_"+t);e&&e.focus()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setIdxClass=function(t){try{this.setSelectedIndex(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setValue=function(t){try{if(a.Z.isNull(t))return;t=t.toString(),this.options.displaySearchbox&&isNaN(t)&&(t=this.selectedIndex),this.setSelectedIndex(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.moveLeft=function(){try{this.setSelectedIndex(this.selectedIndex-1),this.setFocus(this.selectedIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.moveRight=function(){try{this.setSelectedIndex(this.selectedIndex+1),this.setFocus(this.selectedIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.pageLeft=function(){try{if("pagination"===this.options.renderType)return;if(this.options.displaySearchbox)var t=1;else t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t),this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.pageLeftLast=function(){try{if("pagination"===this.options.renderType)return;if(1==this.displayIndex)this.setSelectedIndex(1);else{var t=this.selectedIndex-this.options.pageSize;this.setDisplayIndex(t);var e=this.displayIndex+this.options.pageSize-1;this.setSelectedIndex(e),this.setFocus(this.selectedIndex)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.pageRight=function(){try{if("pagination"===this.options.renderType)return;if(this.options.displaySearchbox)var t=this.selectedIndex+this.pageCount;else t=this.selectedIndex+this.options.pageSize;this.setDisplayIndex(t),1==this.options.pagingType&&t>this.pageCount?this.setSelectedIndex(this.pageCount):this.setSelectedIndex(this.displayIndex),this.setFocus(this.selectedIndex)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setDisplayIndex=function(t){try{if(0==this.pageCount)return;var e;if(this.options.displaySearchbox)document.getElementById(this.id+"_input").value=t,e=t;else t=parseInt(t,10),"pagination"===this.options.renderType?e=t<=3+this._pageRangeDisplayed?1:t-this._pageRangeDisplayed:(e=parseInt((t-1)/this.options.pageSize)*this.options.pageSize+1,"1"==this.options.pagingType&&"3"!=this.options.buttonShowType&&t+this.options.pageSize>this.pageCount&&(e=this.pageCount-this.options.pageSize+1));"2"==this.options.buttonShowType&&"1"==this.options.naviType&&"pagination"!==this.options.renderType&&(e=t),e<1&&(e=1),e>this.pageCount&&(e=this.pageCount);var i=this.displayIndex==e;if(isNaN(e))return;if("pagination"!==this.options.renderType&&i)return;this.displayIndex=e,this.redraw()}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.changeButtonCursor=function(t){try{"3"==this.options.buttonShowType||"2"==this.options.buttonShowType?(1==this.displayIndex?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),
this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"),1==t?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),t==this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last")):(1==this.displayIndex?this.addClass("w2pageList_pagePrev_last"):this.removeClass("w2pageList_pagePrev_last"),this.displayIndex+this.options.pageSize>this.pageCount?this.addClass("w2pageList_pageNext_last"):this.removeClass("w2pageList_pageNext_last"),1==t?this.addClass("w2pageList_prev_last"):this.removeClass("w2pageList_prev_last"),t==this.pageCount?this.addClass("w2pageList_next_last"):this.removeClass("w2pageList_next_last"))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.setPageSize=function(t){try{this.options.pageSize="string"==typeof t?parseInt(t,10)||this.options.pageSize:t||this.options.pageSize}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getPageSize=function(){try{return this.options.pageSize}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.getSeperator=function(t){try{var e="";return 0!=t.length&&(e=";"),e}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},h.prototype._checkAndUpdateAdaptiveState=function(t){try{var e=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)<this.options.adaptiveThreshold;e!==this._isAdaptive&&(e?(this.addClass("w2pagination_adaptive"),this._pageRangeDisplayed=1):(this.removeClass("w2pagination_adaptive"),this._pageRangeDisplayed=2),this._isAdaptive=e,!0===t&&(this.setPaginationInfo(this.selectedIndex),this.redraw(),this.setSelectedIndex(this.selectedIndex)))}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.checkResize=function(){try{if(this.render)if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)<this.options.adaptiveThreshold!==this._isAdaptive){this._checkAndUpdateAdaptiveState(!0)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{for(var e=a.Z.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render),o=this.getSelectedIndex();i.next();)if(i.match("w2pageList_control_pagePrev")&&("2"==this.options.buttonShowType?this.moveLeft():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(1):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageLeft()),r.f.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.f.stopEvent(t)),i.match("w2pageList_control_prev")&&("3"==this.options.buttonShowType?this.pageLeftLast():this.moveLeft(),r.f.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.f.stopEvent(t)),i.match("w2pageList_control_next")&&("3"==this.options.buttonShowType?this.pageRight():this.moveRight(),r.f.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.f.stopEvent(t)),i.match("w2pageList_control_pageNext")&&("2"==this.options.buttonShowType?this.moveRight():"3"==this.options.buttonShowType||"4"==this.options.buttonShowType?this.setSelectedIndex(this.pageCount):("0"==this.options.buttonShowType||this.options.buttonShowType,this.pageRight()),r.f.fireEvent(this,"onclick",this.getSelectedIndex()),"list"==this.options.renderType&&r.f.stopEvent(t)),i.match("w2pageList_control_label")){var n=i.getElement().getAttribute(e);this.setSelectedIndex(n),r.f.fireEvent(this,"onclick",n),"list"==this.options.renderType&&r.f.stopEvent(t)}i=null;var l=this.getSelectedIndex();if(o!=l){var h={oldSelectedIndex:o,newSelectedIndex:l};r.f.fireEvent(this,"onviewchange",h)}}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseoverEvent=function(t){try{r.f.stopEvent(t)
;for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2pageList_control_label")?"pagination"!==this.options.renderType&&this.addClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.addClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.addClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.addClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.addClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseoutEvent=function(t){try{r.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2pageList_control_label")?"pagination"!==this.options.renderType&&this.removeClass(e.getElement(),"w2pageList_label_over"):e.match("w2pageList_col_prev")?this.removeClass(e.getElement(),"w2pageList_col_prev_over"):e.match("w2pageList_col_next")?this.removeClass(e.getElement(),"w2pageList_col_next_over"):e.match("w2pageList_col_prevPage")?this.removeClass(e.getElement(),"w2pageList_col_prevPage_over"):e.match("w2pageList_col_nextPage")&&this.removeClass(e.getElement(),"w2pageList_col_nextPage_over");e=null}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.onInputKeyEventHandler=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=48<=e&&e<=57||96<=e&&e<=105,o=document.getElementById(this.id+"_input");13==e&&(o.blur(),this.options.displaySelectedIndex&&(o.value>this.pageCount||o.value<=0||""==o.value||null==o.value)?(o.value=this.selectedIndex,this.setValue(o.value)):this.setValue(o.value)),i&&16!=e||8==e||37==e&&"ArrowLeft"==t.key||39==e&&"ArrowRight"==t.key||r.f.stopEvent(t)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.onBlurEvent=function(t){try{var e=document.getElementById(this.id+"_input");this.options.displaySelectedIndex&&(e.value>this.pageCount||e.value<=0||""==e.value||null==e.value)?(e.value=this.selectedIndex,this.setValue(e.value)):this.setValue(e.value),r.f.fireEvent(this,"oninputblur",e.value)}catch(t){s.Y.printStackTrace(t,null,this)}}},7838:function(t,e,i){"use strict";i.r(e),i.d(e,{panel:function(){return d},panelContainer:function(){return h}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2256),l=i(2406),h=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.panelContainer",pluginName:"panelContainer",useConfig:!0,cols:1,colWidth:0,panelMove:!0},h.prototype.initialize=function(t){this.panelIdCount=0,this.colArr=[]},h.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";t.push("<div id='"+this.id+"' "+e+" class='w2panelContainer "+this.options.className+"'>");for(var i=0;i<this.options.cols;i++)t.push("<div id='"+this.id+"_col_"+i+"' class='w2panelContainer_col'></div>");return t.push("</div>"),t.join("")},h.prototype.setAction=function(){var t=0,e=[];if(0==this.options.colWidth)for(var i=0;i<this.options.cols;i++)e[i]=parseInt(100/this.options.cols,10)+(i<100%this.options.cols?1:0);for(i=0;i<this.render.childNodes.length;i++)this.colArr.push(this.render.childNodes[i]),0==this.options.colWidth?(this.colArr[i].style.width=e[i]+"%",this.colArr[i].style.left=t+"%",t+=e[i]):(this.colArr[i].style.width=this.options.colWidth+"px",this.colArr[i].style.left=i*this.options.colWidth+"px");this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))},h.prototype.addPanel=function(t){var e=t.col||0;t.id||(t.id=this.id+"_panel"+this.panelIdCount++);var i=new WebSquare.uiplugin.panel(t.id,t),o=this;return i.options.xmlEvents=[{name:"onpanelopen",action:"script",param:{
handler:function(t){var e=o.getPanelInfoById(this.id);r.f.fireEvent(o,"onpanelopen",e)}}},{name:"onpanelclose",action:"script",param:{handler:function(t){var e=o.getPanelInfoById(this.id);r.f.fireEvent(o,"onpanelclose",e)}}}],this.addControl(i),i.appendTo(this.colArr[e]),i.activate(),i},h.prototype.removePanel=function(t,e){if(t=parseInt(t,10),!((e=parseInt(e,10))>=this.render.childNodes.length||t>=this.render.childNodes[e].childNodes.length)){var i=this.render.childNodes[e],o=i.childNodes[t],s=o.id;return this.removeControl(this.getPanelById(s)),a.Z.getComponentById(s+"_content").remove(),window[s]&&(window[s]=null),window[WebSquare.noConflict].comp[s]=null,delete window[WebSquare.noConflict].comp[s],i.removeChild(o),s}},h.prototype.getPanelById=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];if(i.id==t)return i}},h.prototype.getPanelInfo=function(){for(var t=[],e=0;e<this.options.cols;e++){for(var i=this.render.childNodes[e],o=[],s=0;s<i.childNodes.length;s++)for(var r=i.childNodes[s],a=0;a<this.childControlList.length;a++){var n=this.childControlList[a];if(n.render==r){o.push({id:n.id,style:n.options.style,title:n.options.title,src:n.options.src,scope:n.options.scope,col:e,row:s,isOpen:"0px"!=WebSquare.style.getStyle(this.getElementById(n.id+"_content"),"height")});break}}t.push(o)}return t},h.prototype.getPanelInfoById=function(t){for(var e=this.getPanelInfo(),i=0;i<e.length;i++)for(var o=e[i],s=0;s<o.length;s++){var r=o[s];if(t==r.id)return r}},h.prototype.setPanelTitle=function(t,e){var i=this.getPanelById(t);i&&(i.options.title=e,i.render.childNodes[0].childNodes[1].innerHTML=e)},h.prototype.openPanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight&&WebSquare.style.animate(i,{height:i.scrollHeight},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){WebSquare.style.setStyle(i,"height",""),e.removeClass("w2panel_closed"),r.f.fireEvent(e,"onpanelopen")}})},h.prototype.closePanel=function(t){var e=this.getPanelById(t),i=e.getElementById(e.id+"_content");0==i.offsetHeight||(WebSquare.style.setStyle(i,"height",i.scrollHeight+"px"),WebSquare.style.animate(i,{height:0},{key:e.id+"_toggle",easing:"linear",duration:300,caller:e,complete:function(){e.addClass("w2panel_closed"),r.f.fireEvent(e,"onpanelclose")}}))},h.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);this.options.panelMove&&e.next();)if(e.match("w2panel_title"))return this.dragDropElem=e.getElement().parentNode,this.render.style.cursor="pointer",this.addClass("w2noselect"),void r.f.stopEvent(t);this.dragDropElem=null},h.prototype.handleMousemoveEvent=function(t){this.dragDropElem&&(this.ghost||(this.ghost=document.createElement("div"),this.ghost.innerHTML=this.dragDropElem.childNodes[0].childNodes[1].innerHTML,this.ghost.className="w2panelContainer_ghost",WebSquare.getBody().appendChild(this.ghost)),this.ghost.style.left=r.f.getMouseX(t)+10+"px",this.ghost.style.top=r.f.getMouseY(t)+10+"px",r.f.preventDefault(t))},h.prototype.handleMouseupEvent=function(t){try{if(this.dragDropElem){for(var e=this.event.getTargetIterator(t,this.render);e.next()&&(!e.match("w2panel_title")||e.getElement().parentNode!=this.dragDropElem);)if(e.match(null,this.id)){for(var i=r.f.getMouseX(t)+this.render.scrollLeft-WebSquare.style.getAbsoluteLeft(this.render),o=r.f.getMouseY(t)+this.render.scrollTop-WebSquare.style.getAbsoluteTop(this.render),a=null,n=0;n<this.render.childNodes.length;n++){if(i<(a=this.render.childNodes[n]).offsetLeft+a.offsetWidth)break}for(var l=this.render.childNodes[n].childNodes,h=0;h<l.length;h++){var d=l[h];if(o<d.offsetTop+d.offsetHeight)break}if(this.dragDropElem.parentNode.removeChild(this.dragDropElem),!a)return;h<l.length?a.insertBefore(this.dragDropElem,l[h]):(h=l.length,a.appendChild(this.dragDropElem)),r.f.fireEvent(this,"onpanelmove",h,n)}this.render.style.cursor="",this.removeClass("w2noselect")}
this.dragDropElem=null,this.ghost&&(this.ghost.parentNode.removeChild(this.ghost),this.ghost=null)}catch(t){s.Y.printStackTrace(t,null,this)}},h.prototype.movePanel=function(t,e,i){try{var o=this.getPanelById(t),a=this.render.childNodes[i];if(!a)return void n.v.printLog("invalid position : ["+e+","+i+"]["+this.id+"]");var l=this.render.childNodes[i].childNodes;o?(o.render.parentNode.removeChild(o.render),e<l.length?a.insertBefore(o.render,l[e]):(e=l.length,a.appendChild(o.render)),r.f.fireEvent(this,"onpanelmove",e,i)):n.v.printLog("cannot find pannel : "+t+"["+this.id+"]")}catch(t){s.Y.printStackTrace(t,null,this)}};var d=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(d.prototype,l.q.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.panel",pluginName:"panel",title:"",src:"",scope:!1,isOpen:!0},d.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2panel "+this.options.className+"'>"),t.push("<div id='"+this.id+"_title' class='w2panel_title'>"),t.push("<div id='"+this.id+"_title_image' class='w2panel_title_image'></div>"),t.push("<span id='"+this.id+"_title_text' class='w2panel_title_text'>"+this.options.title+"</span>"),t.push("</div>"),t.push("</div>"),t.join("")},d.prototype.setAction=function(){var t=new WebSquare.uiplugin.wframe(this.id+"_content",{className:"w2panel_content",src:this.options.src,scope:this.options.scope,style:this.options.isOpen?"":"height:0"});t.appendTo(this),t.activate(),this.contentRender=t.render,this.event.addListener(this.getElementById(this.id+"_title"),"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.options.isOpen||this.addClass("w2panel_closed")},d.prototype.handleTitleClick=function(t){0==this.getElementById(this.id+"_content").offsetHeight?this.parentControl.openPanel(this.id):this.parentControl.closePanel(this.id)}},4090:function(t,e,i){"use strict";i.r(e),i.d(e,{radio:function(){return c}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(7455),d=i(4860),c=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(c.prototype,l.q.prototype),o.q.extend(c.prototype,h.t.prototype),o.q.extend(c.prototype,d.G.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.radio",pluginName:"radio",userEvents:["onchange","onlabelclick","onradioclick","onviewchange","onkeyup","onkeydown","onbeforeselect"],useConfig:!0,renderType:"",tagname:"div",itemTagname:"div",value:"",cols:0,rows:0,name:"",nameScope:!1,selectedIndex:-1,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",useRadioTitle:!0,inValidValue:"reset",escape:!0,ignoreTabIndex:!1,tooltipItemLabel:"",tooltipShowAlways:!1,tooltipDisplay:!1,tooltipClass:"",tooltipTime:1,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F"},c.prototype.initialize=function(t){try{var e=s.I.getConfiguration("/WebSquare/radio/renderType/@value");""==this.options.renderType&&""!=e?this.options.renderType=e:""==this.options.renderType&&(this.options.renderType="table"),this.selectedIndex=-1,this.inputType="radio","native"==this.options.renderType?this.itemArr=[{label:"",value:this.options.value}]:this.initializeItemArr(t),this.itemDisabledArray=[];for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(!1);this.setTableCount(),this.validator=new WebSquare.validator.validateInvoker(this.id,this.options)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e="label",i=this.itemArr.length,o=this.options.name||this.id+"_input";this.options.nameScope&&this.options.name&&this.scope_id&&(o=this.scope_id+"_"+o)
;var s=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.title?"":"title='"+this.options.title+"'",l=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'";1==this.options.ignoreTabIndex&&(l=n.Z.isIEAllVersion("8")||n.Z.isIEAllVersion("9")?" tabindex='-40000'":" tabindex='-1'");var h=n.Z.getDataPrefix("index");if("native"==this.options.renderType.toLowerCase())t.push("<input type='"+this.inputType+"' "+s+" class='w2"+this.inputType+"_input "+this.options.className+"' name='"+o+"' id='"+this.id+"' "+h+"='0' "+a+l+" />");else if("radiogroup"==this.options.renderType.toLowerCase()){t.push("<"+this.options.tagname+" id='"+this.id+"' "+s+" class='w2"+this.inputType+" "+this.options.className+"' "+a+" >");for(var d=this.options.itemTagname&&"none"!==this.options.itemTagname&&"$blank"!==this.options.itemTagname,c=0;c<i;c++){var u="";this.itemArr&&this.itemArr[c]&&!0===this.itemArr[c]._hidden&&(u=" style='display:none;'");var p=this.id+"_input_"+c,g=this.options.escape?WebSquare.xml._encode(this.itemArr[c].label):this.itemArr[c].label,m="",f="";this.itemDisabledArray[c]&&(m="disabled",f="w2radio_disabled"),d&&t.push("<"+this.options.itemTagname+" class='w2radio_item w2radio_item_"+c+"'"+u+">");g=this.options.escape?WebSquare.xml._encode(this.itemArr[c].label):this.itemArr[c].label;var b=this.options.useRadioTitle?" title='"+g+"' ":"";t.push("<input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+o+"' "+h+"='"+c+"'  id='"+p+"' "+m+l+b+"/>"),t.push("<label class='w2"+this.inputType+"_label "+f+"' "+h+"='"+c+"' for='"+p+"' >"+g+"</"+e+">"),d&&t.push("</"+this.options.itemTagname+">")}t.push("</"+this.options.tagname+">")}else{t.push("<div id='"+this.id+"' "+s+" class='w2"+this.inputType+" "+this.options.className+"' "+a+" >"),t.push("<table class='w2"+this.inputType+"_main'>");for(var y=0;y<this.rowCount;y++){p=this.id+"_input_"+y;t.push("<tr class='w2"+this.inputType+"_row'>");for(var v=0;v<this.colCount;v++){var w=y*this.colCount+v;u="";this.itemArr&&this.itemArr[w]&&!0===this.itemArr[w]._hidden&&(u=" style='display:none;'");p=this.id+"_input_"+w,m="",f="";if(this.itemDisabledArray[w]&&(m="disabled",f="w2radio_disabled"),w<i){g=this.options.escape?WebSquare.xml._encode(this.itemArr[w].label):this.itemArr[w].label,b=this.options.useRadioTitle?" title='"+g+"' ":"";t.push("<td class='w2"+this.inputType+"_td_input'"+u+"><input type='"+this.inputType+"' class='w2"+this.inputType+"_input' name='"+o+"' "+h+"='"+w+"'  id='"+p+"'"+b+" "+m+l+"/></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+u+"><"+e+" class='w2"+this.inputType+"_label "+f+"' "+h+"='"+w+"' for='"+p+"' >"+g+"</"+e+"></td>")}else t.push("<td class='w2"+this.inputType+"_td_input'"+u+"></td>"),t.push("<td class='w2"+this.inputType+"_td_label'"+u+"></td>")}t.push("</tr>")}t.push("</table>"),t.push("</div>")}return t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.modelControl.isItemsetBinded()&&(this.refreshItemArr(),this.componentRedraw(),this.options.enableColumn&&this.refreshEnable()),this.modelControl.isBinded()){var t=this.modelControl.getData();this.setValueNM(t)}this.options.selectedIndex>-1&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),this.options.tooltipFormatter&&(this.tooltipFormatter=n.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),
(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getAccessibiltyId=function(){try{return"native"==this.options.renderType?this.id:this.id+"_input_0"}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(){try{if(this.modelControl.isItemsetBinded()){var t=this.getValue(),e=!1;0==this.getItemCount()&&this.options.selectedIndex>-1&&(e=!0),this.refreshItemArr(),this.itemDisabledArray=new Array;for(var i=0;i<this.itemArr.length;i++)this.itemDisabledArray.push(this.options.disabled);this.componentRedraw(t),e&&(this.setSelectedIndexNM(this.options.selectedIndex),this.modelControl.isBinded()&&this.modelControl.setData(this.getValue())),this.options.enableColumn&&this.refreshEnable()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t){try{this.setTableCount(),this.redraw(),this.setValueNM(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getItemCount=function(){try{return this.itemArr.length}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t){try{if(n.Z.isNull(t))return;if(t=parseInt(t),!1===a.f.fireEvent(this,"onbeforeselect",this.getSelectedIndex(),t)){var e=this.getRadioList()[t];return void(e.checked=!e.checked)}var i=this.getSelectedIndex(),o="";this.modelControl.isBinded()?o=this.modelControl.getData():i>=0&&(o=this.itemArr[i].value),this.setSelectedIndexNM(t),this.modelControl.setData(this.itemArr[t].value),i!=this.getSelectedIndex()&&a.f.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()}),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;this.selectedIndex=t;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{if(n.Z.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValueNM=function(t){try{if(n.Z.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=!1,o=0;o<e;o++)this.itemArr[o].value==t?(this.setSelectedIndexNM(o,!0),i=!0):"reset"==this.options.inValidValue&&this.checkedRadio(o,!1);"reset"==this.options.inValidValue&&0==i&&(this.selectedIndex=-1)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.checkedRadio=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return!1;var i=this.getRadioList()[t];return e=null==e||e,i.checked=e,!0}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInstanceValue=function(){try{var t=this.getValue();this.modelControl.setData(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setTableCount=function(){try{if(this.rowCount=this.itemArr.length,this.colCount=1,0!=this.options.rows){var t=this.options.rows;this.rowCount=t,this.colCount=Math.ceil(this.itemArr.length/t)}if(0!=this.options.cols){var e=this.options.cols;this.colCount=e,this.rowCount=Math.ceil(this.itemArr.length/e)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getValue=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].value)
;return t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getText=function(){try{for(var t="",e=this.getRadioList(),i=0;i<e.length;i++)e[i].checked&&(t=this.itemArr[i].label);return t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i){try{i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount());var o=this.getValue(),s={};s.value=t,s.label=e,this.itemArr.splice(i,0,s),this.itemDisabledArray.splice(i,0,!!this.options.disabled);for(var a=this.getRadioList(),n=[],l=0;l<a.length;l++)n.push(a[l].itemDisabled);n.splice(i,0,!1),this.componentRedraw(o);var h=this.getRadioList();for(l=0;l<h.length;l++)h[l].itemDisabled=n[l];return i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t){try{if(t=parseInt(t,10),isNaN(t))return;for(var e=this.getValue(),i=null,o=this.getRadioList(),s=[],a=0;a<o.length;a++)s.push(o[a].itemDisabled);t>=0&&t<this.getItemCount()&&(i=this.itemArr.splice(t,1)[0],this.itemDisabledArray.splice(t,1),s.splice(t,1)),this.componentRedraw(e);var n=this.getRadioList();for(a=0;a<n.length;a++)n[a].itemDisabled=s[a];return i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.removeAll=function(){try{this.itemArr=new Array,this.itemDisabledArray=new Array,this.componentRedraw("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"readOnly":for(var i=this.getRadioList(),o=0;o<i.length;o++)i[o].disabled=e;1==e?this.addClass(this.render,"w2radio_readonly"):this.removeClass(this.render,"w2radio_readonly");break;case"mandatory":1==e?this.addClass(this.render,"w2radio_mandatory"):this.removeClass(this.render,"w2radio_mandatory")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getRadioList=function(){try{return"native"==this.options.renderType?[this.render]:this.getDomList("radioArr","input")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getLabelList=function(){try{return this.getDomList("labelArr","label")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.focus=function(){try{var t=this.getRadioList();-1!=this.selectedIndex?t[this.selectedIndex].focus():t[0].focus()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.click=function(t){try{this.getRadioList()[t].click()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.reset=function(){try{for(var t=this.getRadioList(),e=this.getValue(),i=0;i<t.length;i++)t[i].checked&&(t[i].checked=!1);this.selectedIndex=-1;var o=this.getValue();this.setInstanceValue(),e!=o&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:o})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setDisabled=function(t){try{t=n.Z.getBoolean(t);for(var e=this.getRadioList(),i=this.getLabelList(),s=0;s<e.length;s++)e[s].itemDisabled||(t?e[s].setAttribute("disabled","disabled"):e[s].removeAttribute("disabled"),this.itemDisabledArray[s]=t,i[s]&&(t?this.addClass(i[s],"w2radio_disabled"):this.removeClass(i[s],"w2radio_disabled")));return this.options.disabled=t,!0!==o.q.dataPrefix&&(this.render.disabled=t,t?this.render.setAttribute("disabled","disabled"):this.render.removeAttribute("disabled")),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setReadOnly=function(t){try{!0===o.q.dataPrefix?(t=n.Z.getBoolean(t),this.options.readOnly=t,this.onPropertyChange("readOnly",t)):l.q.prototype.setReadOnly.call(this,t)}catch(t){r.Y.printStackTrace(t,null,this)}},
c.prototype.setItemDisabled=function(t,e){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;e=n.Z.getBoolean(e);var i=this.getRadioList(),o=this.getLabelList();i[t].disabled=e,i[t].itemDisabled=e,this.itemDisabledArray[t]=e,1==e?this.addClass(o[t],"w2radio_disabled"):this.removeClass(o[t],"w2radio_disabled")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getItemDisabled=function(t){try{if((t=parseInt(t))<0||t>=this.getItemCount())return;return this.getRadioList()[t].disabled}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{for(var e=this.getValue(),i=this.getRadioList(),o=0;o<i.length;o++)i[o].checked&&(i[o].checked=!1);this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},c.prototype.handleClickEvent=function(t){try{this.setRefPosition();for(var e=n.Z.getDataPrefix("index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2"+this.inputType+"_input")){var o=i.getElement().getAttribute(e),s=this.selectedIndex;if(this.getRadioList()[o].disabled)continue;this.setSelectedIndex(o),this.fireOnclick({type:"1",index:o,oldIndex:s})}if(i.match("w2"+this.inputType+"_label")&&!i.match("w2"+this.inputType+"_disabled")){o=i.getElement().getAttribute(e),this.getRadioList();a.f.preventDefault(t);s=this.selectedIndex;this.setSelectedIndex(o),this.fireOnclick({type:"2",index:o,oldIndex:s})}}i=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{for(var e=a.f.getTarget(t);e&&(!e.firstChild||"LABEL"!=e.firstChild.tagName)&&!("radiogroup"===this.options.renderType&&e&&"DIV"===e.tagName&&e.className.indexOf("w2radio_item")>=0);)e=e.parentNode;var i=n.Z.getDataPrefix("index");if(e){var o;o="radiogroup"===this.options.renderType?e.getElementsByClassName("w2radio_label")[0]:e.firstChild;e.offsetWidth,e.offsetHeight;var s=WebSquare.style.getStyle(e,"text-overflow"),l=o.innerHTML;if(!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if("function"==typeof this.tooltipFormatter){var c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else if("ellipsis"==s){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=e.className,this.toolTipRuler.innerHTML=e.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(e,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(e,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(e,"font-weight");var u=this.toolTipRuler.firstChild.offsetWidth,p=e.clientWidth;if(3!=o.nodeType){var g=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-left"),m=WebSquare.style.getStyle(this.toolTipRuler.firstChild,"padding-right");u-=parseInt(g||"0",10),u-=parseInt(m||"0",10),p-=parseInt(WebSquare.style.getStyle(o,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(o,"padding-right"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),p-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}if(p<u){h=WebSquare.style.getAbsoluteLeft(o),d=WebSquare.style.getAbsoluteTop(o);if(document.body.removeChild(this.toolTipRuler),
this.options.tooltipItemLabel)l=this.options.tooltipItemLabel;else if("function"==typeof this.tooltipFormatter){c=parseInt(o.getAttribute(i),10);l=this.tooltipFormatter(l,c)}this.showTooltip(h,d,l)}else document.body.removeChild(this.toolTipRuler)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),!0!==this.options.tooltipDisplay&&!0!==this.options.tooltipShowAlways||this.hideTooltip()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.Z.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.Y.printStackTrace(t)}var d=document.body.scrollWidth;this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2radio_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i;var c=Math.max(e-(this.tooltip.render.offsetHeight+3),0);if(this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",c+"px"),document.body.scrollWidth>d){var u=t-(document.body.scrollWidth-d);u<0&&(u=0),this.tooltip.setStyle("left",u+"px")}})),100*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.fireOnchange=function(){try{a.f.fireEvent(this,"onchange")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.fireOnclick=function(t){try{if(!t)return;var e,i=t.type||"1",o=t.index,s=this.getValue(),n=t.oldIndex;this.itemArr[n]&&(e=this.itemArr[n].value),this.focus(),"1"===i?a.f.fireEvent(this,"onradioclick",o,s):"2"===i&&a.f.fireEvent(this,"onlabelclick",o,s),o!=n&&a.f.fireEvent(this,"onviewchange",{oldIndex:n,oldValue:e,index:o,value:s})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshVisible=function(){try{if(!this.render)return;this._refreshVisible(this.render.getElementsByTagName("input")),"radiogroup"!==this.options.renderType.toLowerCase()&&this._refreshVisible(this.render.getElementsByTagName("label"))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._refreshVisible=function(t){try{for(var e=n.Z.getDataPrefix("index"),i=0;i<t.length;i++){var o=parseInt(t[i].getAttribute(e),10)
;this.itemArr[o]&&!0===this.itemArr[o]._hidden?t[o].parentNode.style.display="none":t[o].parentNode.style.display=""}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshEnable=function(){try{for(var t=this.getItemCount(),e=0;e<t;e++)this.itemArr[e]&&!0===this.itemArr[e]._disabled?this.setItemDisabled(e,!0):this.setItemDisabled(e,!1)}catch(t){r.Y.printStackTrace(t,null,this)}}},6976:function(t,e,i){"use strict";i.r(e),i.d(e,{scrollView:function(){return d}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(541),d=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(d.prototype,l.q.prototype),o.q.extend(d.prototype,h.v.prototype),d.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.scrollView",pluginName:"scrollView",userEvents:["onscroll","onscrollbottom"],parseChild:!0,verticalScroll:!0,horizontalScroll:!1,bounce:!0,paging:!1,showVerticalScroll:!0,showHorizontalScroll:!0,slideDuration:1200,resilienceDuration:500,pagingDuration:300,slidePeriod:15,scrollTop:0,scrollLeft:0,scrollType:"mobile",resizeAutoScroll:!1,css3d:!1,fadeOutScrollBar:!0,eventSmoothing:!0,overScrollGlow:!1,dragScrollSize:50,slideThreshold:5,useStylus:!1,accessibility:!1,scrollSpeed:10},d.prototype.initialize=function(t){this.isMobile=n.Z.isMobile(),this.isAndroid=/android/.test(navigator.userAgent.toLowerCase()),this.transformArr=["-webkit-transform",":","translate3d(",,"px, ",,"px, 0px) scale(1)"],this.support3D="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,this.fingerTop=0,this.fingerLeft=0,this.scrollLock=!1,this.measureDrawTime=!1,WebSquare.dragdrop2.scrollable[this.uuid]={scroll:!1}},d.prototype.toHTML=function(){try{var t=[],e=this.getChildren(),i=this.options.className,o="",s=""==this.options.style?"":"style='"+this.options.style+"'",a=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";this.isMobile||"auto"!=this.options.scrollType?"accessibility"==this.options.scrollType?i+=" nativeScroll":o=" style='width: 100%;height: 100%;overflow: hidden'":i+=" nativeScroll",t.push("<div id='"+this.id+"' "+s+" class='w2scrollView "+i+"' "+a+">"),t.push("<div id='"+this.id+"_container' class='w2scrollView_container'"+o+">");for(var n=0;n<e.length;n++)t.push(e[n].toHTML());return t.push("</div>"),t.push("<div id='"+this.id+"_iScrollX' class='w2scrollView_iScrollX' style='visibility:hidden;left:0px;'></div>"),t.push("<div id='"+this.id+"_iScrollY' class='w2scrollView_iScrollY' style='visibility:hidden;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollTop' class='w2scrollView_overScrollTop' style='display:none;top:0px;'></div>"),t.push("<div id='"+this.id+"_overScrollBottom' class='w2scrollView_overScrollBottom' style='display:none;bottom:0px;'></div>"),t.push("</div>"),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setAction=function(){this.dom.container=this.getElementById(this.id+"_container"),this.dom.iScrollX=this.getElementById(this.id+"_iScrollX"),this.dom.iScrollY=this.getElementById(this.id+"_iScrollY"),this.dom.overScrollTop=this.getElementById(this.id+"_overScrollTop"),this.dom.overScrollBottom=this.getElementById(this.id+"_overScrollBottom"),this.iScroll={prevTouches:[]},n.Z.isTouchDevice()&&(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTouchEnd))),"auto"!=this.options.scrollType&&"accessibility"!=this.options.scrollType&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleTouchStart)),this.event.addListener(document.documentElement,"onmousemove",this.event.bindAsEventListener(this,this.handleTouchMove)),this.event.addListener(document.documentElement,"onmouseup",this.event.bindAsEventListener(this,this.handleTouchEnd)),
this.event.addListener(document.documentElement,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOut)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,(function(t){a.f.preventDefault(t)})))),this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handlekeyDownEvent)),this.iScrollXHeight=parseInt(1.5*this.dom.iScrollX.offsetHeight,10),this.iScrollYWidth=parseInt(1.5*this.dom.iScrollY.offsetWidth,10),this.checkResize(),this._scrollTo(this.options.scrollLeft,this.options.scrollTop),this.measureDrawTime=!0},d.prototype.setIScroll=function(){try{if(this.options.verticalScroll&&this.options.showVerticalScroll){var t=this.render.clientHeight,e=this.dom.container.scrollHeight;if(e>t){this.options.horizontalScroll&&(t-=this.iScrollXHeight);var i=this.getMaxScrollTop(),o=parseInt(t*t/e,10);o=o<30?30:o;var s=parseInt(this.getScrollTop()*(t-o)/i,10);s<0?(o+=s,s=0):s+o>=t&&(o=t-s),this.options.css3d&&this.support3D?(this.transformArr[3]=0,this.transformArr[5]=s,this.dom.iScrollY.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollY.style.top=s+"px",this.dom.iScrollY.style.height=o+"px",this.dom.iScrollY.style.visibility="visible"}else this.dom.iScrollY.style.visibility="hidden"}if(this.options.horizontalScroll&&this.options.showHorizontalScroll){var a=this.render.clientWidth,n=this.dom.container.scrollWidth;if(n>a){this.options.verticalScroll&&(a-=this.iScrollYWidth);var l=this.getMaxScrollLeft(),h=parseInt(a*a/n,10);h=h<30?30:h;var d=parseInt(this.getScrollLeft()*(a-h)/l,10);d<0?(h+=d,d=0):d+h>=a&&(h=a-d),this.options.css3d&&this.support3D?(this.transformArr[3]=d,this.transformArr[5]=0,this.dom.iScrollX.style[this.transformArr[0]]=this.transformArr.slice(2).join("")):this.dom.iScrollX.style.left=d+"px",this.dom.iScrollX.style.width=h+"px",this.dom.iScrollX.style.visibility="visible"}else this.dom.iScrollX.style.visibility="hidden"}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.checkResize=function(){try{var t=this.render.clientHeight,e=this.render.clientWidth,i=this.dom.container.scrollHeight,o=this.dom.container.scrollWidth;if(!this.sizeBackup||this.sizeBackup.renderWidth!=e||this.sizeBackup.renderHeight!=t||this.sizeBackup.scrollWidth!=o||this.sizeBackup.scrollHeight!=i){this.sizeBackup={renderWidth:e,renderHeight:t,scrollWidth:o,scrollHeight:i};var a=parseInt(this.dom.container.style.top||0,10);this.isSliding&&a&&(this.stopSlide(),this._scrollTo(null,this.dom.container.scrollTop-a));var n=this.getScrollLeft(),l=this.getScrollTop(),h=this.getMaxScrollLeft(),d=this.getMaxScrollTop();if(this.options.resizeAutoScroll&&this.sizeBackup){for(var c=document.activeElement,u=c;(u=u.parentNode)&&u!=this.render;);if(u){var p=WebSquare.style.getAbsoluteTop(c),g=WebSquare.style.getAbsoluteTop(this.render),m=l;p<g?m-=g-p:p+c.offsetHeight>g+t&&(m+=p+c.offsetHeight-(g+t)),m!==l&&m>=0&&m<=d&&this._scrollTo(null,m)}}(n>h||l>d)&&(this.stopSlide(),this._scrollTo(n<h?n:h,l<d?l:d)),this.setIScroll()}s.I.setTimer(this.checkResize,{key:this.id+"_checkResize",caller:this,delay:100})}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.iScrollAddMoveClass=function(){this.options.fadeOutScrollBar&&(s.I.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.style.setStyle(this.dom.iScrollX,"opacity","1"),WebSquare.style.setStyle(this.dom.iScrollY,"opacity","1")),this.__addClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__addClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")},d.prototype.iScrollRemoveMoveClass=function(){this.options.fadeOutScrollBar?WebSquare.style.animate([this.dom.iScrollX,this.dom.iScrollY],{opacity:0},{key:this.id+"_iScrollRemoveClass",duration:500,easing:"ease-out",caller:this,complete:function(){this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move")}
}):(this.__removeClass(this.dom.iScrollX,"w2scrollView_iScrollX_move"),this.__removeClass(this.dom.iScrollY,"w2scrollView_iScrollY_move"))},d.prototype.scrollTo=function(t,e,i){this.stopSlide(),(i=i||{}).duration=null==i.duration?500:i.duration,i.timingFunction=i.timingFunction||"ease",this.options.horizontalScroll&&"number"==typeof t&&(i.initX=this.getScrollLeft(),i.finishX=t),this.options.verticalScroll&&"number"==typeof e&&(i.initY=this.getScrollTop(),i.finishY=e),this.iScroll.prevTouches=[],this.isSliding=!0,this.setIScroll(),this.iScrollAddMoveClass();var o=i.delay||0;o<=0?this.slide(i):s.I.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:o,args:[i]})},d.prototype._scrollTo=function(t,e){this.measureDrawTime&&s.I.measureTime((function(t){this.options.slidePeriod=parseInt(t.aver,10)}),{key:this.id+"_measureDrawTime",caller:this});t=parseInt(t,10),e=parseInt(e,10);var i=this.getScrollLeft(),o=this.getScrollTop(),r=this.getMaxScrollLeft(),n=this.getMaxScrollTop();if(t=isNaN(t)?i:t,e=isNaN(e)?o:e,t!=i||e!=o){if(WebSquare.getBody().getLayerListener().hideAll(),this.options.css3d&&this.support3D)this.transformArr[3]=-t,this.transformArr[5]=-e,this.dom.container.style.cssText=this.transformArr.join("");else{var l=t,h=0,d=e,c=0;t<0?(l=0,h=-t):r<t&&(l=r,h=-(t-r)),e<0?(d=0,c=-e):n<e&&(d=n,c=-(e-n)),this.dom.container.scrollLeft=l,this.dom.container.scrollTop=d,this.dom.container.style.left=h+"px",this.dom.container.style.top=c+"px"}this.options.scrollLeft=t,this.options.scrollTop=e,this.setIScroll(),a.f.fireEvent(this,"onscroll",t,e),!this.scrollBottom&&e>=n&&(this.scrollBottom=!0,a.f.fireEvent(this,"onscrollbottom"))}},d.prototype.scrollBy=function(t,e,i){this.stopSlide(!0);t=t||0,e=e||0;var o=this.getScrollLeft(),s=this.getScrollTop();this.scrollTo(o+t,s+e,i)},d.prototype.handlekeyDownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(37!==e&&38!==e&&39!==e&&40!==e)return;a.f.preventDefault(t);var i=parseInt(this.options.scrollSpeed,10)||10;switch(e){case 37:this.scrollBy(-i,0);break;case 39:this.scrollBy(i,0);break;case 38:this.scrollBy(0,-i);break;case 40:this.scrollBy(0,i)}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.resetScrollBottom=function(){this.scrollBottom=!1},d.prototype.slide=function(t){try{s.I.clearTimer(this.id+"_iScroll_slide");var e=this.render.clientWidth,i=this.render.clientHeight,o=this.getScrollTop(),a=this.getScrollLeft(),n=this.getMaxScrollTop(),l=this.getMaxScrollLeft();null==t.endTime&&(t.endTime=(new Date).getTime()+t.duration),null==t.slidePeriod&&(t.slidePeriod=this.options.slidePeriod);var h=null==t.initX?a:t.initX,d=null==t.initY?o:t.initY,c=null==t.finishX?a:t.finishX,u=null==t.finishY?o:t.finishY,p=t.duration,g=(new Date).getTime()-(t.endTime-p);this.forceToStopSlide&&(g=p),h<0&&2*h<c&&c<0&&(c=0),d<0&&2*d<u&&u<0&&(u=0),h>l&&l<c&&c<2*h-l&&(c=l),d>n&&n<u&&u<2*d-n&&(u=n);var m=WebSquare.style.cubicBezierAtTime(g/p,t.timingFunction,p/1e3),f=h+(c-h)*m,b=d+(u-d)*m;if(this.options.bounce)!t.xResilience&&(f<0&&c<0||l<f&&l<c)&&(t.xResilience=!0,f<-e/2&&(f=-e/2),f>l+e/2&&(f=l+e/2),c<-e?(h=f,c=-e):c>l+e&&(h=f,c=l+e),c<0?t.turningPointX=c/2:c>l&&(t.turningPointX=l+(c-l)/2)),!t.yResilience&&(b<0&&u<0||n<b&&n<u)&&(t.yResilience=!0,b<-i/2&&(b=-i/2),b>n+i/2&&(b=n+i/2),u<-i?(d=b,u=-i):u>n+i&&(d=b,u=n+e),t.turningPointY=u<0?u/2:n+(u-n)/2),t.xResilience&&(f<t.turningPointX&&c<0||f>t.turningPointX&&c>0)&&(f=-f+2*t.turningPointX),t.yResilience&&(b<t.turningPointY&&u<0||b>t.turningPointY&&u>0)&&(b=-b+2*t.turningPointY);else{f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n);var y=c==f||c<=0&&f<=0||c>=l&&f>=l,v=u==b||u<=0&&b<=0||u>=n&&b>=n,w=this.options.horizontalScroll,S=this.options.verticalScroll;(w&&S&&y&&v||w&&!S&&y||!w&&S&&v)&&(g=p)}if(t.initX=h,t.initY=d,t.finishX=c,t.finishY=u,g>=p){f=t.finishX,b=t.finishY,f<0&&(f=0),f>l&&(f=l),b<0&&(b=0),b>n&&(b=n),this._scrollTo(f,b),this.stopSlide();var _=!0
;("none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight||"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight)&&(_=!1),this.hideOverScrollGlow(_)}else this._scrollTo(f,b),s.I.setTimer(this.slide,{key:this.id+"_iScroll_slide",caller:this,delay:t.slidePeriod,args:[t]})}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.stopSlide=function(t){try{this.isSliding&&(this.isSliding=!1,this.forceToStopSlide=t,s.I.clearTimer(this.id+"_iScroll_slide",t),this.forceToStopSlide=null,this.iScrollRemoveMoveClass())}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getSlideFactor=function(t,e){var i=this.isMobile?.3:1;return parseInt(i*t/100*e,10)},d.prototype.hideOverScrollGlow=function(t){if(!this.options.bounce&&this.options.overScrollGlow){var e=this,i=this.getScrollTop();t?0==i?(WebSquare.style.show(this.dom.overScrollTop),WebSquare.style.setStyle(this.dom.overScrollTop,"top",-this.dom.overScrollTop.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollTop,{top:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):i==this.getMaxScrollTop()&&(WebSquare.style.show(this.dom.overScrollBottom),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",-this.dom.overScrollBottom.offsetHeight+"px"),WebSquare.style.animate(this.dom.overScrollBottom,{bottom:0},{key:this.id+"_hideOverScrollGlowWithGlow",easing:"ease-in",duration:300,complete:function(){e.hideOverScrollGlow()}})):"none"!=this.dom.overScrollTop.style.display&&this.dom.overScrollTop.offsetTop>=-this.dom.overScrollTop.offsetHeight?WebSquare.style.animate(this.dom.overScrollTop,{top:-this.dom.overScrollTop.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollTop)}}):"none"!=this.dom.overScrollBottom.style.display&&this.dom.overScrollBottom.offsetTop<this.render.clientHeight&&WebSquare.style.animate(this.dom.overScrollBottom,{bottom:-this.dom.overScrollBottom.offsetHeight},{key:this.id+"_hideOverScrollGlow",easing:"ease-out",duration:300,complete:function(){WebSquare.style.hide(e.dom.overScrollBottom)}})}},d.prototype.setScrollLock=function(t){this.scrollLock=!!t},d.prototype.getContentSize=function(t){try{var e=this.dom.container.scrollWidth,i=this.dom.container.scrollHeight;if(!t)return{width:e,height:i};if("height"==(t=t.toLowerCase()))return i;if("width"==t)return e;$l("getContentSize : wrong sizeName["+t+"]["+this.id+"]")}catch(t){r.Y.printStackTrace(t)}},d.prototype.getMaxScrollTop=function(){var t=this.dom.container.scrollHeight-this.render.clientHeight;return t>=0?t:0},d.prototype.getMaxScrollLeft=function(){var t=this.dom.container.scrollWidth-this.render.clientWidth;return t>=0?t:0},d.prototype.getScrollTop=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollTop;var t=this.dom.container.scrollTop;return 0!=t&&t!=this.getMaxScrollTop()||(t-=parseInt(this.dom.container.style.top||0,10)),this.options.scrollTop=t,t}catch(t){r.Y.printStackTrace(t)}},d.prototype.getScrollLeft=function(){try{if(this.options.css3d&&this.support3D)return this.options.scrollLeft;var t=this.dom.container.scrollLeft;return 0!=t&&t!=this.getMaxScrollLeft()||(t-=parseInt(this.dom.container.style.left||0,10)),this.options.scrollLeft=t,t}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleTouchStart=function(t){try{if(this.isTouched=!0,this.options.useStylus=t.touches&&t.touches[0].touchType&&t.touches[0].force>0?"stylus"===t.touches[0].touchType:this.options.useStylus||/iPad/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!window.MSStream,a.f.stopPropagation(t),this.stopSlide(),!t.touches||1==t.touches.length){this.setIScroll(),this.iScrollAddMoveClass(),this.iScroll.prevTouches=[{x:t.touches?t.touches[0].pageX:t.clientX,
y:t.touches?t.touches[0].pageY:t.clientY}],this.distX=0,this.distY=0;var e=t.touches?t.touches[0]:t;this.pointX=e.pageX,this.pointY=e.pageY,this.iScroll.direction="",this.options.horizontalScroll&&!this.options.verticalScroll?this.iScroll.direction="horizontal":!this.options.horizontalScroll&&this.options.verticalScroll&&(this.iScroll.direction="vertical"),this.fingerLeft=this.getScrollLeft(),this.fingerTop=this.getScrollTop()}}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleTouchMove=function(t){try{if(!t.touches||1==t.touches.length){var e=t.touches?t.touches[0]:t,i=e.pageX-this.pointX,o=e.pageY-this.pointY;this.pointX=e.pageX,this.pointY=e.pageY,this.distX+=i,this.distY+=o,this.options.eventSmoothing?s.I.setTimer(this._handleTouchMove,{key:this.id+"_handleTouchMove",caller:this,args:[{clientX:t.touches?t.touches[0].pageX:t.clientX,clientY:t.touches?t.touches[0].pageY:t.clientY}],delay:1,max:1}):this._handleTouchMove(t),(this.options.useStylus&&Math.abs(this.distX)>6||Math.abs(this.distY)>6)&&a.f.stopEvent(t)}}catch(t){r.Y.printStackTrace(t)}},d.prototype._handleTouchMove=function(t){try{if(this.scrollLock||this.iScroll.prevTouches.length<=0)return;this.iScroll.prevTouches.push({x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY});var e=this.iScroll.prevTouches.length;this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var i=this.iScroll.prevTouches,o=this.options.horizontalScroll?i[0].x-i[1].x:0,s=this.options.verticalScroll?i[0].y-i[1].y:0,a=this.render.clientWidth,n=this.render.clientHeight,l=this.getScrollTop(),h=this.getScrollLeft(),d=this.getMaxScrollTop(),c=this.getMaxScrollLeft();if(this.options.horizontalScroll&&this.options.verticalScroll&&!this.iScroll.direction){var u=Math.abs(s/o);(0==o||0==s)&&Math.abs(o+s)<=2?this.iScroll.direction="":this.iScroll.direction=0==o||u>2.747?"vertical":u<.364?"horizontal":"both"}if("vertical"==this.iScroll.direction?(o=0,h<0?(this._scrollTo(0,null),h=this.fingerLeft=0):h>c&&(this._scrollTo(c,null),h=this.fingerLeft=c)):"horizontal"==this.iScroll.direction&&(s=0,l<0?(this._scrollTo(null,0),l=this.fingerTop=0):l>d&&(this._scrollTo(null,d),l=this.fingerTop=d)),this.options.bounce||this.options.overScrollGlow||(0<=h&&h<=c&&(this.fingerLeft=h),0<=l&&l<=d&&(this.fingerTop=l)),h=this.fingerLeft+=o,l=this.fingerTop+=s,this.options.bounce)h<0?(h/=2)<-a/2&&(h=-a/2):h>c&&(h=c+(h-c)/2)>c+a/2&&(h=c+a/2),l<0?(l/=2)<-n/2&&(l=-n/2):l>d&&(l=d+(l-d)/2)>d+n/2&&(l=d+n/2);else if(h<0&&(h=0),h>c&&(h=c),l<0&&(l=0),l>d&&(l=d),this.options.overScrollGlow){if(this.fingerTop<0){WebSquare.style.show(this.dom.overScrollTop);var p=-2*(g=this.dom.overScrollTop.offsetHeight)/n*this.fingerTop-g;p>0&&(p=0),WebSquare.style.setStyle(this.dom.overScrollTop,"top",p+"px")}else WebSquare.style.hide(this.dom.overScrollTop);if(this.fingerTop>d){WebSquare.style.show(this.dom.overScrollBottom);var g,m=-2*(g=this.dom.overScrollBottom.offsetHeight)/n*(d-this.fingerTop)-g;m>0&&(m=0),WebSquare.style.setStyle(this.dom.overScrollBottom,"bottom",m+"px")}else WebSquare.style.hide(this.dom.overScrollBottom)}this._scrollTo(h,l)}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleTouchEnd=function(t){try{this.isTouched=!1;var e=this.iScroll.prevTouches.length;if(0==e)return;var i=this.render.clientWidth,o=this.render.clientHeight,s=this.dom.container.scrollWidth,a=this.dom.container.scrollHeight,n=this.getMaxScrollLeft(),l=this.getMaxScrollTop(),h=this.getScrollLeft(),d=this.getScrollTop(),c=null,u=null,p=null,g=null;if(e>=2){this.iScroll.prevTouches=[this.iScroll.prevTouches[e-2],this.iScroll.prevTouches[e-1]];var m=this.iScroll.prevTouches,f=m[0].x-m[1].x,b=m[0].y-m[1].y;if("vertical"==this.iScroll.direction&&(f=0),"horizontal"==this.iScroll.direction&&(b=0),f*f+b*b>this.options.slideThreshold*this.options.slideThreshold){if(this.iScroll.prevTouches=[],this.isSliding=!0,this.options.paging){
if(this.options.horizontalScroll)(c=(parseInt(h/i,10)+(f>0?1:0))*i)<0&&(c=0),c>n&&(c=n);if(this.options.verticalScroll)(u=(parseInt(d/o,10)+(b>0?1:0))*o)<0&&(u=0),u>l&&(u=l);p=this.options.pagingDuration,g="ease"}else c=h+this.getSlideFactor(f,s),u=d+this.getSlideFactor(b,a),p=this.options.slideDuration,g="deceleration";return this.slide({initX:h,initY:d,finishX:this.options.horizontalScroll?c:null,finishY:this.options.verticalScroll?u:null,duration:p,timingFunction:g}),void(!this.options.bounce&&this.options.overScrollGlow&&(0==d&&u>0||d==l&&u<l)&&this.hideOverScrollGlow())}}if(this.options.paging){if(this.options.horizontalScroll&&!this.options.verticalScroll)c=parseInt((h+i/2)/i,10)*i;else if(!this.options.horizontalScroll&&this.options.verticalScroll){u=parseInt((d+o/2)/o,10)*o}p=this.options.pagingDuration}else p=this.options.resilienceDuration;h<0?c=0:n<h&&(c=n),d<0?u=0:l<d&&(u=l),null!=c||null!=u?(this.iScroll.prevTouches=[],this.isSliding=!0,this.slide({initX:h,initY:d,finishX:c,finishY:u,xResilience:null!=c,yResilience:null!=u,duration:p,timingFunction:"deceleration"})):(this.iScrollRemoveMoveClass(),this.iScroll.prevTouches=[]),this.hideOverScrollGlow()}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleMouseOut=function(t){null==a.f.getRelatedTarget(t)&&this.handleTouchEnd(t)},d.prototype.finalize=function(){s.I.clearTimer(this.id+"_checkResize"),s.I.clearTimer(this.id+"_iScroll_slide"),s.I.clearTimer(this.id+"_handleTouchMove"),s.I.clearTimer(this.id+"_hideOverScrollGlowWithGlow"),s.I.clearTimer(this.id+"_hideOverScrollGlow"),s.I.clearTimer(this.id+"_iScrollRemoveClass"),WebSquare.dragdrop2.scrollable[this.uuid]=null,delete WebSquare.dragdrop2.scrollable[this.uuid]}},7610:function(t,e,i){"use strict";i.r(e),i.d(e,{selectbox:function(){return c},selectbox_native:function(){return u}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(7455),d=i(4860),c=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(c.prototype,l.q.prototype),o.q.extend(c.prototype,h.t.prototype),o.q.extend(c.prototype,d.G.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"component",mobileRenderType:"",serializable:!0,userEvents:["onchange","onclose","onviewchange","onblur","ontooltipshow","ontooltiphide","onselected","onbeforeselect"],systemEvents:["onclick","ondblclick","onfocus","onblur","onkeydown","onkeyup"],useOtherComponentId:"",useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",wmode:!1,visibleRowNum:5,displayMode:"0",delimiter:"\t",textAlign:"",defaultStyle:"",activeStyle:"",defaultClass:"w2SelectDefault",activeClass:"w2SelectActive",disabledClass:"w2selectbox_disabled",useLocale:!1,submenuSize:"auto",direction:"auto",tableRender:"",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipClass:"",tooltipTime:1,tooltipDisplayItem:!1,itemTooltipDisplay:!1,itemTooltipFormatter:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",title:"",setDataRemoveAll:!0,escape:!0,emptyItem:!1,emptyValue:"",emptyIndex:0,optionOrder:"choose",animation:"",closeonmouseleave:!1,selectedData:!0,dataListAutoRefresh:!1,refreshSelectedIndex:!1,preventWheelEvent:!1,customFormatter:"",customLabelFormatter:"",keyMoveListSync:!1,keyMoveSync:!0,wheelRows:0,visibleColumn:"",visibleColumnFalseValue:"0,false,FALSE,F",findItemFirstKey:!0,enableColumn:"",enableColumnFalseValue:"0,false,FALSE,F",depthColumn:"",depthColumnWidth:0,depthColumnHeight:0,depthColumnShowPath:!1,depthColumnPathDelimiter:"-",keyBufferResetTime:1e3,customToggleKey:"",selectByTabKey:!1,preventKeyList:"",valueNotInList:"default"},c.prototype.initialize=function(t){try{if(this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.gridOptions={},this.gridViewOptions={},t){
var e="xf"==t.getTagName().split(":")[0]?s.I._XML_NAMESPACE.XFORMS:s.I._XML_NAMESPACE.W2,i=WebSquare.Elem.api.getElementsByTagName(t,"choices",e)[0];if(i){var o=WebSquare.Elem.api.getElementsByTagName(i,"gridItemset",s.I._XML_NAMESPACE.W2)[0];null==o&&(o=WebSquare.Elem.api.getElementsByTagName(i,"gridViewItemset",s.I._XML_NAMESPACE.W2)[0]),o&&"w2:gridItemset"==o.getTagName()?this.itemTableMode="grid":o&&"w2:gridViewItemset"==o.getTagName()&&(this.itemTableMode="gridView")}else"gridViewItemset"==this.options.itemTableType&&(this.itemTableMode="gridView")}"grid"==this.itemTableMode?this.initializeGridItemArr(t):"gridView"==this.itemTableMode?this.initializeGridViewItemArr(t):this.initializeItemArr(t);var a=n.Z.isMobile();if("ul"!==this.options.tableRender||"auto"==this.options.renderType&&a||(this.options.renderType="component"),this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),this.myhelper=new WebSquare.korHelper,this._preventKeyObj={},this.options.preventKeyList)if("all"===this.options.preventKeyList)this._preventKeyObj.all=!0;else for(var l=this.options.preventKeyList.split(","),h=0;h<l.length;h++){var d=l[h].wq_trim();d&&(this._preventKeyObj[d]=!0)}this.options.itemTooltipDisplay=this.options.tooltipDisplayItem?this.options.tooltipDisplayItem:this.options.itemTooltipDisplay}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._initializeCommon=function(t){try{this.itemTable=null,this.isOpen=!1,this.statusSubLayer=!1,this.selectedIndex=-1,this.selectedAllIndex=-1,this.cursorIndex=-1,this.showRowIndex=0,this.displayCount=0,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.defaultAllOptionLabel=WebSquare.language.getMessage("SelectBox_all");var e=s.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/chooseOptionLabel/@value");this.defaultChooseOptionLabel=t||!t&&"$blank"===e?"":WebSquare.language.getMessage("SelectBox_choose"),this._initDisplayMode(),this.options.selectedData="false"!=this.options.selectedData&&!1!==this.options.selectedData,this.refreshStop=!1,this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.isFireTooltipEvent=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"",67:"",68:"",69:"",70:"",71:"",81:"",82:"",83:"",84:"",86:"",87:"",88:"",90:""},this.korCharHash2={69:"",81:"",82:"",84:"",87:""},this.options.depthColumn&&(this.options.tableRender="ul")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{l.q.prototype.finalize.call(this),this.labelRuler&&(this.labelRuler.parentNode.removeChild(this.labelRuler),this.labelRuler=null),this.itemTable&&(this.itemTable.remove(),this.itemTable=null)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";i=!0===this.options.disabled?"":""===this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";var o=""==this.options.title?"":"title='"+this.options.title+"'",s=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'",a=""==this.options.textAlign?s:"style='text-align:"+this.options.textAlign+";"+this.options.defaultStyle+"'";return"ul"===this.options.tableRender?(t.push("<div id='"+this.id+"' "+e+" class='w2selectbox "+this.options.className+"' "+o+">"),
t.push("<a id='"+this.id+"_main_tbody' class='w2selectbox_ul_table_main' href='#"+this.id+"_itemTable' aria-haspopup='true' aria-expanded='false' onclick='event.returnValue=false; return false;'>"),t.push("<div class='w2selectbox_ul_col_label' "+s+"><span id='"+this.id+"_label' class='w2selectbox_ul_label' "+a+"></span></div>"),t.push("<span class='w2selectbox_ul_col_arrow'></span>"),t.push("</a>"),t.push("</div>")):(t.push("<div id='"+this.id+"' role='combobox' aria-labelledby='"+this.id+"_itemTable' aria-autocomplete='none' "+e+" class='w2selectbox "+this.options.className+"' "+i+" "+o+">"),t.push("<table class='w2selectbox_table_main'>"),t.push("<tbody id='"+this.id+"_main_tbody'>"),t.push("<tr class='w2selectbox_row w2selectbox_row_main'>"),t.push("<td class='w2selectbox_col_label' "+s+"><div id='"+this.id+"_label' role='document' aria-live='assertive' class='w2selectbox_label' "+a+"></div></td>"),t.push("<td class='w2selectbox_col_button' id='"+this.id+"_button'  aria-labelledby='"+this.id+"_itemTable' aria-controls='"+this.id+"_itemTable'></td>"),t.push("</tr></tbody>"),t.push("</table>"),t.push("</div>")),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{this.options.itemTooltipDisplay&&this.options.itemTooltipFormatter&&(this.itemTooltipFormatter=n.Z.getGlobalFunction(this.options.itemTooltipFormatter,this.scope_id)),this.dom.button=this.getElementById(this.id+"_button"),this.dom.label=this.getElementById(this.id+"_label"),this.dom.tbody=this.getElementById(this.id+"_main_tbody"),this.options.useOtherComponentId?s.I.setTimer((function(){this.otherComponent=n.Z.getComponentById(this.options.useOtherComponentId),WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.options.useOtherComponentId,WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.otherComponent.render,"onmousedown",this.event.bindAsEventListener(this.otherComponent,(function(t){a.f.stopPropagation(t)}))),this.otherComponent.hide()}),{key:this.options.useOtherComponentId,caller:this,delay:100}):"grid"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):"gridView"==this.itemTableMode?(WebSquare.getBody().getLayerListener().useOtherComponentId[this.id]=this.id+"_gridViewItemTable",WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openOtherLayer,fnHide:this._closeOtherLayer,paramHide:{documentClick:!0},event:{}})):WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}}),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),n.Z.isTouchDevice()&&(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){a.f.stopPropagation(t)}))),this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,(function(t){1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),this._closeSubLayer()})))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){a.f.stopPropagation(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),
this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),1==this.options.closeonmouseleave&&this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseleaveEvent)),this.modelControl.isItemsetBinded()?(this._refreshItemArr(),this.componentRedraw()):!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex?this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})):this.selectedIndex>0&&this.getItemCount()>0&&(this.modelControl.isBinded()||(this.setSelectedIndexNM(this.selectedIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.onComplete=function(){try{this.options.customFormatter&&(this.customFormatter(),this.setSelectedIndexNM(this.selectedIndex)),l.q.prototype.onComplete.call(this)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.customFormatter=function(){try{var t=null;"grid"===this.itemTableMode||"gridView"===this.itemTableMode||("function"==typeof this.options.customFormatter?t=this.options.customFormatter:null!=(t=n.Z.getGlobalFunction(this.options.customFormatter,this.scope_id))&&(this.options.customFormatter=t),"function"==typeof t&&(this.itemArr=t.call(this,this.itemArr)))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._refreshItemArr=function(){try{this.refreshItemArr(),this.options.customFormatter&&this.completed&&this.customFormatter()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refreshItemset=function(t,e){try{if(this.refreshStop)return;if(this.modelControl.isItemsetBinded())if(this._refreshItemArr(),this.componentRedraw(!1,t,e),"grid"==this.itemTableMode?(this.refreshGridItemArr(),null!=this.itemTable&&null!=this.itemTable.grid?(this.itemTable.grid.clearFilter(),this.setGridData(),this.options.allOption&&this.gridItemArr.length>0&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))):"gridView"==this.itemTableMode&&(this.refreshGridViewItemArr(),null!=this.itemTable&&null!=this.itemTable.gridView?"dataList"===this.gridViewOptions.dataComp.initializeType&&this.setGridViewData():1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue,orgLabel:this.defaultAllOptionLabel}].concat(this.itemArr))),
this.modelControl.isBinded())this.refresh();else{if("auto"==this.options.submenuSize&&this.itemTable&&"grid"!==this.itemTableMode&&"gridView"!==this.itemTableMode&&!0!==this.refreshStopItemTable){var i=this.getMaxLabelSize();this.itemTable.setStyle("width",i+"px")}-1!=this.getSelectedIndex()||null!=this.getValue()&&""!==this.getValue()&&"keepValue"!==this.options.valueNotInList||this.setSelectedIndexNM(0)}this.isOpen&&this.setItemTable(),this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.refresh=function(){try{if(this.refreshStop)return;if(this.modelControl.isBinded()){var t=this.modelControl.getDataComp(),e=this.getItemCount();if(t&&"linkedDataList"===t.initializeType&&(this.options.chooseOption||this.options.allOption)&&(1!=e||this.itemArr[0].label!==this._getChooseOptionLabel()&&this.itemArr[0].label!==this.defaultAllOptionLabel?2==e&&this.itemArr[0].label===this._getChooseOptionLabel()&&this.itemArr[1].label===this.defaultAllOptionLabel&&(e-=2):e--),e>0){this.modelControl.isDataCollectionItemsetBinded&&this._refreshItemArr();var i=this.getValue(),o=this.modelControl.getData(),s=this.setValueNM(o);1==s?(i!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}),null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()),this.broadcast({linkedDataList:["refresh",["replace"]]})):isNaN(s)?null!=this.getValue()&&o!=this.getValue()&&this.modelControl.setData(this.getValue()):this._setValueNotInList(o,!1)}}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.changeChooseOption=function(t,e){try{var i=-2;if(!0===this.options.chooseOption){i=-1;for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value===this.options.chooseOptionValue){i=s;break}i>-1&&this.itemArr.splice(i,1)}this.options.chooseOption=!0,this.options.chooseOptionValue=t,this.options.chooseOptionLabel=e,this.itemArr=[{label:e,value:t}].concat(this.itemArr),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()||this.setSelectedIndex(0)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.showChooseOption=function(t){try{var e=this._getChooseOptionLabel();e=WebSquare.xml.decode(e).replace("&nbsp;"," ");var i=this.options.chooseOptionValue;if(1==t)this.options.chooseOption!=t&&("all"==this.options.optionOrder&&1==this.options.allOption?this.itemArr.splice(1,0,{label:e,value:i}):this.itemArr=[{label:e,value:i}].concat(this.itemArr));else if(this.options.chooseOptions!=t)for(var o=0;o<this.itemArr.length;o++)if(this.itemArr[o].label==e){this.itemArr.splice(o,1);break}this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),-2!==this.getSelectedIndex()&&-1!==this.getSelectedIndex()&&0!==this.getSelectedIndex()||this.setSelectedIndex(0),this.options.chooseOption=t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.componentRedraw=function(t,e,i){try{if(this.refreshStop)return;if(this.showRowIndex=0,!0===this.options.labelWidthAuto&&this.setLabelWidthByItemLength(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&this.setSelectOptions(),this.itemArr.length>0){var o=0;if(e||this.options.refreshSelectedIndex&&"insertRow"===i)return"insertRow"!==i&&"replace"!=e&&this.getSelectedIndex()>-1&&(o=this.getSelectedIndex()),void(this.itemArr[o]?this.setSelectedIndexNM(o):this.setSelectedIndexNM(0))
;if(this.options.refreshSelectedIndex&&"setCellData"===i)o=this.getSelectedIndex();else if(this.modelControl.isItemsetBinded()&&!this.modelControl.isBinded()&&-1!==this.selectedIndex)return void(this.options.emptyItem?this.setSelectedIndexNM(-1):this.setSelectedIndexNM(0));if(this._setLabel(o),this.options.refreshSelectedIndex&&"setCellData"===i)return}else this.dom.label&&(this.dom.label.innerHTML="");this.setValueNM("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setLabelWidthByItemLength=function(){try{var t=this.getMaxLabelSize();this.render&&(this.render.style.width=t+"px")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getMaxLabelSize=function(){try{this.labelRuler||(this.labelRuler=document.createElement("div"),this.labelRuler.style.position="absolute",this.labelRuler.style.top="-1000px",this.labelRuler.style.left="-1000px",this.labelRuler.style.visibility="hidden",document.body.appendChild(this.labelRuler));for(var t=0,e=0;e<this.itemArr.length;e++)this.labelRuler.innerHTML=this.itemArr[e].label,this.labelRuler.offsetWidth>t&&(t=this.labelRuler.offsetWidth);var i=document.getElementById(this.id+"_button"),o=0;return i&&(o=i.offsetWidth||parseInt(WebSquare.style.getComputedStyle(i,"width"))),t+o+10}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{var t=this;if(null==this.itemTable){if("grid"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridOptions.width||(this.gridOptions.parentWidth=this.render.offsetWidth),this.gridOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridItemTable(this.id+"_gridItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridOptions:this.gridOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.grid.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.grid.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.grid,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridData();else if("gridView"==this.itemTableMode)"auto"==this.options.submenuSize&&(this.gridViewOptions.width||(this.gridViewOptions.parentWidth=this.render.offsetWidth),this.gridViewOptions.autoFit="allColumn"),this.itemTable=new WebSquare.uiplugin.gridViewItemTable(this.id+"_gridViewItemTable",{itemsetObj:this.itemsetObj,className:this.options.className,gridViewOptions:this.gridViewOptions,visibleRowNum:this.options.visibleRowNum,findItemKor:this.options.findItemKor,findItemFirstKey:this.options.findItemFirstKey,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.gridView.addEvent("oncellclick",(function(e,i){t.focus(),"dataList"===t.gridViewOptions.dataComp.initializeType&&(e=this.getRealRowIndex(e)),t.setSelectedIndex1(e)})),this.event.addListener(this.itemTable.gridView.render,"onkeydown",this.event.bindAsEventListener(this.itemTable.gridView,(function(e){var i=e.charCode?e.charCode:e.keyCode;if(13==i){t.focus();var o=this.getFocusedRowIndex();"dataList"===t.gridViewOptions.dataComp.initializeType&&(o=this.getRealRowIndex(o)),t.setSelectedIndex1(o)}else 27==i&&(t._closeSubLayer(),t.focus())}))),this.setGridViewData();else{if("ul"===this.options.tableRender){var e=this.options.textAlign?"text-align:"+this.options.textAlign+";":"";this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,
style:"position:absolute;",defaultStyle:e+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_ul_main",w2table_row:"w2table_sb_ul_row",w2table_col:"w2table_sb_ul_col",w2table_col_over:this.options.depthColumn?"":"w2table_sb_ul_col_over",escape:this.options.escape,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid,depthColumn:this.options.depthColumn,depthColumnHeight:this.options.depthColumnHeight,depthColumnWidth:this.options.depthColumnWidth})}else this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:this.options.submenuSize,style:"position:absolute;",defaultStyle:"text-align:"+this.options.textAlign+";"+this.options.defaultStyle,className:"w2table "+this.options.className,w2table:"w2table_sb",w2table_main:"w2table_sb_main",w2table_row:"w2table_sb_row",w2table_col:"w2table_sb_col",w2table_col_over:"w2table_sb_col_over",escape:this.options.escape,wheelRows:this.options.wheelRows,chooseOption:this.options.chooseOption,allOption:this.options.allOption,findItemKor:this.options.findItemKor,findItem:this.options.findItem,keyBufferResetTime:this.options.keyBufferResetTime,parent_uuid:this.uuid,depthColumn:this.options.depthColumn,depthColumnHeight:this.options.depthColumnHeight,depthColumnWidth:this.options.depthColumnWidth});this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate(),this.itemTable.addClickEventListener((function(e,i){var o,s=e.charCode?e.charCode:e.keyCode,r=t.selectedIndex,n=t.getValue();if(t.focus(),t.options.depthColumn&&(o={skipClose:!0}),t.setSelectedIndex1(i,o),t.options.keyMoveSync||0!=t.options.keyMoveSync||13!=s||"keydown"!==e.type){var l={oldValue:n,newValue:t.getValue(),oldSelectedIndex:r,newSelectedIndex:t.selectedIndex};a.f.fireEvent(t,"onselected",l)}})),this.itemTable.addKeyDownEventListener((function(e,i){var o=e.charCode?e.charCode:e.keyCode;if(t.options.customToggleKey==o)t._closeSubLayer(),t.focus();else if(t.options.selectByTabKey&&9==o){var s=t.selectedIndex,r=t.getValue();t.focus(),t.setSelectedIndex1(i);var n={oldValue:r,newValue:t.getValue(),oldSelectedIndex:s,newSelectedIndex:t.selectedIndex};a.f.fireEvent(t,"onselected",n),a.f.preventDefault(e)}else"ul"==this.options.tableRender&&t.itemTable.endReached?(t.itemTable.endReached=!1,t.closeSubLayer(),t.focus()):27==o&&(t._closeSubLayer(),t.focus())})),this.options.keyMoveSync||this.itemTable.addKeyUpEventListener((function(e,i){if(13==(e.charCode?e.charCode:e.keyCode)){var o=t.selectedIndex,s=t.getValue();t.focus(),t.setSelectedIndex1(i);var r={oldValue:s,newValue:t.getValue(),oldSelectedIndex:o,newSelectedIndex:t.selectedIndex};a.f.fireEvent(t,"onselected",r)}})),this.options.keyMoveListSync&&this.itemTable.addOnchangeListener((function(e){try{t.setSelectedIndex1(e,{skipClose:!0})}catch(t){r.Y.printStackTrace(t,null,this)}}));var i=WebSquare.idCache[this.uuid],o=this.options.closeonmouseleave,s=this.options.itemTooltipDisplay;(o||s)&&this.itemTable.addMouseLeaveEventListener((function(e){if(o){var r=t.render.offsetHeight,a=t.getAbsolutePosition("top");e.clientY>=a&&e.clientY<=a+r||t.closeSubLayer()}s&&i.hideTooltip()})),s&&this.itemTable.addMouseOverEventListener((function(t){var e=n.Z.getDataPrefix("index"),o=t,s=WebSquare.style.getAbsoluteLeft(o)+20,r=WebSquare.style.getAbsoluteTop(o)+o.offsetHeight+3,a="ul"===i.options.tableRender?o.innerText:o.innerHTML;if(i.itemTooltipFormatter&&"function"==typeof i.itemTooltipFormatter){var l=parseInt(o.getAttribute(e),10);a=i.itemTooltipFormatter(a,l,i.options._rowIndex,i.options._colIndex)}i.showTooltip(s,r,a)})),this.setSelectOptions(),this.setItemTable()}var l=document.getElementById(this.id+"_main_tbody")
;l&&l.setAttribute("aria-controls",this.id+"_itemTable")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setGridData=function(){try{if(this.itemTable.grid.setData(this.gridItemArr),this.options.allOption&&this.gridItemArr.length>0){for(var t=[],e=-1,i=0;i<this.itemsetObj.items.length;i++)-1==e&&this.itemsetObj.items[i].ref==this.itemsetObj.label&&(e=i),t.push("");t[-1==e?0:e]=this.defaultAllOptionLabel,this.itemTable.grid.setRowData(0,t,!1)}if(this.itemsetObj.sortIndex&&this.gridItemArr.length>0){var o=[];if(this.options.allOption){var s=this.itemsetObj.sortIndex.split(" ")[0],a=this.itemTable.grid.getCellInfo(s).options.dataType,n=parseInt(this.itemsetObj.sortOrder.split(" ")[0],10);o[0]=function(t,e,i,o){return 0==i?-1:0==o?1:("number"==a?(t=Number(t),e=Number(e)):(t=t||"",e=e||""),t>e?1*n:t<e?-1*n:0)}}this.itemTable.grid.multisort({sortIndex:this.itemsetObj.sortIndex,sortOrder:this.itemsetObj.sortOrder,sortFuncArr:o})}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setGridViewData=function(){try{var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);if(t.removeAll(),t.setData(this.gridViewOptions.dataComp.getAllFilteredData()),this.options.allOption||this.options.chooseOption){for(var e=[],i=-1,o=0;o<this.itemsetObj.items.length;o++)-1==i&&this.itemsetObj.items[o].ref==this.itemsetObj.label&&(i=t.bodyIdColIndexMap[this.itemsetObj.label]),e.push("");this.options.allOption&&(e[-1==i?0:i]=this.defaultAllOptionLabel,t.setRowData(0,e,!1)),this.options.chooseOption&&(e[-1==i?0:i]=this._getChooseOptionLabel(),t.setRowData(0,e,!1))}for(var s=this.gridViewItemArr.length>0&&this.itemTable.gridView.delayedDrawObj&&this.itemTable.render&&"none"===this.itemTable.render.style.display,a=0;a<this.itemArr.length;a++)this.itemArr[a]._hidden?this.itemTable.gridView.setRowVisible(a,!1):this.itemTable.gridView.setRowVisible(a,!0);s&&this.itemTable.show(),this.itemTable.gridView.notifyDataChanged({keepTop:!0}),s&&this.itemTable.hide()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectOptions=function(){try{null!=this.itemTable&&"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode&&!0!==this.refreshStopItemTable&&this.itemTable.setItemArr(this.itemArr)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setItemTable=function(){try{var t=this.render.offsetWidth,e=document.body.offsetWidth,i=0,o=WebSquare.style.getAbsoluteLeft(this.render),a=WebSquare.style.getAbsoluteTop(this.render),n=this.itemTable.render.getElementsByTagName("td");if("ul"===this.options.tableRender&&(n=this.itemTable.render.getElementsByTagName("li")),this.options.depthColumn);else if(n&&n.length>0){for(var l=this.options.visibleRowNum,h=0,d=0;d<this.itemArr.length&&l>0;d++)this.options.visibleColumn&&this.options.visibleColumnFalseValue&&!0===this.itemArr[d]._hidden||(i+=n[d].offsetHeight,l--,h++);s.I.browserCheck.moz&&i<34&&1===h&&(i=34),this.itemTable.setStyle("height",i+"px")}else this.itemTable.setStyle("height","0px");"auto"==this.itemTable.getStyle("overflow-x")&&(i+=20,this.itemTable.setStyle("height",i+"px"));var c=WebSquare.style.getSize(this.itemTable.render,"outerwidth")-WebSquare.style.getSize(this.itemTable.render,"width");if(this.options.depthColumn);else if("fixed"==this.options.submenuSize)this.itemTable.setStyle("width",t-c+"px"),this.itemTable.render.offsetHeight>=this.itemTable.render.scrollHeight?this.itemTable.render.firstChild.style.width=t+"px":this.itemTable.render.firstChild.style.width=t-17+"px";else if("auto"==this.options.submenuSize){var u,p=this.render.offsetWidth,g=WebSquare.style.getSize(this.itemTable.render,"innerwidth")-WebSquare.style.getSize(this.itemTable.render,"width"),m=this.itemTable.render.clientWidth-g;if(e>p&&e<m&&(m=e-c),m=p-c,this.itemTable.setStyle("width",m+"px"),this.itemTable.render.clientHeight>=this.itemTable.render.scrollHeight||this.getItemCount()<=this.options.visibleRowNum)this.itemTable.render.firstChild.style.width=m+"px",
(u=this.itemTable.render.scrollWidth-c)>m&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+"px"));else this.itemTable.render.firstChild.style.width=m-17+"px",(u=this.itemTable.render.scrollWidth-c)>e&&(u=e-17),u>m-17&&(this.itemTable.render.firstChild.style.width=u+"px",this.itemTable.setStyle("width",u+17+"px"));0===this.getItemCount()&&(this.itemTable.setStyle("width","0px"),this.itemTable.render.firstChild.style.width="0px")}else this.itemTable.render.scrollHeight-this.itemTable.render.offsetHeight>1&&this.itemTable.setStyle("width",this.itemTable.render.firstChild.offsetWidth+17+"px");var f=this.options.direction;if("auto"==f){var b=document.body.scrollTop;b<document.documentElement.scrollTop&&(b=document.documentElement.scrollTop);var y=WebSquare.style.getScale(),v=(a-b)*y,w=document.documentElement.clientHeight-(v+this.render.offsetHeight),S=this.itemTable.render.offsetHeight*y,_=Math.max(w,v);if(_<S&&n&&n.length>0){if(!this.options.depthColumn){var C=0;for(d=0;d<n.length&&!(C+n[d].offsetHeight+2>_);d++)C+=n[d].offsetHeight;this.itemTable.rowCount=d,this.itemTable.setStyle("height",C+"px")}_!==w&&(f="up")}else w<S&&v>S&&(f="up")}if("up"==f?a-=this.itemTable.render.offsetHeight:a+=this.render.offsetHeight,this.options.depthColumn);else if(document.documentElement.clientWidth<o+this.itemTable.render.offsetWidth)(o=o+this.render.offsetWidth-this.itemTable.render.offsetWidth)<0?(o=WebSquare.style.getAbsoluteLeft(this.render),m=document.body.offsetWidth-17-o,this.itemTable.setStyle("width",m+"px"),"auto"!=this.itemTable.getStyle("overflow-x")&&(i+=20),this.itemTable.setStyle("height",i+"px"),this.itemTable.setStyle("overflow-x","auto")):this.itemTable.setStyle("overflow-x","hidden");else{m=this.itemTable.render.firstChild.offsetWidth;var x=this.itemTable.render.clientWidth;if(o+m<e&&"auto"==this.itemTable.getStyle("overflow-x")){var I=m>x?m:x;i-=20,this.itemTable.setStyle("height",i+"px"),this.itemTable.setStyle("width",I+"px"),this.itemTable.setStyle("overflow-x","hidden")}}if(this.itemTableDirection=f,this.itemTable.render.style.left=o+"px",this.itemTable.render.style.top=a+"px",WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable"),this.options.animation&&("slideDown"!==this.options.animation||"up"!==f)){this.getItemCount()<=this.options.visibleRowNum&&this.itemTable.setStyle("overflow-y","hidden");var T="w2"+this.options.animation;this.addClass(this.itemTable.render,T)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectItemArr=function(){try{if(""!=this.options.sortOption){var t=[],e=null;"label"==this.options.sortOption?e=function(){return this.label}:"value"==this.options.sortOption&&(e=function(){return this.value});for(var i=0;i<this.itemArr.length;i++){var o=this.itemArr[i];o.toString=e,t.push(o)}t.sort(),"descending"==this.options.sortMethod&&t.reverse(),this.itemArr=t}for(i=0;i<this.itemArr.length;i++)this.itemArr[i].orgLabel=this.itemArr[i].orgLabel||this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i);if("all"==this.options.optionOrder){if(1==this.options.chooseOption){var s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr))}else if(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption){s=this._getChooseOptionLabel();s=WebSquare.xml.decode(s).replace("&nbsp;"," "),this.itemArr=[{label:s,value:this.options.chooseOptionValue}].concat(this.itemArr)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.openSubLayer=function(){try{
WebSquare.getBody().getLayerListener().show(this.id)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._openSubLayer=function(){try{if(this.setSubLayer(),!this.isOpen){this.itemTable.show(),this.addClass("w2selectbox_open");var t=document.getElementById(this.id+"_main_tbody");t&&t.setAttribute("aria-expanded","true"),this.setItemTable(),1==this.options.wmode&&WebSquare.getBody().showWModeFrame(this.getPluginName(),this.itemTable.render),n.Z.isMobile()||this.itemTable.focus(),"ul"==this.options.tableRender&&(this.itemTable.removeClass(this.itemTable.selectedCell,this.itemTable.options.w2table_col_over),this.itemTable.selectedCell=null),this.options.emptyItem?this.itemTable.setSelectedIndex(this.selectedIndex,{noChangeFunc:!0}):-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex),this.isOpen=!0,this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._openOtherLayer=function(){try{var t=this.otherComponent;if("grid"==this.itemTableMode?(this.setSubLayer(),this.setGridData(),""!==this.gridOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.grid.render.style.height),t=this.itemTable):"gridView"==this.itemTableMode&&(this.setSubLayer(),this.setGridViewData(),""!==this.gridViewOptions.visibleRowNum&&(this.itemTable.render.style.height=this.itemTable.gridView.render.style.height),t=this.itemTable),!this.isOpen){t.setPosition(0,0),t.show(),this.addClass("w2selectbox_open");var e=WebSquare.style.getAbsoluteLeft(this.render),i=WebSquare.style.getAbsoluteTop(this.render),o=this.options.direction;if("auto"==o){var s=document.body.scrollTop;s<document.documentElement.scrollTop&&(s=document.documentElement.scrollTop);var a=i-s,l=document.documentElement.clientHeight-(a+this.render.offsetHeight),h=t.render.offsetHeight;l<h&&a>h&&(o="up")}"up"==o?"gridView"==this.itemTableMode?i-=t.gridView.render.offsetHeight:i-=t.grid.render.offsetHeight:i+=this.render.offsetHeight,"auto"==this.options.submenuSize&&"gridView"==this.itemTableMode&&(e=WebSquare.style.getAbsoluteLeft(this.render),this.gridViewOptions.width||(t.render.style.width=this.render.offsetWidth+"px")),document.documentElement.clientWidth<e+t.render.offsetWidth&&(e=e+this.render.offsetWidth-t.render.offsetWidth),e<0&&(e=0),t.render.style.left=e+"px",t.render.style.top=i+"px",this.isOpen=!0,this.itemTableDirection=o,WebSquare.style.adjustZIndex(this.uuid,t.uuid,"itemTable"),!n.Z.isMobile()&&this.options.findItemFirstKey&&("grid"==this.itemTableMode?t.grid.render.focus():"gridView"==this.itemTableMode&&t.gridView.render.focus())}-1!=this.selectedIndex&&this.itemTable.setSelectedIndex(this.selectedIndex)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.closeSubLayer=function(t){try{var e={documentClick:t};null!=this.itemTable&&("grid"==this.itemTableMode?this.itemTable.grid.applyFocusedCellOut(this.itemTable.grid.focusedCell[0]):"gridView"==this.itemTableMode&&this.itemTable.gridView.applyFocusedCellOut(this.itemTable.gridView.focusedCell[0])),WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._closeSubLayer=function(t){try{var e=(t=t||{}).documentClick;if(this.isOpen&&null!=this.itemTable){this.itemTable.hide(),this.removeClass("w2selectbox_open"),this.itemTable.render.setAttribute("aria-expanded","true"),1==this.options.wmode&&WebSquare.getBody().hideWModeFrame(this.getPluginName(),this.itemTable.id),this.isOpen=!1,this.options.customLabelFormatter&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter&&this._setLabel(this.selectedIndex),!0===e?a.f.fireEvent(this,"onclose",!0):a.f.fireEvent(this,"onclose",!1);var i=document.getElementById(this.id+"_main_tbody")
;i&&i.setAttribute("aria-expanded","false")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._closeOtherLayer=function(t){try{var e=(t=t||{}).documentClick,i=this.otherComponent;"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode||(i=this.itemTable),this.isOpen&&null!=i&&(i.hide(),this.removeClass("w2selectbox_open"),this.isOpen=!1,!0===e?a.f.fireEvent(this,"onclose",!0):a.f.fireEvent(this,"onclose",!1))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setVisibleRowNum=function(t){try{this.options.visibleRowNum=t,this._closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex=function(t,e){try{if(t=parseInt(t,10),isNaN(t))return;if(!1===a.f.fireEvent(this,"onbeforeselect",this.selectedIndex,t))return;if(t<0||t>=this.getItemCount()){if(this.options.emptyItem)if(this.modelControl.isBinded())(1==this.options.selectedData||0!=e)&&this.modelControl.setData(this.options.emptyValue),this.setSelectedIndexNM(-1);else{var i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(-1),-1!=i&&a.f.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}return}if(this.modelControl.isBinded()){var s=this.modelControl.dataCollectionRefInfo?this.modelControl.dataCollectionRefInfo.dataComp:null;1==this.options.selectedData?(this.modelControl.setData(this.itemArr[t].value),null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):0!=e?this.itemArr[t].value!=WebSquare.allValue?(this.modelControl.setData(this.itemArr[t].value),1==this.options.chooseOption&&0==t?this.setSelectedIndexNM(0):null==s||s.getBroadcast()||this.setSelectedIndexNM(t)):(this.modelControl.setData(""),this.setSelectedIndexNM(t)):this.setSelectedIndexNM(-1)}else{i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(t),i!=this.getSelectedIndex()&&a.f.fireEvent(this,"onchange",{oldValue:o,newValue:this.getValue()})}this.broadcast({linkedDataList:["refresh",["replace"]]})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t,10),isNaN(t)?!1:t<0||t>=this.getItemCount()?!!this.options.emptyItem&&(this.selectedIndex=-1,this.dom.label.innerHTML="",this.itemTable&&this.itemTable.setSelectedIndex(0),!0):(this.selectedIndex=t,this._setLabel(t),this.itemTable&&this.render.setAttribute("aria-activedescendant",this.itemTable.id+"_"+t),!0)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAllSelectedIndex=function(t,e){try{if(!this.allItemArr[t])return this.selectedAllIndex=-1,!1;this.selectedIndex=-1,this.selectedAllIndex=t;var i=this.allItemArr[t].label+"";return this.dom.label&&(this.dom.label.innerHTML=this._getLabel(i)),e&&this.modelControl.setData(this.allItemArr[t].value),NaN}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){try{return this.selectedIndex}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedRow=function(){try{if("gridView"==this.itemTableMode&&this.itemTable){var t=this.modelControl.getDataComp(this.itemTable.gridView.options.dataList);if(t)return t.getRowArray(this.getSelectedIndex())}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setValue=function(t){try{var e=!0;if(n.Z.isNull(t))return!1;var i=this.getValue();if(this.modelControl.isBinded())this.modelControl.setData(t);else{i=this.getValue();var o=this.setValueNM(t);1==o?i!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:i,newValue:this.getValue()}):isNaN(o)||(this._setValueNotInList(t),e=!1)}return this.broadcast({linkedDataList:["refresh",["replace"]]}),e}catch(t){return r.Y.printStackTrace(t,null,this),!1}},c.prototype.setValueNM=function(t){try{if(n.Z.isNull(t))return;t=t.toString();for(var e=this.getItemCount(),i=0;i<e;i++)if(this.itemArr[i].value==t)return this.setSelectedIndexNM(i),!0;return this.setAllValue(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAllValue=function(t,e){try{try{
if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}if(n.Z.isNull(t))return!1;t=t.toString();for(var i=this.allItemArr.length,o=0;o<i;o++)if(this.allItemArr[o].value==t)return this.setAllSelectedIndex(o,e);return!1}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._setValueNotInList=function(t,e){try{if("keepValue"===this.options.valueNotInList)if(t)if(this.selectedIndex=-1,null!=this.dom.label.textContent)this.dom.label.textContent=t;else if(null!=this.dom.label.innerText)this.dom.label.innerText=t;else{var i=this._getLabel(t);this.dom.label.innerHTML=i}else this.options.emptyItem?this.setSelectedIndex(-1):this.setSelectedIndex(0);else this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}catch(t){return r.Y.printStackTrace(t,null,this),!1}},c.prototype.getValue=function(){try{if(this.itemArr[this.selectedIndex])return this.itemArr[this.selectedIndex].value;var t=this.getAllValue();return!1!==t?t:this._getValueNotInList()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getAllValue=function(t,e){try{try{if(!this.modelControl.isDataCollectionItemsetBinded||this.modelControl.dataCollectionItemsetInfo.dataComp&&!this.modelControl.dataCollectionItemsetInfo.dataComp.options.validateAllItemsetData)return!1}catch(t){return!1}return!!this.allItemArr[this.selectedAllIndex]&&this.allItemArr[this.selectedAllIndex].value}catch(t){return r.Y.printStackTrace(t,null,this),!1}},c.prototype._getValueNotInList=function(){try{return"keepValue"===this.options.valueNotInList&&(null!=this.dom.label.textContent?this.dom.label.textContent:null!=this.dom.label.innerText?this.dom.label.innerText:this.dom.label.innerHTML)||(this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null)}catch(t){return r.Y.printStackTrace(t,null,this),null}},c.prototype.setText=function(t,e){try{var i=this.getItemCount(),o="";if(e)for(var s=0;s<i;s++)this.itemArr[s].orgLabel==t&&(o=this.itemArr[s].value);else for(s=0;s<i;s++)this.itemArr[s].label==t&&(o=this.itemArr[s].value);this.setValue(o)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getText=function(t){try{return this.itemArr[this.selectedIndex]?t?this.itemArr[this.selectedIndex].orgLabel:this.itemArr[this.selectedIndex].label:this.options.emptyItem&&-1==this.selectedIndex?"":null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItemArr=function(t,e,i){try{!0===i||!1===i?this.itemArr.push({label:t,value:e,_hidden:i}):this.itemArr.push({label:t,value:e})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.addItem=function(t,e,i,o){try{if(i=parseInt(i,10),(isNaN(i)||i<0||i>=this.getItemCount())&&(i=this.getItemCount()),null==o&&(o=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&o){var s=this.modelControl.getDataComp();if(s&&WebSquare.idCache[s.uuid]){var a={};a[this.itemsetObj.value]=t,a[this.itemsetObj.label]=e,this.stopRefresh(!0),s.insertJSON(i,[a]),this.stopRefresh(!1)}}var n={};return n.value=t,n.label=e,this.itemArr.splice(i,0,n),"0"!=this.options.displayMode&&(this.itemArr[i].orgLabel=this.itemArr[i].label,this.itemArr[i].label=this.getItemText(i)),this.options.emptyItem&&-1==this.selectedIndex&&this.setSelectedIndex(0),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),i}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.deleteItem=function(t,e){try{if(t=parseInt(t,10),isNaN(t))return;if(null==e&&(e=this.options.dataListAutoRefresh),this.itemsetObj.nodeset.match("data:")&&e){var i=this.modelControl.getDataComp();if(i&&WebSquare.idCache[i.uuid]){var o=0;this.options.chooseOption&&o++,this.options.allOption&&o++,this.stopRefresh(!0),i.removeRow(t-o),this.stopRefresh(!1)}}
var s=null;return t>=0&&t<this.getItemCount()&&(s=this.itemArr.splice(t,1)[0]),this.itemTable?(this.itemTable.setStyle("visibility","hidden"),this.itemTable.setStyle("display","block"),this.setSelectOptions(this.itemArr),this.itemTable.setStyle("display","none")):this.setSelectOptions(this.itemArr),this.options.emptyItem&&(-1!=this.selectedIndex&&t!=this.selectedIndex||this.setSelectedIndex(0)),this.options.emptyItem&&"native"==this.options.renderType?this.selectedIndex>t&&t>=0?this.setSelectedIndex(this.selectedIndex-1):this.setSelectedIndex(this.selectedIndex):this.selectedIndex>t&&t>=0&&this.setSelectedIndex(this.selectedIndex-1),s}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.removeAll=function(t){try{var e=this.getValue();if(this.itemArr=new Array,t&&(1==this.options.allOption&&(this.itemArr=[{label:this.defaultAllOptionLabel,value:WebSquare.allValue}].concat(this.itemArr)),1==this.options.chooseOption)){var i=this._getChooseOptionLabel();i=WebSquare.xml.decode(i).replace("&nbsp;"," "),this.itemArr=[{label:i,value:this.options.chooseOptionValue}].concat(this.itemArr)}if(this.setSelectOptions(this.itemArr),this.dom.label)if(this.itemArr.length>0){i=this._getLabel(this.itemArr[0].label+"");this.dom.label.innerHTML=i}else this.dom.label.innerHTML="";if(this.options.setDataRemoveAll&&(t?this.setSelectedIndex(0):(this.selectedIndex=-1,!this.dom.label&&this.dom.select&&(this.dom.select.selectedIndex=-1),this.modelControl.isBinded()&&this.modelControl.setData(""),e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()}))),"grid"==this.itemTableMode)this.gridItemArr=[],this.itemTable&&this.itemTable.grid.removeAll();else if("gridView"==this.itemTableMode){if(this.gridViewItemArr=[],this.itemTable)this.modelControl.getDataComp(this.itemTable.gridView.options.dataList).removeAll()}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":"component"==this.options.renderType?e&&this.closeSubLayer():e?this.dom.select&&this.dom.select.setAttribute("disabled","disabled"):this.dom.select&&this.dom.select.removeAttribute("disabled");var i=this.dom.button;1==e?(this.addClass(this.render,this.options.disabledClass),null!=i&&this.addClass(i,"w2selectbox_button_disabled")):(this.removeClass(this.render,this.options.disabledClass),null!=i&&this.removeClass(i,"w2selectbox_button_disabled"));break;case"mandatory":1==e?this.addClass(this.render,"w2selectbox_mandatory"):this.removeClass(this.render,"w2selectbox_mandatory")}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setSelectedIndex1=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.selectedIndex,o=this.getValue();if(this.setSelectedIndex(t),i!=this.selectedIndex){var s={oldValue:o,newValue:this.getValue(),oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.f.fireEvent(this,"onviewchange",s)}!0!==e.skipClose&&this.closeSubLayer()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.validateObject=function(){try{var t=this.validator.validate(this.getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setInitValue=function(t){try{var e=this.getValue();""===this.options.initValue&&this.itemArr&&this.itemArr[0]&&(this.options.initValue=this.itemArr[0].value),this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hide=function(){try{this.closeSubLayer(),
l.q.prototype.hide.call(this)}catch(t){r.Y.printStackTrace(t)}},c.prototype.showTooltip=function(t,e,i){try{if(!i)return;null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o="";this.options.itemTooltipDisplay&&(o="position:absolute;z-index:10000;");var l=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var h=s.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(h){var d=n.Z.getGlobalFunction(h,l.scope_id),c=!0;if("function"==typeof d&&(c=d(l)),!c)return}}catch(t){r.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2selectbox_tooltip "+this.options.tooltipClass,style:o}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,a.f.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),a.f.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{if(this.options.disabled)return!1;n.Z.isMobile()||this.focus(),this.itemArr.length>0?this.toggle():1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();if(!0===this._preventKeyObj[e]||!0===this._preventKeyObj.all)return;if(13==e&&this.options.keyMoveSync)return void this.handleClickEvent(t);if(this.options.customToggleKey==e)return void this.toggle();if(this.isOpen)return;if(!this.options.keyMoveSync||38!=e&&40!=e&&33!=e&&34!=e&&35!=e&&36!=e)return 9==e?(this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)))):(this.findItemStartedWithKeyChar(t,e),void(this.options.findItem&&this._keyBuffer&&(n.Z.clearTimeout(this.id+"_selectKeyBuffer"),n.Z.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}))));if(this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==e)i>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(i-1),this.targetFocusedIndex=i-1):this.setSelectedIndex1(i-1));else if(40==e)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?i+1<this.getItemCount()&&(this.setSelectedIndex1(i+1),this.targetFocusedIndex=i+1):i+1<this.getItemCount()&&this.setSelectedIndex1(i+1);else if(33==e){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i-this.options.visibleRowNum)<0&&(o=0),this.setSelectedIndex1(o)}else if(34==e){var o;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o),this.targetFocusedIndex=o;else(o=i+this.options.visibleRowNum)>=this.getItemCount()&&(o=this.getItemCount()-1),this.setSelectedIndex1(o)
}else 35==e?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndex1(this.getItemCount()-1):36==e&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndex1(0),this.targetFocusedIndex=0):this.setSelectedIndex1(0));if(this._oldIndex!=this.selectedIndex){var s={oldValue:this._oldValue,newValue:this.getValue(),oldSelectedIndex:this._oldIndex,newSelectedIndex:this.selectedIndex};a.f.fireEvent(this,"onselected",s)}a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleKeyupEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode;if(!0===this._preventKeyObj[i]||!0===this._preventKeyObj.all)return;if(!this.options.keyMoveSync&&this.modelControl.isBinded()){var o=this.getSelectedIndex();if(13==i){for(var s=this.modelControl.getData(),l=-1,h=0;h<this.itemArr.length;h++)if(this.itemArr[h].value==s){l=h;break}var d={oldValue:s,newValue:this.getValue(),oldSelectedIndex:l,newSelectedIndex:o};this.setSelectedIndex(this.getSelectedIndex()),a.f.fireEvent(this,"onselected",d)}else if(38==i||40==i||33==i||34==i||35==i||36==i)if(this._onSelected=!1,this._oldIndex=this.selectedIndex,this._oldValue=this.getValue(),38==i)o>0&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(o-1),this.targetFocusedIndex=o-1):this.setSelectedIndexNM(o-1));else if(40==i)"grid"==this.itemTableMode||"gridView"==this.itemTableMode?o+1<this.getItemCount()&&(this.setSelectedIndexNM(o+1),this.targetFocusedIndex=o+1):o+1<this.getItemCount()&&this.setSelectedIndexNM(o+1);else if(33==i){if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(c=o-this.options.visibleRowNum)<0&&(c=0),this.setSelectedIndexNM(c),this.targetFocusedIndex=c;else(c=o-this.options.visibleRowNum)<0&&(c=0),this.setSelectedIndexNM(c)}else if(34==i){var c;if("grid"==this.itemTableMode||"gridView"==this.itemTableMode)(c=o+this.options.visibleRowNum)>=this.getItemCount()&&(c=this.getItemCount()-1),this.setSelectedIndexNM(c),this.targetFocusedIndex=c;else(c=o+this.options.visibleRowNum)>=this.getItemCount()&&(c=this.getItemCount()-1),this.setSelectedIndexNM(c)}else 35==i?"grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(this.getItemCount()-1),this.targetFocusedIndex=this.getItemCount()-1):this.setSelectedIndexNM(this.getItemCount()-1):36==i&&("grid"==this.itemTableMode||"gridView"==this.itemTableMode?(this.setSelectedIndexNM(0),this.targetFocusedIndex=0):this.setSelectedIndexNM(0))}if(9==i||13==i&&this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMousewheelEvent=function(t){try{if(this.options.preventWheelEvent)return;a.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox_focus")&&!this.isOpen){var i=this.getSelectedIndex();t.wheelDelta>0||t.detail<0?this.setSelectedIndex1(i-1):this.setSelectedIndex1(i+1)}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleFocusEvent=function(t){try{a.f.stopEvent(t),this.addClass(this.dom.tbody,"w2selectbox_focus"),this.addClass("w2selectbox_body_focus")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleBlurEvent=function(t){try{a.f.stopEvent(t),this.removeClass(this.dom.tbody,"w2selectbox_focus"),this.removeClass("w2selectbox_body_focus"),this.itemTable&&this.itemTable.itemTableFocus||a.f.fireEvent(this,"onblur",t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoverEvent=function(t){try{if(a.f.stopEvent(t),
this.addClass(this.dom.tbody,"w2selectbox_over"),this.addClass("w2selectbox_body_over"),!this.isOpen){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2selectbox")&&(1==this.options.tooltipDisplay||1==this.options.tooltipShowAlways)){var i=e.getElement(),o=this.options.depthColumn?"w2selectbox_ul_label":"w2selectbox_label",s=i.getElementsByClassName(o)[0],n=WebSquare.style.getStyle(s,"text-overflow"),l=this.dom.label.innerHTML;if(!0===this.options.tooltipShowAlways){var h=WebSquare.style.getAbsoluteLeft(i)+20,d=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;this.showTooltip(h,d,l)}else if("ellipsis"==n){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=s.className,this.toolTipRuler.innerHTML=s.innerText,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(s,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(s,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(s,"font-weight");var c=this.toolTipRuler.offsetWidth,u=s.clientWidth;if(3!=s.nodeType){var p=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),g=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");c-=parseInt(p||"0",10),c-=parseInt(g||"0",10),u-=parseInt(WebSquare.style.getStyle(s,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(s,"padding-right"),10),u-=parseInt(WebSquare.style.getStyle(i,"padding-left"),10),u-=parseInt(WebSquare.style.getStyle(i,"padding-right"),10)}if(u<c){h=WebSquare.style.getAbsoluteLeft(i)+20,d=WebSquare.style.getAbsoluteTop(i)+this.render.offsetHeight+3;document.body.removeChild(this.toolTipRuler),this.options.tooltipItemLabel&&(l=this.options.tooltipItemLabel),this.showTooltip(h,d,l)}}}e=null}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),1!=this.options.tooltipDisplay&&1!=this.options.tooltipShowAlways||this.hideTooltip(),this.removeClass(this.dom.tbody,"w2selectbox_over"),this.removeClass("w2selectbox_body_over")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseleaveEvent=function(t){try{var e=this.render.offsetHeight-1,i=this.render.offsetWidth-1,o=this.getAbsolutePosition("top"),s=this.getAbsolutePosition("left");this.isOpen&&("up"==this.itemTableDirection?(t.clientX<s||t.clientX>s+i||t.clientY>o||t.clinetY>o+e)&&this.closeSubLayer():(t.clientX<s||t.clientX>s+i||t.clientY<o||t.clinetY>o+e)&&this.closeSubLayer())}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.findItemStartedWithKeyChar=function(t,e){try{var i=this.keyCharHash[e],o=-1;if(i){var s=this.korCharHash[e],a=this.korCharHash2[e],l=this.selectedIndex;this.options.findItem?(this._keyBuffer+=i,l=0):(this._keyBuffer=i,l++);for(var h=1;;)if(l%=this.itemArr.length,!0!==this.itemArr[l]._hidden){var d=this.itemArr[l].label.toLowerCase();if(0!=l||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=l&&1!=l||!0!==this.options.chooseOption||!0!==this.options.allOption){var c=!1;s&&!t.shiftKey?c=this.myhelper.startWith(d,s):a&&t.shiftKey&&(c=this.myhelper.startWith(d,a));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&n.Z.getBoolean(this.options.findItemKor)){o=l;break}if(d.startsWith(u)){this._keyBuffer="",o=l;break}if(h>this.itemArr.length)break;l++,h++}else{if(this.itemArr.length<=2)break;l++}else{if(this.itemArr.length<=1)break;l++}}else l++;if(o>-1)return this.setSelectedIndex1(o),!0}if(-1==o)return this._keyBuffer="",!1}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setRef=function(t){try{"string"==typeof t&&t.length>0&&(this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh())}catch(t){r.Y.printStackTrace(t)}},
c.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},c.prototype._setLabel=function(t,e){try{if(!this.dom.label||t<0||t>=this.getItemCount())return;var i=e&&e.skipCustomFormatter;if(t<0||t>=this.getItemCount())return;var o=this.itemArr[t].label+"";if(this.options.customLabelFormatter&&!0!==i&&(this.customLabelFormatter=n.Z.getGlobalFunction(this.options.customLabelFormatter,this.scope_id)),"function"==typeof this.customLabelFormatter){var s=this.itemArr[t].value+"",a=this.itemArr[t].orgLabel+"";(0!=t||!0!==this.options.chooseOption&&!0!==this.options.allOption)&&(0!=t&&1!=t||!0!==this.options.chooseOption||!0!==this.options.allOption)&&(o=this.customLabelFormatter.call(this,a,s,this.isOpen))}else{if(this.options.depthColumn&&this.options.depthColumnShowPath){for(var l=[o],h=this.itemArr[t]._depth,d=t-1;d>=0;d--){var c=this.itemArr[d]._depth;if(c<h&&(l.unshift(this.itemArr[d].label),(h=c)<=1))break}o=l.join(this.options.depthColumnPathDelimiter)}o=this._getLabel(o)}this.dom.label.innerHTML=o}catch(t){r.Y.printStackTrace(t)}},c.prototype._getLabel=function(t){try{var e=t;return n.Z.isIE()&&parseInt(s.I.browserVersion(),10)<10?(e.indexOf("&")>-1&&(e=e.wq_replaceAll("&","&amp;")),e=this.options.escape?WebSquare.xml._encode(e):e.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;")):this.options.escape&&(e=WebSquare.xml._encode(e)),e}catch(t){r.Y.printStackTrace(t)}},c.prototype.setDisplayMode=function(t){try{if("label"==t||"value"==t||"value delim label"==t||"label delim value"==t){var e=this.options.displayMode;this.options.displayMode=t,this._initDisplayMode(),e!=this.options.displayMode&&this._refreshItemTable()}}catch(t){r.Y.printStackTrace(t)}},c.prototype.setDelimiter=function(t){try{this.options.delimiter!=t&&(this.options.delimiter=t||"\t","0"!=this.options.displayMode&&"3"!=this.options.displayMode&&this._refreshItemTable())}catch(t){r.Y.printStackTrace(t)}},c.prototype._refreshItemTable=function(){try{if(this.isOpen&&this.closeSubLayer(),this.setSelectItemArr(),"grid"!=this.itemTableMode&&"gridView"!=this.itemTableMode)if(this.itemTable)this.itemTable.setItemArr(this.itemArr);else if("native"===this.options.renderType){var t=this.getSelectedIndex();this.componentRedraw(),this.setSelectedIndexNM(t)}this._setLabel(this.getSelectedIndex())}catch(t){r.Y.printStackTrace(t)}},c.prototype._getChooseOptionLabel=function(t){try{var e;if("$blank"===this.options.chooseOptionLabel)e="";else if(e=this.options.chooseOptionLabel||this.defaultChooseOptionLabel,this.options.useLocale&&this.options.chooseOptionLabelLocaleRef){var i=this.getLocaleValue(this.options.chooseOptionLabelLocaleRef);i&&(e=i)}return e}catch(t){r.Y.printStackTrace(t)}},c.prototype.stopRefresh=function(t){try{this.refreshStop=n.Z.getBoolean(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.stopRefreshItemTable=function(t){try{this.refreshStopItemTable=n.Z.getBoolean(t)}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.focus=function(){"ul"==this.options.tableRender?this.dom.tbody.focus():this.render.focus()},c.prototype.setDisabled=function(t){try{t=n.Z.getBoolean(t),this.options.disabled=t,this.setProperty("disabled",t),!0===t?this.render.removeAttribute("tabIndex"):this.render.setAttribute("tabIndex",this.options.tabIndex||0)}catch(t){r.Y.printStackTrace(t)}return t},c.prototype.serialize=function(){return{selectedIndex:this.getSelectedIndex()}},c.prototype.restore=function(t){this.setSelectedIndex(t.selectedIndex)};var u=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(u.prototype,c.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.selectbox",pluginName:"selectbox",renderType:"native",userEvents:["onchange","onclose","onviewchange","onfocus"],useConfig:!0,value:"",chooseOption:!1,chooseOptionLabel:"",chooseOptionValue:"",allOption:!1,sortOption:"",sortMethod:"",displayMode:"0",delimiter:"\t",textAlign:"",
useLocale:!1,disabledClass:"w2selectbox_disabled",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,labelWidthAuto:!1,initValue:"",dataListAutoRefresh:!1,refreshSelectedIndex:!1,title:"",emptyItem:!1,emptyValue:"",emptyIndex:0,findItem:!1,initStyle:!1},u.prototype.initialize=function(t){try{this._initializeCommon(t&&"$blank"==t.getAttribute("chooseOptionLabel")),this.initializeItemArr(t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.finalize=function(){l.q.prototype.finalize.call(this)},u.prototype.toHTML=function(){try{var t=[],e=this.options.style?"style='"+this.options.style+"'":"",i=this.options.title?"title='"+this.options.title+"'":"";if("select"==this.options.renderType){var o=this.options.textAlign?"style='text-align:"+this.options.textAlign+";"+this.options.style+"'":e;t.push("<select id='"+this.id+"' "+o+" class='w2selectbox_select "+this.options.className+"' "+i+">");for(var s=0;s<this.itemArr.length;s++)t.push("<option>"+this.itemArr[s].label+"</option>");t.push("</select>")}else{var a=this.options.textAlign?"style='text-align:"+this.options.textAlign+"'":"";t.push("<div id='"+this.id+"' "+e+" class='w2selectbox_native "+(n.Z.isMobile()?"w2selectbox_native_mobile ":"")+(this.options.labelWidthAuto?"":"fixedWidth ")+this.options.className+"'>"),t.push("<div class='w2selectbox_native_innerDiv'>"),t.push("<select class='w2selectbox_native_select' id='"+this.id+"_input_0' "+i+a+">");for(s=0;s<this.itemArr.length;s++)t.push("<option>"+this.itemArr[s].label+"</option>");t.push("</select>"),t.push("</div>"),t.push("</div>")}return t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setPreAction=function(){try{if(this.dom.select="select"==this.options.renderType?this.render:this.render.firstChild.firstChild,!(n.Z.isIE(6)||n.Z.isIE(7))&&"native"==this.options.renderType){var t=this.render.clientHeight-this.dom.select.offsetHeight;t>0&&(this.dom.select.style.marginTop=parseInt(t/2,10)+"px")}!0===this.options.labelWidthAuto&&(this.render.style.width=""),this.modelControl.isItemsetBinded()&&(this._refreshItemArr(),this.componentRedraw())}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.modelControl.isBinded()){var i=this.modelControl.getData();this.setValueNM(i)}if(-1==this.selectedIndex&&this.getItemCount()>0&&(0==this.options.emptyIndex||!this.options.emptyIndex))if(this.modelControl.isBinded()){i=this.getValue();if(this.options.emptyRef){for(var o=this.getItemCount(),s=0;s<o;s++)if(this.itemArr[s].value==i){this.setSelectedIndexNM(0),this.modelControl.setData(i);break}}else this.setSelectedIndexNM(0),this.modelControl.setData(i)}else this.setSelectedIndexNM(0),this.broadcast({linkedDataList:["refresh",["replace"]]});else if(this.getItemCount()>0&&this.modelControl.isBinded()&&(0==this.options.emptyIndex||!this.options.emptyIndex)){i=this.getValue();this.modelControl.getData()!==i&&this.modelControl.setData(i)}else this.options.emptyIndex&&"number"==typeof this.options.emptyIndex&&(this.modelControl.isBinded()?(this.setSelectedIndexNM(this.options.emptyIndex),this.modelControl.setData(this.getValue())):(this.setSelectedIndexNM(this.options.emptyIndex),this.broadcast({linkedDataList:["refresh",["replace"]]})));this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),this.event.addListener2(this.dom.select,"onchange",this.event.bindAsEventListener(this,this.handleOnchange)),this.event.addListener(this.dom.select,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),
this.event.addListener(this.dom.select,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.dom.select,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.select,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent))}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.componentRedraw=function(t,e,i){try{if(this.refreshStop)return;this.showRowIndex=0;var o=0;if(this.options.refreshSelectedIndex&&"setCellData"===i&&(o=this.getSelectedIndex()),this.setSelectOptions(),this.itemArr.length>0){if(this.options.refreshSelectedIndex&&"setCellData"===i)return void this.setSelectedIndexNM(o);if(e||"insertRow"===i){var s=0;return"insertRow"!==i&&"replace"!=e&&this.getSelectedIndex()>-1&&(s=this.getSelectedIndex()),this.dom.select.selectedIndex=s,void(this.selectedIndex=s)}this.dom.select.selectedIndex=0,this.selectedIndex=0}this.setValueNM("")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.refreshVisible=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._hidden&&this.dom.select?this.dom.select.options[t].style.display="none":this.dom.select.options[t].style.display=""}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.refreshEnable=function(){try{for(var t=0;t<this.itemArr.length;t++)!0===this.itemArr[t]._disabled&&this.dom.select?this.dom.select.options[t].setAttribute("disabled",""):this.dom.select.options[t].removeAttribute("disabled")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setSelectOptions=function(){try{for(var t=this.dom.select.options.length;t>=0;t--)this.dom.select.remove(t);for(t=0;t<this.itemArr.length;t++){var e=document.createElement("option");e.text=this.itemArr[t].label,this.dom.select.options[t]=e,!0===this.itemArr[t]._hidden&&(this.dom.select.options[t].style.display="none"),!0===this.itemArr[t]._disabled&&this.dom.select.options[t].setAttribute("disabled","")}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setSelectedIndexNM=function(t){try{return t=parseInt(t),!this.options.emptyItem&&(isNaN(t)||t<0||t>=this.getItemCount())?!1:(this.selectedIndex=t,this.dom.select&&(this.dom.select.selectedIndex=t),this.broadcast({linkedDataList:["refresh",["replace"]]}),!0)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleOnchange=function(t){var e=this.dom.select.selectedIndex,i=this.getSelectedIndex(),o=this.getValue();this.setSelectedIndexNM(e),this.options.emptyItem&&-1==e?this.modelControl.setData(this.options.emptyValue):this.modelControl.setData(this.itemArr[e].value);var s=this.getValue();if(this.selectedIndex=e,i!=this.getSelectedIndex()){a.f.fireEvent(this,"onchange",{oldValue:o,newValue:s});var r={oldValue:o,newValue:s,oldSelectedIndex:i,newSelectedIndex:this.selectedIndex};a.f.fireEvent(this,"onviewchange",r)}},u.prototype.handleKeydownEvent=function(t){try{if(9==(t.charCode?t.charCode:t.keyCode))return this.tabOrderMoveStart=!1,void(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,a.f.preventDefault(t)))}catch(t){r.Y.printStackTrace(t)}},u.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleBlurEvent=function(t){try{a.f.fireEvent(this,"onblur")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleFocusEvent=function(t){a.f.fireEvent(this,"onfocus")},u.prototype.focus=function(){
this.dom.select.focus()},u.prototype.setDisabled=function(t){try{t=n.Z.getBoolean(t),this.options.disabled=t,this.onPropertyChange("disabled",t)}catch(t){r.Y.printStackTrace(t)}return t},u.prototype._getValueNotInList=function(){try{return this.options.valueNotInList,this.options.emptyItem&&-1==this.selectedIndex?this.options.emptyValue:null}catch(t){return r.Y.printStackTrace(t,null,this),null}},u.prototype._setValueNotInList=function(t,e){try{this.options.valueNotInList,this.options.emptyItem?this.setSelectedIndex(-1,e):this.setSelectedIndex(0,e)}catch(t){return r.Y.printStackTrace(t,null,this),!1}}},5600:function(t,e,i){"use strict";i.r(e),i.d(e,{span:function(){return h}});var o=i(5461),s=i(5375),r=i(8971),a=i(1204),n=i(2256),l=i(2406),h=function(t,e,i){l.q.call(this,t,e,i),this.options.tagname="span"};o.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={pluginType:"uiplugin.span",pluginName:"span",parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",tagname:"span",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:""},h.prototype.htmlStr=["<",""," id='","","' ",""," class='w2span ","","' ","",">","","</","",">"],h.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2span ","","'",""," />"],h.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}t&&t.getAttribute("escape");this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1},h.prototype.toHTML=function(){s.I._scopeOption(this,"for");var t="";if(s.I.getEmptyTag()[this.options.tagname.toLowerCase()])(t=this.htmlClosingStr)[1]=this.options.tagname,t[3]=this.id,t[5]=""==this.options.style?"":" style='"+this.options.style+"'",t[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",t[7]=this.options.className,t[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();else{(t=this.htmlStr)[1]=this.options.tagname,t[3]=this.id,t[5]=""==this.options.style?"":"style='"+this.options.style+"'",t[5]+=""==this.options.tabIndex?"":" tabIndex='"+this.options.tabIndex+"'",t[7]=this.options.className,t[9]=("label"==this.options.tagname?" for='"+this.options.for+"'":"")+this.getAttributesString();var e=""
;e=this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label+"")):this.formatter.format(this.options.label),t[11]=e,t[13]=this.options.tagname}return t.join("")},h.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=a.Z.getGlobalFunction(this.options.escapeFormatter,this.scope_id);"function"==typeof t&&(this.options.escapeFormatter=t,this.useEscapeFormatter=!0)}}catch(t){n.v.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),l.q.prototype.onComplete.call(this)},h.prototype.setAction=function(){try{if(this.refresh(),this.displayLocaleValue(),"label"!=this.options.tagname||""==this.options.for)return;s.I._scopeOptionApply(this,"for")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.Y.printStackTrace(t)}},h.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.Y.printStackTrace(t)}},h.prototype.addClass=function(){try{l.q.prototype.addClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.removeClass=function(){try{l.q.prototype.removeClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.changeClass=function(){try{l.q.prototype.changeClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.toggleClass=function(){try{l.q.prototype.toggleClass.apply(this,arguments)}catch(t){
r.Y.printStackTrace(t,null,this)}},h.prototype.getAttributeNode=function(t){try{return l.q.attributes.getAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},h.prototype.setAttributeNode=function(t,e){try{l.q.attributes.setAttributeNode.call(this,t,e)}catch(t){r.Y.printStackTrace(t)}},h.prototype.removeAttributeNode=function(t){try{l.q.attributes.removeAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},h.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},h.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},h.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.Y.printStackTrace(t)}}},6050:function(t,e,i){"use strict";i.r(e),i.d(e,{spinner:function(){return l}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2406),l=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(l.prototype,n.q.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.spinner",pluginName:"spinner",userEvents:["onDownButtonClick","onUpButtonClick","onviewchange","oneditkeyup","oneditenter","oneditfull"],useConfig:!0,buttonPosition:"horizon",buttonSize:30,spinnerClass:"type1",maxValue:"",minValue:"",maxYear:2030,minYear:1978,dataType:"number",dataTypeTimeSecond:!1,increment:1,dateIncrementType:"day",initValue:"",inputReadOnly:!1,ioFormat:"yyyyMMdd",ioFormatter:"",displayFormat:"",displayFormatter:"",dateMask:"yyyy/MM/dd",timeSecMask:"HH:mm:ss",timeMask:"HH:mm",title:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",positionFix:!1,autoFocus:!1,nextTabByEnter:!1,useAlert:!0},l.prototype.initialize=function(t){var e=this.options.style,i=this.options.readOnly;if(this.options.style=this.options.positionFix?"height:100%;":"position:absolute;width:0px;height:100%",this.options.readOnly=this.options.inputReadOnly,"date"===this.options.dataType&&!0===this.options.autoFocus&&("day"==this.options.dateIncrementType?this.options.maxByteLength=8:"month"==this.options.dateIncrementType?this.options.maxByteLength=6:"hour"==this.options.dateIncrementType?this.options.maxByteLength=10:"minute"==this.options.dateIncrementType?this.options.maxByteLength=12:"year"==this.options.dateIncrementType&&(this.options.maxByteLength=4)),this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":"day"==this.options.dateIncrementType?this.options.displayFormat=this.options.dateMask:"month"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM":"hour"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH":"minute"==this.options.dateIncrementType?this.options.displayFormat="yyyy/MM/dd HH:mm":"year"==this.options.dateIncrementType&&(this.options.displayFormat="yyyy");break;case"time":this.options.dataTypeTimeSecond?this.options.displayFormat=this.options.timeSecMask:"hour"==this.options.dateIncrementType||"minute"==this.options.dateIncrementType?this.options.displayFormat=this.options.timeMask:"second"==this.options.dateIncrementType&&(this.options.displayFormat=this.options.timeSecMask);break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,
this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}"month"==this.options.dateIncrementType?this.options.ioFormat="yyyyMM":"hour"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHH":"minute"==this.options.dateIncrementType?this.options.ioFormat="yyyyMMddHHmm":"year"==this.options.dateIncrementType&&(this.options.ioFormat="yyyy"),"time"==this.options.dataType&&(this.options.ioFormat="HHmmss");var s=this.options.nextTabID;this.options.nextTabID=null,"number"===this.options.dataType&&(this.options.max&&""!=this.options.max&&!isNaN(Number(this.options.max))&&(this.options.maxValue=this.options.max),this.options.min&&""!=this.options.min&&!isNaN(Number(this.options.min))&&(this.options.minValue=this.options.min),this.options.initValue&&!isNaN(Number(this.options.initValue))&&(this.options.minValue&&Number(this.options.minValue)>Number(this.options.initValue)&&(this.options.initValue=this.options.minValue),this.options.maxValue&&Number(this.options.maxValue)<Number(this.options.initValue)&&(this.options.initValue=this.options.maxValue)));var n=o.q.extend({},this.options),l=this.id+"___input";n.id=l,delete n._scope_obj_org_id,delete n._scope_obj_uuid,delete n._scope_obj_runtime_id,this.input=new WebSquare.uiplugin.input(l,n,t),this.input.options.useAlert=this.options.useAlert,this.input._childFlag=!0;var h=this.uuid;this.input.handleBlurEventBasic=function(t){if(!this.getReadOnly()||this.options.readOnlyFocusEvent){r.f.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this.setValue(this.getValue());var e=WebSquare.historyManager.get(this.options.pluginName,this.id);if(void 0===e.value&&(e.value=this.originalValue),e.value!=this.getValue()){var i=WebSquare.idCache[h];r.f.fireEvent(i,"onchange"),r.f.fireEvent(i,"onviewchange",{oldValue:e.value,newValue:this.getValue()})}if(("date"==this.options.dataType||"time"==this.options.dataType)&&null!=this.options.dateIncrementType&&""!==this.getValue())if(void 0===WebSquare.date.dateTimeAdd(this.getValue(),0,this.options.dateIncrementType,this.options.dataType,this.options.dataTypeTimeSecond,{useAlert:this.options.useAlert}))if(!0===this.options.autoFocus&&!1!==this.options.useAlert&&"year"!==this.options.dateIncrementType){var o=this;setTimeout((function(){o.focus()}),1)}else this.blur();r.f.fireEvent(this,"onblur",t),r.f.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),a.Z.isIEAllVersion()||a.Z.isOpera()||r.f.fireEvent(this,"onfocusout",t)}},this.options.nextTabID=s,this.options.style=e,this.options.readOnly=i,this.addControl(this.input),this.modelControl.ref=this.options.ref,this.input.modelControl.id=this.id,this.input.modelControl.scope_uuid=this.options._scope_obj_uuid,this.options.skin&&""!=this.options.skin&&(this.options.spinnerClass=this.options.skin)},l.prototype.toHTML=function(){try{
var t=this.isGridCellComponent?"w2grid_spinner_up_start":"w2spinner_up_start",e=this.isGridCellComponent?"w2grid_spinner_up_center":"w2spinner_up_center",i=this.isGridCellComponent?"w2grid_spinner_up_end":"w2spinner_up_end",o=this.isGridCellComponent?"w2grid_spinner_up_image":"w2spinner_up_image",r=this.isGridCellComponent?"w2grid_spinner_down_start":"w2spinner_down_start",a=this.isGridCellComponent?"w2grid_spinner_down_center":"w2spinner_down_center",n=this.isGridCellComponent?"w2grid_spinner_down_end":"w2spinner_down_end",l=this.isGridCellComponent?"w2grid_spinner_down_image":"w2spinner_down_image",h=[],d="",c=""==this.options.style?"":"style='"+this.options.style+"'";if(d="vertical"==this.options.buttonPosition?"w2_vertical ":"w2_horizon ",d+=this.options.spinnerClass+" ",this.options.positionFix){var u="type2"==this.options.skin?"w2spinner_pos_fix ":"";h.push("<div id='"+this.id+"' "+c+" class='w2spinner w2spinner_pos_fix_alignment "+d+this.options.className+"'>"),"type1"==this.options.skin&&(h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_btnArea' class='w2spinner_btnArea' style='width:"+this.options.buttonSize+"px' >")),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up "+u+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),"type2"==this.options.skin&&h.push(this.getChild(this.id+"___input").toHTML()),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down "+u+"' style='width:"+this.options.buttonSize+"px;' >"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),"type1"==this.options.skin&&h.push("</div>"),h.push("</div>")}else h.push("<div id='"+this.id+"' "+c+" class='w2spinner "+d+this.options.className+"'>"),h.push("<div id='"+this.id+"_upButton' class='w2spinner_up'>"),h.push("<div class='"+t+"'></div>"),h.push("<div class='"+e+"'></div>"),h.push("<div class='"+i+"'></div>"),h.push("<div id='"+this.id+"_upButton_image' class='"+o+"'></div>"),h.push("</div>"),h.push("<div id='"+this.id+"_downButton' class='w2spinner_down'>"),h.push("<div class='"+r+"'></div>"),h.push("<div class='"+a+"'></div>"),h.push("<div class='"+n+"'></div>"),h.push("<div id='"+this.id+"_downButton_image' class='"+l+"'></div>"),h.push("</div>"),h.push(this.getChild(this.id+"___input").toHTML()),h.push("</div>");return h.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.input.render.setAttribute("role","spinbutton"),this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),"date"==this.options.dataType){this.dateValidator=null,this.input.validator.addCommand(new WebSquare.validator.dateCommand(this.options.ioFormat)),this.options.validateOnInput||this.input.validator.addCommand(new WebSquare.validator.ignoreCharCommand(" -/:-~"));var t;if(t=this.options.ioFormat.length,this.input.validator.addCommand(new WebSquare.validator.maxLengthCommand(t)),this.input.validator.addCommand(new WebSquare.validator.minLengthCommand(t)),this.validMesssage=WebSquare.language.getMessage("IC_invalidCalendarSelect"),null==this.validMesssage||""==this.validMesssage){var e=WebSquare.language.getMessage("V_error_date")||"Invalid date format";this.validMesssage=e}}this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMousewheelEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),"number"==this.options.dataType&&(this._setAria(),
this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this._setAria))),this.options.positionFix?this._adjustAlignment():this.setInputStyle(),this.options.inputReadOnly&&this.input.bind("onmousedown",(function(t){r.f.preventDefault(t)}))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype._setAria=function(){try{var t=this.input._getValue(),e=this.getDisplayValue();this.input.render.value?this.input.render.setAttribute("aria-valuenow",t):this.input.render.setAttribute("aria-valuenow",0),this.options.max&&this.input.render.setAttribute("aria-valuemax",this.options.max),this.options.min&&this.input.render.setAttribute("aria-valuemin",this.options.min),t!==e?this.input.render.setAttribute("aria-valuetext",e):this.input.render.removeAttribute("aria-valuetext")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setSize=function(t,e){try{n.q.prototype.setSize.call(this,t,e),this.setInputStyle()}catch(t){s.Y.printStackTrace(t)}},l.prototype.setValue=function(t){try{this.input.setValue(t),"number"==this.options.dataType&&this._setAria()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.refreshItemset=function(){},l.prototype.refresh=function(){},l.prototype.setInputStyle=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0};var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth,e=this.input.originalStyleObj.paddingTop+this.input.originalStyleObj.paddingBottom+this.input.originalStyleObj.borderTopWidth+this.input.originalStyleObj.borderBottomWidth,i=this.render.clientWidth||parseInt(this.render.style.width,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"width"),10),o=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10);if("vertical"==this.options.buttonPosition){var r=this.render.clientHeight-e-this.options.buttonSize;r<0&&(r=0),this.input.setStyle("width",this.render.clientWidth+"px"),this.input.setStyle("height",r+"px")}else{var a=this.options.buttonSize;"horizon"==this.options.buttonPosition&&"type2"==this.options.skin&&(a*=2);var n=i-t-a;n<0&&(n=0),this.input.setStyle("width",n+"px"),this.input.setStyle("height",o+"px")}this.input.render.offsetHeight>0&&this.setStyle("height",this.input.render.offsetHeight+"px"),this.input.setVerticalAlign()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype._adjustAlignment=function(){try{this.input.originalStyleObj={paddingTop:parseInt(this.input.getStyle("padding-top"))||0,paddingBottom:parseInt(this.input.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.input.getStyle("padding-left"))||0,paddingRight:parseInt(this.input.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.input.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.input.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.input.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.input.getStyle("border-right-width"))||0};var t=this.input.originalStyleObj.paddingLeft+this.input.originalStyleObj.paddingRight+this.input.originalStyleObj.borderLeftWidth+this.input.originalStyleObj.borderRightWidth;"type2"==this.options.skin&&(t+=this.input.options.buttonSize,this.input.setStyle("left","0")),this.input.setStyle("height",this.render.offsetHeight+"px"),
this.input.setStyle("width",this.render.clientWidth-t-this.options.buttonSize+"px")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleClickEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2spinner_up")){this.upButtonClick();break}if(e.match("w2spinner_down")){this.downButtonClick();break}}e=null},l.prototype.handleMousewheelEvent=function(t){try{r.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2spinner")){if(t.wheelDelta>0||t.detail<0){this.upButtonClick();break}this.downButtonClick();break}e=null}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=!0;if(9!=e&&13!=e||(i=r.f.fireEvent(this,"oneditenter",t)),9==e||13==e&&!0===this.options.nextTabByEnter)for(var o=this.event.getTargetIterator(t,this.render);o.next();){var n;if(o.match("w2input"))if(!1!==i)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(r.f.preventDefault(t),n=a.Z.getPreTabbableComp(this.id))return void n.focus(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(r.f.preventDefault(t),n=a.Z.getNextTabbableComp(this.id))return void n.focus(t)}else 38==e?this.upButtonClick():40==e&&this.downButtonClick()}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.focus=function(t){try{this.input.focus(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.upButtonClick=function(){if(0!=r.f.fireEvent(this,"onUpButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=a.Z.setPrecision(Number(this.getValue())+Number(this.options.increment)),o=Number(this.getValue());this.options.maxValue?i<=e?this.options.minValue&&i<t&&(i=t):i=e:this.options.minValue&&i<t&&(i=t)}this.setValue(i),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType||"month"==this.options.dateIncrementType){var s="";s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.downButtonClick=function(){if(0!=r.f.fireEvent(this,"onDownButtonClick"))if("number"==this.options.dataType){if(""==this.getValue())i=1,this.options.minValue&&(i=this.options.minValue);else{var t=Number(this.options.minValue),e=Number(this.options.maxValue),i=a.Z.setPrecision(Number(this.getValue())-Number(this.options.increment)),o=Number(this.getValue());this.options.minValue?i>=t?this.options.maxValue&&i>e&&(i=e):i=t:this.options.maxValue&&i>e&&(i=e)}this.setValue(i),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("date"==this.options.dataType)if("day"==this.options.dateIncrementType){var s="";s=8==this.options.ioFormat.length?this.calcurateDate(this.getValue(),-1*this.options.increment,"day",this.options.dataType):this.calcurateDate(this.getValue(),-1*this.options.increment,"month",this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else{s=""
;s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}else if("time"==this.options.dataType){s="";s=this.calcurateDate(this.getValue(),-1*this.options.increment,this.options.dateIncrementType,this.options.dataType);o=this.getValue(),i=s;this.setValue(s),o!=i&&r.f.fireEvent(this,"onviewchange",{oldValue:o,newValue:i})}},l.prototype.calcurateDate=function(t,e,i,o){var s=parseInt(t.substring(0,4),10),r=parseInt(t.substring(4,6),10),a="",n=WebSquare.date.getMaxMinYear(),l=n.maxYear,h=n.minYear;return e=parseInt(e,10),8==t.length&&(a=parseInt(t.substring(6,8),10)),"day"==i?(t=WebSquare.date.dateAdd(t,e,{useAlert:this.options.useAlert}),isNaN(t)&&(t=""),t):"day"==this.options.dateIncrementType||"month"==i?6!=t.length?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_month_ShouldBeyyMMFormat",t)),t):s>l||s<h?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_YearRange",h,l,s)),s):r>12||r<1?(!1!==this.options.useAlert&&alert(WebSquare.language.getMessage("E_date_MonthRange","1","12",r)),r):((r+=e)>12?(s+=parseInt(r/12),r=parseInt(r%12)):r<0?(s-=parseInt(-1*r/12)+1,r=12-parseInt(-1*r%12)):0==r&&(s-=1,r=12),r<10&&(r="0"+r),a?(a<10&&(a="0"+a),s+""+r+a):s+""+r):t=WebSquare.date.dateTimeAdd(t,e,i,o,this.options.dataTypeTimeSecond)},l.prototype.setDisabled=function(t){try{t=a.Z.getBoolean(t),t=n.q.prototype.setDisabled.call(this,t),this.input.setDisabled(t)}catch(t){s.Y.printStackTrace(t)}return t},l.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)e?this.addClass(this.render,"w2spinner_disabled"):this.removeClass(this.render,"w2spinner_disabled")}catch(t){s.Y.printStackTrace(t,null,this)}},l.apiExtend=function(){var t=WebSquare.uiplugin.input.prototype,e=WebSquare.uiplugin.spinner.prototype;for(var i in t)e[i]||(e[i]=function(t){return function(){return this.input[t].apply(this.input,arguments)}}(i));e.refresh=function(){return this.input.refresh.apply(this.input,arguments)}},l.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove()}catch(t){s.Y.printStackTrace(t,null,this)}},l._initImport=function(){l.apiExtend()},o.q._initImportList.push("uiplugin.spinner")},152:function(t,e,i){"use strict";i.r(e),i.d(e,{content:function(){return f},tabControl:function(){return m}});var o=i(467),s=i(4756),r=i.n(s),a=i(5461),n=i(5375),l=i(8971),h=i(2338),d=i(1204),c=i(2256),u=i(2406),p=i(1304),g=i(8926),m=function(t,e,i){u.q.call(this,t,e,i)};a.q.extend(m.prototype,u.q.prototype),m.prototype.defaultOptions={pluginType:"uiplugin.tabControl",pluginName:"tabControl",userEvents:["ontabclick","onchange","ontabclose","onbeforeselect","onbeforetabclose","onbeforetabmove","onaftertabmove","ondrawcomplete","ontabload","ontabsplit","onscrollleftbtnclick","onscrollrightbtnclick","onsubmenubtnclick"],useConfig:!0,selectedIndex:0,containerClass:"w2tabcontrol_container",hostClass:"w2tabcontrol_tabhost",tabPosition:"",tabClass:"",tabStyle:"",activeTabClass:"w2tabcontrol_active",overTabClass:"w2tabcontrol_over",disabledTabClass:"w2tabcontrol_disabled",contentsClass:"w2tabcontrol_contents",selectedClass:"w2tabcontrol_selected",alwaysDraw:!1,useTabKeyOnly:!1,useMoveNextTabFocus:!1,useBackbridge:!1,useH3Bridge:!1,useConfirmMessage:!1,confirmTrueAction:"exist",confirmFalseAction:"new",confirmMessage:"",confirmMessageLocaleRef:"",tabScroll:!1,mobileTabScroll:!1,adjustTabScroll:!1,visibleRowNum:5,closable:!1,alwaysShowCloseBtn:!1,useBridgeHelper:!0,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,windowMaxNum:-1,tabScrollAuto:!1,focusOnStart:!0,useDrag:!1,preventTabClickEvent:!1,useLocale:!1,localeRef:"",hiddenTab:!1,useATagBtn:!1,tabMove:!1,tabSplit:!1,initStyle:!1,useAccessibilityMenu:!1,forceChildCompEnabled:!1,tableRender:"",removeBridge:!1,spaAuto:!1,spaAutoDelay:3e3,
onTabLoadCheckTime:100,closeAllBtn:!1,processMsgFrame:!1,frameModal:!1,changeActiveTab:!1,keepDisabledTab:!1,senseReader:!1,tabRole:!0,tabLiRole:"",changeActiveTabBeforeselect:!1,tooltipClass:"",noUseTitle:!1,useTitleTooltip:!1,useTabTitleSelected:!1,accessibility:!1,tabScrollDiv:!1,useBridge:!1,escape:!1,removeContentsTabIndex:!1};var f=function(){};f.prototype.defaultOptions={alwaysDraw:!1,src:"",style:"",frameMode:"",name:"",title:"",scope:!1,tabHTML:"",initScript:"",postScript:"",frameModal:"",processMsgFrame:"",msaName:"",scopeInherit:"",resizeEvent:!1,adaptiveFrame:!1},m.prototype.initialize=function(t){try{this.selectedIndex=0,this.tabArr=[],this.contentsArr=[],this.tabContentOptions=WebSquare.uiplugin.content.prototype.defaultOptions,this.focusedIndex=-1,this.activeFirstTime=!1,this.increaseKey=0,this.visibleTabIndex=0,this.itemTable=null,this.isOpen=!1,this.itemTableTdMargin=null,this.senseReaderMode=!0,this.bridgeIdArr=[],this.backbridgeIdArr=[],this.lastEventType="",this.storedFrame=[],this.autoNum=0;var e=n.I.getConfiguration("/WebSquare/tabControl/escape/@value");if(t.getAttribute("escape")?this.options.escape="true"===t.getAttribute("escape"):this.options.escape="true"===e,this.options.iframeStorageCount&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeStorageCount),this.options.iframeMaxSize&&!this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.iframeMaxSize),this.options.iframeMinSize&&!this.options.spaIframeMinSize&&(this.options.spaIframeMinSize=this.options.iframeMinSize),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==n.I.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),d.Z.getBoolean(this.options.useATagBtn)&&d.Z.getBoolean(this.options.closable)?this.options.useATagBtn=!0:this.options.useATagBtn=!1,0==this.options.forceChildCompEnabled&&(this.options.forceChildCompEnabled=n.I.getConfiguration("/WebSquare/tabControl/forceChildCompEnabled/@value")||!1),null==t)return;this._initializeIScroll(),this.disabledTabStack=[],this.disabledComponents={},this.tabArr=this.makeTabArray(t,this.options),this.contentsArr=this.makeTabContentsArray(t,this.tabContentOptions,this.tabArr),this.initAllContents(),this.options.changeActiveTab&&(this.options.tabScroll=!0),!this.options.tabScroll||"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||(this.options.tabScroll=!1),this.tooltip=null,!0!==this.options.useTabKeyOnly&&"layout"!=this.options.adaptive||(this.options.useBridge=!0),!0===this.options.accessibility&&(this.options.useAccessibilityMenu=!0,this.options.senseReader=!0,this.options.useTabKeyOnly=!1,this.options.tableRender="ul",this.options.tabScrollDiv=!0,this.options.useBridge=!0,this.options.useMoveNextTabFocus=!1,this.options.changeActiveTab=!0,this.options.useATagBtn=!0,this.options.tabScroll=!0),this._splitInfo={}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.initContents=function(t){try{var e,i,o=this.options._scope_obj_uuid,s=null==o?null:WebSquare.idCache[o],r=t.contentsID;null!=s&&(r=this.options._scope_obj_org_id+t.contentsID.slice(this.id.length));var a,h=!0,c=d.Z.getBoolean(t.scope)||d.Z.getBoolean(n.I.getConfiguration("/WebSquare/wframe/scope/@value"));switch(t.frameMode){case"iframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",name:t.name,title:t.title,spa:this.options.spa,pluginName:"iframe",msaName:t.msaName};break;case"wframe":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:c,pluginName:"wframe",
processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1,msaName:t.msaName,scopeInherit:t.scopeInherit||"",resizeEvent:t.resizeEvent||!1,adaptiveFrame:t.adaptiveFrame||!1},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;case"wframePreload":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:c,pluginName:"wframe",src:t.src,preload:!0,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1,msaName:t.msaName,scopeInherit:t.scopeInherit||"",resizeEvent:t.resizeEvent||!1},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;case"pageFrame":e={className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",scope:c,pluginName:"pageFrame",src:t.src,preload:!0,processMsgFrame:t.processMsgFrame||!1!==t.processMsgFrame&&this.options.processMsgFrame||!1,frameModal:t.frameModal||!1!==t.frameModal&&this.options.frameModal||!1,msaName:t.msaName},t.initScript&&(e.initScript=t.initScript),t.postScript&&(e.postScript=t.postScript);break;default:h=!1,(i=t.xml).setAttribute("className","w2tabcontrol_contents_wrapper")}return a=i&&"json"===i._elementType?p.o.createByJSON(r+"_body",null,i._element,s,o,h):p.o.create(r+"_body",e,i,s,o,h),t.dataObject&&a.setDataObject(t.dataObject),a}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.initAllContents=function(){try{for(var t,e,i=0;i<this.contentsArr.length;i++)t=this.contentsArr[i],e=this.initContents(t),this.addControl(e)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeTabContentsArray=function(t,e,i){try{if(null==i||i.length<1)return[];for(var o=[],s={},r=t.getChildNodes(),n=[],h=0;h<r.length;h++)"w2:content"===r[h].getTagName()&&n.push(r[h]);for(h=0;h<i.length;h++){var c=h<n.length?n[h]:null;null==c||1!=c.getNodeType()||"w2:content"!=c.getTagName()?(c=null,s={}):s=WebSquare.WebSquareparser.parseAttribute(c);var u=null==c||null==c.getAttribute("id")?this.id+"_contents_"+h:this.id+"_contents_"+c.getAttribute("id");i[h].contentsID=u,s.alwaysDraw?s.alwaysDraw=d.Z.getBoolean(s.alwaysDraw):0==s.alwaysDraw||(s.alwaysDraw=this.options.alwaysDraw);var p=a.q.extend({contentsID:u,contentsClass:s.contentsClass||this.options.contentsClass,src:s.src||e.src,frameMode:null!=s.src&&""!=s.src?s.frameMode||e.frameMode:"",alwaysDraw:s.alwaysDraw,render:null,xml:c,name:s.name||"",title:s.title,scope:s.scope||e.scope,scopeInherit:s.scopeInherit||e.scopeInherit,resizeEvent:s.resizeEvent||e.resizeEvent,adaptiveFrame:s.adaptiveFrame},s||{});null!=p.src&&""!=p.src&&""==p.frameMode&&(p.frameMode="wframe"),o.push(p)}return o}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeTabArray=function(t,e){try{if(null==t)return[];for(var i=[],o=!1,s=0,r=t.getChildNodes(),a=0;a<r.length;a++){var n=r[a];if(1==n.getNodeType()&&"w2:tabs"==n.getTagName()){if(s++,-1!=this.options.windowMaxNum&&s>this.options.windowMaxNum){alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum));break}var h=n.getAttribute("id"),c=this.id+"_tab_"+(null==h?a:h),u=WebSquare.WebSquareparser.parseAttribute(n);if(void 0===u.label&&(u.label=""),("true"==u.useLocale||this.options.useLocale&&"false"!=u.useLocale)&&u.localeRef){var p=this.getLocaleValue(u.localeRef);p&&(u.label=p)}1==this.options.useATagBtn&&(o=!0);var g={tabID:c,userTabID:h,contentsID:"",tabLabel:u.label,disabled:"true"==u.disabled,render:null,tabWidth:parseInt(u.tabWidth,10)>0?parseInt(u.tabWidth,10):this.options.tabWidth,tabGap:parseInt(u.tabGap,10)>0?parseInt(u.tabGap,10):this.options.tabGap,tabHeight:parseInt(u.tabHeight,10)>0?parseInt(u.tabHeight,10):this.options.tabHeight,tabClass:u.className||this.options.tabClass,tabStyle:u.style||this.options.tabStyle,activeTabClass:u.activeTabClass||this.options.activeTabClass,
disabledTabClass:u.disabledTabClass||this.options.disabledTabClass,selectedClass:u.selectedClass||this.options.selectedClass,selectedImage:u.selectedImage?"url("+u.selectedImage+")":"",defaultImage:u.defaultImage?"url("+u.defaultImage+")":"",hoverImage:u.hoverImage?"url("+u.hoverImage+")":"",tabType:"image"==u.tabType?"image":"text",defaultClass:u.defaultClass||"",hoverClass:u.hoverClass||"",closable:null!=u.closable?d.Z.getBoolean(u.closable):this.options.closable,hiddenTab:1==d.Z.getBoolean(u.hiddenTab),closeBtn:null,label:u.label,value:c,title:u.title||u.label,tabHTML:u.tabHTML,useATagBtn:1==d.Z.getBoolean(u.useATagBtn)||o};"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof g.tabStyle&&g.tabStyle.indexOf("width")<0&&(g.tabStyle="width:"+15*g.label.length+"px;"+g.tabStyle),i.push(g)}}return i}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.toHTML=function(){try{var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";switch(this.options.tabPosition){case"top":i="w2tabcontrol_top ";break;case"bottom":i="w2tabcontrol_bottom ";break;case"left":i="w2tabcontrol_left ";break;case"right":i="w2tabcontrol_right "}var o="";this.options.tabScrollDiv&&(o="w2tabcontrol_tabscrolldiv "),t.push("<div id='"+this.id+"' "+e+" class='w2tabcontrol "+i+o+this.options.className+"'>"),"bottom"==this.options.tabPosition&&t.push(this.makeAllContentsHTML());var s="",r="",a="";!0!==this.options.noUseTitle&&(s="title='"+WebSquare.language.getMessage("TabControl_previous_tab")+"'",r="title='"+WebSquare.language.getMessage("TabControl_next_tab")+"'",a="title='"+WebSquare.language.getMessage("TabControl_tab_list")+"'");var n="",h="",c="";return c=this.options.useAccessibilityMenu?"<button type='button' id='"+this.id+"_btn_submenu' "+a+" class='w2tabcontrol_control btn_submenu' aria-controls='"+this.id+"_itemTable' aria-expanded='false'></button>":"<div id='"+this.id+"_btn_submenu' class='w2tabcontrol_control btn_submenu' "+a+" tabindex='-1'></div>",this.options.tabScroll&&!d.Z.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("<div id='"+this.id+"_control' class='w2tabcontrol_control'>"),n=this.options.useAccessibilityMenu?"<button type='button' "+s+" id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft'></button>":"<div id='"+this.id+"_btn_scrollLeft' class='w2tabcontrol_control btn_scrollLeft' "+s+" tabindex='-1'></div>",!0!==this.options.tabScrollDiv&&t.push(n),t.push("<div id='"+this.id+"_mask' class='"+o+"w2tabcontrol_control mask'>"),t.push("<div id='"+this.id+"_scroll' class='w2tabcontrol_control scroll'>")):d.Z.isMobile()&&this.options.mobileTabScroll&&t.push("<div id='"+this.id+"_mobiletabscroll' class='w2tabcontrol_mobiletabscroll'>"),t.push(this.makeAllTabHTML()),this.options.tabScroll&&!d.Z.isMobile()||this.options.tabScroll&&!this.options.mobileTabScroll?(t.push("</div>"),t.push("</div>"),h=this.options.useAccessibilityMenu?"<button type='button' id='"+this.id+"_btn_scrollRight' "+r+" class='w2tabcontrol_control btn_scrollRight'></button>":"<div id='"+this.id+"_btn_scrollRight' class='w2tabcontrol_control btn_scrollRight' "+r+" tabindex='-1'></div>",!0!==this.options.tabScrollDiv&&(t.push(h),t.push(c)),t.push("</div>")):d.Z.isMobile()&&this.options.mobileTabScroll&&t.push("</div>"),"bottom"!=this.options.tabPosition&&t.push(this.makeAllContentsHTML()),!0===this.options.tabScrollDiv&&(t.push("<div class='w2tabcontrol_control_right' id='"+this.id+"_control_right'>"),t.push(n),t.push(h),t.push(c),t.push("</div>")),t.push("</div>"),t.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeTextTabHTML=function(t,e,i){try{var o=WebSquare.language.getMessage("TabControl_close")||"Close",s="";switch(this.options.tabPosition){case"top":s=" w2tabcontrol_tabhost_top";break;case"bottom":s=" w2tabcontrol_tabhost_bottom";break;case"left":s=" w2tabcontrol_tabhost_left";break;case"right":s=" w2tabcontrol_tabhost_right"}
var r=this.options.alwaysShowCloseBtn&&t.closable?"style='display: block;' ":"",a=""==o||this.options.noUseTitle?"":'title="'+o+'"',n=["<li id='",null,"'  class='w2tabcontrol_li ",null,"' ",null," "+d.Z.getDataPrefix("index")+"='",null,"' ><div class='w2tabcontrol_tab_center"+s+"' ><a role='tab' id='"+t.tabID+"_tabHTML'",null,null,null,"' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" >",null,"</a></div><div class='w2tabcontrol_tab_left"+s+"'></div><div class='w2tabcontrol_tab_right"+s+"' >","<div id='",null,"' class='w2tabcontrol_tab_close' "+r+a+"></div></div></li>"],h=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");n[1]=t.tabID,n[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?n[3]+=t.defaultClass?" "+t.defaultClass:"":n[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),n[5]=""==h?"":'style="'+h+'"',n[7]=e,""!=this.options.tabLiRole&&(n[4]+=' role="'+this.options.tabLiRole+'"'),!1===this.options.tabRole&&(n[8]="' ><div class='w2tabcontrol_tab_center"+s+"' ><a  id='"+t.tabID+"_tabHTML'"),n[9]=" aria-controls='"+t.contentsID+"'",!0===this.options.tabRole&&(n[9]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false")),0==t.disabled&&(!0===this.options.tabRole?n[10]="' href='":n[10]=" href='",this.options.removeBridge?n[11]="javascript:void(null);":n[11]="#"+t.contentsID+"_bridge");var c=t.title;this.options.useTabTitleSelected&&e===this.options.selectedIndex+1&&(c=WebSquare.language.getMessage("TabControl_selected",c)),n[13]=""==c||this.options.noUseTitle?"":'title="'+c+'"';var u;return u=this.options.escape?WebSquare.xml._encode(t.tabLabel):t.tabLabel,n[15]=u,d.Z.getBoolean(this.options.useATagBtn)&&(n[17]="<a id='",n[19]="' class='w2tabcontrol_tab_close_atag' href='javascript:void(null);' "+r+a+"></a></div></li>"),n[18]=t.tabID+"_close",n.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeImageTabHTML=function(t,e,i){try{var o=this.options.alwaysShowCloseBtn&&t.closable?"style='display: block;' ":"",s=WebSquare.language.getMessage("TabControl_close")||"Close",r=d.Z.getDataPrefix("index"),a=""==s||this.options.noUseTitle?"":'title="'+s+'"',n=["<li id='",null,"' class='w2tabcontrol_li ",null,"' ",null," "+r+"='",null,"'><div  id='"+t.tabID+"_tabHTML' class='w2tabcontrol_tab_center2' ",null," ",null," role='tab' ",null," "+(0==this.options.useTabKeyOnly?"tabindex='-1'":"")+" ></div><div class='w2tabcontrol_tab_left2'></div><div class='w2tabcontrol_tab_right2' >","<div id='",null,"' class='w2tabcontrol_tab_close2' "+o+a+"></div>","</div></li>"],h=(t.tabWidth>0?"width:"+t.tabWidth+"px;":"")+(t.tabHeight>0?"height:"+t.tabHeight+"px;line-height:"+(t.tabHeight-1)+"px;":"")+(t.tabGap>0?"margin-right:"+t.tabGap+"px;":"")+(t.tabStyle?t.tabStyle:"");n[1]=t.tabID,n[3]=" w2tabcontrol_li_"+e+(t.disabled?" "+t.disabledTabClass:"")+(t.tabClass?" "+t.tabClass:""),i||e!==this.options.selectedIndex+1?(n[3]+=t.defaultClass?" "+t.defaultClass:"",n[9]=t.defaultImage?"style='background-image:"+t.defaultImage+";":""):(n[3]+=" "+t.activeTabClass+(t.selectClass?" "+t.selectClass:" "+t.selectedClass),n[9]=t.selectedImage?"style='background-image:"+t.selectedImage+";'":""),n[5]=""==h?"":'style="'+h+'"',n[7]=e;var c=t.title;return this.options.useTabTitleSelected&&e===this.options.selectedIndex+1&&(c=WebSquare.language.getMessage("TabControl_selected",c)),n[11]=""==c||this.options.noUseTitle?"":'title="'+c+'"',n[13]=""==t.contentsID?"":'aria-controls="'+t.contentsID+'"',n[13]+=" aria-selected='"+(e===this.options.selectedIndex+1?"true":"false")+"'",n[16]=t.tabID+"_close",d.Z.getBoolean(this.options.useATagBtn)&&(n[15]="<a id='",n[17]="' class='w2tabcontrol_tab_close2_atag' href='javascript:void(null);' "+o+a+"></a>"),n.join("")}catch(t){
l.Y.printStackTrace(t,null,this)}},m.prototype.makeAllTabHTML=function(){try{var t="";switch(this.options.tabPosition){case"top":t="w2tabcontrol_tabhost_top";break;case"bottom":t="w2tabcontrol_tabhost_bottom";break;case"left":t="w2tabcontrol_tabhost_left";break;case"right":t="w2tabcontrol_tabhost_right"}var e=[];e.push("<ul id='"+this.id+"_tabhost' class='"+this.options.hostClass+" "+t+"' role='tablist' >");for(var i=0;i<this.tabArr.length;i++){var o=this.tabArr[i];this.tabArr[i].hiddenTab&&(o.tabStyle=o.tabStyle+"; display:none; visibility:hidden;");var s="make"+o.tabType.capitalize()+"TabHTML";e.push(this[s](o,i+1))}return e.push("</ul>"),e.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeContentsHTML=function(t,e,i,o,s){try{var r=["<div id='",null,"' class='",null,"' role='tabpanel",null,null,null,"</div>"],a=this.getChild(t.contentsID+"_body"),n="";t.style&&t.style;n=this.contentsArr[this.options.selectedIndex]!==t?"' aria-hidden='true' style='display:none;"+t.style+"'>":"' aria-hidden='false' style='"+t.style+"'>";var h="",c="",u="";if(this.options.useBridge){var p,g=t.title||e;if(this.options.useH3Bridge)h="<h3 id='"+t.contentsID+"_bridge' style='' class='w2tabcontrol_contents_bridge_h3'>"+g+"</h3>",o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge");else!0===this.options.removeBridge?(p=this.options.useBridgeHelper?"<h3 id='"+t.contentsID+"_bridge_helper' style='position:absolute;text-indent : -10000px;height:0px;' class='w2tabcontrol_contents_bridge_helper'>"+g+"</h3>":"",u="' tabIndex='0'",h=p):("string"==typeof g&&(g=g.wq_replaceAll("<br/>"," ").wq_replaceAll("<br>"," ")),p=this.options.useBridgeHelper?"<h3 id='"+t.contentsID+"_bridge_helper' style='position:absolute;text-indent : -10000px;background:none;height:0px;' class='w2tabcontrol_contents_bridge_helper'>"+g+"</h3>":"",h="<a id='"+t.contentsID+"_bridge' class='w2tabcontrol_bridge' href='javascript:void(null);'>"+p+"</a>"),o>=0?this.bridgeIdArr.splice(o,0,t.contentsID+"_bridge"):this.bridgeIdArr.push(t.contentsID+"_bridge")}return this.options.useBackbridge&&(c="<a id='"+t.contentsID+"_backbridge' tabindex='0' title='go back' class='w2tabcontrol_bridge'></a>",o>=0?this.backbridgeIdArr.splice(o,0,t.contentsID+"_backbridge"):this.backbridgeIdArr.push(t.contentsID+"_backbridge")),1==this.options.removeContentsTabIndex&&(u=""),r[1]=t.contentsID,r[3]=t.contentsClass,r[5]=d.Z.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='"+s,r[5]+=u,r[6]=n,r[7]=h,r[7]+=t.alwaysDraw&&!i?a.toHTML():"",r[7]+=c,r.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeAllContentsHTML=function(){try{var t=[];t.push("<div id='"+this.id+"_container' class='"+this.options.containerClass+"'>");for(var e=0;e<this.contentsArr.length;e++){var i=this.contentsArr[e],o=this.tabArr[e],s=this.tabArr[e].tabID+"_tabHTML";t.push(this.makeContentsHTML(i,o.tabLabel,void 0,void 0,s))}return t.push("</div>"),t.join("")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setAdaptive=function(){try{var t,e=this.options.adaptive,i=parseInt(this.options.adaptiveThreshold)||480;"layout"==e&&(t="w2tab_adaptive_layout"),d.Z.isIE()&&parseInt(n.I.browserVersion(),10)<10||(d.Z._getBrowserWidth()<=i?this.hasClass(t)||this.addAdaptive():this.hasClass(t)&&this.removeAdaptive())}catch(t){l.Y.printStackTrace(t)}},m.prototype.setAdaptiveFrame=function(t){try{var e,i=this.options.adaptive,o=parseInt(this.options.adaptiveThreshold)||480;"layout"==i&&(e="w2tab_adaptive_layout"),d.Z.isIE()&&parseInt(n.I.browserVersion(),10)<10||(t&&0<t.newWidth&&t.newWidth<=o?this.hasClass(e)||this.addAdaptive():this.hasClass(e)&&this.removeAdaptive())}catch(t){l.Y.printStackTrace(t)}},m.prototype.addAdaptive=function(){try{var t,e=this.options.adaptive,i=document.getElementById(this.id+"_container");if("layout"==e){t="w2tab_adaptive_layout";var o=i.style.height||i.offsetHeight+"px";if(i.style.height="auto",
i.setAttribute("data-oldHeight",o),"right"===this.options.tabPosition){var s=this.render.offsetWidth-i.offsetLeft-i.offsetWidth||0,r=i.style.right||s+"px";i.setAttribute("data-oldRight",r),i.style.right="0px"}else if("left"===this.options.tabPosition){var a=i.style.left||i.offsetLeft+"px";i.setAttribute("data-oldLeft",a),i.style.left="0px"}else if("top"===this.options.tabPosition){var n=i.style.top||i.offsetTop+"px";i.setAttribute("data-oldTop",n),i.style.top="0px"}}if(this.addClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="none"}catch(t){l.Y.printStackTrace(t)}},m.prototype.removeAdaptive=function(){try{var t,e=this.options.adaptive,i=document.getElementById(this.id+"_container");if("layout"==e&&(t="w2tab_adaptive_layout",i.style.height=i.getAttribute("data-oldHeight"),i.removeAttribute("data-oldHeight"),"right"===this.options.tabPosition?(i.style.right=i.getAttribute("data-oldRight"),i.removeAttribute("data-oldRight")):"left"===this.options.tabPosition?(i.style.left=i.getAttribute("data-oldLeft"),i.removeAttribute("data-oldLeft")):"top"===this.options.tabPosition&&(i.style.top=i.getAttribute("data-oldTop"),i.removeAttribute("data-oldTop"))),this.removeClass(t),this.options.tabScroll)document.getElementById(this.id+"_control").style.display="block"}catch(t){l.Y.printStackTrace(t)}},m.prototype._findParentControl=function(){try{for(var t,e=this.scope_obj;null!=e&&e!==e.scope_obj;e=e.scope_obj)if(e.options.adaptiveFrame){t=e;break}return t}catch(t){l.Y.printStackTrace(t)}},m.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}for(var i=WebSquare.BootLoader.fullViewed||!1,o=d.Z.fullViewed||!1,s=this.getTabHostAndContainer(),r=0;r<this.tabArr.length;r++){var a=this.tabArr[r];a.render=document.getElementById(a.tabID),a.closeBtn=document.getElementById(a.tabID+"_close"),a.contentsRender=document.getElementById(a.contentsID),this.contentsArr[r].render=a.contentsRender;var n=this.contentsArr[r].frameMode;if(1==this.contentsArr[r].alwaysDraw&&("iframe"===n||"wframe"===n||"wframePreload"===n||"pageFrame"===n)){var c=this.getChild(a.contentsID+"_body");c.options&&"wframe"===c.options.pluginName&&(c.options.mode="sync"),this._addTabEvent({uuid:c.uuid,tabID:a.tabID,idx:r,userTabID:a.userTabID}),"wframePreload"!==n&&"pageFrame"!==n&&c.setSrc(this.contentsArr[r].src,this.contentsArr[r].forceReload),"iframe"===n&&d.Z.isIEAllVersion()&&d.Z.setInterval(this.checkLoadEvent,{key:c.id+"_checkLoadEvent",caller:this,args:[c],delay:70})}a.tabHTML&&this.setTabHTML(a.userTabID,a.tabHTML)}if(this.options.tabScroll){WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._openSubLayer,fnHide:this._closeSubLayer,paramHide:{documentClick:!0},event:{}});var u=document.getElementById(this.id+"_btn_submenu");u&&(d.Z.isTouchDevice()&&h.f.addListener(u,"ontouchstart",(function(t){h.f.stopPropagation(t)})),h.f.addListener(u,"onmousedown",(function(t){h.f.stopPropagation(t)})))}d.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTabClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleTabDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),d.Z.isIE(6)&&this.event.addListener(this.render,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent));var p=this;if(!0===this.options.accessibility?(this.event.addListener(s.tabhost,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEventAccessibility)),
this.event.addListener(s.container,"onkeydown",this.event.bindAsEventListener(this,(function(t){if(9===(t.charCode||t.keyCode)&&!0===t.shiftKey)for(var e=p.event.getTargetIterator(t,p.render);e.next();)e.match("w2tabcontrol_bridge")&&e.stop()}))),!0===this.options.tabScroll&&this.event.addListener(document.getElementById(this.id+"_btn_submenu"),"onkeydown",(function(t){9===(t.charCode||t.keyCode)&&t.shiftKey}))):this.options.useTabKeyOnly?(this.event.addListener(s.tabhost,"onfocusin",(function(t){p.lastEventType=t.type})),this.event.addListener(s.tabhost,"onkeydown",(function(t){var e=t.charCode||t.keyCode;9!==e&&13!==e||(p.lastEventType=t.type)})),this.event.addListener(s.tabhost,"onmousedown",(function(t){p.senseReaderMode=!1}))):(this.event.addListener(s.tabhost,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),this.event.addListener(s.container,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyEvent)),1==this.options.useMoveNextTabFocus&&this.event.addListener(s.container,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusInEvent))),d.Z.isTouchDevice()&&(this.event.addListener(s.tabhost,"ontouchstart",this.event.bindAsEventListener(this,this.handleTabMove)),this.event.addListener(s.tabhost,"ontouchmove",this.event.bindAsEventListener(this,this.handleTouchMove))),this.event.addListener(s.tabhost,"onmousedown",this.event.bindAsEventListener(this,this.handleTabMove)),this.options.useBackbridge)for(r=0;r<this.backbridgeIdArr.length;r++){var g=this.getElementById(this.backbridgeIdArr[r]);if(g){!function(t){h.f.addListener(g,"onkeydown",(function(e){13===(e.charCode||e.keyCode)&&p.setFocusedTab(t)}))}(r)}}var m=this.setActiveTab(this.options.selectedIndex);if(this.adjustContentsHeight(),!i&&!o&&"layout"==this.options.adaptive){this.setAdaptive();var f=this._findParentControl();f?f._resizeChildComp.push(this.uuid):this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.setAdaptive))}return this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),m}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.onComplete=function(){this._makeIframeBackground(),u.q.prototype.onComplete.call(this)},m.prototype._makeIframeBackground=function(){try{n.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&n.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.makeIframe=function(){if(WebSquare.uiplugin.iframe){for(var t,e=this.storedFrame.length,i=0;i<this.contentsArr.length;i++)"iframe"==this.contentsArr[i].frameMode&&e++;this.options.spaIframeMinSize>e&&(this._makeIframe(),n.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50}))}else{requires("uiplugin.iframe").then((t=this,function(e,i){t.makeIframe()}))}},m.prototype._makeIframe=function(){try{var t=document.getElementById(this.id+"_container"),e=["<div id='",null,"' class='",this.options.contentsClass,"' role='tabpanel","","' aria-hidden='true' style='display:none'>",null,"</div>"],i=this.uuid+"_iframe_"+this.autoNum++,o=new WebSquare.uiplugin.iframe(i,{className:"w2tabContainer_contents w2tabcontrol_contents_wrapper",style:"width:100%; height:100%;",spa:this.options.spa,src:WebSquare.net.getBlankXML()});e[1]=i,e[5]=d.Z.getBoolean(this.options.removeAriaLabelledby)?"":"' aria-labelledby='",e[7]=o.toHTML();var s=document.createElement("div");s.innerHTML=e.join("");var r=s.removeChild(s.firstChild);t.appendChild(r),o.render=r.firstChild,this.storedFrame.push(o.id),o.activeStatus="active"}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.createFrame=function(t){try{if(-1!=this.options.windowMaxNum&&this.options.windowMaxNum<=this.getTabCount()+this.storedFrame.length)return void c.v.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")")
;void 0!==t&&null!=t||(t={}),(isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length)&&this._makeIframe()}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.addRoundedCornerForIE=function(){try{for(var t=WebSquare.language.getMessage("TabControl_right_corner")||"Right-corner Image",e=WebSquare.language.getMessage("TabControl_left_corner")||"Left-corner Image",i=0;i<this.tabArr.length;i++){var o=this.tabArr[i];if("img"!=o.render.firstChild.nodeName.toLowerCase()){var s=document.createElement("img");s.src=a.q._resourceURI+"uiplugin/tabControl/images/right-top.png",s.className="w2tabcontrol_righttop",s.setAttribute("alt",t),o.render.insertBefore(s,o.render.firstChild),(s=document.createElement("img")).src=a.q._resourceURI+"uiplugin/tabControl/images/left-top.png",s.className="w2tabcontrol_lefttop",s.setAttribute("alt",e),o.render.insertBefore(s,o.render.firstChild),s=null}}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getTabHostAndContainer=function(){try{var t=document.getElementById(this.id+"_tabhost");return{container:document.getElementById(this.id+"_container"),tabhost:t}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.adjustContentsHeight=function(){try{var t=this.getTabHostAndContainer(),e=t.container,i=t.tabhost,o=d.Z.getStyleProperty(this.render,"height");if(this.options.tabScroll&&"auto"!=o&&"0px"!=o){var s=document.getElementById(this.id+"_control");if(parseInt(o,10)==parseInt(d.Z.getStyleProperty(s,"height"),10))return}if(null==o||""==o||"auto"==o||"0px"==o)return;if("%"==(o+"").charAt((o+"").length-1))return;if(!this.options.tabPosition)return;var r=(parseInt(o,10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-bottom"),10)||0),a=(parseInt(d.Z.getStyleProperty(i,"height"),10)||0)+(parseInt(d.Z.getStyleProperty(i,"border-top-width"),10)||0)+(parseInt(d.Z.getStyleProperty(i,"border-bottom-width"),10)||0)+(parseInt(d.Z.getStyleProperty(i,"margin-top"),10)||0)+(parseInt(d.Z.getStyleProperty(i,"margin-bottom"),10)||0);switch(this.options.tabPosition&&(e.style.position="absolute"),this.options.tabPosition){case"top":e.style.height=r-a+"px",e.style.top=i.offsetTop+i.scrollHeight+"px";break;case"bottom":if(e.style.height=r-a+"px",this.options.tabScroll)(s=document.getElementById(this.id+"_control")).style.top=e.offsetTop+e.offsetHeight+"px";else i.style.top=e.offsetTop+e.offsetHeight+"px";break;case"left":for(var n=0,h=[],c=0;c<this.tabArr.length;c++)if(this.tabArr[c].render){var u=WebSquare.style.getSize(this.tabArr[c].render,"width");h.push(u),n=Math.max(u,n)}else h.push(-1);i.style.width=n+"px",i.style.left="0px",e.style.height=r+"px",e.style.left=n+"px",e.style.width="auto",e.style.right="0px";for(c=0;c<h.length;c++)h[c]<n&&(this.tabArr[c].render.style.left=n-h[c]+"px");break;case"right":for(n=0,c=0;c<this.tabArr.length;c++)this.tabArr[c].render&&(n=Math.max(WebSquare.style.getSize(this.tabArr[c].render,"width"),n));i.style.width=n+"px",i.style.right="0px",e.style.height=r+"px",e.style.left="0px",e.style.width="auto",e.style.right=n+"px"}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setClosable=function(t,e){try{if(t=parseInt(t,10),e=e||!1,t<0||t>=this.tabArr.length)return!1;this.tabArr[t].closable=e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setActiveTab=function(){var t=(0,o.A)(r().mark((function t(e,i){var o,s,a,n,c,g,m,f,b,y,v,w,S,_;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=i||{},!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=6;break}return t.abrupt("return",!1);case 6:if(!this.tabArr[e].disabled&&!this.tabArr[e].hidden){t.next=11;break}return(o=this.tabArr[e]).render=document.getElementById(o.tabID),this.removeClass(o.render,o.activeTabClass),t.abrupt("return",!1);case 11:for(this.changeTabhostAccessibility(e),!0===i.showCloseBtn&&this.tabArr[e].closable&&(s=document.getElementById(this.tabArr[e].tabID+"_close"))&&(s.style.display="block"),
"number"==typeof i.hideCloseBtn&&this.tabArr[i.hideCloseBtn].closable&&(s=document.getElementById(this.tabArr[i.hideCloseBtn].tabID+"_close"))&&(s.style.display="none"),a=0;a<this.tabArr.length;a++){if((o=this.tabArr[a]).render=document.getElementById(o.tabID),a!=e){this.removeClass(o.render,o.activeTabClass),o.selectedClass&&this.removeClass(o.render,o.selectedClass),o.defaultClass&&this.addClass(o.render,o.defaultClass),o.contentsRender.style.display="none",o.contentsRender.style.visibility="hidden",o.contentsRender.setAttribute("aria-hidden","true"),this.addClass(o.contentsRender," "),"image"==o.tabType&&((n=o.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=o.defaultImage||n.style[WebSquare.style.camelize("background-image")]);try{null!=(c=this.getChild(o.contentsID+"_body"))&&c.removeClass("w2tabcontrol_contents_wrapper_selected"),this.options.useBridge&&null!=(g=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[a]+"_helper"):document.getElementById(this.bridgeIdArr[a]))&&this.removeClass(g,"w2tabcontrol_contents_bridge_selected");try{null!=c&&"active"===c.activeStatus&&"iframe"===c.options.pluginName&&c.getWindow()&&c.getWindow().WebSquare&&c.getWindow().WebSquare.getBody()&&c.getWindow().WebSquare.getBody().getLayerListener().hideAll()}catch(t){l.Y.crossOrigin({message:t.message,name:"setActiveTab"})}}catch(t){l.Y.printStackTrace(t,null,this)}}0==this.options.useTabKeyOnly&&(m="image"==o.tabType?o.render.getElementsByTagName("div")[0]:o.render.getElementsByTagName("a")[0],a!=e?"a"==m.nodeName.toLowerCase()&&""==m.innerHTML?m.parentNode.setAttribute("tabIndex","-1"):m.setAttribute("tabIndex","-1"):"a"==m.nodeName.toLowerCase()&&""==m.innerHTML?m.parentNode.setAttribute("tabIndex","0"):m.setAttribute("tabIndex","0"))}if(o=this.tabArr[e],f=this.contentsArr[e],this.addClass(o.render,o.activeTabClass),o.defaultClass&&this.removeClass(o.render,o.defaultClass),o.selectedClass&&this.addClass(o.render,o.selectedClass),"image"==o.tabType&&((n=o.render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=o.selectedImage||n.style[WebSquare.style.camelize("background-image")]),f.render.style.display="block",f.render.style.visibility="visible",f.render.setAttribute("aria-hidden","false"),this.addClass(f.render," "),b=this.getChild(o.contentsID+"_body"),this.options.useBridge&&null!=(g=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[e]+"_helper"):document.getElementById(this.bridgeIdArr[e]))&&this.addClass(g,"w2tabcontrol_contents_bridge_selected"),y=WebSquare.BootLoader.fullViewed||!1,v=d.Z.fullViewed||!1,w=this.selectedIndex,this.selectedIndex=e,this.focusedIndex=e,0==f.alwaysDraw&&b.reuseFrame&&!b.loaded&&(b.loaded=!0,this._addTabEvent({uuid:b.uuid,tabID:o.tabID,idx:e,userTabID:o.userTabID}),b.setSrc(f.src,f.forceReload)),0!=f.alwaysDraw||b.reuseFrame){t.next=46;break}if(b.render){t.next=43;break}return t.next=37,p.o.initAsync();case 37:if(null!==b.render){t.next=40;break}return t.next=40,this._setActiveTabAsync(e);case 40:"iframe"===f.frameMode&&d.Z.setInterval(this.checkLoadEvent,{key:b.id+"_checkLoadEvent",caller:this,args:[b,"setActiveTab",o.userTabID],delay:this.options.onTabLoadCheckTime}),t.next=44;break;case 43:y||v||b.refreshAdaptive();case 44:t.next=61;break;case 46:if(1!=f.alwaysDraw){t.next=61;break}if(this.options.useTabKeyOnly||1!=this.options.useMoveNextTabFocus){t.next=59;break}if(!(e<this.tabArr.length-1)){t.next=59;break}S=!1,a=0;case 51:if(!(a<f.render.firstChild.childNodes.length)){t.next=58;break}if("dummyDivForNextTabFocus"!=f.render.firstChild.childNodes[a].id){t.next=55;break}return S=!0,t.abrupt("break",58);case 55:a++,t.next=51;break;case 58:0==S&&(f.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>");case 59:y||v||b.refreshAdaptive(),"wframe"!==b.options.pluginName&&"pageFrame"!==b.options.pluginName||e===this.selectedIndex||h.f.fireEvent(b,"onsetsize")
;case 61:return"iframe"==f.frameMode&&"src"in f&&""!=f.src&&1==f.alwaysDraw&&("about:blank"==(_=b.render.getAttribute("src"))||WebSquare.net.isSSLBlankPage(_))&&(this._addTabEvent({uuid:b.uuid,tabID:o.tabID,idx:e,userTabID:o.userTabID}),b.setSrc(f.src,f.forceReload),d.Z.isIEAllVersion()&&d.Z.setInterval(this.checkLoadEvent,{key:b.id+"_checkLoadEvent",caller:this,args:[b],delay:70})),b.addClass("w2tabcontrol_contents_wrapper_selected"),w!=e&&h.f.fireEvent(this,"onchange",o.tabID,e,o.userTabID),this.options.useBridge&&!1!==i.focus&&(g=document.getElementById(this.bridgeIdArr[e]))&&this.activeFirstTime&&this.options.focusOnStart&&g.focus(),1!=this.activeFirstTime&&(this.activeFirstTime=!0),this.options.tabScroll&&(this.visibleTabIndex>this.selectedIndex?this.scrollTab(this.selectedIndex):this.getVisibleTab()[this.selectedIndex]||this.scrollTab(this.selectedIndex,"right")),WebSquare.getBody().getLayerListener().hideAll(),i&&!0===i.focus&&document.getElementById(this.tabArr[e].tabID+"_tabHTML").focus(),u.q.checkResize(),t.abrupt("return",!0);case 73:t.prev=73,t.t0=t.catch(1),l.Y.printStackTrace(t.t0,null,this);case 76:case"end":return t.stop()}}),t,this,[[1,73]])})));return function(e,i){return t.apply(this,arguments)}}(),m.prototype._setActiveTabAsync=function(){var t=(0,o.A)(r().mark((function t(e){var i,o,s,a,n,d,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=this.tabArr[e],o=this.contentsArr[e],s=this.getChild(i.contentsID+"_body"),!this.options.useBridge){t.next=10;break}a=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[e]+"_helper"):document.getElementById(this.bridgeIdArr[e]),o.render.innerHTML=a.outerHTML+s.toHTML(),t.next=23;break;case 10:if(o.render.innerHTML=s.toHTML(),1!=this.options.useMoveNextTabFocus){t.next=23;break}if(!(e<this.tabArr.length-1)){t.next=23;break}n=!1,d=0;case 15:if(!(d<o.render.firstChild.childNodes.length)){t.next=22;break}if("dummyDivForNextTabFocus"!=o.render.firstChild.childNodes[d].id){t.next=19;break}return n=!0,t.abrupt("break",22);case 19:d++,t.next=15;break;case 22:0==n&&(o.render.firstChild.innerHTML+="<div id='dummyDivForNextTabFocus' tabIndex=0></div>");case 23:if((c="wframe"===o.frameMode||"wframePreload"===o.frameMode||"iframe"===o.frameMode||"pageFrame"===o.frameMode)&&this._addTabEvent({uuid:s.uuid,tabID:i.tabID,idx:e,userTabID:i.userTabID}),s.render&&null==s.render.parentNode&&(s.render=document.getElementById(s.id)),s.activate(),o.render.clientHeight>s.render.clientHeight&&(s.render.style.height=o.render.clientHeight+"px"),s.onComplete(),"iframe"!==o.frameMode){t.next=33;break}s.setSrc(o.src,o.forceReload),t.next=36;break;case 33:if("wframe"!==o.frameMode){t.next=36;break}return t.next=36,s.setSrc(o.src,o.forceReload);case 36:c||(h.f.fireEvent(this,"ondrawcomplete",i.tabID,e,i.userTabID),h.f.fireEvent(this,"ontabload",i.tabID,e,i.userTabID)),t.next=42;break;case 39:t.prev=39,t.t0=t.catch(1),l.Y.printStackTrace(t.t0,null,this);case 42:case"end":return t.stop()}}),t,this,[[1,39]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.activateTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;if(this.tabArr[t].disabled)return!1;var e=this.tabArr[t],i=this.contentsArr[t],o=this.getChild(e.contentsID+"_body");0==i.alwaysDraw&&o.reuseFrame&&!o.loaded&&(o.loaded=!0,o.setSrc(i.src,i.forceReload));var s=Promise.resolve();if(0==i.alwaysDraw&&!o.reuseFrame&&!o.render){var r=this.uuid;p.o._awaitObj.key.length>0||p.o._asyncList.length>0?s=p.o.initAsync().then((function(e,i){WebSquare.idCache[r]._activateTabAsync(t)})):this._activateTabAsync(t)}return s}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._activateTabAsync=function(t){try{var e,i=this.tabArr[t],o=this.contentsArr[t],s=this.getChild(i.contentsID+"_body");if(this.options.useBridge)e=!0===this.options.removeBridge?document.getElementById(this.bridgeIdArr[t]+"_helper"):document.getElementById(this.bridgeIdArr[t]),
o.render.innerHTML=e.outerHTML+s.toHTML();else o.render.innerHTML=s.toHTML();s.activate(),s.onComplete(),"wframePreload"===o.frameMode||"pageFrame"===o.frameMode||"wframe"!==o.frameMode&&"iframe"!==o.frameMode||!o.src||s.setSrc(o.src,o.forceReload)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.scrollTab=function(t,e,i){try{if(!this.options.tabScroll||t>=this.tabArr.length||t<0)return;if(e=void 0===e?"left":e,t=parseInt(t,10),"btn_scrollLeft"==i){for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)if(--t<0)return}else if("btn_scrollRight"==i)for(;this.tabArr[t].render&&"none"==this.tabArr[t].render.style.display;)t++;if("right"==e){var o=document.getElementById(this.id+"_mask"),s=WebSquare.style._getSize(o,"innerWidth"),r=WebSquare.style._getSize(this.tabArr[t].render,"outerMarginWidth");do{var a=t-1;if(a<0)break;if("none"!=this.tabArr[t].render.style.display&&(r+=WebSquare.style._getSize(this.tabArr[a].render,"outerMarginWidth")),r>s)break}while(t-- >0)}for(var n=document.getElementById(this.id+"_scroll"),h=0,d=0;d<t;d++)"none"!=this.tabArr[d].render.style.display&&(h-=WebSquare.style._getSize(this.tabArr[d].render,"outerMarginWidth"));WebSquare.style.setStyle(n,"left",h+"px"),this.visibleTabIndex=t}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.changeActiveTab=function(){var t=(0,o.A)(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,this.options.tabScroll){t.next=4;break}return t.abrupt("return");case 4:if(i=this.selectedIndex,!("btn_scrollLeft"==e&&i>0)){t.next=15;break}i--;case 7:if(!(i>0&&this.tabArr[i].render)||"none"!=this.tabArr[i].render.style.display&&!this.tabArr[i].disabled){t.next=13;break}if(!(--i<0)){t.next=11;break}return t.abrupt("return");case 11:t.next=7;break;case 13:t.next=23;break;case 15:if(!("btn_scrollRight"==e&&i<this.tabArr.length-1)){t.next=23;break}i++;case 17:if(!(i<this.tabArr.length-1&&this.tabArr[i].render)||"none"!=this.tabArr[i].render.style.display&&!this.tabArr[i].disabled){t.next=23;break}if(i++,!(this.tabArr.length-1<i)){t.next=21;break}return t.abrupt("return");case 21:t.next=17;break;case 23:if(i==this.selectedIndex){t.next=31;break}if(!0!==this.options.changeActiveTabBeforeselect){t.next=29;break}return t.next=27,this.setSelectedTabIndex(i);case 27:t.next=31;break;case 29:return t.next=31,this.setActiveTab(i);case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(1),l.Y.printStackTrace(t.t0,null,this);case 36:case"end":return t.stop()}}),t,this,[[1,33]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.getVisibleTab=function(){try{var t={};if(this.options.tabScroll)for(var e=document.getElementById(this.id+"_mask"),i=WebSquare.style.getSize(e,"innerWidth"),o=0,s=this.visibleTabIndex;s<this.tabArr.length;s++)(o+=WebSquare.style.getSize(this.tabArr[s].render,"outerMarginWidth"))<=i&&(t[s]=!0);return t}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getHiddenTab=function(){try{for(var t=[],e=0;e<this.tabArr.length;e++)this.tabArr[e].hidden&&t.push(e);return t}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getRealTabIndex=function(t){try{for(var e=0,i=0,o=0;o<this.tabArr.length;o++)if(!this.tabArr[o].hidden&&"none"!=this.tabArr[o].render.style.display&&"hidden"!=this.tabArr[o].render.style.visibility){if(e>=t){i=o;break}e++}return i}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setFocusedTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.tabArr[t];if(e.disabled)return!1;e.render=document.getElementById(e.tabID);var i="image"==e.tabType?e.render.getElementsByTagName("div")[0]:e.render.getElementsByTagName("a")[0];"a"==i.nodeName.toLowerCase()&&""==i.innerHTML?i.parentNode.focus():i.focus()}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.checkScrollBtnVisibility=function(){try{if(this.options.tabScroll){
for(var t=document.getElementById(this.id+"_control"),e=document.getElementById(this.id+"_mask"),i=document.getElementById(this.id+"_btn_scrollLeft"),o=document.getElementById(this.id+"_btn_scrollRight"),s=document.getElementById(this.id+"_btn_submenu"),r=document.getElementById(this.id+"_scroll"),a=WebSquare.style.getSize(t,"innerWidth"),n=0,h=0;h<this.tabArr.length;h++)if((n+=WebSquare.style.getSize(this.tabArr[h].render,"outerMarginWidth"))>a)return void(this.hasClass(e,"mask")||(this.addClass(e,"mask"),i.style.display="",o.style.display="",s.style.display="",i.style.visibility="",o.style.visibility="",s.style.visibility=""));this.hasClass(e,"mask")&&(WebSquare.style.setStyle(r,"left","0px"),this.removeClass(e,"mask"),i.style.display="none",o.style.display="none",s.style.display="none",i.style.visibility="hidden",o.style.visibility="hidden",s.style.visibility="hidden",this.visibleTabIndex=0)}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleTabClickEvent=function(t){try{for(var e,i=this.event.getTargetIterator(t,this.render,this._eventBubbling),o="none";i.next();){var s=i.getElement(),r="w2tabcontrol_tab_close",a="w2tabcontrol_tab_close2",n=d.Z.getBoolean(this.options.useATagBtn);if(n&&(r="w2tabcontrol_tab_close_atag",a="w2tabcontrol_tab_close2_atag"),this.__hasClass(s,r)||this.__hasClass(s,a)){o="ontabclose",e=(n?s.parentNode.parentNode.getElementsByTagName("a").length>1?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]:s.parentNode.parentNode.getElementsByTagName("a").length>0?s.parentNode.parentNode.getElementsByTagName("a")[0]:s.parentNode.parentNode.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("w2tabcontrol_li",null,null,this.id+"_tab_")){o="ontabclick",e=(n?s.getElementsByTagName("a").length>1?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]:s.getElementsByTagName("a").length>0?s.getElementsByTagName("a")[0]:s.getElementsByTagName("div")[0]).getAttribute("aria-controls");break}if(i.match("btn_scrollLeft",null,null,this.id+"_btn_scrollLeft")){this._eventBubbling||h.f.stopPropagation(t),this.options.changeActiveTab?this.changeActiveTab("btn_scrollLeft"):this.scrollTab(this.visibleTabIndex-1,null,"btn_scrollLeft"),h.f.fireEvent(this,"onscrollleftbtnclick");break}if(i.match("btn_scrollRight",null,null,this.id+"_btn_scrollRight")){if(this._eventBubbling||h.f.stopPropagation(t),this.options.changeActiveTab)this.changeActiveTab("btn_scrollRight");else{for(var c=document.getElementById(this.id+"_mask"),u=WebSquare.style.getSize(c,"outerMarginWidth"),p=0,g=this.visibleTabIndex;g<this.tabArr.length;g++)"none"!=this.tabArr[g].render.style.display&&(p+=WebSquare.style.getSize(this.tabArr[g].render,"outerMarginWidth"));if(p>u){this.scrollTab(this.visibleTabIndex+1,null,"btn_scrollRight"),h.f.fireEvent(this,"onscrollrightbtnclick");break}}h.f.fireEvent(this,"onscrollrightbtnclick")}else{if(i.match("btn_submenu",null,null,this.id+"_btn_submenu")){this._eventBubbling||h.f.stopPropagation(t),this.toggle(),h.f.fireEvent(this,"onsubmenubtnclick");break}if(this.hasClass("w2tab_adaptive_layout")&&(this.__hasClass(s,"w2tabcontrol_contents_bridge_helper")||this.options.useH3Bridge&&this.__hasClass(s,"w2tabcontrol_contents_bridge_h3"))){o="ontabclick",e=this.options.useH3Bridge||this.options.removeBridge&&"layout"===this.options.adaptive&&this.hasClass("w2tab_adaptive_layout")?s.parentNode.id:s.parentNode.parentNode.id;break}if(i.match("btn_close_all",null,null,this.id)){this._eventBubbling||h.f.stopPropagation(t),this.deleteAllTabs();break}if(i.match("w2tab_adaptive_closebtn",null,null,this.id)){o="ontabclose",e=s.id.replaceAll("_mclose","");break}}}if(i=null,"none"==o)return;this.senseReaderMode&&"focusin"===this.lastEventType||this.hasClass("w2tab_adaptive_layout")||(this._eventBubbling&&"ontabclick"==o?h.f.preventDefault(t):h.f.stopEvent(t));var m,f=-1
;for(g=0;g<this.tabArr.length;g++)if((m=this.tabArr[g]).contentsID==e){f=g;break}if("ontabclick"==o){if(f>=0&&(1!=this.tabArr[f].disabled||1!=this.options.preventTabClickEvent)){var b=Promise.resolve();this.selectedIndex==f&&1!=this.options.useTabKeyOnly||(b=this.setSelectedTabIndex(f)),b.then(function(t,e,i,o){return function(s,r){WebSquare.util.isMobile()||1!=t.options.removeBridge||t.tabArr[o].contentsRender.focus(),h.f.fireEvent(t,e,i,o)}}(this,o,m.tabID,f))}}else this.deleteTab(f)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleTabDblClickEvent=function(t){try{h.f.fireEvent(this,"ontabdblclick",t)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleMouseoverEvent=function(t){try{var e,i,o=this.event.getTargetIterator(t,this.render);if(d.Z.isTouchDevice()&&"mouseover"!==t.type&&(i=this.iScroll.bTouchMove,this._initializeIScroll(),!0===i))return;for(;o.next();){if(o.match("w2tabcontrol_li")){for(var s=o.getElement(),r=0;r<this.tabArr.length;r++)if(this.tabArr[r].render)if(this.tabArr[r].render!=s)this.removeClass(this.tabArr[r].render,this.options.overTabClass),this.tabArr[r].hoverClass&&this.removeClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closeBtn&&!this.options.alwaysShowCloseBtn&&(this.tabArr[r].closeBtn.style.display="none"),"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==r?this.tabArr[r].selectedImage:this.tabArr[r].defaultImage)||e.style[WebSquare.style.camelize("background-image")]);else{if(this.tabArr[r].disabled)continue;this.addClass(s,this.options.overTabClass),this.tabArr[r].hoverClass&&this.addClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closable&&this.tabArr[r].closeBtn&&(this.tabArr[r].closeBtn.style.display="block"),"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=this.tabArr[r].hoverImage||this.tabArr[r].selectedImage||e.style[WebSquare.style.camelize("background-image")])}return void(d.Z.isTouchDevice()&&"mouseover"!==t.type&&this.handleTabClickEvent(t))}if(o.match("btn_scrollLeft"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_previous_tab")),this.addClass(o.getElement(),"btn_scrollLeft_over");else if(o.match("btn_scrollRight"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_next_tab")),this.addClass(o.getElement(),"btn_scrollRight_over");else if(o.match("btn_submenu"))this._showTabTooltip(o.getElement(),WebSquare.language.getMessage("TabControl_tab_list")),this.addClass(o.getElement(),"btn_submenu_over");else if(o.match("btn_close_all"))this.addClass(o.getElement(),"btn_close_all_over");else if(o.match("w2tabcontrol_tab_center")||o.match("w2tabcontrol_tab_center2")){var a=o.getElement(),n=this.tabArr,h="";for(r=0;r<n.length;r++)n[r].tabID==a.parentElement.id&&(h=n[r]);h&&this._showTabTooltip(a,h.title)}else(o.match("w2tabcontrol_tab_right")||o.match("w2tabcontrol_tab_right2"))&&this._showTabTooltip(o.getElement(),"close")}for(r=0;r<this.tabArr.length;r++)this.tabArr[r].render&&(this.removeClass(this.tabArr[r].render,this.options.overTabClass),this.tabArr[r].hoverClass&&this.removeClass(this.tabArr[r].render,this.tabArr[r].hoverClass),this.tabArr[r].closeBtn&&!this.options.alwaysShowCloseBtn&&(this.tabArr[r].closeBtn.style.display="none"),"image"==this.tabArr[r].tabType&&((e=this.tabArr[r].render.getElementsByTagName("div")[0]).style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==r?this.tabArr[r].selectedImage:this.tabArr[r].defaultImage)||e.style[WebSquare.style.camelize("background-image")]));o=null,d.Z.isTouchDevice()&&"mouseover"!==t.type&&this.handleTabClickEvent(t)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleMouseoutEvent=function(t){try{h.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();){
if(e.match("w2tabcontrol_li")){for(var i=e.getElement(),o=-1,s=0;s<this.tabArr.length;s++)if(this.tabArr[s].render===i){o=s;break}if(null==this.tabArr[o])break;if(this.removeClass(this.tabArr[o].render,this.options.overTabClass),this.tabArr[o].hoverClass&&this.removeClass(this.tabArr[o].render,this.tabArr[o].hoverClass),this.options.alwaysShowCloseBtn||(this.tabArr[o].closeBtn.style.display="none"),"image"==this.tabArr[o].tabType){var r=this.tabArr[o].render.getElementsByTagName("div")[0];r.style[WebSquare.style.camelize("background-image")]=(this.selectedIndex==o?this.tabArr[o].selectedImage:this.tabArr[o].defaultImage)||r.style[WebSquare.style.camelize("background-image")]}break}if(e.match("btn_scrollLeft")){this.removeClass(e.getElement(),"btn_scrollLeft_over"),this._hideTooltip();break}if(e.match("btn_scrollRight")){this.removeClass(e.getElement(),"btn_scrollRight_over"),this._hideTooltip();break}if(e.match("btn_submenu")){this.removeClass(e.getElement(),"btn_submenu_over"),this._hideTooltip();break}if(e.match("btn_close_all")){this.removeClass(e.getElement(),"btn_close_all_over");break}(e.match("w2tabcontrol_tab_center")||e.match("w2tabcontrol_tab_right")||e.match("w2tabcontrol_tab_center2")||e.match("w2tabcontrol_tab_right2"))&&this._hideTooltip()}e=null}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleResizeEvent=function(t){try{if(this.options.tabScroll){var e=document.getElementById(this.id+"_control"),i=document.getElementById(this.id+"_mask"),o=document.getElementById(this.id+"_btn_scrollLeft"),s=document.getElementById(this.id+"_btn_scrollRight"),r=document.getElementById(this.id+"_btn_submenu"),a=WebSquare.style.getSize(e,"innerWidth")-WebSquare.style.getSize(o,"outerMarginWidth")-WebSquare.style.getSize(s,"outerMarginWidth")-WebSquare.style.getSize(r,"outerMarginWidth"),n=parseInt(WebSquare.style.getStyleProperty(i,"padding-left"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-left"))+parseInt(WebSquare.style.getStyleProperty(i,"padding-right"))+parseInt(WebSquare.style.getStyleProperty(i,"margin-right"));WebSquare.style.setStyle(i,"width",a-n+"px")}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleKeyEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getTabHostAndContainer(),o=this.event.getTargetIterator(t,this.render);if(13!=e&&37!=e&&38!=e&&39!=e&&40!=e&&46!=e)return;if(46==e&&t.altKey)return void this.deleteTab(this.getSelectedTabIndex());for(;o.next();)if((r=o.getElement())==i.container){if((37==e||38==e)&&t.ctrlKey){var s=this.tabArr[this.selectedIndex];if(1==(r="image"==s.tabType?s.render.getElementsByTagName("div")[0]:s.render.getElementsByTagName("a")[0]).nodeType)return r.focus(),void h.f.stopEvent(t)}return}switch(e){case 13:return void this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);case 37:case 38:this.focusedIndex=this.focusedIndex>0?this.focusedIndex-1:0,"a"==(r="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==r.innerHTML?r.parentNode.focus():r.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0);break;case 39:case 40:var r;this.focusedIndex=this.focusedIndex+1<this.tabArr.length?this.focusedIndex+1:this.focusedIndex,"a"==(r="image"==this.tabArr[this.focusedIndex].tabType?this.tabArr[this.focusedIndex].render.getElementsByTagName("div")[0]:this.tabArr[this.focusedIndex].render.getElementsByTagName("a")[0]).nodeName.toLowerCase()&&""==r.innerHTML?r.parentNode.focus():r.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0)}o=null,h.f.stopEvent(t)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleFocusInEvent=function(t){try{var e=this.event.getTargetIterator(t,this.render);for(this.lastEventType=t.type;e.next();)if(e.match(null,"dummyDivForNextTabFocus")){
var i=this.tabArr[this.focusedIndex+1],o="image"==i.tabType?i.render.getElementsByTagName("div")[0]:i.render.getElementsByTagName("a")[0];if(1==o.nodeType)return this.focusedIndex++,o.focus(),this.setActiveTab(this.focusedIndex>=0?this.focusedIndex:0),e=null,void h.f.stopEvent(t)}e=null}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleKeyEventAccessibility=function(){var t=(0,o.A)(r().mark((function t(e){var i,o,s,a,n,d,c,u,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=e.charCode?e.charCode:e.keyCode,o=this.getTabHostAndContainer(),s=this.event.getTargetIterator(e,this.render),-1!==[9,13,35,36,37,38,39,40].indexOf(i)){t.next=8;break}return t.abrupt("return");case 8:a=0,n={focus:!0,showCloseBtn:!0};case 10:if(!s.next()){t.next=73;break}if(s.getElement()!=o.tabhost){t.next=49;break}d=document.activeElement.id.replace("_tabHTML",""),c=0;case 15:if(!(c<this.tabArr.length)){t.next=22;break}if(this.tabArr[c].tabID!==d){t.next=19;break}return a=c,t.abrupt("break",22);case 19:c++,t.next=15;break;case 22:t.t0=i,t.next=9===t.t0?25:13===t.t0?27:35===t.t0?29:36===t.t0?33:37===t.t0||38===t.t0?37:39===t.t0||40===t.t0?41:45;break;case 25:return!0===e.shiftKey||(n.focus=!1,this.setActiveTab(a>=0?a:0,n)),t.abrupt("break",46);case 27:return h.f.preventDefault(e),t.abrupt("break",46);case 29:return n.hideCloseBtn=a,a=this.getTabCount()-1,this.setActiveTab(a,n),t.abrupt("break",46);case 33:return n.hideCloseBtn=a,a=0,this.setActiveTab(a,n),t.abrupt("break",46);case 37:return n.hideCloseBtn=a,a=a>0?a-1:this.getTabCount()-1,this.setActiveTab(a,n),t.abrupt("break",46);case 41:return n.hideCloseBtn=a,a=a+1<this.tabArr.length?a+1:0,this.setActiveTab(a,n),t.abrupt("break",46);case 45:return t.abrupt("break",46);case 46:s.stop(),t.next=71;break;case 49:if(!s.match("w2tabcontrol_tab_close_atag")){t.next=71;break}u=s.getElement(),d=u.id.replace("_close",""),c=0;case 53:if(!(c<this.tabArr.length)){t.next=60;break}if(this.tabArr[c].tabID!==d){t.next=57;break}return a=c,t.abrupt("break",60);case 57:c++,t.next=53;break;case 60:t.t1=i,t.next=9===t.t1?63:13===t.t1?65:70;break;case 63:return this.options.useBridge&&(p=document.getElementById(this.bridgeIdArr[a]))&&(p.focus(),u.style.display="none"),t.abrupt("break",70);case 65:return h.f.stopPropagation(e),n.hideCloseBtn=a,a=a+1<this.tabArr.length?a+1:0,this.setActiveTab(a,n),t.abrupt("break",70);case 70:s.stop();case 71:t.next=10;break;case 73:s=null,this.visibleTabIndex>a?this.scrollTab(a):this.getVisibleTab()[a]||this.scrollTab(a,"right"),t.next=80;break;case 77:t.prev=77,t.t2=t.catch(1),l.Y.printStackTrace(t.t2,null,this);case 80:case"end":return t.stop()}}),t,this,[[1,77]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.handleTabMove=function(t){try{if(d.Z.isTouchDevice()){var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;(e||i)&&(this.iScroll.prevTouches={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY})}if(!this.options.tabMove&&!this.options.tabSplit)return;h.f.stopEvent(t);var o=this.event.getTargetIterator(t,this.render),s=-1,r=this.uuid,a=this;for(this.options.tabMove&&!this.options.tabSplit&&(this._splitInfo.moveMode=!0),this.options.tabSplit&&!this.options.tabMove&&(this._splitInfo.splitMode=!0),this.event.addListener(document,"onkeydown",(function(t){"Escape"===t.key&&!0===a._splitInfo.ghostVisible&&(a._splitInfo={},WebSquare.dragdrop.gDragManager.remove(a.id+"_ghostLayer_tabMove"))})),this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1;o.next();)if(o.match("w2tabcontrol_li")){var n=o.getElement();if(!n)return;for(var c=0;c<this.tabArr.length;c++)if(this.tabArr[c].render===n){s=c;break}if(isNaN(s)||s<0)return;WebSquare.dragdrop.gDragManager.activate(t,n,{id:this.id+"_ghostLayer_tabMove",className:"w2tabcontrol_drag_tabMove",delay:15,passive:!WebSquare.util.isTouchDevice(),makeGhostLayer:function(t){
t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t.render.style.position="absolute";var e=s,i=WebSquare.idCache[r].tabArr[e].render;return t.render.innerHTML="<ul class='w2tabcontrol_tabhost'>"+i.outerHTML+"</ul>",a.ghostObj=t,t},handleStart:function(t){var e=s,i=WebSquare.idCache[r],o=i.getElementById(i.tabArr[e].tabID);this.isVertical="left"===i.options.tabPosition||"right"===i.options.tabPosition,this.isVertical?this.tabMove_top=WebSquare.style.getComputedStyle(o,"top"):this.tabMove_left=WebSquare.style.getComputedStyle(o,"left"),this.dragOverTab={},this.dropIndex=-1,this.tabMove_zIndex=WebSquare.style.getComputedStyle(o,"zIndex");var a=Number(this.tabMove_zIndex);if(this.tabMove_zIndex_Array=[],isNaN(a)||a<=0)for(var n=0;n<i.tabArr.length;n++){var l=i.tabArr[n].render;this.tabMove_zIndex_Array.push(WebSquare.style.getComputedStyle(l,"zIndex")),n===e?WebSquare.style.setStyle(l,"zIndex",0):WebSquare.style.setStyle(l,"zIndex",1)}else WebSquare.style.setStyle(o,"zIndex",1);var h=o.getBoundingClientRect();this.startLeft=h.left+window.scrollX,this.startTop=h.top+window.scrollY},onDrop:function(t,e,i,o,a,n,l){var c=s,u=WebSquare.idCache[r];if(1==u._splitInfo.moveMode){var p=u.getElementById(u.tabArr[c].tabID);if(this.isVertical?WebSquare.style.setStyle(p,"top",this.tabMove_top):WebSquare.style.setStyle(p,"left",this.tabMove_left),this.tabMove_zIndex_Array.length>0)for(var g=0;g<u.tabArr.length;g++)WebSquare.style.setStyle(u.tabArr[g].render,"zIndex",this.tabMove_zIndex_Array[g]);else WebSquare.style.setStyle(p,"zIndex",this.tabMove_zIndex);for(var m in this.dragOverTab)this.isVertical?WebSquare.style.setStyle(u.tabArr[m].render,"top",this.dragOverTab[m][0]):WebSquare.style.setStyle(u.tabArr[m].render,"left",this.dragOverTab[m][0]);u.options.tabMove&&u.moveTab(c,this.dropIndex),this.tabMove_left="",this.tabMove_zIndex="",this.dragOverTab={},this.tabMove_zIndex_Array=[]}!0===u._splitInfo.ghostVisible&&(h.f.fireEvent(u,"ontabsplit",c,l)&&d.Z.requestAnimationFrame((function(){u.hideTab(c)})));u._splitInfo={}},onDragover:function(t,e,i,o,a,n,l){var h=s,d=-1,c=WebSquare.idCache[r],u=!1,p=null,g=null;for(g=l&&"touchmove"===l.type?new WebSquare.targetIterator(document.elementFromPoint(l.changedTouches[0].clientX,l.changedTouches[0].clientY)):c.event.getTargetIterator(l);g.next();){if(g.match("w2tabcontrol_li")){p=g.getElement(),u=!0,g.stop();break}if(g.match("w2tabcontrol_tabhost")){u=!0,g.stop();break}}if(g=null,!0!==c._splitInfo.splitMode&&!0===u){c._splitInfo.moveMode=!0,c.ghostObj.render.style.visibility="hidden";for(var m=0;m<c.tabArr.length;m++)if(c.tabArr[m].render===p){d=m;break}var f=c.getElementById(c.tabArr[h].tabID);if(this.isVertical?WebSquare.style.setStyle(f,"top",n/c._zoomLevel+"px"):WebSquare.style.setStyle(f,"left",a/c._zoomLevel+"px"),null!=c.tabArr[d]&&d!==h){var b=c.getElementById(c.tabArr[d].tabID);null==this.dragOverTab[d]?(this.isVertical?(this.dragOverTab[d]=[WebSquare.style.getComputedStyle(b,"top"),n],h>d?WebSquare.style.setStyle(b,"top",b.getBoundingClientRect().height+"px"):WebSquare.style.setStyle(b,"top",-1*b.getBoundingClientRect().height+"px")):(this.dragOverTab[d]=[WebSquare.style.getComputedStyle(b,"left"),a],h>d?WebSquare.style.setStyle(b,"left",b.getBoundingClientRect().width+"px"):WebSquare.style.setStyle(b,"left",-1*b.getBoundingClientRect().width+"px")),this.dropIndex=d):(this.dragOverTab[d][1]>=0&&this.dragOverTab[d][1]>a+10||this.dragOverTab[d][1]<0&&this.dragOverTab[d][1]<a-10)&&(this.dragOverTab[d][1]>=0&&this.dragOverTab[d][1]>n+10||this.dragOverTab[d][1]<0&&this.dragOverTab[d][1]<n-10)&&(this.isVertical?WebSquare.style.setStyle(b,"top",this.dragOverTab[d][0]):WebSquare.style.setStyle(b,"left",this.dragOverTab[d][0]),this.dragOverTab[d]=null,delete this.dragOverTab[d],this.dropIndex=h>d?d+1:d-1)}}else if(!0!==c._splitInfo.moveMode){c._splitInfo.splitMode=!0;var y=c.tabArr[h].render
;Math.abs(n)>2*y.offsetHeight?(c._splitInfo.ghostVisible=!0,c.ghostObj.render.style.visibility="visible",c.ghostObj.render.style.zIndex=1e3,c.ghostObj.render.style.opacity=""):(c._splitInfo.ghostVisible=!1,c.ghostObj.render.style.zIndex=1e3,c.ghostObj.render.style.opacity="0.2"),c.ghostObj.render.style.left=this.startLeft+a/c._zoomLevel+"px",c.ghostObj.render.style.top=this.startTop+n/c._zoomLevel+"px"}}}),o.stop()}o=null}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.handleTouchMove=function(t){try{var e=t.touches&&1==t.touches.length,i=window.navigator.msPointerEnabled&&"touch"==t.pointerType;if(e||i){var o={x:e?t.touches[0].clientX:t.clientX,y:e?t.touches[0].clientY:t.clientY},s=this.iScroll.prevTouches.x-o.x,r=this.iScroll.prevTouches.y-o.y;(Math.abs(s)>this.iScroll.epsilon||Math.abs(r)>this.iScroll.epsilon)&&(this.iScroll.bTouchMove=!0)}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getWindow=function(t){try{var e,i=void 0!==t?t:this.selectedIndex;if(i=this._getTabIndex(i),!this._isValidTabIndex(i))return e;for(var o=0;o<this.contentsArr.length;o++){var s=this.getChild(this.contentsArr[o].contentsID+"_body");if(o==i){e="iframe"===s.getPluginName()||"wframe"===s.getPluginName()||"pageFrame"===s.getPluginName()?s.getWindow():window;break}}return e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setContentsHeight=function(t){try{var e=this.getTabHostAndContainer(),i=e.container,o=e.tabhost;t=parseInt(t,10),i.style.height=t+"px";parseInt(d.Z.getStyleProperty(o,"height"),10),parseInt(d.Z.getStyleProperty(o,"border-top-width"),10),parseInt(d.Z.getStyleProperty(o,"border-bottom-width"),10),parseInt(d.Z.getStyleProperty(o,"margin-top"),10),parseInt(d.Z.getStyleProperty(o,"margin-bottom"),10)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getSelectedTabID=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.tabArr[this.selectedIndex].userTabID:null}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getSelectedTabIndex=function(){try{return this.selectedIndex<this.tabArr.length&&this.selectedIndex>=0?this.selectedIndex:-1}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getTabIndex=function(t){var e=null;try{for(var i=0;i<this.tabArr.length;i++)if(t==this.tabArr[i].userTabID){e=i;break}return e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._getTabIndex=function(t){try{var e=t;if("string"==typeof t&&null==(e=this.getTabIndex(t))&&(e=Number(t),isNaN(e)))return;return e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getTabID=function(t){var e="";try{for(var i=0;i<this.tabArr.length;i++)if(t==i){e=this.tabArr[i].userTabID;break}return e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setSelectedTabIndex=function(){var t=(0,o.A)(r().mark((function t(e){var i,o,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=0,"string"!=typeof e){t.next=17;break}o=!0,s=0;case 6:if(!(s<this.tabArr.length)){t.next=14;break}if(this.tabArr[s].userTabID!=e){t.next=11;break}return i=s,o=!1,t.abrupt("break",14);case 11:s++,t.next=6;break;case 14:o&&(i=e),t.next=18;break;case 17:i=e;case 18:if(0!=h.f.fireEvent(this,"onbeforeselect",this.getSelectedTabIndex(),i)){t.next=21;break}return t.abrupt("return");case 21:return t.next=23,this.setActiveTab(i);case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(1),l.Y.printStackTrace(t.t0,null,this);case 28:case"end":return t.stop()}}),t,this,[[1,25]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.getTabCount=function(t){try{var e=this.tabArr.length,i=0;if(!1===(t||{}).hiddenTab){for(var o=0,s=this.tabArr.length;o<s;o++)this.tabArr[o].hidden&&i++;e-=i}return e}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.deleteTab=function(){var t=(0,o.A)(r().mark((function t(e){var i,o,s,a,n,d,c,u,p,g,m,f,b,y;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=this._getTabIndex(e),this._isValidTabIndex(i)){t.next=4;break}
return t.abrupt("return");case 4:if(e=i,o=this.tabArr[e],s=o.tabID,a=o.userTabID,!1!==h.f.fireEvent(this,"onbeforetabclose",s,e)){t.next=10;break}return t.abrupt("return");case 10:if(this.selectedIndex!=e){t.next=35;break}n=e+1;case 12:if(t.t0=n<this.tabArr.length,!t.t0){t.next=18;break}return t.next=16,this.setActiveTab(n);case 16:t.t1=t.sent,t.t0=0==t.t1;case 18:if(!t.t0){t.next=22;break}n++,t.next=12;break;case 22:if(!(n>=this.tabArr.length)){t.next=34;break}n=e-1;case 24:if(t.t2=n>=0,!t.t2){t.next=30;break}return t.next=28,this.setActiveTab(n);case 28:t.t3=t.sent,t.t2=0==t.t3;case 30:if(!t.t2){t.next=34;break}n--,t.next=24;break;case 34:this.selectedIndex>e&&this.selectedIndex--;case 35:if(d=this.contentsArr[e],c=this.getChild(this.tabArr[e].contentsID+"_body"),u="iframe"==d.frameMode&&c.render&&this.storedFrame.length<this.options.spaIframeMaxSize,p="wframe"===d.frameMode||"wframePreload"===d.frameMode||"iframe"===d.frameMode||"pageFrame"===d.frameMode,c&&(u?(c.loaded=!1,this.removeControl(c),this.storedFrame.push(c.id),c.setSrc(WebSquare.net.getBlankXML())):c.remove()),g=o.render.parentNode,m=d.render.parentNode,g.removeChild(o.render),u){for(n=0;n<d.render.childNodes.length;n++)d.render.childNodes[n]!=c.render&&d.render.removeChild(d.render.childNodes[n]);d.render.style.display="none",d.render.style.visibility="hidden",d.render.setAttribute("aria-hidden","true"),this.addClass(d.render," ")}else m.removeChild(d.render);for(f in c=null,this.tabArr[e])this.tabArr[e][f]=null;for(f in this.contentsArr[e])this.contentsArr[e][f]=null;for(o=null,d=null,this.tabArr.splice(e,1),this.contentsArr.splice(e,1),this.bridgeIdArr.splice(e,1),this.backbridgeIdArr.splice(e,1),n=e;n<this.tabArr.length;n++)o=this.tabArr[n],b=n+2,y=n+1,this.__removeClass(o.render,"w2tabcontrol_li_"+b),this.__addClass(o.render,"w2tabcontrol_li_"+y);if(!(e<this.selectedIndex)){t.next=59;break}return t.next=57,this.setActiveTab(this.selectedIndex-1);case 57:t.next=72;break;case 59:if(e!=this.selectedIndex){t.next=69;break}if(!this.tabArr[this.selectedIndex]){t.next=65;break}return t.next=63,this.setActiveTab(this.selectedIndex);case 63:t.next=67;break;case 65:return t.next=67,this.setActiveTab(this.selectedIndex-1);case 67:t.next=72;break;case 69:if(!(e>this.selectedIndex)){t.next=72;break}return t.next=72,this.setActiveTab(this.selectedIndex);case 72:this.options.tabScrollAuto&&this.scrollTab(Math.max(this.visibleTabIndex-1,0)),this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),h.f.fireEvent(this,"ontabclose",s,e,a),p||(h.f.fireEvent(this,"ondrawcomplete",s,e,a),h.f.fireEvent(this,"ontabload",s,e,a)),t.next=81;break;case 78:t.prev=78,t.t4=t.catch(0),l.Y.printStackTrace(t.t4,null,this);case 81:case"end":return t.stop()}}),t,this,[[0,78]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.deleteAllTabs=function(){try{if(this.tabArr.length<=0)return;for(var t=this.getTabHostAndContainer(),e=this.tabArr.length-1;e>=0;e--){var i=this.getChild(this.tabArr[e].contentsID+"_body");i&&i.remove();var o=this.tabArr[e];t.tabhost.removeChild(o.render);var s=this.contentsArr[e];t.container.removeChild(s.render)}this.tabArr=[],this.contentsArr=[],this.bridgeIdArr=[],this.backbridgeIdArr=[],this._makeIframeBackground()}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getFrame=function(t){if(t=this._getTabIndex(t),this._isValidTabIndex(t)){var e=this.contentsArr[t],i=this.getChild(e.contentsID+"_body");return null!=i?i:void 0}},m.prototype._getCurrentFrame=function(){var t=this.contentsArr[this.selectedIndex],e=this.getChild(t.contentsID+"_body");if(null!=e)return e},m.prototype.isLoaded=function(t){if((t=parseInt(t,10))<0||t>=this.tabArr.length)return!1;var e=this.contentsArr[t],i=this.getChild(e.contentsID+"_body");return"iframe"==e.frameMode?!!i._iframeLoaded:i.completed},m.prototype.addTab=function(){var t=(0,o.A)(r().mark((function t(e,i,o){
var s,h,c,u,m,f,b,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E,R,N,F,O,B,P,Y,V,H,j,z,G,Z,U,X;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,s=e||"",void 0!==i){t.next=5;break}return this._onAddTab=!1,t.abrupt("return");case 5:if(!0!==this._onAddTab){t.next=13;break}return this._onAddTabQueue||(this._onAddTabQueue=[]),h=g.r.cloneNode(i,!0,[],[],0,!0),c=g.r.cloneNode(o,!0,[],[],0,!0),this._onAddTabQueue.push([e,h,c]),t.abrupt("return",s);case 13:this._onAddTab=!0;case 14:u=!1,m=0;case 16:if(!(m<this.tabArr.length)){t.next=23;break}if(""!=s&&this.tabArr[m].userTabID!=s){t.next=20;break}return u=!0,t.abrupt("break",23);case 20:m++,t.next=16;break;case 23:if(f=i.openAction,!u){t.next=74;break}if(f||this.options.useConfirmMessage&&(b=WebSquare.language.getMessage("TabControl_warning1")||"[#title] already exists. Click OK to use the existing tab, or click Cancel to create a new tab.",i.useLocale&&this.options.confirmMessageLocaleRef?(y=this.getLocaleValue(this.options.confirmMessageLocaleRef))&&(b=y):b.indexOf("#title")>-1&&(b=b.replace("#title",i.label)),!0,v=confirm(b),f=v?this.options.confirmTrueAction:this.options.confirmFalseAction),"exist"!==f){t.next=47;break}if(w=this.getTabIndex(s),S=this.contentsArr[w],"active"==(_=this.getChild(this.tabArr[w].contentsID+"_body")).activeStatus){t.next=34;break}S.src=o.src||"about:blank",t.next=41;break;case 34:if("iframe"!==_.options.pluginName){t.next=38;break}_.setSrc(o.src||"about:blank",S.forceReload),t.next=41;break;case 38:return o.dataObject?C={dataObject:o.dataObject}:S.dataObject&&(C={dataObject:S.dataObject}),t.next=41,_.setSrc(o.src||"",C);case 41:return t.next=43,this.setSelectedTabIndex(w);case 43:return this._addTabAfter(),t.abrupt("return",s);case 47:if("new"!==f){t.next=51;break}s=s+"_"+this.increaseKey++,t.next=74;break;case 51:if("select"!==f){t.next=58;break}return t.next=54,this.setSelectedTabIndex(this.getTabIndex(s));case 54:return this._addTabAfter(),t.abrupt("return",s);case 58:if("last"!==f){t.next=72;break}return w=this.getTabIndex(s),x=this.id+"_tabhost",I=this.id+"_tab_"+s,T=document.getElementById(x),k=document.getElementById(I),(L=T.lastElementChild)?T.insertBefore(k,L.nextSibling):T.appendChild(k),t.next=68,this.setSelectedTabIndex(w);case 68:case 72:return this._addTabAfter(),t.abrupt("return",s);case 74:if(!(-1!=this.options.windowMaxNum&&this.getTabCount()>=this.options.windowMaxNum)){t.next=78;break}return alert(WebSquare.language.getMessage("TabControl_maxNum_warning",this.options.windowMaxNum)),this._addTabAfter(),t.abrupt("return");case 78:if(A=this.id+"_tab_"+s,("true"==i.useLocale||this.options.useLocale&&"false"!=i.useLocale)&&i.localeRef&&(y=this.getLocaleValue(i.localeRef))&&(i.label=y),D={tabID:A,userTabID:s,contentsID:"",tabLabel:i.label||"",disabled:i.disabled||!1,render:null,tabWidth:parseInt(i.tabWidth,10)>0?parseInt(i.tabWidth,10):this.options.tabWidth,tabHeight:parseInt(i.tabHeight,10)>0?parseInt(i.tabHeight,10):this.options.tabHeight,tabClass:i.class||this.options.tabClass,tabStyle:i.style||this.options.tabStyle,activeTabClass:i.activeTabClass||this.options.activeTabClass,disabledTabClass:i.disabledTabClass||this.options.disabledTabClass,selectedClass:i.selectedClass||this.options.selectedClass,selectedImage:i.selectedImage?"url("+i.selectedImage+")":"",defaultImage:i.defaultImage?"url("+i.defaultImage+")":"",hoverImage:i.hoverImage?"url("+i.hoverImage+")":"",tabType:"image"==i.tabType?"image":"text",defaultClass:i.defaultClass||"",hoverClass:i.hoverClass||"",closable:null!=i.closable?d.Z.getBoolean(i.closable):this.options.closable,closeBtn:null,label:i.label||"",value:A,title:i.title||i.label,tabHTML:i.tabHTML||"",useLocale:i.useLocale||this.options.useLocale,localeRef:i.localeRef,useATagBtn:null!=i.useATagBtn?d.Z.getBoolean(i.useATagBtn):this.options.useATagBtn},
"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||"string"==typeof D.tabStyle&&D.tabStyle.indexOf("width")<0&&(D.tabStyle="width:"+15*D.label.length+"px;"+D.tabStyle),W=a.q.extendKeepingType({},WebSquare.uiplugin.content.prototype.defaultOptions),q=a.q.extendKeepingType(W,o),!1===o.processMsgFrame&&(q.processMsgFrame=!1),!1===o.frameModal&&(q.frameModal=!1),M=this.id+"_contents_"+s,D.contentsID=M,(S=a.q.extend({contentsID:M,contentsClass:o.contentsClass||this.options.contentsClass,render:null,xml:null,name:q.name||"",scope:q.scope,msaName:q.msaName,scopeInherit:q.scopeInherit,resizeEvent:q.resizeEvent},q||{})).src&&(q.frameMode||(S.frameMode=q.wframe?"wframe":"iframe")),i.addTabIndex>=0?(this.tabArr.splice(i.addTabIndex,0,D),this.contentsArr.splice(i.addTabIndex,0,S)):(this.tabArr.push(D),this.contentsArr.push(S)),E=this.getTabHostAndContainer(),R=E.container,T=E.tabhost,i.addTabIndex<=this.selectedIndex&&this.selectedIndex++,!(this.storedFrame.length>0&&"iframe"===S.frameMode)){t.next=114;break}N=M+"_body",F=!1,m=0;case 99:if(!(m<this.storedFrame.length)){t.next=107;break}if(this.storedFrame[m]!=N){t.next=104;break}return O=this.storedFrame.splice(m,1),F=!0,t.abrupt("break",107);case 104:m++,t.next=99;break;case 107:F||(O=this.storedFrame.shift()),(_=d.Z.getComponentById(O)).reuseFrame=!0,F||n.I.setId(N,_),q.name&&_.setAttribute("name",q.name),t.next=115;break;case 114:_=this.initContents(S);case 115:if("wframePreload"!==S.frameMode&&"pageFrame"!==S.frameMode){t.next=118;break}return t.next=118,p.o.initAsync();case 118:for(this.addControl(_),B="make"+D.tabType.capitalize()+"TabHTML",i.addTabIndex>=0?((P=document.createElement("div")).innerHTML=this[B](D,this.tabArr.length,!0),T.insertBefore(P.childNodes[0],T.childNodes[i.addTabIndex]||null)):T.innerHTML+=this[B](D,this.tabArr.length,!0),"top"!==this.options.tabPosition&&"bottom"!==this.options.tabPosition||!D.tabWidth&&D.tabStyle.indexOf("width")<0&&(Y=i.addTabIndex>=0?T.childNodes[i.addTabIndex]:T.lastChild,V=0,null!=Y&&(Y.style.overflow="visible",null!=Y.firstChild&&(Y.firstChild.style.overflow="visible"),Y.childNodes.length>1&&(V+=Y.childNodes[1].offsetWidth),Y.childNodes.length>2&&(V+=Y.childNodes[2].offsetWidth)),Y.style.width=Y.scrollWidth+V+"px"),H=document.createElement("div"),j=D.tabID+"_tabHTML",H.innerHTML=this.makeContentsHTML(S,D.tabLabel,_&&_.reuseFrame,i.addTabIndex,j),z=H.removeChild(H.firstChild),_&&_.reuseFrame&&_.render&&_.render.parentNode?(G=_.render.parentNode,this.options.useBridge&&(null!=(Z=document.getElementById("bridgeId"))&&G.removeChild(Z),G.insertBefore(z.firstChild,_.render)),this.options.useBackbridge&&(null!=(Z=document.getElementById("bridgeId"))&&G.removeChild(Z),G.appendChild(z.lastChild,_.render)),G.setAttribute("id",S.contentsID),G.setAttribute("class",S.contentsClass),d.Z.getBoolean(this.options.removeAriaLabelledby)||G.setAttribute("aria-labelledby",D.tabLabel)):R.appendChild(z),H=null,z=null,S.alwaysDraw&&("iframe"!==S.frameMode&&"wframe"!==S.frameMode&&"wframePreload"!==S.frameMode&&"pageFrame"!==S.frameMode||this._addTabEvent({uuid:_.uuid,tabID:D.tabID,idx:i.addTabIndex>=0?i.addTabIndex:this.tabArr.length-1,userTabID:D.userTabID}),_.reuseFrame||(_.activate(),_.onComplete()),"iframe"!==S.frameMode&&"wframe"!==S.frameMode||_.setSrc(S.src,S.forceReload),"iframe"===S.frameMode&&(d.Z.isIEAllVersion()?d.Z.setInterval(this.checkLoadEvent,{key:_.id+"_checkLoadEvent",caller:this,args:[_],delay:70}):d.Z.setInterval(this.checkLoadEvent,{key:_.id+"_checkLoadEvent",caller:this,args:[_,"addTab",s],delay:this.options.onTabLoadCheckTime}))),U=d.Z.getDataPrefix("index"),m=0;m<this.tabArr.length;m++)(D=this.tabArr[m]).render=document.getElementById(D.tabID),D.closeBtn=document.getElementById(D.tabID+"_close"),D.contentsRender=document.getElementById(D.contentsID),this.contentsArr[m].render=D.contentsRender,i.addTabIndex>=0&&D.render.setAttribute(U,m+1),D.tabHTML&&this.setTabHTML(D.userTabID,D.tabHTML)
;if(X=i.addTabIndex>=0?i.addTabIndex:this.tabArr.length-1,this.tabArr[X].contentsRender.style.display="none",1!=this.tabArr.length){t.next=138;break}return t.next=137,this.setActiveTab(0);case 137:"left"!==this.options.tabPosition&&"right"!==this.options.tabPosition||this.adjustContentsHeight();case 138:return this.options.tabScroll&&this.options.adjustTabScroll&&this.checkScrollBtnVisibility(),this.options.spaAuto&&n.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),this._addTabAfter(),t.abrupt("return",s);case 144:t.prev=144,t.t0=t.catch(0),this._addTabAfter(),l.Y.printStackTrace(t.t0,null,this);case 148:case"end":return t.stop()}}),t,this,[[0,144]])})));return function(e,i,o){return t.apply(this,arguments)}}(),m.prototype._addTabAfter=(0,o.A)(r().mark((function t(){var e,i,o,s,a,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this._onAddTab=!1,this._onAddTabQueue instanceof Array){t.next=4;break}return t.abrupt("return");case 4:e=this._onAddTabQueue.slice(),this._onAddTabQueue=[],i=0;case 7:if(!(i<e.length)){t.next=18;break}if(!((o=e[i])instanceof Array&&3===o.length)){t.next=15;break}return s=o[0],a=o[1],n=o[2],t.next=15,this.addTab(s,a,n);case 15:i++,t.next=7;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),l.Y.printStackTrace(t.t0,null,this);case 23:case"end":return t.stop()}}),t,this,[[0,20]])}))),m.prototype.disableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(1==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.activeTabClass),this.addClass(e.render,e.disabledTabClass),d.Z.isIE(8)&&(e.render.style.zIndex=0);var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.removeAttribute("href"),o=null),e.disabled=!0;var s=this.getChild(i.contentsID+"_body");"stop"!=s.activeStatus&&(this.disabledComponents[t]=d.Z.setDisabled({componentId:s.id,disabled:!0}).skipComponents);for(var r=0;r<this.disabledTabStack.length;r++)if(this.disabledTabStack[r].tabID===e.tabID){this.disabledTabStack.splice(r,1);break}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.enableTab=function(t){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;var e=this.tabArr[t];if(0==e.disabled)return;var i=this.contentsArr[t];this.removeClass(e.render,e.disabledTabClass),this.selectedIndex>=0&&t==this.selectedIndex&&this.addClass(e.render,e.activeTabClass),e.disabled=!1,d.Z.isIE(8)&&(e.render.style.zIndex="");var o=e.render.getElementsByTagName("a")[0];null!=o&&(o.setAttribute("href","#"+e.contentsID+"_bridge"),o=null);var s=this.getChild(i.contentsID+"_body");if("stop"!=s.activeStatus){var r={componentId:s.id,disabled:!1};null!=this.disabledComponents[t]&&0==this.options.forceChildCompEnabled&&(r.excludeIdList=this.disabledComponents[t]),d.Z.setDisabled(r),null!=this.disabledComponents[t]&&delete this.disabledComponents[t]}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.hideTab=function(){var t=(0,o.A)(r().mark((function t(e){var i,o,s,a,n,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return");case 5:if(0!=h.f.fireEvent(this,"onbeforehide",this.getSelectedTabIndex(),e)){t.next=8;break}return t.abrupt("return");case 8:if(e!=this.selectedIndex){t.next=33;break}i=e+1;case 10:if(t.t0=i<this.tabArr.length,!t.t0){t.next=16;break}return t.next=14,this.setActiveTab(i);case 14:t.t1=t.sent,t.t0=0==t.t1;case 16:if(!t.t0){t.next=20;break}i++,t.next=10;break;case 20:if(!(i>=this.tabArr.length)){t.next=32;break}i=e-1;case 22:if(t.t2=i>=0,!t.t2){t.next=28;break}return t.next=26,this.setActiveTab(i);case 26:t.t3=t.sent,t.t2=0==t.t3;case 28:if(!t.t2){t.next=32;break}i--,t.next=22;break;case 32:e==this.selectedIndex&&(this.selectedIndex=-1);case 33:o=this.tabArr[e],s=this.contentsArr[e],d.Z.isIE(8)&&(o.render.style.zIndex=0),
o.render.style.visibility="hidden",o.render.style.display="none",o.hidden=!0,s.render.style.display="none",s.render.style.visibility="hidden",s.render.setAttribute("aria-hidden","true"),this.options.tabScrollAuto&&this.options.tabScroll&&(a=this.visibleTabIndex,n=this.getVisibleTab(),c=a+Object.keys(n).length-1,(this.visibleTabIndex==e||c==e||this.visibleTabIndex<e&&c>e)&&(a-=1),this.scrollTab(Math.max(a,0))),t.next=48;break;case 45:t.prev=45,t.t4=t.catch(1),l.Y.printStackTrace(t.t4,null,this);case 48:case"end":return t.stop()}}),t,this,[[1,45]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.showTab=function(){var t=(0,o.A)(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!((e=parseInt(e,10))<0||e>=this.tabArr.length)){t.next=5;break}return t.abrupt("return");case 5:if(0!=h.f.fireEvent(this,"onbeforeshow",this.getSelectedTabIndex(),e)){t.next=8;break}return t.abrupt("return");case 8:if((i=this.tabArr[e]).render.style.visibility="visible",i.render.style.display="",i.hidden=!1,-1!=this.selectedIndex){t.next=17;break}return t.next=15,this.setActiveTab(e);case 15:t.next=18;break;case 17:this.options.tabScrollAuto&&this.options.tabScroll&&this.visibleTabIndex>e&&this.scrollTab(this.visibleTabIndex);case 18:d.Z.isIE(8)&&(i.render.style.zIndex=""),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),l.Y.printStackTrace(t.t0,null,this);case 24:case"end":return t.stop()}}),t,this,[[1,21]])})));return function(e){return t.apply(this,arguments)}}(),m.prototype.getLabelText=function(t){try{return(t=parseInt(t,10))<0||t>=this.tabArr.length?null:this.tabArr[t].tabLabel}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setLabelText=function(t,e){try{if((t=parseInt(t,10))<0||t>=this.tabArr.length)return;1==this.options.tabScroll&&(this.tabArr[t].label=e);for(var i,o=this.tabArr[t],s=0;s<o.render.childNodes.length;s++)if(1==(i=o.render.childNodes[s]).nodeType&&"div"==i.nodeName.toLowerCase())for(var r=0;r<i.childNodes.length;r++){var a=i.childNodes[r];if(1==a.nodeType&&"a"==a.nodeName.toLowerCase())return o.tabLabel=e,a.innerHTML=e,void a.setAttribute("title",e);if(1==a.nodeType&&"div"==a.nodeName.toLowerCase())return o.tabLabel=e,void a.setAttribute("title",e)}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setDisabled=function(t,e){try{t=d.Z.getBoolean(t);if(u.q.prototype.setDisabled.call(this,t),e||this.options.keepDisabledTab)if(t)for(var i=0;i<this.tabArr.length;i++)this.tabArr[i].disabled||this.disabledTabStack.push(this.tabArr[i].tabID),this.disableTab(i);else{for(i=0;i<this.disabledTabStack.length;i++)for(var o=0;o<this.tabArr.length;o++)if(this.tabArr[o].tabID===this.disabledTabStack[i]){this.enableTab(o);break}this.disabledTabStack=[]}else{for(i=0;i<this.tabArr.length;i++)t?this.disableTab(i):this.enableTab(i);this.disabledTabStack=[]}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setSize=function(t,e){try{u.q.prototype.setSize.call(this,t,e)}catch(t){l.Y.printStackTrace(t)}},m.prototype.setSubLayer=function(){try{if(null==this.itemTable){this.itemTable=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.visibleRowNum,col:1,submenuSize:"auto",style:"position:absolute;",defaultStyle:"",className:"w2table ",w2table:"w2table_tabControl",w2table_main:"w2table_tabControl_main",w2table_row:"w2table_tabControl_row",w2table_col:"w2table_tabControl_col",w2table_col_over:"w2table_tabControl_col_over",escape:this.options.escape,useAccessibilityMenu:this.options.useAccessibilityMenu,tableRender:this.options.tableRender,wheelRows:this.options.wheelRows,parent_uuid:this.uuid}),this.itemTable.writeTo(WebSquare.getBody(),null,this.parentFrame),this.itemTable.activate();var t=this;this.itemTable.addClickEventListener(function(){var e=(0,o.A)(r().mark((function e(i,o){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.setSelectedTabIndex(t.getRealTabIndex(o));case 3:t.closeSubLayer();case 4:
case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()),this.itemTable.addKeyDownEventListener(function(){var e=(0,o.A)(r().mark((function e(i){var o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!=(o=i.charCode?i.charCode:i.keyCode)&&32!=o){e.next=9;break}return e.next=5,t.setSelectedTabIndex(t.getRealTabIndex(this.getSelectedIndex()));case 5:t.focus(),t.closeSubLayer(),e.next=10;break;case 9:27==o?(document.getElementById(t.id+"_btn_submenu").focus(),t.closeSubLayer()):t.itemTable.endReached&&(t.itemTable.endReached=!1,document.getElementById(t.id+"_btn_submenu").focus(),t.closeSubLayer());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),!0===this.options.useAccessibilityMenu&&this.itemTable.render.setAttribute("role","dialog")}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setSelectOptions=function(){try{if(null!=this.itemTable){for(var t=[],e=0;e<this.tabArr.length;e++)this.tabArr[e].hidden||"none"==this.tabArr[e].render.style.display||"hidden"==this.tabArr[e].render.style.visibility||t.push(this.tabArr[e]);this.itemTable.setItemArr(t)}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setItemTable=function(){try{for(var t=document.getElementById(this.id+"_btn_submenu"),e=WebSquare.style.getSize(t,"outerMarginHeight"),i=WebSquare.style.getAbsoluteLeft(this.render)+this.render.offsetWidth,o=WebSquare.style.getAbsoluteTop(t)+e,s=0,r=0;r<this.tabArr.length;r++){var a=WebSquare.style.getSize(this.tabArr[r].render,"outerMarginWidth");a>s&&(s=a)}if(null===this.itemTableTdMargin){var n=document.getElementById(this.id+"_itemTable_0");n?this.options.useAccessibilityMenu?this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(n.parentNode,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(n.parentNode,"margin-right"),10)||0:this.itemTableTdMargin=parseInt(WebSquare.style.getStyleProperty(n,"margin-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"padding-left"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"padding-right"),10)||0+parseInt(WebSquare.style.getStyleProperty(n,"margin-right"),10)||0:this.itemTableTdMargin=0}s+=this.itemTableTdMargin;var h=document.getElementById(this.itemTable.id+"_main");WebSquare.style.setStyle(h,"width",s+"px"),WebSquare.style.setStyle(this.itemTable.render,"width",s+"px"),i-=s;var d=document.body.scrollTop;d<document.documentElement.scrollTop&&(d=document.documentElement.scrollTop);var c=o-d;document.documentElement.clientHeight-c<this.itemTable.render.offsetHeight&&(o=o-this.itemTable.render.offsetHeight-e),this.itemTable.setPosition(i,o),WebSquare.style.adjustZIndex(this.uuid,this.itemTable.uuid,"itemTable")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.toggle=function(){try{this.isOpen?this.closeSubLayer():this.openSubLayer()}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.openSubLayer=function(){try{WebSquare.getBody().getLayerListener().show(this.id)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._openSubLayer=function(){try{if(this.setSubLayer(),!this.isOpen){this.itemTable.show(),this.itemTable.render.removeAttribute("aria-hidden"),this.setSelectOptions(),this.setItemTable(),this.itemTable.focus(),this.itemTable.setSelectedIndex(this.selectedIndex),this.isOpen=!0;var t=document.getElementById(this.id+"_btn_submenu");t&&t.setAttribute("aria-expanded",!0),!0===this.options.useAccessibilityMenu&&this.itemTable.render.setAttribute("aria-modal","true")}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.closeSubLayer=function(t){try{var e={documentClick:t};WebSquare.getBody().getLayerListener().hide(this.id,e)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._closeSubLayer=function(t){try{if(this.isOpen&&null!=this.itemTable){
this.itemTable.hide(),this.itemTable.render.removeAttribute("aria-hidden"),this.isOpen=!1;var e=document.getElementById(this.id+"_btn_submenu");e&&e.setAttribute("aria-expanded",!1),!0===this.options.useAccessibilityMenu&&this.itemTable.render.setAttribute("aria-modal","false")}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.finalize=function(){try{for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=d.Z.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.checkLoadEvent=function(t,e,i){try{if(t&&t.render&&t.render.contentWindow){var o=t.render.contentWindow;try{o.WebSquare&&o.WebSquare.scriptSectionExcuteFlag&&"executed"===o.WebSquare.scriptSectionExcuteFlag&&(d.Z.clearInterval(t.id+"_checkLoadEvent"),d.Z.fullViewed&&d.Z.zoomed(o.document.body,"1")),o.WebSquare||d.Z.clearInterval(t.id+"_checkLoadEvent")}catch(o){if(i&&e){var s=this.getTabIndex(i),r=this.tabArr[s];h.f.fireEvent(this,"ondrawcomplete",r.tabID,s,r.userTabID),h.f.fireEvent(this,"ontabload",r.tabID,s,r.userTabID)}d.Z.clearInterval(t.id+"_checkLoadEvent"),l.Y.crossOrigin({message:o.message,name:"checkLoadEvent"})}}}catch(e){t&&d.Z.clearInterval(t.id+"_checkLoadEvent"),l.Y.printStackTrace(e,null,this)}},m.prototype.moveTab=function(t,e){try{if(t===e||t<0||e<0)return;var i=this.tabArr[this.selectedIndex],o=this.tabArr[t].userTabID,s=this.tabArr[e].userTabID;if(!1===h.f.fireEvent(this,"onbeforetabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e}))return;var r=this.getTabHostAndContainer().tabhost,a=t>e?0:1;e<this.getTabCount()-1?r.insertBefore(this.tabArr[t].render,this.tabArr[e+a].render):r.appendChild(this.tabArr[t].render);var n=function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])};n(this.tabArr,t,e),n(this.contentsArr,t,e),n(this.bridgeIdArr,t,e),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&n(this.backbridgeIdArr,t,e);for(var d=0;d<this.tabArr.length;d++)if(this.tabArr[d]===i){this.selectedIndex=d;break}h.f.fireEvent(this,"onaftertabmove",{startTabID:o,startTabIndex:t,endTabID:s,endTabIndex:e})}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.getTabInfo=function(){try{for(var t=[],e=this.getTabCount(),i=d.Z.getDataPrefix("index"),o=0;o<e;o++)t.push({id:this.tabArr[o].userTabID,label:this.tabArr[o].label,defaultTabIndex:Number(this.tabArr[o].render.getAttribute(i))-1,currentTabIndex:o,src:this.contentsArr[o].src,alwaysDraw:this.contentsArr[o].alwaysDraw});return t}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setTabOrder=function(t){try{var e=this.getTabCount();if(t.length!==e)return void c.v.printLog("WARNING !!! : setTabOrder argument array length must be "+e+"["+this.id+"]");for(var i=[],o=0;o<e;o++){var s=this.getTabIndex(t[o]);null==s&&(s=t[o]),i.push(s)}var r=this.getTabHostAndContainer().tabhost;for(o=0;o<e;o++)r.appendChild(this.tabArr[i[o]].render);var a=function(t,e){for(var i=t.splice(0,t.length),o=0;o<i.length;o++)t.push(i[e[o]])};a(this.tabArr,i),a(this.contentsArr,i),a(this.bridgeIdArr,i),this.backbridgeIdArr&&this.backbridgeIdArr.length>0&&a(this.backbridgeIdArr,i),this.selectedIndex=i[this.selectedIndex]}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setTabHTML=function(t,e){try{var i=this._getTabIndex(t);if(!this._isValidTabIndex(i))return;var o=this.tabArr[i];if(e&&o){var s=e;try{var r=d.Z.getGlobalFunction(e,this.scope_id);s="function"==typeof r?r(o.label):r}catch(t){s=e}var a=document.getElementById(o.tabID+"_tabHTML");a&&(a.innerHTML=s,this.options.tabHTML=s)}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setWidth=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.width=t+"px",this.getTabHostAndContainer().container.style.width=t+"px";for(var e=0;e<this.tabArr.length;e++){var i=this.tabArr[e],o=this.contentsArr[e],s=this.getChild(o.contentsID+"_body");i.contentsRender=document.getElementById(i.contentsID),
i.contentsRender.style.width=t+"px",s&&s.render&&(s.render.style.width=t+"px")}}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setHeight=function(t){try{if(t=parseInt(t,10),!isNaN(t)){this.render.style.height=t+"px";var e=this.getTabHostAndContainer(),i=e.container;t-=e.tabhost.clientHeight,i.style.height=t+"px";for(var o=0;o<this.tabArr.length;o++){var s=this.tabArr[o],r=this.contentsArr[o],a=this.getChild(r.contentsID+"_body");s.contentsRender=document.getElementById(s.contentsID),s.contentsRender.style.height=t+"px",a&&a.render&&(a.render.style.height=t+"px")}}}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype.changeTabhostAccessibility=function(t,e){try{if(null==t||null==t||t<0||t>=this.getTabCount())return;if(0==e||e||(e=this.selectedIndex),t==e)return;var i,o,s=this.getTabHostAndContainer().tabhost,r=s.childNodes[t],a=s.childNodes[e];if("image"==this.tabArr[t].tabType?r&&r.firstChild&&(i=r.firstChild):r&&r.firstChild&&r.firstChild.firstChild&&(i=r.firstChild.firstChild),this.tabArr[e]&&"image"==this.tabArr[e].tabType?a&&a.firstChild&&(o=a.firstChild):a&&a.firstChild&&a.firstChild.firstChild&&(o=a.firstChild.firstChild),o&&(!0===this.options.tabRole&&o.setAttribute("aria-selected","false"),this.options.useTabTitleSelected&&o.setAttribute("title",this.tabArr[e].title)),i&&(!0===this.options.tabRole&&i.setAttribute("aria-selected","true"),this.options.useTabTitleSelected)){var n=this.tabArr[t].title;n=WebSquare.language.getMessage("TabControl_selected",n),i.setAttribute("title",n)}return}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._addTabEvent=function(t){try{var e=WebSquare.idCache[t.uuid],i=this.uuid,o=t.tabID,s=t.userTabID,r="on"+e.options.pluginName+"load";e.bind(r,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);h.f.fireEvent(t,"ondrawcomplete",o,e,s),h.f.fireEvent(t,"ontabload",o,e,s)}}));var a="on"+e.options.pluginName+"unload";e.bind(a,(function(){var t=WebSquare.idCache[i];if(t){var e=t.getTabIndex(s);h.f.fireEvent(t,"ontabunload",o,e,s)}}))}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._isValidTabIndex=function(t){try{return!(isNaN(t)||t<0||t>=this.tabArr.length)}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._initializeIScroll=function(){try{d.Z.isTouchDevice()&&(this.iScroll={epsilon:30})}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._hideTooltip=function(){try{this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._showTooltip=function(t,e,i){try{if(!this.tooltip){try{var o=n.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var s=d.Z.getGlobalFunction(o,this.scope_id),r=!0;if("function"==typeof s&&(r=s(this)),!r)return}}catch(t){l.Y.printStackTrace(t)}this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2tabcontrol_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")}this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i}catch(t){l.Y.printStackTrace(t,null,this)}},m.prototype._showTabTooltip=function(t,e){try{if(!0===this.options.useTitleTooltip){if(!t)return;var i=t,o=i.offsetWidth,s=i.offsetHeight,r=20,a=s+3;try{this.options.tooltipPositionX&&(r=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(o,s)),this.options.tooltipPositionY&&(a=new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(o,s))}catch(t){
c.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore options and apply default values.["+this.id+"]"),l.Y.printStackTrace(t,null,this)}var n=WebSquare.style.getAbsoluteLeft(i)+r,h=WebSquare.style.getAbsoluteTop(i)+a;""!=e&&this._showTooltip(n,h,e,a)}}catch(t){l.Y.printStackTrace(t,null,this)}}},6416:function(t,e,i){"use strict";i.r(e),i.d(e,{textarea:function(){return d}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=i(4860),d=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(d.prototype,l.q.prototype),o.q.extend(d.prototype,h.G.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textarea",pluginName:"textarea",userEvents:["oneditend","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","onafterblur"],systemEvents:["onclick","ondblclick","onkeydown","onfocus","onbeforeeditfocus","onfocusin","onblur","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,initValue:"",mandatory:!1,maxlength:-1,minlength:-1,allowChar:"",ignoreChar:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,title:"",wrap:"",readOnlyClass:"w2textarea_readonly",focusRemember:!1,placeholder:"",showPlaceHolderOnReadOnly:!1,name:"",refSyncKeyup:!1,preventCopyPaste:!1,useLocale:!1,placeholderLocaleRef:"",nextTabByEnter:!1},d.prototype.initialize=function(t){try{this.validator=new WebSquare.validator.validateInvoker(this.id,this.options),this.refreshStop=!1,this.caretPosition={start:-1,end:-1},this.rememberCaretPosition=this.options.focusRemember&&s.I.browserCheck.ie&&parseInt(s.I.browserVersion(),10)<10,this._focusStatus="init",this.realValue="",this.supportPlaceholder=!1,this.options.placeholder&&WebSquare.uiplugin.textarea.placeholder&&(this.supportPlaceholder=!0),this.beforeEditValue=""}catch(t){r.Y.printStackTrace(t,null,this)}},d.placeholder="string"==typeof document.createElement("textarea").placeholder,d.prototype.toHTML=function(){try{var t,e=[],i=""==this.options.style?"":"style='"+this.options.style+"'",o=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'",s=""==this.options.title?"":"title='"+this.options.title+"'",a=""==this.options.wrap?"":"wrap='"+this.options.wrap+"'";this.options.useLocale&&this.options.placeholderLocaleRef&&(t=this.getLocaleValue(this.options.placeholderLocaleRef));var n=t||this.options.placeholder,l=""==this.supportPlaceholder?"":" placeholder='"+n+"'",h=""==this.options.name?"":"name='"+this.options.name+"'";return e.push("<textarea id='"+this.id+"' "+i+" class='w2textarea "+this.options.className+"' "+s+" "+a+" "+o+" "+l+" "+h+">"),e.push("</textarea>"),e.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setAction=function(){try{this.options.placeholder&&n.Z.isIEAllVersion()&&this.options.placeholder===this.render.value&&(this.render.value=""),this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.addEvent("oneditend",(function(){if(!this.options.placeholder||this.supportPlaceholder||0!=this.realValue.length||!this.render.className.match("w2textarea_placeholder")){var t=this.getValue(),e=t;-1!=this.options.maxByteLength&&(t=n.Z.getStringByByteSize(t,this.options.maxByteLength)),t=this.validator.validateString(t),this.options.focusRemember&&e==t||this.setValueNM(t)}})),this.options.maxlength>0&&this.render.setAttribute("maxlength",this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),(n.Z.isIEAllVersion()||n.Z.isSpartan())&&(this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent)),this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent))),this.options.preventCopyPaste&&(n.Z.isOpera()&&(this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){
a.f.stopEvent(t),this.focus()}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){t.ctrlKey&&(88!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode||a.f.stopEvent(t))})))),this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){a.f.stopEvent(t)})))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusEvent)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.rememberCaretPosition&&this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")),this.refresh()}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.getValue(),e=this.modelControl.getData();this.setValueNM(e),t!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:t,newValue:this.getValue()})}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{if(n.Z.isNull(t))return;var e=this.getValue();this.setValueNM(t),this.modelControl.setData(t),e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setValueNM=function(t){try{if(n.Z.isNull(t)||this.refreshStop)return;t=t.toString(),this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2textarea_placeholder")||this.addClass("w2textarea_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2textarea_placeholder"),this.render.value=t):this.render.value=t,this.realValue=t}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.refreshStop?this.refreshStopValue:this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2textarea_placeholder")?"":this.render.value}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.validate=function(){try{var t=this.validator.validate(this.getValue());return t||this.focus(),t}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setInitValue=function(t){try{var e=this.getValue();this.setValueNM(this.options.initValue),this.modelControl.setData(this.options.initValue),t.fireEvent&&e!=this.getValue()&&a.f.fireEvent(this,"onchange",{oldValue:e,newValue:this.getValue()})}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2textarea_disabled"):this.removeClass(this.render,"w2textarea_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":
1==e?this.addClass(this.render,"w2textarea_mandatory"):this.removeClass(this.render,"w2textarea_mandatory")}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.Y.printStackTrace(t)}},d.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleFocusEvent=function(t){try{this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2textarea_placeholder")),this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render));var e=this;WebSquare.historyManager.set(this.options.pluginName,this.id,{value:this.getValue()},{onRestore:function(t){e.refreshStop=!0,e.refreshStopValue=t.value;var i=e.refreshStopValue;if(!n.Z.isNull(i)){var o=e.render.value;e.setValueNM(i),e.modelControl.setData(i),o!=i&&a.f.fireEvent(e,"onchange",{oldValue:o,newValue:i}),e.refreshStop=!1,e.refreshStopValue=""}}}),this._focusStatus="done"}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleBlurEvent=function(t){try{if(a.f.fireEvent(this,"oneditend"),this.options.focusRemember){var e=this.getValue();if(n.Z.isNull(e))return;this.modelControl.setData(e)}else this.setValue(this.getValue());var i=WebSquare.historyManager.get(this.options.pluginName,this.id);i.value!=this.getValue()&&(a.f.fireEvent(this,"onchange",{oldValue:i.value,newValue:this.getValue()}),a.f.fireEvent(this,"onviewchange",{oldValue:i.value,newValue:this.getValue()})),a.f.fireEvent(this,"onafterblur",t),this._focusStatus="init"}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode,o=!0;if(13==i&&(this._handleDownKey=!0),9!=i&&13!=i||(o=a.f.fireEvent(this,"oneditenter",t)),9==i||13==i&&!0===this.options.nextTabByEnter)if(!1!==o)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if(a.f.preventDefault(t),e=n.Z.getPreTabbableComp(this.id))return void e.focus(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if(a.f.preventDefault(t),e=n.Z.getNextTabbableComp(this.id))return void e.focus(t);this.beforeEditValue=this.getValue()}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleKeypressEvent=function(t){try{13!=(t.charCode?t.charCode:t.keyCode)||this._handleDownKey||a.f.stopEvent(t),this.validator.validateKeyPress(this.render,this.getValue(),t)||a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=!1,i=t.charCode?t.charCode:t.keyCode;if(37==i);else if(38==i);else if(39==i);else if(40==i);else if(33==i);else if(34==i);else if(35==i);else if(36==i);else if(13==i&&(this._handleDownKey=!1),this.options.maxlength>-1)if(n.Z.isIE()){var o=WebSquare.text.getSelection(this.render);0!=t.charCode&&o.start==o.end&&this.render.value.length+1>this.options.maxlength&&(e=!0)}else this.render.value.length>this.options.maxlength&&(e=!0);if(-1!=this.options.maxByteLength)(s=this.render.value)!=n.Z.getStringByByteSize(s,this.options.maxByteLength)&&(e=!0);if(this.rememberCaretPosition&&(this.caretPosition=WebSquare.text.getSelection(this.render)),e&&(this.render.blur(),this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):this.render.focus()),-1!=this.options.maxByteLength){
var s=this.render.value,l=n.Z.getByteLength(s)===this.options.maxByteLength&&!0!==n.Z.isKorean(s.charAt(s.length-1)),h=n.Z.getByteLength(s)>this.options.maxByteLength;if(l||h){var d={value:this.getValue(),keyCode:i};a.f.fireEvent(this,"oneditfull",d)}}d={oldValue:this.beforeEditValue,newValue:this.getValue(),keyCode:i};a.f.fireEvent(this,"oneditkeyup",d,t)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.focus=function(){this.rememberCaretPosition?WebSquare.text.setSelection(this.render,this.caretPosition):l.q.prototype.focus.call(this)},d.prototype.handleMouseupEvent=function(t){this.caretPosition=WebSquare.text.getSelection(this.render)},d.prototype.handleFocusinEvent=function(t){this._focusStatus="focusin"},d.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},d.prototype.setPlaceholder=function(t){try{if(n.Z.isNull(t))return;if(this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.render.disabled||this.render.readOnly?this.options.placeholder="":this.hasClass("w2textarea_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2textarea_placeholder")))}catch(t){r.Y.printStackTrace(t)}},d.prototype.setDisabled=function(t){try{if(t=n.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t)}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.Y.printStackTrace(t)}return t},d.prototype.setReadOnly=function(t){try{if(t=n.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t)}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder)}catch(t){r.Y.printStackTrace(t,null,this)}return t},d.prototype.commit=function(){try{this.setValue(this.getValue())}catch(t){r.Y.printStackTrace(t,null,this)}}},3870:function(t,e,i){"use strict";i.r(e),i.d(e,{textbox:function(){return d}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2256),h=i(2406),d=function(t,e,i){if(h.q.call(this,t,e,i),i){var o=WebSquare.Elem.api.getLocalName(i);"textbox"!=o&&(this.options.tagname=o)}""!=this.options.for&&(this.options.tagname="label")};o.q.extend(d.prototype,h.q.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.textbox",pluginName:"textbox",serializable:!0,parseAttributes:!0,userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onmouseover","onmouseout"],useConfig:!0,label:"",escape:!0,escapeFormatter:"",for:"",tagname:"div",localeRef:"",useLocale:!1,ioFormat:"",displayFormat:"",displayFormatter:null,dataType:"text",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",initStyle:!1,tooltipClass:"",tooltipTime:1,tooltipDisplay:!1,tooltipPositionX:"",tooltipPositionY:"",tooltipShowAlways:!1},d.prototype.htmlStr=["<",""," id='","","' ",""," class='w2textbox ","","' ","",">","","</","",">"],
d.prototype.htmlClosingStr=["<",""," id='","","' ",""," class='w2textbox ","","'",""," />"],d.prototype.initialize=function(t){if(this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter="-")}this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.useEscapeFormatter=!1,this.tooltipPositionParse=!1},d.prototype.toHTML=function(){s.I._scopeOption(this,"for");var t=s.I.getEmptyTag(),e="",i="";if(""!=this.options.for&&(i=" for='"+this.options["_for".slice(1)]+"'"),t[this.options.tagname.toLowerCase()])(e=this.htmlClosingStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":" style='"+this.options.style+"'",e[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",e[7]=this.options.className,e[9]=("label"==this.options.tagname?i:"")+this.getAttributesString();else{(e=this.htmlStr)[1]=this.options.tagname,e[3]=this.id,e[5]=""==this.options.style?"":"style='"+this.options.style+"'",e[5]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",e[7]=this.options.className,e[9]=("label"==this.options.tagname?i:"")+this.getAttributesString();var o="";if(o=this.options.escapeFormatter?this.setEscapeFormatter():this.options.escape?this.formatter.format(WebSquare.xml._encode(this.options.label)):this.formatter.format(this.options.label),1==this.options.useLocale&&""!=this.options.localeRef){var r=this.getLocaleValue(this.options.localeRef);r&&(o=r)}e[11]=o,e[13]=this.options.tagname}return e.join("")},d.prototype.setEscapeFormatter=function(){try{if(this.options.escapeFormatter){try{if("function"==typeof this.options.escapeFormatter)this.useEscapeFormatter=!0;else{var t=n.Z.getGlobalFunction(this.options.escapeFormatter,this.scope_id);this.options.escapeFormatter=t,"function"==typeof t&&(this.useEscapeFormatter=!0)}}catch(t){l.v.printLog("cannot find function : "+this.options.escapeFormatter+"["+this.id+"]")}var e=this.options.label;return this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e)}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.onComplete=function(){this.options.escapeFormatter&&!this.useEscapeFormatter&&(this.render.innerHTML=this.setEscapeFormatter()),h.q.prototype.onComplete.call(this)},d.prototype.setAction=function(){try{if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.refresh(),
this.options.tooltipDisplay&&(this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent))),"label"!=this.options.tagname||""==this.options.for)return;s.I._scopeOptionApply(this,"for")}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setLocaleRef=function(t){try{this.options.localeRef=t,this.displayLocaleValue()}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.refresh=function(){try{if(this.modelControl.isBinded()){var t=this.modelControl.getData();this.options.label=t,this.useEscapeFormatter&&(t=this.options.escapeFormatter.call(this,t)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(t+"")):this.formatter.format(t),this.options.label=t}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setLabel=function(t){try{this.setValue(t)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getLabel=function(){try{return this.getValue()}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setValue=function(t){try{this.options.label=t;var e=this.options.label;this.useEscapeFormatter&&(e=this.options.escapeFormatter.call(this,e)),this.render.innerHTML=this.options.escape?this.formatter.format(WebSquare.xml._encode(e+"")):this.formatter.format(e),this.modelControl.setData(t)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getValue=function(){try{return this.options.escape?WebSquare.xml._decode(this.options.label+""):this.options.label}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getFormatValue=function(){try{return this.options.escape?this.formatter.format(WebSquare.xml._decode(this.options.label+"")):this.formatter.format(this.options.label)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setDisplayFormatter=function(t){try{this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,null,null,this.scope_id,this.id),this.setValue(this.options.label)}catch(t){r.Y.printStackTrace(t)}},d.prototype.getDataType=function(){try{return this.options.dataType}catch(t){r.Y.printStackTrace(t)}},d.prototype.addClass=function(){try{h.q.prototype.addClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.removeClass=function(){try{h.q.prototype.removeClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.changeClass=function(){try{h.q.prototype.changeClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.toggleClass=function(){try{h.q.prototype.toggleClass.apply(this,arguments)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getAttributeNode=function(t){try{return h.q.attributes.getAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},d.prototype.setAttributeNode=function(t,e){try{h.q.attributes.setAttributeNode.call(this,t,e)}catch(t){r.Y.printStackTrace(t)}},d.prototype.removeAttributeNode=function(t){try{h.q.attributes.removeAttributeNode.call(this,t)}catch(t){r.Y.printStackTrace(t)}},d.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){r.Y.printStackTrace(t)}},d.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){r.Y.printStackTrace(t)}},d.prototype.unbindRef=function(){try{
this.modelControl.isBinded()&&(this.options.ref="",this.modelControl.unbindRef(),this.refresh())}catch(t){r.Y.printStackTrace(t)}},d.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var a=s.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(a){var l=n.Z.getGlobalFunction(a,o.scope_id),h=!0;if("function"==typeof l&&(h=l(o)),!h)return}}catch(t){r.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2textbox_tooltip "+this.options.tooltipClass,style:"position:absolute;z-index:10000;"+this.options.tooltipStyle}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),i=this.options.escape?WebSquare.xml._encode(i):i.wq_replaceAll("&amp;nbsp;","&nbsp;").wq_replaceAll("&amp;nbsp","&nbsp;"),this.tooltip.render.innerHTML=i})),100*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.serialize=function(){return{value:this.getValue()}},d.prototype.restore=function(t){try{this.setValue(t.value)}catch(t){return r.Y.printStackTrace(t,null,this),!1}return!0},d.prototype.handleMouseoverEvent=function(t){try{var e=a.f.getTarget(t);if(e){var i=e,o=WebSquare.style.getStyle(e,"text-overflow"),s=e.offsetWidth,h=e.offsetHeight,d=20,c=h+3;try{this.options.tooltipPositionX&&(d=this.options.tooltipPositionX.indexOf("cellWidth")>-1||this.options.tooltipPositionX.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionX)(s,h):new Function("width","height","return "+this.options.tooltipPositionX)(s,h)),this.options.tooltipPositionY&&(c=this.options.tooltipPositionY.indexOf("cellWidth")>-1||this.options.tooltipPositionY.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+this.options.tooltipPositionY)(s,h):new Function("width","height","return "+this.options.tooltipPositionY)(s,h))}catch(t){l.v.printLog("An error occurred while applying the tooltipPosistion option. Ignore the options and apply the default value. ["+this.id+"]"),r.Y.printStackTrace(t,null,this)}var u=WebSquare.style.getAbsoluteLeft(e)+d,p=WebSquare.style.getAbsoluteTop(e)+c,g=i.innerText.wq_trim();if(this.options.tooltipFormatter)try{var m=n.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);"function"==typeof m&&(g=m(this.id,g))}catch(t){r.Y.printStackTrace(t,null,this)}if(this.options.tooltipItemLabel&&(g=this.options.tooltipItemLabel),!0===this.options.tooltipShowAlways)this.showTooltip(u,p,g);else if("ellipsis"==o){this.toolTipRuler||(this.toolTipRuler=document.createElement("span"),this.toolTipRuler.style.position="absolute",this.toolTipRuler.style.visibility="hidden",this.toolTipRuler.style.left="0px",this.toolTipRuler.style.top="0px"),document.body.appendChild(this.toolTipRuler),this.toolTipRuler.className=i.className,this.toolTipRuler.innerHTML=i.innerHTML,this.toolTipRuler.style.fontSize=WebSquare.style.getStyle(i,"font-size"),this.toolTipRuler.style.fontFamily=WebSquare.style.getStyle(i,"font-family"),this.toolTipRuler.style.fontWeight=WebSquare.style.getStyle(i,"font-weight");var f=this.toolTipRuler.offsetWidth,b=e.clientWidth;if(3!=i.nodeType){var y=WebSquare.style.getStyle(this.toolTipRuler,"padding-left"),v=WebSquare.style.getStyle(this.toolTipRuler,"padding-right");f-=parseInt(y||"0",10),
f-=parseInt(v||"0",10),b-=parseInt(WebSquare.style.getStyle(e,"padding-left"),10),b-=parseInt(WebSquare.style.getStyle(e,"padding-right"),10)}document.body.removeChild(this.toolTipRuler),b<f&&this.showTooltip(u,p,g)}}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t),this.hideTooltip()}catch(t){r.Y.printStackTrace(t,null,this)}}},8824:function(t,e,i){"use strict";i.r(e),i.d(e,{treeview:function(){return g}});var o=i(2284),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(2256),d=i(2406),c=i(3406),u=function(){this.index=-1,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=!1};u.prototype.appendChild=function(t){if(!t)return!1;var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,this.childNodes.push(t),!0},u.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},u.prototype.isRoot=function(){return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},u.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild)},u.prototype.isLeaf=function(){return!this.hasChild()},u.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},u.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},u.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},(u.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=s.q.extend({type:"dfs",pruning:null},s.q.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},u.nodeIterator.prototype.stop=function(){this.status=2},u.nodeIterator.prototype.getNode=function(){return this.node};var p=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;var t="w2:";this.xpath={nodeset:"",label:t+"label",value:t+"value",depth:t+"depth",nodeName:t+"node",checkbox:"",folder:t+"folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.isInstance=!1};p.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},p.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},p.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,this.dataPath.checkbox=r},p.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,
this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},p.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},p.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},p.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),1==this.useImage&&this.parseImage(this.rootNode)))},p.prototype.appendXML=function(t,e,i){if(t){var o=i||{},s=this.findNodeByIndex(e),r=s.element,a=1;if(1==this.isInstance||o.xmlNodeStyle){for(var n=t.firstChild;null!=n;n=t.firstChild)1==n.nodeType&&n.tagName==this.xpath.nodeName&&s.appendChild(this.parseNodeInstance(n,s.depth+1,a++,s)),r.appendChild(t.removeChild(n));1==this.useImage&&this.parseImageInstance(s)}else{for(var l=t.getChildNodes(),h=0;h<l.length;h++)1==(n=l[h]).nodeType&&n.getTagName()==this.xpath.nodeName&&s.appendChild(this.parseNode(n,s.depth+1,a++,s)),r.appendChild(t.removeChild(n));1==this.useImage&&this.parseImage(s)}return s}},p.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null;var s=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),r=!1,a=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();if(this.xpath.folder){var n=WebSquare.xml.getValue(t,this.xpath.folder).wq_trim();this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.xml.getValue(t,h[d]).wq_trim();var c=new u;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":default:c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":c.label=s+this.delimiter+l}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=a,1==e?this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,
1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=1,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&c.appendChild(this.parseNodeInstance(f,e+1,m++,c));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(d=0;d<c.childNodes.length;d++){var v=c.childNodes[d];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<c.childNodes.length?c.partial=!0:b>0&&b==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(c),_=w.call(this.treeview,c.orgLabel,c.label,S)||c.label;c.label=_}return c},p.prototype.parseNode=function(t,e,i,o){if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=!1,a=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder){var n=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);this.treeview&&this.treeview.options&&this.treeview.options.trueValue&&(r=n==this.treeview.options.trueValue),"true"!=n.toLowerCase()&&"false"!=n.toLowerCase()||(r="true"==n)}for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[d],this.valueAttribute);var c=new u;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":default:c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":c.label=s+this.delimiter+l}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=a,1==e?this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,p==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var m=1,f=t.getChildNodes();for(d=0;d<f.length;d++){var b=f[d];1==b.nodeType&&b.getTagName()==this.xpath.nodeName&&c.appendChild(this.parseNode(b,e+1,m++,c))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var y=0,v=!1;for(d=0;d<c.childNodes.length;d++){var w=c.childNodes[d];1==w.checked?y++:1==w.partial&&(v=!0)}
1==v||0<y&&y<c.childNodes.length?c.partial=!0:y>0&&y==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var S=this.customFormatter,_=this.getCloneNode(c),C=S.call(this.treeview,c.orgLabel,c.label,_)||c.label;c.label=C}return c},p.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new u;s.index=this.nodeCount++,s.depthIndex=i,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=t.element.cloneNode(!0),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled);for(var r=1,a=0;a<t.childNodes.length;a++)s.appendChild(this.parseNodeByNode(t.childNodes[a],e+1,r++,s));return this.hash_index_node[s.index]=s,s},p.prototype.parseImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==s&&(s=e),this.treeview&&this.treeview.getURL,t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),t.expandedImage=""==s?"":this.treeview.getURL(s),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImage(t.childNodes[n])},p.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),this.treeview&&this.treeview.getURL,t.image=""==e?"":this.treeview.getURL(e),t.selectedImage=""==o?"":this.treeview.getURL(o),t.expandedImage=""==s?"":this.treeview.getURL(s),t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImageInstance(t.childNodes[n])},p.prototype.parseListToTree=function(t){
for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},p.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r);else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},p.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var s=null;s=t[o],i.appendChild(s._element)}return i}for(o=0;o<t.length;o++){s=null;s=l.Z.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,s)}return e.documentElement},p.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},p.prototype.getNodeIterator=function(t){return t=s.q.extend({rootNode:null},t||{}),new u.nodeIterator(t.rootNode||this.rootNode,t)},p.prototype.size=function(){return this.nodeCount},p.prototype.findNodeByValue=function(t){for(var e=null,i=this.getNodeIterator();i.next();)if(i.getNode().value==t){e=i.getNode();break}return i=null,e},p.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},p.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},p.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},p.prototype.clearNode=function(t){t.element=null,t.parentNode=null,t.childNodes=[],delete this.hash_index_node[t.index]},p.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,delete this.hash_index_node[t],this.hash_index_node[e]=i,this.changeDomIndex("node",t,e,!0),this.changeDomIndex("group",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),this.changeDomIndex("guideline",t,e),this.changeDomIndex("child",t,e),this.changeDomIndex("col_icon_navi",t,e),i.checkboxDom&&(i.checkboxDom=null,
delete i.checkboxDom)},p.prototype.changeDomIndex=function(t,e,i,o){var s=document.getElementById(this.treeview.id+"_"+t+"_"+e);if(null!=s&&(s.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o)){var r=l.Z.getDataPrefix("index");s.setAttribute(r,i)}},p.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i};var g=function(t,e,i){d.q.call(this,t,e,i)};s.q.extend(g.prototype,d.q.prototype),g.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.treeview",pluginName:"treeview",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","ontoggleclick","onviewchange","oneditend","onlabelover","ontooltipshow","ontooltiphide"],repeatNode:"",useDrag:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,imgclass:"",labelclass:"",labelonClickClass:"w2treeview_select_node",defaultImage:"",iconImage:"",selectedImage:"",expandedImage:"",leafImage:"",showTreeDepth:1e3,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,rowHeight:-1,toggleEvent:"ondblclick",tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,asisAccessibility:void 0,accessibility:!1,autoSelectByFocus:!1,title:"",accordion:!1,dynamicAppend:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:s.q._resourceURI+"uiplugin/treeview/images/plus.gif",folderCloseToggleImage:s.q._resourceURI+"uiplugin/treeview/images/minus.gif",leafToggleImage:s.q._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:s.q._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:s.q._resourceURI+"uiplugin/treeview/images/middle.gif",escape:!0,toggleButtonEvent:"onclick",scrollFix:!1,animation:"",renderType:"table",noFocusOnIconLabelClick:!1,useHirarchySelect:!1,forceRefresh:!1,moveSibling:!1,useXML:!1,iconNaviAriaLabel:""},g.prototype.initialize=function(t){try{switch(this.inlineElement=!1,1==this.options.hierarchy&&(this.options.checkAllChildNodes=!0),this.tree=new p,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.openedNodes={},this.originalBackgroundColor="",this.originalColor="",this.originalIconImage="",this.options.animation=this.options.animation?this.options.animation:"",this.options.asisAccessibility=!!t&&l.Z.getBoolean(t.getAttribute("asisAccessibility")),(this.options.asisAccessibility||this.options.accessibility)&&(this.options.lineShow=!1),1==this.options.accordion&&(this.options.showTreeDepth=0),this.useDataCollection=!1,this.successBinding=!1,this.beforeSetRowData={},this.editModeComp=null,this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}if(this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.options.customFormatter&&(this.tree.customFormatter=l.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)),this.resizeObj={width:0,height:0},t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1);var i=null,o=WebSquare.Elem.api.getElementsByTagName(t,"itemset",r.I._XML_NAMESPACE.W2)[0];if(o){var s=WebSquare.Elem.api.getValue(o,"@nodeset"),n=null;this.useDataCollection=s.match("data:")
;if(this.useDataCollection){this.modelControl.getDataCollectionItemsetData(this.modelControl.id);var h=this.modelControl.getDataComp();if(null!=h){var d=0===h.filterManager.filterArr.length?h.getAllXML():h.getAllFilteredXML(),c=WebSquare.xmljs.xml2json(d).E[0];n=new WebSquare.Elem(c).getChildNodes(),s=h.options.baseNode+"/"+h.options.repeatNode;var u=h.options.repeatNode.split("/");if(0!=u.length&&u.length>1){for(var g=[],m=0;m<n.length;m++)g.push(n[m].getChildNodes()[0]);n=g}h.options.valueAttribute&&(this.tree.valueAttribute=h.options.valueAttribute),this.successBinding=!0}}else{n=WebSquare.ModelUtil.findInstanceNodes(s,null,this.scope_id);this.tree.isInstance=!0}var f=s.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);f&&(f=f[0]);var b=WebSquare.Elem.api.getElementsByTagName(o,"label",r.I._XML_NAMESPACE.W2)[0],y=WebSquare.Elem.api.getElementsByTagName(o,"value",r.I._XML_NAMESPACE.W2)[0],v=WebSquare.Elem.api.getElementsByTagName(o,"depth",r.I._XML_NAMESPACE.W2)[0],w=WebSquare.Elem.api.getElementsByTagName(o,"folder",r.I._XML_NAMESPACE.W2)[0],S=b?WebSquare.Elem.api.getValue(b,"@ref"):"",_=y?WebSquare.Elem.api.getValue(y,"@ref"):"",C=v?WebSquare.Elem.api.getValue(v,"@ref"):"",x=w?WebSquare.Elem.api.getValue(w,"@ref"):"",I=WebSquare.Elem.api.getElementsByTagName(o,"image",r.I._XML_NAMESPACE.W2)[0],T=WebSquare.Elem.api.getElementsByTagName(o,"iconImage",r.I._XML_NAMESPACE.W2)[0],k=WebSquare.Elem.api.getElementsByTagName(o,"selectedImage",r.I._XML_NAMESPACE.W2)[0],L=WebSquare.Elem.api.getElementsByTagName(o,"expandedImage",r.I._XML_NAMESPACE.W2)[0],A=WebSquare.Elem.api.getElementsByTagName(o,"leafImage",r.I._XML_NAMESPACE.W2)[0],D=WebSquare.Elem.api.getElementsByTagName(o,"checkboxDisabled",r.I._XML_NAMESPACE.W2)[0],W=WebSquare.Elem.api.getElementsByTagName(o,"checkbox",r.I._XML_NAMESPACE.W2)[0],q=WebSquare.Elem.api.getElementsByTagName(o,"imageTitle",r.I._XML_NAMESPACE.W2)[0],M=I?WebSquare.Elem.api.getValue(I,"@ref"):"",E=T?WebSquare.Elem.api.getValue(T,"@ref"):"",R=k?WebSquare.Elem.api.getValue(k,"@ref"):"",N=L?WebSquare.Elem.api.getValue(L,"@ref"):"",F=A?WebSquare.Elem.api.getValue(A,"@ref"):"",O=D?WebSquare.Elem.api.getValue(D,"@ref"):"",B=q?WebSquare.Elem.api.getValue(q,"@ref"):"",P=W?WebSquare.Elem.api.getValue(W,"@ref"):"",Y=P;this.useDataCollection&&this.tree.setDataPath(S,_,C,f,x,Y),""!=this.options.defaultImage&&(M=this.options.defaultImage),""!=this.options.iconImage&&(E=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),""!=this.options.checkboxDisabled&&(O=this.options.checkboxDisabled),this.tree.setXPath(s,S,_,C,f,x),this.tree.setCheckbox(Y,this.options.trueValue,this.options.falseValue,O,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,P),this.tree.setImage(M,E,F,R,N,B),null!=n&&("recursive"==this.options.dataType?i=this.tree.parseRecursiveToTree(n):"listed"==this.options.dataType&&(i=1==this.tree.isInstance?this.tree.parseListToTreeInstance(n):this.tree.parseListToTree(n)))}else{this.inlineElement=!0,i=t;var V="w2:";M=V+"image",E=V+"iconImage",R=V+"selectedImage",N=V+"expandedImage",F=V+"leafImage";""!=this.options.defaultImage&&(M=this.options.defaultImage),""!=this.options.iconImage&&(E=this.options.iconImage),""!=this.options.selectedImage&&(R=this.options.selectedImage),""!=this.options.expandedImage&&(N=this.options.expandedImage),""!=this.options.leafImage&&(F=this.options.leafImage),this.tree.setImage(M,E,F,R,N,V+"imageTitle"),
this.tree.setCheckbox(V+"checkbox",this.options.trueValue,this.options.falseValue,V+"checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy)}i&&this.tree.setXML(i)}this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==l.Z.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.isFireTooltipEvent=!1,this.options.useHirarchySelect&&(this.selectedInfoStack=[])}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.appendData=function(t,e,i,o){try{var s=o||{};if(0==this.options.dynamicAppend){var r=WebSquare.language.getMessage("Treeview_warning1")||"If you are processing the treeview dynamically, it is recommended to set dynamicAppend='true'";$l(r+"["+this.id+"]")}if(void 0===t||null==t||!e)return;i=void 0!==i&&i;var n=this.tree.findNodeByIndex(t);if(!i&&n.childNodes&&n.childNodes[0]&&n.childNodes[0].rendered)return;var l=null;if(1==this.tree.isInstance||!0===s.xmlNodeStyle)var h=e;else if(e[0]){var d=e[0].parentNode;h=new WebSquare.Elem(WebSquare.xmljs.xml2json(d)).getChildNodes()}"recursive"==this.options.dataType?l=this.tree.parseRecursiveToTree(h):"listed"==this.options.dataType&&(l=1==this.tree.isInstance||!0===s.xmlNodeStyle?this.tree.parseListToTreeInstance(h):this.tree.parseListToTree(h)),this.tree.appendXML(l,t,s),0==t?(n.hasChild(),this.drawContents()):(this.refreshNaviIcon(n),n.childNodes.length>0&&(n.childNodes[0].rendered=!1,this.toggleChild(null,n.index,!0)))}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.toHTML=function(){try{var t=l.Z.getDataPrefix("index"),e=[],i=""==this.options.style?"":"style='"+this.options.style+"' ",o="",s=""==this.options.title?"":"title='"+this.options.title+"'",r="";return this.options.accessibility?r="class='w2treeview_standard "+this.options.className+"' ":(o=""==this.options.tabIndex?"tabindex='0'":"tabIndex='"+this.options.tabIndex+"'",r="class='w2treeview "+this.options.className+"' "),e.push("<div "+o+" id='"+this.id+"' "+t+"='0' "+i+r+s+">"),e.push("</div>"),e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setAction=function(){try{var t;this.useDataCollection&&(t=this.modelControl.getDataComp())&&t._getDelayedRefreshComponent&&t._getDelayedRefreshComponent(this.id)&&(this.refreshItemset(),t._setDelayedRefreshComponent(this.id,!1)),this.useDataCollection&&!this.successBinding||(this.tree.rootNode&&this.drawContents(),"none"!=this.options.toggleEvent&&this.event.addListener(this.render,this.options.toggleEvent,this.event.bindAsEventListener(this,this.handleToggleEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",(function(t){n.f.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.options.accessibility?this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownAccessbilityEvent)):this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.refreshStop=!1,this.useDataCollection&&t.bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck)))}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.refreshItemset=function(t){try{
if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this.refreshStop=!0;var e=null,i=this.tree.getNodeset(),o=null,s=!1;if(this.useDataCollection){if(null!=(m=this.modelControl.getDataComp())){this.tree.isInstance=!1;var r="";if(m.options&&"string"==typeof m.options.repeatNode){var n=(r=m.options.repeatNode).lastIndexOf("/");n>=0&&(r=r.slice(n+1))}var l=0===m.filterManager.filterArr.length?m.getAllXML({repeatNode:r}):m.getAllFilteredXML({repeatNode:r}),h=WebSquare.xmljs.xml2json(l).E[0];if(o=new WebSquare.Elem(h).getChildNodes(),!this.successBinding){var d=(i=m.options.baseNode+"/"+m.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);d&&(d=d[0]),m.options.valueAttribute&&(this.tree.valueAttribute=m.options.valueAttribute);var c=this.tree.xpath.label,u=this.tree.xpath.value,p=this.tree.xpath.depth,g=this.tree.xpath.folder;this.tree.setXPath(i,c,u,p,d,g),this.successBinding=!0,s=!0}}}else o=WebSquare.ModelUtil.findInstanceNodes(i,null,this.scope_id);null!=o&&("recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=1==this.tree.isInstance?this.tree.parseListToTreeInstance(o):this.tree.parseListToTree(o))),this.tree.setXML(e);var m,f=this.selectedInfo.node;if(s)if(t&&!0===t.setNodeSet){if(this.drawContents(),this.useDataCollection)(m=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.drawContents();if(this.useDataCollection&&null!=f)null!=(m=this.modelControl.getDataComp())&&null!=m.getRowPosition()&&this.selectNode2(f);this.refreshStop=!1}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.refreshItemArr=function(){this.refreshItemset()},g.prototype.drawContents=function(){try{this.selectedInfo={dom:null,node:null},this.initRenderStatus();var t=[];if(this.options.accessibility)t.push(this._rootNodeToHTMLForAccessibility(this.tree.rootNode,!1));else for(var e=0;e<this.tree.rootNode.childNodes.length;e++)t.push(this.nodeToHTML(this.tree.rootNode.childNodes[e]));this.render.innerHTML=t.join(""),this.tree.rootNode.childNodes.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight}),this.options.accessibility&&(this.dom.firstIconNavi=this.getElementById(this.id+"_col_icon_navi_1"),this.dom.firstIconNavi&&this.event.addListener(this.dom.firstIconNavi,"onfocus",this.event.bindAsEventListener(this,this.handleIconNaviFocusEvent)))}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.selectNode=function(t,e,i,o){try{i=void 0===i||i;var s=l.Z.getBoolean(this.options.useHirarchySelect),r=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,h=null;if(null!=t?h=this.tree.findNodeByValue(t):null!=e&&(h=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),this.selectedInfo.node){var d=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);d&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(d.style.backgroundImage=this.originalIconImage)}if(s&&this.selectedInfoStack.length>0){for(var c=0;c<this.selectedInfoStack.length;c++){var u=this.selectedInfoStack[c];u.dom&&(this.removeClass(u.dom,this.options.labelonClickClass),u.dom.style.backgroundColor=u.org.background,u.dom.style.color=u.org.color),u.icon&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(u.icon.style.backgroundImage=u.org.iconImage)}this.selectedInfoStack=[]}if(null!=r&&null!=h?r.index!=h.index&&n.f.fireEvent(this,"onchange",r,h):(null==r&&null!=h||null!=r&&null==h)&&n.f.fireEvent(this,"onchange",r,h),this.selectedInfo.node=h,null!=this.selectedInfo.node&&i){for(var p=this.selectedInfo.node.parentNode,g=[];p;){e=p.index;g.push(e),p=p.parentNode}
for(var c in g.reverse(),g)this.toggleChild(null,g[c],!0)}this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.options.accessibility?this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index):this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color;var m=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);if(m&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(this.originalIconImage=m.style.backgroundImage),s){for(p=this.selectedInfo.node;p;){var f=document.getElementById(this.id+"_label_"+p.index),b=document.getElementById(this.id+"_icon_"+p.index);this.selectedInfoStack.push({node:p,groupDom:document.getElementById(this.id+"_group_"+p.index),dom:f,org:{background:f?f.style.backgroundColor:null,color:f?f.style.color:null,iconImage:b?b.style.backgroundImage:null},icon:b}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),this.selectedInfoStack[this.selectedInfoStack.length-1].iconv&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfoStack[this.selectedInfoStack.length-1].node.selectedImage&&(this.selectedInfoStack[this.selectedInfoStack.length-1].icon.style.backgroundImage="url('"+this.selectedInfoStack[this.selectedInfoStack.length-1].node.selectedImage+"')"),p=p.parentNode}this.selectedInfoStack.reverse()}if(m&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(m.style.backgroundImage="url('"+this.selectedInfo.node.selectedImage+"')"),this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color="",!0!==o&&(this.options.scrollFix||(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1)),this.useDataCollection&&this.successBinding)){var y=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var v in y.refCompHash){var w=y.refCompHash[v];null!=w&&WebSquare.idCache[w.uuid]&&"input"==w.options.pluginName&&w.setValue(w.getValue())}y.setRowPosition(this.selectedInfo.node.index-1)}else y.setRowPosition(null)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.selectNode1=function(t,e,i,o){try{if(null!=this.selectedInfo.node){var s=this.tree.getCloneNode(this.selectedInfo.node),r=s.index;if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node)if(r!=this.selectedInfo.node.index){var l={oldNode:s,newNode:this.tree.getCloneNode(this.selectedInfo.node)};n.f.fireEvent(this,"onviewchange",l)}}else if(this.selectNode(t,e,i,o),null!=this.selectedInfo.node){l={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)};n.f.fireEvent(this,"onviewchange",l)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.selectNode2=function(t){try{this.selectedInfo.node=t,this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom?(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""):(this.originalBackgroundColor="",this.originalColor="")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._focusNodeForAccessibilityWithTrust=function(t,e,i,o,s){try{
var r=document.getElementById(this.id+"_col_icon_navi_"+e),n=document.getElementById(this.id+"_label_"+e),l=document.getElementById(this.id+"_checkbox_"+e);s.isIconNavi?r?r.focus():l?l.focus():n.focus():s.isLabel?n.focus():s.isCheckbox&&(l?l.focus():n.focus())}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._selectNodeForAccessibilityWithTrust=function(t,e,i,o,s){try{if(null!=this.selectedInfo.node){var r=this.tree.getCloneNode(this.selectedInfo.node),l=r.index;if(this._selectNodeForAccessibility(t,e,i,o,s),null!=this.selectedInfo.node)if(l!=this.selectedInfo.node.index){var h={oldNode:r,newNode:this.tree.getCloneNode(this.selectedInfo.node)};n.f.fireEvent(this,"onviewchange",h)}}else if(this._selectNodeForAccessibility(t,e,i,o,s),null!=this.selectedInfo.node){h={oldNode:{},newNode:this.tree.getCloneNode(this.selectedInfo.node)};n.f.fireEvent(this,"onviewchange",h)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._selectNodeForAccessibility=function(t,e,i,o,s){try{i=void 0===i||i;var r=l.Z.getBoolean(this.options.useHirarchySelect),h=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,d=null;if(null!=t?d=this.tree.findNodeByValue(t):null!=e&&(d=this.tree.findNodeByIndex(e)),this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.setAttribute("aria-selected",!1)),r&&this.selectedInfoStack.length>0){for(var c=0;c<this.selectedInfoStack.length;c++){var u=this.selectedInfoStack[c];u.dom&&(this.removeClass(u.dom,this.options.labelonClickClass),u.dom.style.backgroundColor=u.org.background,u.dom.style.color=u.org.color)}this.selectedInfoStack=[]}if(null!=h&&null!=d?h.index!=d.index&&n.f.fireEvent(this,"onchange",h,d):(null==h&&null!=d||null!=h&&null==d)&&n.f.fireEvent(this,"onchange",h,d),this.selectedInfo.node=d,null!=this.selectedInfo.node&&i){for(var p=this.selectedInfo.node.parentNode,g=[];p;){e=p.index;g.push(e),p=p.parentNode}for(var c in g.reverse(),g)this.toggleChild(null,g[c],!0)}if(this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.options.accessibility?this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index):this.selectedInfo.groupDom=document.getElementById(this.id+"_group_"+this.selectedInfo.node.index),this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,r){var m;for(p=this.selectedInfo.node;p;){var f=document.getElementById(this.id+"_label_"+p.index);m=this.options.accessibility?document.getElementById(this.id+"_node_"+p.index):document.getElementById(this.id+"_group_"+p.index),this.selectedInfoStack.push({node:p,groupDom:m,dom:f,org:{background:f?f.style.backgroundColor:null,color:f?f.style.color:null}}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),p=p.parentNode}this.selectedInfoStack.reverse()}if(!0===o&&this.options.accessibility&&this.selectedInfo.dom.setAttribute("aria-selected",!0),!0!==o){if(!this.options.scrollFix){var b=document.getElementById(this.id+"_col_icon_navi_"+this.selectedInfo.node.index),y=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),v=document.getElementById(this.id+"_checkbox_"+this.selectedInfo.node.index);s.isIconNavi?b?b.focus():y.focus():s.isLabel?y.focus():s.isCheckbox&&(v?v.focus():y.focus()),(s.isIconNavi||s.isLabel||s.isCheckbox)&&this.addClass(y,this.options.labelonClickClass),this.selectedInfo.dom.setAttribute("aria-selected",!0)}if(this.useDataCollection&&this.successBinding){var w=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var S in w.refCompHash){var _=w.refCompHash[S]
;null!=_&&WebSquare.idCache[_.uuid]&&"input"==_.options.pluginName&&_.setValue(_.getValue())}w.setRowPosition(this.selectedInfo.node.index-1)}else w.setRowPosition(null)}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.findNode=function(t,e){try{if(void 0===e&&(e=!0),!0===e){this.selectNode(t,null);var i=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),o=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return o<i&&(this.render.scrollTop=i-o+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return this.tree.findNodeByValue(t)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.findNodeByValue=function(t,e){try{var i=this.tree.findNodeByValue(t);if(!0===e&&i){this.selectNode(t,null);var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.findNodeByIndex=function(t,e){try{var i=this.tree.findNodeByIndex(t);if(!0===e&&i){this.selectNode(null,t);var o=WebSquare.style.getAbsoluteTop(this.selectedInfo.dom),s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight;return s<o&&(this.render.scrollTop=o-s+parseInt(this.render.offsetHeight/2)),this.getSelectedNode()}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;var e=document.getElementById(this.id+"_node_"+t),i=!1;if(e){var o=l.Z.getDataPrefix("opened");i=l.Z.getBoolean(e.getAttribute(o))}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setLabelStyle=function(t,e,i,s){var r;"object"===(0,o.A)(t)&&"number"==typeof t.index?r=t:"number"==typeof t?r=this.tree.findNodeByIndex(t):"string"==typeof t&&(r=this.tree.findNodeByValue(t)),this._setLabelStyle(r,e,i,s)},g.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered)document.getElementById(this.id+"_label_"+i.index).firstChild.nodeValue=i.label}}e=null,this.options.customFormatter=t,this.tree.customFormatter=t}},g.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){if(null==t.labelStyle&&(t.labelStyle={}),t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0;a<e.length;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0;a<t.childNodes.length;a++){var n=t.childNodes[a];this._setLabelStyle(n,e,i,o)}}},
g.prototype.checkNode=function(t,e,i,o,s){try{var r=this.tree.findNodeByIndex(t);if(r.checked=e,r.checkboxDom||(r.checkboxDom=document.getElementById(this.id+"_checkbox_"+t)),r.checkboxDom)if(r.checkboxDom.checked=e,this.options.accessibility)document.getElementById(this.id+"_label_"+t).setAttribute("aria-checked",e);if(1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var n=this.modelControl.getDataComp(),l=e?this.options.trueValue:this.options.falseValue;null!=n&&n.setCellData(t-1,this.tree.checkbox.colID,l,null,s),r.element.setAttribute(n.options.valueAttribute,l)}else 1==e?r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.trueValue,null,this.scope_id):r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.falseValue,null,this.scope_id);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var h=0;h<r.childNodes.length;h++){var d=r.childNodes[h];this.checkNode(d.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(r),!1!==o&&r.parentNode.parentNode&&1==this.options.hierarchy){var c=!0;for(h=0;h<r.parentNode.childNodes.length;h++){if(1!=(d=r.parentNode.childNodes[h]).checked){c=!1;break}}1==c?this.checkNode(r.parentNode.index,!0,!1):this.checkNode(r.parentNode.index,!1,!1)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];1==s.checked?e++:1==s.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,t.checkboxDom&&(this.addClass(t.checkboxDom,"w2treeview_partialselect"),t.checkboxDom.checked=!0)):(t.partial=!1,t.checkboxDom&&(this.removeClass(t.checkboxDom,"w2treeview_partialselect"),1==t.checked?t.checkboxDom.checked=!0:t.checkboxDom.checked=!1))}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);this.disableCheckbox(o,e,i)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},g.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},g.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,r=this.tree.xpath.label;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,"label",e);else if(s){t.element.getElementsByTagName(r)[0].setAttribute(s,e)}else{var n=t.element.getValue(r).getChildNodes();1==n.length&&n[0].setNodeValue(e)}if(this.options.customFormatter&&(this.tree.customFormatter=l.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var h=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,h)}if(t.label=e,t.orgLabel=e,t.rendered)document.getElementById(this.id+"_label_"+t.index).innerHTML=e;if(this.useDataCollection){var d=this.modelControl.getDataComp();null!=d&&d.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}this.refreshStop=o}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setValue=function(t,e,i){try{if(t){var o=this.refreshStop;this.refreshStop=!0;var s=this.tree.valueAttribute,r=this.tree.xpath.value;if(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.value,e),1==this.tree.isInstance)WebSquare.xml.setValue(t.element,r,e),t.value=e;else{if(s){t.element.getElementsByTagName(r)[0].setAttribute(s,e)}else{var n=t.element.getValue(r).getChildNodes();1==n.length&&n[0].setNodeValue(e)}t.value=e}if(this.refreshStop=o,this.useDataCollection){
var l=this.modelControl.getDataComp();null!=l&&l.setCellData(t.index-1,this.tree.dataPath.value,e,null,i)}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setValueByIndex=function(t,e,i){this.setValue(this.tree.findNodeByIndex(t),e,i)},g.prototype.disableCheckbox=function(t,e,i){try{if(e=l.Z.getBoolean(e),t.checkboxDom||(t.checkboxDom=document.getElementById(this.id+"_checkbox_"+t.index)),t.checkboxDom&&(t.checkboxDom.disabled=e,t.checkboxDisabled=e),1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath,null,this.scope_id)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];this.disableCheckbox(s,e,i)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getChildData=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++){if(1==this.options.dynamicAppend||this.useDataCollection){var r=this._getNodeXML(i.childNodes[s],!0);if(r instanceof WebSquare.Elem){var n=WebSquare.xmljs.json2xml(r._element);if(n){var l=WebSquare.xml.parse(n);l&&l.documentElement&&(r=l.documentElement)}}o.push(r)}else o.push(WebSquare.ModelUtil.findInstanceNode(i.childNodes[s].xpath,null,this.scope_id));1==e&&(o=o.concat(this.getChildData(i.childNodes[s].value,!0)))}return o}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getChildNodes=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++)o.push(i.childNodes[s]),1==e&&(o=o.concat(this.getChildNodes(i.childNodes[s].value,!0)));return o}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getXPathByValue=function(t){try{return this.tree.findNodeByValue(t).xpath}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.nodeToHTML=function(t){try{if(!t)return"";return this.options.accessibility?this._nodeToHTMLForAccessibility(t,!1):this.nodeToHTMLForAsis(t)}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},g.prototype.nodeToHTMLForAsis=function(t){try{if(!t)return"";t.rendered=!0;var e,i,s=[],r=this.options.asisAccessibility;if(this.options.customFormatter&&(this.tree.customFormatter=l.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var n=this.tree.getCloneNode(t),h=this.tree.customFormatter.call(this,t.orgLabel,t.label,n)||t.label;e=this.options.escape?WebSquare.xml._encode(h):h,i=this.options.escape?WebSquare.xml._encode(t.value):t.value}else e=this.options.escape?WebSquare.xml._encode(t.label):t.label,i=this.options.escape?WebSquare.xml._encode(t.value):t.value;var d=this.modelControl.getDataComp();"null"===e&&d&&d.options.useNull&&(e="");var c=l.Z.getDataPrefix("index"),u=l.Z.getDataPrefix("opened"),p=l.Z.getDataPrefix("treeNodeValue"),g=l.Z.getDataPrefix("label");r?s.push("<ol tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' aria-expanded='true' "+c+"='"+t.index+"' label='"+e+"'>"):s.push("<div tabindex='-1' id='"+this.id+"_group_"+t.index+"' class='w2treeview_group' "+c+"='"+t.index+"' "+g+"='"+e+"'>"),s.push("<table id='"+this.id+"_node_"+t.index+"' "+p+"='"+i+"' "+c+"='"+t.index+"'");var m=""
;if(t.isLastChild()?m=" w2treeview_last_sibling":t.isFirstChild()&&(m=" w2treeview_first_sibling"),"string"==typeof t.nodeCss&&t.nodeCss&&(m+=" "+t.nodeCss),t.hasChild()?t.depth>this.options.showTreeDepth||t.folder?s.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_close_child"+m+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_notleaf w2treeview_open_child"+m+"' "+u+"='true'>"):t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?s.push("class='w2treeview_node w2treeview_table_node w2treeview_root_single_leaf w2treeview_open_child"+m+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_root_multi_leaf w2treeview_open_child"+m+"'>"):t.isLastChild()?s.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_last_leaf w2treeview_open_child"+m+"'>"):s.push("class='w2treeview_node w2treeview_table_node w2treeview_leaf w2treeview_open_child"+m+"'>"),s.push("<tr class='w2treeview_row_parent w2treeview_row_depth"+t.depth+"'>"),1==this.options.lineShow?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"):t.isLeaf()?r?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_none'></div></td>"):r?t.depth>this.options.showTreeDepth?s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><img id='"+this.id+"_toggle_"+t.index+"' src='"+this.options.folderCloseToggleImage+"' class='w2treeview_icon_navi_img' /></td>"):s.push("<td id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_col_icon_navi'><div class='w2treeview_icon_navi'></div></td>"),""!=t.image){var f=t.image;1==t.hasChild()&&t.depth<=this.options.showTreeDepth&&(f=t.expandedImage);var b=t.imageTitle?"title='"+t.imageTitle+"'":"";s.push("<td class='w2treeview_col_icon_label'>"),s.push("<div id='"+this.id+"_icon_"+t.index+"' class='w2treeview_icon_label'"+b+" style='background-image:url("+f+")'></div>"),s.push("</td>")}else s.push("<td class='w2treeview_none'></td>");1==this.options.showCheckbox&&(s.push("<td class='w2treeview_col w2treeview_col_icon_checkbox'>"),l.Z.isIE()?s.push("<div style='left:0px;top:-1px;' class='w2treeview_partialdiv'>"):s.push("<div style='left:4px;top:-1px;' class='w2treeview_partialdiv'>"),1==t.checked?1==t.checkboxDisabled?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"):1==t.checkboxDisabled?1==t.partial?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' disabled='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' /></div>"):1==t.partial?s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' checked='true' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox w2treeview_partialselect' />"):s.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox' />"),s.push("          </div>"),s.push("      </td>"));var y="";if("object"===(0,o.A)(t.labelStyle)){var v="";for(var w in t.labelStyle)v+=w+":"+t.labelStyle[w]+";";y=" style='"+v+"'"}
if(-1!=this.options.rowHeight?s.push("<td class='w2treeview_col_label' style='height:"+this.options.rowHeight+"px;'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+y+">"+e+"</span></td>"):s.push("<td class='w2treeview_col_label'><span id='"+this.id+"_label_"+t.index+"' class='w2treeview_label "+this.options.labelclass+"'"+y+">"+e+"</span></td>"),s.push("</tr>"),t.hasChild()||1==this.options.dynamicAppend){if(s.push("<tr class='w2treeview_row_child'>"),0==this.options.lineShow||t.isLastChild()?s.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_noguideline w2treeview_col_depth"+t.depth+"'></td>"):s.push("<td id='"+this.id+"_guideline_"+t.index+"' class='w2treeview_guideline w2treeview_row_depth"+t.depth+"'></td>"),1==this.options.showCheckbox?s.push("<td colspan='3'>"):s.push("<td colspan='2'>"),t.depth>this.options.showTreeDepth?s.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child w2treeview_none'>"):s.push("<div id='"+this.id+"_child_"+t.index+"' class='w2treeview_child'>"),!t.folder&&(1==this.options.alwaysDraw||t.depth<=this.options.showTreeDepth))for(var S=0;S<t.childNodes.length;S++)s.push(this.nodeToHTML(t.childNodes[S]));s.push("</div>"),s.push("</td>"),s.push("</tr>")}return s.push("</table>"),r?s.push("</ol>"):s.push("</div>"),s.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._rootNodeToHTMLForAccessibility=function(t){try{if(!t)return"";var e=[],i=l.Z.getDataPrefix("index"),o=l.Z.getDataPrefix("opened");if(this.tree.rootNode.childNodes.length>0){e.push("<ul role='tree' "+o+"='true' class='w2treeview_group' id='"+this.id+"_RootNode_"+(t.index+1)+"' "+i+"='"+(t.index+1)+"'>");for(var s=0;s<this.tree.rootNode.childNodes.length;s++)e.push(this._nodeToHTMLForAccessibility(this.tree.rootNode.childNodes[s],!0));e.push("</ul>")}return e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._nodeToHTMLForAccessibility=function(t,e){try{if(!t)return"";t.rendered=!0;var i,s,r=[];if(this.options.customFormatter&&(this.tree.customFormatter=l.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var n=this.tree.getCloneNode(t),h=this.tree.customFormatter.call(this,t.orgLabel,t.label,n)||t.label;i=this.options.escape?WebSquare.xml._encode(h):h,s=this.options.escape?WebSquare.xml._encode(t.value):t.value}else i=this.options.escape?WebSquare.xml._encode(t.label):t.label,s=this.options.escape?WebSquare.xml._encode(t.value):t.value;var d=this.modelControl.getDataComp();"null"===i&&d&&d.options.useNull&&(i="");var u=l.Z.getDataPrefix("index"),p=l.Z.getDataPrefix("treeNodeValue"),g=l.Z.getDataPrefix("opened"),m="w2treeview_open_child";""==this.options.iconNaviAriaLabel?c.B.getMessage("Treeview_iconNaviAriaLabel"):this.options.iconNaviAriaLabel;if(!e){r.push("<ul id='"+this.id+"_node_"+t.index+"' "+p+"='"+s+"' "+u+"='"+t.index+"' ");var f="";t.isLastChild()?f=" w2treeview_last_sibling":t.isFirstChild()&&(f=" w2treeview_first_sibling"),"string"==typeof t.nodeCss&&t.nodeCss&&(f+=" "+t.nodeCss),t.hasChild()?t.depth>this.options.showTreeDepth||t.folder?(r.push("class='w2treeview_group w2treeview_notleaf w2treeview_close_child"+f+"'>"),m="w2treeview_close_child"):(r.push("class='w2treeview_group w2treeview_notleaf w2treeview_open_child"+f+"' "+g+"='true'>"),m="w2treeview_open_child"):t.isFirstChildByRoot()?(1==t.parentNode.childNodes.length?r.push("class='w2treeview_group w2treeview_root_single_leaf w2treeview_open_child"+f+"'>"):r.push("class='w2treeview_group w2treeview_root_multi_leaf w2treeview_open_child"+f+"'>"),m="w2treeview_open_child"):t.isLastChild()?(r.push("class='w2treeview_group w2treeview_leaf w2treeview_last_leaf w2treeview_open_child"+f+"'>"),m="w2treeview_open_child"):(r.push("class='w2treeview_group w2treeview_leaf w2treeview_open_child"+f+"'>"),m="w2treeview_open_child")}if(t.hasChild()){var b
;t.depth>this.options.showTreeDepth||t.folder?(m="w2treeview_close_child",b=""):(m="w2treeview_open_child",b=g+"='true'"),r.push("<li "+p+"='"+s+"' "+b+" id='"+this.id+"_node_"+t.index+"' class='w2treeview_group w2treeview_node "),r.push(m+" w2treeview_row_parent w2treeview_row_depth"+t.depth+"' "+u+"='"+t.index+"'")}else{var y="";this.options.lineShow||(y=" paddingLeft"),r.push("<li "+p+"='"+s+"' "+g+"='true' id='"+this.id+"_node_"+t.index+"' class='w2treeview_node "),r.push(m+y+" w2treeview_row_parent w2treeview_row_depth"+t.depth+"' "+u+"='"+t.index+"'")}if(r.push(" role='none'"),r.push(">"),t.isLeaf()){if(this.options.lineShow)if(1==t.depth)t.isFirstChild()?r.push("<span id='"+this.id+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline root_first'></span>"):t.isLastChild()?r.push("<span id='"+this.id+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline last'></span>"):r.push("<span id='"+this.id+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline middle'></span>");else{r.push("<span id='"+this.id+"_treeview_noguidline_"+t.index+"' class='w2span w2treeview_guideline first'></span>");var v=t,w=t.depth-2,S=[];for(E=0;E<w;E++){var _=v.parentNode,C=this._getBrotherNextNode(_);_&&C?S.push("<span id='"+this.id+"_leaf_treeview_guidline_"+E+"_"+t.index+"' class='w2span w2treeview_guideline'></span>"):S.push("<span id='"+this.id+"_leaf_treeview_noguidline_"+E+"_"+t.index+"' class='w2span w2treeview_noguideline'></span>"),v=_}for(E=S.length-1;E>=0;E--)r.push(S[E]);t.isLastChild()?r.push("<span id='"+this.id+"_treeview_guidline_leaf"+t.index+"' class='w2span w2treeview_guideline last'></span>"):r.push("<span id='"+this.id+"_treeview_guidline_leaf"+t.index+"' class='w2span w2treeview_guideline middle'></span>")}}else{if(this.options.lineShow)if(t.isFirstChild()){if(t.depth>1)if(t.isLastChild())if(t.parentNode.isLastChild()){v=t,w=t.depth-2;for(E=0;E<w;E++)r.push("<span id='"+this.id+"_"+E+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline'></span>");r.push("<span id='"+this.id+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_noguideline'></span>")}else r.push("<span id='"+this.id+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline'></span>");else{v=t,w=t.depth,S=[];for(E=0;E<w-1;E++){v=v.parentNode;C=this._getBrotherNextNode(v);v&&C?S.push("<span id='"+this.id+"_"+E+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline'></span>"):S.push("<span id='"+this.id+"_"+E+"_treeview_noguidline_"+t.index+"' class='w2span w2treeview_noguideline'></span>")}for(E=S.length-1;E>=0;E--)r.push(S[E])}t.isLastChild()}else{t.depth>1&&r.push("<span id='"+this.id+t.depth+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline first'></span>");v=t,w=t.depth-2;for(E=0;E<w;E++){v=v.parentNode;C=this._getBrotherNextNode(v);v&&C?r.push("<span id='"+this.id+"_"+E+"_treeview_guidline_"+t.index+"' class='w2span w2treeview_guideline'></span>"):r.push("<span id='"+this.id+"_"+E+"_treeview_noguidline_"+t.index+"' class='w2span w2treeview_noguideline'></span>")}}r.push("<button tabindex = '-1' aria-hidden = 'true' id='"+this.id+"_col_icon_navi_"+t.index+"' class='w2treeview_icon_navi_s' "+u+"='"+t.index+"'"),r.push("></button>")}if(""!=t.image){var x=t.image;1==t.hasChild()&&t.depth<=this.options.showTreeDepth&&(x=t.expandedImage);var I=t.imageTitle?"title='"+t.imageTitle+"'":"";r.push("<div class='w2treeview_col_icon_label'>"),r.push("<div id='"+this.id+"_icon_"+t.index+"' class='w2treeview_icon_label'"+I+" style='background-image:url("+x+")'></div>"),r.push("</div>")}else r.push("<div class='w2treeview_none'></div>");if(1==this.options.showCheckbox){var T=this.id+"_checkbox_"+t.index,k=i;r.push("<div class='w2treeview_checkbox'>"),r.push("<div>");var L=t.checked||t.partial?"checked='true' ":"",A=t.checkboxDisabled?"disabled='true' ":"",D=t.partial?" treeview_partialselect":""
;r.push("<input tabindex = '-1' aria-hidden = 'true' "+u+"='"+t.index+"' style='"+this.checkboxStyle+"' type='checkbox' "+L+A),r.push(" id='"+this.id+"_checkbox_"+t.index+"' class='w2treeview_checkbox"+D+"' />"),r.push("<label for='"+T+"'>"+k+"</label>"),r.push("          </div>"),r.push("      </div>")}var W="";if("object"===(0,o.A)(t.labelStyle)){var q="";for(var M in t.labelStyle)q+=M+":"+t.labelStyle[M]+";";W=" style='"+q+"'"}if(r.push("<a href='JavaScript:void(null);'"+p+"='"+s+"' "+u+"='"+t.index+"' id='"+this.id+"_label_"+t.index+"'"),-1!=this.options.rowHeight&&r.push(" style='height:"+this.options.rowHeight+"px;'"),r.push(" aria-level='"+t.depth+"'"),r.push(" aria-setsize='"+t.parentNode.childNodes.length+"'"),r.push(" aria-posinset='"+t.depthIndex+"'"),t.isLeaf()||("w2treeview_open_child"==m?r.push(" aria-expanded='true'"):r.push(" aria-expanded='false'")),1==this.options.showCheckbox&&r.push(" aria-checked='false'"),r.push(" aria-selected='false'"),r.push(" role='treeitem'"),r.push(" class='w2anchor2 w2treeview_label "+this.options.labelclass+"'"+W+">"+i+"</a>"),t.hasChild()||1==this.options.dynamicAppend){r.push("<ul role='group' id='"+this.id+"_child_"+t.index+"' "+p+"='"+s+"' "+u+"='"+t.index+"' ");f="",y="";if(t.isLastChild()?f=1==t.depth?" w2treeview_last_sibling ByRoot":" w2treeview_last_sibling":t.isFirstChild()&&(f=" w2treeview_first_sibling"),this.options.lineShow||(y=" paddingLeft"),t.hasChild()?t.depth>this.options.showTreeDepth||t.folder?r.push("class='w2treeview_group w2treeview_notleaf w2treeview_close_child"+f+y+"'>"):r.push("class='w2treeview_group w2treeview_notleaf w2treeview_open_child"+f+y+"'>"):t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?r.push("class='w2treeview_group w2treeview_root_single_leaf w2treeview_open_child"+f+y+"'>"):r.push("class='w2treeview_group w2treeview_root_multi_leaf w2treeview_open_child"+f+y+"'>"):t.isLastChild()?r.push("class='w2treeview_group w2treeview_leaf w2treeview_last_leaf w2treeview_open_child"+f+y+"'>"):r.push("class='w2treeview_group w2treeview_leaf w2treeview_open_child"+f+y+"'>"),!t.folder&&(1==this.options.alwaysDraw||t.depth<=this.options.showTreeDepth)&&t.childNodes.length>0)for(var E=0;E<t.childNodes.length;E++)r.push(this._nodeToHTMLForAccessibility(t.childNodes[E],!0));r.push("</ul>")}return r.push("</li>"),e||r.push("</ul>"),r.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.toggleChild=function(t,e,i){try{if(null==e&&(e=-1),null!=t)(o=this.tree.findNodeByValue(t))&&(e=o.index);var o=this.tree.findNodeByIndex(e),s=l.Z.getDataPrefix("opened");if(o&&o.depth>0&&o.hasChild()){var r=document.getElementById(this.id+"_node_"+e),n=document.getElementById(this.id+"_child_"+e),h=document.getElementById(this.id+"_icon_"+e),d=(document.getElementById(this.id+"_col_icon_navi_"+e),document.getElementById(this.id+"_label_"+e));if(r&&n){if(!!!(o.childNodes&&o.childNodes[0]&&o.childNodes[0].rendered)||this.options.asisAccessibility){for(var c=[],u=0;u<o.childNodes.length;u++)this.options.accessibility?c.push(this._nodeToHTMLForAccessibility(o.childNodes[u],!0)):c.push(this.nodeToHTML(o.childNodes[u]));n.innerHTML=c.join("")}var p=l.Z.getBoolean(r.getAttribute(s));if(void 0!==i&&null!=i||(i=0==p),o.folder=!i,this.tree.dataPath.folder){var g=i?this.options.falseValue:this.options.trueValue,m=this.modelControl.getDataComp();m&&m.setCellData(o.index-1,this.tree.dataPath.folder,g)}if(1==i){if(1==this.options.accordion){for(var f={},b=o;b.parentNode;)f[(b=b.parentNode).index]=b.depth;for(var u in this.openedNodes)this.openedNodes[u]==o||f[this.openedNodes[u].index]||this.openedNodes[u].depth<=o.depth&&this.toggleChild(null,u,!1);this.openedNodes[e]=o}if(r.setAttribute(s,"true"),n.style.display="block",this.changeClass(r,"w2treeview_close_child","w2treeview_open_child"),this.options.accessibility&&d.setAttribute("aria-expanded","true"),h&&(h.style.backgroundImage="url("+o.expandedImage+")"),
this.options.asisAccessibility)(y=document.getElementById(this.id+"_toggle_"+e))&&(y.src=this.options.folderCloseToggleImage);"show"==this.options.animation.toLowerCase()?$("#"+n.id).hide().show("fast"):"fadein"==this.options.animation.toLowerCase()?$("#"+n.id).hide().fadeIn("fast"):"slidedown"==this.options.animation.toLowerCase()&&$("#"+n.id).hide().slideDown("fast")}else if(0==i){var y;if(r.setAttribute(s,"false"),this.openedNodes[e]&&delete this.openedNodes[e],""!=this.options.animation?"fadein"==this.options.animation.toLowerCase()?$("#"+n.id).fadeOut("fast"):"slidedown"==this.options.animation.toLowerCase()?$("#"+n.id).slideUp("fast"):n.style.display="none":n.style.display="none",this.changeClass(r,"w2treeview_open_child","w2treeview_close_child"),this.options.accessibility&&d.setAttribute("aria-expanded","false"),h&&(h.style.backgroundImage="url("+o.image+")"),this.options.asisAccessibility)(y=document.getElementById(this.id+"_toggle_"+e))&&(y.src=this.options.folderOpenToggleImage),WebSquare.removeChildren(n)}}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.spanAll=function(t){try{if(1==this.options.accordion){var e=WebSquare.language.getMessage("Treeview_warning2","spanAll")||"The spanAll API is not supported in treeview's accordion mode.";return void $l(e+"["+this.id+"]")}if(1==t)for(var i=0;i<this.tree.size();i++)this.toggleChild(null,i,t);else if(0==t)for(i=this.tree.size()-1;i>=0;i--)this.toggleChild(null,i,t)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.spanNode=function(t,e,i){try{return 0===arguments.length?void 0:1===arguments.length&&"object"===(0,o.A)(arguments[0])?this._spanNode(arguments[0]):2===arguments.length&&"object"===(0,o.A)(arguments[0])&&"boolean"==typeof arguments[1]?this._spanNode(arguments[0],arguments[1]):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._spanNode=function(t,e){try{if(1==this.options.accordion){var i=WebSquare.language.getMessage("Treeview_warning2","spanNode")||"The spanNode API is not supported in treeview's accordion mode.";return void $l(i+"["+this.id+"]")}var o=t.index,s=t.depth,r=t.applyChildNodes;if(0==o||o){var n=(c=this.findNodeByIndex(o)).childNodes;if(1==e){if(1==r)for(var l=0;l<n.length;l++)n[l].childNodes.length>0&&this.spanNode(n[l].index,e,r)}else if(0==e&&1==r)for(l=n.length-1;l>=0;l--)n[l].childNodes.length>0&&this.spanNode(n[l].index,e,r);this.toggleChild(null,o,e)}else if(0==s||s)for(var h=0,d=this.tree.nodeCount;h<d;h++){var c;if((c=this.tree.hash_index_node[h]).depth===s){if("boolean"==typeof r)for(var u=c.childNodes,p=(l=0,u.length);l<p;l++)u[l].childNodes.length>0&&this.spanNode(u[l].index,e,r);this.toggleChild(null,c.index,e)}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var s=r.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(s){var h=l.Z.getGlobalFunction(s,o.scope_id),d=!0;if("function"==typeof h&&(d=h(o)),!d)return}}catch(t){a.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),WebSquare.style.adjustZIndex(this.uuid,this.tooltip.uuid,"toolTip"),this.options.escape&&(i=WebSquare.xml._encode(i)),this.tooltip.render.innerHTML=i,this.isFireTooltipEvent||(this.isFireTooltipEvent=!0,n.f.fireEvent(this,"ontooltipshow"))})),1e3*this.options.tooltipTime)}catch(t){
a.Y.printStackTrace(t,null,this)}},g.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&(this.tooltip.setStyle("display","none"),n.f.fireEvent(this,"ontooltiphide"),this.isFireTooltipEvent=!1)})),1e3*this.options.tooltipTime)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setXML=function(t){try{var e=null;if(1==this.tree.isInstance){var i=this.tree.getNodeset(),o=WebSquare.xml.findNodes(t,i);"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTreeInstance(o))}else{var s=WebSquare.xmljs.xml2json(t).E[0];o=new WebSquare.Elem(s).getChildNodes();"recursive"==this.options.dataType?e=this.tree.parseRecursiveToTree(o):"listed"==this.options.dataType&&(e=this.tree.parseListToTree(o))}this.tree.setXML(e),this.drawContents()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.activateDrag=function(t){try{n.f.stopEvent(t),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var e=this,i=this.event.getTargetIterator(t,this.render);if(i.element.id===this.id)return;for(var o=!1,s=!1,r=!1,h=!1,d=l.Z.getDataPrefix("index"),c=l.Z.getDataPrefix("tdIndex");i.next();)if(i.match("w2treeview_label")&&(h=!0),(i.match("w2treeview_icon_navi")||i.match("w2treeview_icon_navi_img"))&&(o=!0),i.match("w2treeview_icon_label")&&(s=!0),i.match("w2treeview_checkbox")&&(r=!0),i.match("w2treeview_node")){var u=i.getElement().getAttribute(d);if(null==u){i.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var p=this.tree.findNodeByIndex(u);if(o&&!p.isLeaf()){this.toggleChild(null,u);var g=!!(p.childNodes&&p.childNodes[0]&&p.childNodes[0].rendered);this.inlineElement?n.f.fireEvent(this,"ontoggleclick",null,u,g):n.f.fireEvent(this,"ontoggleclick",p.element,u,g)}}if(h||r||s||o)if(this.options.accessibility){var m={};m.isCheckbox=r,m.isLabel=h,m.isIconNavi=o,this._selectNodeForAccessibilityWithTrust(null,u,!1,!0,m)}else this.selectNode1(null,u,!1,!0);if(1==this.options.useDrag){var f=this.getSelectedLabel();WebSquare.dragdrop.gDragManager.activate(t,i.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:f,delay:15,dropClass:"w2treeview_node",dragoverClass:"w2treeview_label",applyMousePosition:!0,onDrop:function(t,i,o,s,r,a,h){if(t){var u=null,p={},g=null,m=null,f=null;for(p=i?new WebSquare.targetIterator(i,e.render):e.event.getTargetIterator(h);p.next();){if(p.match("w2treeview")){var b=p.getElement().id;l.Z.getComponentById(b)&&(u=l.Z.getComponentById(b)),p.stop()}if(p.match("w2grid")&&(g=p.getElement().id,p.stop()),!m&&p.match(null,null,"td")){var y=p.getElement();m=parseInt(y.getAttribute(c),10)}}if(p=null,u&&!i&&(i=document.getElementById(u.id+"_node_0")),t&&i&&u){var v=t.getAttribute(d),w=i.getAttribute(d),S=e.tree.findNodeByIndex(v),_=u.tree.findNodeByIndex(w);n.f.fireEvent(u,"ondrop",S,_,e,u,h)}if(null!=g&&(f=(g=l.Z.getComponentById(g)).getDataLength(),null!=m&&(f=g.rowIndex+parseInt(m/(g.oneRowDataLength+g.defaultColCnt)))),t&&g){v=parseInt(t.getAttribute(d),10)-1;if(e.useDataCollection)var C=e.modelControl.getDataComp();S=e.tree.findNodeByIndex(v+1);n.f.fireEvent(g,"ondropfromtree",{dataListId:C.id,fromRowIndex:v,toRowIndex:f,dragNode:S})}}},onDragover:function(t,i,o,s,r,a,h){if(t)if(i){for(var c=null,u=new WebSquare.targetIterator(i,e.render);u.next();)if(u.match("w2treeview")){var p=u.getElement().id;l.Z.getComponentById(p)&&(c=l.Z.getComponentById(p)),u.stop()}if(u=null,c){var g=t.getAttribute(d),m=i.getAttribute("id"),f=m.substring(m.lastIndexOf("_")+1,m.length),b=e.tree.findNodeByIndex(g),y=c.tree.findNodeByIndex(f);n.f.fireEvent(c,"ondragover",b,y,e,c,h)}}else n.f.fireEvent(e,"ondragleave",h)}})}i.stop()}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.appendXmlNodes=function(t,e){try{this.appendData(t.index,e,!0,{xmlNodeStyle:!0})}catch(t){a.Y.printStackTrace(t,null,this)}},
g.prototype.appendNode=function(t,e){try{if(0==this.options.dynamicAppend){var i=WebSquare.language.getMessage("Treeview_warning1")||"If you are processing the treeview dynamically, it is recommended to set dynamicAppend='true'";$l(i+"["+this.id+"]")}if(1==this.options.dynamicAppend){var o=t.childNodes?t.childNodes.length+1:1;t.appendChild(this.tree.parseNodeByNode(e,t.depth+1,o,t));for(var s=0;s<t.childNodes.length;s++)this.tree.setRender(t.childNodes[s],!1);this.refreshNaviIcon(t),t.childNodes.length>0&&(t.childNodes[0].rendered=!1,this.toggleChild(null,t.index,!0))}else t.appendChild(e),this.drawContents()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.refreshNaviIcon=function(t){try{if(!t)return;var e=t.index,i=document.getElementById(this.id+"_node_"+e),o=document.getElementById(this.id+"_col_icon_navi_"+e);t.childNodes.length>0?this.options.asisAccessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.folderOpenToggleImage+"' class='w2treeview_icon_navi_img' />"):(i&&this.removeClass(i,"w2treeview_leaf"),i&&this.removeClass(i,"w2treeview_last_leaf"),i&&this.removeClass(i,"w2treeview_root_single_leaf"),i&&this.removeClass(i,"w2treeview_root_multi_leaf"),t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?o&&this.changeClass(o,"w2treeview_first_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_root_multi_leaf","w2treeview_icon_navi"):t.isLastChild()?o&&this.changeClass(o,"w2treeview_last_leaf","w2treeview_icon_navi"):o&&this.changeClass(o,"w2treeview_leaf","w2treeview_icon_navi")):this.options.asisAccessibility?o&&(o.innerHTML="<img id='"+this.id+"_toggle_"+e+"' src='"+this.options.leafToggleImage+"' class='w2treeview_icon_navi_img' />"):i&&this.changeClass(i,"w2treeview_notleaf","w2treeview_leaf")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;if(e){var i=e.index;if(e.removeChild(t),1==this.options.dynamicAppend){var o=t.index,s=document.getElementById(this.id+"_group_"+o);s&&WebSquare.removeChildren(s),0==i?(e._hasChild=e.folder?null:0!=e.childNodes.length,this.drawContents()):this.refreshNaviIcon(e)}else this.drawContents()}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.initRenderStatus=function(){try{this.tree.setRender(this.tree.rootNode,!1)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getCheckedNodeByType=function(t,e){try{"object"===(0,o.A)(t)&&null!=t||(t={});for(var i=[],s=this.tree.getNodeIterator({type:"bfs"});s.next();){var r=s.getNode();(1==r.checked||t.hierarchy&&1==r.partial&&!r.isRoot())&&(t.excludeRoot&&!r.isRoot()||!t.excludeRoot)&&i.push(r[e])}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},g.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},g.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},g.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},g.prototype.expandNode=function(t,e){try{if("number"==typeof t?this.toggleChild(null,t,!0):this.toggleChild(t,null,!0),e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.expandNode(i.childNodes[o].index,e)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.collapseNode=function(t,e){try{if(e){var i=null;i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t);for(var o=0;o<i.childNodes.length;o++)this.collapseNode(i.childNodes[o].index,e)}"number"==typeof t?this.toggleChild(null,t,!1):this.toggleChild(t,null,!1)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getAllXML=function(){try{var t=null
;return"recursive"==this.options.dataType?t=this.tree.rootNode.element:"listed"==this.options.dataType&&(t=this.tree.parseTreeToList()),t}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.stopRefresh=function(t){try{this.refreshStop=l.Z.getBoolean(t)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getNextNode=function(t){for(var e=t.index,i=t.depth,o=document.getElementById(this.id+"_node_"+e),s=l.Z.getDataPrefix("opened"),r=l.Z.getBoolean(o.getAttribute(s)),a=this.tree.getNodeIterator({type:"dfs"}),n=!1;a.next();){var h=a.getNode();if(n){if(r)break;if(h.depth<=i)break}else h.index==e&&(n=!0)}return a.getNode()},g.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=this.tree.getNodeIterator({type:"dfs"}),s={};o.next();){var r=o.getNode();if(r.index==i)return e;if(this.options.asisAccessibility)document.getElementById(this.id+"_group_"+r.index)&&(e=r);else{var a=document.getElementById(this.id+"_node_"+r.index),n=l.Z.getDataPrefix("opened"),h=!!a&&l.Z.getBoolean(a.getAttribute(n));s[r.parentNode?r.parentNode.depth:0]||0==r.depth?(0==r.depth&&(h=!0),s[r.depth]=h,e=r):s[r.depth]=!1}}return e},g.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")){var o=l.Z.getDataPrefix("index"),s=i.getElement().getAttribute(o);this.toggleChild(null,s),i.stop()}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleDblclickEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2treeview_label")&&(e=!0),e&&i.match("w2treeview_node")){var o=l.Z.getDataPrefix("index"),s=i.getElement().getAttribute(o),r=this.tree.findNodeByIndex(s).value;n.f.fireEvent(this,"ondblclick",r,s),i.stop()}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,s=!1,h=l.Z.getDataPrefix("index"),d=l.Z.getDataPrefix("treeNodeValue"),c=this.event.getTargetIterator(t,this.render);c.next();)if(c.match("w2treeview_label")&&(s=!0),(c.match("w2treeview_icon_navi")||c.match("w2treeview_icon_navi_img")||c.match("w2treeview_icon_navi_s"))&&(e=!0),c.match("w2treeview_icon_label")&&(i=!0),c.match("w2treeview_checkbox")&&(o=!0),c.match("w2treeview_node")){var u=c.getElement().getAttribute(d),p=c.getElement().getAttribute(h),g=this.tree.findNodeByIndex(p),m=this._getNodeXML(g);if(e&&!g.isLeaf()&&"onmousedown"!=this.options.toggleButtonEvent){this.toggleChild(null,p);var f=!!(g.childNodes&&g.childNodes[0]&&g.childNodes[0].rendered);this.inlineElement?n.f.fireEvent(this,"ontoggleclick",null,p,f):n.f.fireEvent(this,"ontoggleclick",m,p,f)}if(o&&!g.checkboxDisabled){var b=!g.checked;this.checkNode(p,b),this.inlineElement?n.f.fireEvent(this,"oncheckboxclick",u,null,p):1==this.options.dynamicAppend||this.useDataCollection?n.f.fireEvent(this,"oncheckboxclick",u,m,p):n.f.fireEvent(this,"oncheckboxclick",u,WebSquare.ModelUtil.findInstanceNode(g.xpath,null,this.scope_id),p)}s&&(this.inlineElement?n.f.fireEvent(this,"onlabelclick",u,null,p):n.f.fireEvent(this,"onlabelclick",u,m,p)),i&&(this.inlineElement?n.f.fireEvent(this,"onImageclick",u,null,p):n.f.fireEvent(this,"onImageclick",u,m,p));var y=r.I.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value");if(s||o||i||e&&"false"!=y){if(this.options.accessibility){var v={};v.isLabel=s,s&&this._selectNodeForAccessibilityWithTrust(null,p,!1,!1,v)}else this.selectNode1(null,p,!1,this.options.noFocusOnIconLabelClick);n.f.fireEvent(this,"onclick",u,p)}c.stop()}c=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleMouseoverEvent=function(t){try{n.f.stopEvent(t);for(var e=l.Z.getDataPrefix("index"),i=l.Z.getDataPrefix("treeNodeValue"),o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("w2treeview_label")){if(this.addClass(o.getElement(),"w2treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways){
var s=o.getElement(),r=WebSquare.style.getAbsoluteLeft(s),h=WebSquare.style.getAbsoluteTop(s),d=s.innerHTML,c=WebSquare.style.getAbsoluteLeft(this.render),u=!1;if(this.options.tooltipDisplay)if(r+s.offsetWidth>c+this.render.clientWidth+this.render.scrollLeft)u=!0;else if(l.Z.isIEAllVersion()&&!l.Z.isIE(6)&&!l.Z.isIE(7)){var p=s.style.display;s.style.display="block",s.clientWidth<s.scrollWidth&&(u=!0),s.style.display=p}if(u||this.options.tooltipShowAlways){var g=l.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if("function"==typeof g){for(var m=new WebSquare.targetIterator(s,this.render),f=-1;m.next();)m.match("w2treeview_node")&&(f=m.getElement().getAttribute(e),m.stop());m=null;try{d=g(d,f,!!u||s.offsetWidth<s.scrollWidth)}catch(t){a.Y.printStackTrace(t,null,this)}}""!=d&&this.showTooltip(r,h,d)}}m=new WebSquare.targetIterator(o.getElement(),this.render),f=-1;for(var b="",y=null;m.next();)m.match("w2treeview_node")&&(f=m.getElement().getAttribute(e),b=m.getElement().getAttribute(i),y=this.tree.findNodeByIndex(f),m.stop());m=null,n.f.fireEvent(this,"onlabelover",f,this._getNodeXML(y),b)}o=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleMouseoutEvent=function(t){try{n.f.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("w2treeview_label")&&this.removeClass(e.getElement(),"w2treeview_over");e=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleContextmenuEvent=function(t){try{n.f.stopEvent(t);for(var e=!1,i=!1,o=!1,s=!1,r=l.Z.getDataPrefix("index"),h=this.event.getTargetIterator(t,this.render);h.next();){if(h.match("w2treeview_label")&&(s=!0),h.match("w2treeview_icon_navi")&&(e=!0),h.match("w2treeview_icon_label")&&(i=!0),h.match("w2treeview_checkbox")&&(o=!0),h.match("w2treeview_node")){var d=h.getElement().getAttribute(r);if(e&&this.toggleChild(null,d),o){var c=document.getElementById(this.id+"_checkbox_"+d).checked;this.checkNode(d,c)}(s||o||i)&&(this.selectNode1(null,d),n.f.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(d),n.f.getMouseX(t),n.f.getMouseY(t))),h.stop()}h.match("w2treeview")&&this.tree.nodeCount<=1&&(n.f.fireEvent(this,"onrightbuttonclick",null,n.f.getMouseX(t),n.f.getMouseY(t)),h.stop())}h=null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleIconNaviFocusEvent=function(t){try{var e={};e.isIconNavi=!0,this.options.autoSelectByFocus&&this._selectNodeForAccessibilityWithTrust(null,1,!1,!1,e)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleKeydownAccessbilityEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0,o=null,s=l.Z.getDataPrefix("index"),r=l.Z.getDataPrefix("treeNodeValue");i=(o=t.srcElement||t.target).getAttribute(s);var h=this.tree.findNodeByIndex(i),d=o.getAttribute(r),c=null,u={};0==i?(i=1,c=this.tree.findNodeByIndex(i)):o.id.indexOf("_col_icon_navi_")>-1?u.isIconNavi=!0:o.id.indexOf("_label_")>-1?u.isLabel=!0:o.id.indexOf("_checkbox_")>-1&&(u.isCheckbox=!0);var p=!(13!==e||!u.isIconNavi);if(37===e||39===e||p){var g=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,g);var m=!!(h.childNodes&&h.childNodes[0]&&h.childNodes[0].rendered);this.inlineElement?n.f.fireEvent(this,"ontoggleclick",null,i,m):n.f.fireEvent(this,"ontoggleclick",h.element,i,m),n.f.stopEvent(t)}else if(13===e&&u.isLabel)this._selectNodeForAccessibilityWithTrust(null,i,!1,!1,u),this.inlineElement?n.f.fireEvent(this,"onlabelclick",d,null,i):n.f.fireEvent(this,"onlabelclick",d,h.element,i),n.f.fireEvent(this,"onclick"),n.f.stopEvent(t);else if(32===e&&u.isLabel){var f=document.getElementById(this.id+"_checkbox_"+i);f&&f.click()}else if(38===e){if((u.isIconNavi||u.isLabel||u.isCheckbox)&&(c=this.getPreviousNode(h)),c){var b=c.index
;document.getElementById(this.id+"_label_"+b)&&(this.options.autoSelectByFocus?this._selectNodeForAccessibilityWithTrust(null,b,!1,!1,u):this._focusNodeForAccessibilityWithTrust(null,b,!1,!1,u)),n.f.stopEvent(t)}}else if(40===e){if((u.isIconNavi||u.isLabel||u.isCheckbox)&&(c=this.getNextNode(h)),c){b=c.index;document.getElementById(this.id+"_label_"+b)&&(this.options.autoSelectByFocus?this._selectNodeForAccessibilityWithTrust(null,b,!1,!1,u):this._focusNodeForAccessibilityWithTrust(null,b,!1,!1,u)),n.f.stopEvent(t)}}else if(9===e&&this.options.autoSelectByFocus&&(c=null)){b=c.index;document.getElementById(this.id+"_label_"+b)&&this._selectNodeForAccessibilityWithTrust(null,b,!1,!0,u)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=0,o=null,s=l.Z.getDataPrefix("index");this.selectedInfo.node?(o=this.selectedInfo.groupDom,i=this.selectedInfo.node.index):i=(o=t.srcElement||t.target).getAttribute(s);var r=this.tree.findNodeByIndex(i);if(37===e||39===e||13===e){var h=37!==e;13===e?this.toggleChild(null,i,null):this.toggleChild(null,i,h);var d=!!(r.childNodes&&r.childNodes[0]&&r.childNodes[0].rendered);this.inlineElement?n.f.fireEvent(this,"ontoggleclick",null,i,d):n.f.fireEvent(this,"ontoggleclick",r.element,i,d),n.f.stopEvent(t)}else if(38===e){var c=null;if(0==i?(i=1,c=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(c=this.getPreviousNode(r)),c){var u=c.index;document.getElementById(this.id+"_group_"+u)&&this.selectNode1(null,u,!1),n.f.stopEvent(t)}}else if(40===e){c=null;if(0==i?(i=1,c=this.tree.findNodeByIndex(i)):o.id.indexOf("_group_")>-1&&(c=this.getNextNode(r)),c){u=c.index;document.getElementById(this.id+"_group_"+u)&&this.selectNode1(null,u,!1),n.f.stopEvent(t)}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setDisabled=function(t){t=l.Z.getBoolean(t);var e=d.q.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},g.prototype.setEditMode=function(t){try{var e=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),this.editModeComp.writeTo(e.parentNode),this.editModeComp.activate();var i=this.uuid;this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[i],e=t.modelControl.getDataComp();if(e){var o=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s)}else t.setLabelByIndex(this._index-1,s);t.appendChild(this),this.hide();var r=document.getElementById(t.id+"_label_"+this._index);WebSquare.style.show(r),this.setValueNM(""),n.f.fireEvent(t,"oneditend",{oldValue:o,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){n.f.stopPropagation(t)})),this.editModeComp.bind("onmousedown",(function(t){n.f.stopPropagation(t)})),this.editModeComp.bind("onselectstart",(function(t){n.f.stopPropagation(t)}))}else this.editModeComp.show(),e.parentNode.appendChild(this.editModeComp.render);this.editModeComp._index=t,WebSquare.style.hide(e),this.editModeComp.setVerticalAlign=function(){};var o=this.findNodeByIndex(t);o&&""!=o.label&&(this.editModeComp.setValueNM(o.label),this.editModeComp._oldValue=o.label),this.editModeComp.focus()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.finalize=function(){d.q.removeCheckResize(this.uuid),null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove()},g.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."
};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}else if(t.colID===this.tree.dataPath.value){e=this.findNodeByIndex(t.rowIndex+1);if(this.findNodeByValue(t.newValue))throw{message:"Invalid value : [value : "+e.value+", newValue : "+t.newValue+"]. The treeValue must be unique."}}return!0}catch(t){return a.Y.printStackTrace(t,null,this),!1}},g.prototype.notifyInvalid=function(){},g.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1);s.parentNode===this.tree.rootNode?this.drawContents():(this.refreshNaviIcon(s),this.toggleChild(null,s.parentNode.index,!0))}else e===this.tree.dataPath.value&&this.setValueByIndex(t+1,i,!0)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(e>i){var r=(d=o.parentNode).childNodes[o.depthIndex-2],n=o.childNodes.splice(0,o.childNodes.length);d.childNodes.splice(o.depthIndex-1,1),o.parentNode=r,r.childNodes.push(o),o.depthIndex=r.childNodes.length,r.rendered=!1,o.rendered=!1;for(var l=0;l<n.length;l++)n[l].parentNode=r,r.childNodes.push(n[l]),n[l].depthIndex=r.childNodes.length,n[l].rendered=!1;d.childNodes[0].rendered=!1}else{if(o.hasChild())for(l=o.childNodes.length-1;l>=0;l--){var h=o.childNodes[l];s.setCellData(h.index-1,this.tree.dataPath.depth,h.depth-1),this.notifyDepthChanged(h.index,h.depth-1,h.depth)}var d,c=(d=o.parentNode).parentNode;if(o.depthIndex<d.childNodes.length){var u=d.childNodes.splice(o.depthIndex,d.childNodes.length-o.depthIndex);for(l=0;l<u.length;l++)u[l].parentNode=o,o.childNodes.push(u[l]),u[l].depthIndex=o.childNodes.length,u[l].rendered=!1}d.childNodes.splice(d.childNodes.length-1,1),o.parentNode=c,c.childNodes.splice(d.depthIndex,0,o);for(l=d.depthIndex;l<c.childNodes.length;l++)c.childNodes[l].depthIndex=l+1;c.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyInsertRow=function(t){try{if(this.refreshStop)return;var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new u;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var r=e.getRowJSON(t),n={T:1,N:"data",A:{index:""+t},E:[]};for(var l in r){var h={T:1,N:l,A:{},parent:n};""!=r[l]&&(h.E=[],h.E.push({T:3,text:""+r[l]})),n.E.push(h)}o.element=new WebSquare.Elem(n),i.childNodes.unshift(o);for(s=1;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.refreshNaviIcon(i),this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyInsertData=function(t,e){try{this.refreshItemset()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",value:i.getCellData(t,this.tree.dataPath.value),overwrite:e}}catch(t){a.Y.printStackTrace(t,null,this)}},
g.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox),r=e.getCellData(t,this.tree.dataPath.value);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i,rowIndex:t}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);if(o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),r!=this.beforeSetRowData.value)this.notifyValidCheck({colID:this.tree.dataPath.value,oldValue:this.beforeSetRowData.value,newValue:r,rowIndex:t})&&this.notifySetCellData(t,this.tree.dataPath.value,r,this.beforeSetRowData.value);s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},this.tree.nodeCount=e.getRowCount()+1}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyRemoveRow=function(t){try{if(this.options.forceRefresh)return this.stopRefresh(!1),void this.refreshItemset();if(this.refreshStop)return;var e=this.findNodeByIndex(t+1),i=e.parentNode,o=document.getElementById(this.id+"_group_"+e.index);if(o&&WebSquare.removeNode(o),this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t),this.stopRefresh(!1),0==i.index)i._hasChild=i.folder?null:0!=i.childNodes.length,this.drawContents();else{this.refreshNaviIcon(i);var s=this.findNodeByIndex(t);if(s&&!s.isRoot()){if(s.isLastChild()){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_last_sibling"),this.removeClass(r,"w2treeview_first_sibling"),s.isLeaf()&&this.addClass(r,"w2treeview_last_leaf")}else if(s.isFirstChild()){r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,"w2treeview_first_sibling")}if(s.parentNode.isLastChild()){var n=document.getElementById(this.id+"_guideline_"+s.parentNode.index);this.removeClass(n,"w2treeview_guideline"),this.addClass(n,"w2treeview_noguideline")}}}var l=this.modelControl.getDataComp();this.tree.nodeCount=l?l.getRowCount()+1:this.tree.nodeCount}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyRemoveRow_allChildren=function(t){try{var e=this.findNodeByIndex(t+1),i=e.parentNode,o=this.modelControl.getDataComp(),s=t,r=o.getRowCount()+1,n=1;if(e.hasChild()){s=r-1;for(var l=e;!l.isRoot()&&l.depthIndex==l.parentNode.childNodes.length;)l=l.parentNode;l.isRoot()||l.depthIndex==l.parentNode.childNodes.length||(s=l.parentNode.childNodes[l.depthIndex].index-2);for(var h=[],d=t;d<s;d++)h.push(d),this.tree.clearNode(this.tree.findNodeByIndex(d+2)),n++;o.removeRows(h)}i.childNodes.splice(e.depthIndex-1,1);for(d=e.depthIndex-1;d<i.childNodes.length;d++)i.childNodes[d].depthIndex=d+1;this.tree.clearNode(e),this.selectedInfo={dom:null,node:null};for(d=s+2;d<=r;d++)this.tree.changeNodeIndex(d,d-n);this.tree.nodeCount=o.getRowCount()+1}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.notifyRemovedRows=function(t,e){try{this.refreshItemset()}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1
;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(t<e&&this.getLastChildIndex(t)>=e)return h.v.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;if(1==this.options.moveSibling&&!i)return this._bAppendMoveNode(t,e);for(var o=this.modelControl.getDataComp(),s=t-1,r=e-1,n=this.findNodeByIndex(t),l=this.findNodeByIndex(e),d=this.getLastChildIndex(s+1)-1,c=[],u=this.tree.dataPath.depth,p=0,g=s;g<=d;g++){var m=o.getRowJSON(g);m[u]=i?Number(m[u])+(l.depth-n.depth+1):Number(m[u])+(l.depth-n.depth),"number"!==o.getColumnInfo(u).dataType&&(m[u]=m[u]+""),c.push(m),p++}this.stopRefresh(!0),o.removeRange(s,d),s<r&&(r+=s-d-1);var f=0;if(!i){var b=this.getLastChildIndex(e);f=b-e,e<=s&&b>=d&&(f-=p)}return o.insertJSON(r+1+f,c),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,r+2+f),!0}catch(t){return a.Y.printStackTrace(t,null,this),!1}},g.prototype._bAppendMoveNode=function(t,e){try{for(var i=this.modelControl.getDataComp(),o=t-1,s=e-1,r=this.findNodeByIndex(t),n=this.findNodeByIndex(e),l=this.getLastChildIndex(o+1)-1,h=[],d={},c=this.tree.dataPath.depth,u=o;u<=l;u++){var p=i.getRowJSON(u);p[c]=Number(p[c])+(n.depth-r.depth),"number"!==i.getColumnInfo(c).dataType&&(p[c]=p[c]+""),h.push(p),d[u]=p}var g=0;if(o>s){var m=[];if((f=this.getLastChildIndex(e)-1)>=o)for(u=s;u<=f;u++)d[u]||m.push(i.getRowJSON(u));else{for(u=s;u<=o-1;u++)m.push(i.getRowJSON(u));g=l-o}}else{m=[];var f=this.getLastChildIndex(e)-1;for(u=l+1;u<=f;u++)m.push(i.getRowJSON(u))}this.stopRefresh(!0);var b=o<s?o:s,y=f<o?o+g:f+g;i.removeRange(b,y);var v=[];if(o>s){v=h.concat(m);var w=s+1}else{v=m.concat(h);w=t+m.length}return i.insertJSON(b,v),this.stopRefresh(!1),this.refreshItemset(),this.selectNode(null,w),!0}catch(t){return a.Y.printStackTrace(t,null,this),!1}},g.prototype.setNodeSet=function(t,e){try{var i=e||{},s=t;if(t.indexOf("data:")>=0&&(s=t.replaceAll("data:","")),this.modelControl.getDataComp(s)){for(var r in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),this.modelControl.setItemset("data:"+s,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)(0,o.A)("string"===e[r]&&""!==e[r])&&(this.tree.xpath[r]=e[r]),this.tree.dataPath[r]=e[r],"checkbox"===r&&(this.tree.checkbox.colID=e[r],this.tree.checkbox.xpath=e[r]);this.successBinding=!1,this.tree.valueAttribute="",this.refreshItemset({setNodeSet:!0})}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.deselectNode=function(){try{if(this.selectedInfo&&this.selectedInfo.node){var t=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,e=l.Z.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),this.selectedInfo.node){var i=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index);i&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(i.style.backgroundImage=this.originalIconImage)}if(e&&this.selectedInfoStack.length>0){for(var o=0;o<this.selectedInfoStack.length;o++){var s=this.selectedInfoStack[o];s.dom&&(this.removeClass(s.dom,this.options.labelonClickClass),s.dom.style.backgroundColor=s.org.background,s.dom.style.color=s.org.color),s.icon&&this.tree.imageXPath.selectedImage&&""!=this.selectedInfo.node.selectedImage&&(s.icon.style.backgroundImage=s.org.iconImage)}this.selectedInfoStack=[]}n.f.fireEvent(this,"onchange",t,null),this.selectedInfo={groupDom:null,dom:null,node:null}
}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.drawContents())}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0){var i=t-this.resizeObj.width,o=e-this.resizeObj.height;0==i&&0==o||this.refreshItemset()}this.resizeObj={width:t,height:e}}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._getNodeXML=function(t,e){try{var i;if(!1===e||!0!==e&&!0!==this.options.useXML)i=t;else if(!this.inlineElement&&(i=t.element)instanceof WebSquare.Elem){var o=WebSquare.xmljs.json2xml(i._element);if(o){var s=WebSquare.xml.parse(o);s&&s.documentElement&&(i=s.documentElement)}}return i}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._getDepth1ParentNode=function(t){try{for(var e=null,i=t.index,o=(t.depth,this.tree.getNodeIterator({type:"dfs"}));o.next();){var s,r=o.getNode();if(1==r.depth&&(!0,s=r),r.index==i){e=s;break}}return e}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype._getBrotherNextNode=function(t){try{for(var e=null,i=t.index,o=t.depth,s=this.tree.getNodeIterator({type:"dfs"}),r=!1;s.next();){var n=s.getNode();if(r){if(n.depth==o){(1==o||this._getDepth1ParentNode(t)==this._getDepth1ParentNode(n))&&(e=n);break}}else n.index==i&&(r=!0)}return e}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.setNodeClass=function(t,e,i){try{var s;if("object"===(0,o.A)(t)&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),!s||!e||"string"!=typeof e)return;if("string"==typeof s.nodeCss?-1===(" "+s.nodeCss+" ").indexOf(" "+e+" ")&&(s.nodeCss=(s.nodeCss+" "+e).replace(/\s\s/," ").wq_trim()):s.nodeCss=e,s.rendered){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,e)}if(!0===i)for(var n=0,l=s.childNodes.length;n<l;n++){var h=s.childNodes[n];this.setNodeClass(h,e,i)}}catch(t){a.Y.printStackTrace(t,null,this)}},g.prototype.removeNodeClass=function(t,e,i){try{var s;if("object"===(0,o.A)(t)&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),!s)return;var r="string"==typeof i&&i?i:s.nodeCss;if(s.rendered){var n=document.getElementById(this.id+"_node_"+s.index);this.removeClass(n,r)}if("string"==typeof s.nodeCss&&"string"==typeof i?s.nodeCss=(" "+s.nodeCss+" ").replace(new RegExp(" "+i+" ","g")," ").replace(/\s\s/," ").wq_trim():s.nodeCss="",!0===e)for(var l=0,h=s.childNodes.length;l<h;l++){var d=s.childNodes[l];this.removeNodeClass(d,e,i)}}catch(t){a.Y.printStackTrace(t,null,this)}}},1966:function(t,e,i){"use strict";i.r(e),i.d(e,{treeview_virtual:function(){return p}});var o=i(2284),s=i(5461),r=i(1204),a=i(2256),n=function(){this.index=0,this.depthIndex=1,this.id="",this.label="",this.orgLabel="",this.value="",this.element=null,this.depth=-1,this.parentNode=null,this.childNodes=[],this._isRoot=null,this._hasChild=null,this._isLastChild=null,this.image="",this.selectedImage="",this.expandedImage="",this.checked=!1,this.folder=null,this.expandedNodes=[],this._isExpanded=!1};n.prototype.appendChild=function(t){if(t){var e=this;do{if(t==e)return!1;e=e.parentNode}while(e);if(t.parentNode){for(var i=0;i<t.parentNode.expandedNodes.length;i++){if(t==t.parentNode.expandedNodes[i]){t.parentNode.expandedNodes.splice(i,1);break}}t.parentNode.removeChild(t)}return t.parentNode=this,this.childNodes.push(t),!0}},n.prototype.removeChild=function(t){if(t){for(var e=[],i=0;i<this.childNodes.length;i++){var o=this.childNodes[i];o!=t&&e.push(o)}this.childNodes=e}},n.prototype.isRoot=function(){return this._isRoot=null,this._isRoot=null==this.parentNode,this._isRoot},n.prototype.hasChild=function(){return this._hasChild=null,this.folder?this.folder:(this._hasChild=0!=this.childNodes.length,this._hasChild=0!=this.childNodes.length,
this._hasChild)},n.prototype.isLeaf=function(){return!this.hasChild()},n.prototype.isFirstChild=function(){var t=!1;return this.parentNode?(this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},n.prototype.isLastChild=function(){if(this._isLastChild=null,!this.parentNode)return!0;var t=this.parentNode.childNodes;return t[t.length-1]==this&&(this._isLastChild=!0),1!=this._isLastChild&&(this._isLastChild=!1),this._isLastChild},n.prototype.hasSibling=function(){return this._isLastChild=null,!!this.parentNode&&1!=this.parentNode.childNodes.length},n.prototype.isExpanded=function(){if(this._isExpanded=!1,null==this.parentNode)return this._isExpanded=!0,!0;if(this.hasChild()){for(var t=0;t<this.parentNode.expandedNodes.length;t++)if(this.index==this.parentNode.expandedNodes[t].index){this._isExpanded=!0;break}return this._isExpanded}return!1},n.prototype.isFirstChildByRoot=function(){var t=!1;return this.parentNode?(0!=this.parentNode.depth||this.parentNode.childNodes[0]&&this===this.parentNode.childNodes[0]&&(t=!0),t):t},n.prototype._getAncestor=function(){for(var t=this;null!=t;t=t.parentNode)if(t.depth<=1)return t},(n.nodeIterator=function(t,e){this.node=t,this.status=0,this.options=s.q.extend({type:"dfs",pruning:null},s.q.extend({},e)),this.stack=[]}).prototype.next=function(){return!!this.node&&(0==this.status?(this.status=1,!0):("dfs"==this.options.type?(this.stack=this.node.childNodes.concat(this.stack),this.node=this.stack.shift()):"bfs"==this.options.type&&(this.stack=this.stack.concat(this.node.childNodes),this.node=this.stack.shift()),!!this.node))},n.nodeIterator.prototype.stop=function(){this.status=2},n.nodeIterator.prototype.getNode=function(){return this.node};var l=function(){this.nodeCount=0,this.rootNode=null,this.hash_index_node={},this.useXPath=!1,this.useCheckbox=!1,this.useImage=!1;var t="w2:";this.xpath={nodeset:"",label:t+"label",value:t+"value",depth:t+"depth",nodeName:t+"node",checkbox:"",folder:t+"folder"},this.dataPath={},this.imageXPath={image:"",iconImage:"",leafImage:"",selectedImage:"",expandedImage:""},this.checkbox={xpath:"",trueValue:"",falseValue:"",checkboxDisabled:"",checkboxDisabledTrueValue:"",checkboxDisabledFalseValue:"",checkboxDisabledAll:""},this.valueAttribute="",this.displayMode="0",this.delimiter="\t",this.customFormatter="",this.treeView="",this.maxDepth=-1,this.isInstance=!1};l.prototype.getNodeset=function(){if(""!=this.xpath.nodeset)return this.xpath.nodeset},l.prototype.setXPath=function(t,e,i,o,s,r,a){""!=t&&(this.useXPath=!0,this.xpath.nodeset=t,this.xpath.label=e,this.xpath.value=i,this.xpath.depth=o,this.xpath.nodeName=s,this.xpath.folder=r,this.xpath.auth=a)},l.prototype.setDataPath=function(t,e,i,o,s,r){this.dataPath.label=t,this.dataPath.value=e,this.dataPath.depth=i,this.dataPath.nodeName=o,this.dataPath.folder=s,this.dataPath.checkbox=r},l.prototype.setCheckbox=function(t,e,i,o,s,r,a,n,l,h,d){""!=t&&(this.useCheckbox=!0,this.checkbox.xpath=t,this.checkbox.trueValue=e,this.checkbox.falseValue=i,this.checkbox.checkboxDisabled=o,this.checkbox.checkboxDisabledTrueValue=s,this.checkbox.checkboxDisabledFalseValue=r,this.checkbox.checkboxDisabledAll=a,this.checkbox.refreshCheckboxModel=n,this.checkbox.refreshCheckboxDisableModel=l,this.checkbox.hierarchy=h,this.checkbox.colID=d)},l.prototype.setDisplayMode=function(t,e){this.displayMode=t,this.delimiter=e},l.prototype.setImage=function(t,e,i,o,s,r){this.useImage=!0,this.imageXPath.image=t||"",this.imageXPath.iconImage=e||"",this.imageXPath.leafImage=i||"",this.imageXPath.selectedImage=o||"",this.imageXPath.expandedImage=s||"",this.imageXPath.imageTitle=r||""},l.prototype.setXML=function(t){t&&(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},1==this.isInstance?(this.rootNode=this.parseNodeInstance(t,0,0),1==this.useImage&&this.parseImageInstance(this.rootNode)):(this.rootNode=this.parseNode(t,0,0),1==this.useImage&&this.parseImage(this.rootNode)))},l.prototype.setDataList=function(t){
var e=r.Z.getComponentById(t);if(e){this.rootNode=new n,this.nodeCount=0,this.hash_index_node[this.rootNode.index]=this.rootNode,this.dataType="list";for(var i=e.getAllFilteredJSON(),o=this.rootNode,s=0;s<i.length;s++){var l=i[s],h=parseInt(l[this.dataPath.depth],10)||0,d=o.depth,c=new n;c.index=++this.nodeCount,c.depth=h,c.element=l,c.orgLabel=l[this.dataPath.label],c.label=l[this.dataPath.label],c.value=l[this.dataPath.value],c.folder=l[this.dataPath.folder];var u=c.label;switch(this.displayMode){case"0":default:c.label=u;break;case"1":c.label=c.value+this.delimiter+u;break;case"2":c.label=u+this.delimiter+c.value}if(1==this.useCheckbox&&l[this.dataPath.checkbox])if(l[this.dataPath.checkbox].wq_trim()==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&e.setCellData(s,this.dataPath.checkbox,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&e.setCellData(s,this.dataPath.checkbox,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){var p=l[this.checkbox.checkboxDisabled].wq_trim();1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&e.setCellData(s,this.checkbox.checkboxDisabled,this.checkbox.checkboxDisabledFalseValue))}if("function"==typeof this.customFormatter){var g=this.customFormatter,m=this.getCloneNode(c);c.label=g.call(this.treeview,c.orgLabel,c.label,m)||c.label}if(h<=0&&a.v.printLog("["+t+"] The depth value must be a positive integer. (1 or more)"),d<h)o.appendChild(c);else if(d==h)o.parentNode.appendChild(c);else if(d>h){o=o.parentNode;for(var f=0;f<d-h&&null!=o.parentNode;f++)o=o.parentNode;o.appendChild(c)}o=c}this.nodeCount++;(function t(e,i,o){if(o){o.depthIndex=i,o.depth=e,e>this.maxDepth&&(this.maxDepth=e);for(var s=1,r=0;r<o.childNodes.length;r++)t.call(this,e+1,s,o.childNodes[r]),s++;this.hash_index_node[o.index]=o}}).call(this,0,0,this.rootNode),1==this.useImage&&this.parseDataListImage(this.rootNode)}},l.prototype.setData=function(t){if(t&&null!=t.data)switch(this.nodeCount=0,this.rootNode=null,this.hash_index_node={},t.type){case"dataList":this.setDataList(t.data);break;case"xmlInstance":case"inlineXML":this.setXML(t.data)}},l.prototype.appendXML=function(t,e){if(t){var i=this.findNodeByIndex(e),o=i.element,s=1;if(1==this.isInstance){for(var r=t.firstChild;null!=r;r=t.firstChild)1==r.nodeType&&r.tagName==this.xpath.nodeName&&i.appendChild(this.parseNodeInstance(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImageInstance(i)}else{for(var a=t.getChildNodes(),n=0;n<a.length;n++)1==(r=a[n]).nodeType&&r.getTagName()==this.xpath.nodeName&&i.appendChild(this.parseNode(r,i.depth+1,s++,i)),o.appendChild(t.removeChild(r));1==this.useImage&&this.parseImage(i)}return i}},l.prototype.parseNode=function(t,e,i,o){if(!t)return null;var s=WebSquare.jsonUtil.getValue(t._element,this.xpath.label,this.valueAttribute),r=null,a=this.xpath.auth&&WebSquare.jsonUtil.getValue(t._element,this.xpath.auth,this.valueAttribute);if(this.xpath.folder)r=WebSquare.jsonUtil.getValue(t._element,this.xpath.folder,this.valueAttribute);for(var l="",h=this.xpath.value.split(" "),d=0;d<h.length;d++)0!=d&&(l+="$$"),l+=WebSquare.jsonUtil.getValue(t._element,h[d],this.valueAttribute);var c=new n;switch(c.index=this.nodeCount++,c.depthIndex=i,this.displayMode){case"0":default:c.label=s;break;case"1":c.label=l+this.delimiter+s;break;case"2":
c.label=s+this.delimiter+l}if(c.orgLabel=c.label,c.value=l,c.element=t,c.depth=e,c.folder=r,c.auth=a,e>this.maxDepth&&(this.maxDepth=e),1==e?this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?c.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+c.value+"']":c.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?c.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+c.value+"']":c.xpath=this.xpath.nodeset),1==this.useCheckbox){var u=WebSquare.jsonUtil.getValue(t._element,this.checkbox.xpath,this.valueAttribute);if(c.checkboxXPath=c.xpath+"/"+this.checkbox.xpath,u==this.checkbox.trueValue?(c.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.trueValue)):(c.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){c.checkboxDisableXPath=c.xpath+"/"+this.checkbox.checkboxDisabled;var p=WebSquare.jsonUtil.getValue(t._element,this.checkbox.checkboxDisabled,this.valueAttribute);1==this.checkbox.checkboxDisabledAll?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),p==this.checkbox.checkboxDisabledTrueValue?(c.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):p==this.checkbox.checkboxDisabledFalseValue&&(c.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(c.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}var g=1,m=t.getChildNodes();for(d=0;d<m.length;d++){var f=m[d];1==f.nodeType&&f.getTagName()==this.xpath.nodeName&&c.appendChild(this.parseNode(f,e+1,g++,c))}if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(d=0;d<c.childNodes.length;d++){var v=c.childNodes[d];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<c.childNodes.length?c.partial=!0:b>0&&b==c.childNodes.length?(c.checked=!0,c.checkboxDom||(c.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+c.index)),c.checkboxDom&&(c.checkboxDom.checked=!0)):c.partial=!1}if(this.hash_index_node[c.index]=c,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(c),_=w.call(this.treeview,c.orgLabel,c.label,S)||c.label;c.label=_}return c},l.prototype.parseNodeInstance=function(t,e,i,o){if(!t)return null;var s=WebSquare.xml.getValue(t,this.xpath.label).wq_trim(),a=null,l=this.xpath.auth&&WebSquare.xml.getValue(t,this.xpath.auth).wq_trim();this.xpath.folder&&(a=r.Z.getBoolean(WebSquare.xml.getValue(t,this.xpath.folder).wq_trim()));for(var h="",d=this.xpath.value.split(" "),c=0;c<d.length;c++)0!=c&&(h+="$$"),h+=WebSquare.xml.getValue(t,d[c]).wq_trim();var u=new n;switch(u.index=this.nodeCount++,u.depthIndex=i,this.displayMode){case"0":default:u.label=s;break;case"1":u.label=h+this.delimiter+s;break;case"2":u.label=s+this.delimiter+h}if(u.orgLabel=u.label,u.value=h,u.element=t,u.depth=e,u.folder=a,u.auth=l,e>this.maxDepth&&(this.maxDepth=e),1==e?this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset:e>1&&("recursive"==this.dataType?this.xpath.value?u.xpath=o.xpath+"/"+this.xpath.nodeName+"["+this.xpath.value+"='"+u.value+"']":u.xpath=o.xpath+"/"+this.xpath.nodeName:this.xpath.value?u.xpath=this.xpath.nodeset+"["+this.xpath.value+"='"+u.value+"']":u.xpath=this.xpath.nodeset),1==this.useCheckbox){var p=WebSquare.xml.getValue(t,this.checkbox.xpath).wq_trim();if(u.checkboxXPath=u.xpath+"/"+this.checkbox.xpath,
p==this.checkbox.trueValue?(u.checked=!0,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.trueValue)):(u.checked=!1,1==this.checkbox.refreshCheckboxModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxXPath,this.checkbox.falseValue)),this.checkbox.checkboxDisabled){u.checkboxDisableXPath=u.xpath+"/"+this.checkbox.checkboxDisabled;var g=WebSquare.xml.getValue(t,this.checkbox.checkboxDisabled).wq_trim();1==this.checkbox.checkboxDisabledAll?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue)),g==this.checkbox.checkboxDisabledTrueValue?(u.checkboxDisabled=!0,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledTrueValue)):g==this.checkbox.checkboxDisabledFalseValue&&(u.checkboxDisabled=!1,1==this.checkbox.refreshCheckboxDisableModel&&WebSquare.ModelUtil.setInstanceValue(u.checkboxDisableXPath,this.checkbox.checkboxDisabledFalseValue))}}for(var m=0,f=t.firstChild;null!=f;f=f.nextSibling)1==f.nodeType&&f.tagName==this.xpath.nodeName&&u.appendChild(this.parseNodeInstance(f,e+1,m++,u));if(1==this.useCheckbox&&1==this.checkbox.hierarchy){var b=0,y=!1;for(c=0;c<u.childNodes.length;c++){var v=u.childNodes[c];1==v.checked?b++:1==v.partial&&(y=!0)}1==y||0<b&&b<u.childNodes.length?u.partial=!0:b>0&&b==u.childNodes.length?(u.checked=!0,u.checkboxDom||(u.checkboxDom=document.getElementById(this.treeview.id+"_checkbox_"+u.index)),u.checkboxDom&&(u.checkboxDom.checked=!0)):u.partial=!1}if(this.hash_index_node[u.index]=u,"function"==typeof this.customFormatter){var w=this.customFormatter,S=this.getCloneNode(u),_=w.call(this.treeview,u.orgLabel,u.label,S)||u.label;u.label=_}return u},l.prototype.parseNodeByNode=function(t,e,i,o){if(!t)return null;var s=new n;s.index=++this.nodeCount,s.depthIndex=i,s.parentNode=o,s.label=t.label,s.orgLabel=s.label,s.value=t.value,s.element=this.getCloneNodeElemnt(t.element),s.depth=e,s.folder=t.folder,s.xpath="",s.checkboxXPath="",s.selectedImage=t.selectedImage,s.expandedImage=t.expandedImage,s.image=t.image,s.imageTitle=t.imageTitle,s.labelStyle=t.labelStyle,s.expandedNodes=t.expandedNodes.splice(0),void 0!==t.checked&&(s.checked=t.checked),s.checkboxDisableXPath="",void 0!==t.checkboxDisabled&&(s.checkboxDisabled=t.checkboxDisabled);for(var r=1,a=0;a<t.childNodes.length;a++)s.appendChild(this.parseNodeByNode(t.childNodes[a],e+1,r++,s,o));return this.hash_index_node[s.index]=s,s},l.prototype.parseImage=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.image,this.valueAttribute)),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.iconImage,this.valueAttribute)),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.selectedImage,this.valueAttribute)),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.expandedImage,this.valueAttribute)),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.leafImage,this.valueAttribute)),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,
t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute);for(var n=0;n<t.childNodes.length;n++)this.parseImage(t.childNodes[n])},l.prototype.parseImageInstance=function(t){var e="",i="",o="",s="",r="",a=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;""!=this.imageXPath.image&&(e=this.imageXPath.image.match(a)?this.imageXPath.image:WebSquare.xml.getValue(t.element,this.imageXPath.image).wq_trim()||""),""!=this.imageXPath.iconImage&&(i=this.imageXPath.iconImage.match(a)?this.imageXPath.iconImage:WebSquare.xml.getValue(t.element,this.imageXPath.iconImage).wq_trim()||""),""!=this.imageXPath.selectedImage&&(o=this.imageXPath.selectedImage.match(a)?this.imageXPath.selectedImage:WebSquare.xml.getValue(t.element,this.imageXPath.selectedImage).wq_trim()||""),""!=this.imageXPath.expandedImage&&(s=this.imageXPath.expandedImage.match(a)?this.imageXPath.expandedImage:WebSquare.xml.getValue(t.element,this.imageXPath.expandedImage).wq_trim()||""),""!=this.imageXPath.leafImage&&(r=this.imageXPath.leafImage.match(a)?this.imageXPath.leafImage:WebSquare.xml.getValue(t.element,this.imageXPath.leafImage).wq_trim()||""),""!=r&&1==t.isLeaf()&&(e=r),""!=i&&(e=i,o=i,s=i),""==o&&(o=e),""==s&&(s=e),t.image=e,t.selectedImage=o,t.expandedImage=s,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.xml.getValue(t.element,this.imageXPath.imageTitle);for(var n=0;n<t.childNodes.length;n++)this.parseImageInstance(t.childNodes[n])},l.prototype.parseDataListImage=function(t,e){var i="",o="",s="",r="",a="",n=/\.[a-zA-Z][a-zA-Z][a-zA-Z][\s]*$/;if(""!=this.imageXPath.image&&(i=this.imageXPath.image.match(n)?this.imageXPath.image:t.element?t.element[this.imageXPath.image].wq_trim():""),""!=this.imageXPath.iconImage&&(o=this.imageXPath.iconImage.match(n)?this.imageXPath.iconImage:t.element?t.element[this.imageXPath.iconImage].wq_trim():""),""!=this.imageXPath.selectedImage&&(s=this.imageXPath.selectedImage.match(n)?this.imageXPath.selectedImage:t.element?t.element[this.imageXPath.selectedImage].wq_trim():""),""!=this.imageXPath.expandedImage&&(r=this.imageXPath.expandedImage.match(n)?this.imageXPath.expandedImage:t.element?t.element[this.imageXPath.expandedImage].wq_trim():""),""!=this.imageXPath.leafImage&&(a=this.imageXPath.leafImage.match(n)?this.imageXPath.leafImage:t.element?t.element[this.imageXPath.leafImage].wq_trim():""),""!=a&&1==t.isLeaf()&&(i=a),""!=o&&(i=o,s=o,r=o),""==s&&(s=i),""==r&&(r=i),t.image=i,t.selectedImage=s,t.expandedImage=r,t.imageTitle=this.imageXPath.imageTitle&&WebSquare.jsonUtil.getValue(t.element._element,this.imageXPath.imageTitle,this.valueAttribute),!0!==e)for(var l=0;l<t.childNodes.length;l++)this.parseDataListImage(t.childNodes[l])},l.prototype.parseListToTree=function(t){for(var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=WebSquare.xmljs.xml2json(e).E[0],o=0;o<t.length;o++)t[o]._element.parent=i;var s=i,r=0;this.dataType="list";for(o=0;o<t.length;o++){s=new WebSquare.Elem(s);var a=t[o],n=parseInt(WebSquare.jsonUtil.getValue(a._element,this.xpath.depth,this.valueAttribute))||0;r=parseInt(WebSquare.jsonUtil.getValue(s._element,this.xpath.depth,this.valueAttribute))||0;if(0===n&&0!==r&&(a.setNodeValue(this.xpath.depth,r),n=r),r<n)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n&&0==o)a._element.parent=s._element,a=s.appendChild(a._element);else if(r==n){a._element.parent=s.getParentNode()._element,a=s.getParentNode().appendChild(a._element)}else if(r>n){s=s.getParentNode();for(var l=0;l<r-n;l++)null!=s._element.parent&&(s=s.getParentNode());s.element&&(s=s._element),a._element.parent=s._element,a=s.appendChild(a._element)}s=a}return new WebSquare.Elem(i)},l.prototype.parseListToTreeInstance=function(t){var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0),i=e.documentElement,o=0;this.dataType="list";for(var s=0;s<t.length;s++){
var r=t[s].cloneNode(!0),a=parseInt(WebSquare.xml.getValue(r,this.xpath.depth))||0;o=parseInt(WebSquare.xml.getValue(i,this.xpath.depth))||0;if(0===a&&0!==o&&(WebSquare.xml.setValue(r,this.xpath.depth,o),a=o),o<a)r=WebSquare.xml.appendChild(i,r),o=a;else if(o==a&&0==s)r=WebSquare.xml.appendChild(i,r);else if(o==a){var n=i.parentNode;r=WebSquare.xml.appendChild(n,r)}else if(o>a){i=i.parentNode;for(var l=0;l<o-a;l++)null!=i.parentNode&&(i=i.parentNode);i.documentElement&&(i=i.documentElement),r=WebSquare.xml.appendChild(i,r)}i=r}return e.documentElement},l.prototype.parseRecursiveToTree=function(t){this.dataType="recursive";var e=WebSquare.xml.parse('<Treeview xmlns:w2="http://www.inswave.com/websquare" />',!0);if(t[0]instanceof WebSquare.Elem){for(var i=new WebSquare.Elem(WebSquare.xmljs.xml2json(e).E[0]),o=0;o<t.length;o++){var s=null;s=t[o],i.appendChild(s._element)}return i}for(o=0;o<t.length;o++){s=null;s=r.Z.isOpera()?WebSquare.xml.parse(t[o]).firstChild:t[o].cloneNode(!0),WebSquare.xml.appendChild(e.documentElement,s)}return e.documentElement},l.prototype.parseTreeToList=function(){var t=this.xpath.nodeset;if(t.indexOf("/")>-1){var e=t.split("/");t=e[e.length-2]}t&&""!=t||(t="Treeview");var i=WebSquare.xml.parse("<"+t+' xmlns:w2="http://www.inswave.com/websquare" />',!0),o=i.documentElement,s=this.getNodeIterator({type:"dfs"});for(s.next();s.next();){var r=s.getNode();o.appendChild(r.element)}return i.documentElement},l.prototype.getNodeIterator=function(t){return t=s.q.extend({rootNode:null},t||{}),new n.nodeIterator(t.rootNode||this.rootNode,t)},l.prototype.size=function(){return this.nodeCount},l.prototype.findNodeByValue=function(t){var e,i=null;for(e in this.hash_index_node)if(this.hash_index_node[e].value==t){i=this.hash_index_node[e];break}return i},l.prototype.findNodeByIndex=function(t){var e=this.hash_index_node[t];return e||null},l.prototype.IterateFindNodeByIndex=function(t){for(var e=null,i=this.getNodeIterator(),o=0;i.next();){var s=i.getNode();if(!s.parentNode||1!=s.depth&&!0!==s.parentNode._isExpanded||o++,s.index==t){e=s;break}}return e&&(e._nodePosition=o),i=null,e},l.prototype.setRender=function(t,e){t.rendered=e;for(var i=0;i<t.childNodes.length;i++)this.setRender(t.childNodes[i],e)},l.prototype.getCloneNode=function(t){var e={};return e.checkboxDisabled=t.checkboxDisabled,e.checked=t.checked,e.folder=t.folder,e.image=t.image,e.imageTitle=t.imageTitle,e.rendered=t.rendered,e.id=t.id,e.index=t.index,e.value=t.value,e.label=t.label,e.labelStyle=t.labelStyle,e},l.prototype.getCloneNodeElemnt=function(t){var e={};return e.depth=t.depth,e.label=t.label,e.value=t.value,e.rowStatus=t.rowStatus,e},l.prototype.clearNode=function(t,e){try{if(t.element=null,t.parentNode){this._removeNode(t.parentNode.expandedNodes,t),this._removeNode(t.parentNode.childNodes,t);for(var i=t.depthIndex-1;i<t.parentNode.childNodes.length;i++)t.parentNode.childNodes[i].depthIndex=i+1}t.parentNode=null,t.childNodes=[];var o=document.getElementById(e+"_node_"+t.index);o&&s.q.removeNode(o),delete this.hash_index_node[t.index]}catch(t){a.v.printLog("virtualTree.clearNode error : "+t.message)}},l.prototype.changeNodeIndex=function(t,e){var i=this.hash_index_node[t];i.index=e,delete this.hash_index_node[t],this.hash_index_node[e]=i,this.changeDomIndex("node",t,e,!0),this.changeDomIndex("checkbox",t,e),this.changeDomIndex("label",t,e),i.checkboxDom&&(i.checkboxDom=null,delete i.checkboxDom)},l.prototype.changeDomIndex=function(t,e,i,o){var s=document.getElementById(this.treeview.id+"_"+t+"_"+e);if(null!=s&&(s.setAttribute("id",this.treeview.id+"_"+t+"_"+i),o)){var a=r.Z.getDataPrefix("index");s.setAttribute(a,i)}},l.prototype.getLastChildIndex=function(t){var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.size();for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i},
l.prototype._removeNode=function(t,e){try{if(!(t instanceof Array&&e))return;for(var i=t.length-1;i>=0;i--)if(t[i]===e){t.splice(i,1);break}}catch(t){a.v.printLog("virtualTree._removeNode error : "+t.message)}},l.prototype._insertNode=function(t,e,i,o){try{if(!(t instanceof Array&&e&&i))return;for(var s=!0===o?1:0,r=!1,n=t.length-1;n>=0;n--)if(t[n]===e){t.splice(n+s,0,i),r=!0;break}r||t.push(i)}catch(t){a.v.printLog("virtualTree._insertNode error : "+t.message)}};var h=i(5375),d=i(8971),c=i(2338),u=i(2406),p=function(t,e,i){u.q.call(this,t,e,i)};s.q.extend(p.prototype,u.q.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.treeview",pluginName:"treeview",renderType:"virtual",userEvents:["onclick","ondblclick","onchange","onrightbuttonclick","ondrop","oncheckboxclick","onlabelclick","onlabelover","ontoggleclick","onviewchange","oneditend"],toggleEvent:"ondblclick",useConfig:!0,hierarchy:!1,refreshCheckboxModel:!1,refreshCheckboxDisableModel:!1,displayMode:"0",delimiter:"\t",folderOpenToggleImage:s.q._resourceURI+"uiplugin/treeview/images/plus.png",folderCloseToggleImage:s.q._resourceURI+"uiplugin/treeview/images/minus.png",leafToggleImage:s.q._resourceURI+"uiplugin/treeview/images/middle.gif",lastToggleImage:s.q._resourceURI+"uiplugin/treeview/images/last.gif",middleToggleImage:s.q._resourceURI+"uiplugin/treeview/images/middle.gif",labelclass:"",labelonClickClass:"treeview_select_node",labelForCheckbox:!1,title:"",escape:!0,rowHeight:20,useDrag:!1,accordion:!1,dynamicAppend:!1,dataType:"recursive",lineShow:!0,alwaysDraw:!1,showTreeDepth:0,showCheckbox:!1,trueValue:"true",falseValue:"false",checkAllChildNodes:!1,checkboxDisabled:"",checkboxDisabledTrueValue:"true",checkboxDisabledFalseValue:"false",checkboxDisabledAll:!1,scrollFix:!1,tooltipDisplay:!1,tooltipShowAlways:!1,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,redrawInterval:3,useHirarchySelect:!1,iwsSupport:!1,multiselect:!1,useDrop:!1,selectedClass:"treeview_select_nodedom",iwsDropDelta:5},p.prototype.initialize=function(t){try{switch(this.inlineElement=!1,this.useDataCollection=!1,this.successBinding=!1,this.nativeScrollWidth=18,this.tooltip=null,this.timeShowTooltip=null,this.timeHideTooltip=null,this.tree=new l,this.tree.treeview=this,this.selectedInfo={groupDom:null,dom:null,node:null},this.multiSelectedInfo=[],this.resizeObj={width:0,height:0},this.tree.setData(this._getDataObj(t)),this._request=null,this._expandedNodes=[this.tree.rootNode],this._items=[],1==this.options.accordion&&(this.options.showTreeDepth=0),this._setExpandedLevel(),this._arrowDownPressed=!1,this._arrowUpPressed=!1,this._forceRedraw=!1,this.isMobile=r.Z.isMobile(),this.touchDelta={x:0,y:0},!0===this.options.hierarchy&&(this.options.checkAllChildNodes=!0),this.options.displayMode){case"0":case"1":case"2":break;case"value delim label":this.options.displayMode="1";break;case"label delim value":this.options.displayMode="2";break;default:this.options.displayMode="0"}this.tree.setDisplayMode(this.options.displayMode,this.options.delimiter),this.editModeComp=null,this.options=WebSquare.cssManager.styleToClass(this.id,this.options),1==this.options.showCheckbox&&(1==r.Z.isOpera()?this.checkboxStyle="left:-1px;top:-1px":this.checkboxStyle="left:0px;top:0px"),this.options.useHirarchySelect&&(this.selectedInfoStack=[]),this._bExtraRowRedraw=!1,this._epsilon=2,this._initMaxRowHeight(),this._bSkipScrollY=!1}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.finalize=function(){null!=this.editModeComp&&WebSquare.idCache[this.editModeComp.uuid]&&this.editModeComp.remove(),this._request=null;for(var t=0,e=this._items.length;t<e;t++)this._items[t]=null;this._items=null;for(t=0,e=this.dom.length;t<e;t++)this.dom[t]=null;for(var i in this.dom=null,this.selectedInfo)this.selectedInfo.hasOwnProperty(i)&&(this.selectedInfo[i]=null);this.selectedInfo=null;for(t=0,
e=this.tree.size();t<e;t++)this.tree.hash_index_node[t]=null;for(var i in this.tree)this.tree.hasOwnProperty(i)&&(this.tree[i]=null);this.tree=null,u.q.removeCheckResize(this.uuid),u.q.prototype.finalize.call(this)},p.prototype._getData=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++){var a=[];a=this.tree.hash_index_node[t[s].parent].childNodes.slice(0),o.push({parent:t[s].parent,items:a.splice(t[s].offset,t[s].limit)})}this._setData(e,i,o)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._setData=function(t,e,i){for(var o=[],s=0,r=i.length;s<r;s++){for(var a=i[s],n=-1,l=0,h=o.length;l<h;l++)if(o[l].index===a.parent){n=l;break}o=n>-1?o.slice(0,n+1).concat(a.items).concat(o.slice(n+1)):a.items.concat(o)}this._items=o,this._redraw(o,t,e)},p.prototype._expandNode=function(t){if(t.expandedNodes||(t.expandedNodes=[]),t.hasChild()){var e=t.parentNode;e&&!t.isExpanded()&&(-1===e.expandedNodes.indexOf(t)&&e.expandedNodes.push(t),e._isExpanded=!0)}},p.prototype._collapseNode=function(t){var e=t.parentNode;if(e&&t.isExpanded()){for(var i=-1,o=0,s=e.expandedNodes.length;o<s;o++){var r=e.expandedNodes[o];if(t.index===r.index){i=o;break}}e.expandedNodes.splice(i,1),e._isExpanded=!1}},p.prototype.redraw=function(t,e){var i=this.render.clientHeight||parseInt(this.render.style.height,10)||parseInt(WebSquare.style.getComputedStyle(this.render,"height"),10),o=Math.floor(i/this._minRowHeight),s=Math.ceil(this.getElementById(this.id+"_scrollY_div").scrollTop/this.options.rowHeight),r=this._buildTree(s,o);this._getData(r,t,e),this._items.length>0&&(this.resizeObj={width:this.render.offsetWidth,height:this.render.offsetHeight})},p.prototype._buildTree=function(t,e){var i=[];this._sortAllExpandedNodes(this._expandedNodes),this._calculateExpandedNodes(this._expandedNodes,0);return function o(s,r){for(var a=0,n=s.length;a<n;a++){var l=s[a];if(g=t,m=t+e,f=l._start,b=l._end,f<g&&b<g||f>m&&b>m)t>l._end&&r&&(r.offset-=l._end-l._start+1);else{var h=Math.max(t,l._start),d=Math.min(t+e-1,l._end),c=Math.max(0,Math.min(d-h+1,e));if(r&&(r.limit-=c,t>l._start)){var u=l._end-l._start+1-c;u>0&&(r.offset-=u)}var p={parent:l.index,offset:t>l._start?t-l._start:0,limit:Math.min(c,e)};i.push(p),o(l.expandedNodes,p)}}var g,m,f,b}(this._expandedNodes),i},p.prototype._iterateAllExpandedNodes=function(t,e){try{for(var i=0,o=t.length;i<o;i++)e(t[i]),this._iterateAllExpandedNodes(t[i].expandedNodes,e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._findExpandedNodeByIndex=function(t){var e=null;return this._iterateAllExpandedNodes(this._expandedNodes,(function(i){i.index===t&&(e=i)})),e},p.prototype._sortAllExpandedNodes=function(t){try{t.sort((function(t,e){return t.depthIndex-e.depthIndex}));for(var e=0;e<t.length;e++)this._sortAllExpandedNodes(t[e].expandedNodes)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._calculateExpandedNodes=function(t,e){try{for(var i=0;i<t.length;i++){var o,s=t[i],r=t[i-1];o=r?r._end+1+(s.depthIndex-r.depthIndex):e+s.depthIndex,s._start=o;var a=s.childNodes.length;this._iterateAllExpandedNodes(s.expandedNodes,(function(t){a+=t.childNodes.length})),s._end=s._start+a-1,this._calculateExpandedNodes(s.expandedNodes,s._start)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._setExpandedLevel=function(){try{var t=0,e=null;if(1==this.options.alwaysDraw)for(t=0;t<this.tree.size();t++)e=this.tree.hash_index_node[t],this._expandNode(e);else for(t=0;t<this.tree.size();t++)(e=this.tree.hash_index_node[t]).depth<=this.options.showTreeDepth&&this._expandNode(e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=[],e=this.nativeScrollWidth+"px",i=""==this.options.style?"":"style='"+this.options.style+"' ",o="style='right:"+e+";'",s="style='right:"+e+"; height:"+e+";'",r="style='width:"+e+";'";return t.push("<div id='"+this.id+"' tabindex='0' "+i+"class='w2treeview_virtual "+this.options.className+"'>"),
t.push("  <div id='"+this.id+"_main_div' "+o+" class='w2treeview_virtual_main_div' >"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollX_div' "+s+" class='w2treeview_virtual_scrollX_div'>"),t.push("      <div id='"+this.id+"_scrollX_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),t.push("  <div id='"+this.id+"_scrollY_div' "+r+" class='w2treeview_virtual_scrollY_div' >"),t.push("      <div id='"+this.id+"_scrollY_scrollbar' style='width:1px; height:1px; visibility:hidden;'></div>"),t.push("  </div>"),this.options.useDrop&&t.push("<div id='"+this.id+"_drop_div' class='w2treeview_virtual_drop_div'></div>"),t.push("</div>"),t.join("")}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{var t;if(this.useDataCollection&&(t=this.modelControl.getDataComp())&&t._getDelayedRefreshComponent&&t._getDelayedRefreshComponent(this.id)&&(this.refreshItemset(),t._setDelayedRefreshComponent(this.id,!1)),this.dom[this.id+"_main_div"]=document.getElementById(this.id+"_main_div"),this.dom[this.id+"_scrollX_div"]=document.getElementById(this.id+"_scrollX_div"),this.dom[this.id+"_scrollX_scrollbar"]=document.getElementById(this.id+"_scrollX_scrollbar"),this.dom[this.id+"_scrollY_div"]=document.getElementById(this.id+"_scrollY_div"),this.dom[this.id+"_scrollY_scrollbar"]=document.getElementById(this.id+"_scrollY_scrollbar"),this.tree.rootNode?this.redraw(!0):this._updateScroll(),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener2(this.dom[this.id+"_main_div"],"onmousewheel",this.handleMouseWheelEvent,this),this.event.addListener2(this.dom[this.id+"_main_div"],"onscroll",this.fixScrollTop,this),this.options.iwsSupport?this.addClass("w2noselect"):this.event.addListener(this.render,"onselectstart",(function(t){c.f.stopEvent(t)})),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,this.handleContextmenuEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.activateDrag)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener2(this.dom[this.id+"_scrollX_div"],"onscroll",this.handleScrollXEvent,this),this.event.addListener2(this.dom[this.id+"_scrollY_div"],"onscroll",this.handleScrollYEvent,this),this.refreshStop=!1,this.useDataCollection)(t=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck));u.q.addCheckResize(this.uuid,"checkResize")}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._redraw=function(t,e,i){try{for(var o=[],s=0,r=t.length;s<r;s++)o.push(this.nodeToHTML(t[s]));if(document.getElementById(this.id+"_main_div").innerHTML=o.join(""),1==e){var a=0;this._forceRedraw=!0,this._iterateAllExpandedNodes(this._expandedNodes,(function(t){a+=t.childNodes.length})),this._updateScroll(a)}i&&i.call(this)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getNativeScrollWidth=function(){var t=document.createElement("div");t.style="overflow-y:scroll; visibility:hidden; width:100px;",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=100-e.offsetWidth;return document.body.removeChild(t),i},p.prototype._updateScroll=function(t){
var e=this.getElementById(this.id+"_main_div"),i=this.getElementById(this.id+"_scrollY_div"),o=this.getElementById(this.id+"_scrollX_div"),s=this.getElementById(this.id+"_scrollY_scrollbar"),r=this.getElementById(this.id+"_scrollX_scrollbar"),a=e.clientWidth,n=e.scrollWidth,l=this._getVisibleInfo(),h=l.height,d=a<n,c=d?this.nativeScrollWidth:0,u=t>e.childNodes.length||h>=e.offsetHeight-c,p=0;if(u){var g=Math.max(e.offsetHeight-h-c,0),m=Math.floor(g/this._maxRowHeight);if((p=t-l.rowCount-m)<=0&&(p=0,u=!1,t-e.childNodes.length>0&&0===i.scrollTop)){var f=this._buildTree(0,t);return this._getData(f)}}this._bExtraRowRedraw=!1,i.style.visibility=u?"visible":"hidden",e.style.right=u?this.nativeScrollWidth+"px":0,o.style.visibility=d?"visible":"hidden",o.style.right=u?this.nativeScrollWidth+"px":0;var b=p*this.options.rowHeight+e.offsetHeight,y=u?n+this.nativeScrollWidth:n;s.style.height=b+"px",r.style.width=y+"px"},p.prototype.expandNode=function(t,e,i){try{var o=null;if(o="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._expandNode(o),e)for(var s=0,r=o.childNodes.length;s<r;s++)this.expandNode(o.childNodes[s].index,e);this.refreshStop||!0===i||this.redraw(!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.collapseNode=function(t,e){try{var i=null;if(i="number"==typeof t?this.tree.findNodeByIndex(t):this.tree.findNodeByValue(t),this._collapseNode(i),e)for(var o=0,s=i.childNodes.length;o<s;o++)this.collapseNode(i.childNodes[o].index,e);this.redraw(!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.findNodeByValue=function(t,e){try{var i=this.tree.findNodeByValue(t);if(!0===e&&i){var o=i.index*this.options.rowHeight,s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,r=this.dom[this.id+"_scrollY_div"].scrollTop;return s<o?(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=o-s+parseInt(this.render.offsetHeight/2)):(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(t,null),this.getSelectedNode()}return i}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.findNodeByIndex=function(t,e){try{if(!0===e){var i=this.tree.findNodeByIndex(t);if(!i)return;var o=i.index*this.options.rowHeight,s=WebSquare.style.getAbsoluteTop(this.render)+this.render.offsetHeight,r=this.dom[this.id+"_scrollY_div"].scrollTop;return s<o?(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=o-s+parseInt(this.render.offsetHeight/2)):(r+s<o||r>=o)&&(this.dom[this.id+"_scrollY_div"].scrollTop=0),this.selectNode(null,t),this.getSelectedNode()}return this.tree.findNodeByIndex(t)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.toggleChild=function(t,e,i){try{var o;if(null==e&&(e=-1),null!=t&&(o=this.tree.findNodeByValue(t))&&(e=o.index),(o=this.tree.findNodeByIndex(e)).isLeaf())return;if(1==this.options.accordion)for(var s=o._getAncestor(),r=1,a=this.tree.size();r<a;r++)this.tree.hash_index_node[r]._getAncestor()!=s&&this._collapseNode(this.tree.hash_index_node[r]);switch(i){case!0:this._expandNode(o);break;case!1:this._collapseNode(o);break;default:o.isExpanded()?this._collapseNode(o):this._expandNode(o)}this.redraw(!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.appendData=function(t,e,i){try{if(0==this.options.dynamicAppend){var o=WebSquare.language.getMessage("Treeview_warning1")||"If you are processing the treeview dynamically, it is recommended to set dynamicAppend='true'";$l(o+"["+this.id+"]")}if(void 0===t||null==t||!e)return;i=void 0!==i&&i;var s=this.tree.findNodeByIndex(t);if(!i&&s.childNodes&&s.childNodes[0]&&s.childNodes[0].rendered)return;var r=null;"recursive"==this.options.dataType?r=this.tree.parseRecursiveToTree(e):"listed"==this.options.dataType&&(r=this.tree.parseListToTree(e)),this.tree.appendXML(r,t),0==t?(s.hasChild(),this.redraw()):s.childNodes.length>0&&(s.childNodes[0].rendered=!1,this.toggleChild(null,s.index,!0))}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.spanAll=function(t){try{
if(1==this.options.accordion){var e=WebSquare.language.getMessage("Treeview_warning2","spanAll")||"The spanAll API is not supported in treeview's accordion mode.";return void $l(e+"["+this.id+"]")}var i=this.tree.size();if(1==t)for(var o=0;o<i;o++)this._expandNode(this.tree.hash_index_node[o]);else if(0==t)for(o=i-1;o>=0;o--)this.tree.hash_index_node[o].expandedNodes=[];this.redraw(!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.spanNode=function(t,e,i){try{return null==t&&null==e&&null==i?void 0:null==e&&null==i&&"object"===(0,o.A)(t)?this._spanNode(t):null==i&&"object"===(0,o.A)(t)&&"boolean"==typeof e?this._spanNode(t,e):this._spanNode({index:t,applyChildNodes:i},e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._spanNode=function(t,e){try{if(1==this.options.accordion){var i=WebSquare.language.getMessage("Treeview_warning2","spanNode")||"The spanNode API is not supported in treeview's accordion mode.";return void $l(i+"["+this.id+"]")}var o=t.index,s=t.depth,r=t.applyChildNodes;if(0==o||o){var a=(c=this.findNodeByIndex(o)).childNodes;if(1==e){if(1==r)for(var n=0;n<a.length;n++)a[n].childNodes.length>0&&this.spanNode(a[n].index,e,r)}else if(0==e&&1==r)for(n=a.length-1;n>=0;n--)a[n].childNodes.length>0&&this.spanNode(a[n].index,e,r);this.toggleChild(null,o,e)}else if(0==s||s)for(var l=0,h=this.tree.nodeCount;l<h;l++){var c;if((c=this.tree.hash_index_node[l]).depth===s){if("boolean"==typeof r)for(var u=c.childNodes,p=(n=0,u.length);n<p;n++)u[n].childNodes.length>0&&this.spanNode(u[n].index,e,r);this.toggleChild(null,c.index,e)}}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.selectNode=function(t,e,i,s,a){try{"object"===(0,o.A)(a)&&null!=a||(a={});i=void 0===i||i;var n=r.Z.getBoolean(this.options.useHirarchySelect),l=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,h=null,u=this.options.multiselect&&(a.ctrlKey||a.shiftKey);if(null!=t?h=this.tree.findNodeByValue(t):null!=e&&(h=this.tree.findNodeByIndex(e)),this.options.multiselect)if(u){if(a.ctrlKey){var p=this.multiSelectedInfo.indexOf(h.index);if(p>=0){var g=this.multiSelectedInfo[p];if(this.multiSelectedInfo.splice(p,1),!(this.multiSelectedInfo.length>0))return this.deselectNode();h=this.tree.findNodeByIndex(this.multiSelectedInfo[this.multiSelectedInfo.length-1]),l=this.tree.findNodeByIndex(g),this._deselectNodeByIndex(g)}else this.multiSelectedInfo.push(h.index)}else if(a.shiftKey){var m=this.multiSelectedInfo.length-1,f=this.multiSelectedInfo[m];if(f!==h.index){for(var b=f>h.index?-1:1,y=[],v=f+b;v*b<=h.index*b;v+=b){(w=this.multiSelectedInfo.indexOf(v))>=0?y.push(w):this.multiSelectedInfo.push(v)}y.length>0&&y.push(m),y.sort((function(t,e){return Number(e)-Number(t)}));for(v=0;v<y.length;v++){var w=y[v],S=this.multiSelectedInfo[w];this.multiSelectedInfo.splice(w,1),this._deselectNodeByIndex(S)}return this._selectNodeMulti()}}}else this._deselectNodeMulti(),this.multiSelectedInfo.push(h.index);if(this.selectedInfo.dom&&!u&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.removeClass(this.selectedInfo.groupDom,this.options.selectedClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor,""!=this.selectedInfo.node.image)){var _=this.selectedInfo.node,C=document.getElementById(this.id+"_icon_"+_.index),x=_.isExpanded()?_.expandedImage:_.image;if(C){var I=this.getURL(x);C.style="background-image:url("+I+")"}}if(n&&this.selectedInfoStack.length>0){for(v=0;v<this.selectedInfoStack.length;v++){var T=this.selectedInfoStack[v];T.dom&&(this.removeClass(T.dom,this.options.labelonClickClass),this.removeClass(this.selectedInfo.groupDom,this.options.selectedClass),T.dom.style.backgroundColor=T.org.background,T.dom.style.color=T.org.color)}this.selectedInfoStack=[]}if(!0!==a.skipEvent&&(null!=l&&null!=h?l.index!=h.index&&c.f.fireEvent(this,"onchange",l,h):(null==l&&null!=h||null!=l&&null==h)&&c.f.fireEvent(this,"onchange",l,h)),
this.selectedInfo.node=h,null!=this.selectedInfo.node&&i){for(var k=this.selectedInfo.node.parentNode,L=[];k;){e=k.index;L.push(e),k=k.parentNode}for(var v in L.reverse(),L)this._expandNode(this.findNodeByIndex(L[v]));this.redraw(!0)}if(this.selectedInfo.dom=document.getElementById(this.id+"_label_"+this.selectedInfo.node.index),this.selectedInfo.groupDom=document.getElementById(this.id+"_node_"+this.selectedInfo.node.index),this.addClass(this.selectedInfo.dom,this.options.labelonClickClass),this.addClass(this.selectedInfo.groupDom,this.options.selectedClass),""!=this.selectedInfo.node.image&&""!=this.selectedInfo.node.selectedImage)if(C=document.getElementById(this.id+"_icon_"+this.selectedInfo.node.index)){this.originalIconImage=C.style;I=this.getURL(this.selectedInfo.node.selectedImage);C.style="background-image:url("+I+")"}if(this.selectedInfo.dom){if(this.originalBackgroundColor=this.selectedInfo.dom.style.backgroundColor,this.originalColor=this.selectedInfo.dom.style.color,n){for(k=this.selectedInfo.node;k;){var A=document.getElementById(this.id+"_label_"+k.index);this.selectedInfoStack.push({node:k,groupDom:document.getElementById(this.id+"_node_"+k.index),dom:A,org:{background:A?A.style.backgroundColor:null,color:A?A.style.color:null}}),this.selectedInfoStack[this.selectedInfoStack.length-1].dom&&(this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].dom,this.options.labelonClickClass),this.addClass(this.selectedInfoStack[this.selectedInfoStack.length-1].groupDom,this.options.selectedClass),this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.backgroundColor="",this.selectedInfoStack[this.selectedInfoStack.length-1].dom.style.color=""),k=k.parentNode}this.selectedInfoStack.reverse()}this.selectedInfo.dom.style.backgroundColor="",this.selectedInfo.dom.style.color=""}if(!0!==s){if(this.options.scrollFix)this.render.focus();else if(this.selectedInfo.groupDom&&(this.selectedInfo.groupDom.setAttribute("tabindex",0),this.selectedInfo.groupDom.focus(),this.selectedInfo.groupDom.setAttribute("tabindex",-1),!0!==a.skipScrollTop)){var D=this.getElementById(this.id+"_main_div"),W=this.selectedInfo.groupDom.offsetTop+this.selectedInfo.groupDom.offsetHeight-D.offsetHeight;W>0&&(this.dom[this.id+"_scrollY_div"].scrollTop+=Math.ceil(W/this.options.rowHeight)*this.options.rowHeight)}if(this.useDataCollection&&this.successBinding){var q=this.modelControl.getDataComp();if(null!=this.selectedInfo.node){for(var M in q.refCompHash){var E=q.refCompHash[M];null!=E&&WebSquare.idCache[E.uuid]&&"input"==E.options.pluginName&&E.setValue(E.getValue())}q.setRowPosition(this.selectedInfo.node.index-1)}else q.setRowPosition(null)}}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.selectNode1=function(t,e,i,o,s){try{var r=this.options.multiselect&&s&&s.ctrlKey,a={oldNode:{},newNode:null},n=null;if(null!=this.selectedInfo.node&&(a.oldNode=this.tree.getCloneNode(this.selectedInfo.node),n=a.oldNode.index),this.selectNode(t,e,i,o,s),null!=this.selectedInfo.node){var l=this.selectedInfo.node.index;null==n||n!=l?a.newNode=this.tree.getCloneNode(this.selectedInfo.node):r&&(a.newNode=this.tree.findNodeByIndex(e))}else r&&(a.newNode={});null!=a.newNode&&c.f.fireEvent(this,"onviewchange",a)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._selectNodeMulti=function(t){try{"object"===(0,o.A)(t)&&null!=t||(t={});var e={skipScrollTop:!0,skipEvent:!0,ctrlKey:!0},i=this.multiSelectedInfo.slice(0);this.multiSelectedInfo=[];for(var s=0;s<i.length;s++)this.selectNode(null,i[s],!1,!0===t.noFocus,e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.isOpen=function(t){try{if(t>=this.tree.size()||t<1)return;return this.findNodeByIndex(t).isExpanded()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedNode=function(){try{return this.selectedInfo?this.selectedInfo.node:null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedDom=function(){try{return this.selectedInfo?this.selectedInfo.dom:null
}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedLabel=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.label:""}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedValue=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.value:""}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedIndex=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.index:""}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getSelectedElement=function(){try{return this.selectedInfo&&this.selectedInfo.node?this.selectedInfo.node.element:null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setLabelStyle=function(t,e,i,s){var r;"object"===(0,o.A)(t)&&"number"==typeof t.index?r=t:"number"==typeof t?r=this.tree.findNodeByIndex(t):"string"==typeof t&&(r=this.tree.findNodeByValue(t)),this._setLabelStyle(r,e,i,s)},p.prototype._setLabelStyle=function(t,e,i,o){if(null!=t){for(e in null==t.labelStyle&&(t.labelStyle={}),t.labelStyleStr="",t.labelStyle[e]=i,this.originalBackgroundColor=t.labelStyle["background-color"]||this.originalBackgroundColor,this.originalColor=t.labelStyle.color||this.originalColor,t.labelStyle)t.labelStyleStr+=e+":"+t.labelStyle[e]+";";if(t.rendered){var s=document.getElementById(this.id+"_label_"+t.index);if(s){for(var r="",a=0,n=e.length;a<n;a++)"-"===e.charAt(a)?(r+=e.charAt(a+1).capitalize(),a++):r+=e.charAt(a);s.style[r]=i}}if(!0===o)for(a=0,n=t.childNodes.length;a<n;a++){var l=t.childNodes[a];this._setLabelStyle(l,e,i,o)}}},p.prototype.disableCheckboxByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);o&&this.disableCheckbox(o,e,i)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setLabelByIndex=function(t,e,i){this.setLabel(this.tree.findNodeByIndex(t),e,i)},p.prototype.setLabelByValue=function(t,e,i){this.setLabel(this.tree.findNodeByValue(t),e,i)},p.prototype.setLabel=function(t,e,i){try{if(t){var o=this.refreshStop;if(this.refreshStop=!0,this.useDataCollection||(this.modelControl.useItemset&&WebSquare.ModelUtil.setInstanceValue(t.xpath+"/"+this.tree.xpath.label,e),WebSquare.xml.setValue(t.element,"label",e)),"function"==typeof this.tree.customFormatter){var s=this.tree.getCloneNode(t);e=this.tree.customFormatter.call(this,e,e,s)}if(t.label=e,t.orgLabel=e,t.rendered){var r=document.getElementById(this.id+"_label_"+t.index);r&&(r.innerHTML=e)}if(this.refreshStop=o,this.useDataCollection){var a=this.modelControl.getDataComp();null!=a&&a.setCellData(t.index-1,this.tree.dataPath.label,e,null,i)}}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.checkNode=function(t,e,i,o,s){try{var r=this.tree.findNodeByIndex(t);r.checked=e;var a=document.getElementById(this.id+"_checkbox_"+t);if(a&&(a.checked=e),1==this.options.refreshCheckboxModel){if(this.stopRefresh(!0),this.useDataCollection&&this.tree.checkbox.colID){var n=this.modelControl.getDataComp(),l=e?this.options.trueValue:this.options.falseValue;null!=n&&n.setCellData(t-1,this.tree.checkbox.colID,l,null,s)}else 1==e?r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.trueValue):r.checkboxXPath&&null!=WebSquare.ModelUtil.findInstanceNode(r.checkboxXPath)&&WebSquare.ModelUtil.setInstanceValue(r.checkboxXPath,this.options.falseValue);this.stopRefresh(!1)}if(!1!==i&&(1==i||1==this.options.hierarchy||1==this.options.checkAllChildNodes))for(var h=0,c=r.childNodes.length;h<c;h++){var u=r.childNodes[h];this.checkNode(u.index,e,!0,!1)}if(1==this.options.hierarchy&&this.partialSelection(r),!1!==o&&r.parentNode.parentNode&&1==this.options.hierarchy){var p=!0;for(h=0,c=r.parentNode.childNodes.length;h<c;h++){if(1!=(u=r.parentNode.childNodes[h]).checked){p=!1;break}}1==p?this.checkNode(r.parentNode.index,!0,!1):this.checkNode(r.parentNode.index,!1,!1)}}catch(t){d.Y.printStackTrace(t,null,this)}},
p.prototype.checkByIndex=function(t,e,i){try{var o=this.tree.findNodeByIndex(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.checkByValue=function(t,e,i){try{var o=this.tree.findNodeByValue(t);if(!o)return;this.checkNode(o.index,e,i)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getCheckedNodeByType=function(t,e){try{"object"===(0,o.A)(t)&&null!=t||(t={});for(var i=[],s=this.tree.getNodeIterator({type:"bfs"});s.next();){var r=s.getNode();(1==r.checked||t.hierarchy&&1==r.partial&&!r.isRoot())&&(t.excludeRoot&&!r.isRoot()||!t.excludeRoot)&&i.push(r[e])}return i}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getCheckedValues=function(t){return this.getCheckedNodeByType(t,"value")},p.prototype.getCheckedLabels=function(t){return this.getCheckedNodeByType(t,"label")},p.prototype.getCheckedIndexes=function(t){return this.getCheckedNodeByType(t,"index")},p.prototype.getCheckedNodes=function(t){return this.getCheckedNodeByType(t,"element")},p.prototype.disableCheckbox=function(t,e,i){try{if(e=r.Z.getBoolean(e),t.checkboxDisabled=e,1==this.options.refreshCheckboxDisableModel&&(this.stopRefresh(!0),1==e?null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledTrueValue):null!=WebSquare.ModelUtil.findInstanceNode(t.checkboxDisableXPath)&&WebSquare.ModelUtil.setInstanceValue(t.checkboxDisableXPath,this.options.checkboxDisabledFalseValue),this.stopRefresh(!1)),!0===i||!1===i)for(var o=0,s=t.childNodes.length;o<s;o++){var a=t.childNodes[o];this.disableCheckbox(a,e,i)}this.redraw(!1)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.partialSelection=function(t){try{var e=0,i=!1;if(0==t.childNodes.length)return;for(var o=0,s=t.childNodes.length;o<s;o++){var r=t.childNodes[o];1==r.checked?e++:1==r.partial&&(i=!0)}1==i||0<e&&e<t.childNodes.length?(t.partial=!0,this.addClass(t.checkboxDom,"treeview_partialselect")):(t.partial=!1,this.removeClass(t.checkboxDom,"treeview_partialselect"))}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getParentValue=function(t){try{var e="",i=this.tree.findNodeByValue(t);return i&&i.parentNode&&(e=i.parentNode.value),e}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getChildData=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0,r=i.childNodes.length;s<r;s++)1==this.options.dynamicAppend||this.useDataCollection?o.push(i.childNodes[s].element):o.push(WebSquare.ModelUtil.findInstanceNode(i.childNodes[s].xpath)),1==e&&(o=o.concat(this.getChildData(i.childNodes[s].value,!0)));return o}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getChildNodes=function(t,e){try{for(var i=this.tree.findNodeByValue(t),o=[],s=0;s<i.childNodes.length;s++)o.push(i.childNodes[s]),1==e&&(o=o.concat(this.getChildNodes(i.childNodes[s].value,!0)));return o}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setCustomFormatter=function(t){if("function"==typeof t){for(var e=this.tree.getNodeIterator();e.next();){var i=e.getNode();if(!i.isRoot()){var o=this.tree.getCloneNode(i),s=t.call(this,i.orgLabel,i.label,o)||i.label;if(i.label=s,i.rendered){var r=document.getElementById(this.id+"_label_"+i.index);r&&(r.firstChild.nodeValue=i.label)}}}e=null,this.tree.customFormatter=t}},p.prototype.appendNode=function(t,e){try{if(0==this.options.dynamicAppend){var i=WebSquare.language.getMessage("Treeview_warning1")||"If you are processing the treeview dynamically, it is recommended to set dynamicAppend='true'";$l(i+"["+this.id+"]")}if(1==this.options.dynamicAppend){var o=t.childNodes?t.childNodes.length+1:1,s=e.parentNode,r=this.tree.parseNodeByNode(e,t.depth+1,o,t);t.appendChild(r);for(var a=0,n=s.expandedNodes.length;a<n;a++){var l=s.expandedNodes[a];if(e.index===l.index){s.expandedNodes.splice(a,1);break}}for(a=0,n=t.childNodes.length;a<n;a++)this.tree.setRender(t.childNodes[a],!1);t.childNodes.length>0&&(t.childNodes[0].rendered=!1,
t.expandedNodes.push(r),this.toggleChild(null,t.index,!0))}else t.appendChild(e),t.expandedNodes.push(e),this.toggleChild(null,t.index,!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.removeNode=function(t){try{if(!t)return;var e=t.parentNode;e&&(t.isExpanded()&&this._collapseNode(t),e.removeChild(t),this.redraw(!0))}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.removeNodeList=function(t){try{for(var e=0;e<t.length;e++)if(t[e]){var i=t[e].parentNode;i&&i.removeChild(t[e])}this.drawContents()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.moveNode=function(t,e,i){try{if(!this.useDataCollection)return!1;if(t==e)return!1;if(this._isParentRelation(t,e))return a.v.printLog("treeview moveNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;for(var o=this.modelControl.getDataComp(),s=t-1,r=e-1,n=this.findNodeByIndex(t),l=this.findNodeByIndex(e),h=this.getLastChildIndex(s+1)-1,c=[],u=[],p=this.tree.dataPath.depth,g=0,m=s;m<=h;m++){var f=o.getRowJSON(m);f[p]=i?Number(f[p])+(l.depth-n.depth+1):Number(f[p])+(l.depth-n.depth),"number"!==o.getColumnInfo(p).dataType&&(f[p]=f[p]+""),c.push(f),g++,u.push(m)}var b=0;if(!i){var y=this.getLastChildIndex(e);b=y-e,e<=s&&y>=h&&(b-=g)}this.stopRefresh(!0),o.removeRange(s,h),this.stopRefresh(!1),this.notifyRemovedRows(u.join(","),!1,{skipRedraw:!0}),s<r&&(r+=s-h-1);var v=r+1+b;this.stopRefresh(!0),o.insertJSON(v,c),this.stopRefresh(!1);var w=[];for(m=0;m<g;m++)w.push(v+m);return this.notifyInsertData(w.join(","),!1,{skipRedraw:!0}),this.redraw(!0),this.selectNode(null,v+1),!0}catch(t){return d.Y.printStackTrace(t,null,this),!1}},p.prototype.getLastChildIndex=function(t){try{var e=this.findNodeByIndex(t),i=t;if(e.hasChild()){i=this.tree.nodeCount-1;for(var o=e;!o.isRoot()&&o.depthIndex==o.parentNode.childNodes.length;)o=o.parentNode;o.isRoot()||o.depthIndex==o.parentNode.childNodes.length||(i=o.parentNode.childNodes[o.depthIndex].index-1)}return i}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.activateDrag=function(t){try{this.options.iwsSupport||c.f.stopEvent(t);var e=r.Z.getDataPrefix("index"),i=r.Z.getDataPrefix("tdIndex");1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll();var o=this,s=this.event.getTargetIterator(t,this.render);if(s.element.id===this.id)return;for(var a=!1,n=!1,l=!1,h=!1,u=!1;s.next();)if((s.match("treeview_icon_open")||s.match("treeview_icon_close"))&&(n=!0),s.match("treeview_label")&&(u=!0),(s.match("treeview_icon_navi")||s.match("treeview_icon_navi_img"))&&(a=!0),s.match("treeview_icon_label")&&(l=!0),s.match("treeview_checkbox")&&(h=!0),s.match("treeview_virtual_node")){var p=Number(s.getElement().getAttribute(e));if(null==p){s.stop();break}if("onmousedown"==this.options.toggleButtonEvent){var g=this.tree.findNodeByIndex(p);if(a&&!g.isLeaf()){this.toggleChild(null,p);var m=!!(g.childNodes&&g.childNodes[0]&&g.childNodes[0].rendered);this.inlineElement?c.f.fireEvent(this,"ontoggleclick",null,p,m):c.f.fireEvent(this,"ontoggleclick",g.element,p,m)}}if(!this.options.multiselect&&(u||h||l||a||n)&&this.selectNode1(null,p,!1,!0),1==this.options.useDrag){var f=this.tree.hash_index_node[p].label,b="treeview_label";if(this.options.useDrop){var y=document.getElementById(this.id+"_node_"+p);if(y){for(var v="",w=0;w<y.childNodes.length;w++){var S=y.childNodes[w];("SPAN"!==S.tagName.toUpperCase()||this.hasClass(S,"treeview_icon_label"))&&(v+=S.outerHTML)}this.multiSelectedInfo.length>1&&(v+="<span class='treeview_count'>"+this.multiSelectedInfo.length+"</span>"),f=v}b="treeview_virtual_node"}WebSquare.dragdrop.gDragManager.activate(t,s.getElement(),{id:this.id+"_drag",className:"w2treeview_drag",contents:f,delay:15,dropClass:"treeview_virtual_node",dragoverClass:b,applyMousePosition:!0,handleStart:function(t){o.options.multiselect&&-1===o.multiSelectedInfo.indexOf(p)&&o.selectNode(null,p,!1,!0,{skipEvent:!0})},onDrop:function(t,s,a,n,l,h,d){if(o.options.useDrop){
var u=document.getElementById(o.id+"_drop_div");if(u&&(u.style.display="none"),!isNaN(o._oldDropNodeIndex)){var p=document.getElementById(o.id+"_node_"+o._oldDropNodeIndex),g=document.getElementById(o.id+"_label_"+o._oldDropNodeIndex);o.removeClass(g,o.options.labelonClickClass),o.removeClass(p,o.options.selectedClass),o._oldDropNodeIndex=null}}if(t){var m=null,f={},b=null,y=null,v=null;for(f=s?new WebSquare.targetIterator(s,o.render):o.event.getTargetIterator(d);f.next();){if(f.match("w2treeview_virtual")){var w=f.getElement().id;r.Z.getComponentById(w)&&(m=r.Z.getComponentById(w)),f.stop()}if(f.match("w2grid")&&(b=f.getElement().id,f.stop()),!y&&f.match(null,null,"td")){var S=f.getElement();y=parseInt(S.getAttribute(i),10)}}if(f=null,m&&!s&&(s=document.getElementById(m.id+"_node_0")),t&&s&&m){var _,C=Number(t.getAttribute(e)),x=Number(s.getAttribute(e)),I=o.tree.findNodeByIndex(C),T=m.tree.findNodeByIndex(x);if(m.options.useDrop){_=-1;var k=h-(s.offsetTop-t.offsetTop);o.options.iwsSupport&&Math.abs(k)<o.options.iwsDropDelta?_=0:k>0&&(_=1)}!1!==c.f.fireEvent(m,"ondrop",I,T,o,m,d,_)&&m.options.useDrop&&!o.options.iwsSupport&&m.moveSelectedNode(x,_)}if(null!=b&&(v=(b=r.Z.getComponentById(b)).getDataLength(),null!=y&&(v=b.rowIndex+parseInt(y/(b.oneRowDataLength+b.defaultColCnt)))),t&&b){C=parseInt(t.getAttribute(e),10)-1;if(o.useDataCollection)var L=o.modelControl.getDataComp();I=o.tree.findNodeByIndex(C+1);c.f.fireEvent(b,"ondropfromtree",{dataListId:L.id,fromRowIndex:C,toRowIndex:v,dragNode:I})}}},onDragover:function(t,i,s,a,n,l,h){(i||c.f.fireEvent(o,"ondragleave",h),o.options.useDrop)&&((_=document.getElementById(o.id+"_drop_div"))&&(_.style.display="none"));if(t&&i){for(var d=null,u=new WebSquare.targetIterator(i,o.render);u.next();)if(u.match("w2treeview_virtual")){var p=u.getElement().id;r.Z.getComponentById(p)&&(d=r.Z.getComponentById(p)),u.stop()}if(u=null,d){var g=Number(t.getAttribute(e)),m=i.getAttribute("id"),f=Number(m.substring(m.lastIndexOf("_")+1,m.length)),b=o.tree.findNodeByIndex(g),y=d.tree.findNodeByIndex(f),v=c.f.fireEvent(d,"ondragover",b,y,o,d,h);if(o.options.useDrop&&!1!==v){var w=-1,S=l-(i.offsetTop-t.offsetTop);o.options.iwsSupport&&Math.abs(S)<o.options.iwsDropDelta?w=0:S>0&&(w=1);var _=document.getElementById(o.id+"_drop_div");if(0===w){if(!isNaN(o._oldDropNodeIndex)&&-1===o.multiSelectedInfo.indexOf(o._oldDropNodeIndex)){var C=document.getElementById(o.id+"_node_"+o._oldDropNodeIndex),x=document.getElementById(o.id+"_label_"+o._oldDropNodeIndex);o.removeClass(x,o.options.labelonClickClass),o.removeClass(C,o.options.selectedClass)}var I=document.getElementById(o.id+"_node_"+f),T=document.getElementById(o.id+"_label_"+f);o.addClass(T,o.options.labelonClickClass),o.addClass(I,o.options.selectedClass),o._oldDropNodeIndex=f}else if(_){var k=i.offsetTop;1===w&&(k+=i.offsetHeight),_.style.display="block",_.style.top=k+"px"}var L=Number(f);-1===w&&(L=f-1);var A=o._getValidDropNodeArr(L);!A||A.length}}}}})}s.stop()}s=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getNextNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o+1];break}return e},p.prototype.getPreviousNode=function(t){for(var e=null,i=t.index,o=0,s=this._items.length;o<s;o++)if(this._items[o].index==i){e=this._items[o-1];break}return e},p.prototype.showTooltip=function(t,e,i){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),null!=this.timeHideTooltip&&(clearTimeout(this.timeHideTooltip),this.timeHideTooltip=null);var o=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var s=h.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(s){var a=r.Z.getGlobalFunction(s,o.scope_id),n=!0;if("function"==typeof a&&(n=a(o)),!n)return}}catch(t){d.Y.printStackTrace(t)}this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{
className:"w2treeview_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),this.tooltip.setStyle("display","block"),this.tooltip.setStyle("left",t+"px"),this.tooltip.setStyle("top",e+"px"),this.options.escape&&(i=WebSquare.xml._encode(i+"")),this.tooltip.render.innerHTML=i})),1e3*this.options.tooltipTime)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.hideTooltip=function(){try{this.timeHideTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){this.tooltip&&this.tooltip.setStyle("display","none")})),1e3*this.options.tooltipTime)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)this.options.disabled=e,e?this.addClass(this.render,"w2treeview_disabled"):this.removeClass(this.render,"w2treeview_disabled")}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setDisabled=function(t){t=r.Z.getBoolean(t);var e=u.q.prototype.setDisabled.call(this,t);return this.disableCheckbox(this.tree.rootNode,t,!0),e},p.prototype.setEditMode=function(t){try{var e=document.getElementById(this.id+"_label_"+t);if(null==this.editModeComp||null==this.editModeComp.render){this.editModeComp=new WebSquare.uiplugin.input(this.id+"_input"),this.editModeComp.writeTo(e.parentNode),this.editModeComp.activate();var i=this.uuid;this.editModeComp.bind("onblur",(function(){var t=WebSquare.idCache[i],e=t.modelControl.getDataComp();if(e){var o=this._oldValue,s=this.getValue();e.setCellData(this._index-1,t.tree.dataPath.label,s)}else t.setLabelByIndex(this._index-1,s);t.appendChild(this),this.render.style.display="none",document.getElementById(t.id+"_label_"+this._index).style.display="",this.setValueNM(""),c.f.fireEvent(t,"oneditend",{oldValue:o,newValue:s,index:this._index})})),this.editModeComp.bind("onkeydown",(function(t){c.f.stopPropagation(t)})),this.editModeComp.bind("onmousedown",(function(t){c.f.stopPropagation(t)})),this.editModeComp.bind("onselectstart",(function(t){c.f.stopPropagation(t)}))}else this.editModeComp.render.style.display="",e.parentNode.appendChild(this.editModeComp.render);this.editModeComp._index=t,e.style.display="none",this.editModeComp.setVerticalAlign=function(){};var o=this.findNodeByIndex(t);o&&""!=o.label&&(this.editModeComp.setValueNM(o.label),this.editModeComp._oldValue=o.label),this.editModeComp.focus()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleClickEvent=function(t){try{for(var e=!1,i=!1,o=!1,s=!1,a=r.Z.getDataPrefix("index"),n=r.Z.getDataPrefix("value"),l=this.event.getTargetIterator(t,this.render);l.next();)if((l.match("treeview_icon_open")||l.match("treeview_icon_close"))&&(e=!0),l.match("treeview_checkbox")&&(o=!0),l.match("treeview_label")&&(i=!0),l.match("treeview_icon_label")&&(s=!0),l.match("treeview_virtual_node")){var u=l.getElement().getAttribute(a),p=l.getElement().getAttribute(n),g=this.tree.findNodeByIndex(u);if(e&&"onmousedown"!==this.options.toggleButtonEvent){this.toggleChild(null,u);var m=g.childNodes&&g.childNodes[0]&&g.childNodes[0].rendered;this.inlineElement?c.f.fireEvent(this,"ontoggleclick",null,u,m):c.f.fireEvent(this,"ontoggleclick",g.element,u,m)}if(o&&!g.checkboxDisabled){var f=!g.checked;this.checkNode(u,f),this.inlineElement?c.f.fireEvent(this,"oncheckboxclick",p,null,u):1==this.options.dynamicAppend||this.useDataCollection?c.f.fireEvent(this,"oncheckboxclick",p,g.element,u):c.f.fireEvent(this,"oncheckboxclick",p,WebSquare.ModelUtil.findInstanceNode(g.xpath),u)}i&&("onclick"===this.options.toggleEvent&&this.toggleChild(null,u),this.inlineElement?c.f.fireEvent(this,"onlabelclick",p,null,u):c.f.fireEvent(this,"onlabelclick",p,g.element,u)),s&&(this.inlineElement?c.f.fireEvent(this,"onImageclick",p,null,u):c.f.fireEvent(this,"onImageclick",p,g.element,u))
;var b=h.I.getConfiguration("/WebSquare/treeview/useClickEventToggleButton/@value"),y=r.Z.getBoolean(this.options.noFocusOnIconLabelClick||h.I.getConfiguration("/WebSquare/treeview/noFocusOnIconLabelClick/@value"));if(i||o||e&&"false"!=b){var v={shiftKey:t.shiftKey,ctrlKey:t.ctrlKey};this.selectNode1(null,u,!1,y,v),c.f.fireEvent(this,"onclick",p,u)}l.stop()}l=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleToggleEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=r.Z.getDataPrefix("index"),s=i.getElement().getAttribute(o);this.toggleChild(null,s),i.stop()}i=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleScrollXEvent=function(t){var e=this.dom[this.id+"_scrollX_div"].scrollLeft,i=e-this.oldScrollLeft;this.dom[this.id+"_main_div"].scrollLeft+=i,this.oldScrollLeft=e,c.f.stopEvent(t)},p.prototype.handleScrollYEvent=function(t){if(!0!==this._bSkipScrollY){var e=this.uuid,i=function(){var t=WebSquare.idCache[e],i={skipScrollTop:!0};if(t._arrowDownPressed){var o=t.getNextNode(t.selectedInfo.node);o||(o=t.selectedInfo.node),t.selectNode1(null,o.index,!1,!1,i),t._arrowDownPressed=!1}else if(t._arrowUpPressed){var s=t.getPreviousNode(t.selectedInfo.node);s||(s=t.selectedInfo.node),t.selectNode1(null,s.index,!1,!1,i),t._arrowUpPressed=!1}else if(t.options.multiselect)t._selectNodeMulti();else if(t.selectedInfo.node)for(var r=0;r<t._items.length;r++)if(t._items[r]==t.selectedInfo.node){t.selectNode1(null,t.selectedInfo.node.index,!1,!1,i);break}},o=this._checkScrollEnd();this.options.redrawInterval>0?(h.I.clearTimer(this.id+"_redraw"),h.I.setTimer((function(){WebSquare.idCache[e].redraw(o,i)}),{key:this.id+"_redraw",caller:this,delay:this.options.redrawInterval})):(0==this.options.redrawInterval||this._forceRedraw)&&(this.redraw(o,i),this._forceRedraw=!1),c.f.stopEvent(t)}},p.prototype.handleMouseWheelEvent=function(t){var e,i=t||window.event,o=i.detail,s=i.wheelDelta,r=1;o=(o=o?s&&(r=s/o)?o/r:-o/1.35:s/120)<1?o<-1?(-Math.pow(o,2)-224)/225:o:(Math.pow(o,2)+224)/225,e=t.deltaY?t.deltaY:-180*Math.min(Math.max(o/2,-1),1),this.dom[this.id+"_scrollY_div"].scrollTop+=e,c.f.stopEvent(t)},p.prototype.handleKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode,o=r.Z.getDataPrefix("index");this.selectedInfo.node?(this.selectedInfo.groupDom,e=this.selectedInfo.node.index):e=(t.srcElement||t.target).getAttribute(o),e||(e=0);var s=this.tree.findNodeByIndex(e);if(37===i||39===i||13===i){var a=37!==i;13===i?this.toggleChild(null,e,null):this.toggleChild(null,e,a);var n=this;this.redraw(!1,(function(){n.selectNode1(null,n.selectedInfo.node.index,!1,!1)}));var l=!!(s.childNodes&&s.childNodes[0]&&s.childNodes[0].rendered);this.inlineElement?c.f.fireEvent(this,"ontoggleclick",null,e,l):c.f.fireEvent(this,"ontoggleclick",s.element,e,l),c.f.stopEvent(t)}else if(38===i){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop-=1.5*this.options.rowHeight);var h=null;0==e?(e=1,h=this.tree.findNodeByIndex(e)):h=this.getPreviousNode(s),h?h.index&&this.selectNode1(null,h.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop-=2*this.options.rowHeight,this._arrowUpPressed=!0),c.f.stopEvent(t)}else if(40===i){if(this.options.scrollFix)return void(this.dom[this.id+"_scrollY_div"].scrollTop+=1.5*this.options.rowHeight);h=null;0==e?(e=1,h=this.tree.findNodeByIndex(e)):h=this.getNextNode(s),h?h.index&&this.selectNode1(null,h.index,!1):(this.dom[this.id+"_scrollY_div"].scrollTop+=2*this.options.rowHeight,this._arrowDownPressed=!0),c.f.stopEvent(t)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{for(var e=!1,i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("treeview_label")&&(e=!0),e&&i.match("treeview_virtual_node")){var o=r.Z.getDataPrefix("index"),s=i.getElement().getAttribute(o),a=this.tree.findNodeByIndex(s).value
;e&&("ondblclick"!==this.options.toggleEvent&&""!==this.options.toggleEvent||this.toggleChild(null,s)),c.f.fireEvent(this,"ondblclick",a,s),i.stop()}i=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{this.options.iwsSupport||c.f.stopEvent(t);for(var e=r.Z.getDataPrefix("index"),i=r.Z.getDataPrefix("value"),o=this.event.getTargetIterator(t,this.render);o.next();)if(o.match("treeview_label")){if(this.addClass(o.getElement(),"treeview_over"),this.options.tooltipDisplay||this.options.tooltipShowAlways){var s=o.getElement(),a=WebSquare.style.getAbsoluteLeft(s),n=WebSquare.style.getAbsoluteTop(s),l=s.firstChild.nodeValue,h=WebSquare.style.getAbsoluteLeft(this.render),u=!1;if(this.options.tooltipDisplay)if(a+s.offsetWidth>h+this.render.clientWidth+this.render.scrollLeft)u=!0;else if(r.Z.isIEAllVersion()&&!r.Z.isIE(6)&&!r.Z.isIE(7)){var p=s.style.display;s.style.display="block",s.clientWidth<s.scrollWidth&&(u=!0),s.style.display=p}if(u||this.options.tooltipShowAlways){var g=r.Z.getGlobalFunction(this.options.tooltipFormatter,this.scope_id);if(g&&"function"==typeof g){for(var m=new WebSquare.targetIterator(s,this.render),f=-1;m.next();)m.match("treeview_virtual_node")&&(f=m.getElement().getAttribute(e),m.stop());m=null;try{l=g(l,f,!!u||s.offsetWidth<s.scrollWidth)}catch(t){d.Y.printStackTrace(t,null,this)}}""!=l&&this.showTooltip(a,n,l)}}m=new WebSquare.targetIterator(o.getElement(),this.render),f=-1;for(var b="",y=null;m.next();)m.match("treeview_virtual_node")&&(f=m.getElement().getAttribute(e),b=m.getElement().getAttribute(i),y=this.tree.findNodeByIndex(f),m.stop());m=null,c.f.fireEvent(this,"onlabelover",f,y.element,b)}o=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{this.options.iwsSupport||c.f.stopEvent(t),(this.options.tooltipDisplay||this.options.tooltipShowAlways)&&this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match("treeview_label")&&this.removeClass(e.getElement(),"treeview_over");e=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.handleContextmenuEvent=function(t){try{this.options.iwsSupport||c.f.stopEvent(t);for(var e=!1,i=!1,o=!1,s=!1,a=r.Z.getDataPrefix("index"),n=this.event.getTargetIterator(t,this.render);n.next();){if(n.match("treeview_label")&&(s=!0),n.match("treeview_icon_navi")&&(e=!0),n.match("treeview_icon_label")&&(i=!0),n.match("treeview_checkbox")&&(o=!0),n.match("treeview_virtual_node")){var l=Number(n.getElement().getAttribute(a));if(e&&this.toggleChild(null,l),o){var h=document.getElementById(this.id+"_checkbox_"+l).checked;this.checkNode(l,h)}if(s||o||i){var u=this.options.multiselect&&(t.ctrlKey||t.shiftKey),p=this.options.multiselect&&this.multiSelectedInfo.indexOf(l)>=0;u||p||this.selectNode1(null,l),c.f.fireEvent(this,"onrightbuttonclick",this.findNodeByIndex(l),c.f.getMouseX(t),c.f.getMouseY(t))}n.stop()}n.match("w2treeview_virtual")&&0===this.tree.nodeCount&&(c.f.fireEvent(this,"onrightbuttonclick",null,c.f.getMouseX(t),c.f.getMouseY(t)),n.stop())}n=null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.nodeToHTML=function(t){if(!t)return"";try{t.rendered=!0;var e=[],i="",o="",s="",a="",n="",l="",h="",c="",u="";if(this.options.customFormatter&&(this.tree.customFormatter=r.Z.getGlobalFunction(this.options.customFormatter,this.scope_id)),"function"==typeof this.tree.customFormatter){var p=this.tree.getCloneNode(t),g=this.tree.customFormatter.call(this,t.orgLabel,t.label,p)||t.label;c=this.options.escape?WebSquare.xml._encode(t.label+""):g,u=this.options.escape?WebSquare.xml._encode(t.value+""):t.value}else c=this.options.escape?WebSquare.xml._encode(t.label+""):t.label,u=this.options.escape?WebSquare.xml._encode(t.value+""):t.value;if(t.hasChild()){var m=t.isExpanded();i=m?"opened":"closed",o=m?"treeview_icon_close":"treeview_icon_open",
s=m?"background: url("+this.options.folderCloseToggleImage+") no-repeat center center":"background: url("+this.options.folderOpenToggleImage+") no-repeat center center";var f=t.parentNode.childNodes;f&&f[f.length-1]==t&&(i+=" lastParentSibling")}else i="leaf",o=this.options.lineShow?t.isFirstChildByRoot()?1==t.parentNode.childNodes.length?"treeview_root_single_leaf":"treeview_root_multi_leaf":t.isLastChild()?"treeview_last_sibling":"treeview_leaf":"";var b=r.Z.getDataPrefix("index"),y=r.Z.getDataPrefix("value"),v=r.Z.getDataPrefix("depth");i+=" w2tree_depth_"+t.depth,"string"==typeof t.nodeCss&&t.nodeCss&&(i+=" "+t.nodeCss),e.push("<div id='"+this.id+"_node_"+t.index+"' tabindex='-1' class='treeview_virtual_node "+i+"' "+b+"='"+t.index+"' "+y+"='"+u+"' "+v+"='"+t.depth+"' style='height:"+this.options.rowHeight+"px;'>");var w=!1,S=[];if(this.options.lineShow){var _=t._getAncestor();if(_){n="treeview_guideline",l="width: 16px;";var C=t;for(w=!0,_.isLastChild()&&S.push(!1);C!=_;)S[C.depth-1]=!C.isLastChild(),C=C.parentNode}else n="treeview_no_guideline",l="width:"+16*(t.depth-1)+"px;"}else n="treeview_no_guideline",l="width:"+16*(t.depth-1)+"px;";if(w)for(var x=0;x<t.depth-1;x++)n=0==S[x]?"treeview_no_guideline":"treeview_guideline",e.push("<span class='"+n+"' style='"+l+"'> </span>");else e.push("<span class='"+n+"' style='"+l+"'> </span>");if(e.push("<span class='treeview_icon_navi "+o+"' style='"+s+"'></span>"),""!=t.image){var I=t.isExpanded()?t.expandedImage:t.image,T=this.getURL(I),k=t.imageTitle?"title='"+t.imageTitle+"'":"";e.push("<span id='"+this.id+"_icon_"+t.index+"' class='treeview_icon_label'"+k+" style='background-image:url("+T+")'></span>")}if(1==this.options.showCheckbox){var L=t.checked||t.partial?"checked='true' ":"",A=t.checkboxDisabled?"disabled='true' ":"",D=t.partial?"treeview_partialselect":"";!0===this.options.labelForCheckbox&&(h="for='"+this.id+"_checkbox_"+t.index+"'"),e.push("<input tabindex='-1' style='"+this.checkboxStyle+"' type='checkbox' "+L+A+" id='"+this.id+"_checkbox_"+t.index+"' class='treeview_checkbox "+D+"' />")}return t.labelStyleStr&&(a=t.labelStyleStr),e.push("<label "+h+" class='treeview_label "+this.options.labelclass+"' tabindex='-1' style='"+a+"' id='"+this.id+"_label_"+t.index+"'>"+c+"</label>"),e.push("</div>"),e.join("")}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.isLeaf=function(){try{return!this.selectedInfo||!this.selectedInfo.node||!this.selectedInfo.node.hasChild()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getDataObj=function(t){if(t){var e=WebSquare.WebSquareparser.parseItemset(t);this.modelControl.setItemset(e.nodeset,e.label,e.value),0==this.options.modelBinding&&(this.options.refreshCheckboxModel=!1,this.options.refreshCheckboxDisableModel=!1);var i={type:"",data:null},o=null,s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",h.I._XML_NAMESPACE.W2)[0];if(s){var r=WebSquare.Elem.api.getValue(s,"@nodeset");this.useDataCollection=r.match("data:");var a=r.replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);a&&(a=a[0]);var n=WebSquare.Elem.api.getElementsByTagName(s,"label",h.I._XML_NAMESPACE.W2)[0],l=WebSquare.Elem.api.getElementsByTagName(s,"value",h.I._XML_NAMESPACE.W2)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"depth",h.I._XML_NAMESPACE.W2)[0],c=WebSquare.Elem.api.getElementsByTagName(s,"folder",h.I._XML_NAMESPACE.W2)[0],u=null==n?"":n.getAttribute("ref"),p=null==l?"":l.getAttribute("ref"),g=null==d?"":d.getAttribute("ref"),m=null==c?"":c.getAttribute("ref"),f={image:"image",iconImage:"iconImage",selectedImage:"selectedImage",expandedImage:"expandedImage",leafImage:"leafImage",checkboxDisabled:"checkboxDisabled",imageTitle:"imageTitle",checkbox:"checkbox"};for(var b in f){var y=WebSquare.Elem.api.getElementsByTagName(s,""+b,h.I._XML_NAMESPACE.W2)[0];f[b]=null==y?"":y.getAttribute("ref")}var v=f.checkbox;this.useDataCollection&&this.tree.setDataPath(u,p,g,a,m,v)
;var w=f.image,S=f.iconImage,_=f.selectedImage,C=f.expandedImage,x=f.leafImage,I=f.checkboxDisabled,T=f.imageTitle;v=f.checkbox;if(w=this.options.defaultImage?this.options.defaultImage:w,S=this.options.iconImage?this.options.iconImage:S,_=this.options.selectedImage?this.options.selectedImage:_,C=this.options.expandedImage?this.options.expandedImage:C,x=this.options.leafImage?this.options.leafImage:x,I=this.options.checkboxDisabled?this.options.checkboxDisabled:I,this.tree.setXPath(r,u,p,g,a,m),this.tree.setCheckbox(v,this.options.trueValue,this.options.falseValue,I,this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy,f.checkbox),this.tree.setImage(w,S,x,_,C,T),this.useDataCollection)this.modelControl.getDataCollectionItemsetData(this.modelControl.id),null!=(o=this.modelControl.getDataComp())&&(i.type="dataList",i.data=o.id,this.successBinding=!0);else{var k=WebSquare.ModelUtil.findInstanceNodes(r,null,this.scope_id),L=null;null!=k&&("recursive"==this.options.dataType?L=this.tree.parseRecursiveToTree(k):"listed"==this.options.dataType&&(L=this.tree.parseListToTreeInstance(k))),i.type="xmlInstance",i.data=L,this.tree.isInstance=!0}}else{this.inlineElement=!0;var A="w2:";w=A+"image",S=A+"iconImage",_=A+"selectedImage",C=A+"expandedImage",x=A+"leafImage";w=""!=this.options.defaultImage?this.options.defaultImage:w,S=""!=this.options.iconImage?this.options.iconImage:S,_=""!=this.options.selectedImage?this.options.selectedImage:_,C=""!=this.options.expandedImage?this.options.expandedImage:C,x=""!=this.options.leafImage?this.options.leafImage:x,this.tree.setImage(w,S,x,_,C,A+"imageTitle"),this.tree.setCheckbox(A+"checkbox",this.options.trueValue,this.options.falseValue,A+"checkboxDisabled",this.options.checkboxDisabledTrueValue,this.options.checkboxDisabledFalseValue,this.options.checkboxDisabledAll,this.options.refreshCheckboxModel,this.options.refreshCheckboxDisableModel,this.options.hierarchy),i.type="inlineXML",i.data=t}return i}},p.prototype.refreshItemset=function(t){try{if(this.modelControl.isItemsetBinded()&&!this.refreshStop){this._initMaxRowHeight(),this.refreshStop=!0,this._expandedNodes=[];var e=this.tree.getNodeset(),i=!1;if(this.useDataCollection){var o;if(null!=(o=this.modelControl.getDataComp())){if(!this.successBinding){var s=(e=o.options.baseNode+"/"+o.options.repeatNode).replace(/\[[^\[\]]*\]/g,"").match(/[^\/]*$/);s&&(s=s[0]),this.tree.valueAttribute=o.options.valueAttribute?o.options.valueAttribute:"";var r=this.tree.dataPath.label,a=this.tree.dataPath.value,n=this.tree.dataPath.depth,l=this.tree.dataPath.folder,h=this.tree.dataPath.checkbox;this.tree.setDataPath(r,a,n,s,l,h),this.successBinding=!0,i=!0}this.tree.setData({type:"dataList",data:o.id})}}else{var c=WebSquare.ModelUtil.findInstanceNodes(e,null,this.scope_id),u=null;null!=c&&("recursive"==this.options.dataType?u=this.tree.parseRecursiveToTree(c):"listed"==this.options.dataType&&(u=1==this.tree.isInstance?this.tree.parseListToTreeInstance(c):this.tree.parseListToTree(c))),this.tree.setData({type:"xmlInstance",data:u})}if(this._expandedNodes.push(this.tree.rootNode),this._setExpandedLevel(),i)if(t&&!0===t.setNodeSet){if(this.redraw(!0),this.useDataCollection)(o=this.modelControl.getDataComp()).bind("onbeforecelldatachange",this.event.bindAsEventListener(this,this.notifyValidCheck))}else this.setAction(),this.refreshStop=!0;else this.redraw(!0);if(this.useDataCollection)null!=(o=this.modelControl.getDataComp())&&o.getRowPosition();this.refreshStop=!1}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.refreshItemArr=function(){},p.prototype.setNodeSet=function(t,e){try{var i=e||{},o=t;if(t.indexOf("data:")>=0&&(o=t.replaceAll("data:","")),this.modelControl.getDataComp(o)){for(var s in this.useDataCollection=t.match("data:"),this.modelControl.unbindItemset(),
this.modelControl.setItemset("data:"+o,i.label,i.value),this.modelControl.dataCollectionBindItemset(),this.modelControl.getDataCollectionItemsetData(this.modelControl.id),e)this.tree.dataPath[s]=e[s],"checkbox"===s&&(this.tree.checkbox.colID=e[s]);this.successBinding=!1,this.refreshItemset({setNodeSet:!0})}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.stopRefresh=function(t,e){try{this.refreshStop=r.Z.getBoolean(t),!0===e&&this.redraw(!0)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyValidCheck=function(t){try{if(t.colID===this.tree.dataPath.depth){var e=this.findNodeByIndex(t.rowIndex+1);if(t.newValue<1)throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be greater than 0."};if(t.oldValue&&t.newValue>t.oldValue&&e.isFirstChild())throw{message:"Invalid value : [label : "+e.label+", newDepth : "+t.newValue+"]. The depthValue must be less than "+(t.oldValue+1)}}return!0}catch(t){return d.Y.printStackTrace(t,null,this),!1}},p.prototype.notifyInvalid=function(){},p.prototype.notifySetCellData=function(t,e,i,o){try{if(this.refreshStop||parseInt(o,10)===parseInt(i,10))return;if(e===this.tree.dataPath.label)this.setLabelByIndex(t+1,i,!0);else if(e===this.tree.dataPath.checkbox)i==this.options.trueValue?this.checkNode(t+1,!0):i==this.options.falseValue&&this.checkNode(t+1,!1);else if(e===this.tree.dataPath.depth){if(Math.abs(i-o)>1)return void this.refreshItemset();this.stopRefresh(!0),this.notifyDepthChanged(t+1,i,o),this.stopRefresh(!1);var s=this.findNodeByIndex(t+1);s.parentNode===this.tree.rootNode?this.redraw():this.toggleChild(null,s.parentNode.index,!0)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyDepthChanged=function(t,e,i){try{var o=this.findNodeByIndex(t),s=this.modelControl.getDataComp();if(this._initMaxRowHeight(),e>i){var r=(h=o.parentNode).childNodes[o.depthIndex-2],a=o.childNodes.splice(0,o.childNodes.length);h.childNodes.splice(o.depthIndex-1,1),o.parentNode=r,r.childNodes.push(o),o.depthIndex=r.childNodes.length,r.rendered=!1,o.rendered=!1;for(var n=0;n<a.length;n++)a[n].parentNode=r,r.childNodes.push(a[n]),a[n].depthIndex=r.childNodes.length,a[n].rendered=!1;h.childNodes[0].rendered=!1}else{if(o.hasChild())for(n=o.childNodes.length-1;n>=0;n--){var l=o.childNodes[n];s.setCellData(l.index-1,this.tree.dataPath.depth,l.depth-1),this.notifyDepthChanged(l.index,l.depth-1,l.depth)}var h,c=(h=o.parentNode).parentNode;if(o.depthIndex<h.childNodes.length){var u=h.childNodes.splice(o.depthIndex,h.childNodes.length-o.depthIndex);for(n=0;n<u.length;n++)u[n].parentNode=o,o.childNodes.push(u[n]),u[n].depthIndex=o.childNodes.length,u[n].rendered=!1}h.childNodes.splice(h.childNodes.length-1,1),o.parentNode=c,c.childNodes.splice(h.depthIndex,0,o);for(n=h.depthIndex;n<c.childNodes.length;n++)c.childNodes[n].depthIndex=n+1;c.childNodes[0].rendered=!1}o.depth=e,o.element.setAttribute(s.options.valueAttribute,e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyInsertRow=function(t){try{if(this.refreshStop)return;this._initMaxRowHeight();var e=this.modelControl.getDataComp(),i=this.findNodeByIndex(t),o=new n;o.index=t+1,o.depthIndex=1,o.depth=i.depth+1,o.rendered=!1,o.parentNode=i;for(var s=e.getRowCount();s>=t+2;s--)this.tree.changeNodeIndex(s-1,s);this.tree.hash_index_node[t+1]=o,e.setCellData(t,this.tree.dataPath.depth,i.depth+1,null,!0);var r=e.getRowJSON(t);o.element=r,i.childNodes.unshift(o);for(s=0;s<i.childNodes.length;s++)i.childNodes[s].depthIndex=s+1;this.toggleChild(null,t,!0),this.tree.nodeCount=e.getRowCount()+1}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyInsertData=function(t,e,i){try{if(this.refreshStop||"string"!=typeof t||!0===e)return;"object"===(0,o.A)(i)&&null!=i||(i={});for(var s=t.split(",").sort((function(t,e){return Number(t)-Number(e)
})),a=s.length,l=Number(s[0]),h=this.findNodeByIndex(l),c=h.hasChild()&&h.expandedNodes.length>0,u=h,p=this.tree.nodeCount-1;p>l;p--)this.tree.changeNodeIndex(p,p+a);for(var g=this.modelControl.getDataComp(),m=this.tree.dataPath.depth,f=this.tree.dataPath.label,b=this.tree.dataPath.value,y=this.tree.dataPath.checkbox,v=this.tree.dataPath.folder,w=0;w<a;w++){var S=Number(s[w]),_=g.getRowJSON(S);if((I=new n).element=_,I.index=S+1,I.rendered=!1,I.label=_[f],I.orgLabel=_[f],I.checked=_[y]===this.options.trueValue,I.value=_[b],I.folder=_[v],I.depth=_[m]>0?Number(_[m]):u.depth+1,Number(I.depth)<=Number(u.depth)){for(var C=Number(u.depth)-Number(I.depth),x=0;x<C&&null!=u;x++)u=u.parentNode;if(!u||!u.parentNode)return this.refreshItemset();I.parentNode=u.parentNode,this.tree._insertNode(I.parentNode.childNodes,u,I,!0),this.tree._insertNode(I.parentNode.expandedNodes,u,I,!0);for(x=0;x<I.parentNode.childNodes.length;x++)I.parentNode.childNodes[x].depthIndex=x+1}else{if(!(Number(I.depth)>Number(u.depth)))return this.refreshItemset();I.parentNode=u,w>0?(u.expandedNodes.push(I),u.childNodes.push(I)):(u.expandedNodes.unshift(I),u.childNodes.unshift(I));for(x=0;x<u.childNodes.length;x++)u.childNodes[x].depthIndex=x+1}u=I,this.tree.hash_index_node[l+w+1]=I,1==this.tree.useImage&&this.tree.parseDataListImage(I,!0)}if(!c&&h.hasChild()&&h.expandedNodes.length>0&&this._expandNode(h),this.tree.nodeCount=g.getRowCount()+1,a>0&&this.tree.hash_index_node[l].depth==this.tree.hash_index_node[l+1].depth){u=this.tree.hash_index_node[l];var I=this.tree.hash_index_node[l+1];for(p=0;p<u.childNodes.length;p++)I.childNodes.push(u.childNodes[p]),u.childNodes[p].parentNode=I;for(p=0;p<I.childNodes.length;p++)I.childNodes[p].depthIndex=p+1;for(p=0;p<u.expandedNodes.length;p++)I.expandedNodes.push(u.childNodes[p]);u.childNodes=[],u.expandedNodes=[]}!0!==i.skipRedraw&&r.Z.setTimeout((function(){this.redraw(!0)}),{delay:50,key:this.id+"_notifyInsertData",caller:this})}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyBeforeSetRowData=function(t,e){try{if(this.refreshStop)return;this._initMaxRowHeight();var i=this.modelControl.getDataComp();this.beforeSetRowData=e?{depth:i.getCellData(t,this.tree.dataPath.depth),label:i.getCellData(t,this.tree.dataPath.label),checkbox:i.getCellData(t,this.tree.dataPath.checkbox),overwrite:e}:{depth:Number(i.getCellData(t-1,this.tree.dataPath.depth))+1,label:"",checkbox:"",overwrite:e}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifySetRowData=function(t){try{if(this.refreshStop)return;this._initMaxRowHeight();var e,i=(e=this.modelControl.getDataComp()).getCellData(t,this.tree.dataPath.depth),o=e.getCellData(t,this.tree.dataPath.label),s=e.getCellData(t,this.tree.dataPath.checkbox);if(i!=this.beforeSetRowData.depth)if(this.notifyValidCheck({colID:this.tree.dataPath.depth,oldValue:this.beforeSetRowData.depth,newValue:i}))this.notifySetCellData(t,this.tree.dataPath.depth,i,this.beforeSetRowData.depth);else(e=this.modelControl.getDataComp()).setCellData(t,this.tree.dataPath.depth,this.beforeSetRowData.depth);o!=this.beforeSetRowData.label&&this.notifySetCellData(t,this.tree.dataPath.label,o,this.beforeSetRowData.label),s!=this.beforeSetRowData.checkbox&&this.notifySetCellData(t,this.tree.dataPath.checkbox,s,this.beforeSetRowData.checkbox),this.beforeSetRowData={},this.tree.nodeCount=e.getRowCount()+1}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow=function(t,e,i){try{if(this.refreshStop)return;"object"===(0,o.A)(i)&&null!=i||(i={}),isNaN(e)&&(e=1),this._initMaxRowHeight();var s=this.findNodeByIndex(t+1).parentNode;if(this.stopRefresh(!0),this.notifyRemoveRow_allChildren(t,e),this.stopRefresh(!1),0==s.index)s._hasChild=s.folder?null:0!=s.childNodes.length;else{var a=this.findNodeByIndex(t);if(a&&!a.isRoot()){if(a.isLastChild()){var n=document.getElementById(this.id+"_node_"+a.index);this.addClass(n,"w2treeview_last_sibling"),this.removeClass(n,"w2treeview_first_sibling"),
a.isLeaf()&&this.addClass(n,"w2treeview_last_leaf")}else if(a.isFirstChild()){n=document.getElementById(this.id+"_node_"+a.index);this.addClass(n,"w2treeview_first_sibling")}if(a.parentNode.isLastChild()){var l=document.getElementById(this.id+"_guideline_"+a.parentNode.index);this.removeClass(l,"w2treeview_guideline"),this.addClass(l,"w2treeview_noguideline")}}}var h=this.modelControl.getDataComp();this.tree.nodeCount=h.getRowCount()+1,!0!==i.skipRedraw&&r.Z.setTimeout((function(){this.redraw(!0)}),{delay:50,key:this.id+"_notifyRemoveRow",caller:this})}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyRemoveRow_allChildren=function(t,e){try{this._initMaxRowHeight(),isNaN(e)&&(e=1);var i=this.findNodeByIndex(t+1),o=i.parentNode,s=this.modelControl.getDataComp(),r=t,a=s.getRowCount()+e,n=1;if(i.hasChild()){r=a-1;for(var l=i;!l.isRoot()&&l.depthIndex==l.parentNode.childNodes.length;)l=l.parentNode;l.isRoot()||l.depthIndex==l.parentNode.childNodes.length||(r=l.parentNode.childNodes[l.depthIndex].index-2);for(var h=[],c=t;c<r;c++)h.push(c),this.tree.clearNode(this.tree.findNodeByIndex(c+2),this.id),n++;s.removeRows(h)}o.childNodes.splice(i.depthIndex-1,1);for(c=i.depthIndex-1;c<o.childNodes.length;c++)o.childNodes[c].depthIndex=c+1;this.tree.clearNode(i,this.id);for(c=r+2;c<=a;c++)this.tree.changeNodeIndex(c,c-n);this.tree.nodeCount=s.getRowCount()+1}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyDataChanged=function(t){try{this.stopRefresh(!1),this.refreshItemset()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.notifyRemovedRows=function(t,e,i){try{if(this.refreshStop||"string"!=typeof t||!0===e)return;"object"===(0,o.A)(i)&&null!=i||(i={});for(var s=t.split(",").sort((function(t,e){return Number(e)-Number(t)})),a=s.length,n=0;n<a;n++){var l=Number(s[n]);this.notifyRemoveRow(l,a-n,{skipRedraw:!0})}!0!==i.skipRedraw&&r.Z.setTimeout((function(){this.redraw(!0)}),{delay:50,key:this.id+"_notifyRemovedRows",caller:this})}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.getDataListInfo=function(){try{if(this.modelControl.isDataCollectionItemsetBinded){var t={};return t.id=this.modelControl.dataCollectionItemsetInfo.dataComp.id,t.nodeset=this.modelControl.itemsetObj.nodeset,t.label=this.modelControl.itemsetObj.label,t.value=this.modelControl.itemsetObj.value,t}return null}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.deselectNode=function(t){try{if(this.selectedInfo&&this.selectedInfo.node){var e=this.selectedInfo.node?this.tree.getCloneNode(this.selectedInfo.node):null,i=r.Z.getBoolean(this.options.useHirarchySelect);if(this.selectedInfo.dom&&(this.removeClass(this.selectedInfo.dom,this.options.labelonClickClass),this.removeClass(this.selectedInfo.groupDom,this.options.selectedClass),this.selectedInfo.dom.style.backgroundColor=this.originalBackgroundColor,this.selectedInfo.dom.style.color=this.originalColor),i&&this.selectedInfoStack.length>0){for(var o=0;o<this.selectedInfoStack.length;o++){var s=this.selectedInfoStack[o];s.dom&&(this.removeClass(s.dom,this.options.labelonClickClass),s.dom.style.backgroundColor=s.org.background,s.dom.style.color=s.org.color),s.groupDom&&this.removeClass(s.groupDom,this.options.selectedClass)}this.selectedInfoStack=[]}c.f.fireEvent(this,"onchange",e,null),this.selectedInfo={groupDom:null,dom:null,node:null}}this._deselectNodeMulti()}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._deselectNodeMulti=function(t){try{for(;this.multiSelectedInfo.length>0;){var e=this.multiSelectedInfo.pop();this._deselectNodeByIndex(e)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._deselectNodeByIndex=function(t){try{var e=document.getElementById(this.id+"_label_"+t);if(e){e.style.backgroundColor=this.originalBackgroundColor,e.style.color=this.originalColor,this.removeClass(e,this.options.labelonClickClass);var i=this.tree.findNodeByIndex(t);if(i&&i.image){var o=document.getElementById(this.id+"_icon_"+t);if(o){
var s=i.isExpanded()?i.expandedImage:i.image,r=this.getURL(s);o.style="background-image:url("+r+")"}}}var a=document.getElementById(this.id+"_node_"+t);a&&this.removeClass(a,this.options.selectedClass)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setShowCheckBox=function(t){try{this.options.showCheckbox!=t&&(this.options.showCheckbox=t,this.redraw(!0))}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.checkResize=function(){try{if(this.render){var t=this.render.offsetWidth,e=this.render.offsetHeight;if(this.resizeObj&&t>0&&e>0){var i=this.uuid,o=function(){var t=WebSquare.idCache[i],e={skipScrollTop:!0};if(t.options.multiselect)t._selectNodeMulti();else if(t.selectedInfo.node)for(var o=0;o<t._items.length;o++)if(t._items[o]==t.selectedInfo.node){t.selectNode1(null,t.selectedInfo.node.index,!1,!1,e);break}};if(0==this.resizeObj.width&&0==this.resizeObj.height)this.redraw(!0,o);else{var s=t-this.resizeObj.width,r=e-this.resizeObj.height;0==s&&0==r||this.redraw(!0,o)}}this.resizeObj={width:t,height:e}}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.fixScrollTop=function(t){try{document.getElementById(this.id+"_main_div").scrollTop=0,WebSquare.event.preventDefault(t)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._checkScrollEnd=function(){try{var t=document.getElementById(this.id+"_scrollY_div");return t.scrollTop+this._epsilon>=t.scrollHeight-t.offsetHeight}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getVisibleInfo=function(){try{for(var t=this.getElementById(this.id+"_main_div"),e=0,i=0,o=0;o<t.childNodes.length;o++){var s=t.childNodes[o].offsetHeight;e+=s,this._maxRowHeight=Math.max(this._maxRowHeight,s),this._minRowHeight=Math.min(this._minRowHeight,s),t.offsetHeight>=e&&i++}return{height:e,rowCount:i}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getLastRowHeight=function(){try{var t=this.getElementById(this.id+"_main_div");return t.childNodes[t.childNodes.length-1].offsetHeight}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getOverflowY=function(){try{var t=this.getElementById(this.id+"_main_div");return this._getVisibleInfo().height-t.offsetHeight}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._resizeY=function(t){try{if(isNaN(t)||0===Number(t))return;var e;e=t>0?Math.ceil(t/this.options.rowHeight)*this.options.rowHeight:Math.floor(t/this.options.rowHeight)*this.options.rowHeight;var i=this.getElementById(this.id+"_scrollY_scrollbar");i.style.height=i.offsetHeight+e+"px";var o=this.id+"_scrollY_div";r.Z.requestAnimationFrame((function(){document.getElementById(o).scrollTop+=e}))}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._initMaxRowHeight=function(){try{this._maxRowHeight=this.options.rowHeight||0,this._minRowHeight=this.options.rowHeight||0}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setNodeClass=function(t,e,i){try{var s;if("object"===(0,o.A)(t)&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),!s||!e||"string"!=typeof e)return;if("string"==typeof s.nodeCss?-1===(" "+s.nodeCss+" ").indexOf(" "+e+" ")&&(s.nodeCss=(s.nodeCss+" "+e).replace(/\s\s/," ").wq_trim()):s.nodeCss=e,s.rendered){var r=document.getElementById(this.id+"_node_"+s.index);this.addClass(r,e)}if(!0===i)for(var a=0,n=s.childNodes.length;a<n;a++){var l=s.childNodes[a];this.setNodeClass(l,e,i)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.removeNodeClass=function(t,e,i){try{var s;if("object"===(0,o.A)(t)&&"number"==typeof t.index?s=t:"number"==typeof t?s=this.tree.findNodeByIndex(t):"string"==typeof t&&(s=this.tree.findNodeByValue(t)),!s)return;var r="string"==typeof i&&i?i:s.nodeCss;if(s.rendered){var a=document.getElementById(this.id+"_node_"+s.index);this.removeClass(a,r)}if("string"==typeof s.nodeCss&&"string"==typeof i?s.nodeCss=(" "+s.nodeCss+" ").replace(new RegExp(" "+i+" ","g")," ").replace(/\s\s/," ").wq_trim():s.nodeCss="",
!0===e)for(var n=0,l=s.childNodes.length;n<l;n++){var h=s.childNodes[n];this.removeNodeClass(h,e,i)}}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype.setTopNodeIndex=function(t){try{var e=this.tree.findNodeByIndex(t),i=Math.max(e._start-1,0)*this.options.rowHeight;this._bSkipScrollY=!0,document.getElementById(this.id+"_scrollY_div").scrollTop=i;var o=this.uuid;return new Promise((function(t,e){r.Z.requestAnimationFrame((function(){var e=WebSquare.idCache[o];e.redraw(false),e._bSkipScrollY=!1,t()}))})).catch((function(t){var e=WebSquare.idCache[o];e._bSkipScrollY=!1,d.Y.printStackTrace(t,null,e)}))}catch(t){this._bSkipScrollY=!1,d.Y.printStackTrace(t,null,this)}},p.prototype.moveSelectedNode=function(t,e){try{if(!this.useDataCollection)return!1;var i=this.modelControl.getDataComp(),o=Number(t);-1===e&&(o=t-1);var s=this._getValidDropNodeArr(o);if(!s.length)return a.v.printLog("treeview moveSelectedNode : Invalid argument. [destIndex] must not be child of [srcIndex].["+this.id+"]"),!1;for(var r=[],n=this.tree.dataPath.depth,l=this.tree.findNodeByIndex(o),h=l.depth,c=l.hasChild()?1:0,u=[],p=this._getIndexsWithChildren(s),g=0,m=this.getLastChildIndex(p[0]),f=0,b=0;b<p.length;b++){var y=p[b]-1;u.push(y);var v=i.getRowJSON(y),w=v[n],S=Number(w);0===b?f=h-S+c:b>m&&(m=this.getLastChildIndex(p[b]),f=h-S+c);var _=S+f;"number"!=typeof w&&(_=String(_)),v[n]=_,h=Number(_),r.push(v),o>y&&g++}return this.stopRefresh(!0),i.removeRows(u),this.stopRefresh(!1),this.notifyRemovedRows(u.join(","),!1,{skipRedraw:!0}),i.insertJSON(o-g,r),this.selectNode(null,o+1),!0}catch(t){return d.Y.printStackTrace(t,null,this),!1}},p.prototype._getIndexsWithChildren=function(t){try{if(!(t instanceof Array))return t;for(var e={},i=0;i<t.length;i++){var o=t[i];if(!0!==e[o]){for(var s=this.getLastChildIndex(o),r=o;r<=s;r++)e[r]=!0;e[o]=!0}}var a=[];for(var n in e)!0===e[n]&&a.push(Number(n));return a.sort((function(t,e){return Number(t)-Number(e)}))}catch(e){return d.Y.printStackTrace(e,null,this),t}},p.prototype._isParentRelation=function(t,e){try{return!isNaN(t)&&!isNaN(e)&&t!=e&&(t<e&&this.getLastChildIndex(t)>=e)}catch(t){d.Y.printStackTrace(t,null,this)}},p.prototype._getValidDropNodeArr=function(t){try{var e=[];this.options.multiselect?e=this.multiSelectedInfo.slice(0).sort((function(t,e){return Number(t)-Number(e)})):this.selectedInfo.node&&(e=[this.selectedInfo.node.index]);for(var i=[],o=0;o<e.length;o++)this._isParentRelation(e[o],t)||e[o]===t||i.push(e[o]);return i}catch(t){d.Y.printStackTrace(t,null,this)}}},3050:function(t,e,i){"use strict";i.r(e),i.d(e,{trigger:function(){return l}});var o=i(5461),s=i(8971),r=i(2338),a=i(1204),n=i(2406),l=function(t,e,i){n.q.call(this,t,e,i)};o.q.extend(l.prototype,n.q.prototype),l.prototype.defaultOptions={pluginType:"uiplugin.trigger",pluginName:"trigger",userEvents:["ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onfocus","onblur","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove","onkeydown","onkeypress","onkeyup"],useConfig:!0,type:"button",leftOnImageClass:"w2trigger_left",centerOnImageClass:"w2trigger_center",rightOnImageClass:"w2trigger_right",leftOffImageClass:"w2trigger_left",centerOffImageClass:"w2trigger_center",rightOffImageClass:"w2trigger_right",singleClassMode:!1,localeRef:"",useLocale:!1,title:"",anchorWithGroupClass:!0,initStyle:!1,target:"",name:"",animationType:"",animationColor:"",tooltipPositionX:"",tooltipPositionY:""},l.prototype.initialize=function(t){try{if(this.evented=!1,t){var e=WebSquare.WebSquareparser.parseLabel(t);e&&(this.options.value=e.value)}if(this.options.useLocale&&this.options.localeRef){var i=this.getLocaleValue(this.options.localeRef);i&&(this.options.value=i)}"w2trigger_left"!=this.options.leftOnImageClass&&"w2trigger_center"==this.options.centerOnImageClass&&"w2trigger_right"==this.options.rightOnImageClass&&(this.options.singleClassMode=!0);var o=this.options.initStyle
;this.options=WebSquare.cssManager.styleToClass(this.id,this.options),this.options.initStyle=o||"",this.options.tooltipPositionX=this.options.tooltipShowPositionX||this.options.tooltipPositionX,this.options.tooltipPositionY=this.options.tooltipShowPositionY||this.options.tooltipPositionY}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.toHTML=function(){try{var t=[],e=""==this.options.value.wq_replaceAll("'","&#39;")?"":"value ='"+this.options.value.wq_replaceAll("'","&#39;")+"'",i=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",o=""==this.options.style?"":"style='"+this.options.style+"'",r=""==this.options.tabIndex?"tabIndex='0'":"tabIndex='"+this.options.tabIndex+"'";if("button"==this.options.type.toLowerCase())t.push("<input type='button' "+r+" id='"+this.id+"' "+o+" class='w2trigger "+this.options.className+"' "+e+" "+i+"/>");else if("image"==this.options.type.toLowerCase())t.push("<table "+r+" role='button' id='"+this.id+"' "+o+" class='w2trigger w2trigger_table "+this.options.className+"' "+i+" onkeydown='if( event.keyCode == 32 || event.keyCode == 13 ) click();'>"),t.push("<tbody>"),t.push("<tr id='"+this.id+"_row'>"),1==this.options.singleClassMode?(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right '></td>")):(t.push("<td id='"+this.id+"_left' class='w2trigger_col_left "+this.options.leftOffImageClass+"'></td>"),t.push("<td id='"+this.id+"_center' class='w2trigger_col_center "+this.options.centerOffImageClass+" w2trigger_label '>"+this.options.value+"</td>"),t.push("<td id='"+this.id+"_right' class='w2trigger_col_right "+this.options.rightOffImageClass+"'></td>")),t.push("</tr>"),t.push("</tbody>"),t.push("</table>");else if("anchor"==this.options.type.toLowerCase()){var a=1==this.options.anchorWithGroupClass?"w2group":"",n=this.options.href?this.options.href:"javascript:void(null);",l=this.options.target?" target='"+this.options.target+"'":"",h=this.options.name?" name='"+this.options.name+"'":"";t.push("<a id='"+this.id+"' style='"+this.options.style+"' class='"+a+" w2trigger_anchor "+this.options.className+"' href='"+n+"' "+r+l+h+i+" >"),"bubble"===this.options.animationType?(t.push("<em class='btn_bubble_content'><span id='"+this.id+"_span' class='w2textbox '>"+this.options.value+"</span></em>"),t.push("<i class='btn_bubble_bubbles'></i>")):t.push("<span id='"+this.id+"_span' class='w2textbox '>"+this.options.value+"</span>"),t.push("</a>")}return t.join("")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if("image"==this.options.type.toLowerCase())this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent));else if("anchor"==this.options.type.toLowerCase()){this.dom.input=document.getElementById(this.id),document.getElementById(this.id+"_span").style.setProperty("line-height",this.dom.input.clientHeight+"px"),a.Z.isIEAllVersion("6 7 8 9 10")&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,(function(t){this.options.href&&""!==this.options.href.wq_trim()||r.f.stopEvent(t)}))),"bubble"===this.options.animationType&&this.event.addListener(this.render,"onpointerdown",this.event.bindAsEventListener(this,this.handlePointerDownEvent))}else this.dom.input=document.getElementById(this.id);this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),
this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setLabel=function(t){try{if(!this.options.disabled)if(this.options.value=t,"button"==this.options.type.toLowerCase())this.dom.input.value=t;else if("anchor"==this.options.type.toLowerCase())this.dom.input.childNodes[0].innerHTML=t;else{this.getElementById(this.id+"_center").innerHTML=t}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setValue=function(t){try{this.setLabel(t)}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getLabel=function(){try{return this.options.value}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getValue=function(){try{return this.options.value}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.setBackgroundImage=function(t){try{"button"==this.options.type&&((t=t.wq_trim()).startsWith("url")?this.render.style.backgroundImage=this.getURL(t):this.render.style.backgroundImage="url("+this.getURL(t)+")")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getBackgroundImage=function(){try{return"button"==this.options.type?this.getStyle("background-image"):""}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.getType=function(){try{return this.options.type}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.onPropertyChange=function(t,e){try{var i="image"==this.options.type?this.getElementById(this.id+"_row"):this.render;switch(t){case"disabled":if(1==e||"disabled"==e)WebSquare.getBody().hideToolTip();"image"==this.options.type?1==e?(this.removeClass(i,"w2trigger_over"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled"):"anchor"==this.options.type.toLowerCase()?(i=this.getElementById(this.id+"_span"),1==e?(i.style.setProperty("color","#848684"),this.addClass(i,"w2trigger_disabled")):this.removeClass(i,"w2trigger_disabled")):1==e?this.addClass(i,"w2trigger_disabled"):this.removeClass(i,"w2trigger_disabled");break;case"readOnly":1==e?this.addClass(i,"w2trigger_readOnly"):this.removeClass(i,"w2trigger_readOnly")}}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMouseoverEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_over"),"image"==this.options.type&&(0==this.evented&&(this.evented=!0,this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent))),this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOffImageClass,this.options.leftOnImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOffImageClass,this.options.centerOnImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOffImageClass,this.options.rightOnImageClass)))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMouseoutEvent=function(){try{if(1==this.options.disabled)return;var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_over"),this.removeClass(t,"w2trigger_press"),"image"==this.options.type&&(this.changeClass(this.getElementById(this.id+"_left"),this.options.leftOnImageClass,this.options.leftOffImageClass),0==this.options.singleClassMode&&(this.changeClass(this.getElementById(this.id+"_center"),this.options.centerOnImageClass,this.options.centerOffImageClass),this.changeClass(this.getElementById(this.id+"_right"),this.options.rightOnImageClass,this.options.rightOffImageClass)))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleMousedownEvent=function(){try{var t=this.getElementById(this.id+"_row");this.addClass(t,"w2trigger_press")}catch(t){s.Y.printStackTrace(t,null,this)}},
l.prototype.handleMouseupEvent=function(){try{var t=this.getElementById(this.id+"_row");this.removeClass(t,"w2trigger_press")}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeydownEvent=function(t){try{9==(t.charCode?t.charCode:t.keyCode)&&(this.tabOrderMoveStart=!1,t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handleKeyupEvent=function(t){try{var e;if(9==(t.charCode?t.charCode:t.keyCode))if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(e=a.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(e=a.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,e.focus(t))}catch(t){s.Y.printStackTrace(t,null,this)}},l.prototype.handlePointerDownEvent=function(t){try{this.options.animationColor;for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("btn_bubble")){var i=e.getElement(),o=i.getElementsByClassName("btn_bubble_bubbles")[0];if(o){var r=this.options.animationColor||WebSquare.util.getStyleProperty(i,"color"),n=document.createElement("i");n.className="btn_bubble_bubble",o.appendChild(n);var l=a.Z._animationEnd();n.addEventListener(l,(function(){this.remove()}));var h=t.pageX,d=t.pageY,c=i.getBoundingClientRect(),u=h-c.left,p=d-c.top;o.style.webkitTransform="translate3d("+u+"px,"+p+"px,0)",o.style.transform="translate3d("+u+"px,"+p+"px,0)",n.style.backgroundColor=r}}e=null}catch(t){s.Y.printStackTrace(t,null,this)}}},4142:function(t,e,i){"use strict";i.r(e),i.d(e,{udc:function(){return n}});var o=i(467),s=i(4756),r=i.n(s),a=i(5375),n=function(t){if(null==t.id||(this.id=t.id,null==window[WebSquare.noConflict].comp[this.id])){this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[this.id]=this,window[WebSquare.noConflict].comp[this.id]=this,this.scope_obj=WebSquare.idCache[t.scope_uuid],null!=this.scope_obj&&(this.org_id=t.org_id,this.scope_id=this.scope_obj.id,this.scope_obj.scope||(this.scope_obj.scope={}),this.org_id&&"string"==typeof this.org_id&&(this.scope_obj.scope[this.org_id]=this));var e={};if(null!=t.data){var i={};for(var o in t.data)"ev:"==o.slice(0,3)?e[o]=t.data[o]:"className"===o?e.className=t.data[o]:"style"===o?e.style=t.data[o]:"nextTabID"===o?e.nextTabID=t.data[o]:"firstTabID"===o?e.firstTabID=t.data[o]:"lastTabID"===o?e.lastTabID=t.data[o]:"id"!==o&&(i[o]=t.data[o]);e.dataObject={type:"json",name:"param",data:i}}e.scope=!0,e.udc2Name=t.tagName||"",e.preload=!0,t.src&&(e.src=t.src),t.msaName&&(e.msaName=t.msaName),!0===t.pcc&&(e.pcc=!0),e._scope_obj_uuid=t.scope_uuid,e.pluginName="udc2";if(e.initScript||"true"!==a.I.getConfiguration("/WebSquare/udc/initScript/@value")||(e.initScript=a.I.getConfigurationJSON("/WebSquare/udc/initScript",{type:"json"}),e.initScript["#cdata"]&&(e.initScript=e.initScript["#cdata"],"function"==typeof e.initScript&&(e.initScript="("+e.initScript.toString()+")()"))),e.postScript||"true"!==a.I.getConfiguration("/WebSquare/udc/postScript/@value")||(e.postScript=a.I.getConfigurationJSON("/WebSquare/udc/postScript",{type:"json"}),e.postScript["#cdata"]&&(e.postScript=e.postScript["#cdata"],"function"==typeof e.postScript&&(e.postScript="("+e.postScript.toString()+")()"))),this._wqContent=new WebSquare.uiplugin.wframe("",e),this._wqContent._isUDC2=!0,this._wqContent.parentFrame=t.parentFrame,!0!==t.pcc){this._reservedName={property:["id","org_id","uuid","_wqContent","_reservedName"],function:["toHTML","preActivate","activate","remove","onComplete","appendTo","writeTo"],uniqueFunction:["initAsync","finalize"]},
this._defaultFunc=["bind","unbind","trigger","show","hide","setDisabled","setReadOnly","getDisabled","getReadOnly","getChildren","_getVisible"];for(var s=this._reservedName.function.concat(this._defaultFunc),r=0;r<s.length;r++){var n=s[r];this[n]=function(t){return function(){var e;return(e=this._wqContent)[t].apply(e,arguments)}}(n)}WebSquare.componentsCache.udc||(WebSquare.componentsCache.udc={}),WebSquare.componentsCache.udc[this.uuid]=!0}}};n.prototype.initAsync=(0,o.A)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._wqContent.makeFrameUDC2(this);case 2:case"end":return t.stop()}}),t,this)}))),n.prototype.finalize=function(){this.remove()},n.prototype._clone=function(t){try{var e=WebSquare.util._copyOptions(this.options);return e.id=t.getAttribute("id")||null,e.g_index=t.getAttribute("g_index"),WebSquare.controlFactory.createControl(null,e,t,this.scope_obj,!0,this.parentFrame)}catch(t){exception.printStackTrace(t,null,this)}},n.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t);return e._wqContent=new WebSquare.uiplugin.wframe("",this._wqContent.options),e._wqContent.initAsync=(0,o.A)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),e.initAsync=(0,o.A)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),e._wqContent.makeFrameUDC2Sync(e,!0,!0),e}catch(t){exception.printStackTrace(t,null,this)}},n.prototype.destroy=function(){try{this._wqContent.remove(),window[WebSquare.noConflict].comp[this.id]=null,delete window[WebSquare.noConflict].comp[this.id],WebSquare.idToUUID[this.id]=null,delete WebSquare.idToUUID[this.id],WebSquare.idCache[this.uuid]=null,delete WebSquare.idCache[this.uuid],window[this.id]&&(window[this.id]=null,delete window[this.id])}catch(t){exception.printStackTrace(t,null,this)}}},6442:function(t,e,i){"use strict";i.r(e),i.d(e,{upload:function(){return h}});var o=i(5461),s=i(5375),r=i(8971),a=i(2338),n=i(1204),l=i(2406),h=function(t,e,i){l.q.call(this,t,e,i)};o.q.extend(h.prototype,l.q.prototype),h.prototype.defaultOptions={useConfig:!0,userEvents:["ondone","onInputValueChange"],pluginType:"uiplugin.upload",pluginName:"upload",className:"",imageStyle:"",inputStyle:"",imageClass:"",inputClass:"",type:"",action:"",imagewidth:"",imageheight:"",empty:6,subDir:"",subSize:"",title:"",accept:"",targetFrame:"body",useXHR:!1,clickOpenFileDialog:!1,msaName:""},h.prototype.initialize=function(t){try{var e=s.I.getConfiguration("/WebSquare/upload/type/@value");""==this.options.type&&""!=e?this.options.type=e:""==this.options.type&&(this.options.type="image"),this.type=this.options.type,this.style=this.options.style,this.className=this.options.className,this.imageStyle=this.options.imageStyle,this.imageClassName=this.options.imageClass,this.inputStyle=this.options.inputStyle,this.inputClassName=this.options.inputClass,this.imagewidth=this.options.imagewidth,this.imageheight=this.options.imageheight,this.empty=this.options.empty,this.inputClassName=this.options.inputClass,this._defaultAction="upload.wq?callbackFunction="+this.id+".callback",this.action=s.I.getServletURL(this,this.options.msaName,this._defaultAction,this.options.action),t&&(this.xmlEvents=WebSquare.Parser.parseEvent(t)),this.disabled=this.options.disabled,this._targetFrameId=""}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.toHTML=function(){try{var t=[],e=""==this.options.title?"":"title='"+this.options.title.wq_replaceAll("'","&#39;")+"'",i=this.options.style,o=this.options.tabIndex?"tabIndex='"+this.options.tabIndex+"'":"";""!=i&&(i.indexOf("position")<0?i="position:relative;"+i:i.indexOf("position:static")>0&&(i=i.replace("position:static","position:relative"))),i=""==i?"":"style='"+i+"'"
;var s=""==this.action?"":"action='"+this.action+"'",a=""==this.inputStyle?"":"style='"+this.inputStyle+"'",n="style='"+(""==this.imagewidth?"":"width:"+this.imagewidth+"px;")+(""==this.imageheight?"":"height:"+this.imagewidth+"px;")+this.imageStyle+"'",l=""==this.options.accept?"":"accept='"+this.options.accept+"'";return t.push("<div id='"+this.id+"' "+i+" class='w2upload "+this.options.className+"' "+o+">"),t.push("<form id='"+this.id+"_form' "+s+" enctype='multipart/form-data' name='form1_upload1' method='post' target='__targetFrame__"+this.id+"'><fieldset>"),"image"==this.options.type?(t.push("<input  name='tempFlie' readonly='readonly' id='"+this.id+"_inputFile' class='w2upload_input "+this.options.inputClass+"' "+a+" type='text'/>"),t.push("<span id='"+this.id+"_span' class='w2upload_image "+this.options.imageClass+"' "+n+">"),t.push("<input  class='w2upload_fakeInput' style='margin: 0pt; padding: 0pt; width: "+this.imagewidth+"px; height:"+this.imageheight+"px; opacity: 0.01; filter : alpha(opacity=1);' name='upload' id='"+this.id+"_fakeinput' type='file' "+e+l+"/>"),t.push("</span>")):t.push("<INPUT  id='"+this.id+"_inputFile' name='upload' type='file' _objId='2' class='w2upload_input_type' "+a+" "+e+l+"/>"),t.push("</fieldset><input type='submit' class='w2upload_submit'/></form>"),t.push("</div>"),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setAction=function(){try{if(this.dom.input=document.getElementById(this.id+"_inputFile"),this.dom.span=document.getElementById(this.id+"_span"),this.dom.form=document.getElementById(this.id+"_form"),this.dom.fakeinput=document.getElementById(this.id+"_fakeinput"),this.styleObj={paddingTop:parseInt(n.Z.getStyleProperty(this.dom.input,"padding-top"))||0,paddingBottom:parseInt(n.Z.getStyleProperty(this.dom.input,"padding-bottom"))||0,paddingLeft:parseInt(n.Z.getStyleProperty(this.dom.input,"padding-left"))||0,paddingRight:parseInt(n.Z.getStyleProperty(this.dom.input,"padding-right"))||0,borderTopWidth:parseInt(n.Z.getStyleProperty(this.dom.input,"border-top-width"))||0,borderBottomWidth:parseInt(n.Z.getStyleProperty(this.dom.input,"border-bottom-width"))||0,borderLeftWidth:parseInt(n.Z.getStyleProperty(this.dom.input,"border-left-width"))||0,borderRightWidth:parseInt(n.Z.getStyleProperty(this.dom.input,"border-right-width"))||0,height:parseInt(n.Z.getStyleProperty(this.dom.input,"height"))||0},"image"==this.options.type){var t=this.dom.span.offsetWidth||parseInt(n.Z.getStyleProperty(this.dom.span,"width"))+WebSquare.style.getSize(this.dom.span,"outerMarginWidth");if(!this.dom.input.style.width&&this.render.style.width){var e={marginLeft:parseInt(n.Z.getStyleProperty(this.dom.span,"margin-left"))||0,marginRight:parseInt(n.Z.getStyleProperty(this.dom.span,"margin-right"))||0},i=parseInt(this.render.style.width)-parseInt(t)-(e.marginLeft+e.marginRight)-(this.styleObj.borderLeftWidth+this.styleObj.borderRightWidth+this.styleObj.paddingLeft+this.styleObj.paddingRight);this.dom.input.style.width=i-this.empty+6+"px"}if(!this.dom.input.style.height&&0==this.styleObj.height){var o=parseInt(this.render.style.height)-(this.styleObj.borderBottomWidth+this.styleObj.borderTopWidth+this.styleObj.paddingBottom+this.styleObj.paddingTop);this.dom.input.style.height=o+"px"}this.dom.fakeinput.style.width=0==t?t+100+"px":t+"px"}var s=document.createElement("div"),l=this.id+"__targetFrame";s.style.width="0",s.style.height="0",s.style.visibility="hidden",s.setAttribute("id",l),this._targetFrameId=l,"body"==this.options.targetFrame?document.body.appendChild(s):"self"==this.options.targetFrame&&this.render.appendChild(s);var h=WebSquare.net.getSSLBlankPage(),d=WebSquare.language.getMessage("Upload_msg1")||"Temporary Frame for File Uploading";if(s.innerHTML="<iframe frameborder='0' name='__targetFrame__"+this.id+"' scrolling='no' style='width:0; height:0' "+h+" title='"+d+"'></iframe>","image"==this.options.type&&null!=this.dom.fakeinput){var c=this
;this.dom.fakeinput.onchange=function(){c.dom.input.value=c.dom.fakeinput.value,a.f.fireEvent(c,"onInputValueChange",c.dom.input.value)},this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent))}else{c=this;this.dom.input.onchange=function(){a.f.fireEvent(c,"onInputValueChange",c.dom.input.value)}}this.options.subDir&&this.addParam("subDir",this.options.subDir),this.options.subSize&&this.addParam("subSize",this.options.subSize),this.options.clickOpenFileDialog&&this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.dom.form,"onsubmit",this.event.bindAsEventListener(this,this.onSubmitForm))}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onSubmitForm=function(t){try{a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onInputValueChange=function(t){try{"image"==this.options.type&&null!=this.dom.fakeinput&&(this.dom.input.value=this.dom.fakeinput.value),a.f.fireEvent(this,"onInputValueChange",this.dom.input.value)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOverEvent=function(t){try{a.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.addClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleMouseOutEvent=function(t){try{a.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2upload_image")){this.removeClass(this.dom.span,"w2upload_image_over");break}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2upload_input")){this.dom.fakeinput&&(this.setEventPause("onclick",!0),this.dom.fakeinput.click(),this.setEventPause("onclick",!1));break}e=null}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},h.prototype.openFileDialog=function(){try{this.dom.fakeinput&&this.dom.fakeinput.click()}catch(t){WebSquare.exception.printStackTrace(t,null,this)}},h.prototype.setCallback=function(t){try{"function"==typeof t&&(this.callbackFunction=t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.isEmpty=function(){try{var t=this.getValue();return void 0===t||""==t}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getByte=function(){try{var t=WebSquare.language.getMessage("Upload_warning1")||"Inaccessible for security purposes.";alert(t);var e=document.getElementById(this.id+"_inputFile");if(e)return new ActiveXObject("Scripting.FileSystemObject").GetFile(e.value).size;$l("input form is not exist")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getValue=function(){try{var t=document.getElementById(this.id+"_inputFile");if(t)return t.value;$l("input form is not exist")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.reset=function(){try{this.dom.form.reset(),"image"==this.options.type?(this.dom.fakeinput.value="",this.dom.input.value=""):this.dom.input.value="";for(var t=this.dom.form.getElementsByTagName("input"),e=0;e<t.length;e++)"hidden"==t[e].type&&t[e].removeAttribute("value");if(this.options.subDir)for(var i=this.dom.form.firstChild;i;){if("subDir"==i.id){i.value=this.options.subDir;break}i=i.nextSibling}if(this.options.subSize)for(var o=this.dom.form.firstChild;o;){if("subSize"==o.id)return void(o.value=this.options.subSize);o=i.nextSibling}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setSubDir=function(t){try{if(this.options.subDir)for(var e=this.dom.form.firstChild;e;){if("subDir"==e.id)return void(e.value=t);e=e.nextSibling}else this.addParam("subDir",t);this.options.subDir=t}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getSubDir=function(){try{for(var t="",e=this.dom.form.firstChild;e;){if("subDir"==e.id){t=e.value;break}
e=e.nextSibling}return t}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.submit=function(){try{if(WebSquare.domain){var t=this.dom.form.action;t.indexOf("?")>-1?t+="&":t+="?",t+="domain="+WebSquare.text.URLEncoder(WebSquare.domain),this.dom.form.action=t}if(WebSquare.hybridApp||1==this.options.useXHR&&"undefined"!=typeof FormData){var e=document.getElementById(this.dom.input.id);null==e.files&&(e=this.dom.fakeinput);var i=e.files[0],o=new FormData;o.append("upload",i);for(var a=this.dom.form.getElementsByTagName("input"),l=0;l<a.length;l++)"hidden"==a[l].type&&o.append(a[l].id,a[l].value);var h=new XMLHttpRequest,d=this.uuid;h.onreadystatechange=function(){if(4==h.readyState&&200==h.status){var t=WebSquare.idCache[d],e=h.responseText;t.callback(e.substring(e.indexOf("<ret>"),e.indexOf("</ret>")+6))}},h.open("POST",this.dom.form.action,!0);var c=encodeURIComponent(i.name);h.setRequestHeader("X-File-Name",c);var u=s.I.getConfiguration("/WebSquare/handler/requestHeaderFunction/@value");if(""!=u){var p=n.Z.getGlobalFunction(u);p&&p(h,"upload")}h.send(o)}else{var g=this.options.msaName||this._getMsaName();g&&(this.addParam("msaName",g),this.event.addListener(window,"message",this.event.bindAsEventListener(this,this.receiveMessage),!1)),this.dom.form.submit()}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.receiveMessage=function(t){try{if(t.currentTarget.WebSquare){this.callback(t.data);for(var e=0;e<this.event.cache.length;e++)if("message"===this.event.cache[e][1]){this.event.removeListener.apply(this.event,this.event.cache[e]),this.event.cache.splice(e,1);break}}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getFileInputObject=function(){try{return this.dom.input}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setFAction=function(t){try{this.changeFormAction(t)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.changeFormAction=function(t){try{t&&(this.options.action=t,this.action=s.I.getServletURL(this,this.options.msaName,this._defaultAction,this.options.action),this.dom.form.action=this.action)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.changeMsaName=function(t){try{t&&(this.options.msaName=t,this.action=s.I.getServletURL(this,this.options.msaName,this._defaultAction,this.options.action),this.dom.form.action=this.action)}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.addParam=function(t,e){try{for(var i=!1,o=this.dom.form.firstChild;o;){if(o.id==t){i=!0;break}o=o.nextSibling}if(i)this.dom.form[t].value=e;else{var s=document.createElement("input");s.type="hidden",s.value=e,s.id=t,s.name=t,this.dom.form.appendChild(s)}}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getDefaultStyle=function(){try{return" border:0px solid blue "}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.callback=function(t){try{this.callbackFunction?this.callbackFunction.apply(this,new Array(WebSquare.xml.parse(t))):a.f.fireEvent(this,"ondone",WebSquare.xml.parse(t))}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getActionUrl=function(t){try{var e="";return e=this.options.action?this.options.action:this.action,t&&!0===t.msa&&(e=this.dom.form.action),e}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.getAccessibiltyId=function(){try{return"image"==this.options.type?this.id+"_fakeinput":this.id+"_inputFile"}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)e?this.addClass(this.render,"w2upload_disabled"):this.removeClass(this.render,"w2upload_disabled")}catch(t){r.Y.printStackTrace(t,null,this)}},h.prototype.setDisabled=function(t){try{var e;t=n.Z.getBoolean(t);var i=this.render.getElementsByTagName("fieldset")[0];e="image"==this.options.type?document.getElementById(this.id+"_fakeinput"):document.getElementById(this.id+"_inputFile"),t?(e.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled")):(e.removeAttribute("disabled"),i.removeAttribute("disabled")),
l.q.prototype.setDisabled.call(this,t)}catch(t){r.Y.printStackTrace(t)}return t},h.prototype.finalize=function(){try{l.q.prototype.finalize.call(this),s.I.setTimer((function(t){if(t){var e=document.getElementById(t);e&&e.parentNode&&(e.parentNode.removeChild(e),e=null)}}),{key:this.id+"_removeTargetFrame",delay:6e4,args:[this._targetFrameId]})}catch(t){r.Y.printStackTrace(t)}}},8736:function(t,e,i){"use strict";i.r(e),i.d(e,{wframe:function(){return g}});var o=i(2284),s=i(467),r=i(4756),a=i.n(r),n=i(5461),l=i(5375),h=i(8971),d=i(2338),c=i(1204),u=i(2256),p=i(2406),g=function(t,e,i){p.q.call(this,t,e,i)};n.q.extend(g.prototype,p.q.prototype),g.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload","onbeforewframeunload","onresize"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",linkVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,popupAutoCloseSkip:!1,msaName:"",scopeInherit:"",resizeEvent:!1,adaptiveFrame:!1},g.prototype.initialize=function(t){this.options.mode="async",this.createFlag=!1,(t&&"w2:wframe"===t.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={};var e=this.options.pluginName;"true"===this.options.initScript&&"true"===l.I.getConfiguration("/WebSquare/"+e+"/initScript/@value")&&(this.options.initScript=l.I.getConfigurationJSON("/WebSquare/"+e+"/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===l.I.getConfiguration("/WebSquare/"+e+"/postScript/@value")&&(this.options.postScript=l.I.getConfigurationJSON("/WebSquare/"+e+"/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=l.I.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=l.I.getConfiguration("/WebSquare/spa/variable/@clone")||""),""==this.options.linkVariable&&(this.options.linkVariable=l.I.getConfiguration("/WebSquare/spa/variable/@link")||""),this.options.initScript&&(this.options.initScript=c.Z.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=c.Z.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1,this._pCount=0,this._onsetSrc=!1,this._onsetSrcAfter=null,this._pageCommonArr=[],this._cssCacheArr=[],this.options.adaptiveFrame&&(this.options.resizeEvent=!0,this._resizeChildComp=[]),this._childFrameArr=[],this._addFrameRelation()},g.prototype.toHTML=function(){try{var t={footer:"div",header:"div",nav:"div",section:"div"},e=[],i=this.options.tagname,o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(l.I.browserCheck.ie){var r=l.I.browserVersion()
;"6"!=r&&"7"!=r&&"8"!=r||t[i]&&(i=t[i])}if(e.push("<"+i+" id='"+this.id+"' "+o+" class='w2"+this.options.pluginName+" "+this.options.className+"' "+s+">"),this.createFlag)for(var a=this.getChildren(),n=0;n<a.length;n++)e.push(a[n].toHTML());return e.push("</"+i+">"),e.join("")}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setChildAction=function(t){try{t=t||{};var e=this.childControlList[0];if(!e)return;this._parseBodyCss(),this._markStart2(),!0!==(t&&!0===t.skipPreActivate)&&"stop"===e.activeStatus&&e.preActivate(),this.makeInheritScopeCommon();var i=[];for(var o in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){var s=WebSquare.DataCollection.comp[o];s&&s.parentFrame===this.uuid&&(s.activate(),i.push(s.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid);var r=e.activate();WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),e.render=null,e.onComplete();for(var a=0;a<i.length;a++)WebSquare.idCache[i[a]].completed||WebSquare.idCache[i[a]].onComplete();var n=this.getSrc(),c=!0===this._scriptLazy&&!0!==l.I.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||c)if(!0===l.I.scriptPrecedence){if(r&&r.length>0){var u=this.uuid;return Promise.allSettled(r).then((function(t){var e=WebSquare.idCache[u];e._setChildActionAfter1(),e._setChildActionAfter2()})).catch((function(t){h.Y.printStackTrace(t)}))}this._setChildActionAfter1()}else{var p=t&&!0===t.preExecuted,g=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&("wframe"===this.parentControl.parentControl.options.pluginName||"pageFrame"===this.parentControl.parentControl.options.pluginName),m={order:"postorder",reverse:!0};if(c&&(m.preExecuted=!0),g||!0===this.options.preload||!0===p)WebSquare.uiplugin.wframe._execute("script",m),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var f=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';f+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(f),this.frameDoc.scriptSection=""}for(a=0;a<this.childControlList.length;a++)d.f.fireEvent(this.childControlList[a],"onpageload",n);this._executeStatus.onpageload=!0}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==l.I.scriptPrecedence){var b=t&&!0===t.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;b&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(a=0;a<this.childControlList.length;a++)d.f.fireEvent(this.childControlList[a],"onpageload",n);b&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}this._setChildActionAfter2()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._setChildActionAfter1=function(t){try{t=t||{},WebSquare.uiplugin.wframe._execute("script"),t._isProcessMsgFrame?WebSquare.uiplugin.wframe._execute("onpageload",t):WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload"),WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._setChildActionAfter2=function(){try{var t=this.getSrc(),e=this.childControlList[0];d.f.fireEvent(e,"onwframeload",t),d.f.fireEvent(e,"oncreated",e.options),d.f.fireEvent(this,"onload",t),!0!==l.I.scriptPrecedence&&d.f.fireEvent(this,"onwframeload",t),this._markEnd2()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setAction=function(){try{
if(this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.isWidget)return;if(this.createFlag){var i;if(this._isProcessMsgFrame&&(i={_isProcessMsgFrame:!0,_processMsgCompId:this.uuid}),("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){if("sync"!==this.options.mode){var o=this.uuid;return WebSquare.externalScriptArr.push((function(){try{var t,e=WebSquare.idCache[o];e._isProcessMsgFrame&&(t={_isProcessMsgFrame:!0,_processMsgCompId:e.uuid}),e.setChildAction(t)}catch(t){h.Y.printStackTrace(t)}})),c.Z.js.apply(null,WebSquare.externalScriptArr),void(WebSquare.externalScriptArr=[])}for(var s=0;s<WebSquare.externalScriptArr.length;s++)WebSquare.BootLoader.globalEval(l.I.load(WebSquare.externalScriptArr[s]));WebSquare.externalScriptArr=[]}this.setChildAction(i)}else{var r;this._dataObject&&(r={dataObject:this._dataObject}),this.setSrc(this.options.src,r)}this.options.resizeEvent&&p.q.addCheckResize(this.uuid,"checkResize")}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setSrc=function(){var t=(0,s.A)(a().mark((function t(e,i){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=i||{},o=this.getSrc(),e&&""!=e){t.next=5;break}return t.abrupt("return",!1);case 5:if(this.options.src=e,e=this.getSrc(),this._bSkipAsync=!0,"active"===this.activeStatus||this.createFlag){t.next=10;break}return t.abrupt("return",!1);case 10:if(this._markStart(),!0!==this._onsetSrc){t.next=16;break}return this._onsetSrcAfter=[e,i],t.next=15,this._onsetSrcPromise;case 15:case 20:return t.abrupt("return",t.sent);case 16:return this._onsetSrc=!0,this._onsetSrcPromise=this._setSrcAfter(e,o,i),t.next=20,this._onsetSrcPromise;case 23:return t.prev=23,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,this._onsetSrcPromise=Promise.resolve(!1),t.abrupt("return",!1);case 30:case"end":return t.stop()}}),t,this,[[0,23]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype._setSrcAfter=function(){var t=(0,s.A)(a().mark((function t(e,i,s){var r,n,u,p,g,m,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,WebSquare.jsLoader._loadObj(this.getURL(e,s),{msaName:s.msaName||this._getMsaName()});case 3:if(!(r=t.sent)){t.next=28;break}for(n=0;n<this.childControlList.length;n++)d.f.fireEvent(this.childControlList[n],"onwframeunload",i);return c.Z.emptySelection(),s.removeAll&&(s.appendModel="replace"),"replace"==s.appendModel?this.removeFrame_old():((""==i||!i||i===e&&!0===s.reload)&&(s.reload=!1,u={keepDataObject:!0}),this.finalize(i,u)),"object"===(0,o.A)(s.dataObject)&&this.setDataObject(s.dataObject),this.makeScopeVariable(),this._addFrameRelation(),p=WebSquare.jsLoader.getPageType(e),this.frameDoc=WebSquare.jsLoader.getPageInfo(r,p),this.frameDoc.renderStartTime=new Date,this.makeParameter(),t.next=18,this.frameDoc.parsingUDC(!0,this);case 18:return t.next=20,this.frameDoc.parsingWFrame(!0,this);case 20:return null==s.appendModel&&(this.options.scope?s.appendModel="scope":s.appendModel=!0),this.appendModels(this.frameDoc.models,null,s),g=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0}),t.next=25,this.renderBody(!0);case 25:"executed"===WebSquare.scriptSectionExcuteFlag||!0!==l.I.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(g.pendingWframePreOrderList=g.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),g.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(g.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(g);case 28:if(this._onsetSrc=!1,!this._onsetSrcAfter){t.next=38;break}return m=this._onsetSrcAfter[0],f=this._onsetSrcAfter[1],this._onsetSrcAfter=null,
t.next=35,this.setSrc(m,f);case 35:return t.abrupt("return",t.sent);case 38:return t.abrupt("return",!!r);case 39:t.next=48;break;case 41:return t.prev=41,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,this._onsetSrcPromise=Promise.resolve(!1),t.abrupt("return",!1);case 48:case"end":return t.stop()}}),t,this,[[0,41]])})));return function(e,i,o){return t.apply(this,arguments)}}(),g.prototype.msaLoad=function(t,e,i,o){try{i=i||{},this._oldMsaName=this._getMsaName();var s=e||this._oldMsaName;i.msaName=s,this.options.msaName=i.msaName;var r=this.setSrc(t,i),a=this.uuid;return r.then((function(t,e){return WebSquare.idCache[a]._oldMsaName=s,t})),r}catch(t){return h.Y.printStackTrace(t,null,this),!1}},g.prototype.makeFrame=function(){var t=(0,s.A)(a().mark((function t(e,i){var o,s,r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,!this.options.strictFrame){t.next=4;break}return t.abrupt("return");case 4:if(this._markStart(),!(s="string"==typeof i&&null!=l.I.udcObj[i])){t.next=10;break}o=l.I.udcObj[i],t.next=15;break;case 10:if(!(r=this.getSrc())){t.next=15;break}return t.next=14,WebSquare.jsLoader._loadObj(this.getURL(r),{msaName:this._getMsaName()});case 14:o=t.sent;case 15:if(!o){t.next=27;break}return r&&(n=WebSquare.jsLoader.getPageType(r)),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,n),this.frameDoc.renderStartTime=new Date,this.makeParameter(),t.next=22,this.frameDoc.parsingUDC(!0,this);case 22:return t.next=24,this.frameDoc.parsingWFrame(!0,this,void 0,s);case 24:return this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),t.next=27,this.renderBody(e);case 27:t.next=32;break;case 29:t.prev=29,t.t0=t.catch(1),h.Y.printStackTrace(t.t0,null,this);case 32:case"end":return t.stop()}}),t,this,[[1,29]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.initAsync=(0,s.A)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this._bSkipAsync){t.next=4;break}return t.next=3,this.makeFrame();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),g.prototype.makeFrameUDC2=function(){var t=(0,s.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.udc2Parent=e,t.next=5,this.makeFrame(null,this.options.udc2Name);case 5:this._udc2Mapping(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),h.Y.printStackTrace(t.t0,null,this);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype.makeFrameSync=function(t,e,i){try{if(this.options.strictFrame)return;var o;this._markStart();var s,r="string"==typeof e&&null!=l.I.udcObj[e];if(r)o=l.I.udcObj[e];else if(e&&e.constructor===WebSquare.pageInfo)o=e.getPageInfo();else{var a=this.getSrc();a&&(o=WebSquare.jsLoader._loadObj(this.getURL(a),{msaName:this._getMsaName()}))}if(o)a&&(s=WebSquare.jsLoader.getPageType(a)),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,s),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingUDC(!0,this),r?this.frameDoc.parsingUDC2Sync(!0,this):this.frameDoc.parsingWFrame(!0,this,!0),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(t,i)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeFrameUDC2Sync=function(t,e,i){try{this.udc2Parent=t,this.makeFrameSync(e,this.options.udc2Name,i),this._udc2Mapping()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getMsaSrc=function(t){try{t=t||{};var e=this.options.src;if(""==e)return"";var i=l.I.getPageURL(e,{skipURL:!0,skipUri:!0,msaName:t.msaName||this._getMsaName()});if(!0===t.msaSrc)"string"!=typeof i||i.startsWith("/")||i.startsWith("\\")||i.indexOf("://")>=0||(i=this._getMsaHome()+i);return i}catch(t){
h.Y.printStackTrace(t,null,this)}},g.prototype.getMsaSrc=function(t,e){try{return(e=e||{}).msaSrc=!0,t&&(e.msaName=t),this._getMsaSrc(e)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getMsaHome=function(){try{var t=this.options.src,e=n.q.w2xHome;if("string"!=typeof t)return e;var i=l.I._msaServerHash[this.options.msaName];if(i){var o=t.lastIndexOf("/");return o>=0?t.slice(0,o)+"/":i.w2xHome||e}return this.scope_obj?this.scope_obj._getMsaHome():e}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.appendModels=function(t,e,i){try{if("replace"==(i=i||{}).appendModel)return void this.replaceModels(t);if("scope"==i.appendModel)return void this.scopeModels(t,e,i);var o=WebSquare.ModelUtil.getModelByID(e);if(o)for(var s=0;s<t.length;s++){if(i.appendModel)for(var r=o.instances[0].document,a=t[s].instances[0].document.childNodes,n=0;n<a.length;n++)r.appendChild(a[n].cloneNode(!0));o.binds=o.binds.concat(t[s].binds);for(var l=0;l<t[s].submissions.length;l++){var d=t[s].submissions[l];d.parentElement=o.element,o.submissions.push(d)}for(var c=0;c<t[s].workflows.length;c++){var u=t[s].workflows[c];u.parentElement=o.element,o.workflows.push(u)}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.replaceModels=function(t){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.scopeModels=function(t,e,i){try{var o=WebSquare.ModelUtil.getModelByID(e);if(o&&"scope"==i.appendModel)for(var s=0;s<t.length;s++){if(t[s].instances&&t[s].instances.length>0){var r;o.instances&&o.instances.length>0&&(r=o.instances[0].xmlNode.parentNode);for(var a=t[s].instances,n=0,l=a.length;n<l;n++){for(var d=a[n].xmlNode.cloneNode(!0),c=d.firstChild;null!=c&&1!=c.nodeType;c=c.nextSibling);var u=new WebSquare.Model.Instance(d,c,null);u.scope_id=this.id;var p=u.xmlNode;p.setAttribute("scopeId",this.id),o.instances.push(u),r&&r.appendChild(p)}}o.binds=o.binds.concat(t[s].binds);for(var g=0;g<t[s].submissions.length;g++){var m=t[s].submissions[g];m.parentElement=o.element,o.submissions.push(m)}for(var f=0;f<t[s].workflows.length;f++){var b=t[s].workflows[f];b.parentElement=o.element,o.workflows.push(b)}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.remove=function(){try{if(!0===this._removed)return;if(this.options.strictFrame){for(var t in window[this.id]&&(window[this.id]=null),this)delete this[t];return}for(var e in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[e]==this&&WebSquare.getBody().childControlList.splice(e,1);this.destroy(),c.Z.emptySelection()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.finalize=function(t,e){try{var i=new Date;if(!0!==l.I.scriptPrecedence)for(var o=0;o<this.childControlList.length;o++)d.f.fireEvent(this.childControlList[o],"onpageunload");for(o=0;o<this.childControlList.length;o++)d.f.fireEvent(this.childControlList[o],"onbeforepageunload");var s=t||this.getSrc(),r=this.options.pluginName.toLowerCase();if(d.f.fireEvent(this,"onbefore"+r+"unload",s),this.popupList)for(o=this.popupList.length-1;o>=0;o--){var a=this.popupList[o];if(a){if(!0===this.options.popupAutoCloseSkip)continue;var n=WebSquare.getBody();if(this._parentFrameUUID)n=WebSquare.idCache[this._parentFrameUUID];var p=a.id;if(n){if(null!=n.stackComponents)for(var g in n.stackComponents){var m=n.stackComponents[g];if(p)for(var f=n.stackComponents[g].length-1;f>=0;f--)if(m[f].id===p){m.splice(f,1),n.modalStack.pop();break}}n.modalStack.pop()}a.close(),WebSquare.uiplugin.popup.removeFromPopupList(p)}}
this.hideProcessMessage(),null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null),this._removeFrameRelation();for(var b=[];this.childAllControlList.length>0;){var y;if(y=!0===l.I.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),(x=WebSquare.idCache[y])&&(!0!==x._isWframePopup||!0===this.options.popupAutoClose&&!0!==this.options.popupAutoCloseSkip||this.options.frameModal))if(null==WebSquare.DataCollection.comp[x.id]){WebSquare.isPrintLog=!1,"function"==typeof x.finalize&&x.finalize(),WebSquare.isPrintLog=!0,"function"==typeof x.unbind&&x.unbind(),x.event&&x.event.clearCache(),x.modelControl&&(x.modelControl.unbindRef(),x.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(x.id),x.childControlList=[];if(x.options){var v={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[x.options.pluginName]||x.options.pluginName;delete(WebSquare.componentsCache[v]||WebSquare.componentsCache[x._wTagName]||{})[x.uuid],l.I.memoryLeakComponent[v]&&(l.I.memoryLeakComponentCount+=l.I.memoryLeakComponent[v])}if(window[WebSquare.noConflict].comp[x.id]=null,delete window[WebSquare.noConflict].comp[x.id],window[WebSquare.noConflict].data[x.id]=null,delete window[WebSquare.noConflict].data[x.id],window[x.id])try{window[x.id]=null,(!c.Z.isIE()||parseInt(l.I.browserVersion(),10)>8)&&delete window[x.id]}catch(t){window[x.id]=null}if(null!=x.render){if(x._closed&&x.frame&&x._isWframePopup){var w=x.frame.paramObj.popupID;w&&WebSquare.uiplugin.popup.removeFromPopupList(w);var S=x._targetFrameObjUUID,_=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(x.options.frameModal&&S&&S!==_){var C=WebSquare.idCache[S];C&&C.hideFrameModal(w)}}WebSquare.removeNode(x.render)}WebSquare.idToUUID[x.id]=null,delete WebSquare.idToUUID[x.id],l.I._removeObject(x,{directKey:"setValue,setDisabled,setLabel,toHTML,setAction,remove,finalize"}),x._removed=!0,x=null,WebSquare.idCache[y]=null,delete WebSquare.idCache[y]}else b.push(y)}for(o=b.length-1;o>=0;o--){var x;null!=(x=WebSquare.idCache[b[o]])&&WebSquare.DataCollection.api.remove(x.id,{uuid:x.uuid})}this.childAllControlList=[];for(o=0;o<this.childControlList.length;o++){var I=this.childControlList[o];for(!0===l.I.scriptPrecedence&&d.f.fireEvent(I,"onpageunload");I.childControlList&&I.childControlList.length>0;){var T=I.childControlList.pop();null!=T.uuid&&T.remove()}I.render=null,I.remove()}for(var k in this.childControlList=[],this.scopeVariable)null!=window[this.id+"_"+k]&&(window[this.id+"_"+k]=null,!c.Z.isIE()||parseInt(l.I.browserVersion(),10)>8?delete window[this.id+"_"+k]:window[this.id+"_"+k]=null);this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(o=0;o<this.userComponentList.length;o++)c.Z.loadedUserComponent[this.userComponentList[o]]=null,delete c.Z.loadedUserComponent[this.userComponentList[o]];this.userComponentList=[];for(o=0;o<this.userPluginList.length;o++)c.Z.loadedUserComponentPluginName[this.userPluginList[o]]=null,delete c.Z.loadedUserComponentPluginName[this.userPluginList[o]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(e);var L=new Date;u.v.printLog(this.options.pluginName+" unloading["+this.id+"]. Time:"+(L-i)+"ms");var A=null==t?this.getSrc():t;d.f.fireEvent(this,"on"+r+"unload",A),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.removeFrame=function(){try{this.finalize()}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.removeFrame_old=function(){try{
u.v.printLog("Wframe unloading start.["+this.id+"]");for(var t=0;t<this.childControlList.length;t++)d.f.fireEvent(this.childControlList[t],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var e=WebSquare.getBody();for(var i in WebSquare.idCache){var o=WebSquare.idCache[i];o!==e&&o!==this&&("function"!=typeof o.remove||o.remove==p.q.prototype.remove||o.options&&("wframe"==o.options.pluginName||"pageFrame"==o.options.pluginName||"pageInherit"==o.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof o.finalize&&o.finalize(),WebSquare.isPrintLog=!0,"function"==typeof o.unbind&&o.unbind(),o.event&&o.event.clearCache(),WebSquare.useVisibleHelper&&o.render&&o.render.parentNode&&o!=WebSquare.body&&o.render.parentNode.removeChild(o.render),o.childControlList=[],window[o.id]&&(window[o.id]=null)):o.remove())}e.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[e.uuid]=e,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[e.id]=e.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[e.options.pluginName]={},WebSquare.componentsCache[e.options.pluginName][e.uuid]=!0,WebSquare.componentsCache[this.options.pluginName]={},WebSquare.componentsCache[this.options.pluginName][this.uuid]=!0,this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),l.I.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),u.v.printLog("Wframe unloading finished.["+this.id+"]")}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.removeCommon=function(t){try{if(void 0!==t&&null!=t||(t={}),this.wframeScript=[],null!=this.frameDoc){for(;this.frameDoc.cssList.length>0;){var e=this.frameDoc.cssList.shift(),i=e&&e.href&&e.href.toString();i=i||"";var o=c.Z._getAbsolutePath(i);WebSquare.skin._decreaseCache(o,e)}this.frameDoc.cssList=[];for(var s=0;s<this._cssCacheArr.length;s++){var r=this._cssCacheArr[s];WebSquare.skin._decreaseCache(r)}if(this.frameDoc.models&&this.frameDoc.models.length>0){var a=this.frameDoc.models[0].submissions,n=WebSquare.WebSquaredoc.models[0].submissions;for(s=0;s<a.length;s++){for(var d=0;d<WebSquare.layer.submissionIDQueue.length;d++)WebSquare.layer.submissionIDQueue[d]==a[s].id&&(WebSquare.layer.submissionIDQueue.splice(d,1),WebSquare.layer.submissionMessageQueue.splice(d,1));for(var u=0;u<n.length;u++)if(a[s].id===n[u].id&&a[s].ref===n[u].ref){n[u].dead=!0,l.I.useSubmissionGlobal&&(window[n[u].id]=null),n[u].parentElement=null,n.splice(u,1);break}}var p=this.frameDoc.models[0].workflows;for(n=WebSquare.WebSquaredoc.models[0].workflows,s=0;s<p.length;s++)for(u=0;u<n.length;u++)if(p[s].id===n[u].id&&p[s].ref===n[u].ref){n[u].promiseStatus="REJECT",l.I.useWorkflowGlobal&&(window[n[u].id]=null),n[u].parentElement=null,n.splice(u,1);break}}for(var g in this.frameDoc)this.frameDoc[g]=null,delete this.frameDoc[g]}!0!==t.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.onPropertyChange=function(t,e){try{if("disabled"===t)for(var i=0;i<this.childControlList.length;i++){var o={componentId:this.childControlList[i].id,disabled:e};c.Z.setDisabled(o)}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var t=0;t<this.frame_dc_list.length;t++)WebSquare.idCache[this.frame_dc_list[t]].completed||WebSquare.idCache[this.frame_dc_list[t]].onComplete();delete this.frame_dc_list}p.q.prototype.onComplete.call(this)}catch(t){h.Y.printStackTrace(t,null,this)}},
g.prototype.getObj=function(t){try{return this.scope[t]}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.getObjList=function(){try{var t=[];for(var e in this.scope)t.push(e);return t}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeScopeVariable=function(t){try{var e=0;if(this.options.scope&&this.options.scopeVariable)for(var i=this.options.scopeVariable.split(","),o=0;o<i.length;o++){var s=i[o].wq_trim(),r=e>0?String(e):"";e++,this._makeScopeVariable(s,WebSquare.noConflictFunction+r,t)}if(this.options.scope&&this.options.cloneVariable)for(i=this.options.cloneVariable.split(","),o=0;o<i.length;o++){var a=i[o].wq_trim();r=e>0?String(e):"";e++,this._makeCloneVariable(a)}if(this.options.scope&&this.options.linkVariable)for(i=this.options.linkVariable.split(","),o=0;o<i.length;o++){var n=i[o].wq_trim();r=e>0?String(e):"";e++,this._makeLinkVariable(n)}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._makeScopeVariable=function(t,e,i){try{if(this.scopeVariable[t]={},this.scope[t]=this.scopeVariable[t],!0!==i&&(window[this.id+"_"+t]=this.scopeVariable[t]),this.options.scopeFunction){this.scopeVariable[t][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var o=this.scopeVariable[t][this.options.scopeFunction];for(var s in WebSquare.api)"data"!==s&&"comp"!==s&&null==o[s]&&(o[s]=WebSquare.api[s]);for(var r in o.data=new WebSquare.uiplugin.wframe.scope.data(this.id),o.model=new WebSquare.uiplugin.wframe.scope.model(this.id),o.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),o.bigDecimal._scopeId=this.id,o.id=this.id+"_",WebSquare.api.data)null==o.data[r]&&"function"==typeof WebSquare.api.data&&(o.data[r]=WebSquare.api.data[r]);this.options.scopeFunction!==WebSquare.noConflict&&null!=window[t]&&null==window[t][this.options.scopeFunction]&&n.q.extend(window[t][this.options.scopeFunction],WebSquare.api),e&&(this.scope[e]=this.scopeVariable[t][this.options.scopeFunction])}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._makeCloneVariable=function(t){try{this.scopeVariable[t]={},"object"===(0,o.A)(window[t])&&null!=window[t]&&(this._isUDC2,this.scopeVariable[t]=l.I._copyCommon(t,this)),this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t]}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._makeLinkVariable=function(t){try{if("object"!==(0,o.A)(window[t])||null==window[t])return;this.scopeVariable[t]=WebSquare.jsonUtil.cloneNode(window[t],!0,[],[],0,!0),this.scope[t]=this.scopeVariable[t],window[this.id+"_"+t]=this.scopeVariable[t]}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var e=t.split(","),i=0;i<e.length;i++)for(var o=e[i].wq_trim(),s=i>0?String(i):"",r=WebSquare.noConflictFunction+s,a=0;a<this.scopeLazyList.length;a++)WebSquare.idCache[this.scopeLazyList[a]].scope[o]=this.scopeVariable[o],WebSquare.idCache[this.scopeLazyList[a]].scope[r]=this.scopeVariable[o][this.options.scopeFunction]}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeInheritScopeVariable=function(){try{for(var t=this.scope_obj;t instanceof g&&t!==t.scope_obj;t=t.scope_obj)if(t.options.scope&&t.options.scopeVariable){var e=t.options.scopeInherit;if("component"===e||"all"===e||"recursive"===e){var i=t;for(var o in i.scope)this.scope.hasOwnProperty(o)||(this.scope[o]=i.scope[o]);if("recursive"!==e&&"all"!==e)break}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeInheritScopeCommon=function(){try{for(var t=this.scope_obj;t instanceof g&&t!==t.scope_obj;t=t.scope_obj)if(t.options.scope&&t.options.scopeVariable){var e=t.options.scopeInherit;"recursive"!==e&&"all"!==e||this._makeInheritScopeCommon(t)}}catch(t){
h.Y.printStackTrace(t,null,this)}},g.prototype.refreshInheritScopeCommon=function(){try{for(var t=this.getAllChildFrame({inherit:!0}),e=0;e<t.length;e++)t[e]._makeInheritScopeCommon(this)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.getAllChildFrame=function(t){try{void 0!==t&&null!=t||(t={});for(var e=[],i=this._childFrameArr.slice(0),o=!0===t.inherit;i.length>0;){var s=i.pop(),r=WebSquare.idCache[s];e.push(r);var a=r.options&&r.options.scopeInherit;if(!o||"all"===a||"recursive"===a)for(var n=0;n<r._childFrameArr.length;n++)i.push(r._childFrameArr[n])}return e}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._makeInheritScopeCommon=function(t){try{var e=t.options.scopeVariable;t.options.cloneVariable&&(e+=","+t.options.cloneVariable);for(var i=e.split(","),o=0;o<i.length;o++){var s=i[o].wq_trim();this.scope.hasOwnProperty(s)?l.I._linkProperties(t.scope[s],this.scope[s]):this.scope[s]=t.scope[s]}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getInheritFrame=function(t){try{for(var e,i=this.scope_obj;i instanceof g&&i!==i.scope_obj;i=i.scope_obj)if("all"===i.options.scopeInherit||i.options.scopeInherit===t){e=i;break}return e}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._addScopeVariable=function(t){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var i=e.split(","),o=0;o<i.length;o++){var s=i[o].wq_trim(),r=o>0?String(o):"",a=WebSquare.noConflictFunction+r;WebSquare.idCache[t].scope[s]=this.scopeVariable[s],WebSquare.idCache[t].scope[a]=this.scopeVariable[s][this.options.scopeFunction]}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._udc2Mapping=function(){try{var t=this.udc2Parent;if(!t)return;var e={};for(var i in t._reservedName)for(var o=0;o<t._reservedName[i].length;o++)e[t._reservedName[i][o]]=!0;var s=this.options.cloneVariable.split(","),r={};for(o=0;o<s.length;o++)r[s[o]]=!0;var a,n=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",l.I._XML_NAMESPACE.W2)[0];if(n){var d=WebSquare.Parser.parseAttribute(n);for(var i in a={method:{},submission:{},component:{}},d){var c=d[i].split(",");for(o=0;o<c.length;o++)a[i][c[o].wq_trim()]=!0}}for(var i in this.scopeVariable)if(!0!==r[i]){var u=this.scopeVariable[i];for(var p in u)p!==this.options.scopeFunction&&!0!==e[p]&&(a&&!0!==a.method[i+"."+p]||(t[p]=u[p]))}for(var i in this.scope){var g=this.scope[i];null!=g&&(a?(!0===a.component[i]&&g.uuid&&WebSquare.idCache[g.uuid]===g&&g.id!==g.uuid&&g.org_id!==g.uuid||!0===a.submission[i]&&"submission"===g._pluginName)&&(t[i]=g):t[i]=g)}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setMode=function(t){try{this.options.mode=t}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.start=function(t){},g.prototype.renderBody=function(){var t=(0,s.A)(a().mark((function t(e,i){var o,s,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],s=this.frameDoc.getType(),o="json"===s?WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"):WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",l.I._XML_NAMESPACE.XHTML),WebSquare.cssManager.startCache(),r="json"===s?WebSquare.controlFactory.createByJSON(null,null,o[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,o[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),!0===i){t.next=10;break}return t.next=10,WebSquare.controlFactory.initAsync();case 10:if(this.childControlList.push(r),this.render&&(r.domStatus="new"),r&&(r.parentControl=this,r.options&&r.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=r.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable(),this.makeInheritScopeVariable()),!(this._pageCommonArr.length>0)){t.next=21;break}if(!0!==i){t.next=19;break}this._parsePageCommons(),t.next=21;break;case 19:return t.next=21,
this._parsePageCommons();case 21:return r&&e?this._lazyActivation():!0===WebSquare._async&&(l.I.executePointScript(4),this._markEnd()),t.abrupt("return",!!r);case 23:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.lazyActivation=function(){try{if(!this.render)return;var t=this.childControlList[0];this.render.innerHTML=t.toHTML(),"sync"===this.options.mode?(this._markEnd(),this.setChildAction({preExecuted:!0})):(t.preActivate(),this._markEnd(),c.Z.setTimeout(this.setChildAction,{key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._lazyActivation=function(){try{if(l.I.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var t=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[t].lazyActivation()}catch(t){h.Y.printStackTrace(t)}})),c.Z.js.apply(null,WebSquare.externalScriptArr)}else{for(var e=0;e<WebSquare.externalScriptArr.length;e++)WebSquare.BootLoader.globalEval(l.I.load(WebSquare.externalScriptArr[e]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return;for(var t in this.paramObj=JSON.parse(this.options.params),this.paramObj){var e=this.paramObj[t].charAt(0),i=this.paramObj[t].slice(1);switch(e){case"j":case"a":this.paramObj[t]=JSON.parse(i);break;case"x":this.paramObj[t]=WebSquare.xml.parse(i);break;default:this.paramObj[t]=i}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.makeParameter=function(){try{if("object"!==(0,o.A)(this.paramObj)&&(this.paramObj={}),this.options.isWidget){var t=this.parentControl.getParams();"object"===(0,o.A)(t)&&(this.paramObj.params=t)}var e=this.getSrc();if(!e)return;for(var i=e.substring(e.indexOf("?")+1).split("&"),s=0;s<i.length;s++){2==(r=i[s].split("=")).length&&(this.paramObj[r[0].wq_trim()]=r[1].wq_trim())}if(location.hash.length>0)for(i=e.substring(e.indexOf("#")+1).split(/[\&\?\#]/),s=0;s<i.length;s++){var r;2==(r=i[s].split("=")).length&&(this.paramObj[r[0].wq_trim()]=r[1].wq_trim())}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setDataObject=function(t){try{if("string"==typeof t&&(t=JSON.parse(t)),null==t||"string"!=typeof t.name||0===t.name.length)return;var e=t.type||"string";e=e.toLowerCase();var i,o=t.data,s=t.name;switch(e){case"string":i=o;break;case"json":i="string"==typeof o?JSON.parse(o):c.Z.cloneObject(o,{scope:this.scope_id,skipFunction:!0});break;case"xml":i="string"==typeof o?WebSquare.xml.parse(o):WebSquare.xml.parse(WebSquare.xml.serialize(o));break;case"array":i="string"==typeof o?JSON.parse(o):o.slice(0)}this._dataObject={type:e,name:s,data:i}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getDataObject=function(t){try{var e;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(e=null==t?this._dataObject:this._dataObject[t]),e}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.setFirstTabID=function(t){try{if(null!=t&&t!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var e=WebSquare.tabOrder[this.id].preTabID,i=WebSquare.tabOrder[e].nextTabID,o=c.Z.getComponentById(t,this.id).id,s=WebSquare.tabOrder[e].nextTabID;WebSquare.tabOrder[e].nextTabID=o,WebSquare.tabOrder[o]={},WebSquare.tabOrder[o].preTabID=e,s!==this.id&&delete WebSquare.tabOrder[i],this.options.firstTabID=t}}catch(t){h.Y.printStackTrace(t)}},g.prototype.getParentFrame=function(){try{
return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.reload=function(t){try{var e;if(this.options.strictFrame)c.Z.reinitialize(t);else this._dataObject&&(e={dataObject:this._dataObject,reload:!0}),this.setSrc(this.options.src,e)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getVersion=function(){try{var t=this.options.pluginName,e=l.I.getConfiguration("/WebSquare/"+t+"/version/@value");return e||(e=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(e)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.getURL=function(t,e){try{if(void 0!==e&&null!=e||(e={}),"string"!=typeof t||t.indexOf("://")>-1||!0===e.skipFullUrl)return t;if(this.options.msaName&&(e.msaName=this.options.msaName),e.msaName)return l.I.getURL(t,e);var i=this._getMsaName();if(i)return t=this.getMsaSrc(t),e.msaName=i,l.I.getURL(t,e);var o="",s=this.getParentFrame();if(s){var r,a=s.getSrc(),n=a.indexOf("://");if(n>=0)o=(r=t.startsWith("/")||t.startsWith("\\")?a.indexOf("/",n+3):a.lastIndexOf("/"))>0?a.slice(0,r)+"/":a.slice(0)+"/"}return o?o+t:l.I.getURL(t,{tempHome:this.getUdcRoot()})}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.showProcessMessage=function(){var t=(0,s.A)(a().mark((function t(e,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",g._showProcessMessage(this,e,i));case 4:t.prev=4,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this),this.hideProcessMessage();case 8:case"end":return t.stop()}}),t,this,[[0,4]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.hideProcessMessage=function(){try{return g._hideProcessMessage(this)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._handleProcessEvent=function(t){try{d.f.stopEvent(t)}catch(t){h.Y.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.addSubmissionMessage=function(){var t=(0,s.A)(a().mark((function t(e,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.showProcessMessage(i,{submissionId:e});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this),this.hideProcessMessage();case 9:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype.deleteSubmissionMessage=function(t){try{return this._deleteSubmissionMessage(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._deleteSubmissionMessage=function(t){try{for(var e=this._processMsgQueue.length-1;e>=0;e--)if(this._processMsgQueue[e].id==t){if(null!=this._processMsgComp&&"promise"!=this._processMsgComp&&e>0){var i=this._processMsgComp.getObj("text_msg");i&&i.setValue(this._processMsgQueue[e-1].msg)}this._processMsgQueue.splice(e,1)}if(t){var o=WebSquare.ModelUtil.getSubmission(t);0===this._processMsgQueue.length&&o&&!1!==o.hideProcessMsg?this.hideProcessMessage():this._processMessageShowCnt>0&&this._processMessageShowCnt--}}catch(t){h.Y.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(t){h.Y.printStackTrace(t,null,this),this.hideProcessMessage()}},g.prototype.showFrameModal=function(t){try{var e=t.className||"",i=(t.popupComponents,t.stackComponents||void 0),o=t.popupModal||!1;null==this.modalStack&&(this.modalStack=[]);var s=WebSquare.style.getStyle(this.render,"position");if(null==this._wframePopupModal){
var r=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);r.writeTo(this),r.activate(),r.render.style.width="100%",r.render.style.height="100%",this.addControl(r),this._wframePopupModal=r}else"static"!=s&&(this._wframePopupModal.render.style.height=this.render.offsetlHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px");if("static"==(s=WebSquare.style.getStyle(this.render,"position"))){var a=this.render.offsetLeft,n=this.render.offsetTop;this._wframePopupModal.render.style.height=this.render.offsetHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px",this._wframePopupModal.setPosition(a,n)}if(e?(this.modalStack[this.modalStack.length]=e,!0===o&&(this._wframePopupModal.className=e)):(this.modalStack[this.modalStack.length]="w2modal",!0===o&&(this._wframePopupModal.className="w2modal")),i)for(var l in null==this.stackComponents&&(this.stackComponents={}),i)if(null==this.stackComponents[l])this.stackComponents[l]=[i[l]];else{var d=this.stackComponents[l].length-1;if(d>=0)for(var u=d;u>=0;u--){var p=WebSquare.idCache[this.stackComponents[l][u].id];if(!p&&this.stackComponents[l][u].id){var g=c.Z.getPopup(this.stackComponents[l][u].id);g&&(p=g.popupWin)}if(p&&p.render&&!0===o){var m=parseInt(p.getStyleProperty("z-index"),10),f=parseInt(c.Z.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(m==f)break;p.zIndex=m,p.setStyle("z-index",f)}}this.stackComponents[l].push(i[l])}!0===o&&(this._renderScrollLeft=this.render.scrollLeft,this._renderScrollTop=this.render.scrollTop,this._wframePopupModal.show(),c.Z.isMobile()||this.addClass("w2modalopened_wframepopup"))}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.hideFrameModal=function(t){try{if(null!=this._wframePopupModal){var e=!1,i=!1;if(null!=this.stackComponents)for(var o in this.stackComponents){var s=this.stackComponents[o];if(t){for(var r=this.stackComponents[o].length-1;r>=0;r--)if(s[r].id===t){s.splice(r,1),i=!0;break}}else s.pop(),i=!0;for(r=s.length-1;r>=0;r--){0!=r||0!==s.length&&!1!==s[r].modal||(e=!0);var a=WebSquare.idCache[s[r].id];if(a||(a=c.Z.getComponentById(s[r].id)),a&&a.render){var n=a.zIndex;isNaN(n)&&(n=""),a.zIndex=void 0;var l=WebSquare.getBody();l.modal&&"block"===l.modal.style.display?(a.zIndex=c.Z.getStyleProperty(l.modal,"z-index")-2,a.setStyle("z-index",a.zIndex)):a.setStyle("z-index",n)}if("popup"!=o||!0===s[r].modal)break}}if(i&&this.modalStack.pop(),0==this.modalStack.length||!0===e){var d=this._modal;this._modal=!1,0==this.modalStack.length&&null!=this._wframePopupModal?(this._wframePopupModal.remove(),this._wframePopupModal=null):!0===e&&this._wframePopupModal.hide(),d&&(this.render.scrollLeft=this._renderScrollLeft,this.render.scrollTop=this._renderScrollTop,this._renderScrollLeft=this._renderScrollTop=0,this.removeClass("w2modalopened_wframepopup"))}else{var u=this.modalStack[this.modalStack.length-1];this._wframePopupModal.className=u}}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.modalEvent=function(t){try{this._wframePopupModal&&t&&(d.f.addListener(this._wframePopupModal.render,"onclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})),d.f.addListener(this._wframePopupModal.render,"ondblclick",(function(){var e=WebSquare.uiplugin.popup.getPopupWindow(t);e&&e.focus()})))}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._cloneRecursive=function(t){try{if(!t)return;var e=this._clone(t);return e.initAsync=(0,s.A)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),e.makeFrameSync(!0,this.frameDoc,!0),e}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._getPerfStr=function(t){try{return t+"."+this.id}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._makeDetail=function(t){try{return{src:this.getURL(this.getSrc()||WebSquare.w2xPath),id:this.id,
orgId:this.getOriginalID(),scopeId:this.scope_id,log:t||""}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._markStart=function(){try{this._pCount++;var t={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.start"),t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._markEnd=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.step1"));var t=WebSquare.language.getMessage("Performance_wframe_step1");WebSquare._performance.measure(this._getPerfStr("wframe.step1"),this._getPerfStr("wframe.start"),this._makeDetail(t))}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._markStart2=function(){try{var t={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.step2"),t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._markEnd2=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.end"));var t=WebSquare.language.getMessage("Performance_wframe_step2");WebSquare._performance.measure(this._getPerfStr("wframe.end"),this._getPerfStr("wframe.step2"),this._makeDetail(t))}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._addPageCommon=function(t,e){try{this._pageCommonArr.push({src:t,id:e})}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._parsePageCommons=(0,s.A)(a().mark((function t(){var e,i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(t.prev=0,e=[];this._pageCommonArr.length>0;)i=this._pageCommonArr.shift(),o=this._parsePageCommon(i),e.push(o);return t.abrupt("return",this._parsePageCommonsAfter(e));case 6:t.prev=6,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),g.prototype._parsePageCommonsAfter=function(){var t=(0,s.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.allSettled(e).then(function(){var t=(0,s.A)(a().mark((function t(e){var i,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.length)){t.next=15;break}if("fulfilled"===e[i].status){t.next=4;break}return t.abrupt("continue",12);case 4:return t.next=6,e[i].value;case 6:if(!(o=t.sent)||"function"!=typeof o.func){t.next=12;break}if(!0!==o.onpageloadNow){t.next=11;break}return t.next=11,o.func();case 11:o.arr instanceof Array&&o.arr.push(o.func);case 12:i++,t.next=1;break;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){h.Y.printStackTrace(t)}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),g.prototype._parsePageCommon=function(){var t=(0,s.A)(a().mark((function t(e,i){var o,s,r,d,c,u,p,g,m,f,b,y,v,w,S,_,C,x,I;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,void 0!==i&&null!=i||(i={}),o=e.src,s=e.id,t.next=6,WebSquare.jsLoader._loadObj(this.getURL(o),{msaName:this._getMsaName()});case 6:for(r=t.sent,d=WebSquare.jsonUtil.getNodesByTagName(r,"script"),c=n.q.extend({},this.scope),u=this.options.scopeVariable.split(",")[0]||"scwin",p={},null!=this.scope[s]&&(p=this.scope[s]),c[u]=p,g=0;g<d.length;g++)m=d[g],"function"==typeof(f=WebSquare.jsonUtil.getCDataNodeValue(m))&&f(c);if((b=WebSquare.Elem.api.getElementsByTagName(r,"publicInfo",l.I._XML_NAMESPACE.W2)[0])&&"string"==typeof(y=b.getAttribute("method"))&&y){for(v=y.split(","),w={},g=0;g<v.length;g++)S=v[g].wq_trim("").replace(u+".",""),w[S]=p[S];p=w}if(this.scope[s]=p,(C=WebSquare.Elem.api.getElementsByTagName(r,"body",l.I._XML_NAMESPACE.XHTML)[0])&&(x=C.getAttribute("ev:onpageload")||"",I=x.replace(u+".",""),_=c[u][I]),"function"!=typeof _){t.next=26;break}if(!0!==i.onpageloadNow){t.next=24;break}return t.abrupt("return",{onpageloadNow:i.onpageloadNow,func:c[u][I]});case 24:return this._executeStatus.onloadPageCommon||(this._executeStatus.onloadPageCommon=[]),
t.abrupt("return",{arr:this._executeStatus.onloadPageCommon,func:c[u][I]});case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,this);case 31:case"end":return t.stop()}}),t,this,[[0,28]])})));return function(e,i){return t.apply(this,arguments)}}(),g.prototype._addCssCache=function(t){try{this._cssCacheArr.push(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._parseBodyCss=function(){try{var t=this._getMsaName()||"";t&&(t+=" ");var e,i=[];if("json"===this.frameDoc.getType())i=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),(e=WebSquare.jsonUtil.getAttribute(i[0],"class"))&&(t+=e);else(e=(i=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",l.I._XML_NAMESPACE.XHTML))[0].getAttribute("class"))&&(t+=e);this.render&&t&&this.addClass(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype.checkResize=function(){try{if(!(this.render instanceof HTMLElement))return;var t=this.render.clientWidth,e=this.render.clientHeight;if(this.resizeObj&&t>0&&e>0&&(t!==this.resizeObj.width||e!==this.resizeObj.height)){var i={oldWidth:this.resizeObj.width,oldHeight:this.resizeObj.height,newWidth:t,newHeight:e};if(d.f.fireEvent(this,"onresize",i),1==this.options.adaptiveFrame&&this._resizeChildComp)for(var o=0;o<this._resizeChildComp.length;o++){var s=this._resizeChildComp[o];WebSquare.idCache[s].setAdaptiveFrame(i)}for(var r=0;r<this.childControlList.length;r++)d.f.fireEvent(this.childControlList[r],"onresize",i)}this.resizeObj={width:t,height:e}}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._addFrameRelation=function(){try{this._childFrameArr=[],this.scope_obj&&this.scope_obj instanceof g&&this!==this.scope_obj&&this.scope_obj._childFrameArr.push(this.uuid)}catch(t){h.Y.printStackTrace(t,null,this)}},g.prototype._removeFrameRelation=function(){try{if(this.scope_obj&&this.scope_obj instanceof g&&this!==this.scope_obj)for(var t=this.scope_obj._childFrameArr,e=t.length-1;e>=0;e--)t[e]===this.uuid&&t.splice(e,1)}catch(t){h.Y.printStackTrace(t,null,this)}},g._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(t){h.Y.printStackTrace(t,null,this)}},g._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(t){h.Y.printStackTrace(t,null,this)}},g._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},g._addWframePreorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g._addWframePostorder=function(t){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(t)}catch(t){h.Y.printStackTrace(t,null,this)}},g._execute=function(t,e){try{if(void 0!==e&&null!=e||(e={}),WebSquare.uiplugin.wframe._isPending())return;var i="postorder"===e.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(i.length<=0)return;switch(!0===e.reverse&&i.reverse(),t){case"script":for(var o="",s=0;s<i.length;s++){!0!==(u=WebSquare.idCache[i[s]])._executeStatus.script&&(u._executeStatus.script=!0,u.frameDoc&&"string"==typeof u.frameDoc.scriptSection&&u.frameDoc.scriptSection&&(o+=WebSquare.scriptIdentifier+u.getURL(u.getSrc())+'";',o+=u.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===e.preExecuted?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=o;break;case"onpageload":for(s=0;s<i.length;s++){if(!0!==(u=WebSquare.idCache[i[s]])._executeStatus.onpageload&&(!e._isProcessMsgFrame||u.uuid===e._processMsgCompId)){u._executeStatus.onpageload=!0;var r=u._executeStatus.onloadPageCommon;if(r instanceof Array)for(;r.length>0;){var a=r.shift();"function"==typeof a&&a()}
for(var n=0;n<u.childControlList.length;n++)d.f.fireEvent(u.childControlList[n],"onpageload",u.getSrc())}}break;case"postscript":for(o="",s=0;s<i.length;s++){!0!==(u=WebSquare.idCache[i[s]])._executeStatus.postscript&&(u._executeStatus.postscript=!0,u.frameDoc&&"string"==typeof u.options.postScript&&u.options.postScript&&(o+=WebSquare.scriptIdentifier+u.getURL(u.getSrc())+'";',o+=u.options.postScript))}WebSquare.BootLoader.globalEval(o);break;case"lazyscript":var l=[];for(s=0;s<i.length;s++){!0!==(u=WebSquare.idCache[i[s]])._executeStatus.lazyscript&&(u._executeStatus.lazyscript=!0,u.frameDoc&&u.lazyImportsArr&&u.lazyImportsArr.length>0&&(l=l.concat(u.lazyImportsArr),u.lazyImportsArr=[]))}l.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&c.Z.js.apply(null,l);break;case"onwframeload":for(s=0;s<i.length;s++){var u;if(!0!==(u=WebSquare.idCache[i[s]])._executeStatus.onwframeload){u._executeStatus.onwframeload=!0;var p=u.options.pluginName.toLowerCase();d.f.fireEvent(u,"on"+p+"load",u.getSrc())}}}}catch(t){h.Y.printStackTrace(t,null,this)}},g._clearPending=function(t){try{void 0!==t&&null!=t||(t={});for(var e={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var i;(i=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==t.keepStatus&&i._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,e}catch(t){h.Y.printStackTrace(t,null,this)}},g._setPending=function(t){try{WebSquare.uiplugin.wframe.__pendingWframeCount=t.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=t.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=t.pendingWframePostOrderList.slice(0)}catch(t){h.Y.printStackTrace(t,null,this)}},g._showProcessMessage=function(){var t=(0,s.A)(a().mark((function t(e,i,o){var s,r,d,u,p,m,f,b,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"$blank"!=i&&i&&e){t.next=3;break}return t.abrupt("return");case 3:if((s=l.I.getConfiguration("processMsgFrameURL"))||(s=n.q._resourceURI+"message/processMsg.js"),d={},o&&o.submissionId&&("string"==typeof o.submissionId?(r=o.submissionId,d=WebSquare.ModelUtil.getSubmission(r)):(d=o.submissionId,r=d.id),!1!==d.hideProcessMsg&&e._processMsgQueue.push({scope_id:d.scope_id,org_id:d.org_id,id:r,msg:i})),o&&!0===o.ajax&&e._processMsgAjaxCnt++,null!=e._processMsgComp){t.next=29;break}return e._processMessageShowCnt=1,u=e,e.scope_obj&&(!e.options||"wframe"!==e.options.pluginName&&"pageFrame"!==e.options.pluginName)&&(u=e.scope_obj),u&&(p=u.uuid),m=WebSquare.controlFactory.create(e.id+"_wq_processMsgComp",{src:s,className:"w2_proc",scope:!0,pluginName:"wframe",preload:!0},null,u,p,!0),e._processMsgComp="promise",t.next=17,WebSquare.controlFactory.initAsync();case 17:if(e._processMsgComp=m,m.writeTo(e),m._isProcessMsgFrame=!0,m.activate(),e.addControl(m),e._processMessageShowCnt>0){t.next=27;break}return g._hideProcessMessage(e),e._processMessageShowCnt=0,t.abrupt("return");case 27:t.next=32;break;case 29:if("promise"!==e._processMsgComp){t.next=32;break}return isNaN(e._processMessageShowCnt)?e._processMessageShowCnt=1:e._processMessageShowCnt++,t.abrupt("return");case 32:if(e._processMsgComp.show(),(f=e._processMsgComp.getObj("btn_hide"))&&(d.hideTrigger?f.show():f.hide()),(b=e._processMsgComp.getObj("btn_cancel"))&&(d.abortTrigger?b.show():b.hide()),(y=e._processMsgComp.getObj("text_msg"))&&y.setValue(i),v=WebSquare.style.getStyle(e.render,"position"),w=0,S=0,_="",
"static"!=v){t.next=54;break}_="static",C=e.render.parentElement;case 46:if(!C||"BODY"==C.tagName){t.next=54;break}if("relative"!=(x=WebSquare.style.getStyle(C,"position"))&&"absolute"!=x){t.next=51;break}return _=x,t.abrupt("break",54);case 51:C=C.parentElement,t.next=46;break;case 54:I=e.render.offsetLeft,T=e.render.offsetTop,k=e.render.offsetHeight,L=e.render.offsetWidth,A=e.render.scrollLeft,D=e.render.scrollTop,"relative"==v?(w=A,S=D):"static"==v&&"absolute"!=_&&(w=I,S=T),W=w+(e.getSize("outerWidth")-e._processMsgComp.getSize("outerWidth"))/2,q=S+(e.getSize("outerheight")-e._processMsgComp.getSize("outerheight"))/2,e._processMsgComp.setPosition(W,q),e.bind("onkeydown",e._handleProcessEvent),null==e._processMsgModal&&((M=WebSquare.controlFactory.create(e.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,e,e,!0)).writeTo(e),M.activate(),e.addControl(M),e._processMsgModal=M),e._processMsgModal.render.style.height=k+"px",e._processMsgModal.render.style.width=L+"px",e._processMsgModal.setPosition(w,S),e._processMsgModal.show(),c.Z.isMobile()||e.addClass("w2modalopened_wframe"),t.next=77;break;case 73:t.prev=73,t.t0=t.catch(0),h.Y.printStackTrace(t.t0,null,e),g._hideProcessMessage(e);case 77:case"end":return t.stop()}}),t,null,[[0,73]])})));return function(e,i,o){return t.apply(this,arguments)}}(),g._hideProcessMessage=function(t){try{if(t._processMsgQueue=[],t._processMsgAjaxCnt=0,null!=t._processMsgComp&&"promise"!==t._processMsgComp)t._processMsgComp.hide(),t.unbind("onkeydown",t._handleProcessEvent);else if(t._processMessageShowCnt>0)return void t._processMessageShowCnt--;null!=t._processMsgModal&&t._processMsgModal.hide(),t.removeClass("w2modalopened_wframe")}catch(e){h.Y.printStackTrace(e,null,t)}},g._createEmptyFrame=function(t){try{"function"!=typeof g._emptyConstructor&&(g._emptyConstructor=new Function,WebSquare.extend(g._emptyConstructor.prototype,g.prototype));var e=new g._emptyConstructor,i=["pluginName","pluginType","strictFrame","scope","scopeVariable","scopeFunction","mode"];if(e.id=t,e.uuid=t,e.options={id:t},WebSquare.strictModeFrame&&WebSquare.strictModeFrame.options)for(var o=0;o<i.length;o++){var s=i[o];e.options[s]=WebSquare.strictModeFrame.options[s]}return e.childControlList=[],e.childAllControlList=[],e.lazyImportsArr=[],e.scope={},e.scopeVariable={},e.executeStatus={},e._pageCommonArr=[],e._processMsgQueue=[],e._wframeModelStack=[],e._pCount=0,e._processMsgAjaxCnt=0,WebSquare.idCache[e.uuid]=e,WebSquare.idToUUID[e.id]=e.uuid,e.makeScopeVariable(!0),e.finalize=new Function(""),e.remove=new Function(""),e.destroy=new Function(""),e.setSrc=new Function(""),e}catch(t){h.Y.printStackTrace(t)}},g.__pendingWframeCount=0,g.__pendingWframePreOrderList=[],g.__pendingWframePostOrderList=[],g._cacheObj={},g.scope=function(t){this._parent_uuid=t,this._identifier="wframe_scope"},g.scope.prototype.getRuntimeId=function(t,e){try{for(var i=this._parent_uuid,o="",s=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),r={},a=0;a<s.length;a++)r[s[a].wq_trim()]=!0;if("string"==typeof e){var n=e.split("parent").length-1;for(a=0;a<n&&null!=i&&null!=WebSquare.idCache[i];a++)i=WebSquare.idCache[i].parentFrame}return!0===r[t]?o=null!=i?WebSquare.idCache[i].id+"_"+t:t:null!=i&&null!=WebSquare.idCache[i].scope[t]?o=WebSquare.idCache[i].scope[t].id||"":WebSquare.idToUUID[t]&&WebSquare.idCache[WebSquare.idToUUID[t]]&&(o=WebSquare.strictMode&&null!=WebSquare.idCache[i]&&WebSquare.idCache[WebSquare.idToUUID[t]].scope_id!==WebSquare.idCache[i].id?"":t),o}catch(t){return h.Y.printStackTrace(t,null,this),""}},g.scope.prototype.getSubmission=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,r=WebSquare.idCache[this._parent_uuid].scope[t],a=0;a<i.submissions.length;a++){var n=i.submissions[a];if(r===n||n.scope_id===s&&n.id===t){o=n;break}}return o}catch(t){h.Y.printStackTrace(t)}},
g.scope.prototype.getSubmissionList=function(t){try{return void 0!==t&&null!=t||(t={}),!0!==t.all&&(t.scopeId=WebSquare.idCache[this._parent_uuid].id),WebSquare.ModelUtil.getSubmissionList(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.executeSubmission=function(t,e,i,o,s){try{var r;if("string"==typeof t)r=this.getSubmission(t);else if(r=t,WebSquare.strictMode&&r.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(r,e,i,o,s)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.createSubmission=function(t,e){try{var i,o=t.id,s=this.getFrame(),r=s.id,a=r+"_";return t.id=a+o,t.scope_id=r,t.org_id=o,i=WebSquare.ModelUtil.createSubmission(t,e),s.scope[o]=WebSquare.ModelUtil.getSubmission(t.id,null,{scope_id:r}),null!=s.frameDoc&&(this._deleteSubmissionDoc(o),s.frameDoc.models[0].submissions.push(s.scope[o])),i}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.deleteSubmission=function(t,e){try{var i=this.getSubmission(t);this._deleteSubmissionDoc(t);var o=WebSquare.ModelUtil.deleteSubmission(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype._deleteSubmissionDoc=function(t){try{var e=this.getSubmission(t),i=this.getFrame();if(null!=i.frameDoc)for(var o=i.frameDoc.models[0].submissions,s=o.length-1;s>=0;s--)o[s].id===e.id&&(o[s].parentElement=null,o.splice(s,1))}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.createWorkflow=function(t,e){try{var i,o=t.id,s=this.getFrame(),r=s.id,a=r+"_";return t.id=a+o,t.scope_id=r,i=WebSquare.ModelUtil.createWorkflow(t,e),s.scope[o]=WebSquare.ModelUtil.getWorkflow(t.id,null,{scope_id:r}),i}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.deleteWorkflow=function(t,e){try{var i=this.getWorkflow(t),o=WebSquare.ModelUtil.deleteWorkflow(i.id,e,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[t],o}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getWorkflow=function(t,e){try{for(var i=WebSquare.ModelUtil.getModelByID(e),o=null,s=WebSquare.idCache[this._parent_uuid].id,r=WebSquare.idCache[this._parent_uuid].scope[t],a=0;a<i.workflows.length;a++){var n=i.workflows[a];if(r===n||n.scope_id===s&&n.id===t){o=n;break}}return o}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getRunningWorkflow=function(t,e){try{var i=null;if(t)null!=(a=this.getWorkflow(t,e))&&a.promiseStatus&&""!=a.promiseStatus&&(i=a);else for(var o=WebSquare.idCache[this._parent_uuid].id,s=WebSquare.ModelUtil.getModelByID(e),r=0;r<s.workflows.length;r++){var a;if((a=s.workflows[r]).scope_id===o&&a.promiseStatus&&""!=a.promiseStatus){i=a;break}}return i}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.isRunningWorkflow=function(t,e){try{return null!=this.getRunningWorkflow(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getRunningWorkflowID=function(t){try{var e=this.getRunningWorkflow(null,t),i=null;return null!=e&&(i=e.id),i}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.rejectWorkflow=function(t,e,i){try{var o=this.getRunningWorkflow(e,i),s=null;return null!=o&&(o.promiseStatus="REJECT",o.promiseValue=t||"REJECT",s=o),s}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.executeWorkflow=function(t){try{return WebSquare.ModelUtil.executeWorkflow(t,{scope_function:this})}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.executeSerial=function(t,e,i,o,s,r){try{return WebSquare.ModelUtil.executeSerial(t,e,i,o,s,r,{scope_function:this})}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.executeParallel=function(t,e,i,o,s,r){try{return WebSquare.ModelUtil.executeParallel(t,e,i,o,s,r,{scope_function:this})}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.executeWhilst=function(t,e,i,o,s,r,a){try{return WebSquare.ModelUtil.executeWhilst(t,e,i,o,s,r,a,{scope_id:this.getFrameId()})}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.ajax=function(t){try{if(t){var e=this.getFrame();e&&(t.scope=e.id),WebSquare.net.ajax(t)}
}catch(t){h.Y.printStackTrace(t),this.hideProcessMessage()}},g.scope.prototype.dynamicCreate=function(t,e,i,o,s,r){try{return c.Z.dynamicCreate(t,e,i,o,s,r,this.getFrame())}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid]&&WebSquare.idCache[this._parent_uuid].id||null}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype._getProcessMsgTargetFrame=function(){try{return WebSquare.idCache[this._parent_uuid].parentControl}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getParentWindow=function(){try{var t=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==t?this.getFrame().options.strictFrame?c.Z.getParentWindow():window:t.scope}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getTopWindow=function(){try{return top}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.top=function(){try{return c.Z.getTopWindow()}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.main=function(){try{var t,e=this.getFrame();return e&&(t=e._getInheritFrame("api")),t?t.scope:c.Z.getMainFrame()}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.self=function(){try{return this.getFrame().scope}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getComponentById=function(t){try{return c.Z.getComponentById(t,this.getFrameId())}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopupParam=function(t){try{void 0!==t&&null!=t||(t={});var e="",i=WebSquare.idCache[this._parent_uuid],o=null!=i._dataObject&&""!=i.options.popupParam&&i._dataObject.name===i.options.popupParam.slice(1);o=o||!0===t.dataObject;var s=null!=i.paramObj&&""!=i.options.popupParam;if(o||s){var r=o?i._dataObject.type.charAt(0):i.options.popupParam.charAt(0),a=o?i._dataObject.data:i.paramObj[i.options.popupParam.slice(1)];switch(r){case"j":e=JSON.stringify(a);break;case"x":e=WebSquare.xml.serialize(a);break;case"a":e=c.Z.parseArray(a);break;default:e=a}}return e}catch(t){return h.Y.printStackTrace(t),""}},g.scope.prototype.getParameter=function(t){try{var e,i=this.getFrame();if(i._dataObject&&i._dataObject.name===t)null==(e=i._dataObject.data)&&i.options.strictFrame&&(e=WebSquare.net.getParameter(t));else{var o=WebSquare.idCache[this._parent_uuid].paramObj;null!=o&&(e=o[t]),WebSquare.strictMode&&!i.options.strictFrame||null!=e||(e=WebSquare.net.getParameter(t))}return e}catch(t){return h.Y.printStackTrace(t),""}},g.scope.prototype.getAllParameter=function(){try{var t=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var e in t)t[e]=t[e].slice(1);var i=this.getFrame(),o=i._getDataObject();return null!=o&&(null==t&&(t={}),i._getVersion()>=3?t[o.name]=o.data:t[o.name]=this.getPopupParam({dataObject:!0})),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=t||(t=WebSquare.net.getAllParameter()),t}catch(t){return h.Y.printStackTrace(t),null}},g.scope.prototype.getOptions=function(t){try{var e,i=this.getFrame(),o=l.I._getParentObj();if(i.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=o&&null!=o.WebSquare){var s=WebSquare.net.getParameter("popupID");e=o.WebSquare.dataObject[s].data}}else e="pageFrame"===i.options.pluginName?WebSquare.WebSquareparser.parseAttribute(i.element):i._getDataObject("data");return n.q.extendKeepingType(t||{},e)||{}}catch(t){return h.Y.printStackTrace(t),""}},g.scope.prototype.setPopupParam=function(t,e){},g.scope.prototype.getPopupUrl=function(){try{var t=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var e=WebSquare.idCache[this._parent_uuid].getSrc();t=WebSquare.idCache[this._parent_uuid].getURL(e)}return t}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopupId=function(){try{var t=null;return this.isWFramePopup()&&(t=WebSquare.idCache[this._parent_uuid].paramObj.popupID),t}catch(t){
h.Y.printStackTrace(t)}},g.scope.prototype.isWFramePopup=function(t,e){try{if(!t)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var i=WebSquare.idCache[this._parent_uuid];i;){if(i.options.strictFrame)return!!e&&c.Z.isPopup();if(i._isWframePopup)return i._isWframePopup;i=i.getParentFrame()}}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.isPopup=function(t){try{return this.getFrame().options.strictFrame?c.Z.isPopup2():this.isWFramePopup(t,!0)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopup=function(t){try{return c.Z.getPopup(t,this._parent_uuid)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopupList=function(t){try{return c.Z.getPopupList(t,this._parent_uuid)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopupWindow=function(t){try{return c.Z.getPopupWindow(t,this._parent_uuid)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getPopupWindowList=function(t){try{return c.Z.getPopupWindowList(t,this._parent_uuid)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.openPopup=function(t,e,i,o){try{void 0!==e&&null!=e||(e={}),e.scope_uuid||(e.scope_uuid=this._parent_uuid),c.Z.openPopup(t,e,i,o)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.closePopup=function(t,e){try{var i=t;void 0===t&&(i=this.getParameter("popupID"));var o=this.getPopup(i);if(o){var s=o.id;o.close(i,e),WebSquare.uiplugin.popup.startChkModalClosed(),!0===o.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(s)}else this.getFrame().options.strictFrame&&c.Z.closePopup(i,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.reinitialize=function(t){try{this.getFrame().reload(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getMetaValue=function(t){try{if(this.getFrame().options.strictFrame)return c.Z.getMetaValue(t);var e="",i=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return i&&(e=WebSquare.Elem.api.getAttribute(i,t)),e}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.multipleExcelUpload=function(t){try{t.scopeId=this.id,c.Z.multipleExcelUpload(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.multipleExcelDownload=function(t){try{t.scopeId=this.id,c.Z.multipleExcelDownload(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.$=function(t){try{for(var e,i=t.split("#"),o=0;o<i.length;o++){var s=i[o].search(/[\W]/);if(0!==s){var r,a="";s<0?r=i[o]:(r=i[o].slice(0,s),a=i[o].slice(s));var n=this.getComponentById(r);null!=n&&(i[o]=n.id+a)}}e=i.join("#");var l="";return this.getFrame().options.strictFrame||(l="#"+this.getFrameId()+" "),c.Z.jQuerySelector(l+e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.watermark=function(t,e){try{void 0!==e&&null!=e||(e={});var i=this.getFrame(),o=i.id;e.canvasId||(e.canvasId=o+"_watermarkCanvas"),e.target||(e.target=i),c.Z.watermark(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.emit=function(t){try{var e=[].slice.apply(arguments,[0]);return e.shift(),this.getFrame().trigger(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,c.Z.updateSuffix(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.bigDecimal=function(t){try{var e=function(t){return WebSquare.bigDecimal(t)};return e.calc=(i=t,function(t,e){return WebSquare.bigDecimal.calc(t,e,i)}),e}catch(t){h.Y.printStackTrace(t)}var i},g.scope.prototype.updateServerTime=function(t,e,i){try{var o,s=this.getFrame()._getMsaName();return o=!s||void 0!==i&&""!=i?s||void 0!==i&&""!=i?i:"":s,WebSquare.date.updateServerTime(t,e,o)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.getCurrentServerDate=function(t,e){try{var i,o=this.getFrame()._getMsaName();return i=!o||void 0!==e&&""!=e?o||void 0!==e&&""!=e?e:void 0:o,WebSquare.date.getCurrentServerDate(t,i)}catch(t){h.Y.printStackTrace(t)}},g.scope.data=function(t){this._parent_id=t,this._identifier="wframe_scope_data"},g.scope.data.prototype.get=function(t,e,i){try{return i||(i={}),
i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(t,e,i)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.set=function(t,e,i,o){try{return o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(t,e,i,o)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.create=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.remove=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.bindPath=function(t){try{var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e>1&&(i.columnId=e[1]),i}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.getAllDataCollection=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.getBroadcast=function(t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.getInfo=function(t,e,i,o){try{return void 0!==o&&null!=o||(o={}),o.scope_obj||(o.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(t,e,i,o)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.getOption=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.setBroadcast=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.data.prototype.setOption=function(t,e,i){try{return void 0!==i&&null!=i||(i={}),i.scope_obj||(i.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(t,e,i)}catch(t){h.Y.printStackTrace(t)}},g.scope.model=function(t){this.scope_id=t},g.scope.model.prototype.setInstanceValue=function(t,e,i){return WebSquare.ModelUtil.setInstanceValue(t,e,i,this.scope_id)},g.scope.model.prototype.getInstanceValue=function(t,e){return WebSquare.ModelUtil.getInstanceValue(t,e,this.scope_id)},g.scope.model.prototype.findInstanceNode=function(t,e){return WebSquare.ModelUtil.findInstanceNode(t,e,this.scope_id)},g.scope.model.prototype.findInstanceNodes=function(t,e){return WebSquare.ModelUtil.findInstanceNodes(t,e,this.scope_id)},g.scope.model.prototype.findSerializedNode=function(t,e){return WebSquare.ModelUtil.findSerializedNode(t,e,this.scope_id)},g.scope.model.prototype.removeInstanceNode=function(t){return WebSquare.ModelUtil.removeInstanceNode(t,this.scope_id)},g.scope.model.prototype.removeInstanceNodes=function(t){return WebSquare.ModelUtil.removeInstanceNodes(t,this.scope_id)},g.scope.model.prototype.removeChildNodes=function(t){return WebSquare.ModelUtil.removeChildNodes(t,this.scope_id)},g.scope.model.prototype.copyNode=function(t,e,i,o){return WebSquare.ModelUtil.copyNode(t,e,i,o,this.scope_id)},g.scope.prototype.updateSuffix=function(t){try{void 0!==t&&null!=t||(t={});var e=this.getFrame().id;t.scopeId=e,c.Z.updateSuffix(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.showProcessMessage=function(t,e){try{void 0!==e&&null!=e||(e={});var i=WebSquare.idCache[this._parent_uuid].id;return e.scope||(e.scope=i),WebSquare.layer.showProcessMessage(t,e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.hideProcessMessage=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.idCache[this._parent_uuid].id;return t.scope||(t.scope=e),WebSquare.layer.hideProcessMessage(t)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.js=function(){try{
for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(0===e.length)return;var o=e.slice(0),s=o[o.length-1];return"string"==typeof s&&l.I._msaServerHash[s]&&o.length>=2||"string"==typeof(s=this.getFrame()._getMsaName())&&l.I._msaServerHash[s]&&o.push(s),WebSquare.util.js.apply(this,o)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.jsAsync=function(){var t=(0,s.A)(a().mark((function t(e,i){var s,r,n,d,u,p,m,f,b,y,v,w,S,_,C,x;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"string"==typeof e&&(e=e.split(",")),e instanceof Array){t.next=4;break}return t.abrupt("return");case 4:if(void 0!==i&&null!=i||(i={}),s=[],r=this.getFrame(),n={frameObj:r,msaName:i.msaName,wpack:i.wpack},i.scopeVariable&&(d=i.scopeVariable,"string"==typeof i.scopeVariable&&(d=i.scopeVariable.split(",")),d instanceof Array))for(u=0;u<d.length;u++)(p=d[u])&&null==r.scope[p]&&(r.scope[p]={});for(u=0;u<e.length;u++)m=e[u],f=l.I._getMsaSrc(m,n),"function"==typeof g._cacheObj[f]?(y=g._cacheObj[f],v={func:y,cached:!0,scopeId:r.id},b=Promise.resolve(v)):(w={skipError:!0,noPostfix:!0,useInfo:!0,infoObj:{url:f,scopeId:r.id,noCache:i.noCache}},b=l.I.loadAsync(f,w)),b instanceof window.Promise&&s.push(b);if(r.id,!0!==i.await){t.next=28;break}u=0;case 13:if(!(u<s.length)){t.next=26;break}return t.next=16,s[u];case 16:if(!0===(S=t.sent).cached?_=S.func:S.data&&(C=c.Z.scopingFuncBody(S.data,"scopeComp","scopeObj",{async:!0}),_=new Function("scopeComp",C),"string"==typeof S.url&&S.url&&!0!==S.noCache&&(g._cacheObj[S.url]=_)),"function"!=typeof _){t.next=23;break}return x=c.Z.getComponentById(S.scopeId),t.next=22,_(x);case 22:x.refreshInheritScopeCommon();case 23:u++,t.next=13;break;case 26:t.next=30;break;case 28:return t.next=30,Promise.allSettled(s).then((function(t){for(var e=0;e<t.length;e++)if("fulfilled"===t[e].status){var i,s=t[e].value;if(s&&"object"===(0,o.A)(s)){if(!0===s.cached)i=s.func;else if(s.data){var r=c.Z.scopingFuncBody(s.data,"scopeComp","scopeObj");i=new Function("scopeComp",r),"string"==typeof s.url&&s.url&&!0!==s.noCache&&(g._cacheObj[s.url]=i)}if("function"==typeof i){var a=c.Z.getComponentById(s.scopeId);i(a)}a.refreshInheritScopeCommon()}}}));case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(0),h.Y.printStackTrace(t.t0);case 35:case"end":return t.stop()}}),t,this,[[0,32]])})));return function(e,i){return t.apply(this,arguments)}}(),g.scope.prototype.loadPageCommon=function(t){try{if(!(t instanceof Array))throw new Error("$p.loadPageCommon error : invalid parameter. The infoArray must be of array type.");for(var e=[],i=this.getFrame(),o={onpageloadNow:!0},s=0;s<t.length;s++){var r=t[s];if(r.src&&r.id&&"string"==typeof r.src&&"string"==typeof r.id)e.push(i._parsePageCommon(r,o));else{var a="$p.loadPageCommon partial error : invalid info. src : "+r.src+", id : "+r.id;u.v.printLog(a),e.push(Promise.reject(new Error(a)))}}return i._parsePageCommonsAfter(e)}catch(t){h.Y.printStackTrace(t)}},g.scope.prototype.loadMSACommon=function(){var t=(0,s.A)(a().mark((function t(e){var i,o,s,r,n,d,c,p,g,m,f,b,y,v,w,S,_;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e instanceof Array){t.next=3;break}throw new Error("$p.loadMSACommon error : invalid parameter. The infoArray must be of array type.");case 3:i=l.I.projectCommonVariable,window[i]||(window[i]={}),o=[],s=[],r=this.getFrame(),n=r._getMsaName(),d=0;case 10:if(!(d<e.length)){t.next=32;break}if(c=e[d],p=c.src,g=c.name,m=c.msaServerName,f=c.spaCache,b=c.reload,"string"==typeof p&&"string"==typeof g&&p&&g){t.next=22;break}return y="$p.loadMSACommon partial error : invalid info. src : "+p+", name : "+g,u.v.printLog(y),o.push(Promise.reject(new Error(y))),t.abrupt("continue",29);case 22:g=g.replace(i+".",""),!0!==b&&(l.I._msaHash[g]||l.I._projectCommonHash[g]),v=p,m&&"string"==typeof m||(m=n),m&&"string"==typeof m&&(w={msaName:m},v=l.I.getURL(p,w)),(S=WebSquare.jsLoader._loadObj(v,w))instanceof window.Promise&&(o.push(S),_={
name:g,src:p,spaCache:f},s.push(_));case 29:d++,t.next=10;break;case 32:return t.next=34,l.I._loadWebSquareCommon("msa",o,s);case 34:t.next=39;break;case 36:t.prev=36,t.t0=t.catch(0),h.Y.printStackTrace(t.t0);case 39:case"end":return t.stop()}}),t,this,[[0,36]])})));return function(e){return t.apply(this,arguments)}}()},8538:function(t,e,i){"use strict";i.r(e),i.d(e,{widget:function(){return c},widgetContainer:function(){return d}});var o=i(2284),s=i(5461),r=i(8971),a=i(2338),n=i(1204),l=i(3406),h=i(2406),d=function(t,e,i){WebSquare.uiplugin.widgetContainer.isImported||(WebSquare.uiplugin.widgetContainer.isImported=!0),h.q.call(this,t,e,i)};s.q.extend(d.prototype,h.q.prototype),d.prototype.defaultOptions={pluginType:"uiplugin.widgetContainer",pluginName:"widgetContainer",useConfig:!0,userEvents:["onload","onwidgetload","onwidgetmove","onwidgetresize","onwidgetopen","onwidgetfix","onwidgetmaximize","onwidgetminimize","onbeforewidgetclose","onafterwidgetclose","onwidgetrestore","onclickcustombtn"],mode:"pushpull",threshold:null,cols:1,unitHeightPixel:25,verticalMargin:0,horizontalMargin:0,minUnitWidth:1,minUnitHeight:1,maxUnitWidth:null,maxUnitHeight:null,widgetMove:!0,widgetResize:!0,forceMinMax:!1,popupEvent:"",async:!1,processMsgFrame:!1,preventMaximizeByTitle:!1,accessibility:!1,useLocale:!1,msaName:""},d.prototype.initialize=function(t){this.widgetIdCount=0,this.widgetLoadedCount=0,this.widgets=[],this.dirtyArr=[],this.changingWidget=null,this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize,this.preventMaximizeByTitle=this.options.preventMaximizeByTitle,!0===this.options.accessibility&&(this.focusWidget={})},d.prototype.toHTML=function(){var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'",i=!0===this.options.accessibility?" tabindex='0'":"";return t.push("<div id='"+this.id+"' "+e+i+" class='w2widgetContainer "+this.options.className+"'>"),t.push("<div id='"+this.id+"_content'  class='w2widgetContainer_content'>"),t.push("</div>"),!0===this.options.accessibility&&(t.push("<div id='"+this.id+"_bridge'  aria-hidden='true' tabindex='0' class='w2widgetContainer_bridge'>"),t.push("</div>")),t.push("</div>"),t.join("")},d.prototype.setAction=function(){this.unitWidth=100/this.options.cols,this.unitHeightPixel=this.options.unitHeightPixel,this.contentRender=this.getElementById(this.id+"_content"),this.redraw(),this.event.addListener(window,"onresize",this.event.bindAsEventListener(this,this.handleResizeEvent)),this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onMSPointerDown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),!0===this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydown))},d.prototype.checkResize=function(t){this.handleResizeEvent()},d.prototype.handleResizeEvent=function(){this.redraw()},d.prototype._changeWidget=function(t,e,i,o,s,r){return r||(r={}),!(t.isFixed()&&!r.force)&&(!0===t.dirty?(a="number"==typeof e?e:t.x,n="number"==typeof i?i:t.y,l="number"==typeof o?o:t.unitWidth,h="number"==typeof s?s:t.unitHeight):(a="number"==typeof e?e:t.oriX,n="number"==typeof i?i:t.oriY,l="number"==typeof o?o:t.oriUnitWidth,h="number"==typeof s?s:t.oriUnitHeight,t.dirty=!0,this.dirtyArr.push(t)),!!this.isValidPos(a,n,l,h)&&(t.x=a,t.y=n,t.unitWidth=l,t.unitHeight=h,!0));var a,n,l,h},d.prototype._commit=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.oriX=t.x,t.oriY=t.y,t.oriUnitWidth=t.unitWidth,t.oriUnitHeight=t.unitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},d.prototype._rollback=function(){for(var t,e=0;e<this.dirtyArr.length;e++)(t=this.dirtyArr[e])&&(t.x=t.oriX,t.y=t.oriY,t.unitWidth=t.oriUnitWidth,
t.unitHeight=t.oriUnitHeight,t.dirty=!1);this.dirtyArr.splice(0,this.dirtyArr.length)},d.prototype._getMaxRect=function(t){var e=t.getMaximizeConfig(),i=t.getRect(),o=e.left<0?0:i.x-e.left,s=e.right<0?this.options.cols-i.x:i.unitWidth+e.right;o<=0?(s=s+i.x-o,o=0):s+=e.left,o+s>this.options.cols&&(o<s-this.options.cols?(o=0,s=this.options.cols):o=this.options.cols-s);var r=e.top<0?0:i.y-e.top,a=i.unitHeight+e.bottom;return r<=0?(a=a+i.y-r,r=0):a+=e.top,e.bottom<0&&(a=1/0),{x:o,y:r,unitWidth:s,unitHeight:a}},d.prototype._getMarginedWidth=function(t){return"number"==typeof t?t-this.verticalMargin:parseInt(t,10)-this.verticalMargin},d.prototype._getMarginedHeight=function(t){return"number"==typeof t?t-this.horizontalMargin:parseInt(t,10)-this.horizontalMargin},d.prototype._getMarginedLeft=function(t){return"number"==typeof t?t+this.verticalMargin/2:parseInt(t,10)+this.verticalMargin/2},d.prototype._getMarginedTop=function(t){return"number"==typeof t?t+this.horizontalMargin/2:parseInt(t,10)+this.horizontalMargin/2},d.prototype._recalcSize=function(){if(this.render){this.fullWidth=Math.max(this.render.scrollWidth,this.render.clientWidth),this.fullWidth<=0&&(this.fullWidth=parseInt(this.render.style.width,10)),this.verticalMargin=this.options.verticalMargin/this.fullWidth*100,this.horizontalMargin=this.options.horizontalMargin;for(var t=0,e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.isMaximized()?this._getMaxRect(i):i.getRect();o&&o.unitHeight!==1/0&&t<o.y+o.unitHeight&&(t=o.y+o.unitHeight)}var s=t*this.unitHeightPixel;this.fullHeight=Math.max(this.render.scrollHeight,this.render.clientHeight,s),WebSquare.BootLoader.fullViewRatio&&(this.zoomLevel=WebSquare.BootLoader.fullViewRatio),this.options.threshold&&this.options.threshold>this.fullWidth?(this.oneColumn=!0,this.widgetMove=!1,this.widgetResize=!1):(this.oneColumn=!1,this.widgetMove=this.options.widgetMove,this.widgetResize=this.options.widgetResize)}},d.prototype._renderWithRect=function(t,e,i){if(null!=i){if(t||"object"!==(0,o.A)(i)||i.appendTo(this),!i.parentControl)return void(i.render=void 0);t=i.render}"number"==typeof e.unitWidth?t.style.width=this._getMarginedWidth(e.unitWidth*this.unitWidth)+"%":t.style.width=this._getMarginedWidth(e.unitWidth)+"%","number"==typeof e.unitHeight?t.style.height=this._getMarginedHeight(e.unitHeight*this.unitHeightPixel)+"px":t.style.height=this._getMarginedHeight(e.unitHeight)+"px","number"==typeof e.x?t.style.left=this._getMarginedLeft(e.x*this.unitWidth)+"%":t.style.left=this._getMarginedLeft(e.x)+"%","number"==typeof e.y?t.style.top=this._getMarginedTop(e.y*this.unitHeightPixel)+"px":t.style.top=this._getMarginedTop(e.y)+"px"},d.prototype.redraw=function(){if(this._recalcSize(),this.oneColumn){var t=0;this.widgets.sort((function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y}))}for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e],o=i.getRect();if(this.oneColumn){if(o.x=0,o.unitWidth=this.options.cols,o.y=t,t+=o.unitHeight,this.options.forceMinMax){if(i.isMaximized()){(s=this._getMaxRect(i)).x=o.x,s.unitWidth=o.unitWidth,s.unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}}else{if(i.isMaximized()){var s;(s=this._getMaxRect(i)).unitHeight=s.unitHeight===1/0?this.fullHeight+"px":s.unitHeight,this._renderWithRect(i.render,s,i);continue}if(i.isMinimized()){var r=this.getElementById(i.id+"_title"),a=parseInt(r.offsetHeight||WebSquare.style.getStyle(r,"height"),10);o.unitHeight=a+this.horizontalMargin+"px",this._renderWithRect(i.render,o,i)}}this.ghost&&i.id===this.dragDropElem.id?this._renderWithRect(this.ghost,o,null):(this._renderWithRect(i.render,o,i),i._setTitleEllipsis())}},d.prototype.setCols=function(t){var e=this.unitWidth,i=this.options.cols,o=!0;this.unitWidth=100/t,
this.options.cols=t;for(var s=0;s<this.widgets.length;s++)if(!this.isValidPos(this.widgets[s].x,this.widgets[s].y,this.widgets[s].unitWidth,this.widgets[s].unitHeight)){o=!1;break}o?this.redraw():(this.unitWidth=e,this.options.cols=i,$l(l.B.getMessage("WidgetContainer_setCols_warning")))},d.prototype.isValidPos=function(t,e,i,o){if(t!==parseInt(t,10)||e!==parseInt(e,10)||i!==parseInt(i,10)||o!==parseInt(o,10))return!1;var s=t>=0&&t+i<=this.options.cols,r=e>=0,a=i>=(this.options.minUnitWidth||1),n=o>=(this.options.minUnitHeight||1);return s&&r&&a&&n},d.prototype._checkInclusion=function(t,e){return t.x<=e.x&&t.y<=e.y&&t.x+t.unitWidth>=e.x+e.unitWidth&&t.y+t.unitHeight>=e.y+e.unitHeight},d.prototype._checkCollision=function(t,e){return t.x+t.unitWidth>e.x&&t.x<e.x+e.unitWidth&&t.y+t.unitHeight>e.y&&t.y<e.y+e.unitHeight},d.prototype._checkSwitchable=function(t,e){var i=t._getOriRect();if(!this._checkInclusion(i,e)||this._checkCollision(t,e))return!1;for(var o=0;o<this.widgets.length;o++){var s=this.widgets[o],r=s._getOriRect();if(s.id!==t.id&&s.id!==e.id&&this._checkCollision(e,r))return!1}return!0},d.prototype._getColArr=function(t){for(var e=[],i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o&&o.id!==t.id){var s=this._getMaxRect(o);if(o.isMaximized()&&(!s||this._checkCollision(t,s)))return!1;if(this._checkCollision(t,o)){if(o.isFixed()&&this.changingWidget===t)return!1;e.push(o)}}}return e},d.prototype._pushWidgets=function(t){var e=[],i=this._getColArr(t);if(!1===i)return!1;i.sort((function(t,e){return e.y-t.y}));for(var o=0;o<i.length;o++){var s=i[o];if(s&&s.id!==t.id)if(s.isFixed())e.push(s);else if(this._changeWidget(s,null,t.y+t.unitHeight,null,null),!this._pushWidgets(s))return!1}for(var r=0;r<e.length;r++)this._pushWidgets(e[r]);return!0},d.prototype._pullWidgets=function(){if("pushpull"===this.options.mode){this.widgets.sort((function(t,e){return t.y-e.y}));for(var t=0;t<this.widgets.length;t++){var e=0,i=this.widgets[t];if(!i.isFixed()){for(var o=0;o<t;o++){var s=this.widgets[o];if(i.x+i.unitWidth>s.x&&i.x<s.x+s.unitWidth){if(s.isFixed()&&e+i.unitHeight<=s.y){var r=this.widgets.splice(t,1)[0];this.widgets.splice(o,0,r);break}s.y+s.unitHeight>e&&(e=s.y+s.unitHeight)}}i.y!==e&&this._changeWidget(i,null,e,null,null)}}}},d.prototype._calcSwitchPos=function(t,e,i,o,s){var r,a,n=t._getOriRect();if(this._checkCollision(t,n)){var l=0,h=0;t.oriX>t.x&&t.x+t.unitWidth>t.oriX&&(l=t.x+t.unitWidth-t.oriX),t.oriY>t.y&&t.y+t.unitHeight>t.oriY&&(h=t.y+t.unitHeight-t.oriY);for(var d=i[0],c=i[0],u=1;u<i.length;u++)d=o(d,i[u]),c=s(c,i[u]);d=d.oriX,c=c.oriY,r=t.oriX+l+(e.oriX-d),a=t.oriY+h+(e.oriY-c)}else r=t.oriX+(e.oriX-t.x),a=t.oriY+(e.oriY-t.y);return{newX:r,newY:a}},d.prototype._resolveCollision=function(t){try{if("pushpull"===this.options.mode){if(!1===this._pushWidgets(t))return!1;this._pullWidgets()}else{if("switch"!==this.options.mode)return!1;var e=this._getColArr(t);if(!1===e)return!1;for(var i=function(t,e){return t.oriX<=e.oriX?t:e},o=function(t,e){return t.oriY<=e.oriY?t:e},s=0;s<e.length;s++){var a=e[s];if(!a||a.isFixed())return!1;var n=this._calcSwitchPos(t,a,e,i,o),l=n.newX,h=n.newY;if(!this.isValidPos(l,h,a.unitWidth,a.unitHeight))return!1;if(this._changeWidget(a,l,h,null,null),!this._checkSwitchable(t,a))return!1}}return!0}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.getWidgetById=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.id===t||i.id===this.id+"_"+t)return i}return null},d.prototype.getWidgetByTitle=function(t){for(var e=0;e<this.widgets.length;e++){var i=this.widgets[e];if(i.title===t)return i}return null},d.prototype.importWidgets=function(t,e){try{return e&&this._removeWidgets(this.widgets),this.addWidgets(t||[])}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.importWidget=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if((o.id===t||o.id===this.id+"_"+t)&&(e.id=t,this.removeWidgets([o.id])&&this.addWidgets(e)))return!0}
return!1}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.exportWidgets=function(){try{for(var t=[],e=0;e<this.widgets.length;e++){var i=this.widgets[e];t.push(i.getWidgetInfo())}return t}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.setTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var s=this.getElementById(o.id+"_title");o.titleClass=e,this.addClass(s,e)}}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.removeTitleClass=function(t,e){try{for(var i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){var s=this.getElementById(o.id+"_title");this.removeClass(s,e)}}}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.exportWidget=function(t){try{for(var e=null,i=0;i<this.widgets.length;i++){var o=this.widgets[i];if(o.id===t||o.id===this.id+"_"+t){e=o.getWidgetInfo();break}}return e}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.addWidgets=function(t){try{n.Z.isArray(t)||(t=[t]);for(var e=null,i=[],o=!0,s=0;s<t.length;s++){if((e=t[s]).x=parseInt(e.x,10)||0,e.y=parseInt(e.y,10)||0,e.unitWidth=parseInt(e.unitWidth,10),e.unitHeight=parseInt(e.unitHeight,10),e.accessibility=this.options.accessibility,e.useLocale=this.options.useLocale,e.userIconClass=e.userIconClass||"",e.msaName=e.msaName||this.options.msaName||"",!this.isValidPos(e.x,e.y,e.unitWidth,e.unitHeight)){o=!1;break}if(e.id){if(null!==this.getWidgetById(e.id))return void $l("["+this.id+"] A duplicate widget id was used.");e.org_id=e.id,e.id=this.id+"_"+e.id}else{for(var l="widget"+this.widgetIdCount++;null!==this.getWidgetById(l);)l="widget"+this.widgetIdCount++;e.id=this.id+"_"+l,e.org_id=l}void 0===e.processMsgFrame&&!0===this.options.processMsgFrame&&(e.processMsgFrame=!0);var h=new WebSquare.uiplugin.widget(e.id,e);if(h.appendTo(this,this.parentFrame),this.widgets.push(h),i.push(h),!0===h.useCustomLeft)this.useCustomLeft,this.getElementById(h.id+"_title_text").classList.add("w2widget_titleText_unFixed");if(!this._resolveCollision(h)){o=!1;break}}if(o){for(var d=0;d<i.length;d++){(c=i[d]).activate()}this._commit()}else $l("["+this.id+"] A widget cannot be added to that location."),this.widgetIdCount--,this._rollback(),this._removeWidgets(i),i=null;if(o&&!0===this.options.accessibility)for(d=0;d<i.length;d++){var c=i[d],u=document.getElementById(c.id+"_title_buttons");u&&c.render.appendChild(u);var p=n.Z.getDataPrefix("refId"),g=document.getElementById(c.id+"_content");g.setAttribute("tabindex","0"),g.setAttribute(p,this.id)}return this.redraw(),a.f.fireEvent(this,"onload"),i}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.removeWidgets=function(t){try{n.Z.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++){var s=t[i];"object"===(0,o.A)(s)&&null!==s&&(s=s.id);var a=this.getWidgetById(s);if(!a)return null;e.push(a)}return this._removeWidgets(e)}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._removeWidgets=function(t){try{n.Z.isArray(t)||(t=[t]);for(var e=[],i=0;i<t.length;i++)e.push(t[i].id);for(i=0;i<e.length;i++)for(var o=0;o<this.widgets.length;o++)if(this.widgets[o].id===e[i]){this.widgets.splice(o,1)[0].remove();break}return this._commit(),this._pullWidgets(),this.redraw(),e}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.removeWidgetsAll=function(){try{for(var t=this.widgets.length,e=0;e<t;e++)this.widgets[e].remove();return void(this.widgets=[])}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.moveWidget=function(t,e,i){try{if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var s=this._resolveCollision(o);if(s){var n=o._getOriRect();this._commit(),a.f.fireEvent(this,"onwidgetmove",t,o.getRect(),n)}else this._rollback();return this.redraw(),this.changingWidget=null,s}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._moveWidget=function(t,e,i){try{
if(!this.widgetMove)return!1;var o=this.getWidgetById(t);if(o.isFixed())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,e,i,null,null))return!1;var s=this._resolveCollision(o);return s||this._rollback(),this.redraw(),this.changingWidget=null,s}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype.resizeWidget=function(t,e,i,o){try{if(o||(o={}),!this.widgetResize&&!o.force)return!1;var s=this.getWidgetById(t);if(s.isFixed()&&!s.options.minimizeonfixed)return!1;if(this.changingWidget=s,this._rollback(),!this._changeWidget(s,null,null,e,i,o))return!1;var n=this._resolveCollision(s);if(n){var l=s._getOriRect();this._commit(),a.f.fireEvent(this,"onwidgetresize",t,s.getRect(),l)}else this._rollback();return this.redraw(),this.changingWidget=null,n}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._resizeWidget=function(t,e,i){try{if(!this.widgetResize)return!1;var o=this.getWidgetById(t);if(o.isFixed()||o.isMinimized())return!1;if(this.changingWidget=o,this._rollback(),!this._changeWidget(o,null,null,e,i))return!1;var s=this._resolveCollision(o);return s||this._rollback(),this.redraw(),this.changingWidget=null,s}catch(t){r.Y.printStackTrace(t,null,this)}},d.prototype._getClickPos=function(t){var e,i;return t.touches&&1==t.touches.length?(e=t.touches[0].pageX,i=t.touches[0].pageY):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(e=t.pageX,i=t.pageY):(e=a.f.getMouseX(t),i=a.f.getMouseY(t)),this.zoomLevel&&(e/=this.zoomLevel,i/=this.zoomLevel),{posX:e,posY:i}},d.prototype._makeGhost=function(t){this.ghost=document.createElement("div"),this.contentRender.appendChild(this.ghost),this.ghost.style.left=this.dragDropElem.style.left,this.ghost.style.top=this.dragDropElem.style.top,this.ghost.style.width=this.dragDropElem.style.width,this.ghost.style.height=this.dragDropElem.style.height,this.ghost.className="w2widget_ghost";var e=this._getClickPos(t);this.ghost.oriX=e.posX-this.dragDropElem.offsetLeft,this.ghost.oriY=e.posY-this.dragDropElem.offsetTop},d.prototype.enableWidgetTitle=function(t){if("boolean"==typeof t)for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].showTitle(t)},d.prototype.enableWidgetMove=function(t){"boolean"==typeof t&&(this.options.widgetMove=t,this.widgetMove=t)},d.prototype.enableWidgetResize=function(t){if("boolean"==typeof t){this.options.widgetResize=t,this.widgetResize=t;for(var e=0,i=this.widgets.length;e<i;e++)this.widgets[e].setResizable(t)}},d.prototype._focusWidget=function(){try{var t,e=document.activeElement.id,i=n.Z.getDataPrefix("refId"),o=document.getElementById(e);o.getAttribute(i)&&(e=o.getAttribute(i));for(var s=0;s<this.widgets.length;s++){var a=this.widgets[s];if(e===a.id){t={id:a.id,x:a.x,y:a.y,idx:s};break}}return t}catch(t){r.Y.printStackTrace(t)}},d.prototype._ascendingWidgets=function(t){try{t.sort((function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y}))}catch(t){r.Y.printStackTrace(t)}},d.prototype._getFixed=function(t,e){try{for(var i=0;i<this.widgets.length;i++)if(this.widgets[i].x===t&&this.widgets[i].y===e&&!0===this.widgets[i].fixed)return!0;return!1}catch(t){r.Y.printStackTrace(t)}},d.prototype._validVerticalLocationMove=function(t,e){try{var i,o=-1,s=-1,n=-1,l=this.getWidgetById(t.id),h=!1;if(l.isFixed())return!1;if("up"===e)for(n=t.y-1;!1===h;){if(i=!1,!0===this._getFixed(t.x,n)&&(n--,i=!0),!1===i&&!1===h&&(o=t.x,s=n,h=!0),n<0){h=!1;break}}else if("down"===e)for(n=t.y+1;!1===h;){i=!1,!0===this._getFixed(t.x,n)&&(n++,i=!0),!1===i&&!1===h&&(o=t.x,"switch"===this.options.mode?s=n:"pushpull"===this.options.mode&&(s=n+1),h=!0)}if(!0!==h||o<0&&s<0||!this._changeWidget(l,o,s,null,null))return!1;if(this._resolveCollision(l)){var d=l._getOriRect();this._commit(),a.f.fireEvent(this,"onwidgetmove",l.id,l.getRect(),d)}else this._rollback();this.redraw(),this.changingWidget=null}catch(t){r.Y.printStackTrace(t)}},d.prototype._validHorizontalLocationMove=function(t,e){try{var i=-1,o=-1,s=!1,n=!1,l=!1,h=this.getWidgetById(t.id);if(h.isFixed())return
;for(var d=-1,c=0;c<this.widgets.length;c++)this.widgets[c].x>d&&(d=this.widgets[c].x);var u=-1,p=-1;if(this.options.cols>0&&(d=this.options.cols-1),d=d<this.options.cols-1?this.options.cols-1:d,this.changingWidget=h,this._rollback(),"left"===e){u=t.x-1;for(var g=t.y;g>=0;g--){for(var m=d;m>=0;m--)if(n=!1,!(u<m)){if(u>=0&&u===m)for(c=0;c<this.widgets.length;c++)if(this.widgets[c].x===u&&this.widgets[c].y===g&&!0===this.widgets[c].fixed){n=!0,u--;break}if(u<0){i=m,o=g;for(c=0;c<this.widgets.length;c++)if(this.widgets[c].x===m&&this.widgets[c].y===g&&!0===this.widgets[c].fixed){n=!0;break}}if(!1===n&&!1===s){i=m,o=g,s=!0,l=!0;break}}if(!0===l)break;m<0&&(u=d)}}else if("right"===e)for(u=t.x+1,p=t.y;!1===s;){u>d&&(u=0,p=t.y+1);for(m=0;m<=d;m++)if(n=!1,!(m<u)){if(u<=d&&u===m)for(c=0;c<this.widgets.length;c++)if(this.widgets[c].x===u&&this.widgets[c].y===p&&!0===this.widgets[c].fixed){n=!0,u++;break}if(!1===n&&!1===s){i=m,o=p,s=!0,l=!0;break}}if(!0===l)break}if(!0===s&&!this._changeWidget(h,i,o,null,null)||!1===s||i<0&&o<0)return;if(this._resolveCollision(h)){var f=h._getOriRect();this._commit(),a.f.fireEvent(this,"onwidgetmove",h.id,h.getRect(),f)}else this._rollback();this.redraw(),this.changingWidget=null}catch(t){r.Y.printStackTrace(t)}},d.prototype.handleMousedownEvent=function(t){for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2widget_title_buttons")&&(this.dragDropElem=null,e.stop()),e.match("w2widget_btnResize"))this.options.widgetResize?(this.dragDropElem=e.getElement().parentNode,this.isResizing=!0):(this.dragDropElem=null,this.isResizing=!1),e.stop();else if(e.match("w2widget_title"))this.options.widgetMove?(this.dragDropElem=e.getElement().parentNode,this.isMoving=!0):(this.dragDropElem=null,this.isMoving=!1),e.stop();else if(e.match("w2widget_btnMinimize")){e.element.className.indexOf("w2widget_btnMinimizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMinimizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMinimizeOn")}else if(e.match("w2widget_btnMaximize")){e.element.className.indexOf("w2widget_btnMaximizeOn")>-1?WebSquare.style.removeClass(e.element,"w2widget_btnMaximizeOn"):WebSquare.style.addClass(e.element,"w2widget_btnMaximizeOn")}e=null;var i=function(){var t=this;t.dragDropElem=null,t.isResizing=!1,t.isMoving=!1};if(this.dragDropElem){a.f.stopEvent(t);var o=this.getWidgetById(this.dragDropElem.id);(this.isResizing||this.isMoving)&&(!this.isResizing||this.widgetResize&&o.isResizable())&&(!this.isMoving||this.widgetMove&&o.isMovable())?(o.addClass("w2widget_changing"),t.touches&&1==t.touches.length?(this.event.addListener(this.render,"ontouchmove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.PointerEvent?(this.event.addListener(this.render,"onpointermove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onpointerleave",this.event.bindAsEventListener(this,this.handleMouseupEvent))):window.navigator.msPointerEnabled&&"touch"==t.pointerType?(this.event.addListener(this.render,"onMSPointerMove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onMSPointerUp",this.event.bindAsEventListener(this,this.handleMouseupEvent))):(this.event.addListener(this.render,"onmousemove",this.event.bindAsEventListener(this,this.handleMousemoveEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseupEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseupEvent)))):i.call(this)}else i.call(this)},d.prototype.handleMousemoveEvent=function(t){if(this.dragDropElem){this.ghost||this._makeGhost(t);var e=this._getClickPos(t),i=e.posX,o=e.posY
;if(!0===this.isResizing){this.getWidgetById(this.dragDropElem.id)._setTitleEllipsis(),i-=WebSquare.style.getAbsoluteLeft(this.contentRender),o-=WebSquare.style.getAbsoluteTop(this.contentRender);var s=parseFloat(this.ghost.style.left),r=100*(i/this.fullWidth-s/100)+this.verticalMargin,n=o-parseInt(this.ghost.style.top,10)+this.horizontalMargin;r=(r=r<this.unitWidth?this.unitWidth:r)+s>100?100-s:r,n=n<this.unitHeightPixel?this.unitHeightPixel:n,this.dragDropElem.style.width=r-this.verticalMargin+"%",this.dragDropElem.style.height=n-this.horizontalMargin+"px",r=Math.round(r/this.unitWidth),n=Math.round(n/this.unitHeightPixel),this.ghost.oldWidth===r&&this.ghost.oldHeight===n||(this.ghost.oldWidth=r,this.ghost.oldHeight=n,this.relocResult=this._resizeWidget(this.dragDropElem.id,r,n))}else if(!0===this.isMoving){i-=this.ghost.oriX,o-=this.ghost.oriY,this.dragDropElem.style.left=i+"px",this.dragDropElem.style.top=o+"px";var l=Math.round((i/this.fullWidth*100-this.verticalMargin/2)/this.unitWidth),h=Math.round((o-this.horizontalMargin/2)/this.unitHeightPixel),d=Math.round(parseFloat(this.ghost.style.width)/this.unitWidth);l=(l=l<0?0:l)+d>this.options.cols?this.options.cols-d:l,h=h<0?0:h,this.ghost.oldX===l&&this.ghost.oldY===h||(this.ghost.oldX=l,this.ghost.oldY=h,this.relocResult=this._moveWidget(this.dragDropElem.id,l,h))}a.f.preventDefault(t)}},d.prototype.handleMouseupEvent=function(){if(this.dragDropElem){this.ghost&&(this.dragDropElem.parentNode.removeChild(this.ghost),this.ghost=null);var t=this.getWidgetById(this.dragDropElem.id);if(t.removeClass("w2widget_changing"),this.dragDropElem=null,this.relocResult){var e=t._getOriRect();this._commit(),this.isMoving?a.f.fireEvent(this,"onwidgetmove",t.id,t.getRect(),e):this.isResizing&&a.f.fireEvent(this,"onwidgetresize",t.id,t.getRect(),e)}this.isResizing=!1,this.isMoving=!1,this.redraw()}},d.prototype.handleKeydown=function(t){try{var e,i,o,s,l,h=this.event.getTargetIterator(t,this.render);if(t.target.id===this.render.id)if(9===t.keyCode&&!t.shiftKey)a.f.preventDefault(t),this.widgets.length>0&&(o=this.widgets.slice(),this._ascendingWidgets(o),l=o[0]),l&&l.render.focus(),h.stop();if(this.focusWidget=this._focusWidget(),this.focusWidget&&t.target.id===this.focusWidget.id)switch(void 0!==this.focusWidget&&document.getElementById(this.focusWidget.id),t.keyCode){case 37:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validHorizontalLocationMove(this.focusWidget,"left")}catch(t){r.Y.printStackTrace(t)}break;case 39:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validHorizontalLocationMove(this.focusWidget,"right")}catch(t){r.Y.printStackTrace(t)}break;case 38:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validVerticalLocationMove(this.focusWidget,"up")}catch(t){r.Y.printStackTrace(t)}break;case 40:if(t.shiftKey&&void 0!==this.focusWidget.id)try{this._validVerticalLocationMove(this.focusWidget,"down")}catch(t){r.Y.printStackTrace(t)}break;case 9:if(t.shiftKey)if(void 0!==this.focusWidget&&t.target.id===this.focusWidget.id){a.f.preventDefault(t),o=this.widgets.slice(),this._ascendingWidgets(o);for(var d=0;d<o.length;d++)if(o[d].id===this.focusWidget.id){if(o[d-1]){this.getElementById(o[d-1].id).focus(),s=this.getElementById(o[d].id);break}this.render.focus(),s=this.getElementById(o[d].id);break}}else a.f.preventDefault(t),document.getElementById(this.focusWidget.id+"_content").focus();break;case 32:case 13:a.f.preventDefault(t)}if(this.focusWidget&&t.target.id===this.focusWidget.id+"_content"&&9==t.keyCode&&t.shiftKey&&(a.f.preventDefault(t),document.getElementById(this.focusWidget.id).focus()),this.focusWidget&&t.target.id===this.focusWidget.id+"_title_btnClose"){if(e=this.focusWidget,9==t.keyCode&&!t.shiftKey&&(a.f.preventDefault(t),o=this.widgets.slice(),this._ascendingWidgets(o),void 0!==this.focusWidget.id)){for(d=0;d<o.length;d++)if(o[d].id===this.focusWidget.id&&o[d+1]){this.getElementById(o[d].id),(s=this.getElementById(o[d+1].id)).focus();break}
if(void 0===s)document.getElementById(this.id+"_bridge").focus()}if(32==t.keyCode&&void 0!==e.id){var c;i=this.getElementById(e.id+"_title_btnClose");var u={},p={};u.x=this.focusWidget.x,u.y=this.focusWidget.y,i.click();for(d=0;d<this.widgets.length;d++){if(this.widgets[d].x===u.x&&this.widgets[d].y===u.y){c=this.widgets[d].id;break}this.widgets[d].x===u.x+1&&this.widgets[d].y===u.y?p.right=this.widgets[d].id:this.widgets[d].x===u.x-1&&this.widgets[d].y===u.y?p.left=this.widgets[d].id:this.widgets[d].x===u.x&&this.widgets[d].y===u.y-1?p.up=this.widgets[d].id:this.widgets[d].x===u.x&&this.widgets[d].y===u.y+1&&(p.down=this.widgets[d].id)}if(void 0!==c&&"pushpull"===this.options.mode)(s=this.getElementById(c)).setAttribute("tabindex","0"),s.focus();else if(this.widgets.length>0)if(!0!==n.Z.isEmptyObject(p)){var g=["right","left","down","up"];for(d=0;d<g.length;d++)if(g[d]&&p[g[d]]){c=p[g[d]],(s=this.getElementById(c)).focus();break}}else c=this.widgets[0].id,(s=this.getElementById(c)).focus()}}t.target.id===this.id+"_bridge"&&9===t.keyCode&&t.shiftKey&&(a.f.preventDefault(t),this.render.focus())}catch(t){r.Y.printStackTrace(t)}},d.prototype.refreshAdaptive=function(){try{this.redraw();for(var t=0;t<this.childControlList.length;t++)this.childControlList[t].refreshAdaptive&&this.childControlList[t].refreshAdaptive()}catch(t){r.Y.printStackTrace(t)}};var c=function(t,e,i){h.q.call(this,t,e,i)};s.q.extend(c.prototype,h.q.prototype),c.prototype.defaultOptions={pluginType:"uiplugin.widget",pluginName:"widget",title:"",titleClass:"",hasTitleBar:!0,src:"",x:0,y:0,unitWidth:1,unitHeight:1,scope:!1,params:void 0,fixed:!1,minimizeonfixed:!1,maximizeonfixed:!1,oriFixed:!1,minimized:!1,maximized:!1,resized:!1,maxConfig:{left:-1,right:-1,top:-1,bottom:-1},maximizeFormatter:null,buttonFormatter:null,msaName:""},c.prototype.initialize=function(t){this.src=this.options.src,this.scope=this.options.scope,this.params=this.options.params,this.minimized=this.options.minimized,this.maximized=this.options.maximized,this.x=this.options.x,this.y=this.options.y,this.unitWidth=this.options.unitWidth,this.unitHeight=this.options.unitHeight,this.fixed=this.options.fixed,this.oriFixed=this.options.oriFixed,this.oriX=this.x,this.oriY=this.y,this.oriUnitWidth=this.unitWidth,this.oriUnitHeight=this.unitHeight,this.dirty=!1,this.title=this.options.title,this.resized=this.options.resized,this.userIconClass=this.options.userIconClass,this.savedUnitHeight=null;var e=!0===this.options.accessibility?" w2widget_btnFix_accessibility":"",i=l.B.getMessage("WidgetContainer_fix")||"fix",o=l.B.getMessage("WidgetContainer_minimize")||"minimize",s=l.B.getMessage("WidgetContainer_maximize")||"maximize",r=l.B.getMessage("WidgetContainer_close")||"close";this.buttons=[{useAPI:"toggleFixed",id:"btnFix",className:"w2widget_btnFix"+e,ariaLabel:i,title:i,isCustom:!1},{useAPI:"toggleMinimized",id:"btnMinimize",className:"w2widget_btnMinimize",ariaLabel:o,title:o,isCustom:!1},{useAPI:"toggleMaximized",id:"btnMaximize",className:"w2widget_btnMaximize",ariaLabel:s,title:s,isCustom:!1},{useAPI:"closeWidget",id:"btnClose",className:"w2widget_btnClose",ariaLabel:r,title:r,isCustom:!1}],this.maxConfig=this.options.maxConfig,this.maximizeFormatter=this.options.maximizeFormatter,this.buttonFormatter=this.options.buttonFormatter,this.titleClass=this.options.titleClass,this.msaName=this.options.msaName,this.maximizeFormatter&&this.setMaximizeFormatter(this.maximizeFormatter),this.buttonFormatter&&this.setButtonFormatter(this.buttonFormatter),!0===this.options.accessibility&&(this.options.minimizeonfixed=!0)},c.prototype._renderButton=function(t,e){try{!0===this.options.accessibility&&("btnMinimize"==t.id||"btnMaximize"==t.id?t.ariaLabel=t.ariaLabel+","+l.B.getMessage("WidgetContainer_defaultSize_status"):"btnFix"==t.id&&(t.ariaLabel=t.ariaLabel+l.B.getMessage("WidgetContainer_fix_unset")));var i="",o="";this.options.useLocale&&t.isCustom&&(i=this.getLocaleValue(t.ariaLabelLocaleRef),
o=this.getLocaleValue(t.titleLocaleRef));var s=i||t.ariaLabel,a=o||t.title,n=""==s?"":" aria-label='"+this.options.title+s+"'",h=""==a?"":" title='"+a+"'";if(!0===this.options.accessibility){var d=WebSquare.util.getDataPrefix("refId");return"<button id='"+this.id+"_title_"+t.id+"' class='w2widget_accessibility_button "+t.className+"'"+d+"='"+this.id+"'"+n+h+"></button>"}var c=e?"w2widget_btnCustom_left "+t.className:t.className;return"<div id='"+this.id+"_title_"+t.id+"' class='"+c+"'"+h+"></div>"}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype._drawTitleHTML=function(){try{var t=[];t.push("<div id='"+this.id+"_title' class='w2widget_title "+this.options.titleClass+"'>"),t.push("<div id='"+this.id+"_title_icon' class='w2widget_icon'></div>");var e=this.userIconClass?" w2widget_titleText_unFixed ":"";if(!0===this.options.accessibility?t.push("<strong id='"+this.id+"_title_text' class='w2widget_title_text"+e+"'>"+this.options.title+"</strong>"):t.push("<span id='"+this.id+"_title_text' class='w2widget_title_text"+e+"'>"+this.options.title+"</span>"),this.userIconClass&&(t.push("<div id='"+this.id+"_title_usericon' class='widget_title_usericon "+this.userIconClass+"'>"),t.push("</div>")),!0===this.useCustomLeft)for(var i=0;i<this.buttons.length;i++){!0===(o=this.buttons[i]).isCustom&&"left"===o.isCustomDirection&&t.push(this._renderButton(o,!0))}t.push("<div id='"+this.id+"_title_buttons' class='w2widget_title_buttons w2widget_title_buttons_accessibility'>");for(i=0;i<this.buttons.length;i++){var o;!0===(o=this.buttons[i]).isCustom&&"left"===o.isCustomDirection||t.push(this._renderButton(o,!1))}return t.push("</div>"),t.push("</div>"),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=[],e=""===this.options.style?"":"style='"+this.options.style+"'";if(this.isFixed())var i="w2widget w2widget_fixed";else i="w2widget";this.options.className&&(i+=" "+this.options.className);var o=!0===this.options.accessibility?" tabindex='0'":"";return t.push("<div id='"+this.id+"' "+e+o+" class='"+i+"' aria-label='"+this.options.title+"' role='dialog'>"),this.options.hasTitleBar&&t.push(this._drawTitleHTML()),t.push("<div id='"+this.id+"_btnResize' class='w2widget_btnResize'></div>"),t.push("</div>"),t.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){var t=this.parentControl.options&&this.parentControl.options.async,e=new WebSquare.uiplugin.wframe(this.id+"_content",{className:this.options.hasTitleBar?"w2widget_content":"w2widget_content_notitlebar",src:this.options.src,scope:this.options.scope,mode:t?"async":"sync",processMsgFrame:this.options.processMsgFrame,isWidget:!0,msaName:this.options.msaName});try{var i=this.options.org_id,o=this.parentControl.id,s=this.parentControl.uuid;if(e.options.scope&&e.options.scopeFunction)for(var l=e.options.scopeVariable.split(","),h=0;h<l.length;h++){var d=l[h];e.scopeVariable[d]&&e.scopeVariable[d][e.options.scopeFunction]&&(e.scopeVariable[d][e.options.scopeFunction].widget={},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetId=function(){return i},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetContainerId=function(){return o},e.scopeVariable[d][e.options.scopeFunction].widget.getWidgetContainer=function(){return WebSquare.idCache[s]})}}catch(t){r.Y.printStackTrace(t,null,this)}e.appendTo(this,this.parentFrame),e.makeFrame(!0),e.activeStatus="active",a.f.fireEvent(this.parentControl,"onwidgetload",this.options.id,this.options.org_id),this.resized=this.parentControl.widgetResize,this.isResizable()&&!1!==this.parentControl.widgetResize||this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleTitleClick)),this.event.addListener(this.render,"ontouchend",this.event.bindAsEventListener(this,this.handleTitleClick)),
this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),!1===t&&n.Z.isIEAllVersion("6 7")&&this.parentControl.redraw()},c.prototype.handleTitleClick=function(t){if(this.parentControl&&void 0!==WebSquare.idCache[this.parentControl.uuid]){for(var e=this.event.getTargetIterator(t,this.render);e.next();)for(var i=0;i<this.buttons.length;i++){var o=this.buttons[i];if(e.match(null,this.id+"_title_"+o.id)||e.match(null,o.id)){o.isCustom&&a.f.fireEvent(this.parentControl,"onclickcustombtn",this.id,o.id),o.useAPI&&"function"==typeof this[o.useAPI]&&this[o.useAPI](),e.stop();break}}e=null}},c.prototype.handleDblClickEvent=function(t){for(var e=this.parentControl.options.preventMaximizeByTitle,i=this.event.getTargetIterator(t,this.render);i.next();)i.match("w2widget_title")&&!e&&this.toggleMaximized();i=null},c.prototype.isFixed=function(){return this.fixed},c.prototype.toggleFixed=function(){this.isFixed()?this.unsetFixed():this.setFixed()},c.prototype.setFixed=function(){if(this.isFixed())return!1;if(this.fixed=!0,this.addClass("w2widget_fixed"),this.options.accessibility){var t=document.getElementById(this.id+"_title_btnFix"),e=(this.options.title+l.B.getMessage("WidgetContainer_fix")||"fix")+l.B.getMessage("WidgetContainer_fix_set");t.setAttribute("aria-label",e)}return this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.f.fireEvent(this.parentControl,"onwidgetfix",this.id),!0},c.prototype.unsetFixed=function(){if(this.isFixed()&&!this.isMaximized()){if(this.fixed=!1,this.removeClass("w2widget_fixed"),this.options.accessibility){var t=document.getElementById(this.id+"_title_btnFix"),e=(this.options.title+l.B.getMessage("WidgetContainer_fix")||"fix")+l.B.getMessage("WidgetContainer_fix_unset");t.setAttribute("aria-label",e)}return this.isResizable()&&this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),!0}return!1},c.prototype.isMaximized=function(){return this.maximized},c.prototype._setStatusAriaLabel=function(){if(this.options.accessibility){var t=this.options.title,e=document.getElementById(this.options.id+"_title_btnMaximize"),i=document.getElementById(this.options.id+"_title_btnMinimize"),o=l.B.getMessage("WidgetContainer_defaultSize_status");this.minimized?o=l.B.getMessage("WidgetContainer_minimizeSize_status"):this.maximized&&(o=l.B.getMessage("WidgetContainer_maximizeSize_status"));var s=t+l.B.getMessage("WidgetContainer_maximize")+","+o;e.setAttribute("aria-label",s);var r=t+l.B.getMessage("WidgetContainer_minimize")+","+o;i.setAttribute("aria-label",r)}},c.prototype.setMaximized=function(){return!(this.isMaximized()||this.isFixed()&&!this.options.maximizeonfixed)&&(this.maximized=!0,this.unsetMinimized(),this.addClass("w2widget_maximized"),this.isFixed()?this.oriFixed=!0:this.setFixed(),a.f.fireEvent(this.parentControl,"onwidgetmaximize",this.id),this._setStatusAriaLabel(),this.parentControl.redraw(),!0)},c.prototype.unsetMaximized=function(){return!!this.isMaximized()&&(this.maximized=!1,this.removeClass("w2widget_maximized"),this.oriFixed?this.oriFixed=!1:this.unsetFixed(),a.f.fireEvent(this.parentControl,"onwidgetrestore",this.id),this._setStatusAriaLabel(),this.parentControl.redraw(),!0)},c.prototype.toggleMaximized=function(){return this.isMaximized()?this.unsetMaximized():this.setMaximized()},c.prototype.isMinimized=function(){return this.minimized},c.prototype._calcMinimizedUnitHeight=function(){for(var t=this.getElementById(this.id+"_title"),e=parseInt(WebSquare.style.getStyle(t,"height"),10),i=0,o=this.parentControl.unitHeightPixel,s=this.parentControl._getMarginedHeight;s.call(this.parentControl,i*o)<e;)i+=1;return i},c.prototype.setMinimized=function(){if(this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;this.savedUnitHeight=this.unitHeight;var t=this.parentControl.resizeWidget(this.id,this.width,this._calcMinimizedUnitHeight(),{
force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t?(this.minimized=!0,this.unsetMaximized(),this.addClass("w2widget_minimized"),this.addClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.f.fireEvent(this.parentControl,"onwidgetminimize",this.id),this._setStatusAriaLabel()):this.savedUnitHeight=null,t},c.prototype.unsetMinimized=function(){if(!this.isMinimized()||this.isFixed()&&!this.options.minimizeonfixed)return!1;var t=this.parentControl.resizeWidget(this.id,this.width,this.savedUnitHeight,{force:this.parentControl.oneColumn&&this.parentControl.options.forceMinMax||this.options.minimizeonfixed});return t&&(this.savedUnitHeight=null,this.minimized=!1,this.removeClass("w2widget_minimized"),this.removeClass(document.getElementById(this.id+"_btnResize"),"w2widget_btnResize_halt"),a.f.fireEvent(this.parentControl,"onwidgetrestore",this.id),this._setStatusAriaLabel()),t},c.prototype.toggleMinimized=function(){var t=!1;return(t=this.isMinimized()?this.unsetMinimized():this.setMinimized())&&this.parentControl.redraw(),t},c.prototype.isMovable=function(){return!this.isFixed()},c.prototype.isResizable=function(){return!this.isFixed()&&!this.isMinimized()&&(!this.parentControl||!1!==this.parentControl.widgetResize)&&this.resized},c.prototype.setTitle=function(t){var e=this.getElementById(this.id+"_title_text");return!!e&&(e["textContent"in e?"textContent":"innerText"]=t+"",this.title=t+"",!0)},c.prototype.getTitle=function(){var t=this.getElementById(this.id+"_title_text");return!!t&&t["textContent"in t?"textContent":"innerText"]},c.prototype.setParams=function(t){var e=this.getChild(this.id+"_content");return this.params=t,"object"!==(0,o.A)(e.paramObj)&&(e.paramObj={}),e.paramObj.params=this.params,!0},c.prototype.getParams=function(){return this.params},c.prototype.closeWidget=function(){var t=this.parentControl,e=this.id;if(!1===a.f.fireEvent(t,"onbeforewidgetclose",e))return!1;var i=this.parentControl._removeWidgets(this);return a.f.fireEvent(t,"onafterwidgetclose",e),i},c.prototype.getWidgetInfo=function(){var t=this.parentControl.id,e={};return e.id=this.id.slice(t.length+1),e.src=this.src,e.scope=this.options.scope,e.minimized=this.minimized,e.maximized=this.maximized,e.x=this.x,e.y=this.y,e.unitWidth=this.unitWidth,e.unitHeight=this.unitHeight,e.fixed=this.fixed,e.oriFixed=this.oriFixed,e.title=this.title,e.className=this.render.className.replace("w2widget ",""),e.maximizeFormatter=this.maximizeFormatter,e.buttonFormatter=this.buttonFormatter,e.params=this.params,e.titleClass=this.titleClass,e.onWidgetLoad=this.onWidgetLoad,e.msaName=this.msaName,e},c.prototype.setSrc=function(t){return!!this.getChild(this.id+"_content").setSrc(t)&&(this.src=t,!0)},c.prototype.getSrc=function(){return this.getChild(this.id+"_content").getSrc()},c.prototype.getObj=function(t){return this.getChild(this.id+"_content").getObj(t)},c.prototype.getObjList=function(){return this.getChild(this.id+"_content").getObjList()},c.prototype.refresh=function(){if(!this.getChild(this.id+"_content").setSrc(this.src))return!1},c.prototype.getRect=function(){return{x:this.x,y:this.y,unitWidth:this.unitWidth,unitHeight:this.unitHeight}},c.prototype._getOriRect=function(){return{x:this.oriX,y:this.oriY,unitWidth:this.oriUnitWidth,unitHeight:this.oriUnitHeight}},c.prototype.getRectByPx=function(){return{x:this.render.offsetLeft,y:this.render.offsetTop,width:this.render.clientWidth,height:this.render.clientHeight}},c.prototype.setButtonFormatter=function(t){var e=n.Z.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;for(var i=this.buttons,o=e(this.id),s=0;s<o.length;s++){var r=o[s];if(r.useDefault)switch(r.useDefault){case"fix":o[s]=i[0];break;case"minimize":o[s]=i[1];break;case"maximize":o[s]=i[2];break;case"close":o[s]=i[3];break;default:return!1}else!0===r.isCustom&&"left"===r.isCustomDirection&&(this.useCustomLeft=!0)}return this.buttons=o,!0},
c.prototype.setMaximizeFormatter=function(t){var e=n.Z.getGlobalFunction(t,this.scope_id);if("function"!=typeof e)return!1;var i=e(this.id);if(!i)return!1;for(var o=["left","right","top","bottom"],s=0;s<o.length;s++){var r=o[s];i[r]!==parseInt(i[r],10)&&(i[r]=0)}return this.maxConfig=i,!0},c.prototype.getMaximizeConfig=function(){return this.maxConfig},c.prototype.showTitle=function(t){try{var e=document.getElementById(this.id+"_title"),i=document.getElementById(this.id+"_content");if(!e){if(!t)return;var o=document.getElementById(this.id+"_btnResize"),s=document.createElement("div"),a=this._drawTitleHTML();s.innerHTML=a;var n=s.firstChild;this.render.insertBefore(n,o),this._setTitleEllipsis(),e=document.getElementById(this.id+"_title")}if(t?(e.style.display="block",i.style.top=e.clientHeight+"px",this.addClass(i,"w2widget_content"),this.removeClass(i,"w2widget_content_notitlebar"),this.options.hasTitleBar=!0):(e.style.display="none",i.style.top="0px",this.addClass(i,"w2widget_content_notitlebar"),this.removeClass(i,"w2widget_content"),this.options.hasTitleBar=!1),!0===this.options.accessibility){var l=document.getElementById(this.id+"_title_buttons");l&&this.render.appendChild(l)}}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.setResizable=function(t){if("boolean"==typeof t){var e=document.getElementById(this.id+"_btnResize"),i=t&&0!=this.parentControl.widgetResize;i?this.removeClass(e,"w2widget_btnResize_halt"):this.addClass(e,"w2widget_btnResize_halt"),this.resized=i}},c.prototype._setTitleEllipsis=function(){try{var t=document.getElementById(this.id+"_title");if(!t)return;var e=document.getElementById(this.id+"_title_icon"),i=document.getElementById(this.id+"_title_text"),o=document.getElementById(this.id+"_title_buttons"),s=document.getElementById(this.id+"_title_usericon"),a=s?s.offsetWidth:0;if(this.userIconClass||!0===this.useCustomLeft){var n=parseInt(WebSquare.style.getComputedStyle(t,"paddingLeft"),10),l=parseInt(WebSquare.style.getComputedStyle(t,"paddingRight"),10),h=parseInt(WebSquare.style.getComputedStyle(o,"marginLeft"),10),d=t.offsetWidth-o.offsetWidth-n-l-e.offsetWidth-h-a;d<i.offsetWidth?i.style.width=d+"px":(i.style.width="",d<i.offsetWidth&&(i.style.width=d+"px"))}else i.style.width=t.clientWidth-15-e.clientWidth-o.clientWidth+"px"}catch(t){r.Y.printStackTrace(t,null,this)}},c.prototype.getWindow=function(){try{var t,e=this.getChild(this.id+"_content");return e&&(t=e.getWindow()),t}catch(t){r.Y.printStackTrace(t,null,this)}}},40:function(t,e,i){"use strict";i.r(e),i.d(e,{wq_window:function(){return u}});var o=i(2284),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(2256),d=i(2406),c=i(1304),u=function(t,e,i){d.q.call(this,t,e,i)};s.q.extend(u.prototype,d.q.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload","onresize"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!0,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",windowMaximizeAll:!1,minVisibleWindowPixel:20,frameModal:"",processMsgFrame:!1,msaName:"",fixPosition:!1,accessibility:!1,_targetId:"",scopeInherit:"",resizeEvent:!1,adaptiveFrame:!1},u.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,
top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"true"===r.I.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=l.Z.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==r.I.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0),!0===this.options.fixPosition&&(this.windowInfo.drag=!1)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",s=""==this.options.style?"":"style='"+this.options.style+"'",r="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",n="overflow"===this.options.windowMoveType?" w2window_window_move_type":"";this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+s+" class='w2window "+r+" "+this.options.className+n+"' tabindex='0' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>")),l.Z.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>");var h="w2window_header",d="w2window_body";1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",d+=" w2window_body_extend");var c=l.Z.getDataPrefix("btn_index");if(""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<span id='"+this.id+"_header_icon' class='w2window_header_icon'></span>"):e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),
!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<h2 id='"+this.id+"_header_title' class='w2window_header_title_h2'>"+this.options.windowTitle+"</h2>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var u=0;u<this.buttonInfo.buttons.length;u++){var p=this.buttonInfo.buttons[u].title||"";if(this.buttonInfo.useButtonFormatter){g=this.buttonInfo.buttons[u].className||"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_custom_button "+g+"' "+c+"='"+u+"' title='"+p+"' ></div>")}else{var g=this.buttonInfo.buttons[u].className?" "+this.buttonInfo.buttons[u].className:"",m=this.buttonInfo.buttons[u].value?"<span id='"+this.id+"_header_button_"+u+"_value' class='w2window_header_button_value' title='"+p+"' "+c+"='"+u+"' > "+this.buttonInfo.buttons[u].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_button w2window_header_button_"+u+"' "+c+"='"+u+"' >"),e.push("<div id='"+this.id+"_header_button_"+u+"_content' class='w2window_header_button_content w2window_header_button_content_"+u+g+"' "+c+"='"+u+"' >"),e.push(m),e.push("</div>"),e.push("</div>")}}e.push("</div>")}if(!0!==this.options.accessibility){var f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>")}var b=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?l.Z.isMobile()?e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+b+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+b+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):!0!==this.options.accessibility&&e.push("<div id='"+this.id+"_close' class='w2window_close"+b+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");if(this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+d+"'>"):e.push("<div id='"+this.id+"_body' class='"+d+" w2window_no_status'>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),!0===this.options.accessibility){var y=l.Z.getDataPrefix("refId");f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),
e.push("<button type='button' id='"+this.id+"_minimize' class='w2window_minimize' aria-label='"+WebSquare.language.getMessage("Window_minimize")+"'"+y+"="+this.id+"></button>"),e.push("<button type='button' id='"+this.id+"_restore' class='w2window_restore' aria-label='"+WebSquare.language.getMessage("Window_restore")+"'"+y+"="+this.id+" ></button>"),e.push("<button type='button' id='"+this.id+"_close' class='w2window_close"+b+"' aria-label='"+WebSquare.language.getMessage("Window_close")+"'"+y+"="+this.id+"></div>")}return this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{!0===this.options.accessibility&&(this.render.setAttribute("role","dialog"),this.render.setAttribute("aria-labelledby",this.id+"_header_title'"),this.options.parent||this.render.setAttribute("aria-modal","true")),this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),this.dom.header&&this.dom.header.setAttribute("data-title",this.options.windowTitle),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),l.Z.isTouchDevice()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))):this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),1==this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.drawFrame(this.options.src);l.Z.getDataPrefix("btn_index");if(this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({dataBtn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"float","right"),WebSquare.style.setStyle(s,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"height",s.offsetHeight-5+"px"),WebSquare.style.setStyle(s,"padding-top","5px")}
}this.options.useInitialSizePosition&&this.restore(!0),"overflow"===this.options.windowMoveType&&this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"tabControl"==_this.parentControl.parentControl.options.pluginName||"tabControl"==this.parentControl.parentControl.options.inheritFrom)&&(this._windowMoveType="overflow")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory,msaName:this.options.msaName})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=c.o.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName,scopeInherit:this.options.scopeInherit,resizeEvent:this.options.resizeEvent,adaptiveFrame:this.options.adaptiveFrame},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=c.o.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}else if("pageFrame"==this.options.frameMode){i=this.org_id||this.id;this.frame=c.o.create(i+"_pageFrame",{className:"w2window_pageFrame",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"pageFrame",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;o=c.o.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var l=this.uuid;"iframe"==this.options.frameMode?this.frame.bind("onload",(function(){var t=WebSquare.idCache[l];if(WebSquare.event.fireEvent(t,"ondrawcomplete"),1!=t.options.noAttatchedEvent)try{var e=t.frame,i=e.getWindow();if(i){var o={_wq_type:"onwindowloaded",origin:location.origin,uuid:t.uuid},s=r.I._getOrigin(e.getSrc());s&&i.postMessage(o,s)}}catch(t){a.Y.printStackTrace(t,null,this)}})):(this.frame.bind("onload",(function(){n.f.fireEvent(WebSquare.idCache[l],"ondrawcomplete")})),this.frame.options.resizeEvent&&this.frame.bind("onresize",(function(){n.f.fireEvent(WebSquare.idCache[l],"onresize")})));var d="on"+this.frame.options.pluginName+"load";this.frame.bind(d,(function(){n.f.fireEvent(WebSquare.idCache[l],"onwindowload")}));var u="on"+this.frame.options.pluginName+"unload";this.frame.bind(u,(function(){null!=WebSquare.idCache[l]&&n.f.fireEvent(WebSquare.idCache[l],"onwindowunload")})),"iframe"==this.options.frameMode?this._activateFrame():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){h.v.printLog("error : window.drawFrame["+this.id+"]")}},u.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.addControl(this.frame),this.frame.activate()}catch(t){h.v.printLog("error : window.drawFrame["+this.id+"]")}},
u.prototype.resizeForIE6=function(t,e,i){try{if(l.Z.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){a.Y.printStackTrace(t,null,this)}if(t&&"object"===(0,o.A)(t)||(t={}),this.options.closeAction){var e=l.Z.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}if(!0===t.sync?this._close(!0===t.skipRemove):l.Z.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),1==this.options.accessibility&&""!=this.options._targetId){var i=this.options._targetId;l.Z.requestAnimationFrame((function(){var t=document.getElementById(i);t&&t.focus()}))}return!0}catch(t){a.Y.printStackTrace(t,null,this),this._closed=!1}},u.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};n.f.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},u.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||n.f.fireEvent(this,"onminimize")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0,this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="none",this.getElementById(this.id+"_resize2").style.display="none",this.getElementById(this.id+"_resize3").style.display="none",
this.getElementById(this.id+"_resize4").style.display="none",this.getElementById(this.id+"_resize5").style.display="none",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="none",this.getElementById(this.id+"_resize7").style.display="none",this.getElementById(this.id+"_resize8").style.display="none"))}else{this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="",this.getElementById(this.id+"_resize2").style.display="",this.getElementById(this.id+"_resize3").style.display="",this.getElementById(this.id+"_resize4").style.display="",this.getElementById(this.id+"_resize5").style.display="",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="",this.getElementById(this.id+"_resize7").style.display="",this.getElementById(this.id+"_resize8").style.display=""));var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,s=this.render.clientHeight,r=this.getMaxSize(),l=r.width,h=r.height,d=parseInt(this.windowInfo.width,10)-o,c=parseInt(this.windowInfo.height,10)-s,u=e,p=i,g=0,m=0;if(this.parentControl&&(g=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+d<0&&(u=0),e+d>l+m?u=o<=l?l-(o+d)+m:0:m>u&&(u=m),i+c<0&&(p=0),i+c>h){if(s<=h){if((p=h-(s+c))<g)return p=g,this.setStyle("height",h-g+"px"),this.setPosition(u,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(p=0+g,s>h)return h-=g,this.setStyle("height",h+"px"),this.setPosition(u,p),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else g>p&&(p=g);this.setPosition(u,p),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}n.f.fireEvent(this,"onminimize")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.popup=function(){try{n.f.fireEvent(this,"onpopup")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";n.f.fireEvent(this,"onmaximize")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",!0!==this.options.fixPosition&&(this.windowInfo.drag=!0),this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||n.f.fireEvent(this,"onrestore")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){a.Y.printStackTrace(t,null,this)}},
u.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));else"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.setSrc(t,e)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.movable=function(t){try{t=l.Z.getBoolean(t),this.windowInfo.drag=t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.showModal=function(t){try{if(n.f.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",l.Z.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",l.Z.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!l.Z.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.hideModal=function(){try{n.f.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!l.Z.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setFocus=function(){try{l.Z.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.focus()}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._focus=function(){try{l.Z.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(l.Z.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(l.Z.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(l.Z.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},u.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(l.Z.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"padding-right"),10)||0),
i=i-(parseInt(l.Z.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(l.Z.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},u.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&n.f.stopPropagation(t)),e.match("w2window_minimize")&&(n.f.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&n.f.stopPropagation(t),n.f.fireEvent(this,"onminimizebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){var i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};n.f.fireEvent(this.parentControl.parentControl,"onminimizebtnclick",i)}if(e.match("w2window_restore")&&(this.toggleResize(),this.options.frameModal&&n.f.stopPropagation(t),n.f.fireEvent(this,"onrestorebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};n.f.fireEvent(this.parentControl.parentControl,"onrestorebtnclick",i)}e.match("w2window_popup")&&(n.f.stopEvent(t),this.popup())}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleFrameMouseDownEvent=function(t){try{n.f.fireEvent(this,"onwindowmousedown",t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleDblclickEvent=function(t){try{if(!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{for(var e=l.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.addClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.addClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.addClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.addClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.addClass(o,"w2window_header_button_content_on")}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{n.f.stopEvent(t);for(var e=l.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.removeClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.removeClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.removeClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.removeClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.removeClass(o,"w2window_header_button_content_on")}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=l.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&n.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var s=n.f.getTarget(t)
;if(!s||s.id==this.id+"_minimize"||s.id==this.id+"_restore"||s.id==this.id+"_close"||s.id==this.id+"_popup")return;var r=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",windowDragMove:this.options.windowDragMove,makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(r.render),i=WebSquare.style.getAbsoluteTop(r.render),o=r.getElementSize(r.render),s=o.width,a=o.height;return s=s-(parseInt(l.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(s,a),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===r.options.windowDragMove?(r.showModal.call(r,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(r.showModal.call(r),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,s){r.render.offsetLeft;var n,h,d=r.render.offsetTop,c=(r.render.clientWidth,r.render.clientHeight,(_=r.getMaxSize()).width),u=_.height,p=0,g=0;if(r.parentControl&&(p=document.documentElement.scrollTop||document.body.scrollTop,g=document.documentElement.scrollLeft||document.body.scrollLeft,n=WebSquare.style.getAbsoluteLeft(r.parentControl.render),h=WebSquare.style.getAbsoluteTop(r.parentControl.render),r.frame&&("wframe"!==r.frame.getPluginName()&&"pageFrame"!==r.frame.getPluginName()||(n-=g,h-=p))),!0!==r.options.windowDragMove){if(1==r.options.displayParentWindowScroll&&!r.options.frameModal)try{var m=l.Z.getStyleProperty(document.documentElement,"overflow");if(("auto"==m||"scroll"==m)&&!r.modal)return}catch(s){a.Y.printStackTrace(s,null,this)}r.frame&&"iframe"===r.frame.getPluginName()?(s.clientX<n+40||s.clientX>c+n-40||d+o+1-p<0||s.clientY+20+p>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s):"overflow"===r.options.windowMoveType?(s.clientX<n+20&&i<0||s.clientX>c+n-20&&i>0||s.clientY+1<h||s.clientY>h+u-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(s):(s.clientX<n+20||s.clientX>c+n-20||s.clientY+1<h||s.clientY>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s)}else{var f=0,b=0;try{f=WebSquare.style.getAbsoluteLeft(r.render.parentNode),b=WebSquare.style.getAbsoluteTop(r.render.parentNode)}catch(s){a.Y.printStackTrace(s,null,this)}var y=Math.max(t+i-f,0),v=Math.max(e+o-b,0),w=0,S=0;if(!r.parentControl.parentControl||"windowContainer"!=r.parentControl.parentControl.options.pluginName&&"tabControl"!=r.parentControl.parentControl.options.pluginName&&"tabControl"!=r.parentControl.parentControl.options.inheritFrom){var _=r.getMaxSize(),C=(p=r.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,r.render.offsetWidth),x=r.render.offsetHeight;"overflow"===r.options.windowMoveType&&(C=r.options.minVisibleWindowPixel,x=r.options.minVisibleWindowPixel);var I=_.width-C,T=_.height-x-p;y=Math.min(y,I),v=Math.min(v,T)}else w=r.parentControl?r.parentControl.render.scrollLeft:0,S=r.parentControl?r.parentControl.render.scrollTop:0;r.setPosition(y+w,v+S)}},handleFinish:function(t,e,i,o){if(r.hideModal.call(r),!0!==r.options.windowDragMove){var s=r.render.offsetLeft,n=r.render.offsetTop,h=r.render.clientWidth,d=r.render.clientHeight,c=r.getMaxSize(),u=c.width,p=c.height,g=s+i,m=n+o,f=0,b=0,y=0,v=0,w=0,S=0;if(r.parentControl&&(f=document.documentElement.scrollTop||document.body.scrollTop,b=document.documentElement.scrollLeft||document.body.scrollLeft,r.options.frameModal&&(w=parseInt(r.parentControl.getStyle("border-top-width"))||0,S=parseInt(r.parentControl.getStyle("border-left-width"))||0,u=r.parentControl.render.offsetWidth-S,p=r.parentControl.render.offsetHeight-w,h=r.render.offsetWidth,d=r.render.offsetHeight,
r.render.offsetParent!==r.parentControl.render&&(n-=y=r.parentControl.render.offsetTop,s-=v=r.parentControl.render.offsetLeft))),1==r.options.displayParentWindowScroll&&!r.options.frameModal||"overflow"===r.options.windowMoveType)try{var _=l.Z.getStyleProperty(document.documentElement,"overflow");"auto"!=_&&"scroll"!=_&&"overflow"!==r.options.windowMoveType||(u=Math.max(u,h,s+h+i),p=Math.max(p,d,n+d+o))}catch(t){a.Y.printStackTrace(t,null,this)}"overflow"!==r.options.windowMoveType&&s+i<0&&(g=v+S),s+h+i>u+b?g=h<=u?u-h+b+v:v:"overflow"!==r.options.windowMoveType&&b>g&&(g=b),n+o<0&&(m=y+w),n+d+o>p?d<=p?(m=p-d+y)<f&&(m=f,r.render.style.height=p-f+"px"):(m=0+f,d>p&&(p-=f,r.render.style.height=p+"px")):f>m&&(m=f),r.setPosition(g,m)}}})}if(i.match("w2window_header_button")){n.f.stopEvent(t);var h=i.getElement().getAttribute(e);if(!(u=this.buttons[Number(h)]).disable)try{var d=this.buttonInfo.buttons[h].clickAction;if("function"===(0,o.A)(d))d.apply(this,this);else{var c=l.Z.getGlobalFunction(d,this.scope_id);"function"==typeof c&&c(this)}}catch(t){a.Y.printStackTrace(t,null,this)}return}if(i.match("w2window_header_custom_button")){n.f.stopEvent(t);h=i.getElement().getAttribute(e);var u=this.buttons[parseInt(h,10)],p={uniqueId:this.id,btnId:this.id+"_header_button_"+u[e],btnIdx:u[e],disable:u.disable,hidden:u.hidden};return void(u.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&n.f.fireEvent(this.parentControl.parentControl,"onclickcustombtn",p))}var g=i.match("w2window_resize"),m=i.match("w2window_resize_bottomLeft");if((g||m)&&(n.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){r=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:g?"resize":"resize_bottomLeft",minWidth:r.windowInfo.minWidth,minHeight:r.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(r.render),i=WebSquare.style.getAbsoluteTop(r.render),o=r.getElementSize(r.render),s=o.width,a=o.height;return s=s-(parseInt(l.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,a),t.setPosition(e,i),t},handleStart:function(){r.showModal.call(r)},handleFinish:function(t,e,i,o,s){r.hideModal.call(r);var a="resize"===this.mode?1:-1,n=parseInt(r.getStyle("width"),10),l=parseInt(r.getStyle("height"),10),h=r.render.offsetTop,d=r.render.offsetLeft,c=n+i*a,u=l+o;c<parseInt(r.windowInfo.minWidth,10)&&(c=parseInt(r.windowInfo.minWidth,10),1===a?i+=n-c:i=n-c),u<parseInt(r.windowInfo.minHeight,10)&&(u=parseInt(r.windowInfo.minHeight,10));var p,g=r.getMaxSize(),m="overflow"===r._windowMoveType?r.parentControl.render.scrollLeft:0,f="overflow"===r._windowMoveType?r.parentControl.render.scrollTop:0,b=g.height-h;if(p=1===a?g.width-d:Math.min(d+n,g.width),b+=f,(p+=m)<r.render.clientWidth+i*a&&(c=p),b<r.render.clientHeight+o&&(u=b),r.setSize(c,u),-1===a){var y=Math.max(d+i,0);r.setPosition(y,null)}}})}var f=i.match("w2window_resize_right"),b=i.match("w2window_resize_left");if((f||b)&&(n.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){r=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:f?"resize_right":"resize_left",minWidth:r.windowInfo.minWidth,minHeight:r.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(r.render),i=WebSquare.style.getAbsoluteTop(r.render),o=r.getElementSize(r.render),s=o.width,a=o.height
;return s=s-(parseInt(l.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[r._multiViewUUID]||r.showModal.call(r)},handleFinish:function(t,e,i,o,s){var a="resize_right"===this.mode?1:-1;r.hideModal.call(r);var n=parseInt(r.getStyle("width"),10),l=parseInt(r.getStyle("height"),10),h=n+i*a;h<parseInt(r.windowInfo.minWidth,10)&&(h=parseInt(r.windowInfo.minWidth,10),1===a?i+=n-h:i=n-h);var d="overflow"===r._windowMoveType?r.parentControl.render.scrollLeft:0,c=("overflow"===r._windowMoveType&&r.parentControl.render.scrollTop,r.getMaxSize().width);if("resize_right"===this.mode&&(c-=r.render.offsetLeft),(c+=d)<r.render.clientWidth+i*a&&(h=c),WebSquare.idCache[r._multiViewUUID]&&1!==r._direction){var u=WebSquare.idCache[r._multiViewUUID],p=parseInt(u.windowInfo.minWidth,10);h>c-p&&(h=c-p),u.setSize(parseInt(u.getStyle("width"),10)-h+n,null),u.setPosition(u.getPosition("left")+h-n,null)}if(r.setSize(h,l),r.frame&&r.frame._processMsgModal&&"block"===r.frame._processMsgModal.render.style.display&&r.frame._processMsgModal.setSize(h,l),-1===a){var g=r.getPosition("left")+i;g+h>c&&(g=c-h),g=Math.max(g,0),r.setPosition(g,null)}}})}var y=i.match("w2window_resize_bottom"),v=i.match("w2window_resize_up");if((y||v&&this.options.dragResizableHeader)&&(n.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){r=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:y?"resize_bottom":"resize_up",minWidth:r.windowInfo.minWidth,minHeight:r.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(r.render),i=WebSquare.style.getAbsoluteTop(r.render),o=r.getElementSize(r.render),s=o.width,a=o.height;return s=s-(parseInt(l.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,a),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[r._multiViewUUID]||r.showModal.call(r)},handleFinish:function(t,e,i,o,s){var a="resize_bottom"===this.mode?1:-1;r.hideModal.call(r);var n=parseInt(r.getStyle("width"),10),l=parseInt(r.getStyle("height"),10),h=parseInt(r.getStyle("left"),10),d=parseInt(r.getStyle("top"),10),c=l+o*a;c<parseInt(r.windowInfo.minHeight,10)&&(c=parseInt(r.windowInfo.minHeight,10));"overflow"===r._windowMoveType&&r.parentControl.render.scrollLeft;var u="overflow"===r._windowMoveType?r.parentControl.render.scrollTop:0,p=r.getMaxSize(),g=p.height;a||(g=d+l),1==a?g-=r.render.offsetTop:g=Math.min(d+l,p.height),g+=u;var m=r.render.clientHeight+o*a;if(g<c&&(c=g,1===a&&(o+=m-c)),WebSquare.idCache[r._multiViewUUID]&&1===r._direction){var f=WebSquare.idCache[r._multiViewUUID],b=parseInt(f.windowInfo.minHeight,10);c>g-b&&(c=g-b),f.setSize(null,parseInt(f.getStyle("height"),10)-c+l),f.setPosition(null,f.getPosition("top")+c-l)}else if("resize_up"===this.mode){var y=d-o*a;y<0&&(y=0),y+c>g&&(y=g-c),r.setPosition(h,y)}r.setSize(n,c)}})}if(this.options.dragResizableHeader){var w=i.match("w2window_resize_upRight"),S=i.match("w2window_resize_upLeft");if((w||S)&&(n.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){r=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:w?"resize_upRight":"resize_upLeft",minWidth:r.windowInfo.minWidth,minHeight:r.windowInfo.minHeight,makeGhostLayer:function(t){
var e=WebSquare.style.getAbsoluteLeft(r.render),i=WebSquare.style.getAbsoluteTop(r.render),o=r.getElementSize(r.render),s=o.width,a=o.height;return s=s-(parseInt(l.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-right-width"),10)||0),a=a-(parseInt(l.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(l.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,a),t.setPosition(e,i),t},handleStart:function(){r.showModal.call(r)},handleFinish:function(t,e,i,o,s){r.hideModal.call(r);var a="resize_upRight"===this.mode?1:-1,n=parseInt(r.getStyle("width"),10),l=parseInt(r.getStyle("height"),10),h=r.render.offsetTop,d=r.render.offsetLeft,c="overflow"===r._windowMoveType?r.parentControl.render.scrollLeft:0,u="overflow"===r._windowMoveType?r.parentControl.render.scrollTop:0,p=n+i*a,g=l-o;p<parseInt(r.windowInfo.minWidth,10)&&(p=parseInt(r.windowInfo.minWidth,10),1===a?i+=n-p:i=n-p),g<parseInt(r.windowInfo.minHeight,10)&&(o=l-(g=parseInt(r.windowInfo.minHeight,10)));var m,f,b=r.getMaxSize();1===a?(m=b.width-d,f=h+l):(m=Math.min(d+n,b.width),f=Math.min(h+l,b.height));var y=l-o;(m+=c)<n+i*a&&(p=m),(f+=u)<y&&(g=f,1===a&&(o+=y-g)),r.setSize(p,g);var v=h+o,w=d;-1===a&&(v=Math.max(v,0),w=Math.max(d+i,0)),v+g>=f&&(v=f-g),r.setPosition(w,v)}})}}}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseupEvent=function(t){try{n.f.stopEvent(t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleFrameKeyupEvent=function(t){try{n.f.fireEvent(this,"onwindowkeyup",t)}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(l.Z.clearInterval(this.id+"_checkLoadEvent"),l.Z.fullViewed&&l.Z.zoomed(t.document.body,"1"))}}catch(t){}},u.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&n.f.preventDefault(t);e=null}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(1==this.options.accessibility&&""!=this.options._targetId){if(27==e)this.close({isCloseButtonClick:!0});else if(t.shiftKey&&9==e){if((o=l.Z._getTabbableComp(this.render)).length>=1&&t.target==o[0])if(s=document.getElementById(this.id+"_close"))return s.focus(),void n.f.preventDefault(t)}for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_close"))if(13==e||32==e)this.handleClickEvent(t);else if(t.shiftKey||9!=e){if(t.shiftKey&&9==e){if(3==(o=l.Z._getTabbableComp(this.render)).length)return o[2].focus(),void n.f.preventDefault(t)}}else{var o,s;if((o=l.Z._getTabbableComp(this.render)).length>=1)o[0].focus(),n.f.preventDefault(t);else if(s=document.getElementById(this.id+"_close"))return void s.focus()}return void(i=null)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=l.Z.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var s=o.contentDom;i=l.Z.getBoolean(i);switch(t){case"hidden":o.visisble=i,s.parentNode.style.display=i?"none":"inline-block";break
;case"disabled":o.disable=i,i?this.addClass(s,"w2window_header_button_disabled"):this.removeClass(s,"w2window_header_button_disabled")}}}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!l.Z.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype.finalize=function(){try{d.q.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){a.Y.printStackTrace(t,null,this)}},u.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};n.f.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=r.I.getConfiguration("/WebSquare/clearMemory/@value");l.Z.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){h.v.printLog("WebSquare.uiplugin.window._close : skip clearMemory :"+this.id)}this.frame.setSrc("about:blank")}if(n.f.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var s=!1,d=0;d<this.options.parent.storedFrame.length;d++)if(this.options.parent.storedFrame[d]==this.id){s=!0;break}s||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"!==this.options.frameMode&&"pageFrame"!=this.options.frameMode||n.f.fireEvent(this,"onwindowunload"),this.remove())}catch(t){a.Y.printStackTrace(t,null,this),this._closed=!1}}},2874:function(t,e,i){"use strict";i.r(e),i.d(e,{windowContainer:function(){return c}});var o=i(2284),s=i(5461),r=i(5375),a=i(8971),n=i(2338),l=i(1204),h=i(2256),d=i(2406),c=function(t,e,i){d.q.call(this,t,e,i)};s.q.extend(c.prototype,d.q.prototype),c.prototype.defaultOptions={useConfig:!0,pluginType:"uiplugin.windowContainer",pluginName:"windowContainer",userEvents:["onCloseWindow","onwindowkeyup","onwindowchange","onwindowtabclick","onbeforecloseall","onbeforenamelayermove","onafternamelayermove","onwindowsplit","onmenuclick","onwindowload","onwindowunload","oncustomcontrolclick","onminimizebtnclick","onrestorebtnclick","ondragstart","ondragend","onresize"],useConfirmMessage:!0,confirmTrueAction:"existWindow",confirmFalseAction:"newWindow",windowMaxNum:5,confirmMessage:"",lineBreakNum:4,useNameScroll:!1,useCloseButton:!1,useFixButton:!1,useNameContainer:!1,controlIconPosition:"left",fixArrangeFullScreen:!1,verticalArrangeNum:2,horizontalArrangeNum:2,sequentialArrangeRowNum:2,sequentialArrangeColNum:2,windowAutoResize:!1,toolbarWidth:0,toolbarPosition:"bottom",positionX:"none",positionY:"none",windowMaximizeAll:!1,minVisibleWindowPixel:20,stopMinimizeOnNameLayer:!1,stopToggleOnLast:!1,defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",hideTitleOnMaximize:!1,usePopup:!1,closeWindowOnPopup:!1,tooltipDisplay:!0,tooltipStyle:"border:2px solid #7BAFE4; background-color:#ffffff;cursor:default;",tooltipClass:"",tooltipTime:1,tooltipGroupClass:!0,windowTooltipDisplay:!0,useLocale:!1,confirmMessageLocaleRef:"",wmode:!1,selectedIndex:-1,useStatusMsg:!0,useCustomMsg:!1,statusMsg:"",customMsg:"",nameScrollMode:"",useControlIconTitle:!1,spa:!1,spaIframeMaxSize:0,spaIframeMinSize:0,spaInitCount:0,
spaReplaceHistory:!1,nameLayerMenu:!1,windowHeaderHTML:"",enableHeaderSelect:!1,useDrag:!1,skipZIndex:!1,noAttatchedEvent:!1,closeType:"all",nameLayerMove:!1,nameLayerMoveGap:110,useWindowSplit:!1,keepSelectedWindow:!1,swapZIndex:!1,controlIcons:[{id:"vertical",className:"w2windowContainer_controlIcon_vertical",useTitle:!1,isCustom:!1},{id:"horizontal",className:"w2windowContainer_controlIcon_horizontal",useTitle:!1,isCustom:!1},{id:"cascade",className:"w2windowContainer_controlIcon_cascade",useTitle:!1,isCustom:!1},{id:"sequential",className:"w2windowContainer_controlIcon_sequential",useTitle:!1,isCustom:!1},{id:"closeAll",className:"w2windowContainer_controlIcon_closeAll",useTitle:!1,isCustom:!1}],buttonFormatter:"",controlIconFormatter:null,restoreWinSize:!1,spaAuto:!1,spaAutoDelay:3e3,windowDragMove:!1,windowMoveType:"restrict",frameModal:!1,useWindowId:!1,processMsgFrame:!1,useWindowScrollButton:!1,windowScrollVisibleRowNum:5,autoArrange:!1,includeMinimizeWindow:!1,escape:!0,changeActiveWindow:!1,nameLayerRearrange:!1,msaName:"",accessibility:!1,foldOnMinimized:!1,scopeInherit:"",resizeEvent:!1},c.prototype.initialize=function(t){try{this.windows=[],this.fixedWindowArr=[],this.beforeWindow=null,this.nowWindow=null,this.focusWindowId=null,this.selectedWindowHistory=[],this.selectedIndex=-1,this.visibleWindows=[],this.windowIdx=0,this.maxZIndex=0,this.currentWindowNum=0,this.tooltip=null,this.timeShowTooltip=null,this.useControlIconFormatter=!1,this.options.confirmMessage=WebSquare.language.getMessage("WindowContainer_confirm_warning")||"#title screen exists. Select 'OK' to use the existing window, or 'Cancel' to use a new window.",this.options.useLocale&&null!=this.options.confirmMessageLocaleRef&&""!=this.options.confirmMessageLocaleRef&&(this.options.confirmMessage=this.getLocaleValue(this.options.confirmMessageLocaleRef)),!0===this.options.accessibility&&(this.options.tabIndex="0",this.options.tableRender="ul",this.options.useFixButton=!0,this.options.useNameContainer="true",this.options.controlIconPosition="allright",this.options.useAccessibilityMenu=!0,this.options.nameLayerMenu=!1,this.options.foldOnMinimized=!0);var e="w2windowContainer_window";"top"==this.options.toolbarPosition&&(e+="_top");var i=new WebSquare.uiplugin.group(this.id+"_window",{className:e,style:"background-color : transparent"});this.addControl(i),this.options=WebSquare.cssManager.styleToClass(this.id,this.options),t&&"$blank"==t.getAttribute("statusMsg")?this.defaultStatusMsg="":this.defaultStatusMsg=this.options.statusMsg||WebSquare.language.getMessage("Window_statusMsg"),this.options.spaIframeMinSize>this.options.spaIframeMaxSize&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize),this.options.spaInitCount>0&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount),("true"==r.I.getConfiguration("/WebSquare/spa/@value")||this.options.spaIframeMaxSize>0)&&(this.options.spa=!0),this.options.spaAuto&&(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!0),this.storedFrame=[],this.options.nameLayerMenu&&(this.options.useNameContainer=!0),this.windowHeaderHTML="",this.nameLayerHTML="",this.multiViewIdArr=[],this.options.useDrag,"wframe"!==this.options.frameMode&&"pageFrame"!==this.options.frameMode||(this.options.spaIframeMaxSize=this.options.spaIframeMinSize=this.options.spaInitCount=0,this.options.spa=!1),this.options.includeMinimizeWindow&&!this.options.windowMaximizeAll&&(this.options.includeMinimizeWindow=!1),this.zIndexFlagInfo={},this.options.useNameContainer||(this.options.controlIconPosition="left"),this._displayOnlyTopWindow=l.Z.getBoolean(r.I.getConfiguration("/WebSquare/windowContainer/displayOnlyTopWindow/@value")),this._splitInfo={}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.toHTML=function(){try{var t=function(t){return t?" title='"+t+"'":""},e=[],i={vertical:"",horizontal:"",cascade:"",sequential:"",closeAll:"",maximize:"",
windowList:"",previousWindow:"",nextWindow:"",closeOthers:""},o=""==this.options.style?"":"style='"+this.options.style+"'",s=""==this.options.tabIndex?"":"tabindex='"+this.options.tabIndex+"'";this.options.useControlIconTitle&&(i.maximize=t(WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")),i.vertical=t(WebSquare.language.getMessage("WindowContainer_controlIcon_vertical")),i.horizontal=t(WebSquare.language.getMessage("WindowContainer_controlIcon_horizontal")),i.cascade=t(WebSquare.language.getMessage("WindowContainer_controlIcon_cascade")),i.sequential=t(WebSquare.language.getMessage("WindowContainer_controlIcon_sequential")),i.closeAll=t(WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")),i.windowList=t(WebSquare.language.getMessage("WindowContainer_controlIcon_windowList")),i.previousWindow=t(WebSquare.language.getMessage("WindowContainer_previous")),i.nextWindow=t(WebSquare.language.getMessage("WindowContainer_next")));var r="w2windowContainer_windowToolbar";"top"==this.options.toolbarPosition&&(r+="_top");var n="",l="";!this.options.useNameContainer||"right"!=this.options.controlIconPosition&&"allright"!=this.options.controlIconPosition||(n=" w2windowContainer_controlIconLayer_right",l=this.options.hideTitleOnMaximize?" w2windowContainer_nameContainer_right_maximizeBtn":" w2windowContainer_nameContainer_right");var h="w2windowContainer_controlIconLayer",d="w2windowContainer_scrollLeftBtn";if(this.options.hideTitleOnMaximize&&(h+=" w2windowContainer_controlIconLayer_extend",d+=" w2windowContainer_scrollLeftBtn_extend"),e.push("<div id='"+this.id+"' "+o+" class='w2windowContainer "+this.options.className+"' "+s+">"),!0!==this.options.accessibility&&e.push(this.getChild(this.id+"_window").toHTML()),!0===this.options.accessibility){if(!this.options.nameLayerMenu){if(e.push("<div id='"+this.id+"_toolbar' class='"+r+"'>"),e.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer w2windowContainer_nameContainer_right"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+l+"'>"),e.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),e.push("</div>"),e.push("<div id='"+this.id+"_controlIcon' class='w2windowContainer_controlIconLayer_accessibility "+h+n+"'>"),"allright"==this.options.controlIconPosition){var c=WebSquare.language.getMessage("WindowContainer_previous")||"Previous window",u=WebSquare.language.getMessage("WindowContainer_next")||"Next window";e.push("<div id='"+this.id+"_controlBtnDiv'>"),e.push("<button type='button' id='"+this.id+"_left' style='display:none;' class='w2windowContainer_accessibility_button "+d+"' aria-label='"+c+"'></button>"),e.push("<button type='button' id='"+this.id+"_right' style='display:none;' class='w2windowContainer_accessibility_button w2windowContainer_scrollRightBtn' aria-label='"+u+"'></button>"),e.push("</div>"),e.push("<div id='"+this.id+"_controlIconDiv'>")}var p=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Horizontal alignment,Current default view",g=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Vertical alignment,Current default view",m=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Cascade alignment,Current default view",f=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Tiled alignment,Current default view",b=WebSquare.language.getMessage("WindowContainer_controlIcon_closeAll")||"Close All",y=WebSquare.language.getMessage("WindowContainer_windowList")||"Window list",v=WebSquare.language.getMessage("WindowContainer_controlIcon_maximize")||"Maximize/Restore"
;e.push("<button type='button' id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical w2windowContainer_accessibility_button' aria-label='"+g+"'></button>"),e.push("<button type='button' id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal w2windowContainer_accessibility_button' aria-label='"+p+"'></button>"),e.push("<button type='button' id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade w2windowContainer_accessibility_button' aria-label='"+m+"'></button>"),e.push("<button type='button' id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential w2windowContainer_accessibility_button' aria-label='"+f+"'></button>"),e.push("<button type='button' id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll w2windowContainer_accessibility_button' aria-label='"+b+"'></button>"),this.options.useWindowScrollButton&&e.push("<button type='button' id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList w2windowContainer_accessibility_button' aria-expanded='false' aria-label='"+y+"'></button>"),this.options.hideTitleOnMaximize&&e.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize' aria-label='"+v+"'></span>"),"allright"==this.options.controlIconPosition&&e.push("</div>"),e.push("</div>"),e.push("</div>")}e.push(this.getChild(this.id+"_window").toHTML())}else this.options.nameLayerMenu||(e.push("<div id='"+this.id+"_toolbar' class='"+r+"'>"),e.push("<div id='"+this.id+"_controlIcon' class='"+h+n+"'>"),"allright"==this.options.controlIconPosition&&(e.push("<div id='"+this.id+"_controlBtnDiv'>"),e.push("<div id='"+this.id+"_left' style='display:none;' class='"+d+"'"+i.previousWindow+"></div>"),e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'"+i.nextWindow+"></div>"),e.push("</div>"),e.push("<div id='"+this.id+"_controlIconDiv'>")),e.push("<span id='"+this.id+"_vertical' class='w2windowContainer_controlIcon_vertical'"+i.vertical+"></span>"),e.push("<span id='"+this.id+"_horizontal' class='w2windowContainer_controlIcon_horizontal'"+i.horizontal+"></span>"),e.push("<span id='"+this.id+"_cascade' class='w2windowContainer_controlIcon_cascade'"+i.cascade+"></span>"),e.push("<span id='"+this.id+"_sequential' class='w2windowContainer_controlIcon_sequential'"+i.sequential+"></span>"),e.push("<span id='"+this.id+"_closeAll' class='w2windowContainer_controlIcon_closeAll'"+i.closeAll+"></span>"),this.options.useWindowScrollButton&&e.push("<span id='"+this.id+"_windowList' class='w2windowContainer_controlIcon_windowList'"+i.windowList+"></span>"),this.options.hideTitleOnMaximize&&e.push("<span id='"+this.id+"_maximize' class='w2windowContainer_controlIcon_maximize'"+i.maximize+"></span>"),"allright"==this.options.controlIconPosition&&e.push("</div>"),e.push("</div>")),this.options.useNameContainer&&e.push("<div id='"+this.id+"_nameContainer' class='w2windowContainer_nameContainer"+(this.options.nameLayerMenu?" w2windowContainer_nameLayerMenu":"")+l+"'>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_left' style='display:none;' class='"+d+"'></div>"),e.push("<div id='"+this.id+"_name' class='w2windowContainer_name'></div>"),"allright"!==this.options.controlIconPosition&&e.push("<div id='"+this.id+"_right' style='display:none;' class='w2windowContainer_scrollRightBtn'></div>"),this.options.useNameContainer&&e.push("</div>"),this.options.nameLayerMenu||e.push("</div>");return e.push("</div>"),e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setPreAction=function(){try{this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.nameBar=this.getElementById(this.id+"_name"),this.dom.window=this.getElementById(this.id+"_window"),this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.nameContainer=this.getElementById(this.id+"_nameContainer"),this.dom.leftScrollBtn=this.getElementById(this.id+"_left"),
this.dom.rightScrollBtn=this.getElementById(this.id+"_right"),this.options.nameLayerMenu?this.createMenu():(this.dom.control=this.getElementById(this.id+"_controlIcon"),this.dom.toolBar=this.getElementById(this.id+"_toolbar"),this.dom.iconVertical=this.getElementById(this.id+"_vertical"),this.dom.iconHorizontal=this.getElementById(this.id+"_horizontal"),this.dom.iconCascade=this.getElementById(this.id+"_cascade"),this.dom.iconSequential=this.getElementById(this.id+"_sequential"),this.dom.iconCloseAll=this.getElementById(this.id+"_closeAll"),this.dom.iconWindowList=this.getElementById(this.id+"_windowList")),this.options.hideTitleOnMaximize&&(this.dom.iconMaximize=this.getElementById(this.id+"_maximize")),this.dom.nameScrollLeft=this.getElementById(this.id+"_left"),this.dom.nameScrollRight=this.getElementById(this.id+"_right")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setAction=function(){try{if(this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblClickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),l.Z.isTouchDevice()&&(this.event.addListener(this.dom.nameBar,"ontouchstart",this.event.bindAsEventListener(this,this.handleNameLayerMove)),this.options.nameLayerMove&&this.event.addListener(this.dom.nameBar,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))),this.event.addListener(this.dom.nameBar,"onmousedown",this.event.bindAsEventListener(this,this.handleNameLayerMove)),!0===this.options.accessibility&&(this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.dom.window,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusInEvent)),this.event.addListener(this.dom.nameContainer,"onkeydown",this.event.bindAsEventListener(this,this.handleNameContainerKeydownEvent)),this.event.addListener(this.dom.control,"onkeydown",this.event.bindAsEventListener(this,this.handleControlKeydownEvent))),d.q.addCheckResize(this.uuid,"checkResize"),!this.options.nameLayerMenu&&this.options.useWindowScrollButton){var t=this.dom.toolBar.offsetWidth,e=this.dom.control.offsetWidth;WebSquare.style.setStyle(this.dom.iconWindowList,"left",e+"px"),e+=this.dom.iconWindowList.offsetWidth,WebSquare.style.setStyle(this.dom.control,"width",e+"px"),this.options.useNameContainer?("right"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"right",e+"px"):WebSquare.style.setStyle(this.dom.nameContainer,"width",t-e+"px"),"left"===this.options.controlIconPosition?WebSquare.style.setStyle(this.dom.nameContainer,"left",e+"px"):"allright"===this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","-50px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"right",this.dom.control.offsetWidth+"px"))):WebSquare.style.setStyle(this.dom.leftScrollBtn,"left",e+"px")}else"allright"==this.options.controlIconPosition&&(WebSquare.style.setStyle(this.dom.control,"width","180px"),WebSquare.style.setStyle(this.dom.nameContainer,"right","180px"),WebSquare.style.setStyle(this.dom.leftScrollBtn,"left","0px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right","130px"),WebSquare.style.setStyle(this.dom.iconVertical,"left","50px"),WebSquare.style.setStyle(this.dom.iconHorizontal,"left","75px"),WebSquare.style.setStyle(this.dom.iconCascade,"left","100px"),WebSquare.style.setStyle(this.dom.iconSequential,"left","125px"),WebSquare.style.setStyle(this.dom.iconCloseAll,"left","150px"));"overflow"==this.options.windowMoveType&&WebSquare.style.setStyle(this.dom.window,"overflow","auto")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.onComplete=function(){try{
this.setControlIconFormatter(),r.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:10}),this.options.spaAuto&&r.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]}),d.q.prototype.onComplete.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.makeIframe=function(){if("iframe"===this.options.frameMode){var t=this.storedFrame.length;if(this.options.spaIframeMinSize>t+this.windows.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id),r.I.setTimer(this.makeIframe,{key:this.id+"_makeIframe",caller:this,delay:50})}}},c.prototype.createFrame=function(t){try{if("iframe"!==this.options.frameMode)return;if(-1!=this.options.windowMaxNum&&this.options.windowMaxNum<=this.windows.length+this.storedFrame.length)return void h.v.printLog("["+this.id+"] createFrame error : frames are full ("+this.options.windowMaxNum+")");if(void 0!==t&&null!=t||(t={}),isNaN(t.maxFrame)||t.maxFrame>this.storedFrame.length){var e=this._createSubWindow("temp",null,WebSquare.net.getBlankXML());e&&e.render&&(e.render.style.display="none"),this.storedFrame.push(e.id)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.createWindow=function(t,e,i,s,r,n,l,h,d,c,u,p,g,m,f,b){try{return"object"===(0,o.A)(t)&&null!=t?this.__createWindowByObj(t):this.__createWindow(t,e,i,s,r,n,l,h,d,c,u,p,g,m,f,b)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.__createWindow=function(t,e,i,o,s,r,n,h,d,c,u,p,g,m,f,b){try{if(""===this.windowHeaderHTML&&""!==this.options.windowHeaderHTML){var y="";try{y=l.Z.getGlobalFunction(this.options.windowHeaderHTML,this.scope_id);this.windowHeaderHTML="function"==typeof y?y():y}catch(t){this.windowHeaderHTML=this.options.windowHeaderHTML}}t=t&&this.options.escape?WebSquare.xml._encode(t):t,o=(o=o&&this.options.escape?WebSquare.xml._encode(o):o)||t,s=s||t;for(var v=null,w=c||{},S=0;S<this.windows.length;S++){var _=this.windows[S];s==_.windowId&&(v=_)}if(null!=v)if(null!=r&&""!=r)this.performAction(r,v,t,e,i,o,s,h,d,n,w,u,p,g,m,f,b);else{for(var C=this.options.confirmMessage;-1!=C.indexOf("#title");)C=C.replace("#title",t);var x=!0;1==this.options.useConfirmMessage&&(x=confirm(C)),x?this.performAction(this.options.confirmTrueAction,v,t,e,i,o,s,h,d,n,w,u,p,g,m,f,b):this.performAction(this.options.confirmFalseAction,v,t,e,i,o,s,h,d,n,w,u,p,g,m,f,b)}else this._createWindow(t,e,i,o,s,n,h,d,w,u,p,g,m,f,b)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.__createWindowByObj=function(t){try{if(!(t&&t.title&&t.src))return void $l("["+this.id+" : createWindow ] check the parameters.");var e=t.title||"",i=t.iconUrl||null,o=t.src||"",s=t.windowTitle||null,r=t.windowId||null,n=t.openAction||null,l=t.closeAction||null,h=t.windowTooltip||null,d=t.windowHeaderHTML||null,c=t.useNameLayer||!0,u=t.nameLayerHTML||null,p=t.userIconClass||null,g=t.userIconPosition||null,m={fixed:t.fixed||!1,useNameLayer:c,defaultWidth:t.defaultWidth||"",defaultHeight:t.defaultHeight||"",defaultTop:t.defaultTop||"",defaultLeft:t.defaultLeft||"",useRestoreDefaultSize:t.useRestoreDefaultSize||!1,useInitialSizePosition:t.useInitialSizePosition||!1,buttonInfo:t.buttonInfo,scopeInherit:t.scopeInherit,resizeEvent:t.resizeEvent,adaptiveFrame:t.adaptiveFrame},f=t.frameMode||this.options.frameMode,b=t.msaName||"";return this.__createWindow(e,i,o,s,r,n,l,h,d,m,f,t.dataObject,u,p,g,b)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.performAction=function(t,e,i,o,s,r,n,l,h,d,c,u,p,g,m,f,b){try{if("selectWindow"==t)this.selectNameLayer(e.id),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id);else if("existWindow"==t){if(e.isFix){e.isFix=!1;for(var y=0;y<this.fixedWindowArr.length;y++)if(this.fixedWindowArr[y].id==e.id){this.fixedWindowArr.splice(y,1);break}}var v;this.selectNameLayer(e.id),e.window.setStatusMsg(this.defaultStatusMsg),p&&(v={dataObject:p}),
e.window.setSrc(s,v),e.window.options.closeAction=d,e.window.options.title=i;l=l||r;this.setWindowLabel(n,"toolbar",i),this.setWindowLabel(n,"window",r),this.setWindowLabel(n,"tooltip",l),!0===e.window.windowInfo.minimized&&this._onmaximize(e.id)}else"newWindow"==t&&this._createWindow(i,o,s,r,n,d,l,h,c,u,p,g,m,f,b)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowTabOrder=function(t){try{if(null==t||t.length!==this.windows.length||!(t instanceof Array))return void h.v.printLog("The number of elements in arr and the number of elements in windows do not match, or arr is not in array");for(var e=[],i=0;i<t.length;i++)e[i]=this.windows[t[i]];for(i=1;i<t.length+1;i++)this.removeNameLayer(this.windows[t.length-i].id);for(i=0;i<t.length;i++)this.windows.push(e[i]);this.createNameLayer(),this.selectWindow()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._createWindow=function(t,e,i,o,s,h,d,c,u,p,g,m,f,b,y){try{var v=o.wq_replaceAll("&nbsp;","");u=u||{};if(y&&(u.msaName=y),-1!=this.options.windowMaxNum&&this.currentWindowNum>this.options.windowMaxNum-1)return void alert(WebSquare.language.getMessage("WindowContainer_maxNum_warning",this.options.windowMaxNum));var w,S=null,_=this.storedFrame.length>0&&(!p||"iframe"===p);if(_)(S=l.Z.getComponentById(this.storedFrame.shift()))._closed=!1,S.options.closeAction=h,S.options.title=t,c?S.setWindowHeaderHTML(c):S.setWindowTitle(o),g&&(w={dataObject:g}),S.frame.setSrc(i,w),S.render&&(S.render.style.display="");else S=this._createSubWindow(t,e,i,v,s,h,d,c,p,g,!0,m,f,b,u);var C=S.id;this.currentWindowNum++;var x={};if(x.id=C,x.window=S,x.title=t,x.iconUrl=e,x.src=i,x.windowTitle=o,x.windowId=s,x.closeAction=h,x.tooltip=d||o,x.windowHeaderHTML=c,x.buttonFormatter=this.options.buttonFormatter,x.isFix=u.fixed||!1,x.nameLayerHTML=m,x.userIconClass=f,x.userIconPosition=b,!0===this.options.accessibility&&(x.label=t),x.useNameLayer=!u.useNameLayer||l.Z.getBoolean(u.useNameLayer),0==x.useNameLayer?this.windows.splice(0,0,x):this.windows.push(x),this.createNameLayer(),this.options.accessibility&&S.render&&S.render.setAttribute("tabindex",0),this.beforeWindow=this.nowWindow,this.nowWindow=C,this.selectWindow(),_||(S.activate(),S.onComplete()),this.options.restoreWinSize&&this.restoreWindowSize(s),this.beforeWindow!=this.nowWindow){var I=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,T=this.getWinInfoObj(this.nowWindow).windowId;n.f.fireEvent(this,"onwindowchange",I,T)}this.options.spaAuto&&r.I.setTimer(this.createFrame,{key:this.id+"_createFrame",caller:this,delay:this.options.spaAutoDelay,args:[{maxFrame:1}]})}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._createSubWindow=function(t,e,i,o,s,h,d,c,u,p,g,m,f,b,y){y=y||{};var v=this.org_id||this.id,w=v+"_subWindow"+this.windowIdx++;this.options.useWindowId&&(w=v+"_subWindow_"+s+"_"+this.windowIdx++);u=u||this.options.frameMode;var S=y.scopeInherit||this.options.scopeInherit,_=y.resizeEvent||this.options.resizeEvent,C=y.defaultWidth||this.options.defaultWidth,x=y.defaultHeight||this.options.defaultHeight,I=y.defaultTop||this.options.defaultTop,T=y.defaultLeft||this.options.defaultLeft,k=y.useRestoreDefaultSize||this.options.useRestoreDefaultSize,L=y.useInitialSizePosition||this.options.useInitialSizePosition,A=y.adaptiveFrame||!1,D=WebSquare.controlFactory.create(w,{pluginName:"window",parseChild:!1,windowTitle:o,windowHeaderHTML:c||this.windowHeaderHTML,nameLayerHTML:m||this.nameLayerHTML,enableHeaderSelect:this.options.enableHeaderSelect,src:i,userIconClass:f,userIconPosition:b,useStatusMsg:this.options.useStatusMsg,useCustomMsg:this.options.useCustomMsg,statusMsg:""==this.defaultStatusMsg?"":this.defaultStatusMsg,customMsg:this.options.customMsg,defaultTop:I,defaultLeft:T,defaultWidth:C,defaultHeight:x,useRestoreDefaultSize:k,useInitialSizePosition:L,minimumWidth:this.options.minimumWidth,minimumHeight:this.options.minimumHeight,frameMode:u,wmode:this.options.wmode,width:this.render.offsetWidth,
height:this.render.offsetHeight-25,closeAction:h,title:t,parent:this,windowTooltipDisplay:this.options.windowTooltipDisplay,noAttatchedEvent:this.options.noAttatchedEvent,spa:this.options.spa,spaReplaceHistory:this.options.spaReplaceHistory,buttonFormatter:this.options.buttonFormatter,windowDragMove:this.options.windowDragMove,frameModal:this.options.frameModal,windowMoveType:this.options.windowMoveType,windowMaximizeAll:this.options.windowMaximizeAll,minVisibleWindowPixel:this.options.minVisibleWindowPixel,processMsgFrame:this.options.processMsgFrame,dragResizableHeader:this.options.dragResizableHeader,msaName:y.msaName||this.options.msaName,foldOnMinimized:this.options.foldOnMinimized,accessibility:this.options.accessibility||!1,scopeInherit:S,resizeEvent:_,adaptiveFrame:A},null,this.scope_obj,this.parentFrame,!0);y.buttonInfo&&y.buttonInfo.buttons&&(D.hasButtons=!0,D.buttonInfo=y.buttonInfo),p&&D.setDataObject(p),D._windowId=s;var W=this,q=!0===r.I.scriptPrecedence?"onwindowload":"ondrawcomplete";return D.options.xmlEvents=[{name:"onclose",action:"script",param:{handler:function(t){try{n.f.fireEvent(W,"onCloseWindow",t);var e=W.getWinInfoObj(this.id);W.options.accessibility&&"maximized"===e.window.windowInfo.status&&W.arrangeHistory&&(W._unsetAllAriaLabel(),W._setAriaLabel()),W.removeNameLayer(this.id);for(var i=0;i<W.fixedWindowArr.length;i++)if(W.fixedWindowArr[i].id==this.id){W.fixedWindowArr.splice(i,1);break}if(W.createNameLayer(),W.selectWindow(),W.options.accessibility&&W.visibleWindows.length>0){var o=W.visibleWindows.indexOf(this.id),s=W._findBehindWindow(this.id)[0];-1!==o&&(s&&s.value?W.visibleWindows.splice(o,1,s.value):W.visibleWindows.splice(o,1))}var r=W.nowWindow?W.getWinInfoObj(W.nowWindow).windowId:null;if(n.f.fireEvent(W,"onwindowchange",W.closedWindowId,r),W.setFocus(W.getSelectedIndex()),W.options.autoArrange)if(W.options.useFixButton){var h=W.options.verticalArrangeNum,d=W.options.horizontalArrangeNum;"vertical"==W.arrangeHistory&&W.windows.length<h?W.options.verticalArrangeNum=W.windows.length:"horizontal"==W.arrangeHistory&&W.windows.length<d&&(W.options.horizontalArrangeNum=W.windows.length),"sequential"==W.arrangeHistory&&W.windows.length<=W.options.sequentialArrangeColNum?(W.options.verticalArrangeNum=W.windows.length,W.setArrangeWindows("vertical"),W.arrangeHistory="sequential"):W.setArrangeWindows(W.arrangeHistory),W.options.verticalArrangeNum=h,W.options.horizontalArrangeNum=d}else W.setArrangeWindows(W.arrangeHistory);if(0==W.windows.length&&(W.options.spaAuto?"wframe"!==W.options.frameMode&&"pageFrame"!==W.options.frameMode||(W.windowIdx=0):W.windowIdx=W.options.spaInitCount),!0===W.options.accessibility&&e&&"maximized"===e.window.windowInfo.status)for(i=0;i<W.windows.length;i++){l.Z.getComponentById(W.windows[i].id).render.style.display="block"}}catch(t){a.Y.printStackTrace(t,null,W)}}}},{name:"onrestorebtnclick",action:"script",param:{handler:function(t){try{if(W.options.accessibility){var e,i,o="";"restored"===(i=W.getWinInfoObj(W.nowWindow).window.windowInfo.status)?(o=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_minimize").setAttribute("aria-label",o),o=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_restore").setAttribute("aria-label",o),e="block",W._setAriaLabel()):"maximized"===i&&(W._unsetAllAriaLabel(),o=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_maximizeSize_status")||"Maximize",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_restore").setAttribute("aria-label",o),o=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_maximizeSize_status")||"Maximize",
W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_minimize").setAttribute("aria-label",o),e="none");for(var s=0;s<W.windows.length;s++){if(W.windows[s].id!==W.nowWindow)l.Z.getComponentById(W.windows[s].id).render.style.display=e}}if(W.options.windowMaximizeAll&&W._displayOnlyTopWindow){var r=W.nowWindow;"maximized"===this.windowInfo.status&&W.doMaximizeAll();for(s=W.selectedWindowHistory.length;s>0;s--){var n=W.selectedWindowHistory[s-1],h=W.getWinInfoObj(n);if(n!=r&&"maximized"==h.window.windowInfo.status){h.window.setStyle("display","block");break}h.window.setStyle("display","block")}}}catch(t){a.Y.printStackTrace(t,null,W)}}}},{name:"onminimizebtnclick",action:"script",param:{handler:function(t){try{if(W.options.accessibility){var e="";if(0==W.getWinInfoObj(W.nowWindow).window.windowInfo.minimized?(e=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_minimize").setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_restore")+","+WebSquare.language.getMessage("WindowContainer_defaultSize_status")||"Restore",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_restore").setAttribute("aria-label",e)):(e=WebSquare.language.getMessage("Window_minimize")+","+WebSquare.language.getMessage("WindowContainer_minimizeSize_status")||"Minimize",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_minimize").setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_maximize")+","+WebSquare.language.getMessage("WindowContainer_minimizeSize_status")||"Minimize",W.getElementById(W.getWinInfoObj(W.nowWindow).id+"_restore").setAttribute("aria-label",e)),W._unsetAllAriaLabel(),W._setAriaLabel(),W.arrangeHistory)for(var i=0;i<W.windows.length;i++){if(W.windows[i].id!==W.nowWindow)l.Z.getComponentById(W.windows[i].id).render.style.display="block"}}if(W.options.windowMaximizeAll&&W._displayOnlyTopWindow){var o=W.nowWindow;for(i=W.selectedWindowHistory.length;i>0;i--){var s=W.selectedWindowHistory[i-1],r=W.getWinInfoObj(s);if(s!=o&&"maximized"==r.window.windowInfo.status){r.window.setStyle("display","block");break}r.window.setStyle("display","block")}}}catch(t){a.Y.printStackTrace(t,null,W)}}}},{name:"onwindowkeyup",action:"script",param:{handler:function(t){try{n.f.fireEvent(W,"onwindowkeyup",t)}catch(t){a.Y.printStackTrace(t,null,W)}}}},{name:"onwindowmousedown",action:"script",param:{handler:function(t){try{W.selectNameLayer(this.id)}catch(t){a.Y.printStackTrace(t,null,W)}}}},{name:"onminimize",action:"script",param:{handler:function(t){!0!==W.options.accessibility&&W._onminimize(this.id)}}},{name:"onmaximize",action:"script",param:{handler:function(t){W._onmaximize(this.id)}}},{name:"ondragstart",action:"script",param:{handler:function(t){W.selectNameLayer(this.id),WebSquare.event.fireEvent(W,"ondragstart",this.id),W.handleDragStartEvent()}}},{name:"ondragend",action:"script",param:{handler:function(t){WebSquare.event.fireEvent(W,"ondragend",this.id),W.handleDragEndEvent()}}},{name:"onpopup",action:"script",param:{handler:function(t){W._onpopup(this.id)}}},{name:q,action:"script",param:{handler:function(t){n.f.fireEvent(W,"onwindowload",this._windowId)}}},{name:"onwindowunload",action:"script",param:{handler:function(){n.f.fireEvent(W,"onwindowunload",this._windowId)}}}],this.options.nameLayerMenu&&D.options.xmlEvents.push({name:"onwindowmousedown",action:"script",param:{handler:function(t){try{W.hideContextMenu()}catch(t){a.Y.printStackTrace(t,null,W)}}}}),D.writeTo(this.getChild(this.id+"_window")),!0!==g&&(D.activate(),D.onComplete()),D},c.prototype.setWindowLabel=function(t,e,i){try{if(!t||!e||!i)return;for(var o,s=this.windows.length-1;s>=0;s--)if(this.windows[s].windowId===t){o=this.windows[s];break}if(!o)return;var r="all"===(e=e.toLowerCase());if("window"===e||r){if(o.windowTitle=i,o.window.options.windowTitle=i,this.options.windowTooltipDisplay){
var n=document.getElementById(o.id);n&&n.setAttribute("title",i)}var l=document.getElementById(o.id+"_header_title");l&&(l.innerHTML=i)}if(("tooltip"===e||r)&&(o.tooltip=i),"toolbar"===e||r)document.getElementById(this.id+"_nameLayer_"+o.id).setAttribute("windowTitle",i),o.title=i,this.createNameLayer(),this.selectWindow()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getWindowLabel=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].windowId===t){i=this.windows[o];break}if(!i)return;if("toolbar"===(e=e.toLowerCase()))return i.title;if("window"===e)return i.windowTitle;if("tooltip"===e)return i.tooltip}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.createNameLayer=function(){try{var t=[];this.dom.nameBar.innerHTML="";for(var e=l.Z.getDataPrefix("refId"),i=l.Z.getDataPrefix("windowtitle"),o=l.Z.getDataPrefix("elementInfo"),s="",r="",n="",h=0;h<this.windows.length;h++){if((m=this.windows[h]).useNameLayer)if(m.nameLayerHTML)this._setNameLayerHTML(m.id,t);else{null!=m.userIconClass&&null==m.userIconPosition&&m.userIconPosition,!0===this.options.useFixButton&&null!=m.userIconClass?("left"==m.userIconPosition?(n="w2windowContainer_nameLayer_firstButtonFromLeft",r="w2windowContainer_nameLayer_secondButtonFromLeft"):(r="w2windowContainer_nameLayer_firstButtonFromLeft",n="w2windowContainer_nameLayer_secondButtonFromLeft"),s="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix_withUserIcon"):!0===this.options.useFixButton&&null==m.userIconClass?(r="w2windowContainer_nameLayer_firstButtonFromLeft",s="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):!1===this.options.useFixButton&&null!=m.userIconClass?(n="w2windowContainer_nameLayer_firstButtonFromLeft",s="w2windowContainer_nameLayer w2windowContainer_nameLayer_fix"):s="w2windowContainer_nameLayer";var d=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected",c=WebSquare.language.getMessage("WindowContainer_close_dialog")||"Close dialog",u=WebSquare.language.getMessage("WindowContainer_custom")||"Custom";!0===this.options.accessibility?(t.push("<div>"),t.push("<a href='#"+m.id+"' tabindex='-1' id='"+this.id+"_nameLayer_"+m.id+"' class='w2windowContainer_nameLayer_accessibility "+s+"' "+e+"='"+m.id+"' "+i+"='"+m.title+"' "+o+"='nameLayer'>"),t.push(m.title),t.push("</a>"),this.options.useFixButton&&(r+=" w2windowContainer_nameLayer_fixOff_accessibility w2windowContainer_nameLayer_fixOff",m.isFix&&(r+=" w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOn"),t.push("<button type='button' tabindex='-1' class='w2windowContainer_accessibility_button "+r+"' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+d+"'>"),t.push("</button>")),null!=m.userIconClass&&(n+=" "+m.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+n+"' "+e+"='"+m.id+"'>"),t.push("</div>")),this.options.useCloseButton&&(t.push("<button type='button' tabindex='-1' class='w2windowContainer_accessibility_button w2windowContainer_nameLayer_close' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+c+"'>"),t.push("</button>")),t.push("</div>")):(t.push("<div id='"+this.id+"_nameLayer_"+m.id+"' class='"+s+"' "+e+"='"+m.id+"' "+i+"='"+m.title+"'>"),this.options.useFixButton&&(r+=" w2windowContainer_nameLayer_fixOff",m.isFix&&(r+=" w2windowContainer_nameLayer_fixOn"),t.push("<div class='"+r+"' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+d+"'>"),t.push("</div>")),null!=m.userIconClass&&(n+=" "+m.userIconClass+" w2windowContainer_nameLayer_userIconPosition",t.push("<div class='"+n+"' "+e+"='"+m.id+"' aria-label = '"+u+"'>"),t.push("</div>")),t.push(m.title),this.options.useCloseButton&&(t.push("<div class='w2windowContainer_nameLayer_close' "+e+"='"+m.id+"' aria-label = '"+m.title+" "+c+"'>"),t.push("</div>")),this.options.nameLayerMenu&&(t.push("<div class='w2windowContainer_nameLayer_menu' "+e+"='"+m.id+"'>"),t.push("</div>")),t.push("</div>"))}}
if(this.dom.nameBar.innerHTML=t.join(""),this.dom.nameBar.style.width="auto",this.windows.length>0){for(var p=0,g=(h=0,0);h<this.windows.length;h++){var m;if((m=this.windows[h]).useNameLayer){var f=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[g],"margin-left"))||0,b=parseInt(WebSquare.style.getStyleProperty(this.dom.nameBar.childNodes[g],"margin-right"))||0;p+=this.dom.nameBar.childNodes[g].offsetWidth+f+b,g++}}this.dom.nameBar.style.width=p+2+"px"}else this.dom.nameBar.style.width="0px";var y=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2,v=this.render.offsetWidth,w=0;if(!this.options.nameLayerMenu&&this.options.toolbarWidth)this.dom.toolBar.style.width=this.options.toolbarWidth+"px",v=this.options.toolbarWidth;else if(!this.options.nameLayerMenu){w=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left"));var S=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(w)||(v-=w),isNaN(S)||(v-=S)}v<this.dom.nameBar.scrollWidth+y?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.display="",this.dom.leftScrollBtn.style.display=""):(this.options.useNameScroll=!1,this.options.useNameContainer||this.options.nameLayerMenu?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=y+"px",this.useControlIconFormatter&&(this.options.useNameContainer&&"right"==this.options.controlIconPosition&&!this.options.nameLayerMenu?document.getElementById(this.id+"_nameContainer").style.right=y+"px":this.options.useNameContainer&&"left"==this.options.controlIconPosition&&!this.options.namelayerMenu&&(document.getElementById(this.id+"_nameContainer").style.left=y+"px")),this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none"),1==this.options.useNameScroll&&(this.options.useWindowScrollButton&&"allright"===this.options.controlIconPosition||(this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px"),this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._setNameLayerHTML=function(t,e){try{if(!t||!e)return;for(var i,o=this.windows.length-1;o>=0;o--)if(this.windows[o].id===t){i=this.windows[o];break}if(!i)return;var s=l.Z.getDataPrefix("windowtitle"),r=l.Z.getDataPrefix("refId"),n=i.title,h="",d="",c="",u=e;if(this.options.useFixButton){var p="w2windowContainer_nameLayer_fixOff_custom";i.isFix&&(!0===this.options.accessibility&&(p+=" w2windowContainer_nameLayer_fixOn_accessibility"),p+=" w2windowContainer_nameLayer_fixOn"),h="<div class='"+p+"' "+r+"='"+i.id+"'></div>"}this.options.useCloseButton&&(d="<div class='w2windowContainer_nameLayer_close_custom' "+r+"='"+i.id+"'></div>"),this.options.nameLayerMenu&&(c="<div class='w2windowContainer_nameLayer_menu' "+r+"='"+i.id+"'></div>"),e.push("<div id='"+this.id+"_nameLayer_"+i.id+"' class='w2windowContainer_nameLayer' "+r+"='"+i.id+"' "+s+"='"+i.title+"'>");try{var g=l.Z.getGlobalFunction(i.nameLayerHTML,this.scope_id);u="function"==typeof g?g(n,h,d,c):g}catch(t){u=i.nameLayerHTML}e.push(u),e.push("</div>")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.removeNameLayer=function(t){try{var e=this.getWinInfoObj(t);if(null==e)return;this.closedWindowId=e.windowId;for(var i=0;i<this.windows.length;i++){var o=this.windows[i];o.id==t&&(!0===this.options.accessibility&&(this.closedWindow=o.id,this.windows[i+1]?this.nowWindow=this.windows[i+1].id:this.windows[i-1]?this.nowWindow=this.windows[i-1].id:this.nowWindow=null),this.windows.splice(i,1))}this.addHistory(t),!0!==this.options.accessibility&&(this.closedWindow=this.selectedWindowHistory.pop(),this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-2]||null,this.nowWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]||null,this.currentWindowNum--)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.clickNameLayer=function(t,e,i){try{!0===this.options.accessibility&&(this.focusWindowId=t)
;var o=t,s=(e=l.Z.getBoolean(e),l.Z.getBoolean(i.stopToggleOnLast));if(this.nowWindow==o){var r=this.getWinInfoObj(this.nowWindow).windowId;if(n.f.fireEvent(this,"onwindowtabclick",r,r),1==s&&1==this.windows.length)return;if(1==e||this.options.nameLayerMenu)return;this.minimizeWindow(o)}else{this.beforeWindow=this.nowWindow,this.nowWindow=o;var h=this.visibleWindows;if(this.selectWindow(),void 0!==this.arrangeHistory&&!0===this.options.accessibility){for(var d=this._findBehindWindow(this.nowWindow),c=!1,u=0;u<h.length;u++)h[u]===this.nowWindow&&(c=!0);if(!c)for(u=0;u<h.length;u++)for(var p=0;p<d.length;p++)if(h[u]===d[p].value){h[u]=this.nowWindow;break}}var g=this.beforeWindow?this.getWinInfoObj(this.beforeWindow).windowId:null,m=this.getWinInfoObj(this.nowWindow).windowId;n.f.fireEvent(this,"onwindowchange",g,m),n.f.fireEvent(this,"onwindowtabclick",g,m)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getWinInfoObj=function(t,e){try{null==e&&(e="id");for(var i=0;i<this.windows.length;i++)if(this.windows[i][e]==t)return this.windows[i]}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.fixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!0,this.fixedWindowArr.push(e);var i=l.Z.getDataPrefix("refId");if(this.options.useFixButton){var o="",s="";!0===this.options.accessibility?(o=document.getElementById(this.id+"_nameLayer_"+e.id).parentNode,s="w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOff_accessibility "):o=document.getElementById(this.id+"_nameLayer_"+e.id);var r=e.title;r+=WebSquare.language.getMessage("WindowContainer_fix_dialog_set")||"Fix dialog box selected";for(var n=0;n<o.childNodes.length;n++){var h=o.childNodes[n];if(1===h.nodeType&&h.getAttribute(i)===e.id)for(var d=0;d<h.classList.length;d++)if("w2windowContainer_nameLayer_fixOff"===h.classList[d])return h.className=s+"w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_fixOn w2windowContainer_nameLayer_firstButtonFromLeft",h.setAttribute("aria-label",r),!0}}return!0}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.unfixWindow=function(t){try{var e=this.getWinInfoObj(t);if(!e)return!1;e.isFix=!1;for(var i=0;i<this.fixedWindowArr.length;i++)this.fixedWindowArr[i].id==e.id&&this.fixedWindowArr.splice(i,1);var o=l.Z.getDataPrefix("refId");if(this.options.useFixButton){var s="",r="";!0===this.options.accessibility?(s=document.getElementById(this.id+"_nameLayer_"+e.id).parentNode,r="w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOff_accessibility "):s=document.getElementById(this.id+"_nameLayer_"+e.id);var n=e.title;n+=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected";for(i=0;i<s.childNodes.length;i++){var h=s.childNodes[i];if(1===h.nodeType&&h.getAttribute(o)===e.id)for(var d=0;d<h.classList.length;d++)if("w2windowContainer_nameLayer_fixOn"===h.classList[d])return h.className=r+"w2windowContainer_nameLayer_fixOff w2windowContainer_nameLayer_firstButtonFromLeft",h.setAttribute("aria-label",n),!0}}return!0}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.minimizeWindow=function(t){try{this.getWinInfoObj(t).window.minimize()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._onminimize=function(t){try{var e=t,i=!1;if(this.prevWindow=this.nowWindow,this.nowWindow==e)!0===this.options.foldOnMinimized?i=!0:(this.minimizedWindow=this.selectedWindowHistory.pop(),this.nowWindow=this.selectedWindowHistory.pop()||null,this.beforeWindow=this.selectedWindowHistory[this.selectedWindowHistory.length-1]);else{for(var o=0;o<this.selectedWindowHistory.length;o++)if(e==this.selectedWindowHistory[o]){this.selectedWindowHistory.splice(o,1);break}!0===this.options.foldOnMinimized&&(this.nowWindow=e)}if(i||this.selectWindow(),!0===this.options.foldOnMinimized){if(this.nowWindow!==e){
var s=this.getWinInfoObj(e).windowId,r=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;n.f.fireEvent(this,"onwindowchange",s,r)}}else if(this.prevWindow==e){s=this.getWinInfoObj(this.minimizedWindow).windowId,r=this.nowWindow?this.getWinInfoObj(this.nowWindow).windowId:null;n.f.fireEvent(this,"onwindowchange",s,r)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.maximizeWindow=function(t){try{this.getWinInfoObj(t).window.maximize()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._onmaximize=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e&&(this.nowWindow=e,this.selectWindow(),this.prevWindow)){var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;n.f.fireEvent(this,"onwindowchange",i,o)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._onpopup=function(t){try{var e=t;if(this.prevWindow=this.nowWindow,this.prevWindow!=e){this.nowWindow=e,this.selectWindow();var i=this.getWinInfoObj(this.prevWindow).windowId,o=this.getWinInfoObj(e).windowId;n.f.fireEvent(this,"onwindowchange",i,o)}var s=this.getSelectedIndex();if(s>-1&&s<this.windows.length){var r=this.windows[s],h=(window.screen.availHeight-this.getSize("height"))/2,d=(window.screen.availWidth-this.getSize("width"))/2,c={id:r.id,type:"window",width:this.getSize("width")+"px",height:this.getSize("height")+"px",top:h+"px",left:d+"px",popupName:r.title,modal:!1,useIFrame:!1,style:"",resizable:!0,status:!1,menubar:!1,scrollbars:!0,title:!1,srcData:"",destData:""};l.Z.openPopup(r.window.options.src,c),this.options.closeWindowOnPopup&&r.window.forceClose()}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.selectWindow=function(){try{if(0==this.dom.window.offsetWidth||0==this.dom.window.offsetHeight)return;for(var t=0;t<this.windows.length;t++){var e=this.windows[t].id,i=document.getElementById(this.id+"_nameLayer_"+e),o=document.getElementById(e+"_header"),s=document.getElementById(e);this.removeClass(i,"w2windowContainer_selectedNameLayer"),this.removeClass(o,"w2window_selected_header"),this.removeClass(s,"w2window_selected")}if(null!=this.nowWindow){var r=this.getWinInfoObj(this.nowWindow);!0!==this.options.foldOnMinimized&&(r.window.windowInfo.minimized=!1),this.options.skipZIndex?this.zIndexFlagInfo[r.id]?(r.window.setStyle("display","block"),this.increaseZIndex(r.window),"maximized"===r.window.windowInfo.status&&void 0===this.arrangeHistory&&r.window.render.setAttribute("aria-modal","true")):(r.window.setStyle("display","none"),r.window.setStyle("zIndex",0)):(r.window.setStyle("display","block"),this.increaseZIndex(r.window),this._displayOnlyTopWindow&&(this.options.windowMaximizeAll?"maximized"===r.window.windowInfo.status&&this.displayOnlyTopWindow():this.displayOnlyTopWindow()));i=document.getElementById(this.id+"_nameLayer_"+this.nowWindow),o=document.getElementById(this.nowWindow+"_header"),s=document.getElementById(this.nowWindow);if(this.addClass(i,"w2windowContainer_selectedNameLayer"),this.addClass(o,"w2window_selected_header"),this.addClass(s,"w2window_selected"),"hide"==this.options.nameScrollMode){var n=0,l=this.dom.nameBar.offsetWidth,h=this.selectedIndex;if(this.addHistory(this.nowWindow),this.refreshSelectedIndex(),h>this.selectedIndex)for(t=h;t>=0;t--){var d=this.windows[t].id;"block"!=(c=document.getElementById(this.id+"_nameLayer_"+d)).style.display&&(c.style.display="block")}for(t=this.selectedIndex;t>=0;t--){var c;d=this.windows[t].id;if("none"!=(c=document.getElementById(this.id+"_nameLayer_"+d)).style.display){var u=WebSquare.style.getStyle(c,"margin-left");u="auto"===u?"0":u;var p=WebSquare.style.getStyle(c,"margin-right");p="auto"===p?"0":p;var g=c.offsetWidth+parseInt(u,10)+parseInt(p,10);n+g>=l?c.style.display="none":n+=g}}}else if(this.options.useNameScroll){
if("allright"==this.options.controlIconPosition)var m=this.dom.nameContainer.offsetLeft,f=this.dom.control.offsetLeft,b=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,y=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;else m=this.dom.leftScrollBtn.offsetLeft+this.dom.leftScrollBtn.offsetWidth,f=this.dom.rightScrollBtn.offsetLeft,b=parseInt(this.dom.nameBar.style.left)+i.offsetLeft,y=parseInt(this.dom.nameBar.style.left)+i.offsetLeft+i.offsetWidth;if(b>f||y>f)this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-(y-f)+"px";else if(b<m||y<m){var v=this.options.nameLayerMenu||this.options.useNameContainer&&"right"==this.options.controlIconPosition?0:this.dom.control.offsetWidth;"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft-i.offsetLeft+"px":this.dom.nameBar.style.left=v+this.dom.leftScrollBtn.offsetWidth-i.offsetLeft+"px"}this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.addHistory(this.nowWindow),this.refreshSelectedIndex()}else this.selectedIndex=-1}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.addHistory=function(t){try{for(var e=null,i=0;i<this.selectedWindowHistory.length;i++)this.selectedWindowHistory[i]==t&&(e=i);null!=e&&this.selectedWindowHistory.splice(e,1),this.selectedWindowHistory.push(t)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._insertSelectedWindowHistory=function(t){try{if(this.options.includeMinimizeWindow){for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t)return;this.selectedWindowHistory.splice(1,0,t)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.increaseZIndex=function(t){try{if(!this.options.skipZIndex&&this.options.swapZIndex&&t.zIndex>0){var e=t.zIndex;if(e<this.maxZIndex){for(var i=0;i<this.windows.length;i++)if(this.windows[i].id!=t.id){var o=this.windows[i].window.zIndex,s=o-2;e<o&&s>1&&(this.windows[i].window.setStyle("zIndex",s),this.windows[i].window.zIndex=s)}t.setStyle("zIndex",this.maxZIndex),t.zIndex=this.maxZIndex}}else this.maxZIndex+=2,t.setStyle("zIndex",this.maxZIndex),this.options.swapZIndex&&(t.zIndex=this.maxZIndex),this.windowList&&(this.windowList.render.style.zIndex=this.maxZIndex+2),this.options.nameLayerMenu?this.getElementById(this.id+"_nameContainer").style.zIndex=this.maxZIndex:this.dom.toolBar.style.zIndex=this.maxZIndex}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.displayOnlyTopWindow=function(){try{for(var t=this.windows.length,e=this.nowWindow,i=0;i<t;i++){var o=this.windows[i].id,s=this.getWinInfoObj(o);o!=e&&"maximized"==s.window.windowInfo.status&&s.window.setStyle("display","none")}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setZIndex=function(t){try{var e=this.windows[t];e&&(e.window.setStyle("display","block"),this.increaseZIndex(e.window),this.zIndexFlagInfo[e.id]=!0)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.selectNameLayer=function(t){try{for(var e=0;e<this.selectedWindowHistory.length;e++)if(this.selectedWindowHistory[e]==t){this.prevWindow=this.nowWindow;var i=t;if(i!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=i),this.selectWindow(),this.prevWindow!=i){var o=null;this.prevWindow&&(o=this.getWinInfoObj(this.prevWindow).windowId);var s=this.getWinInfoObj(i).windowId;n.f.fireEvent(this,"onwindowchange",o,s)}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doVerticalArrange=function(t){try{var e=0,i=2,o=[],s=[];if(t){for(var r=0;r<t.length;r++)for(var n=0;n<this.windows.length;n++){if((l=this.windows[n]).windowId==t[r]){o.push(l);break}}for(r=0;r<this.windows.length;r++){var l=this.windows[r],h=!0;for(n=0;n<t.length;n++)if(l.windowId==t[n]){h=!1;break}h&&s.push(l)}}else o=this._getOpenedWindows();var d=o.length;d<this.options.lineBreakNum?(i=1,e=d):(i=2,e=Math.ceil(d/i));var c,u,p="",g=0,m=0;for(r=0;r<s.length;r++)s[r].window.minimize(!0);for(r=0;r<d;r++){var f=o[r],b=f.window,y=b.resizeParentGroup()
;c=parseInt(y.width/e,10),u=parseInt(y.height/i,10),b.restore(),b.setSize(c-(b.getSize("outerMarginWidth")-b.getSize("width")),u-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*c,m*u),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!0===this.options.accessibility&&this._setVisibleWindows("vertical"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="vertical",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doVerticalFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(r=this.windows[e]).isFix||(r.window.windowInfo.minimized?this._selectWindowOnly(r.id):t[r.id]=r)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var o=i[e];void 0!==t[o]&&this._selectWindowOnly(t[o].id)}var s=l.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var r=this.fixedWindowArr[e];if(this._selectWindowOnly(r.id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute(s)===this.fixedWindowArr[e].id){0!=n&&this.moveNameLayer(n,0);break}}var h=this.windows.length,d=!0===this.options.accessibility?h:this.options.verticalArrangeNum;this.options.fixArrangeFullScreen&&(d=d>h?h:d);var c=0,u=0,p=0;if(!0===this.options.accessibility){this._setVisibleWindows("vertical");for(e=0;e<this.windows.length;e++){var g=(m=(r=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();u=parseInt(g.width/d,10),p=parseInt(g.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(c*u,0*p),++c==d&&(c=0)}}else if("none"==this.options.positionX)for(e=this.selectedWindowHistory.length;e>0;e--){g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/d,10),p=parseInt(g.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(c*u,0*p),++c==d&&(c=0)}else if("left"==this.options.positionX)for(e=this.selectedWindowHistory.length;e>0;e--){g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/d,10),p=parseInt(g.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(c*u,0*p),++c==d&&(c=1)}else if("right"==this.options.positionX){c=d-1;for(e=this.selectedWindowHistory.length;e>0;e--){var m;g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/d,10),p=parseInt(g.height/1,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(c*u,0*p),++c==d&&(c=0),c==d-1&&(c=0)}}!0===this.options.accessibility?this.focusWindowId=this.nowWindow:this.selectNameLayer(this.selectedWindowHistory[h-1]),this.arrangeHistory="vertical",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doHorizontalArrange=function(t){try{var e=2,i=0,o=[],s=[];if(t){for(var r=0;r<t.length;r++)for(var n=0;n<this.windows.length;n++){if((h=this.windows[n]).windowId==t[r]){o.push(h);break}}for(r=0;r<this.windows.length;r++){var l=!0,h=this.windows[r];for(n=0;n<t.length;n++)if(h.windowId==t[n]){l=!1;break}l&&s.push(h)}}else o=this._getOpenedWindows();var d=o.length;d<this.options.lineBreakNum?(i=d,e=1):(i=Math.ceil(d/e),e=2);var c,u,p="",g=0,m=0;for(r=0;r<s.length;r++)s[r].window.minimize(!0);for(r=0;r<d;r++){var f=o[r],b=f.window,y=b.resizeParentGroup();c=parseInt(y.width/e,10),u=parseInt(y.height/i,10),b.restore(),
b.setSize(c-(b.getSize("outerMarginWidth")-b.getSize("width")),u-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(g*c,m*u),++g==e&&(g=0,m++),p=f.id,this.addHistory(p)}!0===this.options.accessibility&&this._setVisibleWindows("horizontal"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(p),this.arrangeHistory="horizontal",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doHorizontalFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(r=this.windows[e]).isFix||(r.window.windowInfo.minimized?this._selectWindowOnly(r.id):t[r.id]=r)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var o=i[e];void 0!==t[o]&&this._selectWindowOnly(t[o].id)}var s=l.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var r=this.fixedWindowArr[e];if(this._selectWindowOnly(r.id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute(s)===this.fixedWindowArr[e].id){0!=n&&this.moveNameLayer(n,0);break}}var h=this.windows.length,d=!0===this.options.accessibility?h:this.options.horizontalArrangeNum;this.options.fixArrangeFullScreen&&(d=d>h?h:d);var c=0,u=0,p=0;if(!0===this.options.accessibility)for(e=0;e<this.windows.length;e++){var g=(m=(r=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();u=parseInt(g.width/1,10),p=parseInt(g.height/d,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,c*p),++c==d&&(c=0)}else if("none"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/1,10),p=parseInt(g.height/d,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,c*p),++c==d&&(c=0)}else if("top"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/1,10),p=parseInt(g.height/d,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,c*p),++c==d&&(c=1)}else if("bottom"==this.options.positionY){c=d-1;for(e=this.selectedWindowHistory.length;e>0;e--){var m;g=(m=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();u=parseInt(g.width/1,10),p=parseInt(g.height/d,10),m.restore(),m.setSize(u-(m.getSize("outerMarginWidth")-m.getSize("width")),p-(m.getSize("outerMarginHeight")-m.getSize("height"))),m.setPosition(0*u,c*p),++c==d&&(c=0),c==d-1&&(c=0)}}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("horizontal")):this.selectNameLayer(this.selectedWindowHistory[h-1]),this.arrangeHistory="horizontal",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doCascadeArrange=function(){try{var t,e,i="",o=this._getOpenedWindows(),s=o.length;if(!0===this.options.accessibility){for(var r=0;r<this.selectedWindowHistory.length;r++){var n=this.getWinInfoObj(this.selectedWindowHistory[r]).window;if(0==r){var l=n.resizeParentGroup();t=parseInt(l.width-200,10),e=parseInt(l.height-200,10)}n.restore(),n.setSize(t-(n.getSize("outerMarginWidth")-n.getSize("width")),e-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(r%10*20,r%10*20),i=n.id}this._setVisibleWindows("cascade")}else for(r=0;r<s;r++){var h=o[r];n=h.window;if(0==r){l=n.resizeParentGroup();t=parseInt(l.width-200,10),e=parseInt(l.height-200,10)}n.restore(),
n.setSize(t-(n.getSize("outerMarginWidth")-n.getSize("width")),e-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(r%10*20,r%10*20),i=h.id,this._insertSelectedWindowHistory(i)}!1===this.options.keepSelectedWindow&&this.selectNameLayer(i),this.arrangeHistory="cascade",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doCascadeFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(r=this.windows[e]).isFix||(r.window.windowInfo.minimized?this._selectWindowOnly(r.id):t[r.id]=r)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var o=i[e];void 0!==t[o]&&this._selectWindowOnly(t[o].id)}var s=l.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var r=this.fixedWindowArr[e];if(this._selectWindowOnly(r.id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute(s)===this.fixedWindowArr[e].id){0!=n&&this.moveNameLayer(n,0);break}}var h=this.windows.length,d=0,c=0;if(!0===this.options.accessibility)for(e=h-1;e>=0;e--){var u=(r=this.getWinInfoObj(this.windows[e].id)).window;if(e==h-1){var p=u.resizeParentGroup();d=parseInt(p.width-200,10),c=parseInt(p.height-200,10)}u.restore(),u.setSize(d-(u.getSize("outerMarginWidth")-u.getSize("width")),c-(u.getSize("outerMarginHeight")-u.getSize("height"))),u.setPosition(e%10*20,e%10*20),this.setZIndex(e)}else for(e=this.selectedWindowHistory.length;e>0;e--){u=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window;if(e==this.selectedWindowHistory.length){p=u.resizeParentGroup();d=parseInt(p.width-200,10),c=parseInt(p.height-200,10)}u.restore(),u.setSize(d-(u.getSize("outerMarginWidth")-u.getSize("width")),c-(u.getSize("outerMarginHeight")-u.getSize("height"))),u.setPosition((e-1)%10*20,(e-1)%10*20)}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("cascade")):this.selectNameLayer(this.selectedWindowHistory[h-1]),this.arrangeHistory="cascade",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doSequentialArrange=function(){try{for(var t,e,i=1,o=1,s=!0,r=this._getOpenedWindows(),n=r.length;s;)i*o<n?i==o?i++:o++:s=!1;for(var l="",h=0,d=0,c=0;c<n;c++){var u=r[c],p=u.window;if(0==c){var g=p.resizeParentGroup();t=parseInt(g.width/i,10),e=parseInt(g.height/o,10)}p.restore(),p.setSize(t-(p.getSize("outerMarginWidth")-p.getSize("width")),e-(p.getSize("outerMarginHeight")-p.getSize("height"))),p.setPosition(h*t,d*e),++h==i&&(h=0,d++),l=u.id,this._insertSelectedWindowHistory(l)}!0===this.options.accessibility&&this._setVisibleWindows("sequential"),!1===this.options.keepSelectedWindow&&this.selectNameLayer(l),this.arrangeHistory="sequential",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doSequentialFixArrange=function(){try{for(var t={},e=0;e<this.windows.length;e++){(r=this.windows[e]).isFix||(r.window.windowInfo.minimized?this._selectWindowOnly(r.id):t[r.id]=r)}var i=this.selectedWindowHistory.slice();for(e=0;e<this.selectedWindowHistory.length;e++){var o=i[e];void 0!==t[o]&&this._selectWindowOnly(t[o].id)}var s=l.Z.getDataPrefix("refId");for(e=0;e<this.fixedWindowArr.length;e++){var r=this.fixedWindowArr[e];if(this._selectWindowOnly(r.id),this.options.nameLayerRearrange)for(var n=0;n<this.dom.nameBar.childNodes.length;n++)if(this.dom.nameBar.childNodes[n].getAttribute(s)===this.fixedWindowArr[e].id){0!=n&&this.moveNameLayer(n,0);break}}var h=this.options.sequentialArrangeRowNum,d=this.options.sequentialArrangeColNum,c=this.windows.length;this.options.fixArrangeFullScreen&&(h=(d=d>c?c:d)>c?1:h);var u=0,p=0,g=0,m=0;if(!0===this.options.accessibility)for(e=0;e<this.windows.length;e++){
var f=(b=(r=this.getWinInfoObj(this.windows[e].id)).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),++u==d&&(u=0,++p==h&&(p=0))}else if("none"==this.options.positionX&&"none"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){f=(b=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),++u==d&&(u=0,++p==h&&(p=0))}else if("left"==this.options.positionX&&"top"==this.options.positionY)for(e=this.selectedWindowHistory.length;e>0;e--){f=(b=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),++u==d&&(u=0,++p==h&&(u=1,p=0))}else if("right"==this.options.positionX&&"top"==this.options.positionY){u=d-1;for(e=this.selectedWindowHistory.length;e>0;e--){f=(b=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),u++,0==p&&u==d-1&&(p++,u=0),u==d&&(u=0,0!=p&&++p==h&&(p=0))}}else if("left"==this.options.positionX&&"bottom"==this.options.positionY){p=h-1;for(e=this.selectedWindowHistory.length;e>0;e--){f=(b=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),p==h-1&&0==u?(u=0,p=0):++u==d&&(u=0,++p==h-1?u=1:p==h&&(p=0))}}else if("right"==this.options.positionX&&"bottom"==this.options.positionY){u=d-1,p=h-1;for(e=this.selectedWindowHistory.length;e>0;e--){var b;f=(b=(r=this.getWinInfoObj(this.selectedWindowHistory[e-1])).window).resizeParentGroup();g=parseInt(f.width/d,10),m=parseInt(f.height/h,10),b.restore(),b.setSize(g-(b.getSize("outerMarginWidth")-b.getSize("width")),m-(b.getSize("outerMarginHeight")-b.getSize("height"))),b.setPosition(u*g,p*m),u++,p!=h-1||u!=d-1&&u!=d||(u=0,p=0),u==d&&(u=0,p++)}}!0===this.options.accessibility?(this.focusWindowId=this.nowWindow,this._setVisibleWindows("sequential")):this.selectNameLayer(this.selectedWindowHistory[c-1]),this.arrangeHistory="sequential",!0===this.options.accessibility&&(this._unsetAllAriaLabel(),this._setAriaLabel())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doCloseAll=function(){try{if(!1!==n.f.fireEvent(this,"onbeforecloseall")){for(var t=this.windows.length-1;t>=0;t--)this.options.useFixButton?("fixedWindow"==this.options.closeType&&!0===this.windows[t].isFix||"noneFixedWindow"==this.options.closeType&&!1===this.windows[t].isFix||"all"==this.options.closeType)&&(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close()):(this.selectNameLayer(this.windows[t].id),this.windows[t].window.close());this.selectedIndex=-1}if(this.options.accessibility){this._unsetAllAriaLabel("closeAll")}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.doMaximizeAll=function(){var t,e=[],i=[];if(this.options.includeMinimizeWindow){t=this.nowWindow;for(var o=0;o<this.windows.length;o++){for(var s=!0,r=0;r<this.selectedWindowHistory.length;r++)if(this.selectedWindowHistory[r]==this.windows[o].id){s=!1;break}s&&(e.push(this.windows[o]),i.push(this.windows[o].id))}}
for(o=0;o<this.selectedWindowHistory.length;o++)for(r=0;r<this.windows.length;r++)if(this.selectedWindowHistory[o]==this.windows[r].id){e.push(this.windows[r]);break}for(o=0;o<e.length;o++)("maximized"!==e[o].window.windowInfo.status||this.options.includeMinimizeWindow&&!0===e[o].window.windowInfo.minimized)&&e[o].window.maximize();this.options.includeMinimizeWindow&&t&&this.addHistory(t),this.arrangeHistory=""},c.prototype.isExistWindow=function(t){try{for(var e=0;e<this.windows.length;e++){if(t==this.windows[e].title)return!0}return!1}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setSize=function(t,e){try{parseInt(t)<450&&(t=450),parseInt(e)<150&&(e=150);var i=this.getSize("width"),o=this.getSize("height"),s=t/i,r=e/o;this.setStyle("width",t+"px"),this.setStyle("height",e+"px");for(var n=0;n<this.windows.length;n++){var l=this.windows[n];if(l.window.resizeParentGroup(),this.options.windowAutoResize&&"maximized"!=l.window.windowInfo.status){var h=l.window,d=h.getSize("width"),c=h.getSize("height"),u=parseInt(h.getStyle("left"),10),p=parseInt(h.getStyle("top"),10),g=Math.ceil(d*s),m=Math.ceil(c*r),f=Math.ceil(u*s),b=Math.ceil(p*r);l.window.setSize(g,m),l.window.setStyle("left",f+"px"),l.window.setStyle("top",b+"px")}this.options.useNameScroll&&(this.dom.rightScrollBtn.style.left=parseInt(this.render.offsetWidth)-20+"px")}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.checkResize=function(){try{var t=this.render?this.render.offsetWidth:null;null!=this.bWidth&&t!=this.bWidth&&this.nameLayerResize(),this.bWidth=t}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.nameLayerResize=function(t){try{var e=this.options.nameLayerMenu?0:this.dom.control.offsetWidth+2;if(!this.options.toolbarWidth){var i=this.render.offsetWidth,o=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"left")),s=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"right"));isNaN(o)||(i-=o),isNaN(s)||(i-=s),i<this.dom.nameBar.scrollWidth+e?(this.options.useNameScroll=!0,this.dom.rightScrollBtn.style.left=parseInt(this.getSize("width"))-20+"px",this.dom.rightScrollBtn.style.display="block",this.dom.leftScrollBtn.style.display="block","allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.control.offsetLeft-this.dom.nameBar.offsetWidth+"px":this.dom.nameBar.style.left=this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth+"px"):(this.options.useNameScroll=!1,this.options.useNameContainer?this.dom.nameBar.style.left="0px":this.dom.nameBar.style.left=e+"px",this.dom.rightScrollBtn.style.display="none",this.dom.leftScrollBtn.style.display="none")}if("hide"==this.options.nameScrollMode)for(var r=0;r<this.windows.length;r++){var n=this.windows[r].id,l=document.getElementById(this.id+"_nameLayer_"+n);"none"==l.style.display&&(l.style.display="block")}this.selectWindow()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowMaxNum=function(t){try{if(!t||"number"!=typeof t)return!1;this.options.windowMaxNum=t}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.createWindowList=function(t){if(!this.windowList){var e="";e+="<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' class='w2windowContainer_window_list' labelCheck='true' visibleRowNum='"+this.options.windowScrollVisibleRowNum+"' useCloseButton='"+this.options.useWindowScrollButton+"'>",e+="    <w2:listRow tagName='div' style='' class='w2windowContainer_window_list_listRow' >",e+="        <w2:listColumn id='title' inputType='text' style='' class='w2windowContainer_window_list_listColumn_text'/>",e+="    </w2:listRow>",e+="</w2:list>";var i=WebSquare.xml.parse(e,!0).documentElement;this.windowList=new WebSquare.uiplugin.list(this.id+"_windows_list","",i);var o=this,s=l.Z.getDataPrefix("unique_id");this.windowList.options.xmlEvents=[{name:"onrowclick",action:"script",param:{handler:function(t,e){!function(t,e){if(e&&e.target){var i,r=e.target;if(r.className.match("w2list_listColumn_close")){i=r.parentElement.getAttribute(s)
;for(var a="",n=0;n<o.windows.length;n++)if(o.windows[n][s]===i){a=o.windows[n].windowId,o.windowList.removeRow(n);break}a&&(o.windows.length<2?o.hideWindowList():o.showWindowList(!0),o.closeWindow(a))}else{if(r.className.match("w2windowContainer_window_list_listColumn_text"));else if(!r.className.match("w2windowContainer_window_list_listRow"))return void(o.dom.iconWindowList!==r&&this.render!==r&&o.hideWindowList());for(i=r.parentElement.getAttribute(s),a="",n=0;n<o.windows.length;n++)if(o.windows[n][s]===i){a=o.windows[n].id;break}if(!a)return void o.hideWindowList();o.listToggle=!1,(e={}).stopToggleOnLast=o.options.stopToggleOnLast,o.clickNameLayer(a,o.options.stopMinimizeOnNameLayer,e),o.hideWindowList()}}}(0,e)}}},{name:"onmousedown",action:"script",param:{handler:function(t){n.f.stopPropagation(t)}}},{name:"onmousewheel",action:"script",param:{handler:function(t){n.f.stopPropagation(t)}}}],this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showWindowList,fnHide:this._hideWindowList,paramHide:{documentClick:!0},event:{}}),this.windowList.setJSON(this.windows)}},c.prototype.showWindowList=function(t){try{this.windowList||t||(!0===this.options.accessibility?this.setSubLayer():this.createWindowList()),t||(!0===this.options.accessibility?this.windowList.setItemArr(this.windows):this.windowList.setJSON(this.windows),WebSquare.getBody().getLayerListener().show(this.id))}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._showWindowList=function(t){try{this.windowList.show(),this.windowList.render.style.zIndex=this.maxZIndex+2,!0===this.options.accessibility?this.windowList.options.rowHeight=this.windowList.render.firstChild.firstChild.offsetHeight:(this.windowList.options.rowHeight=this.windowList.render.firstChild.offsetHeight,this.windowList.adjustRender());var e=this.dom.iconWindowList,i=WebSquare.style.getRelativeTop(this.dom.toolBar,this.render.offsetParent),o=WebSquare.style.getAbsoluteLeft(e,this.render),s="top"===this.options.toolbarPosition?i+this.dom.iconWindowList.clientHeight+4:i-this.windowList.render.clientHeight,r=e.clientWidth+WebSquare.style.getAbsoluteLeft(e)-this.windowList.render.offsetWidth,n=!this.options.useNameContainer||"right"!==this.options.controlIconPosition&&"allright"!==this.options.controlIconPosition?o:this.windows.length>this.windowList.options.visibleRowNum?r-18:r;this.windowList.setPosition(n,s),this.windowList.focus(),this.listToggle=!0}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.hideWindowList=function(){try{this.windowList&&this.windowList.id&&(WebSquare.getBody().getLayerListener().hide(this.id),this.listToggle=!1)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._hideWindowList=function(t){try{(t=t||{}).documentClick;this.windowList&&this.windowList.id&&(this.windowList.hide(),this.listToggle=!1)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.toggle=function(){try{this.listToggle?(!0===this.options.accessibility&&this.dom.iconWindowList.setAttribute("aria-expanded","false"),this.hideWindowList()):(!0===this.options.accessibility&&this.dom.iconWindowList.setAttribute("aria-expanded","true"),this.showWindowList())}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._selectedNameLayerAddTabIndex=function(t,e){try{var i=l.Z.getDataPrefix("refId"),o=document.getElementById(this.id+"_nameLayer_"+t);if(t){!0===e?o.setAttribute("tabindex","0"):o.setAttribute("tabindex","-1");for(var s=0;s<o.parentElement.childNodes.length;s++){var r=o.parentElement.childNodes[s];1===r.nodeType&&"BUTTON"===r.nodeName&&r.getAttribute(i)===t&&(!0===e?r.setAttribute("tabindex","0"):r.setAttribute("tabindex","-1"))}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._setVisibleWindowsAfterClose=function(t,e,i){try{var o=i;if(o.length<=1)return;for(var s=this._findBehindWindow(e),r=0;r<o.length;r++)if(e===o[r]){if(s.length>0&&"cascade"!==t){o[r]=s[0].value,
this.visibleWindows=o;break}o.splice(r,1);break}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._setVisibleWindows=function(t){try{var e=this.selectedWindowHistory.slice();if(e.length<=0)return;var i=[],o=0;if("vertical"===t)if(this.options.useFixButton&&this.options.verticalArrangeNum>0){o=this.options.verticalArrangeNum;for(var s=e.length-1;s>=0;s--)o>0&&(i.push(e[s]),o--)}else{o=e.length;for(s=0;s<e.length;s++)o>0&&(i.push(e[s]),o--)}else if("horizontal"===t)if(this.options.useFixButton&&this.options.horizontalArrangeNum>0){o=this.options.horizontalArrangeNum;for(s=e.length-1;s>=0;s--)o>0&&(i.push(e[s]),o--)}else{o=e.length;for(s=0;s<e.length;s++)o>0&&(i.push(e[s]),o--)}else if("sequential"===t)if(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0){o=this.options.sequentialArrangeRowNum*this.options.sequentialArrangeColNum;for(s=e.length-1;s>=0;s--)o>0&&(i.push(e[s]),o--)}else{o=e.length;for(s=0;s<e.length;s++)o>0&&(i.push(e[s]),o--)}else if("cascade"===t)if(this.options.useFixButton){o=e.length;for(s=0;s<e.length;s++)o>0&&(i.push(e[s]),o--)}else{o=e.length;for(s=0;s<e.length;s++)o>0&&(i.push(e[s]),o--)}else i.push(e[e.length-1]);this.visibleWindows=i}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setSubLayer=function(){try{if(null==this.windowList){this.windowList=new WebSquare.uiplugin.itemTable(this.id+"_itemTable",{row:this.options.windowScrollVisibleRowNum,col:1,submenuSize:"auto",style:"position:absolute;",defaultStyle:"",className:"w2table ",w2table:"w2table_accessibility",w2table_main:"w2table_accessibility_main",w2table_row:"w2table_accessibility_row",w2table_col:"w2table_accessibility_col",tableRender:this.options.tableRender,parentPluginName:"windowContainer",useCloseButton:this.options.useCloseButton,useAccessibilityMenu:this.options.useAccessibilityMenu,parent_uuid:this.uuid});var t=this;this.windowList.handleKeydownEvent=function(e){return t.itemTableHandleKeydownEvent(e)},this.windowList.handleClickEvent=function(e){return t.itemTableHandleClickEvent(e)},this.windowList.writeTo(WebSquare.getBody()),this.windowList.activate(),WebSquare.getBody().getLayerListener().addListener({component:this,fnShow:this._showWindowList,fnHide:this._hideWindowList,paramHide:{documentClick:!0},event:{}}),this.windowList.setItemArr(this.windows),!0===this.options.accessibility&&this.windowList&&(this.windowList.render.setAttribute("aria-modal","true"),this.windowList.render.setAttribute("role","dialog"))}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._findNameLayerLastIcon=function(t){try{for(var e,i=l.Z.getDataPrefix("refId"),o=document.getElementById(this.id+"_nameLayer_"+t),s=o.parentElement.childNodes.length-1;s>=0;s--){if(1===o.parentElement.childNodes[s].nodeType&&"BUTTON"===o.parentElement.childNodes[s].nodeName&&o.parentElement.childNodes[s].getAttribute(i)===t){e=o.parentElement.childNodes[s];break}e=o;break}return e}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._KeydownNameLayerMove=function(t,e){try{var i=this.nowWindow,o=this.windows[t].id,s=document.getElementById(this.id+"_nameLayer_"+o);if(this._selectedNameLayerAddTabIndex(i,!1),this._selectedNameLayerAddTabIndex(o,!0),!0===e)this._findNameLayerLastIcon(o).focus();else s.focus()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._findBehindWindow=function(t){try{for(var e=document.getElementById(t),i=parseInt(WebSquare.style.getStyle(e,"top").wq_replaceAll("px",""),10),o=parseInt(WebSquare.style.getStyle(e,"left").wq_replaceAll("px",""),10),s=[],r=0;r<this.windows.length;r++){var n=document.getElementById(this.windows[r].id),l=parseInt(WebSquare.style.getStyle(n,"top").wq_replaceAll("px",""),10),h=parseInt(WebSquare.style.getStyle(n,"left").wq_replaceAll("px",""),10),d=parseInt(WebSquare.style.getStyle(n,"z-index").wq_replaceAll("px",""),10);e!==n&&i===l&&o===h&&s.push({zIndex:d,value:this.windows[r].id})}return s.sort((function(t,e){return e.zIndex-t.zIndex})),s
}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.showTooltip=function(t,e){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null);var i=this;this.timeShowTooltip=setTimeout(this.event.bindAsEventListener(this,(function(){try{var o=r.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(o){var s=l.Z.getGlobalFunction(o,i.scope_id),n=!0;if("function"==typeof s&&(n=s(i)),!n)return}}catch(t){a.Y.printStackTrace(t)}if(this.tooltip||(this.tooltip=new WebSquare.uiplugin.group(this.id+"_tooltip",{className:"w2windowContainer_tooltip "+this.options.tooltipClass}),this.tooltip.writeTo(WebSquare.getBody(),null,this.parentFrame),this.tooltip.activate(),this.options.tooltipGroupClass||this.tooltip.removeClass("w2group")),"block"!=this.tooltip.render.style.display){this.tooltip.setStyle("display","block"),this.tooltip.render.innerHTML=e;var h,d=WebSquare.style.getAbsoluteLeft(t)+t.offsetWidth/2;h="bottom"===this.options.toolbarPosition?WebSquare.style.getAbsoluteTop(t)-this.tooltip.render.offsetHeight:WebSquare.style.getAbsoluteTop(t)+this.tooltip.render.offsetHeight,this.tooltip.setStyle("zIndex",this.maxZIndex),this.tooltip.setStyle("left",d+"px"),this.tooltip.setStyle("top",h+"px")}})),1e3*this.options.tooltipTime)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.hideTooltip=function(){try{null!=this.timeShowTooltip&&(clearTimeout(this.timeShowTooltip),this.timeShowTooltip=null),this.tooltip&&this.tooltip.setStyle("display","none")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowSize=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var r=this.windows[s],n=r.window;r.id==this.nowWindow&&(n.windowInfo.width=i,n.windowInfo.height=o,n.restore())}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.restoreWindowSize=function(t){try{for(var e=0;e<this.windows.length;e++){var i=this.windows[e],o=i.window;if(i.windowId==t){o.restore();break}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowPosition=function(t,e){try{for(var i=parseInt(t,10)+"px",o=parseInt(e,10)+"px",s=0;s<this.windows.length;s++){var r=this.windows[s],n=r.window;if(r.id==this.nowWindow){n.windowInfo.left=i,n.windowInfo.top=o,n.windowInfo.status="restored",n.windowInfo.minimized=!1,n.windowInfo.getInfo(n.render);break}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.closeWindow=function(t){try{var e=this.getWinInfoObj(t,"windowId"),i="";i=null==e?this.nowWindow:e.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],r=s.window;if(s.id==i){this.multiViewIdArr.length>0&&this.setSingleView(),r.close();break}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.closeOthers=function(t){try{var e,i=this.getWinInfoObj(t)||this.getWinInfoObj(t,"windowId");e=null==i?this.nowWindow:i.id;for(var o=0;o<this.windows.length;o++){var s=this.windows[o],r=s.window;s.id!=e&&r.close()}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowStatusMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setStatusMsg(t);break}}else if(o.id==this.nowWindow){s.setStatusMsg(t);break}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setWindowCustomMsg=function(t,e){try{for(var i=0;i<this.windows.length;i++){var o=this.windows[i],s=o.window;if(e){if(o.title==e){s.setCustomMsg(t);break}}else if(o.id==this.nowWindow){s.setCustomMsg(t);break}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setAllWindowStatusMsg=function(t){try{for(var e=0;e<this.windows.length;e++){this.windows[e].window.setStatusMsg(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getWindow=function(t){try{var e=r.I.getConfiguration("/WebSquare/windowContainer/getWindow/@searchTarget")||"title",i="title"===e;return this.getWindowByTarget(t,e,{focus:i})}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getFrame=function(t){try{
return this.getWindowByTarget(t,"windowId",{focus:!1,frame:!0})}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._getCurrentFrame=function(){return this.getWindowByTarget(this.getSelectedWindowId(),"windowId",{focus:!1,frame:!0})},c.prototype.getWindowByWindowId=function(t,e){try{return this.getWindowByTarget(t,"windowId",{focus:e})}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getWindowByTarget=function(t,e,i){try{void 0!==i&&null!=i||(i={});for(var o=l.Z.getBoolean(i.focus),s=0;s<this.windows.length;s++){var r=this.windows[s];if(t==r[e]){if(1==o&&(this.beforeWindow=this.nowWindow,this.nowWindow=r.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var h=this.getWinInfoObj(this.beforeWindow).windowId,d=this.getWinInfoObj(this.nowWindow).windowId;n.f.fireEvent(this,"onwindowchange",h,d)}return!0===i.frame?r.window.frame:r.window.frame.getWindow()}}return null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getWindowByUniqueId=function(t,e){try{e=l.Z.getBoolean(e);for(var i=0;i<this.windows.length;i++){var o=this.windows[i];if(t==o.id){if(1==e&&(this.beforeWindow=this.nowWindow,this.nowWindow=o.id,this.selectWindow(),this.beforeWindow!=this.nowWindow)){var s=this.getWinInfoObj(this.beforeWindow).windowId,r=this.getWinInfoObj(this.nowWindow).windowId;n.f.fireEvent(this,"onwindowchange",s,r)}return o.window.frame.getWindow()}}return null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getUniqueIdByTitle=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.title&&e.push(o.id)}return e}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getUniqueIdByWindowId=function(t){try{if(!t)return;for(var e=[],i=0;i<this.windows.length;i++){var o=this.windows[i];t==o.windowId&&e.push(o.id)}return e}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.showModal=function(){try{this.modal||(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",this.render.appendChild(this.modal)),this.modal&&(this.modal.style.display="block",this.modal.style.zIndex=this.maxZIndex-1)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.hideModal=function(){try{this.modal&&(this.modal.style.display="none")}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.moveNameLayerScroll=function(t){try{if(this.options.changeActiveWindow){var e=this.selectedIndex;if("right"==t&&e>=0&&e<this.windows.length-1?e++:"left"==t&&e>0&&e<=this.windows.length-1&&e--,e!=this.selectedIndex){var i=this.windows[e].id,o={};o.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(i,this.options.stopMinimizeOnNameLayer,o)}}else if("hide"==this.options.nameScrollMode){for(var s=0,r=0;r<this.windows.length;r++){var n=this.windows[r].id,l=document.getElementById(this.id+"_nameLayer_"+n),h=WebSquare.style.getStyle(l,"margin-left");h="auto"===h?"0":h;var d=WebSquare.style.getStyle(l,"margin-right");d="auto"===d?"0":d;var c=l.offsetWidth+parseInt(h,10)+parseInt(d,10);"none"!=l.style.display&&(s+=c)}if("right"==t){if(this.dom.nameBar.offsetWidth>s)return;for(r=0;r<this.windows.length;r++){n=this.windows[r].id;if("none"!=(l=document.getElementById(this.id+"_nameLayer_"+n)).style.display&&r!=this.windows.length-1){l.style.display="none";break}}}else for(r=this.windows.length-1;r>=0;r--){n=this.windows[r].id;if("none"==(l=document.getElementById(this.id+"_nameLayer_"+n)).style.display){l.style.display="block";break}}}else{var u=parseInt(this.options.nameLayerMoveGap,10)||110;if("right"==t){var p="";p="allright"===this.options.controlIconPosition?this.dom.nameContainer.offsetWidth-this.dom.nameBar.offsetWidth:this.dom.rightScrollBtn.offsetLeft-this.dom.nameBar.offsetWidth,parseInt(this.dom.nameBar.style.left)-u<p?this.dom.nameBar.style.left=p+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)-u+"px"
}else if(this.options.useNameContainer)parseInt(this.dom.nameBar.style.left)+u>this.dom.leftScrollBtn.offsetWidth?"allright"===this.options.controlIconPosition?this.dom.nameBar.style.left=this.dom.nameContainer.offsetLeft+"px":this.dom.nameBar.style.left=this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+u+"px";else{var g=this.options.nameLayerMenu?0:this.dom.control.offsetWidth;parseInt(this.dom.nameBar.style.left)+u>g+this.dom.leftScrollBtn.offsetWidth?this.dom.nameBar.style.left=g+this.dom.leftScrollBtn.offsetWidth+"px":this.dom.nameBar.style.left=parseInt(this.dom.nameBar.style.left)+u+"px"}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setFocus=function(t){try{var e=t;if("string"==typeof t){for(var i=0;i<this.windows.length;i++)this.windows[i].windowId===t&&this.selectNameLayer(this.windows[i].id);return}if(!this.windows[e])return;this.windows[e].id!==this.nowWindow&&this.selectNameLayer(this.windows[e].id)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getSelectedIndex=function(){return this.selectedIndex},c.prototype.getSelectedWindowId=function(){return this.windows[this.selectedIndex].windowId},c.prototype.refreshSelectedIndex=function(t){try{for(var e=t||this.nowWindow,i=0;i<this.windows.length;i++){this.windows[i].id==e&&(this.selectedIndex=i)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._keydownMoveWindow=function(t,e){try{var i=this.windows[this.getSelectedIndex()],o=document.getElementById(i.id),s=document.getElementById(o.id+"_restore"),r=parseInt(WebSquare.style.getStyle(o,"top").wq_replaceAll("px",""),10),n=parseInt(WebSquare.style.getStyle(o,"left").wq_replaceAll("px",""),10),l=parseInt(i.window.windowInfo.width,10),h=parseInt(i.window.windowInfo.height,10),d=parseInt(WebSquare.style.getStyle(this.dom.toolBar,"height").wq_replaceAll("px",""),10),c=parseInt(WebSquare.style.getStyle(this.render,"width").wq_replaceAll("px",""),10),u=parseInt(WebSquare.style.getStyle(this.render,"height").wq_replaceAll("px",""),10);if(u-=d,"restored"===i.window.windowInfo.status&&t&&(t===o||t===s)&&(t===s&&o.focus(),t===o||t===s))switch(e){case 37:--n>=0&&this.setWindowPosition(n,r);break;case 38:--r>=0&&this.setWindowPosition(n,r);break;case 39:l+ ++n<=c&&this.setWindowPosition(n,r);break;case 40:h+ ++r<=u&&this.setWindowPosition(n,r)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._selectWindowOnly=function(t){try{this.prevWindow=this.nowWindow;var e=t;e!=this.nowWindow&&(this.beforeWindow=this.nowWindow,this.nowWindow=e),this.selectWindow()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._getOpenedWindows=function(){try{for(var t=[],e={},i=0;i<this.windows.length;i++){var o=this.windows[i];this.options.includeMinimizeWindow?o.window.windowInfo.minimized?this._selectWindowOnly(o.id):e[o.id]=o:0==o.window.windowInfo.minimized&&t.push(o)}if(this.options.includeMinimizeWindow){var s=this.selectedWindowHistory.slice();for(i=0;i<this.selectedWindowHistory.length;i++){var r=s[i];void 0!==e[r]&&this._selectWindowOnly(e[r].id)}return this.windows}return t}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype._setAriaLabel=function(){try{var t=this.arrangeHistory?this.arrangeHistory:"",e="";switch(t){case"vertical":e=WebSquare.language.getMessage("WindowContainer_vertical_align_status")||"Vertical alignment selected";break;case"horizontal":e=WebSquare.language.getMessage("WindowContainer_horizontal_align_status")||"Horizontal alignment selected";break;case"cascade":e=WebSquare.language.getMessage("WindowContainer_cascade_align_status")||"Cascade alignment selected";break;case"sequential":e=WebSquare.language.getMessage("WindowContainer_tiled_align_status")||"Tiled alignment selected"}var i=function(t){if(t){var i=t.getAttribute("aria-label"),o=i.split(","),s=o[0]?o[0]:i;i=e?s+","+e:s,t.setAttribute("aria-label",i)}};i(this.dom.iconVertical),i(this.dom.iconHorizontal),i(this.dom.iconCascade),i(this.dom.iconSequential)}catch(t){
a.Y.printStackTrace(t,null,this)}},c.prototype._unsetAllAriaLabel=function(t){try{var e="";t&&"closeAll"==t?(e=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Vertical alignment,Empty state",this.dom.iconVertical.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Horizontal alignment,Empty state",this.dom.iconHorizontal.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Cascade alignment,Empty state",this.dom.iconCascade.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_empty_status")||"Tiled alignment,Empty state",this.dom.iconSequential.setAttribute("aria-label",e)):(e=WebSquare.language.getMessage("WindowContainer_vertical_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Vertical alignment,Current default view",this.dom.iconVertical.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_horizontal_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Horizontal alignment,Current default view",this.dom.iconHorizontal.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_cascade_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Cascade alignment,Current default view",this.dom.iconCascade.setAttribute("aria-label",e),e=WebSquare.language.getMessage("WindowContainer_tiled_align")+","+WebSquare.language.getMessage("WindowContainer_default_view_status")||"Tiled alignment,Current default view",this.dom.iconSequential.setAttribute("aria-label",e))}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleClickEvent=function(t){try{var e=l.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);for(this._hideWindowList();i.next();){if(i.match("w2windowContainer_controlIcon_customIcon"))return void n.f.fireEvent(this,"oncustomcontrolclick",i.getElement().id);if(i.match("w2windowContainer_controlIcon_vertical")&&(this.options.useFixButton&&this.options.verticalArrangeNum>0?this.doVerticalFixArrange():this.doVerticalArrange(),n.f.fireEvent(this,"onverticalarrange")),i.match("w2windowContainer_controlIcon_horizontal")&&(this.options.useFixButton&&this.options.horizontalArrangeNum>0?this.doHorizontalFixArrange():this.doHorizontalArrange(),n.f.fireEvent(this,"onhorizontalarrange")),i.match("w2windowContainer_controlIcon_cascade")&&(this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),n.f.fireEvent(this,"oncascadearrange")),i.match("w2windowContainer_controlIcon_sequential")&&(this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),n.f.fireEvent(this,"onsequentialarrange")),i.match("w2windowContainer_controlIcon_closeAll")&&this.doCloseAll(),i.match("w2windowContainer_controlIcon_maximize")){var o=this.getSelectedIndex();if(o>-1&&o<this.windows.length){var s=this.windows[o];"maximized"==s.window.windowInfo.status?(s.window.toggleResize(),n.f.fireEvent(this,"onselectedrestore")):(n.f.fireEvent(this,"onselectedmaximize"),1==this.options.windowMaximizeAll?this.doMaximizeAll():s.window.toggleResize())}}if(i.match("w2windowContainer_controlIcon_closeOthers")&&this.closeOthers(),i.match("w2windowContainer_controlIcon_windowList")&&this.windows.length>0&&this.toggle(),i.match("w2windowContainer_nameLayer")){var r=i.getElement().getAttribute(e),h={};h.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(r,this.options.stopMinimizeOnNameLayer,h),!0===this.options.accessibility&&n.f.preventDefault(t)}if(i.match("w2windowContainer_nameLayer_close")){
r=i.getElement().getAttribute(e);return void(g=this.getWinInfoObj(r)).window.close()}if(i.match("w2windowContainer_nameLayer_close_custom")){r=i.getElement().getAttribute(e);return void(g=this.getWinInfoObj(r)).window.close()}if(i.match("w2windowContainer_nameLayer_fixOff")){r=i.getElement().getAttribute(e);(g=this.getWinInfoObj(r)).isFix=!g.isFix,null!==g.userIconClass&&null==g.userIconPosition&&(g.userIconPosition="right");var d=g.title+" ",c=!0===this.options.accessibility?"w2windowContainer_accessibility_button w2windowContainer_nameLayer_fixOff_accessibility ":"";if(g.isFix){var u=!0===this.options.accessibility?"w2windowContainer_nameLayer_fixOn_accessibility w2windowContainer_nameLayer_fixOn ":"w2windowContainer_nameLayer_fixOn ";null==g.userIconClass||null!=g.userIconClass&&"right"==g.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff "+c+u+"w2windowContainer_nameLayer_firstButtonFromLeft":null!=g.userIconClass&&"left"==g.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff "+c+u+"w2windowContainer_nameLayer_secondButtonFromLeft"),d+=WebSquare.language.getMessage("WindowContainer_fix_dialog_set")||"Fix dialog box selected",this.fixedWindowArr.push(g)}else{null==g.userIconClass||null!=g.userIconClass&&"right"==g.userIconPosition?i.getElement().className="w2windowContainer_nameLayer_fixOff "+c+"w2windowContainer_nameLayer_firstButtonFromLeft":null!=g.userIconClass&&"left"==g.userIconPosition&&(i.getElement().className="w2windowContainer_nameLayer_fixOff "+c+"w2windowContainer_nameLayer_secondButtonFromLeft"),d+=WebSquare.language.getMessage("WindowContainer_fix_dialog_unset")||"Fix dialog box deselected";for(var p=0;p<this.fixedWindowArr.length;p++)if(this.fixedWindowArr[p].id==g.id){this.fixedWindowArr.splice(p,1);break}}return void i.getElement().setAttribute("aria-label",d)}if(i.match("w2windowContainer_nameLayer_fixOff_custom")){var g;r=i.getElement().getAttribute(e);if((g=this.getWinInfoObj(r)).isFix=!g.isFix,g.isFix)i.getElement().className="w2windowContainer_nameLayer_fixOff_custom w2windowContainer_nameLayer_fixOn",this.fixedWindowArr.push(g);else{i.getElement().className="w2windowContainer_nameLayer_fixOff_custom";for(p=0;p<this.fixedWindowArr.length;p++)if(this.fixedWindowArr[p].id==g.id){this.fixedWindowArr.splice(p,1);break}}return}if(i.match("w2windowContainer_nameLayer_menu"))return;if(i.match("w2windowContainer_nameLayer_menu_custom"))return;i.match("w2window")&&this.selectNameLayer(i.getElement().id),i.match("w2window_restore"),i.match("w2windowContainer_scrollLeftBtn")&&this.moveNameLayerScroll("left"),i.match("w2windowContainer_scrollRightBtn")&&this.moveNameLayerScroll("right")}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleDblClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header")){var i=this.getSelectedIndex();if(i>-1&&i<this.windows.length){var o=this.windows[i];if(o.windowTitle==e.element.getAttribute("data-title"))if(1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll(),"maximized"==o.window.windowInfo.status){if(o.window.toggleResize(),n.f.fireEvent(this,"onselectedrestore"),this.options.windowMaximizeAll)for(var s=this.nowWindow,r=this.selectedWindowHistory.length;r>0;r--){var l=this.selectedWindowHistory[r-1],h=this.getWinInfoObj(l);if(l!=s&&"maximized"==h.window.windowInfo.status){h.window.setStyle("display","block");break}h.window.setStyle("display","block")}}else n.f.fireEvent(this,"onselectedmaximize"),o.window.toggleResize(),this.options.windowMaximizeAll&&this.doMaximizeAll()}}e.match("w2window")&&this.selectNameLayer(e.getElement().id)}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseOverEvent=function(t){try{n.f.stopEvent(t);for(var e=l.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2windowContainer_nameLayer")){
for(var o=i.getElement(),s=i.getElement().getAttribute(e),r="",h=0;h<this.windows.length;h++){var d=this.windows[h];if(s==d.id){r=d.tooltip;break}}-1==i.getElement().id.indexOf(this.nowWindow)&&this.addClass(o,"w2windowContainer_selectedNameLayer"),this.options.tooltipDisplay&&this.showTooltip(o,r)}else{if(i.match("w2windowContainer_controlIcon_customIcon"))return void n.f.fireEvent(this,"oncustomcontrolover",i.getElement().id);i.match("w2windowContainer_controlIcon_vertical")?this.addClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):i.match("w2windowContainer_controlIcon_horizontal")?this.addClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):i.match("w2windowContainer_controlIcon_cascade")?this.addClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):i.match("w2windowContainer_controlIcon_sequential")?this.addClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):i.match("w2windowContainer_controlIcon_closeAll")?this.addClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):i.match("w2windowContainer_controlIcon_maximize")?this.addClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):i.match("w2windowContainer_controlIcon_closeOthers")?this.addClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):i.match("w2windowContainer_controlIcon_windowList")?this.addClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):i.match("w2windowContainer_scrollLeftBtn")?this.addClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):i.match("w2windowContainer_scrollRightBtn")&&this.addClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleMouseOutEvent=function(t){try{n.f.stopEvent(t),this.hideTooltip();for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match("w2windowContainer_nameLayer"))-1==e.getElement().id.indexOf(this.nowWindow)&&this.removeClass(e.getElement(),"w2windowContainer_selectedNameLayer");else{if(e.match("w2windowContainer_controlIcon_customIcon"))return void n.f.fireEvent(this,"oncustomcontrolout",e.getElement().id);e.match("w2windowContainer_controlIcon_vertical")?this.removeClass(this.dom.iconVertical,"w2windowContainer_controlIcon_vertical_over"):e.match("w2windowContainer_controlIcon_horizontal")?this.removeClass(this.dom.iconHorizontal,"w2windowContainer_controlIcon_horizontal_over"):e.match("w2windowContainer_controlIcon_cascade")?this.removeClass(this.dom.iconCascade,"w2windowContainer_controlIcon_cascade_over"):e.match("w2windowContainer_controlIcon_sequential")?this.removeClass(this.dom.iconSequential,"w2windowContainer_controlIcon_sequential_over"):e.match("w2windowContainer_controlIcon_closeAll")?this.removeClass(this.dom.iconCloseAll,"w2windowContainer_controlIcon_closeAll_over"):e.match("w2windowContainer_controlIcon_showWindows")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_showWindows_over"):e.match("w2windowContainer_controlIcon_windowList")?this.removeClass(this.dom.iconWindowList,"w2windowContainer_controlIcon_windowList_over"):e.match("w2windowContainer_controlIcon_maximize")?this.removeClass(this.dom.iconMaximize,"w2windowContainer_controlIcon_maximize_over"):e.match("w2windowContainer_controlIcon_closeOthers")?this.removeClass(this.dom.iconCloseOthers,"w2windowContainer_controlIcon_closeOthers_over"):e.match("w2windowContainer_scrollLeftBtn")?this.removeClass(this.dom.nameScrollLeft,"w2windowContainer_scrollLeftBtn_over"):e.match("w2windowContainer_scrollRightBtn")&&this.removeClass(this.dom.nameScrollRight,"w2windowContainer_scrollRightBtn_over")}e=null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleDragStartEvent=function(){try{this.showModal()}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleDragEndEvent=function(){try{this.hideModal()}catch(t){
a.Y.printStackTrace(t,null,this)}},c.prototype.finalize=function(){try{d.q.removeCheckResize(this.uuid);for(var t=this.childControlList.length-1;t>=0;t--)this.childControlList[t].remove();for(t=this.storedFrame.length-1;t>=0;t--){var e=l.Z.getComponentById(this.storedFrame[t]);null!=e&&e.remove()}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.createMenu=function(){try{"<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>","    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>","        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>","    </w2:listRow>","</w2:list>";var t=WebSquare.xml.parse("<w2:list xmlns:w2=\"http://www.inswave.com/websquare\" tagName='div' style='' class='w2windowContainer_nameLayer_menuItem'>    <w2:listRow tagName='div' style='height: 20px; display:block; border-top: 0px; border-left:0px; border-right:0px;' class='w2windowContainer_menu_row'>        <w2:listColumn id='col1' inputType='text' style='padding-left: 10px' class='w2windowContainer_menu_column'/>    </w2:listRow></w2:list>",!0).documentElement;this.contextMenu=new WebSquare.uiplugin.list(this.id+"_contextMenu_list","",t),this.contextMenu.writeTo(WebSquare.getBody()),this.contextMenu.activate(),WebSquare.getBody().getLayerListener().addListener({component:this.contextMenu,fnShow:this.contextMenu.show,fnHide:this.contextMenu.hide});var e=WebSquare.language.getMessage("Window_close")||"Close",i=WebSquare.language.getMessage("WindowContainer_dualMonitors")||"Dual Monitors",o=WebSquare.language.getMessage("WindowContainer_multiView")||"Multi View",s=WebSquare.language.getMessage("WindowContainer_share")||"Share",r=[];r.push({col1:e}),r.push({col1:i}),r.push({col1:o}),r.push({col1:s}),this.contextMenu.setJSON(r),WebSquare.getBody().getLayerListener().hide(this.contextMenu.id);var h=this.id;this.contextMenu.bind("onmousedown",(function(t){n.f.stopPropagation(t)})),this.contextMenu.bind("onrowclick",(function(t){var e=l.Z.getComponentById(h),i=this.getRowData(t);n.f.fireEvent(e,"onmenuclick",this._refId,i.col1,i),WebSquare.getBody().getLayerListener().hide(this.id),this._refId=""}))}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.toggleContextMenu=function(t,e,i){try{var o=this.getWinInfoObj(t);t="";o&&(t=o.windowId,this.contextMenu._refId=t),n.f.fireEvent(this,"onmenuopen",t),this.contextMenu||this.createMenu(),WebSquare.getBody().getLayerListener().isShow(this.contextMenu.id)?WebSquare.getBody().getLayerListener().hide(this.contextMenu.id):WebSquare.getBody().getLayerListener().show(this.contextMenu.id),this.contextMenu.setPosition(e,i-this.contextMenu.getSize("height"))}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.hideContextMenu=function(){try{WebSquare.getBody().getLayerListener().hide(this.contextMenu.id)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setMenu=function(t,e){try{this.contextMenu||this.createMenu();for(var i=[],o=0;o<t.length;o++)i.push({col1:t[o]});this.contextMenu.setJSON(i),null!=e&&this.contextMenu.setSize("height",e)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setMultiView=function(t,e){try{var i=this.getWinInfoObj(this.nowWindow),o=this.getWinInfoObj(t,"windowId");if(!i||!o||o.windowId===i.windowId)return;var s=Number(e);isNaN(s)&&(e=0);for(var r=0;r<this.windows.length;r++)this.windows[r].windowId!==t&&this.windows[r].id!==this.nowWindow&&(this.windows[r].window.minimize(!0),WebSquare.style.hide(document.getElementById(this.id+"_nameLayer_"+this.windows[r].id)));this.multiViewIdArr=[o.id,this.nowWindow];var n=o.window,l=i.window;if(n._multiViewUUID=l.uuid,l._multiViewUUID=n.uuid,n._direction=e,l._direction=e,1===e){var h=n.resizeParentGroup(),d=parseInt(h.width,10),c=parseInt(h.height/2,10);n.restore(),
n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),c-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(0,c);h=l.resizeParentGroup();var u=parseInt(h.width,10),p=parseInt(h.height/2,10);l.restore(),l.setSize(u-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}else{h=n.resizeParentGroup(),d=parseInt(h.width/2,10),c=parseInt(h.height,10);n.restore(),n.setSize(d-(n.getSize("outerMarginWidth")-n.getSize("width")),c-(n.getSize("outerMarginHeight")-n.getSize("height"))),n.setPosition(d,0);h=l.resizeParentGroup(),u=parseInt(h.width/2,10),p=parseInt(h.height,10);l.restore(),l.setSize(u-(l.getSize("outerMarginWidth")-l.getSize("width")),p-(l.getSize("outerMarginHeight")-l.getSize("height"))),l.setPosition(0,0)}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setSingleView=function(t){try{for(var e=0;e<this.windows.length;e++)WebSquare.style.show(document.getElementById(this.id+"_nameLayer_"+this.windows[e].id));this.multiViewIdArr=[];for(e=0;e<this.windows.length;e++)this.windows[e].window.restore(),this.windows[e].window.maximize(),this.windows[e].window.setPosition(0,0),this.windows[e].window._multiViewUUID="",this.windows[e].window._direction=0;var i=this.getWinInfoObj(t,"windowId");i&&this.selectNameLayer(i.id)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.isMultiView=function(){return this.multiViewIdArr.length>0},c.prototype.handleNameLayerMove=function(t){try{if(!this.options.nameLayerMove&&!this.options.nameLayerMenu&&!this.options.useWindowSplit)return;for(var e=l.Z.getDataPrefix("refId"),i=this.event.getTargetIterator(t,this.render);i.next();){if(this.options.nameLayerMenu&&i.match("w2windowContainer_nameLayer_menu")){n.f.stopEvent(t);var o=i.getElement(),s=o.getAttribute(e);this.toggleContextMenu(s,WebSquare.style.getAbsoluteLeft(o.parentNode),WebSquare.style.getAbsoluteTop(o.parentNode)),i.stop()}if((this.options.nameLayerMove||this.options.useWindowSplit)&&i.match("w2windowContainer_nameLayer")){var r=-1,h=i.getElement();if(!h)return;for(var d=0;d<this.windows.length;d++)if(this.windows[d].id===h.getAttribute(e)){r=d;break}if(isNaN(r)||r<0)return;n.f.preventDefault(t);var c=this.uuid,u=this;this.options.nameLayerMove&&!this.options.useWindowSplit&&(this._splitInfo.moveMode=!0),this.options.useWindowSplit&&!this.options.nameLayerMove&&(this._splitInfo.splitMode=!0),this.event.addListener(document,"onkeydown",(function(t){"Escape"===t.key&&!0===u._splitInfo.ghostVisible&&(u._splitInfo={},WebSquare.dragdrop.gDragManager.remove(u.id+"_ghostLayer_nameLayerMove"))})),this._zoomLevel=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,WebSquare.dragdrop.gDragManager.activate(t,h,{id:this.id+"_ghostLayer_nameLayerMove",className:"w2windowContainer_drag_nameLayerMove",delay:15,mode:"",passive:!WebSquare.util.isTouchDevice(),makeGhostLayer:function(t){t.render.className="",t.render.style.zIndex=-1e3,t.render.style.width="0px",t.render.style.height="0px",t.render.style.position="absolute";var e=r,i=WebSquare.idCache[c].dom.nameBar.childNodes[e];return t.render.innerHTML=i.outerHTML,u.ghostObj=t,t},handleStart:function(t){var i=r,o=WebSquare.idCache[c],s=$(o.dom.nameBar.childNodes[i]);this.nameLayerMove_left=s.css("left"),this.dragOverNameLayer={},this.dropIndex=-1,this.nameLayerMove_zIndex=s.css("zIndex");var a=Number(this.nameLayerMove_zIndex);if(this.nameLayerMove_zIndex_Array=[],isNaN(a)||a<=0)for(var n=0;n<o.dom.nameBar.childNodes.length;n++){var l=$(o.dom.nameBar.childNodes[n]);this.nameLayerMove_zIndex_Array.push(l.css("zIndex")),n===i?l.css("zIndex",4):l.css("zIndex",5)}else s.css("zIndex",a-1);this.startLeft=s.offset().left,this.startTop=s.offset().top,o.selectedWindowId=s[0].getAttribute(e)},onDrop:function(t,e,i,o,s,a,h){var d=WebSquare.idCache[c];if(1==d._splitInfo.moveMode){var u=r,p=$(d.dom.nameBar.childNodes[u]);if(p.css("left",this.nameLayerMove_left),
this.nameLayerMove_zIndex_Array.length>0)for(var g=0;g<d.dom.nameBar.childNodes.length;g++)$(d.dom.nameBar.childNodes[g]).css("zIndex",this.nameLayerMove_zIndex_Array[g]);else p.css("zIndex",this.nameLayerMove_zIndex);for(var m in this.dragOverNameLayer)$(d.dom.nameBar.childNodes[m]).css("left",this.dragOverNameLayer[m][0]);d.moveNameLayer(u,this.dropIndex),this.nameLayerMove_left="",this.nameLayerMove_zIndex="",this.dragOverNameLayer={},this.nameLayerMove_zIndex_Array=[]}if(!0===d._splitInfo.ghostVisible){var f=d.getWinInfoObj(d.selectedWindowId),b={src:f.src,title:f.title,windowTitle:f.windowTitle,id:f.id,windowId:f.windowId,screenX:n.f.getScreenX(h),screenY:n.f.getScreenY(h)};n.f.fireEvent(d,"onwindowsplit",b,n.f.getMouseX(h),n.f.getMouseY(h))&&l.Z.requestAnimationFrame((function(){d.closeWindow(f.windowId)}))}d._splitInfo={}},onDragover:function(t,e,i,o,s,a,n){var l=r,h=-1,d=WebSquare.idCache[c],u=!1,p=null;for(p=n&&"touchmove"===n.type?new WebSquare.targetIterator(document.elementFromPoint(n.changedTouches[0].clientX,n.changedTouches[0].clientY)):d.event.getTargetIterator(n);p.next();)if(p.match("w2windowContainer_nameLayer")||p.match("w2windowContainer_name")){u=!0,p.stop();break}if(p=null,!0!==d._splitInfo.splitMode&&!0===u){d._splitInfo.moveMode=!0;d=WebSquare.idCache[c];for(var g=0;g<d.dom.nameBar.childNodes.length;g++)if(d.dom.nameBar.childNodes[g]===e){h=g;break}var m=$(d.dom.nameBar.childNodes[l]);if(m.css("left",s/d._zoomLevel),null!=d.dom.nameBar.childNodes[h]&&h!==l){var f=$(d.dom.nameBar.childNodes[h]);null==this.dragOverNameLayer[h]?(this.dragOverNameLayer[h]=[f.css("left"),s],l>h?f.css("left",m.width()):f.css("left",-1*m.width()),this.dropIndex=h):(this.dragOverNameLayer[h][1]>=0&&this.dragOverNameLayer[h][1]>s+10||this.dragOverNameLayer[h][1]<0&&this.dragOverNameLayer[h][1]<s-10)&&(f.css("left",this.dragOverNameLayer[h][0]),this.dragOverNameLayer[h]=null,delete this.dragOverNameLayer[h],this.dropIndex=l>h?h+1:h-1)}}else if(!0!==d._splitInfo.moveMode){d._splitInfo.splitMode=!0;var b=d.dom.nameBar.childNodes[l];Math.abs(a)>2*b.offsetHeight?(d._splitInfo.ghostVisible=!0,d.ghostObj.render.style.visibility="visible",d.ghostObj.render.style.zIndex=1e3,d.ghostObj.render.style.opacity=""):(d._splitInfo.ghostVisible=!1,d.ghostObj.render.style.zIndex=1e3,d.ghostObj.render.style.opacity="0.2"),d.ghostObj.render.style.left=this.startLeft+s/d._zoomLevel+"px",d.ghostObj.render.style.top=this.startTop+a/d._zoomLevel+"px"}}}),i.stop()}}i=null}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.moveNameLayer=function(t,e){try{if(t===e||t<0||e<0)return;var i,o;i=this.getRealWindowPosition(t),o=this.getRealWindowPosition(e);var s=this.windows[i].windowId,r=this.windows[o].windowId;if(!1===n.f.fireEvent(this,"onbeforenamelayermove",{startWindowID:s,startIndex:t,endWindowID:r,endIndex:e}))return;var l=t>e?0:1;e<this.windows.length-1?this.dom.nameBar.insertBefore(this.dom.nameBar.childNodes[t],this.dom.nameBar.childNodes[e+l]):this.dom.nameBar.appendChild(this.dom.nameBar.childNodes[t]);!function(t,e,i){var o=t.splice(e,1);t.splice(i,0,o[0])}(this.windows,i,o);for(var h=0;h<this.windows.length;h++)if(this.nowWindow===this.windows[h].id){this.selectedIndex=h;break}n.f.fireEvent(this,"onafternamelayermove",{startWindowID:s,startIndex:t,endWindowID:r,endIndex:e})}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.setControlIconFormatter=function(){var t=[],e=l.Z.getGlobalFunction(this.options.controlIconFormatter,this.scope_id);if(!this.options.nameLayerMenu&&"function"==typeof e){if(this.controlIconFormatter=e,this.useControlIconFormatter=!0,this.controlIcons=this.controlIconFormatter?this.controlIconFormatter.call(this):this.options.controlIcons,this.options.useControlIconTitle)for(var i=0,o=this.controlIcons.length;i<o;i++){this.controlIcons[i].useTitle=!0}for(i=0,o=this.controlIcons.length;i<o;i++){
var s=this.controlIcons[i],r=s.isCustom?s.className+" w2windowContainer_controlIcon_customIcon":s.className,a=s.useTitle?"title='"+WebSquare.language.getMessage("WindowContainer_controlIcon_"+s.id)+"'":"";t.push("<span id='"+this.id+"_"+s.id+"' class='"+r+"'"+a+"></span>")}var n,h=this.dom.control;"allright"===this.options.controlIconPosition?(h=this.getElementById(this.id+"_controlIconDiv")).innerHTML=t.join(""):this.dom.control.innerHTML=t.join("");for(i=0,o=this.controlIcons.length;i<o;i++){var d=this.controlIcons[i],c=document.getElementById(this.id+"_"+d.id),u=d.id.substring(0,1).toUpperCase()+d.id.substring(1,d.id.length);!1===d.isCustom&&(this.dom["icon"+u]=c)}if("allright"===this.options.controlIconPosition){n=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(n,h)+n.offsetWidth+"px";for(var p=50,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25;var m=25*h.childNodes.length+55,f=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px"),WebSquare.style.setStyle(this.dom.rightScrollBtn,"margin-right",f+"px")}else if("right"===this.options.controlIconPosition){n=h.childNodes[h.childNodes.length-1],h.style.width=WebSquare.style.getRelativeLeft(n,h)+n.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"right",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}else{n=h.childNodes[this.dom.control.childNodes.length-1],this.dom.control.style.width=WebSquare.style.getRelativeLeft(n,this.dom.control)+n.offsetWidth+"px";m=25*h.childNodes.length+5;WebSquare.style.setStyle(this.dom.control,"width",m+"px"),this.dom.nameContainer&&WebSquare.style.setStyle(this.dom.nameContainer,"left",m+"px");for(p=0,g=0;g<h.childNodes.length;g++)WebSquare.style.setStyle(h.childNodes[g],"left",p+"px"),p+=25}this.createNameLayer(),this.selectWindow()}},c.prototype.setArrangeWindows=function(t,e){try{switch(t){case"vertical":this.options.useFixButton&&this.options.verticalArrangeNum>0&&!e?this.doVerticalFixArrange():this.doVerticalArrange(e),n.f.fireEvent(this,"onverticalarrange");break;case"horizontal":this.options.useFixButton&&this.options.horizontalArrangeNum>0&&!e?this.doHorizontalFixArrange():this.doHorizontalArrange(e),n.f.fireEvent(this,"onhorizontalarrange");break;case"cascade":this.options.useFixButton?this.doCascadeFixArrange():this.doCascadeArrange(),n.f.fireEvent(this,"oncascadearrange");break;case"sequential":this.options.useFixButton&&this.options.sequentialArrangeRowNum>0&&this.options.sequentialArrangeColNum>0?this.doSequentialFixArrange():this.doSequentialArrange(),n.f.fireEvent(this,"onsequentialarrange")}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.getRealWindowPosition=function(t){try{t>=this.dom.nameBar.childNodes.length&&(t=this.dom.nameBar.childNodes.length-1);for(var e=l.Z.getDataPrefix("windowtitle"),i=l.Z.getDataPrefix("refId"),o=(this.dom.nameBar.childNodes[t].getAttribute(e),this.dom.nameBar.childNodes[t].getAttribute(i)),s=0;s<this.windows.length;s++)if(o==this.windows[s].id)return s;return}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.itemTableHandleKeydownEvent=function(t){try{var e,i,o=t.keyCode,s=this.event.getTargetIterator(t,this.render),r=l.Z.getDataPrefix("unique_id"),h=this;for(27===o&&(h.dom.iconWindowList.focus(),h.hideWindowList(),h.dom.iconWindowList.setAttribute("aria-expanded","false"));s.next();){if(s.match("w2table_accessibility")&&9===o&&t.shiftKey&&(n.f.preventDefault(t),h.dom.iconWindowList.focus(),h.hideWindowList(),h.dom.iconWindowList.setAttribute("aria-expanded","false")),s.match("w2table_accessibility_col")){if(32===o||13===o){e=s.getElement().getAttribute(r);for(var d=0;d<h.windows.length;d++)if(h.windows[d].id===e){
i=h.windows[d].id;break}if(!i)return void h.hideWindowList();h.listToggle=!1;var c={};c.stopToggleOnLast=h.options.stopToggleOnLast,h.clickNameLayer(i,h.options.stopMinimizeOnNameLayer,c),h.hideWindowList(),h.dom.iconWindowList.setAttribute("aria-expanded","false"),document.getElementById(i).focus()}s.stop()}s.match("w2list_listColumn_accessibility_close")&&(32===o||13===o?(s.getElement().click(),h.iconWindowListClose=!0,h.hideWindowList(),h.dom.iconWindowList.setAttribute("aria-expanded","false")):9!==o||t.shiftKey||(e=s.getElement().parentElement.getAttribute(r),h.windows[h.windows.length-1].id===e&&(n.f.preventDefault(t),h.dom.iconWindowList.focus(),h.hideWindowList(),h.dom.iconWindowList.setAttribute("aria-expanded","false"))),s.stop())}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.itemTableHandleClickEvent=function(t){try{for(var e,i=this.event.getTargetIterator(t,this.render),o=l.Z.getDataPrefix("unique_id"),s=this;i.next();)if(i.match("w2list_listColumn_accessibility_close")){e=i.getElement().parentElement.getAttribute(o);for(var r=0;r<s.windows.length;r++)if(s.windows[r].id===e){n=s.windows[r].windowId||s.windows[r].id;break}n&&(s.closeWindow(n),s.windowList.setItemArr(this.windows),s.hideWindowList()),i.stop()}else if(i.match("w2table_accessibility_col")){e=i.getElement().getAttribute(o);var n="";for(r=0;r<s.windows.length;r++)if(s.windows[r].id===e){n=s.windows[r].id;break}if(!n)return void s.hideWindowList();s.listToggle=!1;var h={};h.stopToggleOnLast=s.options.stopToggleOnLast,s.clickNameLayer(n,s.options.stopMinimizeOnNameLayer,h),s.hideWindowList(),i.stop()}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.tabMoveFromArrangeButton=function(t,e,i){try{if(e===this.focusWindowId){if(9===i.keyCode&&i.shiftKey){document.getElementById(this.focusWindowId);for(var o=this.windows.length-1;o>-1;o--)if(this.windows[o].id===this.focusWindowId&&this.windows[o-1]){var s=this.getWinInfoObj(this.windows[o-1].id);this.increaseZIndex(s.window),this.focusWindowId=this.windows[o-1].id;break}}}else if(e===this.focusWindowId+"_close"&&9===i.keyCode&&!i.shiftKey)for(o=0;o<this.windows.length;o++)if(this.windows[o].id===this.focusWindowId&&this.windows[o+1]){s=this.getWinInfoObj(this.windows[o+1].id);this.increaseZIndex(s.window),this.focusWindowId=this.windows[o+1].id;break}}catch(i){a.Y.printStackTrace(i,null,this)}},c.prototype.handleKeydownEvent=function(t){try{var e=t.keyCode,i=this.event.getTargetIterator(t,this.render);if(t.target===this.render&&9===e&&!t.shiftKey)if(n.f.preventDefault(t),this.windows.length>0){var o=document.getElementById(this.id+"_nameLayer_"+this.windows[0].id);o.setAttribute("tabindex","0"),o.focus(),this.focusWindowId=this.windows[0].id}else this.dom.iconVertical.focus();if(this.getSelectedIndex()>=0&&!0===t.shiftKey&&(37===e||38===e||39===e||40===e))return void this._keydownMoveWindow(i.getElement(),e)}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleFocusInEvent=function(t){try{if("cascade"===this.arrangeHistory)for(var e=this.event.getTargetIterator(t);e.next();)if(e.match("w2window")){var i=e.getElement(),o=i&&this.getWinInfoObj(i.id);if(o){var s=o.window;(parseInt(s.getStyle("z-index"),10)||0)<this.maxZIndex&&this.increaseZIndex(s)}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleNameContainerKeydownEvent=function(t){try{var e,i=t.charCode?t.charCode:t.keyCode,s=this.event.getTargetIterator(t);this.getSelectedIndex();for(this.focusWindowId&&(e=this._findNameLayerLastIcon(this.focusWindowId));s.next();){var r=l.Z.getDataPrefix("elementInfo"),h=l.Z.getDataPrefix("refId");if("nameLayer"===s.getElement().getAttribute(r)&&s.match("w2windowContainer_nameLayer")){var d=s.getElement().getAttribute(h);switch(i){case 9:if(t.shiftKey){if(this.windows.length>0){for(var c=0;c<this.windows.length;c++)if(this.windows[c].id===d&&this.windows[c-1]){b=this.windows[c-1].id;break}this._selectedNameLayerAddTabIndex(d,!1),void 0!==b?(this._selectedNameLayerAddTabIndex(b,!0),
this.focusWindowId=b):(n.f.preventDefault(t),this.render.focus())}}else if(!0===this.options.useCloseButton||!0===this.options.useFixButton)this._selectedNameLayerAddTabIndex(d,!0);else{var u;for(c=0;c<this.windows.length;c++)if(this.windows[c].id===d&&this.windows[c+1]){u=this.windows[c+1].id;break}if(void 0!==(0,o.A)(u)&&(this._selectedNameLayerAddTabIndex(d,!1),this._selectedNameLayerAddTabIndex(u,!0)),d===this.windows[this.windows.length-1].id)if(null!==this.nowWindow)WebSquare.event.preventDefault(t),(p=document.getElementById(this.nowWindow)).focus()}break;case 32:case 13:n.f.preventDefault(t);var p,g={};g.stopToggleOnLast=this.options.stopToggleOnLast,this.clickNameLayer(d,this.options.stopMinimizeOnNameLayer,g);for(c=0;c<this.windows.length;c++)this.windows[c].id===d&&this.setFocus(c);if((p=document.getElementById(d)).setAttribute("tabindex","0"),p.focus(),this.focusWindowId=d,void 0===this.arrangeHistory)this.visibleWindows.length>0&&this.visibleWindows.splice(0),this.visibleWindows.push(d);else{var m=this._findBehindWindow(d);for(c=0;c<m.length;c++){var f=this.visibleWindows.indexOf(m[c].value);if(-1!=f){this.visibleWindows.splice(f,1,d);break}}}this._selectedNameLayerAddTabIndex(d,!1)}}if(e&&s.match(e.className)&&9===i&&!t.shiftKey&&this.windows.length>0){var b;for(h=l.Z.getDataPrefix("refId"),d=s.getElement().getAttribute(h),c=0;c<this.windows.length;c++)if(this.windows[c].id===d&&this.windows[c+1]){b=this.windows[c+1].id;break}this._selectedNameLayerAddTabIndex(d,!1),void 0!==b&&(this._selectedNameLayerAddTabIndex(b,!0),this.focusWindowId=b)}}}catch(t){a.Y.printStackTrace(t,null,this)}},c.prototype.handleControlKeydownEvent=function(t){try{for(var e=function(e,o){13!==i&&32!==i||(n.f.preventDefault(t),e.click())},i=t.charCode?t.charCode:t.keyCode,o=this.event.getTargetIterator(t);o.next();){if(o.match("w2windowContainer_controlIcon_vertical")){if(9===i&&t.shiftKey)if(n.f.preventDefault(t),this.windows.length>0){var s=this.windows[this.windows.length-1].id;this._selectedNameLayerAddTabIndex(s,!0),this._findNameLayerLastIcon(s).focus(),this.focusWindowId=s}else this.render.focus();13!==i&&32!==i||this.nowWindow&&e(this.dom.iconVertical,this.nowWindow),o.stop()}o.match("w2windowContainer_controlIcon_horizontal")&&(13!==i&&32!==i||this.nowWindow&&e(this.dom.iconHorizontal,this.nowWindow),o.stop()),o.match("w2windowContainer_controlIcon_cascade")&&(13!==i&&32!==i||this.nowWindow&&e(this.dom.iconCascade,this.nowWindow),o.stop()),o.match("w2windowContainer_controlIcon_sequential")&&(13!==i&&32!==i||this.nowWindow&&e(this.dom.iconSequential,this.nowWindow),o.stop()),o.match("w2windowContainer_controlIcon_windowList")&&(9!==i||t.shiftKey||this.windows.length>0&&(this.focusWindowId=this.windows[0].id))}o=null}catch(t){a.Y.printStackTrace(t,null,this)}}},5461:function(t,e,i){"use strict";i.d(e,{q:function(){return n}});var o=i(467),s=i(2284),r=i(4756),a=i.n(r),n={_xv:"SP5",domain:null,baseURI:"",baseServletURI:"",baseThemeURI:"",sp5ResourcePath:"../websquare/_websquare_",w2xDocumentRoot:"",w2xHome:"/",w2xTheme:"",w2xExtension:"w5",printConsole:!1,remoteConsole:!1,errorConsole:!1,useWeinre:!1,weinreUrl:"http://debug._wg.co.kr/target/target-script-min.js",hybridSubmissionURL:"",isPrintLog:!0,hybridApp:!1,isHoneyComb:!1,userAgentPattern:{serializer:"Android 2.3.5[\\w\\W]+M110|Android 2.3.5[\\w\\W]+M250",XMLParser:"Opera[\\w\\W]+Version[\\w\\W]+1[\\d].[\\d]",URIEncoder:"Chrome[\\w\\W]16[.0-9*]*|Version[\\w\\W]+Safari+",XPathParser:"Edge"},msActiveXFilteringEnabled:!1,externalOption:{},WebSquaredoc:null,UUIDPrefix:"wq_uuid",UUID:0,scriptCachedList:{},moduleList:{},noConflict:"$w",noConflictFunction:"$p",styleSheetEarlyImport:0,styleSheetEarlyImportName:"",styleSheetEarlyImportList:[],_styleSheetEarlyImportListLoaded:!1,externalCSSList:[],externalCSSDOM:[],externalCSSURL:[],externalCSSRemainder:[],pageXMLString:null};n.nodeValueDeprecated=document.createAttribute&&null!=document.createAttribute("test").value,
n.scriptIdentifier=';\n"wq_Log_$$H',n.targetInfo="",n.skipLog=!1,n.printError=!1,n.pluginCache="default",n.pluginCacheVariable="__WebSquare__pluginCache",n.suffix="",n.spaURLMapping={},n.dataObject={},n.isWebSquarePopup=!1,n.strictMode=!0,n.convertPageXML=!0,n.strictModeFrame=null,n.serverDiff=NaN,n.pageURLPrefix="",n.useLanguagePack=!1,n.nowRendering=!1,n.WebSquareCache=!1,n.WebSquareEngineCache=!1,n.appendChildType=null,n._bEngineReadyBeforeOnload=!1,n._bDocumentReady=!1,n._initImportList=[],n._resourceURI="",n._bInitModule=!1,n.docType="html4.01",n.dataPrefix=!1,n._performance={use:!1},n.amdTimeout=20,n._dataObject=null,n._dataObjectFlag=!1,n._allowedOrigin="*",n._contextRoot="",n._idAuto=!1,n._idAutoPrefix="_wq_idAuto_";try{window.top===window.self&&(n._innerWidthDiff=window.outerWidth-window.innerWidth)}catch(t){n._innerWidthDiff=null}if(null!=document.doctype&&"html"==document.doctype.name&&""==document.doctype.publicId&&""==document.doctype.systemId&&(n.docType="html5"),window.onload=function(){n._bDocumentReady=!0,!0===n._bEngineReadyBeforeOnload&&(n.initialize(n.w2xPath),n._bEngineReadyBeforeOnload=!1)},"sessionStorage"in window){var l=sessionStorage.getItem("wq_spaURLMapping");null!=l&&(n.spaURLMapping=JSON.parse(l))}try{if("undefined"!=typeof externalValue)for(var h in externalValue)void 0!==n[h]&&(n[h]=externalValue[h])}catch(t){alert("External Option Error! : "+t.toString())}null==window.WebSquareExternal&&(window.WebSquareExternal={}),"string"==typeof window.WebSquareExternal.w2xExtension&&(n.w2xExtension=window.WebSquareExternal.w2xExtension||n.w2xExtension),n.configPath="";var d;if((d=location.toString().indexOf("w2Config"))>=0){var c=location.toString().slice(d+9);n.configPath=c.slice(0,c.indexOf("config.js")+9)}"string"==typeof window.WebSquareExternal.w2Config&&(n.configPath=window.WebSquareExternal.w2Config||n.configPath),n.sp5ResourcePath=window.WebSquareExternal.sp5ResourcePath||n.sp5ResourcePath,n.document=document,n.ver="Ni4wXzAuMTI0OEIuMjAyNTA0MjEuMTAxNjQ2Xw==MS44",n.logMsgArray=[],n.remoteLogMsgArray=[],n.logTime=0,n.logTotalTime=0,n.buildDate="N/A",n.buildID="",n.uiplugin={},n.logFileName="",n.docTitle="",n.jsString={},n.jsStringOpt={},n.jsStringCore="",n.$integiry={flag:!0,passed:[],failed:[]},n.allPlugin="${allPlugin}",n.allPluginArr=[],n.clientLang=window.WebSquareExternal.clientLang||"",n._async=!0,n.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50},n.timerHash={},n.measureHash={},n.userTimerHash={},n.userIntervalHash={},n.userData={},n.logMsgArrayLength=0,n.logMsgCurrentLength=0,n.logMsgLength=0,n.componentsCache={},n.addListenerCnt=0,n.elementObjArr=[],n.selectboxCss=!1,n.triggerCss=!1,n.idCache={},n.idToUUID={},n.importsQueue={},n.controlMatchmarks={},n.lazyImportsArr=[],n.externalScriptArr=[],n.executePointScriptArr={},n.pageInheritScriptArr=[],n.pageInheritSubmissionList=[],n.pageInheritWorkflowList=[],n.configCache=[],n.configCacheObj=[],n.configCacheArray=[],n.eventCacheObj={},n.uiplugin={},function(){try{var t=function(t){try{if(!window.WebSquare)return;var e=new RegExp(WebSquare._allowedOrigin.replace("*","").replace(",","|"));if(!t.origin.match(e))return;if(!t.data||!t.data._wq_type)return;if("iframeLoaded"===t.data._wq_type)WebSquare.core._handleIframeLoaded();else if("iframeClicked"===t.data._wq_type){var i=WebSquare.getBody();i&&i._postClick()}else"onwindowloaded"===t.data._wq_type?WebSquare.core._handleWindowLoaded(t.data.uuid,t.data.origin):"dataObject"===t.data._wq_type?("number"==typeof t.data._innerWidthDiff&&window.top!==window.self&&(WebSquare._innerWidthDiff=t.data._innerWidthDiff),!0!==WebSquare._dataObjectFlag&&(WebSquare._dataObjectFlag=!0,WebSquare._dataObject=t.data.dataObject,WebSquare.core&&WebSquare.core._initDataObject())):"onwindowmousedown"===t.data._wq_type?WebSquare.idCache[t.data.uuid].handleFrameMouseDownEvent({}):"onwindowkeyup"===t.data._wq_type&&WebSquare.idCache[t.data.uuid].handleFrameKeyupEvent({keyCode:t.data.keyCode})
}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}};if(window.addEventListener?window.addEventListener("message",t):window.attachEvent&&window.attachEvent("onmessage",t),window.parent!==window.self){var e={_wq_type:"iframeLoaded",href:location.href};window.parent.postMessage(e,n._allowedOrigin||void 0)}}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}}(),function(){try{var t=function(t,e){var i=t.indexOf(e);return i>-1&&(n.baseURI=t.substring(0,i),!0)};if(window.WebSquareExternal.baseURI)n.baseURI=window.WebSquareExternal.baseURI,window.WebSquareExternal.baseServletURI?n.baseServletURI=window.WebSquareExternal.baseServletURI:n.baseServletURI=n.baseURI;else{for(var e=0;e<document.getElementsByTagName("script").length;e++){var i=document.getElementsByTagName("script")[e].src;if(t(i,"HybridPluginAll"))break;if(t(i,"bootloader.js"))break;if(!window.WebSquareExternal.baseServletURI){if(t(i,"javascript.wq?q=/bootloader"))break;if(t(i,"javascriptPluginAll.wq?q=/bootloader"))break}}var o;if(""==n.baseURI)if("file:"!=location.protocol)(o=location.pathname.lastIndexOf("/"))>-1?(n.baseURI=location.pathname.substring(0,o+1),"/"!=n.baseURI.charAt(0)&&(n.baseURI="/"+n.baseURI)):(o=location.pathname.lastIndexOf("\\"),n.baseURI=o>-1?location.pathname.substring(0,o+1):"./");else(o=location.pathname.lastIndexOf("/"))>-1?n.baseURI=location.pathname.substring(0,o+1):(o=location.pathname.lastIndexOf("\\"),n.baseURI=o>-1?location.pathname.substring(0,o+1):"./"),n.baseURI="file://"+n.baseURI;else if("file:"!=location.protocol){if(location.pathname.indexOf("/")>-1){if((s=n.baseURI.split("/")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("/")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("/")+"/"+s.join("/"),"/"!=n.baseURI.charAt(0)&&(n.baseURI="/"+n.baseURI)}}else if(location.pathname.indexOf("\\")>-1){if((s=n.baseURI.split("\\")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("\\")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("\\")+"\\"+s.join("\\")}}}else if(location.pathname.indexOf("/")>-1){if((s=n.baseURI.split("/")).length>0&&(".."==s[0]||"."==s[0])){(r=location.pathname.split("/")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI="file://"+r.join("/")+"/"+s.join("/")}}else if(location.pathname.indexOf("\\")>-1){var s;if((s=n.baseURI.split("\\")).length>0&&(".."==s[0]||"."==s[0])){var r;(r=location.pathname.split("\\")).pop();for(e=0;e<s.length;e++)if(".."==s[e])r.pop();else if("."!=s[e]){s=s.slice(e);break}n.baseURI=r.join("\\")+"\\"+s.join("\\")}}window.WebSquareExternal.baseServletURI?n.baseServletURI=window.WebSquareExternal.baseServletURI:1==n.hybridApp?n.baseServletURI="":n.baseServletURI=n.baseURI}n._resourceURI=n.baseURI+"_websquare_/"}catch(t){console.error("websquare baseURI init error.",t)}}(),n.loadErrorHandler=function(t){var e=t.code,i=t.msg;switch(e){case"E_initializer_XMLLoadFailError":case"E_initializer_XMLLoadFailError1":var o=n.core.getConfiguration("/WebSquare/loadErrorHandler/@value");if(null!=o&&""!=o){o=o.replace("()","");var s=n.util.getGlobalFunction(o);"function"==typeof s?s(t):alert(i)}else alert(i)}},n.clearMemory=function(){try{var t;try{for(var e=[self],i=[],o=0;o<1e4&&!(e.length<=0);o++)for(var s=e.length,r=0;r<s;r++)try{var a=e.shift();o>0&&i.push(a);for(var l=0;l<a.window.length;l++)try{void 0!==a.frames[l].WebSquare&&!0!==a.frames[l]._wg.remove&&e.push(a.frames[l])}catch(t){n.logger.printLog("WebSquare frameClick fail")}}catch(t){n.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(var h=0;h<1e4&&!(i.length<=0);h++)try{(a=i.pop()).WebSquare&&!0!==a.WebSquare.remove&&a.WebSquare.clearMemory()}catch(t){n.logger.printLog("WebSquare frameClick fail [ "+t.message+" ]")}for(r=0;r<e.length;r++)e[r]=null
;for(r=0;r<i.length;r++)i[r]=null;e=null,i=null}catch(t){n.logger.printLog("clearMemory fail")}if(WebSquare&&n.core){n.core.firePageunload||n.core.onurlchange||!n.body||(n.core.firePageunload=!0,n.event.fireEvent(n.getBody(),"onpageunload"));var d=n.core.getConfiguration("/WebSquare/clearMemory/@userAfterFunction");n.core.clearCommon()}try{"onhashchange"in window?window.onhashchange=null:(clearInterval(n.util._hashTestKey),n.util._hiddenFrame&&(n.removeNode(n.util._hiddenFrame),n.util._hiddenFrame=null))}catch(t){n.logger.printLog("error : clear historyFrame exception"),n.exception.printStackTrace(t,null,this)}for(var r in WebSquare&&n.body&&n.getBody().remove(),WebSquare&&n.strictModeFrame&&(n.strictModeFrame.remove(),n.strictModeFrame=null),WebSquare)WebSquare[r]=null,delete WebSquare[r];void 0!==window.imports&&(window.imports=null),void 0!==window.requires&&(window.requires=null),void 0!==$W._a&&($W._a=null),void 0!==_$W._a&&(_$W._a=null),void 0!==window.$W&&(window.$W=null),void 0!==window._$W&&(window._$W=null),WebSquare=null,window._$W=window.$W=window.WebSquare={logger:{printLog:function(){}},exception:{printStackTrace:function(){}},timerHash:{},remove:!0};try{d&&(t=window[d]())}catch(t){n.exception.printStackTrace(t,null,this)}return t}catch(t){n.exception.printStackTrace(t,null,this)}},n.extend=function(t,e){for(var i in e)t[i]=e[i];return t},n.extendKeepingType=function(t,e){for(var i in e){var o=e[i];switch((0,s.A)(t[i])){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=WebSquare.util.getBoolean(o)}t[i]=o}return t},n.setBody=function(t){n.body=t},n.getBody=function(){return n.body},n._discardElement=function(t){var e=document.getElementById("IELeakGarbageBin");e||((e=document.createElement("DIV")).id="IELeakGarbageBin",e.style.display="none",document.documentElement.appendChild(e)),e.appendChild(t),e.innerHTML=""},n.removeChildren=function(t){if(null==t||!t.childNodes)return-1;for(var e=t.childNodes.length;t.hasChildNodes();)n.removeNode(t.firstChild);return e},n.removeNode=function(t){return n.util.isIE()&&parseInt(n.core.browserVersion(),10)<8?(n._discardElement(t),t):t&&t.parentNode?t.parentNode.removeChild(t):void 0},n.initialize=function(){var t=(0,o.A)(a().mark((function t(e,i){var o,s,r,l,h,d,c,u,p,g,m,f,b,y,v,w;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=9;break}if(!(o=n.util.getUrlHashText())){t.next=7;break}e=o,t.next=9;break;case 7:return"onhashchange"in window&&null==window.onhashchange&&(window.onhashchange=n.util.onhashchange),t.abrupt("return",!0);case 9:return n.core._initDataObject(),t.next=12,n.date._initServerDiff();case 12:if(s=n.core.getConfiguration("/WebSquare/allValue/@value"),n.allValue="$blank"==s?"":s||"all",n.dataPrefix="true"==n.core.getConfiguration("/WebSquare/dataPrefix/@value"),n.tabOrder={},n.initStyle={},!n.strictMode||null!=n.strictModeFrame){t.next=44;break}if(r=n.util.getBoolean(n.core.getConfiguration("/WebSquare/initScript/@value"))&&n.w2xPath!==n.net.getBlankXML(),l=n.util.getBoolean(n.core.getConfiguration("/WebSquare/postScript/@value"))&&n.w2xPath!==n.net.getBlankXML(),h="",d="",c=n.core.getConfiguration("/WebSquare/strictMode/@id"),r&&(h=n.core.getConfigurationJSON("/WebSquare/initScript",{type:"json"}))["#cdata"]&&"function"==typeof(h=h["#cdata"])&&(h="("+h.toString()+")()",h=n.util.scopingFuncBody(h,c,!0)),l&&(d=n.core.getConfigurationJSON("/WebSquare/postScript",{type:"json"}))["#cdata"]&&"function"==typeof(d=d["#cdata"])&&(d="("+d.toString()+")()",d=n.util.scopingFuncBody(d,c,!0)),u=n.UUIDPrefix,p=n.UUID,n.UUIDPrefix="wq_strict",g="",m="",!(e.indexOf("://")>=0)){t.next=41;break}t.t0=a().keys(n.core._msaServerHash);case 32:if((t.t1=t.t0()).done){t.next=41;break}if(f=t.t1.value,b=n.core._msaServerHash[f].origin,!e.startsWith(b)){t.next=39;break}return g=f,m=e,t.abrupt("break",41);case 39:t.next=32;break;case 41:
n.strictModeFrame=n.controlFactory.create(c,{pluginName:"wframe",scope:!0,scopeExternal:!0,strictFrame:!0,initScript:h,postScript:d,msaName:g,src:m},null,null,null,!0),n.UUIDPrefix=u,n.UUID=p;case 44:if(y="",null!=n.WebSquaredoc){t.next=72;break}if(t.prev=46,!n.pageXMLString){t.next=52;break}v=n.pageXMLString,n.pageXMLString=null,t.next=58;break;case 52:if(w=n.core.getPageURL(e,{skipURL:!0,skipUri:!0})){t.next=55;break}return t.abrupt("return",!0);case 55:return t.next=57,n.jsLoader._loadObj(w);case 57:v=t.sent;case 58:if(null==v||"loadError"===v){t.next=64;break}return t.next=61,n.jsLoader.start(v,{spa:i});case 61:return t.abrupt("return",!0);case 64:"false"!=(y=n.core.getConfiguration("/WebSquare/pageFaultMsg/@value"))&&n.loadErrorHandler({code:"E_initializer_XMLLoadFailError",msg:n.language.getMessage("E_initializer_XMLLoadFailError",n.jsLoader.getUri(e))});case 66:t.next=72;break;case 68:t.prev=68,t.t2=t.catch(46),"false"!=y&&n.loadErrorHandler({code:"E_initializer_XMLLoadFailError1",msg:n.language.getMessage("E_initializer_XMLLoadFailError1",e)}),n.exception.printStackTrace(t.t2);case 72:return t.abrupt("return",!1);case 73:case"end":return t.stop()}}),t,null,[[46,68]])})));return function(e,i){return t.apply(this,arguments)}}(),n.initializeByJSON=function(){var t=(0,o.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.jsLoader.start(e,{type:"js"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication=function(){var t=(0,o.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication1=function(){var t=(0,o.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication1(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startPopupApplication2=function(){var t=(0,o.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.startApplication2(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.startApplication=function(){var t=(0,o.A)(a().mark((function t(e,i){var o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.nowRendering=!0,t.next=4,n.BootLoader._initImport();case 4:if("true"==n.core.getConfiguration("/WebSquare/localStorage/@defer")&&n.createLocalStorage(),o=n.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),"function"!=typeof(s=n.util.getGlobalFunction(o))){t.next=11;break}if(0!=s()){t.next=11;break}return t.abrupt("return");case 11:return t.next=13,n.setMsaLanguagePack();case 13:return t.next=15,n.startApplication1(e,i);case 15:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),n.initializeComponent=function(t,e){if(null==n.WebSquaredoc){n.nowRendering=!0,"true"==n.core.getConfiguration("/WebSquare/localStorage/@defer")&&n.createLocalStorage(window);var i=n.core.getConfiguration("/WebSquare/preProcessor/systemPreProcessor/@value"),o=n.util.getGlobalFunction(i);if("function"==typeof o)if(0==o())return;n.setLanguagePack(),t?(n.targetInfo=e,n.w2xPath=t):""!=n.net.getParameter("w2xPath")&&(n.w2xPath=n.net.getParameter("w2xPath"));n.w2xPath=n.w2xPath.replace(/[\\]/g,"/");var r=n.w2xPath.lastIndexOf("/"),a="",l="";"object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.A)(WebSquareExternal))&&null!=WebSquareExternal&&(a=WebSquareExternal.w2xHome||"",l=WebSquareExternal.w2xDocumentRoot||""),""==a&&""==n.net.getParameter("w2xHome")?n.w2xHome=r>-1?n.w2xPath.substring(0,r+1):"/":n.w2xHome=a||n.net.getParameter("w2xHome"),
n.logFileName=r>-1?" "+n.w2xPath.substring(r+1):" "+n.w2xPath;var h=n.core.getConfiguration("/WebSquare/DocumentRoot"),d=l||n.net.getParameter("w2xDocumentRoot");n.w2xDocumentRoot="/"==d||"\\"==d?"":""!=d?d:null!=h&&""!=h?h:"",n.logger.printLog("w2xDocumentRoot["+n.w2xDocumentRoot+"]"),n.logger.printLog("w2xHome        ["+n.w2xHome+"]"),n.logger.printLog("w2xPath        ["+n.w2xPath+"]"),n.logger.printLog("w2xTheme       ["+n.w2xTheme+"]"),n.initialize(n.w2xPath)}else n.initializeComponent_wframe(t,e)},n.initializeComponent_wframe=function(){var t=(0,o.A)(a().mark((function t(e,i){var o,s,r,l,h,d,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,requires("uiplugin.wframe"),o=new n.uiplugin.wframe(n.UUIDPrefix+"_"+n.UUID++,{src:e}),t.next=6,o.makeFrame();case 6:if(o.createFlag=!0,s=o.frameDoc.scriptSection,o.wframeScript.length>0)for(r=0;r<o.wframeScript.length;r++)s+=o.wframeScript[r];for(n.BootLoader.globalEval(s),o.frameDoc.scriptSection="",o.setAction(),r=0;r<i.length;r++)l=i[r],(h=n.idToUUID[l.component])&&null!=n.idCache[h]&&("string"==typeof(d=l.target)&&(d=document.getElementById(d)),c=n.idCache[h],n.core._safeInnerHTML(d,c.toHTML()),c.activate(),c.onComplete());t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),n.exception.printStackTrace(t.t0,null);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,i){return t.apply(this,arguments)}}(),n.startApplication1=function(){var t=(0,o.A)(a().mark((function t(e,i){var o,r,l,h,d,c,u,p,g,m,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o="",e)n.w2xPath=e;else if(""!=(o=n.net.getParameter("w2xPath")))n.w2xPath=o;else if(""!=(o=n.net.getParameter("wq_spaParam")))try{r=parent._wg.idCache[o].render.getAttribute("src").slice(0),(l=r.lastIndexOf("w2xPath"))>=0?(h=(h=r.slice(l)).split(/[\&\?\#]/)[0],2==(d=h.split("=")).length&&(n.w2xPath=d[1].wq_trim())):n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file/@value")}catch(t){n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file/@value")}else n._styleSheetEarlyImportListLoaded=!0,n.w2xPath=n.core.getConfiguration("/WebSquare/welcome-file/@value");if(c=/[\\]/g,n.w2xPath=n.w2xPath.replace(c,"/"),u=n.w2xPath.lastIndexOf("/"),p="",g="","object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.A)(WebSquareExternal))&&null!=WebSquareExternal&&(p=WebSquareExternal.w2xHome||"",g=WebSquareExternal.w2xDocumentRoot||""),""==p&&""==n.net.getParameter("w2xHome")?n.w2xHome=u>-1?n.w2xPath.substring(0,u+1):"/":n.w2xHome=p||n.net.getParameter("w2xHome"),n.logFileName=u>-1?" "+n.w2xPath.substring(u+1):" "+n.w2xPath,m=n.core.getConfiguration("/WebSquare/DocumentRoot"),f=g||n.net.getParameter("w2xDocumentRoot"),n.w2xDocumentRoot="/"==f||"\\"==f?"":""!=f?f:null!=m&&""!=m?m:"",n.logger.printLog("w2xDocumentRoot["+n.w2xDocumentRoot+"]"),n.logger.printLog("w2xHome        ["+n.w2xHome+"]"),n.logger.printLog("w2xPath        ["+n.w2xPath+"]"),n.logger.printLog("w2xTheme       ["+n.w2xTheme+"]"),n.w2xPath!=n.net.getBlankXML()){t.next=23;break}return"onhashchange"in window||(n.util._hiddenFrame?null==document.getElementById(n.util._hiddenFrame.id)&&document.body.appendChild(n.util._hiddenFrame):n.util._makeFrame(),n.util._iframe_wait=!0,n.util._hiddenFrame.contentWindow.location.search=n.w2xPath),"onhashchange"in window?window.onhashchange=n.util.onhashchange:n.util._wait_for_iframe_reload(),t.abrupt("return");case 23:if(!0===i){t.next=30;break}if(!0!==n._bDocumentReady){t.next=29;break}return t.next=27,n.initialize(n.w2xPath);case 27:t.next=30;break;case 29:n._bEngineReadyBeforeOnload=!0;case 30:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),n.startOnLoad=function(t){n.jsLoader._startCallback2(t)},n.startApplication2=function(){var t=(0,o.A)(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n.startApplication1(e)}catch(t){n.exception.printStackTrace(t)}case 1:case"end":
return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.setLanguagePack=function(){if(!n.useUserSystemLang)if(n.useLanguagePack=n.core.getConfiguration("/WebSquare/languagePack/@useLanguagePack"),"true"==n.useLanguagePack){var t=n.BootLoader.getBrowserLanguage();n.loagLanguagePack(t),n.systemLanguage=t}else n.WebSquareLang={}},n.setMsaLanguagePack=(0,o.A)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.useUserSystemLang){t.next=13;break}if(n.useLanguagePack=n.core.getConfiguration("/WebSquare/languagePack/@useLanguagePack"),"true"!=n.useLanguagePack){t.next=12;break}return e=n.BootLoader.getBrowserLanguage(),t.next=7,n.loagLanguagePack(e);case 7:return t.next=9,n.msaLoagLanguagePack(e);case 9:n.systemLanguage=e,t.next=13;break;case 12:n.WebSquareLang={};case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),n.loagLanguagePack=function(t){try{(t=n.cookie.getCookie("system_language")||t)&&"null"!==t&&"undefined"!==t||(t="ko");var e=n.core.getConfiguration("/WebSquare/languagePack/url[@lang='"+t+"']/@value");return imports(e)}catch(t){n.exception.printStackTrace(t)}},n.msaLoagLanguagePack=function(t){try{for(var e=Promise.resolve(),i=n.core.getChildConfiguration("/WebSquare/msaLanguagePack",{singleMode:!0}),s=[],r=0;r<i.length;r++)if(i[r]["@lang"]===t&&i[r]["@msaName"]){var l={msaName:i[r]["@msaName"]},h=n.core.getURL(i[r]["@value"],l);h=h.replace(/(http:\/\/|https:\/\/)(.*?)(\/\/+)/g,(function(t,e,i,o){return e+i+o.replace(/\/\/+/g,"/")}));try{(e=n.BootLoader.loadAsync(h))instanceof window.Promise&&s.push(e)}catch(t){n.exception.printStackTrace(t)}}return s.length>0&&(e=Promise.allSettled(s).then(function(){var t=(0,o.A)(a().mark((function t(e){var i,o,s,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<e.length)){t.next=12;break}if("rejected"!==e[i].status||!e[i].reason){t.next=5;break}return window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(e[i].reason),t.abrupt("continue",9);case 5:if("fulfilled"===e[i].status&&e[i].value){t.next=7;break}return t.abrupt("continue",9);case 7:"string"==typeof(o=e[i].value)&&o.indexOf("{")>-1&&(s=o.indexOf("{"),r=JSON.parse(o.slice(s)),n.WebSquareLang||(n.WebSquareLang={}),n.extend(n.WebSquareLang,r));case 9:i++,t.next=1;break;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}))),e}catch(t){return n.exception.printStackTrace(t),Promise.resolve()}},n.addMark=function(t){if(!window._fCoverage)try{parent!=window&&parent._fCoverage?window._fCoverage=parent._fCoverage:void 0!==window.opener&&null!=window.opener&&!window.opener.closed&&window.opener._fCoverage?window._fCoverage=opener._fCoverage:window._fCoverage={}}catch(t){window._fCoverage={}}void 0!==_fCoverage[t]?_fCoverage[t]++:_fCoverage[t]=1},n.ax_logger=function(t){},n._loadCSS=function(){var t=(0,o.A)(a().mark((function t(e){var i,o,r,l,h,d,c,u,p,g,m,f,b,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E,R,N,F,O,B,P;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i={},"object"==("undefined"==typeof WebSquareExternal?"undefined":(0,s.A)(WebSquareExternal))&&null!=WebSquareExternal&&(i=WebSquareExternal),o=n.document.getElementsByTagName("head")[0],r=e&&e.isSPA,l="",h="",!(n.styleSheetEarlyImport>0)){t.next=75;break}if(2==n.styleSheetEarlyImport&&(d=document.createElement("link"),c="",c=1==n.WebSquareEngineCache?n.BootLoader.getEngineCachePostfix(n.styleSheetEarlyImportName):n.BootLoader.getRandomPostfix(n.styleSheetEarlyImportName),u=n.BootLoader.inquiresPath("skin/"),d.href=n.baseThemeURI+u+c,d.type="text/css",d.rel="stylesheet",o.appendChild(d),n.logger.printLog("import core css : "+d.href)),p=n.net.getParameter("adaptive")||"",g=e&&e.w2xPath,
""!=(m=g||i.w2xPath||n.net.getParameter("w2xPath")||n.w2xPath||n.core.getConfiguration("/WebSquare/welcome-file/@value"))){t.next=13;break}return t.abrupt("return");case 13:if(f=/[\\]/g,m=m.replace(f,"/"),b="",y=n.core.getPageURL(m,{skipURL:!0,skipUri:!0}),1==n.hybridApp&&y.indexOf("://")<0&&y.startsWith("/")&&(y=n.util.appendingPathComponent(n.w2xDocumentRoot,y)),!0===n._async){t.next=22;break}return t.next=21,n.jsLoader.load(y,{useXML:!0,skipError:!0});case 21:b=t.sent;case 22:if(v=[],!b||"xml"!==n.jsLoader.getPageTypeByString(b)){t.next=74;break}for((w=b.indexOf("<html"))<0&&(w=b.indexOf("<HTML"))<0&&(w=b.indexOf("< html"))<0&&(w=b.indexOf("< HTML")),S="",S=w>=0?b.slice(0,w):b,_=-1;(_=S.indexOf("\x3c!--"))>=0;)C=S.indexOf("--\x3e"),S=C>=0?S.substring(0,_)+S.slice(C+3):S.substring(0,_);(h=i.w2xHome||n.net.getParameter("w2xHome"))||(h=i.w2xPath||n.net.getParameter("w2xPath"),f=/[\\]/g,h=h.replace(f,"/"),x=h.lastIndexOf("/"),h=x>-1?h.substring(0,x+1):"/"),I=n.core.getConfiguration("/WebSquare/DocumentRoot"),T=i.w2xDocumentRoot||n.net.getParameter("w2xDocumentRoot"),l="/"==T||"\\"==T?"":""!=T?T:null!=I&&""!=I?I:"",k=S.split(/xml-stylesheet/i),L=new RegExp("^\\s\\s*"),A=new RegExp("\\s\\s*$"),D=1;case 39:if(!(D<k.length)){t.next=73;break}for((W=k[D].split('"')).pop(),q={},M=0;M<W.length;M+=2)q[W[M].replace(L,"").replace("=","").replace(A,"")]=W[M+1];null==q.type&&(q.type="text/css"),null==q.rel&&(q.rel="stylesheet"),null!=q.href&&("/"!=q.href.substring(0,1)&&"\\"!=q.href.substring(0,1)&&(q.href=h+q.href),""!=l&&".."!=q.href.substring(0,2)&&(q.href=l+q.href)),E=!1,R=n.util.getAbsolutePath(q.href),M=0;case 50:if(!(M<n.styleSheetEarlyImportList.length)){t.next=57;break}if(R!=n.util.getAbsolutePath(n.styleSheetEarlyImportList[M])){t.next=54;break}return E=!0,t.abrupt("break",57);case 54:M++,t.next=50;break;case 57:if(!(n.externalCSSRemainder.length>0)){t.next=69;break}if(N=n.externalCSSRemainder.shift(),R!==n.util._getAbsolutePath(N.href.toString())){t.next=66;break}return E=!0,v.push(R),n.externalCSSDOM.push(N),t.abrupt("break",69);case 66:N.parentNode.removeChild(N);case 67:t.next=57;break;case 69:E||(""!=p&&q.adaptive?p==q.adaptive&&n.externalCSSList.push(q):q.adaptive?n.util.isMobile()&&"mobile"==q.adaptive?n.externalCSSList.push(q):n.util.isMobile()||"pc"!=q.adaptive||n.externalCSSList.push(q):n.externalCSSList.push(q));case 70:D++,t.next=39;break;case 73:for(;n.externalCSSRemainder.length>0;)(N=n.externalCSSRemainder.shift()).parentNode.removeChild(N);case 74:!0!==n._async&&(n.pageXMLString=b||"loadError",b="");case 75:if(!(r&&n.externalCSSList.length>0||(!r||r&&!1===n._styleSheetEarlyImportListLoaded)&&n.externalCSSList.length+n.styleSheetEarlyImportList.length>0)){t.next=103;break}if(t.prev=76,!r||r&&!1===n._styleSheetEarlyImportListLoaded)for(n._styleSheetEarlyImportListLoaded=!0,D=0;D<n.styleSheetEarlyImportList.length;D++)"/"!=(F=n.styleSheetEarlyImportList[D]).substring(0,1)&&"\\"!=F.substring(0,1)&&(F=h+F),""!=l&&".."!=F.substring(0,2)&&(F=l+F),O=n.BootLoader.getResourcePostfix(F),B=n.util.getAbsolutePath(F),n.styleSheetEarlyImportList[D]=B,(d=document.createElement("link")).href=O,d.type="text/css",d.rel="stylesheet",o.appendChild(d),n.externalCSSURL.push(B),n.logger.printLog("import user css(early_common) : "+F);D=0;case 79:if(!(D<n.externalCSSList.length)){t.next=98;break}if(d=document.createElement("link"),(P=n.externalCSSList[D])&&("string"==typeof P||"object"==(0,s.A)(P))){t.next=84;break}return t.abrupt("continue",95);case 84:"string"==typeof P&&(P={href:P}),"/"!=P.href.substring(0,1)&&"\\"!=P.href.substring(0,1)&&(P.href=h+P.href),""!=l&&".."!=P.href.substring(0,2)&&(P.href=l+P.href),O=n.BootLoader.getResourcePostfix(P.href),d.href=O,d.type=P.type||"text/css",d.rel=P.rel||"stylesheet",o.appendChild(d),n.externalCSSURL.push(n.util._getAbsolutePath(d.href.toString())),n.externalCSSDOM.push(d),n.logger.printLog("import user css(early_xml) : "+P.href);case 95:D++,t.next=79;break;case 98:t.next=103;break;case 100:
t.prev=100,t.t0=t.catch(76),n.exception.printStackTrace(t.t0,null);case 103:o=null,n.skin.skinTag=n.externalCSSURL.slice(0).concat(v);case 105:case"end":return t.stop()}}),t,null,[[76,100]])})));return function(e){return t.apply(this,arguments)}}(),n.createLocalStorage=function(){try{null==WebSquare.localStorage&&(WebSquare.localStorage=function(){var t="websquare_localStorage_keyList",e=";";try{if("localStorage"in window&&"unknown"!=typeof window.localStorage&&null!==window.localStorage){var i=window.localStorage;return(l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l}if(n.core.browserCheck.ie&&n.core.browserVersion()<"9"){var o="websquare_localStorage",s="",r={},a=function(){null==document.getElementById(r.id)&&((r=document.createElement("div")).id=o+"_div",r.style.display="none",r.style.position="absolute",r.style.top="-999999px",r.style.behavior='url("#default#userData")',document.body.appendChild(r),r.load(o),s=r.getAttribute(t)||"",l.length=s.split(e).length-1)};return(l={}).length=0,l.key=function(t){a();t=Number(t);return isNaN(t)||t>=this.length||t<0?null:s.split(e)[t]},l.getItem=function(t){return a(),r.getAttribute(t)},l.setItem=function(i,n){a();var l=i.charAt(0);if(!/[a-zA-Z]/.exec(l))return $l("The key name must start with [a-zA-Z]"),null;if(i===t)return $l(t+": This key is reserved.[localStorage]"),null;if(i.search(e)>=0)return $l(";: The key name must not contain colon(;).[localStorage]"),null;r.setAttribute(i,n),s.search(i)<0&&(s+=i+e,this.length++),r.setAttribute(t,s);try{r.save(o)}catch(t){$l(t.name+" : localstorage overflowed[localStorage]")}},l.removeItem=function(i){a(),r.removeAttribute(i);var n=s;s=n.replace(i+e,""),n!==s&&this.length--,r.setAttribute(t,s),r.save(o)},l.clear=function(){a();for(var i=s.split(e),n=0;n<i.length-1;n++)r.removeAttribute(i[n]);r.removeAttribute(t),s="",this.length=0,r.save(o)},l.getAllItem=function(){a();for(var t={},i=s.split(e),o=0;o<i.length-1;o++){var n=i[o];t[n]=r.getAttribute(n)}return t},l}return $l("localStorage creation error, falling back to sessionStorage."),null===(i=window.sessionStorage)?void $l("cannot create _wg.localStorage."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}catch(o){var l;return $l("localStorage creation error, falling back to sessionStorage."),null===(i=window.sessionStorage)?void $l("cannot create _wg.localStorage."):((l={}).length=i.length,l.key=function(t){t=Number(t);return isNaN(t)||t>=this.length||t<0?null:i.key(t)},l.getItem=function(t){return i.getItem(t)},l.setItem=function(o,s){var r=o.charAt(0);return/[a-zA-Z]/.exec(r)?o===t?($l(t+": This key is reserved.[localStorage]"),null):o.search(e)>=0?($l(";: The key name must not contain colon(;).[localStorage]"),null):(i.setItem(o,s),
void(this.length=i.length)):($l("The key name must start with [a-zA-Z][localStorage]"),null)},l.removeItem=function(t){i.removeItem(t),this.length=i.length},l.clear=function(){i.clear(),this.length=i.length},l.getAllItem=function(){var t={};for(var e in i)t[e]=i[e];return t},l)}}()),n.api&&(n.api.local=WebSquare.localStorage)}catch(t){n.exception.printStackTrace(t)}},n._jQuerySupport=(0,o.A)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,window.jQuery){t.next=14;break}if(""==(e=n.core.getConfiguration("/WebSquare/jquerySupport/@src"))){t.next=12;break}return t.next=6,n.BootLoader.importAsync(e);case 6:if(window.jQuery){t.next=10;break}return t.next=9,inquires("externalJS/jquery/jquery-3.7.1.min.js");case 9:$l("ERROR : Please verify the jquerySupport path in the config.xml file. The current version is "+$.fn.jquery);case 10:t.next=14;break;case 12:return t.next=14,inquires("externalJS/jquery/jquery-3.7.1.min.js");case 14:window.jQuery&&function(t){t.expr[":"].wq=function(e,i,o){var s=null;return!(!(s="idToUUID"in WebSquare?n.idCache[n.idToUUID[t(e).attr("id")]]:n.componentIdCache[t(e).attr("id")])||s.render!=e)&&(""===o[3]||null==o[3]||"*"==o[3]||s.options.pluginName==o[3].trim())};var e=function t(e){return new t.fn.init(e)},i=function(t,i){var o=this;if(this.length>0&&!this[0].getPluginName&&(o=e(this)),t)for(var s=0;s<o.length;s++){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);o[s][t].apply(o[s],r)}return o};function o(e,i){var o,r,a,n=e.nodeName.toLowerCase();return"area"===n?(r=(o=e.parentNode).name,!(!e.href||!r||"map"!==o.nodeName.toLowerCase())&&(!!(a=t("img[usemap='#"+r+"']")[0])&&s(a))):(/^(input|select|textarea|button|object)$/.test(n)?!e.disabled:"a"===n&&e.href||i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter((function(){return"hidden"===t.css(this,"visibility")})).length}e.fn=e.prototype={constructor:e,init:function(e){if(!e[0].getPluginName)for(var i=0;i<e.length;i++){var o=null;(o="idToUUID"in WebSquare?n.idCache[n.idToUUID[t(e[i]).attr("id")]]:n.componentIdCache[t(e[i]).attr("id")])&&o.render==e[i]&&this.push(o)}},selector:"",length:0,size:t.fn.size,toArray:t.fn.toArray,pushStack:t.fn.pushStack,push:[].push,sort:[].sort,splice:[].splice,wq:i,jq:function(e,i){if(this[0].getPluginName){for(var o=[],s=0;s<this.length;s++)o.push(this[s].render);this.splice(0,this.length);for(s=0;s<o.length;s++)this.push(o[s])}if(e){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);return t(this)[e].apply(t(this),r)}return t(this)},get:function(t,e){for(var i=[],o=1;o<arguments.length;o++)i.push(arguments[o]);return this[0][t].apply(this[0],i)},each:function(t){if("function"==typeof t)for(var e=0;e<this.length;e++)t.call(this[e],e,this[e])},map:function(t,e){if("function"==typeof e){var i=[];if("[object Array]"===Object.prototype.toString.call(t))for(var o=0;o<t.length;o++)i.push(e.call(t,t[o],o));else for(var o in t)i.push(e.call(t,t[o],o));return i}},animate:function(t){return this.jq("animate",t).wq()}},e.fn.init.prototype=e.fn,jQuery.fn.extend({wq:i}),jQuery.fn.extend(t.expr[":"],{focusable:function(e){return o(e,!isNaN(t.attr(e,"tabindex")))},showable:function(t){return s(t)},tabbable:function(e){var i=t.attr(e,"tabindex"),s=isNaN(i);return t(e).hasClass("w2grid")||t(e).hasClass("w2checkbox")||t(e).hasClass("w2anchor")||t(e).hasClass("w2anchor2")||t(e).hasClass("w2radio")||t(e).hasClass("w2radio_input")||t(e).hasClass("w2inputCalendar")||t(e).hasClass("w2inputCalendar_div")||t(e).hasClass("w2searchbox")||t(e).hasClass("w2textarea")||(s||i>=0)&&o(e,!s)}})}(jQuery),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])}))),n._XMLSupport=function(){try{n.core.supportDOM&&(n.core.browserCheck.opera||n.document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(t,e){if(t){void 0===e&&(e=this)
;for(var i=this.createNSResolver(this.documentElement),o=this.evaluate(t,e,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},XMLDocument.prototype.selectSingleNode=function(t,e){if(t){void 0===e&&(e=this);var i=this.selectNodes(t,e);return i.length>0?i[0]:null}},Document.prototype.selectNodes=XMLDocument.prototype.selectNodes,Document.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode,Element.prototype.selectNodes=function(t){if(t){for(var e=this.ownerDocument,i=e.createNSResolver(e.documentElement),o=e.evaluate(t,this,i,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),s=[],r=0;r<o.snapshotLength;r++)s[r]=o.snapshotItem(r);return s}},Element.prototype.selectSingleNode=function(t){if(t){var e=this.selectNodes(t);return e.length>0?e[0]:null}}))}catch(t){n.exception.printStackTrace(t)}},n._initImportFunction=function(){try{window._$W=WebSquare,window.$W=WebSquare,_$W._a=_$W.uiplugin,$W._a=_$W._a,window.WebSquareLang={},window.requires=n.BootLoader.requireAsync,window.imports=n.BootLoader.importAsync,window.inquires=n.BootLoader.inquires,window.$integrity=n.BootLoader.$integrity}catch(t){n.exception.printStackTrace(t)}},n._initWebsquareModule=function(){try{for(var t=0;t<n._initImportList.length;t++){for(var e=n._initImportList[t].split("."),i=n,o=0;o<e.length-1;o++)i=n[e[o]];i[e[e.length-1]]._initImport()}n._initImportList=[]}catch(t){n.exception.printStackTrace(t)}},n._initModule=(0,o.A)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n._bInitModule=!0,n._XMLSupport(),t.next=4,n._jQuerySupport();case 4:return t.next=6,inquires("externalJS/papaparse.js");case 6:window[n.noConflict]=n.api,window[n.noConflict].comp={},window.$l=n.logger.printLog,n._initWebsquareModule();case 10:case"end":return t.stop()}}),t)}))),n._dynamicImport=function(){var t=(0,o.A)(a().mark((function t(e,i){var o,s,r,l,h;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.prev=1,!(o=new Function("u","return import(u)"))){t.next=7;break}return t.next=6,o(e);case 6:return t.abrupt("return",t.sent);case 7:t.next=18;break;case 9:return t.prev=9,t.t0=t.catch(1),s=i&&i.altModulePath?i.altModulePath:e,t.next=14,n.BootLoader.loadAsync(s);case 14:return r=t.sent,l="export default ",h=r.slice(r.indexOf(l)+15),t.abrupt("return",new Function("return { default : "+h+"}")());case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(0),n.exception.printStackTrace(t.t1);case 23:case"end":return t.stop()}}),t,null,[[0,20],[1,9]])})));return function(e,i){return t.apply(this,arguments)}}(),n._dynamicImportAMD=function(){var t=(0,o.A)(a().mark((function t(e,i){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n.clearScriptHead(),!0!==i){t.next=6;break}return t.abrupt("return",n._dynamicImportFunc(e));case 6:return t.next=8,inquires("externalJS/requirejs/require.js");case 8:return window.requirejs.config({waitSeconds:n.amdTimeout}),t.abrupt("return",new Promise((function(t,i){window.requirejs([e],(function(i){t(i),window.requirejs.undef(e)}),(function(i){n.logger.printLog(i.message);var o=n._dynamicImportFunc(e);t(o)}))})).catch((function(t){return window.requirejs.undef(e),n._dynamicImportFunc(e)})));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,i){return t.apply(this,arguments)}}(),n._dynamicImportFunc=function(){var t=(0,o.A)(a().mark((function t(e){var i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=n.BootLoader.loadAsync(e),t.abrupt("return",i.then((function(t,e){var i=t,o="define(",s=i.slice(i.indexOf(o)+7),r=s.lastIndexOf(")");return s=s.slice(0,r),new Function("return "+s)()})).catch((function(t){var e=WebSquare.core.getConfiguration("/WebSquare/errorPage/errorHandler/@value");if(""!=e){var i=WebSquare.util.getGlobalFunction(e);if(i){var o=i({
status:t});return WebSquare.xmljs.xml2json(o)}}})));case 5:t.prev=5,t.t0=t.catch(0),n.exception.printStackTrace(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}(),n._loadModuleDynamic=function(t){var e;switch(t){case"uiplugin.balloonTip":e=Promise.resolve().then(i.bind(i,7704)).then((function(t,e){WebSquare.uiplugin.balloonTip=t.balloonTip}));break;case"uiplugin.group":e=Promise.resolve().then(i.bind(i,3058)).then((function(t,e){WebSquare.uiplugin.group=t.group}));break;case"uiplugin.wframe":e=Promise.resolve().then(i.bind(i,8736)).then((function(t,e){WebSquare.uiplugin.wframe=t.wframe}));break;case"uiplugin.textbox":e=Promise.resolve().then(i.bind(i,3870)).then((function(t,e){WebSquare.uiplugin.textbox=t.textbox}));break;case"uiplugin.anchor":e=Promise.resolve().then(i.bind(i,7662)).then((function(t,e){WebSquare.uiplugin.anchor=t.anchor}));break;case"uiplugin.selectbox":e=Promise.resolve().then(i.bind(i,7610)).then((function(t,e){WebSquare.uiplugin.selectbox=t.selectbox,WebSquare.uiplugin.selectbox_native=t.selectbox_native}));break;case"uiplugin.input":e=Promise.resolve().then(i.bind(i,1018)).then((function(t,e){WebSquare.uiplugin.input=t.input}));break;case"uiplugin.span":e=Promise.resolve().then(i.bind(i,5600)).then((function(t,e){WebSquare.uiplugin.span=t.span}));break;case"uiplugin.calendar":e=Promise.resolve().then(i.bind(i,2280)).then((function(t,e){WebSquare.uiplugin.calendar=t.calendar}));break;case"uiplugin.inputCalendar":e=Promise.resolve().then(i.bind(i,4058)).then((function(t,e){WebSquare.uiplugin.inputCalendar=t.inputCalendar}));break;case"uiplugin.textarea":e=Promise.resolve().then(i.bind(i,6416)).then((function(t,e){WebSquare.uiplugin.textarea=t.textarea}));break;case"uiplugin.checkcombobox":e=Promise.resolve().then(i.bind(i,4722)).then((function(t,e){WebSquare.uiplugin.checkcombobox=t.checkcombobox}));break;case"uiplugin.autoComplete":e=Promise.resolve().then(i.bind(i,3312)).then((function(t,e){WebSquare.uiplugin.autoComplete=t.autoComplete}));break;case"uiplugin.list":e=Promise.resolve().then(i.bind(i,4984)).then((function(t,e){WebSquare.uiplugin.list=t.list}));break;case"uiplugin.floatingLayer":e=Promise.resolve().then(i.bind(i,554)).then((function(t,e){WebSquare.uiplugin.floatingLayer=t.floatingLayer}));break;case"uiplugin.radio":e=Promise.resolve().then(i.bind(i,4090)).then((function(t,e){WebSquare.uiplugin.radio=t.radio}));break;case"uiplugin.spinner":e=Promise.resolve().then(i.bind(i,6050)).then((function(t,e){WebSquare.uiplugin.spinner=t.spinner}));break;case"uiplugin.gridView":e=Promise.resolve().then(i.bind(i,7867)).then((function(t,e){WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo}));break;case"uiplugin.trigger":e=Promise.resolve().then(i.bind(i,3050)).then((function(t,e){WebSquare.uiplugin.trigger=t.trigger}));break;case"uiplugin.button":e=Promise.resolve().then(i.bind(i,4228)).then((function(t,e){WebSquare.uiplugin.button=t.button}));break;case"uiplugin.image":e=Promise.resolve().then(i.bind(i,8862)).then((function(t,e){WebSquare.uiplugin.image=t.image}));break;case"uiplugin.pageList":e=Promise.resolve().then(i.bind(i,3938)).then((function(t,e){WebSquare.uiplugin.pageList=t.pageList}));break;case"uiplugin.tabControl":e=Promise.resolve().then(i.bind(i,152)).then((function(t,e){WebSquare.uiplugin.tabControl=t.tabControl,WebSquare.uiplugin.content=t.content}));break;case"uiplugin.generator":e=Promise.resolve().then(i.bind(i,5254)).then((function(t,e){WebSquare.uiplugin.generator=t.generator}));break;case"uiplugin.upload":e=Promise.resolve().then(i.bind(i,6442)).then((function(t,e){WebSquare.uiplugin.upload=t.upload}));break;case"uiplugin.treeview":
e=Promise.resolve().then(i.bind(i,8824)).then((function(t,e){WebSquare.uiplugin.treeview=t.treeview}));break;case"uiplugin.treeview_virtual":e=Promise.resolve().then(i.bind(i,1966)).then((function(t,e){WebSquare.uiplugin.treeview_virtual=t.treeview_virtual}));break;case"uiplugin.checkbox":e=Promise.resolve().then(i.bind(i,9906)).then((function(t,e){WebSquare.uiplugin.checkbox=t.checkbox}));break;case"uiplugin.output":e=Promise.resolve().then(i.bind(i,6138)).then((function(t,e){WebSquare.uiplugin.output=t.output}));break;case"uiplugin.window":e=Promise.resolve().then(i.bind(i,40)).then((function(t,e){WebSquare.uiplugin.window=t.wq_window}));break;case"uiplugin.windowContainer":e=Promise.resolve().then(i.bind(i,2874)).then((function(t,e){WebSquare.uiplugin.windowContainer=t.windowContainer}));break;case"uiplugin.accordion":e=Promise.resolve().then(i.bind(i,434)).then((function(t,e){WebSquare.uiplugin.accordion=t.accordion,WebSquare.uiplugin.panels=t.panels}));break;case"uiplugin.widgetContainer":e=Promise.resolve().then(i.bind(i,8538)).then((function(t,e){WebSquare.uiplugin.widgetContainer=t.widgetContainer,WebSquare.uiplugin.widget=t.widget}));break;case"uiplugin.panelContainer":e=Promise.resolve().then(i.bind(i,7838)).then((function(t,e){WebSquare.uiplugin.panelContainer=t.panelContainer,WebSquare.uiplugin.panel=t.panel}));break;case"uiplugin.mapchart":case"uiplugin.mapchart":e=i.e(291).then(i.bind(i,8672)).then((function(t,e){WebSquare.uiplugin.mapchart=t.mapchart}));break;case"uiplugin.gridLayout":case"uiplugin.gridLayout":e=Promise.resolve().then(i.bind(i,4524)).then((function(t,e){WebSquare.uiplugin.gridLayout=t.gridLayout}));break;case"uiplugin.udc":e=Promise.resolve().then(i.bind(i,4142)).then((function(t,e){WebSquare.uiplugin.udc=t.udc}));break;case"uiplugin.pageFrame":e=Promise.resolve().then(i.bind(i,1218)).then((function(t,e){WebSquare.uiplugin.pageFrame=t.pageFrame}));break;case"uiplugin.pivot":e=i.e(280).then(i.bind(i,3280)).then((function(t,e){WebSquare.uiplugin.pivot=t.pivot}));break;case"uiplugin.editor":e=i.e(790).then(i.bind(i,6790)).then((function(t,e){WebSquare.uiplugin.editor=t.editor}));break;case"uiplugin.multiupload":e=i.e(398).then(i.bind(i,5398)).then((function(t,e){WebSquare.uiplugin.multiupload=t.multiupload}));break;case"uiplugin.fusionchart":e=i.e(474).then(i.bind(i,5474)).then((function(t,e){WebSquare.uiplugin.fusionchart=t.fusionchart}));break;case"uiplugin.fwFunnelChart":e=i.e(438).then(i.bind(i,1438)).then((function(t,e){WebSquare.uiplugin.fwFunnelChart=t.fwFunnelChart}));break;case"uiplugin.fwPyramidChart":e=i.e(146).then(i.bind(i,5146)).then((function(t,e){WebSquare.uiplugin.fwPyramidChart=t.fwPyramidChart}));break;case"uiplugin.fwSparkChart":e=i.e(268).then(i.bind(i,4268)).then((function(t,e){WebSquare.uiplugin.fwSparkChart=t.fwSparkChart}));break;case"uiplugin.fwGaugeChart":e=i.e(672).then(i.bind(i,7672)).then((function(t,e){WebSquare.uiplugin.fwGaugeChart=t.fwGaugeChart}));break;case"uiplugin.fwGanttChart":e=i.e(526).then(i.bind(i,1526)).then((function(t,e){WebSquare.uiplugin.fwGanttChart=t.fwGanttChart}));break;case"uiplugin.fwRealtimeChart":e=i.e(622).then(i.bind(i,8622)).then((function(t,e){WebSquare.uiplugin.fwRealtimeChart=t.fwRealtimeChart}));break;case"uiplugin.fwBulletChart":e=i.e(990).then(i.bind(i,1990)).then((function(t,e){WebSquare.uiplugin.fwBulletChart=t.fwBulletChart}));break;case"uiplugin.spinPicker":e=i.e(752).then(i.bind(i,3752)).then((function(t,e){WebSquare.uiplugin.spinPicker=t.spinPicker}));break;case"uiplugin.datePicker":e=Promise.all([i.e(752),i.e(412)]).then(i.bind(i,3412)).then((function(t,e){WebSquare.uiplugin.datePicker=t.datePicker}));break;case"uiplugin.slider":e=i.e(806).then(i.bind(i,9806)).then((function(t,e){WebSquare.uiplugin.slider=t.slider,WebSquare.uiplugin.thumb=t.thumb}));break;case"uiplugin.searchbox":e=i.e(22).then(i.bind(i,8022)).then((function(t,e){WebSquare.uiplugin.searchbox=t.searchbox}));break;case"uiplugin.fliptoggle":
e=i.e(994).then(i.bind(i,3994)).then((function(t,e){WebSquare.uiplugin.fliptoggle=t.fliptoggle}));break;case"uiplugin.pageControl":e=i.e(482).then(i.bind(i,2482)).then((function(t,e){WebSquare.uiplugin.pageControl=t.pageControl}));break;case"uiplugin.repeat":e=i.e(394).then(i.bind(i,8394)).then((function(t,e){WebSquare.uiplugin.repeat=t.repeat,WebSquare.uiplugin.repeatAPI=t.repeatAPI}));break;case"uiplugin.graphicUtil":e=i.e(628).then(i.bind(i,1628)).then((function(t,e){WebSquare.uiplugin.graphicUtil=t.graphicUtil}));break;case"uiplugin.roundRectangle":e=i.e(922).then(i.bind(i,9922)).then((function(t,e){WebSquare.uiplugin.roundRectangle=t.roundRectangle}));break;case"uiplugin.multiselect":e=i.e(442).then(i.bind(i,4061)).then((function(t,e){WebSquare.uiplugin.multiselect=t.multiselect}));break;case"uiplugin.Switch":e=i.e(196).then(i.bind(i,196)).then((function(t,e){WebSquare.uiplugin.Switch=t.Switch}));break;case"uiplugin.slideHide":e=i.e(766).then(i.bind(i,8766)).then((function(t,e){WebSquare.uiplugin.slideHide=t.slideHide}));break;case"uiplugin.iframe":e=i.e(272).then(i.bind(i,7272)).then((function(t,e){WebSquare.uiplugin.iframe=t.iframe}));break;case"uiplugin.layer":e=i.e(862).then(i.bind(i,6481)).then((function(t,e){WebSquare.uiplugin.layer=t.layerU}));break;case"uiplugin.grid":e=Promise.resolve().then(i.bind(i,7867)).then((function(t,e){return WebSquare.uiplugin.gridView=t.gridView,WebSquare.uiplugin.drilldown=t.drilldown,WebSquare.uiplugin.mappingController=t.mappingController,WebSquare.uiplugin.linkedMappingController=t.linkedMappingController,WebSquare.uiplugin.cellInfo=t.cellInfo,WebSquare.uiplugin.headerInfo=t.headerInfo,i.e(248).then(i.bind(i,9248)).then((function(t,e){WebSquare.uiplugin.grid=t.grid}))}));break;case"uiplugin.pageInherit":e=i.e(930).then(i.bind(i,9930)).then((function(t,e){WebSquare.uiplugin.pageInherit=t.pageInherit}));break;case"uiplugin.scrollView":e=Promise.resolve().then(i.bind(i,6976)).then((function(t,e){WebSquare.uiplugin.scrollView=t.scrollView}));break;case"uiplugin.scheduleCalendar":e=i.e(594).then(i.bind(i,3594)).then((function(t,e){WebSquare.uiplugin.scheduleCalendar=t.scheduleCalendar}));break;case"uiplugin.progressbar":e=i.e(150).then(i.bind(i,8150)).then((function(t,e){WebSquare.uiplugin.progressbar=t.progressbar}));break;case"engine.wUnit":e=i.e(717).then(i.bind(i,3717)).then((function(t,e){WebSquare.wUnit=t.wUnit}));break;default:return}return e.then((function(t,e){!0===n._bInitModule&&n._initWebsquareModule()})),e},n._getModuleSrc=function(t){if("string"!=typeof t)return t;var e=t.indexOf("websquare/externalJS");return e>=0&&t.match(/big|bisCommon|bootstrap|ckfinder|editor|fullCalendar|FusionChart|jquery|mapchart|progressbar|underscore|xmlparser|xpath/)&&"_websquare_/externalJS"!==t.slice(e-12,e+10)&&(t=t.replace("externalJS","_websquare_/externalJS")),t},n._performance._valid=function(){try{var t=n._performance.use;return!0===t||"string"==typeof t&&"true"===t.toLowerCase()}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}},n._performance.mark=function(t,e){try{if(n._performance._valid()&&t){e||(e={detail:n.w2xPath}),performance.mark("wq.mark."+t,e)}}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}},n._performance.measure=function(t,e,i){try{if(n._performance._valid()&&t){var o="wq.mark.";e=e?o+e:0,i||(i={src:n.w2xPath||"",id:n.strictModeFrame?n.strictModeFrame.id:"",log:""}),i.endMark&&(endMark=o+i.endMark);var s={start:e,detail:i};performance.measure("wq."+t,s,i.endMark)}}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}},n.safeRandom=function(){try{return window.crypto&&"function"==typeof window.crypto.getRandomValues?window.crypto.getRandomValues(new Uint32Array(1))[0]:(new Date).getTime()%1e10}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}},n.clearScriptHead=function(){try{
for(var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,e=t.getElementsByTagName("script"),i=e.length-1;i>=0;i--){var o=e[i];"true"!=o.getAttribute("data-wqexternal")&&"true"!=o.getAttribute("data-wqInternal")&&"_"!==o.getAttribute("data-requirecontext")||t.removeChild(o)}}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}}},8085:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{l:function(){return wq_polyfill}});var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2284),leftTrimRegExp,rightTrimRegExp,capitalizeStyleHash;window.String.prototype.wq_trim=(leftTrimRegExp=new RegExp("^\\s\\s*"),rightTrimRegExp=new RegExp("\\s\\s*$"),function(){return this.replace(leftTrimRegExp,"").replace(rightTrimRegExp,"")}),void 0===window.String.prototype.trim&&(window.String.prototype.trim=window.String.prototype.wq_trim),window.String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.substr(1)},window.String.prototype.wq_replaceAll=function(t,e){try{var i="";if(t instanceof RegExp){if(!t.global)throw new TypeError("replaceAll's first parameter must be a string or a regular expression with the global flag enabled.");i=this.replace(t,e)}else t=t.replace(/(\W)/g,"\\$1"),i=this.replace(new RegExp(t,"gi"),e);return i}catch(t){WebSquare.exception.printStackTrace(t)}},void 0===window.String.prototype.replaceAll&&(window.String.prototype.replaceAll=window.String.prototype.wq_replaceAll),window.String.prototype.startsWith=function(t){return this.substring(0,t.length)==t},window.String.prototype.endsWith=function(t){return this.substring(this.length-t.length,this.length)==t},window.String.prototype.capitalizeStyle=(capitalizeStyleHash={},function(){var t=capitalizeStyleHash[this];if(t)return t;if(this.indexOf("-")<0)return this;for(var e=this.split("-");""==e[0];)e.shift();for(var i=e[0].toLowerCase(),o=1,s=e.length;o<s;o++)i+=e[o].toLowerCase().capitalize();return capitalizeStyleHash[this]=i,i}),window.wq_reload=function(t){try{null==window.locationTimerCount&&(window.locationTimerCount=0),window.locationTimerCount++,null==t||location.href===t||window.locationTimerCount>700?(window.locationTimerCount=0,location.reload()):(location.replace(t),setTimeout((function(){wq_reload(t)}),5))}catch(t){console&&console.log&&console.log("wq_reload error : "+t.message)}};var wq_polyfill={};wq_polyfill.init=function(global){(function(){function f(t){return t<10?"0"+t:t}var cx,escapable,gap,indent,meta,rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,(function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'}function str(t,e){var i,o,s,r,a=gap,n=e[t];switch(n&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(n)&&"function"==typeof n.toJSON&&(n=n.toJSON(t)),"function"==typeof rep&&(n=rep.call(e,t,n)),(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(n)){case"string":return quote(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(n)){s=n.length;for(var l=0;l<s;l+=1)r[l]=str(l,n)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(rep)){s=rep.length;for(l=0;l<s;l+=1)"string"==typeof rep[l]&&(o=str(i=rep[l],n))&&r.push(quote(i)+(gap?": ":":")+o)}else for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=str(i,n))&&r.push(quote(i)+(gap?": ":":")+o);return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"object"!==(0,
_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(window.JSON)&&(window.JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var isIE=null!=navigator.appName.match(/Explorer/i);("function"!=typeof JSON.stringify||isIE)&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,i){if(gap="",indent="","number"==typeof i)for(var o=0;o<i;o+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!==(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(e)||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),("function"!=typeof JSON.parse||isIE)&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(t,e){var i,o,s=t[e];if(s&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(s))for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(void 0!==(o=walk(s,i))?s[i]=o:delete s[i]);return reviver.call(t,e,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),function(){var t=null!=navigator.appName.match(/Explorer/i)||null!=navigator.userAgent.match(/Trident/i)||null!=navigator.userAgent.match(/MSIE/i);function e(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))}function i(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError((0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var s=o.length;function r(t,i){if(i&&("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(i)||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,(function(e){r(t,e)}),(function(i){o[t]={status:"rejected",reason:i},0==--s&&e(o)}))}o[t]={status:"fulfilled",value:i},0==--s&&e(o)}for(var a=0;a<o.length;a++)r(a,o[a])}))}function o(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}function s(t){var e=this;return new e((function(i,s){if(!t||void 0===t.length)return s(new TypeError("Promise.any accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return s();for(var a=[],n=0;n<r.length;n++)try{e.resolve(r[n]).then(i).catch((function(t){a.push(t),a.length===r.length&&s(new o(a,"All promises were rejected"))}))}catch(t){s(t)}}))}o.prototype=Error.prototype;var r=setTimeout;function a(t){return Boolean(t&&void 0!==t.length)}function n(){}function l(t){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(t,this)}function h(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,l._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var o;try{
o=i(t._value)}catch(t){return void c(e.promise,t)}d(e.promise,o)}else(1===t._state?d:c)(e.promise,t._value)}))):t._deferreds.push(e)}function d(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(e)||"function"==typeof e)){var i=e.then;if(e instanceof l)return t._state=3,t._value=e,void u(t);if("function"==typeof i)return void g((o=i,s=e,function(){o.apply(s,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){c(t,e)}var o,s}function c(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&l._immediateFn((function(){t._handled||l._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)h(t,t._deferreds[e]);t._deferreds=null}function p(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function g(t,e){var i=!1;try{t((function(t){i||(i=!0,d(e,t))}),(function(t){i||(i=!0,c(e,t))}))}catch(t){if(i)return;i=!0,c(e,t)}}l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){var i=new this.constructor(n);return h(this,new p(t,e,i)),i},l.prototype.finally=e,l.all=function(t){return new l((function(e,i){if(!a(t))return i(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var s=o.length;function r(t,a){try{if(a&&("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(a)||"function"==typeof a)){var n=a.then;if("function"==typeof n)return void n.call(a,(function(e){r(t,e)}),i)}o[t]=a,0==--s&&e(o)}catch(t){i(t)}}for(var n=0;n<o.length;n++)r(n,o[n])}))},l.any=s,l.allSettled=i,l.resolve=function(t){return t&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.A)(t)&&t.constructor===l?t:new l((function(e){e(t)}))},l.reject=function(t){return new l((function(e,i){i(t)}))},l.race=function(t){return new l((function(e,i){if(!a(t))return i(new TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;o<s;o++)l.resolve(t[o]).then(e,i)}))},l._immediateFn=function(t){r(t,0)},l._unhandledRejectionFn=function(t){};var m=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==global)return global;throw new Error("unable to locate global object")}();"function"!=typeof m.Promise||t?m.Promise=l:(m.Promise.prototype.finally||(m.Promise.prototype.finally=e),m.Promise.allSettled||(m.Promise.allSettled=i),m.Promise.any||(m.Promise.any=s))}(),function(){var t=document.createElement("i");if(t.style.setProperty("--x","y"),"y"!==t.style.getPropertyValue("--x")&&t.msMatchesSelector){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var e,i=[],o=document,s=!1;document.addEventListener("DOMContentLoaded",(function(){s=!0})),"classList"in Element.prototype||M("classList",HTMLElement.prototype,Element.prototype),"innerHTML"in Element.prototype||M("innerHTML",HTMLElement.prototype,Element.prototype),"runtimeStyle"in Element.prototype||M("runtimeStyle",HTMLElement.prototype,Element.prototype),"sheet"in SVGStyleElement.prototype||Object.defineProperty(SVGStyleElement.prototype,"sheet",{get:function(){for(var t,e=document.styleSheets,i=0;t=e[i++];)if(t.ownerNode===this)return t}});var r={},a=new Set,n=!1,l=!1,h=/([\s{;])(--([A-Za-z0-9-_]*)\s*:([^;!}{]+)(!important)?)(?=\s*([;}]|$))/g,d=/([{;]\s*)([A-Za-z0-9-_]+\s*:[^;}{]*var\([^!;}{]+)(!important)?(?=\s*([;}$]|$))/g,c=/-ieVar-([^:]+):/g,u=/-ie-([^};]+)/g,p=/:(hover|active|focus|target|visited|link|:before|:after|:first-letter|:first-line)/;A("style:not([iecp-ignore])",E),A("link[rel=stylesheet]:not([iecp-ignore])",E),A("[ie-style]",(function(t){var e=R("{"+t.getAttribute("ie-style")).substr(1);t.style.cssText+=";"+e;var i=N(t.style);i.getters&&B(t,i.getters,"%styleAttr"),i.setters&&Y(t,i.setters)}));var g={hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focusin",
off:"focusout"},active:{on:"CSSActivate",off:"CSSDeactivate"}},m=null;document.addEventListener("mousedown",(function(t){setTimeout((function(){if(t.target===document.activeElement){var e=document.createEvent("Event");e.initEvent("CSSActivate",!0,!0),(m=t.target).dispatchEvent(e)}}))})),document.addEventListener("mouseup",(function(){if(m){var t=document.createEvent("Event");t.initEvent("CSSDeactivate",!0,!0),m.dispatchEvent(t),m=null}}));var f=0,b=new MutationObserver((function(t){if(!l)for(var e,i=0;e=t[i++];)"iecp-needed"!==e.attributeName&&Z(e.target)}));setTimeout((function(){b.observe(document,{attributes:!0,subtree:!0})}));var y=location.hash;addEventListener("hashchange",(function(t){var e=document.getElementById(location.hash.substr(1));if(e){var i=document.getElementById(y.substr(1));Z(e),Z(i)}else Z(document);y=location.hash}));var v=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"style"),w=v.get;v.get=function(){var t=w.call(this);return t.owningElement=this,t},Object.defineProperty(HTMLElement.prototype,"style",v);var S=getComputedStyle;window.getComputedStyle=function(t){var e=S.apply(this,arguments);return e.computedFor=t,e};var _=CSSStyleDeclaration.prototype,C=_.getPropertyValue;_.getPropertyValue=function(t){if(this.lastPropertyServedBy=!1,"-"!==(t=t.trim())[0]||"-"!==t[1])return C.apply(this,arguments);var e=t.substr(2),i="-ie-"+e,o="-ie-"+e,s=this[o]||this[i];if(this.computedFor){if(void 0===s||I[s]){if(I[s]||!k[t]||k[t].inherits)for(var r=this.computedFor.parentNode;r&&1===r.nodeType;){var a=getComputedStyle(r),n=a[o]||a[i];if(void 0!==n){s=X(this,n),this.lastPropertyServedBy=r;break}r=r.parentNode}}else s=X(this,s),this.lastPropertyServedBy=this.computedFor;if("initial"===s)return""}return void 0===s&&k[t]&&(s=k[t].initialValue),void 0===s?"":s};var I={inherit:1,revert:1,unset:1},T=_.setProperty;_.setProperty=function(t,e,i){if("-"!==t[0]||"-"!==t[1])return T.apply(this,arguments);var o=this.owningElement;o&&(o.ieCP_setters||(o.ieCP_setters={}),o.ieCP_setters[t]=1),t="-ie-"+("important"===i?"":"")+t.substr(2),this.cssText+="; "+t+":"+e+";",o&&Z(o)},window.CSS||(window.CSS={});var k={};CSS.registerProperty=function(t){k[t.name]=t}}function L(t,e){try{return t.querySelectorAll(e)}catch(t){return[]}}function A(t,s){for(var r,a={selector:t,callback:s,elements:new WeakMap},n=L(o,a.selector),l=0;r=n[l++];)a.elements.set(r,!0),a.callback.call(r,r);i.push(a),e||(e=new MutationObserver(q)).observe(o,{childList:!0,subtree:!0}),D(a)}function D(t,e){var i,r=0,a=[];try{e&&e.matches(t.selector)&&a.push(e)}catch(t){}for(s&&Array.prototype.push.apply(a,L(e||o,t.selector));i=a[r++];)t.elements.has(i)||(t.elements.set(i,!0),t.callback.call(i,i))}function W(t){for(var e,o=0;e=i[o++];)D(e,t)}function q(t){for(var e,i,o,s,r=0;i=t[r++];)for(o=i.addedNodes,e=0;s=o[e++];)1===s.nodeType&&W(s)}function M(t,e,i){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,o)}function E(t){if(!t.ieCP_polyfilled&&!t.ieCP_elementSheet&&t.sheet){if(t.href)return e=t.href,i=function(e){var i=R(e);e!==i&&F(t,i)},(o=new XMLHttpRequest).open("GET",e),o.overrideMimeType("text/css"),o.onload=function(){o.status>=200&&o.status<400&&i(o.responseText)},void o.send();var e,i,o,s=t.innerHTML,r=R(s);s!==r&&F(t,r)}}function R(t){return t.replace(h,(function(t,e,i,o,s,r){return e+"-ie-"+(r?"":"")+o+":"+s})).replace(d,(function(t,e,i,o){return e+"-ieVar-"+(o?"":"")+i+"; "+i}))}function N(t){t["z-index"]===t&&x();var e,i,o=t.cssText,s=o.match(c);if(s){var a=[];for(e=0;i=s[e++];){var n=i.slice(7,-1);""===n[0]&&(n=n.substr(1)),a.push(n),r[n]||(r[n]=[]),r[n].push(t)}}var l=o.match(u);if(l){var h={};for(e=0;i=l[e++];){var d=i.substr(4).split(":"),p=d[0],g=d[1];""===p[0]&&(p=p.substr(1)),h[p]=g}}return{getters:a,setters:h}}function F(t,e){t.sheet.cssText=e,t.ieCP_polyfilled=!0;for(var i,o=t.sheet.rules,s=0;i=o[s++];){var r=N(i.style);r.getters&&O(i.selectorText,r.getters),r.setters&&P(i.selectorText,r.setters)
;var a=i.parentRule&&i.parentRule.media&&i.parentRule.media.mediaText;a&&(r.getters||r.setters)&&matchMedia(a).addListener((function(){Z(document.documentElement)}))}V()}function O(t,e){H(t),A(j(t),(function(i){B(i,e,t),z(i)}))}function B(t,e,i){var o,s,r=0,a=i.split(",");for(t.setAttribute("iecp-needed",!0),t.ieCPSelectors||(t.ieCPSelectors={});o=e[r++];)for(s=0;i=a[s++];){var n=i.trim().split("::");t.ieCPSelectors[o]||(t.ieCPSelectors[o]=[]),t.ieCPSelectors[o].push({selector:n[0],pseudo:n[1]?"::"+n[1]:""})}}function P(t,e){H(t),A(j(t),(function(t){Y(t,e)}))}function Y(t,e){for(var i in t.ieCP_setters||(t.ieCP_setters={}),e)t.ieCP_setters["--"+i]=1;Z(t)}function V(){for(var t in r)for(var e,i=r[t],o=0;e=i[o++];)if(!e.owningElement){var s=e["-ieVar-"+t];if(s&&""!==(s=X(getComputedStyle(document.documentElement),s)))try{e[t]=s}catch(t){}}}function H(t){t=t.split(",")[0];var e,i,o=function(){if((e=t.split(":"+s)).length>1){i=e[1].match(/^[^\s]*/);var o=j(e[0]+i),r=g[s];A(o,(function(t){t.addEventListener(r.on,U),t.addEventListener(r.off,U)}))}};for(var s in g)o()}function j(t){return t.replace(p,"").replace(":not()","")}function z(t){a.add(t),n||(n=!0,requestAnimationFrame((function(){n=!1,l=!0,a.forEach(G),a.clear(),setTimeout((function(){l=!1}))})))}function G(t){t.ieCP_unique||(t.ieCP_unique=++f,t.classList.add("iecp-u"+t.ieCP_unique));var e=getComputedStyle(t),i="";for(var o in t.runtimeStyle.cssText="",t.ieCPSelectors){var s=e["-ieVar-"+o],r=s||e["-ieVar-"+o];if(r){var a={},n=X(e,r,a);s&&(n+=" !important");for(var l,h=0;l=t.ieCPSelectors[o][h++];)"%styleAttr"===l.selector&&(t.style[o]=n),(s||!1===a.allByRoot)&&(l.pseudo?i+=l.selector+".iecp-u"+t.ieCP_unique+l.pseudo+"{"+o+":"+n+"}\n":t.runtimeStyle[o]=n)}}!function(t,e){if(!t.ieCP_styleEl&&e){var i=document.createElement("style");i.ieCP_elementSheet=1,document.head.appendChild(i),t.ieCP_styleEl=i}t.ieCP_styleEl&&(t.ieCP_styleEl.textContent=e)}(t,i)}function Z(t){if(t){t===document.documentElement&&V();var e=t.querySelectorAll("[iecp-needed]");t.hasAttribute&&t.hasAttribute("iecp-needed")&&z(t);for(var i,o=0;i=e[o++];)z(i)}}function U(t){Z(t.target)}function X(t,e,i){return function(t,e){for(var i,o,s=0,r=null,a=0,n="",l=0;i=t[l++];){if("("===i&&(++s,null===r&&t[l-4]+t[l-3]+t[l-2]==="var"&&(r=s,n+=t.substring(a,l-4),a=l),t[l-5]+t[l-4]+t[l-3]+t[l-2]==="calc"&&(o=s)),")"===i&&r===s){var h=t.substring(a,l-1).trim(),d=void 0,c=h.indexOf(",");-1!==c&&(d=h.slice(c+1),h=h.slice(0,c)),n+=e(h,d,o),a=l,r=null}")"===i&&o===--s&&(o=null)}return n+t.substring(a)}(e,(function(e,o,s){var r=t.getPropertyValue(e);return s&&(r=r.replace(/^calc\(/,"(")),i&&t.lastPropertyServedBy!==document.documentElement&&(i.allByRoot=!1),""===r&&o&&(r=X(t,o,i)),r}))}}()}},4633:function(t,e,i){var o=i(3738).default;function s(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=s=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var e,i={},r=Object.prototype,a=r.hasOwnProperty,n=Object.defineProperty||function(t,e,i){t[e]=i.value},l="function"==typeof Symbol?Symbol:{},h=l.iterator||"@@iterator",d=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function u(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(e){u=function(t,e,i){return t[e]=i}}function p(t,e,i,o){var s=e&&e.prototype instanceof w?e:w,r=Object.create(s.prototype),a=new M(o||[]);return n(r,"_invoke",{value:A(t,i,a)}),r}function g(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}i.wrap=p;var m="suspendedStart",f="suspendedYield",b="executing",y="completed",v={};function w(){}function S(){}function _(){}var C={};u(C,h,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(E([])));I&&I!==r&&a.call(I,h)&&(C=I);var T=_.prototype=w.prototype=Object.create(C);function k(t){
["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function i(s,r,n,l){var h=g(t[s],t,r);if("throw"!==h.type){var d=h.arg,c=d.value;return c&&"object"==o(c)&&a.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,n,l)}),(function(t){i("throw",t,n,l)})):e.resolve(c).then((function(t){d.value=t,n(d)}),(function(t){return i("throw",t,n,l)}))}l(h.arg)}var s;n(this,"_invoke",{value:function(t,o){function r(){return new e((function(e,s){i(t,o,e,s)}))}return s=s?s.then(r,r):r()}})}function A(t,i,o){var s=m;return function(r,a){if(s===b)throw Error("Generator is already running");if(s===y){if("throw"===r)throw a;return{value:e,done:!0}}for(o.method=r,o.arg=a;;){var n=o.delegate;if(n){var l=D(n,o);if(l){if(l===v)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===m)throw s=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=b;var h=g(t,i,o);if("normal"===h.type){if(s=o.done?y:f,h.arg===v)continue;return{value:h.arg,done:o.done}}"throw"===h.type&&(s=y,o.method="throw",o.arg=h.arg)}}}function D(t,i){var o=i.method,s=t.iterator[o];if(s===e)return i.delegate=null,"throw"===o&&t.iterator.return&&(i.method="return",i.arg=e,D(t,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var r=g(s,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,v;var a=r.arg;return a?a.done?(i[t.resultName]=a.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,v):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,v)}function W(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function q(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(W,this),this.reset(!0)}function E(t){if(t||""===t){var i=t[h];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,r=function i(){for(;++s<t.length;)if(a.call(t,s))return i.value=t[s],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}throw new TypeError(o(t)+" is not iterable")}return S.prototype=_,n(T,"constructor",{value:_,configurable:!0}),n(_,"constructor",{value:S,configurable:!0}),S.displayName=u(_,c,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,c,"GeneratorFunction")),t.prototype=Object.create(T),t},i.awrap=function(t){return{__await:t}},k(L.prototype),u(L.prototype,d,(function(){return this})),i.AsyncIterator=L,i.async=function(t,e,o,s,r){void 0===r&&(r=Promise);var a=new L(p(t,e,o,s),r);return i.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(T),u(T,c,"Generator"),u(T,h,(function(){return this})),u(T,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),i=[];for(var o in e)i.push(o);return i.reverse(),function t(){for(;i.length;){var o=i.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},i.values=E,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function o(o,s){return n.type="throw",n.arg=t,i.next=o,s&&(i.method="next",i.arg=e),!!s}for(var s=this.tryEntries.length-1;s>=0;--s){
var r=this.tryEntries[s],n=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=a.call(r,"catchLoc"),h=a.call(r,"finallyLoc");if(l&&h){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var r=s?s.completion:{};return r.type=t,r.arg=e,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),q(i),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;q(i)}return s}}throw Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:E(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),v}},i}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},3738:function(t){function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},4756:function(t,e,i){var o=i(4633)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},467:function(t,e,i){"use strict";function o(t,e,i,o,s,r,a){try{var n=t[r](a),l=n.value}catch(t){return void i(t)}n.done?e(l):Promise.resolve(l).then(o,s)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(s,r){var a=t.apply(e,i);function n(t){o(a,s,r,n,l,"next",t)}function l(t){o(a,s,r,n,l,"throw",t)}n(void 0)}))}}i.d(e,{A:function(){return s}})},4980:function(t,e,i){"use strict";i.d(e,{A:function(){return r}});var o=i(2284);function s(t){var e=function(t,e){if("object"!=(0,o.A)(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=(0,o.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==(0,o.A)(e)?e:e+""}function r(t,e,i){return(e=s(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},2284:function(t,e,i){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}i.d(e,{A:function(){return o}})}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,
get:e[i]})},__webpack_require__.f={},__webpack_require__.e=function(t){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(e,i){return __webpack_require__.f[i](t,e),e}),[]))},__webpack_require__.u=function(t){return"wbd_B1248_babel_"+t+".js"},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},inProgress={},dataWebpackPrefix="webpack_test:",__webpack_require__.l=function(t,e,i,o){if(inProgress[t])inProgress[t].push(e);else{var s,r;if(void 0!==i)for(var a=document.getElementsByTagName("script"),n=0;n<a.length;n++){var l=a[n];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==dataWebpackPrefix+i){s=l;break}}s||(r=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",dataWebpackPrefix+i),s.src=t),inProgress[t]=[e];var h=function(e,i){s.onerror=s.onload=null,clearTimeout(d);var o=inProgress[t];if(delete inProgress[t],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(i)})),e)return e(i)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),r&&document.head.appendChild(s)}},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var o=i.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=i[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t}(),function(){var t={792:0};__webpack_require__.f.j=function(e,i){var o=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==o)if(o)i.push(o[2]);else{var s=new Promise((function(i,s){o=t[e]=[i,s]}));i.push(o[2]=s);var r=__webpack_require__.p+__webpack_require__.u(e),a=new Error;__webpack_require__.l(r,(function(i){if(__webpack_require__.o(t,e)&&(0!==(o=t[e])&&(t[e]=void 0),o)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,o[1](a)}}),"chunk-"+e,e)}};var e=function(e,i){var o,s,r=i[0],a=i[1],n=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)__webpack_require__.o(a,o)&&(__webpack_require__.m[o]=a[o]);if(n)n(__webpack_require__)}for(e&&e(i);l<r.length;l++)s=r[l],__webpack_require__.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var __webpack_exports__={};!function(){"use strict";var t,e,i,o,s,r=__webpack_require__(8085),a=__webpack_require__(5461),n=__webpack_require__(2660),l=__webpack_require__(5375),h=__webpack_require__(8971),d=__webpack_require__(2256),c=__webpack_require__(7991),u={errorStr:"\n",nKey:"",stat:"",_oldMode:!1,_isHead:!0,xml2json:function(t,e){try{if("string"==typeof t){this.nKey=e;var i=c._.parse(t);return this.convertXMLDocument(i)}return this.convertXMLDocument(t)}catch(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message)}},parseError:function(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message),this.stat="fail"},serialize:function(t){var e=[];return t.setAttribute("xmlns:xf",t.namespaceURI),this._serialize(t,e),e.join("")},_serialize:function(t,e){if(1==t.nodeType){if(e.push("<"),e.push(t.nodeName),
t.attributes.length>0)for(var i=0;i<t.attributes.length;i++){var o=t.attributes.item(i);e.push(" "),e.push(o.name),e.push('="'),e.push(this._encode(o.nodeValue)),e.push('"')}if(t.hasChildNodes()){e.push(">");for(var s=t.childNodes,r=0;r<s.length;r++){var a=s.item(r);this._serialize(a,e)}e.push("</"),e.push(t.nodeName),e.push(">")}else e.push("/>")}else if(3==t.nodeType)e.push(this._encode(t.nodeValue));else if(4==t.nodeType)e.push("<![CDATA["+t.nodeValue+"]]>");else if(7==t.nodeType)e.push("<?"+t.nodeName+" "+t.nodeValue+"?>\n");else if(9==t.nodeType)for(s=t.childNodes,r=0;r<s.length;r++){a=s.item(r);this._serialize(a,e)}},_encode:(t=/&/g,e=/</g,i=/>/g,o=/"/g,s=/'/g,function(r){return"string"==typeof r?r.replace(t,"&amp;").replace(e,"&lt;").replace(i,"&gt;").replace(o,"&quot;").replace(s,"&apos;"):r}),convertXMLDocument:function(t){try{var e,i={},o=[];e=1===t.nodeType?[t]:t.childNodes;for(var s=0;s<e.length;s++){var r;if(7==(r=e.item?e.item(s):e[s]).nodeType)if(r.nodeName&&"xml"==r.nodeName||r.nodeValue.indexOf("version")>=0){for(var a=/([^=\s]+)=["'](\S+)["']/g,n=null,l={};null!==(n=a.exec(r.nodeValue));){var h=n[1];if("string"==typeof h){var d=n[2];d&&(l[h]=d)}}i.declaration={A:l}}else{var c=r.nodeName;c||(c="xml-stylesheet"),o.push({T:7,N:c,instruction:r.nodeValue})}else if(1==r.nodeType){var u=this.convertElementIterative(r);o.push(u.obj)}else if(10==r.nodeType){var p=r.name+(r.publicId?' PUBLIC "'+r.publicId+'"':"")+(!r.publicId&&r.systemId?" SYSTEM":"")+(r.systemId?' "'+r.systemId+'"':"");o.push({T:10,doctype:p})}}return o.length>0&&(i.E=o),this.stat="success",i}catch(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message)}},convertAttributes:function(t){try{for(var e={},i=0;i<t.length;i++){var o=t[i];/(meta_\w*)|(metaev_\w*)/gi.test(o.name)||(e[o.name]=o.nodeValue)}return e}catch(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message)}},convertElementIterative:function(t){try{var e={T:1,N:t.nodeName},i=[];t.attributes.length>0&&(e.A=this.convertAttributes(t.attributes));for(var o=[],s=[],r=t.childNodes.length-1;r>=0;r--)o.push(t.childNodes[r]),s.push(e);for(;o.length>0;){var a=o.pop(),n=s.pop();if(1==a.nodeType)if("instance"===a.nodeName.substring(a.nodeName.indexOf(":")+1)){var l=!1;for(r=a.childNodes.length-1;r>=0;r--){if("data"===(d=a.childNodes[r]).nodeName&&1===d.nodeType&&d.childNodes&&d.childNodes.length>0){l=!0;break}"data"!==d.nodeName&&1===d.nodeType&&(l=!0)}if(!l)continue;var h={T:1,N:a.nodeName,_xml:this.serialize(a)};n.E||(n.E=[]),n.E.push(h);for(r=a.childNodes.length-1;r>=0;r--){"data"!==(d=a.childNodes[r]).nodeName&&1===d.nodeType&&(o.push(d),s.push(h))}}else{h={T:1,N:a.nodeName};a.attributes.length>0&&(h.A=this.convertAttributes(a.attributes),h.A.id&&i.push(h.A.id)),n.E||(n.E=[]),n.E.push(h),h.N&&"body"===h.N.toLowerCase()&&!0===this._oldMode&&(h.A||(h.A={}),h.A["ev:onpageload"]="scwin.onpageload");for(r=a.childNodes.length-1;r>=0;r--){var d;3===(d=a.childNodes[r]).nodeType&&""==d.nodeValue.trim()||(o.push(d),s.push(h))}}else if(2==a.nodeType);else if(3==a.nodeType){var c=a.nodeValue.trim();if(""!=c)if(c.startsWith("<![CDATA["))u=(u=c.substring(9,c.length-3)).replace(/\\/gi,"\\$&"),(u=this.cDataToFunc(u,n))&&(n.E||(n.E=[]),n.E.push({T:4,cdata:u}));else n.E||(n.E=[]),n.E.push({T:3,text:a.nodeValue.replace(/\\/gi,"\\$&")})}else if(4==a.nodeType){if(a.nodeValue){n.E||(n.E=[]);var u=a.nodeValue.replace(/\\/gi,"\\$&");u=this.cDataToFunc(u,n),n.E.push({T:4,cdata:u})}}else if(7==a.nodeType){var p=a.nodeName;p||(p="xml-stylesheet"),n.E||(n.E=[]),n.E.push({T:7,N:p,instruction:a.nodeValue.replace(/\\/gi,"\\$&")})}}return{obj:e,id:i}}catch(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message)}},cDataToFunc:function(t,e){try{if(!e||"string"!=typeof e.N)return t;var i=t;if("script"===e.N.toLowerCase()){var o="",s=e.A&&e.A["ev:event"],r=s&&s.indexOf("(");r>=0&&(o=","+s.slice(r+1,-1));var a="",n=""
;!0===this._isHead&&"false"!==e.A.lazy&&(e.A.lazy="false",a="scwin.onpageload = function(){",n="}",this._oldMode=!0),this._isHead=!1;i="function(scopeObj"+o+"){var {"+"#_wq!$!@}=scopeObj;"+a+t+n+"}"}else"w2:env"===e.N.toLowerCase()&&"string"==typeof t&&(i=JSON.parse(t));return i}catch(t){window.WebSquare&&window.WebSquare.logger&&WebSquare.logger.printLog(t.message)}}};u.json2xml=function(t,e){try{"string"==typeof t&&(t=t.parse(t)),void 0!==e&&null!=e||(e={});for(var i=[t],o=[],s="";i.length>0;){var r=i.pop();if(e.changeKey&&null!=e.changeKey[r.N]&&(r.N=e.changeKey[r.N]),o.length>0&&o[o.length-1].length--,1===r.T){for(var a in s+="<"+r.N,r.A)void 0!==r.A[a]&&(s+=" "+a+'="'+this._encode(r.A[a])+'"');if(r.E){s+=">",o.push({length:r.E.length,name:r.N});for(var n=r.E.length-1;n>=0;n--)i.push(r.E[n])}else s+="/>"}else 3===r.T?s+=r.text:4===r.T&&(s+="<![CDATA["+r.cdata+"]]>");for(;o.length>0&&0===o[o.length-1].length;){s+="</"+o.pop().name+">"}}return s}catch(t){WebSquare.exception.printStackTrace(t,null,this)}};var p=__webpack_require__(4640),g=__webpack_require__(2284),m=__webpack_require__(467),f=__webpack_require__(4756),b=__webpack_require__.n(f),y=__webpack_require__(1204),v=__webpack_require__(8926),w=__webpack_require__(3655),S={XmlEvent:function(t,e,i,o){try{this.name=t,this.action=e,this.param=i,this.disabled=o||!1}catch(t){h.Y.printStackTrace(t)}}},_=function(){this.cache=!0,this.convertedCSSText=null,this.controlCSSText=null,this.importedCSSText=null,this.internalCSSText=null,this.externalCSSText=null,this.externalCSSLink=null,this.controlCSSLink=null,this.classStyleCache=[],this.excludeList=[],this.excludeList.trigger="1",this.excludeList.submit="1",this.excludeList.inputCalendar="1",this.heightPattern=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/gi,this.widthPattern=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/gi,this.initialize(),this.startCache()};_.prototype.startCache=function(){this.cache=!0},_.prototype.endCache=function(){this.cache=!1},_.prototype.initialize=function(){this.convertedCSSText=[],this.controlCSSText=[],this.internalCSSText=[],this.externalCSSText=[],this.externalCSSLink=[],this.controlCSSLink=[]},_.prototype.addConvertedCSS=function(t,e){""!=e&&(1==this.cache?this.convertedCSSText.push(t+" {"+e+"} \n"):WebSquare.cssStyleSheet.addRule(t,e))},_.prototype.addControlCSS=function(t){this.controlCSSText.push(t+"\n")},_.prototype.addInternalCSS=function(t){this.internalCSSText.push(t+"\n")},_.prototype.addExternalCSS=function(t){this.externalCSSText.push(t+"\n")},_.prototype.linkControlCSS=function(t){this.controlCSSLink.push(t)},_.prototype.linkExternalCSS=function(t){this.externalCSSLink.push(t)},_.prototype.toCSS=function(){var t=[];return this.controlCSSText&&this.controlCSSText.length>0&&(t=(t=(t=t.concat(["/*controlCSSText*/\n"])).concat(this.controlCSSText)).concat(["\n\n"])),this.convertedCSSText&&this.convertedCSSText.length>0&&(t=(t=(t=t.concat(["/*convertedCSSText*/\n"])).concat(this.convertedCSSText)).concat(["\n\n"])),this.externalCSSText&&this.externalCSSText.length>0&&(t=(t=(t=t.concat(["/*externalCSSText*/\n"])).concat(this.externalCSSText)).concat(["\n\n"])),this.internalCSSText&&this.internalCSSText.length>0&&(t=(t=t.concat(["/*internalCSSText*/\n"])).concat(this.internalCSSText)),t.join("")},_.prototype.executeImport=function(t){try{for(var e=WebSquare.net.getParameter("adaptive")||"",i=[],o=document.getElementsByTagName("head")[0],s=0,r=this.controlCSSLink.length;s<r;s++){var a=document.createElement("link");for(var c in this.controlCSSLink[s])a[c]=this.controlCSSLink[s][c];null!=t?o.insertBefore(a,t):o.appendChild(a),i.push(a),d.v.printLog("import core css : "+a.href)}for(s=0,r=this.externalCSSLink.length;s<r;s++){var u=this.externalCSSLink[s];if(!WebSquare.hybridApp)if(""!=e&&u.adaptive){if(e!=u.adaptive)continue}else{if(y.Z.isMobile()&&u.adaptive&&"mobile"!=u.adaptive)continue;if(!y.Z.isMobile()&&u.adaptive&&"pc"!=u.adaptive)continue}a=document.createElement("link")
;for(var c in this.externalCSSLink[s])if(""!=c){var p="";if("href"==c){var g=this.externalCSSLink[s][c];p=n.Q.getResourcePostfix(g),a[c]=p,a.setAttribute("data-wqorghref",g)}else a[c]=this.externalCSSLink[s][c]}null!=t?(o.insertBefore(a,t),l.I.browserCheck.ie&&o.insertBefore(t,t)):o.appendChild(a),i.push(a),d.v.printLog("import user css : "+a.href)}this.controlCSSLink=[],this.externalCSSLink=[];var m,f=this.toCSS();if(f)if(l.I.browserCheck.ie)(m=document.createElement("style")).setAttribute("type","text/css"),m.styleSheet.cssText=f,null!=t?o.insertBefore(m,t):o.appendChild(m),i.push(m);else(m=document.createElementNS("http://www.w3.org/1999/xhtml","style")).setAttribute("type","text/css"),m.appendChild(document.createTextNode(f)),null!=t?o.insertBefore(m,t):o.appendChild(m),i.push(m);return this.initialize(),this.endCache(),o=null,i}catch(t){h.Y.printStackTrace(t)}},_.prototype.resizeStyle=function(t,e){try{var i=e.style;if(i&&""!=i){var o=this.setResizeStyle(i,e);null!=o&&null!=o.newSizeStyle&&(e.style=i+";"+o.newSizeStyle)}return e}catch(t){h.Y.printStackTrace(t)}},_.prototype.styleToClass=function(t,e){try{for(var i in e)if(i.indexOf("Style")>-1){var o=e[i];if(""!=o){var s=i+"Class",r="#"+t+" ."+s;WebSquare.cssManager.addConvertedCSS(r,o),e[i]="";var a=i.replace("Style","Class");e[a]||(e[a]=""),""!=e[a]&&(e[a]+=" "),e[a]+=s}}return e}catch(t){h.Y.printStackTrace(t)}},_.prototype.setResizeStyle=function(t,e){if(null!=this.excludeList[e.pluginName])return null;var i=null,o=/(?:^|;)\s*height\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(o&&2==o.length){var s=parseInt(o[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle=";height:"+(s-(i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth))+"px"}var r=/(?:^|;)\s*width\s*:\s*(\d*)px\s*(?:$|;)/i.exec(t);if(r&&2==r.length){var a=parseInt(r[1]);(i=this.getSizeObj(t,e,i)).newSizeStyle+=";width:"+(a-(i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth))+"px"}return i},_.prototype.getSizeObj=function(t,e,i){if(null!=i)return i;var o={paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,borderTopWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderRightWidth:0,newSizeStyle:""},s=new WebSquare.cssManager.sizeObj(t),r=this.getSizeStyleObj("w2"+e.pluginName),a=this.getSizeStyleObj(e.className);return o=this.inherit(o,r),o=this.inherit(o,a),o=this.inherit(o,s)},_.prototype.inherit=function(t,e){return null==e||(null!=e.paddingTop&&(t.paddingTop=e.paddingTop),null!=e.paddingBottom&&(t.paddingBottom=e.paddingBottom),null!=e.paddingLeft&&(t.paddingLeft=e.paddingLeft),null!=e.paddingRight&&(t.paddingRight=e.paddingRight),null!=e.borderTopWidth&&(t.borderTopWidth=e.borderTopWidth),null!=e.borderBottomWidth&&(t.borderBottomWidth=e.borderBottomWidth),null!=e.borderLeftWidth&&(t.borderLeftWidth=e.borderLeftWidth),null!=e.borderRightWidth&&(t.borderRightWidth=e.borderRightWidth)),t},_.prototype.getSizeStyleObj=function(t){if(null==t||""==t)return null;var e=this.classStyleCache[t];if(null==e){var i=this.toCSS(),o=new RegExp("[.]"+t+"[ \t\n\r]*{([^}]*)}"),s=i.match(o),r="";null!=s&&2==s.length&&(r=s[1]),e=new WebSquare.cssManager.sizeObj(r),this.classStyleCache[t]=e}return e},_.prototype.sizeObj=function(t){this.paddingTop=null,this.paddingBottom=null,this.paddingLeft=null,this.paddingRight=null,this.borderTopWidth=null,this.borderBottomWidth=null,this.borderLeftWidth=null,this.borderRightWidth=null;for(var e=t.split(";"),i=0;i<e.length;i++){var o=e[i].toLowerCase();o.indexOf("padding")>=0?this.setPaddingProperty(o):o.indexOf("border")>=0&&this.setBorderProperty(o)}},_.prototype.sizeObj.prototype.toString=function(){this.paddingTop;this.paddingBottom,this.paddingLeft,this.paddingRight,this.borderTopWidth,this.borderBottomWidth,this.borderLeftWidth,this.borderRightWidth},_.prototype.sizeObj.prototype.setPaddingProperty=function(t){var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim();if(""!=o)if("padding"==i){var s=o.split(" ");1==s.length?(this.paddingTop=parseInt(s[0]),
this.paddingRight=parseInt(s[0]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[0])):2==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[0]),this.paddingLeft=parseInt(s[1])):3==s.length?(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[1])):4==s.length&&(this.paddingTop=parseInt(s[0]),this.paddingRight=parseInt(s[1]),this.paddingBottom=parseInt(s[2]),this.paddingLeft=parseInt(s[3]))}else i.indexOf("padding-left")>=0?this.paddingLeft=parseInt(o):i.indexOf("padding-top")>=0?this.paddingTop=parseInt(o):i.indexOf("padding-right")>=0?this.paddingRight=parseInt(o):i.indexOf("padding-bottom")>=0&&(this.paddingBottom=parseInt(o))},_.prototype.sizeObj.prototype.setBorderProperty=function(t){for(var e=t.split(":"),i=e[0].wq_trim(),o=e[1].wq_trim().split(" "),s=null,r=0;r<o.length;r++)o[r].indexOf("px")>=0&&(s=parseInt(o[r]));null!=s&&("border"==i||"border-width"==i?(this.borderTopWidth=s,this.borderBottomWidth=s,this.borderLeftWidth=s,this.borderRightWidth=s):i.indexOf("border-left")>=0?this.borderLeftWidth=s:i.indexOf("border-top")>=0?this.borderTopWidth=s:i.indexOf("border-right")>=0?this.borderRightWidth=s:i.indexOf("border-bottom")>=0&&(this.borderBottomWidth=s))},_.prototype.sizeObj.prototype.inherit=function(t){null!=t&&(this.paddingTop=null!=t.paddingTop?t.paddingTop:this.paddingTop,this.paddingBottom=null!=t.paddingBottom?t.paddingBottom:this.paddingBottom,this.paddingLeft=null!=t.paddingLeft?t.paddingLeft:this.paddingLeft,this.paddingRight=null!=t.paddingRight?t.paddingRight:this.paddingRight,this.borderTopWidth=null!=t.borderTopWidth?t.borderTopWidth:this.borderTopWidth,this.borderBottomWidth=null!=t.borderBottomWidth?t.borderBottomWidth:this.borderBottomWidth,this.borderLeftWidth=null!=t.borderLeftWidth?t.borderLeftWidth:this.borderLeftWidth,this.borderRightWidth=null!=t.borderRightWidth?t.borderRightWidth:this.borderRightWidth)},_.prototype.sizeObj.prototype.nullToZero=function(t){this.paddingTop=this.paddingTop||0,this.paddingBottom=this.paddingBottom||0,this.paddingLeft=this.paddingLeft||0,this.paddingRight=this.paddingRight||0,this.borderTopWidth=this.borderTopWidth||0,this.borderBottomWidth=this.borderBottomWidth||0,this.borderLeftWidth=this.borderLeftWidth||0,this.borderRightWidth=this.borderRightWidth||0},_=new _;var C={ClassStyleCache:{},makeTime:0,_initImport:function(){C.skinTag=a.q.externalCSSURL.slice(0)}};a.q._initImportList.push("skin"),C.skinTagCache={},C.skinTagGlobalCache={},C.addImport=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),"string"==typeof t){var o={};o.href=y.Z.getAbsolutePath(l.I.getURL(t)),o.type="text/css",o.rel="stylesheet",t=o}for(var s=!1,r=0;r<C.skinTag.length;r++)if(t.href==C.skinTag[r]){s=!0,"number"==typeof C.skinTagCache[t.href]?C.skinTagCache[t.href]++:C.skinTagCache[t.href]=1;break}if(!0===i.noClear&&(C.skinTagGlobalCache[t.href]=!0),s)i.scopeObj&&"function"==typeof i.scopeObj._addCssCache&&i.scopeObj._addCssCache(t.href);else if(C.skinTag.push(t.href),"link"==l.I.getConfiguration("/WebSquare/stylesheet/@import"))1==e?_.linkExternalCSS(t):_.linkControlCSS(t);else{var a=t.href,n=l.I.load(a);1==e?_.addExternalCSS(n):_.addControlCSS(n)}}catch(t){h.Y.printStackTrace(t)}},C.parseCSS=function(t){try{if(l.I.browserCheck.ie){document.createStyleSheet().cssText=t}else{var e=document.createElementNS("http://www.w3.org/1999/xhtml","style");e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head").item(0).appendChild(e)}}catch(t){h.Y.printStackTrace(t)}},C.importCSS=function(t){try{for(var e=c._.getElementsByTagName(t.documentElement,"style",l.I._XML_NAMESPACE.XHTML),i="",o=0;o<e.length;o++){if(1==(n=e[o]).nodeType)for(var s=n.childNodes,r=0;r<s.length;r++){var a=s[r];4!=a.nodeType&&3!=a.nodeType||(i+=a.nodeValue)}}""!=i.wq_trim()&&_.addInternalCSS(i);for(s=t.childNodes,o=0;o<s.length;o++){var n
;if(7==(n=s[o]).nodeType&&"xml-stylesheet"===n.nodeName){var d=n.data.wq_replaceAll("=","").split('"');d.pop();var u={};for(r=0;r<d.length;r+=2)u[d[r].wq_trim()]=d[r+1];u.href&&(u.href=y.Z.getAbsolutePath(l.I.getURL(u.href))),null==u.type&&(u.type="text/css"),null==u.rel&&(u.rel="stylesheet"),C.addImport(u,!0)}}}catch(t){h.Y.printStackTrace(t)}},C.applyClass=function(t,e){try{t.className=e}catch(t){}},C.makeClassStyle=function(t){var e={};if(void 0===t||null==t||""==t)return e;if(void 0!==C.ClassStyleCache[t]&&null!=C.ClassStyleCache[t])return C.ClassStyleCache[t];try{var i=document.styleSheets;if(l.I.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(g=s.rules.item(r)).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){var a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(var n=g.style.cssText.split(";"),d=0;d<n.length;d++){if(null!=(b=n[d].split(":"))[1]){if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.I.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}C.ClassStyleCache[t]=e;break}}}else if(l.I.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(g=s.cssRules[r]).selectorText){if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if(m==t){for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var c=n[d].indexOf(":");if(c>-1){var u=n[d].substring(0,c),p=n[d].substring(c+1);e[u.wq_trim().capitalizeStyle()]=p.wq_trim()}}C.ClassStyleCache[t]=e;break}}}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var g;if(void 0!==(g=s.cssRules[r]).selectorText){var m,f;if((f=(m=g.selectorText).lastIndexOf("."))>-1){a=m.indexOf(" ",f);m=a>-1?m.substring(f+1,a):m.substring(f+1)}if((m=m.toLowerCase())==(t=t.toLowerCase())){for(n=g.style.cssText.split(";"),d=0;d<n.length;d++){var b;if(null!=(b=n[d].split(":"))[1]){var y;if(b[1].indexOf("url")>=0)if(b[1]=b[1].wq_trim(),b[1].startsWith("url"))if(b[1].indexOf("http")>=0)for(var v=2;null!=b[v];)b[1]=b[1]+":"+b[v],v++;else"("==(y=b[1].substring(3).wq_trim()).charAt(0)&&")"==y.charAt(y.length-1)&&(b[1]="url("+l.I.getImageURL(y.substring(1,y.length-1))+")");e[b[0].wq_trim().capitalizeStyle()]=b[1].wq_trim()}}C.ClassStyleCache[t]=e;break}}}}catch(t){h.Y.printStackTrace(t)}return e},C.makeBackgroundImageUrl=function(t){var e="";if(void 0===t||null==t||""==t)return"";try{var i=document.styleSheets;if(l.I.browserCheck.ie)for(var o=i.length-1;o>=0;o--)for(var s=i[o],r=0;r<s.rules.length;r++){if(void 0!==(b=s.rules.item(r)).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){var n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(var d=b.style.cssText.split(";"),c=0;c<d.length;c++){if(null!=(u=d[c].split(":"))[1]&&"BACKGROUND-IMAGE"==u[0].toUpperCase()){if(u[1].indexOf("url")>=0)if(u[1]=u[1].wq_trim(),u[1].startsWith("url"))"("==(w=u[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(u[1]=l.I.getImageURL(w.substring(1,w.length-1)));e=u[1].wq_trim()}}break}}}else if(l.I.browserCheck.opera)for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){if(void 0!==(b=s.cssRules[r]).selectorText){if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if(y==t){for(d=b.style.cssText.split(";"),c=0;c<d.length;c++){var u=d[c].split(":"),p=d[c].indexOf(":");if(p>-1){var g=d[c].substring(0,p),m=d[c].substring(p+1);if("BACKGROUND-IMAGE"==g.toUpperCase().wq_trim()){if(m.indexOf("url")>=0)if((m=m.wq_trim()).startsWith("url"))if("("==(w=(w=m.substring(3).wq_trim()).replace(/"/g,"")).charAt(0)&&")"==w.charAt(w.length-1)){var f=w.lastIndexOf(a.q.baseURI);f+=a.q.baseURI.length,m=l.I.getImageURL(w.substring(f,w.length-1))}e=m}}}break}}
}else for(o=i.length-1;o>=0;o--)for(s=i[o],r=0;r<s.cssRules.length;r++){var b;if(void 0!==(b=s.cssRules[r]).selectorText){var y,v;if((v=(y=b.selectorText).lastIndexOf("."))>-1){n=y.indexOf(" ",v);y=n>-1?y.substring(v+1,n):y.substring(v+1)}if((y=y.toLowerCase())==(t=t.toLowerCase())){for(d=b.style.cssText.split(";"),c=0;c<d.length;c++){if(null!=(u=d[c].split(":"))[1]&&"BACKGROUND-IMAGE"==u[0].toUpperCase().wq_trim()){var w;if(u[1].indexOf("url")>=0)if(u[1]=u[1].wq_trim(),u[1].startsWith("url"))if(u[1].indexOf("http")>=0)for(var S=2;null!=u[S];)u[1]=u[1]+":"+u[S],S++;else"("==(w=u[1].substring(3).wq_trim()).charAt(0)&&")"==w.charAt(w.length-1)&&(u[1]=l.I.getImageURL(w.substring(1,w.length-1)));e=u[1].wq_trim()}}break}}}}catch(t){h.Y.printStackTrace(t)}return e},C.loadCSS=function(t){try{if(!t||""===t)return;var e=l.I.load(t);if(!e)return;if(l.I.browserCheck.ie){document.createStyleSheet().cssText=e}else{var i=document.createElementNS("http://www.w3.org/1999/xhtml","style");i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i)}}catch(t){h.Y.printStackTrace(t)}},C._decreaseCache=function(t,e){try{if(!0===C.skinTagGlobalCache[t])return;if("number"==typeof C.skinTagCache[t]){if(C.skinTagCache[t]>0)return C.skinTagCache[t]--,!1;delete C.skinTagCache[t]}for(var i=0;i<C.skinTag.length;i++)if(t==C.skinTag[i]){C.skinTag.splice(i,1);break}var o=document.getElementsByTagName("head")[0];if(!e)for(var s=o.getElementsByTagName("link"),r=0;r<s.length;r++)if(s[r].getAttribute("data-wqorghref")===t){e=s[r];break}return e&&o.removeChild(e),!0}catch(t){h.Y.printStackTrace(t)}};var x={WebSquareParser:function(){}};x.WebSquareParser.prototype.parse=function(){var t=(0,m.A)(b().mark((function t(e,i,o){var s;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.preParse(e),this.parseCSS(e,i,o),t.next=6,this.parseUDC2(e,o);case 6:return o&&o!==WebSquare.strictModeFrame||(this.parseBuildDate(e.documentElement),this.parseTitle(e.documentElement)),this.parseModels(e.documentElement,o),t.next=10,this.parseScript(e.documentElement,o);case 10:return s=t.sent,null!=o?this.parseDataCollections(e.documentElement,o.uuid):this.parseDataCollections(e.documentElement),t.abrupt("return",s);case 15:t.prev=15,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 18:case"end":return t.stop()}}),t,this,[[1,15]])})));return function(e,i,o){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.parseMeta=function(t){try{var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=c._.getElementsByTagName(t,"screen",l.I._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=0;n<o.length;n++){((g=o[n].getAttribute("http-equiv"))||(g=o[n].getAttribute("name")))&&s.push(g)}for(n=0;n<e.length;n++){var d=c._.getElementsByTagName(t,e[n],l.I._XML_NAMESPACE.XHTML);if(d&&d.length>0)for(var u=0;u<d.length;u++){for(var p=0;p<d[u].attributes.length;p++){var g;if("http-equiv"==d[u].attributes[p].nodeName)g=d[u].attributes[p].nodeValue;else{if("name"!=d[u].attributes[p].nodeName)continue;g=d[u].attributes[p].nodeValue}for(var m=0;m<s.length;m++)if(s[m]==g){for(var f=0;f<o.length;f++)if(o[f].getAttribute("http-equiv")==g||o[f].getAttribute("name")==g){i.removeChild(o[f]);break}break}break}var b=document.createElement("meta");for(p=0;p<d[u].attributes.length;p++)b.setAttribute(d[u].attributes[p].nodeName,d[u].attributes[p].nodeValue);i.appendChild(b)}}}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t.documentElement),this.parseModels(t.documentElement,i),null!=i?this.parseDataCollections(t.documentElement,i.uuid):this.parseDataCollections(t.documentElement)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parsePageInheritAfter=function(){var t=(0,
m.A)(b().mark((function t(e,i,o){var s;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.parseCSS(e,i,o,a.q.WebSquaredoc.cssList[0]),t.next=5,this.parseScript(e.documentElement,o,!0);case 5:return s=t.sent,t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i,o){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.preParse=function(t,e){try{if(l.I.browserCheck.ieAllVersion&&n.Q.useActiveXObject){var i=l.I.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t.documentElement)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseCSS=function(t,e,i,o){try{var s=l.I.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=l.I.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!a.q.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==l.I.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css");var r=n.Q.inquiresPath("skin/");C.addImport(a.q.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}var d="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(d=y.Z.getGlobalFunction(i.options.cssFunction,i.id)),"function"==typeof d&&WebSquare.cssManager.executeImport(o),i&&!i.options.strictFrame){if("function"==typeof d){for(var c=[],u=0;u<WebSquare.cssManager.externalCSSLink.length;u++)c.push(WebSquare.cssManager.externalCSSLink[u].href);if(!0===d(i.id,c)){for(u=0;u<c.length;u++)for(var p in C.skinTag)if(y.Z._getAbsolutePath(c[u])==C.skinTag[p]){C.skinTag.splice(p,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else a.q.WebSquaredoc.cssList=a.q.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseConfig=function(t){try{var e=c._.getElementsByTagName(t,"config",l.I._XML_NAMESPACE.W2);if(1==e.length)for(var i=e[0].firstChild;null!=i;i=i.nextSibling)1==i.nodeType&&c._.matchNode(i,"WebSquare",l.I._XML_NAMESPACE.XHTML)&&a.q.WebSquaredoc.mergeConfig(i)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseBuildDate=function(t){try{var e=c._.getElementsByTagName(t,"buildDate",l.I._XML_NAMESPACE.W2);1==e.length&&e[0].firstChild?WebSquare.buildDate=e[0].firstChild.nodeValue:WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseTitle=function(t){try{var e=c._.getElementsByTagName(t,"title",l.I._XML_NAMESPACE.XHTML);1==e.length&&(WebSquare.docTitle=document.title=e[0].firstChild.nodeValue)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseModels=function(t,e){try{for(var i=c._.getElementsByTagName(t,"model",l.I._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)e?e.frameDoc&&!e.options.strictFrame?e.frameDoc.models.push(this.parseModel(i[o],e)):!0===e.options.strictFrame&&a.q.WebSquaredoc.models.push(this.parseModel(i[o],e)):a.q.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollections=function(t,e){try{for(var i=c._.getElementsByTagName(t,"model",l.I._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)this.parseDataCollection(i[o],e)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollection=function(t,e){try{var i=c._.getElementsByTagName(t,"dataCollection",l.I._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=c._.getElementsByTagName(i,"dataMap",l.I._XML_NAMESPACE.W2),s=0;s<o.length;s++){var r=o[s]
;new WebSquare.DataCollection.dataMap(null,null,r,"dataMap",e)}var a=c._.getElementsByTagName(i,"dataList",l.I._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){var n=a[s];new WebSquare.DataCollection.dataList(null,null,n,"dataList",e)}var d=c._.getElementsByTagName(i,"linkedDataList",l.I._XML_NAMESPACE.W2);for(s=0;s<d.length;s++){var u=d[s];new WebSquare.DataCollection.linkedDataList(null,null,u,"linkedDataList",e)}var p=c._.getElementsByTagName(i,"aliasDataList",l.I._XML_NAMESPACE.W2);for(s=0;s<p.length;s++){var g=p[s];new WebSquare.DataCollection.aliasDataList(null,null,g,"aliasDataList",e)}var m=c._.getElementsByTagName(i,"aliasDataMap",l.I._XML_NAMESPACE.W2);for(s=0;s<m.length;s++){var f=m[s];new WebSquare.DataCollection.aliasDataMap(null,null,f,"aliasDataMap",e)}var b=c._.getElementsByTagName(i,"aliasLinkedDataList",l.I._XML_NAMESPACE.W2);for(s=0;s<b.length;s++){var y=b[s];new WebSquare.DataCollection.aliasLinkedDataList(null,null,y,"aliasLinkedDataList",e)}}}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=l.I.getConfig("dataCollection");WebSquare.DataCollection.options=a.q.extendKeepingType(WebSquare.DataCollection.options,e)}for(var i=0;i<t.attributes.length;i++){var o=t.attributes[i];WebSquare.nodeValueDeprecated?WebSquare.DataCollection.api.setOption(o.name,o.value):WebSquare.DataCollection.api.setOption(o.nodeName,o.nodeValue)}}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseInstances=function(t){try{for(var e=c._.getElementsByTagName(t,"instance",l.I._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]));return i}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseInstance=function(t,e){try{if(!t)return;if("string"==typeof t){var i='<xf:model xmlns:xf="'+l.I._XML_NAMESPACE.XFORMS+'" xmlns:w2="'+l.I._XML_NAMESPACE.W2+'" xmlns:ev="'+l.I._XML_NAMESPACE.EVENTS+'">',o=c._.parse(i+t+"</xf:model>",l.I._XML_NAMESPACE.XFORMS);this.preParse(o,!1),t=o.documentElement.firstChild}var s=t.attributes.getNamedItem("src"),r=null;if(e&&t.setAttribute("scope_id",e),null!=s);else{for(var a=null,n=t.firstChild;null!=n;n=n.nextSibling)1==n.nodeType&&(a=n);if(null==a)r=new WebSquare.Model.Instance(t,null,null);else{var d=[];for(n=a.firstChild;null!=n;n=n.nextSibling)if(null!=n.namespaceURI&&""!=n.namespaceURI){d.push("xmlns:"+n.prefix),d.push(n.namespaceURI);break}null!=d[0]&&"xmlns:xml"!=d[0]&&(a.attributes.getNamedItem(d[0])||a.setAttribute(d[0],d[1])),r=new WebSquare.Model.Instance(t,a,null)}}return r}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseBinds=function(t){try{for(var e=c._.getElementsByTagName(t,"bind",l.I._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]));return i}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseBind=function(t){try{var e=t.attributes.getNamedItem("id"),i=t.attributes.getNamedItem("nodeset");return new WebSquare.Model.Bind(t,"nodeset",i.value,null,e.value)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseSubmissions=function(t,e){try{for(var i=c._.getElementsByTagName(t,"submission",l.I._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseSubmission=function(t,e,i){try{
var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||l.I.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||l.I.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||l.I.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||l.I.getConfiguration("/WebSquare/submission/mediatype/@value"),d=WebSquare.WebSquareparser.getAttribute(t,"accept","")||l.I.getConfiguration("/WebSquare/submission/accept/@value"),c=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||l.I.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",u=WebSquare.WebSquareparser.getAttribute(t,"ref"),p=WebSquare.WebSquareparser.getAttribute(t,"target"),g=WebSquare.WebSquareparser.getAttribute(t,"replace"),m=WebSquare.WebSquareparser.getAttribute(t,"instance"),f=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||l.I.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",b=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),y=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==y&&(y=l.I.getConfiguration("/WebSquare/submission/errorHandler/@value"));var v=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==v&&(v=l.I.getConfiguration("/WebSquare/submission/processMsg/@value"));var w=WebSquare.WebSquareparser.getAttribute(t,"useLocale");"true"===l.I.getConfiguration("/WebSquare/useLocale/@value")&&(w=!0);var _=WebSquare.WebSquareparser.getAttribute(t,"localeRef",""),C="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===l.I.getConfiguration("/WebSquare/submission/abortTrigger/@value"),x=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),I="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var T=this.parseEvent(t,i)||[],k=this.getAttribute(t,"timeout","")||l.I.getConfiguration("/WebSquare/submission/timeout/@value"),L=this.getAttribute(t,"singleMode")||!1,A="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==l.I.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),D="true"===this.getAttribute(t,"withCredentials"),W=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),q=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),M=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),E=o,R=null,N="";i&&i.options&&i.options.scope&&(o=(N=i.id+"_")+E,R=i.id);var F=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),O=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),B=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),P=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),Y={};F&&(T.push(new S.XmlEvent("xforms-submit","script",{handler:N+F})),Y.submitHandler=F),O&&(T.push(new S.XmlEvent("xforms-submit-done","script",{handler:N+O})),Y.submitDoneHandler=O),B&&(T.push(new S.XmlEvent("xforms-submit-error","script",{handler:N+B})),Y.submitErrorHandler=B),P&&(T.push(new S.XmlEvent("xforms-submit-timeout","script",{handler:N+P})),Y.submitTimeoutHandler=P),Y.parentElement=e,Y.element=t,Y.id=o,Y.org_id=E,Y.method=s,Y.action=r,Y.mode=a,Y.bind=null,Y.mediatype=n,Y.accept=d,Y.encoding=c,Y.ref=u,Y.target=p,Y.replace=g,Y.instance=m,Y.customHandler=b,Y.errorHandler=y,Y.soapaction=x,Y.processMsg=v,Y.useLocale=w,Y.localeRef=_,Y.xmlEvents=T,Y.timeout=k,Y.singleMode=L,Y.hideProcessMsg=A,Y.abortTrigger=C,Y.preSubmitFunction=f,Y.scope_id=R,Y.withCredentials=D,Y.useModal=I,Y.webtopRef=W,Y.userData1=q,Y.userData2=M,Y.msaName=WebSquare.WebSquareparser.getAttribute(t,"msaName");var V=new WebSquare.Model.Submission(Y);return i&&i.options&&i.options.scope&&(i.scope[E]=V),l.I.useSubmissionGlobal&&(window[V.id]=V),V}catch(t){h.Y.printStackTrace(t)}},
x.WebSquareParser.prototype.parseScript=function(){var t=(0,m.A)(b().mark((function t(e,i,o,s){var r,a,n,d,u,p,g,m,f,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,r=[],s||(i?i.options&&i.options.strictFrame?WebSquare.scriptSection="":i.frameDoc&&(i.frameDoc.scriptSection=""):WebSquare.scriptSection="",i?i.options&&i.options.initScript&&(a=i.options.initScript.toString(),i.options.strictFrame?WebSquare.scriptSection+=a:"executed"===WebSquare.scriptSectionExcuteFlag&&(i.frameDoc.scriptSection+=a)):"true"==l.I.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=l.I.getConfiguration("/WebSquare/initScript"))),n=i&&i.options.src?i.getSrc():WebSquare.w2xPath,1!=(d=c._.getElementsByTagName(e,"head",l.I._XML_NAMESPACE.XHTML)).length){t.next=63;break}u=i&&i._isUDC2,p=d[0].firstChild;case 9:if(null==p){t.next=60;break}if(1!=p.nodeType||!c._.matchNode(p,"script",l.I._XML_NAMESPACE.XHTML)){t.next=56;break}if(g=p.getAttribute("src"),m=y.Z.getBoolean(p.getAttribute("scopeExternal"))||i&&i.options.scopeExternal,f=p.getAttribute("scopeVariable")||"",null==g||""==g){t.next=23;break}v=p.getAttribute("cache"),w=p.getAttribute("defer"),S=p.getAttribute(p,"msaName"),_=WebSquare.jsonUtil.getAttribute(p,"wpack"),(C=WebSquare.Parser.parseExternalScript({uri:g,cache:v,lazy:w,frameObj:i,pageInherit:o,scopeExternal:m,scopeVariable:f,msaName:S,wpack:_}))instanceof window.Promise&&r.push(C),t.next=54;break;case 23:if(!s){t.next=25;break}return t.abrupt("continue",57);case 25:if(x=p.getAttribute("loadAt"),I="false",T=-1,"string"!=typeof x||""==x){t.next=51;break}x=x.wq_trim().toUpperCase(),t.t0=x,t.next="WEBSQUARE_START"===t.t0||"START"===t.t0?33:"ENGINE_LOAD"===t.t0||"ENGINE"===t.t0?35:"RESOURCE_LOAD"===t.t0||"RESOURCE"===t.t0?37:"CREATE_COMPONENT"===t.t0||"CREATE"===t.t0?39:"RENDER_DOM"===t.t0||"RENDER"===t.t0?41:"ADJUST_COMPONENT"===t.t0||"ADJUST"===t.t0?43:"BIND_EVENT"===t.t0||"EVENT"===t.t0?45:"EXECUTE_SCRIPT"===t.t0||"EXECUTE"===t.t0?47:49;break;case 33:return T=1,t.abrupt("break",51);case 35:return T=2,t.abrupt("break",51);case 37:return T=3,t.abrupt("break",51);case 39:return T=4,t.abrupt("break",51);case 41:return T=5,t.abrupt("break",51);case 43:return T=6,t.abrupt("break",51);case 45:return T=7,t.abrupt("break",51);case 47:case 49:return T=8,t.abrupt("break",51);case 51:for("false"==I||u?(T=3,"executed"===WebSquare.scriptSectionExcuteFlag&&(k=l.I.scriptPrecedence,l.I.scriptPrecedence=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/scriptPrecedence/@value")),k!==l.I.scriptPrecedence&&(L=i&&i.options?i.getSrc():WebSquare.w2xPath,WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+L+"]")))):l.I.scriptPrecedence,A=T>2&&T<8,D=p.firstChild;null!=D;D=D.nextSibling)4!=D.nodeType&&3!=D.nodeType||(W=D.nodeValue,i?(i.options&&i.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!i.options.strictFrame&&(A?i.frameDoc.scriptSection+=i.options.initScript:W=i.options.initScript+W),!0!==l.I.scriptPrecedence&&i.options&&i.options.postScript&&!A&&!i.options.strictFrame&&(W+=i.options.postScript),W=i.options&&i.options.scope?y.Z.scopingFuncBody(W,i.id,!0):y.Z.scopingFuncBody(W,null,!0),A?(null==WebSquare.executePointScriptArr[T]&&(WebSquare.executePointScriptArr[T]=[]),WebSquare.executePointScriptArr[T].push({script:W,path:n,scope:i&&i.id}),!0===l.I.scriptPrecedence||i.options.strictFrame||(i.frameDoc.scriptSection+=i.options.postScript)):i.options&&i.options.strictFrame?WebSquare.scriptSection+=W:(i.frameDoc.scriptSection+=W,i._scriptLazy=!0)):(W=y.Z.scopingFuncBody(W,null,!0),T>2&&T<8?(null==WebSquare.executePointScriptArr[T]&&(WebSquare.executePointScriptArr[T]=[]),WebSquare.executePointScriptArr[T].push({script:W,path:n,scope:i&&i.id})):WebSquare.scriptSection+=W));case 54:t.next=57;break;case 56:
if(1==p.nodeType&&c._.matchNode(p,"env",l.I._XML_NAMESPACE.XHTML))for(D=p.firstChild;null!=D;D=D.nextSibling)if(4==D.nodeType||3==D.nodeType)for(M in"string"==typeof(W=D.nodeValue)&&(W=JSON.parse(W)),q=WebSquare.WebSquareparser.getAttribute(p,"variable")||"env",i.scope)i.scope[M][q]=W;case 57:p=p.nextSibling,t.next=9;break;case 60:s||l.I.executePointScript(3),t.next=65;break;case 63:return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",d.length)),t.abrupt("return",!1);case 65:return E=i?i.uuid:"",t.next=68,Promise.allSettled(r).then((function(t){for(var e=0;e<t.length;e++)if("fulfilled"===t[e].status){var i=t[e].value;if(i){var o=WebSquare.idCache[E];WebSquare.Parser._parseExternalScriptAfter(i,o)}}})).catch((function(t){h.Y.printStackTrace(t)}));case 68:t.next=73;break;case 70:t.prev=70,t.t1=t.catch(1),h.Y.printStackTrace(t.t1);case 73:return t.abrupt("return",!0);case 74:case"end":return t.stop()}}),t,null,[[1,70]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.parseBody=function(t){try{var e=c._.getElementsByTagName(t,"body",l.I._XML_NAMESPACE.XHTML);if(1==e.length){var i=e[0].getAttribute("style");null!=i&&(a.q.WebSquaredoc.bodyStyle=i.value),a.q.WebSquaredoc.body=e[0]}else alert(WebSquare.language.getMessage("E_Parser_MoreThanOneBodyError",e.length))}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseActions=function(t){},x.WebSquareParser.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseLabel=function(t){t instanceof w.S&&(t=t._element);var e=c._.getElementsByTagName(t,"label",l.I._XML_NAMESPACE.XFORMS);if(null==e[0])return null;var i=e[0],o=this.findBindElement(i),s="",r=i.firstChild;if(i.childNodes.length>1)for(var a=0;a<i.childNodes.length;a++)if(""!=i.childNodes[a].nodeValue.wq_trim()){r=i.childNodes[a];break}s=void 0!==r&&null!=r?r.nodeValue:"";var n={};return n.value=null!=o?WebSquare.ModelUtil.getInstanceValue(o.xpath):s,n},x.WebSquareParser.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){t instanceof w.S&&(t=t._element);try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s="xf"==e?l.I._XML_NAMESPACE.XFORMS:l.I._XML_NAMESPACE.W2,r=c._.findNode(t,".//*['choices'=local-name()]['"+s+"'=namespace-uri()]");if(r){var a=c._.findNodes(r,".//*['item'=local-name()]['"+s+"'=namespace-uri()]");if(a)for(var n=0;n<a.length;++n){var h=a[n],d="",u=c._.findNode(h,"./*['label'=local-name()]['"+s+"'=namespace-uri()]");u&&(d=c._.getValue(u,"text()"));var p="",g=c._.findNode(h,"./*['value'=local-name()]['"+s+"'=namespace-uri()]");g&&(p=c._.getValue(g,"text()")),i.push({label:d,value:p})}}}return i},x.WebSquareParser.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){t instanceof w.S&&(t=t._element),e=e||"xf";try{var o=t.nodeName;o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){}var s,r="xf"==e?l.I._XML_NAMESPACE.XFORMS:l.I._XML_NAMESPACE.W2,a=c._.findNode(t,"*['choices'=local-name()]['"+r+"'=namespace-uri()]");if(a){if(s=c._.findNode(a,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){var n=c._.getValue(s,"@nodeset"),d=c._.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),u=c._.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),p=c._.getValue(d,"@ref"),g=c._.getValue(u,"@ref");i.nodeset=n,i.label=p,i.value=g}}else if(s=c._.findNode(t,"*['itemset'=local-name()]['"+r+"'=namespace-uri()]")){n=c._.getValue(s,"@nodeset"),d=c._.findNode(s,"*['label'=local-name()]['"+r+"'=namespace-uri()]"),u=c._.findNode(s,"*['value'=local-name()]['"+r+"'=namespace-uri()]"),p=c._.getValue(d,"@ref"),g=c._.getValue(u,"@ref");i.nodeset=n,i.label=p,i.value=g}}}catch(t){h.Y.printStackTrace(t)}return i},x.WebSquareParser.prototype.parseAttribute=function(t){try{
return WebSquare.Parser.parseAttribute(t)}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseEventAttributes=function(t){for(var e={},i=t.attributes,o=0;o<i.length;o++)if(c._.matchNode(i[o],"event",l.I._XML_NAMESPACE.EVENTS)){var s=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue;(r=s.indexOf("("))>-1&&(s=s.substring(0,r)),e.eventName=s.toLowerCase()}else{var r;(r=i[o].nodeName.indexOf(":"))>-1?e[i[o].nodeName.substring(r+1)]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue:e[i[o].nodeName]=WebSquare.nodeValueDeprecated?i[o].value:i[o].nodeValue}for(var a=t.firstChild;null!=a;a=a.nextSibling)if(4==a.nodeType||3==a.nodeType){e._text=a.nodeValue;break}return e},x.WebSquareParser.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},x.WebSquareParser.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},x.WebSquareParser.prototype.attributesItem.prototype.setValue=function(t){this.value=t},x.WebSquareParser.prototype.attributesItem.prototype.getValue=function(){return this.value},x.WebSquareParser.prototype.parseWorkflows=function(t,e){try{for(var i=c._.getElementsByTagName(t,"workflow",l.I._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=l.I.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=c._.getElementsByTagName(t,"step",l.I._XML_NAMESPACE.W2),d=[],u=0;u<n.length;u++){for(var p=n[u],g={},m=0;m<p.attributes.length;m++)WebSquare.nodeValueDeprecated?g[p.attributes[m].name]=p.attributes[m].value:g[p.attributes[m].nodeName]=p.attributes[m].nodeValue;d.push(g)}var f=o,b=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+f,b=i.id);var y=new WebSquare.Model.Workflow(e,t,o,s,r,a,d,b);return i&&i.options&&i.options.scope&&(i.scope[f]=y),l.I.useWorkflowGlobal&&(window[y.id]=y),y}catch(t){h.Y.printStackTrace(t)}},x.WebSquareParser.prototype.parseUDC2=function(){var t=(0,m.A)(b().mark((function t(e,i){var o,s,r,a,n,d,u,p;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,o=c._.getElementsByTagName(e,"head")[0],s=c._.getElementsByTagName(o,"require",l.I._XML_NAMESPACE.W2),r=0;case 5:if(!(r<s.length)){t.next=22;break}if(a=s[r],(n=a.getAttribute("as")||a.getAttribute("componentName"))&&"page"===a.getAttribute("type")){t.next=10;break}return t.abrupt("continue",19);case 10:if(null!=l.I.udcObj[n]){t.next=19;break}return d=a.getAttribute("src"),u={msaName:a.getAttribute("msaName"),frameObj:i},p=l.I._getMsaSrc(d,u),p=l.I.getPageURL(p,{skipURL:!0,skipUri:!0}),t.next=17,c._.load(p);case 17:l.I.udcObj[n]=t.sent,l.I.udcMsa[n]=u.msaName;case 19:r++,t.next=5;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})));return function(e,i){return t.apply(this,arguments)}}(),x.WebSquareParser.prototype.parseMessageBroker=function(t,e){try{var i=c._.getElementsByTagName(t,"messageBroker",l.I._XML_NAMESPACE.W2)[0];if(!i)return;a.q.messageBroker.add(i,e)}catch(t){h.Y.printStackTrace(t)}},x.parseExternalScript=function(t){try{var e=t.uri;if(!e)return;var i=t.cache,o=t.frameObj,s=t.pageInherit,r=t.lazy,a=!1;null!=i&&""!==i||(i=l.I.getConfiguration("/WebSquare/spa/scriptCache/@value")),t.scopeVariable&&o&&o.options.scope&&(o.scope[t.scopeVariable]={},i="false");var n={frameObj:o,msaName:t.msaName,wpack:t.wpack},d=l.I._getMsaSrc(e,n),c=d;if(t.scopeExternal&&(c+="_scope_"+o.id),
null==i||"false"!=i.toLowerCase()?(void 0!==WebSquare.scriptCachedList[c]&&null!==WebSquare.scriptCachedList[c]||("false"===l.I.getConfiguration("/WebSquare/spa/scriptCache/@value")?WebSquare.scriptCachedList[c]=0:WebSquare.scriptCachedList[c]=1),WebSquare.scriptCachedList[c]>1?(a=!0,WebSquare.scriptCachedList[c]++):"true"==i.toLowerCase()&&WebSquare.scriptCachedList[c]++):WebSquare.scriptCachedList[c]=0,!a)if(o)if(t.scopeExternal)try{return l.I.loadAsync(d)}catch(t){h.Y.printStackTrace(t)}else"defer"==r?"executed"==WebSquare.scriptSectionExcuteFlag?o.lazyImportsArr.push(d):WebSquare.lazyImportsArr.push(d):s?WebSquare.pageInheritScriptArr.push(d):WebSquare.externalScriptArr.push(d);else"defer"==r?WebSquare.lazyImportsArr.push(d):s?WebSquare.pageInheritScriptArr.push(d):WebSquare.externalScriptArr.push(d)}catch(t){h.Y.printStackTrace(t)}},x._parseExternalScriptAfter=function(t,e){try{var i="";i=e&&e.options.scope?y.Z.scopingFuncBody(t,e.id,!0):y.Z.scopingFuncBody(t,null,!0),n.Q.globalEval(i)}catch(t){h.Y.printStackTrace(t)}},x.parseAttribute=function(t){try{var e,i={};e=t instanceof w.S?t._element:t;var o,s=!1;if(e.T===w.S.type.element&&(s=!0),o=null==e.A?s||e.nodeType!==w.S.type.document?e.attributes:e.documentElement.attributes:s||e.nodeType!==w.S.type.document?e.A:e.documentElement.attributes,s){for(var r in o)if(o.hasOwnProperty(r)){var a=o[r];"class"===r?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[r]=a)}}else for(var n=0,l=o.length;n<l;n++){var d=o[n],c=d.name;a=d.value;"class"==c?i.className=a:"string"==typeof a&&""===a.wq_trim()||(i[c]=a)}return i}catch(t){h.Y.printStackTrace(t)}},x.parseEvent=function(t,e){try{var i,o=[];if(t instanceof w.S?(i=t._elementType,t=t._element):i=l.I.isXML(t)?"xml":"json","json"===i){o=[];var s=v.r.getAttribute(t,"id"),r=t.N,n=null;null==s||""==s?(n="",s=""):(n=s,s+=".");for(var d=v.r.getChildNodes(t),u=0;u<d.length;u++){var p=d[u],m="";if("script"===p.N){var f={};if(!(m=(T=p.A)["ev:event"]))continue;var b=T.disabled,_=0,C=w.S.api.getCDataNodeValue(p),x="( e )";(D=m.indexOf("("))>-1&&(x=m.substring(D),m=m.substring(0,D)),"function"==typeof C?(a.q.strictMode||(C=function(t){return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var s=i.slice(0);return"object"===(0,g.A)(i[0])&&null!=i[0]&&i[0].$p||s.unshift({}),t.apply(this,s)}}(C)),f.handler=C,f.scope=e&&e.id,f._old=!0):(C=e&&e.options.scope?y.Z.scopingFuncBody(C,e.id,!0):y.Z.scopingFuncBody(C,null,!0),f.handler="function"+x+'{ try {["'+s+m.toLowerCase()+'"]; function '+n+"_"+_+++"() {}; "+C+' } catch(eee) {eee.componentID =  "'+n+'"; eee.eventName = "'+m.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new S.XmlEvent(m.toLowerCase(),"script",f,b))}}}else{s=t.getAttribute("id"),r=t.nodeName,n=null;null==s||""==s?(n="",s=""):(n=s,s+=".");for(p=t.firstChild;null!=p;p=p.nextSibling){m="";var I=c._.nodeInfoObj(p).nodeName;if(1==p.nodeType&&"script"==I){f={};for(var T=p.attributes,k=0;k<T.length;k++){var L=T[k];if(c._.matchNode(L,"event",l.I._XML_NAMESPACE.EVENTS)){m=WebSquare.nodeValueDeprecated?L.value:L.nodeValue;break}}b=p.getAttribute("disabled"),_=0;for(var A=p.firstChild;null!=A;A=A.nextSibling)if(4==A.nodeType){var D;x="( e )";(D=m.indexOf("("))>-1&&(x=m.substring(D),m=m.substring(0,D)),"function"==typeof(C=A.nodeValue)?(f.handler=C,f.scope=e&&e.id):(C=e&&e.options.scope?y.Z.scopingFuncBody(C,e.id,!0):y.Z.scopingFuncBody(C,null,!0),f.handler="function"+x+'{ try {["'+s+m.toLowerCase()+'"]; function '+n+"_"+_+++"() {}; "+C+' } catch(eee) {eee.componentID =  "'+n+'"; eee.eventName = "'+m.toLowerCase()+'"; eee.componentName = "'+r+'"; exception.printStackTrace(eee);} }'),o.push(new S.XmlEvent(m.toLowerCase(),"script",f,b));break}}}}return 0==o.length?null:o}catch(t){h.Y.printStackTrace(t)}},x.parseAttributesNode=function(t){try{var e;t instanceof w.S?(e=t._elementType,t=t._element):e=l.I.isXML(t)?"xml":"json";var i=null,o=[];if("json"===e){
for(var s=v.r.getChildNodes(t),r=0;r<s.length;r++)if("w2:attributes"===s[r].N){i=s[r];break}if(i){var a=v.r.getChildNodes(i);for(r=0;r<a.length;r++)if(1===a[r].T){var n={name:d=v.r.dropNS(a[r].N),ref:v.r.getAttribute(a[r],"ref"),value:v.r.getTextNodeValue(a[r])};o.push(n),o[d]=n}}}else{for(r=0;r<t.childNodes.length;r++)if("w2:attributes"==t.childNodes[r].nodeName){i=t.childNodes[r];break}if(i)for(a=i.childNodes,r=0;r<a.length;r++)if(1===a[r].T){var d;n={name:d=c._.getLocalName(a[r]),ref:a[r].getAttribute("ref"),value:c._.getTextNodeValue(a[r])};o.push(n),o[d]=n}}return o}catch(t){h.Y.printStackTrace(t)}};var I=function(t,e,i,o,s){try{this.xmlNode=t,this.instances=e,this.binds=i,this.submissions=o,this.element=t,this.workflows=s}catch(t){h.Y.printStackTrace(t)}};I.prototype.rebuild=function(t,e){try{var i=WebSquare.ModelUtil.getInstanceByXPath(e);if(WebSquare.xml.hasChildElement(i.xmlNode))if("string"==typeof t){var o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))&&(e=".");var s=(a=WebSquare.xml.createNode(o,e)).ownerDocument.createTextNode(t);WebSquare.xml.appendChild(a,s),WebSquare.WebSquaredoc.unrender(e,null,i.id)}else{var r=t.documentElement.nodeName;o=WebSquare.xml.getFirstChildElement(i.xmlNode);""==(e=WebSquare.ModelUtil.filterInstanceFunction(e))?e=".":r=e+"/"+r;for(var a,n=(a=WebSquare.xml.createNode(o,e)).firstChild;null!=n;n=n.nextSibling)if(n.nodeName==t.documentElement.nodeName){a.removeChild(n);break}WebSquare.xml.appendChild(a,t.documentElement),WebSquare.WebSquaredoc.unrender(r,null,i.id)}else alert(WebSquare.language.getMessage("E_Model_NoChildNodeOfInstance"))}catch(t){h.Y.printStackTrace(t)}},I.prototype.refresh=function(t,e){try{for(var i=0;i<WebSquare.WebSquaredoc.boundElement.length;i++){var o=WebSquare.WebSquaredoc.boundElement[i].id,s=WebSquare.core.getComponentById(o);void 0!==s&&(void 0!==s.hasbeenrendered&&null!=s.hasbeenrendered&&0==s.hasbeenrendered&&(!s.modelControl.useRef&&s.modelControl.ref,s.hasbeenrendered=!0,s.refresh()))}for(var r in WebSquare.WebSquaredoc.itemsetElement){var a=WebSquare.WebSquaredoc.itemsetElement[r].id,n=WebSquare.core.getComponentById(a);if(void 0!==n&&(void 0!==n.itemsetrendered&&null!=n.itemsetrendered&&0==n.itemsetrendered)){!n.modelControl.useRef&&n.modelControl.ref;var l=!0;if(e&&n.modelControl.useItemset){var d=n.modelControl.itemsetObj.nodeset;e!==d&&!1===WebSquare.ModelUtil.isPartialMatchedXPath(e,d)&&(l=!1)}!0===l&&(n.itemsetrendered=!0,n.refreshItemset(t))}}for(var c in WebSquare.WebSquaredoc.refElement){var u=WebSquare.WebSquaredoc.refElement[c].id,p=WebSquare.core.getComponentById(u);void 0!==p&&(void 0!==p.hasbeenrendered&&null!=p.hasbeenrendered&&0==p.hasbeenrendered&&(!p.modelControl.useRef&&p.modelControl.ref,p.hasbeenrendered=!0,p.refresh()))}}catch(t){h.Y.printStackTrace(t)}},I.Instance=function(t,e,i){try{this.xmlNode=t,this.document=e,this.source=i,this.id=t.getAttribute("id"),this.scope_id=t.getAttribute("scope_id")}catch(t){h.Y.printStackTrace(t)}},I.Bind=function(t,e,i,o,s){try{this.xmlNode=t,this.type=e,this.xpath=i,this.properties=null!=o?o:{},this.id=s}catch(t){h.Y.printStackTrace(t)}},I.Submission=function(t){try{this.xmlNode=t.element,this.parentElement=t.parentElement,this._pluginName="submission",this.id=t.id,this.org_id=t.org_id,this.bind=t.bind,this.action=t.action,this.mode=t.mode,this.method=t.method,this.mediatype=t.mediatype,this.accept=t.accept,this.encoding=t.encoding,this.ref=t.ref,this.target=t.target,this.replace=t.replace,this.instance=t.instance,this.customHandler=t.customHandler,this.errorHandler=t.errorHandler,this.processMsg=t.processMsg,this.useLocale=t.useLocale,this.localeRef=t.localeRef,this.soapaction=t.soapaction,this.startTime=null,this.endTime=null,this.processStatus=0,this.singleMode=t.singleMode,this.hideProcessMsg=t.hideProcessMsg,this.abortTrigger=t.abortTrigger,this.scope_id=t.scope_id,this.withCredentials=t.withCredentials,this.useModal=t.useModal,
this.preSubmitFunction=t.preSubmitFunction,this.linkedObj=[],this.requestHeader={},this.webtopRef=t.webtopRef,this.userData1=t.userData1,this.userData2=t.userData2,this.msaName=t.msaName,t.submitHandler&&(this.submitHandler=t.submitHandler),t.submitDoneHandler&&(this.submitDoneHandler=t.submitDoneHandler),t.submitErrorHandler&&(this.submitErrorHandler=t.submitErrorHandler),t.submitTimeoutHandler&&(this.submitTimeoutHandler=t.submitTimeoutHandler),null!=t.xmlEvents&&t.xmlEvents.length>0&&WebSquare.event.addUserEvents(this,t.xmlEvents),this.timeout=t.timeout,this.setRequestData=function(t){this.requestData=t},this.setRequestHeader=function(t){this.requestHeader=t},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.Y.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.Y.printStackTrace(t,null,this),window}},this._getMsaOption=function(){return{frameObj:this.getScope(),msaName:this.msaName}},WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===this.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync",this.id))}catch(t){h.Y.printStackTrace(t)}},I.Workflow=function(t,e,i,o,s,r,a,n){try{this.xmlNode=e,this.parentElement=t,this.id=i,this.scope_id=n,this.resolveCallback=o||null,this.rejectCallback=s||null,this.processMsg=r,this.step=a,this.promiseStatus=null,this.promiseValue=null,this.conditionStatus=!0,this.reject=function(t){this.promiseStatus="REJECT",this.promiseValue=t||"REJECT"},this.getScope=function(){try{var t=null;return this.scope_id&&(t=WebSquare.util.getComponentById(this.scope_id)),t}catch(t){return h.Y.printStackTrace(t,null,this),null}},this.getScopeWindow=function(){try{return this.scope_id?WebSquare.util.getComponentById(this.scope_id).scope:window}catch(t){return h.Y.printStackTrace(t,null,this),window}}}catch(t){h.Y.printStackTrace(t)}};var T=__webpack_require__(4787),k={DefaultXML2JSONString:function(t,e){var i=[];return WebSquare.xml.isDocumentString(t)&&(t=WebSquare.xml.parse(t)),WebSquare.xml.isDocument(t)&&WebSquare.json.XMLparseForJSON(t.documentElement,i,!1),i.join("")},XML2JSONString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/xml2jsonFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.XML2JSONString=o),WebSquare.json.XML2JSONString?WebSquare.logger.printLog("XML2JSON conversion rule exists in config.xml. [/WebSquare/json/@xml2jsonFunction]"):WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString}else WebSquare.json.XML2JSONString=WebSquare.json.DefaultXML2JSONString;return WebSquare.json.XML2JSONString(t,e)},parseType:function(t){if(t&&t.childNodes&&t.childNodes.length>0){for(var e={},i=0,o=0;o<t.childNodes.length;o++)if(1==t.childNodes[o].nodeType){if(1==e[t.childNodes[o].nodeName])return"array";e[t.childNodes[o].nodeName]=!0,i++}return 0==i?"string":"object"}return"string"},XMLparseForJSON:function(t,e,i){var o=t.getAttribute("type");if(o||(o=WebSquare.json.parseType(t)),i&&(e.push('"'),e.push(t.nodeName),e.push('" : ')),"object"===o){var s=!0;e.push("{");for(var r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!0)));e.push("}")}else if("array"===o){s=!0;e.push("[");for(r=0;r<t.childNodes.length;r++)1==t.childNodes[r].nodeType&&(s?s=!1:e.push(", "),e.push(WebSquare.json.XMLparseForJSON(t.childNodes[r],e,!1)));e.push("]")}else"number"===o?t.childNodes&&t.childNodes[0].nodeValue&&e.push(t.childNodes[0].nodeValue):"true"===o?e.push("true"):"false"===o?e.push("false"):"null"===o?e.push("null"):(e.push('"'),
t.childNodes&&t.childNodes[0]&&e.push(WebSquare.xml.decode(t.childNodes[0].nodeValue).wq_replaceAll("\\","\\\\").wq_replaceAll('"','\\"').wq_replaceAll("\n","\\n")),e.push('"'))},DefaultJSON2XML:function(t,e){var i;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==(0,g.A)(i)&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);i.constructor===Array?o.push("</array>"):"object"==(0,g.A)(i)&&o.push("</object>");var a=o.join("");return WebSquare.xml.parse(a)},DefaultJSON2XMLString:function(t,e){var i;i=t.constructor===String?JSON.parse(t):t;var o=[],s=-1;for(var r in i.constructor===Array?(s=1,o.push('<array type="array">')):"object"==(0,g.A)(i)&&(s=2,o.push('<object type="object">')),i)WebSquare.json._recursiveJSON2XML(o,i[r],r,s);return i.constructor===Array?o.push("</array>"):"object"==(0,g.A)(i)&&o.push("</object>"),o.join("")},JSON2XML:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XML=o),WebSquare.json.JSON2XML?WebSquare.logger.printLog("JSON2XML conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML}else WebSquare.json.JSON2XML=WebSquare.json.DefaultJSON2XML;return WebSquare.json.JSON2XML(t,e)},JSON2XMLString:function(t,e){var i=WebSquare.core.getConfiguration("/WebSquare/json/json2xmlFunction/@value");if(i){var o=WebSquare.util.getGlobalFunction(i);"function"==typeof o&&(WebSquare.json.JSON2XMLString=o),WebSquare.json.JSON2XMLString?WebSquare.logger.printLog("JSON2XMLString conversion rule exists in config.xml. [/WebSquare/json/@json2xmlFunction]"):WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString}else WebSquare.json.JSON2XMLString=WebSquare.json.DefaultJSON2XMLString;return WebSquare.json.JSON2XMLString(t,e)},JSONExtend:function(){for(var t={},e=0,i=arguments.length,o=function(e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&("[object Object]"===Object.prototype.toString.call(e[i])?t[i]=WebSquare.json.JSONExtend(t[i],e[i]):t[i]=e[i])};e<i;e++){o(arguments[e])}return t},_recursiveJSON2XML:function(t,e,i,o){var s='<object type="object">',r='<array type="array">',a="</object>",n="</array>";if(null==e)t.push("<"+i+' type="'+e+'"/>');else if("string"==typeof e)1==o?t.push("<value>"+WebSquare.xml.encode(e)+"</value>"):2==o&&t.push("<"+i+">"+WebSquare.xml.encode(e)+"</"+i+">");else if("number"==typeof e)1==o?t.push('<value type="number">'+e+"</value>"):2==o&&t.push("<"+i+' type="number">'+e+"</"+i+">");else if("boolean"==typeof e)1==o?t.push('<value type="'+e+'"/>'):2==o&&t.push("<"+i+' type="'+e+'"/>');else if(e.constructor===Array){for(var l in isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor!==Array&&"object"==(0,g.A)(e)?(o=2,t.push(s)):(o=1,t.push(r)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);isNaN(parseInt(i))?(o=1,t.push("</"+i+">")):e.constructor!==Array&&"object"==(0,g.A)(e)?t.push(a):t.push(n)}else if("object"==(0,g.A)(e)){for(var l in e.constructor===Array&&isNaN(parseInt(i))?(o=1,t.push("<"+i+' type="array">')):e.constructor===Array?(o=1,t.push(r)):isNaN(parseInt(i))?(o=2,t.push("<"+i+' type="object">')):(o=2,t.push(s)),e)WebSquare.json._recursiveJSON2XML(t,e[l],l,o);e.constructor===Array&&isNaN(parseInt(i))?t.push("</"+i+">"):e.constructor===Array?t.push(n):isNaN(parseInt(i))?t.push("</"+i+">"):t.push(a)}}},L={api:{},comp:{},attributeMapInfo:{},childToParentRelation:{},parentToChildRelation:{},childToParentRef:{},parentToChildRef:{},delayedRefreshComponent:{},options:{useConfig:"true",baseNode:"map",attributeMap:""},activated:!1,stopBroadCast:!1,stopBroadCastScope:{},stopBroadCastComp:[]};L.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)},
L.api.create=function(t,e){try{var i,o,s;if(void 0!==e&&null!=e||(e={}),"string"==typeof t){if(null==t.match("xmlns:w2=")&&(t=t.replace(">"," xmlns:w2='http://www.inswave.com/websquare'>")),!(t=c._.parse(t,!0)))return;i=(t=t.documentElement).tagName.replace("w2:","")}else{var r=l.I.isXML(t);i=r?t.tagName.replace("w2:",""):t.type,t.elementType=r?"XML":"JSON"}if(e.scope_obj){var a=y.Z.getComponentById(e.scope_obj);a&&(s=a.uuid)}switch(i){case"dataList":o=new L.dataList(null,null,t,i,s);break;case"dataMap":o=new L.dataMap(null,null,t,i,s);break;case"linkedDataList":o=new L.linkedDataList(null,null,t,i,s);break;case"aliasDataList":o=new L.aliasDataList(null,null,t,i,s);break;case"aliasDataMap":o=new L.aliasDataMap(null,null,t,i,s);break;case"aliasLinkedDataList":o=new L.aliasLinkedDataList(null,null,t,i,s)}if(o){L.api.addChild(o);var n=L.parentToChildRef[o.id];if(n)for(var d in n)if(n[d]){var u=y.Z.getComponentById(d);u&&u.modelControl&&u.modelControl.dataCollectionBinding(u.options.ref)}}}catch(t){h.Y.printStackTrace(t)}},L.api.createObjects=function(t){try{for(var e=0;e<t.length;e++)L.api.create(t[e])}catch(t){h.Y.printStackTrace(t)}},L.api.remove=function(t,e){try{if(void 0!==e&&null!=e||(e={}),e.scope_obj){var i=y.Z.getComponentById(e.scope_obj);if(!i)return void d.v.printLog("[$p.data.remove error] cannot find wframe["+i.id+"]");try{t=i.getObj(t).id}catch(e){return void d.v.printLog("[$p.data.remove error] cannot find ["+t+"] in wframe["+i.id+"]")}}var o;if(null==(o=e.uuid&&a.q.idCache[e.uuid]?a.q.idCache[e.uuid]:L.comp[t])){if(!(t.indexOf("??")>=0&&a.q.idCache[a.q.idToUUID[t]]))return;o=a.q.idCache[a.q.idToUUID[t]]}if("function"==typeof o.finalize)try{o.finalize()}catch(t){d.v.printLog("[ERROR] : dataCollection.api.remove - finalize : "+o.id)}if(o.scope_obj&&o.scope_obj.scope&&o.scope_obj.scope[o.org_id]&&delete o.scope_obj.scope[o.org_id],window[a.q.noConflict].comp[o.id]=null,window[a.q.noConflict].data[o.id]=null,delete window[a.q.noConflict].comp[o.id],delete window[a.q.noConflict].data[o.id],a.q.idToUUID[o.id]=null,delete a.q.idToUUID[o.id],a.q.idCache[o.uuid]=null,delete a.q.idCache[o.uuid],window[o.id]&&(window[o.id]=null),o.options){var s=o.getOption("pluginName");delete(a.q.componentsCache[s]||a.q.componentsCache[o._wTagName]||{})[o.uuid]}o.event&&o.event.clearCache(),l.I._removeObject(o,{directKey:"remove,finalize,setDataFile"}),delete L.comp[t],delete L.parentToChildRelation[t],delete L.parentToChildRef[t]}catch(t){h.Y.printStackTrace(t)}},L.api.addChild=function(t){try{L.comp[t.id]=t}catch(t){h.Y.printStackTrace(t)}},L.api.addRelation=function(t,e){try{L.childToParentRelation[t]=e,L.parentToChildRelation[e]||(L.parentToChildRelation[e]={}),L.parentToChildRelation[e][t]||(L.parentToChildRelation[e][t]=!0,L.comp[e]&&L.comp[e]._addRelation(t))}catch(t){h.Y.printStackTrace(t)}},L.api.addRefRelation=function(t,e){try{L.childToParentRef[t]=e,L.parentToChildRef[e]||(L.parentToChildRef[e]={}),L.parentToChildRef[e][t]||(L.parentToChildRef[e][t]=!0,L.comp[e]&&L.comp[e]._addRefRelation(t))}catch(t){h.Y.printStackTrace(t)}},L.api.setRefValue=function(t,e,i){try{var o=L.api.getObj(t.dataComp);if(o)switch(o.initializeType){case"linkedDataList":case"dataList":"number"==typeof o.rowPosition&&o.setCellData(o.rowPosition,t.colID,e,i);break;case"dataMap":!o.firstSetting[t.key]&&o.options.firstSet&&""==o.get(t.key)&&o.setOriginal(t.key,o.get(t.key)),o.set(t.key,e)}}catch(t){h.Y.printStackTrace(t)}},L.api.getRefValue=function(t){try{var e=L.api.getObj(t.dataComp);if(e)switch(e.initializeType){case"linkedDataList":case"dataList":return e.getCellData(e.rowPosition,t.colID);case"dataMap":return e.get(t.key)}}catch(t){h.Y.printStackTrace(t)}},L.api.get=function(t,e,i){try{if(void 0!==i&&null!=i||(i={}),"string"==typeof e&&e){e=JSON.parse(e);for(var o=0;o<e.length;o++){var s=e[o];s.initializeType&&(e[o]=s.id)}}switch(t.toUpperCase()){case"JSON":return L.api._getJSON(e,i);case"ARRAY":return L.api._getARRAY(e,i);case"XML":
return L.api._getXML(e,i)}}catch(t){h.Y.printStackTrace(t)}},L.api._getJSON=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null,o={};if(t&&1==t.length&&e&&e.singleMode){var s=t[0],r={};if("string"==typeof s){if(null!=i)null!=(u=y.Z.getComponentById(i).scope[s])&&(s=u.id);if(m=L.comp[s]){var n=m.getOption("JSONPath"),l=m.id;switch(null!=i&&(l=m.org_id||m.id),n=n?n+"."+l:l,m.initializeType){case"dataMap":r=m.getRefJSON(e);break;case"dataList":case"linkedDataList":r=m.getRefAllJSON(e);break;case"default":r=L.api.JSONPathEvaluator(r,n)}}}else{if(null!=i)null!=(u=y.Z.getComponentById(i).scope[s.id])&&(s.id=u.id);if(m=L.comp[s.id]){var d=a.q.extend({},e);"object"===(0,g.A)(s.includeColumns)&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=m.getOption("JSONPath"),l=m.id;switch(null!=i&&(l=m.org_id||m.id),n=n?n+"."+(s.key||l):s.key||l,m.initializeType){case"dataMap":r=L.api._getMapByOption("JSON",s,d);break;case"dataList":case"linkedDataList":r=L.api._getListByOption("JSON",s,d);break;case"default":r=L.api.JSONPathEvaluator(r,n)}}}return r}if(t)for(var c=0;c<t.length;c++){r={};if("string"==typeof(s=t[c])){if(null!=i)null!=(u=y.Z.getComponentById(i).scope[s])&&(s=u.id);if(m=L.comp[s]){n=m.getOption("JSONPath"),l=m.id;switch(null!=i&&(l=m.org_id||m.id),n=n?n+"."+l:l,r=L.api.JSONPathEvaluator(r,n),m.initializeType){case"dataMap":v.r.setJSONByPath(r,n,m.getRefJSON(e));break;case"dataList":case"linkedDataList":v.r.setJSONByPath(r,n,m.getRefAllJSON(e))}}}else if("object"==(0,g.A)(s)){var u;if(null!=i)null!=(u=y.Z.getComponentById(i).scope[s.id])&&(s.id=u.id);if(m=L.comp[s.id]){d=a.q.extend({},e);"object"===(0,g.A)(s.includeColumns)&&null!=s.includeColumns&&s.includeColumns.constructor===Array&&(d.includeColumns=s.includeColumns);n=m.getOption("JSONPath"),l=m.id;switch(null!=i&&(l=m.org_id||m.id),n=n?n+"."+(s.key||l):s.key||l,r=L.api.JSONPathEvaluator(r,n),m.initializeType){case"dataMap":v.r.setJSONByPath(r,n,L.api._getMapByOption("JSON",s,d));break;case"dataList":case"linkedDataList":v.r.setJSONByPath(r,n,L.api._getListByOption("JSON",s,d))}}}o=k.JSONExtend(o,r)}else for(var p in L.comp){var m=L.comp[p];if(null!=i){if(!m.scope_obj)continue;if(m.scope_obj.id!==i)continue;if(m.options._empty)continue}else if(!0===e.skipWFrame&&m.scope_obj&&a.q.idCache[m.scope_obj.uuid]===m.scope_obj)continue;n=m.getOption("JSONPath"),l=m.id;switch(null!=i&&(l=m.org_id||m.id),n=n?n+"."+l:l,o=L.api.JSONPathEvaluator(o,n),m.initializeType){case"dataMap":v.r.setJSONByPath(o,n,m.getRefJSON(e));break;case"dataList":case"linkedDataList":v.r.setJSONByPath(o,n,m.getRefAllJSON(e))}}return o}catch(t){h.Y.printStackTrace(t)}},L.api._getARRAY=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0],s=null;if("string"==typeof o){if(null!=i)null!=(d=y.Z.getComponentById(i).scope[o])&&(o=d.id);s=L.comp[o]}else{if(null!=i)null!=(d=y.Z.getComponentById(i).scope[o.id])&&(o.id=d.id);s=L.comp[o.id],"object"===(0,g.A)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(e.includeColumns=o.includeColumns)}if("dataMap"==s.initializeType)return s.getJSON(e);if("dataList"==s.initializeType||"linkedDataList"==s.initializeType)return s.getAllArray(e)}var r={};if(t)for(var n=0;n<t.length;n++){if("string"==typeof(o=t[n])){if(null!=i)null!=(d=y.Z.getComponentById(i).scope[o])&&(o=d.id);if(s=L.comp[o]){var l=s.id;switch(null!=i&&(l=s.org_id||s.id),s.initializeType){case"dataMap":r[l]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[l]=s.getAllArray(e)}}}else if("object"==(0,g.A)(o)){var d;if(null!=i)null!=(d=y.Z.getComponentById(i).scope[o.id])&&(o.id=d.id);s=L.comp[o.id];var c,u=!1;if(s){o.key?"string"==typeof(c=o.key)&&c.indexOf(".")>=0&&(r=L.api.JSONPathEvaluator(r,c),u=!0):(c=s.id,null!=i&&(c=s.org_id||s.id));var p=a.q.extend({},e);switch("object"===(0,
g.A)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(p.includeColumns=o.includeColumns),s.initializeType){case"dataMap":u?v.r.setJSONByPath(r,c,L.api._getMapByOption("ARRAY",o,p)):r[c]=L.api._getMapByOption("ARRAY",o,p);break;case"dataList":case"linkedDataList":u?v.r.setJSONByPath(r,c,L.api._getListByOption("ARRAY",o,p)):r[c]=L.api._getListByOption("ARRAY",o,p)}}}}else for(var m in L.comp){s=L.comp[m];if(null!=i){if(!s.scope_obj)continue;if(s.scope_obj.id!==i)continue}else if(!0===e.skipWFrame&&s.scope_obj&&a.q.idCache[s.scope_obj.uuid]===s.scope_obj)continue;switch(s.initializeType){case"dataMap":r[s.id]=s.getJSON(e);break;case"dataList":case"linkedDataList":r[s.id]=s.getAllArray(e)}}return r}catch(t){h.Y.printStackTrace(t)}},L.api._getXML=function(t,e){try{void 0!==e&&null!=e||(e={});var i=e.scope_obj||null;if(t&&1==t.length&&e&&e.singleMode){var o=t[0];if(null!=i)null!=(p=y.Z.getComponentById(i).scope[o])&&(o=p.id);if("dataMap"==(v=L.comp[o]).initializeType)return v.getXML(e);if("dataList"==v.initializeType||"linkedDataList"==v.initializeType)return v.getAllXML(e)}var s=function(t){for(var e="",i=0;i<t.length;i++)e+="<"+t[i]+">";for(i=t.length-1;i>=0;i--)e+="</"+t[i]+">";return e}(L.options.baseNode.split("/")),r=c._.parse(s),n=r.documentElement,l=y.Z.getComponentById(L.options.attributeMap);if(l)for(var d=0;d<l.getCount();d++)n.setAttribute(l.getKey(d),l.get(d));if(t)for(d=0;d<t.length;d++){var u;if("string"==typeof(o=t[d])){if(null!=i)null!=(p=y.Z.getComponentById(i).scope[o])&&(o=p.id);if(v=L.comp[o])switch(u=v.id,null!=i&&(u=v.org_id||v.id),v.initializeType){case"dataMap":b=v.getXML(e);break;case"dataList":case"linkedDataList":b=v.getAllXML(e)}}else if("object"==(0,g.A)(o)){var p;if(null!=i)null!=(p=y.Z.getComponentById(i).scope[o.id])&&(o.id=p.id);if(v=L.comp[o.id]){o.key?u=o.key:(u=v.id,null!=i&&(u=v.org_id||v.id));var m=a.q.extend({},e);switch("object"===(0,g.A)(o.includeColumns)&&null!=o.includeColumns&&o.includeColumns.constructor===Array&&(m.includeColumns=o.includeColumns),v.initializeType){case"dataMap":b=L.api._getMapByOption("XML",o,m);break;case"dataList":case"linkedDataList":b=L.api._getListByOption("XML",o,m)}}}if(b=b.documentElement?b.documentElement:b,v&&v.getOption("keyNode"))S=(S=v.getOption("keyNode")).wq_replaceAll("${key}",u),b=L.api.makeKeyNodeChildXML(v,S,b,u);c._.appendChild(n,b)}else for(var f in L.comp){var b,v,w=(v=L.comp[f]).id;if(null!=e.scope_obj){if(!v.scope_obj)continue;if(v.scope_obj.id!==i)continue;w=v.org_id||v.id}else if(!0===e.skipWFrame&&v.scope_obj&&a.q.idCache[v.scope_obj.uuid]===v.scope_obj)continue;switch(e.id=w,v.initializeType){case"dataMap":b=v.getXML(e);break;case"dataList":case"linkedDataList":b=v.getAllXML(e)}if(b=b.documentElement?b.documentElement:b,v.getOption("keyNode")){var S=v.getOption("keyNode"),_=v.id;null!=i&&(_=v.org_id||v.id),S=S.wq_replaceAll("${key}",_),b=L.api.makeKeyNodeChildXML(v,S,b)}c._.appendChild(n,b)}return r}catch(t){h.Y.printStackTrace(t)}},L.api._getListByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=L.comp[e.id];if(r){e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id));var a=e.action,n=e.matchedColumn,l=e.matchedData;if("JSON"==t)switch(a){case"all":return r.getRefAllJSON(i);case"modified":return r.getRefModifiedJSON(i);case"inserted":return r.getRefInsertedJSON(i);case"deleted":return r.getRefDeletedJSON(!1,i);case"updated":return r.getRefUpdatedJSON(i);case"matched":if(n&&l)return r.getMatchedJSON(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedJSON(n,l,i);default:return r.getRefAllJSON(i)}else if("ARRAY"==t)switch(a){case"all":return r.getAllArray(i);case"modified":return r.getModifiedArray(i);case"inserted":return r.getInsertedArray(i);case"deleted":return r.getDeletedArray(!1,i);case"updated":return r.getUpdatedArray(i);case"matched":if(n&&l)return r.getMatchedArray(n,l,i);case"unmatched":if(n&&l)return r.getUnmatchedArray(n,l,i);default:return r.getAllArray(i)
}else if("XML"==t)switch(i.id=o,a){case"all":return r.getAllXML(i);case"modified":return r.getModifiedXML(i);case"inserted":return r.getInsertedXML(i);case"deleted":return r.getDeletedXML(!1,i);case"updated":return r.getUpdatedXML(i);case"matched":if(n&&l)return r.getMatchedXML(n,l,!1,!1,!1,i);case"unmatched":if(n&&l)return r.getUnmatchedXML(n,l,!1,!1,!1,i);default:return r.getAllXML(i)}}}catch(t){h.Y.printStackTrace(t)}},L.api._getMapByOption=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o,s=i.scope_obj||null,r=L.comp[e.id];if(r){if(e.key?o=e.key:(o=r.id,null!=s&&(o=r.org_id||r.id)),"JSON"==t)return r.getRefJSON(i);if("ARRAY"==t)return r.getArray(i);if("XML"==t)return i.id=o,r.getXML(i)}}catch(t){h.Y.printStackTrace(t)}},L.api._getArrayEvalString=function(){try{var t="{",e=[],i=0;for(var o in L.comp)e.push(o),"linkedDataList"===L.comp[o].initializeType&&i++;for(var s=0;s<e.length;s++){var r=L.comp[e[s]];switch(r.initializeType){case"dataMap":t+='"'+r.id+'":'+r._dataList.getAllArrayEvalString(),s<e.length-1-i&&(t+=",");break;case"dataList":t+='"'+r.id+'":'+r.getAllArrayEvalString(),s<e.length-1-i&&(t+=",")}}return t+="}"}catch(t){return h.Y.printStackTrace(t),{}}},L.api.getOption=function(t){try{var e=t in L.options,i=L.options.attributeMap;if(e)return L.options[t];if(i){var o=y.Z.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.Y.printStackTrace(t)}},L.api.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");var i=t in L.options,o=L.options.attributeMap;if(i)L.options[t]="baseNode"==t?e||"map":e;else if(o){var s=y.Z.getComponentById(o);s.hasKey(t)&&s.set(t,e)}}catch(t){h.Y.printStackTrace(t)}},L.api.set=function(t,e,i,o){try{if(void 0!==o&&null!=o||(o={}),"string"==typeof i&&i){try{i=JSON.parse(i)}catch(t){i=new Function("return "+i)()}for(var s=0;s<i.length;s++){var r=i[s];r.initializeType&&(i[s]=r.id)}}switch(t.toUpperCase()){case"JSON":return L.api._setJSON(e,i,o);case"ARRAY":return L.api._setARRAY(e,i,o);case"XML":return L.api._setXML(e,i,o)}}catch(t){h.Y.printStackTrace(t)}},L.api._setJSON=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=y.Z.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=L.comp[r],l=1==e.length&&i.singleMode?t:t[a];if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l)}}else if("object"==(0,g.A)(r)){var d;if(null!=o)null!=(d=y.Z.getComponentById(o).scope[r.id])&&(r.id=d.id);n=L.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));t=t;if(1==e.length&&i.singleMode?l=t:a.indexOf(".")>-1?(l=v.r.getJSONByPath(t,a),"dataMap"===n.initializeType&&"object"===(0,g.A)(l)&&null!=l&&l.constructor===Array&&(l=l[0])):l=t[a],n){var c="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(l,c,r.includeColumns)}}}}else for(var u in t){var p=u;if(null!=o&&(p=o+"_"+u),n=L.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setJSON(t[u])}}}catch(t){h.Y.printStackTrace(t)}},L.api._setARRAY=function(t,e,i){try{void 0!==i&&null!=i||(i={});var o=i.scope_obj||null;if(e)for(var s=0;s<e.length;s++){var r=e[s];if("string"==typeof r){var a=r;if(null!=o)null!=(d=y.Z.getComponentById(o).scope[r])&&(r=d.id,a=d.org_id||a);var n=L.comp[r],l=1==e.length&&i.singleMode?t:t[a];if(n)switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l)}}else if("object"==(0,g.A)(r)){var d;if(null!=o)null!=(d=y.Z.getComponentById(o).scope[r.id])&&(r.id=d.id);n=L.comp[r.id];r.key?a=r.key:(a=n.id,null!=o&&(a=n.org_id||n.id));l=1==e.length&&i.singleMode?t:t[a];if(n){var c="append"===r.action;switch(n.initializeType){case"dataMap":case"dataList":n.setArray(l,c,r.includeColumns)}}}}else for(var u in t){var p=u;if(null!=o&&(p=o+"_"+u),n=L.comp[p])switch(n.initializeType){case"dataMap":case"dataList":n.setArray(t[u])}}}catch(t){h.Y.printStackTrace(t)}},L.api._setXML=function(t,e,i){try{var o=function(t){
return"string"==typeof t?t:t.id};void 0!==i&&null!=i||(i={});var s=i.scope_obj||null;if(t=t.documentElement?t.documentElement:t,e&&1==e.length&&"vector"==t.nodeName){var r=o(e[0]);if(null!=s)null!=(g=y.Z.getComponentById(s).scope[r])&&(r=g.id);return void((d=L.comp[r])&&d.setXML(t))}if(e&&1==e.length&&"hastable"==t.nodeName&&!t.getAttribute("hashKey")){r=o(e[0]);if(null!=s)null!=(g=y.Z.getComponentById(s).scope[r])&&(r=g.id);return void((d=L.comp[r])&&d.setXML(t))}if(e&&1==e.length&&i.singleMode){r=o(e[0]);if(null!=s)null!=(g=y.Z.getComponentById(s).scope[r])&&(r=g.id);return void((d=L.comp[r])&&d.setXML(t))}if(!e)for(var a in e=[],L.comp){if(null!=i.scope_obj){if(!(d=L.comp[a]).scope_obj)continue;if(d.scope_obj.id!==s)continue}e.push(a)}for(var n=0;n<e.length;n++){var l,d,u=e[n],p=!1;if("string"==typeof u){if(l=u,r=u,null!=s)null!=(g=y.Z.getComponentById(s).scope[u])&&(r=g.id);d=L.comp[r],null!=s&&(l=d.org_id||d.id)}else{var g;if(r=u.id,null!=s)null!=(g=y.Z.getComponentById(s).scope[u.id])&&(r=g.id);d=L.comp[r],u.key?l=u.key:(l=d.id,null!=s&&(l=d.org_id||d.id)),p="append"==u.action}if(d){var m,f=d.getOption("keyNode");m=f?(f=f.wq_replaceAll("${key}",l))+"/"+d.getOption("baseNode").split("/")[0]:d.getOption("baseNode").split("/")[0];for(var b=c._.findNodes(t,m),v=d.getOption("idAttribute")?d.getOption("idAttribute"):"id",w=0;w<b.length;w++){var S,_=b[w],C=_.parentNode.nodeName;if("dataMap"===d.initializeType&&(C=_.nodeName),f)(S=_.parentNode.getAttribute(v))&&(C=S);else(S=_.getAttribute(v))&&(C=S);if(C===l){switch(d.initializeType){case"dataMap":case"dataList":d.setXML(_,p,u.includeColumns)}break}}}}}catch(t){h.Y.printStackTrace(t)}},L.api._setArrayEvalString=function(t){try{var e=JSON.parse(t);for(var i in e){var o=L.comp[i];switch(o.initializeType){case"dataMap":o.setArray(e[i]);break;case"dataList":o.setData(e[i])}}}catch(t){h.Y.printStackTrace(t)}},L.api.syncWithAttributeMap=function(){try{if(L.options.attributeMap){var t=L.comp[this.options.attributeMap];if(t)for(var e=t.getCount(),i=0;i<e;i++){var o=t.getKey(i),s=t.get(i);L.options[o]=s}}}catch(t){h.Y.printStackTrace(t)}},L.api.makeKeyNodeChildXML=function(t,e,i,o){try{var s=t.getOption("idAttribute")?t.getOption("idAttribute"):"id",r=function(t,e,i){for(var o="",s=0;s<t.length;s++)o+="<"+t[s]+" "+e+"='"+i+"'>";for(s=t.length-1;s>=0;s--)o+="</"+t[s]+">";return o}(e.split("/"),s,o||t.id),a=c._.parse(r).documentElement,n=c._.findNode(a,"/"+e);return c._.appendChild(n,i),a}catch(t){h.Y.printStackTrace(t)}},L.api.broadcast=function(t){try{for(var e in L.comp){var i=L.comp[e];i[t.all[0]].apply(i,t.all[1]||[])}}catch(t){h.Y.printStackTrace(t)}},L.api.JSONPathEvaluator=function(t,e){try{for(var i=e.split("."),o=0;o<i.length;o++){var s=i.slice(0,o+1).join("."),r=v.r.getJSONByPath(t,s);"object"!==(0,g.A)(r)&&v.r.setJSONByPath(t,s,{})}return t}catch(t){h.Y.printStackTrace(t)}},L.api.getInfo=function(t,e,i,o){var s={},r=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/dataCollection/@useScope"));if("object"===(0,g.A)(t)&&null!=t)if(t.constructor===Array)for(var a=0;a<t.length;a++){var n=L.comp[t[a]];r&&n.scope_id!=o.scope_obj||n&&"function"==typeof n.getInfo&&(s[n.id]=n.getInfo(e,i))}else for(var h in t){n=L.comp[h];r&&n.scope_id!=o.scope_obj||n&&"function"==typeof n.getInfo&&(s[n.id]=n.getInfo(e,i))}else for(var h in L.comp){1==(n=L.comp[h]).options._empty||r&&n.scope_id!=o.scope_obj||n&&"function"==typeof n.getInfo&&(s[n.id]=n.getInfo(e,i))}return s},L.api.getAllDataCollection=function(t,e){try{var i=[],o=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/dataCollection/@useScope"));for(var s in L.comp){var r=L.comp[s];o&&r.scope_id!=e.scope_obj||("object"===t?i.push(r):i.push(r.id))}return i}catch(t){h.Y.printStackTrace(t)}},L.api.setBroadcast=function(t,e){try{var i={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshInstance:!0,refreshScroll:!0}]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],
fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"},o=!y.Z.getBoolean(t);if(y.Z.getBoolean(l.I.getConfiguration("/WebSquare/dataCollection/@useScope"))){if(e.scope_obj in L.stopBroadCastScope===o)return;if(!1===o){for(var s=0;s<L.stopBroadCastComp.length;s++){(r=a.q.idCache[L.stopBroadCastComp[s]])&&r.scope_id in L.stopBroadCastScope&&r.broadcast(i)}delete L.stopBroadCastScope[e.scope_obj]}else L.stopBroadCastScope[e.scope_obj]=!0}else{if(!!L.stopBroadCast===o)return;if(L.stopBroadCast=o,!1===o)for(s=0;s<L.stopBroadCastComp.length;s++){var r;(r=a.q.idCache[L.stopBroadCastComp[s]])&&r.broadcast(i)}}!1===o&&(L.stopBroadCastComp=[],L.stopBroadCastComp._wq_add=function(t){for(var e=!1,i=0;i<this.length;i++)if(this[i]===t){e=!0;break}e||this.push(t)})}catch(t){h.Y.printStackTrace(t)}},L.api.getBroadcast=function(t){try{return y.Z.getBoolean(l.I.getConfiguration("/WebSquare/dataCollection/@useScope"))&&t&&t.scope_obj?!(t.scope_obj in L.stopBroadCastScope):!L.stopBroadCast}catch(t){h.Y.printStackTrace(t)}},L.api.onComplete=function(){try{for(var t in L.comp){var e=L.comp[t];e&&"function"==typeof e.onComplete&&!e.completed&&e.onComplete()}}catch(t){h.Y.printStackTrace(t)}},L.api.isAliasDataCollection=function(t){try{var e=!1;return null!=t&&t.options&&!0==={aliasDataList:!0,aliasDataMap:!0,aliasLinkedDataList:!0}[t.options.pluginName]&&(e=!0),e}catch(t){h.Y.printStackTrace(t)}},L.api.getObj=function(t){try{return!0===L.api.isAliasDataCollection(t)?t.getObj():t}catch(t){h.Y.printStackTrace(t)}},L.api.bindPath=function(t){try{var e=t.split("."),i={};return i.collectionId=e[0].replace(/^data:/,""),e.length>1&&(i.columnId=e[1]),i}catch(t){h.Y.printStackTrace(t)}};var A={paramObj:null,asyncCount:0,showWindowParam:{},showIFrameName:{},getParameter:function(t){var e="",i=t;try{if(WebSquare.util.isEncodeParameter()&&(t=WebSquare.util.encodeParameter(t)),"w2xPath"==i&&WebSquare.util.getEncodeParameterOption("pathName")&&(t=WebSquare.util.getEncodeParameterOption("pathName")),null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var o=decodeURIComponent(location.search).slice(1).split("&"),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}if(location.hash.length>0)for(o=location.hash.substring(1).split(/[\&\?\#]/),s=0;s<o.length;s++){2==(a=o[s].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}}else if("w2xPath"==t){if((r=location.toString().lastIndexOf("w2xPath"))<0)WebSquare.net.paramObj[t]=null;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}else if(WebSquare.util.getEncodeParameterOption("pathName")&&t==WebSquare.util.getEncodeParameterOption("pathName")){var r,a;if((r=location.toString().lastIndexOf(WebSquare.util.getEncodeParameterOption("pathName")))<0)WebSquare.net.paramObj[t]=WebSquare.net.paramObj.w2xPath;else 2==(a=location.toString().slice(r).split(/[\&\?\#]/)[0].split("=")).length&&(WebSquare.net.paramObj[a[0].wq_trim()]=a[1].wq_trim())}else if(null!=WebSquare.userData[i])return WebSquare.userData[i];e=WebSquare.net.paramObj[t],WebSquare.util.isEncodeParameter()?!e&&WebSquare.util.getEncodeParameterOption("fallback")?e=WebSquare.net.paramObj[i]:WebSquare.util.getEncodeParameterOption("onlyParam")||(e=WebSquare.util.decodeParameter(e)):!e&&WebSquare.util.getEncodeParameterOption("fallback")&&(e=WebSquare.net.paramObj[i])}catch(t){t.detail="WebSquare.net.getParameter error.",h.Y.printStackTrace(t)}(null!=e&&void 0!==e||(e=""),"w2xPath"===t)?e=e.replace(/%2F/g,"/"):e="native"==WebSquare.core.getConfiguration("/WebSquare/parameterEncode/@value")?decodeURIComponent(e):WebSquare.text.URLDecoder(e);return e},_setParameter:function(t){try{
if(WebSquare.net.paramObj)if(WebSquare.util.isEncodeParameter())if(WebSquare.util.getEncodeParameterOption("onlyParam"))for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=t[e];else for(var e in t)WebSquare.net.paramObj[WebSquare.util.encodeParameter(e)]=WebSquare.util.encodeParameter(t[e]);else for(var e in t)WebSquare.net.paramObj[e]=t[e]}catch(t){t.detail="WebSquare.net._setParameter error",h.Y.printStackTrace(t)}},getAllParameter:function(){var t={},e={};try{for(var i in WebSquare.net.paramObj)t[i]=WebSquare.text.URLDecoder(WebSquare.net.paramObj[i]),WebSquare.util.isEncodeParameter()&&(WebSquare.util.getEncodeParameterOption("onlyParam")?e[WebSquare.util.decodeParameter(i)]=t[i]:e[WebSquare.util.decodeParameter(i)]=WebSquare.util.decodeParameter(t[i]))}catch(t){h.Y.printStackTrace(t)}return WebSquare.util.isEncodeParameter()?t.w2xPath&&t.w2xPath.length>0?t:e:t},getBASE64Parameter:function(t){var e="";try{if(null==WebSquare.net.paramObj){WebSquare.net.paramObj=new Object;for(var i=location.search.substring(1).split("&"),o=0;o<i.length;o++){var s=i[o].split("=");2==s.length&&(WebSquare.net.paramObj[s[0].wq_trim()]=s[1].wq_trim())}}e=WebSquare.net.paramObj[t]}catch(t){t.detail="WebSquare.net.getBASE64Parameter error",h.Y.printStackTrace(t)}return null!=e&&void 0!==e||(e=""),WebSquare.text.BASE64URLDecoder(e)},getAllBASE64Parameter:function(){var t={};try{for(var e in WebSquare.net.paramObj)t[e]=WebSquare.text.BASE64URLDecoder(WebSquare.net.paramObj[e])}catch(t){h.Y.printStackTrace(t)}return t},showWindow:function(t,e,i,o,s){if(void 0===i||null==i)i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no'";else{var r=0,n=0,l="false",h=i.split(";");if(h.length>1){i="";for(var d=0;d<h.length;d++){var c=h[d].split(":");2==c.length&&("dialogHeight"==c[0].wq_trim()?(r=parseInt(c[1].wq_trim(),10),i+="height="+c[1]+","):"dialogWidth"==c[0].wq_trim()?(n=parseInt(c[1].wq_trim(),10),i+="width="+c[1]+","):"center"==c[0].wq_trim()?l=c[1].toLowerCase().wq_trim():i+=c[0]+"="+c[1]+",")}}if("true"==l||"yes"==l){if(0!=r)i="top="+(740-r)/2+"px,"+i;if(0!=n)i="left="+(1e3-n)/2+"px,"+i}}var u="idx10_"+(new Date).getTime()+a.q.safeRandom();WebSquare.net.showWindowParam[u]=void 0===e?null:e,t=t.indexOf("?")>-1?t+"&modalParamIdx="+u:t+"?modalParamIdx="+u;var p=null;return null==(p=void 0===o?window.open(t,"_blank",i):window.open(t,o,i))&&alert(WebSquare.language.getMessage("E_net_PopupBlocked")),p},getPopupParam:function(){try{var t=WebSquare.net.getParameter("modalParamIdx");return opener.WebSquare.net._getParam(t)}catch(t){return""}},_getParam:function(t){return WebSquare.net.showWindowParam[t]},isPopup:function(){try{return void 0!==window.opener&&!window.opener.closed}catch(t){return!1}},Obj2XML:function(t){var e="<obj>";for(var i in t)e=e+"<"+i+" value='"+WebSquare.xml.encode(t[i])+"'/>";return e+="</obj>"},XML2Obj:function(t){var e=new Object;try{var i=null;if("string"==typeof t)i=WebSquare.xml.parse(t);else{if(!WebSquare.xml.isDocument(t))return"";i=t}var o=i.documentElement;if("vector"==o.nodeName||"hashtable"==o.nodeName)return"";for(var s=o.childNodes,r=0;r<s.length;r++){var a=s.item(r);if(1==a.nodeType){var n=a.nodeName,l=a.getAttribute("value");null==l&&(l=""),e[n]=l}}}catch(t){h.Y.printStackTrace(t)}return e},showIFrame:function(t,e,i,o){var s=0,r=0,n=t;if(void 0===i||null==i)i="height=370,width=320";else{var l=i.split(";");if(l.length>1){i="";for(var d=0;d<l.length;d++){var c=l[d].split(":");2==c.length&&("dialogHeight"==c[0].wq_trim()?(s=parseInt(c[1].wq_trim(),10),i+="height="+c[1]+","):"dialogWidth"==c[0].wq_trim()?(r=parseInt(c[1].wq_trim(),10),i+="width="+c[1]+","):"center"==c[0].wq_trim()?c[1].toLowerCase().wq_trim():i+=c[0]+"="+c[1]+",")}}}var u="idx11_"+(new Date).getTime()+a.q.safeRandom();if(WebSquare.net.showWindowParam[u]=void 0===e?null:e,n){
n=n.indexOf("?")>-1?n+"&modalParamIdx="+u:n+"?modalParamIdx="+u,void 0===o&&(o="___iframeLayer"),WebSquare.net.showIFrameName[u]=o,(isNaN(s)||0==s)&&(s=370),(isNaN(r)||0==r)&&(r=320);try{if(void 0===document.all[o]||null==document.all[o]){var p=document.createElement("div");p.id=o,p.style.position="absolute",p.style.overflow="hidden",p.style.zIndex=1e4,p.style.visibility="visible",p.style.height=s+"px",p.style.width=r+"px",p.style.setExpression("top","document.body.scrollTop+document.body.clientHeight/2-"+s+"/2"),p.style.setExpression("left","document.body.scrollLeft+document.body.clientWidth/2-"+r+"/2"),document.body.appendChild(p),WebSquare.core._safeInnerHTML(p,"<iframe frameborder='0' name='iframe"+o+"' scrolling='no' style='width:100%; height:100%'></iframe>"),document.frames["iframe"+o].location.replace(n)}else{var g=document.body.scrollTop+document.body.clientHeight/2-parseInt(document.all[o].style.height)/2,m=document.body.scrollLeft+document.body.clientWidth/2-parseInt(document.all[o].style.width)/2;document.all[o].style.top=g,document.all[o].style.left=m,document.all[o].visibility="visible",document.all[o].style.zIndex=1e4,WebSquare.core._safeInnerHTML(document.all[o],"<iframe frameborder='0' scrolling='no' src='"+n+"' style='width:100%; height:100%;'></iframe>")}}catch(s){i="channelmode=no,directories=no,fullscreen=no,top=200,height=350,left=250,width=400,location=no,menubar=no,resizable=yes,scrollbars=auto,status=no,titlebar=yes,toolbar=no",WebSquare.net.showWindow(t,e,i,o),h.Y.printStackTrace(s)}}},hideIFrame:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");parent.WebSquare.net._hideIFrame(t)}}catch(t){h.Y.printStackTrace(t)}},_hideIFrame:function(t){var e=WebSquare.net.showIFrameName[t];void 0!==document.all[e]&&null!=document.all[e]&&(document.all[e].textContent="",document.all[e].style.zIndex=1,document.all[e].visibility="hidden",document.body.removeChild(document.all[e]))},getIFrameParam:function(){try{if(parent.WebSquare){var t=WebSquare.net.getParameter("modalParamIdx");return parent.WebSquare.net._getParam(t)}return""}catch(t){return h.Y.printStackTrace(t),""}},hasParentFrame:function(){try{if(WebSquare.core.browserCheck.ieAllVersion){var t=WebSquare.core.browserVersion();return"5"==t.charAt(0)&&window.parent!=window||(("6"==t||"7"==t)&&window.parent!=window&&window.parent==window.frameElement.ownerDocument.parentWindow||window.parent!=window)}if(WebSquare.core.browserCheck.moz||WebSquare.core.browserCheck.opera)return window.parent!=window}catch(t){h.Y.printStackTrace(t)}return!1},openWebsquareUrl:function(t,e,i,o){if(i||(i=window),i&&i.location){if(o=o||"true"==WebSquare.core.getConfiguration("/WebSquare/spa/@value"))return void WebSquare.util.url(t,{spa:!0});(e=a.q.extend(WebSquare.net.getAllParameter(),e)).w2xPath=WebSquare.core.getURL(t),t.startsWith("/")&&(e.w2xHome="");var s,r=[];for(var n in e)r.push(n+"="+e[n]);s="?"+r.join("&"),t=i.location.href.replace(/\?.*/,s),i.location.assign(t)}},openUrl:function(t,e){if(e||(e=window),e&&e.location){var i=e.location.protocol+"//";t.startsWith(i)||(t=i+t),e.location.assign(t)}},getSSLBlankPage:function(t){var e="";return WebSquare.core.browserCheck.ie&&"https:"==location.protocol&&(e=1==t?a.q._resourceURI+"blank.html":"src='"+a.q._resourceURI+"blank.html'"),e},getBlankXML:function(){return a.q._resourceURI+"blank.xml"},isSSLBlankPage:function(t){var e=!1;return t==a.q._resourceURI+"blank.html"&&(e=!0),e},ajax:function(t){try{var e,i;if(WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/notRecommended/warningSync/@value"))&&"synchronous"===t.mode&&alert(WebSquare.language.getMessage("E_deprecated_sync","$p.ajax")),t.beforeAjax&&void 0!==(e=t.beforeAjax(t))&&0==e)return void $l("Stop processing because result is false in ajax beforeAjax");if(""!=t.processMsg)if(t.scope)WebSquare.layer.showProcessMessage(t.processMsg,{scope:t.scope,ajax:!0});else{
var o=document.getElementById("___processbar2"),s=document.getElementById("___processbar2_i");(void 0!==o&&null!=o||void 0!==s&&null!=s)&&("none"!=o.style.display||"none"!=s.style.display)||WebSquare.layer.showProcessMessage(t.processMsg)}var r,a=WebSquare.core.getXMLHTTPObject();if(t.scope){var n=WebSquare.idToUUID[t.scope];n&&(r=WebSquare.idCache[n])}var l,d={frameObj:r,msaName:t.msaName},c=WebSquare.util.getSubmissionURL(t.action,d),u="synchronous"!=t.mode,p=t.mediatype||"application/xml",g=t.accept||p,m=t.method||"post",f=t.timeout;u&&!t.scope&&WebSquare.net.asyncCount++,$l(c),a.open(m,c,u);try{t.withCredentials&&"asynchronous"==t.mode&&(a.withCredentials=t.withCredentials)}catch(t){h.Y.printStackTrace(t)}"none"!==g&&a.setRequestHeader("Accept",g),a.setRequestHeader("Content-Type",p);try{if(t.requestHeader)for(var b in t.requestHeader)a.setRequestHeader(b,t.requestHeader[b])}catch(t){h.Y.printStackTrace(t)}u&&(f&&(l=window.setTimeout((function(){a.onreadystatechange=function(){},a.abort(),i={errorType:"timeout-error",resourceUri:c,time:f},t.scope||WebSquare.net.asyncCount--,t.scope&&!1!==t.hideProcessMsg?WebSquare.layer.hideProcessMessage({scope:t.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==t.hideProcessMsg&&WebSquare.layer.hideProcessMessage(),$l("ajax timeout"),window.clearTimeout(l),t.error&&t.error(i)}),f)),a.onreadystatechange=function(){WebSquare.net.defaultcallback(a,t,l)});var y=WebSquare.core.getConfiguration("/WebSquare/ajax/externalHandler/@value")||"";if(void 0!==t.externalHandler&&(y=t.externalHandler),""==y||"default"==y);else if(y)if("function"==typeof y)t.requestData=y(t);else{var v=WebSquare.util.getGlobalFunction(y);"function"==typeof v&&(t.requestData=v(t))}a.send(t.requestData),u||WebSquare.net.commonHandler(a,t)}catch(e){h.Y.printStackTrace(e),t&&t.scope?WebSquare.layer.hideProcessMessage({scope:t.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},commonHandler:function(t,e){var i,o="synchronous"!=e.mode;o&&!e.scope&&WebSquare.net.asyncCount--;var s=WebSquare.core.getURL(e.action),r=t.getResponseHeader("Content-Type")||"";if(r.indexOf("xml")>-1)i=WebSquare.BootLoader.useWebSquareXMLParser?WebSquare.xml.parse(t.responseText):t.responseXML;else if(r.indexOf("json")>-1)try{i=JSON.parse(t.responseText)}catch(e){i=t.responseText}else i=t.responseText;if(t&&(200>t.status||300<=t.status)){var a={errorType:"resource-error",resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseBody:t.responseText};return $l("ajax error(E01). Status["+t.status+"] "),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),e.error&&e.error(a),t.onreadystatechange=function(){},void(t=null)}var n,l={resourceUri:s,responseHeaders:WebSquare.ModelUtil.parseResponseHeader(t),responseStatusCode:t.status,responseReasonPhrase:t.statusText,requestBody:e.requestData,responseText:t.responseText};n=l,r.indexOf("json")>-1?n.responseJSON=i:r.indexOf("xml")>-1&&(n.responseBody=i),$l("ajax complete. Status["+t.status+"] async["+o+"] url["+s+"]"),e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope,ajax:!0}):WebSquare.net.asyncCount<=0&&!1!==e.hideProcessMsg&&(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0),e.success&&e.success(l),t.onreadystatechange=function(){},t=null},defaultcallback:function(t,e,i){try{4==t.readyState&&(i&&(window.clearTimeout(i),i=null),WebSquare.net.commonHandler(t,e))}catch(t){h.Y.printStackTrace(t),e&&e.scope?WebSquare.layer.hideProcessMessage({scope:e.scope}):(WebSquare.layer.hideProcessMessage(),WebSquare.net.asyncCount=0)}},download:function(t,e,i,o,s){WebSquare.hybridApp&&(t=WebSquare.util.getSubmissionURL(t)),null!=o&&void 0!==o||(o=!1),s&&WebSquare.core._msaServerHash[s]&&(t=WebSquare.core.getServletURL(null,s,t)),
WebSquare.core.download(t,e,i,o)}},D={sessionData:{}};D.sessionType=new Object,D._handleAttribute=function(t){if(null!=t&&t.mode&&t.key){for(var e=self,i=0;i<1e3;i++)try{if(null==e.opener&&e.parent===e)break;if(null!=e.opener&&e.opener.WebSquare&&e.opener.WebSquare.session)e=e.opener;else{if(e.parent===e||!e.parent.WebSquare||!e.parent.WebSquare.session)break;e=e.parent}}catch(t){break}var o,s=e.WebSquare.session,r=t.key;if("get"===t.mode||"remove"===t.mode){o=s.sessionData[r];var a=s.sessionType[r];void 0===o||null==o?o=null:"xml"===a&&(o=WebSquare.xml.parse(o)),"remove"===t.mode&&(delete s.sessionData[r],delete s.sessionType[r])}else if("set"===t.mode){var n=t.value,l="object";"string"==typeof n?l="string":WebSquare.xml.isDocument(n)?(n=WebSquare.xml.serialize(n),l="xml"):"object"==(0,g.A)(n)&&("function"==typeof n.serialize&&void 0!==n.classType?(l=n.classType,n=n.serialize()):l="object"),s.sessionData[r]=n,s.sessionType[r]=l}else"removeSession"===t.mode&&(s.sessionData={},s.sessionType={});return o}},D.getAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"get"})},D.removeAttribute=function(t){return WebSquare.session._handleAttribute({key:t,mode:"remove"})},D.removeSession=function(){return WebSquare.session._handleAttribute({key:"_",mode:"removeSession"})},D.setAttribute=function(t,e){return WebSquare.session._handleAttribute({key:t,mode:"set",value:e})},D._getAttributeData=function(t){var e=WebSquare.session.sessionData[t];return void 0===e||null==e?null:e},D._getAttributeType=function(t){var e=WebSquare.session.sessionType[t];return void 0===e||null==e?null:e},D._removeAttributeData=function(t){var e=WebSquare.session.sessionData[t];return WebSquare.session.sessionData[t]=null,delete WebSquare.session.sessionData[t],void 0===e||null==e?null:e},D._removeAttributeType=function(t){var e=WebSquare.session.sessionType[t];return WebSquare.session.sessionType[t]=null,delete WebSquare.session.sessionType[t],void 0===e||null==e?null:e},D._removeSession=function(){WebSquare.session.sessionData={},WebSquare.session.sessionType={}},D._setAttribute=function(t,e,i){WebSquare.session.sessionData[t]=e,WebSquare.session.sessionType[t]=i};var W=__webpack_require__(996),q=__webpack_require__(8683),M={cache:{},processMsg:"",disabledList:[],submissionIDQueue:[],submissionMessageQueue:[],saveLayer:function(t,e){try{var i=document.getElementById(t);void 0!==i&&null!=i&&(WebSquare.layer.cache[t+e]=i.innerHTML)}catch(t){h.Y.printStackTrace(t)}},loadLayer:function(t,e){try{if(void 0!==WebSquare.layer.cache[t+e]&&""!=WebSquare.layer.cache[t+e].wq_trim()){var i=document.getElementById(t);return void 0!==i&&null!=i&&(WebSquare.core._safeInnerHTML(i,WebSquare.layer.cache[t+e]),!0)}return!1}catch(t){h.Y.printStackTrace(t)}},clearLayer:function(){try{WebSquare.layer.cache=new Object}catch(t){h.Y.printStackTrace(t)}},showProcessMessage:function(t,e){try{if("$blank"==t||!t)return;if((e&&e.useLocale||"true"===WebSquare.core.getConfiguration("/WebSquare/useLocale/@value"))&&e&&e.localeRef){var i,o=e.localeRef.wq_trim();null==(i=WebSquare.WebSquareLang[o])&&(i="true"===WebSquare.core.getConfiguration("/WebSquare/useLocale/@useDefaultLabel")?"":"global_undefined"),i&&(t=i)}if(e&&e.scope){var s=WebSquare.layer._getMessageFrame(e.scope);if(null!=s)return s.showProcessMessage(t,e)}$l("WebSquare.layer.showProcessMessage ["+t+"]");var r=WebSquare.core.getConfiguration("processMsgType"),n="wframe"===r&&WebSquare.uiplugin&&WebSquare.uiplugin.wframe,l="pageFrame"===r&&WebSquare.uiplugin&&WebSquare.uiplugin.pageFrame;if(n||l)return WebSquare.uiplugin.wframe._showProcessMessage(WebSquare.getBody(),t,e);var d=t.wq_trim(),c=d.match(/^javascript\s*:\s*(.*)/i);null==c||void 0===c||(t=WebSquare.jsonUtil.getJSONByPath(window,c[1]))===window&&(t="")
;var u=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),p=e&&"pasteMsg"==e.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i"),g=WebSquare.core.getConfiguration("processMsgURL"),m=WebSquare.core.getConfiguration("processMsgHeight"),f=WebSquare.core.getConfiguration("processMsgWidth"),b=WebSquare.core.getConfiguration("processMsgBackground"),y=WebSquare.core.getConfiguration("/WebSquare/processMsgBackground/@backgroundColor"),v=WebSquare.core.getConfiguration("processMsgTitle")||"process Message";if(""==y&&(y="#112233"),""==g&&(g=e&&"pasteMsg"==e.type?a.q.baseURI+WebSquare.BootLoader.inquiresPath("message/pasteMsg.html"):a.q.baseURI+WebSquare.BootLoader.inquiresPath("message/processMsg.html")),g=0==WebSquare.WebSquareCache?WebSquare.BootLoader.getRandomPostfix(g+"?param="+WebSquare.text.URLEncoder(t)):WebSquare.BootLoader.getResourceCachePostfix(g+"?param="+WebSquare.text.URLEncoder(t)),delete WebSquare.layer.hideTrigger,e&&e.hideTrigger&&(WebSquare.layer.hideTrigger="true"),delete WebSquare.layer.abortTrigger,e&&e.abortTrigger&&(WebSquare.layer.abortTrigger="true"),WebSquare.layer.processMsg=t,""!=m&&""!=f||(m="81",f="295"),u)u.tabIndex=1,u.style.zIndex=1e4,u.style.display="block",u.style.top="0px",u.style.left="0px";else{var w=document.createElement("div");w.id=e&&"pasteMsg"==e.type?"___processbar2_paste":"___processbar2",w.className="w2modal",w.style.backgroundColor=y,w.tabIndex=1,w.style.visibility="true"==b?"visible":"hidden",WebSquare.getBody().appendChild(w),w.style.zIndex=1e4}var S=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,_=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,C=document.documentElement.clientWidth!=document.body.clientWidth?document.body.clientWidth:document.documentElement.clientWidth||document.body.clientWidth||0,x=document.documentElement.clientHeight!=document.body.clientHeight?document.body.clientHeight:document.documentElement.clientHeight||document.body.clientHeight||0;if(p){I=S+x/2-parseInt(m)/2,T=_+C/2-parseInt(f)/2;p.style.top=parseInt(I)+"px",p.style.left=parseInt(T)+"px",p.style.zIndex=10001,frames.__processbarIFrame.contentWindow&&null!=frames.__processbarIFrame.contentWindow.onload?frames.__processbarIFrame.contentWindow.onload():null!=frames.__processbarIFrame.init&&frames.__processbarIFrame.init(),p.style.display="block"}else{var I=S+x/2-parseInt(m)/2,T=_+C/2-parseInt(f)/2,k=document.createElement("div");k.id=e&&"pasteMsg"==e.type?"___processbar2_i_paste":"___processbar2_i",k.style.position="absolute",k.style.top=parseInt(I)+"px",k.style.left=parseInt(T)+"px",k.style.overflow="hidden",k.style.zIndex=10001,k.style.visibility="visible",k.style.height=m+"px",k.style.width=f+"px",WebSquare.getBody().appendChild(k);var L="",A="";"html5"!=WebSquare.docType&&(L="frameborder='0'",A=" scrolling='no'"),WebSquare.core._safeInnerHTML(k,"<iframe "+L+A+" id='__processbarIFrame' style='position:absolute; width:"+f+"px; height:"+m+"px; top:0px; left:0px; border:0px;' src='"+g+"' title='"+v+"'></iframe>")}WebSquare.event.addListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.Y.printStackTrace(t)}},setProcessMsgColor:function(){try{var t=WebSquare.layer.colorArr.shift();WebSquare.layer.colorArr.push(t),document.getElementById("processMsgLayer").style.color=t}catch(t){h.Y.printStackTrace(t)}},hideProcessMessage:function(t){try{if(t&&t.scope){var e=WebSquare.layer._getMessageFrame(t.scope);if(null!=e)return!0===t.ajax?e.deleteAjaxMessage():e.hideProcessMessage()}if("wframe"===WebSquare.core.getConfiguration("processMsgType")&&WebSquare.uiplugin&&WebSquare.uiplugin.wframe)WebSquare.uiplugin.wframe._hideProcessMessage(WebSquare.getBody());else{
var i=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_paste"):document.getElementById("___processbar2"),o=t&&"pasteMsg"==t.type?document.getElementById("___processbar2_i_paste"):document.getElementById("___processbar2_i");void 0!==i&&null!=i&&(i.style.zIndex=-1,i.style.display="none",i.tabIndex="-1",i.textContent=""),void 0!==o&&null!=o&&(o.style.zIndex=-1,o.style.display="none");try{var s;if(frames.__processbarIFrame)null!=(s=WebSquare.util.isIEAllVersion()?frames.__processbarIFrame:frames.__processbarIFrame.contentWindow)&&s.processKey&&s.clearInterval(s.processKey)}catch(t){h.Y.printStackTrace(t)}}WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.Y.printStackTrace(t);try{WebSquare.event.removeListener(document.documentElement,"onkeydown",WebSquare.layer.stopEvent)}catch(t){h.Y.printStackTrace(t)}}},_getMessageFrame:function(t){try{for(var e,i=WebSquare.idCache[WebSquare.idToUUID[t]];null!=i&&i!==WebSquare.strictModeFrame;i=WebSquare.idCache[i.parentFrame])if(i.options&&!0===i.options.processMsgFrame){e=i;break}return e}catch(t){h.Y.printStackTrace(t)}},addSubmissionMessage:function(t,e){try{var i,o;if("string"==typeof t?(o=t,i=WebSquare.ModelUtil.getSubmission(t)):o=(i=t).id,i&&i.scope_id){var s=WebSquare.layer._getMessageFrame(i.scope_id);if(null!=s)return s.addSubmissionMessage(i,e)}try{if(i){1==i.useModal&&WebSquare.layer.showModal();var r={};if(i.abortTrigger&&(r.abortTrigger=i.abortTrigger),void 0!==i.useLocale&&(r.useLocale=i.useLocale),i.localeRef&&(r.localeRef=i.localeRef),!1===i.hideProcessMsg)return void WebSquare.layer.showProcessMessage(e,r)}}catch(t){h.Y.printStackTrace(t)}WebSquare.layer.submissionIDQueue.push(o),WebSquare.layer.submissionMessageQueue.push(e),(1==WebSquare.layer.submissionIDQueue.length||WebSquare.layer.submissionMessageQueue[WebSquare.layer.submissionMessageQueue.length-2]!=e)&&WebSquare.layer.showProcessMessage(e,r)}catch(t){WebSquare.layer.hideModal(),h.Y.printStackTrace(t)}},deleteSubmissionMessage:function(t){try{var e;try{if(e=WebSquare.ModelUtil.getSubmission(t)){if(e.scope_id){var i=WebSquare.layer._getMessageFrame(e.scope_id);if(null!=i)return i.deleteSubmissionMessage(t)}if(!1===e.hideProcessMsg)return void(1==e.useModal&&WebSquare.layer.hideModal())}}catch(t){h.Y.printStackTrace(t)}for(var o=-1,s=0;s<WebSquare.layer.submissionIDQueue.length;s++)WebSquare.layer.submissionIDQueue[s]==t&&(o=s);if(o>=0){WebSquare.layer.submissionIDQueue.splice(o,1);var r=WebSquare.layer.submissionMessageQueue.splice(o,1)[0];o==WebSquare.layer.submissionIDQueue.length&&r!=WebSquare.layer.submissionMessageQueue[o-1]&&WebSquare.layer.showProcessMessage(WebSquare.layer.submissionMessageQueue[o-1])}var a=!0;t&&(!(e=WebSquare.ModelUtil.getSubmission(t))||!1!==e.hideProcessMsg&&"false"!==e.hideProcessMsg||(a=!1)),0==WebSquare.layer.submissionIDQueue.length&&a&&(e&&1==e.useModal&&WebSquare.layer.hideModal(),WebSquare.layer.hideProcessMessage())}catch(t){WebSquare.layer.hideModal(),h.Y.printStackTrace(t)}},showModal:function(t){try{if(WebSquare.layer.disabledList.length>0)return void $l("[WebSquare.layer.showModal] Modal already exists, skipping process.");WebSquare.layer.disabledList.push(WebSquare.util.setDisabled({componentId:"",disabled:!0,excludeIdList:t,skipTab:!0})),WebSquare.getBody().showModal(null,t)}catch(t){h.Y.printStackTrace(t)}},hideModal:function(){try{if(WebSquare.layer.disabledList.length>0){var t=WebSquare.layer.disabledList.splice(WebSquare.layer.disabledList.length-1,1)[0];WebSquare.util.setDisabled({componentId:"",disabled:!1,excludeIdList:t.skipComponents,skipTab:!0}),WebSquare.getBody().hideModal()}}catch(t){h.Y.printStackTrace(t)}},_hideFrameModal:function(t){try{if(t){var e=WebSquare.util.getComponentById(t);e&&e.hideFrameModal(t)}}catch(t){h.Y.printStackTrace(t)}},showMessage:function(t){if(requires("uiplugin/floatingLayer/floatingLayer.js"),!t||void 0!==t.id){
var e=t.title||"",i=t.messageBoxType||"info",o=t.messageButtonAlign||"center",s=t.message||"",r=t.contentTitle||"",a=t.id,n=WebSquare.util.getComponentById(a);n&&n.remove();var l=t.height||230,h=t.width||530,d=0,c=0,u=document.body.scrollHeight,p=document.body.scrollWidth;(d=p-(h+(p-h)/2))<0&&(d=0),(c=u-(l+(u-l)/2))<0&&(c=0);var g;g="position:absolute;height:"+l+"px;width:"+h+"px;top:"+c+"px;left:"+d+"px";var m=new WebSquare.uiplugin.floatingLayer(a,{userEvents:["onclose","onlayermove"],bodyComplex:!0,dragAlwaysView:!1,title:e,contentTitle:r,titleClass:"",useResizeDrag:!1,modal:!0,useModal:!0,useAnchor:!1,messageBoxType:i,messageButtonAlign:o,message:s,style:g,useMessage:!0}),f=WebSquare.getBody();m.writeTo(f),m.activate(),m.show()}},alert:function(t,e,i){var o={id:"__floatingMsg",title:i||"Alert",contentTitle:e||"Alert",message:t||"",messageBoxType:"info",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},confirm:function(t,e,i){var o={id:"__floatingMsg",title:i||"Confirm",contentTitle:e||"Confirm",message:t||"",messageBoxType:"confirm",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},cancel:function(t,e,i){var o={id:"__floatingMsg",title:i||"Cancel",contentTitle:e||"Cancel",message:t||"",messageBoxType:"cancel",messageButtonAlign:"center"};top.WebSquare?top.WebSquare.layer.showMessage(o):WebSquare.layer.showMessage(o)},stopEvent:function(t){WebSquare.event.stopEvent(t)}},E={setCookie:function(t,e,i){var o;o="None"===i?t+"="+escape(e)+";SameSite=None;Secure;path=/":"Strict"===i?t+"="+escape(e)+";SameSite=Strict;path=/":t+"="+escape(e)+";path=/",document.cookie=o},setCookieAsync:function(t,e,i){"None"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=None;Secure;path=/';",1):"Strict"===i?window.setTimeout("document.cookie = '"+t+"="+escape(e)+";SameSite=Strict;path=/';",1):window.setTimeout("document.cookie = '"+t+"="+escape(e)+";path=/';",1)},getCookie:function(t){try{for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var o=e[i].split("=");if(t==o[0])return 1==o.length?"":unescape(o[1])}}catch(t){h.Y.printStackTrace(t)}return null},delCookie:function(t){try{document.cookie=t+"=abc; expires=Fri, 31 Dec 1970 23:59:59 GMT;path=/"}catch(t){h.Y.printStackTrace(t)}}},R={effectManager:function(){this.effects=[],this.timeState="stopped";var t=this;this._mouseMoveEvent=function(){t.onDrag.apply(t,arguments)}}};R.effectManager.prototype={add:function(t,e){t.init(e),this.effects.push(t),"stopped"==this.timeState&&(this.timeState="running",this.startTimeout())},remove:function(t){for(var e=[],i=0;i<this.effects.length;i++)this.effects[i]!=t&&e.push(this.effects[i]);this.effects=e,0==this.effects.length&&this.cancelTimeout()},startTimeout:function(){var t=this;this.interval=setInterval((function(){var e=(new Date).getTime();t.notifyLoop(e)}),10)},cancelTimeout:function(){clearInterval(this.interval),this.timeState="stopped"},notifyLoop:function(){for(var t=[],e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&t.push(this.effects[e]);this.effects=t;var i=(new Date).getTime();for(e=0;e<this.effects.length;e++)"finished"!=this.effects[e].state&&this.effects[e].loop(i);0==this.effects.length&&this.cancelTimeout()}},R.effectManager=new R.effectManager,R.defaultOptions={transition:function(t){return-Math.cos(t*Math.PI)/2+.5},duration:1,fps:60,from:0,to:1,delay:0},R.resize=function(t,e){try{this.element=t;var i=a.q.extend({width:null,height:null,fromLeft:!0,fromTop:!0,mode:"delta"},e||{});WebSquare.effect.effectManager.add(this,i)}catch(t){h.Y.printStackTrace(t)}},R.resize.prototype={position:null,init:function(t){this.options=a.q.extend(a.q.extend({},WebSquare.effect.defaultOptions),t||{}),this.currentFrame=0,this.state="stoped",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration;var e=(new Date).getTime();this.startOn+=e,this.finishOn+=e},
loop:function(t){if(t>=this.startOn){if(t>=this.finishOn)return this.render(1),this.finish&&this.finish(),void(this.state="finished");var e=(t-this.startOn)/(this.finishOn-this.startOn),i=Math.round(e*this.options.fps*this.options.duration);i>this.currentFrame&&(this.render(e),this.currentFrame=i)}},render:function(t){"stoped"==this.state&&(this.state="running",this.setup&&this.setup()),"running"==this.state&&(this.options.transition&&(t=this.options.transition(t)),t=t*(this.options.to-this.options.from)+this.options.from,this.update&&this.update(t))},setup:function(){var t=WebSquare.style.getStyle(this.element,"left");t="auto"===t?"0":t;var e=WebSquare.style.getStyle(this.element,"top");e="auto"===e?"0":e,this.originalLeft=parseFloat(t||0),this.originalTop=parseFloat(e||0),this.originalWidth=parseFloat(WebSquare.style.getSize(this.element,"width")||0),this.originalHeight=parseFloat(WebSquare.style.getSize(this.element,"height")||0),this.originalPaddingTop=parseFloat(WebSquare.style.getStyleProperty(this.element,"padding-top")||0),this.originalPaddingBottom=parseFloat(WebSquare.style.getStyleProperty(this.element,"padding-bottom")||0),"absolute"==this.options.mode&&(null!=this.options.width&&(this.options.width=this.options.width-this.originalWidth),null!=this.options.height&&(this.options.height=this.options.height-this.originalHeight))},update:function(t){null!=this.options.width&&(this.element.style.width=this.options.width*t+this.originalWidth+"px",this.options.fromLeft||WebSquare.style.setStyle(this.element,{left:-1*this.options.width*t+this.originalLeft+"px"})),null!=this.options.height&&(this.element.style.height=this.options.height*t+this.originalHeight+"px",this.options.fromTop||WebSquare.style.setStyle(this.element,{top:-1*this.options.height*t+this.originalTop+"px"})),null!=this.options.paddingTop&&(0==this.options.paddingTop?this.element.style.paddingTop=this.originalPaddingBottom-this.originalPaddingTop*t+"px":this.element.style.paddingTop=this.options.paddingTop*t+"px"),null!=this.options.paddingBottom&&(0==this.options.paddingBottom?this.element.style.paddingBottom=this.originalPaddingBottom-this.originalPaddingBottom*t+"px":this.element.style.paddingBottom=this.options.paddingBottom*t+"px")},finish:function(){try{this.options.finish&&this.options.finish.call()}catch(t){h.Y.printStackTrace(t)}}};var N=function(){};N.prototype.construct=function(t,e){this.status=0,this.element=t,this._eventBubbling=e},N.prototype.next=function(){if(0==this.status)return this.status=1,!0},N.prototype.stop=function(){this.status=2},N.prototype.match=function(t,e,i,o){if(2==this.status)return!1;var s=!0;return t&&(" "+this.element.className+" ").indexOf(" "+t.wq_trim()+" ")<0&&(s=!1),e&&this.element.id!=e&&(s=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(s=!1),this._eventBubbling&&o&&this.element.id.indexOf(o)<0&&(s=!1),s},N.prototype.matchSvg=function(t,e,i){if(2==this.status)return!1;var o=!1;return this.element.className.baseVal&&(o=!0,t&&(" "+this.element.className.baseVal+" ").indexOf(" "+t.wq_trim()+" ")<0&&(o=!1),e&&this.element.id!=e&&(o=!1),i&&this.element.tagName.toUpperCase()!=i.toUpperCase()&&(o=!1)),o},N.prototype.getElement=function(){return this.element};var F=function(t,e){this.construct(t),this.upperBoundElem=e||document.body};a.q.extend(F.prototype,N.prototype),F.prototype.next=function(){return 0==this.status?(this.status=1,!0):2!=this.status&&((this.element!==document.documentElement||this.upperBoundElem!==document.body)&&(!(this.element==this.upperBoundElem||!this.element.parentNode)&&(this.element=this.element.parentNode,!0)))};var O=__webpack_require__(2338),B=__webpack_require__(3406),P={CSSStyleSheet:function(){this.rules=[],this.ruleIndex=[],this.styleElement=document.createElement("style"),this.styleElement.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(this.styleElement),
this.sheet=this.styleElement.styleSheet?this.styleElement.styleSheet:this.styleElement.sheet}};P.CSSStyleSheet.addRuleRe1=new RegExp("^\\{?([^\\}])"),P.CSSStyleSheet.addRuleRe2=new RegExp("^\\{[^\\}]*\\}$"),P.CSSStyleSheet.prototype.addRule=function(t,e){try{var i;if(this.sheet)if(this.sheet.addRule){e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1");var o=this.sheet.rules.length;this.sheet.addRule(t,e),i=this.sheet.rules[o],this.ruleIndex[t]=o,this.rules=this.sheet.rules}else if(this.sheet.insertRule){WebSquare.styleSheet.CSSStyleSheet.addRuleRe2.test(e)||(e="{"+e+"}");o=this.sheet.cssRules.length;this.sheet.insertRule(t+" "+e,o),i=this.sheet.cssRules[o],this.ruleIndex[t]=o,0==this.rules.length&&(this.rules=this.sheet.cssRules)}else alert("Cannot create rule");else{e=e.replace(WebSquare.styleSheet.CSSStyleSheet.addRuleRe1,"$1"),this.ruleIndex[t]||(this.ruleIndex[t]=this.rules.length),this.rules[this.ruleIndex[t]]=e;var s="";for(var r in this.ruleIndex)s=r+" {"+this.rules[this.ruleIndex[r]]+"}";this.styleElement.textContent=s}return i}catch(t){h.Y.printStackTrace(t,null,this)}},P.CSSStyleSheet.prototype.changeRule=function(t,e,i){try{var o=this.ruleIndex[t];if(void 0===o)return void this.addRule(t,e+":"+i);if(this.sheet){if(this.rules[o].style){for(var s=/^([^-]*)-([a-z])(.*)$/.exec(e);s;)e=s[1]+s[2].toUpperCase()+s[3],s=/^([^-]*)-([a-z])(.*)$/.exec(e);var r=this;setTimeout((function(){r.rules[o].style[e]=i}),1)}else if(this.sheet.insertRule){var a=this.rules[o];if(a){d=a.cssText;if(n=new RegExp("^[^\\{]*(\\{.*"+e+"\\s*\\:\\s*)([^};]*)([^}]*})").exec(d))n[4]!=i&&(d=n[1]+i+n[3],this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o));else d="{ "+(n=new RegExp("\\{([^}]*)}").exec(d))[1]+"; "+e+": "+i+" }",this.sheet.deleteRule(o),this.sheet.insertRule(t+" "+d,o)}}}else{if(d=this.rules[o]){var n=new RegExp("^(.*"+e+"\\s*:\\s*)([^;]*)(.*)$").exec(d);for(var l in n?n[4]!=i&&(this.rules[o]=n[1]+i+n[3]):this.rules[o]=d+"; "+e+": "+i+";",d="",this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}";this.styleElement.textContent=d}var d="",d="";for(var l in this.ruleIndex)d=l+" {"+this.rules[this.ruleIndex[l]]+"}"}}catch(t){h.Y.printStackTrace(t)}},P.CSSStyleSheet.prototype.getRuleProperty=function(t,e){var i=this.ruleIndex[t];if(void 0!==i)if(this.sheet){if(this.rules[i].style){for(var o=/^([^-]*)-([a-z])(.*)$/.exec(e);o;)e=o[1]+o[2].toUpperCase()+o[3],o=/^([^-]*)-([a-z])(.*)$/.exec(e);return this.rules[i].style[e]}if(this.sheet.insertRule){var s=this.rules[i];if(s)if(a=s.cssText,r=new RegExp("^.*"+e+"\\s*\\:\\s*([^};]*)").exec(a))return r[1]}}else{var r,a=this.rules[i];if(a)if(r=new RegExp("^.*"+e+"s*:s*([^;]*)").exec(a))return r[1]}},P.CSSStyleSheet.prototype.getRule=function(t){var e=this.ruleIndex[t];if(void 0!==e){if(!this.sheet){var i=this.rules[e];return i}if(this.rules[e].style)return this.rules[e].style.cssText;if(this.sheet.insertRule){var o=this.rules[e];if(o)return i=o.cssText}}};var Y={styleSheet:null,initialize:function(){null==WebSquare.cssStyleSheet.styleSheet&&(WebSquare.cssStyleSheet.styleSheet=new WebSquare.styleSheet.CSSStyleSheet)},addRule:function(t,e){try{WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.addRule(t,e)}catch(t){h.Y.printStackTrace(t,null,this)}},changeRule:function(t,e,i){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.changeRule(t,e,i)},getRuleProperty:function(t,e){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRuleProperty(t,e)},getRule:function(t){WebSquare.cssStyleSheet.initialize(),WebSquare.cssStyleSheet.styleSheet.getRule(t)}},V={_initImport:function(){V.gDragManager.event=new a.q.eventControl,this.event=new WebSquare.eventControl,V.gDragManager.mouseMoveListener=function(t){return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.update.apply(t,i)}}(V.gDragManager),V.gDragManager.mouseUpListener=function(t){return function(){
for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.finish.apply(t,i)}}(V.gDragManager),V.gDragManager.init()}};a.q._initImportList.push("dragdrop"),V.gDragManager={},V.gDragManager.init=function(){try{this.dragGhost=null,this.element=null,this.target=null,this.currentFrame=0,this.deltaX=0,this.deltaY=0,this.oldMouseX=-1,this.oldMouseY=-1,this.status="stop",this.options={id:"w2drag",className:"w2drag",contents:"",direction:"x y",resizeDirection:"width height",frameGap:20,delay:0,mode:"move",applyMousePosition:!1,windowDragMove:!1,dropClass:"",onDrop:null,makeGhostLayer:null,useDragLayer:!1,handleStart:null,handleUpdate:null,handleFinish:null,beforeStart:null,afterFinish:null},this.original={position:"",left:0,top:0,width:0,height:0,mouseX:0,mouseY:0}}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.activate=function(t,e,i){try{if(1==WebSquare.util.isTouchDevice()){var o={};!1===i.passive&&(o.passive=!1),WebSquare.event.addListener(document.documentElement,"ontouchmove",this.mouseMoveListener,o),WebSquare.event.addListener(document.documentElement,"ontouchend",this.mouseUpListener,o)}WebSquare.event.addListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.addListener(document.documentElement,"onmouseup",this.mouseUpListener),WebSquare.util.isFF()&&WebSquare.event.preventDefault(t),this.options=a.q.extend(this.options,i||{});var s=WebSquare.style.getAbsoluteLeft(e,!0),r=WebSquare.style.getAbsoluteTop(e,!0),n=this.getDragGhost(),l=WebSquare.style.getAbsoluteTop(n.render,!0),d=WebSquare.style.getAbsoluteLeft(n.render,!0);"none"==n.render.style.display&&(l=0,d=0),null==n.saveOffsetTop&&(n.saveOffsetTop=l),null==n.saveOffsetLeft&&(n.saveOffsetLeft=d),n.saveLeft=s,n.saveTop=r,this.options.makeGhostLayer&&(n=this.options.makeGhostLayer(n,t),"resize"!=this.options.mode&&"resize_right"!=this.options.mode&&"resize_bottom"!=this.options.mode&&"resize_up"!=this.options.mode&&"resize_upRight"!=this.options.mode&&"resize_upLeft"!=this.options.mode&&"resize_bottomLeft"!=this.options.mode&&"resize_left"!=this.options.mode||n.show()),this.options.contents?WebSquare.core._safeInnerHTML(n.render,this.options.contents):this.options.showNoData&&(n.render.textContent=WebSquare.language.getMessage("Drag_no_data")||"no data"),this.dragGhostOffsetTop=0,this.dragGhostOffsetLeft=0,this.options.ghostRightTop&&(this.dragGhostOffsetTop=-55,this.dragGhostOffsetLeft=20),n&&(this.dragGhost=n,this.element=e,this.target=this.dragGhost.render,this.original={left:this.dragGhost.saveOffsetLeft+s,top:this.dragGhost.saveOffsetTop+r,width:this.target.offsetWidth,height:this.target.offsetHeight,mouseX:WebSquare.event.getMouseX(t),mouseY:WebSquare.event.getMouseY(t)},this.options.showGhostOnActivate&&(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.dragGhostOffsetLeft,this.original.mouseY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.dragGhostOffsetLeft,this.original.top+this.dragGhostOffsetTop),n.show())),this.options.windowDragMove&&this.options.mode&&this.target?WebSquare.style.addClass(this.target,"w2drag_resize_window_move"):WebSquare.style.removeClass(this.target,"w2drag_resize_window_move"),WebSquare.getBody().addClass("w2drag_activate")}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.drawSize=function(t,e,i){try{this.target&&(this.options.minWidth&&t<parseInt(this.options.minWidth)-10||this.options.minHeight&&e<=parseInt(this.options.minHeight)-10?this.finish(i):(t>=0&&this.options.resizeDirection.indexOf("width")>-1&&(this.target.style.width=t+"px"),e>=0&&this.options.resizeDirection.indexOf("height")>-1&&(this.target.style.height=e+"px")))}catch(i){h.Y.printStackTrace(i)}},V.gDragManager.drawPosition=function(t,e){try{this.target&&(this.options.direction.indexOf("x")>-1&&(this.target.style.left=(t-WebSquare.style.getAbsoluteLeft(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"),
this.options.direction.indexOf("y")>-1&&(this.target.style.top=(e-WebSquare.style.getAbsoluteTop(document.body,!0))/(WebSquare.BootLoader.fullViewRatio||1)+"px"))}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.start=function(t){try{"stop"==this.status&&(this.status="started",this.options.beforeStart&&this.options.beforeStart(t),this.options.handleStart&&this.options.handleStart(t),this.dragGhost.show(),this.dragGhost.setPosition(this.dragGhost.saveLeft,this.dragGhost.saveTop))}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.update=function(t){try{var e=!1;if(this.target){WebSquare.event.stopEvent(t);var i=WebSquare.event.getMouseX(t),o=WebSquare.event.getMouseY(t);this.oldMouseX==i&&this.oldMouseY==o||(this.oldMouseX=i,this.oldMouseY=o,e=!0),this.deltaX=i-this.original.mouseX,this.deltaY=o-this.original.mouseY}if(e&&this.target&&Math.abs(this.deltaX)+Math.abs(this.deltaY)>this.options.delay&&this.start(t),e&&this.target&&"started"==this.status){if("move"==this.options.mode){if(this.options.applyMousePosition?this.drawPosition(this.original.mouseX+this.deltaX+this.dragGhostOffsetLeft,this.original.mouseY+this.deltaY+this.dragGhostOffsetTop):this.drawPosition(this.original.left+this.deltaX+this.dragGhostOffsetLeft,this.original.top+this.deltaY+this.dragGhostOffsetTop),this.options.component&&"gridView"===this.options.component.options.pluginName){var s=this.options.component,r=s.getElementById(s.id+"_body_tbody"),a=WebSquare.style.getAbsoluteTop(r);if(s.isMobile){var n=s._checkScrollEnd2();r.offsetHeight+a<o&&2!==n?s.moveYScroll(6):a>o&&1!==n&&s.moveYScroll(-6)}else r.offsetHeight+a<o?s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop+=30):a>o&&(s.options.dataDragDropOther||(s.getElementById(s.id+"_scrollY_div").scrollTop-=30))}}else if("resize"==this.options.mode){var l=this.original.width+this.deltaX,d=this.original.height+this.deltaY,c=this.original.left,u=this.original.top;l<0&&(c-=l=Math.abs(l)),d<0&&(u-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_right"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height,c=this.original.left,u=this.original.top;l<0&&(c-=l=Math.abs(l)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_upLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height-this.deltaY,c=this.original.left+this.deltaX,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_upRight"==this.options.mode){l=this.original.width+this.deltaX,d=this.original.height-this.deltaY,c=this.original.left,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_up"==this.options.mode){l=this.original.width,d=this.original.height-this.deltaY,c=this.original.left,u=this.original.top+this.deltaY;d<0&&(u+=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_bottom"==this.options.mode){l=this.original.width,d=this.original.height+this.deltaY,c=this.original.left,u=this.original.top;d<0&&(u-=d=Math.abs(d)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_bottomLeft"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height+this.deltaY,c=this.original.left+this.deltaX,u=this.original.top;l<0&&(c-=l=Math.abs(l)),d<0&&(u-=d=Math.abs(d)),
this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}else if("resize_left"==this.options.mode){l=this.original.width-this.deltaX,d=this.original.height,c=this.original.left+this.deltaX,u=this.original.top;l<0&&(c-=l=Math.abs(l)),this.options.applyMousePosition?this.drawPosition(this.original.mouseX,this.original.mouseY):this.drawPosition(c,u),this.drawSize(l,d,t)}if(this.options.handleUpdate&&this.options.handleUpdate(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.onDragover){var p=null;if(""!=this.options.dragoverClass){var g=null;for(g=t&&"touchmove"===t.type?new WebSquare.targetIterator(document.elementFromPoint(t.changedTouches[0].clientX,t.changedTouches[0].clientY)):this.event.getTargetIterator(t);g.next();)g.match(this.options.dragoverClass)&&(p=g.getElement(),g.stop());g=null}this.options.onDragover(this.element,p,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}}}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.finish=function(t){try{if(WebSquare.util.isTouchDevice()&&(WebSquare.event.removeListener(document.documentElement,"ontouchmove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"ontouchend",this.mouseUpListener)),WebSquare.event.removeListener(document.documentElement,"onmousemove",this.mouseMoveListener),WebSquare.event.removeListener(document.documentElement,"onmouseup",this.mouseUpListener),this.target){if("started"==this.status||"visible"==this.dragGhost.getStyle("visibility")){if(this.options.onDrop){var e=null;if(""!=this.options.dropClass){for(var i=this.event.getTargetIterator(t);i.next();)i.match(this.options.dropClass)&&(e=i.getElement(),i.stop());i=null}this.options.onDrop(this.element,e,this.original.left,this.original.top,this.deltaX,this.deltaY,t)}this.options.handleFinish&&this.options.handleFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.options.afterFinish&&this.options.afterFinish(this.original.left,this.original.top,this.deltaX,this.deltaY,t),this.dragGhost.hide()}this.init(),WebSquare.getBody().removeClass("w2drag_activate")}}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.getDragGhost=function(){try{var t=null,e=WebSquare.getBody();return e&&((t=e.getChild(this.options.id))||(requires("uiplugin/group/group.js"),(t=new WebSquare.uiplugin.group(this.options.id,{className:"w2drag "+this.options.className})).writeTo(e,null,this.parentFrame),t.activate(),t.hide())),t}catch(t){h.Y.printStackTrace(t)}},V.gDragManager.remove=function(t){try{this.finish({});var e=WebSquare.getBody();if(e){var i=e.getChild(t);i&&i.remove()}}catch(t){h.Y.printStackTrace(t)}};var H={styleHash:new Object,zIndexCorrection:{calendar:100,itemTable:200,toolTip:300},camelize:function(t){var e=t.split("-");if(1==e.length)return e[0];for(var i=0==t.indexOf("-")?e[0].charAt(0).toUpperCase()+e[0].substring(1):e[0],o=1,s=e.length;o<s;o++){var r=e[o];i+=r.charAt(0).toUpperCase()+r.substring(1)}return i},setStyle:function(t,e,i){if("object"==(0,g.A)(e))for(var o in e)t.style[WebSquare.style.camelize(o)]=e[o];else if("string"==typeof e){if("opacity"==(o=e.capitalizeStyle())){if(void 0===t.style.opacity){var s=parseFloat(i,10);o="filter",i="alpha(opacity="+100*(s=isNaN(s)?1:s)+")"}}else"float"==o&&(void 0!==t.style.cssFloat?t.style.cssFloat=i:void 0!==t.style.styleFloat&&(t.style.styleFloat=i));t.style[o]=i}}};document.documentElement.currentStyle?H.getStyleProperty=function(t,e){e=e.wq_trim().capitalizeStyle();var i=t.currentStyle[e];return e.toLowerCase().indexOf("color")>-1?y.Z.toHexColor(i):i}:window.getComputedStyle?H.getStyleProperty=function(t,e){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return e.toLowerCase().indexOf("color")>-1?y.Z.toHexColor(i):i}:H.getStyleProperty=function(t,e){var i=t.style[e];return e.toLowerCase().indexOf("color")>-1?y.Z.toHexColor(i):i},H.getStyle=function(t,e){
var i=WebSquare.style.getStyleProperty(t,e);if(!i)if("opacity"==e){var o=(WebSquare.style.getStyleProperty(t,"filter").match(/alpha\(.*\)/gi)||[""])[0].match(/opacity=\d+/gi)||[""];i=parseInt(o[0].substr(8)||"100",10)/100+""}else"float"==e&&(i=WebSquare.style.getStyleProperty(t,"styleFloat"));return i},H.OpacRe1=new RegExp("Gecko"),H.OpacRe2=new RegExp("Konqueror|Safari|KHTML"),H.OpacRe3=new RegExp("MSIE"),H.OpacRe4=new RegExp("alpha\\([^\\)]*\\)","gi"),H.setOpacity=function(t,e){1==e?(WebSquare.style.setStyle(t,{opacity:WebSquare.style.OpacRe1.test(navigator.userAgent)&&!WebSquare.style.OpacRe2.test(navigator.userAgent)?.999999:null}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")})):(e<1e-5&&(e=0),WebSquare.style.setStyle(t,{opacity:e}),WebSquare.style.OpacRe3.test(navigator.userAgent)&&WebSquare.style.setStyle(t,{filter:WebSquare.style.getStyle(t,"filter").replace(WebSquare.style.OpacRe4,"")+"alpha(opacity="+100*e+")"}))},H.extendStyle=function(t,e){var i=new Object;for(var o in t)i[WebSquare.style.camelize(o)]=t[o];for(var o in e){i[WebSquare.style.camelize(o)]=e[o]}return i},H.setSize=function(t,e,i){try{if(!t)return;e=parseInt(e),i=parseInt(i),null!=e&&!isNaN(e)&&e>=0&&(t.style.width=e+"px"),null!=i&&!isNaN(i)&&i>=0&&(t.style.height=i+"px")}catch(t){h.Y.printStackTrace(t)}},H.getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e){var i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+i+o}if("innerwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+s+r}if("outerheight"==e){var a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0;i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;return t.clientHeight+a+n+i+o}if("outerwidth"==e){var l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,c=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0;s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;return t.clientWidth+l+c+s+r}if("outermarginheight"==e){a=parseInt(WebSquare.style.getStyleProperty(t,"border-top-width"))||0,n=parseInt(WebSquare.style.getStyleProperty(t,"border-bottom-width"))||0,i=parseInt(WebSquare.style.getStyleProperty(t,"padding-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"padding-bottom"))||0;var u=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,p=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.clientHeight+a+n+i+o+u+p}if("outermarginwidth"==e){l=parseInt(WebSquare.style.getStyleProperty(t,"border-left-width"))||0,c=parseInt(WebSquare.style.getStyleProperty(t,"border-right-width"))||0,s=parseInt(WebSquare.style.getStyleProperty(t,"padding-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"padding-right"))||0;var g=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,m=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.clientWidth+l+c+s+r+g+m}return void d.v.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.Y.printStackTrace(t)}},H._getSize=function(t,e){try{if(!t)return;if("height"==(e=e.toLowerCase()))return t.clientHeight;if("width"==e)return t.clientWidth;if("innerheight"==e)return t.clientHeight;if("innerwidth"==e)return t.clientWidth;if("outerheight"==e)return t.offsetHeight;if("outerwidth"==e)return t.offsetWidth;if("outermarginheight"==e){
var i=parseInt(WebSquare.style.getStyleProperty(t,"margin-top"))||0,o=parseInt(WebSquare.style.getStyleProperty(t,"margin-bottom"))||0;return t.offsetHeight+i+o}if("outermarginwidth"==e){var s=parseInt(WebSquare.style.getStyleProperty(t,"margin-left"))||0,r=parseInt(WebSquare.style.getStyleProperty(t,"margin-right"))||0;return t.offsetWidth+s+r}return void d.v.printLog("getSize : wrong sizeName["+e+"]")}catch(t){h.Y.printStackTrace(t)}},H.animate=function(t,e,i){if((i=i||{duration:500}).easing=i.easing||"ease",i.startTime=new Date,i.key=i.key||"WebSquare.style.animate_"+a.q.safeRandom(),i.delay=15,"object"==(0,g.A)(e)){t&&t.render&&(t=t.render);for(var o=y.Z.isArray(t)?t:[t],s=[],r=[],n=0;n<o.length;n++){var h=o[n],d={},c=e;for(var u in c)if(d[u]=WebSquare.style.getStyle(h,u),"string"==typeof d[u]){var p=(c[u]+"").wq_trim();p.startsWith("+=")?c[u]=parseFloat(d[u])+parseFloat(p.substr(2)):p.startsWith("-=")&&(c[u]=parseFloat(d[u])-parseFloat(p.substr(2)))}s.push(d),r.push(c)}e=function(t){for(var e=0;e<o.length;e++){var i=o[e],a=s[e],n=r[e];for(var l in n){var h=parseFloat(a[l]),d=a[l].substr((h+"").length),c=h+t*(n[l]-h);WebSquare.style.setStyle(i,l,c+d)}}}}else!i.caller&&t&&(i.caller=t);return l.I.setTimer((function t(){var o=(new Date-i.startTime)/i.duration;o>1&&(o=1);var s=WebSquare.style.cubicBezierAtTime(o,i.easing,i.duration);e.call(i.caller,s),s<1?l.I.setTimer(t,i):i.complete&&i.complete.call(i.caller)}),i),i.key},H.cubicBezierAtTime=function(t,e,i){if("string"==typeof e)switch(e){case"ease":case"default":default:e=[.25,.1,.25,1];break;case"linear":e=[0,0,1,1];break;case"ease-in":e=[.42,0,1,1];break;case"ease-out":e=[0,0,.58,1];break;case"ease-in-out":e=[.42,0,.58,1];break;case"deceleration":e=[0,0,0,1];break;case"acceleration":e=[1,0,1,1]}var o=e[0],s=e[1],r=e[2],a=e[3],n=0,l=0,h=0,d=0,c=0,u=0;function p(t){return((n*t+l)*t+h)*t}function g(t){return(3*n*t+2*l)*t+h}return n=1-(h=3*o)-(l=3*(r-o)-h),d=1-(u=3*s)-(c=3*(a-s)-u),function(t,e){return function(t){return((d*t+c)*t+u)*t}(function(t,e){var i,o,s,r,a,n;function l(t){return t>=0?t:0-t}for(s=t,n=0;n<8;n++){if(l(r=p(s)-t)<e)return s;if(l(a=g(s))<1e-6)break;s-=r/a}if(o=1,s=t,s<(i=0))return i;if(s>o)return o;for(;i<o;){if(l((r=p(s))-t)<e)return s;t>r?i=s:o=s,s=.5*(o-i)+i}return s}(t,e))}(t,function(t){return 1/(200*t)}(i))},H.addClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.wq_trim(),o=i.split(" "),s=0;s<o.length;s++){if((" "+o[s].wq_trim()+" ").indexOf(" "+e+" ")>-1&&s==o.length-1)return}o.length>=1&&(i+=" "),i+=e.wq_trim(),t.className=i}catch(t){h.Y.printStackTrace(t)}},H.removeClass=function(t,e){try{if(!t||!e)return;for(var i=t.className.split(" "),o=[],s=0;s<i.length;s++){var r=i[s].wq_trim();(" "+r+" ").indexOf(" "+e+" ")>-1||r.length>0&&o.push(r)}t.className=o.join(" ")}catch(t){h.Y.printStackTrace(t)}},H.show=function(t,e){try{if(!t)return;void 0===e&&(e="block"),t.style.display=e,t.style.visibility="visible",y.Z.isIE(6)&&WebSquare.style.addClass(t," "),t.setAttribute("aria-hidden","false"),WebSquare.layer.disabledList.length>0&&WebSquare.style.addClass(t,"w2modal_popupLayer")}catch(t){h.Y.printStackTrace(t)}},H.hide=function(t){try{if(!t)return;t.style.display="none",t.style.visibility="hidden",t.setAttribute("aria-hidden","true"),WebSquare.style.removeClass(t,"w2modal_popupLayer")}catch(t){h.Y.printStackTrace(t)}},H.getAbsoluteTop=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){var o=t.getBoundingClientRect().top,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientTop||a.clientTop||0,d=n.pageYOffset||r.scrollTop;(y.Z.isIE(9)||y.Z.isIE(10))&&(d=r.scrollTop);var c=a.getBoundingClientRect();i=(o+d-l)/(y.Z.isIE("6")||y.Z.isIE("7")?(c.bottom-c.top)/a.offsetHeight:1),e||(i/=WebSquare.style.getScale())}else{for(var u=t,p=t,g=0;"BODY"!=p.tagName;){var m=y.Z.parseFloat(y.Z.getStyleProperty(p,"border-top-width"),0);y.Z.isOpera()&&(m=0);o=p.offsetTop
;if("fixed"==y.Z.getStyleProperty(p,"position")){if(o=y.Z.parseFloat(y.Z.getStyleProperty(p,"top"),0),!y.Z.isIE("6")){g+=o+m-p.scrollTop+m+(window.scrollY||document.documentElement.scrollTop);break}}else"static"!=y.Z.getStyleProperty(p,"position")||u==p?g+=o+m-p.scrollTop:g-=p.scrollTop;p=p.parentNode}i=g}}catch(t){h.Y.printStackTrace(t)}return i},H.getAbsoluteLeft=function(t,e){var i=0;try{if(!t)return 0;if(null!=t.getBoundingClientRect){var o=t.getBoundingClientRect().left,s=t.ownerDocument,r=s.documentElement,a=s.body,n=s.window===s?s:9===s.nodeType?s.defaultView||s.parentWindow:null,l=r.clientLeft||a.clientLeft||0,d=n.pageXOffset||r.scrollLeft;(y.Z.isIE(9)||y.Z.isIE(10))&&(d=r.scrollLeft);var c=a.getBoundingClientRect();i=(o+d-l)/(y.Z.isIE("6")||y.Z.isIE("7")?(c.right-c.left)/a.offsetWidth:1),e||(i/=WebSquare.style.getScale())}else{for(var u=0,p=t,g=t;"BODY"!=p.tagName;){var m=y.Z.parseFloat(y.Z.getStyleProperty(p,"border-left-width"),0);y.Z.isOpera()&&(m=0);o=p.offsetLeft;if("fixed"==y.Z.getStyleProperty(p,"position")){if("number"==typeof y.Z.getStyleProperty(p,"left")&&(o=y.Z.parseFloat(y.Z.getStyleProperty(p,"left"),0)),!y.Z.isIE("6")){u+=o+m-p.scrollLeft+(window.scrollX||document.documentElement.scrollLeft);break}}else"static"!=y.Z.getStyleProperty(p,"position")||g==p?u+=o+m-p.scrollLeft:u-=p.scrollLeft;p=p.parentNode}i=u}}catch(t){h.Y.printStackTrace(t)}return i},H.getRelativeTop=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteTop(t)-WebSquare.style.getAbsoluteTop(e)}catch(t){h.Y.printStackTrace(t)}return i},H.getRelativeLeft=function(t,e){var i=0;try{i=WebSquare.style.getAbsoluteLeft(t)-WebSquare.style.getAbsoluteLeft(e)}catch(t){h.Y.printStackTrace(t)}return i},H.adjustZIndex=function(t,e,i){try{for(var o=WebSquare.idCache[t],s=WebSquare.idCache[e],r=WebSquare.style.getComputedStyle(s.render,"zIndex"),a=r,n=o.render;n&&n!==document.documentElement;n=n.parentNode){var l=WebSquare.style.getComputedStyle(n,"zIndex");!isNaN(l)&&a<l&&(a=parseInt(l,10)+this.zIndexCorrection[i])}r!=a&&WebSquare.style.setStyle(s.render,"zIndex",a)}catch(t){h.Y.printStackTrace(t,null,this)}},H.getComputedStyle=function(t,e){var i=window.getComputedStyle,o=i?i(t):t.currentStyle,s=e?e.replace(/-(\w)/gi,(function(t,e){return e.toUpperCase()})):"";return o&&!s?o:o&&(o[s]||window.getPropertyValue&&window.getPropertyValue(s))||""},H.toJSON=function(t){var e=document.createElement("a");e.style.cssText=t;var i=a.q.extend({},e.style);return e=null,i},H.getScale=function(){try{var t=1;if(y.Z.isIE("6 7 8"))t=1;else if(null!=WebSquare.BootLoader.fullViewRatio)t=WebSquare.BootLoader.fullViewRatio;else if(document.body.style.transform)try{t=document.body.style.transform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(document.body.style.msTransform)try{t=document.body.style.msTransform.split("scale")[1].slice(1,-1)}catch(e){t=1}else if(y.Z.isIE(9))for(var e=self,i=0;i<1e3;i++)try{if(e.parent===e)break;(0,g.A)(e.parent.WebSquare),(e=e.parent).document.body.style.msTransform&&(t=e.document.body.style.msTransform.split("scale")[1].slice(1,-1))}catch(e){t=1;break}return parseFloat(t)}catch(t){return h.Y.printStackTrace(t,null,this),1}};var j=__webpack_require__(4860),z={channels:{},_defaultChannelId:"_wq_channel_default",add:function(t,e,i){try{if(!e||"function"!=typeof e.getSrc)return;var o=e.getSrc();void 0!==i&&null!=i||(i={});var s=v.r.getNodesByTagName(t,"subscribers",l.I._XML_NAMESPACE.W2)[0];if(s&&(s=s.E),s)for(var r=0;r<s.length;r++){var a=s[r];if(a.A&&a.A.id&&a.A.channelId&&a.A.onmessage){var n=a.A.id,c={channelId:a.A.channelId,handler:a.A.onmessage,scope_obj:e,id:n,url:o};new z.Subscriber(c)}else d.v.printLog("subscriber error : Required property is not defined. "+o)}var u=v.r.getNodesByTagName(t,"publishers",l.I._XML_NAMESPACE.W2)[0];if(u&&(u=u.E),u)for(r=0;r<u.length;r++){n=u[r].A.id;var p={channelId:u[r].A.channelId,scope_obj:e,id:n};new z.Publisher(p)}}catch(t){h.Y.printStackTrace(t)}},_getInfo:function(t,e){try{
var i=[],o=this.channels[t];if(!o||!o[e])return i;for(var s=0;s<o[e].length;s++){var r=o[e][s],n=a.q.idCache[a.q.idToUUID[r]];i.push(n)}return i}catch(t){h.Y.printStackTrace(t)}},_getAllInfos:function(){try{var t=[];for(var e in this.channels){var i=this.channels[e];if(i&&i[type])for(var o=0;o<i[type].length;o++){var s=i[type][o],r=a.q.idCache[a.q.idToUUID[s]];t.push(r)}}return t}catch(t){h.Y.printStackTrace(t)}},getSubscribers:function(t){return this._getInfo(t,"subscriber")},getAllSubscribers:function(){return this._getAllInfos(channelId,"subscriber")},getPublishers:function(t){return this._getInfo(t,"publisher")},getAllPublishers:function(){return this._getAllInfos(channelId,"publisher")},_addChannelItem:function(t,e,i){try{var o=t||this._defaultChannelId;this.channels[o]||(this.channels[o]={subscriber:[],publisher:[]}),this.channels[o][e].push(i)}catch(t){h.Y.printStackTrace(t)}},_addPublisher:function(t,e){try{this._addChannelItem(t,"publisher",e)}catch(t){h.Y.printStackTrace(t)}},_addSubscriber:function(t,e){try{this._addChannelItem(t,"subscriber",e)}catch(t){h.Y.printStackTrace(t)}},_removeChannelItem:function(t,e,i){try{var o=t||this._defaultChannelId;if(!this.channels[o])return;for(var s=this.channels[o][e],r=s.length-1;r>=0;r--)if(s[r]===i){s.splice(r,1);break}}catch(t){h.Y.printStackTrace(t)}},_removePublisher:function(t,e){try{this._removeChannelItem(t,"publisher",e)}catch(t){h.Y.printStackTrace(t)}},_removeSubscriber:function(t,e){try{this._removeChannelItem(t,"subscriber",e)}catch(t){h.Y.printStackTrace(t)}},_initCommon:function(t,e){try{if(!t)return;if(e.uuid=a.q.UUIDPrefix+"_"+a.q.UUID++,e.scope_obj=t.scope_obj,t.id){e.org_id=t.id;var i=t.scope_obj?t.scope_obj.id:"";e.id=(i?i+"_":"")+t.id}else e.id=e.uuid,e.org_id=e.uuid;if(null!=window[a.q.noConflict].comp[e.id]){var o=B.B.getMessage("E_comp_duplicated_Msg",e.id)||"id["+e.id+"] is duplicated. Check the source code.";return d.v.printLog(o),void alert(o)}window[a.q.noConflict].comp[e.id]=e,e.scope_obj&&(e.scope_obj.scope[e.org_id]=e),a.q.idCache[e.uuid]=e,a.q.idToUUID[e.id]=e.uuid,e._bCompleted=!0}catch(t){h.Y.printStackTrace(t)}},Publisher:function(t){this._init(t)}};z.Publisher.prototype._init=function(t){try{z._initCommon(t,this),this.channelId=t.channelId,!0===this._bCompleted&&z._addPublisher(this.channelId,this.id),this.scope_obj&&this.scope_obj.childAllControlList.push(this.uuid)}catch(t){h.Y.printStackTrace(t)}},z.Publisher.prototype.postMessage=function(t){if("string"==typeof t)try{for(var e=z.getSubscribers(this.channelId),i=0;i<e.length;i++){var o=e[i],s=o.handler,r="";o.scope_obj&&(r=o.scope_obj.id),y.Z.getGlobalFunction(s,r).call(o,t,this)}}catch(t){h.Y.printStackTrace(t)}},z.Publisher.prototype.finalize=function(){z._removePublisher(this.channelId,this.id)},z.Subscriber=function(t){this._init(t)},z.Subscriber.prototype._init=function(t){try{z._initCommon(t,this),this.channelId=t.channelId,this.handler=t.handler,this.src=t.url,!0===this._bCompleted&&z._addSubscriber(this.channelId,this.id),this.scope_obj&&this.scope_obj.childAllControlList.push(this.uuid)}catch(t){h.Y.printStackTrace(t)}},z.Subscriber.prototype.subscribe=function(t){z._addSubscriber(t,this.id)},z.Subscriber.prototype.unsubscribe=function(t){z._removeSubscriber(t,this.id)},z.Subscriber.prototype.finalize=function(){z._removeSubscriber(this.channelId,this.id)};var G=function(){};G.prototype.parse=function(){var t=(0,m.A)(b().mark((function t(e,i,o,s){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,!0!==s&&this.parseConfig(e),this.parseCSS(e,i,o),t.next=6,this.parseUDC2(e,o);case 6:return o||(this.parseBuildDate(e),this.parseTitle(e)),!0!==s&&this.parseMeta(e),this.parseModels(e,o),t.next=11,this.parseScript(e,o);case 11:return r=t.sent,null!=o?this.parseDataCollections(e,o):this.parseDataCollections(e),this.parseMessageBroker(e,o),t.abrupt("return",r);case 17:t.prev=17,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 20:case"end":return t.stop()}
}),t,this,[[1,17]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),G.prototype.parseUDC2Sync=function(t,e,i){try{this.parseCSS(t,e,i),this.parseModels(t,i);var o=this.parseScript(t,i);return null!=i?this.parseDataCollections(t,i):this.parseDataCollections(t),this.parseMessageBroker(t,i),o}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseDataCollection=function(t,e,i){try{var o={id:WebSquare.jsonUtil.getAttribute(t,"id"),elementType:"JSON",type:e,option:{}},s=WebSquare.jsonUtil.getAttributesObject(t);for(var r in s)s.hasOwnProperty(r)&&(o.option[r]=s[r]);var a="";switch(e){case"dataList":a="column";break;case"dataMap":a="key"}if("dataList"===e||"dataMap"===e){o[a+"Info"]=[];for(var n=WebSquare.jsonUtil.getNodesByTagName(t,a+"Info",WebSquare.core._XML_NAMESPACE.W2),l=0;l<n.length;l++)for(var d=n[l],c=WebSquare.jsonUtil.getNodesByTagName(d,a,WebSquare.core._XML_NAMESPACE.W2),u=0;u<c.length;u++){var p=c[u];o[a+"Info"].push(this.parseDataCollectionInfo(p))}var g=WebSquare.jsonUtil.getNodesByTagName(t,"data",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<g.length;l++){var m=g[l];if(WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(m,"use"))){if("dataList"===e){S=[];var f=WebSquare.jsonUtil.getNodesByTagName(m,"row",WebSquare.core._XML_NAMESPACE.W2);for(u=0;u<f.length;u++){for(var b=f[u],y={},v=WebSquare.jsonUtil.getChildNodes(b),w=0;w<v.length;w++)null==v[w].E?y[v[w].N]="":y[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim();S.push(y)}}else{var S={};for(v=WebSquare.jsonUtil.getChildNodes(m),w=0;w<v.length;w++)null==v[w].E?S[v[w].N]="":S[v[w].N]=null!=v[w].E[0].cdata?v[w].E[0].cdata:v[w].E[0].text.wq_trim()}o.option.useData=!0,o.data=S}}}else if("linkedDataList"===e){var _=WebSquare.jsonUtil.getNodesByTagName(t,"condition",WebSquare.core._XML_NAMESPACE.W2);for(l=0;l<_.length;l++){d=_[l];var C=WebSquare.jsonUtil.getAttribute(d,"type"),x=WebSquare.jsonUtil.getChildNodes(d);if(x.length>0){var I="string"==typeof x[0].cdata?x[0].cdata.wq_trim():"";I&&"filter"===C?o.option.filterCondition=I:I&&"sort"===C&&(o.option.sortCondition=I)}}}o&&o.option&&(o.option.xmlEvents=WebSquare.Parser.parseEvent(t)),new WebSquare.DataCollection[e](null,null,o,e,i)}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseDataCollectionInfo=function(t){try{var e={},i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseMeta=function(t){var e=["meta","Meta","META"],i=document.getElementsByTagName("head")[0],o=i.getElementsByTagName("meta"),s=[],r=WebSquare.jsonUtil.getNodesByTagName(t,"screen",WebSquare.core._XML_NAMESPACE.W2);if(r&&r.length>0){var a=document.createElement("meta");a.name="viewport",a.content="width=device-width initial-scale=1.0",i.appendChild(a)}for(var n=[],l=0;l<e.length;l++){(h=WebSquare.jsonUtil.getNodesByTagName(t,e[l],WebSquare.core._XML_NAMESPACE.XHTML))&&h.length>0&&n.push(h)}if(0!==n.length){for(l=0;l<o.length;l++){((p=o[l].getAttribute("http-equiv"))||(p=o[l].getAttribute("name")))&&s.push(p)}for(l=0;l<n.length;l++){var h;if(null!=(h=n[l]))for(var d=0;d<h.length;d++){for(var c=WebSquare.jsonUtil.getAttributes(h[d]),u=0;u<c.length;u++){var p;if("http-equiv"===c[u])p=WebSquare.jsonUtil.getAttribute(h[d],c[u]);else{if("name"!==c[u])continue;p=WebSquare.jsonUtil.getAttribute(h[d],c[u])}for(var g=0;g<s.length;g++)if(s[g]===p){for(var m=0;m<o.length;m++)if(o[m].getAttribute("http-equiv")==p||o[m].getAttribute("name")==p){i.removeChild(o[m]);break}break}break}for(var f=document.createElement("meta"),b=0;b<c.length;b++)f.setAttribute(c[b],WebSquare.jsonUtil.getAttribute(h[d],c[b]));i.appendChild(f)}}}},G.prototype.parsePageInheritBefore=function(t,e,i){try{this.preParse(t),this.parseMeta(t),this.parseModels(t,i),null!=i?this.parseDataCollections(t,i):this.parseDataCollections(t)}catch(t){h.Y.printStackTrace(t)}},G.prototype.parsePageInheritAfter=function(){var t=(0,m.A)(b().mark((function t(e,i,o){var s
;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,this.parseCSS(e,i,o,WebSquare.WebSquaredoc.cssList[0]),t.next=5,this.parseScript(e,o,!0);case 5:return s=t.sent,t.abrupt("return",s);case 9:t.prev=9,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));return function(e,i,o){return t.apply(this,arguments)}}(),G.prototype.preParse=function(t,e){try{if(WebSquare.core.browserCheck.ieAllVersion&&WebSquare.BootLoader.useActiveXObject){var i=WebSquare.core.getNamespaces(t),o="";for(var s in i)""!=s&&(o+="xmlns:"+s+'="'+i[s]+'" ');t.setProperty("SelectionLanguage","XPath"),t.setProperty("SelectionNamespaces",o)}!1!==e&&this.parseConfig(t)}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseCSS=function(t,e,i,o){try{var s=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@value");if("false"!=WebSquare.core.getConfiguration("/WebSquare/stylesheet/@enable")&&!e&&!i&&!WebSquare.styleSheetEarlyImport){null!=s&&""!=s||(s="link"==WebSquare.core.getConfiguration("/WebSquare/stylesheet/@import")?"stylesheet_ext.css":"stylesheet.css");var r=WebSquare.BootLoader.inquiresPath("skin/");WebSquare.skin.addImport(WebSquare.baseThemeURI+r+s),WebSquare.cssManager.executeImport()}this.importCSS(t,i);var a="";if(i&&i.options.cssFunction&&!i.options.strictFrame&&(a=WebSquare.util.getGlobalFunction(i.options.cssFunction,i.id)),i&&!i.options.strictFrame){if("function"==typeof a){for(var n=[],l=0;l<WebSquare.cssManager.externalCSSLink.length;l++)n.push(WebSquare.cssManager.externalCSSLink[l].href);if(!0===a(i.id,n)){for(l=0;l<n.length;l++)for(var d in WebSquare.skin.skinTag)if(WebSquare.util._getAbsolutePath(n[l])==WebSquare.skin.skinTag[d]){WebSquare.skin.skinTag.splice(d,1);break}WebSquare.cssManager.externalCSSLink=[]}}i.frameDoc.cssList=i.frameDoc.cssList.concat(WebSquare.cssManager.executeImport(o))}else WebSquare.WebSquaredoc.cssList=WebSquare.WebSquaredoc.cssList.concat(WebSquare.cssManager.executeImport(o))}catch(t){h.Y.printStackTrace(t)}},G.prototype.importCSS=function(t,e){try{for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"style",WebSquare.core._XML_NAMESPACE.XHTML),o="",s=0;s<i.length;s++){var r=i[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.element))for(var a=WebSquare.jsonUtil.getChildNodes(r),n=0;n<a.length;n++){var l=a[n];(WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.text)||WebSquare.jsonUtil.matchType(l,WebSquare.Elem.type.cdata))&&(o+=l.text||l.cdata)}}""!=o.wq_trim()&&WebSquare.cssManager.addInternalCSS(o);for(a=WebSquare.jsonUtil.getChildNodes(t),s=0;s<a.length;s++){r=a[s];if(WebSquare.jsonUtil.matchType(r,WebSquare.Elem.type.instruction)&&"xml-stylesheet"===r.N){var d=r.instruction.wq_replaceAll("=","").split('"');d.pop();var c={};for(n=0;n<d.length;n+=2)c[d[n].wq_trim()]=d[n+1];if(c.href){var u={frameObj:e,msaName:c.msaName},p=WebSquare.core._getMsaSrc(c.href,u);c.href=WebSquare.util.getAbsolutePath(p)}null==c.type&&(c.type="text/css"),null==c.rel&&(c.rel="stylesheet"),WebSquare.skin.addImport(c,!0,{scopeObj:e})}}}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"config",WebSquare.core._XML_NAMESPACE.W2);1===e.length&&WebSquare.WebSquaredoc.mergeConfig(e[0])}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseBuildDate=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"buildDate",WebSquare.core._XML_NAMESPACE.W2);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);i.length>0&&(WebSquare.buildDate=i[0].text)}else WebSquare.buildDate="N/A"}catch(t){WebSquare.buildDate="N/A",h.Y.printStackTrace(t)}},G.prototype.parseTitle=function(t){try{var e=WebSquare.jsonUtil.getNodesByTagName(t,"title",WebSquare.core._XML_NAMESPACE.XHTML);if(1===e.length){var i=WebSquare.jsonUtil.getChildNodes(e[0]);WebSquare.docTitle=document.title=i[0].text}}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseModels=function(t,e){try{
for(var i=WebSquare.jsonUtil.getNodesByTagName(t,"model",WebSquare.core._XML_NAMESPACE.XFORMS),o=0;o<i.length;++o)if(e){if(e.frameDoc&&!e.options.strictFrame)e.frameDoc.models.push(this.parseModel(i[o],e));else if(!0===e.options.strictFrame){var s=this.parseModel(i[o],e),r=WebSquare.WebSquaredoc.models[o];if(r instanceof WebSquare.Model){for(o=0;o<s.binds.length;o++)r.binds.push(s.binds[o]);for(o=0;o<s.submissions.length;o++)r.submissions.push(s.submissions[o]);for(o=0;o<s.workflows.length;o++)r.workflows.push(s.workflows[o]);if(s.instances.length>0)if(r.instances.length>0)for(o=0;o<s.instances.length;o++)for(var a=s.instances[o].document,n=r.instances[0].document.childNodes,l=0;l<n.length;l++)a.appendChild(n[l].cloneNode(!0));else r.instances=s.instances.slice(0)}else WebSquare.WebSquaredoc.models[o]=s}}else WebSquare.WebSquaredoc.models.push(this.parseModel(i[o]))}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseDataCollections=function(t,e){var i=WebSquare.jsonUtil.getNodesByTagName(t,"dataCollection",WebSquare.core._XML_NAMESPACE.W2)[0];if(i){this.parseDataCollectionAttribute(i);for(var o=e?e.uuid:null,s=WebSquare.jsonUtil.getChildNodes(i),r=0;r<s.length;r++){var a=s[r];a.T==WebSquare.Elem.type.element&&this.parseDataCollection(a,WebSquare.jsonUtil.dropNS(a.N),o)}}},G.prototype.parseModel=function(t,e){try{var i=this.parseInstances(t),o=this.parseBinds(t),s=this.parseSubmissions(t,e),r=this.parseWorkflows(t,e);return new WebSquare.Model(t,i,o,s,r)}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseDataCollectionAttribute=function(t){try{if(WebSquare.DataCollection.options.useConfig){var e=WebSquare.core.getConfig("dataCollection");WebSquare.DataCollection.options=a.q.extendKeepingType(WebSquare.DataCollection.options,e)}var i=WebSquare.jsonUtil.getAttributesObject(t);for(var o in i)i.hasOwnProperty(o)&&(WebSquare.nodeValueDeprecated,WebSquare.DataCollection.api.setOption(o,i[o]))}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseInstances=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"instance",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;o++)i.push(this.parseInstance(e[o]._element._xml));return i}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseInstance=function(t){try{return WebSquare.Parser.WebSquareParser.prototype.parseInstance.call(this,t)}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseBinds=function(t){try{for(var e=WebSquare.Elem.api.getElementsByTagName(t,"bind",WebSquare.core._XML_NAMESPACE.XFORMS),i=[],o=0;o<e.length;++o)i.push(this.parseBind(e[o]));return i}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseBind=function(t){try{return new WebSquare.Model.Bind(t,"nodeset",t.getAttribute("nodeset"),null,t.getAttribute("id"))}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseSubmissions=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"submission",WebSquare.core._XML_NAMESPACE.XFORMS),o=[],s=0;s<i.length;s++)o.push(this.parseSubmission(i[s],t,e));return o}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseSubmission=function(t,e,i){try{
var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"method","")||WebSquare.core.getConfiguration("/WebSquare/submission/method/@value")||"POST",r=WebSquare.WebSquareparser.getAttribute(t,"action","")||WebSquare.core.getConfiguration("/WebSquare/submission/action/@value"),a=WebSquare.WebSquareparser.getAttribute(t,"mode","")||WebSquare.core.getConfiguration("/WebSquare/submission/mode/@value")||"asynchronous",n=WebSquare.WebSquareparser.getAttribute(t,"mediatype","")||WebSquare.core.getConfiguration("/WebSquare/submission/mediatype/@value"),l=WebSquare.WebSquareparser.getAttribute(t,"encoding","")||WebSquare.core.getConfiguration("/WebSquare/submission/encoding/@value")||"UTF-8",d=WebSquare.WebSquareparser.getAttribute(t,"ref"),c=WebSquare.WebSquareparser.getAttribute(t,"target"),u=WebSquare.WebSquareparser.getAttribute(t,"replace"),p=WebSquare.WebSquareparser.getAttribute(t,"instance"),g=WebSquare.WebSquareparser.getAttribute(t,"preSubmitFunction","")||WebSquare.core.getConfiguration("/WebSquare/submission/preSubmitFunction/@value")||"",m=WebSquare.WebSquareparser.getAttribute(t,"customHandler"),f=WebSquare.WebSquareparser.getAttribute(t,"errorHandler");""==f&&(f=WebSquare.core.getConfiguration("/WebSquare/submission/errorHandler/@value"));var b=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==b&&(b=WebSquare.core.getConfiguration("/WebSquare/submission/processMsg/@value"));var y="true"===this.getAttribute(t,"abortTrigger")||"false"!==this.getAttribute(t,"abortTrigger")&&"true"===WebSquare.core.getConfiguration("/WebSquare/submission/abortTrigger/@value"),v=WebSquare.WebSquareparser.getAttribute(t,"soapaction",""),w="true"===WebSquare.WebSquareparser.getAttribute(t,"useModal");""==n&&("post"!=s&&"POST"!=s||(n="application/xml"));var S=WebSquare.Parser.parseEvent(t,i)||[],_=this.getAttribute(t,"timeout","")||WebSquare.core.getConfiguration("/WebSquare/submission/timeout/@value"),C=this.getAttribute(t,"singleMode")||!1,x="false"!==this.getAttribute(t,"hideProcessMsg")&&("true"===this.getAttribute(t,"hideProcessMsg")||"false"!==WebSquare.core.getConfiguration("/WebSquare/submission/hideProcessMsg/@value")),I="true"===this.getAttribute(t,"withCredentials"),T=WebSquare.WebSquareparser.getAttribute(t,"webtopRef",""),k=WebSquare.WebSquareparser.getAttribute(t,"userData1",""),L=WebSquare.WebSquareparser.getAttribute(t,"userData2",""),A=o,D=null,W="";i&&i.options&&i.options.scope&&(o=(W=i.id+"_")+A,D=i.id);var q=WebSquare.WebSquareparser.getAttribute(t,"ev:submit"),M=WebSquare.WebSquareparser.getAttribute(t,"ev:submitdone"),E=WebSquare.WebSquareparser.getAttribute(t,"ev:submiterror"),R=WebSquare.WebSquareparser.getAttribute(t,"ev:submittimeout"),N={};q&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit","script",{handler:W+q})),N.submitHandler=q),M&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-done","script",{handler:W+M})),N.submitDoneHandler=M),E&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-error","script",{handler:W+E})),N.submitErrorHandler=E),R&&(S.push(new WebSquare.Events.XmlEvent("xforms-submit-timeout","script",{handler:W+R})),N.submitTimeoutHandler=R),N.parentElement=e,N.element=t,N.id=o,N.org_id=A,N.method=s,N.action=r,N.mode=a,N.bind=null,N.mediatype=n,N.encoding=l,N.ref=d,N.target=c,N.replace=u,N.instance=p,N.customHandler=m,N.errorHandler=f,N.soapaction=v,N.processMsg=b,N.xmlEvents=S,N.timeout=_,N.singleMode=C,N.hideProcessMsg=x,N.abortTrigger=y,N.preSubmitFunction=g,N.scope_id=D,N.withCredentials=I,N.useModal=w,N.webtopRef=T,N.userData1=k,N.userData2=L,N.msaName=WebSquare.WebSquareparser.getAttribute(t,"msaName");var F=new WebSquare.Model.Submission(N);return i&&i.options&&i.options.scope&&(i.scope[A]=F),WebSquare.core.useSubmissionGlobal&&(window[F.id]=F),F}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseScript=function(){var t=(0,m.A)(b().mark((function t(e,i,o,s){var r,a,n,l,d,c,u,p,g,m,f,y,v,w,S,_,C,x,I,T,k,L,A,D,W,q,M,E,R,N,F
;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,r=[],s||(i?i.options&&i.options.strictFrame?WebSquare.scriptSection="":i.frameDoc&&(i.frameDoc.scriptSection=""):WebSquare.scriptSection="",i?i.options&&i.options.initScript&&(a=i.options.initScript.toString(),i.options.strictFrame?WebSquare.scriptSection+=a:"executed"===WebSquare.scriptSectionExcuteFlag&&(i.frameDoc.scriptSection+=a)):"true"==WebSquare.core.getConfiguration("/WebSquare/initScript/@value")&&WebSquare.w2xPath!==WebSquare.net.getBlankXML()&&(WebSquare.scriptSection+=WebSquare.core.getConfiguration("/WebSquare/initScript"))),n=i&&i.options.src?i.getSrc():WebSquare.w2xPath,1!==(l=WebSquare.jsonUtil.getNodesByTagName(e,"head",WebSquare.core._XML_NAMESPACE.XHTML)).length){t.next=66;break}d=l[0],c=i&&i._isUDC2,u=0;case 10:if(!(d.E&&u<d.E.length)){t.next=63;break}if(p=d.E[u],!WebSquare.jsonUtil.matchTagName(p,"script",WebSquare.core._XML_NAMESPACE.XHTML)){t.next=59;break}if(g=WebSquare.jsonUtil.getAttribute(p,"src"),m=WebSquare.util.getBoolean(WebSquare.jsonUtil.getAttribute(p,"scopeExternal"))||i&&i.options.scopeExternal,f=WebSquare.jsonUtil.getAttribute(p,"scopeVariable")||"",null==g||""==g){t.next=25;break}y=WebSquare.jsonUtil.getAttribute(p,"cache"),v=WebSquare.jsonUtil.getAttribute(p,"defer"),w=WebSquare.jsonUtil.getAttribute(p,"msaName"),S=WebSquare.jsonUtil.getAttribute(p,"wpack"),(_=WebSquare.Parser.parseExternalScript({uri:g,cache:y,lazy:v,frameObj:i,pageInherit:o,scopeExternal:m,scopeVariable:f,msaName:w,wpack:S}))instanceof window.Promise&&r.push(_),t.next=57;break;case 25:if(!s){t.next=27;break}return t.abrupt("continue",60);case 27:if(C=WebSquare.jsonUtil.getAttribute(p,"loadAt"),x="false",I=-1,"string"!=typeof C||""==C){t.next=53;break}C=C.wq_trim().toUpperCase(),t.t0=C,t.next="WEBSQUARE_START"===t.t0||"START"===t.t0?35:"ENGINE_LOAD"===t.t0||"ENGINE"===t.t0?37:"RESOURCE_LOAD"===t.t0||"RESOURCE"===t.t0?39:"CREATE_COMPONENT"===t.t0||"CREATE"===t.t0?41:"RENDER_DOM"===t.t0||"RENDER"===t.t0?43:"ADJUST_COMPONENT"===t.t0||"ADJUST"===t.t0?45:"BIND_EVENT"===t.t0||"EVENT"===t.t0?47:"EXECUTE_SCRIPT"===t.t0||"EXECUTE"===t.t0?49:51;break;case 35:return I=1,t.abrupt("break",53);case 37:return I=2,t.abrupt("break",53);case 39:return I=3,t.abrupt("break",53);case 41:return I=4,t.abrupt("break",53);case 43:return I=5,t.abrupt("break",53);case 45:return I=6,t.abrupt("break",53);case 47:return I=7,t.abrupt("break",53);case 49:case 51:return I=8,t.abrupt("break",53);case 53:for("false"==x||c?(I=!0===WebSquare._async?4:3,"executed"===WebSquare.scriptSectionExcuteFlag&&(T=WebSquare.core.scriptPrecedence,WebSquare.core.scriptPrecedence=WebSquare.util.getBoolean(WebSquare.core.getConfiguration("/WebSquare/scriptPrecedence/@value")),T!==WebSquare.core.scriptPrecedence&&(k=i&&i.options?i.getSrc():WebSquare.w2xPath,WebSquare.logger.printLog('parser : "scriptPrecedence" turned on. ['+k+"]")))):WebSquare.core.scriptPrecedence,L=I>2&&I<8,A=WebSquare.jsonUtil.getChildNodes(p),D=0;D<A.length;D++)(W=A[D]).T!==WebSquare.Elem.type.text&&W.T!==WebSquare.Elem.type.cdata||(q=W.text||W.cdata,i?(i.options&&i.options.initScript&&"executed"!==WebSquare.scriptSectionExcuteFlag&&!i.options.strictFrame&&(L?i.frameDoc.scriptSection+=i.options.initScript:q=i.options.initScript+q),!0!==WebSquare.core.scriptPrecedence&&i.options&&i.options.postScript&&!L&&!i.options.strictFrame&&(q+=i.options.postScript),q=i.options&&i.options.scope?WebSquare.util.scopingFuncBody(q,i.id,!0):WebSquare.util.scopingFuncBody(q,null,!0),L?(null==WebSquare.executePointScriptArr[I]&&(WebSquare.executePointScriptArr[I]=[]),WebSquare.executePointScriptArr[I].push({script:q,path:n,scope:i&&i.id}),!0===WebSquare.core.scriptPrecedence||i.options.strictFrame||(i.frameDoc.scriptSection+=i.options.postScript)):i.options&&i.options.strictFrame?WebSquare.scriptSection+=q:(i.frameDoc.scriptSection+=q,i._scriptLazy=!0)):(q=WebSquare.util.scopingFuncBody(q,null,!0),
I>2&&I<8?(null==WebSquare.executePointScriptArr[I]&&(WebSquare.executePointScriptArr[I]=[]),WebSquare.executePointScriptArr[I].push({script:q,path:n,scope:i&&i.id})):WebSquare.scriptSection+=q));case 57:t.next=60;break;case 59:if(i&&i.scope&&WebSquare.jsonUtil.matchTagName(p,"env",WebSquare.core._XML_NAMESPACE.W2)){for(A=WebSquare.jsonUtil.getChildNodes(p),D=0;D<A.length;D++)if((W=A[D]).T===WebSquare.Elem.type.text||W.T===WebSquare.Elem.type.cdata)for(E in"string"==typeof(q=W.text||W.cdata)&&(q=JSON.parse(q)),M=WebSquare.jsonUtil.getAttribute(p,"variable")||"env",i.scope)i.scope[E][M]=q}else i&&i.scope&&WebSquare.jsonUtil.matchTagName(p,"common",WebSquare.core._XML_NAMESPACE.W2)&&(R=WebSquare.jsonUtil.getAttribute(p,"src"),N=WebSquare.jsonUtil.getAttribute(p,"id"),i._addPageCommon(R,N));case 60:u++,t.next=10;break;case 63:s||WebSquare.core.executePointScript(3),t.next=68;break;case 66:return alert(WebSquare.language.getMessage("E_Parser_MoreThanOneHeadError",l.length)),t.abrupt("return",!1);case 68:return F=i?i.uuid:"",t.next=71,Promise.allSettled(r).then((function(t){for(var e=0;e<t.length;e++)if("fulfilled"===t[e].status){var i=t[e].value;if(i){var o=WebSquare.idCache[F];WebSquare.Parser._parseExternalScriptAfter(i,o)}}})).catch((function(t){h.Y.printStackTrace(t)}));case 71:t.next=76;break;case 73:t.prev=73,t.t1=t.catch(1),h.Y.printStackTrace(t.t1);case 76:return t.abrupt("return",!0);case 77:case"end":return t.stop()}}),t,null,[[1,73]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),G.prototype.findBindElement=function(t){try{return null==t.attributes?null:null!=t.attributes.getNamedItem("bind")?WebSquare.ModelUtil.getBind(t.attributes.getNamedItem("bind").value):null}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseLabel=function(t){var e=WebSquare.Elem.api.getElementsByTagName(t,"label",WebSquare.core._XML_NAMESPACE.XFORMS);if(null==e[0])return null;for(var i=e[0].getChildNodes(0),o="",s=0;s<i.length;s++)if(3===i[s].nodeType||4===i[s].nodeType){o=i[s].getNodeValue();break}return{value:o}},G.prototype.parseChoices=function(t,e){var i=[];if(e=e||"xf",t){var o="xf"==(e=t.getNamespace())?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,s=WebSquare.Elem.api.getElementsByTagName(t,"choices",o)[0];if(s){var r=WebSquare.Elem.api.getElementsByTagName(s,"item",o);if(r)for(var a=0;a<r.length;++a){var n=r[a],l="",h=WebSquare.Elem.api.getElementsByTagName(n,"label",o)[0];h&&(l=WebSquare.Elem.api.getValue(h,"@ref")||WebSquare.Elem.api.getCDataNodeValue(h)||WebSquare.Elem.api.getTextNodeValue(h));var d="",c=WebSquare.Elem.api.getElementsByTagName(n,"value",o)[0];c&&(d=WebSquare.Elem.api.getValue(c,"@ref")||WebSquare.Elem.api.getCDataNodeValue(c)||WebSquare.Elem.api.getTextNodeValue(c)),i.push({label:l,value:d})}}}return i},G.prototype.parseItemset=function(t,e){var i={nodeset:"",label:"",value:""};try{if(t){e=e||"xf";try{var o=t.getTagName();o.indexOf(":")>=0&&(e=o.split(":")[0])}catch(t){h.Y.printStackTrace(t)}var s,r="xf"==e?WebSquare.core._XML_NAMESPACE.XFORMS:WebSquare.core._XML_NAMESPACE.W2,a=WebSquare.Elem.api.getElementsByTagName(t,"choices",r)[0];if(a){if(s=WebSquare.Elem.api.getElementsByTagName(a,"itemset",r)[0]){var n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],c=WebSquare.Elem.api.getValue(l,"@ref"),u=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=c,i.value=u}}else if(s=WebSquare.Elem.api.getElementsByTagName(t,"itemset",r)[0]){n=WebSquare.Elem.api.getValue(s,"@nodeset"),l=WebSquare.Elem.api.getElementsByTagName(s,"label",r)[0],d=WebSquare.Elem.api.getElementsByTagName(s,"value",r)[0],c=WebSquare.Elem.api.getValue(l,"@ref"),u=WebSquare.Elem.api.getValue(d,"@ref");i.nodeset=n,i.label=c,i.value=u}}}catch(t){h.Y.printStackTrace(t)}return i},G.prototype.parseAttribute=function(t){try{return WebSquare.Parser.parseAttribute(t)}catch(t){h.Y.printStackTrace(t)}},
G.prototype.getAttribute=function(t,e,i){var o=t.getAttribute(e);return null==o||""==o?void 0!==i?i:"":o},G.prototype.attributesItem=function(t){this.name=t.name,this.ref=t.ref,this.value=t.value},G.prototype.attributesItem.prototype.setValue=function(t){this.value=t},G.prototype.attributesItem.prototype.getValue=function(){return this.value},G.prototype.parseWorkflows=function(t,e){try{for(var i=WebSquare.Elem.api.getElementsByTagName(t,"workflow",WebSquare.core._XML_NAMESPACE.W2),o=[],s=0;s<i.length;s++)o.push(this.parseWorkflow(i[s],t,e));return o}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseWorkflow=function(t,e,i){try{var o=WebSquare.WebSquareparser.getAttribute(t,"id"),s=WebSquare.WebSquareparser.getAttribute(t,"resolveCallback",""),r=WebSquare.WebSquareparser.getAttribute(t,"rejectCallback",""),a=WebSquare.WebSquareparser.getAttribute(t,"processMsg","");""==a&&(a=WebSquare.core.getConfiguration("/WebSquare/workflow/processMsg/@value"));for(var n=WebSquare.Elem.api.getElementsByTagName(t,"step",WebSquare.core._XML_NAMESPACE.W2),l=[],d=0;d<n.length;d++){var c=n[d],u=WebSquare.Parser.parseAttribute(c);l.push(u)}var p=o,g=null;i&&i.options&&i.options.scope&&(o=i.id+"_"+p,g=i.id);var m=new WebSquare.Model.Workflow(e,t,o,s,r,a,l,g);return i&&i.options&&i.options.scope&&(i.scope[p]=m),WebSquare.core.useWorkflowGlobal&&(window[m.id]=m),m}catch(t){h.Y.printStackTrace(t)}},G.prototype.parseUDC2=function(){var t=(0,m.A)(b().mark((function t(e,i){var o,s,r,a,n,l,d,c;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,o=WebSquare.Elem.api.getElementsByTagName(e,"head")[0],s=WebSquare.Elem.api.getElementsByTagName(o,"require",WebSquare.core._XML_NAMESPACE.W2),r=0;case 5:if(!(r<s.length)){t.next=22;break}if(a=s[r],(n=a.getAttribute("as")||a.getAttribute("componentName"))&&"page"===a.getAttribute("type")){t.next=10;break}return t.abrupt("continue",19);case 10:if(null!=WebSquare.core.udcObj[n]){t.next=19;break}return l=a.getAttribute("src"),d={msaName:a.getAttribute("msaName"),frameObj:i},c=WebSquare.core._getMsaSrc(l,d),c=WebSquare.core.getPageURL(c,{skipURL:!0,skipUri:!0}),t.next=17,WebSquare.jsLoader._loadObj(c,d);case 17:WebSquare.core.udcObj[n]=t.sent,WebSquare.core.udcMsa[n]=d.msaName;case 19:r++,t.next=5;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 27:case"end":return t.stop()}}),t,null,[[1,24]])})));return function(e,i){return t.apply(this,arguments)}}(),G.prototype.parseMessageBroker=function(t,e){try{var i=WebSquare.jsonUtil.getNodesByTagName(t,"messageBroker",WebSquare.core._XML_NAMESPACE.W2)[0];if(i||(i=WebSquare.jsonUtil.getNodesByTagName(t,"MSA",WebSquare.core._XML_NAMESPACE.W2)[0]),!i||!i.E)return;z.add(i,e)}catch(t){h.Y.printStackTrace(t)}};var Z=function(t){try{this.data=t,this.data._initParent=!1,this.models=[],this.cssList=[],this.idCollisionList={},this.type="json",this.boundElement=[],this.refElement=[],this.instanceRefElement=[],this.itemsetElement=[],this.boundElementCache={}}catch(t){h.Y.printStackTrace(t)}};Z.prototype.parsing=function(t){try{if(null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),!WebSquare.WebSquareparser.parse(this.data,t,WebSquare.strictModeFrame))return!1;if(this.parsingUDC(t,WebSquare.strictModeFrame),t?(WebSquare.BootLoader.performanceCheck.mid2=new Date,WebSquare.BootLoader.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")):(WebSquare.BootLoader.performanceCheck.mid2=new Date,WebSquare.BootLoader.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(WebSquare.BootLoader.performanceCheck.mid2.getTime()-WebSquare.BootLoader.performanceCheck.mid1.getTime())+"ms")),WebSquare.util._stopProcess(t))return;return!!this.renderBody(t)}catch(t){h.Y.printStackTrace(t)}},Z.prototype.renderBody=function(t){var e=this.data.html.body
;if(e.length>1)return alert(WebSquare.language.getMessage("E_pageInfo_MoreThanOneBodyError",e.length)),!1;var i=e["-style"];null!=i&&(this.bodyStyle=i),this.body=e,(new WebSquare.controlManager).run2(e,t)},Z.prototype.parsingWFrame=function(){var t=(0,m.A)(b().mark((function t(e,i,o,s){var r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),r=WebSquare.WebSquareparser.parse(this.data,e,i,s),!0===o&&(WebSquare.controlFactory._awaitObj.promiseObj[i.id]=r,WebSquare.controlFactory._awaitObj.key.push(i.id)),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,i,o,s){return t.apply(this,arguments)}}(),Z.prototype.parsingUDC2Sync=function(t,e){try{return null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),WebSquare.WebSquareparser.parseUDC2Sync(this.data,t,e)}catch(t){h.Y.printStackTrace(t)}},Z.prototype.parsingPageInheritBefore=function(){var t=(0,m.A)(b().mark((function t(e,i){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),WebSquare.WebSquareparser.parsePageInheritBefore(this.data,e,i),t.next=6,this.parsingUDC(e,i);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,i){return t.apply(this,arguments)}}(),Z.prototype.parsingPageInheritAfter=function(){var t=(0,m.A)(b().mark((function t(e,i){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,null==WebSquare.WebSquareParser&&(WebSquare.WebSquareparser=new WebSquare.jsonParser),t.next=5,WebSquare.WebSquareparser.parsePageInheritAfter(this.data,e,i);case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(e,i){return t.apply(this,arguments)}}(),Z.prototype.parsingUDC=function(){var t=(0,m.A)(b().mark((function t(e,i){var o,s,r,a,n,l,d,c,u,p;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=1,o=WebSquare.Elem.api.getElementsByTagName(this.data,"head")[0],s=WebSquare.Elem.api.getElementsByTagName(o,"require",WebSquare.core._XML_NAMESPACE.W2),r=0;case 5:if(!(r<s.length)){t.next=19;break}if("page"!==s[r].getAttribute("type")){t.next=8;break}return t.abrupt("continue",16);case 8:return a=s[r].getAttribute("src"),n=WebSquare.core.getPageURL(a),l=s[r].getAttribute("id"),d=s[r].getAttribute("pluginName"),c=s[r].getAttribute("cache"),a=WebSquare.core.getURL(a),t.next=16,WebSquare.util.loadUserComponent(n,l,d,i,c,void 0,a);case 16:r++,t.next=5;break;case 19:u=WebSquare.Elem.api.getElementsByTagName(o,"inherit",WebSquare.core._XML_NAMESPACE.W2),p=WebSquare.Elem.api.getElementsByTagName(o,"exc",WebSquare.core._XML_NAMESPACE.W2),u=u.concat(p),r=0;case 23:if(!(r<u.length)){t.next=30;break}return n=WebSquare.core.getPageURL(u[r].getAttribute("src")),t.next=27,WebSquare.util.loadInheritComponent(n);case 27:r++,t.next=23;break;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 35:case"end":return t.stop()}}),t,this,[[1,32]])})));return function(e,i){return t.apply(this,arguments)}}(),Z.prototype.getPageInfo=function(){try{return this.data}catch(t){h.Y.printStackTrace(t)}},Z.prototype.getType=function(){try{return this.type}catch(t){h.Y.printStackTrace(t)}},Z.prototype.unrender=function(t,e,i){try{for(var o=0;o<this.boundElement.length;o++){var s=this.boundElement[o];s&&void 0!==s.filteredNodeset&&void 0!==s.instance&&(0==s.filteredNodeset.indexOf(t)&&s.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(s.id).hasbeenrendered=!1)))}for(var r in this.refElement){var a=this.refElement[r]
;a&&void 0!==a.filteredNodeset&&void 0!==a.instance&&(0==a.filteredNodeset.indexOf(t)&&a.instance.id==i&&(void 0!==e&&null!=e&&e==s.id||(WebSquare.util.getComponentById(a.id).hasbeenrendered=!1)))}for(var n in this.itemsetElement){var l=this.itemsetElement[n];if(void 0!==l.filteredNodeset)if((0==t.indexOf(l.filteredNodeset)||0==l.filteredNodeset.indexOf(t))&&-1==l.filteredNodeset.substr(t.length).search(/^\w/)&&l.instance.id==i)if(l.id!=e)try{WebSquare.util.getComponentById(l.id).itemsetrendered=!1}catch(t){h.Y.printStackTrace(t)}}}catch(t){h.Y.printStackTrace(t)}},Z.prototype.detectChange=function(t,e,i,o){try{o=o||{};var s=WebSquare.ModelUtil.getModelByID(i),r=!(!o||!o.scope_id),a=s.instances[0].id;if(r)for(var n=0,l=s.instances.length;n<l;n++){var d=s.instances[n];if(d.scope_id===o.scope_id){a=d.id;break}}if(null!=a&&(t=WebSquare.ModelUtil.concatInstanceFunction(t,a)),void 0!==this.boundElementCache[t]&&null!=this.boundElementCache[t])for(var n in this.boundElementCache[t]){var c=n;if(c!=e){var u=WebSquare.util.getComponentById(c);u.modelControl.ref&&u.modelControl.useRef,u.refresh()}}for(var p in WebSquare.WebSquaredoc.itemsetElement){var g=WebSquare.WebSquaredoc.itemsetElement[p];if(void 0!==g.filteredNodeset&&(0==t.indexOf(g.filteredNodeset)||0==g.filteredNodeset.indexOf(t))){var m=g.id;if(m!=e){var f=WebSquare.util.getComponentById(m);f.modelControl.ref&&f.modelControl.useRef,f.refreshItemset()}}}if(!o.gridNoRefresh||o.gridNoRefresh&&1!=o.gridNoRefresh)for(var b=0;b<WebSquare.WebSquaredoc.instanceRefElement.length;b++){var y=WebSquare.WebSquaredoc.instanceRefElement[b];if((!y.scopeId||o.scope_id===y.scopeId)&&(void 0!==y.xpath&&o&&(y.xpath==o.xpath||("copyLastNodeChildrenNodes"==o.op||"setInstanceLastNodeChildNodes"==o.op||"removeInstanceNodeAll"==o.op)&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||"setInstanceValue"==o.op&&o.xpath.length>y.xpath.length&&WebSquare.ModelUtil.isPartialMatchedXPath(y.xpath,o.xpath)||y.xpath==o.replacexpath&&"replace"==o.type&&"setInstanceNode"==o.op))){var v=y.id;if(v!=e){var w=WebSquare.util.getComponentById(v);"grid"==w.initializeType&&w.refreshGrid(o)}}}}catch(t){h.Y.printStackTrace(t)}},Z.prototype.mergeConfig=function(t){try{var e=WebSquare.Elem.api.getElementsByTagName(t,"WebSquare")[0];if(!e)return;for(var i={},o=[e._element],s=[i];o.length>0;){var r,a=o.shift(),n=s.shift(),l=a.N;if(l)if(n[l]){if(n[l].constructor===Array)n[l].push({});else{var d=n[l];n[l]=[d],n[l].push({})}r=n[l][n[l].length-1]}else n[l]={},r=n[l];if(a.A&&r)for(var c in a.A)r["@"+c]=a.A[c];for(var u=0;a.E&&u<a.E.length;u++)o.push(a.E[u]),s.push(r||n)}WebSquare.BootLoader.mergeJSON(WebSquare.BootLoader.configurationJSON[0],i),WebSquare.BootLoader.initJSONConfig()}catch(t){h.Y.printStackTrace(t)}},Z.prototype.initParent=function(){try{if(!1===this.data._initParent){this.data._initParent=!0;for(var t=[this.data];t.length>0;)for(var e=t.pop(),i=0;e.E&&i<e.E.length;i++)e.E[i].parent=e,t.push(e.E[i])}}catch(t){h.Y.printStackTrace(t)}};var U=__webpack_require__(1304),X={loadWPackModule:function(t,e){return new Function("return "+t.replace("export default",""))(e)},getPageType:function(t){try{var e=t.slice(t.lastIndexOf(".")),i="js";return".xml"===e&&(i=!0===a.q.convertPageXML?"xmljs":"xml"),i}catch(t){h.Y.printStackTrace(t)}},getPageTypeByString:function(t){try{return"/"===t.charAt(0)&&"*"===t.charAt(1)||t.indexOf("export default")>=0?"json":"xml"}catch(t){h.Y.printStackTrace(t)}},getPageInfo:function(t){try{return new Z(t)}catch(t){h.Y.printStackTrace(t)}},getUri:function(t,e){try{if("string"!=typeof t)return t;t=l.I._getContextRootUri(t);var i=l.I.getConfiguration("/WebSquare/wpack/urlFunction/@value");if(i){var o=y.Z.getGlobalFunction(i);if("function"==typeof o)return o(t)}if(void 0!==e&&null!=e||(e={}),t.slice(0,a.q._resourceURI.length)===a.q._resourceURI&&-1===t.slice(a.q._resourceURI.length).indexOf("../")){var s=t.lastIndexOf(".xml")
;return s>=0&&!0===e.parse&&(t=t.slice(0,s)+t.slice(s).replace(".xml",".js")),t}var r=t,n=l.I.getConfiguration("/WebSquare/wpack/contextRoot/@value");(!n||a.q._contextRoot&&"/"===n)&&(n=a.q._contextRoot||"/");var d=r.indexOf("://");if("/"!==r.charAt(0)&&-1===d){r=y.Z.getAbsolutePath(r);var c="/"===n.charAt(0)?"":"/";n=location.origin+c+n}"/"===n.charAt(n.length-1)&&(n=n.slice(0,n.length-1));var u,p,g=!1,m=!1;if(e.msaName){if(b=l.I._msaServerHash[e.msaName]){n=b.origin+(b.contextRoot||n),p=b.origin;m=!0}}else if(d>=0){for(var f in l.I._msaServerHash){var b;if(b=l.I._msaServerHash[f]){var v=b.origin;if(p=p?p+","+v:v,r.startsWith(v)){n=v+(b.contextRoot||n);m=!0;break}}}if(!m){c="/"===n.charAt(0)?"":"/";"/"===(n=location.origin+c+n).charAt(n.length-1)&&(n=n.slice(0,n.length-1))}}if(""===n&&(u=r.indexOf("w2xPath="))>=0)n="w2xPath=",g="/"!==r.charAt(u+n.length);else if((u=r.indexOf(n))<0){if((u=r.indexOf(encodeURIComponent(n)))<0)return r;g=!0}var w=l.I.getConfiguration("/WebSquare/wpack/destRoot/@value");"$blank"===w?w="":w||(w="_wpack_");var S=l.I.getConfiguration("/WebSquare/wpack/babelDestRoot/@value");"$blank"===S?S="":S||(S="_wpackbabel_");var _,C,x=l.I.getConfiguration("/WebSquare/wpack/loadingMode/@value")||"wpack";if("auto"===x&&(x=y.Z.isIEAllVersion()?"babel":"wpack"),"babel"===x&&(w=S),_=""===w?n:n+"/"+w,g?"w2xPath="===n?(_=n+encodeURIComponent("/"+w),C=n.length):(_=encodeURIComponent(_),C=encodeURIComponent(n).length):C=n.length,r.indexOf(_)>=0&&""!==_)return t;var I=r.slice(0,u)+_+r.slice(u+C),T=I.lastIndexOf(".");if(T<0)return t;var k="";if(!0!==e.skipSrcExtension){var L=l.I.getConfiguration("/WebSquare/wpack/srcExtension/@value")||"xml",A=I.indexOf("?");if(A<0){if(I.slice(T+1)!==L)return t}else{var D=I.substring(0,A);if(k="?"+I.substring(A+1),D.slice(T+1)!==L)return t}}var W=l.I.getConfiguration("/WebSquare/wpack/destExtension/@value")||"js";return I.slice(0,T+1)+W+k}catch(e){return h.Y.printStackTrace(e),t}}};X.load=function(){var t=(0,m.A)(b().mark((function t(e,i){var o,s,r,d,c;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,void 0!==i&&null!=i||(i={}),o=X.getUri(e,i),X.getPageType(o),o=n.Q.getResourcePostfix(o),r=l.I.getConfiguration("/WebSquare/wpack/moduleLoader/@value")||"amd",!0!==i.parse){t.next=22;break}t.t0=r,t.next="amd"===t.t0||"requirejs"===t.t0?11:("import"===t.t0||t.t0,16);break;case 11:return d=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/noRequireJS/@value")),t.next=14,a.q._dynamicImportAMD(o,d);case 14:return s=t.sent,t.abrupt("break",20);case 16:return t.next=18,a.q._dynamicImport(o);case 18:c=t.sent,s=c.default;case 20:t.next=25;break;case 22:return t.next=24,l.I.loadAsync(o,i);case 24:s=t.sent;case 25:return t.abrupt("return",s);case 28:t.prev=28,t.t1=t.catch(1),h.Y.printStackTrace(t.t1);case 31:case"end":return t.stop()}}),t,null,[[1,28]])})));return function(e,i){return t.apply(this,arguments)}}(),X._loadObj=function(){var t=(0,m.A)(b().mark((function t(e,i){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,void 0!==i&&null!=i||(i={}),i.parse=!0,t.next=6,X.load(e,i);case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,i){return t.apply(this,arguments)}}(),X.start=function(){var t=(0,m.A)(b().mark((function t(e,i){var o,s,r,d,u,p;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,void 0!==i&&null!=i||(i={}),"string"!=typeof e){t.next=9;break}if("json"!==X.getPageTypeByString(e)){t.next=8;break}e=X.loadWPackModule(e),t.next=9;break;case 8:throw new Error("WebSquare page load error");case 9:return a.q.WebSquaredoc=X.getPageInfo(e),a.q.WebSquaredoc.cssList=a.q.externalCSSDOM.slice(0),null==a.q.WebSquareParser&&("json"===a.q.WebSquaredoc.getType()?a.q.WebSquareparser=new G:a.q.WebSquareparser=new x.WebSquareParser),t.next=14,l.I._loadProjectCommon();case 14:return t.next=16,l.I._loadMsaCommon()
;case 16:return t.next=18,a.q.WebSquaredoc.parsingUDC(o,a.q.strictModeFrame);case 18:return t.next=20,a.q.WebSquareparser.parse(a.q.WebSquaredoc.getPageInfo(),o,a.q.strictModeFrame);case 20:if(t.sent){t.next=22;break}return t.abrupt("return");case 22:if((o=!0===i.spa)?(n.Q.performanceCheck.mid2=new Date,n.Q.printLog("[SPA3][RESOURCE] New resource(XML, Skin, CSS) Load Complete. Time:"+(n.Q.performanceCheck.mid2.getTime()-n.Q.performanceCheck.mid1.getTime())+"ms")):(n.Q.performanceCheck.mid2=new Date,n.Q.printLog("[STEP3][RESOURCE] Resource(XML, Skin, CSS) Load Complete. Time:"+(n.Q.performanceCheck.mid2.getTime()-n.Q.performanceCheck.mid1.getTime())+"ms")),a.q._performance.mark("step3"),s=WebSquare.language.getMessage("Performance_step3"),a.q._performance.measure("step3","step2",l.I._makeDetail(s)),!y.Z._stopProcess(o)){t.next=29;break}return t.abrupt("return");case 29:if(r=[],d=a.q.WebSquaredoc.getType(),r="json"===d?v.r.getNodesByTagName(a.q.WebSquaredoc.getPageInfo(),"body"):c._.getElementsByTagName(a.q.WebSquaredoc.getPageInfo(),"body",l.I._XML_NAMESPACE.XHTML),"json"===d||1!==r.length){t.next=38;break}null!=(u=r[0].getAttribute("style"))&&(a.q.WebSquaredoc.bodyStyle=u),a.q.WebSquaredoc.body=r[0],t.next=41;break;case 38:if(!("json"!==d||r.length>1)){t.next=41;break}return alert(B.B.getMessage("E_WebSquareDocument_MoreThanOneBodyError",r.length)),t.abrupt("return");case 41:return _.startCache(),p="json"===d?U.o.createByJSON(null,null,r[0],a.q.strictModeFrame,a.q.strictModeFrame?a.q.strictModeFrame.uuid:void 0):U.o.create(null,null,r[0],a.q.strictModeFrame,a.q.strictModeFrame?a.q.strictModeFrame.uuid:void 0),t.next=45,U.o.initAsync();case 45:_.endCache(),o?(n.Q.performanceCheck.mid3=new Date,n.Q.printLog("[SPA4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.Q.performanceCheck.mid3.getTime()-n.Q.performanceCheck.mid2.getTime())+"ms")):(n.Q.performanceCheck.mid3=new Date,n.Q.printLog("[STEP4][CREATE] WebSquare Object Creation & JS Load Complete. Time:"+(n.Q.performanceCheck.mid3.getTime()-n.Q.performanceCheck.mid2.getTime())+"ms")),a.q._performance.mark("step4"),s=WebSquare.language.getMessage("Performance_step4"),a.q._performance.measure("step4","step3",l.I._makeDetail(s)),a.q.setBody(p),l.I._controlInvoker("pageInherit","appendModel",[a.q.pageInheritSubmissionList,"submissions"]),l.I._controlInvoker("pageInherit","appendModel",[a.q.pageInheritWorkflowList,"workflows"]),l.I.executePointScript(4),a.q.pageInheritScriptArr&&(a.q.externalScriptArr=a.q.pageInheritScriptArr.concat(a.q.externalScriptArr),a.q.pageInheritScriptArr=[]),a.q.externalScriptArr.length>0?(a.q.externalScriptArr.push(new Function("WebSquare.jsLoader._startCallback("+o+");")),y.Z.js.apply(null,a.q.externalScriptArr),a.q.externalScriptArr=[]):X._startCallback(o),t.next=61;break;case 58:t.prev=58,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 61:case"end":return t.stop()}}),t,null,[[1,58]])})));return function(e,i){return t.apply(this,arguments)}}(),X._startCallback=function(){var t=(0,m.A)(b().mark((function t(e){var i,o,s,r,d,u,p,f,v,w,S,C,x,I,T,A,D;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=1,i=a.q.body,a.q.WebSquaredoc.cssList=a.q.WebSquaredoc.cssList.concat(_.executeImport()),o=l.I.getConfiguration("/WebSquare/visibleHelper/targetHandler/@value"),s=null,r=!1,"undefined"!=typeof WebSquareExternal&&WebSquareExternal&&(r=WebSquareExternal.skipRender),r||a.q.targetInfo&&a.q.targetInfo.constructor==Array||(d=new Date,s=i.toHTML(),u=new Date,n.Q.printLog("html string generation. Time :"+(u-d)+"ms")),r);else if(null!=o&&""!=o)"function"==typeof(p=y.Z.getGlobalFunction(o))&&(f=p(s)),null!=f&&("string"==typeof f&&(f=document.getElementById(f)),f.style.cssText=i.options.style),a.q.useVisibleHelper=!0;else if(a.q.targetInfo){if("string"==typeof a.q.targetInfo)(f=document.getElementById(a.q.targetInfo))&&l.I._safeInnerHTML(f,s),f.style.cssText=i.options.style;else if(a.q.targetInfo.constructor==Array){for(d=new Date,
v=0;v<a.q.targetInfo.length;v++)w=a.q.targetInfo[v],(S=a.q.idToUUID[w.component])&&null!=a.q.idCache[S]&&("string"==typeof(C=w.target)&&(C=document.getElementById(C)),l.I._safeInnerHTML(C,a.q.idCache[S].toHTML()));u=new Date,n.Q.printLog(" html string generation. Time :"+(u-d)+"ms")}else"object"==(0,g.A)(a.q.targetInfo)&&l.I._safeInnerHTML(a.q.targetInfo,s);a.q.targetInfo=""}else l.I._safeInnerHTML(document.body,s),document.body.style.cssText=i.options.style,n.Q.fullViewed&&n.Q.zoomed(document.body,a.q.style.getScale());!("onhashchange"in window)&&(e||location.hash.lastIndexOf("w2xPath")>=0)&&(y.Z._hiddenFrame?null==document.getElementById(y.Z._hiddenFrame.id)&&document.body.appendChild(y.Z._hiddenFrame):y.Z._makeFrame(),y.Z._iframe_wait=!0,y.Z._hiddenFrame.contentWindow.location.search=a.q.w2xPath),"true"==l.I.getConfiguration("/WebSquare/mobile/hideAddressBar/@value")&&y.Z.isMobile()&&(document.body.scrollTop=1);try{"undefined"!=typeof WebSquareExternal&&(WebSquareExternal.xmlInstance&&(WebSquareExternal.xmlInstance=c._.parse(WebSquareExternal.xmlInstance)),WebSquareExternal.targetInstance&&(WebSquareExternal.xmlInstance?x=WebSquareExternal.xmlInstance:WebSquareExternal.jsonInstance&&(x=k.JSON2XML(WebSquareExternal.jsonInstance)),x&&(a.q.WebSquaredoc.models[0].rebuild(x,WebSquareExternal.targetInstance),a.q.WebSquaredoc.models[0].refresh())))}catch(t){h.Y.printStackTrace(t)}if(I=l.I._makeDetail(WebSquare.language.getMessage("Performance_step5")),T=l.I._makeDetail(WebSquare.language.getMessage("Performance_step6")),e?(n.Q.performanceCheck.mid4=new Date,n.Q.printLog("[SPA5][RENDER] HTML Rendering Complete. Time:"+(n.Q.performanceCheck.mid4.getTime()-n.Q.performanceCheck.mid3.getTime())+"ms"),a.q._performance.mark("step5"),a.q._performance.measure("step5","step4".step5log),i.preActivate(),n.Q.performanceCheck.mid5=new Date,n.Q.printLog("[SPA6][ADJUST] Pre Event Activation. Time:"+(n.Q.performanceCheck.mid5.getTime()-n.Q.performanceCheck.mid4.getTime())+"ms"),a.q._performance.mark("step6"),a.q._performance.measure("step6","step5",T)):(n.Q.performanceCheck.mid4=new Date,n.Q.printLog("[STEP5][RENDER] HTML Rendering Complete. Time:"+(n.Q.performanceCheck.mid4.getTime()-n.Q.performanceCheck.mid3.getTime())+"ms"),l.I.executePointScript(5),a.q._performance.mark("step5"),a.q._performance.measure("step5","step4",I),i.preActivate(),n.Q.performanceCheck.mid5=new Date,n.Q.printLog("[STEP6][ADJUST] Pre Event Activation. Time:"+(n.Q.performanceCheck.mid5.getTime()-n.Q.performanceCheck.mid4.getTime())+"ms"),l.I.executePointScript(6),a.q._performance.mark("step6"),a.q._performance.measure("step6","step5",T)),l.I._businessPreProcessor(),a.q.isWebSquarePopup&&l.I._initPopupParameter(),A=l.I._makeDetail(WebSquare.language.getMessage("Performance_step7")),"synchronous"!==(l.I.getConfiguration("/WebSquare/postDrawMode/@value")||"asynchronous")){t.next=47;break}if(n.Q.printLog("[_wg.actionHelper.execute]postDrawMode : synchronous"),!y.Z._stopProcess(e)){t.next=24;break}return t.abrupt("return");case 24:for(D in L.activated=!0,L.comp)L.comp[D].activate();return i.activate(),t.next=29,U.o.initAsync();case 29:if(e?(n.Q.performanceCheck.mid6=new Date,n.Q.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.Q.performanceCheck.mid6.getTime()-n.Q.performanceCheck.mid5.getTime())+"ms")):(n.Q.performanceCheck.mid6=new Date,n.Q.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.Q.performanceCheck.mid6.getTime()-n.Q.performanceCheck.mid5.getTime())+"ms"),l.I.executePointScript(7)),a.q._performance.mark("step7"),a.q._performance.measure("step7","step6",A),!y.Z._stopProcess(e)){t.next=34;break}return t.abrupt("return");case 34:if(!a.q.strictModeFrame||"function"!=typeof a.q.strictModeFrame._parsePageCommons){t.next=37;break}return t.next=37,a.q.strictModeFrame._parsePageCommons();case 37:if(X._startCallback2(e),!y.Z._stopProcess(e)){t.next=42;break}return t.abrupt("return");case 42:
"onhashchange"in window?window.onhashchange=y.Z.onhashchange:y.Z._wait_for_iframe_reload(e);case 43:i.onComplete(),L.api.onComplete(),t.next=49;break;case 47:n.Q.printLog("[_wg.actionHelper.execute]postDrawMode : asynchronous"),l.I.setTimer(function(){var t=(0,m.A)(b().mark((function t(e){var i,o;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a.q.body,!y.Z._stopProcess(e)){t.next=3;break}return t.abrupt("return");case 3:for(o in L.activated=!0,L.comp)L.comp[o].activate();return i.activate(),t.next=8,U.o.initAsync();case 8:if(e?(n.Q.performanceCheck.mid6=new Date,n.Q.printLog("[SPA7][EVENT] Event Activation. Time:"+(n.Q.performanceCheck.mid6.getTime()-n.Q.performanceCheck.mid5.getTime())+"ms")):(n.Q.performanceCheck.mid6=new Date,n.Q.printLog("[STEP7][EVENT] Event Activation. Time:"+(n.Q.performanceCheck.mid6.getTime()-n.Q.performanceCheck.mid5.getTime())+"ms"),l.I.executePointScript(7)),a.q._performance.mark("step7"),a.q._performance.measure("step7","step6",A),!y.Z._stopProcess(e)){t.next=13;break}return t.abrupt("return");case 13:if(!a.q.strictModeFrame||"function"!=typeof a.q.strictModeFrame._parsePageCommons){t.next=16;break}return t.next=16,a.q.strictModeFrame._parsePageCommons();case 16:if(X._startCallback2(e),!y.Z._stopProcess(e)){t.next=21;break}return t.abrupt("return");case 21:"onhashchange"in window?window.onhashchange=y.Z.onhashchange:y.Z._wait_for_iframe_reload(e);case 22:i.onComplete(),L.api.onComplete();case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{key:"WebSquare_startOnload",caller:this,delay:1,args:[e]});case 49:t.next=54;break;case 51:t.prev=51,t.t0=t.catch(1),h.Y.printStackTrace(t.t0);case 54:case"end":return t.stop()}}),t,this,[[1,51]])})));return function(e){return t.apply(this,arguments)}}(),X._startCallback2=function(t){try{"true"==l.I.getConfiguration("/WebSquare/clearMemory/@value")&&(window.onbeforeunload=function(){if(a.q.clearMemory){var t,e=!1;try{y.Z.isSPA()&&y.Z.isIE()&&l.I.browserVersion()<=10&&(l.I.clearJQuery(),e=!0)}catch(t){window.WebSquare&&window.WebSquare.exception&&WebSquare.exception.printStackTrace(t)}if(e||(t=a.q.clearMemory()),!1===t)return t}}),a.q.nowRendering=!1,"function"==typeof a.q.onload&&a.q.onload(),!0!==l.I.scriptPrecedence&&a.q.event.fireEvent(a.q.getBody(),"onpageload");var e=!0,i=WebSquare.core.getConfiguration("/WebSquare/eval/@value")||WebSquare.core.getConfiguration("/WebSquare/executeScript/@value")||"internal";if(a.q.pageInheritScript&&a.q.pageInheritScript.length>0){if(n.Q.traceWframe)for(var o=0;o<a.q.pageInheritScript.length;o++)n.Q.globalEval(a.q.pageInheritScript[o],i);else a.q.scriptSection=a.q.pageInheritScript.join("")+a.q.scriptSection;a.q.pageInheritScript=[],e=!1}a.q.wframeScript&&a.q.wframeScript.length>0&&(n.Q.traceWframe||(a.q.scriptSection+=a.q.wframeScript.reverse().join(""),a.q.wframeScript=[]),e=!1),(e=e&&l.I._isSinglePage())||(a.q.scriptSection=a.q.scriptIdentifier+a.q.w2xPath+'";'+a.q.scriptSection),l.I._businessPreProcessor(),l.I._controlInvoker("pageInherit","_execute",["script",{order:"postorder"}]),!0===l.I.scriptPrecedence?l.I._controlInvoker("wframe","_execute",["script"]):l.I._controlInvoker("wframe","_execute",["script",{order:"postorder",reverse:!0}]);var s=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/postScript/@value"))&&a.q.w2xPath!==a.q.net.getBlankXML();if(s&&!0!==l.I.scriptPrecedence&&!a.q.strictModeFrame&&(a.q.scriptSection+=l.I.getConfiguration("/WebSquare/postScript")),a.q.scriptSectionExcuteFlag="preExecuted",n.Q.globalEval(a.q.scriptSection,i),a.q.scriptSection="",n.Q.traceWframe&&a.q.wframeScript&&a.q.wframeScript.length>0){for(o=a.q.wframeScript.length-1;o>=0;o--)n.Q.globalEval(a.q.wframeScript[o],i);a.q.wframeScript=[]}a.q.scriptSectionExcuteFlag="executed";try{var r=t?"SPA":"STEP";n.Q.performanceCheck.mid7=new Date,
n.Q.printLog("["+r+"8][INITSCRIPT] initscript Completed. Time:"+(n.Q.performanceCheck.mid7.getTime()-n.Q.performanceCheck.mid6.getTime())+"ms"),a.q._performance.mark("step8");var d=WebSquare.language.getMessage("Performance_step8");if(a.q._performance.measure("step8","step7",l.I._makeDetail(d)),t||l.I.executePointScript(8),!0===l.I.scriptPrecedence){for(;l.I._onpageloadArr.length>0;){"function"==typeof(u=l.I._onpageloadArr.shift())&&u()}if(a.q.event.fireEvent(a.q.getBody(),"onpageload"),a.q.strictModeFrame&&a.q.strictModeFrame._executeStatus)for(var c=a.q.strictModeFrame._executeStatus.onloadPageCommon;c instanceof Array&&c.length>0;){var u;"function"==typeof(u=c.shift())&&u()}l.I._controlInvoker("pageInherit","_execute",["onpageload",{order:"postorder"}]),l.I._controlInvoker("wframe","_execute",["onpageload"]),n.Q.performanceCheck.mid8=new Date,n.Q.printLog("["+r+"9][ONPAGELOAD] onpageload Completed. Time:"+(n.Q.performanceCheck.mid8.getTime()-n.Q.performanceCheck.mid7.getTime())+"ms"),a.q._performance.mark("step9");d=WebSquare.language.getMessage("Performance_step9");a.q._performance.measure("step9","step8",l.I._makeDetail(d)),l.I._controlInvoker("pageInherit","_execute",["postscript",{order:"postorder"}]);var p="";s&&(a.q.strictModeFrame?p+=a.q.strictModeFrame.options.postScript.toString():p+=l.I.getConfiguration("/WebSquare/postScript")),l.I._controlInvoker("wframe","_execute",["postscript",{order:"postorder"}]),p&&n.Q.globalEval(p,i),l.I._controlInvoker("wframe","_execute",["onwframeload"]),n.Q.performanceCheck.mid9=new Date,n.Q.printLog("["+r+"10][POSTSCRIPT] postscript Completed. Time:"+(n.Q.performanceCheck.mid9.getTime()-n.Q.performanceCheck.mid8.getTime())+"ms"),a.q._performance.mark("step10");d=WebSquare.language.getMessage("Performance_step10");a.q._performance.measure("step10","step9",l.I._makeDetail(d))}}catch(t){h.Y.printStackTrace(t)}n.Q.performanceCheck.end=new Date;var g="["+r+" SUMMARY] Initial procedures completed. Duration : "+(n.Q.performanceCheck.end.getTime()-n.Q.performanceCheck.start.getTime())+" Recorded timestamps :\t"+(n.Q.performanceCheck.mid1.getTime()-n.Q.performanceCheck.start.getTime())+"\t"+(n.Q.performanceCheck.mid2.getTime()-n.Q.performanceCheck.mid1.getTime())+"\t"+(n.Q.performanceCheck.mid3.getTime()-n.Q.performanceCheck.mid2.getTime())+"\t"+(n.Q.performanceCheck.mid4.getTime()-n.Q.performanceCheck.mid3.getTime())+"\t"+(n.Q.performanceCheck.mid5.getTime()-n.Q.performanceCheck.mid4.getTime())+"\t"+(n.Q.performanceCheck.mid6.getTime()-n.Q.performanceCheck.mid5.getTime())+"\t"+(n.Q.performanceCheck.mid7.getTime()-n.Q.performanceCheck.mid6.getTime())+"\t";!0===l.I.scriptPrecedence&&(g+=n.Q.performanceCheck.mid8.getTime()-n.Q.performanceCheck.mid7.getTime()+"\t"+(n.Q.performanceCheck.mid9.getTime()-n.Q.performanceCheck.mid8.getTime())+"\t"),g+=n.Q.performanceCheck.end.getTime()-n.Q.performanceCheck.start.getTime(),n.Q.printLog(g);try{a.q.lazyImportsArr.length>0&&(a.q.lazyImportsArr.push((function(){n.Q.printLog("defer JavaScript loaded.")})),n.Q.printLog("defer JavaScript loading."),y.Z.js.apply(null,a.q.lazyImportsArr),a.q.lazyImportsArr=[])}catch(t){h.Y.printStackTrace(t)}try{window.$integrity&&window.$integrity()}catch(t){h.Y.printStackTrace(t)}"script"===i&&a.q.clearScriptHead(),l.I._fireParentOnload(),l.I._controlInvoker("wframe","_clearPending"),l.I._controlInvoker("pageInherit","_clearPending"),a.q.scriptLoaedFlag="loaded"}catch(t){h.Y.printStackTrace(t)}};var K={createFormatter:function(t,e,i,o,s,r,a,n){try{var l=null;if(i)return(l=new WebSquare.format.formatterAdapter(t,e,i,o)).scope_id=a,l.callerId=n,l;if(""!=t)switch(t){case"text":l=new WebSquare.format.textFormatter(t,e,i,o);break;case"bigDecimal":case"number":l=""==e?new WebSquare.format.emptyFormatter(t,e,i,o):new WebSquare.format.numberFormatter(t,e,i,o,s,r);break;case"float":l=new WebSquare.format.floatFormatter(t,e,i,o,s,r);break;case"euro":l=new WebSquare.format.euroFormatter(t,e,i,o,s,r);break;case"rupee":
l=new WebSquare.format.rupeeFormatter(t,e,i,o,s,r);break;case"tenge":l=new WebSquare.format.tengeFormatter(t,e,i,o,s,r);break;case"date":l=new WebSquare.format.dateFormatter(t,e,i,o);break;case"time":l=new WebSquare.format.timeFormatter(t,e,i,o);break;case"textMask":l=new WebSquare.format.textMaskFormatter(t,e,i,o);break;case"numberMask":l=new WebSquare.format.numberMaskFormatter(t,e,i,o,s,r);break;case"reverseTextMask":l=new WebSquare.format.reverseTextMaskFormatter(t,e,i,o);break;case"reverseNumberMask":l=new WebSquare.format.reverseNumberMaskFormatter(t,e,i,o,s,r);break;default:l=new WebSquare.format.emptyFormatter(t,e,i,o)}else l=new WebSquare.format.emptyFormatter(t,e,i,o);return l.scope_id=a,l.callerId=n,l}catch(t){h.Y.printStackTrace(t)}},formatter:function(t,e,i,o){try{this.type=t||"text",this.masking=e||"",this.userFunc=i||null,this.ioFormat=o||null,this.callerId="",this.count=0,this.hash_format_to_original={}}catch(t){h.Y.printStackTrace(t)}}};K.formatter.prototype.setMasking=function(t){this.masking=t},K.formatter.prototype.format=function(t,e){try{if(WebSquare.util.isNull(t))return"";t=t.toString();var i=this.executeFormat(t,e);return this.count>100&&(this.hash_format_to_original={},this.count=0),this.hash_format_to_original[i]=t,this.count++,i}catch(t){h.Y.printStackTrace(t)}},K.formatter.prototype.unformat=function(t){try{return null!=this.hash_format_to_original[t]?this.hash_format_to_original[t]:t}catch(t){h.Y.printStackTrace(t)}},K.formatter.prototype.executeFormat=function(t){alert("you should override 'executeFormat'")},K.emptyFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.emptyFormatter.prototype,K.formatter.prototype),K.emptyFormatter.prototype.executeFormat=function(t){return t},K.textFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.textFormatter.prototype,K.formatter.prototype),K.textFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatText(t,this.masking,this.ioFormat)}catch(t){h.Y.printStackTrace(t)}},K.numberFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.q.extend(K.numberFormatter.prototype,K.formatter.prototype),K.numberFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.Y.printStackTrace(t)}},K.floatFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s||",",this.decimalDelimiter=r||"."},a.q.extend(K.floatFormatter.prototype,K.formatter.prototype),K.floatFormatter.prototype.executeFormat=function(t,e){try{var i="";t.length>0&&("-"==t[0]||"+"==t[0])&&(i=t[0],t=t.substring(1));var o=t.split(this.decimalDelimiter),s=o[0].split(this.delimiter).join(""),r=o[1]||"";if(1==this.masking.split(this.decimalDelimiter).length)s=WebSquare.text.formatCurrency(s,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter);else{var a=WebSquare.text.unformatCurrency(this.masking,t);s=(o=WebSquare.text.formatCurrency(a,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter).split(this.decimalDelimiter))[0]||"",r=o[1]||""}return 2===o.length?i+s+"."+r:i+s}catch(t){h.Y.printStackTrace(t)}},K.euroFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.q.extend(K.euroFormatter.prototype,K.formatter.prototype),K.euroFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatEuroCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.Y.printStackTrace(t)}},K.rupeeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.q.extend(K.rupeeFormatter.prototype,K.formatter.prototype),K.rupeeFormatter.prototype.executeFormat=function(t,e){try{
return t=WebSquare.text.formatRupeeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.Y.printStackTrace(t)}},K.tengeFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.q.extend(K.tengeFormatter.prototype,K.formatter.prototype),K.tengeFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTengeCurrency(t,this.masking,this.ioFormat,e,this.delimiter,this.decimalDelimiter)}catch(t){h.Y.printStackTrace(t)}},K.dateFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.dateFormatter.prototype,K.formatter.prototype),K.dateFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatDate(t,this.masking,this.ioFormat,e)}catch(t){h.Y.printStackTrace(t)}},K.timeFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.timeFormatter.prototype,K.formatter.prototype),K.timeFormatter.prototype.executeFormat=function(t){try{return t=WebSquare.text.formatTime(t,this.masking,this.ioFormat)}catch(t){h.Y.printStackTrace(t)}},K.formatterAdapter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o),this.userFunc=i},a.q.extend(K.formatterAdapter.prototype,K.formatter.prototype),K.formatterAdapter.prototype.executeFormat=function(t){try{if("function"!=typeof this.userFunc)try{var e=WebSquare.util.getGlobalFunction(this.userFunc,this.scope_id);"function"==typeof e&&(this.userFunc=e)}catch(t){WebSquare.logger.printLog("executeFormat initailize.")}return"function"==typeof this.userFunc&&(t=this.userFunc(t)),t}catch(t){h.Y.printStackTrace(t)}},K.textMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.textMaskFormatter.prototype,K.formatter.prototype),K.textMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatTextMask(t,this.masking,this.allowChar)}catch(t){h.Y.printStackTrace(t)}},K.textMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.Y.printStackTrace(t)}},K.reverseTextMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.reverseTextMaskFormatter.prototype,K.formatter.prototype),K.reverseTextMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseTextMask(t,this.masking,this.allowChar)}catch(t){h.Y.printStackTrace(t)}},K.reverseTextMaskFormatter.prototype.setAllowChar=function(t){try{this.allowChar=t}catch(t){h.Y.printStackTrace(t)}},K.numberMaskFormatter=function(t,e,i,o,s,r){WebSquare.format.formatter.call(this,t,e,i,o),this.delimiter=s,this.decimalDelimiter=r},a.q.extend(K.numberMaskFormatter.prototype,K.formatter.prototype),K.numberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatNumberMask(t,this.masking,this.delimiter)}catch(t){h.Y.printStackTrace(t)}},K.reverseNumberMaskFormatter=function(t,e,i,o){WebSquare.format.formatter.call(this,t,e,i,o)},a.q.extend(K.reverseNumberMaskFormatter.prototype,K.formatter.prototype),K.reverseNumberMaskFormatter.prototype.executeFormat=function(t,e){try{return t=WebSquare.text.formatReverseNumberMask(t,this.masking)}catch(t){h.Y.printStackTrace(t)}};var $=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){
if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}function d(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){h.Y.printStackTrace(t)}}var c=function(t){return new WebSquare.bigDecimalObj(t)};return c.calc=function(t,s,a){var n=l(t);return WebSquare.bigDecimal(function(t,s,a){for(var n,l,h=new Array,c=0;c<t.length;c++)if(o(t[c]))e(h,t[c]);else{var u;if(s&&s[r(h)])n=s[r(h)];else if((u=r(h)).constructor===WebSquare.bigDecimalObj)n=u;else if("string"==typeof u){var p=WebSquare.util.scopingFuncBody(u,a);n=Function(p).call(this)}else n=new Function("return "+u)();n.constructor!=WebSquare.bigDecimalObj&&(n=WebSquare.bigDecimal(n)),i(h),s&&s[r(h)]?l=s[r(h)]:"string"==typeof(u=r(h))?(p=WebSquare.util.scopingFuncBody(u,a),l=Function(p).call(this)):l=new Function("return "+u)(),l.constructor!=WebSquare.bigDecimalObj&&(l=WebSquare.bigDecimal(l));var g=d(l,n,t[c]);i(h),e(h,g)}return r(h)}(n,s,a))},c}(window),J=function(t){try{""===t?(t="0",this.emptyStr=!0):this.emptyStr=!1,this.big=window.Big(t)}catch(t){this.big=NaN}};J.prototype.plus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"plus")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.minus=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"minus")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.divide=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"div")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.times=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"times")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.pow=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"pow")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.mod=function(t){try{return WebSquare.bigDecimalObj.handleZero(this,t,"mod")}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.prototype.toString=function(){if(isNaN(this.big))return NaN;var t=this.big.toFixed();return!this.emptyStr||"0"!==t&&0!==t||(t=""),t},J.prototype.compare=function(t,e){try{if(e)var i=1==this.big.lt(t)?this:t;else i=1==this.big.gt(t)?this:t;return i}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}},J.handleZero=function(t,e,i){try{var o="";e.emptyStr&&""===e.toString()?o=t.big[i](0):("pow"===i&&(e=parseInt(e.toString(),10)),o=t.big[i](e));var s=WebSquare.bigDecimal(o);return"0"===s.toString()&&t.emptyStr&&e.emptyStr&&(s=""),s}catch(t){return h.Y.printStackTrace(t),WebSquare.bigDecimal(NaN)}};var Q={getSubmission:T.K.getSubmission,getSubmissionList:T.K.getSubmissionList,createSubmission:T.K.createSubmission,deleteSubmission:T.K.deleteSubmission,executeSubmission:T.K.executeSubmission,getStringByteSize:y.Z.getStringByteSize,getRefToReqData:y.Z.getRefToReqData,dynamicCreate:y.Z.dynamicCreate,createWorkflow:T.K.createWorkflow,deleteWorkflow:T.K.deleteWorkflow,getWorkflow:T.K.getWorkflow,getRunningWorkflow:T.K.getRunningWorkflow,isRunningWorkflow:T.K.isRunningWorkflow,getRunningWorkflowID:T.K.getRunningWorkflowID,rejectWorkflow:T.K.rejectWorkflow,executeWorkflow:T.K.executeWorkflow,executeSerial:T.K.executeSerial,executeParallel:T.K.executeParallel,executeWhilst:T.K.executeWhilst,openPopup:y.Z.openPopup,getPopupParam:y.Z.getPopupParam,closePopup:y.Z.closePopup,getPopup:y.Z.getPopup,getPopupList:y.Z.getPopupList,getPopupWindow:y.Z.getPopupWindow,getPopupWindowList:y.Z.getPopupWindowList,getAllPopupList:y.Z.getAllPopupList,getAllPopupWindowList:y.Z.getAllPopupWindowList,isPopup:y.Z.isPopup,
setDocumentLang:y.Z.setDocumentLang,setDisabled:y.Z.setDisabled,setDomain:y.Z.setDomain,url:y.Z.url,js:y.Z.js,jsAsync:y.Z.jsAsync,reinitialize:y.Z.reinitialize,clearPage:y.Z.clearPage,setTimeout:y.Z.setTimeout,clearTimeout:y.Z.clearTimeout,setInterval:y.Z.setInterval,clearInterval:y.Z.clearInterval,getTimeoutKeys:y.Z.getTimeoutKeys,getIntervalKeys:y.Z.getIntervalKeys,getIntervalKeyList:y.Z.getIntervalKeyList,getTimeoutKeyList:y.Z.getTimeoutKeyList,toTimestampString:W.p.toTimestampString,dateDiff:W.p.dateDiff,dateAdd:W.p.dateTimeAdd,getFormattedDate:W.p.getFormattedDate,getCurrentServerDate:W.p.getCurrentServerDate,updateServerTime:W.p.updateServerTime,getMaxMinYear:W.p.getMaxMinYear,parseDate:W.p.parseDate,showModal:M.showModal,hideModal:M.hideModal,showProcessMessage:M.showProcessMessage,hideProcessMessage:M.hideProcessMessage,log:d.v.printLog,enableLog:d.v.enableLog,disableLog:d.v.disableLog,getParameter:A.getParameter,getAllParameter:A.getAllParameter,getBASE64Parameter:A.getBASE64Parameter,getAllBASE64Parameter:A.getAllBASE64Parameter,URLEncoder:q.Q.URLEncoder,ajax:A.ajax,download:A.download,data:L.api,setFullView:y.Z.setFullView,mirrorView:y.Z.mirrorView,watermark:y.Z.watermark,createProgressbar:y.Z.createProgressBar,getRuntimeId:y.Z.getRuntimeId,isWFramePopup:y.Z.isWFramePopup,getPopupUrl:y.Z.getPopupUrl,getPopupId:y.Z.getPopupId,getFrameId:y.Z.getFrameId,getFrame:y.Z.getFrame,getParentWindow:y.Z.getParentWindow,getComponentById:y.Z.getComponentById,getEventTarget:y.Z.getEventTarget,parent:y.Z.getParentWindow,top:y.Z.getTopWindow,main:y.Z.getMainFrame,debug:d.Y,bigDecimal:$,getMetaValue:y.Z.getMetaValue,encodeParameter:y.Z.encodeParameter,multipleExcelUpload:y.Z.multipleExcelUpload,multipleExcelDownload:y.Z.multipleExcelDownload,getMediaInfo:y.Z.getMediaInfo,updateSuffix:y.Z.updateSuffix,$:y.Z.jQuerySelector,loadPageCommon:y.Z.loadPageCommon,loadMSACommon:y.Z.loadMSACommon,loadGlobalCommon:y.Z.loadGlobalCommon},tt=function(){this.font_cho=new Array("","","","","","","","","","","","","","","","","","",""),this.font_jung=new Array("","","","","","","","","","","","","","","","","","","","",""),this.font_jong=new Array("","","","","","","","","","","","","","","","","","","","","","","","","","","","")};tt.prototype={getCho:function(t){return this.font_cho[parseInt((t-44032)/588)]},getJung:function(t){return this.font_jung[parseInt((t-44032)%588/28)]},getJong:function(t){return this.font_jong[parseInt((t-44032)%588%28)]},getChoArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getCho(s)):e.push(t.charAt(o))}return e},getJungArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJung(s)):e.push("")}return e},getJongArr:function(t){for(var e=[],i=t.length,o=0;o<i;o++){var s=t.charCodeAt(o);s-44032>=0?e.push(this.getJong(s)):e.push("")}return e},matchArr:function(t,e,i){var o=!0;if(t.length!=e.length)o=!1;else for(var s=t.length,r=0;r<s;r++)if((i||""!=e[r])&&t[r]!=e[r]){o=!1;break}return o},containArr:function(t,e,i,o,s){var r=t.length,a=!1,n=function t(e,i,o,s){i.length-1>s&&(0===i[s+1]?a=!0:e[o+1]==i[s+1]?t(e,i,o+1,s+1):a=!1)};if(i.length>0){for(var l=[],h=0;h<i.length;h++){if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};var d=i[h];if(t[d]==e[0]&&(l.push(d),a=!0,n(t,e,d,0),1==a&&1==s))break}i=l}else{for(var c=0;c<r;c++){if(1==e.length&&""==e[0])return{result:a=!0,matchedArr:i};t[c]==e[0]&&(a=!0,n(t,e,c,0),1==a&&i.push(c))}i.length>0&&(a=!0)}return{result:a,matchedArr:i,first:undefined}},matchStr:function(t,e,i){return!!(this.matchArr(this.getChoArr(t),this.getChoArr(e),i)&&this.matchArr(this.getJungArr(t),this.getJungArr(e),i)&&this.matchArr(this.getJongArr(t),this.getJongArr(e),i))},containStr:function(t,e,i){
var o=this.containArr(this.getChoArr(t),this.getChoArr(e),[],!0,!1),s=this.containArr(this.getJungArr(t),this.getJungArr(e),o.matchedArr,!1),r=this.containArr(this.getJongArr(t),this.getJongArr(e),s.matchedArr,!1,!0);return!!(o.result&&s.result&&r.result)},startWith:function(t,e){return!(e.length>t.length)&&this.matchStr(t.substr(0,e.length),e)},containWith:function(t,e){return!(e.length>t.length)&&(t.indexOf(e)>-1||this.containStr(t,e))}};var et=__webpack_require__(3768),it=__webpack_require__(541),ot=function(t,e,i,o,s){try{this.id=t,this.model=e,this.ref=i,this.bind=o,this.itemsetObj=null,this.useRef=!1,this.useBind=!1,this.useItemset=!1,this.isDataCollectionRefBinded=!1,this.isDataCollectionItemsetBinded=!1,this.dataCollectionRefInfo={},this.dataCollectionItemsetInfo={},this.scope_uuid=s}catch(t){h.Y.printStackTrace(t)}};ot.prototype.setItemset=function(t,e,i){try{this.itemsetObj={nodeset:t||"",label:e||"",value:i||""}}catch(t){h.Y.printStackTrace(t)}},ot.prototype.binding=function(){try{this.isDataCollectionItemsetBinded||this.ref&&this.ref.indexOf("data:")>-1?this.dataCollectionBinding(this.ref):(this.bindRef(),this.bindItemset())}catch(t){h.Y.printStackTrace(t)}},ot.prototype.checkRef=function(){try{var t=this.ref;if(-1!=t.lastIndexOf("/@")&&t.lastIndexOf("/")==t.lastIndexOf("/@"));else{var e=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,i=T.K.findInstanceNode(t,null,e);if(i&&i.childNodes.length>1)return!1}return!0}catch(t){h.Y.printStackTrace(t)}},ot.prototype.bindRef=function(){try{this.ref&&""!=this.ref&&this.checkRef()&&(WebSquare.WebSquaredoc.refElement.push(new T.K.createRefElement(this.ref,this.id)),T.K.setBindElement(this.ref,this.id),this.useRef=!0)}catch(t){h.Y.printStackTrace(t)}},ot.prototype.bindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(WebSquare.WebSquaredoc.itemsetElement.push(new T.K.createItemsetElement(this.itemsetObj.nodeset,this.itemsetObj.label,this.itemsetObj.value,this.id)),this.useItemset=!0)}catch(t){h.Y.printStackTrace(t)}},ot.prototype.unbindRef=function(){try{if(this.isDataCollectionRefBinded)this.useRef=!1,this.isDataCollectionRefBinded=!1,this.dataCollectionRefInfo.dataComp&&(this.dataCollectionRefInfo.dataComp.removeChild(this.dataCollectionRefInfo.childComp.id),this.dataCollectionRefInfo.dataComp.removeRefComp(this.dataCollectionRefInfo.childComp.id)),this.dataCollectionRefInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.refElement){WebSquare.WebSquaredoc.refElement[t].id==this.id&&(WebSquare.WebSquaredoc.refElement.splice(t,1),this.useRef=!1)}}catch(t){h.Y.printStackTrace(t)}},ot.prototype.unbindItemset=function(){try{if(this.isDataCollectionItemsetBinded)this.useItemset=!1,this.isDataCollectionItemsetBinded=!1,this.dataCollectionItemsetInfo.dataComp&&(this.dataCollectionItemsetInfo.dataComp.removeChild(this.dataCollectionItemsetInfo.childComp.id),this.dataCollectionItemsetInfo.dataComp.removeRefComp(this.dataCollectionItemsetInfo.childComp.id)),this.dataCollectionItemsetInfo={};else if(WebSquare.WebSquaredoc)for(var t in WebSquare.WebSquaredoc.itemsetElement){var e=WebSquare.WebSquaredoc.itemsetElement[t].id;try{e==this.id&&(WebSquare.WebSquaredoc.itemsetElement.splice(t,1),this.useItemset=!1)}catch(t){h.Y.printStackTrace(t)}}}catch(t){h.Y.printStackTrace(t)}},ot.prototype.unbinding=function(){},ot.prototype.isBinded=function(){return this.useRef},ot.prototype.isItemsetBinded=function(){return this.useItemset},ot.prototype.setRef=function(t){try{var e=t||"";this.useRef&&"string"==typeof e&&e.length>0&&(this.ref=e,this.binding())}catch(t){h.Y.printStackTrace(t)}},ot.prototype.setData=function(t,e,i){try{if(1==this.useRef){void 0!==i&&null!=i||(i={});var o=this.getData();if(o!=t||(0===o&&""===t||""===o&&0===t)||i.orgValue&&o!=i.orgValue)if(this.isDataCollectionRefBinded)e=e||"column",WebSquare.DataCollection.api.setRefValue(this.dataCollectionRefInfo,t,e);else{
var s=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;T.K.setInstanceValue(this.ref,t,this.model,s)}return!0}return!1}catch(t){h.Y.printStackTrace(t)}},ot.prototype.getData=function(){try{if(""!=this.ref){if(this.isDataCollectionRefBinded)return WebSquare.DataCollection.api.getRefValue(this.dataCollectionRefInfo);var t=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id;return T.K.getInstanceValue(this.ref,this.model,t)}return""}catch(t){h.Y.printStackTrace(t)}},ot.prototype.setItemsetData=function(t){},ot.prototype.getItemsetData=function(){try{var t=[];if(""!=this.itemsetObj.nodeset){for(var e=this.itemsetObj.label,i=this.itemsetObj.value;;){var o=e.lastIndexOf("/");if(o<0)break;e=e.substring(0,o)}for(;;){var s=i.lastIndexOf("/");if(s<0)break;i=i.substring(0,s)}var r=this.itemsetObj.nodeset,a=this.itemsetObj.label,n=this.itemsetObj.value;if(i==e&&""!=i){var l=a.lastIndexOf("/"),d=n.lastIndexOf("/");l>0&&d>0&&(r+="/"+e,a=a.replace(e+"/",""),n=n.replace(i+"/",""))}r.lastIndexOf("/")==r.length-1&&(r=r.substring(0,r.lastIndexOf("/"))),0==a.indexOf("/")&&(a=a.substring(1)),0==n.indexOf("/")&&(n=n.substring(1));var u=WebSquare.idCache[this.scope_uuid]&&WebSquare.idCache[this.scope_uuid].id,p=T.K.findInstanceNodes(r,null,u);if(p)for(var g=0;g<p.length;++g){var m=p[g];e=c._.getValue(m,a),i=c._.getValue(m,n);t.push({label:e,value:i,xml:m})}}return t}catch(t){h.Y.printStackTrace(t)}},ot.prototype.getDataCollectionItemsetData=function(t,e){try{var i,o,s=this.getDataComp(null,{type:"aliasDataCollection"});if(s)i=s.id;else if(i=this.itemsetObj.nodeset.replace(/^data:/,""),WebSquare.strictMode){var r=WebSquare.idCache[this.scope_uuid]?WebSquare.idCache[this.scope_uuid].id:"";i=(r?r+"_":"")+i}if(t&&(o=l.I.getComponentById(t)),this.isDataCollectionItemsetBinded=!0,o&&WebSquare.DataCollection.api.addRelation(o.id,i),s&&WebSquare.idCache[s.uuid]){o?(s.addChild(o),this.dataCollectionItemsetInfo.childComp=o):this.dataCollectionItemsetInfo.childComp={},this.dataCollectionItemsetInfo.dataComp=s;var a=(s=WebSquare.DataCollection.api.getObj(s)).options&&!0===s.options.useNull;switch(s.initializeType){case"linkedDataList":case"dataList":var n=[],d={},c=function(t,e,i,o,s){if(!o||!s)return!1;var r=!1,a=t.bodyIdColIndexMap[o];if(!isNaN(a)){var n;n=!0===i?"dataList"===t.initializeType?t.dataArr[e*t.cellIdList.length+a]:t._dataList.dataArr[t.initialRowIndexArr[e]*t.cellIdList.length+a]:t.getCellData(e,o);for(var l=s.split(","),h=0;h<l.length;h++)if('"'+l[h]+'"'=='"'+n+'"'){r=!0;break}}return r};if(!e||!0!==e.allData&&!0!==e.allColumn)for(u=s.getDataLength(),p=0;p<u;p++){y=s.getCellData(p,this.itemsetObj.label),v=s.getCellData(p,this.itemsetObj.value);if(a&&null===v){if(null===d[y])continue}else if(d[y]==v)continue;d[y]=v;_={label:a&&null===y?y:y+"",value:a&&null===v?v:v+""};!0===c(s,p,!1,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(_._hidden=!0),!0===c(s,p,!1,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(_._disabled=!0),e&&e.depthColumn&&(_._depth=s.getCellData(p,e.depthColumn)),n.push(_)}else for(var u=s.getTotalRow(),p=0;p<u;p++){var g=s.bodyIdColIndexMap[this.itemsetObj.label],m=s.bodyIdColIndexMap[this.itemsetObj.value],f=s.cellInfoHash[this.itemsetObj.label],b=s.cellInfoHash[this.itemsetObj.value],y="",v="";if(y=f&&"expression"==f.options.inputType?f.getExpressionValue(p):"dataList"===s.initializeType?s.dataArr[p*s.cellIdList.length+g]:s._dataList.dataArr[s.initialRowIndexArr[p]*s.cellIdList.length+g],v=b&&"expression"==b.options.inputType?b.getExpressionValue(p):"dataList"===s.initializeType?s.dataArr[p*s.cellIdList.length+m]:s._dataList.dataArr[s.initialRowIndexArr[p]*s.cellIdList.length+m],a&&null===v){if(null===d[y])continue}else if(d[y]==v)continue;if(d[y]=v,!0===e.allColumn)for(var w=s.getRowData(p),S=0;S<w.length;S++)n.push(w[S]);else{var _={label:a&&null===y?y:y+"",value:a&&null===v?v:v+""};if(!0===c(s,p,!0,e&&e.visibleColumn,e&&e.visibleColumnFalseValue)&&(_._hidden=!0),
!0===c(s,p,!0,e&&e.enableColumn,e&&e.enableColumnFalseValue)&&(_._disabled=!0),e&&e.depthColumn){var C,x=s.bodyIdColIndexMap[e.depthColumn];C="dataList"===s.initializeType?s.dataArr[p*s.cellIdList.length+x]:s._dataList.dataArr[s.initialRowIndexArr[p]*s.cellIdList.length+x],_._depth=C}n.push(_)}}return n;case"dataMap":for(n=[],d={},p=0;p<s.getCount();p++){y=s.get(this.itemsetObj.label),v=s.get(this.itemsetObj.value);if(a&&null===v){if(null===d[y])continue}else if(d[y]==v)continue;d[y]=v,n.push({label:a&&null===y?y:y+"",value:a&&null===v?v:v+""})}return n}}}catch(t){h.Y.printStackTrace(t)}},ot.prototype.dataCollectionBinding=function(t){try{this.dataCollectionBindRef(t),this.dataCollectionBindItemset(t)}catch(t){h.Y.printStackTrace(t)}},ot.prototype.dataCollectionBindRef=function(t){try{if(this.ref&&""!=this.ref){this.isDataCollectionRefBinded=!0;var e=t.split("."),i=this.getDataComp(e[0].replace(/^data:/,""),{type:"aliasDataCollection"}),o=l.I.getComponentById(this.id);if(i){switch(i.addRefComp(o),this.dataCollectionRefInfo.dataComp=i,this.dataCollectionRefInfo.childComp=o,i.initializeType){case"linkedDataList":case"dataList":this.dataCollectionRefInfo.colID=e[1];break;case"dataMap":this.dataCollectionRefInfo.key=e[1]}WebSquare.DataCollection.api.addRefRelation(o.id,i.id)}else WebSquare.DataCollection.api.addRefRelation(o.id,e[0].replace(/^data:/,""));this.useRef=!0}}catch(t){h.Y.printStackTrace(t)}},ot.prototype.dataCollectionBindItemset=function(){try{this.itemsetObj&&""!=this.itemsetObj.nodeset&&(this.useItemset=!0)}catch(t){h.Y.printStackTrace(t)}},ot.prototype.getDataComp=function(t,e){try{void 0!==e&&null!=e||(e={});var i=t||this.itemsetObj.nodeset.replace(/^data:/,""),o=null;if(this.scope_uuid&&null!=WebSquare.idCache[this.scope_uuid]){for(var s=WebSquare.idCache[this.scope_uuid];null!=s&&null!=s.scope;s=s.scope_obj){if(null!=s.scope[i]){o=s.scope[i];break}if(s.scope_obj===s||s.options.inheritedCompName){if(!s.parentFrame||void 0===WebSquare.idCache[s.parentFrame])break;if(null!=(s=WebSquare.idCache[s.parentFrame]).scope[i]){o=s.scope[i];break}}var r=s.scope_obj,a=!1;if(r&&r.options){var n=r.options.scopeInherit;a="recursive"===n||"all"===n}if(WebSquare.strictMode&&!a)break}null==o&&null!=(o=WebSquare.DataCollection.comp[WebSquare.idCache[this.scope_uuid].id+"_"+i]||null)&&(WebSquare.idCache[this.scope_uuid].scope[i]=o)}return null==o&&(o=WebSquare.DataCollection.comp[i]),"aliasDataCollection"!==e.type&&!0===WebSquare.DataCollection.api.isAliasDataCollection(o)&&(o=o.getObj()),o}catch(t){h.Y.printStackTrace(t)}};var st=__webpack_require__(2406),rt=function(){this.maxSize=50,this.historyArr=[],this.setKeyEvent()};rt.prototype.set=function(t,e,i,o){this.historyArr.length>=this.maxSize&&this.historyArr.shift(),this.historyArr.push([t,e,i||{},o||{}])},rt.prototype.get=function(t,e){for(var i={},o=this.historyArr.length-1;o>=0;o--){var s=this.historyArr[o];if(s[0]==t&&s[1]==e){i=s[2];break}}return i},rt.prototype.clear=function(){for(var t=0;t<this.historyArr.length;t++)this.historyArr[t]=null;this.historyArr=[]},rt.prototype.setKeyEvent=function(t){O.f.addListener(document.documentElement,"keydown",O.f.bindAsEventListener(this,this.handlerKeydownEvent))},rt.prototype.handlerKeydownEvent=function(t){switch(t.charCode?t.charCode:t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 27:default:break;case 90:if(t.ctrlKey&&this.historyArr.length>0){var e=this.historyArr.pop();!0===e[3].stopEvent&&O.f.stopEvent(t),e[3].onRestore&&e[3].onRestore.call(this,e[2])}break;case 68:if(t.ctrlKey)"false"===(l.I.getConfiguration("/WebSquare/enableKey/useCtrlD/@value")||"false")&&O.f.stopEvent(t);break;case 75:if(t.ctrlKey){var i=l.I.getConfiguration("/WebSquare/cloneTab/@value"),o=i;""===i&&(o=l.I.getConfiguration("/WebSquare/enableKey/useCtrlK/@value")||"false"),"false"==o&&O.f.stopEvent(t)}}},rt=new rt;var at=__webpack_require__(7455),nt=function(){};nt.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},
nt.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}return this.filteredRowIndexMap[t]},nt.prototype.getTotalRow=function(){try{return this.dataArr.length/this.oneRowDataLength}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getTotalCol=function(){try{return this.oneRowDataLength}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getData=function(t,e){try{e=this.getColumnIndex(e);var i=this.dataArr[t*this.getColumnCount()+e];return null==i&&!0!==this.options.useNull&&(i=""),i}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getCellData=function(t,e,i){try{var o,s;"number"==typeof e?(o=e,s=this.cellIdList[o]):(o=this.bodyIdColIndexMap[e],s=e);i=this.options.depthColumn&&!1!==i||!0===i?t:this.filteredRowIndexArr[t];var r=this.cellInfoHash[s];if(r){if("expression"==r.options.inputType)return r.getExpressionValue(i);var a=this.dataArr[i*this.cellIdList.length+o];return null==a&&!0!==this.options.useNull&&(a=""),"json"===r.options.dataType&&"string"==typeof a&&""!==a&&(a=l.I._jsonParse(a)),a}}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getCellData=function(t,e){try{return this._getCellData(t,e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getCellAllData=function(t,e){try{return this._getCellData(t,e,!0)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.options.depthColumn?t:this.filteredRowIndexArr[t],s=this.originalDataArr[o*this.cellIdList.length+i];return null==s&&!0!==this.options.useNull&&(s=""),s}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getOriginalCellData=function(t,e){try{var i;i="number"==typeof e?e:this.bodyIdColIndexMap[e];var o=this.originalDataArr[t*this.cellIdList.length+i];return null==o&&!0!==this.options.useNull&&(o=""),o}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},nt.prototype.getColCnt=function(){try{return this.getTotalCol()}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getDepth=function(t){var e=-1;return this.options.depthColumn&&(e=parseInt(this._getData(t,this.getColumnID(this.options.depthColumn)))),e},nt.prototype.hasChild=function(t){var e=t+1,i=this.getColumnID(this.options.depthColumn);"dataList"==this.options.dataColumn&&(i=this.getColumnID(this.options.depthColumn));var o=parseInt(this._getData(t,i)),s=parseInt(this._getData(e,i));return o<(s=isNaN(s)?0:s)},nt.prototype.getColSum=function(t){try{var e=this.getColData(t);return y.Z.sum(e)}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getColAvg=function(t){try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)"string"==typeof i[o]&&""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=y.Z.sum(i)}return""==e?"":e/i.length}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getColMax=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=y.Z.setPrecision(e)}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=y.Z.setPrecision(e)}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},nt.prototype.getColData=function(t,e){try{var i=[],o=this.getColumnIndex(t),s=this.getTotalRow();if("object"===(0,g.A)(e)&&null!=e&&e.length<=s)for(var r=e.length,a=0;a<r;a++)i.push(this._getData(e[a],o));else for(a=0;a<s;a++)i.push(this._getData(a,o));return i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRowData=function(t,e){try{
void 0!==e&&null!=e||(e={});var i=[],o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length,r=s,a="object"===(0,g.A)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array;a&&(r=e.includeColumns.length);for(var n=0;n<r;n++){var d,c=a?e.includeColumns[n]:this.cellIdList[n],u=a?this.bodyIdColIndexMap[c]:n,p=this.cellInfoHash[c];p&&("expression"==p.options.inputType?d=p.getExpressionValue(o):null==(d=this.dataArr[o*s+u])&&!0!==this.options.useNull&&(d=""),"json"===p.options.dataType&&"string"==typeof d&&""!==d&&(d=l.I._jsonParse(d))),i.push(d)}return i}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getData(t,i));return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getOriginalRowData=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getOriginalRowData(e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getOriginalRowData=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++)e.push(this._getOriginalCellData(t,i));return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getDataRow=function(t){try{for(var e=[],i=0;i<this.getColumnCount();i++){e[this.getColumnID(i)]=this.getCellData(t,i)}return e}catch(t){$l("dataController.getDataRow :"+t.message),h.Y.printStackTrace(t,null,this)}},nt.prototype.getMatchedData=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s);this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s),l=0;l<n.length;l++)a.push(this.getRowData(n[l],r));return a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a,n=[],l=this.getMatchedIndex(t,e,o,s,r);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<l.length;d++)n.push(this._getCellData(l[d],i,a));return n}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++)a.push(this.getCellData(n[l],i));return a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getFilteredColData=function(t){var e=[];t=this.getColumnIndex(t);for(var i=this.getColumnID(t),o=0;o<this.getDataLength();o++){var s=o;this.options.depthColumn&&(s=this.filteredRowIndexArr[o]),e.push(this.getCellData(s,i))}return e},nt.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=y.Z.getBoolean(i))&&(i=!0);var r=this.getColumnIndex(t);if(this.options.depthColumn||this.options.getMatchedFromAllData)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l];if(1==i)(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(l);else{if(d===e){n.push(l);continue}"number"==typeof d&&(d+=""),("string"==typeof d&&d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(l)}}return n}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var r=this.getColumnIndex(t);if(this.options.depthColumn)var a=this.getColData(r);else a=this.getFilteredColData(r);var n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l]
;1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(l)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(l)}return n}catch(t){h.Y.printStackTrace(t)}},nt.prototype.toArray=function(t,e){try{if("string"!=typeof t)return null===t?d.v.printLog("[WebSquare.DataCollection.dataController.toArray] parameter is null.["+this.id+"]"):d.v.printLog("[WebSquare.DataCollection.dataController.toArray] parameter isn't string. ["+(0,g.A)(t)+"]["+this.id+"]"),[];e=null==e?'","':'"'+e+'"';if(null!=t.match(/^\[\s*\]$/g))return new Array;var i=t.split(e);return i[0]=i[0].substr(2),i[i.length-1]=i[i.length-1].substr(0,i[i.length-1].length-2),i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getMappingData=function(t,e,i){try{for(var o,s={},r=0,a=this.cellIdList.length,n=e.length,l=t.length/n,c=0;c<n;c++){o=!1;for(var u=0;u<a;u++)if(e[c]===this.cellIdList[u]){o=!0,s[u]=c;break}o||r++}if(r===n)return d.v.printLog("[WebSquare.DataCollection.dataController.setData] not exist all target column in ["+this.id+"]"),[];for(var p,g,m=new Array(l*a),f=0;f<l;f++)for(var b=0;b<a;b++)void 0!==(g=s[b])?(p=t[g+f*n],m[f*a+b]=p):m[f*a+b]="";return t=null,m}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRangeData=function(t,e,i,o){try{var s,r=[];if(s=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var a=e;e=t,t=a}t<0&&(t=0),e>s&&(e=s);for(var n=t;n<=e;n++)for(var l=this.getRowData(n,o),d=0;d<l.length;d++)r.push(l[d]);return r}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllData=function(t){try{if(this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()!=this.getDataLength()){for(var e=[],i=this.getTotalRow(),o=0;o<i;o++)for(var s=this._getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}e=[];var a=this.getDataLength();for(o=0;o<a;o++)for(s=this.getRowData(o,t),r=0;r<s.length;r++)e.push(s[r]);return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllArrayEvalString=function(){try{return this.broadcast({gridView:["_endEdit"]}),y.Z.parseArray(this.dataArr)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getColumnDistinctDataArray=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=[],o={};"string"==typeof t&&(t=this.bodyIdColIndexMap[t]);for(var s=this.getCellInfo(t),r=this.getColData(t),a=0;a<r.length;a++){o[r[a]]=1}for(var n in o)i.push(n);return e&&0==e.sort||("text"==s.options.dataType?i.sort():i.sort(this.comparator)),i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]});for(var e=[],i=0;i<this.getDataLength();i++)for(var o=this.getRowData(i,t),s=0;s<o.length;s++)e.push(o[s]);return e},nt.prototype.getChildrenRowArr=function(t){var e=[];if(this.options.depthColumn){var i=this.getTotalRow(),o=this.options.depthColumn,s=this.getColumnID(o),r=t+1,a=parseInt(this._getData(t,s),10);if(r<i&&this._getData(r,s)>a){e.push(r);var n=parseInt(this._getData(r,s),10),l=!0}if(l)for(r=t+2;r<i&&!(this._getData(r,s)<a+1);r++)this._getData(r,s)<n+1&&(e.push(r),n=parseInt(this._getData(r,s),10))}return e},nt.prototype.getRecursiveRowIndex=function(t){try{for(var e=[],i=this.getChildrenRowArr(t),o=0;o<i.length;o++){var s=i[o];e.push(s);for(var r=this.getRecursiveRowIndex(s),a=0;a<r.length;a++)e.push(r[a])}return e}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(t,i)),s=t-1;s>=0;s--)if(this._getData(s,i)<o)return s;return-1}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.getRangeXML=function(t,e,i){try{var o;if(i=i||{},o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var s=e;e=t,t=s}t<0&&(t=0),e>o&&(e=o)
;for(var r=[],a=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/dataList/decreaseGetRangeXML/@value")),n=t;n<e;n++)r.push(n);return a&&!i.useGetRowXML||r.push(e),this.getArrXML(r,i)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getMatchedXML=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={}),this.broadcast({gridView:["_endEdit"]});var a=this.getMatchedIndex(t,e,i,o,s);return this.options.getMatchedFromAllData&&(r.realRowIndex=!0),this.getArrXML(a,r)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedXML=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=this.getUnmatchedIndex(t,e,i,o,s);return this.getArrXML(a,r)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRowXML=function(t,e){try{(e=e||{}).useGetRowXML=!0;var i,o=this.getRangeXML(t,t,e);return i="dataMap"==this.initializeType?this.options.baseNode+"/"+this.options.repeatNode.split("/")[0]:this.options.baseNode+"/"+this.options.repeatNode,o=WebSquare.xml.findNode(o,i),o=WebSquare.xml.parse(WebSquare.xml.serialize(o))}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllXML=function(t){try{return this.broadcast({gridView:["_endEdit"]}),this.getTotalRow()==this.getDataLength()?this.getAllFilteredXML(t):this.getAllArrXML(t)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllFilteredXML=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=this.getDataLength(),i=[],o=0;o<e;o++)i.push(o);return this.getArrXML(i,t)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRowJSON=function(t,e){try{void 0!==e&&null!=e||(e={});for(var i={},o=this.options.depthColumn||e.realRowIndex?t:this.filteredRowIndexArr[t],s=this.cellIdList.length,r=!0===e.exceptEmptyValue&&"true"===l.I.getConfiguration("/WebSquare/submission/exceptEmptyValue/@value"),a="object"===(0,g.A)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array,n=a?e.includeColumns.length:s,d=0;d<n;d++){var c=a?e.includeColumns[d]:this.cellIdList[d],u=this.cellInfoHash[c];if(u){var p;if("expression"==u.options.inputType)p=u.getExpressionValue(o);else{var m=a?this.bodyIdColIndexMap[c]:d;null==(p=this.dataArr[o*s+m])&&!0!==this.options.useNull&&(p="")}if(""===p&&u.options.nullYN)if("null"===this.options.nullYNType)i[c]=null;else{if("exclude"===this.options.nullYNType)continue;i[c]=p}else(!r||""!==p||"bigDecimal"!==u.options.dataType&&"number"!==u.options.dataType)&&("json"===u.options.dataType&&"string"==typeof p&&""!==p&&(p=l.I._jsonParse(p)),i[c]=p)}}var f=this.options.rowStatusNodeName,b=0!=e.rowStatusData||e.rowStatusData;return e.rowStatusNodeName&&(f=e.rowStatusNodeName),"dataList"!=this.initializeType&&"removeManager"!=this.initializeType||(b&&(i[f]=this._getRowStatus(o)),this.options.rowNumData&&(i.rowNum=t+1)),i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRefRowJSON=function(t,e){try{return void 0!==e&&null!=e||(e={}),e.exceptEmptyValue=!0,this.getRowJSON(t,e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getVirtualRowJSON=function(t,e,i){try{var o={};e=this.getColumnID(e);for(var s=0;s<this.getColumnCount();s++){var r=this.getColumnID(s);o[r]=r==e?i:this.getCellData(t,r)}return o}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=this.getTotalRow(),o=this.getDataLength();if(i!=o){void 0===t||null==t?t={realRowIndex:!0}:t.realRowIndex=!0;for(var s=0;s<i;s++)e.push(this.getRowJSON(s,t))}else for(s=0;s<o;s++)e.push(this.getRowJSON(s,t));if(null!=this.options.customFormatter){var r=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(e=r(this,e))}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRefAllJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getAllJSON(t)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRangeJSON=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow()-1:this.getDataLength()-1,t>e){var r=e;e=t,t=r}t<0&&(t=0),e>o&&(e=o)
;for(var a=t;a<=e;a++)s.push(this.getRowJSON(a,i));if(null!=this.options.customFormatter){var n=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof n&&(s=n(this,s))}return s}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getMatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});var a=[],n=this.getMatchedIndex(t,e,i,o,s,r);void 0!==r&&null!=r||(r={}),this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedJSON=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,i,o,s,r),l=0;l<n.length;l++)a.push(this.getRowJSON(n[l],r));if(null!=this.options.customFormatter){var d=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof d&&(a=d(this,a))}return a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllFilteredJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getDataLength(),o=0;o<i;o++){var s=this.options.depthColumn?this.getRealRowIndex(o):o;e.push(this.getRowJSON(s,t))}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getFusionChartData=function(t,e,i,o){try{var s,r={},a=this.getAllArray();if(e||(e=a.columnInfo[0]),i)s=i.wq_replaceAll("'",'"'),s=JSON.parse(s),i=s[0];else{for(var n=new Array,l=1;l<=a.columnInfo.length;l++)"number"==this.getCellInfo(l).options.dataType&&n.push(a.columnInfo[l]);"msstackedcolumn2d"==t.toLowerCase()||"scrollmsstackedcolumn2d"==t.toLowerCase()?((s=[])[0]=new Array(n[0]),s[1]=new Array(n[1])):"msstackedcolumn2dlinedy"==t.toLowerCase()||"scrollmsstackedcolumn2dlinedy"==t.toLowerCase()?((s=[])[0]=new Array(n[0]),s[1]=new Array(n[1]),s[2]=new Array(n[2])):i=n}switch(this._singleSerises=function(){for(var t=[],s=this.getAllJSON(),a=0;a<s.length;a++){var n={label:s[a][e],value:s[a][i[0]],color:s[a][o]};t.push(n)}var l={labelName:"",valueName:""};return s.length>0&&(l.labelName=this.getColumnName(e),l.valueName=this.getColumnName(i[0])),r.dataName=l,r.data=t,r},this._multiSerises=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);e.data.length>0&&r.dataset.push(e)}return 0==r.dataset.length&&(r={}),r},this._msStacked=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length;t++){i=s[t];for(var e={dataset:[]},o=0;o<i.length;o++){var a=this._getFusionChartSeriesDate(o);e.dataset.push(a)}r.dataset.push(e)}return r},this._msStackedColumn2DLineDY=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=0;t<s.length-1;t++){i=s[t];for(var e={dataset:[]},o=0;o<i.length;o++){var a=this._getFusionChartSeriesDate(o);e.dataset.push(a)}r.dataset.push(e)}r.lineset=[];var n=s.length-1;i=s[n];for(t=0;t<i.length;t++){a=this._getFusionChartSeriesDate(t);r.lineset.push(a)}return r},this._scatter=function(){r.dataset=[];for(var o=this._getUniqueArr(this.getColData(e)),s=0;s<o.length;s++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(o[s]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()||"zoomscatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=o[s],r.dataset.push(a)}return r},this._zoomLine=function(){if(1==this.getRowCount()){(r={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var o={};o.seriesname=this.getColumnName(i[t]),o.data=this.getCellData(0,i[t]),r.dataset.push(o)}return r}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{
category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedarea2dlinedy":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn2dlinedy":case"stackedcolumn3dline":case"mscombidy2d":case"mscombidy3d":case"mscolumn3dlinedy":case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollbar2d":case"scrollstackedcolumn2d":case"scrollstackedbar2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":case"overlappedcolumn2d":case"overlappedbar2d":return this._multiSerises();case"scatter":case"bubble":case"zoomscatter":return this._scatter();case"zoomline":case"zoomlinedy":return this._zoomLine();case"msstackedcolumn2d":case"scrollmsstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":case"scrollmsstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getfwGanttChartData=function(t){try{var e={chart:{},categories:[],processes:{}};e.processes.process=[],e.datatable={},e.datatable.datacolumn=[],e.tasks={},e.tasks.task=[],e.legend={},e.legend.item=[];var i=t.monthNames.split(","),o=t.quarterNames.split(","),s=t.dataColumns.split(","),r=this.getColumnDistinctDataArray(t.processNode,{sort:!1}),a=[];if(""!=s)for(var n=0;n<s.length;n++)a[n]=this.getColumnDistinctDataArray(s[n],{sort:!1});var l=this.getColumnDistinctDataArray(t.taskNode,{sort:!1}),d=[];d.push(t.startDateNode),d.push(t.endDateNode);var c,u=[],p={};if(t.processIdNode&&t.taskIdNode){c=this.getColumnDistinctDataArray(t.processIdNode,{sort:!1});for(n=0;n<c.length;n++)p[r[n]]=c[n]}this._getGanttTaskData=function(e,i,o,s,r,a){for(var n=this.getRowCount(),l=this.getMatchedIndex(t.taskNode,e,!0,0,n),h=[],d=0;d<l.length;d++){var c,u={};this.options.getMatchedFromAllData&&(c=!0);var p=this.getCellData(l[d],t.processNode);if(u.label=this.getCellData(l[d],t.taskNode),u.processid=i[p],u.color=a[p],t.taskIdNode?u.id=this._getCellData(l[d],t.taskIdNode,c):u.id=u.processid+"_"+d,y.Z.getBoolean(t.multiTasks)){var m=o.length,f=100/m/2/2,b=100/m,v=100/m/2,w=l[d]%m;u.toppadding=b*w+f+"%",u.height=v+"%"}if("object"==(0,g.A)(s)&&("yyyyMMdd"==t.dateformat?(u.start=WebSquare.text.formatDate(this.getCellData(l[d],s[0]),"yyyy/MM/dd","yyyyMMdd"),u.end=WebSquare.text.formatDate(this.getCellData(l[d],s[1]),"yyyy/MM/dd","yyyyMMdd")):(u.start=this.getCellData(l[d],s[0]),u.end=this.getCellData(l[d],s[1]))),h.push(u),"dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat){if(-1!=t.dateformat.indexOf("/")){var S="$2/$1/$3";y.Z.isFF()&&(S="$3/$2/$1"),r.push(new Date(u.start.replace(/(\d{2})\/(\d{2})\/(\d{4})/,S))),r.push(new Date(u.end.replace(/(\d{2})\/(\d{2})\/(\d{4})/,S)))}else if(-1!=t.dateformat.indexOf("-")){S="$2-$1-$3";y.Z.isFF()&&(S="$3-$2-$1"),y.Z.isSafari()?(r.push(new Date(u.start.replace(/(\d{2})-(\d{2})-(\d{4})/,S).wq_replaceAll("-","/"))),
r.push(new Date(u.end.replace(/(\d{2})-(\d{2})-(\d{4})/,S).wq_replaceAll("-","/")))):(r.push(new Date(u.start.replace(/(\d{2})-(\d{2})-(\d{4})/,S))),r.push(new Date(u.end.replace(/(\d{2})-(\d{2})-(\d{4})/,S))))}}else r.push(new Date(u.start)),r.push(new Date(u.end))}return h};var m=[],f={},b={},v=0,w=t.plotColor.split(",");for(n=0;n<r.length;n++,v++){var S={};t.processIdNode&&t.taskIdNode?S.id=p[r[n]]:S.id="process_"+n,S.name=r[n],f[r[n]]=S.id,w.length>v||(v=0),b[r[n]]=w[v],m.push(S)}e.processes.process=m;var _=[];if(""!=s)for(n=0;n<a.length;n++){for(v=0;v<a[n].length;v++){(S={}).label=a[n][v],_.push(S)}e.datatable.datacolumn.push({text:_}),_=[]}var C=[];for(n=0;n<l.length;n++){var x=this._getGanttTaskData(l[n],f,l,d,u,b);C=C.concat(x)}if(e.tasks.task=C,e.tasks.showlabels="1",y.Z.getBoolean(t.autoCategory)||"3.11"==t.version){u.sort((function(t,e){return t-e}));var I=u[0],T=u[u.length-1];if(this._getMonthOfFirstDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,1).getDate()},this._getMonthOfLastDay=function(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},"date"==t.timeBase.toLowerCase()){var k=this._getMonthOfFirstDay(I),L=this._getMonthOfLastDay(T),A=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+k,D=T.getFullYear()+"/"+(T.getMonth()+1)+"/"+L,W=new Date(A),q=new Date(D),M=[],E=new Date(W.getTime());for(M.push(new Date(W.getTime()));E.getTime()<q.getTime();)M.push(new Date(E.setDate(this._getMonthOfLastDay(E)))),E=new Date(E.setDate(this._getMonthOfFirstDay(E))),E=new Date(E.setMonth(E.getMonth()+1>12?0:E.getMonth()+1)),M.push(E);var R="dd/mm/yyyy"==t.dateformat||"dd-mm-yyyy"==t.dateformat||"mm/dd/yyyy"==t.dateformat||"mm-dd-yyyy"==t.dateformat||"yyyy-mm-dd"==t.dateformat||"yyyy/mm/dd"==t.dateformat?t.dateformat.wq_replaceAll("mm","MM"):t.dateformat;if("yyyyMMdd"==R&&(R="yyyy/MM/dd"),2==t.categoryDepth){for(var N={category:[]},F={quater1_start:"/01/01",quater1_end:"/03/31",quater2_start:"/04/01",quater2_end:"/06/30",quater3_start:"/07/01",quater3_end:"/09/30",quater4_start:"/10/01",quater4_end:"/12/31"},O=new Date(W.getTime());O.getTime()<q.getTime();){var B={};O.getMonth()+1<=3?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater1_end),R),B.label=o[0],N.category.push(B),O=new Date(O.getFullYear()+F.quater2_start)):O.getMonth()+1<=6?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater2_end),R),B.label=o[1],N.category.push(B),O=new Date(q.getFullYear()+F.quater3_start)):O.getMonth()+1<=9?(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater3_end),R),B.label=o[2],N.category.push(B),O=new Date(O.getFullYear()+F.quater4_start)):(B.start=WebSquare.date.getFormattedDate(O,R),B.end=WebSquare.date.getFormattedDate(new Date(O.getFullYear()+F.quater4_end),R),B.label=o[3],N.category.push(B),O<q&&(O=new Date(O.getFullYear()+1+F.quater1_start)))}t.resizeLastMonth&&(N.category[N.category.length-1].end=WebSquare.date.getFormattedDate(q,R)),e.categories.push(N)}var P={category:[]};for(n=0;n<M.length;n+=2){(B={}).start=WebSquare.date.getFormattedDate(M[n],R),B.end=WebSquare.date.getFormattedDate(M[n+1],R),B.label=i[M[n].getMonth()],B.start&&B.end&&P.category.push(B)}e.categories.push(P)}else if("time"==t.timeBase.toLowerCase())if("12"==t.timeGap){M=["00:00:00","11:59:59","12:00:00","23:59:59"];var Y=WebSquareLang.fwGanttChart_ampm.split(",");for(P={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=Y[0];break;case 2:B.label=Y[1]}P.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(P)}else if("6"==t.timeGap){for(M=["00:00:00","05:59:59","06:00:00","11:59:59","12:00:00","17:59:59","18:00:00","23:59:59"],Y=WebSquareLang.fwGanttChart_timeGap6Label.split(","),P={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=Y[0];break;case 2:
B.label=Y[1];break;case 4:B.label=Y[2];break;case 6:B.label=Y[3]}P.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(P)}else{for(M=["00:00:00","02:59:59","03:00:00","05:59:59","06:00:00","08:59:59","09:00:00","11:59:59","12:00:00","14:59:59","15:00:00","17:59:59","18:00:00","20:59:59","21:00:00","23:59:59"],Y=WebSquareLang.fwGanttChart_timeGap3Label.split(","),P={category:[]},n=0;n<M.length;n+=2){switch((B={}).start=M[n],B.end=M[n+1],n){case 0:B.label=Y[0];break;case 2:B.label=Y[1];break;case 4:B.label=Y[2];break;case 6:B.label=Y[3];break;case 8:B.label=Y[4];break;case 10:B.label=Y[5];break;case 12:B.label=Y[6];break;case 14:B.label=Y[7]}P.category.push(B)}e.chart.outputdateformat="hh:mn ampm",e.categories.push(P)}else if("datetime"==t.timeBase.toLowerCase())if("12"==t.timeGap){A=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 00:00:00",D=T.getMonth()+1+"/"+T.getDate()+"/"+T.getFullYear()+" 23:59:59",W=new Date(A),q=new Date(D),M=[],E=new Date(W.getTime());for(M.push(E);E<q;)"0"==E.getSeconds()?(E=new Date(E.getTime()+43199e3),M.push(E)):(E=E.getTime()+1e3,E=new Date(E),M.push(E));P={category:[]};if(2==t.categoryDepth){for(N={category:[]},n=0;n<M.length;n+=4){(B={}).start=M[n],B.end=M[n+3],B.label=WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),N.category.push(B)}e.categories.push(N)}for(Y=WebSquareLang.fwGanttChart_ampm.split(","),n=0;n<M.length;n+=2){(B={}).start=M[n],B.end=M[n+1],1*M[n+1].getHours()>12?B.label=Y[1]:B.label=Y[0],P.category.push(B)}e.categories.push(P)}else if("24"==t.timeGap.toLowerCase()){A=I.getMonth()+1+"/"+I.getDate()+"/"+I.getFullYear()+" 00:00:00",D=T.getMonth()+1+"/"+T.getDate()+"/"+T.getFullYear()+" 23:59:59",W=new Date(A),q=new Date(D),M=[],E=new Date(W.getTime());for(M.push(E);E<q;)"0"==E.getSeconds()?(E=new Date(E.getTime()+86399e3),M.push(E)):(E=E.getTime()+1e3,E=new Date(E),M.push(E));if(2==t.categoryDepth){N={category:[]},k=this._getMonthOfFirstDay(I),L=this._getMonthOfLastDay(T),A=I.getFullYear()+"/"+(I.getMonth()+1)+"/"+k,D=T.getFullYear()+"/"+(T.getMonth()+1)+"/"+L,W=new Date(A),q=new Date(D);var V=[];E=new Date(W.getTime());for(V.push(new Date(W.getTime()));E.getTime()<q.getTime();)V.push(new Date(E.setDate(this._getMonthOfLastDay(E)))),E=new Date(E.setDate(this._getMonthOfFirstDay(E))),E=new Date(E.setMonth(E.getMonth()+1>12?0:E.getMonth()+1)),V.push(E);for(n=0;n<V.length;n+=2){(B={}).start=WebSquare.date.getFormattedDate(V[n],t.dateformat),B.end=WebSquare.date.getFormattedDate(V[n+1],t.dateformat),B.label=i[V[n].getMonth()],B.start&&B.end&&N.category.push(B)}e.categories.push(N)}for(P={category:[]},n=0;n<M.length;n+=2){(B={}).start=M[n],B.end=M[n+1],B.label=2==t.categoryDepth?WebSquare.date.getFormattedDate(M[n],"dd")+WebSquareLang.fwGanttChart_dateSuffix:WebSquare.date.getFormattedDate(M[n],"yyyy/MM/dd"),P.category.push(B)}e.chart.outputdateformat="dd/mm/yyyy hh:mn:ss ampm",e.categories.push(P)}}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRealtimeData=function(t,e,i,o){var s={},r=this.getAllArray();if(t||(t=r.columnInfo[0]),e||(e=r.columnInfo[1]),!i){for(var a=new Array,n=0;n<r.columnInfo.length;n++)"number"==this.getCellInfo(n).options.dataType&&a.push(r.columnInfo[n]);i=a[0]}return this._multiSerises=function(){(s={}).categories=[{category:[]}],s.dataset=[];for(var t=o.plotColor.split(","),i=this.getColumnDistinctDataArray(e,{sort:!1}),r=0;r<i.length;r++){var a=this._getfwRealtimeChartSeriesDate(i[r]);a.color=t[r],s.dataset.push(a)}return s},this._getfwRealtimeChartSeriesDate=function(t){var e={};return e.seriesname=t,e},this._multiSerises()},nt.prototype.getFusionChartSimpleData=function(t,e,i,o,s){try{var r={},a=this.getAllArray();if(e||(e=a.columnInfo[0]),i||(i=a.columnInfo[1]),!o){for(var n=new Array,l=0;l<a.columnInfo.length;l++)"number"==this.getCellInfo(l).options.dataType&&n.push(a.columnInfo[l]);o=n[0]}switch(this._singleSerises=function(){for(var t=[],i=this.getAllJSON(),a=0;a<i.length;a++){var n={label:i[a][e],value:i[a][o],
color:i[a][s]};t.push(n)}var l={labelName:"",valueName:""};return i.length>0&&(l.labelName=this.getColumnName(e),l.valueName=this.getColumnName(o)),r.dataName=l,r.data=t,r},this._multiSerises=function(){(r=this._getFusionChartCategory()).dataset=[];for(var t=this.getColumnDistinctDataArray(i,{sort:!1}),e=0;e<t.length;e++){var o=this._getFusionChartSeriesDate(t[e]);r.dataset.push(o)}return 0==r.dataset.length&&(r={}),r},this._combiSerises=function(){return!1},this._msStacked=function(){return!1},this._msStackedColumn2DLineDY=function(){return!1},this._scatter=function(){return!1},this._zoomLine=function(){return 1!=this.getRowCount()&&this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColumnDistinctDataArray(e,{sort:!1}),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var r={data:[]};r.seriesname=t;var a,n=this.getColumnDistinctDataArray(e,{sort:!1}),l=this.getRowCount(),h=this.getMatchedIndex(i,t,!0,0,l);this.options.getMatchedFromAllData&&(a=!0);for(var d=0;d<n.length;d++){for(var c={value:0},u=0;u<h.length;u++)if(n[d]==this._getCellData(h[u],e,a)){var p=this._getCellData(h[u],s,a);c=p?{value:this._getCellData(h[u],o,a),color:p}:{value:this._getCellData(h[u],o,a)}}r.data.push(c)}return r},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line":case"area2d":case"ssgrid":case"funnel":case"pyramid":case"sparkline":case"sparkcolumn":case"sparkwinloss":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedarea2dlinedy":case"stackedbar2d":case"stackedbar3d":case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollbar2d":case"overlappedcolumn2d":case"overlappedbar2d":case"scrollstackedcolumn2d":case"scrollstackedbar2d":return this._multiSerises();case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn2dlinedy":case"stackedcolumn3dline":case"mscombidy2d":case"mscombidy3d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":case"scrollcombi2d":case"scrollcombidy2d":return this._combiSerises();case"scatter":case"bubble":case"zoomscatter":return this._scatter();case"zoomline":case"zoomlinedy":return this._zoomLine();case"msstackedcolumn2d":case"scrollmsstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":case"scrollmsstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRowArray=function(t){try{var e={};return e.columnInfo=this.cellIdList,e.data=this.getRowData(t),e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getAllArray=function(t){try{var e={};return void 0!==t&&null!=t||(t={}),"object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,e.data=this.getAllData(t),e}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getRangeArray=function(t,e,i){try{var o={};return o.columnInfo=this.cellIdList,o.data=this.getRangeData(t,e,i),o}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getMatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={});var a={};"object"===(0,g.A)(r.includeColumns)&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;var n=this.getMatchedIndex(t,e,i,o,s),l=[];this.options.getMatchedFromAllData&&(r.realRowIndex=!0);for(var d=0;d<n.length;d++)for(var c=this.getRowData(n[d],r),u=0;u<c.length;u++)l.push(c[u]);return a.data=l,a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.getUnmatchedArray=function(t,e,i,o,s,r){try{void 0!==r&&null!=r||(r={});var a={};"object"===(0,
g.A)(r.includeColumns)&&null!=r.includeColumns&&r.includeColumns.constructor===Array?a.columnInfo=r.includeColumns:a.columnInfo=this.cellIdList;for(var n=this.getUnmatchedIndex(t,e,i,o,s),l=[],d=0;d<n.length;d++)for(var c=this.getRowData(n[d],r),u=0;u<c.length;u++)l.push(c[u]);return a.data=l,a}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setCellData=function(t,e,i,o,s){try{"object"==(0,g.A)(t)&&null!=t&&"number"==typeof t.realRowIndex&&(t.filteredRowIndex=t.realRowIndex,t.realRowIndex=!0),this._setCellData.call(this,t,e,i,o,s)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setCellAllData=function(t,e,i,o,s){try{"object"==(0,g.A)(t)&&null!=t?(t.realRowIndex=!0,this._setCellData.call(this,t)):this._setCellData.call(this,{filteredRowIndex:t,colID:e,value:i,direction:o,skipBroadCast:s,realRowIndex:!0});var r=this.getRowCount();this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getTotalCol()),r!==this.getRowCount()&&this.broadcast({gridView:["notifySettedFilter"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype._setCellData=function(t,e,i,o,s,r,a,n){try{var d,c,u=this.options.depthColumn||!1;if("object"==(0,g.A)(t)&&null!=t){e=t.colID,i=t.value,t.direction,s=t.skipBroadCast,r=t.noEvent,a=t.excludeId,c=t.notifyRowIndex,u=this.options.depthColumn&&!1!==t.realRowIndex||!0===t.realRowIndex;var p=t.filteredRowIndex;n=t.skipInstance,d=t.undoRedo||"",t=null,t=p}!1!==s&&(s=s||r||WebSquare.DataCollection.stopBroadCast),!0!==this.options.useNull&&null==i&&(i=""),this.broadcast({gridView:["notifyBeforeSettedCellData"]}),e=this.getColumnID(e);var m=this.getColumnIndex(e),f=this.getTotalRow(),b=this.getTotalCol(),v=u?t:this.filteredRowIndexArr[t],w=this.cellIdList.length;if(t>=0&&v<f&&m>=0&&m<b){var S=this.cellInfoHash[e],_="";S&&("expression"==S.options.inputType?_=S.getExpressionValue(v):(_=this.dataArr[v*w+m],!0!==this.options.useNull&&null==_&&(_="")));var C=!(!this.options.preserveType&&!this.options.keepDataType||"number"!=S.options.dataType),x=!(!this.options.preserveType||"text"!=S.options.dataType||"number"!=typeof i);if("bigDecimal"==S.options.dataType&&"string"==typeof i)if(""===i)i="";else{var I=(T=i.split("."))[1]?T[1].length:0;try{i=Big(i).toFixed(I)}catch(t){i=NaN}}else if("bigDecimal"==S.options.dataType)if($l("If dataType is bigDecimal, value must be entered to String.["+this.id+"]"),""===(i+=""))i="";else{var T;I=(T=i.split("."))[1]?T[1].length:0;try{i=Big(i).toFixed(I)}catch(t){i=NaN}}else C&&!isNaN(parseFloat(i))&&isFinite(i)?i=Number(i):x&&null!==i?i=i.toString():"json"===S.options.dataType&&"object"===(0,g.A)(i)&&null!=i&&(i=l.I._jsonStringify(i));var k=i,L=_;if(null!=i&&(k="dataMap"==this.initializeType&&i.constructor===Array&&0===i.length?i:i.toString().replace(/\r(\n)?/,"\n")),null!=_&&(L=_.toString().replace(/\r(\n)?/,"\n")),k!==L){if("dataList"==this.initializeType&&!r)if(!1===O.f.fireEvent(this,"onbeforecelldatachange",{rowIndex:t,colID:e,oldValue:_,newValue:i}))return void this.broadcast({gridView:["notifyCellChanged",[t,e]],fusionchart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifyInvalid"],generalComp:["rollback"]});this.dataArr[v*w+m]=i,"grid"==this.initializeType&&this.options.ref&&!0!==n&&this._setInstanceValue(v,e,i,!0);var A=!0;if("undo"!=d&&"redo"!=d||(A=!1),A&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({row:t,col:e,oldValue:_,value:i}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),!S.options.ignoreStatus){var D=!1,W=this.originalDataArr[v*w+m];if(y.Z.isNull(W)&&!0!==this.options.useNull&&(W=""),W===i){for(var q=[],M=0;M<w;M++)!0!==this.ignoreStatusColArr[M]&&q.push(this.originalDataArr[v*w+M]);var E=[]
;for(M=0;M<w;M++)if(!0!==this.ignoreStatusColArr[M]){var R="";"expression"==S.options.inputType?R=S.getExpressionValue(v):null==(R=this.dataArr[v*w+M])&&!0!==this.options.useNull&&(R=""),E.push(R)}for(var N=!1,F=0;F<q.length;F++)if(q[F]!=E[F]){N=!0;break}N||(D=!0)}D?("U"==this._getRowStatus(v)&&this.modifyRowStatus(t,"R"),"U"==this._getCellStatus(v,m)&&this.modifyCellStatus(t,m,"R")):(this._updateRowStatus(v,m),this._updateCellStatus(v,m))}if("dataList"==this.initializeType&&(this.fireOnModelChangeEvent({type:"cell",rowIndex:t,colID:e,oldValue:_,newValue:i}),r||O.f.fireEvent(this,"oncelldatachange",{rowIndex:t,colID:e,oldValue:_,newValue:i})),!s){var B=this.getFilteredRowIndex(v);null==B&&(B=t),"number"!=typeof c&&(c=B),this.broadcast({colID:e,gridView:["notifySettedCellData",[c,e,i]],linkedDataList:["notifyCellChanged",[v,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"cell",refresh:!0,rowIndex:v,colID:e,newValue:i,oldValue:_}]],treeview:["notifySetCellData",[B,e,i,_]],generalComp:"both",excludeId:a,type:"setCellData"})}}}}catch(t){h.Y.printStackTrace(t)}},nt.prototype._setData=function(t,e,i){try{e=this.getColumnIndex(e);this.dataArr[t*this.getColumnCount()+e]=i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e),s=this.options.depthColumn?t:this.getRealRowIndex(t);this._setOriginalCellData.call(this,s,o,i)}catch(t){h.Y.printStackTrace(t)}},nt.prototype._setOriginalCellData=function(t,e,i){try{var o=this.getColumnIndex(e);null==i&&!0!==this.options.useNull&&(i="");var s=this.getTotalRow(),r=this.getTotalCol(),a="";if(t>=0&&t<s&&o>=0&&o<r&&(a=this.getOriginalCellData(t,o)),t>=0&&t<s&&o>=0&&o<r){var n=i,l=a;null!=i&&(n=i.toString().replace(/\r(\n)?/,"\n")),null!=a&&(l=a.toString().replace(/\r(\n)?/,"\n")),n!==l&&(this.originalDataArr[t*this.getColumnCount()+o]=i)}}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setColumnDefaultValue=function(t,e){try{t=this.getColumnID(t);var i=this.getCellInfo(t);i.options.defaultValue=e,!0===this.options.useNull&&"null"===i.options.defaultValue&&(i.options.defaultValue=null),this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySetColumnDefaultValue",[t,e]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.setRowData=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=this.getColumnCount(),a=!1,n={};if("object"===(0,g.A)(o)&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d=0;d<r;d++){var c=this.cellIdList[d],u=this.cellInfoHash[c];if(!a||n[c]){var p=e[d];null==p&&!0!==this.options.useNull&&(p=u.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:p,noEvent:!0})}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:c,value:u.options.defaultValue,noEvent:!0})}var m=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[m]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setOriginalDataArr=function(t){try{this.originalDataArr=t}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.resetOriginalDataArr=function(){try{this.originalDataArr=this.dataArr.slice()}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.setDataFile=function(t,e,i,o,s,r){try{s=null==s?1:parseInt(s,10),"string"==typeof t&&(t=r?this.toArray(t,r):this.toArray(t));var a,n=[],d=parseInt(i.length,10),c=l.I.getComponentById(o),u=[];if(c._excelUploadInfo){var p=JSON.parse(c._excelUploadInfo);p.convertIndexArr&&(u=p.convertIndexArr)}for(var g=0;g<d;g++){
"expression"==(b=l.I.getComponentById(o).getCellInfo(i[g])).options.inputType&&n.push(g)}a=t.length/d;for(g=0;g<n.length;g++)for(var m=parseInt(n[g],10),f=0;f<a;f++){t[E=f*d+m]=""}for(g=0;g<d;g++){var b,y=(b=l.I.getComponentById(o).getCellInfo(i[g])).options.dataType;if(b.itemsetObj&&""!=b.itemsetObj.nodeset&&b.itemsetObj.nodeset.wq_replaceAll(" ","").indexOf("data:")>=0&&0==this._isInitialzedItemArr(b)){b.itemArr=[];var v=b.itemsetObj.nodeset.replace("data:",""),w=WebSquare.DataCollection.comp[v];if(null==w&&b.scope_id&&(w=WebSquare.DataCollection.comp[b.scope_id+"_"+v]||null),w&&WebSquare.idCache[w.uuid]){var S=w.options&&!0===w.options.useNull;switch(w.initializeType){case"linkedDataList":"select"!==b.options.inputType&&"checkcombobox"!==b.options.inputType&&"autoComplete"!==b.options.inputType||w&&"linkedDataList"===w.initializeType&&null!=w.conditionInfo&&w.conditionInfo.filterInfo.useRef&&(w=w._dataList);case"dataList":for(var _=[],C={},x=0;x<w.getDataLength();x++){var I=w.getCellData(x,b.itemsetObj.label),T=w.getCellData(x,b.itemsetObj.value);if(S&&null===T){if(null===C[I])continue}else if(C[I]==T)continue;C[I]=T,_.push({label:S&&null===I?I:I+"",value:S&&null===T?T:T+""})}b.itemArr=_;break;case"dataMap":for(_=[],C={},x=0;x<w.getCount();x++){I=w.get(b.itemsetObj.label),T=w.get(b.itemsetObj.value);if(S&&null===T){if(null===C[I])continue}else if(C[I]==T)continue;C[I]=T,_.push({label:S&&null===I?I:I+"",value:S&&null===T?T:T+""})}b.itemArr=_}}}if("select"==b.options.inputType){var k=[];for(f=0;f<b.itemArr.length;f++){var L=b.itemArr[f];if(2!=s){var A=!1;for(x=0;x<u.length;x++)if(u[x]==g.toString()){A=!0;break}if(A)k[L.value]=L.value;else{k[L.label]=L.value;var D=b.getItemText(f);L.label!==D&&(k[D]=L.value)}}else k[L.value]=L.value}for(f=0;f<a;f++){var W=k[t[E=f*d+g]];(!1!==b.options.selectedData||W)&&(t[E]=W)}}else if("checkcombobox"==b.options.inputType){for(k=[],f=0;f<b.itemArr.length;f++){for(A=!1,x=0;x<u.length;x++)if(u[x]==g.toString()){A=!0;break}L=b.itemArr[f];if(A)k[L.value]=L.value;else{k[L.label]=L.value;D=b.getItemText(f);L.label!==D&&(k[D]=L.value)}}for(f=0;f<a;f++){var q=[],M=t[E=f*d+g].split(b.separator);for(x=0;x<M.length;x++)q.push(k[M[x]]);t[E]=q.join(b.separator)}}else if("autoComplete"==b.options.inputType){for(k=[],f=0;f<b.itemArr.length;f++){for(A=!1,x=0;x<u.length;x++)if(u[x]==g.toString()){A=!0;break}L=b.itemArr[f];if(A)k[L.value]=L.value;else k[L.label]=L.value,D=(D=b.getItemText(f)).replace(b.options.delimiter," "),L.label!==D&&(k[D]=L.value)}for(f=0;f<a;f++){(W=k[t[E=f*d+g]])&&(t[E]=W)}}if(""!=b.options.displayFormat)for(f=0;f<a;f++){var E,R,N=t[E=f*d+g],F=b.options.displayFormat;if("number"==y||"bigDecimal"==y||"float"==y)R=WebSquare.text.unformatCurrency(F,N);else if("date"==y)b.options.useMonthYearFormat?(N=N.replace(/\{|\}|\[|\]|\/|\?|\.|\,|\;|\:|\)|\*|\~|\`|\!|\^|\-|\_|\+|\<|\>|\@|\#|\$|\%|\&|\\|\=|\(|\'|\"|\s/g,""),R=WebSquare.date.getIOUnFormatDate(N,b.options.ioFormat,b.options.calendarValueType)):R=WebSquare.text.unformatDate(F,N);else if("time"==y)R=WebSquare.text.unformatTime(F,N);else if("euro"==y&&b.options.customModelFormatter){var O=new RegExp("["+b.options.delimiter+"]","g"),B=new RegExp("["+b.options.decimalDelimiter+"]","g");R=(N=N.replace(O,"")).replace(B,".")}else R=WebSquare.text.unformatText(F,N);t[E]=R}}this.setData(t,e,i)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setData=function(t,e,i,o,s){try{if("string"==typeof t&&(t=s?this.toArray(t,s):this.toArray(t)),i){if(i instanceof Array||"string"!=typeof i||(i=this.toArray(i)),!y.Z.isInteger(t.length/i.length))return void d.v.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+i.length+"].["+this.id+"]");t=this.getMappingData(t,i,e)}
if(!y.Z.isInteger(t.length/this.oneRowDataLength))return void d.v.printLog("[WebSquare.DataCollection.dataController.setData] Inconsistent array. Array length["+t.length+"] is not a multiple of column length["+this.oneRowDataLength+"].["+this.id+"]");for(var r=[],a=0;a<this.cellIdList.length;a++)r[a]=this.getCellInfo(this.cellIdList[a]);for(var n=t.length/this.oneRowDataLength,l=0;l<r.length;l++)if(r[l].options.setFormatter)for(var c=y.Z.getGlobalFunction(r[l].options.setFormatter,this.scope_id),u=0;u<n;u++){for(var p=[],g=0;g<this.oneRowDataLength;g++)p.push(t[u*this.oneRowDataLength+g]);"function"==typeof c&&(t[u*this.oneRowDataLength+l]=c.call(this,p,u,this.cellIdList[l]))}if(null!=o&&o.length>0&&t.length/this.oneRowDataLength===o.length){var m=!!e;this.setGridData(t,e,m),this.setAllRowStatus(o,e)}else this.setGridData(t,e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setGridData=function(t,e,i){try{this.options.keepFilter&&this.broadcast({gridView:["notifyBeforeKeepFilter"]}),this.broadcast({gridView:["notifySettedData",[e]]}),this.filterManager.clear(),this.filteredRowIndexArr=[];for(var o=this.getTotalRow(),s=0;s<o;s++)this.filteredRowIndexArr.push(s);this.options.keepFilter||this.broadcast({gridView:["clearHeaderSort"]});var r=t.length/this.oneRowDataLength;if(this.options.keepDataType||this.options.preserveType||this._bJsonData){var a=this.getTotalCol();for(s=0;s<a;s++){var n=this.getCellInfo(s),d="number"==n.options.dataType,c=!(!this.options.preserveType||"text"!=n.options.dataType);if(d)for(var u=0;u<r;u++){var p=t[u*this.oneRowDataLength+s];!isNaN(parseFloat(p))&&isFinite(p)&&(t[u*this.oneRowDataLength+s]=Number(p))}else if(c)for(u=0;u<r;u++){var m=t[u*this.oneRowDataLength+s];"number"==typeof m&&(t[u*this.oneRowDataLength+s]=m.toString())}else if("json"===n.options.dataType)for(u=0;u<r;u++){var f=t[u*this.oneRowDataLength+s];"object"===(0,g.A)(f)&&null!=f&&(t[u*this.oneRowDataLength+s]=l.I._jsonStringify(f))}}}e=e||!1;var b=this.getTotalRow();if(e)for(s=0;s<t.length;s++)this.dataArr.push(t[s]),this.originalDataArr.push(t[s]);else b=0,this.dataArr=t,this.filteredRowIndexArr=[],this.originalDataArr=[],this.originalDataArr=this.dataArr.slice(0),this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="","dataList"!=this.initializeType&&"grid"!=this.initializeType||this.removeManager.removeAll();for(s=0;s<r;s++)this.filteredRowIndexArr.push(s+b);if(i||this._initRowStatus(b),i||this._initCellStatus(b),this.options.keepRowPosition&&e&&this.options.keepRowPosition||(this.rowPosition=null),!e&&null!=this.options.initRowPosition){var y=parseInt(this.options.initRowPosition,10);this.setRowPosition(y)}var v={linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[t,e,b]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"};"string"==typeof this.options.refreshMode&&""!=this.options.refreshMode&&(v.refreshMode=this.options.refreshMode),this.broadcast(v),this.getBroadcast()||this.broadcast({gridView:["_notifySettedGridDataAll",[e,b]],_bForceBroadcast:!0}),O.f.fireEvent(this,"ondataload"),this.options.keepFilter&&!this.flag_preventLoop&&(this.flag_preventLoop=!0,this.broadcast({gridView:["notifyAfterKeepFilter"]}),this.flag_preventLoop=!1)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.insertData=function(t,e){try{return this._insertData(t,e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype._insertData=function(t,e,i){try{if(null==e)return void $l("data is null");var o=this.getColumnCount(),s=e.length/this.getColumnCount();if(e){if(!(e instanceof Array))return;if(!y.Z.isInteger(s))return void d.v.printLog("[WebSquare.DataCollection.dataController.getMappingData] Inconsistent array. Array length["+e.length+"] is not a multiple of column length["+o+"].["+this.id+"]")}
var r={},a=[],n=s,l=0,c=1;i<0&&(n=1,l=s+1,c=-1);for(var u=this.filteredRowIndexArr[t],p=n;p*c>l*c;p-=c){var g=t+p-1;r[g]=[],a.push(g),this.insertRow(t,{noEvent:!0});for(var m=0;m<o;m++){var f=e[o*(p-1)+m];this._setCellData({filteredRowIndex:t,colID:m,value:f,noEvent:!0}),r[g].push(f)}}this.broadcast({gridView:["notifyDataChanged",[{refreshScroll:!0}]],linkedDataList:["notifyRowInserted",[u,a]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset",[{type:"render",refresh:!0}]],treeview:["notifyInsertData",[a.join(","),!this._getBroadcastAll()]],generalComp:"both"}),O.f.fireEvent(this,"oninsertrow",{insertedDataObj:r})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setRowXML=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");var r;this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t)),r=void 0===e.documentElement?e:e.documentElement;var a=[],n={},l=this.getColumnCount(),d=!1,c={};if("object"===(0,g.A)(o)&&null!=o&&o.constructor===Array){d=!0;for(var u=0;u<o.length;u++)c[o[u]]=!0}for(var p=0;p<l;p++){var m=this.cellIdList[p],f=null,b=this.cellInfoHash[m],v=null;if(!d||c[m])if(b.options.importFormatter)a.push(m);else{if(null!=(v=r.selectSingleNode(m)))if(""==this.options.valueNode||this.allowTextNode){if(this.allowTextNode)f=null==(w=WebSquare.xml.getCDataNodeValue(v))&&!0!==this.options.useNull?this.getTextNodeValue(v):w;else f=this.getTextNodeValue(v);!f&&this.allowTextNode&&(f=""==this.options.valueNode?null:v.getAttribute(this.options.valueNode))}else f=v.getAttribute(this.options.valueNode);else if(null!=(v=WebSquare.xml.getElementsByTagName(r,m)[0]))if(""==this.options.valueNode||this.allowTextNode){var w;if(this.allowTextNode)f=null==(w=WebSquare.xml.getCDataNodeValue(v))&&!0!==this.options.useNull?this.getTextNodeValue(v):w;else f=this.getTextNodeValue(v);!f&&this.allowTextNode&&(f=""==this.options.valueNode?null:v?v.getAttribute(this.options.valueNode):null)}else f=v?v.getAttribute(this.options.valueNode):null;null==f&&!0!==this.options.useNull&&(f="number"==b.options.dataType&&b.options.defaultValue&&!isNaN(b.options.defaultValue)?parseInt(b.options.defaultValue,10):b.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:p,value:f,noEvent:!0}),n[m]=f}else"dataMap"!==this.initializeType||s||this._setCellData({filteredRowIndex:t,colID:m,value:b.options.defaultValue,noEvent:!0})}for(var S=0;S<a.length;S++){b=this.cellInfoHash[a[S]];try{var _=t,C=y.Z.getGlobalFunction(b.options.importFormatter,this.scope_id);"function"==typeof C&&(f=C.call(this,n,_,a[S]))}catch(t){f=b.options.defaultValue,h.Y.printStackTrace(t,null,this)}this._setCellData({filteredRowIndex:t,colID:a[S],value:f,noEvent:!0})}var x=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[x]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setXML=function(t,e,i,o){try{if(null==t)return void d.v.printLog("[WebSquare.DataCollection.dataController.setXML] XML is null["+this.id+"]");var s=this.xmlData2ArrData(t,i);if(void 0===s.dataArr)return void d.v.printLog("[WebSquare.DataCollection.dataController.setXML] DataArray which converted from XML is undefined.["+this.id+"]");var r=y.Z.getBoolean(o)?s.rowStatusArr:[];this.setData(s.dataArr,e,null,r)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.insertXML=function(t,e){try{if(null==e)return void $l("data is null");var i;i=void 0===e.documentElement?e:e.documentElement;var o=this.xmlData2ArrData(i);this.insertData(t,o.dataArr)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setJSON=function(t,e,i,o){try{if(null==t)return void d.v.printLog("[WebSquare.DataCollection.dataController.setJSON] data is null["+this.id+"]")
;if(null!=this.options.customUnformatter){var s=y.Z.getGlobalFunction(this.options.customUnformatter);"function"==typeof s&&(t=s(this,t))}var r=this.jsonData2ArrData(t,i);if(void 0===r.dataArr)return void d.v.printLog("[WebSquare.DataCollection.dataController.setJSON] DataArray which converted from JSON is undefined.["+this.id+"]");var a=y.Z.getBoolean(o)?r.rowStatusArr:[];this.setData(r.dataArr,e,null,a)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setRowJSON=function(t,e,i,o,s){try{if(null==e)return void $l("data is null");this.broadcast({treeview:["notifyBeforeSetRowData",[t,i]]}),i||(t=this.insertRow(t));var r=e,a=!1,n={};if("object"===(0,g.A)(o)&&null!=o&&o.constructor===Array){a=!0;for(var l=0;l<o.length;l++)n[o[l]]=!0}for(var d in e)if(!a||n[d]){m=this.getCellInfo(d);var c=null;if(m.options.importFormatter)try{var u=this.getColumnIndex(d),p=y.Z.getGlobalFunction(m.options.importFormatter,this.scope_id);"function"==typeof p&&(c=p.call(this,r,u,d))}catch(t){c=m.options.defaultValue,h.Y.printStackTrace(t,null,this)}else c=e[d];null==c&&!0!==this.options.useNull&&(c=m.options.defaultValue),this._setCellData({filteredRowIndex:t,colID:d,value:c,noEvent:!0})}else if("dataMap"===this.initializeType&&!s){var m=this.getCellInfo(d);this._setCellData({filteredRowIndex:t,colID:d,value:m.options.defaultValue,noEvent:!0})}var f=this.filteredRowIndexArr[t];this.broadcast({gridView:["notifyRowModified",[t]],linkedDataList:["notifyRowChanged",[f]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifySetRowData",[t]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.insertJSON=function(t,e){try{if(null==e)return void d.v.printLog("[WebSquare.DataCollection.dataController.insertJSON] data is null["+this.id+"]");if(null!=this.options.customUnformatter){var i=y.Z.getGlobalFunction(this.options.customUnformatter);"function"==typeof i&&(e=i(this,e))}var o=this.jsonData2ArrData(e);if(void 0===o.dataArr)return void d.v.printLog("[WebSquare.DataCollection.dataController.insertJSON] DataArray which converted from JSON is undefined.["+this.id+"]");this.insertData(t,o.dataArr)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setArray=function(t,e,i,o,s){try{if(null==t)return void d.v.printLog("[WebSquare.DataCollection.dataController.setArray] data is null["+this.id+"]");var r=t.data,a=[];if(a="object"===(0,g.A)(i)&&null!=i&&i.constructor===Array?i:t.columnInfo,void 0===r)return void d.v.printLog("[WebSquare.DataCollection.dataController.setArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");var n=y.Z.getBoolean(o)?t.rowStatus:[];this.setData(r,e,a,n,s)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setArrayFile=function(t,e,i,o,s){try{if(null==o&&(o=1),null==t)return void d.v.printLog("[WebSquare.DataCollection.dataController.setArrayFile] data is null["+this.id+"]");var r=t.data,a=t.columnInfo;if(void 0===r)return void d.v.printLog("[WebSquare.DataCollection.dataController.setArrayFile] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setDataFile(r,e,a,i,o,s)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setRowArray=function(t,e,i){try{if(null==e)return void d.v.printLog("[WebSquare.DataCollection.dataController.setRowArray] data is null["+this.id+"]");var o;if(0==(o=this.getMappingData(e.data,e.columnInfo)).length)return void d.v.printLog("[WebSquare.DataCollection.dataController.setRowArray] DataArray which converted from jsonArray is undefined.["+this.id+"]");this.setRowData(t,o,i)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.loadData=function(t){try{var e=this._getLoadInfo(t);if("json"!==e.dataType&&"xml"!==e.dataType&&"array"!==e.dataType)return void d.v.printLog("[WebSquare.DataCollection.dataController.loadData] Invalid dataType: '"+t.dataType+"' detected. Valid types are 'JSON', 'XML', or 'Array'. ["+this.id+"]");var i={dataType:e.dataType,dataProvider:e.dataProvider,
maxRowCount:e.maxRowCount,chunkRowCount:e.chunkRowCount,optionParam:e.optionParam,columnInfo:e.columnInfo,dataListId:e.dataListId},o=new XMLHttpRequest,s=this.uuid,r=e.callback,a=0,n="";o.onreadystatechange=function(){if(o.readyState>2&&200==o.status)for(n=o.responseText.substr(a);n.length>0&&0===n.indexOf("<ret>")&&-1!==n.indexOf("</ret>");){var t=n.indexOf("</ret>")+6,i=n.substring(0,t);a+=i.length;var l=WebSquare.xml.parse(i);if(WebSquare.xml.findNode(l,"ret/deniedCodeList")){var h="";switch(WebSquare.xml.getValue(l,"ret/deniedCodeList")){case"101":h=WebSquare.language.getMessage("DataList_msg2");break;case"102":h=WebSquare.language.getMessage("DataList_msg3");break;case"201":h=WebSquare.language.getMessage("DataList_msg4");break;case"202":h=WebSquare.language.getMessage("DataList_msg5");break;default:h=WebSquare.language.getMessage("DataList_msg1")}r&&r(null,h)}else{var d=l.getElementsByTagName("data")[0].firstChild;if(d=WebSquare.xml.serialize(d),!r||!1!==r(d)){var c=WebSquare.idCache[s];switch(e.dataType){case"json":d=JSON.parse(d),c.setJSON(d,!0);break;case"xml":d=WebSquare.xml.isDocument(d)?d:WebSquare.xml.parse(d),c.setXML(d,!0);break;case"array":c.setData(d,!0)}}}n=n.substr(t)}};try{o.timeout=e.timeout,o.ontimeout=function(t){var e=WebSquare.idCache[s];d.v.printLog("[WebSquare.DataCollection.dataController.loadData] Request timed out after "+o.timeout+"ms. ["+e.id+"]")}}catch(t){h.Y.printStackTrace(t)}o.open("POST",e.action,!0),e.withCredentials&&(o.withCredentials=!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"),o.send(JSON.stringify(i))}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getLoadInfo=function(t){try{var e={},i=(t=t||{}).dataType?t.dataType.toLowerCase():"",o=t.msaName||"",s=l.I.getServletURL(this,o,"loadData.wq",t.action),r=t.withCredentials+""=="true",a=t.dataProvider||"",n=t.maxRowCount?t.maxRowCount+"":"",d=t.chunkRowCount?t.chunkRowCount+"":"",c=t.timeout||null,u=t.callback||null;u&&(u="function"==typeof u?u:y.Z.getGlobalFunction(u,this.scope_id));var p=t.optionParam||null,g=this.element.columnInfo,m=this.id;return e.dataType=i,e.msaName=o,e.action=s,e.withCredentials=r,e.dataProvider=a,e.maxRowCount=n,e.chunkRowCount=d,e.timeout=c,e.callback=u,e.optionParam=p,e.columnInfo=g,e.dataListId=m,e}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.rowMoveUp=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.options.depthColumn?this.getTotalRow():this.getRowCount();if(e>=i&&(e=i-1),e<=0)return;this._rowMoveUp(t,e,e-1)}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.rowMoveDown=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(e<0&&(e=0),e>=(this.options.depthColumn?this.getTotalRow():this.getRowCount())-1)return;this._rowMoveDown(t,e,e+1)}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.rowMoveUpFiltered=function(t){try{if(t<=0)return;var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.options.depthColumn?this.getTotalRow():this.getRowCount();e>=i&&(e=i-1),this._rowMoveUp(t,e,this.getRealRowIndex(t-1))}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.rowMoveDownFiltered=function(t){try{if(t>=this.getTotalRow()-1||t<0)return;var e=this.options.depthColumn?t:this.getRealRowIndex(t);e<0&&(e=0),this._rowMoveDown(t,e,this.getRealRowIndex(t+1))}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype._rowMoveUp=function(t,e,i){try{for(var o,s=this.oneRowDataLength,r=0;r<s;r++)o=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*e+r],this.dataArr[s*e+r]=o,o=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*e+r],this.originalDataArr[s*e+r]=o;var a=this.getRowStatus(t-1),n=this.getRowStatus(t);this._setRowStatus(i,n),this._setRowStatus(e,a),e=this.filteredRowIndexArr[t],this.broadcast({linkedDataList:["notifyRowMoveUp",[e]],gridView:["notifyRowMoveUp",[t]],
generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype._rowMoveDown=function(t,e,i){try{for(var o,s=this.oneRowDataLength,r=0;r<s;r++)o=this.dataArr[s*i+r],this.dataArr[s*i+r]=this.dataArr[s*e+r],this.dataArr[s*e+r]=o,o=this.originalDataArr[s*i+r],this.originalDataArr[s*i+r]=this.originalDataArr[s*e+r],this.originalDataArr[s*e+r]=o;var a=this.getRowStatus(t+1),n=this.getRowStatus(t);this._setRowStatus(i,n),this._setRowStatus(e,a),e=this.filteredRowIndexArr[t],this.broadcast({linkedDataList:["notifyRowMoveDown",[e]],gridView:["notifyRowMoveDown",[t]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.insertRow=function(t,e){try{e=e||{};var i=this.getDataLength(),o=this.getTotalRow();"string"!=typeof t&&null!=t||(t=parseInt(t,10)),isNaN(t)&&(t=i);var s=t;this.filterManager.useFilter()?"true"==e.insertIntoSortedRow&&this.filterManager.onlySortFilter()||(s=o):s>o&&(s=o),!this.options.depthColumn&&t>this.getDataLength()&&(t=this.getDataLength()),this.broadcast({gridView:["notifyBeforeInsertedRow",[t]]});for(var r=this.getTotalCol(),a=[s*r,0],n=[],l=0;l<r;l++){var d,c=this.getCellInfo(l);d=e.insertData&&e.insertData[l]?e.insertData[l]:!0!==this.options.useNull||"null"!==c.options.defaultValue&&null!==c.options.defaultValue?"number"==c.options.dataType&&c.options.defaultValue&&!isNaN(c.options.defaultValue)?parseInt(c.options.defaultValue,10):c.options.defaultValue:null,a.push(d),n.push(d)}[].splice.apply(this.dataArr,a),[].splice.apply(this.originalDataArr,a),this._createRowStatus(s),this._createCellStatus(s);var u=this.filteredRowIndexArr.length;if(this.options.depthColumn)for(l=0;l<this.filteredRowIndexArr.length;l++)if(1==this.filteredRowIndexArr.length)u=this.filteredRowIndexArr[l]==s?l:l+1;else{if(this.filteredRowIndexArr[l]<=s&&s<this.filteredRowIndexArr[l+1]){u=l;break}if(s==this.filteredRowIndexArr[l+1]){u=l+1;break}}else u=t;for(l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=s&&this.filteredRowIndexArr[l]++;this.filteredRowIndexArr.splice(u,0,s);s=this.filteredRowIndexArr[t];if(e.noEvent)this.broadcast({gridView:["notifyAfterInsertedRow",[u,!0]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowInserted",[s]],treeview:["notifyInsertRow",[u]],generalComp:"both",type:"insertRow"}),this.broadcast({gridView:["notifyAfterInsertedRow",[u,!this._getBroadcastAll()]],_bForceBroadcast:!0});var p={};p[u]=n,O.f.fireEvent(this,"oninsertrow",{insertedDataObj:p})}return t}catch(t){h.Y.printStackTrace(t)}},nt.prototype.removeRow=function(t,e){try{e=e||{},null==t&&(t=this.getTotalRow()-1),t=parseInt(t,10);var i=this.options.depthColumn?t:this.getRealRowIndex(t),o=this.getTotalCol();if(null==i||i>=this.getTotalRow())return;if(this.options.depthColumn&&!1!==e.removeChildren&&this.hasChild(i)){var s=this.getRecursiveRowIndex(i);return s.push(i),e.noEvent=!0,e.removeChildren=!1,this.removeRows(s,e)}this.broadcast({gridView:["notifyBeforeRemovedRow",[t]]});var r=this.dataArr.splice(i*o,o),a=this.removeRowStatus(t);this.removeCellStatus(t),this.originalDataArr.splice(i*o,o);var n=this.getFilteredRowIndex(i);n>-1&&this.filteredRowIndexArr.splice(n,1);for(var l=0;l<this.filteredRowIndexArr.length;l++)this.filteredRowIndexArr[l]>=i&&this.filteredRowIndexArr[l]--;"dataList"!=this.initializeType&&"grid"!=this.initializeType||this.options.removeDummyRowStatus&&(!this.options.removeDummyRowStatus||"C"==a)||(this.options.removeDummyRowStatus&&"V"==a?this.options.saveRemovedDataDeletedInsertedRow&&this.saveRemovedRow(i,r):this.saveRemovedRow(i,r));var d=r.slice(0);if(e.noEvent)this.broadcast({gridView:["notifyAfterRemovedRow",[n,!0,i,d.join(",")]],_bForceBroadcast:!0});else{this.broadcast({linkedDataList:["notifyRowRemoved",[i]],treeview:["notifyRemoveRow",[t]],pivot:["refreshItemset",[{type:"render",refresh:!0}]],generalComp:"both"}),this.broadcast({gridView:["notifyAfterRemovedRow",[n,!this._getBroadcastAll(),i,d.join(",")]],_bForceBroadcast:!0});var c={}
;c[n]=d,O.f.fireEvent(this,"onremoverow",{removedDataObj:c})}return r}catch(t){h.Y.printStackTrace(t)}},nt.prototype.removeRows=function(t,e){try{if(null==t)return void d.v.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is undefined.["+this.id+"]");if(0==t.length)return void d.v.printLog("[WebSquare.DataCollection.dataController.removeRows] rowIndexArr is empty.["+this.id+"]");e=e||{noEvent:!0},t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var i=[],o={},s=0;s<t.length;s++){var r=this.removeRow(t[s],e);o[t[s]]=r.slice(0),i.push(r)}return this.rowPosition=null,this.columnPosition=null,e.skipNotify||(this.broadcast({linkedDataList:["notifyRowRemoved"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],treeview:["notifyRemovedRows",[t.join(","),!this._getBroadcastAll()]],generalComp:"both"}),this.broadcast({gridView:["notifyRemovedRows",[t.join(","),!this._getBroadcastAll()]],_bForceBroadcast:!0})),O.f.fireEvent(this,"onremoverow",{removedDataObj:o}),i}catch(t){h.Y.printStackTrace(t)}},nt.prototype.removeAll=function(t){try{if(null!=t&&"true"==t.skipSavingRemovedData||"dataList"!=this.initializeType&&"grid"!=this.initializeType||this.removeManager.setData(this.getAllData({removeAll:!0}),!0),!this.dataArr)return;var e=this.dataArr.slice(0);this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this._initRowStatus(0),this._initCellStatus(0),this.broadcast({linkedDataList:["notifyRemoveAll"],gridView:["notifyRemovedAll",[null==t||!1!==t.clearHistory]],generalComp:"both",pivot:["refreshItemset",[{type:"render",refresh:!0}]]});var i=t&&!0===t.skipEvent,o=!1;if("dataList"==this.initializeType&&this.userEventList&&!i){for(var s=this.userEventList.length-1;s>=0;s--)if("onremoverow"==this.userEventList[s].name){o=!0;break}if(o){var r=e.slice(0),a={},n=r.length/this.oneRowDataLength;for(s=0;s<n;s++)a[s]=r.slice(s*this.oneRowDataLength,(s+1)*this.oneRowDataLength);O.f.fireEvent(this,"onremoverow",{removedDataObj:a})}}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype._removeAll_keepFilter=function(t){try{return void 0!==t&&null!=t||(t={}),t.clearHistory=!1,this.removeAll(t)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.removeRange=function(t,e){try{for(var i=[],o=e;o>=t;o--)i.push(o);return this.removeRows(i)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.reform=function(){try{this._initRowStatus(),this._initCellStatus(),this.originalDataArr=this.dataArr.slice(0),"dataList"==this.initializeType&&this.removeManager.removeAll(),this.broadcast({linkedDataList:["notifyReformed"],gridView:["notifyReformed"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.undoRow=function(t){try{if(this.options.depthColumn&&this.hasChild(t)&&this.options.undoRecursiveRow){var e=this.getChildrenRowArr(t);this.undoRows(e)}this._undoRow(t);var i=this.filteredRowIndexArr[t];this.broadcast({linkedDataList:["notifyRowChanged",[i]],gridView:["notifyRowModified",[t]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.undoRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=[],i=0;i<t.length;i++){var o=this.undoRow(t[i]);e.push(o)}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype._undoRow=function(t){try{for(var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=0;i<this.oneRowDataLength;i++){var o=this.originalDataArr[e*this.oneRowDataLength+i];this._setData(e,i,o)}this._updateRowStatus(e),this._undeleteRowStatus(e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.undoAll=function(){try{for(var t=this.getRowIndexByStatus("UDV"),e=0;e<t.length;e++){var i=t[e];this._undoRow(i)}this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged",[{refreshScroll:!0}]],generalComp:"both"})}catch(t){h.Y.printStackTrace(t)}},nt.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,
this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.oldValue,noEvent:!1,undoRedo:"undo"}),this.undoRedo="undo"}catch(t){h.Y.printStackTrace(t)}},nt.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this._setCellData({filteredRowIndex:t.row,colID:t.col,value:t.value,noEvent:!1,undoRedo:"redo"}),this.undoRedo="redo"}catch(t){h.Y.printStackTrace(t)}},nt.prototype._undoRedoHistoryClear=function(){try{this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.Y.printStackTrace(t)}},nt.prototype.undoRedoSave=function(t){try{for("undo"!=this.undoRedoMulti&&"redo"!=this.undoRedoMulti||this.commandListMulti.splice(this.commandPositionMulti,this.commandListMulti.length-this.commandPositionMulti+1),this.commandListMulti.push(t);this.commandListMulti.length>500;)this.commandListMulti.shift();this.commandPositionMulti=this.commandListMulti.length-1,this.undoRedoMulti=""}catch(t){h.Y.printStackTrace(t)}},nt.prototype._undoRedoMultiHistoryClear=function(){try{this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedoMulti="",this._undoRedoHistoryClear()}catch(t){h.Y.printStackTrace(t)}},nt.prototype._clearHistory=function(){try{this._undoRedoMultiHistoryClear()}catch(t){h.Y.printStackTrace(t,null,this)}},nt.prototype.restoreMulti=function(){try{if("undo"==this.undoRedoMulti&&this.commandPositionMulti--,this.commandPositionMulti<0)return void(this.commandPositionMulti=0);for(var t=this.commandListMulti[this.commandPositionMulti].length;t>0;t--)this.restore();this.undoRedoMulti="undo"}catch(t){h.Y.printStackTrace(t)}},nt.prototype.redoMulti=function(){try{if("redo"==this.undoRedoMulti&&this.commandPositionMulti++,this.commandListMulti.length-1<this.commandPositionMulti)return this.commandPositionMulti=this.commandListMulti.length-1,void(this.undoRedoMulti="");for(var t=this.commandListMulti[this.commandPositionMulti],e=0;e<t.length;e++)this.redo();this.undoRedoMulti="redo"}catch(t){h.Y.printStackTrace(t)}},nt.prototype.insertColumn=function(t,e){try{if(void 0!==this.bodyIdColIndexMap[t])return void d.v.printLog("[WebSquare.DataCollection.dataController.insertColumn] already exist column in ["+this.id+"]");var i=this.getTotalRow(),o=this.getTotalCol(),s=e||{},r=null==s.colIndex?o:parseInt(s.colIndex),n=null==s.defaultValue?"":s.defaultValue;!0!==this.options.useNull||"null"!==s.defaultValue&&null!==s.defaultValue||(n=null);for(var l=[],c=[],u=0;u<i;u++)for(var p=0,g=0;g<o+1;g++)g===r?(l.push(n),c.push(n)):(l.push(this.dataArr[u*o+p]),c.push(this.originalDataArr[u*o+p]),p++);this.dataArr=l,this.originalDataArr=c,this.bodyIdColIndexMap[t]=this.oneRowDataLength;var m=new WebSquare.DataCollection.dataListCellInfo(null,this,this.oneRowDataLength);m.id=t,m.name=s.name||"name"+(this.oneRowDataLength+1),a.q.extendKeepingType(m.options,s),m.options.col_id=t,m.options.id=t,m.options.name=m.name,this.cellInfoHash[t]=m,this.oneRowDataLength++,this.cellIdList.splice(r,0,t);var f=a.q.extend({},m.options);this.structure.rowArr[0].splice(r,0,f),"dataList"===this.initializeType&&this.removeManager.insertColumn(t,e),"json"===m.options.dataType&&(this._bJsonData=!0)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.removeColumn=function(t,e){try{var i=this.getTotalRow(),o=this.getTotalCol(),s=this.getColumnID(t);if(null==s)return!1;for(var r=this.getColumnIndex(s),a=[],n=[],l=0;l<i;l++)for(var d=0;d<o;d++)d!==r&&(a.push(this.dataArr[l*o+d]),n.push(this.originalDataArr[l*o+d]));this.dataArr=a,this.originalDataArr=n,delete this.bodyIdColIndexMap[s],delete this.cellInfoHash[s],this.oneRowDataLength--;var c=-1,u=0;for(l=0;l<this.cellIdList.length;l++)this.cellIdList[l]===s?c=l:(this.bodyIdColIndexMap[this.cellIdList[l]]=u,u++);this.cellIdList.splice(c,1)
;var p=this.structure.rowArr;for(l=0;l<p.length;l++){var g=p[l];for(d=0;d<g.length;d++)if(g[d].id===s){g.splice(d,1);break}}"dataList"===this.initializeType&&this.removeManager.removeColumn(t,e)}catch(t){h.Y.printStackTrace(t)}},nt.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=y.Z.getBoolean(t)}catch(t){h.Y.printStackTrace(t)}},nt.prototype._setInstanceValue=function(t,e,i,o){try{return!("grid"!=this.initializeType||!this.options.ref)&&(WebSquare.ModelUtil._setInstanceValue({xpath:this._getXPath({rowIndex:t,colID:e}),value:i,gridNoRefresh:o,scopeId:this.options.aliasDataCollection||void 0}),!0)}catch(t){h.Y.printStackTrace(t)}},nt.prototype._getXPath=function(t){try{var e="";if("grid"==this.initializeType&&this.options.ref&&null!=t){var i=t.rowIndex,o=this.getColumnID(t.colID);e=this.options.ref;for(var s=0;s<this.repeatNodeTagName.length;s++)0==s?null==i||isNaN(i)?e+="/"+this.repeatNodeTagName[0]:e+="/"+this.repeatNodeTagName[0]+"["+(i+1)+"]":e+="/"+this.repeatNodeTagName[s];this.options.valueNode&&!0!==t.skipValueNode?e+="/"+o+"/@value":e+="/"+o}return e}catch(t){h.Y.printStackTrace(t)}},nt.prototype._isInitialzedItemArr=function(t){try{if(void 0===t.itemArr)return!1;if("select"==t.options.inputType||"checkcombobox"==t.options.inputType||"autoComplete"==t.options.inputType){var e=0;if(1==t.options.chooseOption&&e++,1==t.options.allOption&&e++,t.itemArr.length<e+1)return!1}return!0}catch(t){h.Y.printStackTrace(t)}};var lt=function(){};lt.prototype._getStatusHash=function(){try{return{R:0,U:1,C:2,D:3,V:4,E:5}}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.getRowStatusValue=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatusValue(e)}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype._getRowStatusValue=function(t){try{return this._getStatusHash()[this._getRowStatus(t)]}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.getRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getRowStatus(e)}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype._getRowStatus=function(t){try{if(this.rowStatusArr.length<=t||isNaN(t))return;return this.rowStatusArr[t]||this.rowStatusDefaultValue}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.getCellStatusValue=function(t,e){try{var i=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getCellStatusValue(i,e)}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype._getCellStatusValue=function(t,e){try{return this._getStatusHash()[this._getCellStatus(t,e)]}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.getCellStatus=function(t,e){try{var i=this.options.depthColumn?t:this.getRealRowIndex(t);return this._getCellStatus(i,e)}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype._getCellStatus=function(t,e){try{var i=this.getColumnIndex(e);return this.cellStatusArr[t*this.oneRowDataLength+i]||this._getRowStatus(t)}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getTotalRow();i++){var o=this.options.depthColumn?i:this.getRealRowIndex(i);t.indexOf(this._getRowStatus(o))>-1&&e.push(i)}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getVoidIndex=function(){try{return this.getRowIndexByStatus("V")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getInsertedData=function(t){try{
this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getInsertedXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=this.getInsertedIndex();return this.getArrXML(e,t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getInsertedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRefInsertedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getInsertedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getInsertedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getInsertedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));return e.data=i,e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getDeletedData=function(t,e){try{void 0!==e&&null!=e||(e={}),!0!==e.noRefresh&&this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s,e));if(null!=this.options.customFormatter){var r=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.I.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){h.Y.printStackTrace(t)}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s,e));return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRefDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRefRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRefRowJSON(s,e));return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getDeletedArray=function(t,e){try{void 0!==e&&null!=e||(e={});var i={};"object"===(0,g.A)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?i.columnInfo=e.includeColumns:i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]})
;for(var o=[],s=this.getDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r],e));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r,e));return i.data=o,i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getVoidData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getVoidXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getVoidIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.I.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){h.Y.printStackTrace(t)}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getVoidJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getVoidIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s));if(null!=this.options.customFormatter){var r=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getVoidArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getVoidIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getOnlyDeletedData=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowData(o[s]));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowData(s));return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getOnlyDeletedXML=function(t,e){try{this.broadcast({gridView:["_endEdit"]});var i=this.getOnlyDeletedIndex(),o=this.getArrXML(i,e);if(!t&&"dataList"==this.initializeType)if(this.options.removedDataMatch)for(var s=WebSquare.xml.findNode(o,this.options.baseNode),r=0;r<this.removeManager.getDataLength();r++){for(var a=s,n=this.options.repeatNode.split("/"),d=0;d<n.length-1;d++){var c=n[d],u=c.indexOf(":");if(u>=0)try{var p=c.substring(0,u),g=l.I.getNamespaces(s);g[p]&&(c=c+" xmlns:"+p+'="'+g[p]+'"')}catch(t){h.Y.printStackTrace(t)}a=a.appendChild(WebSquare.xml.parse("<"+c+"/>").documentElement)}a.appendChild(this.removeManager.getRowXML(r,e).documentElement)}else{var m=WebSquare.xml.findNode(o,this.options.baseNode);for(r=0;r<this.removeManager.getDataLength();r++)m.appendChild(this.removeManager.getRowXML(r,e).documentElement)}return o}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getOnlyDeletedJSON=function(t,e){try{this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getOnlyDeletedIndex(),s=0;s<o.length;s++)i.push(this.getRowJSON(o[s],e));if(!t&&"dataList"==this.initializeType)for(s=0;s<this.removeManager.getDataLength();s++)i.push(this.removeManager.getRowJSON(s,e));if(null!=this.options.customFormatter){
var r=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof r&&(i=r(this,i))}return i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getOnlyDeletedArray=function(t,e){try{var i={};i.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var o=[],s=this.getOnlyDeletedIndex(),r=0;r<s.length;r++)o=o.concat(this.getRowData(s[r]));if(!t&&"dataList"==this.initializeType)for(r=0;r<this.removeManager.getDataLength();r++)o=o.concat(this.removeManager.getRowData(r));return i.data=o,i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getUpdatedData=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getUpdatedXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=this.getUpdatedIndex();return this.getArrXML(e,t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof s&&(e=s(this,e))}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRefUpdatedJSON=function(t){try{this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getUpdatedIndex(),o=0;o<i.length;o++)e.push(this.getRefRowJSON(i[o],t));if(null!=this.options.customFormatter){var s=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=s&&(e=s(this,e))}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getUpdatedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getUpdatedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s]));return e.data=i,e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRemovedData=function(t){try{return this.removeManager.getAllData(t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRemovedXML=function(t){try{return void 0!==t&&null!=t||(t={}),t.id=this.id,this.removeManager.getAllXML(t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRemovedJSON=function(t){try{return this.removeManager.getAllJSON(t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRemovedArray=function(t){try{return this.removeManager.getAllArray(t)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getModifiedData=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=this.getModifiedIndex(),o=0;o<i.length;o++)e.push(this.getRowData(i[o],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(o=0;o<this.removeManager.getDataLength();o++)e.push(this.removeManager.getRowData(o,t));return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getModifiedXML=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});var e=this.getModifiedIndex(),i=this.getArrXML(e,t);if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))if(this.options.removedDataMatch)for(var o=WebSquare.xml.findNode(i,this.options.baseNode),s=0;s<this.removeManager.getDataLength();s++){for(var r=o,a=this.options.repeatNode.split("/"),n=0;n<a.length-1;n++){var d=a[n],c=d.indexOf(":");if(c>=0)try{var u=d.substring(0,c),p=l.I.getNamespaces(o);p[u]&&(d=d+" xmlns:"+u+'="'+p[u]+'"')}catch(t){h.Y.printStackTrace(t)}r=r.appendChild(WebSquare.xml.parse("<"+d+"/>").documentElement)}r.appendChild(this.removeManager.getRowXML(s,t).documentElement)}else{var g=WebSquare.xml.findNode(i,this.options.baseNode);for(s=0;s<this.removeManager.getDataLength();s++)g.appendChild(this.removeManager.getRowXML(s,t).documentElement)}return i}catch(t){h.Y.printStackTrace(t)}},
lt.prototype.getModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof a&&(o=a(this,o))}return o}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRefModifiedJSON=function(t){try{t=t||{},this.broadcast({gridView:["_endEdit"]});for(var e=[],i=[],o=[],s=this.getModifiedIndex(),r=0;r<s.length;r++)e.push(this.getRefRowJSON(s[r],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(r=0;r<this.removeManager.getDataLength();r++)i.push(this.removeManager.getRefRowJSON(r,t));if(o=t&&t.DB?(o=o.concat(i)).concat(e):t&&t.excludeRemovedData?o.concat(e):(o=o.concat(e)).concat(i),null!=this.options.customFormatter){var a=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);null!=a&&(o=a(this,o))}return o}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getModifiedArray=function(t){try{void 0!==t&&null!=t||(t={});var e={};"object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?e.columnInfo=t.includeColumns:e.columnInfo=this.cellIdList,this.broadcast({gridView:["_endEdit"]});for(var i=[],o=this.getModifiedIndex(),s=0;s<o.length;s++)i=i.concat(this.getRowData(o[s],t));if("dataList"==this.initializeType&&(t.saveRemovedData||this.options.saveRemovedData&&!1!==t.saveRemovedData))for(s=0;s<this.removeManager.getDataLength();s++)i=i.concat(this.removeManager.getRowData(s,t));return e.data=i,e}catch(t){h.Y.printStackTrace(t)}},lt.prototype._setRowStatus=function(t,e){try{var i=this._getRowStatus(t);return e!=i&&(this.rowStatusArr[t]=e),i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.setAllRowStatus=function(t,e){try{if(e=e||!1){for(var i=this.rowStatusArr.length,o=0;o<t.length;o++)this.rowStatusArr[o+i]=t[o];this.cellStatusArr[this.rowStatusArr.length*this.getTotalCol()-1]=void 0}else this.rowStatusArr=t,this._initCellStatus(0),this.cellStatusArr.length=t.length*this.getTotalCol()-1}catch(t){h.Y.printStackTrace(t)}},lt.prototype._setCellStatus=function(t,e,i){try{var o=this.getColumnIndex(e),s=this._getCellStatus(t,e);return i!=s&&(this.cellStatusArr[t*this.oneRowDataLength+o]=i),s}catch(t){h.Y.printStackTrace(t)}},lt.prototype.setAllCellStatus=function(t,e){try{e=e||!1,this.cellStatusArr=e?this.cellStatusArr.concat(t):t}catch(t){h.Y.printStackTrace(t)}},lt.prototype._initRowStatus=function(t){try{if(null!=t&&void 0!==t||(t=0),0==t)this.rowStatusArr=[];else for(var e in this.rowStatusArr){Number(e)>=t&&this.rowStatusArr(e)}var i=this.getTotalRow();this.rowStatusArr[i-1]||(this.rowStatusArr[i-1]=void 0),this.rowStatusDefaultValue="removeManager"===this.initializeType?"E":"R"}catch(t){h.Y.printStackTrace(t)}},lt.prototype.initRowStatus=function(){try{this._initRowStatus(0),this.broadcast({gridView:["notifyReformed"]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._createRowStatus=function(t){try{var e=[];for(var i in this.rowStatusArr)e.push(Number(i));e.sort((function(t,e){return e-t}));for(var o=0;o<e.length;o++){(i=e[o])>=t&&(this.rowStatusArr[i+1]=this.rowStatusArr[i],delete this.rowStatusArr[i])}this.rowStatusArr[t]="C",this.broadcast({gridView:["notifyCreatedRowStatus",[t]],_bForceBroadcast:!0})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._updateRowStatus=function(t){try{var e=this._getRowStatus(t),i=e;if("C"==e||"D"==e)return;for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){
var a=this.cellInfoHash[this.cellIdList[r]],n=a.options.inputType,l=this._getOriginalCellData(t,a.id),d=this._getData(t,r);if("expression"==n||1==this.ignoreStatusColArr[r]||0!==l&&0!==d){if("expression"!=n&&1!=this.ignoreStatusColArr[r]&&l!=d&&(!0===this.options.useNull||null!==l||""!==d)){o=!0;break}}else if(0===l&&0!==d&&"0"!==d||0===d&&0!==l&&"0"!==l){o=!0;break}}"R"==e?1==o&&(e="U"):"U"==e&&0==o&&(e="R"),this._setRowStatus(t,e);var c=this.getFilteredRowIndex(t);e!=i&&O.f.fireEvent(this,"onrowstatuschange",[{rowIndex:c,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[c]}]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.removeRowStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this._getRowStatus(e),o=[];for(var s in this.rowStatusArr)o.push(Number(s));o.sort();for(var r=0;r<o.length;r++){(s=o[r])>=e&&(s==e||(this.rowStatusArr[s-1]=this.rowStatusArr[s]),delete this.rowStatusArr[s])}return this.rowStatusArr.length=Math.max(this.rowStatusArr.length-1,0),this.broadcast({gridView:["notifyRemovedRowStatus",[e]],_bForceBroadcast:!0}),i}catch(t){h.Y.printStackTrace(t)}},lt.prototype.removeCellStatus=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.getTotalCol(),o=e*i,s=[];for(var r in this.cellStatusArr)s.push(Number(r));s.sort();for(var a=0;a<s.length;a++){(r=s[a])>=o&&(r<=o+i-1||(this.cellStatusArr[r-i]=this.cellStatusArr[r]),delete this.cellStatusArr[r])}this.cellStatusArr.length=Math.max(this.cellStatusArr.length-i,0)}catch(t){h.Y.printStackTrace(t)}},lt.prototype._initCellStatus=function(t){try{if(null!=t&&void 0!==t||(t=0),0==t)this.cellStatusArr=[];else{var e=t*this.oneRowDataLength;for(var i in this.cellStatusArr){Number(i)>=e&&this.cellStatusArr(i)}}this.cellStatusArr[this.dataArr.length-1]||(this.cellStatusArr[this.dataArr.length-1]=void 0)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.initCellStatus=function(){try{this._initCellStatus(0),this.broadcast({gridView:["notifyReformed"]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._createCellStatus=function(t){try{var e=this.getTotalCol(),i=t*e,o=[];for(var s in this.cellStatusArr)o.push(Number(s));o.sort((function(t,e){return e-t}));for(var r=0;r<o.length;r++){(s=o[r])>=i&&(this.cellStatusArr[s+e]=this.cellStatusArr[s],delete this.cellStatusArr[s])}for(r=0;r<e;r++)this.cellStatusArr[i+r]="C"}catch(t){h.Y.printStackTrace(t)}},lt.prototype._updateCellStatus=function(t,e){try{var i=this._getCellStatus(t,e);if("C"==i||"D"==i)return;var o=!1,s=this.cellInfoHash[this.cellIdList[e]],r=s.options.inputType,a=this._getOriginalCellData(t,s.id),n=this._getData(t,e);"expression"==r||1==this.ignoreStatusColArr[e]||0!==a&&0!==n?"expression"!=r&&1!=this.ignoreStatusColArr[e]&&a!=n&&(!0!==this.options.useNull&&null===a&&""===n||(o=!0)):(0===a&&0!==n&&"0"!==n||0===n&&0!==a&&"0"!==a)&&(o=!0),"R"==i?1==o&&(i="U"):"U"==i&&0==o&&(i="R"),this._setCellStatus(t,e,i)}catch(t){h.Y.printStackTrace(t)}},lt.prototype.deleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t),i=this.getFilteredRowIndex(e);if(this.options.depthColumn&&this.hasChild(e)){var o=this.getChildrenRowArr(e);this.deleteRows(o)}this._deleteRowStatus(e),this._deleteCellStatus(e),this.broadcast({linkedDataList:["notifyDeleteRow",[e]],gridView:["notifyDeleteRow",[i]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.deleteRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=0;e<t.length;e++)this.deleteRow(t[e]);return this.getDeletedData(!0,{noRefresh:!0})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.undeleteRows=function(t){try{t.sort((function(t,e){return parseInt(t)<parseInt(e)?1:-1}));for(var e=[],i=0;i<t.length;i++){var o=this.undeleteRow(t[i]);e.push(o)}return e}catch(t){h.Y.printStackTrace(t)}},lt.prototype._deleteRowStatus=function(t){try{var e=this._getRowStatus(t),i="";if(!0===this.options.keepInsertedRowDeleteStatus){if("D"==e||"V"==e)return
}else if("D"==i||"V"==i)return;i="C"==e?"V":"D",this._setRowStatus(t,i);var o=this.getFilteredRowIndex(t);i!=e&&O.f.fireEvent(this,"onrowstatuschange",[{rowIndex:o,newRowStatus:i,oldRowStatus:e}]),o>-1&&this.broadcast({gridView:["notifyStatusChanged",[o]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._deleteCellStatus=function(t){try{for(var e=0;e<this.oneRowDataLength;e++){var i=this._getCellStatus(t,e),o="";if(!0===this.options.keepInsertedRowDeleteStatus){if("D"==i||"V"==i)continue}else if("D"==o||"V"==o)continue;o="C"==i?"V":"D",this._setCellStatus(t,e,o)}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.undeleteRow=function(t){try{var e=this.options.depthColumn?t:this.getRealRowIndex(t);if(this.options.depthColumn&&this.hasChild(e)){var i=this.getChildrenRowArr(e);this.undeleteRows(i)}this._undeleteRowStatus(e),this._undeleteCellStatus(e),this.broadcast({gridView:["notifyUndeleteRow",[t]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._undeleteRowStatus=function(t){try{var e=this._getRowStatus(t),i=e;if("D"!=e&&"V"!=e)return;if("V"==e)e="C";else{for(var o=!1,s=this.getTotalCol(),r=0;r<s;r++){var a=this.getCellInfo(r);if("expression"!=a.options.inputType&&1!=this.ignoreStatusColArr[r]&&this._getOriginalCellData(t,a.id)!=this._getData(t,r)){o=!0;break}}e=o?"U":"R"}this._setRowStatus(t,e);var n=this.getFilteredRowIndex(t);e!=i&&O.f.fireEvent(this,"onrowstatuschange",[{rowIndex:n,newRowStatus:e,oldRowStatus:i}]),this.broadcast({gridView:["notifyStatusChanged",[{rowIndex:[n]}]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype._undeleteCellStatus=function(t){try{for(var e=0;e<this.oneRowDataLength;e++){var i=this._getCellStatus(t,e);if("D"!=i&&"V"!=i)return;if("V"==i)i="C";else{var o=!1,s=this.getCellInfo(e);if("expression"!=s.options.inputType&&1!=this.ignoreStatusColArr[e]&&this._getOriginalCellData(t,s.id)!=this._getData(t,e)){o=!0;continue}i=o?"U":"R"}this._setCellStatus(t,e,i)}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.modifyAllStatus=function(t,e){try{void 0!==e&&null!=e||(e={});var i=!0;if(this.userEventList&&!0!==e.skipEvent)for(var o=this.userEventList.length-1;o>=0;o--)if("onrowstatuschange"==this.userEventList[o].name){i=!1;break}var s=[];if(!0!==i)for(o=0;o<this.rowStatusArr.length;o++){var r=this._getRowStatus(o);t!=r&&s.push({rowIndex:o,newRowStatus:t,oldRowStatus:r})}this._initRowStatus(0),this._initCellStatus(0),this.rowStatusDefaultValue=t,!0!==i&&O.f.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyAllStatus",[t]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.modifyRangeStatus=function(t,e,i){try{var o,s=[];if(o=this.options.depthColumn?this.getTotalRow():this.getDataLength(),0<=t&&e<=o)for(var r=t;r<=e;r++){var a=this.options.depthColumn?r:this.getRealRowIndex(r),n=this._setRowStatus(a,i);i!=n&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:n})}O.f.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyRangeStatus",[t,e,i]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.modifyMatchedStatus=function(t,e,i){try{var o,s=[];o=this.options.depthColumn?this.getTotalRow():this.getDataLength();for(var r=0;r<o;r++){var a=this.getColumnID(t);if(this.getCellData(r,a)+""==e+""){var n=this.options.depthColumn?r:this.getRealRowIndex(r),l=this._setRowStatus(n,i);i!=l&&s.push({rowIndex:r,newRowStatus:i,oldRowStatus:l})}}O.f.fireEvent(this,"onrowstatuschange",s),this.broadcast({gridView:["notifyModifyMatchedStatus",[t,e,i]]})}catch(t){h.Y.printStackTrace(t)}},lt.prototype.modifyRowStatus=function(t,e){try{var i;if(i=this.options.depthColumn?this.getTotalRow():this.getDataLength(),t>-1&&t<i){var o=this.options.depthColumn?t:this.getRealRowIndex(t),s=this._setRowStatus(o,e);e!=s&&O.f.fireEvent(this,"onrowstatuschange",[{rowIndex:t,newRowStatus:e,oldRowStatus:s}]),this.options.depthColumn&&(t=this.getFilteredRowIndex(o)),this.broadcast({gridView:["notifyModifyRowStatus",[t,e]]})}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.modifyCellStatus=function(t,e,i){try{
var o;if(o=this.options.depthColumn?this.getTotalRow():this.getDataLength(),t>-1&&t<o){var s=this.options.depthColumn?t:this.getRealRowIndex(t);this._setCellStatus(s,e,i)}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getRowPosition=function(){try{return"number"==typeof this.rowPosition?this.rowPosition:null}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.setRowPosition=function(t,e){try{t=parseInt(t,10),isNaN(t)&&(t=null);var i=this.rowPosition;if(i!=t){if(!e)if(!1===O.f.fireEvent(this,"onbeforerowpositionchange",{oldRowIndex:i,newRowIndex:t}))return!1;return this.rowPosition=t,e||O.f.fireEvent(this,"onrowpositionchange",{oldRowIndex:i,newRowIndex:t}),this.broadcast({linkedDataList:["notifyRowPositionChanged"],gridView:["notifyRowPositionChanged",[t]],generalComp:"refresh",restartFilter:!1}),!0}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.getColumnPosition=function(){try{return this.getColumnID(this.columnPosition)||""}catch(t){h.Y.printStackTrace(t,null,this)}},lt.prototype.setColumnPosition=function(t,e){try{var i=this.getColumnIndex(t);if(this.columnPosition!=i){var o=this.getColumnID(this.columnPosition),s=this.getColumnID(t);return!1!==O.f.fireEvent(this,"onbeforecolumnchange",{oldColumnID:o,newColumnID:s})&&(this.columnPosition=i,O.f.fireEvent(this,"oncolumnchange",{oldColumnID:o,newColumnID:s}),!0)}}catch(t){h.Y.printStackTrace(t)}},lt.prototype.saveRemovedRow=function(t,e){try{this.removeManager.setRowData(this.removeManager.getDataLength(),e),this.removeManager.modifyAllStatus("E",{skipEvent:!0})}catch(t){h.Y.printStackTrace(t,null,this)}};var ht=function(t){this.parent=t,this.filterArr=[],this.allRowIndexArr=[],this.firstFiltering=!0};ht.prototype.useFilter=function(){return 0!=this.filterArr.length},ht.prototype.onlySortFilter=function(){for(var t=0;t<this.filterArr.length;t++)if(-1==this.filterArr[t].id.indexOf("sort^@"))return!1;return!0},ht.prototype.clear=function(){this.filterArr=[],this.firstFiltering=!0},ht.prototype._setAllRowIndexArr=function(t){if(this.allRowIndexArr.length!=t){this.allRowIndexArr=[];for(var e=0;e<t;e++)this.allRowIndexArr.push(e)}},ht.prototype.executeAllFilter=function(t,e,i){this._setAllRowIndexArr(e),this.firstFiltering=!0;for(var o=0;o<this.filterArr.length;o++)this.executeFilter(this.filterArr[o],t,e,i);if(0==this.filterArr.length)for(o=0;o<this.parent.getDataLength();o++)this.parent.filteredRowIndexArr[o]=o},ht.prototype.executeFilter=function(t,e,i,o){try{if("and"==t.options.condition)this.firstFiltering?(this.parent.filteredRowIndexArr=this.allRowIndexArr.slice(0),this.parent.filteredRowIndexArr=t.execute(e,i,o,this.allRowIndexArr)):this.parent.filteredRowIndexArr=t.execute(e,i,o,this.parent.filteredRowIndexArr);else if("or"==t.options.condition){var s=t.execute(e,i,o,this.allRowIndexArr);this.firstFiltering?this.parent.filteredRowIndexArr=this.mergeArray(this.allRowIndexArr,s):this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,s)}else if(">"==t.options.condition||">="==t.options.condition||"<"==t.options.condition||"<="==t.options.condition){if("number"!=t.options.columnDataType)return this.parent.filteredRowIndexArr=this.allRowIndexArr,void(this.firstFiltering=!1);this.firstFiltering?this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.allRowIndexArr):this.parent.filteredRowIndexArr=t.executeCondition(e,i,o,this.parent.filteredRowIndexArr)}this.firstFiltering=!1}catch(t){h.Y.printStackTrace(t,null,this)}},ht.prototype.addFilter=function(t,e,i,o){try{var s=o.fakeExpressionArr?o.fakeExpressionArr:this.parent.dataArr;if(o.sortIndexArr){for(var r=[],a=0;a<o.sortIdArr.length;a++){var n=this.parent.getColumnIndex(o.sortIdArr[a]);o.isExpression?r.push(o.sortIndexArr[a]):r.push(n)}o.sortIndexArr=r}this._setAllRowIndexArr(e);var l=null
;if("row"==o.type)l=new WebSquare.DataCollection.dataList.filter.rowFilter(t,o);else if("user"==o.type)l=new WebSquare.DataCollection.dataList.filter.userFilter(t,o);else if("cell"==o.type)l=new WebSquare.DataCollection.dataList.filter.cellFilter(t,o);else if("sort"==o.type){if("string"==typeof(d=o.sortIndex))var d=o.sortIndex.split(" ");var c=this.parent.childCompHash[o.gridId];if(o.isExpression&&c){var u,p=this.parent.getColCnt();o.colIndex=p,o.fakeExpressionArr&&(p++,i++,u=this.parent.getColCnt());for(a=0;a<d.length;a++){var g=c.getCellInfo(o.cellInfoArr[a]);!o.fakeExpressionArr&&o.isExpressionArr[a]&&(u=this.parent.getColumnIndex(d[a]));for(var m=0;m<e;m++){var f=g.getDisplayData(null,m,!0);s[u+p*m]=f+""}}}l=new WebSquare.DataCollection.dataList.filter.sortFilter(t,o),this.deleteFilterById("sort^@",!1)}else"func"==o.type?l=new WebSquare.DataCollection.dataList.filter.funcFilter(t,o):"regExp"==o.type?l=new WebSquare.DataCollection.dataList.filter.regExpFilter(t,o):"direct"===o.type&&(l=new WebSquare.DataCollection.dataList.filter.directFilter(t,o));this.executeFilter(l,s,e,i),this.filterArr.push(l)}catch(t){h.Y.printStackTrace(t,null,this)}},ht.prototype.deleteFilter=function(t,e,i,o,s,r){void 0===r&&(r=!0);for(var a=!1,n=[],l=0;l<this.filterArr.length;l++)-1==this.filterArr[l].id.indexOf(t)?n.push(this.filterArr[l]):a=!0;if(this.filterArr=n,1==r){this.firstFiltering=!0,this._setAllRowIndexArr(i);for(l=0;l<this.filterArr.length;l++)this.executeFilter(this.filterArr[l],e,i,o);if(0==this.filterArr.length){i=this.parent.getTotalRow();this.parent.filteredRowIndexArr=[];for(l=0;l<i;l++)this.parent.filteredRowIndexArr.push(l)}}return a},ht.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1==i[s]&&o.push(s);return o},ht.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i,1==e||0==this.filterArr.length&&(this.firstFiltering=!0)},ht.prototype.getOriginalRowIndex=function(t){return this.filteredRowIndexArr[t]},ht.prototype.getDisplayRowIndex=function(t){if(0!=this.parent._dataList.filteredRowIndexArr.length)for(var e=0;e<this.parent._dataList.filteredRowIndexArr.length;e++)if(t==this.parent._dataList.filteredRowIndexArr[e])return e;return t};var dt={rowFilter:function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};dt.rowFilter.prototype.execute=function(t,e,i,o){for(var s=[],r=y.Z.getComponentById(this.options.dataList),a=!0===r.options.useNull,n=0;n<o.length;n++){var l=o[n],h="@rowStatus"==this.options.colIndex?r._getRowStatus(l):t[l*i+this.options.colIndex];a||null!=h||(h=""),this.options.exactMatch?h==this.options.key&&s.push(l):h.indexOf(this.options.key)>-1&&s.push(l)}return s},dt.rowFilter.prototype.executeCondition=function(t,e,i,o){for(var s=[],r=0;r<o.length;r++){var a,n,l=o[r];"number"==this.options.columnDataType&&(a=parseFloat(t[l*i+this.options.colIndex])||0,n=parseFloat(this.options.key)),">"==this.options.condition?a>n&&s.push(l):">="==this.options.condition?a>=n&&s.push(l):"<"==this.options.condition?a<n&&s.push(l):"<="==this.options.condition&&a<=n&&s.push(l)}return s},dt.userFilter=function(t,e){this.id=t,this.options=a.q.extend({key:"",condition:"and"},e||{})},dt.userFilter.prototype.getColumnData=function(t,e,i,o,s){return"string"==typeof s&&(s=this.options.bodyIdColIndexMap[s]),t[o*i+s]},dt.userFilter.prototype.execute=function(t,e,i,o){for(var s=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(dataArr, totalRow, totalCol, row, "),r=[],a=0;a<o.length;a++){var n=o[a];new Function("_this","dataArr","totalRow","totalCol","row","return "+s)(this,t,e,i,n)&&r.push(n)}return r},dt.cellFilter=function(t,e){this.id=t,this.options=a.q.extend({key:""},e||{})},dt.cellFilter.prototype.execute=function(t,e,i,o){
for(var s=[],r=!0===y.Z.getComponentById(this.options.dataList).options.useNull,a=0;a<o.length;a++)for(var n=o[a],l=0;l<i;l++){var h=t[n*i+l];r||null!=h||(h=""),h.indexOf(this.options.key)>-1&&s.push(n)}return s},dt.sortFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},dt.sortFilter.prototype.execute=function(t,e,i,o){for(var s=o.slice(0).sort((function(t,e){return t-e})),r=this.options,a=[],n=0;n<s.length;n++)a[n]=s[n]*i;var l,h,d=[];for(n=0;n<r.sortIndexArr.length;n++)if(d[n]={},r.sortFuncArr[n])for(var c=0;c<a.length;c++)d[n][s[c]]=t[a[c]+r.sortIndexArr[n]];else if("number"==r.dataTypeArr[n])for(c=0;c<a.length;c++){var u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]?u=(u+="").replace(/[^\+\-\.0-9]/g,""):isNaN(Number(u))&&(u=""),d[n][s[c]]=""===u?"":Number(u)}else if("float"==r.dataTypeArr[n])for(c=0;c<a.length;c++){u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),d[n][s[c]]=""===u?"":parseFloat(u)}else if("bigDecimal"===r.dataTypeArr[n])for(c=0;c<a.length;c++){u=t[a[c]+r.sortIndexArr[n]];1==r.numberExtractionValueArr[n]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),isNaN(Number(u))&&(u=""),isNaN(WebSquare.bigDecimal("").big)?($l("[sort filter] big.min.js is required."),d[n][s[c]]=""===u?"":Number(u)):d[n][s[c]]=""===u?"":WebSquare.bigDecimal(u)}else for(c=0;c<a.length;c++)d[n][s[c]]=t[a[c]+r.sortIndexArr[n]]||"";if(r.sortLabel)for(n=0;n<r.sortIndexArr.length;n++)if(!0===r.sortLabel[n])for(c=0;c<a.length;c++)d[n][c]=this.changeValueToLabel(d[n][c],n,r.isCustomCol[n],c);if(1==d.length)if(r.sortFuncArr[0]){var p=r.sortFuncArr[0];m=d[0];s.sort((function(t,e){return p(m[t],m[e])}))}else{var g=r.sortOrderArr[0],m=d[0];"bigDecimal"!==r.dataType||isNaN(WebSquare.bigDecimal("").big)?"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?1:""===m[e]?-1:m[t]>m[e]?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){return m[t]==m[e]?0===m[t]&&""===m[e]?g:""===m[t]&&0===m[e]?-g:0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){return m[t]===m[e]?0:""===m[t]?-g:""===m[e]||m[t]>m[e]?g:-g})):s.sort((function(t,e){return m[t]==m[e]?0:m[t]>m[e]?g:-g})):"true"==r.ignoreEmptyStringOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?1:""===m[e]?-1:"0"!==i.compare("0")?g:-g})):"true"==r.setEmptyStringFirstOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?"0"===l.toString()&&""===m[e]?g:""===m[t]&&"0"===h.toString()?-g:0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g})):"true"==r.setEmptyStringSortableOnSort?s.sort((function(t,e){l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:""===m[t]?-g:""===m[e]||"0"!==i.compare("0")?g:-g})):s.sort((function(t,e){if(""===m[t]&&""===m[e])return 0;l=""===m[t]?WebSquare.bigDecimal(""):m[t],h=""===m[e]?WebSquare.bigDecimal(""):m[e];var i=l.minus(h);return"0"===i.toString()?0:"0"!==i.compare("0")?g:-g}))}else s.sort((function(t,e){for(var i=0;i<d.length;i++){var o,s;if(r.sortFuncArr.constructor==Array?(s=r.sortFuncArr[i],1==r.sortFuncArr.length&&(s=r.sortFuncArr[0])):s=r.sortFuncArr,s)o=s(d[i][t],d[i][e]);else if("bigDecimal"!==r.dataTypeArr[i]||isNaN(WebSquare.bigDecimal("").big))o=d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-r.sortOrderArr[i]:r.sortOrderArr[i];else{if(""===d[i][t]&&""===d[i][e])return 0;l=""===d[i][t]?WebSquare.bigDecimal(""):d[i][t],h=""===d[i][e]?WebSquare.bigDecimal(""):d[i][e];var a=l.minus(h);o="0"===a.toString()?0:"0"!==a.compare("0")?r.sortOrderArr[i]:-r.sortOrderArr[i]}if(0!=o)return o}return 0}))
;return s},dt.sortFilter.prototype.changeValueToLabel=function(t,e,i,o){var s,r,a=this.options.sortItemArr,n=this.options.sortItemsetIdObj;if(i){var l=this.options.customCellDataListInfo[o];if(l){a=this.options.customDataListInfoHash[l];var h=this.options.customSortItemsetIdObj;s=h[o].label||"label",r=h[o].value||"value";for(var d=0;d<a.length;d++)if(t==a[d][r])return a[d][s]}}else if(s=n.label||"label",r=n.value||"value",a[e]&&a[e].length>0)for(d=0;d<a[e].length;d++)if(t==a[e][d][r])return a[e][d][s];return t},dt.funcFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and"},e||{})},dt.funcFilter.prototype.execute=function(t,e,i,o){if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var s=[],r=0;r<o.length;r++){var a=o[r],n=t[a*i+this.options.colIndex];"number"===this.options.columnDataType&&""!==n&&null!=n&&(n=n.toString().indexOf(".")>-1?parseFloat(n):parseInt(n,10)),this.options.key(n,this.options.param,a)&&s.push(a)}return s},dt.regExpFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},dt.regExpFilter.prototype.execute=function(t,e,i,o){if(!y.Z.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");if(y.Z.isNullReg(this.regExp))return[];for(var s=[],r=0;r<o.length;r++){var a=o[r];(t[a*i+this.options.colIndex]+"").match(this.regExp)&&s.push(a)}return s},dt.directFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and"},e||{})},dt.directFilter.prototype.execute=function(){return this.options.key};var ct=function(){};ct.prototype.getCellInfo=function(t){var e="";return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},ct.prototype.getColumnCount=function(){return this.cellIdList.length},ct.prototype.getColumnID=function(t){if("string"==typeof t)return this.cellInfoHash[t]?t:null;var e=this.cellIdList[t];return e||null},ct.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},ct.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.Y.printStackTrace(t,null,this)}},ct.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},ct.prototype.setColumnName=function(t,e){"number"==typeof t&&(t=this.getColumnID(t));var i=this.getCellInfo(t);i&&i.name&&(i.name=e),this.broadcast({fusionChart:["refresh"]})};var ut=function(t,e,i){try{this.options={name:"",id:"",col_id:"",colIndex:"",defaultValue:"",value:"",useFilter:!1,dataType:"text",valueType:"binary",trueValue:null,falseValue:null,ignoreStatus:!1,keepEmptyString:!1,encYN:!1,nullYN:!1},this.mainDataList=e,t&&this.setOptions(t),""!=this.options.value&&""==this.options.defaultValue&&(this.options.defaultValue=this.options.value),""==this.options.value&&""!=this.options.defaultValue&&(this.options.value=this.options.defaultValue),this.id=this.options.col_id,this.options.id=this.options.col_id,this.name=this.options.name||"",this.mainDataList.ignoreStatusColArr[i]=this.options.ignoreStatus,e.options.defaultValue&&!this.options.defaultValue&&(this.options.defaultValue=e.options.defaultValue),!0===e.options.useNull&&"null"===this.options.defaultValue&&(this.options.defaultValue=null)}catch(t){h.Y.printStackTrace(t)}};ut.prototype.setOptions=function(t){if("grid"==this.mainDataList.initializeType){var e=t.inputType||"text";this.configOptions=l.I.getConfig("grid/column[@inputType='"+e+"']"),this.options=a.q.extendKeepingType(this.options,this.configOptions)}for(var i in t)if("class"===i)this.options.className=t[i];else{var o=t[i];switch((0,g.A)(this.options[i])){case"string":if(""==o)continue;"$blank"==o&&(o="");break;case"number":
o=o&&o.toString().indexOf(".")>-1?parseFloat(o):parseInt(o,10);break;case"boolean":o=y.Z.getBoolean(o)}this.options[i]=o}this.options.col_id=t.id,this.element=t},ut.prototype.getExpressionValue=function(t){this.rowIndex=t;var e=this.options.expression;return null==this.expressionStr&&(""!=e&&null!=e&&(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/[sS][uU][mM][\s]*[(]/g,"_this.colsum(")).replace(/[aA][vV][gG][\s]*[(]/g,"_this.colavg(")).replace(/[mM][aA][xX][\s]*[(]/g,"_this.colmax(")).replace(/[mM][iI][nN][\s]*[(]/g,"_this.colmin(")).replace(/[cC][aA][lL][cC][\s]*[(]/g,"_this.colcalc(")).replace(/[dD][iI][sS][pP][lL][aA][yY][\s]*[(]/g,"_this.display(")).replace(/[rR][oO][wW][iI][nN][dD][eE][xX][\s]*[(]/g,"_this.getRowIndex(")).replace(/rowStatus[\s]*[(]/gi,"_this.rowStatus(")),this.expressionStr=e),new Function("_this","return "+this.expressionStr)(this)},ut.prototype.rowStatus=function(){switch(this.mainDataList.getRowStatusValue(this.rowIndex)){case 0:return"R";case 1:return"U";case 2:return"C";case 3:return"D";case 4:return"V"}},ut.prototype.colsum=function(){for(var t=0,e=0;e<arguments.length;e++){var i=this.mainDataList.getColumnIndex(arguments[e]);"bigDecimal"===this.mainDataList.getColumnOption(this.options.col_id,"dataType")?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,i)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,i))||0}return t},ut.prototype.colavg=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);"bigDecimal"===e?t=WebSquare.bigDecimal(t).plus(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0:t+=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0}return"bigDecimal"===e?t=WebSquare.bigDecimal(t).divide(WebSquare.bigDecimal(arguments.length)).toString():t/=arguments.length,t},ut.prototype.colmax=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);if("bigDecimal"===e)t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)))||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s>t)&&(t=s)}}return t},ut.prototype.colmin=function(){for(var t=0,e=this.mainDataList.getColumnOption(this.options.col_id,"dataType"),i=0;i<arguments.length;i++){var o=this.mainDataList.getColumnIndex(arguments[i]);if("bigDecimal"===e)t="0"===WebSquare.bigDecimal(t).toString()?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)):WebSquare.bigDecimal(t),t=WebSquare.bigDecimal(t).compare(WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,o)),!0)||0;else{var s=parseFloat(this.mainDataList._getData(this.rowIndex,o))||0;(0==i||s<t)&&(t=s)}}return t},ut.prototype.colcalc=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"+"==t||"-"==t||"*"==t||"/"==t||"^"==t||"%"==t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"^"==t?5:"*"==t||"/"==t||"%"==t?4:"+"==t||"-"==t?3:"("==t?2:")"==t?1:void 0}function l(t,e,i){var o;try{return"+"==i&&(o=t.plus(e)),"-"==i&&(o=t.minus(e)),"*"==i&&(o=t.times(e)),"/"==i&&(o=t.divide(e)),"^"==i&&(o=t.pow(e)),"%"==i&&(o=t.mod(e)),o}catch(t){h.Y.printStackTrace(t)}}var d=function(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&null==e[n].match(/\s/)&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}
if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}(t);for(var c in d){var u=this.mainDataList.getColumnIndex(d[c]);d[c]=null!=u?WebSquare.bigDecimal(this.mainDataList._getData(this.rowIndex,u)):d[c]}return function(t){for(var s,a,n=new Array,h=0;h<t.length;h++)if(o(t[h]))e(n,t[h]);else{(s=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(s=WebSquare.bigDecimal(s)),i(n),(a=new Function("return "+r(n))()).constructor!=WebSquare.bigDecimalObj&&(a=WebSquare.bigDecimal(a));var d=l(a,s,t[h]);i(n),e(n,d)}return r(n)}(d)},ut.prototype.display=function(){var t=this.mainDataList.getColumnIndex(arguments[0]);return this.mainDataList.getCellData(this.rowIndex,t)},ut.prototype.getRowIndex=function(){return this.mainDataList.getDisplayRowIndex(this.rowIndex)};var pt=function(t){};pt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},pt.prototype._getBroadcastAll=function(){return!0===this.getBroadcast()&&!0===WebSquare.DataCollection.api.getBroadcast()},pt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0,refreshScroll:!0}],pivot:[{type:"render",refresh:!0}]};if("object"===(0,g.A)(i))for(var s in i)"object"===(0,g.A)(i[s])&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyBroadcast"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},pt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),this.scope_id in WebSquare.DataCollection.stopBroadCastScope)return void WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid);if(!t)return;if(!0!==t._bForceBroadcast&&(WebSquare.DataCollection.stopBroadCast||!this.getBroadcast()))return;for(var e in this.childCompHash){if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid]&&(void 0===o.render||null!=o.render))"linkedDataList"===(o.options.pluginName||o.initializeType)&&t.linkedDataList&&t.linkedDataList&&("notifyCellChanged"===t.linkedDataList[0]?o.restartFilterByCellChanged.apply(o,t.linkedDataList[1]||[]):void 0===t.restartFilter&&o.restartFilter.apply(o,t.linkedDataList[1]||[]))}for(var e in this.childCompHash){var i=null;if(t.excludeId&&t.excludeId[e]){if(!t.gridView||"notifySettedCellData"!==t.gridView[0])continue;(i=t.gridView[1].slice(0))[3]=!0}if(null!=(o=this.childCompHash[e])&&WebSquare.idCache[o.uuid])if(void 0===o.render||null!=o.render)switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName||o.initializeType){case"linkedDataList":t.linkedDataList&&o[t.linkedDataList[0]].apply(o,t.linkedDataList[1]||[]);break;case"grid":case"gridView":t.gridView&&o[t.gridView[0]].apply(o,i||t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"mapchart":"refreshItemset"!=t.generalComp&&"both"!=t.generalComp&&"refreshItemArr"!=t.generalComp||o.refreshDataLists(this.id);break;case"pivot":t.pivot&&o[t.pivot[0]].apply(o,t.pivot[1]||[]);break;case"treeview":if(t.treeview){o[t.treeview[0]].apply(o,t.treeview[1]||[]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?o.modelControl.useItemset&&o.refreshItemset(t.refreshMode,t.type):"rollback"==t.generalComp&&o.rollback()}else if(null==o.render){o.options.pluginName||o.initializeType;"treeview"&&this._setDelayedRefreshComponent(e,!0)}}for(var e in this.refCompHash){var o;if(!t.excludeId||!t.excludeId[e])if(null!=(o=this.refCompHash[e])&&WebSquare.idCache[o.uuid]){
if((!o.options.pluginName||o.options.pluginName.indexOf("fw")<0&&"fusionchart"!==o.options.pluginName)&&t.colID&&o.modelControl&&o.modelControl.dataCollectionRefInfo&&o.modelControl.dataCollectionRefInfo.colID!=t.colID)continue;switch("stop"==o.activeStatus&&"function"==typeof o.preActivate&&o.preActivate(),o.options.pluginName){case"fusionchart":t.fusionChart&&o[t.fusionChart[0]].apply(o,t.fusionChart[1]||[]);break;case"fwFunnelChart":t.fwFunnelChart&&o[t.fwFunnelChart[0]].apply(o,t.fwFunnelChart[1]||[]);break;case"fwGanttChart":t.fwGanttChart&&o[t.fwGanttChart[0]].apply(o,t.fwGanttChart[1]||[]);break;case"fwPyramidChart":t.fwPyramidChart&&o[t.fwPyramidChart[0]].apply(o,t.fwPyramidChart[1]||[]);break;case"fwSparkChart":t.fwSparkChart&&o[t.fwSparkChart[0]].apply(o,t.fwSparkChart[1]||[]);break;case"fwRealtimeChart":t.fwRealtimeChart&&o[t.fwRealtimeChart[0]].apply(o,t.fwRealtimeChart[1]||[]);break;case"linkedDataList":t.linkedDataList&&o.refresh();break;default:"refresh"==t.generalComp||"both"==t.generalComp?o.modelControl.useRef&&o.refresh():"binding"==t.generalComp?o.modelControl.binding():"rollback"==t.generalComp&&o.rollback()}}}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype._setDelayedRefreshComponent=function(t,e){try{e=y.Z.getBoolean(e);WebSquare.DataCollection.delayedRefreshComponent[t]=e}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype._getDelayedRefreshComponent=function(t){try{return!0===WebSquare.DataCollection.delayedRefreshComponent[t]}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=y.Z.getComponentById(e));this.broadcast({gridView:["setDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemArr"],restartFilter:!1})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=y.Z.getComponentById(e));this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;if(this.childCompHash[t]===e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.addChild=function(t){try{this.childCompHash&&(this.childCompHash[t.id]=t)}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.q.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||y.Z.getBoolean(l.I.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.I.getConfig(i)
;s=a.q.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getStructure=function(){try{switch(this.elementType){case"XML":return this.xml2JSON(this.element);case"JSON":return this.json2Structure()}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.json2Structure=function(){try{var t=this.element,e={attr:{id:this.id},rowArr:[[]]};if(e.attr=a.q.extendKeepingType(e.attr,t.options),t.columnInfo)for(var i=0;i<t.columnInfo.length;i++){var o=t.columnInfo[i];e.rowArr[0].push(o)}return e}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this.getColumnIndex(t);this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]});var r=!1;if("object"!==(0,g.A)(t)||y.Z.isString(t))O.f.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==t.type&&"func"!==t.type&&"regExp"!==t.type)throw new Error("type does not support.[type:"+t.type+"]");r=t.noRefreshAfter,!1!==t.columnfilterchangeFire&&O.f.fireEvent(this,"onbeforecolumnfilterchange"),this.setFilter({type:t.type,colIndex:"string"==typeof t.colIndex&&"rowstatus()"==t.colIndex.toLowerCase()?"@rowStatus":t.colIndex,key:t.key,condition:t.condition,param:t.param,exactMatch:t.exactMatch,noRefresh:t.noRefresh,keepTop:t.keepTop,internal:t.internal})}!0!==r&&this.broadcast({gridView:["notifyAfterSettedColumnFilter"]}),("object"!==(0,g.A)(t)||y.Z.isString(t)||!1!==t.columnfilterchangeFire)&&O.f.fireEvent(this,"onaftercolumnfilterchange")}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),e&&!0===e.noRefreshAfter||this.broadcast({gridView:["notifyAfterRemovedColumnFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.clearSortFilter=function(){try{this.filterManager.deleteFilterById("sort^@",!1),this.filterManager.executeAllFilter(this.dataArr,this.getTotalRow(),this.getColumnCount()),this.sortStatusInfo={},this.sortStatusArr=[],this.broadcast({gridView:["notifyClearSortFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.removeFilter=function(t,e){try{t=a.q.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1,filterId:""},t||{}),e=void 0===e||e,"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,this.dataArr,this.getTotalRow(),this.getTotalCol(),t,e),!0!==t.noRefresh&&(this.broadcast({gridView:["notifyRemovedFilter",["sort"===t.type]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.clearFilter=function(t){try{this.filterManager.clear(),this.filteredRowIndexArr=[];for(var e=this.getTotalRow(),i=0;i<e;i++)this.filteredRowIndexArr.push(i);t||this.broadcast({gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){
h.Y.printStackTrace(t,null,this)}},pt.prototype.sort=function(t,e){try{switch(this.broadcast({gridView:["clearHeaderSort"]}),e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.clearSort=function(){try{this.broadcast({gridView:["notifyBeforeClearSort"]});var t=this.rowPosition;this.rowPosition=null,this.clearSortFilter(),this.rowPosition=t,this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.multisort=function(t){try{var e,i;this.broadcast({gridView:["clearHeaderSort"]}),void 0!==t&&null!=t||(t={}),t.type="sort",t.sortOrder=t.sortOrder||[];var o=(0,g.A)(t.sortIndex),s=(0,g.A)(t.sortOrder);"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];for(r=0;r<e.length;r++){var n="number"==this.getCellInfo(this.getColumnID(e[r])).options.dataType?"number":"text";a.push(n)}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),!0!==t.noRefresh&&this.broadcast({gridView:["notifyMultisort"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setFilter=function(t){try{t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),t=a.q.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,dataList:this.id,internal:!1,filterId:""},t||{});var e="";if("@rowStatus"!=t.colIndex){"string"==typeof t.colIndex&&(t.colIndex=this.bodyIdColIndexMap[t.colIndex]),e=(c=this.getCellInfo(t.colIndex)).options.col_id;var i=c.options.dataType;t.columnDataType=i}var o=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var s=[],r=[],n=[];s="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?r=t.sortOrder.wq_trim().split(" "):"object"==(0,g.A)(t.sortOrder)&&(r=t.sortOrder),t.dataType&&(n=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var l=0;l<s.length;l++){isNaN(s[l])?t.isExpression&&t.fakeExpressionArr?t.sortIndexArr.push(this.getColCnt()):t.sortIndexArr.push(this.bodyIdColIndexMap[s[l]]):t.sortIndexArr.push(parseInt(s[l],10));var d=parseInt(r[l]);isNaN(d)&&(d=1),t.sortOrderArr.push(d),t.dataTypeArr.push(n[l]||"text"),t.isExpression&&t.fakeExpressionArr?t.sortIdArr.push(s[l]):t.sortIdArr.push(this.getColumnID(t.sortIndexArr[l]));var c,u={},p="true"==(c=this.getCellInfo(t.sortIdArr[l])).options.numberExtraction;t.numberExtractionValueArr.push(p);var m="number"==c.options.dataType||"bigDecimal"===c.options.dataType||"float"==c.options.dataType?c.options.dataType:"text";"number"===this.options.sortType||"bigDecimal"===this.options.sortType||"text"===this.options.sortType||"float"===this.options.sortType?(m=this.options.sortType,t.dataType=m,t.dataTypeArr[l]=m):t.dataType!=m&&("numberFirst"===this.options.sortType?"number"===m||"bigDecimal"===m||"float"===m?(t.dataType=m,t.dataTypeArr[l]=m):"number"!==t.dataType&&"bigDecimal"!==t.dataType&&"float"!==t.dataType||(m=t.dataType):(t.dataType=m,t.dataTypeArr[l]=m)),u.colID=t.sortIdArr[l],u.sortOrder=t.sortOrderArr[l],u.dataType=m,this.sortStatusInfo[u.colID]=u,this.sortStatusArr.push(u),this.sortStatusArr[u.colID]=u}o=!0,e=""}t.numberExtraction=this.options.numberExtraction;var f=JSON.stringify(this.filteredRowIndexArr),b=t.filterId||t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(b,this.getTotalRow(),this.getTotalCol(),t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:o,keepTop:t.keepTop,fiteredColID:e}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{
colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:f,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getFilterList=function(){try{for(var t=[],e=0;e<this.filterManager.filterArr.length;e++)t.push(this.filterManager.filterArr[e].options);return t}catch(t){h.Y.printStackTrace(t)}},pt.prototype.setXMLLayout=function(t,e,i){try{"undefined"!=t&&null!=t&&""!=t?t.endsWith("/")?this.options.baseNode=t.substring(0,t.length-1):this.options.baseNode=t:this.options.baseNode="","undefined"!=e&&null!=e&&(e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),this.options.repeatNode=e),this.options.valueNode="undefined"!=i&&null!=i?i:""}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.xmlData2ArrData=function(t,e){try{if(null==t)return;if(9==t.nodeType)var i=t.selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode);else{if((o=this.options.baseNode).startsWith(t.tagName)){var o=o.replace(t.tagName,".");i=t.selectNodes(o+"/"+this.options.repeatNode)}if(0==i.length)i=(t=WebSquare.xml.parse(WebSquare.xml.serialize(t))).selectNodes("/"+this.options.baseNode+"/"+this.options.repeatNode)}for(var s=[],r=[],a={},n=this.options.valueNode,l=null==n||""==n,d=y.Z.getTextNodeValue,c=i.length,u=this.cellIdList.length,p=[],m=0;m<u;m++)p[m]=this.getCellInfo(this.cellIdList[m]);var f={},b=!1;if("object"===(0,g.A)(e)&&null!=e&&e.constructor===Array){b=!0;for(var v=0;v<e.length;v++)f[e[v]]=!0}for(m=0;m<c;m++){var w=m,S=(i[m],s.length),_={},C=[],x=this.options.rowStatusNodeName,I=i[m].selectSingleNode(x);null!=I&&r.push(d(I));for(var T=0;T<u;T++){var k=this.cellIdList[T];if(!b||f[k]){if(p[T].options.importExp)try{s[S+T]=new Function("return "+p[T].options.importExp)()}catch(t){s[S+T]=p[T].options.defaultValue,h.Y.printStackTrace(t,null,this)}else{if(p[T].options.importFormatter&&!p[T].options.setFormatter){C.push(T);continue}var L=i[m].selectSingleNode(k);s[S+T]=null!=L?l?d(L):L.getAttribute(n):p[T].options.defaultValue}this.options.xmlEncode&&null!=s[S+T]&&(s[S+T]=WebSquare.xml.decode(s[S+T])),_[k]=s[S+T]}else s[S+T]=p[T].options.defaultValue,this.options.xmlEncode&&null!=s[S+T]&&(s[S+T]=WebSquare.xml.decode(s[S+T])),_[k]=s[S+T]}for(var A=0;A<C.length;A++)try{var D=y.Z.getGlobalFunction(p[C[A]].options.importFormatter,this.scope_id);"function"==typeof D&&(s[S+C[A]]=D.call(this,_,w,C[A]))}catch(t){s[S+C[A]]=p[C[A]].options.defaultValue,h.Y.printStackTrace(t,null,this)}}return a.dataArr=s,a.rowStatusArr=r,a}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.jsonData2ArrData=function(t,e){try{if(null==t)return;for(var i=[],o=[],s={},r=t.length,a=this.cellIdList.length,n=this.options.rowStatusNodeName,l=[],d=0;d<a;d++)l[d]=this.getCellInfo(this.cellIdList[d]);var c={},u=!1;if("object"===(0,g.A)(e)&&null!=e&&e.constructor===Array){u=!0;for(var p=0;p<e.length;p++)c[e[p]]=!0}for(d=0;d<r;d++){var m=d,f=t[d],b=i.length;null!=t[d][n]&&o.push(t[d][n]);for(var v=0;v<a;v++){var w=this.cellIdList[v];if(!u||c[w])if(l[v].options.importExp)try{i[b+v]=new Function("return "+l[v].options.importExp)()}catch(t){i[b+v]=l[v].options.defaultValue,h.Y.printStackTrace(t,null,this)}else if(l[v].options.importFormatter&&!l[v].options.setFormatter)try{var S=y.Z.getGlobalFunction(l[v].options.importFormatter,this.scope_id);"function"==typeof S&&(i[b+v]=S.call(this,f,m,w))}catch(t){i[b+v]=l[v].options.defaultValue,h.Y.printStackTrace(t,null,this)}else{var _=t[d][w];null!=_?i[b+v]=_:"number"==l[v].options.dataType&&l[v].options.defaultValue&&!isNaN(l[v].options.defaultValue)?i[b+v]=parseInt(l[v].options.defaultValue,10):i[b+v]=l[v].options.defaultValue}else i[b+v]=l[v].options.defaultValue}}return s.dataArr=i,s.rowStatusArr=o,s}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.columnValue=function(t,e){if(void 0!==t[e])return t[e];if(void 0!==t.selectSingleNode){var i=t.selectSingleNode(e);if(null!=i){var o=this.options.valueNode
;return null==o||""==o?this.getTextNodeValue(i):i.getAttribute(o)}}var s=this.getCellInfo(e);return s&&s.options?s.options.defaultValue:""},pt.prototype.xpathValue=function(t,e){try{var i=WebSquare.xml.findNode(t,e);if(null==i)return"";if(1!=i.nodeType)return i.nodeValue;for(var o=i.firstChild;null!=o;o=o.nextSibling)if(3==o.nodeType)return o.nodeValue}catch(t){$l("xpath exeption"),h.Y.printStackTrace(t,null,this)}return""},pt.prototype.rowIndexValue=function(t){return t},pt.prototype.getArrXML=function(t,e){try{var i;switch(void 0!==e&&null!=e||(e={}),this.initializeType){case"grid":for(var o in this.childCompHash)return this.childCompHash[o].getArrXML(t);case"gridView":case"dataList":i=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":i=this.parent.id}e.id?i=e.id:(i=this.id,this.scope_obj&&(i=this.org_id||this.id));var s=e.initializeType?e.initializeType:this.initializeType,r=e.rowStatusNodeName?e.rowStatusNodeName:this.options.rowStatusNodeName,a=e.baseNode||""==e.baseNode?e.baseNode:this.options.baseNode,n=e.repeatNode||""==e.repeatNode?e.repeatNode:this.options.repeatNode,l=e.idAttribute||""==e.idAttribute?e.idAttribute:this.options.idAttribute,d=e.valueAttribute||""==e.valueAttribute?e.valueAttribute:this.options.valueAttribute;if(t instanceof Array){var c=!1;this.tagNmArr=a.replace(/\[[^\]]+\]/g,"").split("/"),l=""==l?"id":l;for(var u=0;u<this.tagNmArr.length;u++)if(null!=this.tagNmArr[u]&&""!=this.tagNmArr[u].wq_trim())if(c){var p=f.createElement(this.tagNmArr[u]);p.setAttribute(l,i),m.push(p),m[u-1].appendChild(m[u])}else{var m=[],f=WebSquare.xml.parse("<"+this.tagNmArr[u]+"/>");f.documentElement.setAttribute(l,i),m.push(f.documentElement),c=!0}if("dataList"===this.initializeType)if(this.options.attributeMap&&(x=y.Z.getComponentById(this.options.attributeMap)))for(u=0;u<m.length;u++)for(var b=0;b<x.getCount();b++)m[u].setAttribute(x.getKey(b),x.get(b));var v=n.replace(/\[[^\]]+\]/g,"").split("/"),w=null;for(u=0;u<t.length;u++){var S=t[u];w=[];var _=null;for(b=0;b<v.length;b++)if(""!=v[b]){var C=f.createElement(v[b]);w.push(C),0==b?m[m.length-1].appendChild(C):w[b-1].appendChild(w[b])}switch(_=w[v.length-1],this.initializeType){case"dataList":_.setAttribute("index",S);break;case"removeManager":_.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var x=y.Z.getComponentById(this.parent.options.attributeMap);for(u=0;u<w.length;u++)if(w[u].setAttribute(l,this.parent.id),x)for(b=0;b<x.getCount();b++)w[u].setAttribute(x.getKey(b),x.get(b))}else for(u=0;u<w.length;u++)w[u].setAttribute(l,this.parent.id)}var I=this.getColumnCount()+1;I="object"===(0,g.A)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns.length+1:this.getColumnCount()+1;var T=[];T[I-1]=void 0;for(var k=0;k<I;k++)if(k==I-1){if("dataList"!=s&&"removeManager"!=s&&"linkedDataList"!=s)continue;var L="";if(null==(L=this.getRowStatus(S))&&!0!==this.options.useNull&&(L=""),this.options.xmlEncode&&(L=WebSquare.xml.encode(L)),T[k]=f.createElement(r),""==d){var A=f.createTextNode(L);T[k].appendChild(A)}else T[k].setAttribute(d,L);if(T[k].setAttribute("statusValue",this.getRowStatusValue(S)),_.appendChild(T[k]),this.options.rowNumData){var D=f.createTextNode(S+1);T[k+1]=f.createElement("rowNum"),T[k+1].appendChild(D),_.appendChild(T[k+1])}}else{var W="";W="object"===(0,g.A)(e.includeColumns)&&null!=e.includeColumns&&e.includeColumns.constructor===Array?e.includeColumns[k]:this.cellIdList[k];var q=this.bodyIdColIndexMap[W],M=this.cellInfoHash[W],E=(L="",this.options.depthColumn||e.realRowIndex?S:this.filteredRowIndexArr[S]);if(M&&(L="expression"==M.options.inputType?M.getExpressionValue(E):this.dataArr[E*this.cellIdList.length+q]),null==L&&!0!==this.options.useNull&&(L=""),this.options.xmlEncode&&(L=WebSquare.xml.encode(L)),T[k]=f.createElement(W),""==d){A=f.createTextNode(L);T[k].appendChild(A)}else T[k].setAttribute(d,L);_.appendChild(T[k])}}return f}}catch(t){
h.Y.printStackTrace(t,null,this)}},pt.prototype.getAllArrXML=function(t){try{var e;switch(void 0!==t&&null!=t||(t={}),this.initializeType){case"grid":for(var i in this.childCompHash)return this.childCompHash[i].getAllArrXML();case"dataList":case"gridView":e=this.id;break;case"dataMap":case"removeManager":case"linkedDataList":e=this.parent.id}t.id?e=t.id:(e=this.id,this.scope_obj&&(e=this.org_id||this.id));var o=t.initializeType?t.initializeType:this.initializeType,s=t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName,r=t.baseNode||""==t.baseNode?t.baseNode:this.options.baseNode,a=t.repeatNode||""==t.repeatNode?t.repeatNode:this.options.repeatNode,n=t.idAttribute||""==t.idAttribute?t.idAttribute:this.options.idAttribute,l=t.valueAttribute||""==t.valueAttribute?t.valueAttribute:this.options.valueAttribute,d=!1;this.tagNmArr=r.replace(/\[[^\]]+\]/g,"").split("/");n=""==n?"id":n;for(var c=0;c<this.tagNmArr.length;c++)if(null!=this.tagNmArr[c]&&""!=this.tagNmArr[c].wq_trim())if(d){var u=m.createElement(this.tagNmArr[c]);u.setAttribute(n,e),p.push(u),p[c-1].appendChild(p[c])}else{var p=[],m=WebSquare.xml.parse("<"+this.tagNmArr[c]+"/>");m.documentElement.setAttribute(n,e),p.push(m.documentElement),d=!0}if("dataList"===this.initializeType)if(this.options.attributeMap&&(C=y.Z.getComponentById(this.options.attributeMap)))for(c=0;c<p.length;c++)for(var f=0;f<C.getCount();f++)p[c].setAttribute(C.getKey(f),C.get(f));var b=a.replace(/\[[^\]]+\]/g,"").split("/"),v=null;for(c=0;c<this.getTotalRow();c++){var w=c;v=[];var S=null;for(f=0;f<b.length;f++)if(""!=b[f]){var _=m.createElement(b[f]);v.push(_),0==f?p[p.length-1].appendChild(_):v[f-1].appendChild(v[f])}switch(S=v[b.length-1],this.initializeType){case"dataList":S.setAttribute("index",w);break;case"removeManager":S.setAttribute("index","removed");break;case"dataMap":if(this.parent.options.attributeMap){var C=y.Z.getComponentById(this.parent.options.attributeMap);for(c=0;c<v.length;c++)if(v[c].setAttribute(n,this.parent.id),C)for(f=0;f<C.getCount();f++)v[c].setAttribute(C.getKey(f),C.get(f))}else for(c=0;c<v.length;c++)v[c].setAttribute(n,this.parent.id)}var x=0;x="object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns.length+1:this.getColumnCount()+1;var I=[];I[x-1]=void 0;for(var T=0;T<x;T++)if(T==x-1){if("dataList"!=o&&"removeManager"!=o&&"linkedDataList"!=o)continue;var k="";if(null==(k=this._getRowStatus(w))&&!0!==this.options.useNull&&(k=""),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),I[T]=m.createElement(s),""==l){var L=m.createTextNode(k);I[T].appendChild(L)}else I[T].setAttribute(l,k);I[T].setAttribute("statusValue",this._getRowStatusValue(w)),S.appendChild(I[T])}else{var A="";A="object"===(0,g.A)(t.includeColumns)&&null!=t.includeColumns&&t.includeColumns.constructor===Array?t.includeColumns[T]:this.cellIdList[T];var D=this.bodyIdColIndexMap[A];k="";if(k=this._getData(w,D),this.options.xmlEncode&&(k=WebSquare.xml.encode(k)),I[T]=m.createElement(A),""==l){L=m.createTextNode(k);I[T].appendChild(L)}else I[T].setAttribute(l,k);S.appendChild(I[T])}}return m}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.xml2JSON=function(t){for(var e,i,o={attr:{},rowArr:[]},s=0;s<t.attributes.length;s++)WebSquare.nodeValueDeprecated?o.attr[t.attributes[s].name]=t.attributes[s].value:o.attr[t.attributes[s].nodeName]=t.attributes[s].nodeValue;var r=this.initializeType;switch(this.parent&&"grid"==this.parent.initializeType&&(r="grid"),r){case"removeManager":case"dataList":e="columnInfo",i="column";break;case"dataMap":e="keyInfo",i="key";break;case"grid":e="row",i="column"}var a=WebSquare.xml.getElementsByTagName(t,e,l.I._XML_NAMESPACE.W2);for(s=0;s<a.length;s++){for(var n=WebSquare.xml.getElementsByTagName(a[s],i,l.I._XML_NAMESPACE.W2),h=[],d=0;d<n.length;d++){
for(var c=n[d],u={},p=0;p<c.attributes.length;p++)WebSquare.nodeValueDeprecated?u[c.attributes[p].name]=c.attributes[p].value:u[c.attributes[p].nodeName]=c.attributes[p].nodeValue;h.push(u)}o.rowArr.push(h)}return 0===a.length&&o.rowArr.push([]),o},pt.prototype.getTextNodeValue=function(t){for(var e=null,i=t.firstChild;null!=i;i=i.nextSibling)"3"==i.nodeType&&(e=i.nodeValue);return e},pt.prototype.getID=function(){try{return this.id}catch(t){h.Y.printStackTrace(t)}},pt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=y.Z.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.Y.printStackTrace(t)}},pt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=y.Z.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.Y.printStackTrace(t)}},pt.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap){var i=y.Z.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}}catch(t){h.Y.printStackTrace(t)}},pt.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataList"==t)return t}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.reset=function(){try{if("dataList"==this.initializeType){if(this.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.I._XML_NAMESPACE.W2)[0];if(t&&this.useData){this.allowTextNode=!0;for(var e=WebSquare.xml.getElementsByTagName(t,"row",l.I._XML_NAMESPACE.W2),i=0;i<e.length;i++)this.setRowXML(i,e[i]);this.modifyAllStatus("R",{skipEvent:!0}),this.allowTextNode=!1}}else"JSON"==this.elementType&&this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R",{skipEvent:!0}));this.reform()}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.initDataList=function(){try{this.broadcast({gridView:["notifyBeforeInitDataList"]});var t=this.dataList.removeAll();return this.clearFilter(),this.broadcast({gridView:["notifyAfterInitDataList"]}),t}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getColumnOption=function(t,e){try{return this.getCellInfo(t).options[e]}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setColumnOption=function(t,e,i){try{this.getCellInfo(t).options[e]=i}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setRowNumData=function(t){try{y.Z.getBoolean(t)?this.options.rowNumData=!0:this.options.rowNumData=!1}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getColumnInfo=function(t,e){try{var i=-1;if("number"==typeof t?(this.cellIdList[t],i=t):(t,i=this.bodyIdColIndexMap[t]),"number"!=typeof e&&(e=0),i>-1&&i<this.structure.rowArr[e].length){var o={};for(var s in this.structure.rowArr[e][i])"@xml"!==s&&(o[s]=this.structure.rowArr[e][i][s]);return o}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getInfo=function(t,e){try{var i={};if("string"!=typeof t&&(t="dataList"===this.initializeType?"dataListInfo":"dataMap"===this.initializeType?"dataMapInfo":"attr"),"string"!=typeof e&&(e="dataList"===this.initializeType?"columnInfo":"dataMap"===this.initializeType?"keyInfo":"col"),i[t]=a.q.extend({},this.structure.attr),i[e]={},this.structure.rowArr.length>1)for(var o=0;o<this.structure.rowArr.length;o++){var s=e+o;i[e][s]={};for(var r=0;r<this.structure.rowArr[o].length;r++)i[e][s][this.cellIdList[r]]=this.getColumnInfo(r,o)}else if(1===this.structure.rowArr.length)for(o=0;o<this.structure.rowArr[0].length;o++)i[e][this.cellIdList[o]]=this.getColumnInfo(o);return i}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.getUserData=function(t){try{
return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.fireOnModelChangeEvent=function(t){try{if(t){var e={type:t.type,rowIndex:t.rowIndex,colID:t.colID,oldValue:t.oldValue,newValue:t.newValue};O.f.fireEvent(this,"onmodelchange",e)}}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.fireOnBeforeColumnChangeEvent=function(t){try{if(t)return O.f.fireEvent(this,"onbeforecolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.fireOnColumnChangeEvent=function(t){try{if(t)return O.f.fireEvent(this,"oncolumnchange",{oldColID:t.oldColumnID,newColID:t.newColumnID})}catch(t){h.Y.printStackTrace(t,null,this)}},pt.prototype.setIgnoreStatus=function(t,e){try{var i=this.getColumnIndex(t);if(null==i||null==e)return;this.ignoreStatusColArr[i]=e,this.getCellInfo(i).options.ignoreStatus=e}catch(t){h.Y.printStackTrace(t,null,this)}};var gt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};a.q.extend(gt.prototype,nt.prototype),a.q.extend(gt.prototype,lt.prototype),a.q.extend(gt.prototype,ct.prototype),a.q.extend(gt.prototype,pt.prototype),gt.filter=dt,gt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataList",pluginName:"dataList",userEvents:["onbeforerowpositionchange","onrowpositionchange","oncelldatachange","onbeforecelldatachange","oninsertrow","onremoverow","ondataload","onmodelchange","onbeforecolumnchange","oncolumnchange","onbeforecolumnfilterchange","onaftercolumnfilterchange","onrowstatuschange"],baseNode:"list",repeatNode:"map",valueNode:"",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",initRowPosition:null,importFormatter:"",setFormatter:"",JSONPath:"",rowNumData:!1,saveRemovedData:!0,keepInsertedRowDeleteStatus:!1,saveRemovedDataDeletedInsertedRow:!0,removeDummyRowStatus:!1,removedDataMatch:!1,validateAllItemsetData:!1,getMatchedFromAllData:!1,keepRowPosition:!0,syncFilterWithLinkedDataList:!0,keepFilter:!1,keepDataType:!1,undoRecursiveRow:!1,maxHistoryCount:10,sortType:"numberFirst",preserveType:!1,nullYNType:"",_empty:!1,useNull:!1,defaultValue:""},gt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType=o||"dataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,this.scope_id=null,this._bJsonData=!1,i)switch(this.elementType){case"XML":this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"dataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="dataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataList")||"id ["+this.id+"] is duplicated, so the existing dataList has been deleted, and a new one has been created.";d.v.printLog(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,
this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"dataList"==this.initializeType&&(window[WebSquare.noConflict].data[this.id]=this,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this)),this.event=new et.i,this.initializeDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},"dataList"==this.initializeType&&this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid)),O.f.fireEvent(this,"onload",null)}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.initializeDataList=function(t){try{if(this.childCompHash={},this.refCompHash={},this.activated=!1,"dataList"===this.initializeType)this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap());if(this.filterManager=new WebSquare.DataCollection.filterController(this),"dataList"==this.initializeType||"grid"==this.initializeType)"JSON"==this.elementType?this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element,"removeManager"):this.removeManager=new WebSquare.DataCollection.dataList(this.id+"??removeManager",this.options,this.element.cloneNode(!0),"removeManager"),this.removeManager.parent=this;else{var e=this.id.split("??");this.parent=y.Z.getComponentById(e[0])}this.columnPosition=null,this.rowPosition=null,this.dataArr=[],this.originalDataArr=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.oneRowDataLength=0,this.bodyIdColIndexMap={},this.cellInfoHash={},this.cellIdList=[],this.rowStatusArr=[],this.cellStatusArr=[],this.ignoreStatusColArr=[],this.commandList=[],this.commandPosition=-1,this.commandListMulti=[],this.commandPositionMulti=-1,this.undoRedo="",this.undoRedo="",this.structure=this.getStructure(),"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var i=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode;i=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=i,this.options.valueAttribute=i;for(var o=0,s=this.structure.rowArr,r=0;r<s.length;r++){this.oneRowDataLength+=s[r].length;for(var a=0;a<s[r].length;a++){var n=s[r][a],d=new WebSquare.DataCollection.dataListCellInfo(n,this,o);this.cellIdList.push(n.id),this.bodyIdColIndexMap[d.id]=o,this.cellInfoHash[d.id]=d,o++,this._bJsonData||"json"!==d.options.dataType||(this._bJsonData=!0)}}if("dataList"==this.initializeType)if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var c=WebSquare.xml.getElementsByTagName(t,"data",l.I._XML_NAMESPACE.W2)[0];if(c&&(this.useData=y.Z.getBoolean(c.getAttribute("use")),this.useData)){this.allowTextNode=!0;var u=WebSquare.xml.getElementsByTagName(c,"row",l.I._XML_NAMESPACE.W2),p=WebSquare.DataCollection.stopBroadCast;WebSquare.DataCollection.stopBroadCast=!0;for(r=0;r<u.length;r++)this.setRowXML(r,u[r]);WebSquare.DataCollection.stopBroadCast=p,this.broadcast({linkedDataList:["notifyDataChanged"],gridView:["notifySettedGridData",[void 0,void 0,void 0,void 0,void 0,!0]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"}),this.originalDataArr=this.dataArr.slice(0),this.modifyAllStatus("R",{skipEvent:!0}),
this.allowTextNode=!1}}else"JSON"==this.elementType&&(this.useData=y.Z.getBoolean(this.element.option.useData),this.useData&&this.element.data&&(this.setJSON(this.element.data),this.modifyAllStatus("R",{skipEvent:!0})))}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.finalize=function(){try{for(var t in this.removeAll({skipSavingRemovedData:"true"}),this.childCompHash){var e=this.childCompHash[t];e?e.constructor==WebSquare.DataCollection.linkedDataList||e.constructor==WebSquare.DataCollection.dataMap||e.constructor==WebSquare.DataCollection.dataList?(WebSquare.DataCollection.stopBroadCast||e.refresh(),WebSquare.DataCollection.api.remove(t)):e.successBinding=!1:delete this.childCompHash[t]}this.activated=!1,this.removeManager&&this.removeManager.id&&WebSquare.DataCollection.api.remove(this.removeManager.id)}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}if(null!=this.options.initRowPosition){var o=parseInt(this.options.initRowPosition,10);this.setRowPosition(o)}this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.f.isEventSupported(this.render,t))e&&e.constructor==Array?O.f.fireSystemEvent(this,t,e[0]):O.f.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.f.fireEvent.apply(O.f.fireEvent,s),s[0]=null}}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,g.A)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,g.A)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},gt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},gt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.Y.printStackTrace(t,null,this)}},gt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){
h.Y.printStackTrace(t,null,this)}};var mt=function(){};mt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},mt.prototype.setBroadcast=function(t){this._broadCastFlag=!1!==t||t},mt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),this.scope_id in WebSquare.DataCollection.stopBroadCastScope)return void WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid);if(WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&(void 0===i.render||null!=i.render))switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i[t.linkedDataList[0]](t.linkedDataList[1]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset():"rollback"==t.generalComp&&i.rollback()}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid]){var o=i.modelControl?i.modelControl.dataCollectionRefInfo:null;if("searchbox"==i.options.pluginName&&(o=i.input&&i.input.modelControl?i.input.modelControl.dataCollectionRefInfo:null),t.key&&i.modelControl&&o&&o.key!=t.key)continue;switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.initializeType){case"linkedDataList":if(t.linkedDataList){i.refresh();break}default:"refresh"==t.generalComp||"both"==t.generalComp?(i.modelControl.useRef||"searchbox"==i.options.pluginName&&i.input.modelControl.useRef)&&i.refresh():"binding"==t.generalComp?i.modelControl.binding():"rollback"==t.generalComp&&i.rollback()}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(var s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){var r=WebSquare.DataCollection.attributeMapInfo[this.id][s];y.Z.getComponentById(r).syncWithAttributeMap()}}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=y.Z.getComponentById(e))}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.synchronizeRef=function(){try{var t=WebSquare.DataCollection.parentToChildRef[this.id];if(t)for(var e in t)t[e]&&(this.refCompHash[e]=y.Z.getComponentById(e));this.broadcast({generalComp:["binding"]})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;this.childCompHash[t]=e}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.modelControl.binding()}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.syncWithAttributeMap=function(t,e){try{if(this.options.attributeMap&&this.options.attributeMap!=this.id){var i=y.Z.getComponentById(this.options.attributeMap);if(i)for(var o=i.getCount(),s=0;s<o;s++){t=i.getKey(s),e=i.get(s);this.options[t]=e}}}catch(t){h.Y.printStackTrace(t)}},mt.prototype.hasKey=function(t){try{return t=this.getKey(t),this._dataList.hasColumn(t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getID=function(){try{return this.id}catch(t){h.Y.printStackTrace(t)}},
mt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=y.Z.getComponentById(i);if(o.hasKey(t))return o.get(t)}return}catch(t){h.Y.printStackTrace(t)}},mt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e="");t in this.options&&(this.options[t]=e,this._dataList&&this._dataList.options&&!{bind:!0,id:!0,pluginName:!0,pluginType:!0}[t]&&(this._dataList.options[t]=e));var i=this.options.attributeMap;if(i){var o=y.Z.getComponentById(i);o.hasKey(t)&&o.set(t,e)}}catch(t){h.Y.printStackTrace(t)}},mt.prototype.getKey=function(t){try{return this._dataList.getColumnID(t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getIndex=function(t){try{return this._dataList.getColumnIndex(t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getCount=function(){try{return this._dataList.getTotalCol()}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.get=function(t){try{return t=this.getKey(t),this._dataList.getCellData(0,t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getOriginal=function(t){try{var e;return(t=this.getKey(t))&&(e=this._dataList.getOriginalCellData(0,t)),e}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getArray=function(t){try{return this._dataList.getRowData(0,t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getXML=function(t){try{t=t||{};var e=this._dataList.getRowXML(0,t),i=this.id;return t.id?null!=e.documentElement?e.documentElement.setAttribute("id",t.id):e.setAttribute("id",t.id):(this.scope_obj&&(i=this.org_id||this.id),null!=e.documentElement?e.documentElement.setAttribute("id",i):e.setAttribute("id",i)),e}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getJSON=function(t){try{var e=this._dataList.getRowJSON(0,t);if(!0===this.options.jsonArray&&(e=[e]),null!=this.options.customFormatter){var i=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof i&&(e=i(this,e))}return e}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getRefJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getJSON(t)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getType=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.dataType:""}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getDefaultValue=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.options?e.options.defaultValue:""}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getName=function(t){try{t=this.getKey(t);var e=this._dataList.getCellInfo(t);if(e)return e.name?e.name:""}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getInitializeType=function(){try{return this.getObjectType()}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.set=function(t,e,i){try{var o;if(null!=(t=this.getKey(t))&&null!=t){var s=this._dataList.getCellData(0,t);if(s!==e){if(!1===O.f.fireEvent(this,"onbeforemodelchange",{key:t,oldValue:s,newValue:e}))return void this.broadcast({key:t,linkedDataList:["refresh"],generalComp:"rollback"});this._dataList.setCellData(0,t,e),!this.firstSetting[t]&&this.options.firstSet?this.setOriginal(t,s):this.setOriginal(t,e);var r=!0;"undo"!=(o=null!=i&&null!=i?i:"")&&"redo"!=o||(r=!1),r&&this.options.maxHistoryCount>0&&("undo"!=this.undoRedo&&"redo"!=this.undoRedo||this.commandList.splice(this.commandPosition,this.commandList.length-this.commandPosition+1),this.commandList.length>=this.options.maxHistoryCount&&this.commandList.shift(),this.commandList.push({key:t,oldValue:s,value:e}),this.commandPosition=this.commandList.length-1,this.undoRedo=""),O.f.fireEvent(this,"onmodelchange",{key:t,oldValue:s,newValue:e})}O.f.fireEvent(this,"onkeyset",{key:t,oldValue:s,newValue:e}),this.broadcast({key:t,linkedDataList:["refresh"],generalComp:"both"})}}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setArray=function(t,e){try{
this._dataList.setRowData(0,t,!0,e,this.options.keepValue);for(var i=0;i<this.getCount();i++)this.setOriginal(i,this.get(i));this.commandList=[],this.commandPosition=-1,this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setXML=function(t,e,i){try{e=!1!==e,this._dataList.setRowXML(0,t,e,i,this.options.keepValue),this.options.firstSetSubmission&&(this.firstSetting={});for(var o=0;o<this.getCount();o++)this.setOriginal(o,this.get(o));this.commandList=[],this.commandPosition=-1,O.f.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setJSON=function(t,e,i){try{if(null!=this.options.customUnformatter){var o=y.Z.getGlobalFunction(this.options.customUnformatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}!0===this.options.jsonArray&&t&&t.constructor==Array&&1===t.length&&(t=t[0]);var s=this._dataList.getRowCount()>0;this._dataList.setRowJSON(0,t,s,i,this.options.keepValue);var r=this.getCount();this.options.firstSetSubmission&&(this.firstSetting={});for(var a=0;a<r;a++)this.setOriginal(a,this.get(a));this.commandList=[],this.commandPosition=-1,O.f.fireEvent(this,"onsetdata"),this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setOriginal=function(t,e){try{t=this.getKey(t),this.firstSetting[t]||(this._dataList.setOriginalCellData(0,t,e),this.firstSetting[t]=!0),this.firstSetting[t]&&t&&(this.statusHash[t]=this.getOriginal(t)==this.get(t))}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.addColumn=function(t){try{var e=this.getCount(),i=this._dataList.elementType;this._dataList.elementType="JSON";var o=new WebSquare.DataCollection.dataListCellInfo(t,this._dataList,e);this._dataList.elementType=i,this._dataList.cellIdList.push(t.id),this._dataList.bodyIdColIndexMap[o.id]=e,this._dataList.cellInfoHash[o.id]=o,this._dataList.oneRowDataLength=++e;var s=o.options.defaultValue||"";""!=s&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0),this._dataList.dataArr.push(s)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.reform=function(){try{for(var t in this._dataList.reform(),this.statusHash)this.statusHash[t]=!0;this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.undo=function(){try{for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this.getOriginal(i);this.set(i,o)}this.broadcast({linkedDataList:["refresh"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.restore=function(){try{if("undo"==this.undoRedo&&this.commandPosition--,this.commandPosition<0)return void(this.commandPosition=0);var t=this.commandList[this.commandPosition];this.set(t.key,t.oldValue,"undo"),this.undoRedo="undo"}catch(t){h.Y.printStackTrace(t)}},mt.prototype.redo=function(){try{if("redo"==this.undoRedo&&this.commandPosition++,this.commandList.length-1<this.commandPosition)return void(this.commandPosition=this.commandList.length-1);var t=this.commandList[this.commandPosition];this.set(t.key,t.value,"redo"),this.undoRedo="redo"}catch(t){h.Y.printStackTrace(t)}},mt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.q.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||y.Z.getBoolean(l.I.getConfiguration("/WebSquare/DataCollection/"+i+"/useConfig/@value"))){var r=l.I.getConfig(i);s=a.q.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.Y.printStackTrace(t,null,this)}},
mt.prototype.getModifiedKey=function(){try{var t=[];for(var e in this.statusHash)this.statusHash[e]||t.push(e);return t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getModifiedIndex=function(){try{var t,e=[];t=this.getModifiedKey();for(var i=0;i<t.length;i++)e.push(this.getIndex(t[i]));return e}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getModifiedData=function(){try{for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.get(e[i]));return t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getModifiedXML=function(){try{for(var t=this.getModifiedKey(),e=-1,i=function t(i){var o=i[++e],s="<"+o+">";return e<i.length-1&&(s+=t(i)),s+="</"+o+">"}(this.getOption("baseNode").split()),o=WebSquare.xml.parse(i).documentElement,s=0;s<t.length;s++){var r=WebSquare.xml.parse("<"+t[s]+"></"+t[s]+">").documentElement;this.getOption("valueAttribute")?r.setAttribute(this.getOption("valueAttribute"),this.get(t[s])):r=WebSquare.xml.parse("<"+t[s]+">"+this.get(t[s])+"</"+t[s]+">").documentElement,WebSquare.xml.appendChild(o,r)}return o}catch(t){h.Y.printStackTrace(t)}},mt.prototype.getModifiedJSON=function(){try{for(var t={},e=this.getModifiedIndex(),i=0;i<e.length;i++){t[this.getKey(e[i])]=this.get(e[i])}if(null!=this.options.customFormatter){var o=y.Z.getGlobalFunction(this.options.customFormatter,this.scope_id);"function"==typeof o&&(t=o(this,t))}return t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getModifiedArray=function(){try{var t={};return t.key=this.getModifiedKey(),t.value=this.getModifiedData(),t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.initRowStatus=function(){try{for(var t in this.statusHash)this.statusHash[t]||(this.statusHash[t]=!0)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.modifyKeyStatus=function(t,e){try{if(null==e||!this.hasKey(t))return;this.statusHash[t]=!y.Z.getBoolean(e)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getObjectType=function(){try{var t=this.initializeType;if("dataMap"==t)return t}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.reset=function(){try{if("dataMap"==this.initializeType){if(this.statusHash={},this.firstSetting={},this._dataList.removeAll(),"XML"==this.elementType){var t=WebSquare.xml.getElementsByTagName(this.element,"data",l.I._XML_NAMESPACE.W2)[0];t&&this.useData?(this._dataList.allowTextNode=!0,this.setXML(t,!1),this._dataList.allowTextNode=!1):(this._dataList.allowTextNode=!0,this.setEmpty(),this._dataList.allowTextNode=!1)}else"JSON"==this.elementType&&this.useData&&this.element.data&&this.setJSON(this.element.data);if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var e=this.getCount(),i=0;i<e;i++){var o=this._dataList.getCellInfo(i);""!=o.options.defaultValue&&(this.firstSetting[o.options.id]=!0,this.statusHash[o.options.id]=!0)}}}}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setEmpty=function(){try{0==this._dataList.getRowCount()&&this._dataList.insertRow(0);for(var t=this.getCount(),e=0;e<t;e++){var i=this.getKey(e),o=this._dataList.getCellInfo(e).options.defaultValue;this.set(i,o),this.setOriginal(i,o)}this._clearHistory()}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype._clearHistory=function(){try{this._dataList._undoRedoMultiHistoryClear(),this.commandList=[],this.commandPosition=-1,this.undoRedo=""}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setEmptyValue=function(){try{this.setEmpty()}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getKeyInfo=function(t,e){try{return this._dataList.getColumnInfo(t,e)}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getInfo=function(t,e){try{var i=this._dataList.getInfo(t,e);return i.dataMapInfo.id=this.id,i}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},
mt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}},mt.prototype.getRefComponent=function(){try{var t=[];for(var e in this.refCompHash){var i={};i.originalID=this.refCompHash[e].org_id,i.id=this.refCompHash[e].id,t.push(i)}return t}catch(t){h.Y.printStackTrace(t,null,this)}};var ft=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};a.q.extend(ft.prototype,mt.prototype),ft.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.dataMap",pluginName:"dataMap",userEvents:["onmodelchange","onvalidatekey","onsetdata","onkeyset","onbeforemodelchange"],baseNode:"map",repeatNode:"",valueNode:"",valueAttribute:"",idAttribute:"",JSONPath:"",firstSet:!1,firstSetSubmission:!1,keepValue:!1,jsonArray:!1,maxHistoryCount:10,nullYNType:"",useNull:!1},ft.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="dataMap",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),this.options.xmlEvents=WebSquare.Parser.parseEvent(i);break;case"JSON":this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="dataMap",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"dataMap")||"id ["+this.id+"] is duplicated, so the existing dataMap has been deleted, and a new one has been created.";d.v.printLog(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.event=new et.i,this.initializeDataMap(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},this.options.xmlEvents&&(this.options.xmlEvents=this.event.addUserEvents(this,this.options.xmlEvents,this.options.userEvents),this.options.xmlEvents.length>0&&this.event.addEvents(this,this.options.xmlEvents)),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.initializeDataMap=function(t){try{this.childCompHash={},this.refCompHash={},this.statusHash={},this.firstSetting={},this.activated=!1,this.commandList=[],this.commandPosition=-1,this.options.attributeMap&&this.id!=this.options.attributeMap&&(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]||(WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap]=[]),WebSquare.DataCollection.attributeMapInfo[this.options.attributeMap].push(this.id),this.syncWithAttributeMap()),
"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute="");var e=""==this.options.valueNode?this.options.valueAttribute:this.options.valueNode;if(e=""==this.options.valueAttribute?this.options.valueNode:this.options.valueAttribute,this.options.valueNode=e,this.options.valueAttribute=e,this.options.repeatNode=this.options.baseNode,this.element=t,"JSON"==this.elementType&&(t.columnInfo=t.keyInfo),this._dataList=new WebSquare.DataCollection.dataList(this.id+"??dataList",this.options,t,"dataMap"),this._dataList.parent=this,"dataMap"==this.initializeType){if(WebSquare.DataCollection.api.addChild(this),this.synchronize(),this.synchronizeRef(),"XML"==this.elementType){var i=WebSquare.xml.getElementsByTagName(t,"data",l.I._XML_NAMESPACE.W2)[0];i&&(this.useData=y.Z.getBoolean(i.getAttribute("use")),this.useData&&(this._dataList.allowTextNode=!0,this.setXML(i,!1),this._dataList.allowTextNode=!1))}else"JSON"==this.elementType&&(this.useData=this.element.option.useData,this.useData&&this.element.data&&this.setJSON(this.element.data));if(0==this._dataList.getRowCount()){this._dataList.insertRow(0);for(var o=this.getCount(),s=0;s<o;s++){var r=this._dataList.getCellInfo(s);""!=r.options.defaultValue&&(this.firstSetting[r.options.id]=!0,this.statusHash[r.options.id]=!0)}}}if(WebSquare.DataCollection.attributeMapInfo[this.id])for(s=0;s<WebSquare.DataCollection.attributeMapInfo[this.id].length;s++){var a=WebSquare.DataCollection.attributeMapInfo[this.id][s];y.Z.getComponentById(a).syncWithAttributeMap()}}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.finalize=function(){try{this.activated=!1,this._dataList.id&&WebSquare.DataCollection.api.remove(this._dataList.id)}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.activate=function(){try{if(!this.activated){for(var t in this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),this.addEvent(t,e)}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.f.isEventSupported(this.render,t))e&&e.constructor==Array?O.f.fireSystemEvent(this,t,e[0]):O.f.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.f.fireEvent.apply(O.f.fireEvent,s),s[0]=null}}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,g.A)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,g.A)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}
this.options.xmlEvents=this.userEventList.slice()}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},ft.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},ft.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.Y.printStackTrace(t,null,this)}},ft.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.Y.printStackTrace(t,null,this)}};var bt=function(){};bt.prototype.getBroadcast=function(){return!1!==this._broadCastFlag},bt.prototype.setBroadcast=function(t,e,i){if(!1===t)this._broadCastFlag=t;else if(this._broadCastFlag=!0,!0===e){var o={gridView:[{refreshInstance:!0}],pivot:[{type:"render",refresh:!0}]};if("object"===(0,g.A)(i))for(var s in i)"object"===(0,g.A)(i[s])&&i[s].constructor===Array&&(o[s]=i[s].slice(0));var r={linkedDataList:["notifyDataChanged"],gridView:["notifyDataChanged"],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwRealtimeChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],pivot:["refreshItemset"],generalComp:"both"};for(var s in o)r[s].push(o[s]);this.broadcast(r)}},bt.prototype.broadcast=function(t){try{if(WebSquare.DataCollection.stopBroadCast&&WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid),this.scope_id in WebSquare.DataCollection.stopBroadCastScope)return void WebSquare.DataCollection.stopBroadCastComp._wq_add(this.uuid);if(WebSquare.DataCollection.stopBroadCast||!this.getBroadcast())return;for(var e in this.childCompHash){if(null!=(i=this.childCompHash[e])&&WebSquare.idCache[i.uuid]&&null!=i.render)switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"gridView":t.gridView&&i[t.gridView[0]].apply(i,t.gridView[1]||[]);break;case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;case"checkcombobox":if(t.checkcombobox){i[t.checkcombobox[0]].apply(i,t.checkcombobox[1]||[]);break}default:"refreshItemset"==t.generalComp||"both"==t.generalComp?i.modelControl.useItemset&&i.refreshItemset(t.mode||"keepIndex"):t.generalComp&&i[t.generalComp[0]].apply(i,t.generalComp[1]||[])}}for(var e in this.refCompHash){var i;if(null!=(i=this.refCompHash[e])&&WebSquare.idCache[i.uuid])switch("stop"==i.activeStatus&&"function"==typeof i.preActivate&&i.preActivate(),i.options.pluginName){case"linkedDataList":if(t.linkedDataList){i.refresh();break}case"fusionchart":t.fusionChart&&i[t.fusionChart[0]].apply(i,t.fusionChart[1]||[]);break;default:"refresh"!=t.generalComp&&"both"!=t.generalComp||i.modelControl.useRef&&i.refresh()}}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.synchronize=function(){try{var t=WebSquare.DataCollection.parentToChildRelation[this.id];if(t)for(var e in t)t[e]&&(this.childCompHash[e]=y.Z.getComponentById(e));this.broadcast({gridView:["setDataList"],generalComp:["refreshItemArr"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype._addRelation=function(t){try{if(!this.childCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;switch(this.childCompHash[t]=e,"stop"!=e.activeStatus||"function"!=typeof e.preActivate||e.skipPreActivate||e.preActivate(),e.options.pluginName||e.initializeType){case"linkedDataList":case"grid":case"gridView":e.setDataList()}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype._addRefRelation=function(t){try{if(!this.refCompHash)return;var e=y.Z.getComponentById(t);if(!e)return;switch(this.refCompHash[t]=e,"stop"==e.activeStatus&&"function"==typeof e.preActivate&&e.preActivate(),e.options.pluginName||e.initializeType){
case"grid":case"gridView":e.drawData(0,0);break;default:e.modelControl.useRef&&e.refresh()}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.syncWithParent=function(){try{if(this._dataList){if(this.conditionInfo.targetInfo={},this.conditionInfo.keyArray=[],this.conditionInfo.columnArray=[],this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this.filterManager.clear(),this.filterManager.runFilter(this.conditionInfo.filterInfo.condition),this.filterManager.runSort(this.conditionInfo.sortInfo.condition),this.initialRowIndexArr=this.filteredRowIndexArr.slice(0),this.initialFilterList=this.filterManager.filterArr.slice(0),""==this.conditionInfo.sortInfo.condition&&this.sortStatusInfo)for(var t in this.sortStatusInfo)if(this.sortStatusInfo[t]){var e=this.sortStatusInfo[t].colID,i=this.sortStatusInfo[t].sortOrder;1==i?this.sort(e,0):-1==i&&this.sort(e,1)}this.broadcast({generalComp:["refreshItemArr"]})}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.addChild=function(t){try{this.childCompHash[t.id]=t}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.removeChild=function(t){try{this.childCompHash&&delete this.childCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.addRefComp=function(t){try{this.refCompHash[t.id]=t}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.removeRefComp=function(t){try{this.refCompHash&&delete this.refCompHash[t]}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.refresh=function(t){try{this.successBinding&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.refreshRef=function(t){try{this.successBinding&&this.conditionInfo.filterInfo.useRef&&(this.syncWithParent(),this.broadcast({gridView:["refresh"],generalComp:"both",mode:t}))}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getConfiguredOptions=function(){try{var t,e,i=this.defaultOptions.pluginName,o={};if(this.configuredOptions={},this.configuredOptions[i])t=this.configuredOptions[i].keys,e=this.configuredOptions[i].values;else{var s=a.q.extendKeepingType({id:"",pluginType:"xfControl",pluginName:"",userEvents:[],xmlEvents:null,value:"",model:"",bind:"",style:"",useConfig:!1},this.defaultOptions);if(s.useConfig||y.Z.getBoolean(l.I.getConfiguration("/WebSquare/"+i+"/useConfig/@value"))){var r=l.I.getConfig(i);s=a.q.extendKeepingType(s,r)}for(var n in t=[],e=[],s)t.push(n),e.push(s[n]);this.configuredOptions[i]={keys:t,values:e}}for(var d=0;d<t.length;d++)o[t[d]]=e[d];return o}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getOption=function(t){try{var e=t in this.options,i=this.options.attributeMap;if(e)return this.options[t];if(i){var o=y.Z.getComponentById(i);if(o&&o.hasKey(t))return o.get(t)}return}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getID=function(){try{return this.id}catch(t){h.Y.printStackTrace(t)}},bt.prototype.setOption=function(t,e){try{"string"==typeof e&&"$none"==e.wq_trim()&&(e=""),t in this.options&&(this.options[t]=e);var i=this.options.attributeMap;if(i){var o=y.Z.getComponentById(i);o&&o.hasKey(t)&&o.set(t,e)}}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRealRowIndex=function(t){return this.filteredRowIndexArr[t]},bt.prototype.getLinkedRowIndex=function(t){return this.getRealRowIndex(t)},bt.prototype.getParentRealRowIndex=function(t){return this.initialRowIndexArr[t]},bt.prototype.getLinkedRealRowIndex=function(t){var e=this.filteredRowIndexArr[t];if("number"==typeof e)for(var i=0;i<this.initialRowIndexArr.length;i++)if(this.initialRowIndexArr[i]===e)return i;return null},bt.prototype.getFilteredRowIndex=function(t){if(this.filteredRowIndexArr[this.filteredRowIndexMap[t]]!==t){this.filteredRowIndexMap={};for(var e=0;e<this.filteredRowIndexArr.length;e++)this.filteredRowIndexMap[this.filteredRowIndexArr[e]]=e}
return this.filteredRowIndexMap[t]},bt.prototype.getTotalRow=function(){try{return this.initialRowIndexArr.length}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getTotalCol=function(){try{return this._dataList.getTotalCol()}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRowCount=function(){try{return this.getDataLength()}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getCellData(i,e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getOriginalCellData=function(t,e){try{var i=this.getRealRowIndex(t);return this._dataList.getOriginalCellData(i,e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getDataLength=function(){return this.filteredRowIndexArr.length},bt.prototype.getColCnt=function(){try{return this._dataList.getColCnt()}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getRowPosition=function(){try{return this.getFilteredRowIndex(this._dataList.getRowPosition())}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.setRowPosition=function(t){try{return this._dataList.setRowPosition(this.getRealRowIndex(t))}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getColSum=function(t){try{var e=this.getColData(t);return y.Z.sum(e)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getColAvg=function(t){try{var e="",i=this.getColData(t);if(i.length>0){for(var o=0;o<i.length;o++)""==i[o].replace(/^\s+|\s+$/g,"")&&(i[o]="0");e=y.Z.sum(i)}return""==e?"":e/i.length}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getColMax=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e<s)&&(e=s)}return e=null==e?"":e,e=y.Z.setPrecision(e)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getColMin=function(t){try{for(var e=null,i=this.getColData(t),o=0;o<i.length;o++){var s=parseFloat(i[o]);isNaN(s)||(null==e||e>s)&&(e=s)}return e=null==e?"":e,e=y.Z.setPrecision(e)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getRealRowIndexArr=function(){return this.filteredRowIndexArr.slice(0)},bt.prototype.getColData=function(t){try{for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e.push(this.getCellData(i,t));return e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRowData=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowData(e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getDataRow=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getDataRow(e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getMatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUnmatchedData=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowData(l))}return r}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getMatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getMatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUnmatchedColumnData=function(t,e,i,o,s,r){try{this.broadcast({gridView:["_endEdit"]});for(var a=[],n=this.getUnmatchedIndex(t,e,o,s,r),l=0;l<n.length;l++){var d=this.getFilteredRowIndex(n[l]);a.push(this.getCellData(d,i))}return a}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getFilteredColData=function(t){for(var e=[],i=0;i<this.getDataLength();i++)e.push(this.getCellData(i,t));return e},bt.prototype.getMatchedIndex=function(t,e,i,o,s){try{i=void 0===i||null==i||i,0!=(i=y.Z.getBoolean(i))&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),
"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],c=this.getRealRowIndex(l);1==i?(d===e||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase()===e.toLowerCase())&&n.push(c):(d.indexOf(e)>-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())>-1)&&n.push(c)}return n}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUnmatchedIndex=function(t,e,i,o,s){try{0!=i&&(i=!0);var r=this._dataList.getColumnIndex(t),a=this.getFilteredColData(r),n=[];"number"!=typeof o&&(o=0),"number"!=typeof s&&(s=a.length),s>a.length&&(s=a.length);for(var l=o;l<s;l++){var d=a[l],c=this.getRealRowIndex(l);1==i?d!==e&&(this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d?d.toLowerCase()!==e.toLowerCase()&&n.push(l):n.push(c)):(d.indexOf(e)<=-1||this.options.matchIgnoreCase&&"string"==typeof e&&"string"==typeof d&&d.toLowerCase().indexOf(e.toLowerCase())<=-1)&&n.push(c)}return n}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRangeData=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++){var r=this.getRealRowIndex(s);i=i.concat(this.getRowData(r))}return i}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllData=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.initialRowIndexArr[i],t));return e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllFilteredData=function(t){this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowData(this.filteredRowIndexArr[i],t));return e},bt.prototype.getColumnDistinctDataArray=function(t){try{this.broadcast({gridView:["_endEdit"]});var e=[],i=[];"string"==typeof t&&(t=this._dataList.bodyIdColIndexMap[t]);for(var o=this._dataList.getCellInfo(t),s=this.getColData(t),r=0;r<s.length;r++){i[s[r]]=1}for(var a in i)e.push(a);return"text"==o.options.dataType?e.sort():e.sort(this.comparator),e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRangeXML=function(t,e){try{if(t>e){var i=e;e=t,t=i}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var o=[],s=t;s<=e;s++){var r=this.getRealRowIndex(s);o.push(r)}return this._dataList.getArrXML(o)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getMatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getMatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUnmatchedXML=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});var r=this.getUnmatchedIndex(t,e,i,o,s);return this._dataList.getArrXML(r)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRowXML=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowXML(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllXML=function(t){try{this.broadcast({gridView:["_endEdit"]});var e={id:this.id,initializeType:this.initializeType,baseNode:this.options.baseNode,repeatNode:this.options.repeatNode,idAttribute:this.options.idAttribute,valueAttribute:this.options.valueAttribute,rowStatusNodeName:this.options.rowStatusNodeName};return t&&(e={id:t.id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName}),
this._dataList.getArrXML(this.initialRowIndexArr,e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllFilteredXML=function(t){this.broadcast({gridView:["_endEdit"]});var e={id:(t=t||{}).id||this.id,initializeType:this.initializeType,baseNode:t.baseNode||this.options.baseNode,repeatNode:""==t.repeatNode||t.repeatNode?t.repeatNode:this.options.repeatNode,idAttribute:""==t.idAttribute||t.idAttribute?t.idAttribute:this.options.idAttribute,valueAttribute:""==t.valueAttribute||t.valueAttribute?t.valueAttribute:this.options.valueAttribute,rowStatusNodeName:""==t.rowStatusNodeName||t.rowStatusNodeName?t.rowStatusNodeName:this.options.rowStatusNodeName};return this._dataList.getArrXML(this.filteredRowIndexArr,e)},bt.prototype.getRowJSON=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowJSON(e,{rowStatusNodeName:this.options.rowStatusNodeName})}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.initialRowIndexArr.length;i++)e.push(this._dataList.getRowJSON(this.initialRowIndexArr[i],t));return e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRefAllJSON=function(t){try{return void 0!==t&&null!=t||(t={}),t.exceptEmptyValue=!0,this.getAllJSON(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getAllFilteredJSON=function(t){try{this.broadcast({gridView:["_endEdit"]}),t||(t={}),t.rowStatusNodeName=this.options.rowStatusNodeName;for(var e=[],i=0;i<this.filteredRowIndexArr.length;i++)e=e.concat(this._dataList.getRowJSON(this.filteredRowIndexArr[i],t));return e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRangeJSON=function(t,e){try{var i=[];if(t>e){var o=e;e=t,t=o}t<0&&(t=0),e>this.getDataLength()-1&&(e=this.getDataLength()-1);for(var s=t;s<=e;s++)i.push(this.getRowJSON(s));return i}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getMatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getMatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUnmatchedJSON=function(t,e,i,o,s){try{this.broadcast({gridView:["_endEdit"]});for(var r=[],a=this.getUnmatchedIndex(t,e,i,o,s),n=0;n<a.length;n++){var l=this.getFilteredRowIndex(a[n]);r.push(this.getRowJSON(l))}return r}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getFusionChartData=function(t,e,i,o){try{var s={},r=(e=e,i.wq_replaceAll("'",'"'));i=(r=JSON.parse(r))[0];switch(this._singleSerises=function(){for(var t=[],r=this.getAllJSON(),a=0;a<r.length;a++){var n={label:r[a][e],value:r[a][i],color:r[a][o]};t.push(n)}return s.data=t,s},this._multiSerises=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<i.length;t++){var e=this._getFusionChartSeriesDate(t);s.dataset.push(e)}return s},this._msStacked=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<r.length;t++){i=r[t];for(var e={dataset:[]},o=0;o<i.length;o++){var a=this._getFusionChartSeriesDate(o);e.dataset.push(a)}s.dataset.push(e)}return s},this._msStackedColumn2DLineDY=function(){(s=this._getFusionChartCategory()).dataset=[];for(var t=0;t<r.length-1;t++){i=r[t];for(var e={dataset:[]},o=0;o<i.length;o++){var a=this._getFusionChartSeriesDate(o);e.dataset.push(a)}s.dataset.push(e)}s.lineset=[];var n=r.length-1;i=r[n];for(t=0;t<i.length;t++){a=this._getFusionChartSeriesDate(t);s.lineset.push(a)}return s},this._scatter=function(){s.dataset=[];for(var o=this._getUniqueArr(this.getColData(e)),r=0;r<o.length;r++){for(var a={data:[]},n=0;n<this.getRowCount();n++)if(o[r]==this.getCellData(n,e)){var l={};"scatter"==t.toLowerCase()?l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1])}:"bubble"==t.toLowerCase()&&(l={x:this.getCellData(n,i[0]),y:this.getCellData(n,i[1]),z:this.getCellData(n,i[2])}),a.data.push(l)}a.seriesname=this.getColumnName(o[r]),s.dataset.push(a)}return s},
this._zoomLine=function(){if(1==this.getRowCount()){(s={categories:[{category:this.getCellData(0,e)}]}).dataset=[];for(var t=0;t<i.length;t++){var o={};o.seriesname=this.getColumnName(i[t]),o.data=this.getCellData(0,i[t]),s.dataset.push(o)}return s}return this._multiSerises()},this._getFusionChartCategory=function(){for(var t=[],i=this.getColData(e),o=0;o<i.length;o++){var s={label:i[o]};t.push(s)}return{categories:[{category:t}]}},this._getFusionChartSeriesDate=function(t){var e,o={};o.data=[];var s=[];if("string"!=typeof i[t]){for(var r in e=i[t].id,o.seriesname=this.getColumnName(e),i[t])if(i[t].hasOwnProperty(r))if(this.hasColumn(i[t][r])&&"id"!=r.toLowerCase()){var a={};a[r]=i[t][r],s.push(a)}else o[r]=i[t][r]}else e=i[t],o.seriesname=this.getColumnName(e);for(var n=0;n<this.getRowCount();n++){for(var l={value:this.getCellData(n,e)},h=0;h<s.length;h++)for(var d in s[h])l[d]=this.getCellData(n,s[h][d]);o.data.push(l)}return o},this._getUniqueArr=function(t){for(var e={},i=[],o=0;o<t.length;o++)void 0===e[t[o]]&&(e[t[o]]=1);for(var o in e)i.push(o);return i},t.toLowerCase()){case"column2d":case"column3d":case"bar2d":case"bar3d":case"pie2d":case"pie3d":case"doughnut2d":case"doughnut3d":case"pareto2d":case"pareto3d":case"line2d":case"area":case"ssgrid":return this._singleSerises();case"mscolumn2d":case"mscolumn3d":case"msline":case"msarea":case"msbar2d":case"msbar3d":case"marimekko":case"stackedcolumn2d":case"stackedcolumn3d":case"stackedarea2d":case"stackedbar2d":case"stackedbar3d":case"mscombi3d":case"mscombi2d":case"mscolumnline3d":case"stackedcolumn2dline":case"stackedcolumn3dline":case"mscombidy2d":case"mscolumn3dlinedy":case"stackedcolumn3dlinedy":case"scrollcolumn2d":case"scrollline2d":case"scrollArea2d":case"scrollstackedcolumn2d":case"scrollcombi2d":case"scrollcombidy2d":case"stackedcolumn3dlinedy":return this._multiSerises();case"scatter":case"bubble":return this._scatter();case"zoomline":return this._zoomLine();case"msstackedcolumn2d":return this._msStacked();case"msstackedcolumn2dlinedy":return this._msStackedColumn2DLineDY()}}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRowArray=function(t){try{var e=this.getRealRowIndex(t);return this._dataList.getRowArray(e)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getRowStatusValue=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatusValue(e)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getRowStatus=function(t){try{var e=this.getRealRowIndex(t);return this._dataList._getRowStatus(e)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getRowIndexByStatus=function(t){try{for(var e=[],i=0;i<this.getDataLength();i++){var o=this.getRealRowIndex(i);t.indexOf(this._dataList.getRowStatus(o))>-1&&e.push(o)}return e}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getInsertedIndex=function(){try{return this.getRowIndexByStatus("C")}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUpdatedIndex=function(){try{return this.getRowIndexByStatus("U")}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getDeletedIndex=function(){try{return this.getRowIndexByStatus("DV")}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getOnlyDeletedIndex=function(){try{return this.getRowIndexByStatus("D")}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getModifiedIndex=function(){try{return this.getRowIndexByStatus("CUD")}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getInsertedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getInsertedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getInsertedIndex();return this._dataList.getArrXML(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getInsertedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getInsertedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},
bt.prototype.getDeletedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getDeletedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getDeletedIndex();return this._dataList.getArrXML(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getDeletedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getDeletedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUpdatedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUpdatedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getUpdatedIndex();return this._dataList.getArrXML(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getUpdatedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getUpdatedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getModifiedData=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowData(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getModifiedXML=function(){try{this.broadcast({gridView:["_endEdit"]});var t=this.getModifiedIndex();return this._dataList.getArrXML(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.getModifiedJSON=function(){try{this.broadcast({gridView:["_endEdit"]});for(var t=[],e=this.getModifiedIndex(),i=0;i<e.length;i++)t.push(this.getRowJSON(e[i]));return t}catch(t){h.Y.printStackTrace(t)}},bt.prototype.setCondition=function(t,e){try{switch(t.toLowerCase()){case"filter":this.setFilterCondition(e);break;case"sort":this.setSortCondition(e)}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getFilterCondition=function(){try{return this.conditionInfo.filterInfo.orgCondition}catch(t){h.Y.printStackTrace(t,null,this)}return""},bt.prototype.setFilterCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.filterInfo.parse=!1,this.conditionInfo.filterInfo.useRef=!1,this.conditionInfo.filterInfo.condition=t,this.conditionInfo.filterInfo.orgCondition=t,this.conditionInfo.filterInfo.checkVal=!0,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.setSortCondition=function(t){try{"string"==typeof t&&(this.conditionInfo.sortInfo.parse=!1,this.conditionInfo.sortInfo.condition=t,this.conditionInfo.sortInfo.orgCondition=t,this.syncWithParent()),this.broadcast({generalComp:"both",mode:"replace"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getSortCondition=function(){try{return this.conditionInfo.sortInfo.orgCondition}catch(t){h.Y.printStackTrace(t,null,this)}return""},bt.prototype.getObjectType=function(){try{var t=this.initializeType;if("linkedDataList"==t)return t}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.setColumnFilter=function(t,e,i,o){try{var s=this._dataList.getColumnIndex(t);if(this.broadcast({gridView:["notifyBeforeSettedColumnFilter"]}),"object"!==(0,g.A)(arguments[0])||y.Z.isString(arguments[0]))this.setFilter({type:"row",colIndex:s,key:e,condition:i,exactMatch:o});else{if("row"!==arguments[0].type&&"func"!==arguments[0].type&&"regExp"!==arguments[0].type)throw new Error("type does not support.[type:"+arguments[0].type+"]");this.setFilter({type:arguments[0].type,colIndex:"string"==typeof arguments[0].colIndex&&"rowstatus()"==arguments[0].colIndex.toLowerCase()?"@rowStatus":arguments[0].colIndex,key:arguments[0].key,condition:arguments[0].condition,exactMatch:arguments[0].exactMatch,param:arguments[0].param,noRefresh:arguments[0].noRefresh,keepTop:arguments[0].keepTop,internal:arguments[0].internal})}
this.broadcast({gridView:["notifyAfterSettedColumnFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.removeColumnFilter=function(t,e){try{var i=this.getColumnID(t);this.broadcast({gridView:["notifyBeforeRemovedColumnFilter"]}),this.removeFilter({type:"row",colIndex:"rowstatus()"==t.toLowerCase()?"@rowStatus":i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"func",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!1),this.removeFilter({type:"regExp",colIndex:i,key:"",noRefresh:e&&!0===e.noRefresh,internal:e&&!0===e.internal},!0),this.broadcast({gridView:["notifyAfterRemovedColumnFilter"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.clearSortFilter=function(){try{this.sortStatusInfo={},this.sortStatusArr=[],this.setSortCondition("")}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.removeColumnFilterAll=function(){try{this.clearFilter()}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getAllNoFilteredData=function(){try{return this._dataList.getAllData()}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.setFilter=function(t){try{if(t&&t.noRefresh||this.broadcast({gridView:["notifySaveFocusedCell"]}),"@rowStatus"!=(t=a.q.extend({type:"",colIndex:-1,key:"",condition:"and",bodyIdColIndexMap:this.bodyIdColIndexMap,internal:!1},t||{})).colIndex){"string"==typeof t.colIndex&&(t.colIndex=this._dataList.bodyIdColIndexMap[t.colIndex]);var e=(d=this._dataList.getCellInfo(t.colIndex)).options.dataType;t.columnDataType=e}var i=!1;if(t.sortIndex){this.sortStatusInfo={},this.sortStatusArr=[];var o=[],s=[],r=[];o="string"==typeof t.sortIndex?t.sortIndex.wq_trim().split(" "):t.sortIndex,t.sortOrder&&"string"==typeof t.sortOrder?s=t.sortOrder.wq_trim().split(" "):"object"==(0,g.A)(t.sortOrder)&&(s=t.sortOrder),t.dataType&&(r=t.dataType.wq_trim().split(" ")),t.sortIndexArr=[],t.sortOrderArr=[],t.dataTypeArr=[],t.sortIdArr=[],t.numberExtractionValueArr=[];for(var n=0;n<o.length;n++){isNaN(o[n])?t.sortIndexArr.push(this._dataList.bodyIdColIndexMap[o[n]]):t.sortIndexArr.push(parseInt(o[n],10));var l=parseInt(s[n]);isNaN(l)&&(l=1),t.sortOrderArr.push(l),t.dataTypeArr.push(r[n]||"text"),t.sortIdArr.push(this._dataList.getColumnID(t.sortIndexArr[n]));var d,c={},u="true"==(d=this._dataList.getCellInfo(t.sortIdArr[n])).options.numberExtraction;t.numberExtractionValueArr.push(u);var p="number"==d.options.dataType?"number":"text";c.colID=t.sortIdArr[n],c.sortOrder=t.sortOrderArr[n],c.dataType=p,t.dataType!=p&&(t.dataType=p,t.dataTypeArr[n]=p),this.sortStatusInfo[c.colID]=c,this.sortStatusArr.push(c),this.sortStatusArr[c.colID]=c}i=!0}t.numberExtraction=this._dataList.options.numberExtraction;var m=JSON.stringify(this.filteredRowIndexArr),f=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.addFilter(f,t),t.noRefresh||(this.broadcast({gridView:["notifySettedFilter",[{isSort:i}]],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:m,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]}))}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.removeFilter=function(t,e){try{t=a.q.extend({type:"",colIndex:-1,key:"",condition:"and",internal:!1},t||{}),e=void 0===e||e,"@rowStatus"!=t.colIndex&&"string"==typeof t.colIndex&&(t.colIndex=this.getColumnIndex(t.colIndex));var i=JSON.stringify(this.filteredRowIndexArr),o=t.type+"^@"+t.colIndex+"^@"+t.key;this.filterManager.deleteFilter(o,t,e),this.broadcast({gridView:["notifyRemovedFilter"],generalComp:"both"}),!0!==t.internal&&this.broadcast({gridView:["notifySettedFilterByUser",[{colID:this.getColumnID(t.colIndex),oldFilteredRowIndexArr:i,newFilteredRowIndexArr:JSON.stringify(this.filteredRowIndexArr)}]]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.clearFilter=function(t){try{this.filterManager.filterArr=this.initialFilterList.slice(0),
this.filteredRowIndexArr=this.initialRowIndexArr.slice(0),t||this.broadcast({gridView:["notifyClearFilter"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.sort=function(t,e){try{switch(e){case 0:this.setFilter({type:"sort",sortIndex:t,sortOrder:"1",dataType:"text",internal:!0});break;case 1:this.setFilter({type:"sort",sortIndex:t,sortOrder:"-1",dataType:"text",internal:!0});break;case 2:this.clearSortFilter()}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.clearSort=function(){try{this.broadcast({gridView:["clearHeaderSort"]}),this.clearSortFilter(),this.broadcast({gridView:["notifySetFocusedCell"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.multisort=function(t){try{var e,i;t.type="sort",t.sortOrder=t.sortOrder||[];var o=(0,g.A)(t.sortIndex),s=(0,g.A)(t.sortOrder);"object"==o?e=t.sortIndex:"string"==o&&(e=t.sortIndex.split(" ")),"object"==s?i=t.sortOrder:"string"==s&&(i=t.sortOrder.split(" "));for(var r=0;r<e.length-i.length;r++)i.push(1);var a=[];this.sortStatusInfo={},this.sortStatusArr=[];for(r=0;r<e.length;r++){var n,l={};"string"==(o=(0,g.A)(e[r]))?n=this._dataList.getCellInfo(e[r]):"number"==o&&(n=this._dataList.getCellInfo(this.getColumnID(e[r]))),l.colID=e[r],l.sortOrder=parseInt(i[r]),l.dataType="number"!=n.options.dataType?"text":"number",a.push(l.dataType),this.sortStatusInfo[l.colID]=l,this.sortStatusArr.push(l),this.sortStatusArr[l.colID]=l}t.dataType=a.join(" "),t.internal=!0,this.setFilter(t),this.broadcast({gridView:["drawHeaderSortImages"],generalComp:"both"})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getCellInfo=function(t){var e="";return"string"==typeof t?e=t:"number"==typeof t&&(e=this.cellIdList[t]),this.cellInfoHash[e]||{options:{}}},bt.prototype.getColumnCount=function(){return this.cellIdList.length},bt.prototype.getColumnID=function(t){if("string"==typeof t)return t;var e=this.cellIdList[t];return e||null},bt.prototype.getColumnIndex=function(t){return"number"==typeof t?t:this.bodyIdColIndexMap[t]},bt.prototype.hasColumn=function(t){try{"number"==typeof t&&(t=this.getColumnID(t));var e=!1;return"number"==typeof this.bodyIdColIndexMap[t]&&(e=!0),e}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getColumnName=function(t){"number"==typeof t&&(t=this.getColumnID(t));var e=this.getCellInfo(t);return e?e.name:""},bt.prototype.getParentRowIndex=function(t){try{if(this.options.depthColumn)for(var e=this.options.depthColumn,i=this.getColumnID(e),o=parseInt(this._getData(this.initialRowIndexArr[t],i)),s=this.getLinkedRealRowIndex(t)-1;s>=0;s--){var r=this.initialRowIndexArr[s];if(this._getData(r,i)<o)return r}return-1}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyDataChanged=function(){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}if(o)this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]});else{var r=this.getFilteredRowIndex(t);"number"==typeof r&&this.broadcast({gridView:["notifySettedCellData",[r,e,i]],fusionChart:["refresh"],fwFunnelChart:["refresh"],fwSparkChart:["refresh"],fwPyramidChart:["refresh"],fwGanttChart:["refresh"],generalComp:"both"})}}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRowChanged=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRowRemoved=function(t){try{var e="notifySettedFilter";0==this.getRowCount()&&(e="notifyRemovedAll"),this.broadcast({generalComp:"both",gridView:[e]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRowInserted=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},
bt.prototype.notifyRowMoveUp=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRowMoveDown=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRemoveAll=function(t){try{this.broadcast({generalComp:"both",gridView:["notifyRemovedAll"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyReformed=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyDeleteRow=function(t){try{this.broadcast({generalComp:"both",gridView:["notifySettedFilter"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.notifyRowPositionChanged=function(t){try{this.broadcast({linkedDataList:["refresh"]})}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.restartFilter=function(){try{this.filterManager.restartFilter()}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.restartFilterByCellChanged=function(t,e,i){try{for(var o=!1,s=0;s<this.conditionInfo.columnArray.length;s++)if(this.conditionInfo.columnArray[s]===e){o=!0;break}o&&this.filterManager.restartFilter()}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.setMatchIgnoreCase=function(t){try{this.options.matchIgnoreCase=y.Z.getBoolean(t)}catch(t){h.Y.printStackTrace(t)}},bt.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},bt.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}};var yt=function(t){this.parent=t,this.filterArr=[],this.colArr=[];for(var e=0;e<this.parent._dataList.cellIdList.length;e++){var i=this.parent._dataList.cellIdList[e];this.colArr[i]=i}};yt.prototype.runFilter=function(t){try{var e=/function\s*\(\s*([a-zA-Z_$][0-9a-zA-Z_$.]*\s*)\)/;if("string"==typeof t&&e.test(t)){var i=t.replace(e,"$1"),o=y.Z.getGlobalFunction(i,this.parent.scope_id);this.evaluateCustomFilterCondition(o)}else this.evaluateFilterCondition(t)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.evaluateCustomFilterCondition=function(t){try{if("function"!=typeof t)return this.evaluateFilterCondition(t);var e={type:"func"};e.key=t,e.colIndex=0,e.condition="and",e.param=this,this.parent.setFilter(e)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.runSort=function(t){try{this.evaluateSortCondition(t)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.evaluateFilterCondition=function(t){try{if("string"!=typeof t||""==t.trim())return void this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]});var e;if(this.parent.conditionInfo.filterInfo.parse)e=this.parent.conditionInfo.filterInfo.condition;else{var i=function(t,e){t[t.length]=e},o=function(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e},s=function(t){return!r(t)&&"("!=t&&")"!=t},r=function(t){return"&"===t||"|"===t},a=function(t){return t[t.length-1]},n=function(t){return 0==t.length},l=function(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0},d=function(t){for(var e=t.split(""),i=new String(""),o=new Array,a=0,n=0;n<e.length;n++)s(e[n])&&(i+=e[n]),(r(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(o[a]=i,a++),i="",o[a]=e[n],a++),n==e.length-1&&""!=i&&(o[a]=i);return o},c=t;e="_this.executeLinkedFilter({condition:'and'",""!=t&&(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=function(t){for(var e=new Array,r="",a=0;a<t.length;a++)if(s(t[a]))i(e,t[a]);else{var n=o(e),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];r+=""===r?o(e)+l+n:l+n}return""===r?o(e):r}(function(t,e,h){e=new Array;var c=new Array,u=0;t=d(t);for(var p=0;p<t.length;p++){if(s(t[p])&&(e[u]=t[p],u++),r(t[p])){
if("^"!=t[p])for(;!n(c)&&l(t[p])<=l(a(c));)e[u]=a(c),o(c),u++;else for(;!n(c)&&l(t[p])<l(a(c));)e[u]=a(c),o(c),u++;i(c,t[p])}if("("==t[p]&&i(c,t[p]),")"==t[p]){for(;"("!=a(c);)e[u]=o(c),u++;o(c)}}for(;!n(c);)"("==a(c)?o(c):e[e.length]=o(c);var g="";for(p=0;p<e.length;p++)g+=e[p];return 0==h?g:e}(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replaceAll('"',"'")).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[cC][oO][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus")))).wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[\s]*[=][=][\s]*/g,",operator:'E', key:")).replace(/[\s]*[!][=][\s]*/g,",operator:'IE', key:")).replace(/[\s]*[>][=][\s]*/g,",operator:'GTE', key:")).replace(/[\s]*[<][=][\s]*/g,",operator:'LTE', key:")).replace(/[\s]*[>][\s]*/g,",operator:'GT', key:")).replace(/[\s]*[<][\s]*/g,",operator:'LT', key:")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,",operator:'NOTLIKE', key:")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,",operator:'LIKE', key:")).replace(/[cC][oO][lL][\s]*[(]/g,",colID:_this.getColumnID(")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,",colID:'@rowStatus'")).replace(/[\s]*[&][&][\s]*/g," });_this.executeLinkedFilter({condition:'and'")).replace(/[\s]*[|][|][\s]*/g," });_this.executeLinkedFilter({condition:'or'")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue(")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue(")),e=e+t+"});"}try{new Function("_this",e)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=e}catch(t){try{this.deprecatedEvaluateFilterCondition(c)}catch(t){this.parent.conditionInfo.filterInfo.parse=!1,$l(" filter error "),this.parent.broadcast({gridView:["notifySettedFilter",[{isSort:!1}]]})}}}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.deprecatedEvaluateFilterCondition=function(t){function e(t,e){t[t.length]=e}function i(t){var e=t[t.length-1];return delete t[t.length-1],t.length--,e}function o(t){return!s(t)&&"("!=t&&")"!=t}function s(t){return"&"===t||"|"===t}function r(t){return t[t.length-1]}function a(t){return 0==t.length}function n(t){return"|"==t?4:"&"==t?3:"("==t?2:")"==t?1:void 0}var l="_this.executeLinkedFilter{ 'and', _this.colArr['";""!=t&&(t=function(t){for(var s=new Array,r="",a=0;a<t.length;a++)if(o(t[a]))e(s,t[a]);else{var n=i(s),l="&"===t[a]?"&&":"|"===t[a]?"||":t[a];r+=""==r?i(s)+l+n:l+n}return""===r?i(s):r}(function(t,l,h){l=new Array;var d=new Array,c=0;t=function(t){for(var e=t.split(""),i=new String(""),r=new Array,a=0,n=0;n<e.length;n++)o(e[n])&&(i+=e[n]),(s(e[n])||")"==e[n]||"("==e[n])&&(""!=i&&(r[a]=i,a++),i="",r[a]=e[n],a++),n==e.length-1&&""!=i&&(r[a]=i);return r}(t);for(var u=0;u<t.length;u++){if(o(t[u])&&(l[c]=t[u],c++),s(t[u])){if("^"!=t[u])for(;!a(d)&&n(t[u])<=n(r(d));)l[c]=r(d),i(d),c++;else for(;!a(d)&&n(t[u])<n(r(d));)l[c]=r(d),i(d),c++;e(d,t[u])}if("("==t[u]&&e(d,t[u]),")"==t[u]){for(;"("!=r(d);)l[c]=i(d),c++;i(d)}}for(;!a(d);)"("==r(d)?i(d):l[l.length]=i(d);var p="";for(u=0;u<l.length;u++)p+=l[u];return 0==h?p:l}(t=(t=(t=(t=(t=(t=(t=(t=t.trim()).replace(/[\s]*[&][&][\s]*/g,"&")).replace(/[\s]*[|][|][\s]*/g,"|")).replace(/[vV][aA][lL][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")}))).replace(/[rR][eE][fF][\s]*[(].*[)]/g,(function(t){return t.wq_replaceAll("(","!_!").wq_replaceAll(")","_!_")
}))).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"#LIKE#")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"$LIKE$")).replace(/[rR][oO][wW][sS][tT][aA][tT][uU][sS][\s]*[(][\s]*[)]/g,"@rowStatus"))),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.wq_replaceAll("!_!","(").wq_replaceAll("_!_",")")).wq_replaceAll("#LIKE#"," NOTLIKE ")).wq_replaceAll("$LIKE$"," LIKE ")).replace(/[vV][aA][lL][\s]*[(]/g,"_this.getComponentValue{")).replace(/[rR][eE][fF][\s]*[(]/g,"_this.getRefValue{")).replace(/[\s]*[=][=][\s]*/g,"'], 'E', ")).replace(/[\s]*[!][=][\s]*/g,"'], 'IE', ")).replace(/[\s]*[>][=][\s]*/g,"'], 'GTE', ")).replace(/[\s]*[<][=][\s]*/g,"'], 'LTE', ")).replace(/[\s]*[>][\s]*/g,"'], 'GT', ")).replace(/[\s]*[<][\s]*/g,"'], 'LT', ")).replace(/[\s]+[lL][iI][kK][eE][\s]+/g,"'], 'LIKE', ")).replace(/[\s]+[nN][oO][tT][\s]*[lL][iI][kK][eE][\s]+/g,"'], 'NOTLIKE', ")).replace(/[\s]*[&][&][\s]*/g,"); _this.executeLinkedFilter{ 'and', _this.colArr['")).replace(/[\s]*[|][|][\s]*/g,"); _this.executeLinkedFilter{ 'or', _this.colArr['"));var h=(l=(l=(l=l+t+");").replace(/[\s]*[(][\s]*/g,"")).wq_replaceAll("_this.colArr['@rowStatus']","'@rowStatus'")).split(";");l="";for(var d=0;d<h.length;d++)if(""!=h[d]){h[d]=h[d].replace(/[{][\s]*/g,"(");var c=h[d].match(/[(]/g).length;if(c<=h[d].match(/[)]/g).length){h[d]=h[d].replace(/[)][\s]*/g,"");for(var u=0;u<c;u++)h[d]=u==c-1?h[d]+");":h[d]+")"}l+=h[d]}new Function("_this",l)(this),this.parent.conditionInfo.filterInfo.parse=!0,this.parent.conditionInfo.filterInfo.condition=l},yt.prototype.executeLinkedFilter=function(t){try{var e,i,o,s;arguments.length>1?(s=arguments[0],i=arguments[1],o=arguments[2],e=arguments[3]):(s=t.condition,i=t.colID,o=t.operator,e=t.key);var r={type:"row"};switch(r.colIndex=i,r.condition=s,o){case"GT":r.operator=">";break;case"GTE":r.operator=">=";break;case"LT":r.operator="<";break;case"LTE":r.operator="<=";break;case"E":r.operator="==";break;case"IE":r.operator="!=";break;case"LIKE":r.operator="LIKE";break;case"NOTLIKE":r.operator="NOTLIKE"}"*"===e||e===WebSquare.allValue?r.key="":(r.key=e||"",r.exactMatch=!0),this.parent.conditionInfo.keyArray.push(r.key),this.parent.conditionInfo.columnArray.push(r.colIndex),this.parent.setFilter(r)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.evaluateSortCondition=function(t){try{if("string"!=typeof t||""==t.trim())return;var e;this.parent.conditionInfo.sortInfo.parse?e=this.parent.conditionInfo.sortInfo.condition:(e="_this.executeLinkedSort([",""!=t&&(t=(t=(t=(t=(t=(t=t.trim()).replace(/[aA][sS][cC][\s]*[(]/g,"{ order: 1, columns: ")).replace(/[dD][eE][sS][cC][\s]*[(]/g,"{ order: -1, columns: ")).replace(/[)]/g,"")).replace("&&","}, ")).replace("||","}, ")),e=e+t+"}]);");try{new Function("_this",e)(this),this.parent.conditionInfo.sortInfo.parse=!0,this.parent.conditionInfo.sortInfo.condition=e}catch(t){this.parent.conditionInfo.sortInfo.parse=!1,$l(" sort error ")}}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.executeLinkedSort=function(t){try{for(var e={sortIndex:[],sortOrder:[]},i=0;i<t.length;i++)for(var o=t[i],s=o.columns.split(","),r=0;r<s.length;r++)e.sortIndex.push(s[r].trim()),e.sortOrder.push(o.order);e.sortIndex.length>0&&this.parent.multisort(e)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.getRefValue=function(t){try{var e=(t=t.replace("data:","")).split("."),i=y.Z.getComponentById(e[0],this.parent.scope_id);if(i)switch(this.parent.conditionInfo.targetInfo[e[0]]||(this.parent.conditionInfo.targetInfo[e[0]]=[]),this.parent.conditionInfo.targetInfo[e[0]].push(e[1]),i.addRefComp(this.parent),this.parent.conditionInfo.filterInfo.useRef=!0,i.initializeType){case"linkedDataList":case"dataList":return i.getCellData(i.getRowPosition(),e[1])||"";case"dataMap":return i.get(e[1])}else{var o=e[0];this.parent.scope_obj&&(this.parent.scope_obj.scope[o]?o=this.parent.scope_obj.scope[o].id:WebSquare.strictMode&&(o=this.parent.scope_id+"_"+o)),WebSquare.DataCollection.api.addRefRelation(this.parent.id,o)}
}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.getComponentValue=function(t){try{var e=y.Z.getComponentById(t,this.parent.scope_id);if(e)return this.parent.conditionInfo.targetInfo[t]=!0,this.parent.conditionInfo.filterInfo.checkVal=!0,e.dataObjInfo[this.parent.id]=this.parent,e.getValue();this.parent.conditionInfo.filterInfo.checkVal=!1}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.getColumnID=function(t){try{return t}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.getKey=function(t){try{return t}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.useFilter=function(){return 0!=this.filterArr.length},yt.prototype.clear=function(){this.filterArr=[]},yt.prototype.executeAllFilter=function(){for(var t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t])},yt.prototype.restartFilter=function(){this.parent.initialRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0),this.parent.filteredRowIndexArr=this.parent._dataList.filteredRowIndexArr.slice(0);for(var t=0;t<this.parent.initialFilterList.length;t++)this.executeFilter(this.parent.initialFilterList[t]),this.deleteFilterById(this.parent.initialFilterList[t].id,!1);this.parent.initialRowIndexArr=this.parent.filteredRowIndexArr.slice(0);for(t=0;t<this.filterArr.length;t++)this.executeFilter(this.filterArr[t]);this.filterArr=this.parent.initialFilterList.concat(this.filterArr)},yt.prototype.executeFilter=function(t){try{var e=!1;if(">"!=t.options.operator&&">="!=t.options.operator&&"<"!=t.options.operator&&"<="!=t.options.operator&&"!="!=t.options.operator&&"LIKE"!=t.options.operator&&"NOTLIKE"!=t.options.operator||(e=!0),"and"==t.options.condition)this.parent.filteredRowIndexArr=e?t.executeCondition(this.parent.uuid,"and"):t.execute(this.parent.uuid,"and");else if("or"==t.options.condition){var i=e?t.executeCondition(this.parent.uuid,"or"):t.execute(this.parent.uuid,"or");this.parent.filteredRowIndexArr=this.mergeArray(this.parent.filteredRowIndexArr,i)}}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.addFilter=function(t,e){try{if(e.sortIndexArr){for(var i=[],o=0;o<e.sortIdArr.length;o++)i.push(this.parent._dataList.getColumnIndex(e.sortIdArr[o]));e.sortIndexArr=i}var s=null;"row"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedRowFilter(t,e):"user"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedUserFilter(t,e):"cell"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedCellFilter(t,e):"sort"==e.type?(s=new WebSquare.DataCollection.linkedDataList.filter.linkedSortFilter(t,e),this.deleteFilterById("sort^@",!1)):"func"==e.type?s=new WebSquare.DataCollection.linkedDataList.filter.linkedFuncFilter(t,e):"regExp"==e.type&&(s=new WebSquare.DataCollection.linkedDataList.filter.linkedRegExpFilter(t,e)),this.executeFilter(s),this.filterArr.push(s)}catch(t){h.Y.printStackTrace(t,null,this)}},yt.prototype.deleteFilter=function(t,e,i){void 0===i&&(i=!0);for(var o=[],s=0;s<this.filterArr.length;s++)-1==this.filterArr[s].id.indexOf(t)&&o.push(this.filterArr[s]);if(this.filterArr=o,this.parent.filteredRowIndexArr=this.parent.initialRowIndexArr.slice(0),1==i)for(s=0;s<this.filterArr.length;s++)this.executeFilter(this.filterArr[s])},yt.prototype.mergeArray=function(t,e){for(var i=[],o=[],s=0;s<t.length;s++)i[t[s]]=1;for(s=0;s<e.length;s++)i[e[s]]=1;for(s=0;s<i.length;s++)1===i[s]&&o.push(s);return o},yt.prototype.deleteFilterById=function(t,e){void 0===e&&(e=!0);for(var i=[],o=0;o<this.filterArr.length;o++)-1==this.filterArr[o].id.indexOf(t)&&i.push(this.filterArr[o]);this.filterArr=i},yt.prototype.replacechar=function(t){return"^"==t||"$"==t||"."==t||"["==t||"]"==t||"{"==t||"}"==t||"+"==t||"("==t||")"==t||"|"==t||"\\"==t?"\\"+t:void 0};var vt={linkedRowFilter:function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and",exactMatch:!1},e||{})}};vt.linkedRowFilter.prototype.execute=function(t,e){
for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l=a[n],h="@rowStatus"==this.options.colIndex?o._dataList._getRowStatus(l):o._dataList.dataArr[l*r+s];null==h&&(h=""),this.options.exactMatch?h==this.options.key&&i.push(l):h.indexOf(this.options.key)>-1&&i.push(l)}return i},vt.linkedRowFilter.prototype.executeCondition=function(t,e){for(var i=[],o=WebSquare.idCache[t],s=o._dataList.getColumnIndex(this.options.colIndex),r=o._dataList.cellIdList.length,a="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,n=0;n<a.length;n++){var l,h,d=a[n];if("number"==this.options.columnDataType){var c=o._dataList.dataArr[d*r+s];1==this.options.numberExtraction&&(c=(c+="").replace(/[^\+\-\.0-9]/g,"")),l=parseFloat(c,10)||0,h=parseFloat(this.options.key)}else l="@rowStatus"==this.options.colIndex?o._dataList._getRowStatus(d):o._dataList.dataArr[d*r+s],h=this.options.key;">"==this.options.operator?l>h&&i.push(d):">="==this.options.operator?l>=h&&i.push(d):"<"==this.options.operator?l<h&&i.push(d):"<="==this.options.operator?l<=h&&i.push(d):"!="==this.options.operator?l!=h&&i.push(d):"LIKE"==this.options.operator?null!=l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d):"NOTLIKE"==this.options.operator&&null==l.match("^(?:"+h.wq_replaceAll("_",".").wq_replaceAll("%",".*")+"$)")&&i.push(d)}return i},vt.linkedUserFilter=function(t,e){this.id=t,this.options=a.q.extend({key:"",condition:"and"},e||{})},vt.linkedUserFilter.prototype.getColumnData=function(t,e,i){var o=WebSquare.idCache[t],s=(i=o._dataList.getColumnIndex(i),o._dataList.cellIdList.length);return o._dataList.dataArr[e*s+i]},vt.linkedUserFilter.prototype.execute=function(t,e){for(var i=this.options.key.replace(/col[\s]*\(/g,"_this.getColumnData(uuid, realRow, "),o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=[],a=0;a<s.length;a++){var n=s[a];new Function("_this","uuid","realRow","return "+i)(this,t,n)&&r.push(n)}return r},vt.linkedCellFilter=function(t,e){this.id=t,this.options=a.q.extend({key:""},e||{})},vt.linkedCellFilter.prototype.execute=function(t,e){for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=o._dataList.oneRowDataLength,a=0;a<s.length;a++)for(var n=s[a],l=0;l<r;l++){var h=o._dataList._getData(n,l);null==h&&(h=""),h.indexOf(this.options.key)>-1&&i.push(n)}return i},vt.linkedSortFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:"",sortIndex:"",sortOrder:"",dataType:"",sortIndexArr:[],sortOrderArr:[],dataTypeArr:[],sortFuncArr:[],sortIdArr:[]},e||{})},vt.linkedSortFilter.prototype.execute=function(t,e){for(var i=WebSquare.idCache[t],o="and"===e?i.filteredRowIndexArr:i.initialRowIndexArr,s=i._dataList.oneRowDataLength,r=o.slice(0).sort((function(t,e){return t-e})),a=this.options,n=i._dataList.dataArr,l=[],h=0;h<r.length;h++)l[h]=r[h]*s;var d=[];for(h=0;h<a.sortIndexArr.length;h++)if(d[h]={},a.sortFuncArr[h])for(var c=0;c<l.length;c++)d[h][r[c]]=n[l[c]+a.sortIndexArr[h]];else if("number"==a.dataTypeArr[h])for(c=0;c<l.length;c++){var u=n[l[c]+a.sortIndexArr[h]];1==a.numberExtractionValueArr[h]&&(u=(u+="").replace(/[^\+\-\.0-9]/g,"")),d[h][r[c]]=Number(u)}else for(c=0;c<l.length;c++)d[h][r[c]]=n[l[c]+a.sortIndexArr[h]]||"";if(1==d.length)if(a.sortFuncArr[0]){var p=a.sortFuncArr[0];m=d[0];r.sort((function(t,e){return p(m[t],m[e])}))}else{var g=a.sortOrderArr[0],m=d[0];r.sort((function(t,e){return m[t]==m[e]?0:m[t]>m[e]?g:-g}))}else r.sort((function(t,e){for(var i=0;i<d.length;i++){var o;if(0!=(o=a.sortFuncArr[i]?a.sortFuncArr[i](d[i][t],d[i][e]):d[i][t]==d[i][e]?0:d[i][t]<d[i][e]?-a.sortOrderArr[i]:a.sortOrderArr[i]))return o}return 0}));return r},vt.linkedFuncFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and"},e||{})},vt.linkedFuncFilter.prototype.execute=function(t,e){
if("function"!=typeof this.options.key)throw new Error("This key is not a Function.[key:"+this.options.key+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];this.options.key(o._dataList._getData(a,this.options.colIndex),this.options.param,a)&&i.push(a)}return i},vt.linkedRegExpFilter=function(t,e){this.id=t,this.options=a.q.extend({colIndex:-1,key:"",condition:"and"},e||{}),this.regExp=this.options.key},vt.linkedRegExpFilter.prototype.execute=function(t,e){if(!y.Z.isRegExp(this.regExp))throw new Error("This key is not a regular expression.[key:"+this.regExp+"]");for(var i=[],o=WebSquare.idCache[t],s="and"===e?o.filteredRowIndexArr:o.initialRowIndexArr,r=0;r<s.length;r++){var a=s[r];(o._dataList._getData(a,this.options.colIndex)+"").match(this.regExp)&&i.push(a)}return i};var wt=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};a.q.extend(wt.prototype,bt.prototype),wt.filter=vt,wt.linkedFilterController=yt,wt.prototype.defaultOptions={useConfig:!0,pluginType:"DataCollection.linkedDataList",pluginName:"linkedDataList",baseNode:"list",repeatNode:"map",valueAttribute:"",idAttribute:"",rowStatusNodeName:"rowStatus",JSONPath:""},wt.prototype.initialize=function(t,e,i,o,s){try{if(this.elementType=i.elementType?i.elementType:"XML",this.initializeType="linkedDataList",this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.element=i,this.options=this.getConfiguredOptions(),this._broadCastFlag=!0,i)switch(this.elementType){case"XML":this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)),"linkedDataList"==this.initializeType&&(this.options.xmlEvents=WebSquare.Parser.parseEvent(i));break;case"JSON":this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id}var r;if(e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="linkedDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){d.v.printLog("id ["+this.id+"] is duplicated, so the existing linkedDataList has been deleted, and a new one has been created.");var m=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=m}catch(t){m=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),window[WebSquare.noConflict].data[this.id]=this,this.event=new et.i,this.initializeLinkedDataList(i),this.bindAsEventList=[],this.bindAsUserEventList=[],this.userEventList=[],this.systemEventList={},null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.initializeLinkedDataList=function(t){try{if(this.element=t,"$none"==this.options.valueAttribute.wq_trim()&&(this.options.valueAttribute=""),this.options.valueNode=this.options.valueAttribute,this.initialRowIndexArr=[],this.initialFilterList=[],this.filteredRowIndexArr=[],this.filteredRowIndexMap={},this.childCompHash={},this.refCompHash={},this.activated=!1,this.conditionInfo={targetInfo:{},
sortInfo:{parse:!1,set:!1},filterInfo:{parse:!1,set:!1,useRef:!1,checkVal:!0}},"XML"==this.elementType)for(var e=WebSquare.xml.getElementsByTagName(t,"condition",l.I._XML_NAMESPACE.W2),i=0;i<e.length;i++){var o=e[i];switch(o.getAttribute("type")){case"sort":this.conditionInfo.sortInfo.set||(this.conditionInfo.sortInfo.set=!0,this.conditionInfo.sortInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition);break;case"filter":this.conditionInfo.filterInfo.set||(this.conditionInfo.filterInfo.set=!0,this.conditionInfo.filterInfo.condition=WebSquare.xml.getCDataNodeValue(o),this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition)}}else this.conditionInfo.sortInfo.set=!0,this.conditionInfo.filterInfo.set=!0,this.conditionInfo.sortInfo.condition=this.element.option.sortCondition,this.conditionInfo.filterInfo.condition=this.element.option.filterCondition,this.conditionInfo.sortInfo.orgCondition=this.conditionInfo.sortInfo.condition,this.conditionInfo.filterInfo.orgCondition=this.conditionInfo.filterInfo.condition;var s=this.options.bind;s=s.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[s]?s=this.scope_obj.scope[s].id:WebSquare.strictMode&&(s=this.scope_id+"_"+s)),this._dataList=y.Z.getComponentById(s),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),WebSquare.DataCollection.api.addChild(this),WebSquare.DataCollection.api.addRelation(this.id,s),this._dataList?this.successBinding||(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&this.activate()):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,this._dataList={})}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.finalize=function(){try{this.activated=!1}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.activate=function(){try{if(!this.activated){for(var t in this.refresh(),this.options)if("ev:"==t.slice(0,3))for(var e=this.options[t].split(","),i=0;i<e.length;i++)this.bind(t.slice(3),e[i]);this.options.eventPause&&this.setEventPause(this.options.eventPause,!0)}this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.setDataList=function(){try{if(!this.successBinding){var t=this.options.bind;t=t.replace(/^data:/,""),this.scope_obj&&(this.scope_obj.scope[t]?t=this.scope_obj.scope[t].id:WebSquare.strictMode&&(t=this.scope_id+"_"+t)),this._dataList=y.Z.getComponentById(t),this._dataList&&WebSquare.DataCollection.api.isAliasDataCollection(this._dataList)&&(this._dataList=this._dataList.getObj()),this._dataList?(this.successBinding=!0,this.parent=this._dataList,this.columnPosition=null,this.rowPosition=null,this.oneRowDataLength=this._dataList.oneRowDataLength,this.bodyIdColIndexMap=this._dataList.bodyIdColIndexMap,this.cellInfoHash=this._dataList.cellInfoHash,this.cellIdList=this._dataList.cellIdList,this.structure=this._dataList.structure,this.initialRowIndexArr=this._dataList.filteredRowIndexArr.slice(0),this._dataList.addChild(this),this.filterManager=new WebSquare.DataCollection.linkedDataList.linkedFilterController(this),this.synchronize(),WebSquare.DataCollection.activated&&(this.refresh(),!0===this.conditionInfo.filterInfo.checkVal&&(this.activated=!0))):($l(this.id+" has been ignored because dataList is null. "),this.successBinding=!1,this._dataList={})}}catch(t){h.Y.printStackTrace(t,null,this)}},
wt.prototype.addEvent=function(t,e,i){try{if(!e)return;var o={name:t,action:i=i||"script",param:{handler:e}};this.options.xmlEvents||(this.options.xmlEvents=[]),this.options.xmlEvents.push(o),this.event.addUserEvents(this,[o],this.options.userEvents)}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.bind=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"===t&&(t=t.toLowerCase()),this.addEvent(t,e)}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.trigger=function(t,e){try{"string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t);var i=!1;if(null!=this.options.userEvents)for(var o=0;o<this.options.userEvents.length;o++)if(this.options.userEvents[o]===t){i=!0;break}if(!i&&O.f.isEventSupported(this.render,t))e&&e.constructor==Array?O.f.fireSystemEvent(this,t,e[0]):O.f.fireSystemEvent(this,t);else{var s=[this,t];s=s.concat(e),O.f.fireEvent.apply(O.f.fireEvent,s),s[0]=null}}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.unbind=function(t,e){try{if("string"==typeof t&&"on"!=t.slice(0,2)&&(t="on"+t),"string"==typeof t&&"function"==typeof e)for(var i=0;i<this.userEventList.length;i++)t===this.userEventList[i].name&&e===this.userEventList[i].param.handler&&(this.userEventList.splice(i,1),"object"===(0,g.A)(this.systemEventList[t])&&(this.systemEventList[t].count--,this.systemEventList[t].count<=0&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])));else if("string"==typeof t&&null==e){for(i=this.userEventList.length-1;i>=0;i--)t===this.userEventList[i].name&&this.userEventList.splice(i,1);"object"===(0,g.A)(this.systemEventList[t])&&(this.event.removeListener(this.render,t,this.systemEventList[t].handler),delete this.systemEventList[t])}else{for(var o in this.systemEventList)this.event.removeListener(this.render,o,this.systemEventList[o].handler);this.userEventList=[],this.systemEventList={}}this.options.xmlEvents=this.userEventList.slice()}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},wt.prototype.setEventPause=function(t,e){var i={},o=!1;if("string"==typeof t&&""!=t)for(var s=t.split(","),r=0;r<s.length;r++)s[r]&&(i[s[r]]=!0);else o=!0;for(r=this.userEventList.length-1;r>=0;r--)(o||i[this.userEventList[r].name])&&(this.userEventList[r].disabled=e)},wt.prototype.getScope=function(){try{var t=null;return null!=this.scope_obj&&this.scope_obj.options&&(t=this.scope_obj),t}catch(t){h.Y.printStackTrace(t,null,this)}},wt.prototype.getScopeWindow=function(){try{return null!=this.scope_obj&&this.scope_obj.options?this.scope_obj.scope:window}catch(t){h.Y.printStackTrace(t,null,this)}};var St=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};St.prototype.defaultOptions={pluginType:"DataCollection.aliasDataList",pluginName:"aliasDataList",scope:""},St._initImport=function(){WebSquare.DataCollection.aliasDataList.linkFunction()},a.q._initImportList.push("DataCollection.aliasDataList"),St.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.q.extend({},this.defaultOptions),i&&(l.I.isXML(i)?this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){
if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataList")||"id ["+this.id+"] is duplicated, so the existing aliasDataList has been deleted, and a new one has been created.";d.v.printLog(m),!0!==y.Z.getBoolean(l.I.getConfiguration("/WebSquare/disableDuplicateIdAlert/@value"))&&alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{_empty:!0}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.refresh=function(t){try{var e=this.options.scope?y.Z.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.getObj=function(){try{return this._dataComp}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataList"===y.Z.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],linkedDataList:["setDataList"],generalComp:["refreshItemset"]})}catch(t){h.Y.printStackTrace(t)}},St.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({gridView:["drawData",[0,0]],generalComp:["refresh"]})}catch(t){h.Y.printStackTrace(t)}},St.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype.addChild=function(t){try{
return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},St.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.Y.printStackTrace(t)}},St.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.activate=function(){try{this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},St.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},St.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}},St.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataList.prototype)"function"!=typeof WebSquare.DataCollection.dataList.prototype[t]||WebSquare.DataCollection.aliasDataList.prototype[t]||(WebSquare.DataCollection.aliasDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.Y.printStackTrace(t,null,this)}};var _t=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};_t.prototype.defaultOptions={pluginType:"DataCollection.aliasDataMap",pluginName:"aliasDataMap",scope:""},_t._initImport=function(){WebSquare.DataCollection.aliasDataMap.linkFunction()},a.q._initImportList.push("DataCollection.aliasDataMap"),_t.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.q.extend({},this.defaultOptions),i&&(l.I.isXML(i)?this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasDataMap",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasDataMap")||"id ["+this.id+"] is duplicated, so the existing aliasDataMap has been deleted, and a new one has been created.";d.v.printLog(m),!0!==y.Z.getBoolean(l.I.getConfiguration("/WebSquare/disableDuplicateIdAlert/@value"))&&alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid
;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="dataMap",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptydataMap",{},{elementType:"JSON",option:{}},"dataMap"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.refresh=function(t){try{var e=this.options.scope?y.Z.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t),this.synchronizeRef(t)}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.getObj=function(){try{return this._dataComp}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"dataMap"===y.Z.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}}catch(t){h.Y.printStackTrace(t)}},_t.prototype.synchronizeRef=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRef[this.id];if(e)for(var i in e){if(e[i]){this.refCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.refCompHash[i]=o}!0===t.reset&&o&&o.modelControl&&o.modelControl.dataCollectionBinding(o.modelControl.ref)}this.broadcast({generalComp:["refresh"]})}catch(t){h.Y.printStackTrace(t)}},_t.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},_t.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.Y.printStackTrace(t)}},_t.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.activate=function(){try{this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.onComplete=function(){
this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},_t.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},_t.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}},_t.linkFunction=function(){try{for(var t in WebSquare.DataCollection.dataMap.prototype)"function"!=typeof WebSquare.DataCollection.dataMap.prototype[t]||WebSquare.DataCollection.aliasDataMap.prototype[t]||(WebSquare.DataCollection.aliasDataMap.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.Y.printStackTrace(t,null,this)}};var Ct=function(t,e,i,o,s){try{this.initialize(t,e,i,o,s)}catch(t){h.Y.printStackTrace(t,null,this)}};Ct.prototype.defaultOptions={pluginType:"DataCollection.aliasLinkedDataList",pluginName:"aliasLinkedDataList",scope:""},Ct._initImport=function(){WebSquare.DataCollection.aliasLinkedDataList.linkFunction()},a.q._initImportList.push("DataCollection.aliasLinkedDataList"),Ct.prototype.initialize=function(t,e,i,o,s){try{var r;if(this.id=t,this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.options=a.q.extend({},this.defaultOptions),i&&(l.I.isXML(i)?this.options=a.q.extendKeepingType(this.options,WebSquare.WebSquareparser.parseAttribute(i)):i.option&&(this.options=a.q.extendKeepingType(this.options,i.option),this.options.id=i.id)),e&&(this.options=a.q.extendKeepingType(this.options,e)),this.id||(this.id=this.options.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope?r=WebSquare.idCache[s]:WebSquare.strictModeFrame&&(r=WebSquare.strictModeFrame),r){var n=this.id,c=r.id;t=(c?c+"_":"")+this.id;this.id=t,this.org_id=n,this.scope_obj=r,this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id}if(this.options.id=this.id,i){var u="aliasLinkedDataList",p=WebSquare.componentsCache,g=p[u];g||(g=p[u]={}),g[this.uuid]=!0}if(this.id){if(null!=window[WebSquare.noConflict].data[this.id]||null!=window[WebSquare.noConflict].comp[this.id]){var m=WebSquare.language.getMessage("E_dc_duplicated_Msg",this.id,"aliasLinkedDataList")||"id ["+this.id+"] is duplicated, so the existing aliasLinkedDataList has been deleted, and a new one has been created.";d.v.printLog(m),!0!==y.Z.getBoolean(l.I.getConfiguration("/WebSquare/disableDuplicateIdAlert/@value"))&&alert(m);var f=WebSquare.DataCollection.stopBroadCast;try{WebSquare.DataCollection.stopBroadCast=!0,WebSquare.DataCollection.api.remove(this.id),WebSquare.idCache[s]&&WebSquare.idCache[s].options.scope&&(this.scope_obj=WebSquare.idCache[s],this.scope_obj.scope[this.org_id]=this,this.scope_id=this.scope_obj.id),WebSquare.DataCollection.stopBroadCast=f}catch(t){f=WebSquare.DataCollection.stopBroadCast}}}else this.options.id=this.id=this.uuid;WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid,window[WebSquare.noConflict].data[this.id]=this,"false"!=l.I.getConfiguration("/WebSquare/globalExposure/@value").toLowerCase()&&(window[this.id]=this),this.childCompHash={},this.refCompHash={},this.initializeType="linkedDataList",WebSquare.DataCollection.api.addChild(this),this._empty=new WebSquare.DataCollection.dataList(this.id+"??emptyDataList",{},{elementType:"JSON",option:{}},"dataList"),this.refresh(),null!=s&&WebSquare.idCache[s]&&(this.parentFrame=s,WebSquare.idCache[s].childAllControlList.push(this.uuid))}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.refresh=function(t){try{var e=this.options.scope?y.Z.getComponentByPath(this.options.scope,this.scope_id):null;this._dataComp=e||this._empty,this.synchronize(t)}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.getObj=function(){try{return this._dataComp}catch(t){h.Y.printStackTrace(t,null,this)}},
Ct.prototype.setScope=function(t){try{if("string"==typeof t&&t&&"linkedDataList"===y.Z.getComponentByPath(t,this.scope_id).initializeType){for(var e in this.childCompHash){delete this._dataComp.childCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}for(var e in this.refCompHash){var i;delete this._dataComp.refCompHash[e],(i=WebSquare.idCache[WebSquare.idToUUID[e]])&&i.modelControl&&(i.modelControl.unbindItemset(),i.modelControl.unbindRef())}this.options.scope=t,this.refresh({reset:!0})}}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.synchronize=function(t){try{void 0!==t&&null!=t||(t={});var e=WebSquare.DataCollection.parentToChildRelation[this.id];if(e)for(var i in e)if(e[i]){this.childCompHash[i]=WebSquare.idToUUID[i];var o=WebSquare.idCache[WebSquare.idToUUID[i]];this._dataComp.childCompHash[i]=o,!0===t.reset&&o&&o.modelControl&&(o.modelControl.dataCollectionBinding(o.modelControl.ref),o.modelControl.isDataCollectionItemsetBinded=!0)}this.broadcast({gridView:["resetDataList"],generalComp:["refreshItemset"]})}catch(t){h.Y.printStackTrace(t)}},Ct.prototype._addRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.childCompHash[t]=e,this._dataComp._addRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype._addRefRelation=function(t){try{var e=WebSquare.idToUUID[t];if(!e||!WebSquare.idCache[e])return;return this.refCompHash[t]=e,this._dataComp._addRefRelation.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.addChild=function(t){try{return this.childCompHash[t.id]=t.uuid,this._dataComp.addChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.removeChild=function(t){try{return delete this.childCompHash[t],this._dataComp.removeChild.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.addRefComp=function(t){try{return this.refCompHash[t.id]=t.uuid,this._dataComp.addRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.removeRefComp=function(t){try{return delete this.refCompHash[t],this._dataComp.removeRefComp.call(this._dataComp,t)}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.getOption=function(t){try{return this.options[t]}catch(t){h.Y.printStackTrace(t)}},Ct.prototype.finalize=function(){try{this.options.scope="",this.refresh(),this.activated=!1,WebSquare.DataCollection.api.remove(this._empty.id)}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.activate=function(){try{this.activated=!0}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.onComplete=function(){this.completed?$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id):this.completed=!0},Ct.prototype.setUserData=function(t,e){try{return void 0!==this.defaultOptions[t]?($l("!!!WARNING - ["+t+"] can't define as UserData key!!!"),!1):(this.options[t]=e,!0)}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.prototype.getUserData=function(t){try{return void 0!==this.defaultOptions[t]?void $l("!!!WARNING - ["+t+"] is not UserData key!!!"):this.options[t]}catch(t){h.Y.printStackTrace(t,null,this)}},Ct.linkFunction=function(){try{for(var t in WebSquare.DataCollection.linkedDataList.prototype)"function"!=typeof WebSquare.DataCollection.linkedDataList.prototype[t]||WebSquare.DataCollection.aliasLinkedDataList.prototype[t]||(WebSquare.DataCollection.aliasLinkedDataList.prototype[t]=function(t){return function(){var e=this.getObj();return e[t].apply(e,arguments)}}(t))}catch(t){h.Y.printStackTrace(t,null,this)}};var xt=__webpack_require__(7704),It=__webpack_require__(3058),Tt=__webpack_require__(8736),kt=function(t,e,i){st.q.call(this,t,e,i)};a.q.extend(kt.prototype,st.q.prototype),kt.prototype.defaultOptions={pluginType:"uiplugin.body",pluginName:"body",userEvents:["onpageload","onpageunload","onbeforepageunload"],parseChild:!0,useConfig:!0,toolTipSec:10,toolTipNoEffect:!1,tooltipSec:10,tooltipNoEffect:!1,
useExternalClass:!1},kt.prototype.initialize=function(t){this.wmodeFrameHash={},this.modal=null,this.toolTipId="",this.toolTip=null,this.toolTipTimer=null,this.tooltipSec=l.I.getConfiguration("/WebSquare/body/toolTipSec/@value")||this.options.tooltipSec||this.options.toolTipSec,this.tooltipNoEffect=this.options.tooltipNoEffect||this.options.toolTipNoEffect,this.forceClose=l.I.getConfiguration("/WebSquare/body/layerForceClose/@value"),this.layerListener=new kt.bodyLayerListener,this.modalStack=[],this.browserPopupList=[]},kt.prototype.setRender=function(){if(!this.parentControl||"wframe"!=this.parentControl.options.pluginName&&"pageFrame"!=this.parentControl.options.pluginName&&"pageInherit"!=this.parentControl.options.pluginName&&"udc2"!==this.parentControl.options.pluginName){this.render=document.body,this.options.useExternalClass&&this.render.className?this.render.className=(this.render.className+" "+this.options.className).wq_trim():this.render.className=this.options.className,WebSquare.w2xTheme&&this.addClass("w5_"+WebSquare.w2xTheme);for(var t=l.I.getChildConfiguration("/WebSquare/browserSelector",{singleMode:!0}),e=0;e<t.length;e++)"className"==t[e]["@tagName"]&&new RegExp(t[e]["@pattern"]).test(navigator.userAgent)&&this.addClass(t[e]["@value"])}else this.render=this.parentControl.render},kt.prototype.setAction=function(){try{null==this.parentControl&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(){this._postClickTop()})))}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype._postClick=function(){try{!0===this._bFrameClickSkip?this._bFrameClickSkip=!1:this.layerListener.frameClick();for(var t=document.getElementsByTagName("iframe"),e=0;e<t.length;e++){var i=t[e],o=l.I._getOrigin(i.getAttribute("src"));o&&i.contentWindow.postMessage({_wq_type:"iframeClicked"},o)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype._postClickTop=function(){try{if(this._bFrameClickSkip=!0,window.top!==window.self){a.q._allowedOrigin&&window.top.postMessage({_wq_type:"iframeClicked"},a.q._allowedOrigin)}else this._postClick()}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.toHTML=function(){for(var t=[],e=this.getChildren(),i=0;i<e.length;i++)t.push(e[i].toHTML());return t.join("")},kt.prototype.parseDomToRender=function(t){if(t)for(var e=t.firstChild;null!=e;e=e.nextSibling)1==e.nodeType&&this.parseDomToRender(e)},kt.prototype.showWModeFrame=function(t,e){try{if(!this.render||!e)return;if("menu"==t){if(0==e.childNodes.length)return;var i=e.childNodes,o=i[0].className.split(" ")[0];if(this.wmodeFrameHash[o]=document.getElementById(o+"_wmode_frame"),this.wmodeFrameHash[o]||(this.wmodeFrameHash[o]=document.createElement("iframe"),this.wmodeFrameHash[o].id=o+"_wmode_frame",this.wmodeFrameHash[o].className="w2wmode_frame w2wmode_menuFrame",this.wmodeFrameHash[o].style.position="absolute",this.wmodeFrameHash[o].frameBorder="no","https:"==location.protocol&&(this.wmodeFrameHash[o].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[o]){var s=this;setTimeout((function(){s.wmodeFrameHash[o].controlID=o,s.wmodeFrameHash[o].style.top=WebSquare.style.getAbsoluteTop(i[0])+"px",s.wmodeFrameHash[o].style.width=i[0].offsetWidth+"px",s.wmodeFrameHash[o].style.height=i[0].offsetHeight+"px",s.wmodeFrameHash[o].style.display="block",s.wmodeFrameHash[o].style.left=WebSquare.style.getAbsoluteLeft(i[0])+"px",s.render.insertBefore(s.wmodeFrameHash[o],e.parentElement)}),1)}}else if(this.wmodeFrameHash[t]=document.getElementById(this.id+"_"+t+"_wmode_frame"),this.wmodeFrameHash[t]||(this.wmodeFrameHash[t]=document.createElement("iframe"),this.wmodeFrameHash[t].id=this.id+"_"+t+"_wmode_frame",this.wmodeFrameHash[t].className="w2wmode_frame",this.wmodeFrameHash[t].style.position="absolute",this.wmodeFrameHash[t].frameBorder="no","https:"==location.protocol&&(this.wmodeFrameHash[t].src=WebSquare.net.getSSLBlankPage(!0))),this.wmodeFrameHash[t]){s=this;setTimeout((function(){
s.wmodeFrameHash[t].controlID=e.id,s.wmodeFrameHash[t].style.left=e.offsetLeft+"px",s.wmodeFrameHash[t].style.top=e.offsetTop+"px",s.wmodeFrameHash[t].style.width=e.offsetWidth+"px",s.wmodeFrameHash[t].style.height=e.offsetHeight+"px",s.wmodeFrameHash[t].style.display="block",s.render.insertBefore(s.wmodeFrameHash[t],e)}),1)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.hideWModeFrame=function(t,e){try{"menu"==t?this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(this.wmodeFrameHash[e].style.display="none"):this.wmodeFrameHash[t]&&this.wmodeFrameHash[t].controlID==e&&(this.wmodeFrameHash[t].style.display="none")}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.removeWModeFrame=function(t,e){try{"menu"==t&&this.wmodeFrameHash[e]&&this.wmodeFrameHash[e].controlID==e&&(document.body.removeChild(this.wmodeFrameHash[e]),delete this.wmodeFrameHash[e])}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.showModal=function(t,e,i){try{return 1===arguments.length&&"object"===(0,g.A)(arguments[0])?this._showModal(arguments[0]):this._showModal({className:t,popupComponents:e,stackComponents:i})}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype._showModal=function(t){try{var e=t.className||"",i=t.popupComponents||void 0,o=t.stackComponents||void 0,s=t.popupModal;if(this.modal||(this.modal=document.createElement("div"),this.modal.id="_modal",this.modalStack=[],this.modalStackPopupLayer=[],this.stackComponents=null,this.browserPopupList=[]),e?(this.modalStack[this.modalStack.length]=e,this.modal.className=e):(this.modalStack[this.modalStack.length]="w2modal",this.modal.className="w2modal"),this.modal){if(!1!==s&&(this.render.appendChild(this.modal),this.modal.style.display="block"),o)for(var r in null==this.stackComponents&&(this.stackComponents={}),o)if(null==this.stackComponents[r])this.stackComponents[r]=[o[r]];else{if("popup"===r){if((f=this.stackComponents[r].length-1)>=0)for(var a=f;a>=0;a--){if(!(b=WebSquare.idCache[this.stackComponents[r][a].id])&&this.stackComponents[r][a].id)(v=y.Z.getPopup(this.stackComponents[r][a].id))&&v.options&&("wframe"===v.options.frameMode||"pageFrame"===v.options.frameMode||"iframe"===v.options.frameMode)&&(b=v.popupWin);try{if(!0===s&&b&&b.render){if((c=parseInt(b.getStyleProperty("z-index"),10))==(u=parseInt(y.Z.getStyleProperty(this.modal,"z-index"),10)-1))break;b.zIndex=c,b.setStyle("z-index",u)}}catch(t){t&&d.v.printLog(t.message)}}}else{var n=this.stackComponents[r].length-1;if(!(b=WebSquare.idCache[this.stackComponents[r][n]])&&this.stackComponents[r][n])(v=y.Z.getPopup(this.stackComponents[r][n]))&&v.options&&("wframe"===v.options.frameMode||"pageFrame"===v.options.frameMode||"iframe"===v.options.frameMode)&&(b=v.popupWin);try{if(b&&b.render){var c=parseInt(b.getStyleProperty("z-index"),10),u=parseInt(y.Z.getStyleProperty(this.modal,"z-index"),10)-1;b.zIndex=c,b.setStyle("z-index",u)}}catch(t){t&&d.v.printLog(t.message)}}this.stackComponents[r].push(o[r])}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var p=0;p<this.wframeSubPopup.length;p++){if((m=WebSquare.idCache[this.wframeSubPopup[p]])&&"visible"===m.getStyle("visibility"))for(var r in m.stackComponents){if(void 0!==m.stackComponents[r])if((f=m.stackComponents[r].length-1)>=0)for(a=f;a>=0;a--){if(!(b=WebSquare.idCache[m.stackComponents[r][a].id])&&m.stackComponents[r][a].id)(v=y.Z.getPopup(m.stackComponents[r][a].id))&&v.options&&("wframe"===v.options.frameMode||"pageFrame"===v.options.frameMode)&&(b=v.popupWin);if(b&&b.render&&this.modal.style.display){if(!((c=parseInt(b.getStyleProperty("z-index"),10))>=(u=parseInt(y.Z.getStyleProperty(this.modal,"z-index"),10)-1)))break;b.wframePopupZIndex=c,b.setStyle("z-index",u)}}}}var g=y.Z.getPopupList(!0);if(g.length>0)for(p=g.length-1;p>=0;p--){var m;if((m=WebSquare.idCache[g[p]._targetFrameObjUUID])&&"visible"===m.getStyle("visibility")){for(var r in m.stackComponents){var f
;if(void 0!==m.stackComponents[r])if((f=m.stackComponents[r].length-1)>=0)for(a=f;a>=0;a--){var b,v;if(!(b=WebSquare.idCache[m.stackComponents[r][a].id])&&m.stackComponents[r][a].id)(v=y.Z.getPopup(m.stackComponents[r][a].id))&&v.options&&("wframe"===v.options.frameMode||"pageFrame"===v.options.frameMode)&&(b=v.popupWin);if(s&&b&&b.render){if(!((c=parseInt(b.getStyleProperty("z-index"),10))>=(u=parseInt(y.Z.getStyleProperty(this.modal,"z-index"),10)-1))||b.wframePopupZIndex)break;b.wframePopupZIndex=c,b.setStyle("z-index",u)}}}if(m._wframePopupModal&&"block"===m._wframePopupModal.render.style.display)break}}var w=!1;try{this.modal.setActive&&(this.modal.setActive(),w=!0)}catch(t){h.Y.printStackTrace(t,null,this)}if(w||(document.activeElement?document.activeElement.blur():this.modal.focus()),y.Z.isIE(6)&&(this.modal.style.top=document.documentElement.scrollTop+"px",this.modal.style.left=document.documentElement.scrollLeft+"px",this.modal.style.width=document.documentElement.scrollWidth+"px",this.modal.style.height=document.documentElement.scrollHeight+"px"),(!y.Z.isMobile()||y.Z.isMobile()&&"hidden"===this.options.mobileModalOverflow)&&this.addClass(document.documentElement,"w2modalopenedbody"),i&&i.length>0){for(a=0;a<i.length;a++){var S=i[a];S&&y.Z.getComponentById(S).options.pluginName?y.Z.getComponentById(S).addClass("w2modal_popupLayer"):$l("[body.showModal]Component with provided ID not found.("+S+")")}this.modalStackPopupLayer[this.modalStackPopupLayer.length]=i}y.Z.isTouchDevice()&&"true"==l.I.getConfiguration("/WebSquare/modal/@preventTouch")&&O.f.addListener(this.modal,"ontouchmove",this.handleTouchMove)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.handleTouchMove=function(t){O.f.preventDefault(t)},kt.prototype.modalEvent=function(t){try{if("true"==l.I.getConfiguration("/WebSquare/modal/@modalFocus"))return;if(this.modal&&t){var e=WebSquare.uiplugin.popup.getPopup(t);if(e&&e.options&&!0===e.options.modalFocus)return;for(var i=!1,o=0;o<this.browserPopupList.length;o++)if(this.browserPopupList[o]===t){i=!0;break}i||this.browserPopupList.push(t),"added"!==this.modal.getAttribute("data-wqmodalEvent")&&(this.modal.setAttribute("data-wqmodalEvent","added"),this.event.addListener(this.modal,"onclick",this.event.bindAsEventListener(this,this.handleModalEvent)),this.event.addListener(this.modal,"ondblclick",this.event.bindAsEventListener(this,this.handleModalEvent)))}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.handleModalEvent=function(){try{for(var t=!1,e=this.browserPopupList.length-1;e>=0;e--){var i=this.browserPopupList[e],o=WebSquare.uiplugin.popup.getPopupWindow(i);o?t||(t=!0,o.focus()):this.browserPopupList.splice(e,1)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.hideModal=function(t,e){try{if(this.modal){var i,o=!1;if(null!=this.stackComponents&&!0!==t){var s=!1;for(var r in this.stackComponents){var a=this.stackComponents[r];if(e){for(var n=this.stackComponents[r].length-1;n>=0;n--)if(a[n].id===e){a.splice(n,1),s=!0;break}if(!s)continue}else a.pop(),s=!0;for(n=b=a.length-1;n>=0;n--){0!=n||0!==a.length&&!1!==a[n].modal||(o=!0);var d=a[a.length-1];if("popup"===r&&(d=a[n].id),(v=WebSquare.idCache[d])||(v=y.Z.getComponentById(d)),v&&v.render){var c=v.zIndex;isNaN(c)&&(c=""),v.setStyle("z-index",c)}if("popup"!=r||!0===a[n].modal)break}}}if(this.wframeSubPopup&&this.wframeSubPopup.length>0)for(var u=0;u<this.wframeSubPopup.length;u++){if((f=WebSquare.idCache[this.wframeSubPopup[u]])&&"visible"===f.getStyle("visibility"))for(var r in f.stackComponents){if(void 0!==f.stackComponents[r])if((b=f.stackComponents[r].length-1)>=0)for(n=b;n>=0;n--){if(!(v=WebSquare.idCache[f.stackComponents[r][n].id])&&f.stackComponents[r][n].id&&(v=y.Z.getPopup(f.stackComponents[r][n].id).popupWin),v&&v.render&&v&&v.render){c=v.wframePopupZIndex;isNaN(c)||(v.setStyle("z-index",c),v.wframePopupZIndex=0)}}}}if(e&&!s||this.modalStack.pop(),this.wframeSubPopup&&this.wframeSubPopup.pop(),
0==this.modalStack.length||!0===o)this.modal.style.display="none",(!y.Z.isMobile()||y.Z.isMobile()&&"hidden"===this.options.mobileModalOverflow)&&this.removeClass(document.documentElement,"w2modalopenedbody");else{var p=this.modalStack[this.modalStack.length-1];this.modal.className=p}if(this.modalStackPopupLayer.length>0){var g=this.modalStackPopupLayer[this.modalStackPopupLayer.length-1];for(n=0;n<g.length;n++){var m=g[n];y.Z.getComponentById(m)&&y.Z.getComponentById(m).removeClass("w2modal_popupLayer")}this.modalStackPopupLayer.splice(this.modalStackPopupLayer.length-1,1)}if(y.Z.isTouchDevice()&&"true"==l.I.getConfiguration("/WebSquare/modal/@preventTouch")&&O.f.removeListener(this.modal,"ontouchmove",this.handleTouchMove),"block"!==this.modal.style.display&&(i=y.Z.getPopupList(!0)),i&&i.length>0)for(u=i.length-1;u>=0;u--){var f;if((f=WebSquare.idCache[i[u]._targetFrameObjUUID])&&"visible"===f.getStyle("visibility")){for(var r in f.stackComponents){var b;if(void 0!==f.stackComponents[r])if((b=f.stackComponents[r].length-1)>=0)for(n=b;n>=0;n--){var v;if(!(v=WebSquare.idCache[f.stackComponents[r][n].id])&&f.stackComponents[r][n].id&&(v=y.Z.getPopup(f.stackComponents[r][n].id).popupWin),v&&v.render&&v.wframePopupZIndex&&v&&v.render){c=v.wframePopupZIndex;isNaN(c)||(v.setStyle("z-index",c),v.wframePopupZIndex=0)}}}if(!0===f._modal)break}}}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.setToolTip=function(t,e,i){try{y.Z.isTouchDevice()&&(O.f.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(o){WebSquare.getBody().showToolTip(o,t,e,i)}))),O.f.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)})))),O.f.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(o){WebSquare.getBody().showToolTip(o,t,e,i)}))),O.f.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTip(t)})))}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.setToolTipComp=function(t,e){try{if(void 0===e||""==e)return;y.Z.isTouchDevice()&&(O.f.addListener(t,"ontouchstart",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),O.f.addListener(t,"ontouchend",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)})))),O.f.addListener(t,"onmouseover",this.event.bindAsEventListener(this,(function(i){WebSquare.getBody().showToolTipComp(i,t,e)}))),O.f.addListener(t,"onmouseout",this.event.bindAsEventListener(this,(function(t){WebSquare.getBody().hideToolTipComp(t,e)})))}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.showToolTip=function(t,e,i,o){try{if(0==e.tooltipShow||!i)return;if(y.Z.isFF()&&e.getAttribute("disabled"))return;if(i.indexOf("javascript:")>-1){var s=i.substring(11,i.length);"function"==typeof(n=y.Z.getGlobalFunction(s,this.scope_id))&&(i=n())}if(""==i)return;if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip||(this.toolTip=new WebSquare.uiplugin.balloonTip(this.id+"_balloonTip"),this.toolTip.writeTo(this),this.toolTip.activate()),this.toolTip){for(var r=this.event.getTargetIterator(t,this.render),a=null;r.next();)if((a="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[r.getElement().getAttribute("id")]]:WebSquare.componentIdCache[r.getElement().getAttribute("id")])&&a.render==r.getElement()||(a=null),a&&a.options){if(""!=a.options.tooltip||a.options.toolTip)if((i=a.options.tooltip||a.options.toolTip).indexOf("javascript:")>-1){var n;s=i.substring(11,i.length);"function"==typeof(n=y.Z.getGlobalFunction(s,this.scope_id))&&(i=n())}else{if(a.options.useLocale)if(a.options.tooltipLocaleRef)(c=this.getLocaleValue(a.options.tooltipLocaleRef))&&(i=c)}else if(a.options.useLocale&&o){var c;(c=this.getLocaleValue(o))&&(i=c),a=null}break}r=null,this._tooltipTriggerComponentId=this.uuid,a&&(a.render.setAttribute("aria-describedby",this.toolTip.id),
O.f.fireEvent(a,"ontooltipshow"),this._tooltipTriggerComponentId=a.uuid);var u=null!=WebSquare.BootLoader.fullViewRatio?WebSquare.BootLoader.fullViewRatio:1,p=WebSquare.style.getAbsoluteLeft(e),g=WebSquare.style.getAbsoluteTop(e),m=WebSquare.style.getSize(e,"height"),f="";if(a&&(a.options.tooltipPositionX||a.options.tooltipPositionY)){var b=a.render.offsetWidth,v=a.render.offsetHeight,w=0,S=0;try{a.options.tooltipPositionX&&(w=20,w=a.options.tooltipPositionX.indexOf("cellWidth")>-1||a.options.tooltipPositionX.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+a.options.tooltipPositionX)(b,v):new Function("width","height","return "+a.options.tooltipPositionX)(b,v)),a.options.tooltipPositionY&&(S=v+3,S=a.options.tooltipPositionY.indexOf("cellWidth")>-1||a.options.tooltipPositionY.indexOf("cellHeight")>-1?new Function("cellWidth","cellHeight","return "+a.options.tooltipPositionY)(b,v):new Function("width","height","return "+a.options.tooltipPositionY)(b,v))}catch(t){d.v.printLog("An error occurred while applying the tooltipPosition option. Default value used instead.["+a.id+"]"),h.Y.printStackTrace(t,null,this)}p+=w,g+=S}var _=this.tooltipSec;a&&a.options&&a.options.tooltipSec&&(_=parseInt(a.options.tooltipSec));var C=a&&a.options&&a.options.tooltipFormatter?y.Z.getGlobalFunction(a.options.tooltipFormatter,a.scope_id):null;f="function"==typeof C?C.call(a,a.id,i):i,this.toolTip.setValue(f);var x=this;try{var I=l.I.getConfiguration("/WebSquare/tooltipShowHideHandler/@value");if(I){var T=y.Z.getGlobalFunction(I,a.scope_id),k=!0;if("function"==typeof T&&(k=T(a)),!k)return}}catch(t){h.Y.printStackTrace(t)}this.toolTipTimer=setTimeout((function(){x.toolTip.show();var t=x.toolTip.render.offsetWidth,e=x.toolTip.render.offsetHeight,i=document.documentElement.clientWidth!=document.body.clientWidth?document.body.clientWidth:document.documentElement.clientWidth;p+t>document.documentElement.scrollLeft/u+i/u-10&&(p=document.documentElement.scrollLeft/u+i/u-t-10);var o=g-e;o<document.documentElement.scrollTop/u+10&&(o=o<0?g+m+5:document.documentElement.scrollTop/u+10),x.toolTip.setPosition(p,o),WebSquare.style.adjustZIndex(x._tooltipTriggerComponentId,x.toolTip.uuid,"toolTip")}),_)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.showToolTipComp=function(t,e,i){try{if(void 0===i||""==i)return;this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null);var o=y.Z.getComponentById(i);if(o){var s=WebSquare.style.getAbsoluteLeft(e),r=WebSquare.style.getAbsoluteTop(e),a=WebSquare.style.getSize(e,"height"),n=WebSquare.style.getSize(e,"width");this.toolTipTimer=setTimeout((function(){o.show();var t=o.render.offsetWidth,e=o.render.offsetHeight;s>document.documentElement.scrollLeft+document.documentElement.clientWidth-s-10&&(s=s+n-t);var i=r-e;i<document.documentElement.scrollTop+10&&(i=i<0?r+a+5:document.documentElement.scrollTop+10),o.setPosition(s,i)}),this.toolTipSec)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.hideToolTip=function(t){try{if(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),this.toolTip){this.toolTip.hide();var e=this.event.getTargetIterator(t,this.render),i=null,o=e.getElement();null!=o&&((i="idToUUID"in WebSquare?WebSquare.idCache[WebSquare.idToUUID[o.getAttribute("id")]]:WebSquare.componentIdCache[o.getAttribute("id")])&&i.render==o||(i=null)),e=null,o=null,i&&(i.render.removeAttribute("aria-describedby"),O.f.fireEvent(i,"ontooltiphide"))}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.hideToolTipComp=function(t,e){try{var i=y.Z.getComponentById(e);i&&(this.toolTipTimer&&(clearTimeout(this.toolTipTimer),this.toolTipTimer=null),i&&i.hide())}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.getLayerListener=function(){try{return this.layerListener}catch(t){h.Y.printStackTrace(t,null,this)}},kt.prototype.finalize=function(){try{this.modal&&"function"==typeof this.modal.remove&&(this.modal.remove(),delete this.modal)}catch(t){
h.Y.printStackTrace(t,null,this)}},(kt.bodyLayerListener=function(){this.layers={},this.existShow=!1,this.useOtherComponentId={}}).prototype.addListener=function(t){try{var e=!0;for(var i in this.layers){e=!1;break}var o=t.component,s=t.component.id;if(this.layers[s]={component:t.component,show:t.fnShow,hide:t.fnHide,paramHide:t.paramHide,event:t.event,isShow:!1,otherClick:t.otherClick,frameClick:t.frameClick},e&&(WebSquare.getBody().event.addListener(document.documentElement,"onmousewheel",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument)),y.Z.isTouchDevice()?WebSquare.getBody().event.addListener(document.documentElement,"ontouchstart",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument)):(WebSquare.getBody().event.addListener(window,"onscroll",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleScrollEventDocument)),WebSquare.getBody().event.addListener(window,"onresize",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseWheelEventDocument))),WebSquare.getBody().event.addListener(document.documentElement,"onmousedown",WebSquare.getBody().event.bindAsEventListener(WebSquare.getBody(),this.handleMouseDownEventDocument))),t.event)for(var r in t.event)o.event.addListener(document.documentElement,r,o.event.bindAsEventListener(o,t.event[r]))}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.show=function(t,e){try{if(this.layers[t]&&"function"==typeof this.layers[t].show){for(var i=this.layers[t].component,o={};i.parentControl;)(i=i.parentControl).id&&(o[i.id]=!0);this.hideAll(o),this.layers[t].show.call(this.layers[t].component,e),this.layers[t].isShow=!0,this.existShow=!0}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.hide=function(t,e){try{if(this.layers[t]&&"function"==typeof this.layers[t].hide)for(var i in this.layers[t].hide.call(this.layers[t].component,e),this.layers[t].isShow=!1,this.existShow=!1,this.layers)if(this.layers[i].isShow){this.existShow=!0;break}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.hideAll=function(t){try{for(var e in this.targetHideArr=[],this.layers)if((!t||!t[e])&&this.layers[e].isShow){var i={};i.id=e,i.param=this.layers[e].paramHide,this.targetHideArr.push(i),this.hide(e,this.layers[e].paramHide)}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.isExist=function(t){try{return!!this.layers[t]}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.isShow=function(t){try{return!!this.layers[t]&&!!this.layers[t].isShow}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.remove=function(t){try{if(this.layers[t]){for(var e in this.layers[t].event)O.f.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.removeAll=function(){try{for(var t in this.layers){for(var e in this.layers[t].event)O.f.removeListener(document.documentElement,e,this.layers[t].event[e]);this.layers[t].component=null,this.layers[t].draw=null,this.layers[t].show=null,this.layers[t].hide=null,this.layers[t].event=null,delete this.layers[t]}this.layers={}}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.handleMouseDownEventDocument=function(t){try{if(!this.layerListener.existShow)return;var e,i;y.Z.isIE("6 7 8")?(e=document.documentElement.scrollTop,i=document.documentElement.scrollLeft):(e=window.pageYOffset,i=window.pageXOffset),O.f.getMouseX(t)<document.documentElement.clientWidth+i&&O.f.getMouseY(t)<document.documentElement.clientHeight+e&&this.layerListener.hideAll()}catch(t){h.Y.printStackTrace(t,null,this)}},
kt.bodyLayerListener.prototype.handleMouseWheelEventDocument=function(t){try{if(!y.Z.isMobile()){var e=l.I.getConfiguration("/WebSquare/body/blurAll/@value");if("true"!==e||function(t){for(var e=t.offsetTop,i=t.offsetLeft,o=t.offsetWidth,s=t.offsetHeight;t.offsetParent;)e+=(t=t.offsetParent).offsetTop,i+=t.offsetLeft;return e>=(window.pageYOffset||document.documentElement.scrollTop)&&i>=(window.pageXOffset||document.documentElement.scrollLeft)&&e+s<=(window.pageYOffset||document.documentElement.scrollTop)+(window.innerHeight||document.documentElement.clientHeight)&&i+o<=(window.pageXOffset||document.documentElement.scrollLeft)+(window.innerWidth||document.documentElement.clientWidth)}(document.activeElement)||"INPUT"!==document.activeElement.tagName.toUpperCase()||document.activeElement.blur(),y.Z.isIE("6 7 8")&&t&&"resize"===t.type.toLowerCase())return}if(!this.layerListener.existShow)return;var i;for(var o in this.layerListener.layers)this.layerListener.layers[o].isShow&&this.layerListener.layers[o].component&&this.layerListener.layers[o].component.render.parentNode&&(i=this.layerListener.layers[o].component.render.parentNode);var s=O.f.getTarget(t);if("true"==this.forceClose||s!=WebSquare.getBody().render&&i!=WebSquare.getBody().render)return void this.layerListener.hideAll();var r,a,n=document.documentElement;if(y.Z.isIE("6 7 8")?(r=document.documentElement.scrollTop,a=document.documentElement.scrollLeft):(r=window.pageYOffset,a=window.pageXOffset),0===r||n.scrollHeight-r===n.clientHeight||0===a||n.scrollWidth-a===n.clientWidth)return;this.useWheel=!0,this.layerListener.hideAll()}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.handleScrollEventDocument=function(t){try{var e=this.layerListener.targetHideArr;if(!e||e.length<=0||null==this.useWheel||!this.useWheel)return;for(var i=0;i<e.length;i++)this.layerListener.show(e[i].id,e[i].param);this.layerListener.targetHideArr=[],this.useWheel=!1}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.otherClick=function(t){try{for(var e in this.layers)"function"==typeof this.layers[e].otherClick&&this.layers[e].otherClick.call(this.layers[e].component,t)}catch(t){h.Y.printStackTrace(t,null,this)}},kt.bodyLayerListener.prototype.frameClick=function(){try{for(var t in this.existShow&&this.hideAll(),this.layers)"function"==typeof this.layers[t].frameClick&&this.layers[t].frameClick.call(this.layers[t].component)}catch(t){h.Y.printStackTrace(t,null,this)}};var Lt=__webpack_require__(3870),At=__webpack_require__(7662),Dt=function(t,e,i){st.q.call(this,t,e,i)};a.q.extend(Dt.prototype,st.q.prototype),Dt.prototype.defaultOptions={pluginType:"uiplugin.itemTable",pluginName:"itemTable",parentPluginName:"",row:"5",col:"1",submenuSize:"fixed",useRowHover:"true",useColHover:"true",useKey:"true",useHotKey:"true",useCacheData:"true",w2table:"w2table",w2table_main:"w2table_main",w2table_main_depth:"w2table_main_depth",w2table_row:"w2table_row",w2table_col:"w2table_col",w2table_col_over:"w2table_col_over",w2table_col_checkbox:"w2table_col_checkbox",w2table_col_label:"w2table_col_label",w2table_depth:"w2table_depth",w2table_subdepth:"w2table_subdepth",w2table_subdepth_show:"w2table_subdepth_show",w2table_subdepth_hide:"w2table_subdepth_hide",w2table_subdepth_parent:"w2table_subdepth_parent",defaultStyle:"",checkbox:!1,escape:!1,tableRender:"",findItem:!1,keyBufferResetTime:1e3,wheelRows:0,visibleColNum:1,depthColumn:"",depthColumnHeight:0,depthColumnWidth:0,useFindItemFirstKeyChar:!0,noUseUpDownKey:!1,noUseTabKeyByMove:!1},Dt.prototype.initialize=function(t){var e=l.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=l.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/wheelRows/@value");i&&!isNaN(i)&&(this.options.wheelRows=Number(i)),this.rowCount=this.options.row,this.colCount=this.options.col,this.selectedCell=null,this.data=[],this._keyBuffer="",this.keyCharHash={48:"0",
49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"",67:"",68:"",69:"",70:"",71:"",81:"",82:"",83:"",84:"",86:"",87:"",88:"",90:""},this.korCharHash2={69:"",81:"",82:"",84:"",87:""},this.inputBlurInside=!1,this.itemTableFocus=!1,this._keyIndex=-1,this._directionKeyPressed=!1,this.myhelper=new WebSquare.korHelper},Dt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'",i="";return this.options.depthColumn&&(i=this.options.w2table_main_depth+" "),t.push("<div id='"+this.id+"' "+e+" class='"+this.options.w2table+" "+i+this.options.className+"' tabIndex='0'>"),1==this.options.checkbox&&1==this.options.navBtn&&(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+" class='"+this.options.w2table+" "+this.options.className+"' tabIndex='0'></div>"),t.push("<div id='"+this.id+"_btn_div' class='w2checkcombobox_btn_div'></div>")),t.push("</div>"),t.join("")},Dt.prototype.addClickEventListener=function(t){this.clickFunc=t},Dt.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},Dt.prototype.addKeyUpEventListener=function(t){this.keyUpFunc=t},Dt.prototype.addMouseLeaveEventListener=function(t){this.mouseLeaveFunc=t},Dt.prototype.addMouseOverEventListener=function(t){this.mouseOverFunc=t},Dt.prototype.addMouseUpEventListener=function(t){this.mouseUpFunc=t},Dt.prototype.addOnchangeListener=function(t){this.onchangeFunc=t},Dt.prototype.setItemArr=function(t){var e=[],i="";i=this.options.submenuSize&&"column"!==this.options.submenuSize?"style='table-layout:"+this.options.submenuSize+"; width:0px;'":"style='width:0px'";var o=y.Z.getDataPrefix("index"),s=y.Z.getDataPrefix("row"),r=y.Z.getDataPrefix("col"),a=0,n={},l=1,h=1;if("ul"===this.options.tableRender){var d;d=this.options.depthColumn?this.options.w2table_depth:this.options.w2table_main;e.push("<ul id='"+this.id+"_main' class='"+d+"' role='listbox'>");for(var c=0;c<t.length;++c){var u="",p="";!0===t[c]._hidden?(u=" data-wqhidden='true'",p=" w2selectbox_item_hidden"):!0===t[c]._disabled&&(u=" data-wqdisabled='true'",!0!==this.options.checkbox&&(p=" w2selectbox_item_disabled")),a++;var g,m=!1;if(this.options.depthColumn){var f=c>0&&Number(t[c-1]._depth)||1,b=Number(t[c]._depth)||1,v=c<t.length-1&&Number(t[c+1]._depth)||1;if(l=Math.max(b,l),h=b,n[b]||(n[b]=[1,1,1]),b<v&&(m=!0),f<b){var w=this.options.w2table_depth;e.push("<ul class='"+w+"'>")}else if(f>b){for(var S=0;S<f-b;S++)e.push("</li>"),e.push("</ul>"),n[f-S-1][0]+=n[f-S][0]-1;for(var _=b;_<=f;_++)n[_][1]=Math.max(n[_][0],n[_][1]),_===b?(n[_][2]++,n[_][0]=n[_][2]):(n[_][0]=1,n[_][2]=1)}else e.push("</li>"),c>0&&(n[b][0]++,n[b][2]++)}this.options.depthColumn?(g=this.options.w2table_subdepth+" "+this.options.w2table_subdepth_hide,!0===m&&(g=g+" "+this.options.w2table_subdepth_parent)):g=this.options.w2table_col;var C=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'";if("checkcombobox"===this.options.parentPluginName){var x=this.options.escape?this._encode(t[c].label):t[c].label;e.push("<li id='"+this.id+"_"+c+"' role='option' class='"+g+p+"' "+s+"='"+c+"' "+r+"='"+this.options.col+"' "+C+" "+o+"='"+c+"'"+u+" aria-label= '"+x+"'>")}else if("autoComplete_input"===this.options.parentPluginName)e.push("<li id='"+this.id+"_option"+(c+1)+"' class='"+g+p+"' "+C+" "+o+"='"+c+"' "+u+" role='option'>");else{var I=y.Z.getDataPrefix("unique_id"),T="";"windowContainer"===this.options.parentPluginName&&!0===this.options.useAccessibilityMenu&&(T=I+" = '"+t[c].id+"'"),
e.push("<li class='"+g+p+"' "+T+C+" "+o+"='"+c+"' "+u+" role='option' aria-selected='false' aria-setsize='"+t.length+"' aria-posinset='"+(c+1)+"' >")}for(var k=0;k<1;++k){x=this.options.escape?this._encode(t[c].label):t[c].label;if("checkcombobox"===this.options.parentPluginName){var L=t[c].value,A=this.id+"_"+c+"_checkbox";e.push("<input type='checkbox' id='"+A+"' class='"+this.options.w2table_col_checkbox+"' value='"+L+"' tabindex='-1'/>"),e.push("<label id='"+this.id+"_"+c+"_label' for='"+A+"' class='"+this.options.w2table_col_label+"' "+r+"='"+k+"' "+o+"='"+c+"'>"),e.push(x),e.push("</label>")}else if("windowContainer"===this.options.parentPluginName&&!0===this.options.useCloseButton&&!0===this.options.useAccessibilityMenu){e.push("<a id='"+this.id+"_"+c+"' "+r+"='"+k+"' "+o+"='"+c+"' href='javascript:void(null)' role='button'>"),e.push(x),e.push("</a>");var D=WebSquare.language.getMessage("Accssibility_btn_aria_label_windowContainer")||"close";e.push("<button type='button' aria-label='"+D+"' class='w2list_listColumn_accessibility_close w2windowContainer_accessibility_button'>"),e.push("</button>")}else"autoComplete_input"===this.options.parentPluginName?e.push(x):(e.push("<a id='"+this.id+"_"+c+"' "+r+"='"+k+"' "+o+"='"+c+"' href='javascript:void(null)'>"),e.push(x),e.push("</a>"))}!0!==m&&e.push("</li>")}e.push("</ul>")}else{e.push("<table id='"+this.id+"_main' "+i+" class='"+this.options.w2table_main+"'>");var W=t.length,q=this.options.visibleColNum;1==q&&this.options.visibleColMax>1&&(q=Math.min(Math.ceil(t.length/this.options.row),this.options.visibleColMax)),q>1?W=Math.ceil(W/q):q=1;for(c=0;c<W;++c){u="",p="";var M="";!0===t[c]._hidden?(u=" data-wqhidden='true'",p=" w2selectbox_item_hidden"):!0===t[c]._disabled&&(u=" data-wqdisabled='true'",!0!==this.options.checkbox&&(p=" w2selectbox_item_disabled",M=" disabled")),a++,e.push("<tr class='"+this.options.w2table_row+p+"' "+s+"='"+c+"'"+u+">");for(k=0;k<q;++k){var E=c*q+k;if(E>=t.length)e.push("<td id='"+this.id+"_"+E+"' role='listitem option' "+C+" class='"+this.options.w2table_col+"' "+r+"='"+k+"' "+s+"='"+c+"'></td>");else{x=this.options.escape?this._encode(t[E].label):t[E].label,L=t[E].value,C=""==this.options.defaultStyle?"":"style='"+this.options.defaultStyle+"'";var R="";if(this.options.checkbox&&this.options.editable&&(R=!0===(t[E].checked||t[E].allchecked)?"checked":""),e.push("<td id='"+this.id+"_"+E+"' role='listitem option' aria-setsize='"+t.length+"' aria-posinset='"+(E+1)+"' "+C+" class='"+this.options.w2table_col+"' "+r+"='"+k+"' "+s+"='"+c+"' "+o+"='"+E+"'>"),1==this.options.checkbox){A=this.id+"_"+E+"_checkbox";e.push("<input type='checkbox' id='"+A+"' class='"+this.options.w2table_col_checkbox+"' value='"+L+"' "+R+M+"/>"),e.push("<label type='checkbox' for='"+A+"' class='"+this.options.w2table_col_label+"'>"),e.push(x),e.push("</label>")}else e.push(x);e.push("</td>")}}e.push("</tr>")}e.push("</table>")}var N=!1;if("none"==this.render.style.display&&(this.render.style.display="",N=!0),!0===this.options.navBtn?document.getElementById(this.id+"_wrapper").innerHTML=e.join(""):this.render.innerHTML=e.join(""),1==this.options.checkbox&&1==this.options.navBtn){this.mainTable=this.render.firstChild.firstChild;var F=document.getElementById(this.id)}else this.mainTable=this.render.firstChild;this.dom.td=null,"ul"===this.options.tableRender?this.dom.tds=this.getDomList("td","li"):this.dom.tds=this.getDomList("td","td");var O=0,B=!1;if(this.options.depthColumn){var P=document.getElementById(this.id+"_main");if(this.options.depthColumnHeight>0)this.setStyle("height",this.options.depthColumnHeight+"px");else{if(1!==h){for(S=0;S<h-1;S++)e.push("</li>"),e.push("</ul>"),n[h-S-1][0]+=n[h-S][0]-1;for(_=1;_<=h;_++)n[_][1]=Math.max(n[_][0],n[_][1]),1===_?(n[_][2]++,n[_][0]=n[_][2]):(n[_][0]=1,n[_][2]=1)}for(var Y=P.offsetHeight,V=0,H=0;H<P.childNodes.length;H++){"LI"===(et=P.childNodes[H]).tagName.toUpperCase()&&V++}var j=Y/V,z=1;for(var G in n)z=Math.max(z,n[G][1])
;var Z=Math.ceil(z*j)+5;this.setStyle("height",Math.max(Y,Z)+"px")}if(this.options.depthColumnWidth>0)this.setStyle("width",this.options.depthColumnWidth+"px");else{var U=P.offsetWidth;this.setStyle("width",U*l+18+"px")}}else if(q>1){var X=this.mainTable.getElementsByTagName("tr");for(_=0;_<X.length;_++){for(var K=0,$=X[_].getElementsByTagName("td"),J=0;J<$.length;J++){K+=(nt=parseInt(WebSquare.style.getStyle($[J],"padding-left").wq_replaceAll("px",""),10)||0)+(at=parseInt(WebSquare.style.getStyle($[J],"padding-right").wq_replaceAll("px",""),10)||0);for(var Q=$[J].childNodes,tt=0;tt<Q.length;tt++){var et;if(1===(et=Q[tt]).nodeType){var it=WebSquare.style.getStyle(et,"margin-left").wq_replaceAll("px",""),ot=WebSquare.style.getStyle(et,"margin-right").wq_replaceAll("px","");it="auto"===it?2:parseInt(it,10),ot="auto"===ot?2:parseInt(it,10),K+=et.offsetWidth+it+ot+nt+at}else K+=et.offsetWidth}}O=Math.max(O,K)}this.mainTable.style.width=O+"px",B=!0}else if(this.dom.tds&&this.dom.tds.length>0){j=this.dom.tds[0].offsetHeight;var st=0,rt=this.options.row>a?a:this.options.row;this.setStyle("height",rt*j+"px"),1==this.options.checkbox&&1==this.options.navBtn&&(F.style.height=rt*j+"px");for(J=0;J<this.dom.tds.length;J++){var at,nt=parseInt(WebSquare.style.getStyle(this.dom.tds[J],"padding-left").wq_replaceAll("px",""),10)||0;st=(at=parseInt(WebSquare.style.getStyle(this.dom.tds[J],"padding-right").wq_replaceAll("px",""),10)||0)+nt;for(it=0,ot=0,_=0;_<this.dom.tds[J].childNodes.length;_++)this.dom.tds[J].childNodes[_].nodeType==WebSquare.Elem.type.element?(it=WebSquare.style.getStyle(this.dom.tds[J].childNodes[_],"margin-left").wq_replaceAll("px",""),ot=WebSquare.style.getStyle(this.dom.tds[J].childNodes[_],"margin-right").wq_replaceAll("px",""),it="auto"===it?2:parseInt(it,10),ot="auto"===ot?2:parseInt(it,10),st+=this.dom.tds[J].childNodes[_].offsetWidth+it+ot):st+=this.dom.tds[J].offsetWidth;O<st&&((y.Z.isIE("6")||y.Z.isIE("7"))&&(st=st+at+nt+it+ot),O=st)}O+=17,B=!0}B&&(this.maxWidth=O,1==this.options.checkbox&&1==this.options.navBtn&&(F.style.width=O+"px",this.render.firstChild.style.width=O+"px",this.render.firstChild.firstChild.style.width=O+"px"),this.setStyle("width",O+"px"),this.options.useAccessibilityMenu&&(WebSquare.style.setStyle(this.dom.tds[0].parentNode,"padding-left","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-top","0px"),WebSquare.style.setStyle(this.dom.tds[0].parentNode,"margin-bottom","0px"))),N&&(this.render.style.display="none")},Dt.prototype.setAction=function(){this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseOverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseOutEvent)),y.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),1==this.options.navBtn?this.event.addListener(document.getElementById(this.id+"_wrapper"),"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent)):this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,this.handleMouseWheelEvent)),this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onmouseup",this.event.bindAsEventListener(this,this.handleMouseUpEvent)),this.event.addListener(this.render,"onmouseleave",this.event.bindAsEventListener(this,this.handleMouseLeaveEvent))},
Dt.prototype.handleMouseWheelEvent=function(t){try{if(y.Z.isMobile())return void O.f.stopPropagation(t);var e=null;if(this.options.wheelRows>0){var i=this.dom.tds[0].offsetHeight,o=O.f.getMouseWheelDelta(t),s=Math.round(this.options.wheelRows*Math.abs(o));s=Math.max(s,this.options.wheelRows),e=o>0?i*s*-1:i*s}else t.wheelDelta?e=-1*t.wheelDelta:y.Z.isNumber(t.detail)&&(e=50*t.detail);if(e)if(O.f.stopEvent(t),!0===this.options.navBtn){var r=document.getElementById(this.id+"_wrapper");r&&(r.scrollTop=e+r.scrollTop)}else this.render.scrollTop=e+this.render.scrollTop}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleMouseOverEvent=function(t){try{if(this._directionKeyPressed)return;O.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)if(e.match(this.options.w2table_col)){if("ul"===this.options.tableRender)var i=this.getElementById(this.id).firstChild.childNodes;else i=this.getElementById(this.id).firstChild.firstChild.childNodes;for(var o=0;o<i.length;o++){if("ul"===this.options.tableRender)var s=i[o];else s=i[o].firstChild;this.removeClass(s,this.options.w2table_col_over)}this.selectedCell=e.getElement(),this.addClass(this.selectedCell,this.options.w2table_col_over),this.mouseOverFunc&&this.mouseOverFunc(this.selectedCell)}}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleMouseOutEvent=function(t){try{if(this._directionKeyPressed)return;O.f.stopEvent(t);for(var e=this.event.getTargetIterator(t,this.render);e.next();)e.match(this.options.w2table_col)&&(this.removeClass(e.getElement(),this.options.w2table_col_over),this.selectedCell=null)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleMouseLeaveEvent=function(t){try{this.mouseLeaveFunc&&this.mouseLeaveFunc(t)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleMouseUpEvent=function(t){try{this.mouseUpFunc&&this.mouseUpFunc(t)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleClickEvent=function(t){try{O.f.stopPropagation(t);for(var e=!1,i=!1,o=y.Z.getDataPrefix("index"),s=this.event.getTargetIterator(t,this.render);s.next();)if(this.options.depthColumn&&s.match(this.options.w2table_subdepth)){var r=s.getElement();this.selectedCell=r,this.addClass(r,this.options.w2table_subdepth_show),this.removeClass(r,this.options.w2table_subdepth_hide);for(var a=[r.parentNode],n=0;n<r.childNodes.length;n++){var l=r.childNodes[n];"UL"===l.tagName.toUpperCase()&&this.hasClass(l,this.options.w2table_depth)&&a.push(l)}for(n=0;n<a.length;n++)for(var d=a[n],c=0;c<d.childNodes.length;c++){var u=d.childNodes[c];"LI"===u.tagName.toUpperCase()&&u!==r&&(this.removeClass(u,this.options.w2table_subdepth_show),this.addClass(u,this.options.w2table_subdepth_hide))}this.fireClick(t),s.stop()}else if(s.match(this.options.w2table_col)){if(this.selectedCell=s.getElement(),this._getCellDisabled()){s.stop();break}if("checkcombobox"!==this.options.parentPluginName){var p=this.selectedCell.parentElement;if(p)for(n=0;n<p.childNodes.length;n++){"LI"===(r=p.childNodes[n]).tagName.toUpperCase()&&r.setAttribute("aria-selected","false")}this.selectedCell.setAttribute("aria-selected","true")}if(!this.options.checkbox||e||i)if(this.options.checkbox){m=this.selectedCell.index||this.selectedCell.getAttribute(o);!(g=document.getElementById(this.id+"_"+m+"_checkbox"))||g.disabled||i||this.fireClick(t)}else this.fireClick(t);else{var g,m=this.selectedCell.index||this.selectedCell.getAttribute(o);(g=document.getElementById(this.id+"_"+m+"_checkbox"))&&!g.disabled&&g.click()}}else s.match(this.options.w2table_col_checkbox)?e=!0:s.match(this.options.w2table_col_label)&&(i=!0)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.focus=function(){try{this.inputBlurInside=!0,this.itemTableFocus=!0,"ul"!=this.options.tableRender&&(y.Z.isIEAllVersion()||y.Z.isSpartan())?y.Z.isSpartan()?document.getElementById(this.id).focus():this.render.firstChild.focus():this.render.focus()}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleKeydownEvent=function(t){try{
var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex(),o=i=parseInt(i);if(38==e){if(!0!==this.options.noUseUpDownKey){var s=!1;for(o>0?0==--o&&this._getCellHidden(o)&&(o--,s=!0):s=!0;o>=0&&(this._getCellDisabled(o)||this._getCellHidden(o));)o--;o>=0&&this.setSelectedIndex(o),this._keyIndex=s?-1:o,this._directionKeyPressed=!0}}else if(40==e){if(!0!==this.options.noUseUpDownKey){var r=this.getItemCount();s=!1;for(o+1<r?++o+1==r&&this._getCellHidden(o)&&(o++,s=!0):s=!0;o+1<=r&&(this._getCellDisabled(o)||this._getCellHidden(o));)o++;o<r&&this.setSelectedIndex(o),this._keyIndex=s?r:o,this._directionKeyPressed=!0}}else if(32==e){if(this.options.checkbox&&!this._getCellDisabled(o)&&i>=0)document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){for((o=i-this.rowCount)<0&&(o=0);o>0&&this._getCellDisabled(o)||this._getCellHidden(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(34==e){for((o=i+this.rowCount)>=this.getItemCount()&&(o=this.getItemCount()-1);o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(35==e){for(o=this.getItemCount()-1;o>0&&this._getCellDisabled(o)||this._getCellHidden(o);)o--;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(36==e){for(o=0;o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o),this._directionKeyPressed=!0}else if(13==e||this.options.selectByTabKey&&9==e)this.options.checkbox||this._getCellDisabled(o)||(this._directionKeyPressed=!1,this.mouseUpFunc&&this.mouseUpFunc(t),this.fireClick(t));else if(9==e){if(1==this.options.noUseTabKeyByMove&&(this.endReached=!0),"ul"==this.options.tableRender&&!0!==this.options.noUseTabKeyByMove)if(t.shiftKey)if(i>0){for(;0<=i-1&&this._getCellDisabled(i-1)||this._getCellHidden(i-1);)0===--i&&(this.endReached=!0);i>0&&this.setSelectedIndex(i-1)}else!0===this.options.useAccessibilityMenu?this.setSelectedIndex(this.getItemCount()-1):this.endReached=!0;else{r=this.getItemCount();if(document.activeElement==this.render){for(o=0;o+1<r&&this._getCellDisabled(o)||this._getCellHidden(o);)o++;this.setSelectedIndex(o)}else if(o+1<r){for(o++;o+1<=r&&this._getCellDisabled(o)||this._getCellHidden(o);)++o===r&&(this.endReached=!0);o<r&&this.setSelectedIndex(o)}else!0===this.options.useAccessibilityMenu?this.setSelectedIndex(0):this.endReached=!0}}else this.findItemStartedWithKeyChar(t,e),this.options.findItem&&this._keyBuffer&&(y.Z.clearTimeout(this.id+"_selectKeyBuffer"),y.Z.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime}));"autoComplete_input"!=this.options.parentPluginName&&"ul"!=this.options.tableRender&&this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex());var a=y.Z.getDataPrefix("index");if(this.keyDownFunc){if(this.selectedCell){if(this._getCellDisabled())return;void 0===(i=this.selectedCell.index)&&(i=this.selectedCell.getAttribute(a))}this.keyDownFunc.call(this,t,i)}O.f.preventDefault(t)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.handleKeyupEvent=function(t){try{if(this._directionKeyPressed=!1,this.keyUpFunc&&!this.options.checkbox){var e;if(this.selectedCell){if(this._getCellDisabled())return;e=this.selectedCell.index;var i=y.Z.getDataPrefix("index");void 0===e&&(e=this.selectedCell.getAttribute(i))}this.keyUpFunc.call(this,t,e)}}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.setSelectedIndex=function(t,e){if(this.dom.tds&&0!==this.dom.tds.length){e=e||{};if(t=t<0?0:t>=this.dom.tds.length?this.dom.tds.length-1:t,this.removeClass(this.selectedCell,this.options.w2table_col_over),"autoComplete_input"===this.options.parentPluginName&&this.selectedCell&&this.selectedCell.setAttribute("aria-selected","false"),this.selectedCell=this.dom.tds[t],this.addClass(this.selectedCell,this.options.w2table_col_over),
"autoComplete_input"===this.options.parentPluginName&&this.selectedCell.setAttribute("aria-selected","true"),"ul"==this.options.tableRender&&"checkcombobox"!==this.options.parentPluginName&&"autoComplete_input"!==this.options.parentPluginName&&this.selectedCell.childNodes[0]&&this.selectedCell.childNodes[0].focus(),this.selectedCell.offsetTop>this.render.offsetHeight/2){var i=Math.min(this.getItemCount(),this.rowCount),o=this.dom.tds[t-parseInt(i/2)];this.render.scrollTop=o.offsetTop}else this.render.scrollTop=0;this.onchangeFunc&&!0!==e.noChangeFunc&&this.onchangeFunc(t)}},Dt.prototype.getItemCount=function(){return this.dom.tds?this.dom.tds.length:0},Dt.prototype.fireClick=function(t){try{var e;if(this.selectedCell){if(this._getCellDisabled())return;e=this.selectedCell.index;var i=y.Z.getDataPrefix("index");void 0===e&&(e=this.selectedCell.getAttribute(i))}this.clickFunc.call(this,t,e)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype._getCellDisabled=function(t){try{var e;return(e=isNaN(t)?this.selectedCell:this.dom.tds[t])&&(e.getAttribute("data-wqdisabled")||e.parentNode.getAttribute("data-wqdisabled"))}catch(t){h.Y.printStackTrace(t)}},Dt.prototype._getCellHidden=function(t){try{var e;return(e=isNaN(t)?this.selectedCell:this.dom.tds[t])&&(e.getAttribute("data-wqhidden")||e.parentNode.getAttribute("data-wqhidden"))}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.findItemStartedWithKeyChar=function(t,e){try{if(!1===this.options.useFindItemFirstKeyChar)return;var i=this.keyCharHash[e],o=-1;if(i){var s=this.selectedCell?this.selectedCell.index:-1;this.options.findItem&&(s=0);var r=y.Z.getDataPrefix("index");void 0===s&&this.selectedCell&&!this._getCellDisabled()&&(s=this.selectedCell.getAttribute(r));var a=this.korCharHash[e],n=this.korCharHash2[e],l=1;for(this.options.findItem?this._keyBuffer+=i:(this._keyBuffer=i,s++);;)if(s%=this.dom.tds.length,"none"!==this.dom.tds[s].style.display)if(0!=s||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=s&&1!=s||!0!==this.options.chooseOption||!0!==this.options.allOption){var d=this.dom.tds[s].innerHTML.toLowerCase(),c=!1;a&&!t.shiftKey?c=this.myhelper.startWith(d,a):n&&t.shiftKey&&(c=this.myhelper.startWith(d,n));var u=this.options.findItem?this._keyBuffer:i;if(d.startsWith(u)||c&&y.Z.getBoolean(this.options.findItemKor)){o=s;break}if(d.startsWith(u)){this._keyBuffer="",o=s;break}if(l>this.dom.tds.length)break;s++,l++}else{if(this.dom.tds.length<=2)break;s++}else{if(this.dom.tds.length<=1)break;s++}else s++;o>-1?this.setSelectedIndex(o):this._keyBuffer=""}}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.getSelectedIndex=function(){try{var t=-1;try{if(this.selectedCell&&void 0===(t=this.selectedCell.index)){var e=y.Z.getDataPrefix("index");t=this.selectedCell.getAttribute(e)}}catch(t){h.Y.printStackTrace(t)}return t}catch(t){h.Y.printStackTrace(t,null,this)}},Dt.prototype.hide=function(){try{this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.Y.printStackTrace(t)}},Dt.prototype.getFocusedComponentId=function(){try{return this.id.split("_")[0]}catch(t){h.Y.printStackTrace(t)}},Dt.prototype._encode=function(t){var e=t;try{if("string"!=typeof t)return e;var i=WebSquare.idCache[this.options.parent_uuid];return e=i&&"function"==typeof i._encode?i._encode(t):WebSquare.xml._encode(t)}catch(t){return h.Y.printStackTrace(t,null,this),e}};var Wt=function(t,e,i){st.q.call(this,t,e,i)};a.q.extend(Wt.prototype,st.q.prototype),Wt.prototype.defaultOptions={pluginType:"uiplugin.gridItemTable",pluginName:"gridItemTable"},Wt.prototype.initialize=function(t){try{var e=l.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);for(var i=[],o=[],s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].style){for(var r=this.options.itemsetObj.items[s].style.split(";"),a=!1,n=!1,d=0;d<r.length;d++){if("width"==(u=r[d].split(":"))[0].wq_trim()?(i.push(parseInt(u[1],10)),
a=!0):"text-align"==u[0].wq_trim()&&(o.push(u[1]),n=!0),a&&n)break}a||i.push(70),n||o.push("center")}else i.push(70),o.push("center");var c=[];for(s=0;s<this.options.itemsetObj.items.length;s++)if(this.options.itemsetObj.items[s].headerStyle){for(r=this.options.itemsetObj.items[s].headerStyle.split(";"),d=0;d<r.length;d++){var u;if("text-align"==(u=r[d].split(":"))[0].wq_trim()){c.push(u[1]);break}}d==r.length&&c.push("center")}var p=[];for(s=0;s<this.options.itemsetObj.items.length;s++){"true"==this.options.itemsetObj.items[s].hidden?p.push("true"):p.push("false")}for(s=0;s<this.options.itemsetObj.items.length;s++)this.options.itemsetObj.items[s].id||(this.options.itemsetObj.items[s].id=this.id+"_column_body_"+s);this.options.gridOptions.visibleRowNum||(this.options.gridOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridOptions.rowNumVisible||(this.options.gridOptions.rowNumVisible=!1),this.options.gridOptions.wheelStop||(this.options.gridOptions.wheelStop=!1),this.options.gridOptions.rowStatusVisible||(this.options.gridOptions.rowStatusVisible=!1),this.options.gridOptions.selectedRowColor||(this.options.gridOptions.selectedRowColor=""),this.options.gridOptions.rowMouseOverColor||(this.options.gridOptions.rowMouseOverColor=""),this.options.gridOptions.tooltipDisplay||(this.options.gridOptions.tooltipDisplay=!1),this.options.gridOptions.tooltipFormatter||(this.options.gridOptions.tooltipFormatter=""),this.options.gridOptions.tooltipShowAlways||(this.options.gridOptions.tooltipShowAlways=!1),this.options.gridOptions.applyAllColumnStyle||(this.options.gridOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridOptions.rowStatusVisible,this.options.wheelStop=this.options.gridOptions.wheelStop,this.options.tooltipDisplay=this.options.gridOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridOptions.initFixedHeightByRowNum=-1;var g="position : absolute;";!this.options.gridOptions.width&&this.options.gridOptions.parentWidth?this.options.width=parseInt(this.options.gridOptions.parentWidth,10):this.options.width=parseInt(this.options.gridOptions.width,10),this.options.height=parseInt(this.options.gridOptions.height,10);try{isNaN(this.options.height)&&(this.options.height=20*this.options.gridOptions.visibleRowNum),isNaN(this.options.width)&&(this.options.width=y.Z.sum(i)+18)}catch(t){h.Y.printStackTrace(t,null,this)}g+=" width : "+this.options.width+"px;",g+=" height : "+this.options.height+"px;",this.options.style=g;var m=[];m.push('<w2:grid xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),m.push('id="'+this.id+'_grid" style="'+this.options.style+'" class="w2gridItemTable_main" readOnly="true" sortable="false" '),
m.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridOptions.visibleRowNum+'" autoFit="'+this.options.gridOptions.autoFit+'" hideHeader="'+this.options.gridOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridOptions.initFixedHeightByRowNum+'" drawType="virtual" wheelStop="'+this.options.gridOptions.wheelStop+'">'),m.push('<w2:header style="height:20px;" id="header">'),m.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)m.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+c[s]+'" id="'+this.id+"_column_header_"+s+'" value="'+(this.options.itemsetObj.items[s].header||"")+'" sortable="false">'),m.push("</w2:column>");m.push("</w2:row>"),m.push("</w2:header>"),m.push('<w2:gBody id="gBody">'),m.push("<w2:row>");for(s=0;s<this.options.itemsetObj.items.length;s++)m.push('<w2:column inputType="text" style="height:20px;" width="'+i[s]+'" textAlign="'+o[s]+'" id="'+this.options.itemsetObj.items[s].id+'" hidden="'+p[s]+'" sortable="false">'),m.push("</w2:column>");m.push("</w2:row>"),m.push("</w2:gBody>"),m.push("</w2:grid>");var f=WebSquare.xml.parse(m.join(""),!0),b=WebSquare.xmljs.xml2json(f).E[0];this.grid=new WebSquare.uiplugin.grid(this.id+"_grid",{},b),this.addControl(this.grid),this.grid.options.isItemTable=!0,this.inputBlurInside=!1}catch(t){h.Y.printStackTrace(t,null,this)}},Wt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+"'>"),t.push(this.grid.toHTML()),t.push("</div>"),t.join("")},Wt.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}})))},Wt.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.itemTableFocus=!0,this.grid.setFocusedCell(t,e)},Wt.prototype.setSelectedIndex=function(t,e){var i=this.grid.getDataLength();if(0!=i){t=t<0?0:t>=i?i-1:t;for(var o=0;o<this.grid._dataList.filteredRowIndexArr.length;o++)if(t==this.grid._dataList.filteredRowIndexArr[o]){t=o;break}var s=this.grid.getVisibleRowNum(),r=t-parseInt(s/2);this.grid.setTopRowIndex(r),e||this.setFocusedCell(t,0)}},Wt.prototype.hide=function(){try{this.inputBlurInside=!1,this.itemTableFocus=!1,WebSquare.style.hide(this.render)}catch(t){h.Y.printStackTrace(t)}};var qt=function(t,e,i){st.q.call(this,t,e,i)};a.q.extend(qt.prototype,st.q.prototype),qt.prototype.defaultOptions={pluginType:"uiplugin.gridViewItemTable",pluginName:"gridViewItemTable"},qt.prototype.addKeyDownEventListener=function(t){this.keyDownFunc=t},qt.prototype.addClickEventListener=function(t){this.clickFunc=t},qt.prototype.initialize=function(t){try{var e=l.I.getConfiguration("/WebSquare/"+this.options.pluginName+"/overrideKey/@value");e&&(this.options.overrideKey=e);var i=[],o=[];this.searchFlag=!1;var s=null;if(this.options.gridViewOptions.dataComp){for(var r=this.options.gridViewOptions.dataComp.cellIdList,a=[],n=0;n<r.length;n++){var d={};d.id=r[n],a.push(d)}var c=this.id+"_searchDataList";0==this.searchFlag&&(WebSquare.api.data.create({id:c,type:"dataList",option:{
baseNode:"vactor",repeatNode:"list",valueAttribute:""},columnInfo:a}),this.searchFlag=!0),(s=y.Z.getComponentById(c)).setData(this.options.gridViewOptions.dataComp.getAllData())}var u=["font-weight","font-size","font-style","background-color","text-decoration","color"];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].style){for(var p=this.options.itemsetObj.items[n].style.split(";"),g=!1,m=!1,f=[],b=0;b<p.length;b++){if("width"==(S=p[b].split(":"))[0].wq_trim())i.push(parseInt(S[1],10)),g=!0;else if("text-align"==S[0].wq_trim())o.push(S[1]),m=!0;else{var v=S[0].wq_trim();u.indexOf(v)>-1&&f.push(p[b])}if(g&&m)break}g||i.push(70),m||o.push("center"),f||(this.options.itemsetObj.items[n].style=f.join(";"))}else i.push(70),o.push("center");var w=[];for(n=0;n<this.options.itemsetObj.items.length;n++)if(this.options.itemsetObj.items[n].headerStyle){for(p=this.options.itemsetObj.items[n].headerStyle.split(";"),f=[],b=0;b<p.length;b++){var S;if("text-align"==(S=p[b].split(":"))[0].wq_trim()){w.push(S[1]);break}v=S[0].wq_trim();u.indexOf(v)>-1&&f.push(p[b])}f||(this.options.itemsetObj.items[n].headerStyle=f.join(";")),b==p.length&&w.push("center")}else w.push("center");var _=[];for(n=0;n<this.options.itemsetObj.items.length;n++){"true"==this.options.itemsetObj.items[n].hidden?_.push("true"):_.push("false")}for(n=0;n<this.options.itemsetObj.items.length;n++)this.options.itemsetObj.items[n].id||(this.options.itemsetObj.items[n].id=this.id+"_column_body_"+n);this.options.gridViewOptions.visibleRowNum||(this.options.gridViewOptions.visibleRowNum=this.options.visibleRowNum),this.options.gridViewOptions.rowNumVisible||(this.options.gridViewOptions.rowNumVisible=!1),this.options.gridViewOptions.wheelStop||(this.options.gridViewOptions.wheelStop=!1),this.options.gridViewOptions.rowStatusVisible||(this.options.gridViewOptions.rowStatusVisible=!1),this.options.gridViewOptions.selectedRowColor||(this.options.gridViewOptions.selectedRowColor=""),this.options.gridViewOptions.rowMouseOverColor||(this.options.gridViewOptions.rowMouseOverColor=""),this.options.gridViewOptions.tooltipDisplay||(this.options.gridViewOptions.tooltipDisplay=!1),this.options.gridViewOptions.tooltipFormatter||(this.options.gridViewOptions.tooltipFormatter=""),this.options.gridViewOptions.tooltipShowAlways||(this.options.gridViewOptions.tooltipShowAlways=!1),this.options.gridViewOptions.applyAllColumnStyle||(this.options.gridViewOptions.applyAllColumnStyle=!0),this.options.rowNumVisible=this.options.gridViewOptions.rowNumVisible,this.options.rowStatusVisible=this.options.gridViewOptions.rowStatusVisible,this.options.wheelStop=this.options.gridViewOptions.wheelStop,this.options.tooltipDisplay=this.options.gridViewOptions.tooltipDisplay,this.options.tooltipFormatter=this.options.gridViewOptions.tooltipFormatter,this.options.tooltipShowAlways=this.options.gridViewOptions.tooltipShowAlways,this.options.applyAllColumnStyle=this.options.gridViewOptions.applyAllColumnStyle,this.options.initFixedHeightByRowNum=this.options.gridViewOptions.initFixedHeightByRowNum=-1;var C="position : absolute;";!this.options.gridViewOptions.width&&this.options.gridViewOptions.parentWidth?this.options.width=this.options.gridViewOptions.parentWidth:this.options.width=this.options.gridViewOptions.width,this.options.height=this.options.gridViewOptions.height;try{isNaN(parseInt(this.options.height,10))&&(this.options.height=20*this.options.gridViewOptions.visibleRowNum),isNaN(parseInt(this.options.width,10))&&(this.options.width=y.Z.sum(i)+18)}catch(t){h.Y.printStackTrace(t,null,this)}this.options.width+="",this.options.height+="",C+=" width : "+(-1!==this.options.width.indexOf("%")?this.options.width+";":parseInt(this.options.width,10)+"px;"),C+=" height : "+(-1!==this.options.height.indexOf("%")?this.options.height+";":parseInt(this.options.height,10)+"px;"),this.options.style=C;var x=[]
;x.push('<w2:gridView xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms" '),x.push('id="'+this.id+'_gridView" style="width:100%; height:100%;" class="w2gridViewItemTable_main" readOnly="false" sortable="false" '),x.push('focusMode="row" enterKeyMove="none" rowStatusVisible="'+this.options.rowStatusVisible+'" rowNumVisible="'+this.options.rowNumVisible+'" rowMouseOver="'+this.options.gridViewOptions.rowMouseOver+'" visibleRowNum="'+this.options.gridViewOptions.visibleRowNum+'" autoFit="'+this.options.gridViewOptions.autoFit+'" hideHeader="'+this.options.gridViewOptions.hideHeader+'" rowMouseOverColor="'+this.options.gridViewOptions.rowMouseOverColor+'" selectedRowColor="'+this.options.gridViewOptions.selectedRowColor+'" tooltipDisplay="'+this.options.gridViewOptions.tooltipDisplay+'" tooltipFormatter="'+this.options.gridViewOptions.tooltipFormatter+'" tooltipShowAlways="'+this.options.gridViewOptions.tooltipShowAlways+'" applyAllColumnStyle="'+this.options.gridViewOptions.applyAllColumnStyle+'" initFixedHeightByRowNum="'+this.options.gridViewOptions.initFixedHeightByRowNum+'" drawType="virtual" wheelStop="'+this.options.gridViewOptions.wheelStop+'">'),x.push('<w2:header style="height:20px;" id="header">'),x.push("<w2:row>");for(n=0;n<this.options.itemsetObj.items.length;n++){var I=' style="height:20px;';(T=this.options.itemsetObj.items[n]).headerStyle&&(I+=this.options.itemsetObj.items[n].headerStyle),x.push('<w2:column inputType="text"'+I+'" width="'+i[n]+'" textAlign="'+w[n]+'" id="'+this.id+"_column_header_"+n+'" value="'+(this.options.itemsetObj.items[n].header||"")+'">'),x.push("</w2:column>")}x.push("</w2:row>"),x.push("</w2:header>"),x.push('<w2:gBody id="gBody">'),x.push("<w2:row>");for(n=0;n<this.options.itemsetObj.items.length;n++){var T,k="text",L="",A="";(T=this.options.itemsetObj.items[n]).inputType&&(k=T.inputType),T.depthColumn&&(L='" depthColumn = "'+T.depthColumn),T.showDepth&&(A='" showDepth = "'+T.showDepth);var D=parseInt(this.options.gridViewOptions.checkColumn)===n&&"checkbox"===k?"false":"true";x.push('<w2:column inputType = "'+k+L+A+'" style="height:20px;'+this.options.itemsetObj.items[n].style+'" width="'+i[n]+'" textAlign="'+o[n]+'" id="'+this.options.itemsetObj.items[n].ref+'" hidden="'+_[n]+'" readOnly="'+D+'" sortable="false">'),x.push("</w2:column>")}x.push("</w2:row>"),x.push("</w2:gBody>"),x.push("</w2:gridView>");var W=WebSquare.xml.parse(x.join(""),!0);this.gridView=new WebSquare.uiplugin.gridView(this.id+"_gridView",{dataList:null==s?"":s.id},new WebSquare.Elem(W.firstChild)),this.gridView.options.isItemTable=!0,this.addControl(this.gridView),this.inputBlurInside=!1,this._keyBuffer="",this.keyCharHash={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",110:".",111:"/",106:"*",107:"+",109:"-",187:"=",189:"-",192:"`","220 ":"\\"},this.korCharHash={65:"",67:"",68:"",69:"",70:"",71:"",81:"",82:"",83:"",84:"",86:"",87:"",88:"",90:""},this.korCharHash2={69:"",81:"",82:"",84:"",87:""},this.myhelper=new WebSquare.korHelper}catch(t){h.Y.printStackTrace(t,null,this)}},qt.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' aria-expanded='true' "+e+" class='w2gridItemTable "+this.options.className+" "+this.options.w2table+"'>"),1==this.options.navBtn?(t.push("<div id='"+this.id+"_wrapper' aria-expanded='true' "+e+"' tabIndex='0'>"),t.push(this.gridView.toHTML()),t.push("</div>"),t.push("<div id='"+this.id+"_btn_div' style='' class='w2checkcombobox_btn_div'>"),t.push("</div>")):t.push(this.gridView.toHTML()),
t.push("</div>"),t.join("")},qt.prototype.setAction=function(){this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),this.event.addListener(this.render,"onmousewheel",this.event.bindAsEventListener(this,(function(t){try{O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),y.Z.isTouchDevice()&&this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,(function(t){try{this.inputBlurInside=!0,O.f.stopPropagation(t)}catch(t){h.Y.printStackTrace(t)}}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent))},qt.prototype.setFocusedCell=function(t,e){this.inputBlurInside=!0,this.options.findItemFirstKey,this.gridView.setFocusedCell(t,e)},qt.prototype.setSelectedIndex=function(t,e){var i=this.gridView.getDataLength();if(0!=i){this.gridView.getVisibleRowNum();e||this.setFocusedCell(t,this.options.gridViewOptions.label)}},qt.prototype.getSelectedIndex=function(){try{return this.gridView.getFocusedRowIndex()}catch(t){h.Y.printStackTrace(t)}},qt.prototype.hide=function(){try{this.inputBlurInside=!1,WebSquare.style.hide(this.render)}catch(t){h.Y.printStackTrace(t)}},qt.prototype.finalize=function(){try{this.gridView&&this.gridView._dataList&&WebSquare.DataCollection.api.remove(this.gridView._dataList.id)}catch(t){h.Y.printStackTrace(t)}},qt.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.getSelectedIndex();i=parseInt(i);var o=this.gridView.getRowCount(),s=i;if(38==e){var r=!1;for(s>0?0!=--s||this.gridView.getRowVisible(s)||(s--,r=!0):r=!0;s>0&&!this.gridView.getRowVisible(s);)s--;s>=0&&this.setSelectedIndex(s),this._keyIndex=r?-1:s,this._directionKeyPressed=!0}else if(40==e){var a=this.getItemCount();r=!1;for(s+1<o?++s+1!=a||this.gridView.getRowVisible(s)||(s++,r=!0):r=!0;s+1<o&&!this.gridView.getRowVisible(s);)s++;s<o&&(this.gridView.getRowVisible(s)?this.setSelectedIndex(s):s++),this._keyIndex=r?a:s,this._directionKeyPressed=!0}else if(32==e){if(this.options.checkbox)document.getElementById(this.id+"_"+i+"_checkbox").click()}else if(33==e){(s=i-this.rowCount)<0&&(s=0),this.setSelectedIndex(s),this._directionKeyPressed=!0}else if(34==e){(s=i+this.rowCount)>=o&&(s=o-1),this.setSelectedIndex(s),this._directionKeyPressed=!0}else 35==e?(this.setSelectedIndex(o-1),this._directionKeyPressed=!0):36==e?(this.setSelectedIndex(0),this._directionKeyPressed=!0):13==e?this._directionKeyPressed=!1:9==e?"ul"==this.options.tableRender&&(t.shiftKey?i>0?this.setSelectedIndex(i-1):this.endReached=!0:document.activeElement==this.render?this.setSelectedIndex(0):i+1<o?this.setSelectedIndex(i+1):this.endReached=!0):(this.findItemStartedWithKeyChar(t,e,i),this.options.findItem&&this._keyBuffer&&(y.Z.clearTimeout(this.id+"_selectKeyBuffer"),y.Z.setTimeout((function(){this._keyBuffer=""}),{key:this.id+"_selectKeyBuffer",caller:this,delay:this.options.keyBufferResetTime})));this.render.setAttribute("aria-activedescendant",this.id+"_"+this.getSelectedIndex()),this.keyDownFunc&&this.keyDownFunc(t),O.f.stopEvent(t)}catch(t){h.Y.printStackTrace(t)}},qt.prototype.fireClick=function(t){try{var e,i=this.gridView.getLastFocusedCell();i&&(e=i.focusedRowIndex),this.clickFunc.call(this,t,e)}catch(t){h.Y.printStackTrace(t)}},qt.prototype.findItemStartedWithKeyChar=function(t,e,i){try{var o=this.keyCharHash[e],s=-1;if(o){var r=this.gridView.getLastFocusedCell(),a=r?r.focusedRowIndex:-1;this.options.findItem&&(a=0);var n=this.korCharHash[e],l=this.korCharHash2[e],d=1;this.options.findItem?this._keyBuffer+=o:(this._keyBuffer=o,a++);for(var c=this.gridView.getRowCount();;)if(a%=c,!1!==this.gridView.getRowVisible(a))if(0!=a||!0!==this.options.chooseOption&&!0!==this.options.allOption)if(0!=a&&1!=a||!0!==this.options.chooseOption||!0!==this.options.allOption){
var u=this.options.gridViewOptions.label,p=this.gridView.getCellData(a,u).toLowerCase(),g=!1;n&&!t.shiftKey?g=this.myhelper.startWith(p,n):l&&t.shiftKey&&(g=this.myhelper.startWith(p,l));var m=this.options.findItem?this._keyBuffer:o;if(p.startsWith(m)||g&&y.Z.getBoolean(this.options.findItemKor)){s=a;break}if(p.startsWith(m)){this._keyBuffer="",s=a;break}if(d>c)break;a++,d++}else{if(c<=2)break;a++}else{if(c<=1)break;a++}else a++;s>-1?this.setSelectedIndex(s):this._keyBuffer=""}}catch(t){h.Y.printStackTrace(t)}},qt.prototype.getItemCount=function(){return this.gridView.getRowCount()},qt.prototype._focus=function(){try{var t=WebSquare.idCache[this.options.parent_uuid];if(t&&"autoComplete"===t._wTagName)if(t._parentGridUUID)WebSquare.idCache[t._parentGridUUID]._setFocusedCell();else t.focus()}catch(t){h.Y.printStackTrace(t)}};var Mt=__webpack_require__(7610),Et=__webpack_require__(1018),Rt=__webpack_require__(5600),Nt=function(t,e,i){i=i||{};this.displayFormat="yyyyMMdd",this.dayStrArr=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this.monthDays=[31,28,31,30,31,30,31,31,30,31,30,31],this.year=null,this.month=null,this.date=null,this.day=null,this.hour=null,this.minute=null,this.second=null,this.useUnlimitedYear=i.useUnlimitedYear,this.maxYear=i.maxYear,this.setToday(t,e)};Nt.prototype.setToday=function(t,e,i){var o,s;i=i||{};if(t&&1==t)if(o="everyTime"===i.serverSyncType?this.getServerDate():this._getServerDate(e)){var r="",a="",n="";8==o.length&&(r=o.substr(0,4),a=o.substr(4,2),n=o.substr(6,2)),s=new Date(parseInt(r),parseInt(a,10)-1,parseInt(n,10))}else s=new Date;else s=new Date;this.year=s.getFullYear(),this.month=s.getMonth()+1,this.date=s.getDate(),this.hour=s.getHours(),this.minute=s.getMinutes(),this.second=s.getSeconds()},Nt.prototype.setYear=function(t){this.year=parseInt(t)},Nt.prototype.setMonth=function(t){this.month=parseInt(t)},Nt.prototype.setDate=function(t){this.date=parseInt(t)},Nt.prototype.setDateAll=function(t,e,i,o,s,r){if(t&&this.setYear(t),t&&e)if(o){s=s||0;var a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),r&&(a=new Date(parseInt(t),parseInt(e)-1,parseInt(i),parseInt(o),parseInt(s),parseInt(r)),this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate(),this.hour=a.getHours(),this.minute=a.getMinutes(),this.second=a.getSeconds())}else if(i){a=new Date(parseInt(t),parseInt(e)-1,parseInt(i));this.year=a.getFullYear(),this.month=a.getMonth()+1,this.date=a.getDate()}else{a=new Date(parseInt(t),parseInt(e)-1);this.year=a.getFullYear(),this.month=a.getMonth()+1}},Nt.prototype.setDateAllByString=function(t){if(t&&8==t.length){var e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),this.setDateAll(e,s,r)}else if(t&&12==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1)),this.setDateAll(e,s,r,a,i)}else if(t&&6==t.length){e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),this.setDateAll(e,s)}else if(t&&14==t.length){var i;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),"0"==(i=t.substr(10,2)).charAt(0)&&(i=i.charAt(1));var o=t.substr(12,2);"0"==o.charAt(0)&&(o=o.charAt(1)),this.setDateAll(e,s,r,a,i,o)}else if(t&&10==t.length){var s,r,a;e=t.substr(0,4);"0"==(s=t.substr(4,2)).charAt(0)&&(s=s.charAt(1)),"0"==(r=t.substr(6,2)).charAt(0)&&(r=r.charAt(1)),"0"==(a=t.substr(8,2)).charAt(0)&&(a=a.charAt(1)),this.setDateAll(e,s,r,a)}else t&&4==t.length&&this.setYear(t)},Nt.prototype.getYear=function(){return this.year},Nt.prototype.getMonth=function(){return this.month
},Nt.prototype.getDate=function(){return this.date},Nt.prototype.getHour=function(){return this.hour},Nt.prototype.getMinute=function(){return this.minute},Nt.prototype.getSecond=function(){return this.second},Nt.prototype.getDateAll=function(){var t=this.year+"",e=this.month+"",i=this.date+"";return 1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),t+e+i},Nt.prototype.getFormatDateAll=function(t){var e="";e=t&&""!=t?t:this.displayFormat;var i=this.getDateAll();return i=WebSquare.text.formatDate(i,e)},Nt.prototype.getDay=function(){var t=new Date(parseInt(this.year),parseInt(this.month)-1,parseInt(this.date));return this.day=t.getDay(),this.day},Nt.prototype.getDayStr=function(t,e){return(e=e||this.dayStrArr)[t]?e[t]:""},Nt.prototype.getMonthCount=function(t,e){t=t||this.getYear(),e=e||this.getMonth();return this.setLeapYear(t),this.monthDays[e-1]},Nt.prototype.getFirstDay=function(){var t=new WebSquare.uiplugin.dateHelper;return t.setDateAll(this.getYear(),this.getMonth(),1),t.getDay()},Nt.prototype.getFirstDayStr=function(t){var e=new WebSquare.uiplugin.dateHelper;return e.setDateAll(this.getYear(),this.getMonth(),1),e.getDayStr(t)},Nt.prototype.setLeapYear=function(t){this.monthDays[1]=(t%4||!(t%100))&&t%400?28:29},Nt.prototype.getLeapYear=function(t){return!(t%4)&&t%100||!(t%400)},Nt.prototype.equals=function(t){return this.getYear()==t.getYear()&&this.getMonth()==t.getMonth()&&this.getDate()==t.getDate()},Nt.prototype.setNextYear=function(){var t=this.getYear();this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this._checkValidDate()},Nt.prototype.setLastYear=function(){var t=this.getYear();this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),this._checkValidDate()},Nt.prototype.setNextMonth=function(){var t=this.getYear(),e=this.getMonth();e<12?this.setMonth(e+1):(this.useUnlimitedYear&&t==this.maxYear?this.setYear("9999"):this.setYear(t+1),this.setMonth(1)),this._checkValidDate()},Nt.prototype.setLastMonth=function(){var t=this.getYear(),e=this.getMonth();e>1?this.setMonth(e-1):(this.useUnlimitedYear&&"9999"==t?this.setYear(this.maxYear):this.setYear(t-1),this.setMonth(12)),this._checkValidDate()},Nt.prototype._checkValidDate=function(){var t=this.getDate(),e=this.getMonthCount();t>e&&this.setDate(e)},Nt.prototype.getServerDate=function(t){return WebSquare.date.getCurrentServerDate(t)},Nt.prototype._getServerDate=function(t){try{var e,i="";return t||(t="wq_main"),null==WebSquare.uiplugin.dateHelper._currentDate?WebSquare.uiplugin.dateHelper._currentDate={}:e=WebSquare.uiplugin.dateHelper._currentDate[t],"string"==typeof e&&8===e.length?i=WebSquare.uiplugin.dateHelper._currentDate[t]:(i=this.getServerDate(),WebSquare.uiplugin.dateHelper._currentDate[t]=i),i}catch(t){h.Y.printStackTrace(t,null,this)}};var Ft=__webpack_require__(2280),Ot=__webpack_require__(4058),Bt=__webpack_require__(6416),Pt=__webpack_require__(4722),Yt=__webpack_require__(3312),Vt=__webpack_require__(4984),Ht=__webpack_require__(554),jt=__webpack_require__(4090),zt=__webpack_require__(6050),Gt=__webpack_require__(7867),Zt=__webpack_require__(3050),Ut=__webpack_require__(4228),Xt=__webpack_require__(8862),Kt=__webpack_require__(3938),$t=__webpack_require__(152),Jt=__webpack_require__(5254),Qt=__webpack_require__(6442),te=__webpack_require__(8824),ee=__webpack_require__(1966),ie=__webpack_require__(9906),oe=__webpack_require__(5700),se=__webpack_require__(1498),re=function(t,e,i){if(this.parentControl=null,this.childControlList=[],this.element=i,this.options={},1==i.nodeType){this.id=i.getAttribute("id"),this.uuid=WebSquare.UUIDPrefix+"_"+WebSquare.UUID++,this.id||(this.element._element.A||(this.element._element.A={}),this.element.setAttribute("id",this.uuid),this.id=this.uuid,this.options.id=this.uuid),WebSquare.idCache[this.uuid]=this,WebSquare.idToUUID[this.id]=this.uuid;var o=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/parseHtml/@value")||"true")
;this.options.parseChild="w2:tag"==this.element.getTagName()||o}this.refreshAdaptive=se.A.prototype.refreshAdaptive};a.q.extend(re.prototype,oe.A.prototype),re.idCounter=0,re.prototype.toHTML=function(){var t=this.element.getTagName(),e=l.I.getEmptyTag(),i=null;if("w2:tag"==t?i=this.setTag():"td"==t&&this.setTd(),this.options.parseChild&&!e[t.toLowerCase()]){var o,s=this.element.getAttributes();if(1==this.element.nodeType)if("w2:tag"!=t){for(var r="<"+t,a=0;a<s.length;a++)r+=" "+s[a]+"='"+this.element.getAttribute(s[a])+"'";r+=">"}else r=i,t=this.element.getAttribute("tagname")||"div";o="</"+t+">";var n=[r];if(0==r.toLowerCase().wq_trim().indexOf("<script ")){var h=this.setScript();0!=h&&n.push(h)}else{var d=this.getChildren();for(a=0;a<d.length;a++)n.push(d[a].toHTML())}return n.push(o),n.join("")}s=this.element.getAttributes();i="<"+t+" xmlns='"+l.I._XML_NAMESPACE.XHTML+"' ";for(a=0;a<s.length;a++)i+=s[a]+"="+this.element.getAttribute(s[a])+" ";return i+="/>",this.options.parseChild&&(i.endsWith("/>")||((i=i.substring(0,i.indexOf(">"))).endsWith(" ")?i+="/>":i+=" />")),3==this.element.nodeType?this.element.getNodeValue():i},re.prototype.setTag=function(){try{var t=null,e=this.element.getAttribute("tagname")||"div";if(this.element.getAttribute("tagname")){this.element.removeAttribute("tagname");var i=this.element.getAttributes();t="<"+e+" xmlns:w2='"+l.I._XML_NAMESPACE.W2+"' ";for(var o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' ";this.element.setAttribute("tagname",e)}else{i=this.element.getAttributes();t="<div xmlns:w2='"+l.I._XML_NAMESPACE.W2+"' ";for(o=0;o<i.length;o++)t+=i[o]+"='"+this.element.getAttribute(i[o])+"' "}return t+=">",this.options.parseChild&&!this.id&&(this.id="w2tag_"+re.idCounter++,this.element.setAttribute("id",this.id)),t}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.setScript=function(){try{var t=this.getParentNode(),e=t&&t.getTagName()||"";if(!(e.indexOf("xf")<0&&e.indexOf("w2")<0))return!1;var i=this.element.getChildNodes()[0]||{};if(3===i.nodeType||4===i.nodeType){var o=i.getNodeValue(),s=WebSquare.idCache[this.parentFrame];return o=s?y.Z.scopingFuncBody(o,s.id,!0):y.Z.scopingFuncBody(o,null,!0),"executed"===WebSquare.scriptSectionExcuteFlag||"preExecuted"===WebSquare.scriptSectionExcuteFlag?WebSquare.BootLoader.globalEval(o):WebSquare.scriptSection+=";"+o,o}}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.setTd=function(){try{for(var t=this.element.getAttribute("id"),e=this.getSiblingNodes(),i=null,o=0;o<e.length;o++)e[o].getAttribute("id")==t&&(i=o-1);var s=null;i>-1?"th"==e[i].getTagName()&&null!=e[i]._element.E&&(s=e[i].getChildNodes()[0]):i+=1,null!=s&&s.getTagName;var r=(null==s?e[i].getNodeValue():"w2:textbox"==s.getTagName()?s.getAttribute("label"):s.getNodeValue())||"";this.element.setAttribute("data-title",r)}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.activate=function(){if(this.options.parseChild){for(var t=this.getChildren(),e=0;e<t.length;e++)t[e].activate();if("td"==this.element.getTagName()){var i=this.element.getAttribute("id"),o=this.getSiblingNodes(),s=null;for(e=0;e<o.length;e++)if(o[e].getAttribute("id")==i){s=e-1;break}s>-1?"th"!=o[s].getLocalName()&&this.addClass(" w2tb_noTH"):this.addClass(" w2tb_noTH")}}},re.prototype.setAction=function(){},re.prototype.remove=function(){try{for(var t in this.destroy(),WebSquare.removeNode(this.render),window[this.id]&&(window[this.id]=null),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);for(var t in this)delete this[t]}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.setAdaptive=function(){try{var t=WebSquare.BootLoader.fullViewed||!1,e=y.Z.fullViewed||!1;if(!t&&!e){var i=parseInt(this.element.getAttribute("adaptiveThreshold"))||480;y.Z.isIE()&&parseInt(l.I.browserVersion(),10)<10||(y.Z._getBrowserWidth()<=i?this.addAdaptive():this.removeAdaptive())}}catch(t){h.Y.printStackTrace(t)}},
re.prototype.addAdaptive=function(){try{if(!(y.Z.isIE()&&parseInt(l.I.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.addClass(t),this.removeAdaptiveHeight(e),this.setAdaptiveHeight(e)}}catch(t){h.Y.printStackTrace(t)}},re.prototype.removeAdaptive=function(){try{if(!(y.Z.isIE()&&parseInt(l.I.browserVersion(),10)<10)){var t,e=this.element.getAttribute("adaptive");"layout"==e?t=" w2tb_adaptive_layout":"crosstab"==e&&(t=" w2tb_adaptive_crosstab"),this.removeClass(t),this.removeAdaptiveHeight(e)}}catch(t){h.Y.printStackTrace(t)}},re.prototype.addClass=function(t){try{for(var e=document.getElementById(this.id).className.wq_trim(),i=e.split(" "),o=0;o<i.length;o++){if((" "+i[o].wq_trim()+" ").indexOf(t)>-1&&o==i.length-1)return}i.length>1&&(e+=" "),e+=t,document.getElementById(this.id).className=e}catch(t){h.Y.printStackTrace(t)}},re.prototype.removeClass=function(t){try{for(var e=document.getElementById(this.id).className.split(" "),i=[],o=0;o<e.length;o++){var s=e[o].wq_trim();(" "+s+" ").indexOf(t)>-1||s.length>0&&i.push(s)}document.getElementById(this.id).className=i.join(" ")}catch(t){h.Y.printStackTrace(t)}},re.prototype.setDisabled=function(t){for(var e=0;e<this.childControlList.length;e++){var i=this.childControlList[e];i&&WebSquare.idCache[i.uuid]&&"function"==typeof i.setDisabled&&i.setDisabled(t)}},re.prototype.finalize=function(){},re.prototype.setAdaptiveHeight=function(t){try{if("crosstab"==t)for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByTagName("tbody")[0].getElementsByClassName("w2tb_tr"),o=document.getElementById(e[0].id),s=parseInt(WebSquare.style.getStyle(o,"padding-top")),r=parseInt(WebSquare.style.getStyle(o,"padding-bottom")),a=document.getElementById(document.getElementById(this.id).getElementsByClassName("w2tb_td")[0].id),n=parseInt(WebSquare.style.getStyle(a,"padding-top")),l=parseInt(WebSquare.style.getStyle(a,"padding-bottom")),d=0;d<e.length;d++){for(var c=e[d].offsetHeight,u=0,p=0;p<i.length;p++)for(var g=i[p].getElementsByClassName("w2tb_td"),m=0;m<g.length;m++){var f=g[d].offsetHeight;u=u>=f?u:f}if(c>u)for(var b=0;b<i.length;b++){g=i[b].getElementsByClassName("w2tb_td");document.getElementById(g[d].id).style.height=c-(n+l+1)+"px"}else if(c<u){document.getElementById(e[d].id).style.height=u-(s+r+1)+"px";for(b=0;b<i.length;b++){g=i[b].getElementsByClassName("w2tb_td");document.getElementById(g[d].id).style.height=u-(s+r+1)+"px"}}}else if("layout"==t)for(g=document.getElementById(this.id).getElementsByClassName("w2tb_td"),d=0;d<g.length;d++){var v=g[d].getAttribute("data-title");if(v){var w=y.Z.getRulerSpan();w.style.padding=window.getComputedStyle(g[d],":before").getPropertyValue("padding"),w.style.width=window.getComputedStyle(g[d],":before").getPropertyValue("width"),w.style["white-space"]=window.getComputedStyle(g[d],":before").getPropertyValue("white-space"),w.style["font-weight"]=window.getComputedStyle(g[d],":before").getPropertyValue("font-weight"),w.innerHTML=v,w.offsetHeight>g[d].offsetHeight&&(g[d].style.height=w.offsetHeight+"px"),w.style.top="-10000px",w.style.left="-10000px",w.style.visibility="hidden"}}}catch(t){h.Y.printStackTrace(t)}},re.prototype.removeAdaptiveHeight=function(t){try{if("crosstab"==t){for(var e=document.getElementById(this.id).getElementsByClassName("w2tb_th"),i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<e.length;o++)e[o].style.removeProperty("height");for(var s=0;s<i.length;s++)i[s].style.removeProperty("height")}else if("layout"==t)for(i=document.getElementById(this.id).getElementsByClassName("w2tb_td"),o=0;o<i.length;o++)i[o].style.removeProperty("height")}catch(t){h.Y.printStackTrace(t)}},re.prototype.onComplete=function(){if(this.completed)$l("!!!WARNING!!! duplicate call 'onComplete' for : "+this.id);else{var t=this.childControlList
;"wframe"!==this.options.pluginName&&"pageFrame"!==this.options.pluginName&&"pageInherit"!==this.options.pluginName&&"udc2"!==this.options.pluginName||null==t[0]||(t=[]);for(var e=0;e<t.length;e++)t[e].completed||"function"!=typeof t[e].onComplete||t[e].onComplete();if(this.completed=!0,!(y.Z.isIE()&&parseInt(l.I.browserVersion(),10)<10)&&3!==this.element.nodeType){var i=this.element.getAttribute("adaptive");if("crosstab"==i||"layout"==i){var o=document.getElementById(this.id).getElementsByTagName("tr");for(e=0;e<o.length;e++){var s=o[e].className;-1==s.indexOf("w2selectbox_row")&&-1==s.indexOf("w2checkcombobox_row")&&-1==s.indexOf("w2tb_tr")&&(o[e].className=s+" w2tb_tr")}var r=WebSquare.BootLoader.fullViewed||!1,a=y.Z.fullViewed||!1;r||a||(this.setAdaptive(),O.f.addListener(window,"onresize",O.f.bindAsEventListener(this,this.setAdaptive)));var n=document.getElementById(this.id).getElementsByClassName("w2inputCalendar_div");for(e=0;e<n.length;e++){var h=n[e].id;y.Z.getComponentById(h).setSetting()}}}}},re.prototype._clone=function(t){try{var e=y.Z.getDataPrefix("g_index"),i=y.Z._copyOptions(this.options);3!==t.nodeType&&(i.id=t.getAttribute("id")||null,i[e]=t.getAttribute(e)),t.constructor===WebSquare.Elem&&t._element&&(t=t._element);var o=WebSquare.controlFactory.create(null,i,t,this.scope_obj,this.parentFrame,!1);return o.attributes=this.attributes,o.getAttributeNode=this.getAttributeNode,o.setAttributeNode=this.setAttributeNode,o.removeAttributeNode=this.removeAttributeNode,o}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype._cloneRecursive=function(t){try{if(!t&&!this.element)return;return this._clone(t||this.element)}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.getParentNode=function(){try{if(this.parentControl&&this.parentControl.element&&this.parentControl.element.constructor===WebSquare.Elem)return this.parentControl.element}catch(t){h.Y.printStackTrace(t,null,this)}},re.prototype.getSiblingNodes=function(){try{var t=[],e=this.getParentNode();return e&&(t=e.getChildNodes()),t}catch(t){h.Y.printStackTrace(t,null,this)}};var ae=__webpack_require__(6138),ne=__webpack_require__(40),le=__webpack_require__(2874),he=__webpack_require__(434),de=__webpack_require__(8538),ce=__webpack_require__(7838),ue=__webpack_require__(4142),pe=function(t,e,i){this.id=t,this.options=e,this.element=i};a.q.extend(pe.prototype,st.q.prototype),pe.prototype._initImport=function(){var t=a.q.UUIDPrefix,e=a.q.UUID;a.q.UUIDPrefix="wq_popup",st.q.call(this,this.id,this.options,this.element),a.q.UUIDPrefix=t,a.q.UUID=e},a.q._initImportList.push("uiplugin.popup"),pe.prototype.defaultOptions={pluginType:"uiplugin.popup",pluginName:"popup",useConfig:!0,popupName:""},pe.prototype.initialize=function(t){try{this.popupList=[],this.popupParams={},this._zIndex=-1,this._status="idle"}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.toHTML=function(){try{return""}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.setAction=function(){},pe.prototype.createPopup=function(t,e,i,o,s,r,a,n,l,d,c,u,p,g,m,f,b){try{this.openPopup(a,{id:t,type:e,popupName:i,style:o,useIFrame:s,modal:r,srcORurl:a,srcData:n,destData:l,xml:d,popupUrl:c||"popup.html",dataObject:u,frameMode:p||"iframe",useATagBtn:g,disableCloseButton:m,alwaysOnTop:f,fixPosition:b})}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.openPopup=function(t,e,i,o){try{"iframePopup"==e.type?(e.type="litewindow",e.frameMode="iframe"):"wframePopup"==e.type?(e.type="litewindow",e.frameMode="wframe"):"browserPopup"==e.type?e.type="browser":"pageFramePopup"==e.type&&(e.type="litewindow",e.frameMode="pageFrame"),e.id&&e.scope_uuid&&WebSquare.idCache[e.scope_uuid]&&(e.org_id=e.id,e.id=WebSquare.idCache[e.scope_uuid].id+"_"+e.org_id);var s=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/popup/denyConflictPopupId/@value"));if(e.useIFrame+""=="true"&&"browser"!=e.type||!0===s&&"litewindow"==e.type){if(window[e.id])return;window[e.id]=e.id}
if("iframe"!==e.frameMode||WebSquare.uiplugin.iframe)this._openPopupAfter(t,e,i,o);else requires("uiplugin.iframe").then(function(t,e,i,o,s){return function(r,a){t._openPopupAfter(e,i,o,s)}}(this,t,e,i,o))}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype._openPopupAfter=function(t,e,i,o){try{var s=new WebSquare.uiplugin.popupWindow(e.id,e,i);t=WebSquare.BootLoader._getEncodeURL(t),s.open(t,o),this.startChkModalClosed(),y.Z.setInterval(this.startChkModalClosed,{key:this.id+"_startChkModalClosed",caller:this,delay:500})}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getPopupParam=function(){try{var t=WebSquare.net.getParameter("popupID"),e=l.I._getParentObj();if(e&&e.WebSquare.dataObject[t]){var i=e.WebSquare.dataObject[t].name;if(WebSquare.userData[i])return l.I.isXML(WebSquare.userData[i])?WebSquare.xml.serialize(WebSquare.userData[i]):JSON.stringify(WebSquare.userData[i])}else if(null!=WebSquare.net.getParameter("idx")&&""!=WebSquare.net.getParameter("idx")){var o=WebSquare.net.getParameter("idx");return e.WebSquare.uiplugin.popup.popupParams[o]}return null}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.callClose=function(t,e){try{for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t&&!1!==this.popupList[i].close(e)){if("browser"===this.popupList[i].options.type){var o=WebSquare.idCache[this.popupList[i]._parentFrameUUID];o?o.hideFrameModal(this.popupList[i].id):WebSquare.getBody().hideModal(!1,this.popupList[i].id)}this._deletePopup(i)}}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.removeFromPopupList=function(t){try{for(var e=0;e<this.popupList.length;e++)this.popupList[e]&&this.popupList[e].id==t&&this._deletePopup(e)}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.startChkModalClosed=function(){try{for(var t=!1,e=0;e<this.popupList.length;e++)if(this.popupList[e]&&(t=!0),this.popupList[e]&&this.popupList[e].popupWin&&this.popupList[e].popupWin.closed){if(this.popupList[e]._parentFrameUUID&&this.popupList[e]._parentFrameUUID!==(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")){var i=WebSquare.idCache[this.popupList[e]._parentFrameUUID];if(i&&i.hideFrameModal(this.popupList[e].id),this.popupList[e].useWindowPopup()){var o=WebSquare.idCache[this.popupList[e].options.scope_uuid];if(o&&o.popupList)for(var s=0;s<o.popupList.length;s++)o.popupList[s].id===this.popupList[e].id&&o.popupList.splice(s)}}else this.popupList[e].options.useModalStack?WebSquare.getBody().hideModal(!1,this.popupList[e].id):1==this.popupList[e].options.modal&&WebSquare.getBody().hideModal(!1);this._deletePopup(e)}!1===t&&y.Z.clearInterval(this.id+"_startChkModalClosed")}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getPopupWindow=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopupWindow(WebSquare.idCache[e].id+"_"+t)||this.getPopupWindow(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t&&null!=this.popupList[i].popupWin)return this.popupList[i].getWindow()}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getPopupWindowList=function(t,e,i){try{var o=this.getPopupList(t,e);return this._getWindowArr(o,i)}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getPopup=function(t,e){try{if(e&&WebSquare.idCache[e])return this.getPopup(WebSquare.idCache[e].id+"_"+t)||this.getPopup(t);for(var i=0;i<this.popupList.length;i++)if(this.popupList[i]&&this.popupList[i].id==t)return this.popupList[i]}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype._deletePopup=function(t){try{var e=this.popupList[t]._idx;if(e&&(delete this.popupList[t]._idx,l.I.setTimer((function(t){delete WebSquare.uiplugin.popup.popupParams[e]}),{key:"_deletePopup_"+e,delay:1e3,args:[e]})),this.popupList[t].useWindowPopup()){var i=WebSquare.idCache[this.popupList[t].options.scope_uuid];if(i&&i.popupList)for(var o=i.popupList.length-1;o>=0;o--)i.popupList[o].id===this.popupList[t].id&&i.popupList.splice(o,1)}
this.popupList.splice(t,1)}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getPopupList=function(t,e){try{var i=[];if(e&&WebSquare.idCache[e]){for(var o=WebSquare.idCache[e].id,s=0;s<this.popupList.length;s++){var r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid);this.popupList[s]&&null!=r&&(!0===t?(this.popupList[s].options.frameModal||a)&&(i.push(this.popupList[s]),r.opener&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))):o===r.scope_id&&i.push(this.popupList[s]))}return i}for(s=0;s<this.popupList.length;s++){r=this.popupList[s].popupWin,a=this.popupList[s]._getTargetFrame(this.popupList[s].options.scope_uuid);if(this.popupList[s]&&null!=r)if(!0===t){if(this.popupList[s].options.frameModal||a){i.push(this.popupList[s]);try{r.opener&&r.WebSquare&&r.WebSquare.uiplugin&&r.WebSquare.uiplugin.popup&&(i=i.concat(r.WebSquare.uiplugin.popup.getPopupList()))}catch(t){continue}}}else i.push(this.popupList[s])}return i}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getAllPopupList=function(){try{return this.popupList}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype.getAllPopupWindowList=function(t){try{var e=this.getAllPopupList();return this._getWindowArr(e,t)}catch(t){h.Y.printStackTrace(t,null,this)}},pe.prototype._getWindowArr=function(t,e){try{for(var i=[],o=0;o<t.length;o++){var s=t[o].getWindow();!0!==e||t[o].popupWin&&t[o].popupWin.frame&&(t[o].popupWin.frame.constructor===WebSquare.uiplugin.wframe||t[o].popupWin.frame.constructor===WebSquare.uiplugin.pageFrame)?i.push(s):s.WebSquare&&s.WebSquare.util?i.push(s.WebSquare.util.getMainFrame()):i.push(s)}return i}catch(t){h.Y.printStackTrace(t,null,this)}},pe=new pe("w2popup_singleton");var ge=function(t,e,i){try{this.id=t,this.popupWin=null,y.Z.getBoolean(l.I.getConfiguration("/WebSquare/popup/popupCenter/@value"))&&e&&null==e.top&&null==e.left&&(this._popupCenter=!0),this.options=a.q.extendKeepingType({id:"pop1",type:"browser",popupName:"WebSquarePopup",style:"",useIFrame:!1,className:"",modal:!1,srcORurl:"",srcData:null,destData:null,xml:null,popupUrl:"popup.html",left:100,top:100,width:500,height:500,resizable:!1,status:!1,menubar:!1,scrollbars:!1,title:!1,useControl:!1,controls:{minimize:!0,maximize:!0,close:!0},frameMode:"iframe",disableCloseButton:!1,fullscreen:!1,alwaysOnTop:!0,foldSize:{width:500},windowDragMove:!1,windowMoveType:"restrict",processMsgFrame:!1,msaName:"",fixPosition:!1,useATagBtn:!1,useModalDisable:!1,useMaximize:!0,useModalStack:!1,accessibility:!1,useHeadingTagTitle:!1,scopeInherit:"",resizeEvent:!1,adaptiveFrame:!1},e||{}),this.options.scope_uuid&&WebSquare.idCache[this.options.scope_uuid]&&(this.options.org_id?this.org_id=this.options.org_id:(this.org_id=this.id,this.id=this.options.id=WebSquare.idCache[this.options.scope_uuid].id+"_"+this.org_id)),this.params=i||{},""!=this.options.style&&(this.options.styleObj=l.I.makeStyle(this.options.style),this.options.left=this.options.styleObj.left||"0px",this.options.top=this.options.styleObj.top||"0px",this.options.width=this.options.styleObj.width||"500px",this.options.height=this.options.styleObj.height||"500px"),this.options.dataObject&&"wframe"!==this.options.frameMode&&"pageFrame"!==this.options.frameMode&&(WebSquare.dataObject[this.id]=this.options.dataObject),this.options.srcData&&(WebSquare.srcData=this.options.srcData),this.options.destData&&(WebSquare.destData=this.options.destData),WebSquare.docTitleInfo||(WebSquare.docTitleInfo={}),"WebSquarePopup"!=this.options.popupName?WebSquare.docTitleInfo[this.options.id]=this.options.popupName:WebSquare.uiplugin.popup.options.title?WebSquare.docTitleInfo[this.options.id]=WebSquare.uiplugin.popup.options.title:WebSquare.docTitleInfo[this.options.id]=this.options.popupName}catch(t){h.Y.printStackTrace(t,null,this)}};ge.prototype.open=function(t,e){try{
var i=this._popupCenter,o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,r=this.useWindowPopup();this._compModal=!1;var n,d=!1,c=WebSquare.idCache[this.options.scope_uuid],u=c,p=(this.options.frameModal,WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:""),m=WebSquare.getBody();m.modal&&"block"===m.modal.style.display&&(d=!0,this._alreadyDisplayedModal=!0);var f="w2xPath";y.Z.getEncodeParameterOption("pathName")?f=y.Z.getEncodeParameterOption("pathName"):y.Z.isEncodeParameter()&&(f=y.Z.encodeParameter("w2xPath"));var b=this.options.popupUrl;this.options.xml&&"string"!=typeof this.options.xml&&(this.options.xml=WebSquare.xml.serialize(this.options.xml));var v="",w={msaName:this.options.msaName,frameObj:c};if(this.options.popupAutoCloseSkip=!!this.options.popupAutoCloseSkip&&y.Z.getBoolean(this.options.popupAutoCloseSkip),"wframe"!==this.options.frameMode&&"pageFrame"!==this.options.frameMode||r)if(0==this.options.useQueryString){WebSquare._popupInfo="";var S={};if(t)if(b=a.q.baseURI+b+(b.indexOf("?")>-1?"&":"?"),y.Z.isEncodeParameter())if(y.Z.getEncodeParameterOption("onlyParam")){for(var _=t.split(/[\&\?]/),C=0;C<_.length;C++)(x=_[C].indexOf("="))>=0&&(_[C]=y.Z.encodeParameter(_[C].substring(0,x))+_[C].substring(x));t=_.join("&"),b=b+f+"="+l.I._getMsaSrc(t,w)}else b=b+f+"="+y.Z.encodeParameter(l.I._getMsaSrc(t,w));else b=b+f+"="+l.I._getMsaSrc(t,w);this.options.xml&&(v="idx10_"+(new Date).getTime()+a.q.safeRandom(),WebSquare.uiplugin.popup.popupParams[v]=this.options.xml,S.idx=this.idx),S.popupID=this.id,S.w2xHome=WebSquare.w2xHome,S.w2xDocumentRoot=WebSquare.w2xDocumentRoot+this._getW2Config(),WebSquare._popupInfo=JSON.stringify(S)}else{if(t){if(b=a.q.baseURI+b+(b.indexOf("?")>-1?"&":"?"),y.Z.getEncodeParameterOption("onlyParam")){var x;for(_=t.split(/[\&\?]/),C=0;C<_.length;C++)(x=_[C].indexOf("="))>=0&&(_[C]=y.Z.encodeParameter(_[C].substring(0,x))+_[C].substring(x));t=_.join("&")}b=y.Z.isEncodeParameter()?y.Z.getEncodeParameterOption("onlyParam")?b+f+"="+l.I._getMsaSrc(t,w)+"&":b+f+"="+y.Z.encodeParameter(l.I._getMsaSrc(t,w)+"&"):b+f+"="+l.I._getMsaSrc(t,w)+"&"}else b+=b.indexOf("?")>-1?"&":"?";this.options.xml?(v="idx10_"+(new Date).getTime()+a.q.safeRandom(),WebSquare.uiplugin.popup.popupParams[v]=this.options.xml,y.Z.isEncodeParameter()?y.Z.getEncodeParameterOption("onlyParam")?(b=b+y.Z.encodeParameter("popupID=")+this.id,b+=y.Z.encodeParameter("&idx=")+v,b+=y.Z.encodeParameter("&w2xHome=")+WebSquare.w2xHome,b+=y.Z.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):b+=y.Z.encodeParameter("popupID="+this.id+"&idx="+v+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):b=b+"popupID="+this.id+"&idx="+v+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):y.Z.isEncodeParameter()?y.Z.isEncodeParameter()?(b=b+y.Z.encodeParameter("popupID=")+this.id,b+=y.Z.encodeParameter("&w2xHome=")+WebSquare.w2xHome,b+=y.Z.encodeParameter("&w2xDocumentRoot=")+WebSquare.w2xDocumentRoot+this._getW2Config()):b+=y.Z.encodeParameter("popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()):b=b+"popupID="+this.id+"&w2xHome="+WebSquare.w2xHome+"&w2xDocumentRoot="+WebSquare.w2xDocumentRoot+this._getW2Config()}else t&&(b=t);if(1==r){i&&(this.options.left=(o-parseInt(this.options.width)-2)/2,this.options.top=(s-parseInt(this.options.height)-2)/2,this.options.width=parseInt(this.options.width),this.options.height=parseInt(this.options.height));var I,T=this.makePopupString(this.options);if(WebSquare.hybridApp||(I=this.options.id),this.popupWin=window.open(b,I,T),!this.popupWin)return;WebSquare.uiplugin.popup._status="busy",l.I.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:X+"_preventPopupClickTimer",delay:1})}else{
var k,L=!1!==this.options.useMaximize,A=this.options.className&&""!=this.options.className?" "+this.options.className:"",D=this.options.buttonInfo;if(p!==this.options.scope_uuid&&!0===this.options.frameModal&&"browser"!==this.options.type){var W=WebSquare.idCache[this.options.scope_uuid];k=y.Z.getStyleProperty(W.render,"overflow")}else k=y.Z.getStyleProperty(document.documentElement,"overflow");var q,M=!1;this.options.useControl&&1==(q=a.q.extend({minimize:!0,maximize:!0,close:!0},this.options.controls)).minimize&&(M=!0),1==this.options.accessibility&&(this._targetId=document.activeElement.id);var E=this.options.scope_uuid?WebSquare.idCache[this.options.scope_uuid]:null;this.popupWin=WebSquare.controlFactory.create(this.options.org_id||this.options.id,{className:"w2popup_window"+A,src:b,windowHeaderHTML:this.options.windowHeaderHTML||"",windowTitle:this.options.popupName,defaultWidth:this.options.width+"",defaultHeight:this.options.height+"",title:this.options.id,dragResizable:void 0===this.options.resizable||this.options.resizable,dragResizableLeft:void 0!==this.options.resizableLeft&&this.options.resizableLeft,displayParentWindowScroll:"auto"==k||"scroll"==k,useMaximize:L,frameMode:this.options.frameMode,disableCloseButton:this.options.disableCloseButton,useATagBtn:this.options.useATagBtn,useATagTitle:this.options.useATagTitle,useHeadingTagTitle:this.options.useHeadingTagTitle,foldOnMinimized:M,foldSize:this.options.foldSize,pluginName:"window",parseChild:!1,windowDragMove:this.options.windowDragMove,processMsgFrame:this.options.processMsgFrame||!1,frameModal:this.options.frameModal||!1,windowMoveType:this.options.windowMoveType,minVisibleWindowPixel:this.options.minVisibleWindowPixel||0,modal:this.options.modal||!1,accessibility:this.options.accessibility||!1,_targetId:this._targetId,msaName:this.options.msaName,fixPosition:this.options.fixPosition||!1,scopeInherit:this.options.scopeInherit||"",resizeEvent:this.options.resizeEvent||!1,adaptiveFrame:this.options.adaptiveFrame},null,E,this.options.scope_uuid,!0),WebSquare.uiplugin.popup._status="busy",!this.options.dataObject||"wframe"!==this.options.frameMode&&"pageFrame"!==this.options.frameMode||this.popupWin.setDataObject(this.options.dataObject)}if(p!==this.options.scope_uuid){if(!1===d)if(this.options.frameModal){var R,N;switch((R=this._getModalOpendFrame(c))&&(N=R.uuid),this.options.frameModal){case"frame":c&&p!==c.uuid?(n=c,n=this._getModalTargetFrame(n.uuid,this.options.frameModal,N)):n=null;break;case"parent":n=p!==c.parentFrame?WebSquare.idCache[c.parentFrame]:c,n=this._getModalTargetFrame(n.uuid,this.options.frameModal,N);break;case"top":n=null;break;default:n=this._getModalTargetFrame(c.uuid,this.options.frameModal,N)}n&&(this._targetFrameObjUUID=n.uuid)}else(n=this._getTargetFrame(this.options.scope_uuid))&&(!n.parentControl||"tabControl"!==n.parentControl.options.pluginName&&"windowContainer"!==n.parentControl.options.pluginName?this.options.frameModal=n.org_id:this.options.frameModal=n.parentControl.org_id,this._targetFrameObjUUID=n.uuid);n?(this._compModal=!0,!0===this.options.modal&&(n._modal=!0),r&&(u.popupList||(u.popupList=[]),this._parentFrameUUID=n.uuid,u._parentFrameUUID=n.uuid,u.popupList.push(this))):(d=!0,this._bodyShowModal())}else d=!0,this._bodyShowModal();if(1==r&&!n){var F=l.I.getConfiguration("/WebSquare/clearMemory/@closeChildPopup");!u||"wframe"!==u.options.pluginName&&"pageFrame"!==u.options.pluginName||"false"===F||(u.popupList||(u.popupList=[]),!1===d&&(this._parentFrameUUID=u.uuid),u.popupList.push(this))}if(v&&(this._idx=v),this.popupWin&&this.popupWin.options&&(this.options.closeAction&&(this.popupWin.options.closeAction=this.options.closeAction),this.options.openAction&&(this.popupWin.options.openAction=this.options.openAction),this.options.clickAction&&(this.popupWin.options.clickAction=this.options.clickAction)),y.Z.getBoolean(this.options.parentPopupDisabled)&&window.self!==window.top){var B=window.parent
;if(B.WebSquare&&B.WebSquare.uiplugin.popup&&B.WebSquare.uiplugin.popup.popupList&&B.WebSquare.uiplugin.popup.popupList.length>0)for(C=0;C<B.WebSquare.uiplugin.popup.popupList.length;C++)B.WebSquare.uiplugin.popup.popupList[C].popupWin.setDisabled(!0)}if("browser"==this.options.type)for(var P=0;P<WebSquare.uiplugin.popup.popupList.length;P++)this.options.id===WebSquare.uiplugin.popup.popupList[P].id&&WebSquare.uiplugin.popup.popupList.splice(P,1);if(WebSquare.uiplugin.popup.popupList.push(this),1==r){if(null!=this.popupWin&&this.popupWin.focus(),null!=this.popupWin){var Y=WebSquare.getBody(),V="popup";if(n){if((Y=n).stackComponents&&Y.stackComponents[V])for(P=0;P<Y.stackComponents[V].length;P++)this.options.id===Y.stackComponents[V][P].id&&(Y.stackComponents[V].splice(P,1),Y.modalStack.splice(P,1));($={})[V]={id:this.id,modal:this.options.modal};S={className:"w2modal_popup",isPopup:!0,useWindowPopup:r,popupModal:this.options.modal,stackComponents:$};Y.showFrameModal(S)}Y.modalEvent(this.id)}}else{var H=0,j=0;if("wframe"===this.options.frameMode||"pageFrame"===this.options.frameMode){var z={};if(null!=this.options.dataObject){var G=this.options.dataObject.type||"s",Z=this.options.dataObject.name;"string"==typeof Z&&Z.length>0&&(this.popupWin.options.popupParam=G.charAt(0)+Z)}else if(null!=this.options.xml){var U="idx_"+this.popupWin.popupIdx++;z.idx="s"+U,z[U]="d"+this.options.xml,this.popupWin.options.popupParam="d"+U}z.popupID="s"+this.id,z.w2xHome="s"+WebSquare.w2xHome,z.w2xDocumentRoot="s"+WebSquare.w2xDocumentRoot,this.popupWin.options.params=JSON.stringify(z),n&&(this.popupWin._targetFrameObjUUID=this._targetFrameObjUUID),this.popupWin._isWframePopup=!0;var X=this.popupWin.id;this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",l.I.setTimer((function(){WebSquare.uiplugin.popup._status="idle"}),{key:X+"_preventPopupClickTimer",delay:10})}))}else this.popupWin.bind("onwindowload",(function(){WebSquare.uiplugin.popup._status="done",WebSquare.uiplugin.popup._status="idle"})),H=document.documentElement.scrollTop||document.body.scrollTop,j=document.documentElement.scrollLeft||document.body.scrollLeft;D&&(this.popupWin.hasButtons=!0,this.popupWin.buttonInfo=D);var K=this;this.popupWin.addEvent("onbeforeclose",(function(){if(WebSquare.uiplugin.popup.removeFromPopupList(K.options.id),!0===K._compModal&&(WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"")!==this.scope_obj.uuid)if(this.options.frameModal)this.parentControl.hideFrameModal(this.id);else{var t=K._getTargetFrame(this.scope_obj.uuid);t&&t.hideFrameModal(this.id)}else K.options.useModalStack?K.hideModal(K.id):K.options.useModalDisable?WebSquare.layer.hideModal():1==K.options.modal&&WebSquare.getBody().hideModal(!K.options.useModalStack);if(y.Z.getBoolean(K.options.parentPopupDisabled)&&window.self!==window.top){var e=window.parent;if(e.WebSquare&&e.WebSquare.uiplugin.popup&&e.WebSquare.uiplugin.popup.popupList&&e.WebSquare.uiplugin.popup.popupList.length>0)for(var i=0;i<e.WebSquare.uiplugin.popup.popupList.length;i++)e.WebSquare.uiplugin.popup.popupList[i].popupWin.setDisabled(!1)}}));Y=WebSquare.getBody();if(n?(n.wframeSubPopup||(n.wframeSubPopup=[]),n.wframeSubPopup.indexOf(this.id)&&n.wframeSubPopup.push(this.id),Y=n):!u||!0===u._isWframePopup||"wframe"!==u.options.pluginName&&"pageFrame"!==u.options.pluginName||(Y.wframeSubPopup||(Y.wframeSubPopup=[]),Y.wframeSubPopup.indexOf(u.uuid)&&Y.wframeSubPopup.push(u.uuid)),this.popupWin.writeTo(Y,null,this.parentFrame),n){var $;($={}).popup={id:this.id,modal:this.options.modal};S={className:"w2modal_popup",isPopup:!0,useWindowPopup:r,popupModal:this.options.modal,stackComponents:$};n.showFrameModal(S)}if(i)var J=(o-parseInt(this.options.width)-2)/2,Q=(s-parseInt(this.options.height)-2)/2,tt=parseInt(this.options.width)-2,et=parseInt(this.options.height)-2;else J=this.options.left,Q=this.options.top,tt=parseInt(this.options.width)-2,et=parseInt(this.options.height)-2;if(n){
var it=Y.render.clientWidth||Y.render.style.width||WebSquare.style.getComputedStyle(Y.render,"width"),ot=Y.render.clientHeight||Y.render.style.height||WebSquare.style.getComputedStyle(Y.render,"height");if(0===it||"100%"===it||"auto"===it){for(var st,rt=Y.render.parentElement;rt&&(0===(st=rt.clientWidth||rt.style.width||WebSquare.style.getComputedStyle(rt,"width"))||"100%"===st||"auto"===st);)rt=rt.parentElement;it=0===st||"100%"===st||"auto"===st?document.documentElement.clientWidth||document.body.clientWidth||0:st}if(0===ot||"100%"===ot||"auto"===ot){var at;for(rt=Y.render.parentElement;rt&&(0===(at=rt.clientHeight||rt.style.width||WebSquare.style.getComputedStyle(rt,"height"))||"100%"===at||"auto"===at);)rt=rt.parentElement;ot=0===at||"100%"===at||"auto"===at?document.documentElement.clientHeight||document.body.clientHeight||0:at}J+tt>it&&(J=it-tt-2),Q+et>ot&&(Q=ot-et-2),tt>it&&(tt=it-2),et>ot&&(et=ot-2),"relative"!==WebSquare.style.getStyle(Y.render,"position")&&(Q+=Y.render.offsetTop,J+=Y.render.offsetLeft)}var nt=y.Z.getBoolean(l.I.getConfiguration("/WebSquare/popup/lazyPopup/@value"));if(nt||(this.popupWin.setPosition(J+j,Q+H),this.popupWin.setSize(tt,et)),this.popupWin.activate(),n||this.options.frameModal?this.popupWin.frame.options.popupAutoClose=!0:u&&(!0===u.options.popupAutoCloseSkip||!0===this.options.popupAutoCloseSkip?this.popupWin.frame.options.popupAutoCloseSkip=!0:!0===u.options.popupAutoClose&&(this.popupWin.frame.options.popupAutoClose=!0)),nt&&(this.popupWin.setPosition(J,Q),this.popupWin.setSize(tt,et)),"wframe"===this.options.frameMode||"pageFrame"===this.options.frameMode){O.f.fireEvent(this.popupWin.frame,"onsetsize");for(var lt=!1,ht=document.activeElement;null!=ht&&ht!==document.body;ht=ht.parentElement)if(this.popupWin.hasClass(ht,"w2popup_window")){lt=!0;break}if(1==this.options.accessibility){var dt=document.getElementById(this.id+"_close");WebSquare.style.addClass(dt,"w2window_close_acc");var ct=document.getElementById(this.id+"_header_title");dt?dt.focus():ct&&ct.focus()}else lt||this.popupWin._focus()}if(y.Z.isIE(6),this.options.useControl){var ut=document.getElementById(this.popupWin.id+"_header_control"),pt=ut.getElementsByTagName("div");WebSquare.style.addClass(ut,"w2window_header_control_inline");for(var gt=0,mt=pt.length;gt<mt;gt++)WebSquare.style.addClass(pt[gt],"w2window_btn_header_control");var ft=document.getElementById(this.id+"_minimize"),bt=document.getElementById(this.id+"_restore");dt=document.getElementById(this.id+"_close");if(q.minimize||(WebSquare.style.setStyle(ft,"display","none"),WebSquare.style.removeClass(ft,"w2window_btn_header_control")),q.maximize||(WebSquare.style.setStyle(bt,"display","none"),WebSquare.style.removeClass(bt,"w2window_btn_header_control")),q.close||(WebSquare.style.setStyle(dt,"display","none"),WebSquare.style.removeClass(dt,"w2window_btn_header_control")),this.options.useATagBtn){var yt=document.getElementById(this.id+"_close");WebSquare.style.addClass(yt,"w2window_btn_header_control")}}if(this.popupWin.movable(!this.popupWin.options||!0!==this.popupWin.options.fixPosition),this.options.alwaysOnTop){var vt=this.popupWin.getStyle("z-index");WebSquare.uiplugin.popup._zIndex<vt?WebSquare.uiplugin.popup._zIndex=vt:this.popupWin.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)}this.popupWin.addEvent("onclick",(function(){if(K.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=y.Z.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}})),this.popupWin.addEvent("ondragstart",(function(){K.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex))})),this.popupWin.addEvent("onwindowmousedown",(function(){
if(K.options.alwaysOnTop&&"idle"===WebSquare.uiplugin.popup._status&&(WebSquare.uiplugin.popup._zIndex++,this.setStyle("z-index",WebSquare.uiplugin.popup._zIndex)),this.options.clickAction){var t=y.Z.getGlobalFunction(this.options.clickAction,this.scope_id);"function"==typeof t&&t.call(this,WebSquare.uiplugin.popup._zIndex)}}));try{switch((0,g.A)(this.options.openAction)){case"function":this.options.openAction.apply(this,this);break;case"string":var wt=y.Z.getGlobalFunction(this.options.openAction,this.scope_id);"function"==typeof wt&&(this.options.openAction=wt,wt.apply(this,this))}}catch(t){h.Y.printStackTrace(t,null,this)}}}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype._getModalOpendFrame=function(t){try{for(var e,i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";t&&i!==t.uuid;)t._wframePopupModal&&"block"===t._wframePopupModal.render.style.display&&(e=t),t=WebSquare.idCache[t.parentFrame];return e}catch(t){h.Y.printStackTrace(t)}},ge.prototype._getTargetFrame=function(t,e){try{for(var i,o=WebSquare.idCache[t];null!=o&&o!==WebSquare.strictModeFrame;o=WebSquare.idCache[o.parentFrame])if(o.options&&!0===o.options.frameModal){i=o;break}return i}catch(t){h.Y.printStackTrace(t)}},ge.prototype._getModalTargetFrame=function(t,e,i){try{var o=WebSquare.idCache[t],s=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"",r=o,a=o,n=!1;for(i||(n=!0);r&&s!==r.uuid&&("frame"!==this.options.frameModal||0!==WebSquare.uiplugin.popup.popupList.length);){r._wframePopupModal&&(a=r),i&&r.uuid===i&&(n=!0);var l=r.getParentFrame()?r.getParentFrame().uuid:null;if(e){if(n&&(e===r.id||r.parentControl&&0===r.parentControl.org_id.indexOf(e)))break;l&&(r=WebSquare.idCache[l])}else{if(r.parentFrame===s)break;l&&(r=WebSquare.idCache[l])}}return"frame"===this.options.frameModal?a:e&&r.uuid===s?a||null:r}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype._bodyShowModal=function(){try{this.options.useModalStack?this.showModal():1==this.options.modal&&(this.options.useModalDisable?WebSquare.layer.showModal():WebSquare.getBody().showModal())}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.makeParamString=function(t){try{var e=[];for(var i in t)e.push(i+"="+t[i]);return"?"+e.join("&")}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.getWebsquareUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){e.w2xPath=l.I.getURL(t),e.w2xHome=WebSquare.w2xHome,e.w2xDocumentRoot=WebSquare.w2xDocumentRoot;var o=this.makeParamString(e);return a.q.baseURI+"popup.html"+o}return""}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.getHTMLUrl=function(t,e,i){try{if(i||(i=window),i&&i.location){var o=this.makeParamString(e);return t.replace(/\?.*/,o)}return""}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.makePopupString=function(t){try{var e="width height resizable status menubar scrollbars title left top"+(!0===this.options.fullscreen?"fullscreen":""),i="";for(var o in t){if(e.indexOf(o)>-1)if("width"==o||"height"==o||"left"==o||"top"==o)i+=o+"="+parseInt(t[o])+"px,";else i+=o+"="+(1==t[o]?"yes":"no")+","}return i}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.close=function(t){try{if(this.popupWin){var e=this.popupWin.close(t);if(!1!==e){if(1==this.options.modal&&this.useWindowPopup()){var i=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(this._parentFrameUUID&&this._parentFrameUUID!==i){var o=WebSquare.idCache[this._parentFrameUUID];o&&o.hideFrameModal(this.id)}else WebSquare.getBody().hideModal()}this.popupWin=null,WebSquare.dataObject[this.id]&&delete WebSquare.dataObject[this.id]}return e}}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.getWindow=function(){try{return 1==this.useWindowPopup()?this.popupWin:this.popupWin.frame.getWindow()}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.useWindowPopup=function(){try{var t=!1;return"browser"==this.options.type&&(t=!0),"window"==this.options.type&&(t=!0),"window"==this.options.type&&1==this.options.useIFrame&&(t=!1),t
}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.setSize=function(t,e){try{1==this.useWindowPopup()?this.popupWin.resizeTo(t,e):(this.popupWin.setSize(parseInt(t)-2,parseInt(e)-2),y.Z.isIE(6))}catch(t){h.Y.printStackTrace(t)}},ge.prototype.setCloseButtonStatus=function(t){try{this.popupWin.setCloseButtonStatus(t)}catch(t){h.Y.printStackTrace(t)}},ge.prototype._getW2Config=function(){try{var t="",e=-1;if(y.Z.isEncodeParameter()){if((e=location.toString().indexOf(y.Z.encodeParameter("w2Config")))>=0)(o=(i=location.toString().slice(e+9)).slice(0,i.indexOf(y.Z.encodeParameter("config.xml"))+10))&&(t=y.Z.encodeParameter("&w2Config=")+o);else if(y.Z.getBoolean(l.I.getConfiguration("/WebSquare/encodeParameter/@fallback"))){var i,o;if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+9)).slice(0,i.indexOf("config.xml")+10))&&(t=y.Z.getEncodeParameterOption("onlyParam")?y.Z.encodeParameter("&w2Config=")+o:y.Z.encodeParameter("&w2Config="+o))}}else if((e=location.toString().indexOf("w2Config"))>=0)(o=(i=location.toString().slice(e+9)).slice(0,i.indexOf("config.xml")+10))&&(t="&w2Config="+o);return t}catch(t){h.Y.printStackTrace(t,null,this)}},ge.prototype.showModal=function(){var t=WebSquare.getBody();if(y.Z.getBoolean(this.options.useModalStack)){var e="popup";if("browser"===this.options.type&&t.stackComponents&&t.stackComponents[e])for(var i=0;i<t.stackComponents[e].length;i++)this.options.id===t.stackComponents[e][i].id&&(t.stackComponents[e].splice(i,1),t.modalStack.splice(i,1));var o={};o[e]={id:this.id,modal:this.options.modal};var s={className:"w2modal_popup",isPopup:!0,popupModal:this.options.modal,stackComponents:o};t.showModal(s)}else t.showModal("w2modal_popup")},ge.prototype.hideModal=function(t){WebSquare.getBody().hideModal(null,t)};var me=__webpack_require__(6976),fe=__webpack_require__(4524),be=__webpack_require__(1218);r.l.init(window),a.q.BootLoader=n.Q,a.q.core=l.I,a.q.exception=h.Y,a.q.logger=d.v,a.q.debug=d.Y,a.q.xml=c._,a.q.xmljs=u,a.q.collection=p.r,a.q.Parser=x,a.q.Model=I,a.q.ModelUtil=T.K,a.q.DataCollection=L,a.q.Events=S,a.q.net=A,a.q.session=D,a.q.util=y.Z,a.q.date=W.p,a.q.text=q.Q,a.q.numberFormatter=q.E,a.q.layer=M,a.q.cookie=E,a.q.effect=R,a.q.targetIterator=F,a.q.event=O.f,a.q.skin=C,a.q.language=B.B,a.q.cssStyleSheet=Y,a.q.styleSheet=P,a.q.dragdrop=V,a.q.style=H,a.q.validator=j.N,a.q.IValidate=j.G,a.q.json=k,a.q.jsonUtil=v.r,a.q.jsonParser=G,a.q.pageInfo=Z,a.q.jsLoader=X,a.q.format=K,a.q.bigDecimal=$,a.q.bigDecimalObj=J,a.q.api=Q,a.q.Elem=w.S,a.q.korHelper=tt,a.q.messageBroker=z,a.q.eventControl=et.i,a.q.cssManager=_,a.q.cssCustomizer=it.v,a.q.modelControl=ot,a.q.xfControl=st.q,a.q.controlFactory=U.o,a.q.historyManager=rt,a.q.itemsetControl=at.t,a.q.DataCollection.dataList=gt,a.q.DataCollection.filterController=ht,a.q.DataCollection.dataListCellInfo=ut,a.q.DataCollection.dataMap=ft,a.q.DataCollection.linkedDataList=wt,a.q.DataCollection.aliasDataList=St,a.q.DataCollection.aliasDataMap=_t,a.q.DataCollection.aliasLinkedDataList=Ct,a.q.uiplugin={},a.q.uiplugin.balloonTip=xt.balloonTip,a.q.uiplugin.group=It.group,a.q.uiplugin.wframe=Tt.wframe,a.q.uiplugin.body=kt,a.q.uiplugin.textbox=Lt.textbox,a.q.uiplugin.anchor=At.anchor,a.q.uiplugin.itemTable=Dt,a.q.uiplugin.gridItemTable=Wt,a.q.uiplugin.gridViewItemTable=qt,a.q.uiplugin.selectbox=Mt.selectbox,a.q.uiplugin.selectbox_native=Mt.selectbox_native,a.q.uiplugin.input=Et.input,a.q.uiplugin.span=Rt.span,a.q.uiplugin.dateHelper=Nt,a.q.uiplugin.calendar=Ft.calendar,a.q.uiplugin.inputCalendar=Ot.inputCalendar,a.q.uiplugin.textarea=Bt.textarea,a.q.uiplugin.checkcombobox=Pt.checkcombobox,a.q.uiplugin.autoComplete=Yt.autoComplete,a.q.uiplugin.list=Vt.list,a.q.uiplugin.floatingLayer=Ht.floatingLayer,a.q.uiplugin.radio=jt.radio,a.q.uiplugin.spinner=zt.spinner,a.q.uiplugin.gridView=Gt.gridView,a.q.uiplugin.drilldown=Gt.drilldown,a.q.uiplugin.mappingController=Gt.mappingController,
a.q.uiplugin.linkedMappingController=Gt.linkedMappingController,a.q.uiplugin.cellInfo=Gt.cellInfo,a.q.uiplugin.headerInfo=Gt.headerInfo,a.q.uiplugin.trigger=Zt.trigger,a.q.uiplugin.button=Ut.button,a.q.uiplugin.image=Xt.image,a.q.uiplugin.pageList=Kt.pageList,a.q.uiplugin.tabControl=$t.tabControl,a.q.uiplugin.content=$t.content,a.q.uiplugin.generator=Jt.generator,a.q.uiplugin.upload=Qt.upload,a.q.uiplugin.treeview=te.treeview,a.q.uiplugin.treeview_virtual=ee.treeview_virtual,a.q.uiplugin.checkbox=ie.checkbox,a.q.tag=re,a.q.uiplugin.output=ae.output,a.q.uiplugin.window=ne.wq_window,a.q.uiplugin.windowContainer=le.windowContainer,a.q.uiplugin.accordion=he.accordion,a.q.uiplugin.panels=he.panels,a.q.uiplugin.widgetContainer=de.widgetContainer,a.q.uiplugin.widget=de.widget,a.q.uiplugin.panelContainer=ce.panelContainer,a.q.uiplugin.panel=ce.panel,a.q.uiplugin.udc=ue.udc,a.q.uiplugin.popup=pe,a.q.uiplugin.popupWindow=ge,a.q.uiplugin.scrollView=me.scrollView,a.q.uiplugin.gridLayout=fe.gridLayout,a.q.uiplugin.pageFrame=be.pageFrame,window.WebSquare=a.q}()})();