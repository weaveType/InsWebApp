"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[2940],{2940:function(t,e,i){i.r(e),i.d(e,{fwSparkChart:function(){return u}});var s=i(467),o=i(4756),a=i.n(o),r=i(6789),n=i(1599),h=i(7819),l=i(6484),p=i(7712),c=i(2918),u=function(t,e,i){c.q.call(this,t,e,i)};r.q.extend(u.prototype,c.q.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.fwSparkChart",pluginName:"fwSparkChart",useConfig:!0,accessibility:!1,displayData:!1,title:"",chartType:"sparkline",seriesType:"simple",version:"3.7"},u.prototype.initialize=function(t){this.fcObj=null,this.chartObj={},this.attributeObj=null,!t.getAttribute("version")&&n.I.getConfiguration("/WebSquare/fusionchart/version/@value")&&(this.options.version=n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))},u.prototype.initAsync=(0,s.A)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"!=typeof FusionCharts){t.next=39;break}if("4.0"!==this.options.version&&(this.options.version||"4.0"!==n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=7;break}return this.options.version="4.0",t.next=5,inquires("externalJS/FusionCharts4.0/FusionCharts_all.js");case 5:case 11:case 17:case 23:case 29:case 35:t.next=39;break;case 7:if("3.23"!==this.options.version&&(this.options.version||"3.23"!==n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=13;break}return this.options.version="3.23",t.next=11,inquires("externalJS/FusionCharts3.23/FusionCharts_all.js");case 13:if("3.19"!==this.options.version&&(this.options.version||"3.19"!=n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=19;break}return this.options.version="3.19",t.next=17,inquires("externalJS/FusionCharts3.19/FusionCharts_all.js");case 19:if("3.15"!==this.options.version&&(this.options.version||"3.15"!=n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=25;break}return this.options.version="3.15",t.next=23,inquires("externalJS/FusionCharts3.15.2/FusionCharts_all.js");case 25:if("3.13"!==this.options.version&&(this.options.version||"3.13"!=n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=31;break}return this.options.version="3.13",t.next=29,inquires("externalJS/FusionCharts3.13/js/FusionCharts_all.js");case 31:if("3.11"!=this.options.version&&(this.options.version||"3.11"!=n.I.getConfiguration("/WebSquare/fusionchart/version/@value"))){t.next=37;break}return this.options.version="3.11",t.next=35,inquires("externalJS/FusionCharts3.11.0/FusionCharts_all.js");case 37:return t.next=39,inquires("externalJS/FusionCharts3.7/FusionCharts_all.js");case 39:case"end":return t.stop()}}),t,this)}))),u.prototype.toHTML=function(){var t=[],e=""==this.options.style?"":"style='"+this.options.style+"'";return t.push("<div id='"+this.id+"' "+e+" class='w2fwSparkChart "+this.options.className+"'>"),t.push("</div>"),t.join("")},u.prototype.setAction=function(){try{if(("3.19"===this.options.version||"3.23"===this.options.version||"4.0"===this.options.version)&&"function"==typeof FusionCharts.options._setActivate){var t,e=WebSquare.core.getConfiguration("/WebSquare/fusionchart/license/@value");e&&(t={key:e,creditLabel:!1}),FusionCharts.options._setActivate(t)}if(this.fcObj=new FusionCharts(this.options.chartType,"fw_spark_"+this.id,"100%",this.render.offsetHeight||"100%"),this.setDefaultOption(),this.modelControl.isDataCollectionRefBinded){var i,s=this.modelControl.dataCollectionRefInfo.dataComp;if("simple"==this.options.seriesType.toLowerCase()){if(s.getRowCount()>0)(i=s.getFusionChartSimpleData(this.options.chartType,this.options.labelNode,this.options.seriesNode,this.options.valueNode))?(i={dataset:[i]},this.setJSONData(i)):p.v.printLog(this.id+" : Simple seriesType does not support")}else if(s.getRowCount()>0)(i=s.getFusionChartData(this.options.chartType,this.options.labelNode,this.options.seriesColumns))&&(i={dataset:[i]},this.setJSONData(i))}}catch(t){
h.Y.printStackTrace(t)}},u.prototype.refresh=function(){try{if(this.modelControl.isDataCollectionRefBinded){var t,e=this.modelControl.dataCollectionRefInfo.dataComp;if("simple"==this.options.seriesType.toLowerCase())(t=e.getFusionChartSimpleData(this.options.chartType,this.options.labelNode,this.options.seriesNode,this.options.valueNode))?(t={dataset:[t]},this.setJSONData(t)):p.v.printLog(this.id+" : Simple seriesType does not support");else(t=e.getFusionChartData(this.options.chartType,this.options.labelNode,this.options.seriesColumns))&&(t={dataset:[t]},this.setJSONData(t))}}catch(t){h.Y.printStackTrace(t)}},u.prototype.setJSONData=function(t){try{this.chartObj=t,this.draw()}catch(t){h.Y.printStackTrace(t)}},u.prototype.getJSONData=function(){try{return this.fcObj.getJSONData()}catch(t){h.Y.printStackTrace(t)}},u.prototype.fc=function(){try{return FusionCharts.items["fw_spark_"+this.id]}catch(t){h.Y.printStackTrace(t)}},u.prototype.draw=function(){try{null!=this.attributeObj&&this._setChartAttribute(this.attributeObj),null!=this.attributeObj&&(this.chartObj.chart=this.attributeObj);var t=this.fc();if(t.setJSONData(this.chartObj),t.isActive()||t.render(this.id),1==this.options.accessibility){var e=document.getElementById("fw_spark_"+this.id);e&&e.setAttribute("aria-hidden",!0),this.setAccessibility(!0)}}catch(t){h.Y.printStackTrace(t)}},u.prototype.setDefaultOption=function(){try{var t={showborder:"1",animation:"1",bgcolor:"FFFFFF",canvasbgcolor:"FFFFFF",showplotborder:"0",divlinethickness:"1",canvasbordercolor:"FFFFFF",showalternatehgridcolor:"0",showvalues:"0",plotgradientcolor:"",showalternatevgridcolor:"0",divlinecolor:"b3b3b3",bordercolor:"b3b3b3",use3dlighting:"0",showshadow:"0",formatnumberscale:"0",plotFillColor:"#0075c2",highColor:"#1aaf5d",lowColor:"#8e0000",showHoverEffect:"1",caption:this.options.title};for(var e in t)this.attributeObj&&void 0!==this.attributeObj[e]&&(t[e]=this.attributeObj[e]);this.setChartAttribute(t)}catch(t){h.Y.printStackTrace(t)}},u.prototype.setChartAttribute=function(t){try{for(var e in null==this.attributeObj&&(this.attributeObj={}),t)t.hasOwnProperty(e)&&(this.attributeObj[e.toLowerCase()]=t[e])}catch(t){h.Y.printStackTrace(t)}},u.prototype._setChartAttribute=function(t){try{this.chartObj.chart=t}catch(t){h.Y.printStackTrace(t)}},u.prototype.getChartAttribute=function(t){try{return FusionCharts.items["fw_spark_"+this.id].getChartAttribute(t)}catch(t){h.Y.printStackTrace(t)}},u.prototype.setChartColumnRef=function(t,e,i){try{if(t=l.Z.isNull(t)?this.options.ref:t,e=l.Z.isNull(e)?this.options.labelNode:e,i=l.Z.isNull(i)?this.options.seriesColumns:i,this.options.ref!=t){""!=this.options.ref&&this.modelControl.dataCollectionRefInfo.dataComp.removeChild(this.id);var s=t.replace("data:","");WebSquare.api.data[s].addChild(l.Z.getComponentById(this.id))}this.options.ref=t,this.options.labelNode=e,this.options.seriesColumns=i,this.modelControl.useRef=!0,this.modelControl.setRef(t),this.refresh()}catch(t){h.Y.printStackTrace(t)}},u.prototype.setChartColumnSimpleRef=function(t,e,i,s){try{if(t=l.Z.isNull(t)?this.options.ref:t,e=l.Z.isNull(e)?this.options.labelNode:e,i=l.Z.isNull(i)?this.options.seriesNode:i,s=l.Z.isNull(s)?this.options.valueNode:s,this.options.ref!=t){""!=this.options.ref&&this.modelControl.dataCollectionRefInfo.dataComp.removeChild(this.id);var o=t.replace("data:","");WebSquare.api.data[o].addChild(l.Z.getComponentById(this.id))}this.options.ref=t,this.options.labelNode=e,this.options.seriesNode=i,this.options.valueNode=s,this.modelControl.useRef=!0,this.modelControl.setRef(t),this.refresh()}catch(t){h.Y.printStackTrace(t)}},u.prototype.exportJSChart=function(t){try{t||(t="jpg");var e=this.options.id||"fusionChart",i=this.getSVGString();if(i){var s=encodeURI(i+"ExportType="+t+"ExportFileName="+e),o=r.q._resourceURI+"engine/servlet/exportFusionChart.jsp";n.I.download(o,s,"post")}}catch(t){h.Y.printStackTrace(t)}},u.prototype.getSVGString=function(){try{var t=this.fc().getSVGString()
;if(t)return t=(t=(t=(t=(t=t.wq_replaceAll('shape-rendering="default"',"shape-rendering='auto'")).wq_replaceAll('visibility=""',"visibility='inherit'")).wq_replaceAll('text-anchor="undefined"',"text-anchor='start'")).wq_replaceAll("1e-006","0.000001")).wq_replaceAll('font-family="15"','font-family="Verdana"');p.v.printLog("not found svg object")}catch(t){h.Y.printStackTrace(t)}},u.prototype.setAccessibility=function(t){try{var e=document.getElementById("accessibility_"+this.id);if(0==t)return void(e&&e.remove());var i="",s="";if(null==e){var o=document.createElement("table");o.id="accessibility_"+this.id,WebSquare.style.addClass(o,"w2fusionchart_accessibility"),1==this.options.displayData&&(WebSquare.style.removeClass(o,"w2fusionchart_accessibility"),WebSquare.style.addClass(o,"w2tb"),WebSquare.style.addClass(o,"w2fusionchart_accessibility_table")),this.render.appendChild(o,this.render.lastChild),e=document.getElementById("accessibility_"+this.id)}e.innerHTML="";var a="",r=this.chartObj,n=this.attributeObj.caption;n&&(a="<caption>"+n+"</caption>"),r.dataset&&1===r.dataset.length&&(r=r.dataset[0]),a+="<thead><tr>",r.dataName&&(a+="<th scope='col' class='w2tb_th'>"+r.dataName.labelName+"</th>",a+="<th scope='col' class='w2tb_th'>"+r.dataName.valueName+"</th>"),a+="</tr></thead>",a+="<tbody>";for(var l=0;l<r.data.length;l++)a+="<tr>",r.data[l]?(i=r.data[l].label?r.data[l].label:r.data[l].LABEL,s=r.data[l].value?r.data[l].value:r.data[l].VALUE):(i="",s=""),a+="<td class='w2tb_td'>"+i+"</td>",a+="<td class='w2tb_td'>"+s+"</td>",a+="</tr>";a+="</tbody>",e.innerHTML=a}catch(t){h.Y.printStackTrace(t)}},u.prototype.getDataListInfo=function(){try{var t={};if(this.modelControl.isDataCollectionRefBinded){var e=this.options.ref.replace("data:","");return t.id=e.slice(0),"simple"==this.options.seriesType.toLowerCase()?(t.ref=this.options.ref,t.labelNode=this.options.labelNode,t.serieNode=this.options.seriesNode,t.valueNode=this.options.valueNode):(t.ref=this.options.ref,t.labelNode=this.options.labelNode,t.seriesColumns=this.options.seriesColumns),t}return null}catch(t){h.Y.printStackTrace(t)}}}}]);