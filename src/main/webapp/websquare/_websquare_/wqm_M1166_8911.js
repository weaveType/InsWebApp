"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[8911],{8911:(t,e,i)=>{i.r(e),i.d(e,{input:()=>m});var s=i(582),o=i(2536),a=i(2710),r=i(9107),n=i(1263),h=i(2327),l=i(7249),d=i(3477),p=i(2430),m=function(t,e,i){l.q.call(this,t,e,i)};s.q.extend(m.prototype,l.q.prototype),s.q.extend(m.prototype,d.G.prototype),s.q.extend(m.prototype,p.v.prototype),m.prototype.defaultOptions={pluginType:"uiplugin.input",pluginName:"input",serializable:!0,parseAttributes:!0,userEvents:["onfocus","onblur","onbeforeedit","oneditend","onafteredit","onchange","onviewchange","oneditkeyup","oneditenter","oneditfull","ontooltipshow","ontooltiphide"],systemEvents:["onclick","ondblclick","onkeydown","oninput","onkeyup","onkeypress","onmouseup","onmousedown","onmouseover","onmouseout","onmousemove"],useConfig:!0,valueType:"",type:"text",editType:"",dataType:"text",ioFormat:"",ioFormatter:"",displayFormat:"",displayFormatter:"",formatArray:"",applyFormat:"display",dateMask:"",timeMask:"",numberMask:"",euroMask:"",rupeeMask:"",tengeMask:"",copyOnReadOnly:"",maskFormat:"",ltrim:!1,rtrim:!1,trim:!1,mandatory:!1,maxlength:"-1",maxLength:"-1",minlength:-1,adjustMaxLength:!1,useMaxLength:!1,allowChar:"",ignoreChar:"",byteCheckIgnoreChar:"",byteCheckIgnoreCharType:"",characterCase:"",maxByteLength:-1,minByteLength:-1,validateOnCheckMaxByteLength:!1,validateOnInput:!1,validator:"",invalidMessage:"",invalidMessageFunc:"",displaymessage:!1,onFocusStyle:"",onFocusClass:"w2input_focus",readOnlyClass:"w2input_readonly",readOnlyFocusEvent:!1,refSyncKeyup:!1,initValue:"",title:"",name:"",useKeyupBlur:!0,preventCopyPaste:!1,delimeter:"",decimalDelimeter:"",delimiter:"",decimalDelimiter:"",focusCalcSize:!0,enterBlur:!0,placeholder:"",autocomplete:"",useVerticalAlign:!0,escape:!0,autocorrect:"",autoCapitalize:"off",imeMode:"",autoFocus:!1,nextTabByEnter:!1,nextTabByKeyDown:!1,showPlaceHolderOnReadOnly:!1,refSync:!1,useMonthYearFormat:!1,customModelFormatter:"",customModelUnformatter:"",customPasteFormatter:"",inputMode:"",useBigDecimalFloat:!1,setValueHandler:"",getValueHandler:"",autoDecimalPoint:!1,editFormat:"",editFormatParticalMask:!1,maskFormatModelExcludeChar:"",maskFormatModelExcludeCharValue:!1,exceptValidKeydown:"",useLocale:!1,placeholderLocaleRef:"",skipValidate:!1,nextTabFocusPosition:0},m.prototype.initialize=function(t){try{this.originalStyleObj=null,this.focusStyleObj=null,this.focusedSizeFlag=!1,this.realValue="",this.renderRealValue="",this.beforeBlockSelection={},this.supportPlaceholder=!1,this.supportAutocomplete=!1,this._focusStatus="init",this._getFocused=!1,this._changeApplyFormat=!1,this.originalHashValue={},this.options.maxlength="-1"!==this.options.maxLength?this.options.maxLength:this.options.maxlength,this.options.maxLength=this.options.maxlength,this.options.delimiter=this.options.delimiter?this.options.delimiter:this.options.delimeter,this.options.decimalDelimiter=this.options.decimalDelimiter?this.options.decimalDelimiter:this.options.decimalDelimeter,this.options.decimalDelimiter=this.options.decimalDelimiter,this.options.delimeter=this.options.delimiter,this.options.decimalDelimeter=this.options.decimalDelimiter,this.floatMaxlength="-1",this.options.parentEvent&&this.options.parentEvent.options&&"searchbox"===this.options.parentEvent.options.pluginName&&(this.scope_obj=this.options.parentEvent.scope_obj,this.scope_id=this.options.parentEvent.scope_id),"number"===this.options.dataType&&"true"===this.options.floatNumber&&(this.options.dataType="float");var e=this.options.dataType;this._getMaskFormat()||"all"!=this.options.applyFormat||""!=this.options.displayFormatter||"bigDecimal"===e||"number"===e||"float"===e||"euro"===e||"rupee"===e||"tenge"===e||(this._changeApplyFormat=!0,this.options.applyFormat="display"),this._getMaskFormat()&&(this.options.applyFormat="all","text"!=this.options.dataType||this.options.allowChar||(this.options.allowChar="0-9")),
""!=this.options.displayFormat||"number"!=e&&"bigDecimal"!=e||(this.options.displayFormat=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/displayFormat/@defaultValue')||"",this.options.displayFormat&&(this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter="."))),"euro"==e&&(this.options.euroMask||(this.options.euroMask=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),this.options.customModelFormatter||(this.options.customModelFormatter=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelFormatter/@value')||""),this.options.customModelUnformatter||(this.options.customModelUnformatter=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/customModelUnformatter/@value')||""));var i=this.options.onFocusStyle;if(i){var s="w2input_userfocus",r="#"+this.id+"."+s;WebSquare.cssManager.addConvertedCSS(r,i),this.options.onFocusStyle="",this.options.onFocusClass=s}if(""==this.options.displayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"float":case"bigDecimal":this.useBigDecimalFloat||(this.options.displayFormat=this.options.numberMask),this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"time":this.options.displayFormat=this.options.timeMask;break;case"number":this.options.displayFormat=this.options.numberMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}else switch(this.options.dataType){case"float":case"bigDecimal":case"number":this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"euro":this.options.displayFormat=this.options.euroMask,this.options.delimiter||(this.options.delimiter="."),this.options.decimalDelimiter||(this.options.decimalDelimiter=",");break;case"rupee":this.options.displayFormat=this.options.rupeeMask,this.options.delimiter||(this.options.delimiter=","),this.options.decimalDelimiter||(this.options.decimalDelimiter=".");break;case"tenge":this.options.displayFormat=this.options.tengeMask,this.options.delimiter||(this.options.delimiter=" "),this.options.decimalDelimiter||(this.options.decimalDelimiter=",")}if(this.options.byteCheckIgnoreChar&&this.options.byteCheckIgnoreCharType){for(var n=this.options.byteCheckIgnoreCharType.split(","),h=!1,l=0;l<n.length;l++)n[l].wq_trim()==this.options.dataType&&(h=!0);h||(this.options.byteCheckIgnoreChar="")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var p=this.options.dataType;if("bigDecimal"==p&&(p=this.useBigDecimalFloat?"float":"number"),this.formatter=WebSquare.format.createFormatter(p,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),
"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar)):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):(this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.formatter.setAllowChar(this.options.allowChar))),this.validator=new d.N.validateInvoker(this.id,this.options),"true"!==this.options.floatNumber||"euro"!==this.options.dataType&&"rupee"!==this.options.dataType&&"tenge"!==this.options.dataType)switch(this.options.dataType){case"date":case"time":break;case"number":""==this.options.displayFormat?this.validator.addCommand(new d.N.allowCharCommand("+\\-.0-9")):this._getMaskFormat()?this.validator.addCommand(new d.N.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)):(this.validator.addCommand(new d.N.numberCommand),this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"euro":this.validator.addCommand(new d.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"bigDecimal":if(!this.useBigDecimalFloat){this._getMaskFormat()&&this.validator.addCommand(new d.N.numberMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat)),""==this.options.displayFormat?this.validator.addCommand(new d.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.N.numberCommand),this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")?(this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.N.maxFloatLengthCommand(this.options.maxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.N.maxLengthCommand(this.options.maxlength)),this.floatMaxlength=this.options.maxlength,this.options.maxlength="-1"):this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);break;case"text":this._getMaskFormat()&&this.validator.addCommand(new d.N.textMaskCommand(this.options.displayFormat,this._getMaskFormat(),this.options.applyFormat,this.options.allowChar))}else if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")){var m=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.N.maxFloatLengthCommand(m,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.N.maxLengthCommand(m)),this.floatMaxlength=m,this.options.maxlength="-1"
}else this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if(this.inputEvented=!1,this.options.placeholder&&WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.autocomplete&&WebSquare.uiplugin.input.autocomplete&&(this.supportAutocomplete=!0),this.beforeEditValue="",this.removeSignValue="",this._editTokens={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},"*":{pattern:/[0-9a-zA-Z~!@#$%^&*()_+|\-=\\{}\[\]:";'<>?,./]/},"!":{escape:!0}},this.options.editFormat&&(this._preEditFormat(this.options.editFormat),this.linkedList=WebSquare.text.linkedList()),this._editValue="",this._oldValue="",this.floatMaxlength>0){m=this.floatMaxlength+"";var u=this.options.decimalDelimiter||".",c=m.split(u);this._integerMaxLength=parseInt(c[0]),this._fractionMaxLength=c[1]?parseInt(c[1]):0}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._preEditFormat=function(t){try{this._editFormat=t.split("||").sort((function(t,e){return t.replace(/[^#^S^X^*]/g,"").length-e.replace(/[^#^S^X^*]/g,"").length}));var e=/^[#XS\*]/;if(this.removeSignToken={},this._editFormat)for(var i=0;i<this._editFormat.length;i++){for(var s=this._editFormat[i],o="",r=[],n=0;n<s.length;n++)!1===e.test(s[n])?r[String(n)]=this._editFormat[i][n]:o+=s[n];this.removeSignToken[s]=o}}catch(t){a.Y.printStackTrace(t,null,this)}},m.htmlStr=["<input id='",,"'",," class='w2input ",,"'",,"",," />"],m.placeholder="string"==typeof document.createElement("input").placeholder,m.autocomplete="string"==typeof document.createElement("input").autocomplete,m.prototype.toHTML=function(){try{var t,e=WebSquare.uiplugin.input.htmlStr,i="";"auto"==this.options.imeMode?i="ime-mode:auto;":"inactive"==this.options.imeMode?i="ime-mode:inactive;":"active"==this.options.imeMode?i="ime-mode:active;":"disabled"==this.options.imeMode&&(i="ime-mode:disabled;"),this.options.style&&";"!==this.options.style.slice(-1)&&(this.options.style+=";"),this.options.useLocale&&this.options.placeholderLocaleRef&&(t=this.getLocaleValue(this.options.placeholderLocaleRef));var s=t||(this.options.escape?WebSquare.xml._encode(this.options.placeholder):this.options.placeholder),o=this.options.escape?WebSquare.xml._encode(this.options.title):this.options.title;return e[1]=this.id,e[3]=""==this.options.style&&""==this.options.imeMode?"":" style='"+this.options.style+i+"'",e[5]=this.options.className+(this.options.readOnly?" "+this.options.readOnlyClass:""),e[7]=this.options.type?" type='"+this.options.type+"'":"",e[9]=this.options.title?" title='"+o+"'":"",e[9]+=this.options.name?" name='"+this.options.name+"'":"",e[9]+=this.options.maxlength>=0&&!this.options.useMaxLength?" maxLength='"+this.options.maxlength+"'":"",e[9]+=this.supportPlaceholder?" placeholder='"+s+"'":"",e[9]+=this.supportAutocomplete&&this.options.autocomplete?" autocomplete='"+this.options.autocomplete+"'":"",e[9]+=0!=WebSquare.hybridApp&&this.options.autocorrect?" autocorrect='"+this.options.autocorrect+"'":"",e[9]+=0==WebSquare.hybridApp?"":" autoCapitalize='"+this.options.autoCapitalize+"'",e[9]+=this.getAttributesString(),e[9]+=this.options.imeMode?" imeMode='"+this.options.imeMode+"'":"",e[9]+=this.options.tabIndex?" tabIndex='"+this.options.tabIndex+"'":"",e[9]+=this.options.inputMode?" inputMode='"+this.options.inputMode+"'":"",e.join("")}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setAction=function(){try{if(this.options.nextTabID&&this.setNextTabID(this.options.nextTabID,this.scope_id),this.options.initStyle){var t=document.getElementById(this.id).style.cssText,e=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:t,className:e}}if(this.options.useVerticalAlign&&this.setVerticalAlign(),this.options.initValue&&this._setValue(this.options.initValue),this.modelControl.isBinded()){
var i=this.modelControl.getData(),s=n.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof s&&(i=s.call(this,i,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(i=WebSquare.date.getIOFormatDate(i,this.options.ioFormat)),this.setValueNM(i)}if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),this._editFormat)return void this.setActionEditFormat();var h=this;this.addEvent("oneditend",(function(){var t="",e=h.render.value.wq_trim();("number"==h.options.dataType||"float"==h.options.dataType||h.useBigDecimalFloat||"euro"==h.options.dataType||"rupee"==h.options.dataType||"tenge"==h.options.dataType)&&("."!==e&&"-"!==e&&"+"!==e&&","!==e&&e!=="+"+this.options.decimalDelimiter&&e!=="-"+this.options.decimalDelimiter||(h.render.value="")),t="all"==h.options.applyFormat?h._getMaskFormat()?h.render.value:h._getValue():h.render.value,t=h.validator.validateString(t),h.options.placeholder&&!this.supportPlaceholder&&0==h.realValue.length&&this.render.className.match("w2input_placeholder")||h.setValueNM(t,!0)})),(n.Z.isIEAllVersion()||n.Z.isSpartan())&&(this.event.addListener(this.render,"onfocusin",this.event.bindAsEventListener(this,this.handleFocusinEvent)),this.event.addListener(this.render,"onbeforeeditfocus",this.event.bindAsEventListener(this,this.handleBeforeFocusEvent))),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdv,{eventonreadonly:!0})),1==this.getReadOnly()&&(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.options.validateOnInput&&(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),o.I.browserCheck.android&&o.I.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&!this.useBigDecimalFloat&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.Z.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),"number"==this.options.dataType&&this.setStyle("imeMode","disabled")),n.Z.isIEAllVersion()?this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){document.activeElement!=this.render&&this.focus()}))):n.Z.isOpera()&&this.options.preventCopyPaste&&this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t),this.focus()}))),"noFormat"==this.options.copyOnReadOnly?n.Z.isIEAllVersion()?(this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly&&r.f.preventDefault(t)}))),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,(function(t){67==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.handleCopyEvent({})})))):this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,this.handleCopyEvent)):this.options.preventCopyPaste&&this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){this.options.readOnly&&r.f.preventDefault(t)}),{eventonreadonly:!0})),
"color"!=this.options.type||n.Z.isIEAllVersion()||n.Z.isSpartan()||this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleColorChangeEvent)),this.options.maxlength>=0&&!this.options.useMaxLength&&(this.render.maxLength=this.options.maxlength,this.originalMaxLength=this.options.maxlength),this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory)),this.options.preventCopyPaste&&(this.options.readOnly||this.options.disabled)&&this.setStyle("pointerEvents","none")}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setActionEditFormat=function(){try{this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeyDownDynamicMask)),this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleDynamicMask)),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyUpDynamicMask)),this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurDynamicMask)),this.event.addListener(this.render,"onfocus",this.event.bindAsEventListener(this,this.handleFocusValueEventAdvMask)),this.options.mandatory&&this.onPropertyChange("mandatory",n.Z.getBoolean(this.options.mandatory))}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.refresh=function(){try{if(this.modelControl.isBinded()&&!this.noRefresh){var t=this._getValue(),e=this.modelControl.getData(),i=n.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof i&&(e=i.call(this,e,this.getDisplayValue())),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(e=WebSquare.date.getIOFormatDate(e,this.options.ioFormat)),this._getMaskFormat()&&(e=this.maskFormatModelUnFormat(e)),this._editFormat&&(this._editValue=e),this.setValueNM(e),t!=this._getValue()&&r.f.fireEvent(this,"onchange",{oldValue:t,newValue:this._getValue()})}this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.commit=function(){try{var t=this._getValue();if(("bigDecimal"===this.options.dataType||"float"===this.options.dataType)&&t[t.length-1]===this.options.decimalDelimiter)return;this._setValue(t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setValue=function(t){try{var e,i=this.options.setValueHandler;if(i){var s=n.Z.getGlobalFunction(i,this.scope_id);"function"==typeof s&&(e=s.call(this,t))}else e=this._setValue(t);return this._oldValue=this._getValue(),e}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._setValue=function(t,e){try{if(n.Z.isNull(t))return;t=this._trim(t),this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength&&(t=this.adjustMaxLength(t));var i=this._getValue(),s=n.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id);"function"==typeof s&&(t=s.call(this,t,this.getDisplayValue())),this._getMaskFormat()&&(t=this.maskFormatModelUnFormat(t)),e&&!0===e.skipNM||this.setValueNM(t,!1,e),this.options.useMonthYearFormat&&"date"===this.options.dataType&&(t=WebSquare.date.getIOUnFormatDate(t,this.options.ioFormat));var o=n.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id),h=t;"function"==typeof o&&(t=o.call(this,t,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(t)):h!==t?this.modelControl.setData(t,null,{orgValue:h}):this._editFormat?this.removeSignValue===t&&this.modelControl.setData(t):this.modelControl.setData(t),this._editFormat&&this.removeSignValue===t&&(this._editValue=t),i!=this._getValue()&&r.f.fireEvent(this,"onchange",{oldValue:i,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setValueNM=function(t,e,i){try{if(n.Z.isNull(t))return;if(t=this._trim(t),"bigDecimal"==this.getDataType()){var s=this.options.decimalDelimiter||"."
;if("number"==typeof t)if(h.v.printLog("Warning : BigDecimal Datatype, then you must enter a string instead of a number to get the exact data.["+this.id+"]"),this.useBigDecimalFloat){var o=(r=(t=t.toString()).split(s))[1]?r[1].length:0;t=Big(t.toString()).toFixed(o)}else t=Big(t.toString()).toFixed();else if(t.constructor==Big)t=t.toFixed();else if("string"==typeof t)try{if(""===t)t="";else if(!this._getMaskFormat())if(this.useBigDecimalFloat){var r;o=(r=t.split(s))[1]?r[1].length:0;t=Big(t).toFixed(o)}else t=Big(t).toFixed()}catch(t){h.v.printLog("Warning : You must enter the exact number of data.["+this.id+"]")}}else t=t.toString();var l="",d="",p=document.activeElement===this.render&&!e;if(this._getMaskFormat()||"all"!=this.options.applyFormat||e||this._editFormat)t=p||this._editFormat?t:this.formatter.format(t);else{d=this.formatter.executeFormat(t),d=this.validator.validateString(d);for(var m=0;m<d.length;m++)l+=d.charAt(m),this.formatter.format(l,!0);t=p?t:this.formatter.executeFormat(t)}if(this._editFormat){var u=!1;if(this.options.displayFormatter){var c=n.Z.getGlobalFunction(this.options.displayFormatter,this.scope_id);"function"==typeof c&&(t=c(t),u=!0)}if(!0!==u)if(""===t)!0!==this.linkedList.isEmpty()&&(this.removeSignValue=t,this.render.value=t,this.linkedList.clear());else{this._getValue()!==t&&this.linkedList.clear();var f=this._checkValueEditFormat(t),g=i&&i.eventType&&"blur"===i.eventType?this.removeSignValue:t,y=WebSquare.text.whichMask(g,this.removeSignToken);if(!0!==f)return;var v=WebSquare.text.maskit2(g,y,this._editTokens,this.linkedList);!0!==n.Z.isEmptyObject(v)&&(this.render.value=v.value,this._editValue=v.orgValue,this.renderRealValue=v.realValue,this.removeSignValue=v.orgValue,t=this.render.value)}}else e&&"all"==this.options.applyFormat?(t=this.validator.validateString(t),t=this.formatter.format(t)):this._getMaskFormat()&&"all"==this.options.applyFormat&&(t=this.formatter.format(t));this.options.placeholder&&!this.supportPlaceholder?0==t.length?(this.hasClass("w2input_placeholder")||this.addClass("w2input_placeholder"),this.render.value=this.options.placeholder):(this.removeClass("w2input_placeholder"),this.render.value!==t&&(this.render.value=t)):this.render.value!==t&&(this.render.value=t),this.realValue=t}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getValue=function(){try{var t,e=this.options.getValueHandler;if(!e){if(t=this._getValue(),!0===this.options.maskFormatModelExcludeCharValue&&(t=this.maskFormatModelFormat(t)),("euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&this.parentControl&&this.parentControl.options&&"gridView"!=this.parentControl.options.pluginName){var i=n.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof i&&(t=i.call(this,t))}return t}var s=n.Z.getGlobalFunction(e,this.scope_id);if("function"==typeof s)return s.call(this)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._getValue=function(){try{var t;return t=this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value,this._getMaskFormat()&&"all"==this.options.applyFormat?t:this._editFormat?this._editValue:this.formatter.unformat(t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setFocusSize=function(t){try{if(1==this.options.focusCalcSize&&-1==this.getStyle("height").indexOf("%")&&-1==this.getStyle("width").indexOf("%")){
var e=parseInt(this.getStyle("height")),i=parseInt(this.getStyle("width")),s=this.focusStyleObj.paddingLeft+this.focusStyleObj.paddingRight+this.focusStyleObj.borderLeftWidth+this.focusStyleObj.borderRightWidth-(this.originalStyleObj.paddingLeft+this.originalStyleObj.paddingRight+this.originalStyleObj.borderLeftWidth+this.originalStyleObj.borderRightWidth),o=this.focusStyleObj.paddingTop+this.focusStyleObj.paddingBottom+this.focusStyleObj.borderTopWidth+this.focusStyleObj.borderBottomWidth-(this.originalStyleObj.paddingTop+this.originalStyleObj.paddingBottom+this.originalStyleObj.borderTopWidth+this.originalStyleObj.borderBottomWidth);1==t&&0==this.focusedSizeFlag?(this.setStyle("height",e-o+"px"),this.setStyle("width",i-s+"px"),this.focusedSizeFlag=!0):0==t&&1==this.focusedSizeFlag&&(this.setStyle("height",e+o+"px"),this.setStyle("width",i+s+"px"),this.focusedSizeFlag=!1)}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setVerticalAlign=function(){try{if(n.Z.isIE()){var t=this.getSize("height")||parseInt(this.getStyle("height"));isNaN(t)||this.setStyle("lineHeight",t+"px")}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.onPropertyChange=function(t,e){try{switch(t){case"disabled":1==e?this.addClass(this.render,"w2input_disabled"):this.removeClass(this.render,"w2input_disabled");break;case"readOnly":1==e?this.addClass(this.render,this.options.readOnlyClass):this.removeClass(this.render,this.options.readOnlyClass);break;case"mandatory":var i=this.options.parentEvent;i&&i.options&&"searchbox"===i.options.pluginName&&i.onPropertyChange(t,e),1==e?this.addClass(this.render,"w2input_mandatory"):this.removeClass(this.render,"w2input_mandatory")}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getFormattedValue=function(){try{return this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&this.hasClass("w2input_placeholder")?"":this.render.value}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.validate=function(){try{if(!0===this.options.skipValidate&&0==this.realValue.length)return!0;var t=this.validator.validate(this._getValue());return t||this.focus(),t}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.validateObject=function(){try{if(!0===this.options.skipValidate&&0==this.realValue.length)return{};var t=this.validator.validate(this._getValue()),e={};return t||(this.focus(),this.validator&&this.validator.obfuscator_invalidObject&&(e.callerId=this.validator.obfuscator_invalidObject.callerId,e.type=this.validator.obfuscator_invalidObject.getType(),e.value=this.validator.obfuscator_invalidObject.getValue())),e}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.adjustMaxLength=function(t){try{if(this.options.useMaxLength)return t;if(this.options.maxlength>0){var e=(t+="").substr(0,1),i=parseInt(this.originalMaxLength,10);"-"!=e&&"+"!=e||(i+=1),this.setMaxLength(i),this.render.maxLength=i}return t}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getDataType=function(){try{return this.options.dataType}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setDataType=function(t){try{if(!t||"euro"==t||"rupee"==t||"tenge"==t)return;this.options.dataType=t,this._refreshOption()}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._refreshOption=function(t){try{void 0!==t&&null!=t||(t={});var e=this.options.dataType;if("all"==this.options.applyFormat&&""==this.options.displayFormatter&&"bigDecimal"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e&&(this._changeApplyFormat=!0,this.options.applyFormat="display"),""==this.options.displayFormat||!0===t.refreshDisplayFormat)switch(this.options.dataType){case"date":this.options.displayFormat=this.options.dateMask;break;case"time":this.options.displayFormat=this.options.timeMask;break;case"float":this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".");break;case"bigDecimal":case"number":
this.options.displayFormat=this.options.numberMask,this.options.delimiter||this.options.delimeter||(this.options.delimiter=","),this.options.decimalDelimiter||this.options.decimalDelimeter||(this.options.decimalDelimiter=".")}"bigDecimal"===this.options.dataType&&this.options.useBigDecimalFloat&&parseFloat(this.options.maxlength)>0&&!this._getMaskFormat()&&(this.useBigDecimalFloat=!0);var i=this.options.dataType;"bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number");var s=this._getValue();switch(this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),"default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id)),this.validator.clearCommand(),this.validator=new d.N.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"bigDecimal":case"number":""==this.options.displayFormat?this.validator.addCommand(new d.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.N.numberCommand),this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break;case"float":this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat));break;case"euro":this.validator.addCommand(new d.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter))}"string"==typeof t.refreshValue?this._setValue(t.refreshValue):this.setValueNM(s)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._setFormat=function(t,e){try{for(var i in t)i in this.options&&"string"==typeof t[i]&&(this.options[i]=t[i]);this._refreshOption(e)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setDisplayFormat=function(t){try{this.options.displayFormat=t;var e=this._getValue()
;"number"===this.options.dataType&&("default"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("numberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("textMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):"reverse"==this._getMaskFormat()?"number"==this.options.dataType||"bigDecimal"==this.options.dataType?this.formatter=WebSquare.format.createFormatter("reverseNumberMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter("reverseTextMask",this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id):this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),""==this.options.displayFormat?(this.validator.removeCommand(new d.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.N.allowCharCommand("+\\-.0-9"))):(this.validator.removeCommand(new d.N.allowCharCommand("+\\-.0-9")),this.validator.addCommand(new d.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0))),this.formatter.setMasking(t),this.setValueNM(e)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setIoFormat=function(t,e){try{if("date"!==this.options.dataType)return;var i={};if("string"==typeof e&&e!==this.options.dateMask&&(i.refreshDisplayFormat=!0),"string"==typeof t&&t!==this.options.ioFormat){var s=WebSquare.format.createFormatter(this.options.dataType,t,"",this.options.ioFormat,null,null,this.scope_id,this.id);i.refreshValue=s.format(this._getValue())}this._setFormat({ioFormat:t,dateMask:e},i)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setEditFormat=function(t){try{if(this._editFormat||this.setActionEditFormat(),void 0!==t&&t.length>0){var e=this.getValue(),i=this._editFormat;if(this._preEditFormat(t),e.length>0){var s;!0!==this._checkValueEditFormat(this.removeSignValue)&&(this._preEditFormat(i.join("||")),e=this.removeSignValue),s=WebSquare.text.whichMask(e,this.removeSignToken);var o=WebSquare.text.maskit2(e,s,this._editTokens,this.linkedList);!0!==n.Z.isEmptyObject(o)&&(this.render.value=o.value,this._editValue=o.orgValue,this.renderRealValue=o.realValue)}}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._checkValueEditFormat=function(t){try{var e="",i=!0;if(!0!==this.linkedList.isEmpty())t===this._getValue()&&this.linkedList.removeValues("sign");else{i=!1;var s=WebSquare.text.whichMask(t,this.removeSignToken),o=0;if(""===s)return!1;for(var r=0;r<s.key.length;r++)for(var n=o;n<t.length;n++){"#"===s.key[r]||"*"===s.key[r]||"X"===s.key[r]||"S"===s.key[r]?(this.linkedList.insertAt(r,t[n],"value"),o++):this.linkedList.insertAt(r,s.key[r],"sign");break}this.linkedList.removeValues("sign")}var l=WebSquare.text.insertValidationLength(this.removeSignToken,this._editFormat,this.linkedList.print().join(""));if(!0===l?!1===(l=WebSquare.text.insertCharValidationFormat(this.removeSignToken,this.linkedList.print().join(""),this._editTokens,this.linkedList))&&(e=" During the input process, the validation check for the input value has failed. "):e=" During the input process, the length validation check has failed. ",!0===l)return!0;if(!1===i&&(this.linkedList.clear(),""!==this.removeSignValue)){
s=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken);WebSquare.text.maskit2(this.removeSignValue,s,this._editTokens,this.linkedList)}return h.v.printLog("Warning : Execution of setEditFormat failed."+e),!1}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.changeCurrency=function(t,e,i,s,o,r){try{return 1===arguments.length&&"object"==typeof arguments[0]?this._changeCurrency(arguments[0]):this._changeCurrency({type:t,format:e,delimiter:i,decimalDelimiter:s,customModelFormatter:o,customModelUnformatter:r})}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._changeCurrency=function(t){try{var e=t.type||"",i=t.format,s=t.delimiter||"",r=t.decimalDelimiter||"",h=t.customModelFormatter,l=t.customModelUnformatter;if(!e||"float"!==e&&"number"!==e&&"euro"!==e&&"rupee"!==e&&"tenge"!==e)return;this.options.decimalDelimiter;"number"===e&&"true"===this.options.floatNumber&&(e="float");var p=this.getValue(),m=e;switch(e){case"number":case"float":case"bigDecimal":m="number",i||(this.options.numberMask||(this.options.numberMask=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/numberMask/@value')||""),i=this.options.numberMask),this.options.delimiter=s||",",this.options.decimalDelimiter=r||".";break;case"euro":i||(this.options.euroMask||(this.options.euroMask=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/euroMask/@value')||""),i=this.options.euroMask),this.options.delimiter=s||".",this.options.decimalDelimiter=r||",";break;case"rupee":i||(this.options.rupeeMask||(this.options.rupeeMask=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/rupeeMask/@value')||""),i=this.options.rupeeMask),this.options.delimiter=s||",",this.options.decimalDelimiter=r||".";break;case"tenge":i||(this.options.tengeMask||(this.options.tengeMask=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+e+'"]/tengeMask/@value')||""),i=this.options.tengeMask),this.options.delimiter=s||" ",this.options.decimalDelimiter=r||","}if(!i)return;if(this.options.dataType=e,this.options.displayFormat=i,void 0!==h?this.options.customModelFormatter=h:this.options.customModelFormatter||(this.options.customModelFormatter=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+m+'"]/customModelFormatter/@value')||""),void 0!==l?this.options.customModelUnformatter=l:this.options.customModelUnformatter||(this.options.customModelUnformatter=o.I.getConfiguration('/WebSquare/input/dataType[@valueType="'+m+'"]/customModelUnformatter/@value')||""),this._changeApplyFormat&&(this.options.applyFormat="all"),this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.validator.clearCommand(),this.validator=new d.N.validateInvoker(this.id,this.options),"float"===this.options.dataType||this.useBigDecimalFloat)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){var u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.N.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.N.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"}else this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);if("number"===this.options.dataType)this.validator.addCommand(new d.N.numberCommand(this.options.delimiter,this.options.decimalDelimiter)),
this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0);else if("euro"===this.options.dataType||"rupee"===this.options.dataType||"tenge"===this.options.dataType)if(this.options.maxlength>=0||-1!==(this.options.maxlength+"").indexOf("*")||this.floatMaxlength>=0){u=this.floatMaxlength>=0?this.floatMaxlength:this.options.maxlength;this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.N.maxFloatLengthCommand(u,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.N.maxLengthCommand(u)),this.floatMaxlength=u,this.options.maxlength="-1"}else this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat),!0);this.formatter.setMasking(i),"function"==typeof(l=n.Z.getGlobalFunction(this.options.customModelUnformatter,this.scope_id))&&(p=l.call(this,p)),this.setValueNM(p)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getDisplayFormat=function(){try{return this.options.displayFormat}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setDisplayFormatter=function(t){try{var e=this._getValue();if(this.options.displayFormatter=t,this.formatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this.options.displayFormat){var i;this.displayFormatter=WebSquare.format.createFormatter(this.options.dataType,this.options.displayFormat,"",this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),e=this.originalHashValue[e]||e,e=this.displayFormatter.format(e),i=this.displayFormatter.hash_format_to_original,this.originalHashValue=i}this.setValueNM(e)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getDisplayFormatter=function(){try{return this.options.displayFormatter}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getDisplayValue=function(){try{return this.formatter.format(this._getValue())}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getIOValue=function(){try{return this._getValue()}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getIOFormat=function(){try{return this.options.ioFormat}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.getIOFormatter=function(){try{return this.options.ioFormatter}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setInitValue=function(t){try{var e=this._getValue();this.setValueNM(this.options.initValue),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(this.options.initValue)):this.modelControl.setData(this.options.initValue),t&&t.fireEvent&&e!=this._getValue()&&r.f.fireEvent(this,"onchange",{oldValue:e,newValue:this._getValue()}),this.broadcast({linkedDataList:["refresh"]})}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setDefaultValue=function(t){try{"string"==typeof t&&(this.options.initValue=t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.checkMaxByteLength=function(t){void 0!==t&&null!=t||(t={});var e=!1;if(-1!=this.options.maxByteLength||this._isNumberType()&&this.options.maxLength>0){var i=this.render.value;if(this.options.validateOnCheckMaxByteLength){var s=this.validator.validateString(i);i!==s&&(e=!0),i=s,this.render.value=i,this.realValue=i}"all"==this.options.applyFormat&&(i=this.validator.validateString(i));var a=i;-1!=this.options.maxByteLength&&i!=(a=n.Z.getStringByByteSize(i,this.options.maxByteLength,this.options.byteCheckIgnoreChar))&&(this.reFocus=!0,e=!0,this._focusStatus="cancel",this.setValueNM(""),this.blur(),this.render.focus(),"all"==this.options.applyFormat?this.setValueNM(a):(this.render.value=a,this.realValue=a));var h=a.charAt(a.length-1),l=!1
;if(this.options.autoFocus&&!0!==n.Z.isKorean(h)&&!0!==t.ctrlKey)if(n.Z.getByteLength(a)==this.options.maxByteLength)l=!0;else if(this._isNumberType()&&this.options.maxLength>0){var d=this.options.decimalDelimiter||".",p=(i=i.toString()).split(d),m=p[0],u=p[1],c=this.options.maxLength.toString().split(d),f=c[1]?parseInt(c[1]):0,g=c[0]?parseInt(c[0]):0;u&&u.length>0?f>0&&u.length>=f&&(l=!0):m.length>0&&!f&&g>0&&m.length>=g&&(l=!0)}if(l){if("spinner"===this.options.pluginName&&this.parentControl)return void((y=n.Z.getNextTabbableComp(this.parentControl.id))&&y.focus(t.e));if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID){var y;(y=n.Z.getNextTabbableComp(this.id))&&(this._keyDownStart||e)&&y.focus(t.e)}else{var v=n.Z.getGlobalFunction(o.I.getConfiguration("/WebSquare/nextTabFunction/@value"));"function"==typeof v&&v.call(this,this.id)}}this.options.validateOnInput||!0===t.skipFireEvent||!0===n.Z.isKorean(h)||n.Z.getByteLength(a)!=this.options.maxByteLength||r.f.fireEvent(this,"oneditfull")}},m.prototype.handlePasteEvent=function(t){var e,i;if("paste"==t.type){var s;if(t.clipboardData)s=t.clipboardData;else{if(!window.clipboardData)return;s=window.clipboardData}if(""!=(e=s.getData("Text"))){var o=this.formatter.masking,a=this.valueType;i=void 0!==a&&null!=a&&"number"==a?WebSquare.text.unformatCurrency(o,e):void 0!==a&&null!=a&&"date"==a?WebSquare.text.unformatDate(o,e):void 0!==a&&null!=a&&"time"==a?WebSquare.text.unformatTime(o,e):WebSquare.text.unformatText(o,e),s.setData("Text",i),r.f.stopPropagation(t)}}},m.prototype.handlePasteValidator=function(t){var e="";if("paste"==t.type){var i,s;if(t.clipboardData)i=t.clipboardData;else{if(!window.clipboardData)return;i=window.clipboardData}if(e=i.getData("Text"),"function"==typeof this._customPasteFormatter){var o=this._customPasteFormatter.call(this,e);e=o||e}if("number"==this.options.dataType){var a=this.render.value.wq_trim();"."!==a&&"-"!==a&&"+"!==a||(this.render.value="")}var n=WebSquare.text.getSelection(this.render);s="all"==this.options.applyFormat?this._getValue():this.render.value;var h=WebSquare.text.getCaretPos(this.render),l=e.length;e=s.substring(0,n.start)+e+s.substring(n.end),e=this.validator.validateString(e),this.setValueNM(e,!1),WebSquare.text.setCaretPos(this.render,h+l),r.f.preventDefault(t)}},m.prototype.setRef=function(t){try{this.modelControl.isBinded()||(this.modelControl.useRef=!0),this.options.ref=t,this.modelControl.setRef(t),this.refresh()}catch(t){a.Y.printStackTrace(t)}},m.prototype.unbindRef=function(){try{this.modelControl.isBinded()&&(this.modelControl.unbindRef(),this.options.ref="",this.refresh())}catch(t){a.Y.printStackTrace(t)}},m.prototype.setPlaceholder=function(t){try{if(n.Z.isNull(t))return;if(WebSquare.uiplugin.input.placeholder&&(this.supportPlaceholder=!0),this.options.placeholder!=t)if(this.options.placeholder=t,this.options.original_placeholder=t,this.supportPlaceholder){var e=document.getElementById(this.id);this.options.showPlaceHolderOnReadOnly||!e.disabled&&!e.readOnly?e.placeholder=this.options.placeholder:this.options.placeholder=""}else 0==this.realValue.length&&(this.options.showPlaceHolderOnReadOnly||!this.render.disabled&&!this.render.readOnly?this.hasClass("w2input_placeholder")?this.render.value=this.options.placeholder:(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")):this.options.placeholder="")}catch(t){a.Y.printStackTrace(t)}},m.prototype.getDataListInfo=function(){try{var t={};return this.modelControl.isDataCollectionRefBinded?(t.id=this.modelControl.dataCollectionRefInfo.dataComp.id,t.ref=this.options.ref,t):null}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.setAllowChar=function(t){try{if(n.Z.isNull(t))return!1;if(this.options.allowChar!=t){var e=this._getValue();this.options.allowChar=t.wq_trim();var i=this.options.dataType;switch("bigDecimal"==i&&(i=!0===this.useBigDecimalFloat?"float":"number"),
"default"==this._getMaskFormat()?i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"numberMask":"textMask":"reverse"==this._getMaskFormat()&&(i="number"==this.options.dataType||"bigDecimal"==this.options.dataType?"reverseNumberMask":"reverseTextMask"),this.formatter=WebSquare.format.createFormatter(i,this.options.displayFormat,this.options.displayFormatter,this.options.ioFormat,this.options.delimiter,this.options.decimalDelimiter,this.scope_id,this.id),this._getMaskFormat()&&this.formatter.setAllowChar(this.options.allowChar),this.validator=new d.N.validateInvoker(this.id,this.options),this.options.dataType){case"date":case"time":break;case"euro":this.validator.addCommand(new d.N.euroCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"rupee":this.validator.addCommand(new d.N.rupeeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"tenge":this.validator.addCommand(new d.N.tengeCommand(this.options.delimiter,this.options.decimalDelimiter));break;case"number":case"bigDecimal":if("number"===this.options.dataType||!this.useBigDecimalFloat){""==this.options.displayFormat?this.validator.addCommand(new d.N.allowCharCommand("+\\-.0-9")):(this.validator.addCommand(new d.N.numberCommand),this.validator.addCommand(new d.N.digitCommand(this.options.delimiter,this.options.decimalDelimiter),!0));break}case"float":this.floatMaxlength>=0?(this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat)),this.validator.addCommand(new d.N.maxFloatLengthCommand(this.floatMaxlength,this.options.decimalDelimiter,this.options.delimiter)),this.validator.removeCommand(new d.N.maxLengthCommand(this.floatMaxlength)),this.options.maxlength="-1"):this.validator.addCommand(new d.N.floatCommand(this.options.delimiter,this.options.decimalDelimiter,this.options.applyFormat))}var s=this.formatter.unformat(e),o=this.validator.validateString(s);this.setValueNM(o),this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(o=WebSquare.date.getIOUnFormatDate(o,this.options.ioFormat));var r=n.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);return"function"==typeof r&&(o=r.call(this,o,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(o)):this.modelControl.setData(o),this.noRefresh=!1,!0}}catch(t){a.Y.printStackTrace(t)}return!1},m.prototype.maskFormatModelFormat=function(t){try{if(!t)return t;var e="";if(this._getMaskFormat())if(this.options.maskFormatModelExcludeChar)for(var i=this.options.maskFormatModelExcludeChar.split(""),s=0;s<t.length;s++){for(var o=!1,r=0;r<i.length;r++)if(t[s]==i[r]){o=!0;break}o||(e+=t[s])}else e=t;else e=t;return e}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.maskFormatModelUnFormat=function(t){try{if(!t)return t;var e=t;if(this._getMaskFormat()&&this.options.maskFormatModelNumber&&("number"==this.options.dataType||"bigDecimal"==this.options.dataType)&&(e=t.toString(),this.options.displayFormat&&this.options.displayFormat.indexOf(".")>0))for(var i=e.indexOf(".")<0?0:e.length-e.indexOf(".")-1,s=0;s<this.options.displayFormat.length-this.options.displayFormat.indexOf(".")-i-1;s++)0==s&&e.indexOf(".")<0&&(e=t+"."),e+="0";return e}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._checkKorean=function(t,e,i){try{var s=n.Z.isKorean(t);if(s||e){var o=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken),r=WebSquare.text.maskit2(this.removeSignValue,o,this._editTokens,this.linkedList);this.render.value=r.value;var l=s?i-1:i;this.render.setSelectionRange(l,l);return h.v.printLog("Warning : [korean] During the input process, the validation check for the input value has failed."),!1}return!0}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleBlurEventBasic=function(t,e){try{e=e||{};if(this.getReadOnly()&&!this.options.readOnlyFocusEvent)return
;!0!==e.skipEditEnd&&r.f.fireEvent(this,"oneditend"),this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass);var i=this._getValue(),s=!0;"all"===this.options.applyFormat&&0===Math.abs(i)&&"-"===i.charAt(0)&&(i=i.slice(1),s=!1),this._editFormat&&(s=!1);var o={skipNM:s};this._editFormat&&(o.eventType=t.type),this._setValue(i,o);var h={value:this._oldValue};void 0===h.value&&(h.value=this.originalValue),h.value!=this._getValue()&&(r.f.fireEvent(this,"onchange",{oldValue:h.value,newValue:this._getValue()}),r.f.fireEvent(this,"onviewchange",{oldValue:h.value,newValue:this._getValue()})),r.f.fireEvent(this,"onblur",t),r.f.fireEvent(this,"onafteredit"),this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value=this.options.placeholder,this.addClass("w2input_placeholder")),n.Z.isIEAllVersion()||n.Z.isOpera()||r.f.fireEvent(this,"onfocusout",t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleFocusinEvent=function(t){this.options.autoFocus&&(this._keyDownStart=!1),this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass);var e=this.render.value;"all"!=this.options.applyFormat&&(e=this.formatter.unformat(e)),e!=this.render.value&&(this.render.value=e);var i=this,s={};n.Z.isIEAllVersion("11")?(s.onRestore=function(t){document.execCommand("undo",!1,null)},s.stopEvent=!0):s.onRestore=function(t){i.render.value=t.value};var o=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:o},s),this._oldValue=o,this._focusStatus="focusin"},m.prototype.handleBeforeFocusEvent=function(t){switch(this._focusStatus){case"init":this._focusStatus="ready";break;case"ready":this._focusStatus="cancel",this.focus();break;case"done":this._focusStatus="init"}},m.prototype.handleFocusValueEventAdv=function(t){try{if(this.options.autoFocus&&(this._keyDownStart=!1),this.getReadOnly()&&!this.options.readOnlyFocusEvent)return;if(this.options.placeholder&&!this.supportPlaceholder&&0==this.realValue.length&&(this.render.value="",this.removeClass("w2input_placeholder")),r.f.fireEvent(this,"onbeforeedit"),this.originalValue=this._getValue(),!n.Z.isIEAllVersion()){var e=this._getValue();WebSquare.historyManager.set(this.options.pluginName,this.id,{value:e},{}),this._oldValue=e}this.originalStyleObj||(this.originalStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.addClass(this.render,this.options.onFocusClass),this.focusStyleObj||(this.focusStyleObj={paddingTop:parseInt(this.getStyle("padding-top"))||0,paddingBottom:parseInt(this.getStyle("padding-bottom"))||0,paddingLeft:parseInt(this.getStyle("padding-left"))||0,paddingRight:parseInt(this.getStyle("padding-right"))||0,borderTopWidth:parseInt(this.getStyle("border-top-width"))||0,borderBottomWidth:parseInt(this.getStyle("border-bottom-width"))||0,borderLeftWidth:parseInt(this.getStyle("border-left-width"))||0,borderRightWidth:parseInt(this.getStyle("border-right-width"))||0}),this.reFocus?this.reFocus=null:"select"==this.options.editType&&this.select(),
this.setFocusSize(!0),0!=this.inputEvented||this._editFormat||(this.inputEvented=!0,this.event.addListener(this.render,"onblur",this.event.bindAsEventListener(this,this.handleBlurEventBasic,{eventonreadonly:!0})),this.event.addListener(this.render,"onkeyup",this.event.bindAsEventListener(this,this.handleKeyupEvent)),this.event.addListener(this.render,"onkeypress",this.event.bindAsEventListener(this,this.handleKeypressEvent)),this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),o.I.browserCheck.android&&o.I.browserVersion()>=5&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputEvent)),this._getMaskFormat()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputMask)),n.Z.isFF()&&this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.checkMaxByteLength)),this.options.validateOnInput?(this.event.addListener(this.render,"oninput",this.event.bindAsEventListener(this,this.handleInputValidator)),this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))):this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))):this.options.preventCopyPaste?this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))):this.options.customPasteFormatter&&"string"==typeof this.options.customPasteFormatter&&(this._customPasteFormatter=n.Z.getGlobalFunction(this.options.customPasteFormatter.wq_trim(),this.scope_id),"function"==typeof this._customPasteFormatter&&this.event.addListener(this.render,"onpaste",this.event.bindAsEventListener(this,this.handlePasteValidator))),"number"==this.options.dataType&&this.setStyle("imeMode","disabled"),this.options.preventCopyPaste&&(this.setStyle("MozUserSelect","none"),this.event.addListener(this.render,"ondragstart",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))),this.event.addListener(this.render,"ondragover",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))),this.event.addListener(this.render,"ondrop",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))),this.event.addListener(this.render,"oncopy",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))),this.event.addListener(this.render,"oncut",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)}))),this.event.addListener(this.render,"oncontextmenu",this.event.bindAsEventListener(this,(function(t){r.f.stopEvent(t)})))));var i=this.render.value;if(this._editFormat){var s=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken);i=WebSquare.text.maskit2(this.removeSignValue,s,this._editTokens,this.linkedList).value}else"all"!=this.options.applyFormat&&(i=this.formatter.unformat(i));i!=this.render.value&&(this.render.value=i,"select"==this.options.editType&&this.selectFlag&&(this.select(),this.selectFlag=!1)),r.f.fireEvent(this,"onfocus",t),this._focusStatus="done"}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleKeydownEvent=function(t){try{this.options.refSync&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(this.validator.validateKeyDown(this.render,i,t)||(this.options.exceptValidKeydown.indexOf(t.keyCode)>-1?r.f.preventDefault(t):r.f.stopEvent(t)),37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){this.blurHandler=!0;var s=r.f.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t))))
}else if(27==e)this.blurHandler=!0;else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(9==e){var h;s=r.f.fireEvent(this,"oneditenter",t);if(this.tabOrderMoveStart=!1,!1!==s)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID)if("true"==this.options.nextTabByKeyDown)(h=n.Z.getPreTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,h.focus(t)),r.f.preventDefault(t);else this.tabOrderMoveStart=!0,r.f.preventDefault(t)}else if(null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID)if("true"==this.options.nextTabByKeyDown)(h=n.Z.getNextTabbableComp(this.id))&&(this.tabOrderMoveStart=!1,h.focus(t)),r.f.preventDefault(t);else this.tabOrderMoveStart=!0,r.f.preventDefault(t)}else if(8==e){var l;if(l=o.I.browserCheck.android&&o.I.browserVersion()>=5,"all"==this.options.applyFormat&&!l){i=this.render.value;var d=WebSquare.text.getCaretPos(this.render),p=i.substring(d-1,d),m=WebSquare.text.getSelection(this.render);if(("float"===this.options.dataType||"bigDecimal"===this.options.dataType&&this.useBigDecimalFloat||"euro"===this.options.dataType||"tenge"===this.options.dataType||"rupee"===this.options.dataType)&&p===this.options.decimalDelimiter)r.f.preventDefault(t),this.render.value=i.slice(0,d-1)+i.slice(d,i.length),WebSquare.text.setCaretPos(this.render,this.render.value.length+1);else if(isNaN(Number(p))&&m.start==m.end){var u=i.substring(d-2,d-1);(!isNaN(Number(u))&&""!=u||this._getMaskFormat()&&"text"==this.options.dataType&&""!=u&&new RegExp("["+this.options.allowChar+"]").test(u))&&new RegExp("[^"+this.options.allowChar+"]").test(p)&&(this.render.value=i.slice(0,d-2)+i.slice(d-1,i.length),WebSquare.text.setCaretPos(this.render,d-1))}}}else if(this.options.preventCopyPaste&&n.Z.isOpera()){if(t.ctrlKey&&(88===t.keyCode||67===t.keyCode||86===t.keyCode))return void r.f.stopEvent(t)}else this.options.autoFocus&&(this._keyDownStart=!0);if(this.options.adjustMaxLength&&"number"==this.options.dataType&&!this.options.useMaxLength){d=WebSquare.text.getCaretPos(this.render);var c=this._getValue();this.adjustMaxLength(this.render.value),0==d&&c.length==this.options.maxlength&&(189==e||109==e?this.render.value="-"+c:(187==e&&t.shiftKey||107==e)&&(this.render.value="+"+c)),this.adjustMaxLength(this.render.value)}n.Z.isOpera()&&this.checkMaxByteLength({skipFireEvent:!0,e:t}),this.beforeEditValue=this._getValue()}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleInputEvent=function(t){try{if("all"==this.options.applyFormat&&this.realValue.length-this.render.value.length==1){var e=this.realValue,i=this.render.value,s=WebSquare.text.getCaretPos(this.render);isNaN(Number(e.substring(s,s+1)))&&(this.render.value=i.slice(0,s-1)+i.slice(s,i.length),WebSquare.text.setCaretPos(this.render,s-1)),this.handleKeyupEvent({})}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleInputMask=function(t){try{if(this._getMaskFormat()&&"all"==this.options.applyFormat){var e,i=this.render.value,s=i,o=WebSquare.text.getCaretPos(this.render);if(t){var r=t.charCode?t.charCode:t.keyCode;e=r&&String.fromCharCode(r)||t.data}if(!e&&!(e=i[o-1]))return;"default"==this._getMaskFormat()&&i.length==o&&(i=i.substr(0,o));var n=!1;if("text"==this.options.dataType&&(i=this.validator.validateKeyInput(this.render,i,t).str,s.length!==i.length&&(n=!0)),"number"==this.options.dataType||"bigDecimal"==this.options.dataType?(2==i.toString().length&&"-"==i.toString()[0]&&(i=this.formatter.executeFormat(i)),i=this.validator.validateString(i)):i=this.formatter.unformat(i),i=this.formatter.format(i,!0),"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("reverse"==this._getMaskFormat())i.substr(0,i.length-1)==s&&"0"!=e&&o==s.length&&(i="-"==i[0]?"-":"");else if("default"==this._getMaskFormat())if("-"==i[0]){
if(i.substr(2,i.length-2)==s.substr(1,s.length-1)&&"0"!=e&&1==o)i="-";else if(this.options.displayFormat&&"#"==this.options.displayFormat.charAt(o-1)&&o==s.length)for(var h=1;"#"==this.options.displayFormat.charAt(o-h)&&"0"==s.charAt(o-h)&&o-h>=1;)i=i.concat("0"),h+=1}else if(i.substr(1,i.length-1)==s&&"0"!=e&&0==o)i="";else if(this.options.displayFormat&&"0"!=this.options.displayFormat.charAt(o-1)&&o==s.length){h=o-1;for(var l,d="";/[0\D]/g.test(s.charAt(h))&&"0"!=this.options.displayFormat.charAt(h)&&h>=0;)h-=1;for(l=h+=1;"0"!=this.options.displayFormat.charAt(h)&&/[0\D]/g.test(s.charAt(l))&&l<s.length&&!(this.options.displayFormat.length<h);)"#"!=this.options.displayFormat.charAt(h)&&"0"!=this.options.displayFormat.charAt(h)?(d=d.concat(this.options.displayFormat.charAt(h)),this.options.displayFormat.charAt(h)==s.charAt(l)&&(l+=1)):(d=d.concat("0"),l+=1),h+=1;for(h=d.length;/\D/g.test(d[h])&&h>=0;)h-=1;d=d.substr(0,h+1),i=i.concat(d)}if(this.render.value!=i&&(this.render.value=i),this.realValue=i,"number"==this.options.dataType||"bigDecimal"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,o),/\d/g.test(e))if(o==s.length)if("0"===i[o-1])1==o||"-"==i[0]&&2==o?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o+1);else if("0"!==i[o]){for(;"0"!==i[o]&&o<=i.length;)o+=1;WebSquare.text.setCaretPos(this.render,o-1)}else"0"!=i[o]||/\d/g.test(i[o-1])?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o+1);else(/\D/g.test(i[o])||/\D/g.test(i[o-1]))&&WebSquare.text.setCaretPos(this.render,o+1);else e?"-"==e?WebSquare.text.setCaretPos(this.render,o):WebSquare.text.setCaretPos(this.render,o-1):WebSquare.text.setCaretPos(this.render,o);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,o-(s.length-i.length)),/\d/g.test(t.data)&&o==s.length&&WebSquare.text.setCaretPos(this.render,i.length));else if("text"==this.options.dataType)if("default"==this._getMaskFormat())if(WebSquare.text.setCaretPos(this.render,o),new RegExp("["+this.options.allowChar+"]").test(e))if(o==s.length){for(;o<=i.length;)o+=1;WebSquare.text.setCaretPos(this.render,o)}else new RegExp("[^"+this.options.allowChar+"]").test(i[o])||new RegExp("[^"+this.options.allowChar+"]").test(i[o-1])?WebSquare.text.setCaretPos(this.render,o+1):n&&i.length==this.options.displayFormat.length&&WebSquare.text.setCaretPos(this.render,o-1);else e?WebSquare.text.setCaretPos(this.render,o-1):WebSquare.text.setCaretPos(this.render,o);else"reverse"==this._getMaskFormat()&&(WebSquare.text.setCaretPos(this.render,o-(s.length-i.length)),new RegExp("["+this.options.allowChar+"]").test(t.data)&&o==s.length&&WebSquare.text.setCaretPos(this.render,i.length))}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleInputValidator=function(t){try{var e=this.render.value,i=!0;"all"!==this.options.applyFormat||t&&!0===t.isComposing||(i=!1);var s=this.validator.validateKeyInput(this.render,e,t);if(s.valid){if(e!==s.str&&i){var o=WebSquare.text.getCaretPos(this.render);n.Z.isIEAllVersion()||(o-=e.length-s.str.length);var h=this.render.id,l=s.str;!0===t.isComposing&&"function"==typeof requestAnimationFrame?requestAnimationFrame((function(){document.getElementById(h).value=l})):this.render.value=l,WebSquare.text.setCaretPos(this.render,o)}}else r.f.stopEvent(t);if(!this._getMaskFormat()){var d="";-1!=this.options.maxByteLength?d=n.Z.getStringByByteSize(this.render.value,this.options.maxByteLength,this.options.byteCheckIgnoreChar):-1!=this.options.maxLength&&this.options.maxLength.indexOf(this.options.decimalDelimiter)<0&&(d=this.render.value,"function"==typeof customModelFormatter&&(d=customModelFormatter.call(this,d)),d=(d=this.formatter.unformat(d)).split(this.options.delimiter).join(""));var p=d.charAt(d.length-1);if(d.length>0&&!0!==n.Z.isKorean(p)&&(n.Z.getByteLength(d)==this.options.maxByteLength||d.length==this.options.maxLength)){var m=this
;setTimeout((function(){r.f.fireEvent(m,"oneditfull")}),200)}}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleKeypressEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(n.Z.isFF()&&t.ctrlKey&&e)return;if("all"==this.options.applyFormat&&!this._getMaskFormat()&&(i=this.formatter.unformat(i),"number"===this.options.dataType)){var s=this.options.delimiter||",";-1!=i.indexOf(s)&&(i=i.split(s).join(""))}if(!this.validator.validateKeyPress(this.render,i,t)){if(this._isNumberType()&&this.options.validateOnInput&&this.floatMaxlength>0&&this.options.autoDecimalPoint){var o=!1;if(this.render.value.indexOf(this.options.decimalDelimiter)>-1&&(o=!0),!o)return}if(1==this.options.autoPopupInvalidMessage&&e>46&&!(e>=112&&e<=123)&&alert(this.options.invalidMessage),!0===n.Z.getBoolean(this.options.fireEventOnInvalid)&&this.validator.obfuscator_invalidObject){var h={};h.callerId=this.validator.obfuscator_invalidObject.callerId,h.type=this.validator.obfuscator_invalidObject.getType(),h.value=this.validator.obfuscator_invalidObject.getValue(),h.detail=this.validator.obfuscator_invalidObject.getDetail(),r.f.fireEvent(this,"oninputinvalid",h)}r.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleKeyupEvent=function(t){try{this.options.refSyncKeyup&&this.commit();var e=t.charCode?t.charCode:t.keyCode,i=t.ctrlKey&&86!==e||17===e;!0===this._bCtrlKeyup&&(86===e&&(this._keyDownStart=!0),this._bCtrlKeyup=!1);var s=!1,o=this.render.value;if(this._isNumberType()&&this.options.autoFocus&&!1===this.options.autoDecimalPoint&&(e>=48&&e<=57||e>=96&&e<=105||o.charAt(o.length-1)==this.options.decimalDelimiter)&&this.floatMaxlength>0){o=this.formatter.unformat(o);var h=this.options.delimiter||",";if(-1!=o.indexOf(h)&&(o=o.split(h).join("")),-1==o.indexOf(this.options.decimalDelimiter))this.beforeEditValue.length==this._integerMaxLength&&(s=!0,this.tabOrderMoveStart=!0);else if(this._fractionMaxLength>0){var l=o.split(this.options.decimalDelimiter),d=(l[0],l[1]);d&&d.length>0&&d.length>=this._fractionMaxLength&&(s=!0,this.tabOrderMoveStart=!0)}}if(37==e);else if(38==e);else if(39==e);else if(40==e);else if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var p=this._getValue(),m=this.modelControl.getData();this.noRefresh=!0,this.options.useMonthYearFormat&&"date"===this.options.dataType&&(p=WebSquare.date.getIOUnFormatDate(p,this.options.ioFormat));var u=n.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof u&&(p=u.call(this,p,this.getDisplayValue())),this._getMaskFormat()?this.modelControl.setData(this.maskFormatModelFormat(p)):this.modelControl.setData(p),this.noRefresh=!1,m!=p&&r.f.fireEvent(this,"onchange",{oldValue:m,newValue:p})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(c=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,c.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(c=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,c.focus(t))}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(33==e);else if(34==e);else if(35==e);else if(36==e);else if(113==e);else if(16==e);else if(9==e||s){var c;if(null!=WebSquare.tabOrder[this.id]&&"true"!=this.options.nextTabByKeyDown)if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(c=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,c.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(c=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,c.focus(t))}else{if("all"==this.options.applyFormat&&!this._getMaskFormat()){p="";if(90==e&&t.ctrlKey){var f=WebSquare.historyManager.get(this.options.pluginName,this.id)
;void 0===f.value&&(f.value=""),p=f.value}else p=this.render.value;var g,y,v=WebSquare.text.getCaretPos(this.render),b=WebSquare.text.getSelection(this.render);if(g=p.length,p=this.formatter.unformat(p),this.options.autoDecimalPoint&&-1==p.indexOf(this.options.decimalDelimiter)){var F=p.split(this.options.delimiter).join("");F.length>this._integerMaxLength&&(p=F.slice(0,this._integerMaxLength)+this.options.decimalDelimiter+F.slice(this._integerMaxLength,F.length))}p=this.validator.validateString(p),p=this.formatter.format(p,!0),p=this.validator.validateString(p),y=(p=this.formatter.format(p,!0)).length,this.render.value!=p&&(this.render.value=p),this.realValue=p,b.start===b.end&&WebSquare.text.setCaretPos(this.render,Math.max(v+y-g,0))}this.checkMaxByteLength({ctrlKey:i,e:t})}this.options.autoFocus&&(this._keyDownStart=!1,17===e&&(this._bCtrlKeyup=!0));var S={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?r.f.fireEvent(this.parentControl,"oneditkeyup",S,t):r.f.fireEvent(this,"oneditkeyup",S,t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleBlurEvent=function(t){try{this.setFocusSize(!1),this.removeClass(this.render,this.options.onFocusClass),this._setValue(this._getValue());var e={value:this._oldValue};void 0===e.value&&(e.value=this.originalValue),e.value!=this._getValue()&&r.f.fireEvent(this,"onchange",{oldValue:e.value,newValue:this._getValue()}),r.f.fireEvent(this,"onblur",t),this._focusStatus="init"}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleCopyEvent=function(t){try{if(this.options.readOnly&&"noFormat"==this.options.copyOnReadOnly){var e,i=this._getValue();if(n.Z.isIEAllVersion()){e=window.clipboardData;var s=this;o.I.setTimer((function(){e.setData("Text",i),o.I.clearTimer(s.id+"_handleCopyEvent")}),{key:s.id+"_handleCopyEvent",caller:s,delay:1})}else(e=t.clipboardData).setData("Text",i);r.f.stopEvent(t)}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleColorChangeEvent=function(t){try{this.modelControl.isBinded()&&this.modelControl.setData(this.render.value)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleDynamicMask=function(t){try{var e,i,s=this.render.selectionStart,o=this.render.value,r="";if(!1===this._checkKorean(o,null==t.data&&!1===t.isComposing&&"deleteContentBackward"===t.inputType,s))return;!0!==n.Z.isEmptyObject(this.beforeBlockSelection)&&this.linkedList.removeRange(this.beforeBlockSelection.beforeSelectionStart,this.beforeBlockSelection.beforeSelectionEnd-1);var l=this.linkedList.print().join(""),d="",p=o.length-1;if(l===o)return void(!0!==n.Z.isEmptyObject(this.beforeBlockSelection)&&(this.beforeBlockSelection={}));for(var m=o.length-l.length;d.length<m&&p>-1;)p<s&&(d=o.charAt(p)+d),p--;for(var u="",c=0,f=0;f<d.length;f++)" "!==(u=o[p+1+f])?this.linkedList.insertAt(p+1+f-c,u,"value"):c++;s-=c;var g,y=(!0===(g=d.length===c)?p:p+1)-this.linkedList.countOneWayTarget(p,"sign","left"),v=this.removeSignValue;this.removeSignValue=this.linkedList.findExcluding("sign").join("");var b=WebSquare.text.insertValidationLength(this.removeSignToken,this._editFormat,this.removeSignValue);if(!0===b?!1===(b=WebSquare.text.insertCharValidationFormat(this.removeSignToken,this.removeSignValue,this._editTokens,this.linkedList))&&(r="Warning : During the input process, the validation check for the input value has failed. "):r="Warning : During the input process, the length validation check has failed. ",!1===b?(!0===n.Z.isEmptyObject(this.beforeBlockSelection)?this.linkedList.print().length>0&&(this.linkedList.removeRange(p+1,p+1+d.length-1-c),this.removeSignValue=this.linkedList.findExcluding("sign").join("")):(this.removeSignValue=v,this.linkedList.clear()),h.v.printLog(r)):(this.linkedList.removeValues("sign"),this.removeSignValue=this.linkedList.print().join("")),e=WebSquare.text.whichMask(this.removeSignValue,this.removeSignToken),b&&this.options.editFormatParticalMask)var F={
nowInputCharIndex:y,notFormattingLastChar:1===d.length&&"insertText"===t.inputType&&0===c};i=WebSquare.text.maskit2(this.removeSignValue,e,this._editTokens,this.linkedList,F),this.render.value=i.value,this._editValue=i.orgValue,this.renderRealValue=i.realValue;var S=-1,k=-1,C=0,M=!1===b||!0===g?0:d.length-c-1;for(f=0;f<this.linkedList.print().length;f++)if("value"===this.linkedList.findNodeAt(f).marked){if(y+M===++k)S=f;else if(y+M<k)break}else S>-1&&!0!==g&&C++;if(!0!==n.Z.isEmptyObject(this.beforeBlockSelection)&&!1===b)this.render===document.activeElement&&this.render.setSelectionRange(this.beforeBlockSelection.beforeSelectionStart,this.beforeBlockSelection.beforeSelectionEnd);else{var T=!1===b||!0===g?s-(d.length-c):S+C+1;this.render===document.activeElement&&this.render.setSelectionRange(T,T)}this.beforeBlockSelection={}}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleKeyDownDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode,i=this.render.value;if(8!==t.keyCode&&46!==t.keyCode||WebSquare.text.deleteMaskChar2(t,this,this.render),this.validator.validateKeyDown(this.render,i,t)||r.f.stopEvent(t),13==e){this.blurHandler=!0;var s=r.f.fireEvent(this,"oneditenter",t);!0===this.options.nextTabByEnter&&(this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t))))}else if(9==e){s=r.f.fireEvent(this,"oneditenter",t);this.tabOrderMoveStart=!1,!1!==s&&(t.shiftKey?null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)):null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].nextTabID&&(this.tabOrderMoveStart=!0,r.f.preventDefault(t)))}this.beforeEditValue=this._getValue(),this.options.editFormat&&t.target.selectionStart!==t.target.selectionEnd&&(this.beforeBlockSelection={beforeSelectionStart:t.target.selectionStart,beforeSelectionEnd:t.target.selectionEnd})}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleKeyUpDynamicMask=function(t){try{var e=t.charCode?t.charCode:t.keyCode;this.render.value;if(13==e){if(1==this.blurHandler&&1==this.options.useKeyupBlur)if(!0===this.options.enterBlur)this.blur(),this.blurHandler=!1;else{var i=this._getValue(),s=this.modelControl.getData();this.noRefresh=!0;var o=n.Z.getGlobalFunction(this.options.customModelFormatter,this.scope_id);"function"==typeof o&&(i=o.call(this,i,this.getDisplayValue())),this.modelControl.setData(i),this.noRefresh=!1,s!=i&&r.f.fireEvent(this,"onchange",{oldValue:s,newValue:i})}if(!0===this.options.nextTabByEnter)if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(h=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(h=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus(t))}else if(27==e)1==this.blurHandler&&1==this.options.useKeyupBlur&&(this.blur(),this.blurHandler=!1);else if(9==e){var h;if(null!=WebSquare.tabOrder[this.id])if(t.shiftKey){if(null!=WebSquare.tabOrder[this.id].preTabID)(h=n.Z.getPreTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus(t))}else if(null!=WebSquare.tabOrder[this.id].nextTabID)(h=n.Z.getNextTabbableComp(this.id))&&this.tabOrderMoveStart&&(this.tabOrderMoveStart=!1,h.focus(t))}this.options.autoFocus&&(this._keyDownStart=!1);var l={oldValue:this.beforeEditValue,newValue:this._getValue(),keyCode:e};"spinner"===this.options.pluginName&&this.parentControl?r.f.fireEvent(this.parentControl,"oneditkeyup",l,t):r.f.fireEvent(this,"oneditkeyup",l,t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.handleBlurDynamicMask=function(t){try{this.handleBlurEventBasic(t)}catch(t){
a.Y.printStackTrace(t,null,this)}},m.prototype.handleFocusValueEventAdvMask=function(t){try{this.handleFocusValueEventAdv(t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype.focus=function(t){try{this.render.focus();var e=Number(this.options.nextTabFocusPosition);"select"==this.options.editType?this.render.select():e>=1&&t&&/^(on)*keydown$|^(on)*keyup$/.test(t.type)&&WebSquare.text.setCaretPos(this.render,e-1)}catch(t){a.Y.printStackTrace(t)}},m.prototype.select=function(t){try{this.selectFlag=!0,this.render.select()}catch(t){a.Y.printStackTrace(t)}},m.prototype.setDisabled=function(t){try{if(t=n.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.disabled=t,this.setProperty("disabled",t),this.options.preventCopyPaste&&this.setStyle("pointerEvents","none")}else this.options.disabled=t,this.setProperty("disabled",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.options.preventCopyPaste&&!this.options.readOnly&&this.setStyle("pointerEvents","")}catch(t){a.Y.printStackTrace(t)}return t},m.prototype.setReadOnly=function(t){try{if(t=n.Z.getBoolean(t)){if(this.options.placeholder||this.options.original_placeholder){var e=this.options.placeholder||this.options.original_placeholder;this.options.showPlaceHolderOnReadOnly||this.setPlaceholder(""),this.options.original_placeholder=e}this.options.readOnly=t,this.setProperty("readOnly",t),this.options.preventCopyPaste&&this.setStyle("pointerEvents","none")}else this.options.readOnly=t,this.setProperty("readOnly",t),(this.options.placeholder||this.options.original_placeholder)&&this.setPlaceholder(this.options.original_placeholder),this.options.preventCopyPaste&&!this.options.disabled&&this.setStyle("pointerEvents","")}catch(t){a.Y.printStackTrace(t,null,this)}return t},m.prototype.serialize=function(){return{value:this._getValue()}},m.prototype.restore=function(t){try{this._setValue(t.value)}catch(t){return a.Y.printStackTrace(t,null,this),!1}return!0},m.prototype._trim=function(t){try{var e=t+"";return this.options.trim?t=e.wq_trim():(this.options.ltrim&&(t=e.replace(/^\s+/,"")),this.options.rtrim&&(t=e.replace(/\s+$/,""))),t}catch(e){return a.Y.printStackTrace(e,null,this),t}},m.prototype.setImeMode=function(t){try{this.setStyle("imeMode",t)}catch(e){return a.Y.printStackTrace(e,null,this),t}},m.prototype.getFocusedComponentId=function(){try{var t=this.parentControl&&this.parentControl.options&&this.parentControl.options.pluginName;if("grid"===t||"gridView"===t)return this.parentControl.id}catch(t){a.Y.printStackTrace(t,null,this)}return this.id},m.prototype._isNumberType=function(){try{var t=this.options.dataType;return!(!t||"float"!=t&&"number"!=t&&"bigDecimal"!=t&&"euro"!=t&&"tenge"!=t&&"rupee"!=t)}catch(t){a.Y.printStackTrace(t,null,this)}},m.prototype._getMaskFormat=function(){try{return"none"!==this.options.maskFormat&&this.options.maskFormat&&(this.options.maskFormat&&this.options.displayFormat)?this.options.maskFormat:""}catch(t){a.Y.printStackTrace(t,null,this)}}}}]);