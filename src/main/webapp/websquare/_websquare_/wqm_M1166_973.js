"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[973],{973:(t,e,i)=>{i.r(e),i.d(e,{wq_window:()=>p});var o=i(582),s=i(2536),n=i(2710),r=i(9107),a=i(1263),d=i(2327),h=i(7249),l=i(4885),p=function(t,e,i){h.q.call(this,t,e,i)};o.q.extend(p.prototype,h.q.prototype),p.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!0,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",windowMaximizeAll:!1,minVisibleWindowPixel:20,frameModal:"",processMsgFrame:!1,msaName:"",fixPosition:!1,accessibility:!1,_targetId:""},p.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"true"===s.I.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=a.Z.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==s.I.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0),!0===this.options.fixPosition&&(this.windowInfo.drag=!1)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.toHTML=function(){try{var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",s=""==this.options.style?"":"style='"+this.options.style+"'",r="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",d="overflow"===this.options.windowMoveType?" w2window_window_move_type":""
;this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+s+" class='w2window "+r+" "+this.options.className+d+"' tabindex='0' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>")),a.Z.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>");var h="w2window_header",l="w2window_body";1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",l+=" w2window_body_extend");var p=a.Z.getDataPrefix("btn_index");if(""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<span id='"+this.id+"_header_icon' class='w2window_header_icon'></span>"):e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<h2 id='"+this.id+"_header_title' class='w2window_header_title_h2'>"+this.options.windowTitle+"</h2>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var u=0;u<this.buttonInfo.buttons.length;u++){var w=this.buttonInfo.buttons[u].title||"";if(this.buttonInfo.useButtonFormatter){c=this.buttonInfo.buttons[u].className||"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_custom_button "+c+"' "+p+"='"+u+"' title='"+w+"' ></div>")}else{var c=this.buttonInfo.buttons[u].className?" "+this.buttonInfo.buttons[u].className:"",m=this.buttonInfo.buttons[u].value?"<span id='"+this.id+"_header_button_"+u+"_value' class='w2window_header_button_value' title='"+w+"' "+p+"='"+u+"' > "+this.buttonInfo.buttons[u].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_button w2window_header_button_"+u+"' "+p+"='"+u+"' >"),e.push("<div id='"+this.id+"_header_button_"+u+"_content' class='w2window_header_button_content w2window_header_button_content_"+u+c+"' "+p+"='"+u+"' >"),e.push(m),e.push("</div>"),e.push("</div>")}}e.push("</div>")}if(!0!==this.options.accessibility){var f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>")}var g=this.options.disableCloseButton?" w2window_close_disabled":"";this.options.useATagBtn?a.Z.isMobile()?e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):!0!==this.options.accessibility&&e.push("<div id='"+this.id+"_close' class='w2window_close"+g+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),
1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");if(this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+l+"'>"):e.push("<div id='"+this.id+"_body' class='"+l+" w2window_no_status'>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),!0===this.options.accessibility){var y=a.Z.getDataPrefix("refId");f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<button type='button' id='"+this.id+"_minimize' class='w2window_minimize' aria-label='"+WebSquare.language.getMessage("Window_minimize")+"'"+y+"="+this.id+"></button>"),e.push("<button type='button' id='"+this.id+"_restore' class='w2window_restore' aria-label='"+WebSquare.language.getMessage("Window_restore")+"'"+y+"="+this.id+" ></button>"),e.push("<button type='button' id='"+this.id+"_close' class='w2window_close"+g+"' aria-label='"+WebSquare.language.getMessage("Window_close")+"'"+y+"="+this.id+"></div>")}return this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setAction=function(){try{!0===this.options.accessibility&&(this.render.setAttribute("role","dialog"),this.render.setAttribute("aria-labelledby",this.id+"_header_title'"),this.options.parent||this.render.setAttribute("aria-modal","true")),this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),this.dom.header&&this.dom.header.setAttribute("data-title",this.options.windowTitle),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),a.Z.isTouchDevice()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))):this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),
1==this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.drawFrame(this.options.src);a.Z.getDataPrefix("btn_index");if(this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({dataBtn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"float","right"),WebSquare.style.setStyle(s,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"height",s.offsetHeight-5+"px"),WebSquare.style.setStyle(s,"padding-top","5px")}}this.options.useInitialSizePosition&&this.restore(!0),"overflow"===this.options.windowMoveType&&this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"tabControl"==_this.parentControl.parentControl.options.pluginName||"tabControl"==this.parentControl.parentControl.options.inheritFrom)&&(this._windowMoveType="overflow")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory,msaName:this.options.msaName})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=l.o.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=l.o.initAsync(),a=this.uuid;o.then((function(t,e){WebSquare.idCache[a]._activateFrame()}))}else if("pageFrame"==this.options.frameMode){i=this.org_id||this.id;this.frame=l.o.create(i+"_pageFrame",{className:"w2window_pageFrame",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"pageFrame",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;o=l.o.initAsync(),a=this.uuid;o.then((function(t,e){WebSquare.idCache[a]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var h=this.uuid;"iframe"==this.options.frameMode?this.frame.bind("onload",(function(){var t=WebSquare.idCache[h];if(WebSquare.event.fireEvent(t,"ondrawcomplete"),1!=t.options.noAttatchedEvent)try{var e=t.frame,i=e.getWindow();if(i){var o={_wq_type:"onwindowloaded",origin:location.origin,uuid:t.uuid},r=s.I._getOrigin(e.getSrc());r&&i.postMessage(o,r)}
}catch(t){n.Y.printStackTrace(t,null,this)}})):this.frame.bind("onload",(function(){r.f.fireEvent(WebSquare.idCache[h],"ondrawcomplete")}));var p="on"+this.frame.options.pluginName+"load";this.frame.bind(p,(function(){r.f.fireEvent(WebSquare.idCache[h],"onwindowload")}));var u="on"+this.frame.options.pluginName+"unload";this.frame.bind(u,(function(){null!=WebSquare.idCache[h]&&r.f.fireEvent(WebSquare.idCache[h],"onwindowunload")})),"iframe"==this.options.frameMode?this._activateFrame():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){d.v.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.frame.activate(),this.addControl(this.frame)}catch(t){d.v.printLog("error : window.drawFrame["+this.id+"]")}},p.prototype.resizeForIE6=function(t,e,i){try{if(a.Z.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){n.Y.printStackTrace(t,null,this)}if(t&&"object"==typeof t||(t={}),this.options.closeAction){var e=a.Z.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}if(!0===t.sync?this._close(!0===t.skipRemove):a.Z.setTimeout(this._close,{key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),1==this.options.accessibility&&""!=this.options._targetId){var i=this.options._targetId;a.Z.requestAnimationFrame((function(){var t=document.getElementById(i);t&&t.focus()}))}return!0}catch(t){n.Y.printStackTrace(t,null,this),this._closed=!1}},p.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};r.f.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),
this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},p.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||r.f.fireEvent(this,"onminimize")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0,this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="none",this.getElementById(this.id+"_resize2").style.display="none",this.getElementById(this.id+"_resize3").style.display="none",this.getElementById(this.id+"_resize4").style.display="none",this.getElementById(this.id+"_resize5").style.display="none",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="none",this.getElementById(this.id+"_resize7").style.display="none",this.getElementById(this.id+"_resize8").style.display="none"))}else{this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="",this.getElementById(this.id+"_resize2").style.display="",this.getElementById(this.id+"_resize3").style.display="",this.getElementById(this.id+"_resize4").style.display="",this.getElementById(this.id+"_resize5").style.display="",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="",this.getElementById(this.id+"_resize7").style.display="",this.getElementById(this.id+"_resize8").style.display=""));var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,s=this.render.clientHeight,a=this.getMaxSize(),d=a.width,h=a.height,l=parseInt(this.windowInfo.width,10)-o,p=parseInt(this.windowInfo.height,10)-s,u=e,w=i,c=0,m=0;if(this.parentControl&&(c=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+l<0&&(u=0),e+l>d+m?u=o<=d?d-(o+l)+m:0:m>u&&(u=m),i+p<0&&(w=0),i+p>h){if(s<=h){if((w=h-(s+p))<c)return w=c,this.setStyle("height",h-c+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(w=0+c,s>h)return h-=c,this.setStyle("height",h+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else c>w&&(w=c);this.setPosition(u,w),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}r.f.fireEvent(this,"onminimize")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.popup=function(){try{r.f.fireEvent(this,"onpopup")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";r.f.fireEvent(this,"onmaximize")}catch(t){n.Y.printStackTrace(t,null,this)}},
p.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",!0!==this.options.fixPosition&&(this.windowInfo.drag=!0),this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||r.f.fireEvent(this,"onrestore")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));else"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.setSrc(t,e)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.movable=function(t){try{t=a.Z.getBoolean(t),this.windowInfo.drag=t}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.showModal=function(t){try{if(r.f.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",a.Z.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",a.Z.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!a.Z.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.hideModal=function(){try{r.f.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!a.Z.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setFocus=function(){try{a.Z.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.focus()}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype._focus=function(){try{a.Z.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),
this.render)&&(t=t-(parseInt(a.Z.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(a.Z.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(a.Z.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},p.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(a.Z.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(a.Z.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(a.Z.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},p.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&r.f.stopPropagation(t)),e.match("w2window_minimize")&&(r.f.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&r.f.stopPropagation(t),r.f.fireEvent(this,"onminimizebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){var i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};r.f.fireEvent(this.parentControl.parentControl,"onminimizebtnclick",i)}if(e.match("w2window_restore")&&(this.toggleResize(),this.options.frameModal&&r.f.stopPropagation(t),r.f.fireEvent(this,"onrestorebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};r.f.fireEvent(this.parentControl.parentControl,"onrestorebtnclick",i)}e.match("w2window_popup")&&(r.f.stopEvent(t),this.popup())}e=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleFrameMouseDownEvent=function(t){try{r.f.fireEvent(this,"onwindowmousedown",t)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleDblclickEvent=function(t){try{if(!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoverEvent=function(t){try{for(var e=a.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.addClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.addClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.addClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.addClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.addClass(o,"w2window_header_button_content_on")}i=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseoutEvent=function(t){try{r.f.stopEvent(t)
;for(var e=a.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.removeClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.removeClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.removeClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.removeClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.removeClass(o,"w2window_header_button_content_on")}i=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=a.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&r.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var o=r.f.getTarget(t);if(!o||o.id==this.id+"_minimize"||o.id==this.id+"_restore"||o.id==this.id+"_close"||o.id==this.id+"_popup")return;var s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",windowDragMove:this.options.windowDragMove,makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),n=o.width,r=o.height;return n=n-(parseInt(a.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(n,r),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===s.options.windowDragMove?(s.showModal.call(s,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(s.showModal.call(s),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,r){s.render.offsetLeft;var d,h,l=s.render.offsetTop,p=(s.render.clientWidth,s.render.clientHeight,(S=s.getMaxSize()).width),u=S.height,w=0,c=0;if(s.parentControl&&(w=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft,d=WebSquare.style.getAbsoluteLeft(s.parentControl.render),h=WebSquare.style.getAbsoluteTop(s.parentControl.render),s.frame&&("wframe"!==s.frame.getPluginName()&&"pageFrame"!==s.frame.getPluginName()||(d-=c,h-=w))),!0!==s.options.windowDragMove){if(1==s.options.displayParentWindowScroll&&!s.options.frameModal)try{var m=a.Z.getStyleProperty(document.documentElement,"overflow");if(("auto"==m||"scroll"==m)&&!s.modal)return}catch(r){n.Y.printStackTrace(r,null,this)}s.frame&&"iframe"===s.frame.getPluginName()?(r.clientX<d+40||r.clientX>p+d-40||l+o+1-w<0||r.clientY+20+w>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(r):"overflow"===s.options.windowMoveType?(r.clientX<d+20&&i<0||r.clientX>p+d-20&&i>0||r.clientY+1<h||r.clientY>h+u-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(r):(r.clientX<d+20||r.clientX>p+d-20||r.clientY+1<h||r.clientY>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(r)}else{var f=0,g=0;try{f=WebSquare.style.getAbsoluteLeft(s.render.parentNode),g=WebSquare.style.getAbsoluteTop(s.render.parentNode)}catch(r){n.Y.printStackTrace(r,null,this)}var y=Math.max(t+i-f,0),_=Math.max(e+o-g,0),b=0,v=0;if(!s.parentControl.parentControl||"windowContainer"!=s.parentControl.parentControl.options.pluginName&&"tabControl"!=s.parentControl.parentControl.options.pluginName&&"tabControl"!=s.parentControl.parentControl.options.inheritFrom){var S=s.getMaxSize(),I=(w=s.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,s.render.offsetWidth),M=s.render.offsetHeight
;"overflow"===s.options.windowMoveType&&(I=s.options.minVisibleWindowPixel,M=s.options.minVisibleWindowPixel);var C=S.width-I,z=S.height-M-w;y=Math.min(y,C),_=Math.min(_,z)}else b=s.parentControl?s.parentControl.render.scrollLeft:0,v=s.parentControl?s.parentControl.render.scrollTop:0;s.setPosition(y+b,_+v)}},handleFinish:function(t,e,i,o){if(s.hideModal.call(s),!0!==s.options.windowDragMove){var r=s.render.offsetLeft,d=s.render.offsetTop,h=s.render.clientWidth,l=s.render.clientHeight,p=s.getMaxSize(),u=p.width,w=p.height,c=r+i,m=d+o,f=0,g=0,y=0,_=0,b=0,v=0;if(s.parentControl&&(f=document.documentElement.scrollTop||document.body.scrollTop,g=document.documentElement.scrollLeft||document.body.scrollLeft,s.options.frameModal&&(b=parseInt(s.parentControl.getStyle("border-top-width"))||0,v=parseInt(s.parentControl.getStyle("border-left-width"))||0,u=s.parentControl.render.offsetWidth-v,w=s.parentControl.render.offsetHeight-b,h=s.render.offsetWidth,l=s.render.offsetHeight,s.render.offsetParent!==s.parentControl.render&&(d-=y=s.parentControl.render.offsetTop,r-=_=s.parentControl.render.offsetLeft))),1==s.options.displayParentWindowScroll&&!s.options.frameModal||"overflow"===s.options.windowMoveType)try{var S=a.Z.getStyleProperty(document.documentElement,"overflow");"auto"!=S&&"scroll"!=S&&"overflow"!==s.options.windowMoveType||(u=Math.max(u,h,r+h+i),w=Math.max(w,l,d+l+o))}catch(t){n.Y.printStackTrace(t,null,this)}"overflow"!==s.options.windowMoveType&&r+i<0&&(c=_+v),r+h+i>u+g?c=h<=u?u-h+g+_:_:"overflow"!==s.options.windowMoveType&&g>c&&(c=g),d+o<0&&(m=y+b),d+l+o>w?l<=w?(m=w-l+y)<f&&(m=f,s.render.style.height=w-f+"px"):(m=0+f,l>w&&(w-=f,s.render.style.height=w+"px")):f>m&&(m=f),s.setPosition(c,m)}}})}if(i.match("w2window_header_button")){r.f.stopEvent(t);var d=i.getElement().getAttribute(e);if(!(p=this.buttons[Number(d)]).disable)try{var h=this.buttonInfo.buttons[d].clickAction;if("function"==typeof h)h.apply(this,this);else{var l=a.Z.getGlobalFunction(h,this.scope_id);"function"==typeof l&&l(this)}}catch(t){n.Y.printStackTrace(t,null,this)}return}if(i.match("w2window_header_custom_button")){r.f.stopEvent(t);d=i.getElement().getAttribute(e);var p=this.buttons[parseInt(d,10)],u={uniqueId:this.id,btnId:this.id+"_header_button_"+p[e],btnIdx:p[e],disable:p.disable,hidden:p.hidden};return void(p.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&r.f.fireEvent(this.parentControl.parentControl,"onclickcustombtn",u))}var w=i.match("w2window_resize"),c=i.match("w2window_resize_bottomLeft");if((w||c)&&(r.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:w?"resize":"resize_bottomLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),n=o.width,r=o.height;return n=n-(parseInt(a.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(n,r),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,n){s.hideModal.call(s);var r="resize"===this.mode?1:-1,a=parseInt(s.getStyle("width"),10),d=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,l=s.render.offsetLeft,p=a+i*r,u=d+o;p<parseInt(s.windowInfo.minWidth,10)&&(p=parseInt(s.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),u<parseInt(s.windowInfo.minHeight,10)&&(u=parseInt(s.windowInfo.minHeight,10))
;var w,c=s.getMaxSize(),m="overflow"===s._windowMoveType?s.parentControl.render.scrollLeft:0,f="overflow"===s._windowMoveType?s.parentControl.render.scrollTop:0,g=c.height-h;if(w=1===r?c.width-l:Math.min(l+a,c.width),g+=f,(w+=m)<s.render.clientWidth+i*r&&(p=w),g<s.render.clientHeight+o&&(u=g),s.setSize(p,u),-1===r){var y=Math.max(l+i,0);s.setPosition(y,null)}}})}var m=i.match("w2window_resize_right"),f=i.match("w2window_resize_left");if((m||f)&&(r.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:m?"resize_right":"resize_left",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),n=o.width,r=o.height;return n=n-(parseInt(a.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(n,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,n){var r="resize_right"===this.mode?1:-1;s.hideModal.call(s);var a=parseInt(s.getStyle("width"),10),d=parseInt(s.getStyle("height"),10),h=a+i*r;h<parseInt(s.windowInfo.minWidth,10)&&(h=parseInt(s.windowInfo.minWidth,10),1===r?i+=a-h:i=a-h);var l="overflow"===s._windowMoveType?s.parentControl.render.scrollLeft:0,p=("overflow"===s._windowMoveType&&s.parentControl.render.scrollTop,s.getMaxSize().width);if("resize_right"===this.mode&&(p-=s.render.offsetLeft),(p+=l)<s.render.clientWidth+i*r&&(h=p),WebSquare.idCache[s._multiViewUUID]&&1!==s._direction){var u=WebSquare.idCache[s._multiViewUUID],w=parseInt(u.windowInfo.minWidth,10);h>p-w&&(h=p-w),u.setSize(parseInt(u.getStyle("width"),10)-h+a,null),u.setPosition(u.getPosition("left")+h-a,null)}if(s.setSize(h,d),s.frame&&s.frame._processMsgModal&&"block"===s.frame._processMsgModal.render.style.display&&s.frame._processMsgModal.setSize(h,d),-1===r){var c=s.getPosition("left")+i;c+h>p&&(c=p-h),c=Math.max(c,0),s.setPosition(c,null)}}})}var g=i.match("w2window_resize_bottom"),y=i.match("w2window_resize_up");if((g||y&&this.options.dragResizableHeader)&&(r.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){s=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:g?"resize_bottom":"resize_up",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),n=o.width,r=o.height;return n=n-(parseInt(a.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(n,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[s._multiViewUUID]||s.showModal.call(s)},handleFinish:function(t,e,i,o,n){var r="resize_bottom"===this.mode?1:-1;s.hideModal.call(s);var a=parseInt(s.getStyle("width"),10),d=parseInt(s.getStyle("height"),10),h=parseInt(s.getStyle("left"),10),l=parseInt(s.getStyle("top"),10),p=d+o*r;p<parseInt(s.windowInfo.minHeight,10)&&(p=parseInt(s.windowInfo.minHeight,10));"overflow"===s._windowMoveType&&s.parentControl.render.scrollLeft;var u="overflow"===s._windowMoveType?s.parentControl.render.scrollTop:0,w=s.getMaxSize(),c=w.height
;r||(c=l+d),1==r?c-=s.render.offsetTop:c=Math.min(l+d,w.height),c+=u;var m=s.render.clientHeight+o*r;if(c<p&&(p=c,1===r&&(o+=m-p)),WebSquare.idCache[s._multiViewUUID]&&1===s._direction){var f=WebSquare.idCache[s._multiViewUUID],g=parseInt(f.windowInfo.minHeight,10);p>c-g&&(p=c-g),f.setSize(null,parseInt(f.getStyle("height"),10)-p+d),f.setPosition(null,f.getPosition("top")+p-d)}else if("resize_up"===this.mode){var y=l-o*r;y<0&&(y=0),y+p>c&&(y=c-p),s.setPosition(h,y)}s.setSize(a,p)}})}if(this.options.dragResizableHeader){var _=i.match("w2window_resize_upRight"),b=i.match("w2window_resize_upLeft");if((_||b)&&(r.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){s=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:_?"resize_upRight":"resize_upLeft",minWidth:s.windowInfo.minWidth,minHeight:s.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(s.render),i=WebSquare.style.getAbsoluteTop(s.render),o=s.getElementSize(s.render),n=o.width,r=o.height;return n=n-(parseInt(a.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(a.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(a.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(n,r),t.setPosition(e,i),t},handleStart:function(){s.showModal.call(s)},handleFinish:function(t,e,i,o,n){s.hideModal.call(s);var r="resize_upRight"===this.mode?1:-1,a=parseInt(s.getStyle("width"),10),d=parseInt(s.getStyle("height"),10),h=s.render.offsetTop,l=s.render.offsetLeft,p="overflow"===s._windowMoveType?s.parentControl.render.scrollLeft:0,u="overflow"===s._windowMoveType?s.parentControl.render.scrollTop:0,w=a+i*r,c=d-o;w<parseInt(s.windowInfo.minWidth,10)&&(w=parseInt(s.windowInfo.minWidth,10),1===r?i+=a-w:i=a-w),c<parseInt(s.windowInfo.minHeight,10)&&(o=d-(c=parseInt(s.windowInfo.minHeight,10)));var m,f,g=s.getMaxSize();1===r?(m=g.width-l,f=h+d):(m=Math.min(l+a,g.width),f=Math.min(h+d,g.height));var y=d-o;(m+=p)<a+i*r&&(w=m),(f+=u)<y&&(c=f,1===r&&(o+=y-c)),s.setSize(w,c);var _=h+o,b=l;-1===r&&(_=Math.max(_,0),b=Math.max(l+i,0)),_+c>=f&&(_=f-c),s.setPosition(b,_)}})}}}i=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleMouseupEvent=function(t){try{r.f.stopEvent(t)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleFrameKeyupEvent=function(t){try{r.f.fireEvent(this,"onwindowkeyup",t)}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(a.Z.clearInterval(this.id+"_checkLoadEvent"),a.Z.fullViewed&&a.Z.zoomed(t.document.body,"1"))}}catch(t){}},p.prototype.handleSelectStartEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&r.f.preventDefault(t);e=null}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(1==this.options.accessibility&&""!=this.options._targetId){if(27==e)this.close({isCloseButtonClick:!0});else if(t.shiftKey&&9==e){if((o=a.Z._getTabbableComp(this.render)).length>=1&&t.target==o[0])if(s=document.getElementById(this.id+"_close"))return s.focus(),void r.f.preventDefault(t)}for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_close"))if(13==e||32==e)this.handleClickEvent(t);else if(t.shiftKey||9!=e){if(t.shiftKey&&9==e){if(3==(o=a.Z._getTabbableComp(this.render)).length)return o[2].focus(),void r.f.preventDefault(t)}}else{var o,s;if((o=a.Z._getTabbableComp(this.render)).length>=1)o[0].focus(),r.f.preventDefault(t);else if(s=document.getElementById(this.id+"_close"))return void s.focus()}
return void(i=null)}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=a.Z.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var s=o.contentDom;i=a.Z.getBoolean(i);switch(t){case"hidden":o.visisble=i,s.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,i?this.addClass(s,"w2window_header_button_disabled"):this.removeClass(s,"w2window_header_button_disabled")}}}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!a.Z.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype.finalize=function(){try{h.q.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){n.Y.printStackTrace(t,null,this)}},p.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};r.f.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=s.I.getConfiguration("/WebSquare/clearMemory/@value");a.Z.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){d.v.printLog("WebSquare.uiplugin.window._close : skip clearMemory :"+this.id)}this.frame.setSrc("about:blank")}if(r.f.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var h=!1,l=0;l<this.options.parent.storedFrame.length;l++)if(this.options.parent.storedFrame[l]==this.id){h=!0;break}h||this.options.parent.storedFrame.push(this.id)}else this.remove&&!0!==t&&("wframe"!==this.options.frameMode&&"pageFrame"!=this.options.frameMode||r.f.fireEvent(this,"onwindowunload"),this.remove())}catch(t){n.Y.printStackTrace(t,null,this),this._closed=!1}}}}]);