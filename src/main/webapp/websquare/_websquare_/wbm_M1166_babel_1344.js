"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[1344],{1344:function(e,t,r){r.r(t),r.d(t,{wframe:function(){return m}});var a=r(2284),i=r(467),o=r(4756),s=r.n(o),n=r(6789),c=r(1599),p=r(7819),u=r(6722),l=r(6484),h=r(7712),d=r(2918),m=function(e,t,r){d.q.call(this,e,t,r)};n.q.extend(m.prototype,d.q.prototype),m.prototype.defaultOptions={pluginType:"uiplugin.wframe",pluginName:"wframe",userEvents:["onload","onwframeload","onwframeunload","onbeforewframeunload"],useConfig:!0,src:"",tagname:"div",mode:"async",scope:!1,initScript:"",postScript:"",scopeVariable:"",cloneVariable:"",linkVariable:"",scopeFunction:"$w",scopeExternal:!1,scopeValue:"",isWidget:!1,params:"",popupParam:"",initStyle:!1,preload:!1,strictFrame:!1,processMsgFrame:!1,frameModal:!1,udc2Name:"",popupAutoClose:!1,msaName:""},m.prototype.initialize=function(e){this.options.mode="async",this.createFlag=!1,(e&&"w2:wframe"===e.getTagName()||!0===this.options.preload)&&(this.createFlag=!0),this.frameDoc=null,this.wframeScript=[],this.lazyImportsArr=[],this.childAllControlList=[],this.userComponentList=[],this.userPluginList=[],this.scope={},this.scopeLazyList=[],this.scopeVariable={};var t=this.options.pluginName;"true"===this.options.initScript&&"true"===c.I.getConfiguration("/WebSquare/"+t+"/initScript/@value")&&(this.options.initScript=c.I.getConfigurationJSON("/WebSquare/"+t+"/initScript",{type:"json"}),this.options.initScript["#cdata"]&&(this.options.initScript=this.options.initScript["#cdata"],"function"==typeof this.options.initScript&&(this.options.initScript="("+this.options.initScript.toString()+")()"))),"true"===this.options.postScript&&"true"===c.I.getConfiguration("/WebSquare/"+t+"/postScript/@value")&&(this.options.postScript=c.I.getConfigurationJSON("/WebSquare/"+t+"/postScript",{type:"json"}),this.options.postScript["#cdata"]&&(this.options.postScript=this.options.postScript["#cdata"],"function"==typeof this.options.postScript&&(this.options.postScript="("+this.options.postScript.toString()+")()"))),this.options.scope&&(""==this.options.scopeVariable&&(this.options.scopeVariable=c.I.getConfiguration("/WebSquare/spa/variable/@value")||""),""==this.options.cloneVariable&&(this.options.cloneVariable=c.I.getConfiguration("/WebSquare/spa/variable/@clone")||""),""==this.options.linkVariable&&(this.options.linkVariable=c.I.getConfiguration("/WebSquare/spa/variable/@link")||""),this.options.initScript&&(this.options.initScript=l.Z.scopingFuncBody(this.options.initScript,this.id,!0)),this.options.postScript&&(this.options.postScript=l.Z.scopingFuncBody(this.options.postScript,this.id,!0))),this.makeScopeVariable(),this.options.params&&this.parseParameter(),this.options.dataObject&&this.setDataObject(this.options.dataObject),this._isWframePopup=!1,this._scriptLazy=!1,this._clearExecuteStatus(),this._processMsgComp=null,this._processMsgModal=null,this._processMsgQueue=[],this._wframePopupModal=null,this._wframeModelStack=[],this._processMsgAjaxCnt=0,this.udc2Parent=null,this._isUDC2=!1,this._bSkipAsync=!1,this._pCount=0,this._onsetSrc=!1,this._onsetSrcAfter=null,this._pageCommonArr=[],this._cssCacheArr=[]},m.prototype.toHTML=function(){try{var e={footer:"div",header:"div",nav:"div",section:"div"},t=[],r=this.options.tagname,a=""==this.options.style?"":"style='"+this.options.style+"'",i=""==this.options.tabIndex?"":"tabIndex='"+this.options.tabIndex+"'";if(c.I.browserCheck.ie){var o=c.I.browserVersion();"6"!=o&&"7"!=o&&"8"!=o||e[r]&&(r=e[r])}if(t.push("<"+r+" id='"+this.id+"' "+a+" class='w2"+this.options.pluginName+" "+this.options.className+"' "+i+">"),this.createFlag)for(var s=this.getChildren(),n=0;n<s.length;n++)t.push(s[n].toHTML());return t.push("</"+r+">"),t.join("")}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.setChildAction=function(e){try{e=e||{};var t=this.childControlList[0];if(!t)return;this._parseBodyCss(),this._markStart2(),!0!==(e&&!0===e.skipPreActivate)&&"stop"===t.activeStatus&&t.preActivate()
;var r=[];for(var a in WebSquare.DataCollection.activated=!0,WebSquare.DataCollection.comp){var i=WebSquare.DataCollection.comp[a];i&&i.parentFrame===this.uuid&&(i.activate(),r.push(i.uuid))}WebSquare.uiplugin.wframe._increasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePreorder(this.uuid);var o=t.activate();WebSquare.uiplugin.wframe._decreasePendingWframeCount(),WebSquare.uiplugin.wframe._addWframePostorder(this.uuid),t.render=null,t.onComplete();for(var s=0;s<r.length;s++)WebSquare.idCache[r[s]].completed||WebSquare.idCache[r[s]].onComplete();var n=this.getSrc(),l=!0===this._scriptLazy&&!0!==c.I.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;if("executed"===WebSquare.scriptSectionExcuteFlag||l)if(!0===c.I.scriptPrecedence){if(o&&o.length>0){var h=this.uuid;return Promise.allSettled(o).then((function(e){var t=WebSquare.idCache[h];t._setChildActionAfter1(),t._setChildActionAfter2()})).catch((function(e){p.Y.printStackTrace(e)}))}this._setChildActionAfter1()}else{var d=e&&!0===e.preExecuted,m=!0===this._scriptLazy&&this.parentControl&&this.parentControl.parentControl&&this.parentControl.parentControl.options&&("wframe"===this.parentControl.parentControl.options.pluginName||"pageFrame"===this.parentControl.parentControl.options.pluginName),f={order:"postorder",reverse:!0};if(l&&(f.preExecuted=!0),m||!0===this.options.preload||!0===d)WebSquare.uiplugin.wframe._execute("script",f),WebSquare.uiplugin.wframe._execute("onpageload",{order:"postorder"});else{if(this.frameDoc&&"string"==typeof this.frameDoc.scriptSection&&this.frameDoc.scriptSection){var g=WebSquare.scriptIdentifier+this.getURL(this.getSrc())+'";';g+=this.frameDoc.scriptSection,WebSquare.BootLoader.globalEval(g),this.frameDoc.scriptSection=""}for(s=0;s<this.childControlList.length;s++)u.f.fireEvent(this.childControlList[s],"onpageload",n);this._executeStatus.onpageload=!0}WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}else if(!0!==c.I.scriptPrecedence){var S=e&&!0===e.preExecuted&&"preExecuted"===WebSquare.scriptSectionExcuteFlag;S&&WebSquare.uiplugin.wframe._execute("script",{order:"postorder",reverse:!0,preExecuted:!0});for(s=0;s<this.childControlList.length;s++)u.f.fireEvent(this.childControlList[s],"onpageload",n);S&&(WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending())}this._setChildActionAfter2()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._setChildActionAfter1=function(e){try{e=e||{},WebSquare.uiplugin.wframe._execute("script"),e._isProcessMsgFrame?WebSquare.uiplugin.wframe._execute("onpageload",e):WebSquare.uiplugin.wframe._execute("onpageload"),WebSquare.uiplugin.wframe._execute("postscript",{order:"postorder"}),WebSquare.uiplugin.wframe._execute("onwframeload"),WebSquare.uiplugin.wframe._execute("lazyscript"),WebSquare.uiplugin.wframe._isPending()||WebSquare.uiplugin.wframe._clearPending()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._setChildActionAfter2=function(){try{var e=this.getSrc(),t=this.childControlList[0];u.f.fireEvent(t,"onwframeload",e),u.f.fireEvent(t,"oncreated",t.options),u.f.fireEvent(this,"onload",e),!0!==c.I.scriptPrecedence&&u.f.fireEvent(this,"onwframeload",e),this._markEnd2()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.setAction=function(){try{if(this.options.initStyle){var e=document.getElementById(this.id).style.cssText,t=document.getElementById(this.id).getAttribute("class");WebSquare.initStyle[this.id]={style:e,className:t}}if(this.options.isWidget)return;if(this.createFlag){var r;if(this._isProcessMsgFrame&&(r={_isProcessMsgFrame:!0,_processMsgCompId:this.uuid}),("preExecuted"===WebSquare.scriptSectionExcuteFlag||"executed"===WebSquare.scriptSectionExcuteFlag)&&WebSquare.externalScriptArr&&WebSquare.externalScriptArr.length>0){if("sync"!==this.options.mode){var a=this.uuid
;return WebSquare.externalScriptArr.push((function(){try{var e,t=WebSquare.idCache[a];t._isProcessMsgFrame&&(e={_isProcessMsgFrame:!0,_processMsgCompId:t.uuid}),t.setChildAction(e)}catch(e){p.Y.printStackTrace(e)}})),l.Z.js.apply(null,WebSquare.externalScriptArr),void(WebSquare.externalScriptArr=[])}for(var i=0;i<WebSquare.externalScriptArr.length;i++)WebSquare.BootLoader.globalEval(c.I.load(WebSquare.externalScriptArr[i]));WebSquare.externalScriptArr=[]}this.setChildAction(r)}else{var o;this._dataObject&&(o={dataObject:this._dataObject}),this.setSrc(this.options.src,o)}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.setSrc=function(){var e=(0,i.A)(s().mark((function e(t,r){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=r||{},a=this.getSrc(),t&&""!=t){e.next=5;break}return e.abrupt("return",!1);case 5:if(this.options.src=t,t=this.getSrc(),this._bSkipAsync=!0,"active"===this.activeStatus||this.createFlag){e.next=10;break}return e.abrupt("return",!1);case 10:if(this._markStart(),!0!==this._onsetSrc){e.next=16;break}return this._onsetSrcAfter=[t,r],e.next=15,this._onsetSrcPromise;case 15:case 20:return e.abrupt("return",e.sent);case 16:return this._onsetSrc=!0,this._onsetSrcPromise=this._setSrcAfter(t,a,r),e.next=20,this._onsetSrcPromise;case 23:return e.prev=23,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,this._onsetSrcPromise=Promise.resolve(!1),e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,this,[[0,23]])})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype._setSrcAfter=function(){var e=(0,i.A)(s().mark((function e(t,r,i){var o,n,h,d,m,f,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,WebSquare.jsLoader._loadObj(this.getURL(t,i),{msaName:i.msaName||this._getMsaName()});case 3:if(!(o=e.sent)){e.next=27;break}for(n=0;n<this.childControlList.length;n++)u.f.fireEvent(this.childControlList[n],"onwframeunload",r);return l.Z.emptySelection(),i.removeAll&&(i.appendModel="replace"),"replace"==i.appendModel?this.removeFrame_old():((""==r||!r||r===t&&!0===i.reload)&&(i.reload=!1,h={keepDataObject:!0}),this.finalize(r,h)),"object"===(0,a.A)(i.dataObject)&&this.setDataObject(i.dataObject),this.makeScopeVariable(),d=WebSquare.jsLoader.getPageType(t),this.frameDoc=WebSquare.jsLoader.getPageInfo(o,d),this.frameDoc.renderStartTime=new Date,this.makeParameter(),e.next=17,this.frameDoc.parsingUDC(!0,this);case 17:return e.next=19,this.frameDoc.parsingWFrame(!0,this);case 19:return null==i.appendModel&&(this.options.scope?i.appendModel="scope":i.appendModel=!0),this.appendModels(this.frameDoc.models,null,i),m=WebSquare.uiplugin.wframe._clearPending({keepStatus:!0}),e.next=24,this.renderBody(!0);case 24:"executed"===WebSquare.scriptSectionExcuteFlag||!0!==c.I.scriptPrecedence&&"preExecuted"===WebSquare.scriptSectionExcuteFlag||(m.pendingWframePreOrderList=m.pendingWframePreOrderList.concat(WebSquare.uiplugin.wframe.__pendingWframePreOrderList),m.pendingWframePostOrderList=WebSquare.uiplugin.wframe.__pendingWframePostOrderList.concat(m.pendingWframePostOrderList)),WebSquare.uiplugin.wframe._setPending(m);case 27:if(this._onsetSrc=!1,!this._onsetSrcAfter){e.next=37;break}return f=this._onsetSrcAfter[0],g=this._onsetSrcAfter[1],this._onsetSrcAfter=null,e.next=34,this.setSrc(f,g);case 34:return e.abrupt("return",e.sent);case 37:return e.abrupt("return",!!o);case 38:e.next=47;break;case 40:return e.prev=40,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this),this._onsetSrc=!1,this._onsetSrcAfter=null,this._onsetSrcPromise=Promise.resolve(!1),e.abrupt("return",!1);case 47:case"end":return e.stop()}}),e,this,[[0,40]])})));return function(t,r,a){return e.apply(this,arguments)}}(),m.prototype.msaLoad=function(){var e=(0,i.A)(s().mark((function e(t,r,a,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,(a=a||{}).msaName=r||this._getMsaName(),
this.options.msaName=a.msaName,e.next=7,this.setSrc(t,a);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),p.Y.printStackTrace(e.t0,null,this),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t,r,a,i){return e.apply(this,arguments)}}(),m.prototype.makeFrame=function(){var e=(0,i.A)(s().mark((function e(t,r){var a,i,o,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,!this.options.strictFrame){e.next=4;break}return e.abrupt("return");case 4:if(this._markStart(),!(i="string"==typeof r&&null!=c.I.udcObj[r])){e.next=10;break}a=c.I.udcObj[r],e.next=15;break;case 10:if(!(o=this.getSrc())){e.next=15;break}return e.next=14,WebSquare.jsLoader._loadObj(this.getURL(o),{msaName:this._getMsaName()});case 14:a=e.sent;case 15:if(!a){e.next=27;break}return o&&(n=WebSquare.jsLoader.getPageType(o)),this.frameDoc=WebSquare.jsLoader.getPageInfo(a,n),this.frameDoc.renderStartTime=new Date,this.makeParameter(),e.next=22,this.frameDoc.parsingUDC(!0,this);case 22:return e.next=24,this.frameDoc.parsingWFrame(!0,this,void 0,i);case 24:return this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),e.next=27,this.renderBody(t);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(1),p.Y.printStackTrace(e.t0,null,this);case 32:case"end":return e.stop()}}),e,this,[[1,29]])})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype.initAsync=(0,i.A)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this._bSkipAsync){e.next=4;break}return e.next=3,this.makeFrame();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),m.prototype.makeFrameUDC2=function(){var e=(0,i.A)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,this.udc2Parent=t,e.next=5,this.makeFrame(null,this.options.udc2Name);case 5:this._udc2Mapping(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.Y.printStackTrace(e.t0,null,this);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),m.prototype.makeFrameSync=function(e,t,r){try{if(this.options.strictFrame)return;var a;this._markStart();var i,o="string"==typeof t&&null!=c.I.udcObj[t];if(o)a=c.I.udcObj[t];else if(t&&t.constructor===WebSquare.pageInfo)a=t.getPageInfo();else{var s=this.getSrc();s&&(a=WebSquare.jsLoader._loadObj(this.getURL(s),{msaName:this._getMsaName()}))}if(a)s&&(i=WebSquare.jsLoader.getPageType(s)),this.frameDoc=WebSquare.jsLoader.getPageInfo(a,i),this.frameDoc.renderStartTime=new Date,this.makeParameter(),this.frameDoc.parsingUDC(!0,this),o?this.frameDoc.parsingUDC2Sync(!0,this):this.frameDoc.parsingWFrame(!0,this,!0),this.appendModels(this.frameDoc.models,null,{appendModel:!this.options.scope||"scope"}),this.renderBody(e,r)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.makeFrameUDC2Sync=function(e,t,r){try{this.udc2Parent=e,this.makeFrameSync(t,this.options.udc2Name,r),this._udc2Mapping()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getSrc=function(){try{return this._getMsaSrc()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getMsaSrc=function(e){try{e=e||{};var t=this.options.src;if(""==t)return"";var r=c.I.getPageURL(t,{skipURL:!0,skipUri:!0,msaName:e.msaName||this._getMsaName()});if(!0===e.msaSrc)"string"!=typeof r||r.startsWith("/")||r.startsWith("\\")||r.indexOf("://")>=0||(r=this._getMsaHome()+r);return r}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getMsaSrc=function(e,t){try{return(t=t||{}).msaSrc=!0,e&&(t.msaName=e),this._getMsaSrc(t)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getMsaName=function(){try{if(this.options.msaName)return this.options.msaName;if(this.scope_obj)return this.scope_obj._getMsaName()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getMsaHome=function(){try{var e=this.options.src,t=n.q.w2xHome
;if("string"!=typeof e)return t;var r=c.I._msaServerHash[this.options.msaName];if(r){var a=e.lastIndexOf("/");return a>=0?e.slice(0,a)+"/":r.w2xHome||t}return this.scope_obj?this.scope_obj._getMsaHome():t}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.appendModels=function(e,t,r){try{if("replace"==(r=r||{}).appendModel)return void this.replaceModels(e);if("scope"==r.appendModel)return void this.scopeModels(e,t,r);var a=WebSquare.ModelUtil.getModelByID(t);if(a)for(var i=0;i<e.length;i++){if(r.appendModel)for(var o=a.instances[0].document,s=e[i].instances[0].document.childNodes,n=0;n<s.length;n++)o.appendChild(s[n].cloneNode(!0));a.binds=a.binds.concat(e[i].binds);for(var c=0;c<e[i].submissions.length;c++){var u=e[i].submissions[c];u.parentElement=a.element,a.submissions.push(u)}for(var l=0;l<e[i].workflows.length;l++){var h=e[i].workflows[l];h.parentElement=a.element,a.workflows.push(h)}}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.replaceModels=function(e){try{WebSquare.WebSquaredoc.models.splice(0,WebSquare.WebSquaredoc.models.length),WebSquare.WebSquaredoc.models=WebSquare.WebSquaredoc.models.concat(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.scopeModels=function(e,t,r){try{var a=WebSquare.ModelUtil.getModelByID(t);if(a&&"scope"==r.appendModel)for(var i=0;i<e.length;i++){if(e[i].instances&&e[i].instances.length>0){var o;a.instances&&a.instances.length>0&&(o=a.instances[0].xmlNode.parentNode);for(var s=e[i].instances,n=0,c=s.length;n<c;n++){for(var u=s[n].xmlNode.cloneNode(!0),l=u.firstChild;null!=l&&1!=l.nodeType;l=l.nextSibling);var h=new WebSquare.Model.Instance(u,l,null);h.scope_id=this.id;var d=h.xmlNode;d.setAttribute("scopeId",this.id),a.instances.push(h),o&&o.appendChild(d)}}a.binds=a.binds.concat(e[i].binds);for(var m=0;m<e[i].submissions.length;m++){var f=e[i].submissions[m];f.parentElement=a.element,a.submissions.push(f)}for(var g=0;g<e[i].workflows.length;g++){var S=e[i].workflows[g];S.parentElement=a.element,a.workflows.push(S)}}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.remove=function(){try{if(!0===this._removed)return;if(this.options.strictFrame){for(var e in window[this.id]&&(window[this.id]=null),this)delete this[e];return}for(var t in this.finalize(),this.activeStatus="finalize",null!=this.render&&WebSquare.removeNode(this.render),this.parentControl&&this.parentControl.removeControl(this),WebSquare.getBody().childControlList)WebSquare.getBody().childControlList[t]==this&&WebSquare.getBody().childControlList.splice(t,1);this.destroy(),l.Z.emptySelection()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.finalize=function(e,t){try{var r=new Date;if(!0!==c.I.scriptPrecedence)for(var a=0;a<this.childControlList.length;a++)u.f.fireEvent(this.childControlList[a],"onpageunload");for(a=0;a<this.childControlList.length;a++)u.f.fireEvent(this.childControlList[a],"onbeforepageunload");var i=e||this.getSrc(),o=this.options.pluginName.toLowerCase();if(u.f.fireEvent(this,"onbefore"+o+"unload",i),this.popupList){a=0;for(var s=this.popupList.length;a<s;a++){var n=this.popupList[a];if(n){var d=WebSquare.getBody();if(this._parentFrameUUID)d=WebSquare.idCache[this._parentFrameUUID];var m=n.id;if(d){if(null!=d.stackComponents)for(var f in d.stackComponents){var g=d.stackComponents[f];if(m)for(var S=d.stackComponents[f].length-1;S>=0;S--)if(g[S].id===m){g.splice(S,1),d.modalStack.pop();break}}d.modalStack.pop()}n.close(),WebSquare.uiplugin.popup.removeFromPopupList(m)}}}this.hideProcessMessage(),null!=this._processMsgComp&&(this._processMsgComp.remove(),this._processMsgComp=null),null!=this._processMsgModal&&(this._processMsgModal.remove(),this._processMsgModal=null),null!=this._wframePopupModal&&(this._wframePopupModal.remove(),this._wframePopupModal=null);for(var b=[];this.childAllControlList.length>0;){var _;if(_=!0===c.I.scriptPrecedence?this.childAllControlList.shift():this.childAllControlList.pop(),
(C=WebSquare.idCache[_])&&(!0!==C._isWframePopup||!0===this.options.popupAutoClose||this.options.frameModal))if(null==WebSquare.DataCollection.comp[C.id]){WebSquare.isPrintLog=!1,"function"==typeof C.finalize&&C.finalize(),WebSquare.isPrintLog=!0,"function"==typeof C.unbind&&C.unbind(),C.event&&C.event.clearCache(),C.modelControl&&(C.modelControl.unbindRef(),C.modelControl.unbindItemset()),WebSquare.getBody().getLayerListener().remove(C.id),C.childControlList=[];if(C.options){var y={secret:"input",selectbox:"select1",radio:"select1",multiselect:"select",checkbox:"select",checkcombobox:"select",switch:"Switch"}[C.options.pluginName]||C.options.pluginName;delete(WebSquare.componentsCache[y]||WebSquare.componentsCache[C._wTagName]||{})[C.uuid],c.I.memoryLeakComponent[y]&&(c.I.memoryLeakComponentCount+=c.I.memoryLeakComponent[y])}if(window[WebSquare.noConflict].comp[C.id]=null,delete window[WebSquare.noConflict].comp[C.id],window[WebSquare.noConflict].data[C.id]=null,delete window[WebSquare.noConflict].data[C.id],window[C.id])try{window[C.id]=null,(!l.Z.isIE()||parseInt(c.I.browserVersion(),10)>8)&&delete window[C.id]}catch(e){window[C.id]=null}if(null!=C.render){if(C._closed&&C.frame&&C._isWframePopup){var v=C.frame.paramObj.popupID;v&&WebSquare.uiplugin.popup.removeFromPopupList(v);var W=C._targetFrameObjUUID,q=WebSquare.strictModeFrame?WebSquare.strictModeFrame.uuid:"";if(C.options.frameModal&&W&&W!==q){var k=WebSquare.idCache[W];k&&k.hideFrameModal(v)}}WebSquare.removeNode(C.render)}WebSquare.idToUUID[C.id]=null,delete WebSquare.idToUUID[C.id],c.I._removeObject(C,{directKey:"setValue,setDisabled,setLabel,toHTML,setAction,remove,finalize"}),C._removed=!0,C=null,WebSquare.idCache[_]=null,delete WebSquare.idCache[_]}else b.push(_)}for(a=b.length-1;a>=0;a--){var C;null!=(C=WebSquare.idCache[b[a]])&&WebSquare.DataCollection.api.remove(C.id,{uuid:C.uuid})}this.childAllControlList=[];for(a=0;a<this.childControlList.length;a++){var w=this.childControlList[a];for(!0===c.I.scriptPrecedence&&u.f.fireEvent(w,"onpageunload");w.childControlList&&w.childControlList.length>0;){var P=w.childControlList.pop();null!=P.uuid&&P.remove()}w.render=null,w.remove()}for(var M in this.childControlList=[],this.scopeVariable)null!=window[this.id+"_"+M]&&(window[this.id+"_"+M]=null,!l.Z.isIE()||parseInt(c.I.browserVersion(),10)>8?delete window[this.id+"_"+M]:window[this.id+"_"+M]=null);this.scope={},this.scopeVariable={},this.scopeLazyList=[];for(a=0;a<this.userComponentList.length;a++)l.Z.loadedUserComponent[this.userComponentList[a]]=null,delete l.Z.loadedUserComponent[this.userComponentList[a]];this.userComponentList=[];for(a=0;a<this.userPluginList.length;a++)l.Z.loadedUserComponentPluginName[this.userPluginList[a]]=null,delete l.Z.loadedUserComponentPluginName[this.userPluginList[a]];this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(t);var x=new Date;h.v.printLog(this.options.pluginName+" unloading["+this.id+"]. Time:"+(x-r)+"ms");var T=null==e?this.getSrc():e;u.f.fireEvent(this,"on"+o+"unload",T),WebSquare.uiplugin.dateHelper&&null!=WebSquare.uiplugin.dateHelper._currentDate&&delete WebSquare.uiplugin.dateHelper._currentDate[this.id],this.wframeSubPopup&&(this.wframeSubPopup=[]),this.stackComponents={},this.modalStack=[]}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.removeFrame=function(){try{this.finalize()}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.removeFrame_old=function(){try{h.v.printLog("Wframe unloading start.["+this.id+"]");for(var e=0;e<this.childControlList.length;e++)u.f.fireEvent(this.childControlList[e],"onpageunload");WebSquare.DataCollection.stopBroadCast=!0,WebSquare.dragdrop2={droppable:{},scrollable:{},scrollByDragDelay:300,scrollByDragSpeed:50};var t=WebSquare.getBody();for(var r in WebSquare.idCache){var a=WebSquare.idCache[r]
;a!==t&&a!==this&&("function"!=typeof a.remove||a.remove==d.q.prototype.remove||a.options&&("wframe"==a.options.pluginName||"pageFrame"==a.options.pluginName||"pageInherit"==a.options.pluginName)?(WebSquare.isPrintLog=!1,"function"==typeof a.finalize&&a.finalize(),WebSquare.isPrintLog=!0,"function"==typeof a.unbind&&a.unbind(),a.event&&a.event.clearCache(),WebSquare.useVisibleHelper&&a.render&&a.render.parentNode&&a!=WebSquare.body&&a.render.parentNode.removeChild(a.render),a.childControlList=[],window[a.id]&&(window[a.id]=null)):a.remove())}t.getLayerListener().removeAll(),WebSquare.idCache={},WebSquare.idCache[t.uuid]=t,WebSquare.idCache[this.uuid]=this,window[WebSquare.noConflict].comp={},window[WebSquare.noConflict].comp[this.id]=this,WebSquare.idToUUID={},WebSquare.idToUUID[t.id]=t.uuid,WebSquare.idToUUID[this.id]=this.uuid,WebSquare.WebSquaredoc.itemsetElement=[],WebSquare.WebSquaredoc.refElement=[],WebSquare.componentsCache={},WebSquare.componentsCache[t.options.pluginName]={},WebSquare.componentsCache[t.options.pluginName][t.uuid]=!0,WebSquare.componentsCache[this.options.pluginName]={},WebSquare.componentsCache[this.options.pluginName][this.uuid]=!0,this.childAllControlList=[],this.childControlList=[],this.scope={},this.scopeVariable={},this.userComponentList=[],this.userPluginList=[],null!=this.render&&WebSquare.removeChildren(this.render),this.removeCommon(),c.I.clearCommon(),WebSquare&&WebSquare.strictModeFrame&&(WebSquare.strictModeFrame.remove(),WebSquare.strictModeFrame=null),h.v.printLog("Wframe unloading finished.["+this.id+"]")}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.removeCommon=function(e){try{if(void 0!==e&&null!=e||(e={}),this.wframeScript=[],null!=this.frameDoc){for(;this.frameDoc.cssList.length>0;){var t=this.frameDoc.cssList.shift(),r=t&&t.href&&t.href.toString();r=r||"";var a=l.Z._getAbsolutePath(r);WebSquare.skin._decreaseCache(a,t)}this.frameDoc.cssList=[];for(var i=0;i<this._cssCacheArr.length;i++){var o=this._cssCacheArr[i];WebSquare.skin._decreaseCache(o)}if(this.frameDoc.models&&this.frameDoc.models.length>0){var s=this.frameDoc.models[0].submissions,n=WebSquare.WebSquaredoc.models[0].submissions;for(i=0;i<s.length;i++){for(var u=0;u<WebSquare.layer.submissionIDQueue.length;u++)WebSquare.layer.submissionIDQueue[u]==s[i].id&&(WebSquare.layer.submissionIDQueue.splice(u,1),WebSquare.layer.submissionMessageQueue.splice(u,1));for(var h=0;h<n.length;h++)if(s[i].id===n[h].id&&s[i].ref===n[h].ref){n[h].dead=!0,c.I.useSubmissionGlobal&&(window[n[h].id]=null),n[h].parentElement=null,n.splice(h,1);break}}var d=this.frameDoc.models[0].workflows;for(n=WebSquare.WebSquaredoc.models[0].workflows,i=0;i<d.length;i++)for(h=0;h<n.length;h++)if(d[i].id===n[h].id&&d[i].ref===n[h].ref){n[h].promiseStatus="REJECT",c.I.useWorkflowGlobal&&(window[n[h].id]=null),n[h].parentElement=null,n.splice(h,1);break}}for(var m in this.frameDoc)this.frameDoc[m]=null,delete this.frameDoc[m]}!0!==e.keepDataObject&&this._removeDataObject(),this.frameDoc=null}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.onPropertyChange=function(e,t){try{if("disabled"===e)for(var r=0;r<this.childControlList.length;r++){var a={componentId:this.childControlList[r].id,disabled:t};l.Z.setDisabled(a)}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.onComplete=function(){try{if(null!=this.frame_dc_list){for(var e=0;e<this.frame_dc_list.length;e++)WebSquare.idCache[this.frame_dc_list[e]].completed||WebSquare.idCache[this.frame_dc_list[e]].onComplete();delete this.frame_dc_list}d.q.prototype.onComplete.call(this)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getObj=function(e){try{return this.scope[e]}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getObjList=function(){try{var e=[];for(var t in this.scope)e.push(t);return e}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getWindow=function(){try{return this.options.scope?this.scope:window}catch(e){p.Y.printStackTrace(e,null,this)}},
m.prototype.makeScopeVariable=function(e){try{var t=0;if(this.options.scope&&this.options.scopeVariable)for(var r=this.options.scopeVariable.split(","),a=0;a<r.length;a++){var i=r[a].wq_trim(),o=t>0?String(t):"";t++,this._makeScopeVariable(i,WebSquare.noConflictFunction+o,e)}if(this.options.scope&&this.options.cloneVariable)for(r=this.options.cloneVariable.split(","),a=0;a<r.length;a++){var s=r[a].wq_trim();o=t>0?String(t):"";t++,this._makeCloneVariable(s)}if(this.options.scope&&this.options.linkVariable)for(r=this.options.linkVariable.split(","),a=0;a<r.length;a++){var n=r[a].wq_trim();o=t>0?String(t):"";t++,this._makeLinkVariable(n)}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._makeScopeVariable=function(e,t,r){try{if(this.scopeVariable[e]={},this.scope[e]=this.scopeVariable[e],!0!==r&&(window[this.id+"_"+e]=this.scopeVariable[e]),this.options.scopeFunction){this.scopeVariable[e][this.options.scopeFunction]=new WebSquare.uiplugin.wframe.scope(this.uuid);var a=this.scopeVariable[e][this.options.scopeFunction];for(var i in WebSquare.api)"data"!==i&&"comp"!==i&&null==a[i]&&(a[i]=WebSquare.api[i]);for(var o in a.data=new WebSquare.uiplugin.wframe.scope.data(this.id),a.model=new WebSquare.uiplugin.wframe.scope.model(this.id),a.bigDecimal=new WebSquare.uiplugin.wframe.scope.bigDecimal(this.id),a.bigDecimal._scopeId=this.id,a.id=this.id+"_",WebSquare.api.data)null==a.data[o]&&"function"==typeof WebSquare.api.data&&(a.data[o]=WebSquare.api.data[o]);this.options.scopeFunction!==WebSquare.noConflict&&null!=window[e]&&null==window[e][this.options.scopeFunction]&&n.q.extend(window[e][this.options.scopeFunction],WebSquare.api),t&&(this.scope[t]=this.scopeVariable[e][this.options.scopeFunction])}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._makeCloneVariable=function(e){try{this.scopeVariable[e]={},"object"===(0,a.A)(window[e])&&null!=window[e]&&(this._isUDC2,this.scopeVariable[e]=c.I._copyCommon(e,this)),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._makeLinkVariable=function(e){try{if("object"!==(0,a.A)(window[e])||null==window[e])return;this.scopeVariable[e]=WebSquare.jsonUtil.cloneNode(window[e],!0,[],[],0,!0),this.scope[e]=this.scopeVariable[e],window[this.id+"_"+e]=this.scopeVariable[e]}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.makeLazyScopeVariable=function(){try{if(this.options.scope&&this.options.scopeVariable){var e=this.options.scopeVariable;this.options.cloneVariable&&(e+=","+this.options.cloneVariable);for(var t=e.split(","),r=0;r<t.length;r++)for(var a=t[r].wq_trim(),i=r>0?String(r):"",o=WebSquare.noConflictFunction+i,s=0;s<this.scopeLazyList.length;s++)WebSquare.idCache[this.scopeLazyList[s]].scope[a]=this.scopeVariable[a],WebSquare.idCache[this.scopeLazyList[s]].scope[o]=this.scopeVariable[a][this.options.scopeFunction]}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._addScopeVariable=function(e){try{if(this.options.scope&&this.options.scopeVariable){var t=this.options.scopeVariable;this.options.cloneVariable&&(t+=","+this.options.cloneVariable);for(var r=t.split(","),a=0;a<r.length;a++){var i=r[a].wq_trim(),o=a>0?String(a):"",s=WebSquare.noConflictFunction+o;WebSquare.idCache[e].scope[i]=this.scopeVariable[i],WebSquare.idCache[e].scope[s]=this.scopeVariable[i][this.options.scopeFunction]}}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._udc2Mapping=function(){try{var e=this.udc2Parent;if(!e)return;var t={};for(var r in e._reservedName)for(var a=0;a<e._reservedName[r].length;a++)t[e._reservedName[r][a]]=!0;var i=this.options.cloneVariable.split(","),o={};for(a=0;a<i.length;a++)o[i[a]]=!0;var s,n=WebSquare.Elem.api.getElementsByTagName(this.frameDoc.getPageInfo(),"publicInfo",c.I._XML_NAMESPACE.W2)[0];if(n){var u=WebSquare.Parser.parseAttribute(n);for(var r in s={method:{},submission:{},component:{}},u){var l=u[r].split(",");for(a=0;a<l.length;a++)s[r][l[a].wq_trim()]=!0}}
for(var r in this.scopeVariable)if(!0!==o[r]){var h=this.scopeVariable[r];for(var d in h)d!==this.options.scopeFunction&&!0!==t[d]&&(s&&!0!==s.method[r+"."+d]||(e[d]=h[d]))}for(var r in this.scope){var m=this.scope[r];null!=m&&(s?(!0===s.component[r]&&m.uuid&&WebSquare.idCache[m.uuid]===m&&m.id!==m.uuid&&m.org_id!==m.uuid||!0===s.submission[r]&&"submission"===m._pluginName)&&(e[r]=m):e[r]=m)}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.setMode=function(e){try{this.options.mode=e}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.start=function(e){},m.prototype.renderBody=function(){var e=(0,i.A)(s().mark((function e(t,r){var a,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],i=this.frameDoc.getType(),a="json"===i?WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"):WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",c.I._XML_NAMESPACE.XHTML),WebSquare.cssManager.startCache(),o="json"===i?WebSquare.controlFactory.createByJSON(null,null,a[0],this.options.scope?this:null,this.uuid):WebSquare.controlFactory.create(null,null,a[0],this.options.scope?this:null,this.uuid),WebSquare.cssManager.endCache(),!0===r){e.next=10;break}return e.next=10,WebSquare.controlFactory.initAsync();case 10:if(this.childControlList.push(o),this.render&&(o.domStatus="new"),o&&(o.parentControl=this,o.options&&o.options.firstTabID&&!this.options.firstTabID&&(this.options.firstTabID=o.options.firstTabID)),this.options.scope&&(this.makeScope(this),this.makeLazyScopeVariable()),!(this._pageCommonArr.length>0)){e.next=21;break}if(!0!==r){e.next=19;break}this._parsePageCommons(),e.next=21;break;case 19:return e.next=21,this._parsePageCommons();case 21:return o&&t?this._lazyActivation():!0===WebSquare._async&&(c.I.executePointScript(4),this._markEnd()),e.abrupt("return",!!o);case 23:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype.lazyActivation=function(){try{if(!this.render)return;var e=this.childControlList[0];this.render.innerHTML=e.toHTML(),"sync"===this.options.mode?(this._markEnd(),this.setChildAction({preExecuted:!0})):(e.preActivate(),this._markEnd(),l.Z.setTimeout(this.setChildAction,{key:this.id+"_setChildAction",caller:this,delay:1,args:[{preExecuted:!0,skipPreActivate:!0}]}))}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._lazyActivation=function(){try{if(c.I.executePointScript(4),WebSquare.externalScriptArr.length>0)if("sync"!==this.options.mode){var e=this.uuid;WebSquare.externalScriptArr.push((function(){try{WebSquare.idCache[e].lazyActivation()}catch(e){p.Y.printStackTrace(e)}})),l.Z.js.apply(null,WebSquare.externalScriptArr)}else{for(var t=0;t<WebSquare.externalScriptArr.length;t++)WebSquare.BootLoader.globalEval(c.I.load(WebSquare.externalScriptArr[t]));this.lazyActivation()}else this.lazyActivation();WebSquare.externalScriptArr=[]}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.parseParameter=function(){try{if(!this.options.params||"string"!=typeof this.options.params)return;for(var e in this.paramObj=JSON.parse(this.options.params),this.paramObj){var t=this.paramObj[e].charAt(0),r=this.paramObj[e].slice(1);switch(t){case"j":case"a":this.paramObj[e]=JSON.parse(r);break;case"x":this.paramObj[e]=WebSquare.xml.parse(r);break;default:this.paramObj[e]=r}}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.makeParameter=function(){try{if("object"!==(0,a.A)(this.paramObj)&&(this.paramObj={}),this.options.isWidget){var e=this.parentControl.getParams();"object"===(0,a.A)(e)&&(this.paramObj.params=e)}var t=this.getSrc();if(!t)return;for(var r=t.substring(t.indexOf("?")+1).split("&"),i=0;i<r.length;i++){2==(o=r[i].split("=")).length&&(this.paramObj[o[0].wq_trim()]=o[1].wq_trim())}if(location.hash.length>0)for(r=t.substring(t.indexOf("#")+1).split(/[\&\?\#]/),i=0;i<r.length;i++){var o;2==(o=r[i].split("=")).length&&(this.paramObj[o[0].wq_trim()]=o[1].wq_trim())}}catch(e){
p.Y.printStackTrace(e,null,this)}},m.prototype.setDataObject=function(e){try{if("string"==typeof e&&(e=JSON.parse(e)),null==e||"string"!=typeof e.name||0===e.name.length)return;var t=e.type||"string";t=t.toLowerCase();var r,a=e.data,i=e.name;switch(t){case"string":r=a;break;case"json":r="string"==typeof a?JSON.parse(a):l.Z.cloneObject(a,{scope:this.scope_id,skipFunction:!0});break;case"xml":r="string"==typeof a?WebSquare.xml.parse(a):WebSquare.xml.parse(WebSquare.xml.serialize(a));break;case"array":r="string"==typeof a?JSON.parse(a):a.slice(0)}this._dataObject={type:t,name:i,data:r}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getDataObject=function(e){try{var t;return this._dataObject&&"string"==typeof this._dataObject.name&&this._dataObject.name.length>0&&this._dataObject.data&&(t=null==e?this._dataObject:this._dataObject[e]),t}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._removeDataObject=function(){try{this._dataObject&&(delete this._dataObject.data,this._dataObject=null,delete this._dataObject)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.setFirstTabID=function(e){try{if(null!=e&&e!==this.options.firstTabID&&null!=WebSquare.tabOrder[this.id]&&null!=WebSquare.tabOrder[this.id].preTabID){var t=WebSquare.tabOrder[this.id].preTabID,r=WebSquare.tabOrder[t].nextTabID,a=l.Z.getComponentById(e,this.id).id,i=WebSquare.tabOrder[t].nextTabID;WebSquare.tabOrder[t].nextTabID=a,WebSquare.tabOrder[a]={},WebSquare.tabOrder[a].preTabID=t,i!==this.id&&delete WebSquare.tabOrder[r],this.options.firstTabID=e}}catch(e){p.Y.printStackTrace(e)}},m.prototype.getParentFrame=function(){try{return this.scope_obj&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getRenderedParentFrame=function(){try{return this.scope_obj&&WebSquare.strictModeFrame.id!==this.scope_obj.id&&WebSquare.idCache[this.scope_obj.uuid]===this.scope_obj?this.scope_obj:null}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.reload=function(e){try{var t;if(this.options.strictFrame)l.Z.reinitialize(e);else this._dataObject&&(t={dataObject:this._dataObject,reload:!0}),this.setSrc(this.options.src,t)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._clearExecuteStatus=function(){try{this._executeStatus={script:!1,onpageload:!1,postscript:!1,lazyscript:!1,onwframeload:!1}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getVersion=function(){try{var e=this.options.pluginName,t=c.I.getConfiguration("/WebSquare/"+e+"/version/@value");return t||(t=WebSquare.strictMode?3:"sync"===this.options.mode?2:1),Number(t)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.getURL=function(e,t){try{if(void 0!==t&&null!=t||(t={}),"string"!=typeof e||e.indexOf("://")>-1||!0===t.skipFullUrl)return e;if(this.options.msaName&&(t.msaName=this.options.msaName),t.msaName)return c.I.getURL(e,t);var r=this._getMsaName();if(r)return e=this.getMsaSrc(e),t.msaName=r,c.I.getURL(e,t);var a="",i=this.getParentFrame();if(i){var o,s=i.getSrc(),n=s.indexOf("://");if(n>=0)a=(o=e.startsWith("/")||e.startsWith("\\")?s.indexOf("/",n+3):s.lastIndexOf("/"))>0?s.slice(0,o)+"/":s.slice(0)+"/"}return a?a+e:c.I.getURL(e,{tempHome:this.getUdcRoot()})}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.showProcessMessage=function(){var e=(0,i.A)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",m._showProcessMessage(this,t,r));case 4:e.prev=4,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this),this.hideProcessMessage();case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype.hideProcessMessage=function(){try{return m._hideProcessMessage(this)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._handleProcessEvent=function(e){try{u.f.stopEvent(e)}catch(e){p.Y.printStackTrace(e,null,this),this.hideProcessMessage()}},
m.prototype.addSubmissionMessage=function(){var e=(0,i.A)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.showProcessMessage(r,{submissionId:t});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this),this.hideProcessMessage();case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype.deleteSubmissionMessage=function(e){try{return this._deleteSubmissionMessage(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._deleteSubmissionMessage=function(e){try{for(var t=this._processMsgQueue.length-1;t>=0;t--)if(this._processMsgQueue[t].id==e){if(null!=this._processMsgComp&&"promise"!=this._processMsgComp&&t>0){var r=this._processMsgComp.getObj("text_msg");r&&r.setValue(this._processMsgQueue[t-1].msg)}this._processMsgQueue.splice(t,1)}if(e){var a=WebSquare.ModelUtil.getSubmission(e);0===this._processMsgQueue.length&&a&&!1!==a.hideProcessMsg?this.hideProcessMessage():this._processMessageShowCnt>0&&this._processMessageShowCnt--}}catch(e){p.Y.printStackTrace(e,null,this),this.hideProcessMessage()}},m.prototype.deleteAjaxMessage=function(){try{this._processMsgAjaxCnt--,this._processMsgAjaxCnt<=0&&this.hideProcessMessage()}catch(e){p.Y.printStackTrace(e,null,this),this.hideProcessMessage()}},m.prototype.showFrameModal=function(e){try{var t=e.className||"",r=(e.popupComponents,e.stackComponents||void 0),a=e.popupModal||!1;null==this.modalStack&&(this.modalStack=[]);var i=WebSquare.style.getStyle(this.render,"position");if(null==this._wframePopupModal){var o=WebSquare.controlFactory.create(this.id+"_wq_frameModal",{className:"w2_wframe_modal",pluginName:"group",parseChild:!1},null,this,this,!0);o.writeTo(this),o.activate(),o.render.style.width="100%",o.render.style.height="100%",this.addControl(o),this._wframePopupModal=o}else"static"!=i&&(this._wframePopupModal.render.style.height=this.render.offsetlHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px");if("static"==(i=WebSquare.style.getStyle(this.render,"position"))){var s=this.render.offsetLeft,n=this.render.offsetTop;this._wframePopupModal.render.style.height=this.render.offsetHeight+"px",this._wframePopupModal.render.style.width=this.render.offsetWidth+"px",this._wframePopupModal.setPosition(s,n)}if(t?(this.modalStack[this.modalStack.length]=t,!0===a&&(this._wframePopupModal.className=t)):(this.modalStack[this.modalStack.length]="w2modal",!0===a&&(this._wframePopupModal.className="w2modal")),r)for(var c in null==this.stackComponents&&(this.stackComponents={}),r)if(null==this.stackComponents[c])this.stackComponents[c]=[r[c]];else{var u=this.stackComponents[c].length-1;if(u>=0)for(var h=u;h>=0;h--){var d=WebSquare.idCache[this.stackComponents[c][h].id];if(!d&&this.stackComponents[c][h].id){var m=l.Z.getPopup(this.stackComponents[c][h].id);m&&(d=m.popupWin)}if(d&&d.render&&!0===a){var f=parseInt(d.getStyleProperty("z-index"),10),g=parseInt(l.Z.getStyleProperty(this._wframePopupModal.render,"z-index"),10)-1;if(f==g)break;d.zIndex=f,d.setStyle("z-index",g)}}this.stackComponents[c].push(r[c])}!0===a&&(this._renderScrollLeft=this.render.scrollLeft,this._renderScrollTop=this.render.scrollTop,this._wframePopupModal.show(),l.Z.isMobile()||this.addClass("w2modalopened_wframepopup"))}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.hideFrameModal=function(e){try{if(null!=this._wframePopupModal){var t=!1,r=!1;if(null!=this.stackComponents)for(var a in this.stackComponents){var i=this.stackComponents[a];if(e){for(var o=this.stackComponents[a].length-1;o>=0;o--)if(i[o].id===e){i.splice(o,1),r=!0;break}}else i.pop(),r=!0;for(o=i.length-1;o>=0;o--){0!=o||0!==i.length&&!1!==i[o].modal||(t=!0);var s=WebSquare.idCache[i[o].id];if(s||(s=l.Z.getComponentById(i[o].id)),s&&s.render){var n=s.zIndex;isNaN(n)&&(n=""),s.zIndex=void 0;var c=WebSquare.getBody()
;c.modal&&"block"===c.modal.style.display?(s.zIndex=l.Z.getStyleProperty(c.modal,"z-index")-2,s.setStyle("z-index",s.zIndex)):s.setStyle("z-index",n)}if("popup"!=a||!0===i[o].modal)break}}if(r&&this.modalStack.pop(),0==this.modalStack.length||!0===t){var u=this._modal;this._modal=!1,0==this.modalStack.length&&null!=this._wframePopupModal?(this._wframePopupModal.remove(),this._wframePopupModal=null):!0===t&&this._wframePopupModal.hide(),this.render.scrollLeft=this._renderScrollLeft,this.render.scrollTop=this._renderScrollTop,this._renderScrollLeft=this._renderScrollTop=0,u&&this.removeClass("w2modalopened_wframepopup")}else{var h=this.modalStack[this.modalStack.length-1];this._wframePopupModal.className=h}}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype.modalEvent=function(e){try{this._wframePopupModal&&e&&(u.f.addListener(this._wframePopupModal.render,"onclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})),u.f.addListener(this._wframePopupModal.render,"ondblclick",(function(){var t=WebSquare.uiplugin.popup.getPopupWindow(e);t&&t.focus()})))}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._cloneRecursive=function(e){try{if(!e)return;var t=this._clone(e);return t.initAsync=(0,i.A)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),t.makeFrameSync(!0,this.frameDoc,!0),t}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._getPerfStr=function(e){try{return e+"."+this.id}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._makeDetail=function(e){try{return{src:this.getURL(this.getSrc()||WebSquare.w2xPath),id:this.id,orgId:this.getOriginalID(),scopeId:this.scope_id,log:e||""}}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._markStart=function(){try{this._pCount++;var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.start"),e)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._markEnd=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.step1"));var e=WebSquare.language.getMessage("Performance_wframe_step1");WebSquare._performance.measure(this._getPerfStr("wframe.step1"),this._getPerfStr("wframe.start"),this._makeDetail(e))}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._markStart2=function(){try{var e={detail:this._makeDetail()};WebSquare._performance.mark(this._getPerfStr("wframe.step2"),e)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._markEnd2=function(){try{WebSquare._performance.mark(this._getPerfStr("wframe.end"));var e=WebSquare.language.getMessage("Performance_wframe_step2");WebSquare._performance.measure(this._getPerfStr("wframe.end"),this._getPerfStr("wframe.step2"),this._makeDetail(e))}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._addPageCommon=function(e,t){try{this._pageCommonArr.push({src:e,id:t})}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._parsePageCommons=(0,i.A)(s().mark((function e(){var t,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,t=[];this._pageCommonArr.length>0;)r=this._pageCommonArr.shift(),a=this._parsePageCommon(r),t.push(a);return e.abrupt("return",this._parsePageCommonsAfter(t));case 6:e.prev=6,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this);case 9:case"end":return e.stop()}}),e,this,[[0,6]])}))),m.prototype._parsePageCommonsAfter=function(){var e=(0,i.A)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.allSettled(t).then(function(){var e=(0,i.A)(s().mark((function e(t){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=15;break}if("fulfilled"===t[r].status){e.next=4;break}return e.abrupt("continue",12);case 4:return e.next=6,t[r].value;case 6:if(!(a=e.sent)||"function"!=typeof a.func){e.next=12;break}if(!0!==a.onpageloadNow){e.next=11;break}return e.next=11,a.func();case 11:
a.arr instanceof Array&&a.arr.push(a.func);case 12:r++,e.next=1;break;case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){p.Y.printStackTrace(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),m.prototype._parsePageCommon=function(){var e=(0,i.A)(s().mark((function e(t,r){var a,i,o,u,l,h,d,m,f,g,S,b,_,y,v,W,q,k,C;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,void 0!==r&&null!=r||(r={}),a=t.src,i=t.id,e.next=6,WebSquare.jsLoader._loadObj(this.getURL(a),{msaName:this._getMsaName()});case 6:for(o=e.sent,u=WebSquare.jsonUtil.getNodesByTagName(o,"script"),l=n.q.extend({},this.scope),h=this.options.scopeVariable.split(",")[0]||"scwin",d={},null!=this.scope[i]&&(d=this.scope[i]),l[h]=d,m=0;m<u.length;m++)f=u[m],"function"==typeof(g=WebSquare.jsonUtil.getCDataNodeValue(f))&&g(l);if((S=WebSquare.Elem.api.getElementsByTagName(o,"publicInfo",c.I._XML_NAMESPACE.W2)[0])&&"string"==typeof(b=S.getAttribute("method"))&&b){for(_=b.split(","),y={},m=0;m<_.length;m++)v=_[m].wq_trim("").replace(h+".",""),y[v]=d[v];d=y}if(this.scope[i]=d,(q=WebSquare.Elem.api.getElementsByTagName(o,"body",c.I._XML_NAMESPACE.XHTML)[0])&&(k=q.getAttribute("ev:onpageload")||"",C=k.replace(h+".",""),W=l[h][C]),"function"!=typeof W){e.next=26;break}if(!0!==r.onpageloadNow){e.next=24;break}return e.abrupt("return",{onpageloadNow:r.onpageloadNow,func:l[h][C]});case 24:return this._executeStatus.onloadPageCommon||(this._executeStatus.onloadPageCommon=[]),e.abrupt("return",{arr:this._executeStatus.onloadPageCommon,func:l[h][C]});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,this);case 31:case"end":return e.stop()}}),e,this,[[0,28]])})));return function(t,r){return e.apply(this,arguments)}}(),m.prototype._addCssCache=function(e){try{this._cssCacheArr.push(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m.prototype._parseBodyCss=function(){try{var e=this._getMsaName()||"";e&&(e+=" ");var t,r=[];if("json"===this.frameDoc.getType())r=WebSquare.jsonUtil.getNodesByTagName(this.frameDoc.getPageInfo(),"body"),(t=WebSquare.jsonUtil.getAttribute(r[0],"class"))&&(e+=t);else(t=(r=WebSquare.xml.getElementsByTagName(this.frameDoc.getPageInfo(),"body",c.I._XML_NAMESPACE.XHTML))[0].getAttribute("class"))&&(e+=t);this.render&&e&&this.addClass(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m._increasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount<0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0),WebSquare.uiplugin.wframe.__pendingWframeCount++}catch(e){p.Y.printStackTrace(e,null,this)}},m._decreasePendingWframeCount=function(){try{WebSquare.uiplugin.wframe.__pendingWframeCount--,WebSquare.uiplugin.wframe.__pendingWframeCount<=0&&(WebSquare.uiplugin.wframe.__pendingWframeCount=0)}catch(e){p.Y.printStackTrace(e,null,this)}},m._isPending=function(){return WebSquare.uiplugin.wframe.__pendingWframeCount>0},m._addWframePreorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePreOrderList.push(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m._addWframePostorder=function(e){try{WebSquare.uiplugin.wframe.__pendingWframePostOrderList.push(e)}catch(e){p.Y.printStackTrace(e,null,this)}},m._execute=function(e,t){try{if(void 0!==t&&null!=t||(t={}),WebSquare.uiplugin.wframe._isPending())return;var r="postorder"===t.order?WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0):WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0);if(r.length<=0)return;switch(!0===t.reverse&&r.reverse(),e){case"script":for(var a="",i=0;i<r.length;i++){!0!==(h=WebSquare.idCache[r[i]])._executeStatus.script&&(h._executeStatus.script=!0,h.frameDoc&&"string"==typeof h.frameDoc.scriptSection&&h.frameDoc.scriptSection&&(a+=WebSquare.scriptIdentifier+h.getURL(h.getSrc())+'";',
a+=h.frameDoc.scriptSection))}"executed"===WebSquare.scriptSectionExcuteFlag||!0===t.preExecuted?WebSquare.BootLoader.globalEval(a):WebSquare.scriptSection+=a;break;case"onpageload":for(i=0;i<r.length;i++){if(!0!==(h=WebSquare.idCache[r[i]])._executeStatus.onpageload&&(!t._isProcessMsgFrame||h.uuid===t._processMsgCompId)){h._executeStatus.onpageload=!0;var o=h._executeStatus.onloadPageCommon;if(o instanceof Array)for(;o.length>0;){var s=o.shift();"function"==typeof s&&s()}for(var n=0;n<h.childControlList.length;n++)u.f.fireEvent(h.childControlList[n],"onpageload",h.getSrc())}}break;case"postscript":for(a="",i=0;i<r.length;i++){!0!==(h=WebSquare.idCache[r[i]])._executeStatus.postscript&&(h._executeStatus.postscript=!0,h.frameDoc&&"string"==typeof h.options.postScript&&h.options.postScript&&(a+=WebSquare.scriptIdentifier+h.getURL(h.getSrc())+'";',a+=h.options.postScript))}WebSquare.BootLoader.globalEval(a);break;case"lazyscript":var c=[];for(i=0;i<r.length;i++){!0!==(h=WebSquare.idCache[r[i]])._executeStatus.lazyscript&&(h._executeStatus.lazyscript=!0,h.frameDoc&&h.lazyImportsArr&&h.lazyImportsArr.length>0&&(c=c.concat(h.lazyImportsArr),h.lazyImportsArr=[]))}c.length>0&&"executed"===WebSquare.scriptSectionExcuteFlag&&l.Z.js.apply(null,c);break;case"onwframeload":for(i=0;i<r.length;i++){var h;if(!0!==(h=WebSquare.idCache[r[i]])._executeStatus.onwframeload){h._executeStatus.onwframeload=!0;var d=h.options.pluginName.toLowerCase();u.f.fireEvent(h,"on"+d+"load",h.getSrc())}}}}catch(e){p.Y.printStackTrace(e,null,this)}},m._clearPending=function(e){try{void 0!==e&&null!=e||(e={});for(var t={pendingWframeCount:WebSquare.uiplugin.wframe.__pendingWframeCount,pendingWframePreOrderList:WebSquare.uiplugin.wframe.__pendingWframePreOrderList.slice(0),pendingWframePostOrderList:WebSquare.uiplugin.wframe.__pendingWframePostOrderList.slice(0)};WebSquare.uiplugin.wframe.__pendingWframePreOrderList.length>0;){(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePreOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}for(;WebSquare.uiplugin.wframe.__pendingWframePostOrderList.length>0;){var r;(r=WebSquare.idCache[WebSquare.uiplugin.wframe.__pendingWframePostOrderList.pop()])&&!0!==e.keepStatus&&r._clearExecuteStatus()}return WebSquare.uiplugin.wframe.__pendingWframeCount=0,t}catch(e){p.Y.printStackTrace(e,null,this)}},m._setPending=function(e){try{WebSquare.uiplugin.wframe.__pendingWframeCount=e.pendingWframeCount,WebSquare.uiplugin.wframe.__pendingWframePreOrderList=e.pendingWframePreOrderList.slice(0),WebSquare.uiplugin.wframe.__pendingWframePostOrderList=e.pendingWframePostOrderList.slice(0)}catch(e){p.Y.printStackTrace(e,null,this)}},m._showProcessMessage=function(){var e=(0,i.A)(s().mark((function e(t,r,a){var i,o,u,h,d,f,g,S,b,_,y,v,W,q,k,C,w,P,M,x,T,I,L,j;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"$blank"!=r&&r&&t){e.next=3;break}return e.abrupt("return");case 3:if((i=c.I.getConfiguration("processMsgFrameURL"))||(i=n.q._resourceURI+"message/processMsg.js"),u={},a&&a.submissionId&&("string"==typeof a.submissionId?(o=a.submissionId,u=WebSquare.ModelUtil.getSubmission(o)):(u=a.submissionId,o=u.id),!1!==u.hideProcessMsg&&t._processMsgQueue.push({scope_id:u.scope_id,org_id:u.org_id,id:o,msg:r})),a&&!0===a.ajax&&t._processMsgAjaxCnt++,null!=t._processMsgComp){e.next=29;break}return t._processMessageShowCnt=1,h=t,t.scope_obj&&(!t.options||"wframe"!==t.options.pluginName&&"pageFrame"!==t.options.pluginName)&&(h=t.scope_obj),h&&(d=h.uuid),f=WebSquare.controlFactory.create(t.id+"_wq_processMsgComp",{src:i,className:"w2_proc",scope:!0,pluginName:"wframe",preload:!0},null,h,d,!0),t._processMsgComp="promise",e.next=17,WebSquare.controlFactory.initAsync();case 17:if(t._processMsgComp=f,f.writeTo(t),f._isProcessMsgFrame=!0,f.activate(),t.addControl(f),t._processMessageShowCnt>0){e.next=27;break}return m._hideProcessMessage(t),t._processMessageShowCnt=0,e.abrupt("return");case 27:e.next=32;break;case 29:
if("promise"!==t._processMsgComp){e.next=32;break}return isNaN(t._processMessageShowCnt)?t._processMessageShowCnt=1:t._processMessageShowCnt++,e.abrupt("return");case 32:if(t._processMsgComp.show(),(g=t._processMsgComp.getObj("btn_hide"))&&(u.hideTrigger?g.show():g.hide()),(S=t._processMsgComp.getObj("btn_cancel"))&&(u.abortTrigger?S.show():S.hide()),(b=t._processMsgComp.getObj("text_msg"))&&b.setValue(r),_=WebSquare.style.getStyle(t.render,"position"),y=0,v=0,W="","static"!=_){e.next=54;break}W="static",q=t.render.parentElement;case 46:if(!q||"BODY"==q.tagName){e.next=54;break}if("relative"!=(k=WebSquare.style.getStyle(q,"position"))&&"absolute"!=k){e.next=51;break}return W=k,e.abrupt("break",54);case 51:q=q.parentElement,e.next=46;break;case 54:C=t.render.offsetLeft,w=t.render.offsetTop,P=t.render.offsetHeight,M=t.render.offsetWidth,x=t.render.scrollLeft,T=t.render.scrollTop,"relative"==_?(y=x,v=T):"static"==_&&"absolute"!=W&&(y=C,v=w),I=y+(t.getSize("outerWidth")-t._processMsgComp.getSize("outerWidth"))/2,L=v+(t.getSize("outerheight")-t._processMsgComp.getSize("outerheight"))/2,t._processMsgComp.setPosition(I,L),t.bind("onkeydown",t._handleProcessEvent),null==t._processMsgModal&&((j=WebSquare.controlFactory.create(t.id+"_wq_proessMsgModal",{className:"w2_proc_modal",pluginName:"group",parseChild:!1},null,t,t,!0)).writeTo(t),j.activate(),t.addControl(j),t._processMsgModal=j),t._processMsgModal.render.style.height=P+"px",t._processMsgModal.render.style.width=M+"px",t._processMsgModal.setPosition(y,v),t._processMsgModal.show(),l.Z.isMobile()||t.addClass("w2modalopened_wframe"),e.next=77;break;case 73:e.prev=73,e.t0=e.catch(0),p.Y.printStackTrace(e.t0,null,t),m._hideProcessMessage(t);case 77:case"end":return e.stop()}}),e,null,[[0,73]])})));return function(t,r,a){return e.apply(this,arguments)}}(),m._hideProcessMessage=function(e){try{if(e._processMsgQueue=[],e._processMsgAjaxCnt=0,null!=e._processMsgComp&&"promise"!==e._processMsgComp)e._processMsgComp.hide(),e.unbind("onkeydown",e._handleProcessEvent);else if(e._processMessageShowCnt>0)return void e._processMessageShowCnt--;null!=e._processMsgModal&&e._processMsgModal.hide(),e.removeClass("w2modalopened_wframe")}catch(t){p.Y.printStackTrace(t,null,e)}},m._createEmptyFrame=function(e){try{"function"!=typeof m._emptyConstructor&&(m._emptyConstructor=new Function,WebSquare.extend(m._emptyConstructor.prototype,m.prototype));var t=new m._emptyConstructor,r=["pluginName","pluginType","strictFrame","scope","scopeVariable","scopeFunction","mode"];if(t.id=e,t.uuid=e,t.options={id:e},WebSquare.strictModeFrame&&WebSquare.strictModeFrame.options)for(var a=0;a<r.length;a++){var i=r[a];t.options[i]=WebSquare.strictModeFrame.options[i]}return t.childControlList=[],t.childAllControlList=[],t.lazyImportsArr=[],t.scope={},t.scopeVariable={},t.executeStatus={},t._pageCommonArr=[],t._processMsgQueue=[],t._wframeModelStack=[],t._pCount=0,t._processMsgAjaxCnt=0,WebSquare.idCache[t.uuid]=t,WebSquare.idToUUID[t.id]=t.uuid,t.makeScopeVariable(!0),t.finalize=new Function(""),t.remove=new Function(""),t.destroy=new Function(""),t.setSrc=new Function(""),t}catch(e){p.Y.printStackTrace(e)}},m.__pendingWframeCount=0,m.__pendingWframePreOrderList=[],m.__pendingWframePostOrderList=[],m._cacheObj={},m.scope=function(e){this._parent_uuid=e,this._identifier="wframe_scope"},m.scope.prototype.getRuntimeId=function(e,t){try{for(var r=this._parent_uuid,a="",i=WebSquare.idCache[this._parent_uuid].options.scopeVariable.split(","),o={},s=0;s<i.length;s++)o[i[s].wq_trim()]=!0;if("string"==typeof t){var n=t.split("parent").length-1;for(s=0;s<n&&null!=r&&null!=WebSquare.idCache[r];s++)r=WebSquare.idCache[r].parentFrame}
return!0===o[e]?a=null!=r?WebSquare.idCache[r].id+"_"+e:e:null!=r&&null!=WebSquare.idCache[r].scope[e]?a=WebSquare.idCache[r].scope[e].id||"":WebSquare.idToUUID[e]&&WebSquare.idCache[WebSquare.idToUUID[e]]&&(a=WebSquare.strictMode&&null!=WebSquare.idCache[r]&&WebSquare.idCache[WebSquare.idToUUID[e]].scope_id!==WebSquare.idCache[r].id?"":e),a}catch(e){return p.Y.printStackTrace(e,null,this),""}},m.scope.prototype.getSubmission=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),a=null,i=WebSquare.idCache[this._parent_uuid].id,o=WebSquare.idCache[this._parent_uuid].scope[e],s=0;s<r.submissions.length;s++){var n=r.submissions[s];if(o===n||n.scope_id===i&&n.id===e){a=n;break}}return a}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getSubmissionList=function(e){try{return void 0!==e&&null!=e||(e={}),!0!==e.all&&(e.scopeId=WebSquare.idCache[this._parent_uuid].id),WebSquare.ModelUtil.getSubmissionList(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.executeSubmission=function(e,t,r,a,i){try{var o;if("string"==typeof e)o=this.getSubmission(e);else if(o=e,WebSquare.strictMode&&o.scope_id!==WebSquare.idCache[this._parent_uuid].id)return;return WebSquare.ModelUtil.executeSubmission(o,t,r,a,i)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.createSubmission=function(e,t){try{var r,a=e.id,i=this.getFrame(),o=i.id,s=o+"_";return e.id=s+a,e.scope_id=o,e.org_id=a,r=WebSquare.ModelUtil.createSubmission(e,t),i.scope[a]=WebSquare.ModelUtil.getSubmission(e.id,null,{scope_id:o}),null!=i.frameDoc&&(this._deleteSubmissionDoc(a),i.frameDoc.models[0].submissions.push(i.scope[a])),r}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.deleteSubmission=function(e,t){try{var r=this.getSubmission(e);this._deleteSubmissionDoc(e);var a=WebSquare.ModelUtil.deleteSubmission(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],a}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype._deleteSubmissionDoc=function(e){try{var t=this.getSubmission(e),r=this.getFrame();if(null!=r.frameDoc)for(var a=r.frameDoc.models[0].submissions,i=a.length-1;i>=0;i--)a[i].id===t.id&&(a[i].parentElement=null,a.splice(i,1))}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.createWorkflow=function(e,t){try{var r,a=e.id,i=this.getFrame(),o=i.id,s=o+"_";return e.id=s+a,e.scope_id=o,r=WebSquare.ModelUtil.createWorkflow(e,t),i.scope[a]=WebSquare.ModelUtil.getWorkflow(e.id,null,{scope_id:o}),r}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.deleteWorkflow=function(e,t){try{var r=this.getWorkflow(e),a=WebSquare.ModelUtil.deleteWorkflow(r.id,t,{scope_id:this.getFrameId()});return delete WebSquare.idCache[this._parent_uuid].scope[e],a}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getWorkflow=function(e,t){try{for(var r=WebSquare.ModelUtil.getModelByID(t),a=null,i=WebSquare.idCache[this._parent_uuid].id,o=WebSquare.idCache[this._parent_uuid].scope[e],s=0;s<r.workflows.length;s++){var n=r.workflows[s];if(o===n||n.scope_id===i&&n.id===e){a=n;break}}return a}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getRunningWorkflow=function(e,t){try{var r=null;if(e)null!=(s=this.getWorkflow(e,t))&&s.promiseStatus&&""!=s.promiseStatus&&(r=s);else for(var a=WebSquare.idCache[this._parent_uuid].id,i=WebSquare.ModelUtil.getModelByID(t),o=0;o<i.workflows.length;o++){var s;if((s=i.workflows[o]).scope_id===a&&s.promiseStatus&&""!=s.promiseStatus){r=s;break}}return r}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.isRunningWorkflow=function(e,t){try{return null!=this.getRunningWorkflow(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getRunningWorkflowID=function(e){try{var t=this.getRunningWorkflow(null,e),r=null;return null!=t&&(r=t.id),r}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.rejectWorkflow=function(e,t,r){try{var a=this.getRunningWorkflow(t,r),i=null;return null!=a&&(a.promiseStatus="REJECT",a.promiseValue=e||"REJECT",i=a),i}catch(e){p.Y.printStackTrace(e)}},
m.scope.prototype.executeWorkflow=function(e){try{return WebSquare.ModelUtil.executeWorkflow(e,{scope_function:this})}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.executeSerial=function(e,t,r,a,i,o){try{return WebSquare.ModelUtil.executeSerial(e,t,r,a,i,o,{scope_function:this})}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.executeParallel=function(e,t,r,a,i,o){try{return WebSquare.ModelUtil.executeParallel(e,t,r,a,i,o,{scope_function:this})}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.executeWhilst=function(e,t,r,a,i,o,s){try{return WebSquare.ModelUtil.executeWhilst(e,t,r,a,i,o,s,{scope_id:this.getFrameId()})}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.ajax=function(e){try{if(e){var t=this.getFrame();t&&(e.scope=t.id),WebSquare.net.ajax(e)}}catch(e){p.Y.printStackTrace(e),this.hideProcessMessage()}},m.scope.prototype.dynamicCreate=function(e,t,r,a,i,o){try{return l.Z.dynamicCreate(e,t,r,a,i,o,this.getFrame())}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getFrameId=function(){try{return WebSquare.idCache[this._parent_uuid]&&WebSquare.idCache[this._parent_uuid].id||null}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getFrame=function(){try{return WebSquare.idCache[this._parent_uuid]}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype._getProcessMsgTargetFrame=function(){try{return WebSquare.idCache[this._parent_uuid].parentControl}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getParentWindow=function(){try{var e=WebSquare.idCache[this._parent_uuid].getParentFrame();return null==e?this.getFrame().options.strictFrame?l.Z.getParentWindow():window:e.scope}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getTopWindow=function(){try{return top}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.top=function(){try{return l.Z.getTopWindow()}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.parent=function(){try{return this.getParentWindow()}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.main=function(){try{return l.Z.getMainFrame()}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.self=function(){try{return this.getFrame().scope}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getComponentById=function(e){try{return l.Z.getComponentById(e,this.getFrameId())}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopupParam=function(e){try{void 0!==e&&null!=e||(e={});var t="",r=WebSquare.idCache[this._parent_uuid],a=null!=r._dataObject&&""!=r.options.popupParam&&r._dataObject.name===r.options.popupParam.slice(1);a=a||!0===e.dataObject;var i=null!=r.paramObj&&""!=r.options.popupParam;if(a||i){var o=a?r._dataObject.type.charAt(0):r.options.popupParam.charAt(0),s=a?r._dataObject.data:r.paramObj[r.options.popupParam.slice(1)];switch(o){case"j":t=JSON.stringify(s);break;case"x":t=WebSquare.xml.serialize(s);break;case"a":t=l.Z.parseArray(s);break;default:t=s}}return t}catch(e){return p.Y.printStackTrace(e),""}},m.scope.prototype.getParameter=function(e){try{var t,r=this.getFrame();if(r._dataObject&&r._dataObject.name===e)t=r._dataObject.data;else{var a=WebSquare.idCache[this._parent_uuid].paramObj;null!=a&&(t=a[e]),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=t||(t=WebSquare.net.getParameter(e))}return t}catch(e){return p.Y.printStackTrace(e),""}},m.scope.prototype.getAllParameter=function(){try{var e=JSON.parse(WebSquare.idCache[this._parent_uuid].options.params||null);for(var t in e)e[t]=e[t].slice(1);var r=this.getFrame(),a=r._getDataObject();return null!=a&&(null==e&&(e={}),r._getVersion()>=3?e[a.name]=a.data:e[a.name]=this.getPopupParam({dataObject:!0})),WebSquare.strictMode&&!this.getFrame().options.strictFrame||null!=e||(e=WebSquare.net.getAllParameter()),e}catch(e){return p.Y.printStackTrace(e),null}},m.scope.prototype.getOptions=function(e){try{var t,r=this.getFrame(),a=c.I._getParentObj();if(r.options.strictFrame){if(WebSquare.isWebSquarePopup&&null!=a&&null!=a.WebSquare){var i=WebSquare.net.getParameter("popupID");t=a.WebSquare.dataObject[i].data}
}else t="pageFrame"===r.options.pluginName?WebSquare.WebSquareparser.parseAttribute(r.element):r._getDataObject("data");return n.q.extendKeepingType(e||{},t)||{}}catch(e){return p.Y.printStackTrace(e),""}},m.scope.prototype.setPopupParam=function(e,t){},m.scope.prototype.getPopupUrl=function(){try{var e=null;if(this.isWFramePopup()||this.getFrame()._getVersion()<3){var t=WebSquare.idCache[this._parent_uuid].getSrc();e=WebSquare.idCache[this._parent_uuid].getURL(t)}return e}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopupId=function(){try{var e=null;return this.isWFramePopup()&&(e=WebSquare.idCache[this._parent_uuid].paramObj.popupID),e}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.isWFramePopup=function(e,t){try{if(!e)return WebSquare.idCache[this._parent_uuid]._isWframePopup;for(var r=WebSquare.idCache[this._parent_uuid];r;){if(r.options.strictFrame)return!!t&&l.Z.isPopup();if(r._isWframePopup)return r._isWframePopup;r=r.getParentFrame()}}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.isPopup=function(e){try{return this.getFrame().options.strictFrame?l.Z.isPopup2():this.isWFramePopup(e,!0)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopup=function(e){try{return l.Z.getPopup(e,this._parent_uuid)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopupList=function(e){try{return l.Z.getPopupList(e,this._parent_uuid)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopupWindow=function(e){try{return l.Z.getPopupWindow(e,this._parent_uuid)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getPopupWindowList=function(e){try{return l.Z.getPopupWindowList(e,this._parent_uuid)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.openPopup=function(e,t,r,a){try{void 0!==t&&null!=t||(t={}),t.scope_uuid||(t.scope_uuid=this._parent_uuid),l.Z.openPopup(e,t,r,a)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.closePopup=function(e,t){try{var r=e;void 0===e&&(r=this.getParameter("popupID"));var a=this.getPopup(r);if(a){var i=a.id;a.close(r,t),WebSquare.uiplugin.popup.startChkModalClosed(),!0===a.useWindowPopup()&&WebSquare.uiplugin.popup.removeFromPopupList(i)}else this.getFrame().options.strictFrame&&l.Z.closePopup(r,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.reinitialize=function(e){try{this.getFrame().reload(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getMetaValue=function(e){try{if(this.getFrame().options.strictFrame)return l.Z.getMetaValue(e);var t="",r=WebSquare.Elem.api.getElementsByTagName(this.getFrame().frameDoc.getPageInfo(),"head")[0];return r&&(t=WebSquare.Elem.api.getAttribute(r,e)),t}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.multipleExcelUpload=function(e){try{e.scopeId=this.id,l.Z.multipleExcelUpload(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.multipleExcelDownload=function(e){try{e.scopeId=this.id,l.Z.multipleExcelDownload(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.$=function(e){try{for(var t,r=e.split("#"),a=0;a<r.length;a++){var i=r[a].search(/[\W]/);if(0!==i){var o,s="";i<0?o=r[a]:(o=r[a].slice(0,i),s=r[a].slice(i));var n=this.getComponentById(o);null!=n&&(r[a]=n.id+s)}}t=r.join("#");var c="";return this.getFrame().options.strictFrame||(c="#"+this.getFrameId()+" "),l.Z.jQuerySelector(c+t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.watermark=function(e,t){try{void 0!==t&&null!=t||(t={});var r=this.getFrame(),a=r.id;t.canvasId||(t.canvasId=a+"_watermarkCanvas"),t.target||(t.target=r),l.Z.watermark(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.emit=function(e){try{var t=[].slice.apply(arguments,[0]);return t.shift(),this.getFrame().trigger(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={});var t=this.getFrame().id;e.scopeId=t,l.Z.updateSuffix(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.bigDecimal=function(e){try{var t=function(e){return WebSquare.bigDecimal(e)};return t.calc=(r=e,function(e,t){return WebSquare.bigDecimal.calc(e,t,r)}),t
}catch(e){p.Y.printStackTrace(e)}var r},m.scope.prototype.updateServerTime=function(e,t,r){try{var a,i=this.getFrame()._getMsaName();return a=!i||void 0!==r&&""!=r?i||void 0!==r&&""!=r?r:"":i,WebSquare.date.updateServerTime(e,t,a)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.getCurrentServerDate=function(e,t){try{var r,a=this.getFrame()._getMsaName();return r=!a||void 0!==t&&""!=t?a||void 0!==t&&""!=t?t:void 0:a,WebSquare.date.getCurrentServerDate(e,r)}catch(e){p.Y.printStackTrace(e)}},m.scope.data=function(e){this._parent_id=e,this._identifier="wframe_scope_data"},m.scope.data.prototype.get=function(e,t,r){try{return r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.get(e,t,r)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.set=function(e,t,r,a){try{return a||(a={}),a.scope_obj||(a.scope_obj=this._parent_id),WebSquare.DataCollection.api.set(e,t,r,a)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.create=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.create(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.remove=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.remove(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.bindPath=function(e){try{var t=e.split("."),r={};return r.collectionId=t[0].replace(/^data:/,""),t>1&&(r.columnId=t[1]),r}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.getAllDataCollection=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getAllDataCollection(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.getBroadcast=function(e){try{return void 0!==e&&null!=e||(e={}),e.scope_obj||(e.scope_obj=this._parent_id),WebSquare.DataCollection.api.getBroadcast(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.getInfo=function(e,t,r,a){try{return void 0!==a&&null!=a||(a={}),a.scope_obj||(a.scope_obj=this._parent_id),WebSquare.DataCollection.api.getInfo(e,t,r,a)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.getOption=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.getOption(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.setBroadcast=function(e,t){try{return void 0!==t&&null!=t||(t={}),t.scope_obj||(t.scope_obj=this._parent_id),WebSquare.DataCollection.api.setBroadcast(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.data.prototype.setOption=function(e,t,r){try{return void 0!==r&&null!=r||(r={}),r.scope_obj||(r.scope_obj=this._parent_id),WebSquare.DataCollection.api.setOption(e,t,r)}catch(e){p.Y.printStackTrace(e)}},m.scope.model=function(e){this.scope_id=e},m.scope.model.prototype.setInstanceValue=function(e,t,r){return WebSquare.ModelUtil.setInstanceValue(e,t,r,this.scope_id)},m.scope.model.prototype.getInstanceValue=function(e,t){return WebSquare.ModelUtil.getInstanceValue(e,t,this.scope_id)},m.scope.model.prototype.findInstanceNode=function(e,t){return WebSquare.ModelUtil.findInstanceNode(e,t,this.scope_id)},m.scope.model.prototype.findInstanceNodes=function(e,t){return WebSquare.ModelUtil.findInstanceNodes(e,t,this.scope_id)},m.scope.model.prototype.findSerializedNode=function(e,t){return WebSquare.ModelUtil.findSerializedNode(e,t,this.scope_id)},m.scope.model.prototype.removeInstanceNode=function(e){return WebSquare.ModelUtil.removeInstanceNode(e,this.scope_id)},m.scope.model.prototype.removeInstanceNodes=function(e){return WebSquare.ModelUtil.removeInstanceNodes(e,this.scope_id)},m.scope.model.prototype.removeChildNodes=function(e){return WebSquare.ModelUtil.removeChildNodes(e,this.scope_id)},m.scope.model.prototype.copyNode=function(e,t,r,a){return WebSquare.ModelUtil.copyNode(e,t,r,a,this.scope_id)},m.scope.prototype.updateSuffix=function(e){try{void 0!==e&&null!=e||(e={})
;var t=this.getFrame().id;e.scopeId=t,l.Z.updateSuffix(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.showProcessMessage=function(e,t){try{void 0!==t&&null!=t||(t={});var r=WebSquare.idCache[this._parent_uuid].id;return t.scope||(t.scope=r),WebSquare.layer.showProcessMessage(e,t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.hideProcessMessage=function(e){try{void 0!==e&&null!=e||(e={});var t=WebSquare.idCache[this._parent_uuid].id;return e.scope||(e.scope=t),WebSquare.layer.hideProcessMessage(e)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.js=function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return;var a=t.slice(0),i=a[a.length-1];return"string"==typeof i&&c.I._msaServerHash[i]&&a.length>=2||"string"==typeof(i=this.getFrame()._getMsaName())&&c.I._msaServerHash[i]&&a.push(i),WebSquare.util.js.apply(this,a)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.jsAsync=function(){var e=(0,i.A)(s().mark((function e(t,r){var i,o,n,u,h,d,f,g,S,b,_,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"string"==typeof t&&(t=t.split(",")),t instanceof Array){e.next=4;break}return e.abrupt("return");case 4:if(void 0!==r&&null!=r||(r={}),i=[],o=this.getFrame(),n={frameObj:o,msaName:r.msaName,wpack:r.wpack},r.scopeVariable&&(u=r.scopeVariable,"string"==typeof r.scopeVariable&&(u=r.scopeVariable.split(",")),u instanceof Array))for(h=0;h<u.length;h++)(d=u[h])&&null==o.scope[d]&&(o.scope[d]={});for(h=0;h<t.length;h++)f=t[h],g=c.I._getMsaSrc(f,n),"function"==typeof m._cacheObj[g]?(b=m._cacheObj[g],_={func:b,cached:!0,scopeId:o.id},S=Promise.resolve(_)):(y={skipError:!0,noPostfix:!0,useInfo:!0,infoObj:{url:g,scopeId:o.id,noCache:r.noCache}},S=c.I.loadAsync(g,y)),S instanceof window.Promise&&i.push(S);return o.id,e.next=13,Promise.allSettled(i).then((function(e){for(var t=0;t<e.length;t++)if("fulfilled"===e[t].status){var r,i=e[t].value;if(i&&"object"===(0,a.A)(i)){if(!0===i.cached)r=i.func;else if(i.data){var o=l.Z.scopingFuncBody(i.data,"scopeComp","scopeObj");r=new Function("scopeComp",o),"string"==typeof i.url&&i.url&&!0!==i.noCache&&(m._cacheObj[i.url]=r)}if("function"==typeof r)r(l.Z.getComponentById(i.scopeId))}}}));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),p.Y.printStackTrace(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),m.scope.prototype.loadPageCommon=function(e){try{if(!(e instanceof Array))throw new Error("$p.loadPageCommon error : invalid parameter. The infoArray must be of array type.");for(var t=[],r=this.getFrame(),a={onpageloadNow:!0},i=0;i<e.length;i++){var o=e[i];if(o.src&&o.id&&"string"==typeof o.src&&"string"==typeof o.id)t.push(r._parsePageCommon(o,a));else{var s="$p.loadPageCommon partial error : invalid info. src : "+o.src+", id : "+o.id;h.v.printLog(s),t.push(Promise.reject(new Error(s)))}}return r._parsePageCommonsAfter(t)}catch(e){p.Y.printStackTrace(e)}},m.scope.prototype.loadMSACommon=function(){var e=(0,i.A)(s().mark((function e(t){var r,a,i,o,n,u,l,d,m,f,g,S,b,_,y,v,W;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t instanceof Array){e.next=3;break}throw new Error("$p.loadMSACommon error : invalid parameter. The infoArray must be of array type.");case 3:r=c.I.projectCommonVariable,window[r]||(window[r]={}),a=[],i=[],o=this.getFrame(),n=o._getMsaName(),u=0;case 10:if(!(u<t.length)){e.next=32;break}if(l=t[u],d=l.src,m=l.name,f=l.msaServerName,g=l.spaCache,S=l.reload,"string"==typeof d&&"string"==typeof m&&d&&m){e.next=22;break}return b="$p.loadMSACommon partial error : invalid info. src : "+d+", name : "+m,h.v.printLog(b),a.push(Promise.reject(new Error(b))),e.abrupt("continue",29);case 22:m=m.replace(r+".",""),!0!==S&&(c.I._msaHash[m]||c.I._projectCommonHash[m]),_=d,f&&"string"==typeof f||(f=n),f&&"string"==typeof f&&(y={msaName:f},_=c.I.getURL(d,y)),
(v=WebSquare.jsLoader._loadObj(_,y))instanceof window.Promise&&(a.push(v),W={name:m,src:d,spaCache:g},i.push(W));case 29:u++,e.next=10;break;case 32:return e.next=34,c.I._loadWebSquareCommon("msa",a,i);case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(0),p.Y.printStackTrace(e.t0);case 39:case"end":return e.stop()}}),e,this,[[0,36]])})));return function(t){return e.apply(this,arguments)}}()}}]);