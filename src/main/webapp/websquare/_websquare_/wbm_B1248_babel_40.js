"use strict";(self.webpackChunkwebpack_test=self.webpackChunkwebpack_test||[]).push([[40],{40:function(t,e,i){i.r(e),i.d(e,{wq_window:function(){return u}});var o=i(2284),s=i(5461),n=i(5375),r=i(8971),a=i(2338),d=i(1204),h=i(2256),l=i(2406),p=i(1304),u=function(t,e,i){l.q.call(this,t,e,i)};s.q.extend(u.prototype,l.q.prototype),u.prototype.defaultOptions={pluginType:"uiplugin.window",pluginName:"window",parseChild:!0,userEvents:["onclose","onminimize","onmaximize","onrestore","ondragstart","ondragend","onwindowkeyup","onwindowmousedown","onpopup","ondrawcomplete","onwindowload","onwindowunload","onresize"],defaultTop:"5px",defaultLeft:"5px",defaultWidth:"300px",defaultHeight:"210px",useRestoreDefaultSize:!1,useInitialSizePosition:!1,minimumWidth:"150px",minimumHeight:"150px",frameMode:"iframe",windowTitle:"",windowHeaderHTML:"",nameLayerHTML:"",statusMsg:"",customMsg:"",src:"",wmode:!1,useStatusMsg:!0,useCustomMsg:!1,windowTooltipDisplay:!0,title:"",dragResizable:!0,dragResizableHeader:!0,displayParentWindowScroll:!1,disableCloseButton:!1,spa:!1,noAttatchedEvent:!1,params:"",popupParam:"",spaReplaceHistory:!1,buttonFormatter:"",foldOnMinimized:!1,useATagBtn:!1,windowDragMove:!1,windowMoveType:"restrict",windowMaximizeAll:!1,minVisibleWindowPixel:20,frameModal:"",processMsgFrame:!1,msaName:"",fixPosition:!1,accessibility:!1,_targetId:"",scopeInherit:"",resizeEvent:!1,adaptiveFrame:!1},u.prototype.initialize=function(t){try{if(this.frame=null,this.modal=null,this.windowInfo={status:this.options.parent?"maximized":"restored",drag:!this.options.parent,top:this.options.defaultTop,left:this.options.defaultLeft,defaultWidth:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",defaultHeight:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",width:"px"==this.options.defaultWidth.slice(-2)||"%"==this.options.defaultWidth.slice(-1)?this.options.defaultWidth:parseInt(this.options.defaultWidth,10)+"px",height:"px"==this.options.defaultHeight.slice(-2)||"%"==this.options.defaultHeight.slice(-1)?this.options.defaultHeight:parseInt(this.options.defaultHeight,10)+"px",minWidth:parseInt(this.options.minimumWidth,10)<150?"150px":this.options.minimumWidth,minHeight:parseInt(this.options.minimumHeight,10)<150?"150px":this.options.minimumHeight,minimized:this.options.minimized||!1,setInfo:function(t){this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height},getInfo:function(t,e){t.style.top=this.top,t.style.left=this.left,t.style.width="restored"===e?this.defaultWidth:this.width,t.style.height="restored"===e?this.defaultHeight:this.height}},"true"===n.I.getConfiguration("/WebSquare/spa/@value")&&(this.options.spa=!0),this.options.parent&&this.options.parent.options.hideTitleOnMaximize&&(this.hideTitleOnMaximize=!0),this.options.parent&&this.options.parent.options.usePopup&&(this.usePopup=!0),this._multiViewUUID="",this._direction=0,this.buttons=[],this.buttonInfo={},this.hasButtons=!1,this.options.buttonFormatter){var e=d.Z.getGlobalFunction(this.options.buttonFormatter,this.scope_id);"function"==typeof e&&(this.hasButtons=!0,this.buttonInfo={},this.buttonInfo.buttons=e(),this.buttonInfo.alignment="right",this.buttonInfo.useButtonFormatter=!0)}this.popupIdx=0,this._isWframePopup=!1,this.options.windowDragMove||"true"!==n.I.getConfiguration("/WebSquare/window/windowDragMove/@value")||(this.options.windowDragMove=!0),!0===this.options.fixPosition&&(this.windowInfo.drag=!1)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.toHTML=function(){try{
var t=""==this.options.disabled?"":"disabled='true'",e=[],i="",o="",s=""==this.options.style?"":"style='"+this.options.style+"'",n="restored"===this.windowInfo.status?"w2window_restored":"w2window_maximized",a="overflow"===this.options.windowMoveType?" w2window_window_move_type":"";this.options.windowTooltipDisplay&&(o="title='"+this.options.windowTitle+"'"),e.push("<div "+t+" id='"+this.id+"' "+s+" class='w2window "+n+" "+this.options.className+a+"' tabindex='0' >"),1==this.options.wmode&&(i=WebSquare.net.getSSLBlankPage(),e.push("<iframe frameBorder='no' title='"+this.options.title+"' class='w2window_wmode' "+i+"></iframe>")),d.Z.isMobile()&&this.options.useATagBtn&&e.push("<button id='"+this.id+"_start' name='"+this.id+"_start' style='position:absolute;left:-9999px;width:0;height:0;' class='w2window_popup_start'>"+WebSquare.language.getMessage("Window_popup_start")+"</button>");var h="w2window_header",l="w2window_body";1==this.hideTitleOnMaximize&&"maximized"==this.windowInfo.status&&(h+=" w2window_header_extend",l+=" w2window_body_extend");var p=d.Z.getDataPrefix("btn_index");if(""==this.options.windowHeaderHTML){if(e.push("<div id='"+this.id+"_header' class='"+h+"'"+o+">"),!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<span id='"+this.id+"_header_icon' class='w2window_header_icon'></span>"):e.push("<div id='"+this.id+"_header_icon' class='w2window_header_icon'></div>"),!0===this.options.useATagTitle?e.push("<a id='"+this.id+"_header_title' class='w2window_header_title' href='javascript:void(null);' title='"+this.options.windowTitle+"' style='text-decoration:none;'>"+this.options.windowTitle+"</a>"):!0===this.options.useHeadingTagTitle||!0===this.options.accessibility?e.push("<h2 id='"+this.id+"_header_title' class='w2window_header_title_h2'>"+this.options.windowTitle+"</h2>"):e.push("<div id='"+this.id+"_header_title' class='w2window_header_title'>"+this.options.windowTitle+"</div>"),this.hasButtons){e.push("<div id='"+this.id+"_header_buttonArea' class='w2window_header_buttonArea'>");for(var u=0;u<this.buttonInfo.buttons.length;u++){var w=this.buttonInfo.buttons[u].title||"";if(this.buttonInfo.useButtonFormatter){c=this.buttonInfo.buttons[u].className||"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_custom_button "+c+"' "+p+"='"+u+"' title='"+w+"' ></div>")}else{var c=this.buttonInfo.buttons[u].className?" "+this.buttonInfo.buttons[u].className:"",m=this.buttonInfo.buttons[u].value?"<span id='"+this.id+"_header_button_"+u+"_value' class='w2window_header_button_value' title='"+w+"' "+p+"='"+u+"' > "+this.buttonInfo.buttons[u].value+" </span>":"";e.push("<div id='"+this.id+"_header_button_"+u+"' class='w2window_header_button w2window_header_button_"+u+"' "+p+"='"+u+"' >"),e.push("<div id='"+this.id+"_header_button_"+u+"_content' class='w2window_header_button_content w2window_header_button_content_"+u+c+"' "+p+"='"+u+"' >"),e.push(m),e.push("</div>"),e.push("</div>")}}e.push("</div>")}if(!0!==this.options.accessibility){var f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<div id='"+this.id+"_minimize' class='w2window_minimize' title='"+WebSquare.language.getMessage("Window_minimize")+"'></div>"),e.push("<div id='"+this.id+"_restore' class='w2window_restore' title='"+WebSquare.language.getMessage("Window_restore")+"' ></div>")}var g=this.options.disableCloseButton?" w2window_close_disabled":""
;this.options.useATagBtn?d.Z.isMobile()?e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' >"+WebSquare.language.getMessage("Window_close")+"</a></div>"):e.push("<a id='"+this.id+"_close' class='w2window_close w2window_close_atag"+g+"' href='javascript:void(null);' title='"+WebSquare.language.getMessage("Window_close")+"'>"+WebSquare.language.getMessage("Window_close")+"</a></div>"):!0!==this.options.accessibility&&e.push("<div id='"+this.id+"_close' class='w2window_close"+g+"' title='"+WebSquare.language.getMessage("Window_close")+"' ></div>"),1==this.usePopup&&e.push("<div id='"+this.id+"_popup' class='w2window_popup' title='"+WebSquare.language.getMessage("Window_popup")+"' ></div>"),e.push("</div>"),e.push("</div>")}else e.push("<div id='"+this.id+"_header' class='"+h+"'>"+this.options.windowHeaderHTML+"</div>");if(this.options.useStatusMsg?e.push("<div id='"+this.id+"_body' class='"+l+"'>"):e.push("<div id='"+this.id+"_body' class='"+l+" w2window_no_status'>"),e.push("<div id='"+this.id+"_content' class='w2window_content'>"),e.push("</div>"),(this.options.useStatusMsg||this.options.useCustomMsg)&&(e.push("<div id='"+this.id+"_status' class='w2window_status'>"),this.options.useStatusMsg&&e.push("<div id='"+this.id+"_msg' class='w2window_msg'>"+this.options.statusMsg+"</div>"),this.options.useCustomMsg&&e.push("<div id='"+this.id+"_custom_msg' class='w2window_custom_msg'>"+this.options.customMsg+"</div>"),e.push("</div>")),e.push("</div>"),!0===this.options.accessibility){var y=d.Z.getDataPrefix("refId");f=this.options.dragResizableHeader?" w2window_header_control_resizeDragHeader":"";e.push("<div id='"+this.id+"_header_control' class='w2window_header_control"+f+"'>"),e.push("<button type='button' id='"+this.id+"_minimize' class='w2window_minimize' aria-label='"+WebSquare.language.getMessage("Window_minimize")+"'"+y+"="+this.id+"></button>"),e.push("<button type='button' id='"+this.id+"_restore' class='w2window_restore' aria-label='"+WebSquare.language.getMessage("Window_restore")+"'"+y+"="+this.id+" ></button>"),e.push("<button type='button' id='"+this.id+"_close' class='w2window_close"+g+"' aria-label='"+WebSquare.language.getMessage("Window_close")+"'"+y+"="+this.id+"></div>")}return this.options.dragResizable&&(e.push("<div id='"+this.id+"_resize1' class='w2window_resize_right'></div>"),e.push("<div id='"+this.id+"_resize2' class='w2window_resize'></div>"),e.push("<div id='"+this.id+"_resize3' class='w2window_resize_bottom'></div>"),e.push("<div id='"+this.id+"_resize4' class='w2window_resize_bottomLeft'></div>"),e.push("<div id='"+this.id+"_resize5' class='w2window_resize_left'></div>"),this.options.dragResizableHeader&&(e.push("<div id='"+this.id+"_resize6' class='w2window_resize_upLeft'></div>"),e.push("<div id='"+this.id+"_resize7' class='w2window_resize_up'></div>"),e.push("<div id='"+this.id+"_resize8' class='w2window_resize_upRight'></div>"))),e.push("</div>"),e.join("")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setAction=function(){try{!0===this.options.accessibility&&(this.render.setAttribute("role","dialog"),this.render.setAttribute("aria-labelledby",this.id+"_header_title'"),this.options.parent||this.render.setAttribute("aria-modal","true")),this.dom.header=document.getElementById(this.id+"_header"),this.dom.statusMsg=document.getElementById(this.id+"_msg"),this.dom.customMsg=document.getElementById(this.id+"_custom_msg"),this.dom.body=document.getElementById(this.id+"_body"),this.dom.header&&this.dom.header.setAttribute("data-title",this.options.windowTitle),void 0!==this.options.useMaximize&&this.event.addListener(this.render,"ondblclick",this.event.bindAsEventListener(this,this.handleDblclickEvent)),this.event.addListener(this.render,"onmouseover",this.event.bindAsEventListener(this,this.handleMouseoverEvent)),this.event.addListener(this.render,"onmouseout",this.event.bindAsEventListener(this,this.handleMouseoutEvent)),
this.event.addListener(this.render,"onselectstart",this.event.bindAsEventListener(this,this.handleSelectStartEvent)),d.Z.isTouchDevice()?(this.event.addListener(this.render,"ontouchstart",this.event.bindAsEventListener(this,this.handleMousedownEvent)),this.event.addListener(this.render,"onpointerup",this.event.bindAsEventListener(this,this.handleClickEvent))):this.event.addListener(this.render,"onclick",this.event.bindAsEventListener(this,this.handleClickEvent)),this.event.addListener(this.render,"onmousedown",this.event.bindAsEventListener(this,this.handleMousedownEvent)),1==this.options.accessibility&&this.event.addListener(this.render,"onkeydown",this.event.bindAsEventListener(this,this.handleKeydownEvent)),this.drawFrame(this.options.src);d.Z.getDataPrefix("btn_index");if(this.hasButtons){for(var t=0;t<this.buttonInfo.buttons.length;t++){if(!this.buttonInfo.useButtonFormatter){var e=document.getElementById(this.id+"_header_button_"+t+"_content");e.style.marginTop=-e.offsetHeight/2+"px",e.style.marginLeft=-e.offsetWidth/2+"px"}if(this.buttonInfo.buttons[t].value){var i=document.getElementById(this.id+"_header_button_"+t+"_value");i.style.marginTop=-i.offsetHeight/2+"px",i.style.marginLeft=-i.offsetWidth/2+"px"}this.buttons.push({dataBtn_index:t,disable:!1,hidden:!1,contentDom:e,valueDom:i})}if("right"==this.buttonInfo.alignment){var o=document.getElementById(this.id+"_header_control"),s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"float","right"),WebSquare.style.setStyle(s,"left","-"+o.offsetWidth+"px")}if(1==this.buttonInfo.useButtonFormatter){s=document.getElementById(this.id+"_header_buttonArea");WebSquare.style.setStyle(s,"height",s.offsetHeight-5+"px"),WebSquare.style.setStyle(s,"padding-top","5px")}}this.options.useInitialSizePosition&&this.restore(!0),"overflow"===this.options.windowMoveType&&this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"tabControl"==_this.parentControl.parentControl.options.pluginName||"tabControl"==this.parentControl.parentControl.options.inheritFrom)&&(this._windowMoveType="overflow")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.drawFrame=function(t,e){try{if(this.frame&&(this.removeControl(this.frame),this.frame.remove(),this.frame=null),this.options.src=t||"","iframe"==this.options.frameMode){if(!WebSquare.uiplugin.iframe)return void(o=requires("uiplugin.iframe")).then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));this.frame=new WebSquare.uiplugin.iframe(this.id+"_iframe",{className:"w2window_iframe",src:this.options.src||"",spa:this.options.spa,title:this.options.title,params:this.options.params,popupParam:this.options.popupParam,spaReplaceHistory:this.options.spaReplaceHistory,msaName:this.options.msaName})}else if("wframe"==this.options.frameMode){var i=this.org_id||this.id;this.frame=p.o.create(i+"_wframe",{className:"w2window_wframe",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"wframe",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName,scopeInherit:this.options.scopeInherit,resizeEvent:this.options.resizeEvent,adaptiveFrame:this.options.adaptiveFrame},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;var o=p.o.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}else if("pageFrame"==this.options.frameMode){i=this.org_id||this.id;this.frame=p.o.create(i+"_pageFrame",{className:"w2window_pageFrame",src:this.options.src||"",scope:!0,params:this.options.params,popupParam:this.options.popupParam,pluginName:"pageFrame",preload:!0,frameModal:this.options.frameModal,processMsgFrame:this.options.processMsgFrame,msaName:this.options.msaName
},null,this.scope_obj,this.parentFrame,!0),this.options.frameModal&&(this.frame._targetFrameObjUUID=this._targetFrameObjUUID),this.frame._isWframePopup=this._isWframePopup;o=p.o.initAsync(),s=this.uuid;o.then((function(t,e){WebSquare.idCache[s]._activateFrame()}))}e&&e.dataObject?this.setDataObject(e.dataObject):this._dataObject&&this.setDataObject(this._dataObject);var d=this.uuid;"iframe"==this.options.frameMode?this.frame.bind("onload",(function(){var t=WebSquare.idCache[d];if(WebSquare.event.fireEvent(t,"ondrawcomplete"),1!=t.options.noAttatchedEvent)try{var e=t.frame,i=e.getWindow();if(i){var o={_wq_type:"onwindowloaded",origin:location.origin,uuid:t.uuid},s=n.I._getOrigin(e.getSrc());s&&i.postMessage(o,s)}}catch(t){r.Y.printStackTrace(t,null,this)}})):(this.frame.bind("onload",(function(){a.f.fireEvent(WebSquare.idCache[d],"ondrawcomplete")})),this.frame.options.resizeEvent&&this.frame.bind("onresize",(function(){a.f.fireEvent(WebSquare.idCache[d],"onresize")})));var l="on"+this.frame.options.pluginName+"load";this.frame.bind(l,(function(){a.f.fireEvent(WebSquare.idCache[d],"onwindowload")}));var u="on"+this.frame.options.pluginName+"unload";this.frame.bind(u,(function(){null!=WebSquare.idCache[d]&&a.f.fireEvent(WebSquare.idCache[d],"onwindowunload")})),"iframe"==this.options.frameMode?this._activateFrame():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||(this.frame.popupParam=this.popupParam,this.frame.popupId=this.popupId)}catch(t){h.v.printLog("error : window.drawFrame["+this.id+"]")}},u.prototype._activateFrame=function(){try{var t=this.getElementById(this.id+"_content");this.frame.writeTo(t),this.addControl(this.frame),this.frame.activate()}catch(t){h.v.printLog("error : window.drawFrame["+this.id+"]")}},u.prototype.resizeForIE6=function(t,e,i){try{if(d.Z.isIE(6)){i||(i="windowContainer"),t=parseInt(t,10),e=parseInt(e,10);var o=this.options.useStatusMsg?0:20;"windowContainer"==i&&this.setSize(t-3,e-2),this.dom.windowBody=document.getElementById(this.id+"_body"),this.dom.windowContent=document.getElementById(this.id+"_content"),this.dom.windowStatus=document.getElementById(this.id+"_status"),this.dom.header.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("width",t-5+"px"),this.dom.windowBody.style.setAttribute("height",e-27+"px"),this.dom.windowContent.style.setAttribute("width",t-11+"px"),"popup"==i?this.dom.windowContent.style.setAttribute("height",e-31+o+"px"):this.dom.windowContent.style.setAttribute("height",e-50+o+"px"),"popup"==i?this.frame.setSize(t-11,e-31+o):this.frame.setSize(t-11,e-50+o),this.options.useStatusMsg&&this.dom.windowStatus.style.setAttribute("width",t-11+"px")}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.resizeParentGroup=function(){try{if(this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))return{width:WebSquare.style.getSize(this.parentControl.parentControl.render,"width"),height:this.parentControl.parentControl.options.nameLayerMenu?WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(document.getElementById(this.parentControl.parentControl.id+"_nameContainer"),"height"):WebSquare.style.getSize(this.parentControl.parentControl.render,"height")-WebSquare.style.getSize(this.parentControl.parentControl.dom.toolBar,"height")}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.close=function(t){try{if(!0===this._closed)return;this._closed=!0;try{WebSquare.dragdrop.gDragManager.remove(this.id+"_drag")}catch(t){r.Y.printStackTrace(t,null,this)}if(t&&"object"===(0,o.A)(t)||(t={}),this.options.closeAction){var e=d.Z.getGlobalFunction(this.options.closeAction,this.scope_id);if("function"==typeof e)if(!0!==e.call(this,this.options.title,t))return this._closed=!1,!1}if(!0===t.sync?this._close(!0===t.skipRemove):d.Z.setTimeout(this._close,{
key:this.id+"_onwindowclosed",caller:this,delay:100,args:[{skipRemove:!0===t.skipRemove}]}),1==this.options.accessibility&&""!=this.options._targetId){var i=this.options._targetId;d.Z.requestAnimationFrame((function(){var t=document.getElementById(i);t&&t.focus()}))}return!0}catch(t){r.Y.printStackTrace(t,null,this),this._closed=!1}},u.prototype.forceClose=function(){try{var t=this;setTimeout((function(){"iframe"==t.options.frameMode&&t.frame.setSrc("about:blank");var e={src:t.options.src,title:t.options.windowTitle};a.f.fireEvent(t,"onclose",e),t.remove()}),100)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.toggleMinimize=function(){if(!0===this.options.foldOnMinimized){var t=this.windowInfo.status;if(!this.windowInfo.minimized)switch(t){case"restored":this.windowInfo.setInfo(this.render);break;case"maximized":this.restore(!0),this.windowInfo.setInfo(this.render)}this.fold()}else this.minimize()},u.prototype.minimize=function(t,e){try{!0===t||0==this.windowInfo.minimized&&!1!==t?(this.setStyle("display","none"),this.windowInfo.minimized=!0):(this.setStyle("display","block"),this.windowInfo.minimized=!1),e||a.f.fireEvent(this,"onminimize")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.fold=function(){try{if(0==this.windowInfo.minimized){var t=this.options.foldSize&&this.options.foldSize.width?this.options.foldSize.width:this.dom.clientWidth;this.setStyle("height",this.dom.header.clientHeight+"px"),this.dom.body.style.display="none",this.setStyle("width",t+"px"),this.windowInfo.minimized=!0,this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="none",this.getElementById(this.id+"_resize2").style.display="none",this.getElementById(this.id+"_resize3").style.display="none",this.getElementById(this.id+"_resize4").style.display="none",this.getElementById(this.id+"_resize5").style.display="none",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="none",this.getElementById(this.id+"_resize7").style.display="none",this.getElementById(this.id+"_resize8").style.display="none"))}else{this.options.dragResizable&&(this.getElementById(this.id+"_resize1").style.display="",this.getElementById(this.id+"_resize2").style.display="",this.getElementById(this.id+"_resize3").style.display="",this.getElementById(this.id+"_resize4").style.display="",this.getElementById(this.id+"_resize5").style.display="",this.options.dragResizableHeader&&(this.getElementById(this.id+"_resize6").style.display="",this.getElementById(this.id+"_resize7").style.display="",this.getElementById(this.id+"_resize8").style.display=""));var e=this.render.offsetLeft,i=this.render.offsetTop,o=this.render.clientWidth,s=this.render.clientHeight,n=this.getMaxSize(),d=n.width,h=n.height,l=parseInt(this.windowInfo.width,10)-o,p=parseInt(this.windowInfo.height,10)-s,u=e,w=i,c=0,m=0;if(this.parentControl&&(c=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft),e+l<0&&(u=0),e+l>d+m?u=o<=d?d-(o+l)+m:0:m>u&&(u=m),i+p<0&&(w=0),i+p>h){if(s<=h){if((w=h-(s+p))<c)return w=c,this.setStyle("height",h-c+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else if(w=0+c,s>h)return h-=c,this.setStyle("height",h+"px"),this.setPosition(u,w),this.dom.body.style.display="block",void(this.windowInfo.minimized=!1)}else c>w&&(w=c);this.setPosition(u,w),this.setStyle("width",this.windowInfo.width),this.setStyle("height",this.windowInfo.height),this.dom.body.style.display="block",this.windowInfo.minimized=!1}a.f.fireEvent(this,"onminimize")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.popup=function(){try{a.f.fireEvent(this,"onpopup")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.maximize=function(){try{if(this.removeClass(this.render,"w2window_restored"),this.addClass(this.render,"w2window_maximized"),this.hideTitleOnMaximize){
this.dom.header.className="w2window_header w2window_header_extend";var t="w2window_body w2window_body_extend";this.options.useStatusMsg||(t+=" w2window_no_status"),this.dom.body.className=t}this.dom.body.style.display="block",this.windowInfo.status="maximized",this.windowInfo.drag=!1,this.windowInfo.minimized||this.windowInfo.setInfo(this.render),this.windowInfo.minimized=!1;var e=this.getMaxSize();if(this.parentControl){var i=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;this.render.style.left=o+"px",this.render.style.top=i+"px",this.render.style.height=e.height-i+"px",this.render.style.width=o>0?e.width+"px":""}else this.render.style.left="0px",this.render.style.top="0px",this.render.style.width="",this.render.style.height="";a.f.fireEvent(this,"onmaximize")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.restore=function(t){try{if(this.removeClass(this.render,"w2window_maximized"),this.addClass(this.render,"w2window_restored"),this.hideTitleOnMaximize){this.dom.header.className="w2window_header";var e="w2window_body";this.options.useStatusMsg||(e+=" w2window_no_status"),this.dom.body.className=e}"none"==this.getStyle("display")&&this.setStyle("display","block"),this.dom.body.style.display="block",this.windowInfo.status="restored",!0!==this.options.fixPosition&&(this.windowInfo.drag=!0),this.windowInfo.minimized=!1,this.options.useRestoreDefaultSize?this.windowInfo.getInfo(this.render,"restored"):this.windowInfo.getInfo(this.render),t||a.f.fireEvent(this,"onrestore")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.toggleResize=function(){try{"restored"==this.windowInfo.status?this.maximize():this.restore()}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setStatusMsg=function(t){try{this.options.useStatusMsg&&(this.dom.statusMsg.innerHTML=t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setCustomMsg=function(t){try{this.options.useCustomMsg&&(this.dom.customMsg.innerHTML=t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setSrc=function(t,e){try{if(null!=this.frame)if("iframe"==this.options.frameMode)requires("uiplugin.iframe").then(function(t,e,i){return function(o,s){t.drawFrame(e,i)}}(this,t,e));else"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.setSrc(t,e)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.movable=function(t){try{t=d.Z.getBoolean(t),this.windowInfo.drag=t}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.showModal=function(t){try{if(a.f.fireEvent(this,"ondragstart"),!this.modal){if(this.modal=document.createElement("div"),this.modal.id=this.id+"_modal",this.modal.className="w2modal",d.Z.isIE(6)){this.resizeParentGroup();var e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}t&&!0===t.transparent&&(this.modal.style.backgroundColor="transparent"),this.render.appendChild(this.modal),WebSquare.style.setOpacity(this.modal,.3)}if(this.modal){if(this.modal.style.display="block",d.Z.isIE(6)){this.resizeParentGroup();e=document.documentElement.offsetWidth||0,i=document.documentElement.offsetHeight||0;this.modal.style.width=e+"px",this.modal.style.height=i+"px",this.modal.style.left="-"+this.render.offsetLeft+"px",this.modal.style.top="-"+this.render.offsetTop+"px"}!d.Z.isMobile()&&this.options.frameModal&&this.addClass(document.documentElement,"w2modalopened_ghost")}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.hideModal=function(){try{a.f.fireEvent(this,"ondragend"),this.modal&&(this.modal.style.display="none",!d.Z.isMobile()&&this.options.frameModal&&this.removeClass(document.documentElement,"w2modalopened_ghost"))}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setFocus=function(){try{
d.Z.isMobile()&&this.options.useAtagButton?document.getElementById(this.id+"_start").focus():"iframe"==this.options.frameMode?this.frame.render.contentWindow&&this.frame.render.contentWindow.focus():"wframe"!=this.options.frameMode&&"pageFrame"!=this.options.frameMode||this.frame.focus()}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype._focus=function(){try{d.Z.isMobile()&&this.options.useATagBtn?document.getElementById(this.id+"_start").focus():(this.render.setAttribute("tabindex",0),this.render.focus())}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.getMaxSize=function(){var t,e;(this.parentControl?(t=WebSquare.style.getSize(this.parentControl.render,"width"),e=WebSquare.style.getSize(this.parentControl.render,"height")+(document.documentElement.scrollTop||document.body.scrollTop)):(t=this.options.width,e=this.options.height),this.render)&&(t=t-(parseInt(d.Z.getStyleProperty(this.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"border-right-width"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-left"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-right"),10)||0),e=e-(parseInt(d.Z.getStyleProperty(this.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"border-bottom-width"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-top"),10)||0)-(parseInt(d.Z.getStyleProperty(this.render,"padding-bottom"),10)||0));return{width:t,height:e}},u.prototype.getElementSize=function(t){var e,i;(t||(t=this.render),t)&&(e=t.offsetWidth,i=t.offsetHeight,e=e-(parseInt(d.Z.getStyleProperty(t,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"border-right-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"padding-left"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"padding-right"),10)||0),i=i-(parseInt(d.Z.getStyleProperty(t,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"border-bottom-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"padding-top"),10)||0)-(parseInt(d.Z.getStyleProperty(t,"padding-bottom"),10)||0));return{width:e,height:i}},u.prototype.handleClickEvent=function(t){try{for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_close")&&!0!==this.options.disableCloseButton&&(this.close({isCloseButtonClick:!0}),this.options&&this.options.frameModal&&a.f.stopPropagation(t)),e.match("w2window_minimize")&&(a.f.stopEvent(t),this.toggleMinimize(),this.options.frameModal&&a.f.stopPropagation(t),a.f.fireEvent(this,"onminimizebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){var i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};a.f.fireEvent(this.parentControl.parentControl,"onminimizebtnclick",i)}if(e.match("w2window_restore")&&(this.toggleResize(),this.options.frameModal&&a.f.stopPropagation(t),a.f.fireEvent(this,"onrestorebtnclick",t),this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom))){i={src:this.options.src,title:this.options.title,windowTitle:this.options.windowTitle,id:this.id,windowId:this._windowId};a.f.fireEvent(this.parentControl.parentControl,"onrestorebtnclick",i)}e.match("w2window_popup")&&(a.f.stopEvent(t),this.popup())}e=null}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleFrameMouseDownEvent=function(t){try{a.f.fireEvent(this,"onwindowmousedown",t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleDblclickEvent=function(t){try{if(!1===this.options.useMaximize)return;for(var e=this.event.getTargetIterator(t,this.render);e.next();){if(e.match("w2window_header_button"))return;e.match("w2window_header")&&this.toggleResize()}e=null}catch(t){
r.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoverEvent=function(t){try{for(var e=d.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.addClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.addClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.addClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.addClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.addClass(o,"w2window_header_button_content_on")}i=null}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseoutEvent=function(t){try{a.f.stopEvent(t);for(var e=d.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_minimize")&&this.removeClass(i.getElement(),"w2window_minimize_on"),i.match("w2window_restore")&&this.removeClass(i.getElement(),"w2window_restore_on"),i.match("w2window_close")&&this.removeClass(i.getElement(),"w2window_close_on"),i.match("w2window_popup")&&this.removeClass(i.getElement(),"w2window_popup_on"),i.match("w2window_header_button_content")){var o=i.getElement();this.buttons[Number(o.getAttribute(e))].disable||this.removeClass(o,"w2window_header_button_content_on")}i=null}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleMousedownEvent=function(t){try{this.resizeParentGroup();for(var e=d.Z.getDataPrefix("btn_index"),i=this.event.getTargetIterator(t,this.render);i.next();){if(i.match("w2window_header")&&(!0!==this.options.enableHeaderSelect&&a.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){var s=a.f.getTarget(t);if(!s||s.id==this.id+"_minimize"||s.id==this.id+"_restore"||s.id==this.id+"_close"||s.id==this.id+"_popup")return;var n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",delay:5,mode:"move",windowDragMove:this.options.windowDragMove,makeGhostLayer:!0===this.options.windowDragMove?null:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(d.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(d.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.show(),t.setSize(s,r),t.setPosition(e,i),t.hide(),t},handleStart:function(){!0===n.options.windowDragMove?(n.showModal.call(n,{transparent:!0}),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll()):(n.showModal.call(n),1==WebSquare.getBody().getLayerListener().existShow&&WebSquare.getBody().getLayerListener().hideAll())},handleUpdate:function(t,e,i,o,s){n.render.offsetLeft;var a,h,l=n.render.offsetTop,p=(n.render.clientWidth,n.render.clientHeight,(S=n.getMaxSize()).width),u=S.height,w=0,c=0;if(n.parentControl&&(w=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft,a=WebSquare.style.getAbsoluteLeft(n.parentControl.render),h=WebSquare.style.getAbsoluteTop(n.parentControl.render),n.frame&&("wframe"!==n.frame.getPluginName()&&"pageFrame"!==n.frame.getPluginName()||(a-=c,h-=w))),!0!==n.options.windowDragMove){if(1==n.options.displayParentWindowScroll&&!n.options.frameModal)try{var m=d.Z.getStyleProperty(document.documentElement,"overflow");if(("auto"==m||"scroll"==m)&&!n.modal)return}catch(s){r.Y.printStackTrace(s,null,this)}
n.frame&&"iframe"===n.frame.getPluginName()?(s.clientX<a+40||s.clientX>p+a-40||l+o+1-w<0||s.clientY+20+w>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s):"overflow"===n.options.windowMoveType?(s.clientX<a+20&&i<0||s.clientX>p+a-20&&i>0||s.clientY+1<h||s.clientY>h+u-20&&o>0)&&WebSquare.dragdrop.gDragManager.finish(s):(s.clientX<a+20||s.clientX>p+a-20||s.clientY+1<h||s.clientY>h+u-20)&&WebSquare.dragdrop.gDragManager.finish(s)}else{var f=0,g=0;try{f=WebSquare.style.getAbsoluteLeft(n.render.parentNode),g=WebSquare.style.getAbsoluteTop(n.render.parentNode)}catch(s){r.Y.printStackTrace(s,null,this)}var y=Math.max(t+i-f,0),_=Math.max(e+o-g,0),b=0,v=0;if(!n.parentControl.parentControl||"windowContainer"!=n.parentControl.parentControl.options.pluginName&&"tabControl"!=n.parentControl.parentControl.options.pluginName&&"tabControl"!=n.parentControl.parentControl.options.inheritFrom){var S=n.getMaxSize(),I=(w=n.parentControl?document.documentElement.scrollTop||document.body.scrollTop:0,n.render.offsetWidth),M=n.render.offsetHeight;"overflow"===n.options.windowMoveType&&(I=n.options.minVisibleWindowPixel,M=n.options.minVisibleWindowPixel);var z=S.width-I,C=S.height-M-w;y=Math.min(y,z),_=Math.min(_,C)}else b=n.parentControl?n.parentControl.render.scrollLeft:0,v=n.parentControl?n.parentControl.render.scrollTop:0;n.setPosition(y+b,_+v)}},handleFinish:function(t,e,i,o){if(n.hideModal.call(n),!0!==n.options.windowDragMove){var s=n.render.offsetLeft,a=n.render.offsetTop,h=n.render.clientWidth,l=n.render.clientHeight,p=n.getMaxSize(),u=p.width,w=p.height,c=s+i,m=a+o,f=0,g=0,y=0,_=0,b=0,v=0;if(n.parentControl&&(f=document.documentElement.scrollTop||document.body.scrollTop,g=document.documentElement.scrollLeft||document.body.scrollLeft,n.options.frameModal&&(b=parseInt(n.parentControl.getStyle("border-top-width"))||0,v=parseInt(n.parentControl.getStyle("border-left-width"))||0,u=n.parentControl.render.offsetWidth-v,w=n.parentControl.render.offsetHeight-b,h=n.render.offsetWidth,l=n.render.offsetHeight,n.render.offsetParent!==n.parentControl.render&&(a-=y=n.parentControl.render.offsetTop,s-=_=n.parentControl.render.offsetLeft))),1==n.options.displayParentWindowScroll&&!n.options.frameModal||"overflow"===n.options.windowMoveType)try{var S=d.Z.getStyleProperty(document.documentElement,"overflow");"auto"!=S&&"scroll"!=S&&"overflow"!==n.options.windowMoveType||(u=Math.max(u,h,s+h+i),w=Math.max(w,l,a+l+o))}catch(t){r.Y.printStackTrace(t,null,this)}"overflow"!==n.options.windowMoveType&&s+i<0&&(c=_+v),s+h+i>u+g?c=h<=u?u-h+g+_:_:"overflow"!==n.options.windowMoveType&&g>c&&(c=g),a+o<0&&(m=y+b),a+l+o>w?l<=w?(m=w-l+y)<f&&(m=f,n.render.style.height=w-f+"px"):(m=0+f,l>w&&(w-=f,n.render.style.height=w+"px")):f>m&&(m=f),n.setPosition(c,m)}}})}if(i.match("w2window_header_button")){a.f.stopEvent(t);var h=i.getElement().getAttribute(e);if(!(u=this.buttons[Number(h)]).disable)try{var l=this.buttonInfo.buttons[h].clickAction;if("function"===(0,o.A)(l))l.apply(this,this);else{var p=d.Z.getGlobalFunction(l,this.scope_id);"function"==typeof p&&p(this)}}catch(t){r.Y.printStackTrace(t,null,this)}return}if(i.match("w2window_header_custom_button")){a.f.stopEvent(t);h=i.getElement().getAttribute(e);var u=this.buttons[parseInt(h,10)],w={uniqueId:this.id,btnId:this.id+"_header_button_"+u[e],btnIdx:u[e],disable:u.disable,hidden:u.hidden};return void(u.disable||this.parentControl&&this.parentControl.parentControl&&("windowContainer"==this.parentControl.parentControl.options.pluginName||"windowContainer"==this.parentControl.parentControl.options.inheritFrom)&&a.f.fireEvent(this.parentControl.parentControl,"onclickcustombtn",w))}var c=i.match("w2window_resize"),m=i.match("w2window_resize_bottomLeft");if((c||m)&&(a.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:c?"resize":"resize_bottomLeft",minWidth:n.windowInfo.minWidth,
minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(d.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(d.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){n.showModal.call(n)},handleFinish:function(t,e,i,o,s){n.hideModal.call(n);var r="resize"===this.mode?1:-1,a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=n.render.offsetTop,l=n.render.offsetLeft,p=a+i*r,u=d+o;p<parseInt(n.windowInfo.minWidth,10)&&(p=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-p:i=a-p),u<parseInt(n.windowInfo.minHeight,10)&&(u=parseInt(n.windowInfo.minHeight,10));var w,c=n.getMaxSize(),m="overflow"===n._windowMoveType?n.parentControl.render.scrollLeft:0,f="overflow"===n._windowMoveType?n.parentControl.render.scrollTop:0,g=c.height-h;if(w=1===r?c.width-l:Math.min(l+a,c.width),g+=f,(w+=m)<n.render.clientWidth+i*r&&(p=w),g<n.render.clientHeight+o&&(u=g),n.setSize(p,u),-1===r){var y=Math.max(l+i,0);n.setPosition(y,null)}}})}var f=i.match("w2window_resize_right"),g=i.match("w2window_resize_left");if((f||g)&&(a.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1!==this._direction))){n=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:f?"resize_right":"resize_left",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(d.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(d.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[n._multiViewUUID]||n.showModal.call(n)},handleFinish:function(t,e,i,o,s){var r="resize_right"===this.mode?1:-1;n.hideModal.call(n);var a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=a+i*r;h<parseInt(n.windowInfo.minWidth,10)&&(h=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-h:i=a-h);var l="overflow"===n._windowMoveType?n.parentControl.render.scrollLeft:0,p=("overflow"===n._windowMoveType&&n.parentControl.render.scrollTop,n.getMaxSize().width);if("resize_right"===this.mode&&(p-=n.render.offsetLeft),(p+=l)<n.render.clientWidth+i*r&&(h=p),WebSquare.idCache[n._multiViewUUID]&&1!==n._direction){var u=WebSquare.idCache[n._multiViewUUID],w=parseInt(u.windowInfo.minWidth,10);h>p-w&&(h=p-w),u.setSize(parseInt(u.getStyle("width"),10)-h+a,null),u.setPosition(u.getPosition("left")+h-a,null)}if(n.setSize(h,d),n.frame&&n.frame._processMsgModal&&"block"===n.frame._processMsgModal.render.style.display&&n.frame._processMsgModal.setSize(h,d),-1===r){var c=n.getPosition("left")+i;c+h>p&&(c=p-h),c=Math.max(c,0),n.setPosition(c,null)}}})}var y=i.match("w2window_resize_bottom"),_=i.match("w2window_resize_up");if((y||_&&this.options.dragResizableHeader)&&(a.f.stopEvent(t),1==this.windowInfo.drag&&(!WebSquare.idCache[this._multiViewUUID]||1===this._direction))){n=this;WebSquare.idCache[this._multiViewUUID]&&this.showModal.call(this),WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:y?"resize_bottom":"resize_up",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){
var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(d.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(d.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){WebSquare.idCache[n._multiViewUUID]||n.showModal.call(n)},handleFinish:function(t,e,i,o,s){var r="resize_bottom"===this.mode?1:-1;n.hideModal.call(n);var a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=parseInt(n.getStyle("left"),10),l=parseInt(n.getStyle("top"),10),p=d+o*r;p<parseInt(n.windowInfo.minHeight,10)&&(p=parseInt(n.windowInfo.minHeight,10));"overflow"===n._windowMoveType&&n.parentControl.render.scrollLeft;var u="overflow"===n._windowMoveType?n.parentControl.render.scrollTop:0,w=n.getMaxSize(),c=w.height;r||(c=l+d),1==r?c-=n.render.offsetTop:c=Math.min(l+d,w.height),c+=u;var m=n.render.clientHeight+o*r;if(c<p&&(p=c,1===r&&(o+=m-p)),WebSquare.idCache[n._multiViewUUID]&&1===n._direction){var f=WebSquare.idCache[n._multiViewUUID],g=parseInt(f.windowInfo.minHeight,10);p>c-g&&(p=c-g),f.setSize(null,parseInt(f.getStyle("height"),10)-p+d),f.setPosition(null,f.getPosition("top")+p-d)}else if("resize_up"===this.mode){var y=l-o*r;y<0&&(y=0),y+p>c&&(y=c-p),n.setPosition(h,y)}n.setSize(a,p)}})}if(this.options.dragResizableHeader){var b=i.match("w2window_resize_upRight"),v=i.match("w2window_resize_upLeft");if((b||v)&&(a.f.stopEvent(t),1==this.windowInfo.drag&&!WebSquare.idCache[this._multiViewUUID])){n=this;WebSquare.dragdrop.gDragManager.activate(t,this.render,{id:this.id+"_drag",className:"w2drag_resize",mode:b?"resize_upRight":"resize_upLeft",minWidth:n.windowInfo.minWidth,minHeight:n.windowInfo.minHeight,makeGhostLayer:function(t){var e=WebSquare.style.getAbsoluteLeft(n.render),i=WebSquare.style.getAbsoluteTop(n.render),o=n.getElementSize(n.render),s=o.width,r=o.height;return s=s-(parseInt(d.Z.getStyleProperty(t.render,"border-left-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-right-width"),10)||0),r=r-(parseInt(d.Z.getStyleProperty(t.render,"border-top-width"),10)||0)-(parseInt(d.Z.getStyleProperty(t.render,"border-bottom-width"),10)||0),t.setSize(s,r),t.setPosition(e,i),t},handleStart:function(){n.showModal.call(n)},handleFinish:function(t,e,i,o,s){n.hideModal.call(n);var r="resize_upRight"===this.mode?1:-1,a=parseInt(n.getStyle("width"),10),d=parseInt(n.getStyle("height"),10),h=n.render.offsetTop,l=n.render.offsetLeft,p="overflow"===n._windowMoveType?n.parentControl.render.scrollLeft:0,u="overflow"===n._windowMoveType?n.parentControl.render.scrollTop:0,w=a+i*r,c=d-o;w<parseInt(n.windowInfo.minWidth,10)&&(w=parseInt(n.windowInfo.minWidth,10),1===r?i+=a-w:i=a-w),c<parseInt(n.windowInfo.minHeight,10)&&(o=d-(c=parseInt(n.windowInfo.minHeight,10)));var m,f,g=n.getMaxSize();1===r?(m=g.width-l,f=h+d):(m=Math.min(l+a,g.width),f=Math.min(h+d,g.height));var y=d-o;(m+=p)<a+i*r&&(w=m),(f+=u)<y&&(c=f,1===r&&(o+=y-c)),n.setSize(w,c);var _=h+o,b=l;-1===r&&(_=Math.max(_,0),b=Math.max(l+i,0)),_+c>=f&&(_=f-c),n.setPosition(b,_)}})}}}i=null}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleMouseupEvent=function(t){try{a.f.stopEvent(t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleFrameKeyupEvent=function(t){try{a.f.fireEvent(this,"onwindowkeyup",t)}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.checkLoadEvent=function(){try{if(this.frame&&this.frame.render){var t=this.frame.render.contentWindow;t.WebSquare&&t.WebSquare.scriptSectionExcuteFlag&&"executed"===t.WebSquare.scriptSectionExcuteFlag&&(d.Z.clearInterval(this.id+"_checkLoadEvent"),d.Z.fullViewed&&d.Z.zoomed(t.document.body,"1"))}}catch(t){}},u.prototype.handleSelectStartEvent=function(t){try{
for(var e=this.event.getTargetIterator(t,this.render);e.next();)(!0!==this.options.enableHeaderSelect&&e.match("w2window_header")||e.match("w2window_status"))&&a.f.preventDefault(t);e=null}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.handleKeydownEvent=function(t){try{var e=t.charCode?t.charCode:t.keyCode;if(1==this.options.accessibility&&""!=this.options._targetId){if(27==e)this.close({isCloseButtonClick:!0});else if(t.shiftKey&&9==e){if((o=d.Z._getTabbableComp(this.render)).length>=1&&t.target==o[0])if(s=document.getElementById(this.id+"_close"))return s.focus(),void a.f.preventDefault(t)}for(var i=this.event.getTargetIterator(t,this.render);i.next();)if(i.match("w2window_close"))if(13==e||32==e)this.handleClickEvent(t);else if(t.shiftKey||9!=e){if(t.shiftKey&&9==e){if(3==(o=d.Z._getTabbableComp(this.render)).length)return o[2].focus(),void a.f.preventDefault(t)}}else{var o,s;if((o=d.Z._getTabbableComp(this.render)).length>=1)o[0].focus(),a.f.preventDefault(t);else if(s=document.getElementById(this.id+"_close"))return void s.focus()}return void(i=null)}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setWindowTitle=function(t){try{var e=document.getElementById(this.id+"_header_title");if(e){if(e.innerHTML=t,this.options.windowTitle=t,this.options.windowTooltipDisplay&&this.render)document.getElementById(this.id+"_header").setAttribute("title",t);!0===this.options.useATagTitle&&e.setAttribute("title",t)}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setWindowHeaderHTML=function(t){try{if(t){try{var e=d.Z.getGlobalFunction(t,this.scope_id);"function"==typeof e?e():e}catch(e){t}var i=this.getElementById(this.id+"_header");i&&(i.innerHTML=t,this.options.windowHeaderHTML=t)}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setButtonCondition=function(t,e,i){try{var o=this.buttons[Number(e)];if(o){var s=o.contentDom;i=d.Z.getBoolean(i);switch(t){case"hidden":o.visisble=i,s.parentNode.style.display=i?"none":"inline-block";break;case"disabled":o.disable=i,i?this.addClass(s,"w2window_header_button_disabled"):this.removeClass(s,"w2window_header_button_disabled")}}}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setCloseButtonStatus=function(t){try{this.options.disableCloseButton=!d.Z.getBoolean(t);var e=document.getElementById(this.id+"_close");this.options.disableCloseButton?this.addClass(e,"w2window_close_disabled"):this.removeClass(e,"w2window_close_disabled")}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.setDataObject=function(t){try{this.frame?(this.frame.setDataObject(t),this._dataObject&&delete this._dataObject):this._dataObject=t}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype._getDataObject=function(){try{return this.frame?this.frame._getDataObject():this._dataObject}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype.finalize=function(){try{l.q.prototype.finalize.call(this),!0!==this._closed&&this.close({sync:!0,skipRemove:!0})}catch(t){r.Y.printStackTrace(t,null,this)}},u.prototype._close=function(t){try{if(!this.options)return;var e={src:this.options.src,title:this.options.windowTitle,id:this.id};a.f.fireEvent(this,"onbeforeclose",e);var i=this.options.parent&&this.options.parent.options.spaIframeMaxSize>this.options.parent.storedFrame.length;if("iframe"==this.options.frameMode)if(i)this.frame.setSrc(WebSquare.net.getBlankXML());else{try{var o=n.I.getConfiguration("/WebSquare/clearMemory/@value");d.Z.isIEAllVersion()&&"true"==o||this.frame.getWindow().WebSquare&&this.frame.getWindow().WebSquare.clearMemory()}catch(t){h.v.printLog("WebSquare.uiplugin.window._close : skip clearMemory :"+this.id)}this.frame.setSrc("about:blank")}if(a.f.fireEvent(this,"onclose",e),i){this.render&&(this.render.style.display="none");for(var s=!1,l=0;l<this.options.parent.storedFrame.length;l++)if(this.options.parent.storedFrame[l]==this.id){s=!0;break}s||this.options.parent.storedFrame.push(this.id)
}else this.remove&&!0!==t&&("wframe"!==this.options.frameMode&&"pageFrame"!=this.options.frameMode||a.f.fireEvent(this,"onwindowunload"),this.remove())}catch(t){r.Y.printStackTrace(t,null,this),this._closed=!1}}}}]);