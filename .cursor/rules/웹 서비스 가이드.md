{
  "문서정보": {
    "제목": "ProWorks5 웹서비스 가이드",
    "설명": "ProWorks5 프레임워크에서 웹서비스 이용을 위한 개발자 가이드",
    "대상": "웹서비스를 이용하고자 하는 개발자",
    "활용대상자": [
      "시스템 개발자"
    ]
  },

  "소개": {
    "기반": "ProWorks5 프레임워크 + CXF",
    "제공기능": [
      "SOAP Provider 기능",
      "CXF를 이용한 SOAP 개발",
      "웹서비스 서버/클라이언트 통합 지원"
    ],
    "목적": "효과적인 SOAP 개발 진행 지원"
  },

  "웹서비스서버설정": {
    "개요": "어노테이션과 스프링빈 설정파일을 통한 웹서비스 설정",
    "전제조건": "웹서비스 환경 구성 설정 완료",
    
    "설정절차": [
      {
        "순서": 1,
        "내용": "웹서비스 적용할 서비스 인터페이스 선택",
        "상세": "서버단 웹서비스 설정 대상 인터페이스 결정"
      },
      {
        "순서": 2,
        "내용": "서비스 인터페이스에 @WebService 어노테이션 추가",
        "상세": "인터페이스 명칭 위에 @WebService 어노테이션 입력"
      },
      {
        "순서": 3,
        "내용": "웹서비스 인터페이스 구현 서비스 선택",
        "상세": "어노테이션이 적용된 인터페이스 구현체 선택"
      },
      {
        "순서": 4,
        "내용": "서비스 구현체에 @WebService 어노테이션 설정",
        "상세": "endpointInterface 키와 값 추가 입력"
      },
      {
        "순서": 5,
        "내용": "스프링 설정 파일 구성",
        "상세": "context-webservice.xml 파일에 EndPoint 설정"
      },
      {
        "순서": 6,
        "내용": "웹서비스 등록 확인",
        "상세": "웹서비스 URL을 통한 서비스 목록 확인"
      }
    ],

    "어노테이션설정": {
      "서비스인터페이스": {
        "어노테이션": "@WebService",
        "위치": "인터페이스 명칭 위",
        "예시코드": [
          "@WebService",
          "public interface UserService {",
          "  public List<UserVo> getUserList(UserVo userVo);",
          "  public int insertUser(UserVo userVo);",
          "}"
        ]
      },
      
      "서비스구현체": {
        "어노테이션": "@WebService",
        "추가속성": "endpointInterface",
        "속성값": "웹서비스가 설정된 인터페이스 풀패키지명",
        "예시코드": [
          "@WebService(endpointInterface = \"com.sample.service.UserService\")",
          "public class UserServiceImpl implements UserService {",
          "  @Override",
          "  public List<UserVo> getUserList(UserVo userVo) {",
          "    // 구현 로직",
          "    return userDAO.selectUserList(userVo);",
          "  }",
          "}"
        ]
      }
    },

    "스프링설정": {
      "파일위치": "src/main/resource/inswave/spring/context-webservice.xml",
      "설정내용": {
        "서비스구현체위치": "웹서비스 EndPoint로 사용할 서비스 구현체",
        "접근URL": "해당 서비스에 접근할 수 있는 URL"
      },
      "권장사항": "address 속성의 URL은 서비스의 Object명으로 지정",
      
      "예시설정": [
        "<!-- 웹서비스 EndPoint 설정 -->",
        "<jaxws:endpoint",
        "  id=\"userService\"",
        "  implementor=\"com.sample.service.impl.UserServiceImpl\"",
        "  address=\"/UserService\" />",
        "",
        "<jaxws:endpoint",
        "  id=\"orderService\"", 
        "  implementor=\"com.sample.service.impl.OrderServiceImpl\"",
        "  address=\"/OrderService\" />"
      ]
    },

    "서비스확인": {
      "접근URL": "[웹서비스서버URL]/webservice",
      "확인내용": [
        "웹서비스로 지정된 서비스 목록",
        "서비스별 메소드 목록 (인터페이스 정의 메소드만 해당)",
        "WSDL 문서 링크"
      ],
      
      "WSDL문서": {
        "접근방법": "Wsdl 우측 경로 클릭",
        "확인내용": "해당 서비스의 WSDL 문서 화면 표시",
        "저장방법": "마우스 우클릭으로 XML 형식 저장 후 확장명을 'wsdl'로 변경"
      },

      "예시URL": [
        "http://localhost:8080/SampleWeb/webservice",
        "http://localhost:8080/SampleWeb/webservice/UserService?wsdl",
        "http://localhost:8080/SampleWeb/webservice/OrderService?wsdl"
      ]
    }
  },

  "웹서비스클라이언트설정": {
    "개요": "프로젝트에 생성된 WSDL과 CXF를 이용한 웹서비스 클라이언트 생성",
    "사용기술": "Apache CXF 2.x",
    
    "생성절차": [
      {
        "순서": 1,
        "내용": "웹서비스 클라이언트 생성 시작",
        "방법": "프로젝트 우클릭 → New → Other → Web Service Client"
      },
      {
        "순서": 2,
        "내용": "WSDL 경로 입력",
        "방법": "Service definition에 WSDL 경로를 Browse 버튼으로 입력"
      },
      {
        "순서": 3,
        "내용": "웹서비스 런타임 확인",
        "요구사항": "Web service runtime이 'Apache CXF 2.x'인지 확인"
      },
      {
        "순서": 4,
        "내용": "런타임 변경 (필요시)",
        "방법": "Apache CXF 2.x가 아닐 경우 Web service runtime을 CXF로 변경"
      },
      {
        "순서": 5,
        "내용": "패키지명 설정",
        "방법": "Package Name을 프로젝트에 맞게 변경"
      },
      {
        "순서": 6,
        "내용": "네임스페이스 매핑 설정",
        "방법": "'Specify WSDL Namespace to Package Name Mappings' 선택 후 패키지명 동일하게 변경"
      },
      {
        "순서": 7,
        "내용": "생성된 소스 정리",
        "작업": "테스트 소스(*_Client.java) 삭제, 나머지 소스는 수정 금지"
      }
    ],

    "설정상세": {
      "WSDL경로": {
        "입력방법": "[Browse implementation files for specified service type] 버튼 사용",
        "경로예시": [
          "http://localhost:8080/SampleWeb/webservice/UserService?wsdl",
          "file:///C:/project/wsdl/UserService.wsdl",
          "프로젝트 내 저장된 WSDL 파일 경로"
        ]
      },
      
      "패키지명설정": {
        "설정위치": "Package Name 필드",
        "권장형식": "프로젝트 패키지 구조에 맞는 명명",
        "예시": [
          "com.sample.webservice.client",
          "com.company.project.ws.client",
          "com.example.service.client"
        ]
      },
      
      "네임스페이스매핑": {
        "설정목적": "WSDL 네임스페이스와 Java 패키지 매핑",
        "설정방법": "서비스 WSDL Namespace 우측 패키지명을 Package Name과 동일하게 설정"
      }
    },

    "생성결과": {
      "생성위치": "프로젝트 java 소스 내 입력한 패키지명",
      "생성파일": [
        "서비스 인터페이스 파일",
        "서비스 구현체 파일", 
        "데이터 타입 클래스들",
        "팩토리 클래스",
        "*_Client.java (테스트용 - 삭제 권장)"
      ],
      
      "주의사항": [
        "테스트 소스(*_Client.java)는 삭제",
        "생성된 소스들은 수정하지 않는 것을 권장",
        "필요시 별도 래퍼 클래스 작성"
      ]
    }
  },

  "웹서비스사용예시": {
    "서버측구현": {
      "인터페이스예시": [
        "@WebService",
        "public interface UserWebService {",
        "  /**",
        "   * 사용자 목록 조회",
        "   * @param request 조회 요청",
        "   * @return 사용자 목록 응답",
        "   */",
        "  public UserListResponse getUserList(UserListRequest request);",
        "  ",
        "  /**",
        "   * 사용자 등록",
        "   * @param request 등록 요청",
        "   * @return 등록 결과 응답",
        "   */",
        "  public UserCreateResponse createUser(UserCreateRequest request);",
        "}"
      ],
      
      "구현체예시": [
        "@WebService(endpointInterface = \"com.sample.webservice.UserWebService\")",
        "public class UserWebServiceImpl implements UserWebService {",
        "  ",
        "  @Autowired",
        "  private UserService userService;",
        "  ",
        "  @Override",
        "  public UserListResponse getUserList(UserListRequest request) {",
        "    UserListResponse response = new UserListResponse();",
        "    try {",
        "      UserVo userVo = new UserVo();",
        "      userVo.setDeptName(request.getDeptName());",
        "      ",
        "      List<UserVo> userList = userService.getUserList(userVo);",
        "      response.setUserList(userList);",
        "      response.setResultCode(\"SUCCESS\");",
        "    } catch (Exception e) {",
        "      response.setResultCode(\"ERROR\");",
        "      response.setErrorMessage(e.getMessage());",
        "    }",
        "    return response;",
        "  }",
        "}"
      ]
    },

    "클라이언트사용": {
      "서비스호출예시": [
        "// 웹서비스 클라이언트 사용 예시",
        "public class UserWebServiceClient {",
        "  ",
        "  public void callUserWebService() {",
        "    try {",
        "      // 서비스 생성",
        "      UserWebService_Service service = new UserWebService_Service();",
        "      UserWebService port = service.getUserWebServiceImplPort();",
        "      ",
        "      // 요청 객체 생성",
        "      UserListRequest request = new UserListRequest();",
        "      request.setDeptName(\"개발팀\");",
        "      ",
        "      // 웹서비스 호출",
        "      UserListResponse response = port.getUserList(request);",
        "      ",
        "      // 응답 처리",
        "      if (\"SUCCESS\".equals(response.getResultCode())) {",
        "        List<UserVo> userList = response.getUserList();",
        "        for (UserVo user : userList) {",
        "          System.out.println(\"User: \" + user.getUserName());",
        "        }",
        "      } else {",
        "        System.out.println(\"Error: \" + response.getErrorMessage());",
        "      }",
        "    } catch (Exception e) {",
        "      e.printStackTrace();",
        "    }",
        "  }",
        "}"
      ]
    }
  },

  "데이터타입정의": {
    "요청응답객체": {
      "명명규칙": "[서비스명][Request/Response]",
      "구성요소": [
        "비즈니스 데이터",
        "결과 코드",
        "에러 메시지"
      ],
      
      "예시": [
        "// 사용자 목록 조회 요청",
        "public class UserListRequest {",
        "  private String deptName;",
        "  private String userStatus;",
        "  // getter/setter",
        "}",
        "",
        "// 사용자 목록 조회 응답", 
        "public class UserListResponse {",
        "  private List<UserVo> userList;",
        "  private String resultCode;",
        "  private String errorMessage;",
        "  // getter/setter",
        "}"
      ]
    },

    "복합타입처리": {
      "List타입": "List<객체타입> 형태로 정의",
      "중첩객체": "객체 내 다른 객체 포함 가능",
      "배열처리": "Array 타입보다 List 타입 권장",
      
      "예시": [
        "public class OrderResponse {",
        "  private OrderInfo orderInfo;        // 중첩 객체",
        "  private List<OrderItem> itemList;   // List 타입",
        "  private String[] statusHistory;     // 배열 타입",
        "  // getter/setter",
        "}"
      ]
    }
  },

  "성능최적화": {
    "권장사항": [
      "대용량 데이터 처리 시 페이징 적용",
      "불필요한 필드 제외하고 필요한 데이터만 전송",
      "적절한 타임아웃 설정",
      "연결 풀 사용으로 성능 향상"
    ],

    "페이징처리": {
      "요청객체": [
        "public class PagedRequest {",
        "  private int pageNumber = 1;",
        "  private int pageSize = 100;",
        "  // 기타 검색 조건",
        "}"
      ],
      
      "응답객체": [
        "public class PagedResponse {",
        "  private List<DataObject> dataList;",
        "  private int totalCount;",
        "  private int pageNumber;",
        "  private int pageSize;",
        "  private boolean hasNext;",
        "}"
      ]
    }
  },

  "에러처리": {
    "표준응답구조": {
      "결과코드": [
        "SUCCESS: 정상 처리",
        "ERROR: 일반 오류",
        "VALIDATION_ERROR: 입력 검증 오류",
        "BUSINESS_ERROR: 업무 로직 오류",
        "SYSTEM_ERROR: 시스템 오류"
      ],
      
      "에러정보": [
        "errorCode: 오류 코드",
        "errorMessage: 오류 메시지",
        "errorDetail: 상세 오류 정보"
      ]
    },

    "예외처리패턴": [
      "try {",
      "  // 비즈니스 로직 수행",
      "  response.setResultCode(\"SUCCESS\");",
      "} catch (ValidationException e) {",
      "  response.setResultCode(\"VALIDATION_ERROR\");",
      "  response.setErrorMessage(e.getMessage());",
      "} catch (BusinessException e) {",
      "  response.setResultCode(\"BUSINESS_ERROR\");", 
      "  response.setErrorMessage(e.getMessage());",
      "} catch (Exception e) {",
      "  response.setResultCode(\"SYSTEM_ERROR\");",
      "  response.setErrorMessage(\"시스템 오류가 발생했습니다.\");",
      "  logger.error(\"Unexpected error\", e);",
      "}"
    ]
  },

  "보안고려사항": [
    "HTTPS 사용으로 데이터 암호화",
    "인증/인가 메커니즘 적용",
    "입력값 검증 및 SQL Injection 방지",
    "적절한 로깅으로 보안 감사 지원",
    "민감한 데이터 마스킹 처리"
  ],

  "모니터링": {
    "로깅설정": [
      "웹서비스 호출 로그",
      "성능 측정 로그",
      "에러 발생 로그",
      "보안 관련 로그"
    ],

    "성능지표": [
      "평균 응답 시간",
      "최대 응답 시간",
      "처리량 (TPS)",
      "에러율"
    ]
  },

  "주요특징": [
    "Apache CXF 기반 SOAP 웹서비스 지원",
    "어노테이션 기반 간편한 서비스 설정",
    "스프링 프레임워크와 완벽 통합",
    "WSDL 기반 자동 클라이언트 생성",
    "표준화된 에러 처리 지원",
    "성능 최적화 기능 제공"
  ],

  "개발팁": [
    "서비스 인터페이스 설계 시 버전 관리 고려",
    "복잡한 비즈니스 로직은 별도 서비스 계층에서 처리",
    "웹서비스는 얇은 래퍼 역할로 제한",
    "WSDL 문서는 버전 관리 대상에 포함",
    "클라이언트 코드 자동 생성 후 수정 금지",
    "테스트 케이스 작성으로 품질 보장"
  ]
}
